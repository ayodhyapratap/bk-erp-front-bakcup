(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{1590:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return Ke}));var n=a(1),i=a.n(n),r=a(1577),s=a(18),l=a(1579),o=a(732),c=a(1608),d=a(503),u=a(448),p=a(115),m=a(435),h=a(434),y=a(1593),f=a(1105),b=a(437),g=a(440);function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}class v extends i.a.Component{constructor(e){var t,a,n;super(e),n=()=>{const e=this.state.redirect;this.setState({redirect:!e})},(a="changeRedirect")in(t=this)?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n,this.state={editData:this.props.editData?this.props.editData:null}}componentDidMount(){this.props.match.params.id&&(this.state.editData||this.loadData())}loadData(){const e=this;Object(m.c)(Object(m.g)(h.Fe,[this.props.match.params.id]),(function(t){e.setState({editData:t})}),(function(){}))}render(){const e=this,t=[{label:"Name",key:"name",initialValue:this.state.editData?this.state.editData.name:null,type:b.db,required:!0},{label:"Description",key:"description",initialValue:this.state.editData?this.state.editData.description:null,type:b.db}];let a;this.state.editData&&(a={successFn(t){Object(m.a)(b.sc,"success"),e.props.loadData()},errorFn(){},action:Object(m.g)(h.Fe,[this.props.match.params.id]),method:"put"});const n=y.a.create()(g.a),r={successFn(t){Object(m.a)(b.sc,"success"),e.props.loadData(),e.props.history&&e.props.history.replace("/inventory/vendor")},errorFn(){},action:Object(m.g)(h.of,[e.props.active_practiceId]),method:"post"},l=[{key:"practice",value:this.props.active_practiceId}];return i.a.createElement(f.a,null,i.a.createElement(c.a,null,i.a.createElement(s.b,{exact:!0,path:"/inventory/vendor/edit/:id",render:e=>this.props.match.params.id?i.a.createElement(n,E({defaultValues:l,title:"Edit Vendor",changeRedirect:this.changeRedirect,formProp:a},e,{fields:t})):i.a.createElement(s.a,{to:"/inventory/vendor"})}),i.a.createElement(s.b,{exact:!0,path:"/inventory/vendor/add",render:e=>i.a.createElement(n,E({title:"Add Vendor",changeRedirect:this.changeRedirect},e,{formProp:r,fields:t}))})),this.state.redirect&&i.a.createElement(s.a,{to:"/inventory/vendor"}))}}var _=a(439),I=a(459);function x(){return(x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(Object(a),!0).forEach((function(t){D(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function D(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class k extends i.a.Component{constructor(e){super(e),this.state={active_practiceId:this.props.active_practiceId,vendors:null},this.loadData=this.loadData.bind(this)}componentDidMount(){this.loadData()}loadData(){const e=this;Object(m.c)(Object(m.g)(h.of,[this.props.active_practiceId]),(function(t){e.setState({vendors:t})}),(function(){}))}deleteVendor(e){const t=this,a=S(S({},e),{},{is_active:!1});console.log("is_active",a);Object(m.m)(Object(m.g)(h.Fe,[e]),a,(function(e){t.loadData(),console.log("Deleted")}),(function(){}))}render(){const e=this,t=[{title:"Name",key:"name",dataIndex:"name"},{title:"Details",key:"details",dataIndex:"description"},{title:"Action",render:t=>i.a.createElement("div",null,i.a.createElement(p.b,{to:"/inventory/vendor/edit/".concat(t.id)},"Edit"),i.a.createElement(l.a,{type:"vertical"}),i.a.createElement(o.a,{title:"Are you sure delete this item?",onConfirm:()=>e.deleteVendor(t.id),okText:"Yes",cancelText:"No"},i.a.createElement("a",{disabled:!e.props.activePracticePermissions.DeleteVendor},"Delete")))}];return i.a.createElement("div",null,i.a.createElement(s.d,null,i.a.createElement(s.b,{exact:!0,path:"/inventory/vendor/add",render:t=>e.props.activePracticePermissions.EditVendor||e.props.allowAllPermissions?i.a.createElement(v,x({},this.state,t,{loadData:e.loadData})):i.a.createElement(I.a,null)}),i.a.createElement(s.b,{exact:!0,path:"/inventory/vendor/edit/:id",render:t=>e.props.activePracticePermissions.EditVendor||e.props.allowAllPermissions?i.a.createElement(v,x({},this.state,t,{loadData:e.loadData})):i.a.createElement(I.a,null)}),i.a.createElement(c.a,{title:"Vendors",extra:e.props.activePracticePermissions.EditVendor?i.a.createElement(p.b,{to:"/inventory/vendor/add"}," ",i.a.createElement(d.a,{type:"primary"},i.a.createElement(u.a,{type:"plus"})," Add")):null},i.a.createElement(_.a,{columns:t,dataSource:this.state.vendors,hideReport:!e.props.activePracticePermissions.ExportVendor}))))}}var P=a(1183),C=a(763),j=a(1587),w=a(1589),M=a(436),L=a.n(M);class T extends i.a.Component{constructor(e){super(e),this.state={editData:this.props.editData?this.props.editData:null}}changeRedirect(){const e=this.state.redirect;this.setState({redirect:!e})}componentDidMount(){this.props.match.params.id&&(this.state.editData||this.loadData()),this.loadExpensetypes(),this.loadPaymentModes(),this.loadVendors()}loadPaymentModes(){const e=this;Object(m.c)(Object(m.g)(h.zd,[this.props.active_practiceId]),(function(t){e.setState({paymentModes:t})}),(function(){}))}loadData(){const e=this;Object(m.c)(Object(m.g)(h.le,[this.props.match.params.id]),(function(t){e.setState({editData:t})}),(function(){}))}loadExpensetypes(){const e=this;Object(m.c)(Object(m.g)(h.Jb,[this.props.active_practiceId]),(function(t){e.setState({expense_types:t})}),(function(){}))}loadVendors(){const e=this;Object(m.c)(Object(m.g)(h.of,[this.props.active_practiceId]),(function(t){e.setState({vendors:t})}),(function(){}))}render(){const e=[];this.state.paymentModes&&this.state.paymentModes.forEach((function(t){e.push({label:t.mode,value:t.id})}));const t=[];this.state.expense_types&&this.state.expense_types.forEach((function(e){t.push({label:e.name,value:e.id})}));const a=[];this.state.vendors&&this.state.vendors.forEach((function(e){a.push({label:e.name,value:e.id})}));const n=[{label:"Expense Date",key:"expense_date",required:!0,initialValue:this.state.editData?this.state.editData.expense_date:L()(),type:b.N,format:"YYYY-MM-DD"},{label:"Amount",key:"amount",required:!0,initialValue:this.state.editData?this.state.editData.amount:null,type:b.Bb,follow:"INR"},{label:"Vendor",key:"vendor",type:b.mc,initialValue:this.state.editData?this.state.editData.vendors:null,options:a},{label:"Expense type",key:"expense_type",type:b.mc,initialValue:this.state.editData&&this.state.editData.expense_type?this.state.editData.expense_type.id:null,options:t},{label:"Payment Mode",key:"payment_mode",type:b.mc,required:!0,initialValue:this.state.editData&&this.state.editData.payment_mode?this.state.editData.payment_mode.id:null,options:e},{label:"Bank Name",key:"bank_name",type:b.db,initialValue:this.state.editData?this.state.editData.bank_name:null},{label:"Remark",key:"remark",type:b.vc,minRows:2,maxRows:6,initialValue:this.state.editData?this.state.editData.remark:null}];let r;const l=this;this.state.editData&&(r={successFn(e){Object(m.a)(b.sc,"success"),l.props.loadData(),l.changeRedirect(),l.props.history&&l.props.history.replace("/inventory/expenses")},errorFn(){},action:Object(m.g)(h.le,[this.props.match.params.id]),method:"put"});const o=y.a.create()(g.a),d={successFn(e){Object(m.a)(b.sc,"success"),l.props.loadData(),l.changeRedirect(),l.props.history&&l.props.history.replace("/inventory/expenses")},errorFn(){},action:h.Gb,method:"post"},u=[{key:"practice",value:this.props.active_practiceId}];return i.a.createElement(f.a,null,i.a.createElement(c.a,null,i.a.createElement(s.b,{exact:!0,path:"/inventory/expenses/edit/:id",render:()=>this.props.match.params.id?i.a.createElement(o,{defaultValues:u,title:"Edit Expense",changeRedirect:this.changeRedirect,formProp:r,fields:n}):i.a.createElement(s.a,{to:"/inventory/expenses"})}),i.a.createElement(s.b,{exact:!0,path:"/inventory/expenses/add",render:()=>i.a.createElement(o,{title:"Add Expenses",changeRedirect:this.changeRedirect,formProp:d,fields:n,defaultValues:u})})),this.state.redirect&&i.a.createElement(s.a,{to:"/inventory/expenses"}))}}function A(){return(A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function V(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class F extends i.a.Component{constructor(e){super(e),V(this,"changeExpenseFilters",(e,t)=>{const a=this;this.setState({[e]:t},(function(){a.loadData()}))}),V(this,"loadData",()=>{const e=this;e.setState({loading:!0});Object(m.c)(h.Gb,(function(t){e.setState({expenses:t,loading:!1}),console.log("log data",e.state.expenses)}),(function(){e.setState({loading:!1})}),{practice:e.props.active_practiceId,payment_mode:e.state.selectedPaymentMode,expense_type:e.state.selectedExpenseType,start:e.state.selectedStartDate.format(),end:e.state.selectedEndDate.format()})}),this.state={active_practiceId:this.props.active_practiceId,expenses:null,expenseTypes:[],loading:!0,paymentModes:[],selectedExpenseType:null,selectedPaymentMode:null,selectedStartDate:L()().subtract(1,"month"),selectedEndDate:L()()},this.loadData=this.loadData.bind(this)}componentDidMount(){this.loadExpenseTypes(),this.loadPaymentModes(),this.loadData()}loadExpenseTypes(e=!1){const t=this,a=function(a){console.log("get table"),e?t.setState({deletedExpenses:a,deletedLoading:!1}):t.setState({expenseTypes:a})},n=function(){};e?Object(m.c)(Object(m.g)(h.Jb,[this.props.active_practiceId]),a,n,{deleted:!0}):Object(m.c)(Object(m.g)(h.Jb,[this.props.active_practiceId]),a,n)}loadPaymentModes(){const e=this;Object(m.c)(Object(m.g)(h.zd,[this.props.active_practiceId]),(function(t){console.log("get table"),e.setState({paymentModes:t})}),(function(){}))}deleteObject(e,t){const a=this,n={};n.id=e.id,n.is_active=t;Object(m.m)(Object(m.g)(h.le,[e.id]),n,(function(e){a.loadData(),a.state.showDeleted&&a.loadData(!0)}),(function(){}))}render(){const e=this,t=[{title:"Expense Date",key:"expense_date",dataIndex:"expense_date",export:e=>L()(e).format("lll"),render:e=>L()(e).format("lll")},{title:"Expense Type",key:"expense_type",dataIndex:"expense_type.name"},{title:"Vendor",key:"vendor",dataIndex:"vendor.name"},{title:"Payment Mode",key:"payment_mode",dataIndex:"payment_mode.mode"},{title:"Amount",key:"amount",dataIndex:"amount"},{title:"Bank Name",key:"bank_name",dataIndex:"bank_name"},{title:"Remark",key:"remark",dataIndex:"remark"},{title:"Action",render:t=>i.a.createElement("div",null,e.props.activePracticePermissions.EditExpenses||e.props.allowAllPermissions?i.a.createElement(p.b,{to:"/inventory/expenses/edit/".concat(t.id)},"Edit"):null,i.a.createElement(l.a,{type:"vertical"}),e.props.activePracticePermissions.DeleteExpenses||e.props.allowAllPermissions?i.a.createElement(o.a,{title:"Are you sure to delete this?",onConfirm:()=>e.deleteObject(t,!1),okText:"Yes",cancelText:"No"},i.a.createElement("a",null,"Delete")):null)}];return i.a.createElement("div",null,i.a.createElement(s.d,null,i.a.createElement(s.b,{exact:!0,path:"/inventory/expenses/add",render:t=>e.props.activePracticePermissions.EditExpenses||e.props.allowAllPermissions?i.a.createElement(T,A({},this.state,t,{loadData:this.loadData})):i.a.createElement(I.a,null)}),i.a.createElement(s.b,{exact:!0,path:"/inventory/expenses/edit/:id",render:t=>e.props.activePracticePermissions.EditExpenses||e.props.allowAllPermissions?i.a.createElement(T,A({},this.state,t,{loadData:this.loadData})):i.a.createElement(I.a,null)}),i.a.createElement(c.a,{title:"Expenses",extra:e.props.activePracticePermissions.EditExpenses||e.props.allowAllPermissions?i.a.createElement(p.b,{to:"/inventory/expenses/add"}," ",i.a.createElement(d.a,{type:"primary"},i.a.createElement(u.a,{type:"plus"})," Add")):i.a.createElement(I.a,null)},i.a.createElement(f.a,{gutter:16,style:{marginBottom:10}},i.a.createElement(P.a,{span:2,style:{textAlign:"right"}},i.a.createElement("b",null," Expense Types")),i.a.createElement(P.a,{span:4},i.a.createElement(C.a,{style:{width:"100%"},value:this.state.selectedExpenseType,disabled:this.state.loading,onChange:e=>this.changeExpenseFilters("selectedExpenseType",e)},i.a.createElement(C.a.Option,{value:null},"--ALL EXPENSES--"),this.state.expenseTypes.map(e=>i.a.createElement(C.a.Option,{value:e.id},e.name)))),i.a.createElement(P.a,{span:2,style:{textAlign:"right"}},i.a.createElement("b",null," Payment Modes")),i.a.createElement(P.a,{span:4},i.a.createElement(C.a,{style:{width:"100%"},value:this.state.selectedPaymentMode,disabled:this.state.loading,onChange:e=>this.changeExpenseFilters("selectedPaymentMode",e)},i.a.createElement(C.a.Option,{value:null},"--ALL PAYMENT MODE--"),this.state.paymentModes.map(e=>i.a.createElement(C.a.Option,{value:e.id},e.mode)))),i.a.createElement(P.a,{span:2,style:{textAlign:"right"}},i.a.createElement("b",null," From")),i.a.createElement(P.a,{span:4},i.a.createElement(j.a,{value:this.state.selectedStartDate,disabled:this.state.loading,allowClear:!1,onChange:e=>this.changeExpenseFilters("selectedStartDate",e)})),i.a.createElement(P.a,{span:2,style:{textAlign:"right"}},i.a.createElement("b",null," To")),i.a.createElement(P.a,{span:4},i.a.createElement(j.a,{value:this.state.selectedEndDate,disabled:this.state.loading,allowClear:!1,onChange:e=>this.changeExpenseFilters("selectedEndDate",e)}))),i.a.createElement(w.a,{loading:this.state.loading,dataSource:this.state.expenses,columns:t}))))}}function q(){return(q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}class R extends i.a.Component{constructor(e){var t,a,n;super(e),n=()=>{const e=this.state.redirect;this.setState({redirect:!e})},(a="changeRedirect")in(t=this)?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n,this.state={editData:this.props.editData?this.props.editData:null}}componentDidMount(){this.props.match.params.id&&(this.state.editData||this.loadData())}loadData(){const e=this;Object(m.c)(Object(m.g)(h.ue,[this.props.match.params.id]),(function(t){e.setState({editData:t})}),(function(){}))}render(){const e=this,t=[{label:"Name",key:"name",initialValue:this.state.editData?this.state.editData.name:null,type:b.db},{label:"Details",key:"description",initialValue:this.state.editData?this.state.editData.description:null,type:b.vc}];let a;this.state.editData&&(a={successFn(t){Object(m.a)(b.sc,"success"),e.props.loadData(),e.props.history&&e.props.history.replace("/inventory/manufacture")},errorFn(){},action:Object(m.g)(h.ue,[this.props.match.params.id]),method:"put"});const n=y.a.create()(g.a),r={successFn(t){Object(m.a)(b.sc,"success"),e.props.loadData(),e.props.history&&e.props.history.replace("/inventory/manufacture")},errorFn(){},action:h.tc,method:"post"},l=[{key:"practice",value:this.props.active_practiceId}];return i.a.createElement(f.a,null,i.a.createElement(c.a,null,i.a.createElement(s.b,{path:"/inventory/manufacture/edit/:id",render:e=>this.props.match.params.id?i.a.createElement(n,q({defaultValues:l,title:"Edit Manufacturer",changeRedirect:this.changeRedirect,formProp:a},e,{fields:t})):i.a.createElement(s.a,{to:"/inventory/manufacture"})}),i.a.createElement(s.b,{exact:!0,path:"/inventory/manufacture/add",render:a=>e.props.activePracticePermissions.EditManufacturer||e.props.allowAllPermissions?i.a.createElement(n,q({title:"Add Manufacturer",changeRedirect:this.changeRedirect},a,{formProp:r,fields:t})):i.a.createElement(I.a,null)})),this.state.redirect&&i.a.createElement(s.a,{to:"/inventory/manufacture"}))}}function N(){return(N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function B(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(a),!0).forEach((function(t){U(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function U(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class z extends i.a.Component{constructor(e){super(e),this.state={active_practiceId:this.props.active_practiceId,manufactures:null,loading:!0},this.loadData=this.loadData.bind(this),this.deleteManufacture=this.deleteManufacture.bind(this)}componentDidMount(){this.loadData()}loadData(){const e=this;Object(m.c)(h.tc,(function(t){e.setState({manufactures:t,loading:!1})}),(function(){e.setState({loading:!1})}))}deleteManufacture(e){const t=this,a=B(B({},e),{},{is_active:!1});Object(m.m)(Object(m.g)(h.ue,[e]),a,(function(e){t.setState({loading:!1}),t.loadData()}),(function(){}))}render(){const e=this,t=[{title:"Name",key:"name",dataIndex:"name"},{title:"Details",key:"details",dataIndex:"description"},{title:"Action",render:t=>i.a.createElement("div",null,e.props.activePracticePermissions.EditManufacturer||e.props.allowAllPermissions?i.a.createElement(p.b,{to:"/inventory/manufacture/edit/".concat(t.id)},"Edit"):null,i.a.createElement(l.a,{type:"vertical"}),e.props.activePracticePermissions.DeleteManufacturer||e.props.allowAllPermissions?i.a.createElement(o.a,{title:"Are you sure delete this item?",onConfirm:()=>e.deleteManufacture(t.id),okText:"Yes",cancelText:"No"},i.a.createElement("a",null,"Delete")):null)}];return i.a.createElement("div",null,i.a.createElement(s.d,null,i.a.createElement(s.b,{exact:!0,path:"/inventory/manufacture/add",render:t=>e.props.activePracticePermissions.EditManufacturer||e.props.allowAllPermissions?i.a.createElement(R,N({},this.state,t,this.props,{loadData:e.loadData})):i.a.createElement(I.a,null)}),i.a.createElement(s.b,{path:"/inventory/manufacture/edit/:id",render:t=>e.props.activePracticePermissions.EditManufacturer||e.props.allowAllPermissions?i.a.createElement(R,N({},this.state,this.props,t,{loadData:e.loadData})):i.a.createElement(I.a,null)}),i.a.createElement(c.a,{title:"Manufacturers",extra:i.a.createElement(p.b,{to:"/inventory/manufacture/add"}," ",i.a.createElement(d.a,{type:"primary",disabled:!e.props.activePracticePermissions.EditManufacturer},i.a.createElement(u.a,{type:"plus"})," Add"))},i.a.createElement(_.a,{loading:this.state.loading,dataSource:this.state.manufactures,columns:t,hideReport:!e.props.activePracticePermissions.ExportManufacturer}))))}}class Q extends i.a.Component{constructor(e){super(e),this.state={editData:this.props.editData?this.props.editData:null}}changeRedirect(){const e=this.state.redirect;this.setState({redirect:!e})}componentDidMount(){this.props.match.params.id&&(this.state.editData||this.loadData()),this.getPatientListData()}loadData(){const e=this;Object(m.c)(Object(m.g)(h.le,[this.props.match.params.id]),(function(t){e.setState({editData:t})}),(function(){}))}getPatientListData(){const e=this;Object(m.c)(h.cd,(function(t){e.setState({patientListData:t})}),(function(){}))}render(){const e=[];this.state.patientListData&&this.state.patientListData.length&&this.state.patientListData.forEach((function(t){e.push({label:t.name,value:t.id})}));const t=[{label:"Job number ",key:"job_no",initialValue:this.state.editData?this.state.editData.job_no:null,type:b.db},{label:"Doctor Name ",key:"job_no",initialValue:this.state.editData?this.state.editData.doctor_name:null,type:b.db},{label:"Name ",key:"name",initialValue:this.state.editData?this.state.editData.name:null,type:b.db},{label:"Status ",key:"status",initialValue:this.state.editData?this.state.editData.status:null,type:b.db},{label:"Due Date",key:"due_date",type:b.N,initialValue:this.state.editData?this.state.editData.due_date:null,format:"YYYY/MM/DD HH:mm"},{label:"patient",key:"patient",type:b.mc,initialValue:this.state.editData?this.state.editData.patient:null,options:e}];let a;this.state.editBlogData&&(a={successFn(e){Object(m.a)(b.sc,"success"),console.log(e)},errorFn(){},action:Object(m.g)(h.re,[this.props.match.params.id]),method:"put"});const n=y.a.create()(g.a),r={successFn(e){Object(m.a)(b.sc,"success"),console.log(e)},errorFn(){},action:h.gc,method:"post"},l=[{key:"practice",value:this.props.active_practiceId}];return i.a.createElement(f.a,null,i.a.createElement(c.a,null,i.a.createElement(s.b,{exact:!0,path:"/inventory/lab/edit/:id",render:()=>this.props.match.params.id?i.a.createElement(n,{defaultValues:l,title:"Edit Lab",changeRedirect:this.changeRedirect,formProp:a,fields:t}):i.a.createElement(s.a,{to:"/inventory/lab"})}),i.a.createElement(s.b,{exact:!0,path:"/inventory/lab/add",render:()=>i.a.createElement(n,{title:"Add lab",changeRedirect:this.changeRedirect,formProp:r,fields:t})})),this.state.redirect&&i.a.createElement(s.a,{to:"/inventory/lab"}))}}function G(){return(G=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}class H extends i.a.Component{constructor(e){super(e),this.state={active_practiceId:this.props.active_practiceId,lab:null,loading:!0},this.loadData=this.loadData.bind(this)}componentDidMount(){this.loadData()}loadData(){const e=this;Object(m.c)(h.gc,(function(t){e.setState({lab:t,loading:!1})}),(function(){e.setState({loading:!1})}))}render(){return i.a.createElement("div",null,i.a.createElement(s.d,null,i.a.createElement(s.b,{exact:!0,path:"/inventory/lab/add",render:e=>i.a.createElement(Q,G({},this.state,e))}),i.a.createElement(s.b,{exact:!0,path:"/inventory/expenses/lab/:id",render:e=>i.a.createElement(Q,G({},this.state,e))}),i.a.createElement(c.a,{loading:this.state.loading,title:"Lab",extra:i.a.createElement(p.b,{to:"/inventory/lab/add"}," ",i.a.createElement(d.a,{type:"primary"},i.a.createElement(u.a,{type:"plus"})," Add"))})))}}var J=a(433),W=a(1605),K=a(450),X=a(438),Z=a(441),$=a(442),ee=a(127),te=a.n(ee);function ae(e,t,a,n,i,r,s){try{var l=e[r](s),o=l.value}catch(e){return void a(e)}l.done?t(o):Promise.resolve(o).then(n,i)}function ne(e){return function(){var t=this,a=arguments;return new Promise((function(n,i){var r=e.apply(t,a);function s(e){ae(r,n,i,s,l,"next",e)}function l(e){ae(r,n,i,s,l,"throw",e)}s(void 0)}))}}function ie(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const re=j.a.RangePicker,se=C.a.Option;class le extends i.a.Component{constructor(e){var t;super(e),t=this,ie(this,"componentWillMount",ne(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.loadCategory(),Object(X.g)(t),t.loadActivityLog();case 3:case"end":return e.stop()}}),e)})))),ie(this,"loadCategory",ne(regeneratorRuntime.mark((function e(){var a,n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t,n=function(e){a.setState({categoryList:e,loading:!1})},i=function(){a.setState({loading:!1})},Object(m.c)(h.V,n,i);case 4:case"end":return e.stop()}}),e)})))),ie(this,"loadSubCategory",function(){var e=ne(regeneratorRuntime.mark((function e(a){var n,i,r,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.state.selectedCategory,n=t,i=function(e){n.setState({subCategoryList:e,loading:!1}),n.loadActivityLog(1)},r=function(){n.setState({loading:!1})},s={category:a},Object(m.c)(h.Ne,i,r,s);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ie(this,"handleCategoryChange",e=>{const t=this;this.setState({selectedCategory:e,selectedSubCategory:b.d},(function(){e&&t.loadSubCategory(e),t.loadActivityLog(1)}))}),ie(this,"onSubCategoryChange",e=>{const t=this;this.setState({selectedSubCategory:e},(function(){t.loadActivityLog(1)}))}),ie(this,"advanceSearch",()=>{this.setState({advancedSearch:!this.state.advancedSearch})}),ie(this,"handleSearchPatient",e=>{const t=this;this.lastFetchId+=1;const a=this.lastFetchId;this.setState((function(t){return{patientListData:[],searchPatientString:e,fetchingPatientList:!0}}));const n=function(e){a===t.lastFetchId&&t.setState((function(t){return{fetchingPatientList:!1,patientListData:[...e.results]}}))},i=function(e){t.setState({searchPatientString:null,fetchingPatientList:!1})};e?Object(m.c)(Object(m.g)(h.ce,[e]),n,i,{page_size:5}):t.setState({patientListData:[],searchPatientString:e,fetchingPatientList:!1,patient:null})}),ie(this,"renderFilter",()=>{const e=this.state,t=e.categoryList,a=e.subCategoryList,n=e.selectedCategory,r=e.selectedSubCategory,s=e.practiceStaff,l=e.fetchingPatientList;return(i.a.createElement("div",null,i.a.createElement(f.a,null,i.a.createElement("span",null,"Category : "),i.a.createElement(C.a,{defaultValue:b.d,value:n,style:{width:200,paddingLeft:2,paddingRight:"20px"},onChange:this.handleCategoryChange},i.a.createElement(C.a.Option,{value:b.d},b.d),t.map(e=>i.a.createElement(se,{key:e,value:e},e))),i.a.createElement("span",null,"Sub Category : "),i.a.createElement(C.a,{style:{width:200,paddingLeft:2,paddingRight:20},defaultValue:b.d,value:r,onChange:this.onSubCategoryChange},i.a.createElement(C.a.Option,{value:""},b.d),a.map(e=>i.a.createElement(se,{key:e,value:e},e))),i.a.createElement("span",null,"Doctor/Staff : "),i.a.createElement(C.a,{style:{width:200,paddingLeft:2,paddingRight:20},allowClear:!0,onChange:e=>this.handleChangeOption("doctors",e),value:this.state.doctors},s.map(e=>i.a.createElement(se,{key:e.user.id},e.user.first_name))),i.a.createElement("span",null,"Activity Type : "),i.a.createElement(C.a,{style:{width:200,paddingLeft:2,paddingRight:20},allowClear:!0,onChange:e=>this.handleChangeOption("activityType",e),value:this.state.activityType},i.a.createElement(C.a.Option,{value:"Added"},"Added"),i.a.createElement(C.a.Option,{value:"Modified"},"Modified"),i.a.createElement(C.a.Option,{value:"Deleted"},"Deleted")),i.a.createElement("span",null,"Patient : "),i.a.createElement(C.a,{style:{width:200,paddingLeft:2,paddingRight:20},allowClear:!0,onSearch:e=>this.handleSearchPatient(e),onSelect:e=>this.handleChangeOption("patient",e),onChange:e=>this.handleChangeOption("patient",e),value:this.state.patient,showSearch:!0,notFoundContent:l?i.a.createElement(J.a,{size:"small"}):null,filterOption:!1},this.state.patientListData.map(e=>i.a.createElement(C.a.Option,{value:e.id,key:e.id},e.user.first_name," (",e.custom_id,")"))))))}),ie(this,"handleChangeOption",(e,t)=>{this.setState({[e]:t},(function(){this.loadActivityLog(1)}))}),ie(this,"resetAdvanceSearch",()=>{this.setState({doctors:"",practice:""},(function(){this.loadActivityLog(1)}))}),ie(this,"renderAdvaceSearch",()=>{const e=this.state;e.categoryList,e.subCategoryList,e.selectedCategory,e.selectedSubCategory,e.practiceDoctors;return(i.a.createElement("div",null,i.a.createElement("a",{onClick:this.resetAdvanceSearch,style:{marginLeft:30}},i.a.createElement("span",null,i.a.createElement(u.a,{type:"undo"}),"reset"))))}),ie(this,"isDateChanges",(e,t)=>!(!K.isNull(e)&&e.format("YMD")==L()(t).format("YMD"))),ie(this,"renderActivity",e=>{switch(e.activity){case Z.vb:return i.a.createElement(W.a.Item,{key:e.id,style:{marginLeft:"40px",borderBottom:0,padding:0}},i.a.createElement(W.a.Item.Meta,{title:e.component,description:i.a.createElement("p",null,e.activity," ",i.a.createElement("b",null," ",e.sub_component," ")," ",e.patient?i.a.createElement("span",null,"for ",i.a.createElement("a",{href:"/patient/".concat(e.patient.id,"/profile/")},e.patient.user.first_name)):"--"," ",e.record_created_by?i.a.createElement("span",null," created by ",e.record_created_by.first_name):"--")}),i.a.createElement("div",{style:{paddingRight:50}}," ",L()(e.created_at).format("LT")," From ",i.a.createElement("b",null,e.os)," / ",i.a.createElement("b",null,e.agent),i.a.createElement("br",null),"By ",i.a.createElement("b",null,e.user?e.user.first_name:"--")));case Z.z:case Z.H:return i.a.createElement(W.a.Item,{key:e.id,style:{marginLeft:"40px",borderBottom:0,padding:0}},i.a.createElement(W.a.Item.Meta,{title:e.component,description:i.a.createElement("p",null,e.activity," ",i.a.createElement("b",null," ",e.sub_component," ")," ",e.patient?i.a.createElement("span",null,"for ",i.a.createElement("a",{href:"/patient/".concat(e.patient.id,"/profile/")},e.patient.user.first_name)):"--")}),i.a.createElement("div",{style:{paddingRight:50}},"  ",L()(e.created_at).format("LT")," From ",i.a.createElement("b",null,e.os)," / ",i.a.createElement("b",null,e.agent),i.a.createElement("br",null),"By ",i.a.createElement("b",null,e.user?e.user.first_name:null)))}}),this.state={activity:[],loading:!1,categoryList:[],subCategoryList:[],startDate:L()().format(),endDate:L()().format(),advancedSearch:!1,practiceStaff:[],loadMoreActivity:null,doctors:null,practice:null,selectedCategory:b.d,selectedSubCategory:b.d,activityType:null,patientListData:[]},this.lastFetchId=0,this.loadActivityLog=this.loadActivityLog.bind(this),this.handleSearchPatient=te()(this.handleSearchPatient,800)}activityDateRange(e){const t=this;this.setState({startDate:L()(e[0]).format(),endDate:L()(e[1]).format()},(function(){t.loadActivityLog(1)}))}loadActivityLog(e=1){const t=this,a=t.state,n=a.selectedCategory,i=a.selectedSubCategory,r=a.startDate,s=a.endDate,l=(a.practice,a.doctors),o=a.activityType;t.setState({loading:!0});const c={page:e,user:l,start:L()(r).startOf("day").format(),end:L()(s).endOf("day").format()};n&&n!=b.d&&(c.category=n),i&&i!=b.d&&(c.sub_category=i),o&&(c.activity=o),t.state.patient&&(c.patient=t.state.patient),Object(m.c)(h.c,(function(e){1==e.current?t.setState({activity:e.results,total:e.count,loadMoreActivity:e.next,loading:!1}):t.setState((function(t){return{total:e.count,activity:[...t.activity,...e.results],loading:!1,loadMoreActivity:e.next}}))}),(function(){t.setState({loading:!1})}),c)}render(){const e=this.state,t=e.activity,a=e.loadMoreActivity,n=e.loading,r=[];let s=null;K.map(t,e=>{this.isDateChanges(s,K.get(e,"created_at"))&&(s=L()(K.get(e,"created_at")),r.push({type:"Time",date:K.get(e,"created_at")})),r.push(e)});a&&d.a;return(i.a.createElement("div",null,i.a.createElement(f.a,null,i.a.createElement(c.a,null,this.renderFilter())),i.a.createElement(f.a,null,i.a.createElement(c.a,{title:"Activity Log",extra:i.a.createElement(re,{allowClear:!1,defaultValue:[L()(),L()()],onChange:(e,t)=>this.activityDateRange(e),format:"DD/MM/YYYY"})},i.a.createElement(W.a,{header:this.state.advancedSearch?this.renderAdvaceSearch():null,dataSource:r,loading:n,renderItem:e=>i.a.createElement(i.a.Fragment,null,"Time"==e.type?i.a.createElement("p",{style:{borderBottom:"1px solid #e8e8e8",paddingBottom:"15px",paddingTop:"15px"}},i.a.createElement("b",null,L()(e.date).format("dddd, MMMM Do YYYY"))):this.renderActivity(e))}),i.a.createElement($.a,{loaderFunction:()=>this.loadActivityLog(a),loading:this.state.loading,hidden:!a})))))}}var oe=a(1572),ce=a(1029),de=a(836),ue=a(1568),pe=a(1596),me=a(837),he=a(1600),ye=a(1015),fe=a.n(ye),be=a(461);function ge(){return(ge=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Ee(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ve(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(a),!0).forEach((function(t){_e(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ee(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function _e(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}me.a.Group;class Ie extends i.a.Component{constructor(e){super(e),_e(this,"loadHSNData",(e=1)=>{let t=this;t.setState({loading:!0});Object(m.c)(h.Ub,(function(e){t.setState({codes:e,loading:!1})}),(function(){t.setState({loading:!1})}),{practice:this.props.active_practiceId})}),_e(this,"loadDrugType",()=>{const e=this;Object(m.c)(Object(m.g)(h.rb,[this.props.active_practiceId]),(function(t){e.setState({drugTypeList:t})}),(function(){}))}),_e(this,"onChangeHandeler",e=>{this.setState({type:e})}),_e(this,"setFormParams",(e,t)=>{this.setState({[e]:t})}),_e(this,"handleSubmit",e=>{e.preventDefault();const t=this;this.props.form.validateFields((e,a)=>{if(!e){const e=ve(ve({},a),{},{retail_without_tax:t.state.retail_price,net_price:void 0,practice:this.props.active_practiceId});this.state.editInventoryItem&&this.state.editInventoryItem.id&&(e.id=this.state.editInventoryItem.id);const n=function(e){t.setState({redirect:!0}),t.props.loadData(),t.props.history.replace("/inventory")},i=function(){};this.state.editInventoryItem&&this.state.editInventoryItem.id?Object(m.m)(Object(m.g)(h.oe,[this.props.match.params.id]),e,n,i):Object(m.k)(Object(m.g)(h.Wb,[this.props.match.params.id]),e,n,i)}})}),_e(this,"changeNetPrice",e=>{const t=this,a=this.props.form,n=a.getFieldsValue;a.setFields;setTimeout((function(){const e=n();if(e.retail_with_tax&&e.hsn){let a=0,n={};t.state.codes.forEach((function(t){t.id==e.hsn&&(t.taxes_data.forEach((function(e){a+=e.tax_value})),n=t)}));const i=e.retail_with_tax/(1+.01*a);t.setState((function(e){return{editInventoryItem:ve(ve({},e.editInventoryItem),{},{hsn_data:n}),retail_price:i.toFixed(2)}}))}else t.setState({retail_price:0})}),1e3)}),this.state={taxes_list:this.props.taxes_list?this.props.taxes_list:null,manufacture_list:this.props.manufacture_list?this.props.manufacture_list:null,vendor_list:this.props.vendor_list?this.props.vendor_list:null,redirect:!1,type:this.props.editInventoryItem?this.props.editInventoryItem:null,drugUnitList:[],drugTypeList:[],retail_price:0,productMargin:[],loading:!1,codes:[]},this.changeRedirect=this.changeRedirect.bind(this)}changeRedirect(){const e=this.state.redirect;this.setState({redirect:!e})}componentDidMount(){this.props.match.params.id&&(this.state.editInventoryItem||this.loadData()),null==this.props.manufacture_list&&this.loadManufactureList(),null==this.props.vendor_list&&this.loadVendorList(),this.loadDrugType(),this.loadDrugUnit(),this.loadProductMargin(),this.loadHSNData()}loadProductMargin(){const e=this;Object(m.c)(h.Md,(function(t){e.setState({productMargin:t})}),(function(){}))}loadManufactureList(){const e=this;Object(m.c)(h.tc,(function(t){e.setState({manufacture_list:t})}),(function(){}))}loadVendorList(){const e=this;Object(m.c)(Object(m.g)(h.of,[this.props.active_practiceId]),(function(t){e.setState({vendor_list:t})}),(function(){}))}loadData(){const e=this;this.props.match.params.id&&Object(m.c)(Object(m.g)(h.oe,[this.props.match.params.id]),(function(t){e.setState((function(e){let a=0;t.hsn_data&&t.hsn_data.taxes_data.forEach((function(e){a+=e.tax_value}));const n=(t.retail_price*(1+.01*a)).toFixed(2);return{editInventoryItem:ve(ve({},t),{},{net_price:n}),type:t.item_type,retail_price:t.retail_price}}))}),(function(){}))}loadDrugUnit(){const e=this;Object(m.c)(Object(m.g)(h.sb,[this.props.active_practiceId]),(function(t){e.setState({drugUnitList:t})}),(function(){}))}render(){const e=this,t=[];this.state.taxes_list&&this.state.taxes_list.forEach((function(e){t.push({label:"".concat(e.name,"(").concat(e.tax_value,"%)"),value:e.id})}));const a=[];this.state.manufacture_list&&this.state.manufacture_list.forEach((function(e){a.push({label:e.name,value:e.id})}));const n=[];this.state.vendor_list&&this.state.vendor_list.forEach((function(e){n.push({label:e.name,value:e.id})}));const r=this.props.form.getFieldDecorator,l={labelCol:{span:10},wrapperCol:{span:14}};return i.a.createElement(c.a,{title:this.state.editInventoryItem?"Edit Inventory Item":"Add Inventory Item",loading:this.state.loading},i.a.createElement(f.a,null,i.a.createElement(P.a,{span:18},i.a.createElement(y.a,{onSubmit:this.handleSubmit},i.a.createElement(y.a.Item,ge({label:"Item Name"},l),r("name",{initialValue:this.state.editInventoryItem?this.state.editInventoryItem.name:null,rules:[{required:!0,message:be.k}]})(i.a.createElement(ue.a,{placeholder:"Item Name"}))),i.a.createElement(y.a.Item,ge({label:"HSN"},l),r("hsn",{initialValue:this.state.editInventoryItem?this.state.editInventoryItem.hsn:null,rules:[{required:!0,message:be.k}]})(i.a.createElement(C.a,{placeholder:"HSN Number",onChange:this.changeNetPrice},this.state.codes.map(e=>i.a.createElement(C.a.Option,{value:e.id},e.code))))),this.state.manufacturerType&&this.state.manufacturerType==b.db?i.a.createElement(y.a.Item,ge({key:"manufacturer_extra",label:"Manufacturer"},l),r("manufacturer_extra",{initialValue:e.state.editPrescreption?e.state.editPrescreption.manufacturer_extra:null,rules:[{required:!0,message:be.k}]})(i.a.createElement(ue.a,null)),i.a.createElement("a",{onClick:()=>e.setFormParams("manufacturerType",b.mc)},"Choose Manufacturer")):i.a.createElement(y.a.Item,ge({key:"manufacturer"},l,{label:"Manufacturer"}),r("manufacturer",{initialValue:this.state.editInventoryItem?this.state.editInventoryItem.manufacturer:null})(i.a.createElement(C.a,null,a.map(e=>i.a.createElement(C.a.Option,{value:e.value},e.label)))),i.a.createElement("a",{onClick:()=>e.setFormParams("manufacturerType",b.db)},"Add New Manufacturer")),i.a.createElement(y.a.Item,ge({label:"Stocking Unit"},l),r("stocking_unit",{initialValue:this.state.editInventoryItem?this.state.editInventoryItem.stocking_unit:null,rules:[{required:!0,message:be.k}]})(i.a.createElement(ue.a,{placeholder:"Example: Bottles, Strips etc."})),i.a.createElement("p",null,"(Make sure this is the same as the unit in which you dispense this item.)")),i.a.createElement(y.a.Item,ge({label:"Re-Order Level"},l),r("re_order_level",{initialValue:this.state.editInventoryItem?this.state.editInventoryItem.re_order_level:null})(i.a.createElement(he.a,{placeholder:"Re-Order Level"}))),i.a.createElement(y.a.Item,ge({label:"Net Price"},l),r("retail_with_tax",{initialValue:this.state.editInventoryItem?this.state.editInventoryItem.retail_with_tax:null,rules:[{required:!0,message:be.k}]})(i.a.createElement(he.a,{onChange:this.changeNetPrice})),i.a.createElement("span",{className:"ant-form-text"},"INR")),i.a.createElement(y.a.Item,ge({label:"Same State Tax"},l),this.state.editInventoryItem&&this.state.editInventoryItem.hsn_data?this.state.editInventoryItem.hsn_data.taxes_data.map(e=>i.a.createElement(oe.a,null,e.name,"@",e.tax_value,"%")):null),i.a.createElement(y.a.Item,ge({label:"Other State Tax"},l),this.state.editInventoryItem&&this.state.editInventoryItem.hsn_data?this.state.editInventoryItem.hsn_data.state_taxes_data.map(e=>i.a.createElement(oe.a,null,e.name,"@",e.tax_value,"%")):null),i.a.createElement(y.a.Item,ge({label:"Retail Price"},l),i.a.createElement("span",{className:"ant-form-text"},i.a.createElement("b",null,e.state.retail_price),"Â INR")),i.a.createElement(y.a.Item,ge({key:"margin"},l,{label:"MLM Margin"}),r("margin",{initialValue:this.state.editInventoryItem?this.state.editInventoryItem.margin:null})(i.a.createElement(C.a,null,this.state.productMargin.map(e=>i.a.createElement(C.a.Option,{value:e.id},e.name))))),i.a.createElement(y.a.Item,ge({label:"Details"},l),r("package_details",{initialValue:this.state.editInventoryItem?this.state.editInventoryItem.package_details:null})(i.a.createElement(ue.a.TextArea,{placeholder:"Package Details"}))),i.a.createElement(y.a.Item,ge({label:"Item Type"},l),r("item_type",{initialValue:this.state.editInventoryItem?this.state.editInventoryItem.item_type:null,rules:[{required:!0,message:be.k}]})(i.a.createElement(C.a,{placeholder:"Item Type",onChange:this.onChangeHandeler},Z.ob.map(e=>i.a.createElement(C.a.Option,{value:e.value},e.label))))),this.state.type==Z.L?i.a.createElement("div",null,i.a.createElement(y.a.Item,ge({label:"I prescribe this"},l),r("perscribe_this",{valuePropName:"checked",initialValue:!!this.state.editInventoryItem&&this.state.editInventoryItem.perscribe_this})(i.a.createElement(me.a,null))),this.state.drugType&&this.state.drugType==b.db?i.a.createElement(y.a.Item,ge({key:"drug_type_extra",label:"Medicine Type"},l),r("drug_type_extra",{initialValue:e.state.editInventoryItem?e.state.editInventoryItem.drug_type_extra:null,rules:[{required:!0,message:be.k}]})(i.a.createElement(ue.a,null)),i.a.createElement("a",{onClick:()=>e.setFormParams("drugType",b.mc)},"Choose Medicine Type")):i.a.createElement(y.a.Item,ge({key:"drug_type"},l,{label:"Medicine Type"}),r("drug_type",{initialValue:this.state.editInventoryItem?this.state.editInventoryItem.drug_type:null,rules:[{required:!0,message:be.k}]})(i.a.createElement(C.a,null,e.state.drugTypeList.map(e=>i.a.createElement(C.a.Option,{value:e.id},e.name)))),i.a.createElement("a",{onClick:()=>e.setFormParams("drugType",b.db)},"Add New Medicine Type")),i.a.createElement(y.a.Item,ge({label:"Strength"},l),r("strength",{initialValue:this.state.editInventoryItem?this.state.editInventoryItem.strength:null})(i.a.createElement(he.a,null))),this.state.drugUnit&&this.state.drugUnit==b.db?i.a.createElement(y.a.Item,ge({key:"unit_type_extra",label:"Strength Unit"},l),r("unit_type_extra",{initialValue:e.state.editInventoryItem?e.state.editInventoryItem.unit_type_extra:null,rules:[{required:!0,message:be.k}]})(i.a.createElement(ue.a,null)),i.a.createElement("a",{onClick:()=>e.setFormParams("drugUnit",b.mc)},"Choose Strength Unit")):i.a.createElement(y.a.Item,ge({key:"stength_unit"},l,{label:"Strength Unit"}),r("stength_unit",{initialValue:this.state.editInventoryItem?this.state.editInventoryItem.stength_unit:null,rules:[{required:!0,message:be.k}]})(i.a.createElement(C.a,null,e.state.drugUnitList.map(e=>i.a.createElement(C.a.Option,{value:e.id},e.name)))),i.a.createElement("a",{onClick:()=>e.setFormParams("drugUnit",b.db)},"Add New Strength Unit")),i.a.createElement(y.a.Item,ge({label:"Instructions"},l),r("instructions",{initialValue:this.state.editInventoryItem?this.state.editInventoryItem.instructions:null})(i.a.createElement(fe.a,null)))):null,this.state.type==Z.Wb?i.a.createElement("div",null,i.a.createElement(y.a.Item,ge({label:"I prescribe this"},l),r("perscribe_this",{valuePropName:"checked",initialValue:!!this.state.editInventoryItem&&this.state.editInventoryItem.perscribe_this})(i.a.createElement(me.a,null))),i.a.createElement(y.a.Item,ge({label:"Strength Unit"},l),r("strength",{initialValue:this.state.editInventoryItem?this.state.editInventoryItem.strength:null})(i.a.createElement(ue.a,null))),this.state.drugUnit&&this.state.drugUnit==b.db?i.a.createElement(y.a.Item,ge({key:"unit_type_extra",label:"Strength Unit"},l),r("unit_type_extra",{initialValue:e.state.editInventoryItem?e.state.editInventoryItem.unit_type_extra:null,rules:[{required:!0,message:be.k}]})(i.a.createElement(ue.a,null)),i.a.createElement("a",{onClick:()=>e.setFormParams("drugUnit",b.mc)},"Choose Strength Unit")):i.a.createElement(y.a.Item,ge({key:"stength_unit"},l,{label:"Strength Unit"}),r("stength_unit",{initialValue:this.state.editInventoryItem?this.state.editInventoryItem.stength_unit:null,rules:[{required:!0,message:be.k}]})(i.a.createElement(C.a,null,e.state.drugUnitList.map(e=>i.a.createElement(C.a.Option,{value:e.id},e.name)))),i.a.createElement("a",{onClick:()=>e.setFormParams("drugUnit",b.db)},"Add New Strength Unit")),i.a.createElement(y.a.Item,ge({label:"Instructions"},l),r("instructions",{initialValue:this.state.editInventoryItem?this.state.editInventoryItem.instructions:null})(i.a.createElement(fe.a,null)))):null,this.state.type==Z.V?i.a.createElement("div",null,i.a.createElement(y.a.Item,ge({label:"I prescribe this"},l),r("perscribe_this",{valuePropName:"checked",initialValue:this.state.editInventoryItem?this.state.editInventoryItem.perscribe_this:null})(i.a.createElement(me.a,null))),i.a.createElement(y.a.Item,ge({label:"Instructions"},l),r("instructions",{initialValue:this.state.editInventoryItem?this.state.editInventoryItem.instructions:null})(i.a.createElement(fe.a,null)))):null,i.a.createElement(y.a.Item,null,i.a.createElement(d.a,{style:{margin:5},type:"primary",htmlType:"submit"},"Submit"),e.props.history?i.a.createElement(d.a,{style:{margin:5},onClick:()=>e.props.history.goBack()},"Cancel"):null)))),this.state.redirect&&i.a.createElement(s.a,{to:"/inventory"}))}}var xe=y.a.create()(Ie),Oe=a(1565),Se=a(1575),De=a(1609),ke=a(1606),Pe=a(1591);function Ce(){return(Ce=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function je(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function we(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?je(Object(a),!0).forEach((function(t){Me(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):je(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Me(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Le=ue.a.Search,Te=j.a.MonthPicker,Ae=Oe.a.TabPane,Ve={_id:null,quantity:0,batch:null};class Fe extends i.a.Component{constructor(e){super(e),Me(this,"changeSupplierType",e=>{this.setState({customSupplier:!!e})}),Me(this,"loadItemsList",(e,t=1)=>{const a=this,n={maintain_inventory:!0,practice:this.props.active_practiceId,item_type:e,page:t};a.state.searchStrings[e]&&(n.item_name=a.state.searchStrings[e]),Object(m.c)(h.Wb,(function(t){const n=t;a.setState((function(t){return{items:we(we({},t.items),{},{[e]:we(we({},t.items[e]),n)}),loading:!1}}))}),(function(){}),n)}),Me(this,"remove",e=>{this.setState((function(t){const a=[];return t.tableFormValues.forEach((function(t){t._id!=e&&a.push(t)})),{tableFormValues:a}}))}),Me(this,"add",(e,t=Math.random().toFixed(7))=>{this.setState((function(a){return{tableFormValues:[we(we(we({},Ve),e),{},{_id:t}),...a.tableFormValues]}}))}),Me(this,"handleSubmit",e=>{const t=this;if(this.setState({loading:!0}),13==e.keyCode)return!1;e.preventDefault(),this.props.form.validateFields((e,a)=>{if(!e){const e=[];t.state.tableFormValues.forEach((function(n){let i={item_add_type:t.state.classType,inventory_item:n.id,remarks:a.remarks,quantity:a.quantity[n._id],batch_number:a.batch[n._id],date:L()(a.date).format("YYYY-MM-DD"),bill_number:a.bill_number,bill_file:a.file&&a.file.file.response?a.file.file.response.image_path:null};t.state.classType==Z.a?(i=we(we({},i),{},{expiry_date:L()(a.expiry_date[n._id]).format("YYYY-MM-DD"),unit_cost:a.unit_cost[n._id],total_cost:a.unit_cost[n._id]*a.quantity[n._id]}),a.supplier?i.supplier=a.supplier:a.supplier_name&&(i.supplier_name=a.supplier_name)):t.state.classType==Z.y&&(i.type_of_consumption=a.type_of_consumption),e.push(i)})),e.date=L()(a.date).isValid()?L()(a.date).format():null,t.state.customSupplier?e.supplier_name=a.supplier_name:e.supplier=a.supplier;const n=function(e){Object(m.a)("Inventory updated successfully"),t.props.loadData(),t.props.history.replace("/inventory")},i=function(){t.setState({loading:!1})};Object(m.k)(h.P,e,n,i)}})}),Me(this,"searchValues",(e,t)=>{const a=this;this.setState((function(a){const n=we({},a.searchStrings);return n[e]=t,{searchStrings:n}}),(function(){a.loadItemsList(e)}))}),Me(this,"filterValues",e=>{this.setState((function(t){let a=[];return t.items[e]&&(t.searchStrings[e]?t.items[e].forEach((function(n){n.name.toString().toLowerCase().includes(t.searchStrings[e].toLowerCase())&&a.push(n)})):a=t.items[e]),{filteredItems:we(we({},t.filteredItems),{},{[e]:a})}}))}),Me(this,"storeValue",(e,t,a)=>{const n=this;if(this.setState((function(n){return{tempValues:we(we({},n.tempValues),{},{[e.toString()+t.toString()]:a})}})),"batch"==e){const e=n.props.form.setFieldsValue;n.state.tableFormValues.forEach((function(a){a._id==t&&a.item_type_stock.batch_number&&a.item_type_stock.batch_number.forEach((function(a){e({["expiry_date[".concat(t,"]")]:a.expiry_date&&L()(a.expiry_date).isValid()?L()(a.expiry_date):null})}))}))}}),Me(this,"addItemThroughQR",e=>{const t=this;t.setState({loadingQr:!0});const a=e.split("*");Object(m.c)(h.de,(function(n){const i=t.props.form,r=i.setFieldsValue,s=i.getFieldsValue,l=(i.getFieldValue,Math.random().toFixed(7));let o=!0;if(t.state.tableFormValues.forEach((function(n){if(n.item_name==a[0]){const i=n._id;if(s("batch[".concat(i,"]"))==a[3]){const a=s("quantity[".concat(i,"]"));o=!1,r({["quantity[".concat(i,"]")]:a+1}),t.storeValue("quantity",i,e)}}})),o){t.add(n,l),t.storeValue("batch",l,a[1]),t.storeValue("unit_cost",l,a[3]);const e={["batch[".concat(l,"]")]:a[1],["expiry_date[".concat(l,"]")]:L()(a[2],"MM/YY")};t.state.classType==Z.y&&(e["unit_cost[".concat(l,"]")]=a[3]),r(e)}console.log(s(),{["batch[".concat(l,"]")]:a[0]}),t.setState((function(e){return{loadingQr:!1,qrValue:""}}))}),(function(){}),{qr:e,form:"Inventory"})}),Me(this,"setQrValue",e=>{const t=e.target.value;this.setState({qrValue:t})}),this.state={items:{},classType:e.type,tableFormValues:[],maxQuantityforConsume:{},searchStrings:{},tempValues:{},supplierList:[],customSupplier:!1,qrValue:"",loading:!0},this.loadSupplierList=this.loadSupplierList.bind(this)}componentDidMount(){this.loadInventoryItemList(),this.loadSupplierList()}loadSupplierList(){const e=this,t={practice:this.props.active_practiceId};Object(m.c)(Object(m.g)(h.Pe,[this.props.active_practiceId]),(function(t){e.setState({supplierList:t})}),(function(){}),t)}loadInventoryItemList(){const e=this;Z.ob.forEach((function(t){e.loadItemsList(t.value)}))}changeMaxQuantityforConsume(e,t){this.setState((function(a){const n=we({},a.maxQuantityforConsume);return a.tableFormValues.forEach((function(a){a._id==e&&a.item_type_stock.item_stock.forEach((function(a){a.batch_number==t&&(n[e]=a.quantity||0)}))})),{maxQuantityforConsume:n}}))}render(){const e=this,t=this.props.form.getFieldDecorator,a={labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}},n={labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}},r={name:"image",data:{name:"hello"},action:Object(m.i)(h.Lb),headers:{authorization:"authorization-text"},onChange(e){e.file.status,"done"===e.file.status?Se.a.success("".concat(e.file.name," file uploaded successfully")):"error"===e.file.status&&Se.a.error("".concat(e.file.name," file upload failed."))}};t("keys",{initialValue:[]});let s=[{title:"Item Name",key:"item_name",dataIndex:"name"}];return this.state.classType==Z.a?s=s.concat([{title:"Quantity",key:"quantity",dataIndex:"quantity",render:(e,n)=>i.a.createElement(y.a.Item,Ce({key:"quantity[".concat(n._id,"]")},a),t("quantity[".concat(n._id,"]"),{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"This field is required."}]})(i.a.createElement(he.a,{min:0,placeholder:"quantity",onChange:e=>this.storeValue("quantity",n._id,e)})))},{title:"Batch",key:"batch",dataIndex:"batch",render:(e,n)=>i.a.createElement(y.a.Item,Ce({key:"batch[".concat(n._id,"]")},a),t("batch[".concat(n._id,"]"),{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"This field is required."}]})(i.a.createElement(De.a,{placeholder:"Batch Number",onChange:e=>this.storeValue("batch",n._id,e),dataSource:n.item_type_stock&&n.item_type_stock.item_stock?n.item_type_stock.item_stock.map(e=>e.batch_number?e.batch_number:"--"):[]})))},{title:"Expiry Date",key:"expiry",dataIndex:"expiry",render:(e,n)=>i.a.createElement(y.a.Item,Ce({key:"expiry_date[".concat(n._id,"]")},a),t("expiry_date[".concat(n._id,"]"),{rules:[{required:!0,message:"This field is required."}],initialValue:L()(new Date)})(i.a.createElement(Te,{allowClear:!1})))},{title:"Unit Cost",key:"unit_cost",dataIndex:"unit_cost",render:(e,n)=>i.a.createElement(y.a.Item,Ce({key:"unit_cost[".concat(n._id,"]")},a),t("unit_cost[".concat(n._id,"]"),{rules:[{required:!0,message:"This field is required."}]})(i.a.createElement(he.a,{placeholder:"Unit Cost",onChange:e=>this.storeValue("unit_cost",n._id,e)})))},{title:"Total Cost",key:"total_cost",dataIndex:"total_cost",render:(e,t)=>i.a.createElement("span",null,this.state.tempValues["unit_cost".concat(t._id)]&&this.state.tempValues["quantity".concat(t._id)]?this.state.tempValues["unit_cost".concat(t._id)]*this.state.tempValues["quantity".concat(t._id)]:"--")}]):this.state.classType==Z.y&&(s=s.concat([{title:"Batch",key:"batch",dataIndex:"batch",render:(n,r)=>i.a.createElement(y.a.Item,Ce({key:"batch[".concat(r._id,"]")},a),t("batch[".concat(r._id,"]"),{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"This field is required."}]})(i.a.createElement(C.a,{placeholder:"Batch Number",onChange:t=>e.changeMaxQuantityforConsume(r._id,t)},r.item_type_stock&&r.item_type_stock.item_stock&&r.item_type_stock.item_stock.map(e=>i.a.createElement(C.a.Option,{value:e.batch_number},"#",e.batch_number," (",e.quantity,")")))))},{title:"Quantity",key:"quantity",dataIndex:"quantity",render:(e,n)=>i.a.createElement(y.a.Item,Ce({key:"quantity[".concat(n._id,"]")},a),t("quantity[".concat(n._id,"]"),{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"This field is required."}]})(i.a.createElement(he.a,{min:0,max:this.state.maxQuantityforConsume[n._id],placeholder:"quantity"})))}])),s=s.concat([{title:"Action",key:"_id",dataIndex:"_id",render:(t,a)=>i.a.createElement("a",{onClick:()=>e.remove(a._id)},"Delete")}]),i.a.createElement("div",null,i.a.createElement(J.a,{spinning:this.state.loading},i.a.createElement(c.a,{title:"".concat(this.state.classType," Stock"),extra:i.a.createElement(Le,{loading:this.state.loadingQr,value:this.state.qrValue,onChange:this.setQrValue,placeholder:"Search QR Code",onSearch:this.addItemThroughQR,style:{width:200}})},i.a.createElement(f.a,{gutter:16},i.a.createElement(P.a,{span:7},i.a.createElement(Oe.a,{size:"small",type:"card"},Z.ob.map(e=>i.a.createElement(Ae,{tab:e.label,key:e.value},i.a.createElement("div",{style:{backgroundColor:"#ddd",padding:8}},i.a.createElement(ue.a.Search,{key:e.label,placeholder:"Search in ".concat(e.label,"..."),onSearch:t=>this.searchValues(e.label,t)})),i.a.createElement(W.a,{size:"small",itemLayout:"horizontal",dataSource:this.state.items&&this.state.items[e.value]?this.state.items[e.value].results:[],renderItem:e=>i.a.createElement(W.a.Item,null,i.a.createElement(W.a.Item.Meta,{title:"".concat(e.name," (").concat(e.total_quantity,")"),description:e.item_type_stock.item_stock&&e.item_type_stock.item_stock.map(e=>i.a.createElement("span",null,"#",e.batch_number,i.a.createElement("br",null)))}),i.a.createElement(d.a,{type:"primary",size:"small",shape:"circle",onClick:()=>this.add(e),icon:"arrow-right"}))}),this.state.items&&this.state.items[e.value]?i.a.createElement("div",{style:{textAlign:"center"}},i.a.createElement("a",{style:{margin:5},disabled:!this.state.items[e.value].previous,onClick:()=>this.loadItemsList(e.value,this.state.items[e.value].previous)},i.a.createElement(u.a,{type:"left"}),"Previous"),i.a.createElement(l.a,{type:"vertical"}),i.a.createElement("a",{style:{margin:5},disabled:!this.state.items[e.value].next,onClick:()=>this.loadItemsList(e.value,this.state.items[e.value].next)},"Next",i.a.createElement(u.a,{type:"right"}))):null)))),i.a.createElement(P.a,{span:17},i.a.createElement(y.a,{onSubmit:this.handleSubmit},this.state.classType==Z.y?i.a.createElement(f.a,null,i.a.createElement(P.a,{span:16},i.a.createElement(y.a.Item,Ce({key:"type_of_consumption",label:"Type of Consumption"},{labelCol:{span:6},wrapperCol:{span:14}}),t("type_of_consumption",{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"This field is required."}]})(i.a.createElement(C.a,null,Z.ec.map(e=>i.a.createElement(C.a.Option,{value:e.value},e.label))))))):null,i.a.createElement(w.a,{pagination:!1,bordered:!0,rowKey:e=>e._id,dataSource:this.state.tableFormValues,columns:s}),i.a.createElement(ke.a,{offsetBottom:0},i.a.createElement(c.a,null,i.a.createElement(f.a,null,i.a.createElement(P.a,{span:8},i.a.createElement(y.a.Item,Ce({key:"remarks",label:"Notes"},{labelCol:{span:24},wrapperCol:{span:24}}),t("remarks",{})(i.a.createElement(ue.a.TextArea,null))),i.a.createElement(y.a.Item,n,i.a.createElement(d.a,{type:"primary",htmlType:"submit"},"Submit"),e.props.history?i.a.createElement(d.a,{style:{margin:5},onClick:()=>e.props.history.goBack()},"Cancel"):null)),i.a.createElement(P.a,{span:8},i.a.createElement(y.a.Item,Ce({key:"date",label:this.state.classType==Z.a?"Added On":"Consumed On"},{labelCol:{span:10},wrapperCol:{span:14}}),t("date",{rules:[{required:!0,message:"This field is required."}],initialValue:L()()})(i.a.createElement(j.a,{allowClear:!1}))),i.a.createElement(y.a.Item,Ce({key:"bill_number",label:"Bill Number"},{labelCol:{span:10},wrapperCol:{span:14}}),t("bill_number",{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"This field is required."}]})(i.a.createElement(ue.a,null))),this.state.classType==Z.a?i.a.createElement("div",null,this.state.customSupplier?i.a.createElement(y.a.Item,Ce({key:"supplier_name",label:"Supplier"},{labelCol:{span:10},wrapperCol:{span:14}}),t("supplier_name",{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"This field is required."}]})(i.a.createElement(ue.a,null)),this.state.customSupplier?i.a.createElement("a",{onClick:()=>this.changeSupplierType(!1)},"Cancel"):null):i.a.createElement(y.a.Item,Ce({key:"supplier",label:"Supplier"},{labelCol:{span:10},wrapperCol:{span:14}}),t("supplier",{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"This field is required."}]})(i.a.createElement(C.a,null,this.state.supplierList.map(e=>i.a.createElement(C.a.Option,{value:e.id},e.name)))),this.state.customSupplier?null:i.a.createElement("a",{onClick:()=>this.changeSupplierType(!0)},"Add New"))):null),i.a.createElement(P.a,{span:6,offset:2},i.a.createElement(y.a.Item,Ce({key:"file"},a),t("file",{})(i.a.createElement(Pe.a,r,i.a.createElement(d.a,null,i.a.createElement(u.a,{type:"upload"})," Select File"))))),this.state.classType==Z.a?i.a.createElement(P.a,{style:{textAlign:"center"},span:8},i.a.createElement("h3",null,"Grand Total: ",i.a.createElement("b",null,this.state.tableFormValues.reduce((function(t,a){return e.state.tempValues["quantity".concat(a._id)]&&e.state.tempValues["unit_cost".concat(a._id)]?t+e.state.tempValues["quantity".concat(a._id)]*e.state.tempValues["unit_cost".concat(a._id)]:t}),0)))):null)))))))))}}var qe=y.a.create()(Fe),Re=a(456);function Ne(){return(Ne=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Ye(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Be extends i.a.Component{constructor(e){super(e),Ye(this,"loadProductMargin",()=>{const e=this;Object(m.c)(h.Md,(function(t){e.setState({productMargin:t})}),(function(){}))}),Ye(this,"loadInventoryTotal",()=>{const e=this;Object(m.c)(h.ac,(function(t){e.setState({inventoryTotal:t.total_price})}),(function(){}),{practice:this.props.active_practiceId})}),Ye(this,"changeFilter",e=>{const t=this;this.setState({[e.target.name]:e.target.value},(function(){t.loadData()}))}),Ye(this,"changeInventoryFilters",(e,t)=>{const a=this;a.setState({[e]:t},(function(){a.loadData()}))}),Ye(this,"inventoryItemModalOpen",e=>{this.setState({inventoryModal:!0,inventoryItemObj:e})}),Ye(this,"inventoryItemModalClose",()=>{this.setState({inventoryModal:!1})}),this.state={inventoryItems:[],inventoryItemList:[],stockModalVisibility:!1,itemTypeFilter:"ALL",itemStockFilter:"ALL",loading:!0,nextItemPage:null,productMargin:[],inventoryModal:!1,inventoryItemObj:null,inventoryTotal:null},this.loadData=this.loadData.bind(this),this.showAddOrConsumeModal=this.showAddOrConsumeModal.bind(this),this.setActionType=this.setActionType.bind(this),this.changeFilter=this.changeFilter.bind(this),this.deleteObject=this.deleteObject.bind(this),this.excelExport=this.excelExport.bind(this),this.pdfExport=this.pdfExport.bind(this)}componentDidMount(){this.loadData(),this.loadProductMargin()}loadData(e=1){const t=this;t.setState({loading:!0}),t.loadInventoryTotal();const a={maintain_inventory:!0,practice:this.props.active_practiceId,page:e,sort:b.s,on:"total_quantity"};"ALL"!==t.state.itemTypeFilter&&(a.item_type=t.state.itemTypeFilter),"ALL"!==t.state.itemStockFilter&&(a.filter_type=t.state.itemStockFilter),t.state.filterItemName&&(a.item_name=t.state.filterItemName),t.state.filterItemCode&&(a.code=t.state.filterItemCode),t.state.filterMLM&&(a.margin=t.state.filterMLM),Object(m.c)(h.Wb,(function(e){const a=e.results;t.setState((function(t){return 1===e.current?{inventoryItems:a,loading:!1,nextItemPage:e.next}:{inventoryItems:[...t.inventoryItems,...a],loading:!1,nextItemPage:e.next}}))}),(function(){t.setState({loading:!1})}),a)}deleteObject(e){const t=this;Object(m.m)(Object(m.g)(h.oe,[e]),{is_active:!1},(function(){t.loadData()}),(function(){}))}setActionType(e,t){this.setState({itemId:t,actionType:e}),this.showAddOrConsumeModal(!0)}showAddOrConsumeModal(e){this.setState({stockModalVisibility:e})}excelExport(){const e=this,t=Object(m.p)("Generating Report..."),a={maintain_inventory:!0,practice:this.props.active_practiceId,sort:b.s,on:"total_quantity"};"ALL"!==e.state.itemTypeFilter&&(a.item_type=e.state.itemTypeFilter),"ALL"!==e.state.itemStockFilter&&(a.filter_type=e.state.itemStockFilter),e.state.filterItemName&&(a.item_name=e.state.filterItemName),e.state.filterItemCode&&(a.code=e.state.filterItemCode),e.state.filterMLM&&(a.margin=e.state.filterMLM),Object(m.c)(h.Xb,(function(e){Object(m.q)(t,b.sc,"Report Generated Successfully!!"),e.report_csv&&window.open(Re.a+e.report_csv)}),(function(){Object(m.q)(t,b.T,"Report Generation Failed!!")}),a)}pdfExport(){const e=this,t=Object(m.p)("Generating Report..."),a={maintain_inventory:!0,practice:this.props.active_practiceId,sort:b.s,on:"total_quantity"};"ALL"!==e.state.itemTypeFilter&&(a.item_type=e.state.itemTypeFilter),"ALL"!==e.state.itemStockFilter&&(a.filter_type=e.state.itemStockFilter),e.state.filterItemName&&(a.item_name=e.state.filterItemName),e.state.filterItemCode&&(a.code=e.state.filterItemCode),e.state.filterMLM&&(a.margin=e.state.filterMLM),Object(m.c)(h.Xb,(function(e){Object(m.q)(t,b.sc,"Report Generated Successfully!!"),e.report_pdf&&window.open(Re.a+e.report_pdf)}),(function(){Object(m.q)(t,b.T,"Report Generation Failed!!")}),a)}render(){const e={};this.state.taxes_list&&this.state.taxes_list.forEach((function(t){e[t.id]=t}));const t={};this.state.manufacture_list&&this.state.manufacture_list.forEach((function(e){t[e.id]=e.name}));const a={};this.state.vendor_list&&this.state.vendor_list.forEach((function(e){a[e.id]=e.name}));const n=this,r=[{title:"Name",dataIndex:"name",key:"name",render:(e,t)=>i.a.createElement("a",{onClick:()=>this.inventoryItemModalOpen(t)},i.a.createElement("span",null,t.name))},{title:"HSN",dataIndex:"hsn_data",key:"hsn_data",render:(e,t)=>i.a.createElement("span",null,e?e.code:null)},{title:"Inventory Stock",dataIndex:"total_quantity",key:"total_quantity",render:(e,t)=>i.a.createElement("span",null,e," ",e<=t.re_order_level?i.a.createElement(oe.a,{color:"#f50"},"Low"):null)},{title:"Expired Stock",dataIndex:"item_type_stock",key:"expired_stock",export(e){let t=0;const a=L()();return e.item_stock&&e.item_stock.forEach((function(e){a>=L()(e.expiry_date,"YYYY-MM-DD")&&(t+=Number.isInteger(e.quantity)?e.quantity:0)})),t},render(e){let t=0;const a=L()();return e.item_stock&&e.item_stock.forEach((function(e){a>=L()(e.expiry_date,"YYYY-MM-DD")&&(t+=Number.isInteger(e.quantity)?e.quantity:0)})),i.a.createElement("span",null,t)}},{title:"Retail Price (INR)",dataIndex:"retail_without_tax",key:"retail_without_tax",render:(e,t)=>i.a.createElement("span",null,t.retail_without_tax)},{title:"M.R.P",dataIndex:"retail_with_tax",key:"retail_with_tax",render:(e,t)=>i.a.createElement("span",null,t.retail_with_tax)},{title:"MLM Margin",dataIndex:"margin_data",key:"margin",render:e=>i.a.createElement("span",null,e?e.name:null)},{title:"Item type",dataIndex:"item_type",key:"item_type"},{title:"Reorder Level",dataIndex:"re_order_level",key:"re_order_level"},{title:"Manufacturer",key:"manufacturer",export:(e,t)=>t.manufacturer_data?t.manufacturer_data.name:"",render:(e,t)=>i.a.createElement("span",null," ",t.manufacturer_data?t.manufacturer_data.name:"")},{title:"Stock Cost (INR)",key:"stock_cost",render:(e,t)=>i.a.createElement("span",null," ",t.item_type_stock&&t.item_type_stock.item_stock?t.item_type_stock.item_stock.reduce((e,t)=>e+t.unit_cost*t.quantity,0).toFixed(2):"")},{title:"Actions",render:e=>i.a.createElement("div",null,i.a.createElement(p.b,{to:"/inventory/edit/".concat(e.id)},"Edit"),i.a.createElement(l.a,{type:"vertical"}),0===e.total_quantity?i.a.createElement(o.a,{title:"Are you sure delete this item?",onConfirm:()=>n.deleteObject(e.id),okText:"Yes",cancelText:"No"},i.a.createElement("a",null,"Delete")):i.a.createElement(oe.a,{color:"red"},"Can Not Delete"))}],m=[{title:"S.No",key:"s_no",render:(e,t,a)=>i.a.createElement("span",null,a+1)},{title:"Batch Number",dataIndex:"batch_number",key:"batch_number"},{title:"Quantity",dataIndex:"quantity",key:"quantity"},{title:"Stock Cost(INR)",key:"stock_cost",render:(e,t)=>i.a.createElement("span",null,(t.quantity*t.unit_cost).toFixed(2))},{title:"Expiry Date",key:"expiry_date",render:(e,t)=>i.a.createElement("span",null,L()(t.expiry_date).format("DD-MM-YYYY"))}];return i.a.createElement("div",null,i.a.createElement(s.d,null,i.a.createElement(s.b,{path:"/inventory/add",render:e=>n.props.activePracticePermissions.AddInventoryItem||n.props.allowAllPermissions?i.a.createElement(xe,Ne({},e,this.props,this.state,{loadData:this.loadData})):i.a.createElement(I.a,null)}),i.a.createElement(s.b,{exact:!0,path:"/inventory/edit/:id",render:e=>n.props.activePracticePermissions.AddInventoryItem||n.props.allowAllPermissions?i.a.createElement(xe,Ne({},this.state,this.props,e,{loadData:this.loadData})):i.a.createElement(I.a,null)}),i.a.createElement(s.b,{exact:!0,path:"/inventory/consume-stock",render:e=>n.props.activePracticePermissions.AddInventoryStock||n.props.allowAllPermissions?i.a.createElement(qe,Ne({key:Z.y,type:Z.y,loadData:this.loadData},this.state,e,this.props)):i.a.createElement(I.a,null)}),i.a.createElement(s.b,{exact:!0,path:"/inventory/add-stock",render:e=>n.props.activePracticePermissions.ConsumeInventoryStock||n.props.allowAllPermissions?i.a.createElement(qe,Ne({key:Z.a,type:Z.a,loadData:this.loadData},this.state,e,this.props)):i.a.createElement(I.a,null)}),i.a.createElement(s.b,null,i.a.createElement(c.a,{title:"Inventory List",extra:i.a.createElement(d.a.Group,null,i.a.createElement(p.b,{to:"/inventory/add"},i.a.createElement(d.a,{type:"primary",disabled:!n.props.activePracticePermissions.AddInventoryItem&&!n.props.allowAllPermissions},i.a.createElement(u.a,{type:"plus"})," Add Item")),i.a.createElement(p.b,{to:"/inventory/add-stock"},i.a.createElement(d.a,{disabled:!n.props.activePracticePermissions.AddInventoryStock&&!n.props.allowAllPermissions,type:"primary"},"Add Stock")),i.a.createElement(p.b,{to:"/inventory/consume-stock"},i.a.createElement(d.a,{disabled:!n.props.activePracticePermissions.ConsumeInventoryStock&&!n.props.allowAllPermissions,type:"primary"},"Consume Stock")))},i.a.createElement(f.a,{style:{marginBottom:10}},i.a.createElement(P.a,{span:8},i.a.createElement(ce.a.Group,{name:"itemTypeFilter",size:"small",defaultValue:"ALL",buttonStyle:"solid",onChange:this.changeFilter,style:{margin:"10px"}},i.a.createElement(ce.a.Button,{value:"ALL"},"ALL"),Z.ob.map(e=>i.a.createElement(ce.a.Button,{value:e.value},e.label)))),i.a.createElement(P.a,{span:8,style:{textAlign:"center"}},i.a.createElement(de.a,{title:"Inventory Total Cost",value:this.state.inventoryTotal,prefix:"Rs."})),i.a.createElement(P.a,{span:8},i.a.createElement(ce.a.Group,{name:"itemStockFilter",size:"small",defaultValue:"ALL",buttonStyle:"solid",style:{margin:"10px",float:"right"},onChange:this.changeFilter},i.a.createElement(ce.a.Button,{value:"ALL"},"ALL"),i.a.createElement(ce.a.Button,{value:"Low"},"Low"),i.a.createElement(ce.a.Button,{value:"Expired"},"Expired")))),i.a.createElement(f.a,{gutter:16,style:{marginBottom:10}},i.a.createElement(P.a,{span:4},i.a.createElement(d.a.Group,{size:"small"},i.a.createElement(d.a,{disabled:this.state.loading,type:"primary",onClick:this.excelExport},i.a.createElement(u.a,{type:"file-excel"})," Excel"),i.a.createElement(d.a,{disabled:this.state.loading,type:"primary",onClick:this.pdfExport},i.a.createElement(u.a,{type:"file-pdf"})," PDF"))),i.a.createElement(P.a,{span:2,style:{textAlign:"right"}},i.a.createElement("b",null," Item Name")),i.a.createElement(P.a,{span:4},i.a.createElement(ue.a,{style:{width:"100%"},value:this.state.filterItemName,allowClear:!0,placeholder:"Item Name",onChange:e=>this.changeInventoryFilters("filterItemName",e.target.value)})),i.a.createElement(P.a,{span:2,style:{textAlign:"right"}},i.a.createElement("b",null," HSN")),i.a.createElement(P.a,{span:4},i.a.createElement(ue.a,{style:{width:"100%"},value:this.state.filterItemCode,allowClear:!0,placeholder:"HSN Number",onChange:e=>this.changeInventoryFilters("filterItemCode",e.target.value)})),i.a.createElement(P.a,{span:2,style:{textAlign:"right"}},i.a.createElement("b",null," MLM")),i.a.createElement(P.a,{span:4},i.a.createElement(C.a,{style:{width:"100%"},value:this.state.filterMLM,allowClear:!0,placeholder:"MLM Margin",onChange:e=>this.changeInventoryFilters("filterMLM",e)},this.state.productMargin.map(e=>i.a.createElement(C.a.Option,{value:e.id},e.name))))),i.a.createElement(f.a,null,i.a.createElement(w.a,{bordered:!0,pagination:!1,hideReport:!0,dataSource:this.state.inventoryItems.sort((e,t)=>parseInt(t.total_quantity)-parseInt(e.total_quantity)),columns:r}),i.a.createElement(J.a,{spinning:this.state.loading},i.a.createElement(f.a,null)),i.a.createElement($.a,{loaderFunction:()=>this.loadData(this.state.nextItemPage),loading:this.state.loading,hidden:!this.state.nextItemPage})),i.a.createElement(pe.a,{visible:this.state.stockModalVisibility,title:"Stock".concat(this.state.actionType),onOk:()=>this.showAddOrConsumeModal(!1),onCancel:()=>this.showAddOrConsumeModal(!1),footer:null},i.a.createElement(qe,{showAddOrConsumeModal:this.showAddOrConsumeModal,itemId:this.state.itemId,actionType:this.state.actionType})),i.a.createElement(pe.a,{title:this.state.inventoryItemObj?"".concat(this.state.inventoryItemObj.name," Details"):"",visible:this.state.inventoryModal,onCancel:this.inventoryItemModalClose,footer:null},i.a.createElement(w.a,{dataSource:this.state.inventoryItemObj?this.state.inventoryItemObj.item_type_stock.item_stock:[],columns:m,pagination:!1}))))))}}var Ue=a(1602);function ze(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Qe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ze(Object(a),!0).forEach((function(t){Ge(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ze(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Ge(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class He extends i.a.Component{constructor(e){super(e),Ge(this,"changeStaff",e=>{const t=this;this.setState({selectedStaff:e},(function(){t.userPermission()}))}),this.state={practiceStaff:[],selectedStaff:null},this.userPermission=this.userPermission.bind(this)}componentDidMount(){Object(X.g)(this)}userPermission(){const e=this;this.setState({loading:!0});let t={staff:e.state.selectedStaff};Object(m.c)(h.mf,(function(t){let a=Qe({},t),n=[],i={};a.allowed_permissions.forEach((function(e){i=Qe(Qe({},i),{},{[e.practice]:Qe(Qe({},i[e.practice]),{},{[e.codename]:!0})})})),a.all_permissions.forEach((function(e){let t={permission:e.name};a.practices.forEach((function(a){t[a.id]=i[a.id]&&i[a.id][e.codename]?"YES":"NO"})),n.push(t)})),e.setState({practices:a.practices,all:n,loading:!1})}),(function(){e.setState({loading:!1})}),t)}render(){const e=this.state,t=e.practices,a=e.all,n=e.practiceStaff,r=e.selectedStaff,s=e.loading,o=[{title:"Permission",key:"permission",dataIndex:"permission"}];return t&&t.forEach((function(e){o.push({title:e.name,dataIndex:e.id,key:e.id})})),i.a.createElement("div",null,i.a.createElement(c.a,{title:"User Permission"},i.a.createElement(f.a,null,i.a.createElement(P.a,{sm:24,md:12,lg:8},i.a.createElement("h4",null,"Staff"),i.a.createElement(C.a,{value:r,style:{width:"100%"},onChange:e=>this.changeStaff(e)},n.map(e=>i.a.createElement(C.a.Option,{value:e.id},e.user.first_name))))),i.a.createElement(l.a,null),r?i.a.createElement(_.a,{loading:s,dataSource:a,columns:o,pagination:!1}):i.a.createElement(Ue.a,{title:"Select Staff to see permissions",status:"info"})))}}function Je(){return(Je=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}const We=r.a.Content;class Ke extends i.a.Component{constructor(e){super(e)}render(){const e=this;return(i.a.createElement(We,{className:"main-container",style:{margin:"24px 16px",minHeight:280}},i.a.createElement(s.d,null,i.a.createElement(s.b,{path:"/inventory/vendor",render:t=>e.props.activePracticePermissions.ViewVendor||e.props.allowAllPermissions?i.a.createElement(k,Je({},this.props,t)):i.a.createElement(I.a,null)}),i.a.createElement(s.b,{path:"/inventory/expenses",render:t=>e.props.activePracticePermissions.ViewExpenses||e.props.allowAllPermissions?i.a.createElement(F,Je({},this.props,t)):i.a.createElement(I.a,null)}),i.a.createElement(s.b,{path:"/inventory/manufacture",render:t=>e.props.activePracticePermissions.ViewManufacturer||e.props.allowAllPermissions?i.a.createElement(z,Je({},e.props,this.state,t)):i.a.createElement(I.a,null)}),i.a.createElement(s.b,{path:"/inventory/lab",render:t=>e.props.activePracticePermissions.Labs||e.props.allowAllPermissions?i.a.createElement(H,this.props):i.a.createElement(I.a,null)}),i.a.createElement(s.b,{path:"/inventory/activity",render:t=>e.props.activePracticePermissions.ViewActivities||e.props.allowAllPermissions?i.a.createElement(le,Je({},this.props,t)):i.a.createElement(I.a,null)}),i.a.createElement(s.b,{path:"/inventory/permission",render:t=>e.props.activePracticePermissions||e.props.allowAllPermissions?i.a.createElement(He,Je({},t,this.props)):i.a.createElement(I.a,null)}),i.a.createElement(s.b,{path:"/inventory",render:t=>e.props.activePracticePermissions.ViewInventory||e.props.allowAllPermissions?i.a.createElement(Be,Je({},t,this.props)):i.a.createElement(I.a,null)}))))}}},439:function(e,t,a){"use strict";a.d(t,"a",(function(){return D}));var n=a(1),i=a.n(n),r=a(1568),s=a(503),l=a(448),o=a(1105),c=a(1183),d=a(1589),u=a(1572),p=a(436),m=a.n(p),h=a(517),y=a.n(h),f=a(464),b=a.n(f),g=a(508),E=a.n(g);a(518);const v=function(e,t,a=!0){let n="",i=[];return a&&(e.forEach((function(e){i.push(e)})),n+=i.join(","),n+="\r\n"),t.forEach((function(t){i=[],e.forEach((function(e){t[e]?i.push(t[e]):i.push("--")})),n+=i.join(","),n+="\r\n"})),n},_=function(e,t){const a="".concat(t,".csv");let n;const i=[];i.push(255,254);for(let t=0;t<e.length;++t)n=e.charCodeAt(t),i.push(255&n),i.push(n/256>>>0);const r=new Blob([new Uint8Array(i)],{type:"text/csv;charset=UTF-16LE;"});if(navigator.msSaveBlob)navigator.msSaveBlob(r,a);else{const e=document.createElement("a");if(void 0!==e.download){const t=window.URL.createObjectURL(r);e.setAttribute("href",t),e.setAttribute("download",a),e.style.visibility="hidden",document.body.appendChild(e),e.click(),document.body.removeChild(e),window.URL.revokeObjectURL(t)}}};a(435),a(434),a(438);function I(){return(I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function x(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?x(Object(a),!0).forEach((function(t){S(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):x(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function S(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class D extends i.a.Component{constructor(e){super(e),S(this,"getColumnSearchProps",e=>({filterDropdown:({setSelectedKeys:t,selectedKeys:a,confirm:n,clearFilters:l})=>i.a.createElement("div",{style:{padding:8}},i.a.createElement(r.a,{ref:e=>{this.searchInput=e},placeholder:"Search ".concat(e),value:a[0],onChange:e=>t(e.target.value?[e.target.value]:[]),onPressEnter:()=>this.handleSearch(a,n),style:{width:188,marginBottom:8,display:"block"}}),i.a.createElement(s.a,{type:"primary",onClick:()=>this.handleSearch(a,n),icon:"search",size:"small",style:{width:90,marginRight:8}},"Search"),i.a.createElement(s.a,{onClick:()=>this.handleReset(l),size:"small",style:{width:90}},"Reset")),filterIcon:e=>i.a.createElement(l.a,{type:"search",style:{color:e?"#1890ff":void 0}}),onFilter:(t,a)=>null!=b()(a,e)?b()(a,e).toString().toLowerCase().includes(t.toLowerCase()):"",onFilterDropdownVisibleChange:e=>{e&&setTimeout(()=>this.searchInput.select())},render:e=>i.a.createElement(y.a,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[this.state.searchText],autoEscape:!0,textToHighlight:e?e.toString():""})})),S(this,"handleSearch",(e,t)=>{t(),this.setState({searchText:e[0]})}),S(this,"handleReset",e=>{e(),this.setState({searchText:""})}),this.state=O(O({},e),{},{searchText:""}),this.excelExport=this.excelExport.bind(this),this.pdfExport=this.pdfExport.bind(this)}componentWillReceiveProps(e){e.columns==this.state.columns&&e.dataSource==this.state.dataSource&&e.loading==this.state.loading||this.setState(O({},e))}pdfExport(){const e=this,t=[];e.state.columns.forEach((function(e){e.hideExport||t.push({title:e.title,dataKey:e.title})}));const a=[];e.state.dataSource.forEach((function(t,n){const i={};e.state.columns.forEach((function(e){e.export?i[e.title]=e.export(b()(t,e.dataIndex),t,n):i[e.title]=b()(t,e.dataIndex)})),a.push(i)})),function(e,t,a){const n=new E.a("p","mm","a4");!function(e){e.line(10,20,200,20)}(n);const i=Object.create(t);n.autoTable(e,i,{margin:{top:35},startY:n.autoTableEndPosY()+20,headerStyle:{overflow:"linebreak"},bodyStyles:{overflow:"linebreak"}}),function(e){e.line(10,270,200,270),e.setFontSize(8),e.text(10,275,"This is a computer generated report.")}(n),n.save("".concat(a,".pdf"))}(t,a,"Export".concat(m()()))}excelExport(){const e=this,t=[];e.state.columns.forEach((function(e){e.hideExport||t.push(e.title)}));const a=[];e.state.dataSource.forEach((function(t,n){const i={};e.state.columns.forEach((function(e){e.export?i[e.title]=e.export(b()(t,e.dataIndex),t,n):i[e.title]=b()(t,e.dataIndex)})),a.push(i)})),function(e,t,a="download"){const n=v(e,t);_(n,a)}(t,a,"Export".concat(m()()))}render(){const e=this,t=this.state.columns.map(t=>t.hide?{}:t.render?O({},t):O(O({},t),e.getColumnSearchProps(t.dataIndex)));return i.a.createElement("div",null,this.props.hideReport?null:i.a.createElement(o.a,null,i.a.createElement(c.a,null,i.a.createElement(s.a.Group,{size:"small"},i.a.createElement(s.a,{disabled:this.state.loading,type:"primary",onClick:this.excelExport},i.a.createElement(l.a,{type:"file-excel"})," Excel"),i.a.createElement(s.a,{disabled:this.state.loading,type:"primary",onClick:this.pdfExport},i.a.createElement(l.a,{type:"file-pdf"})," PDF")))),i.a.createElement(o.a,null,i.a.createElement(d.a,I({pagination:{position:"both",pageSizeOptions:["10","20","30","40","50","100"],showSizeChanger:!0,showQuickJumper:!0,size:"small",showTotal:(e,t)=>i.a.createElement(u.a,null,"Showing ",i.a.createElement("b",null,t[0])," to ",i.a.createElement("b",null,t[1])," of ",i.a.createElement("b",null,e)," items")}},this.state,{columns:t}))))}}},442:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(433),i=a(1105),r=a(503),s=a(1),l=a.n(s);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class c extends l.a.Component{constructor(e){super(e),o(this,"startLoading",()=>{this.props.loaderFunction&&(this.props.loaderFunction(),this.startMakingExtraLabels())}),o(this,"startMakingExtraLabels",()=>{const e=this;this.setState((function(e){return e.extraLoadingLabel.length>2?{extraLoadingLabel:""}:{extraLoadingLabel:"".concat(e.extraLoadingLabel,".")}}),(function(){e.props.loading&&setTimeout((function(){e.startMakingExtraLabels()}),500)}))}),this.state={extraLoadingLabel:""}}render(){return this.props.loading?l.a.createElement(n.a,{spinning:this.props.loading},l.a.createElement(i.a,{style:{minHeight:200}})):this.props.hidden?l.a.createElement(i.a,null,l.a.createElement("div",{style:{textAlign:"center",margin:"15px 0px"}},l.a.createElement("small",null,"No More Data Found"))):l.a.createElement(i.a,null,l.a.createElement("div",{style:{textAlign:"center",margin:"15px 0px"}},l.a.createElement(r.a,{type:"primary",onClick:this.startLoading,loading:this.props.loading},this.props.loading?"Loading".concat(this.state.extraLoadingLabel):"Load More")))}}}}]);