(window["webpackJsonpbk-erp-front"]=window["webpackJsonpbk-erp-front"]||[]).push([[12],{1214:function(e,t,a){},1747:function(e,t,a){"use strict";a.r(t);a(138);var n=a(101),r=(a(228),a(227)),l=(a(241),a(242)),i=a(96),o=a(97),s=a(100),c=a(98),u=a(44),m=a(99),d=a(0),p=a.n(d),b=a(24),h=(a(290),a(289)),f=(a(262),a(264)),E=(a(230),a(229)),g=(a(379),a(395)),v=(a(268),a(271)),y=(a(296),a(297)),O=(a(236),a(18)),k=(a(287),a(283)),j=a(248),P=a(65),S=a(23),C=a(32),w=a(299),D=(a(20),a(16)),_=a(2),T=a(247),A=n.a.Header,I=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(c.a)(t).call(this,e))).searchPatient=function(e){var t=Object(u.a)(a);a.setState((function(t){return{searchPatientString:e}}));e&&Object(S.c)(Object(S.f)(C.Vc,[e]),(function(a){t.setState((function(t){return t.searchPatientString==e?{patientListData:Object(j.a)(a.results)}:{}}))}),(function(e){t.setState({searchPatientString:null})}))},a.switchPortal=function(){var e=Object(u.a)(a);Object(S.c)(Object(S.f)(C.Uc,[e.props.user.id]),(function(t){t&&e.setUserCredentials(t.login,t.password)}),(function(){Object(S.a)(_.Q,"Something went wrong.")}))},a.handlePatientSelect=function(e){e&&(a.props.history.push("/patient/"+e.replace(T.r,"")+"/profile"),a.setState({searchPatientString:null}))},a.state={patientListData:[]},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"setUserCredentials",value:function(e,t){var a=Object(S.o)("Waiting for authentication from server...");sessionStorage.removeItem("token");var n={email:e,password:t};null==sessionStorage.getItem("token")&&Object(S.k)(C.W,n,(function(e){e.success&&(Object(S.p)(a,_.Sb," Authentication Successfully!!"),sessionStorage.setItem("token",e.token)),sessionStorage.getItem("token")?window.open("/task/"):Object(S.p)(a,_.Q,"Authentication failed. User not found.")}),(function(){}))}},{key:"render",value:function(){var e=this,t=this,a=p.a.createElement(k.a,null,p.a.createElement(k.a.Item,{key:"profile"},p.a.createElement(P.b,{to:"/profile"},"Profile")),p.a.createElement(k.a.Divider,null),p.a.createElement(k.a.Item,{key:"website",onClick:this.switchPortal},p.a.createElement("small",null,"Switch to Tasks >")),p.a.createElement(k.a.Divider,null),p.a.createElement(k.a.Item,{key:"logout"},p.a.createElement("a",{onClick:this.props.logout},"Log out")));return p.a.createElement(A,{style:{background:"#fff",padding:0,boxShadow:"0 2px 4px 0 rgba(38,50,69,.2)",zIndex:1}},p.a.createElement("div",{style:{float:"left",margin:"0px 20px"}},p.a.createElement(O.a,{className:"trigger",type:this.props.collapsed?"menu-unfold":"menu-fold",onClick:function(){return e.props.toggleSider(!e.props.collapsed)}})),p.a.createElement(k.a,{mode:"horizontal",style:{lineHeight:"64px"}},p.a.createElement(k.a.Item,{key:"5"},p.a.createElement(g.a,{placeholder:"Patient Name",showSearch:!0,dropdownMatchSelectWidth:!1,dropdownStyle:{width:400},onSearch:this.searchPatient,defaultActiveFirstOption:!1,showArrow:!1,value:this.state.searchPatientString,filterOption:!1,onSelect:this.handlePatientSelect},this.state.patientListData.map((function(e){return p.a.createElement(g.a.Option,{value:e.id.toString()+T.r},p.a.createElement(v.a.Item,{style:{padding:0}},p.a.createElement(v.a.Item.Meta,{avatar:e.image?p.a.createElement(y.a,{src:Object(S.g)(e.image)}):p.a.createElement(y.a,{style:{backgroundColor:"#87d068"}},e.user.first_name?e.user.first_name.charAt(0):p.a.createElement(O.a,{type:"user"})),title:e.user.first_name,description:t.props.activePracticePermissions.PatientPhoneNumber?e.user.mobile:Object(w.b)(e.user.mobile)}),p.a.createElement("div",null,e.custom_id?e.custom_id:e.user.id)))})))),p.a.createElement(k.a.Item,{key:"4"},p.a.createElement(r.a.Group,null,t.props.activePracticePermissions.AddPatient||t.props.allowAllPermissions?p.a.createElement(P.b,{to:"/patients/profile/add"},p.a.createElement(r.a,{type:"primary"},p.a.createElement(O.a,{type:"plus"}),"Add Patient")):null,t.props.activePracticePermissions.MergePatients||t.props.allowAllPermissions?p.a.createElement(P.b,{to:"/patients/merge"},p.a.createElement(r.a,{type:"primary"},p.a.createElement(O.a,{type:"user-add"}),"Merge Patients")):null)),p.a.createElement(k.a.Item,{key:"3"},p.a.createElement(E.a,{onChange:this.props.switchPractice,defaultValue:this.props.active_practiceId,value:this.props.active_practiceId,style:{width:"300px",maxWidth:"70vw"}},this.props.practiceList&&this.props.practiceList.map((function(e){return p.a.createElement(E.a.Option,{key:e.practice.id,value:e.practice.id},e.practice.name)})))),p.a.createElement("div",{style:{float:"right",margin:"0px 20px"}},this.props.user&&this.props.user.is_superuser?p.a.createElement(f.a,{color:"red"},"SuperUser"):null,p.a.createElement(h.a,{overlay:a,placement:"bottomRight"},p.a.createElement(y.a,{style:{backgroundColor:"#87d068"},icon:"user"})))))}}]),t}(p.a.Component),x=a(94),N=a(506),H=a.n(N),B=a(904),L=n.a.Sider,M=k.a.SubMenu,R=(k.a.ItemGroup,function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(c.a)(t).call(this,e))).onOpenChange=function(e){var t=e.find((function(e){return-1===a.state.openKeys.indexOf(e)}));-1===["sub1","sub2"].indexOf(t)?a.setState({openKeys:e}):a.setState({openKeys:t?[t]:[]})},a.state={openKeys:[]},a.onHotKeyDown=a.onHotKeyDown.bind(Object(u.a)(a)),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"onHotKeyDown",value:function(e){console.log(e);switch(e){case"alt+c":this.props.history.push("/calendar");break;case"alt+p":this.props.history.push("/patients/profile");break;case"alt+r":this.props.history.push("/reports/appointments");break;case"alt+s":this.props.history.push("/settings/clinics");break;case"alt+b":this.props.history.push("/inventory");break;case"alt+w":this.props.history.push("/web/videos")}}},{key:"render",value:function(){var e=this,t=this;return p.a.createElement(B.a,{keyName:T.hb,onKeyDown:function(t){return e.onHotKeyDown(t)}},p.a.createElement(L,{trigger:null,collapsible:!0,collapsed:this.props.collapsed,style:{zIndex:1},breakpoint:"xxl",onBreakpoint:function(e){t.props.toggleSider(e)},onCollapse:function(e,t){}},p.a.createElement("img",{src:H.a,alt:"",style:{width:"100%",padding:"20px"}}),p.a.createElement(k.a,{mode:"inline",defaultSelectedKeys:["1"],openKeys:this.state.openKeys,onOpenChange:this.onOpenChange,theme:"dark"},this.props.activePracticePermissions.ViewCalendar?p.a.createElement(k.a.Item,{key:"1"},p.a.createElement(P.b,{to:"/calendar"},p.a.createElement(O.a,{type:"schedule"}),p.a.createElement("span",{className:"nav-text"},p.a.createElement("span",{className:"shortcutLetterHighlight"},"C"),"alendar"))):null,p.a.createElement(k.a.Item,{key:"26"},p.a.createElement(P.b,{to:this.props.currentPatient?"/patient/"+this.props.currentPatient.id+"/profile":"/patients/profile"},p.a.createElement(O.a,{type:"user"}),p.a.createElement("span",{className:"nav-text"},p.a.createElement("span",{className:"shortcutLetterHighlight"},"P"),"atients"))),p.a.createElement(k.a.Item,{key:"27"},p.a.createElement(P.b,{to:"/reports/appointments"},p.a.createElement(O.a,{type:"bar-chart"}),p.a.createElement("span",{className:"nav-text"},p.a.createElement("span",{className:"shortcutLetterHighlight"},"R"),"eports"))),p.a.createElement(k.a.Item,{key:"5"},p.a.createElement(P.b,{to:"/settings/clinics"},p.a.createElement(O.a,{type:"setting"}),p.a.createElement("span",{className:"nav-text"},p.a.createElement("span",{className:"shortcutLetterHighlight"},"S"),"ettings"))),p.a.createElement(M,{key:"sub1",title:p.a.createElement("span",null,p.a.createElement(O.a,{type:"gold"}),p.a.createElement("span",null,p.a.createElement("span",{className:"shortcutLetterHighlight"},"B"),"ack Office"))},p.a.createElement(k.a.Item,{key:"6"},p.a.createElement(P.b,{to:"/inventory/expenses"},p.a.createElement(O.a,{type:"credit-card"}),p.a.createElement("span",{className:"nav-text"},"Expenses"))),p.a.createElement(k.a.Item,{key:"7"},p.a.createElement(P.b,{to:"/inventory/activity"},p.a.createElement(O.a,{type:"bell"}),p.a.createElement("span",{className:"nav-text"},"Activities"))),p.a.createElement(k.a.Item,{key:"8"},p.a.createElement(P.b,{to:"/inventory/manufacture"},p.a.createElement(O.a,{type:"database"}),p.a.createElement("span",{className:"nav-text"},"Manufacturers"))),p.a.createElement(k.a.Item,{key:"42"},p.a.createElement(P.b,{to:"/inventory/vendor"},p.a.createElement(O.a,{type:"database"}),p.a.createElement("span",{className:"nav-text"},"Vendor"))),p.a.createElement(k.a.Item,{key:"9"},p.a.createElement(P.b,{to:"/inventory/lab"},p.a.createElement(O.a,{type:"experiment"}),p.a.createElement("span",{className:"nav-text"},"Labs"))),p.a.createElement(k.a.Item,{key:"10"},p.a.createElement(P.b,{to:"/inventory"},p.a.createElement(O.a,{type:"gold"}),p.a.createElement("span",{className:"nav-text"},"Inventory")))),this.props.activePracticePermissions.WebAdmin?p.a.createElement(k.a.Item,{key:"web-1"},p.a.createElement(P.b,{to:"/web/videos"},p.a.createElement(O.a,{type:"google"}),p.a.createElement("span",{className:"nav-text"},p.a.createElement("span",{className:"shortcutLetterHighlight"},"W"),"eb Admin"))):null,p.a.createElement(k.a.Item,{key:"11"},p.a.createElement(P.b,{to:"/meeting-booking"},p.a.createElement(O.a,{type:"reconciliation"}),p.a.createElement("span",{className:"nav-text"},"Meeting Booking"))))))}}]),t}(p.a.Component)),F=a(536),V=(a(223),a(224)),Y=(a(234),a(235)),q=(a(232),a(233)),W=(a(225),a(226)),G=(a(237),a(238)),U=(a(250),a(253)),K=(a(141),a(15)),z=a(33),J=a(88),X=G.a.Item,Z=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(c.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault();var t=Object(u.a)(a);a.props.form.validateFieldsAndScroll((function(e,a){if(!e){var n;t.setState({changePassLoading:!0});var r=(n={},Object(z.a)(n,J.d,a.oldPass),Object(z.a)(n,J.c,a.newPass),n);Object(S.j)(C.N,r,(function(e){K.a.success(e.message),t.setState({changePassLoading:!1})}),(function(){t.setState({changePassLoading:!1})}))}}))},a.handleConfirmBlur=function(e){var t=e.target.value;a.setState({confirmDirty:a.state.confirmDirty||!!t})},a.compareToFirstPassword=function(e,t,n){var r=a.props.form;t&&t!=r.getFieldValue("newPass")?n("Two passwords that you enter is inconsistent!"):n()},a.validateToNextPassword=function(e,t,a){a(Object(S.q)(e,t,a))},a.state={confirmDirty:!1,changePassLoading:!1},a.handleSubmit=a.handleSubmit.bind(Object(u.a)(a)),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e={labelCol:{span:6},wrapperCol:{span:14}},t=this.props.form.getFieldDecorator;return p.a.createElement(G.a,{onSubmit:this.handleSubmit},p.a.createElement(X,Object.assign({label:"Old Password"},e),t("oldPass",{rules:[{required:!0,message:"Please enter your old Password!"}]})(p.a.createElement(U.a,{prefix:p.a.createElement(O.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Old Password"}))),p.a.createElement(X,Object.assign({label:"New Password"},e),t("newPass",{rules:[{required:!0,message:"Please enter your new Password!"},{validator:this.validateToNextPassword}]})(p.a.createElement(U.a,{prefix:p.a.createElement(O.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"New Password"}))),p.a.createElement(X,Object.assign({label:"Confirm Password"},e),t("confirmPass",{rules:[{required:!0,message:"Please confirm your new Password!"},{validator:this.compareToFirstPassword}]})(p.a.createElement(U.a,{prefix:p.a.createElement(O.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Confirm Password",onBlur:this.handleConfirmBlur}))),p.a.createElement(X,null,p.a.createElement(r.a,{loading:this.state.changePassLoading,type:"primary",htmlType:"submit",className:"login-form-button"},"Change Password")))}}]),t}(p.a.Component),Q=n.a.Content,$=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(c.a)(t).call(this,e))).state={},console.log(a.state),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"loadProfile",value:function(){var e=this;Object(S.c)(C.Jd,(function(t){e.setState({userProfile:t,loading:!1})}),(function(){e.setState({loading:!1})}))}},{key:"render",value:function(){var e=G.a.create()(Z);return p.a.createElement(Q,{className:"main-container",style:{margin:"24px 16px",minHeight:280}},p.a.createElement(V.a,null,p.a.createElement(q.a,{span:12},p.a.createElement(W.a,{title:"Change Password"},p.a.createElement(e,null))),p.a.createElement(q.a,{span:12},p.a.createElement(W.a,{title:"My Permissions"},p.a.createElement(v.a,{size:"small",dataSource:this.props.activePracticeData?this.props.activePracticeData.permissions_data:[],renderItem:function(e){return p.a.createElement(v.a.Item,null,e.name)}}))),p.a.createElement(Y.a,null),p.a.createElement(q.a,{span:12},p.a.createElement(W.a,{title:"My Profile"},p.a.createElement(V.a,{gutter:16},p.a.createElement(q.a,{span:6},p.a.createElement(ee,{label:"Name ",value:this.props.user.first_name}),p.a.createElement(ee,{label:"Email Id ",value:this.props.user.email}),p.a.createElement(ee,{label:"Contact No.",value:this.props.user.mobile})))))))}}]),t}(p.a.Component);function ee(e){return p.a.createElement(V.a,{gutter:16,style:{marginBottom:"5px"}},p.a.createElement(q.a,{span:12,style:{textAlign:"right"}},e.label,":"),p.a.createElement(q.a,{span:12},p.a.createElement("strong",null,e.value)))}a(1214);var te=function(e){function t(e){return Object(i.a)(this,t),Object(s.a)(this,Object(c.a)(t).call(this,e))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.activePracticeData&&setTimeout((function(){window.print()}),1e3)}},{key:"componentWillReceiveProps",value:function(e){e.activePracticeData&&setTimeout((function(){window.print()}),1e3)}},{key:"render",value:function(){return this.props.activePracticeData?p.a.createElement("html",{className:"PrintPatientForm"},p.a.createElement("meta",{"http-equiv":"Content-Type",content:"text/html; charset=utf-8"}),p.a.createElement("body",{style:{margin:"0 auto",marginTop:"20px"}},p.a.createElement("div",{style:{margin:"0px 10%"}},p.a.createElement("table",{style:{borderBottom:"1px solid #000",width:"100%"}},p.a.createElement("tr",null,p.a.createElement("td",{style:{width:"150px"}},p.a.createElement("img",{style:{width:"150px"},src:Object(S.g)(this.props.activePracticeData.logo)})),p.a.createElement("td",null,p.a.createElement("h2",{style:{margin:"5px"}},this.props.activePracticeData.name),p.a.createElement("p",{style:{margin:"5px",fontSize:"11px"}},this.props.activePracticeData.address,p.a.createElement("br",null),this.props.activePracticeData.locality,p.a.createElement("br",null),this.props.activePracticeData.city,", ",this.props.activePracticeData.state,"-",this.props.activePracticeData.pincode),p.a.createElement("div",{style:{margin:"5px",fontSize:"11px"}},"Email : ",p.a.createElement("strong",null,this.props.activePracticeData.email),p.a.createElement("br",null),"Phone : ",p.a.createElement("strong",null,this.props.activePracticeData.contact),p.a.createElement("br",null),"Website : ",p.a.createElement("strong",null,this.props.activePracticeData.website),p.a.createElement("br",null))))),p.a.createElement("h3",{className:"centeralign"},"Patient Information "),p.a.createElement("table",null,p.a.createElement("tr",null,p.a.createElement("td",{colSpan:"2"},p.a.createElement("h4",null,"Personal Details"))),p.a.createElement("tr",null,p.a.createElement("td",{className:"rightalign",style:{width:"30%"}},"Name"),p.a.createElement("td",null,p.a.createElement("div",{className:"textfield"}))),p.a.createElement("tr",null,p.a.createElement("td",{className:"rightalign"},"Patient ID"),p.a.createElement("td",null,p.a.createElement("div",{className:"textfield"}),p.a.createElement("span",{className:"leftrightmargin_10"},"(official use)"))),p.a.createElement("tr",{id:"nationalid",style:{display:"none"}},p.a.createElement("td",{className:"rightalign"},p.a.createElement("span",{id:"nationalidlabel"})),p.a.createElement("td",null,p.a.createElement("div",{className:"textfield"}))),p.a.createElement("tr",null,p.a.createElement("td",{className:"rightalign"},"Mobile Number"),p.a.createElement("td",null,p.a.createElement("div",{className:"textfield"}))),p.a.createElement("tr",null,p.a.createElement("td",{colSpan:"2"},p.a.createElement("h4",null,"Contact Details"))),p.a.createElement("tr",null,p.a.createElement("td",{className:"rightalign"},"Email"),p.a.createElement("td",null,p.a.createElement("div",{className:"textfield"}))),p.a.createElement("tr",null,p.a.createElement("td",{className:"rightalign"},"Land-line Number(s)"),p.a.createElement("td",null,p.a.createElement("div",{className:"textfield"}))),p.a.createElement("tr",null,p.a.createElement("td",{className:"rightalign"},"Address"),p.a.createElement("td",null,p.a.createElement("div",{className:"textarea"}))),p.a.createElement("tr",null,p.a.createElement("td",{colSpan:"2"},p.a.createElement("h4",null,"General Details"))),p.a.createElement("tr",null,p.a.createElement("td",{className:"rightalign"},"Gender"),p.a.createElement("td",null,p.a.createElement("div",{className:"radio"}),p.a.createElement("label",null,"Male "),p.a.createElement("div",{className:"radio"}),p.a.createElement("label",null,"Female "))),p.a.createElement("tr",null,p.a.createElement("td",{className:"rightalign"},"Blood Group"),p.a.createElement("td",null,p.a.createElement("div",{className:"textfield"}))),p.a.createElement("tr",null,p.a.createElement("td",{className:"rightalign"},"Date of Birth / Age"),p.a.createElement("td",null,p.a.createElement("div",{className:"textfield"})))),p.a.createElement("p",null,"I hereby declare that the information provided above is true and correct to the best of my knowledge. I give consent to the performance of medical / surgical / anesthesia / diagnostic procedure / treatment to be performed upon myself at B.K. Arogyam & Research Pvt Ltd. I will pay in full any cost of treatment or insurance co-payments according to the office's financial policy. "),p.a.createElement("div",{className:"date"},"Date"),p.a.createElement("div",{className:"signature"},"Patient's Signature")))):null}}]),t}(p.a.Component),ae=(a(921),a(343),a(357)),ne=(a(281),a(282)),re=a(64),le=a.n(re),ie=(a(243),a(231)),oe=a(581),se=(a(1581),a(25));function ce(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ue(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ce(a,!0).forEach((function(t){Object(z.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ce(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var me=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(c.a)(t).call(this,e))).changeParamsForBlockedAppointments=function(e,t){var n=Object(u.a)(a);a.setState((function(a){return{blockedAppointmentParams:ue({},a.blockedAppointmentParams,Object(z.a)({},e,t))}}),(function(){n.retrieveBlockingAppointments()}))},a.retrieveBlockingAppointments=function(){var e=Object(u.a)(a);e.setState({loading:!0});a.state.blockedAppointmentParams.block_from&&a.state.blockedAppointmentParams.block_to&&Object(S.c)(Object(S.f)(C.q,[a.props.active_practiceId]),(function(t){e.setState((function(e){return{blockingAppointments:t,loading:!1}}))}),(function(){e.setState({loading:!1})}),{start:le()(e.state.blockedAppointmentParams.block_from).format("YYYY-MM-DD"),end:le()(e.state.blockedAppointmentParams.block_to).format("YYYY-MM-DD"),doctor:e.state.blockedAppointmentParams.doctor})},a.handleSubmit=function(e){var t=Object(u.a)(a);e.preventDefault();var n={};a.props.form.validateFields((function(e,t){e||(n=ue({},t,{practice:a.props.active_practiceId}))}));Object(S.j)(C.x,n,(function(e){t.props.history&&t.props.history.replace("/calendar")}),(function(){}))},a.state={practiceDoctors:[],blockedAppointmentParams:{block_from:le()(),block_to:le()()}},Object(ie.d)(Object(u.a)(a)),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this,a=this.props.form.getFieldDecorator,n={labelCol:{span:6},wrapperCol:{span:4}};return p.a.createElement(W.a,{title:"Block Calendar"},p.a.createElement(V.a,null,p.a.createElement(q.a,{span:18},p.a.createElement(G.a,{onSubmit:this.handleSubmit},p.a.createElement(G.a.Item,Object.assign({label:"Block From"},n),a("block_from",{initialValue:le()(),rules:[{required:!0,message:se.j}]})(p.a.createElement(ne.a,{showTime:{use12Hours:!0},format:"YYYY-MM-DD hh:mm a",allowClear:!1,onChange:function(t){return e.changeParamsForBlockedAppointments("block_from",t)}}))),p.a.createElement(G.a.Item,Object.assign({label:"Block To"},n),a("block_to",{initialValue:le()(),rules:[{required:!0,message:se.j}]})(p.a.createElement(ne.a,{showTime:{use12Hours:!0},format:"YYYY-MM-DD hh:mm a",allowClear:!1,onChange:function(t){return e.changeParamsForBlockedAppointments("block_to",t)}}))),p.a.createElement(G.a.Item,Object.assign({label:"Event Name"},n),a("event",{})(p.a.createElement(U.a,{placeholder:"Event Name"}))),p.a.createElement(G.a.Item,Object.assign({label:"Doctor"},n),a("doctor",{initialValue:6})(p.a.createElement(E.a,{placeholder:"Doctor List",onChange:function(t){return e.changeParamsForBlockedAppointments("doctor",t)}},this.state.practiceDoctors.map((function(e){return p.a.createElement(E.a.Option,{value:e.id,key:e.id},e.user.first_name)}))))),p.a.createElement(G.a.Item,null,p.a.createElement(r.a,{style:{margin:5},type:"primary",htmlType:"submit"},"Submit"),t.props.history?p.a.createElement(r.a,{style:{margin:5},onClick:function(){return t.props.history.goBack()}},"Cancel"):null))),p.a.createElement(q.a,{span:6},p.a.createElement(v.a,{size:"small",dataSource:this.state.blockingAppointments,renderItem:function(a){return a.status==T.m?p.a.createElement("div",null):p.a.createElement(v.a.Item,{color:"transparent",style:{padding:0}},p.a.createElement("div",{style:{border:"1px solid #ddd",borderRadius:"5px",textDecoration:a.status==T.m?"line-through":"inherit",backgroundColor:a.status==T.m?"#aaa":"#eee",width:"100%",marginTop:"2px",borderLeft:"5px solid"+(a.doctor&&t.state.practice_doctors&&t.state.practice_doctors[a.doctor]?t.props.doctors_object[a.doctor].calendar_colour:"transparent")}},p.a.createElement(pe,Object.assign({},a,{changeAppointmentStatus:e.changeAppointmentStatus},e.props))))}}))))}}]),t}(p.a.Component),de=G.a.create()(me);function pe(e){return p.a.createElement("div",{style:{width:"100%"}},p.a.createElement("p",{style:{marginBottom:0}},p.a.createElement(Y.a,{type:"vertical"}),p.a.createElement(ae.a,{placement:"right",content:p.a.createElement(oe.a,Object.assign({appointmentId:e.id,key:e.id},e))},p.a.createElement("span",{style:{width:"calc(100% - 60px)"}},p.a.createElement("b",null,le()(e.schedule_at).format("LLL")),"\xa0",e.patient.user.first_name),p.a.createElement("p",{style:{color:e.doctor_data?e.doctor_data.calendar_colour:null}},p.a.createElement(Y.a,{type:"vertical"}),p.a.createElement("span",null,e.doctor_data?e.doctor_data.user.first_name:null)))))}var be=a(302),he=(a(259),a(260));function fe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var Ee=U.a.TextArea,ge=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(c.a)(t).call(this,e))).onClose=function(){Object(u.a)(a).props.close()},a.handleSubmit=function(e){e.preventDefault();var t=Object(u.a)(a);a.props.form.validateFieldsAndScroll((function(e,a){if(!e){var n=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?fe(a,!0).forEach((function(t){Object(z.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):fe(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},a);Object(S.j)(C.Bd,n,(function(e){Object(S.a)(_.Sb,"Save Your Suggestions"),t.props.close()}),(function(){}))}}))},a.state={},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return p.a.createElement("div",null,p.a.createElement(he.a,{title:"Your Suggestion",width:720,onClose:this.onClose,visible:this.props.visible},p.a.createElement(G.a,{layout:"vertical",onSubmit:this.handleSubmit},p.a.createElement(V.a,{gutter:16},p.a.createElement(q.a,{span:12},p.a.createElement(G.a.Item,{label:"Name"},e("name",{rules:[{required:!0,message:"Please enter  name"}]})(p.a.createElement(U.a,{placeholder:"Please enter user name"})))),p.a.createElement(q.a,{span:12},p.a.createElement(G.a.Item,{label:"Email"},e("email",{rules:[{required:!0,message:"Please enter Email"}]})(p.a.createElement(U.a,{style:{width:"100%"},placeholder:"Please enter Email"}))))),p.a.createElement(V.a,{gutter:16},p.a.createElement(q.a,{span:12},p.a.createElement(G.a.Item,{label:"Mobile"},e("mobile")(p.a.createElement(U.a,{placeholder:"Please enter Mobile"})))),p.a.createElement(q.a,{span:12},p.a.createElement(G.a.Item,{label:"Subject"},e("subject")(p.a.createElement(U.a,{style:{width:"100%"},placeholder:"Please enter Email"}))))),p.a.createElement(V.a,{gutter:16},p.a.createElement(q.a,{span:24},p.a.createElement(G.a.Item,{label:"Description"},e("description")(p.a.createElement(Ee,{placeholder:"Please enter description",autosize:{minRows:4,maxRows:6}}))))),p.a.createElement(Y.a,null),p.a.createElement("div",{style:{textAlign:"-webkit-center"}},p.a.createElement(r.a,{onClick:this.onClose,style:{marginRight:8}},"Cancel"),p.a.createElement(r.a,{htmlType:"submit",onSubmit:this.handleSubmit,type:"primary"},"Submit")))))}}]),t}(p.a.Component),ve=G.a.create()(ge),ye=(a(457),a(491)),Oe=a(90),ke=(a(3),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(c.a)(t).call(this,e))).redirectToHome=function(){window.location.replace("/")},a.state={hasError:!1},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidCatch",value:function(e,t){!function(e,t){var a={text:e.toString(),attachments:[{color:"#36a64f",author_name:window.location.hostname,author_link:"http://flickr.com/bobby/",author_icon:window.location.hostname+"/favicon.ico",title:"BK ERP Admin Application Crash Error",text:t.componentStack,fields:[{title:"Priority",value:"High",short:!1},{title:"Domain",value:window.location.hostname,short:!1},{title:"Path",value:window.location.pathname,short:!1},{title:"User",value:Object(D.f)(),short:!1}],ts:(new le.a).format("X")}]};(Oe.a.prodDomain&&Oe.a.crashHandling.slack.sendOnProduction&&Oe.a.prodDomain.indexOf(window.location.hostname)>-1||Oe.a.crashHandling.slack.sendOnDevelopment)&&Object(S.k)(Oe.a.crashHandling.slack.webHookUrl,a,(function(){console.log("The above error has been notified to devs.")}),(function(){console.log("The above error notifications failed")}),{"Content-type":"application/x-www-form-urlencoded"})}(e,t)}},{key:"render",value:function(){return this.state.hasError?p.a.createElement(ye.a,{status:"500",title:"500",subTitle:"Sorry, something went wrong.",extra:p.a.createElement(r.a,{type:"primary",onClick:this.redirectToHome},"Back Home")}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),t}(p.a.Component)),je=Object(x.a)((function(){return Promise.all([a.e(5),a.e(16)]).then(a.bind(null,1749))})),Pe=Object(x.a)((function(){return Promise.all([a.e(0),a.e(1),a.e(2),a.e(4),a.e(14)]).then(a.bind(null,1742))})),Se=Object(x.a)((function(){return Promise.all([a.e(0),a.e(11),a.e(19)]).then(a.bind(null,1745))})),Ce=Object(x.a)((function(){return Promise.all([a.e(0),a.e(1),a.e(6),a.e(21)]).then(a.bind(null,1746))})),we=Object(x.a)((function(){return Promise.all([a.e(5),a.e(20)]).then(a.bind(null,1748))})),De=Object(x.a)((function(){return Promise.all([a.e(0),a.e(1),a.e(2),a.e(6),a.e(15)]).then(a.bind(null,1743))})),_e=Object(x.a)((function(){return Promise.all([a.e(0),a.e(1),a.e(2),a.e(4),a.e(13)]).then(a.bind(null,1744))})),Te=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(c.a)(t).call(this,e))).toggleSider=function(e){a.setState({collapsed:!!e})},a.showDrawer=function(){a.setState({visible:!0})},a.onClose=function(){a.setState({visible:!1})},a.state={collapsed:!1,active_practiceId:Object(D.h)(),practiceList:Object(D.g)(),activePracticeData:null,activePracticePermissions:{},specialisations:null,allowAllPermissions:!1,loadingPermissions:!1,visible:!1},a.activeData=a.activeData.bind(Object(u.a)(a)),a.switchPractice=a.switchPractice.bind(Object(u.a)(a)),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.activeData()}},{key:"activeData",value:function(){var e=this,t=function(t){e.setState((function(e){var a={};return t.practice_permissions.forEach((function(e){a[e.codename]=e})),t.global_permissions.forEach((function(e){a[e.codename]=e})),{activePracticePermissions:a,loadingPermissions:!1,practiceList:Object(D.g)()}}),(function(){}))},a=function(){e.setState({loadingPermissions:!1})};e.setState((function(e){var t=null;return e.practiceList.forEach((function(a){a.practice.id==e.active_practiceId&&(t=a.practice)})),t||!e.practiceList.length?{activePracticeData:t,loadingPermissions:!0}:(Object(D.j)(e.practiceList[0].practice.id),{activePracticeData:e.practiceList[0].practice,active_practiceId:e.practiceList[0].practice.id,loadingPermissions:!0})}),(function(){Object(D.b)(e.state.active_practiceId,t,a)}))}},{key:"switchPractice",value:function(e){var t=this;t.setState((function(t){return{active_practiceId:e}}),(function(){Object(D.j)(e),t.activeData()}))}},{key:"render",value:function(){var e=this,t=this;return this.state.loadingPermissions?p.a.createElement(l.a,{spinning:this.state.loadingPermissions,tip:"Loading Permissions...."},p.a.createElement("div",{style:{width:"100vw",height:"100vh"}})):p.a.createElement(n.a,{style:{minHeight:"100vh"}},p.a.createElement(ke,null,p.a.createElement("div",{style:{position:"fixed",right:"29px",bottom:"23px",zIndex:"20"}},p.a.createElement(r.a,{type:"primary",shape:"circle",icon:"mail",size:"large",onClick:this.showDrawer})),p.a.createElement(b.d,null,p.a.createElement(b.b,{path:"/patients/patientprintform",render:function(a){return p.a.createElement(te,Object.assign({},e.state,{key:t.state.active_practiceId}))}}),p.a.createElement(b.b,null,p.a.createElement(n.a,null,p.a.createElement(R,Object.assign({toggleSider:this.toggleSider},this.state,{key:t.state.active_practiceId},this.props)),p.a.createElement(n.a,null,p.a.createElement(I,Object.assign({},this.props,this.state,{switchPractice:this.switchPractice,toggleSider:this.toggleSider})),p.a.createElement(b.d,null,this.state.activePracticePermissions.WebAdmin?p.a.createElement(b.b,{path:"/web",render:function(a){return p.a.createElement(Se,Object.assign({},e.state,e.props,a,{key:t.state.active_practiceId}))}}):null,p.a.createElement(b.b,{exact:!0,path:"/calendar/blockcalendar",render:function(a){return t.state.activePracticePermissions.BlockCalendar||t.state.allowAllPermissions?p.a.createElement(de,Object.assign({},e.state,e.props,a)):p.a.createElement(be.a,null)}}),p.a.createElement(b.b,{path:"/calendar",render:function(e){return t.state.activePracticePermissions.ViewCalendar?p.a.createElement(je,Object.assign({},t.state,t.props,e,{key:t.state.active_practiceId})):p.a.createElement(be.a,null)}}),p.a.createElement(b.b,{path:"/patient/:id",render:function(a){return p.a.createElement(_e,Object.assign({},e.state,e.props,a,{key:t.state.active_practiceId+"|"+a.match.params.id}))}}),p.a.createElement(b.b,{path:"/settings",render:function(a){return p.a.createElement(De,Object.assign({},e.state,e.props,a,{key:t.state.active_practiceId,refreshClinicData:e.activeData}))}}),p.a.createElement(b.b,{path:"/inventory",render:function(a){return p.a.createElement(Ce,Object.assign({},e.state,e.props,a,{key:t.state.active_practiceId}))}}),p.a.createElement(b.b,{path:"/reports/:type",render:function(a){return p.a.createElement(Pe,Object.assign({},e.state,e.props,a,{key:t.state.active_practiceId}))}}),p.a.createElement(b.b,{path:"/profile",render:function(a){return p.a.createElement($,Object.assign({},e.state,e.props,a,{key:t.state.active_practiceId}))}}),p.a.createElement(b.b,{path:"/meeting-booking",render:function(a){return e.state.activePracticePermissions.ViewMeeting||e.state.allowAllPermissions?p.a.createElement(we,Object.assign({},e.state,e.props,a,{key:t.state.active_practiceId})):p.a.createElement(be.a,null)}}),this.state.activePracticePermissions.ViewCalendar?p.a.createElement(b.b,{exact:!0,path:"/",render:function(a){return p.a.createElement(je,Object.assign({},e.state,e.props,a,{key:t.state.active_practiceId}))}}):null,p.a.createElement(b.b,{path:"/",render:function(a){return p.a.createElement(_e,Object.assign({},e.state,e.props,a,{key:t.state.active_practiceId}))}}),p.a.createElement(b.b,{component:F.a})))))),p.a.createElement(ve,Object.assign({},this.state,{close:this.onClose}))))}}]),t}(p.a.Component);t.default=Te},231:function(e,t,a){"use strict";a.d(t,"d",(function(){return f})),a.d(t,"f",(function(){return E})),a.d(t,"a",(function(){return g})),a.d(t,"b",(function(){return v})),a.d(t,"c",(function(){return y})),a.d(t,"e",(function(){return O})),a.d(t,"h",(function(){return k})),a.d(t,"g",(function(){return j}));var n=a(33),r=(a(287),a(283)),l=(a(259),a(260)),i=a(0),o=a.n(i),s=a(32),c=a(23),u=a(2),m=a(65),d=a(25);function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(a,!0).forEach((function(t){Object(n.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var h=l.a.confirm,f=function(e){Object(c.c)(Object(c.f)(s.Dc,[e.props.active_practiceId]),(function(t){var a=[],n={};t.staff.forEach((function(t){(t.role.indexOf(parseInt(u.N))>-1||t.role.indexOf(u.N)>-1)&&(a.push(t),e.props.user.id==t.user.id&&(n=t))})),e.setState({practiceDoctors:a,selectedDoctor:a.length&&!n.id?a[0]:n})}),(function(){}))},E=o.a.createElement(r.a,null,o.a.createElement(r.a.Item,{key:"1"},o.a.createElement(m.b,{to:"/settings/prescriptions"},"Add/Edit Drugs")),o.a.createElement(r.a.Item,{key:"2"},o.a.createElement(m.b,{to:"/settings/procedures"},"Add/Edit Procedures")),o.a.createElement(r.a.Item,{key:"3"},o.a.createElement(m.b,{to:"/settings/emr#treatmentnotes"},"Add/Edit Clinical Notes")),o.a.createElement(r.a.Item,{key:"4"},o.a.createElement(m.b,{to:"/settings/printout"},"Modify EMR/Billing Printout")),o.a.createElement(r.a.Item,{key:"5"},o.a.createElement(m.b,{to:"/settings/billing#taxcatalog"},"Add/Edit taxes")),o.a.createElement(r.a.Item,{key:"6"},o.a.createElement(m.b,{to:"/settings/billing#paymentmodes"},"Add/Edit Payment Modes"))),g=function(e){for(var t=0,a=0;a<e.length;a++)t=((t=e.charCodeAt(a)+((t<<6)-t))>>6)+t;return t},v=function(e){var t=(16777215&e).toString(16).toUpperCase();return"00000".substring(0,6-t.length)+t},y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=function(t){e.setState(b({},t))},n=function(){},r=t.join(",");Object(c.c)(s.T,a,n,{parameters:r})},O=function(e){Object(c.c)(s.Mb,(function(t){e.setState({mailingUsersList:t})}),(function(){}))},k=function(e,t,a,n){h({title:"Are you sure send mail?",content:"Email Id :"+t.mail_to,okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){Object(c.c)(e,(function(e){a&&Object(c.a)(d.k,d.d+"to"+t.mail_to)}),(function(){n&&Object(c.a)(u.Q,d.c)}),t)},onCancel:function(){}})},j=function(e,t){Object(c.c)(e,(function(e){}),(function(){}),t)}},243:function(e,t,a){"use strict";a(374);var n=a(373),r=(a(296),a(297)),l=(a(228),a(227)),i=(a(141),a(15)),o=(a(377),a(394)),s=(a(234),a(235)),c=(a(262),a(264)),u=(a(281),a(282)),m=(a(284),a(286)),d=(a(230),a(229)),p=(a(236),a(18)),b=(a(259),a(260)),h=a(33),f=a(96),E=a(97),g=a(100),v=a(98),y=a(44),O=a(99),k=(a(279),a(276)),j=(a(273),a(270)),P=(a(237),a(238)),S=(a(250),a(253)),C=a(0),w=a.n(C),D=a(2),_=a(25),T=a(23),A=a(64),I=a.n(A),x=a(640),N=a.n(x),H=a(32),B=a(442),L=a(669),M=(a(704),a(443)),R=a(705),F=a.n(R),V=a(706),Y=a.n(V);function q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function W(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?q(a,!0).forEach((function(t){Object(h.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):q(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var G=S.a.TextArea,U=P.a.Item,K=j.a.Group,z=k.a.Group,J=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(g.a)(this,Object(v.a)(t).call(this,e))).fieldDecorators=function(e,t){var n=a.state.urlInitialValues;return e.type==D.mb?{initialValue:t[e.key]?t[e.key]:n[e.key]?n[e.key]:t[e.key],rules:[{required:e.required,message:_.j,type:"array"}]}:{initialValue:t[e.key]?t[e.key]:n[e.key]?n[e.key]:t[e.key],rules:[{required:e.required,message:_.j}]}},a.handleSubmit=function(e){var t=Object(y.a)(a);e.preventDefault(),a.props.form.validateFieldsAndScroll((function(e,n){e||(a.props.defaultValues&&a.props.defaultValues.forEach((function(e){n=W(Object(h.a)({},e.key,e.value),n)})),a.state.colorPickerKey&&(n[a.state.colorPickerKey]=a.state.colorPickerColor),t.props.fields.forEach((function(e){if(e.type==D.Pb){var a=e.key;n[a]&&n[a].file&&n[a].file.response?n[a]=n[a].file.response.image_path:n[a]=e.initialValue}else if(e.type==D.lb){var r=e.key;n[r]&&n[r].file&&n[r].file.response?n[r]=n[r].fileList.map((function(e){return e.response.id})):n[r]=e.initialValue}else if(e.type==D.Vb||e.type==D.K||e.type==D.L){var l=e.key;e.format&&(n[l]=I()(n[l]).isValid()?I()(n[l]).format(e.format):null)}else if(e.type==D.Eb){var i=e.key;n[i]=t.state.editorState[i]?F()(Object(M.convertToRaw)(t.state.editorState[i].getCurrentContent())):e.initialValue}})),t.state.formProp.beforeSend&&(n=t.state.formProp.beforeSend(n)),t.state.formProp.confirm?b.a.confirm({title:t.state.formProp.confirmText||"Are you sure to submit?",onOk:function(){t.submitForm(n)},onCancel:function(){}}):t.submitForm(n))}))},a.addMailTemplateTag=function(e,t){Object(y.a)(a);a.setState((function(a){var n=a.editorState[e]?F()(Object(M.convertToRaw)(a.editorState[e].getCurrentContent())):"";return n+=t,{editorState:W({},a.editorState,Object(h.a)({},e,M.EditorState.createWithContent(M.ContentState.createFromBlockArray(Y()(n)))))}}))},a.toggleWebCam=function(e,t){a.setState((function(a){return{webCamState:W({},a.webCamState,Object(h.a)({},e,t))}}))},a.getImageandUpload=function(e,t){var n=Object(y.a)(a),r=new FormData;r.append("image",t),r.append("name","file");Object(T.j)(H.tb,r,(function(t){n.props.form.setFieldsValue(Object(h.a)({},e,{file:{response:t}})),Object(T.a)(D.Sb,"Image Captured and processed."),n.setState((function(t){return{webCamState:W({},t.webCamState,Object(h.a)({},e,!1))}}))}),(function(){}),{"content-type":"multipart/form-data"})},a.onEditorStateChange=function(e,t){a.setState((function(a){return{editorState:W({},a.editorState,Object(h.a)({},e,t))}}))},a.state={fields:a.props.fields,formData:{},formProp:a.props.formProp,disabled:!1,loading:!1,countryOptions:[],stateOptions:[],cityOptions:[],smsFields:{},urlInitialValues:{},webCamState:{},editorState:{}},a.resetFormData=a.resetFormData.bind(Object(y.a)(a)),a.submitForm=a.submitForm.bind(Object(y.a)(a)),a.colorChange=a.colorChange.bind(Object(y.a)(a)),a.loadCountryData=a.loadCountryData.bind(Object(y.a)(a)),a.addSMSTag=a.addSMSTag.bind(Object(y.a)(a)),a}return Object(O.a)(t,e),Object(E.a)(t,[{key:"componentWillReceiveProps",value:function(e){}},{key:"componentDidMount",value:function(){var e=this;if(this.resetFormData(),this.props.fields.forEach((function(t){t.type==D.B&&e.loadCountryData()})),this.props.history&&this.props.history.location.search){var t=this.props.history.location.search.substr(1).split("&");if(t.length){var a={};t.forEach((function(e){var t=e.split("=");t&&2==t.length&&(isNaN(t[1])||-1==t[1].toString().indexOf(".")?isNaN(t[1])?a[t[0]]=t[1]:a[t[0]]=parseInt(t[1]):a[t[0]]=parseFloat(t[1]))})),this.setState({urlInitialValues:a})}}}},{key:"resetFormData",value:function(){var e={};this.state.fields.forEach((function(t){e[t.key]=t.initialValue})),this.setState({formData:e})}},{key:"submitForm",value:function(e){var t=this;this.setState({disabled:!0,loading:!0});var a=function(e){t.state.formProp.successFn(e),t.setState({disabled:!1,loading:!1}),t.props.changeRedirect&&t.props.changeRedirect()},n=function(){t.state.formProp.errorFn(),t.setState({disabled:!1,loading:!1})};"post"==this.props.formProp.method?Object(T.j)(this.props.formProp.action,e,a,n):"put"==this.props.formProp.method&&Object(T.l)(this.props.formProp.action,e,a,n)}},{key:"colorChange",value:function(e,t){var a=this;this.setState({colorPickerKey:t,colorPickerColor:e.hex},(function(){a.props.form.setFieldsValue(Object(h.a)({},t,e.hex))}))}},{key:"setAddressField",value:function(e,t){"country"==e?this.setState((function(e){var a=[];return e.countryOptions.forEach((function(e){e.id==t&&(a=e.states)})),{stateOptions:a}})):this.setState((function(e){var a=[];return e.stateOptions.forEach((function(e){e.id==t&&(a=e.cities)})),{cityOptions:a}}))}},{key:"loadCountryData",value:function(){var e=this;Object(T.c)(H.rb,(function(t){e.setState({countryOptions:t.country})}),(function(){}))}},{key:"addSMSTag",value:function(e,t){var a=this.props.form.getFieldValue(e)||"";this.props.form.setFieldsValue(Object(h.a)({},e,a+t))}},{key:"render",value:function(){var e=this,t=this.props.formLayout?this.props.formLayout:{labelCol:{span:8},wrapperCol:{span:14}},a=this.props.form.getFieldDecorator;return w.a.createElement("div",null,w.a.createElement(P.a,{onSubmit:this.handleSubmit},this.props.title?w.a.createElement("h2",null,this.props.title):null,this.state.fields?this.state.fields.map((function(h){switch(h.type){case D.sb:return w.a.createElement(P.a.Item,Object.assign({key:h.key,label:h.label},t,{extra:h.extra}),a(h.key,e.fieldDecorators(h,e.state.formData))(w.a.createElement(S.a,{prefix:w.a.createElement(p.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:h.placeholder,onChange:function(e){return function(){h.onChange&&h.onChange(e)}},disabled:h.disabled?h.disabled:e.state.disabled})));case D.W:return w.a.createElement(U,Object.assign({key:h.key,label:h.label},t,{extra:h.extra}),a(h.key,e.fieldDecorators(h,e.state.formData))(w.a.createElement(S.a,{placeholder:h.placeholder,onChange:function(e){return function(){h.onChange&&h.onChange(e)}},disabled:h.disabled?h.disabled:e.state.disabled})),h.follow?w.a.createElement("span",{className:"ant-form-text"},h.follow):null);case D.Nb:return w.a.createElement(U,Object.assign({key:h.key},t,{label:h.label,extra:h.extra}),a(h.key,e.fieldDecorators(h,e.state.formData))(w.a.createElement(d.a,{placeholder:h.placeholder,disabled:h.disabled?h.disabled:e.state.disabled,mode:h.mode?h.mode:"default"},h.options.map((function(e){return w.a.createElement(d.a.Option,{value:e.value},e.label)})))),h.follow?w.a.createElement("span",{className:"ant-form-text"},h.follow):null);case D.mb:return w.a.createElement(U,Object.assign({key:h.key},t,{label:h.label,extra:h.extra}),a(h.key,W({},e.fieldDecorators(h,e.state.formData)))(w.a.createElement(d.a,{mode:"multiple",placeholder:h.placeholder,showSearch:h.showSearch?h.showSearch:null,disabled:h.disabled?h.disabled:e.state.disabled},h.options.map((function(e){return w.a.createElement(d.a.Option,{value:e.value},e.label)})))),h.follow?w.a.createElement("span",{className:"ant-form-text"},h.follow):null);case D.Fb:return w.a.createElement(U,Object.assign({key:h.key,label:h.label},t,{extra:h.extra}),a(h.key,e.fieldDecorators(h,e.state.formData))(w.a.createElement(K,{disabled:h.disabled?h.disabled:e.state.disabled},h.options.map((function(e){return w.a.createElement(j.a,{value:e.value},e.label)})))));case D.x:return w.a.createElement(U,Object.assign({key:h.key,label:h.label},t,{extra:h.extra}),a(h.key,e.fieldDecorators(h,e.state.formData))(w.a.createElement(z,{options:h.options,disabled:h.disabled?h.disabled:e.state.disabled})));case D.Ob:return w.a.createElement(U,Object.assign({key:h.key,label:h.label},t,{extra:h.extra}),a(h.key,{valuePropName:"checked",initialValue:h.initialValue},{rules:[{required:h.required,message:_.j}]})(w.a.createElement(k.a,{disabled:h.disabled?h.disabled:e.state.disabled},h.follow)));case D.pb:return w.a.createElement(U,Object.assign({key:h.key},t,{label:h.label,extra:h.extra}),a(h.key,e.fieldDecorators(h,e.state.formData))(w.a.createElement(m.a,{min:h.min,max:h.max,disabled:h.disabled?h.disabled:e.state.disabled})),w.a.createElement("span",{className:"ant-form-text"},h.follow));case D.K:return w.a.createElement(U,Object.assign({key:h.key,label:h.label},t,{extra:h.extra}),a(h.key,{initialValue:h.initialValue?I()(h.initialValue):null,rules:[{required:h.required,message:_.j}]})(w.a.createElement(u.a,{format:h.format,allowClear:!1})));case D.L:return w.a.createElement(U,Object.assign({key:h.key,label:h.label},t,{extra:h.extra}),a(h.key,{initialValue:h.initialValue?I()(h.initialValue):null},{rules:[{required:h.required,message:_.j}]})(w.a.createElement(u.a,{format:h.format,showTime:!0,onChange:function(e){return h.onChange?h.onChange(e):function(){}}})));case D.Ub:return w.a.createElement("div",{key:h.key},w.a.createElement(U,Object.assign({key:h.key,label:h.label},t,{extra:h.extra}),a(h.key,e.fieldDecorators(h,e.state.formData))(w.a.createElement(G,{autosize:{minRows:h.minRows,maxRows:h.maxRows},placeholder:h.placeholder,disabled:h.disabled?h.disabled:e.state.disabled,onChange:e.inputChange}))));case D.Qb:return w.a.createElement("div",null,w.a.createElement(U,Object.assign({key:h.key,label:h.label},t,{extra:h.extra}),a(h.key,e.fieldDecorators(h,e.state.formData))(w.a.createElement(G,{autosize:{minRows:h.minRows,maxRows:h.maxRows},placeholder:h.placeholder,disabled:h.disabled?h.disabled:e.state.disabled})),h.options&&h.options.map((function(t){return w.a.createElement(c.a,{color:"#108ee9",onClick:function(){return e.addSMSTag(h.key,t.value)}},t.label)}))));case D.Y:return w.a.createElement("div",null,w.a.createElement(U,Object.assign({key:h.key,label:h.label},t,{extra:h.extra}),a(h.key,{initialValue:h.initialValue&&h.initialValue.length?h.initialValue:"",rules:[{required:h.required,message:_.j}]})(w.a.createElement("div",{style:{border:"1px solid #eee"}},w.a.createElement(L.Editor,{editorState:e.state.editorState[h.key]?e.state.editorState[h.key]:h.initialValue?M.EditorState.createWithContent(M.ContentState.createFromBlockArray(Y()(h.initialValue))):M.EditorState.createEmpty(),onEditorStateChange:function(t){return e.onEditorStateChange(h.key,t)}}))),h.options&&h.options.map((function(t){return w.a.createElement(c.a,{color:"#108ee9",onClick:function(){return e.addMailTemplateTag(h.key,t.value)}},t.label)})),h.preview?w.a.createElement("div",null,w.a.createElement(s.a,null,"Preview"),w.a.createElement("div",{style:{maxHeight:200,overflowY:"scroll"},dangerouslySetInnerHTML:{__html:"".concat(e.state.editorState[h.key]?F()(Object(M.convertToRaw)(e.state.editorState[h.key].getCurrentContent())):h.initialValue)||""}}),w.a.createElement(s.a,null)):null));case D.Eb:return w.a.createElement("div",null,w.a.createElement(U,Object.assign({key:h.key,label:h.label},t,{extra:h.extra}),a(h.key,{initialValue:h.initialValue&&h.initialValue.length?h.initialValue:"",rules:[]})(w.a.createElement("div",{style:{border:"1px solid #eee"}},w.a.createElement(L.Editor,{editorState:e.state.editorState[h.key]?e.state.editorState[h.key]:h.initialValue?M.EditorState.createWithContent(M.ContentState.createFromBlockArray(Y()(h.initialValue))):M.EditorState.createEmpty(),onEditorStateChange:function(t){return e.onEditorStateChange(h.key,t)}}))),h.preview?w.a.createElement("div",null,w.a.createElement(s.a,null,"Preview"),w.a.createElement("div",{style:{maxHeight:200,overflowY:"scroll"},dangerouslySetInnerHTML:{__html:"".concat(e.state.editorState[h.key]?F()(Object(M.convertToRaw)(e.state.editorState[h.key].getCurrentContent())):h.initialValue)||""}}),w.a.createElement(s.a,null)):null));case D.Vb:return w.a.createElement(U,Object.assign({key:h.key,label:h.label},t,{extra:h.extra}),a(h.key,{initialValue:h.initialValue?I()(h.initialValue,h.format):null,rules:[{required:h.required,message:_.j}]})(w.a.createElement(o.a,{format:h.format})));case D.A:return w.a.createElement(U,Object.assign({key:h.key,label:h.label},t,{extra:h.extra}),a(h.key,e.fieldDecorators(h,e.state.formData))(w.a.createElement("div",null,w.a.createElement(N.a,{style:{width:"100%"},onChange:function(t){return e.colorChange(t,h.key)}}),e.state.colorPickerKey?w.a.createElement("div",{style:{margin:"10px",backgroundColor:e.state.colorPickerColor,height:"40px",width:"40px"}}):e.state.formData[h.key]?w.a.createElement("div",{style:{margin:"10px",backgroundColor:e.state.formData[h.key],height:"40px",width:"40px"}}):null)));case D.Pb:var f={name:"image",data:{name:"hello"},action:Object(T.h)(H.sb),headers:{authorization:"authorization-text"},onChange:function(e){e.file.status,"done"===e.file.status?i.a.success("".concat(e.file.name," file uploaded successfully")):"error"===e.file.status&&i.a.error("".concat(e.file.name," file upload failed."))}};return w.a.createElement(P.a.Item,Object.assign({key:h.key},t,{label:h.label}),a(h.key,e.fieldDecorators(h,e.state.formData),{valuePropName:h.key})(w.a.createElement(n.a,f,w.a.createElement(l.a,null,w.a.createElement(p.a,{type:"upload"})," Select File"),h.initialValue?w.a.createElement(r.a,{size:64,src:Object(T.g)(h.initialValue)}):null)),h.allowWebcam?w.a.createElement("span",{className:"ant-form-text"},w.a.createElement("a",{onClick:function(){return e.toggleWebCam(h.key,Math.random())}},"Open Webcam")):null,w.a.createElement(b.a,{footer:null,onCancel:function(){return e.toggleWebCam(h.key,!1)},visible:!!e.state.webCamState[h.key],width:680,key:e.state.webCamState[h.key]},w.a.createElement(B.a,{getScreenShot:function(t){return e.getImageandUpload(h.key,t)}})));case D.lb:var E={name:"image",data:{name:"hello"},action:Object(T.h)(H.sb),headers:{authorization:"authorization-text"},onChange:function(e){e.file.status,"done"===e.file.status?i.a.success("".concat(e.file.name," file uploaded successfully")):"error"===e.file.status&&i.a.error("".concat(e.file.name," file upload failed."))}};return w.a.createElement(P.a.Item,Object.assign({key:h.key},t,{label:h.label}),a(h.key,{valuePropName:h.key})(w.a.createElement(n.a,E,w.a.createElement(l.a,null,w.a.createElement(p.a,{type:"upload"})," Select File"),h.initialValue&&h.initialValue.length?h.initialValue.map((function(e){return w.a.createElement("img",{src:e,style:{maxWidth:"100%"}})})):null)));case D.B:return w.a.createElement(U,Object.assign({key:h.key},t,{label:h.label,extra:h.extra}),a(h.key,e.fieldDecorators(h,e.state.formData))(w.a.createElement(d.a,{placeholder:h.placeholder,disabled:h.disabled?h.disabled:e.state.disabled,mode:h.mode?h.mode:"default",onChange:function(t){return e.setAddressField("country",t)}},e.state.countryOptions.map((function(e){return w.a.createElement(d.a.Option,{value:e.id},e.name)})))));case D.Rb:return w.a.createElement(U,Object.assign({key:h.key},t,{label:h.label,extra:h.extra}),a(h.key,e.fieldDecorators(h,e.state.formData))(w.a.createElement(d.a,{placeholder:h.placeholder,disabled:h.disabled?h.disabled:e.state.disabled,mode:h.mode?h.mode:"default",onChange:function(t){return e.setAddressField("state",t)}},e.state.stateOptions.map((function(e){return w.a.createElement(d.a.Option,{value:e.id},e.name)})))));case D.P:return w.a.createElement(P.a.Item,Object.assign({key:h.key},t,{label:h.label,extra:h.extra}),a(h.key,{initialValue:e.state.formData[h.key],rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:"Please input your E-mail!"}]})(w.a.createElement(S.a,{placeholder:h.placeholder,disabled:h.disabled?h.disabled:e.state.disabled,onChange:e.inputChange})));case D.z:return w.a.createElement(U,Object.assign({key:h.key},t,{label:h.label,extra:h.extra}),a(h.key,e.fieldDecorators(h,e.state.formData))(w.a.createElement(d.a,{placeholder:h.placeholder,disabled:h.disabled?h.disabled:e.state.disabled,mode:h.mode?h.mode:"default"},e.state.cityOptions.map((function(e){return w.a.createElement(d.a.Option,{value:e.id},e.name)})))));case D.M:return w.a.createElement(s.a,{style:{margin:4}});case D.X:return w.a.createElement(U,Object.assign({key:h.key},t,{label:h.label,extra:h.extra}),h.follow?w.a.createElement("span",{className:"ant-form-text"},h.follow):null);default:return null}})):null,w.a.createElement(U,t,w.a.createElement(l.a,{loading:e.state.loading,type:"primary",htmlType:"submit",style:{margin:5}},"Submit"),e.props.history?w.a.createElement(l.a,{style:{margin:5},onClick:function(){return e.props.history.goBack()}},"Cancel"):null)))}}]),t}(w.a.Component);t.a=J},247:function(e,t,a){"use strict";a.d(t,"rb",(function(){return r})),a.d(t,"ob",(function(){return l})),a.d(t,"x",(function(){return i})),a.d(t,"z",(function(){return o})),a.d(t,"G",(function(){return s})),a.d(t,"Fb",(function(){return c})),a.d(t,"vb",(function(){return u})),a.d(t,"tb",(function(){return m})),a.d(t,"X",(function(){return d})),a.d(t,"Y",(function(){return p})),a.d(t,"a",(function(){return b})),a.d(t,"o",(function(){return h})),a.d(t,"d",(function(){return f})),a.d(t,"E",(function(){return E})),a.d(t,"i",(function(){return g})),a.d(t,"D",(function(){return v})),a.d(t,"h",(function(){return y})),a.d(t,"q",(function(){return O})),a.d(t,"jb",(function(){return k})),a.d(t,"ib",(function(){return j})),a.d(t,"ub",(function(){return P})),a.d(t,"T",(function(){return S})),a.d(t,"db",(function(){return C})),a.d(t,"bb",(function(){return w})),a.d(t,"cb",(function(){return D})),a.d(t,"mb",(function(){return _})),a.d(t,"H",(function(){return T})),a.d(t,"Db",(function(){return A})),a.d(t,"B",(function(){return I})),a.d(t,"j",(function(){return x})),a.d(t,"A",(function(){return N})),a.d(t,"y",(function(){return H})),a.d(t,"Cb",(function(){return B})),a.d(t,"Hb",(function(){return L})),a.d(t,"F",(function(){return M})),a.d(t,"n",(function(){return R})),a.d(t,"m",(function(){return F})),a.d(t,"Gb",(function(){return V})),a.d(t,"r",(function(){return Y})),a.d(t,"s",(function(){return q})),a.d(t,"fb",(function(){return W})),a.d(t,"u",(function(){return G})),a.d(t,"v",(function(){return U})),a.d(t,"t",(function(){return K})),a.d(t,"f",(function(){return z})),a.d(t,"qb",(function(){return J})),a.d(t,"gb",(function(){return X})),a.d(t,"yb",(function(){return Z})),a.d(t,"kb",(function(){return Q})),a.d(t,"e",(function(){return $})),a.d(t,"C",(function(){return ee})),a.d(t,"c",(function(){return te})),a.d(t,"k",(function(){return ae})),a.d(t,"I",(function(){return ne})),a.d(t,"Z",(function(){return re})),a.d(t,"g",(function(){return le})),a.d(t,"eb",(function(){return ie})),a.d(t,"pb",(function(){return oe})),a.d(t,"U",(function(){return se})),a.d(t,"ab",(function(){return ce})),a.d(t,"Ab",(function(){return ue})),a.d(t,"w",(function(){return me})),a.d(t,"Bb",(function(){return de})),a.d(t,"lb",(function(){return pe})),a.d(t,"hb",(function(){return be})),a.d(t,"W",(function(){return he})),a.d(t,"b",(function(){return fe})),a.d(t,"N",(function(){return Ee})),a.d(t,"O",(function(){return ge})),a.d(t,"M",(function(){return ve})),a.d(t,"P",(function(){return ye})),a.d(t,"Q",(function(){return Oe})),a.d(t,"R",(function(){return ke})),a.d(t,"S",(function(){return je})),a.d(t,"xb",(function(){return Pe})),a.d(t,"L",(function(){return Se})),a.d(t,"p",(function(){return Ce})),a.d(t,"zb",(function(){return we})),a.d(t,"wb",(function(){return De})),a.d(t,"l",(function(){return _e})),a.d(t,"nb",(function(){return Te})),a.d(t,"Eb",(function(){return Ae})),a.d(t,"J",(function(){return Ie})),a.d(t,"K",(function(){return xe})),a.d(t,"V",(function(){return Ne})),a.d(t,"sb",(function(){return He}));var n=a(2),r=[{label:"cash",value:"cash"},{label:"cheque",value:"cheque"},{label:"card",value:"card"},{label:"netbanking",value:"netbanking"},{label:"unknown",value:"unknown"}],l="Cash",i=[{label:"Kidney Disease",value:"Kidney Disease"},{label:"Cancer Disease",value:"Cancer Disease"},{label:"Other Disease",value:"Other Disease"}],o="Medicine",s="Equipment",c="Supplies",u="Procedure",m="Prescriptions",d="Inventory",p=[{label:o,value:o},{label:s,value:s},{label:c,value:c}],b="ADD",h="CONSUME",f=[{label:"PATIENT ID",value:"{{PATIENT_ID}}"},{label:"CLINIC CONTACT",value:"{{CLINICCONTACTNUMBER}}"},{label:"CLINIC NAME",value:"{{CLINIC}}"},{label:"PATIENT NAME",value:"{{PATIENT}}"},{label:"APPOINTMENT CATEGORY",value:"{{CATEGORY}}"},{label:"DATE",value:"{{DATE}}"},{label:"TIME",value:"{{TIME}}"}],E="EMR",g="BILLING",v=[{title:"PRESCRIPTION"},{title:"TREATMENT PLAN"},{title:"CASE SHEET"},{title:"MEDICAL LEAVE"},{title:"REPORT MANUAL"},{title:"LAB ORDER"},{title:"CLINICAL NOTES"}],y=[{title:"INVOICE"},{title:"BOOKING"},{title:"RECEIPTS"},{title:"RETURN"}],O=["PAGE","HEADER","PATIENT","FOOTER"],k=["A2","A3","A4","A5"],j=[{value:"PORTRAIT"},{value:"LANDSCAPE"}],P=[{value:"COLOR"},{value:"BLACK"}],S=[{title:"Yes",value:!0},{title:"No , I already have a letter head.",value:!1}],C=[{value:"Square"},{value:"Narrow"},{value:"Wide"}],w=[{value:"RIGHT"},{value:"LEFT"},{value:"CENTRE"}],D=[{title:"Yes",value:!0},{title:"No",value:!1}],_=[{value:"Exclude Medical History"},{value:"Exclude Patient Number"},{value:"Exclude address"},{value:"Exclude Blood Group"}],T="Exclude Patient Gender & DOB",A=[{title:"Yes",value:!0},{title:"No",value:!1}],I=[{title:"Yes",value:!0},{title:"No",value:!1}],x=[{title:"Yes",value:!0},{title:"No",value:!1}],N=[{label:"day(s)",value:"day(s)"},{label:"week(s)",value:"week(s)"},{label:"month(s)",value:"month(s)"},{label:"year(s)",value:"year(s)"}],H=[{label:"twice daily",value:"twice daily"},{label:"three times a day",value:"three times a day"},{label:"four times a day",value:"four times a day"},{label:"every four hours",value:"every four hours"},{label:"as needed",value:"as needed"},{label:"every 2 hour(s)",value:"every 2 hour(s)"},{label:"every other hour",value:"every other hour"},{label:"every day",value:"every day"},{label:"every other day",value:"every other day"}],B="Scheduled",L="Waiting",M="Engaged",R="CheckOut",F="Cancelled",V=[{label:"Sales",value:"SALES"},{label:"Services",value:"SERVICES"},{label:"Damaged",value:"DAMAGED"},{label:"Returned",value:"RETURNED"},{label:"Adjustment",value:"ADJUSTMENT"}],Y="$_$",q=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],W=[{label:"Valid for absence from court attendance",value:"valid_court"},{label:"Invalid for absence from court attendance",value:"invalid_court"},{label:"Dont mention",value:"no_mention"}],G=[{label:"Degree Fahrenheit",value:"Degree Fahrenheit"},{label:"Degree Celsius",value:"Degree Celsius"}],U=[{label:"Armpit",value:"Armpit"},{label:"Forehead",value:"Forehead"},{label:"Anus",value:"Anus"},{label:"Mouth",value:"Mouth"},{label:"Ear",value:"Ear"}],K=[{label:"Sitting",value:"Sitting"},{label:"Standing",value:"Standing"}],z=[{label:"Scheduled",value:B},{label:"Cancelled",value:F},{label:"Engaged",value:M}],J=[{label:"Success",value:"SUCCESSFUL"},{label:"Failed",value:"FAILED"},{label:"Pending",value:"PENDING"}],X=[{label:"OPD",value:"OPD"},{label:"IPD",value:"IPD"}],Z=[{label:"ADMIN",value:"1"},{label:"CLINIC_ADMIN",value:"2"}],Q=[{name:"Daily New Patients",value:n.H},{name:"Expiring Membership",value:n.S},{name:"Patients First Appointment",value:n.tb},{name:"Monthly New Patients",value:n.ib},{name:"New Membership",value:n.nb},{name:"Active Patients",value:n.a},{name:"Follow Up Report",value:n.T},{name:"Medicine Report",value:n.ab}],$=[{name:"Appointments For Each Category",value:n.m},{name:"Cancellation Numbers",value:n.w},{name:"Average Waiting/engaged Time Day Wise",value:n.s},{name:"Average Waiting/engaged Time Month Wise",value:n.t},{name:"Daily Appointment Count",value:n.C},{name:"Appointments For Each Doctor",value:n.n},{name:"Monthly Appointment Count",value:n.db},{name:"Appointment For Each Patient Group",value:n.o},{name:"Patient Conversion",value:n.p}],ee=[{name:"Daily Treatments Count",value:n.I},{name:"Treatments For Each Doctor",value:n.Yb},{name:"Monthly Treatments Count",value:n.jb},{name:"Treatments For Each Category",value:n.Zb}],te=[{name:"Ageing Amount Due",value:n.b},{name:"Amount Due Per Doctor",value:n.l}],ae=[{name:"A+",value:"A+"},{name:"A-",value:"A-"},{name:"B+",value:"B+"},{name:"B-",value:"B-"},{name:"AB+",value:"AB+"},{name:"AB-",value:"AB-"},{name:"O+",value:"O+"},{name:"O-",value:"O-"}],ne=[{name:"Daily Expenses",value:n.E},{name:"Expenses For Each Type",value:n.R},{name:"Monthly Expenses",value:n.fb}],re=[{name:"Daily Stock Consumption Item Wise",value:n.G},{name:"Monthly Stock Consumption Item Wise",value:n.hb},{name:"Top 10 Consumed Items",value:n.Wb}],le=[{name:"Daily Booking Count",value:n.D},{name:"Monthly Booking Count",value:n.eb},{name:"Medicine Usage Count",value:n.bb},{name:"Bed Booking Package Count",value:n.u}],ie=[{name:"Margin Type wise",value:n.Z},{name:"Wallet Balance Amount",value:n.ac},{name:"Agent Tree View",value:n.c}],oe=[{name:"Payment Received From Each Patient Group",value:n.wb},{name:"Patients With Unsettled Advance, As Of Today",value:n.ub},{name:"Modes Of Payment",value:n.cb},{name:"Payment Received Per Day",value:n.xb},{name:"Payment Received Per Doctor",value:n.yb},{name:"Payment Received Per Month",value:n.zb}],se=[{name:"Daily Invoiced Income",value:n.F},{name:"Monthly Invoiced Income",value:n.gb},{name:"Taxed Invoiced Income",value:n.Tb},{name:"Invoiced Income For Each Doctor",value:n.O},{name:"Invoiced Income For Each Procedure",value:n.Cb},{name:"Invoiced Income For Each Patient Group",value:n.vb},{name:"Invoiced Income For Each Product",value:n.Db}],ce=[{name:"Day wise Return Invoice",value:n.J},{name:"Monthly wise Return Invoice",value:n.kb},{name:"Return Invoice For Each Tax",value:n.Lb},{name:"Return Invoice For Each Procedure",value:n.Jb},{name:"Return Invoice For Each Product",value:n.Kb},{name:"Return Invoice For Each Doctor",value:n.Hb},{name:"Return Invoice For Each Patient Groups",value:n.Ib}],ue=[{label:"all ",value:""},{label:"Services",value:"SERVICES"},{label:"Products",value:"PRODUCTS"},{label:"Lab orders",value:"RESERVATION"}],me=[{label:"Zero",value:"ZERO"},{label:"Non Zero",value:"NON_ZERO"}],de=[{label:"all payments",value:"SALES"},{label:"Only advance payments",value:"SERVICES"},{label:"Payment for services",value:"DAMAGED"},{label:"Payment for products",value:"RETURNED"}],pe=[{label:"DOB",value:"DOB"},{label:"Age",value:"AGE"}],be="alt+c ,alt+p, alt+r, alt+s, alt+b ,alt+w",he="alt+f ,alt+a, alt+o, alt+m, alt+l ,alt+i,alt+e ,alt+n ,alt+y ,alt+t,alt+s ,alt+k, alt+g,alt+u,alt+w",fe=[{label:"Patient Name",value:"name"},{label:"Contact No",value:"phone"},{label:"Age is ",value:"age"},{label:"Age more than ",value:"age_gte"},{label:"Age Less Than",value:"age_lte"},{label:"Has Age ",value:"has_age"},{label:"Date of Birth is ",value:"dob"},{label:"Date of Birth is more than ",value:"dob_gte"},{label:"Date of Birth is less than",value:"dob_lte"},{label:"Birthday is in",value:"dob_month"},{label:"Has Date of Birth",value:"has_dob"},{label:"Patient Id",value:"patient_id"},{label:"Has Aadhar Id",value:"has_aadhar"},{label:"Aadhar Id",value:"aadhar"},{label:"Email",value:"email"},{label:"Has Email",value:"has_email"},{label:"Gender is",value:"gender"},{label:"Has Gender",value:"has_gender"},{label:"Pincode",value:"pincode"},{label:"Has Pincode",value:"has_pincode"},{label:"Has Street Address",value:"has_street"},{label:"Street Address ",value:"street"},{label:"Blood Group",value:"blood_group"},{label:"Referal Source",value:"source"},{label:"Refered by Agent",value:"agent_referal"}],Ee=[{label:"Yes",value:"Y"},{label:"No",value:"N"}],ge=[{label:"Yes",value:"Y"},{label:"No",value:"N"}],ve=[{label:"Yes",value:"Y"},{label:"No",value:"N"}],ye=[{label:"Yes",value:"Y"},{label:"No",value:"N"}],Oe=[{label:"Yes",value:"Y"},{label:"No",value:"N"}],ke=[{label:"Yes",value:"Y"},{label:"No",value:"N"}],je=[{label:"Yes",value:"Y"},{label:"No",value:"N"}],Pe=[{label:"Yes",value:"Y"},{label:"No",value:"N"}],Se=[{label:"Female",value:"female"},{label:"Male",value:"male"},{label:"Other",value:"other"}],Ce=[{label:"Percent",value:"%"},{label:"Rupees",value:"INR"}],we=["/patients/profile/add","/patient/:id/emr/vitalsigns/add","/patient/:id/emr/vitalsigns/edit","/patient/:id/emr/clinicnotes/add","/patient/:id/emr/clinicnotes/edit","/patient/:id/emr/plans/add","/patient/:id/emr/plans/edit","/patient/:id/emr/workdone/add","/patient/:id/emr/workdone/edit","/patient/:id/emr/prescriptions/add","/patient/:id/emr/prescriptions/edit","/patient/:id/prescriptions/template/add","/patient/:id/billing/invoices/add","/patient/:id/billing/invoices/edit","/patient/:id/billing/payments/add","/patient/:id/billing/payments/edit"],De=[{label:"PATIENT NAME",value:"{{PATIENT}}"},{label:"CLINIC NAME",value:"{{CLINIC}}"},{label:"EXPIRY DATE",value:"{{EXPIRY}}"},{label:"VALUE",value:"{{VALUE}}"},{label:"MAX VALUE",value:"{{MAX_VALUE}}"},{label:"MIN PURCHASE",value:"{{MIN_PURCHASE}}"},{label:"PROMO CODE",value:"{{CODE}}"}],_e="config_blood_group",Te="config_source",Ae="config_sms_language",Ie="config_family_relation",xe="config_gender",Ne=[{label:"Services",value:"SERVICES"},{label:"Products",value:"PRODUCTS"}],He="pdf"},299:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return r}));var n=function(e){return e&&e.length>8?e.substring(0,3)+"*".repeat(e.length-5)+e.substring(e.length-2):e},r=function(e){return e&&e.length>8?e.substring(0,3)+"*".repeat(e.length-e.indexOf("@")-4)+e.substring(e.length-e.indexOf("@")-4):e}},302:function(e,t,a){"use strict";a(223);var n=a(224),r=(a(457),a(491)),l=(a(228),a(227)),i=a(96),o=a(97),s=a(100),c=a(98),u=a(99),m=a(0),d=a.n(m),p=a(65),b=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return d.a.createElement(n.a,{style:{marginTop:"20px"}},d.a.createElement(r.a,{status:"403",title:d.a.createElement("span",null,d.a.createElement("h1",null,d.a.createElement("b",null,"403")),d.a.createElement("h2",null,"Permission Denied")),subTitle:"You don't have permission to view this page.",extra:d.a.createElement(p.b,{to:"/"},d.a.createElement(l.a,{type:"primary"},"Go to Home"))}))}}]),t}(d.a.Component);t.a=b},442:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));a(228);var n=a(227),r=a(96),l=a(97),i=a(100),o=a(98),s=a(99),c=a(0),u=a.n(c),m=a(668),d=a.n(m),p=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).setRef=function(e){a.webcam=e},a.capture=function(){var e=a.webcam.getScreenshot();a.props.getScreenShot&&a.props.getScreenShot(e)},a.state={},a}return Object(s.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return u.a.createElement("div",{style:{width:680}},u.a.createElement(d.a,{audio:!1,height:480,width:640,ref:this.setRef,videoConstraints:{width:1280,height:720,facingMode:"user"},screenshotFormat:"image/jpeg"}),u.a.createElement(n.a,{onClick:this.capture},"Capture photo"))}}]),t}(u.a.Component)},506:function(e,t,a){e.exports=a.p+"static/media/kidneycarelogo.3378a129.png"},536:function(e,t,a){"use strict";a(223);var n=a(224),r=(a(457),a(491)),l=(a(228),a(227)),i=a(96),o=a(97),s=a(100),c=a(98),u=a(99),m=a(0),d=a.n(m),p=a(65),b=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return d.a.createElement(n.a,{style:{marginTop:"20px"},gutter:24},d.a.createElement(r.a,{status:"404",title:d.a.createElement("span",null,d.a.createElement("h1",null,d.a.createElement("b",null,"404")),d.a.createElement("h2",null,"Page Not Found")),subTitle:"The page you are looking for has been temporarily moved or did not exist.",extra:d.a.createElement(p.b,{to:"/"},d.a.createElement(l.a,{type:"primary"},"Go to Home"))}))}}]),t}(d.a.Component);t.a=b},581:function(e,t,a){"use strict";a.d(t,"a",(function(){return w}));a(241);var n=a(242),r=(a(256),a(257)),l=(a(228),a(227)),i=(a(262),a(264)),o=(a(234),a(235)),s=(a(223),a(224)),c=(a(232),a(233)),u=(a(236),a(18)),m=(a(296),a(297)),d=a(96),p=a(97),b=a(100),h=a(98),f=a(44),E=a(99),g=a(0),v=a.n(g),y=a(23),O=a(32),k=a(65),j=a(64),P=a.n(j),S=a(247),C=a(2),w=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(b.a)(this,Object(h.a)(t).call(this,e))).loadAppointmentDetails=function(){a.setState({loading:!0});var e=Object(f.a)(a);Object(y.c)(Object(y.f)(O.o,[a.props.appointmentId]),(function(t){e.setState({appointment:t,loading:!1}),console.log("event",t)}),(function(){e.setState({loading:!1})}))},a.updateAppointmentStatus=function(e,t,n){var r=Object(f.a)(a),l={status:n};n==S.Hb?l.waiting=P()().format():n==S.F?l.engaged=P()().format():n==S.n&&(l.checkout=P()().format());Object(y.l)(Object(y.f)(O.o,[e]),l,(function(e){Object(y.a)(C.Sb,"Appointment Status Changed Successfully!!"),r.loadAppointmentDetails()}),(function(){}))},a.changeAppointmentStatus=function(e,t,n){var r=Object(f.a)(a);Object(y.c)(Object(y.f)(O.o,[e]),(function(a){a.status==t?r.updateAppointmentStatus(e,t,n):(Object(y.a)(C.Q,"Appointment status has already changed. Updating Appointments..."),r.loadAppointmentDetails())}),(function(){}))},a.state={loading:!0,appointment:null},a}return Object(E.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.props.appointmentId?this.loadAppointmentDetails():this.setState({loading:!1})}},{key:"render",value:function(){var e=this,t=this.state.appointment;return v.a.createElement("div",{style:{width:"300px",minHeight:"200px"}},v.a.createElement(n.a,{spinning:this.state.loading},this.state.appointment?v.a.createElement("div",null,v.a.createElement(s.a,null,v.a.createElement(c.a,{span:8},this.state.appointment.patient.image?v.a.createElement(m.a,{src:this.state.appointment.patient.image,size:80}):v.a.createElement(m.a,{style:{backgroundColor:"#87d068"}},this.state.appointment.patient.user.first_name?this.state.appointment.patient.user.first_name.charAt(0):v.a.createElement(u.a,{type:"user"}))),v.a.createElement(c.a,{span:16},v.a.createElement(k.b,{to:"/patient/"+this.state.appointment.patient.id+"/profile",target:"_blank"},v.a.createElement("h3",null,this.state.appointment.patient.user.first_name,v.a.createElement("br",null),v.a.createElement("small",null,"Patient ID: ",this.state.appointment.patient.custom_id," , ",this.state.appointment.patient.gender,v.a.createElement("br",null),this.state.appointment.patient.user.mobile))))),v.a.createElement(o.a,{style:{margin:0}}),v.a.createElement("small",null,"Status: ",this.state.appointment.status),v.a.createElement("br",null),v.a.createElement("small",null,v.a.createElement(u.a,{type:"clock-circle"})," ",P()(this.state.appointment.schedule_at).format("HH:mm A on MMMM Do")," for ",this.state.appointment.slot," mins."),function(e){switch(e.status){case S.Hb:return v.a.createElement("div",null,v.a.createElement("br",null),v.a.createElement("small",null,"Checked in At ",P()(e.waiting).format("lll")));case S.F:return v.a.createElement("div",null,v.a.createElement("small",null,"Waiting Time ",P()(e.engaged).from(P()(e.waiting))),v.a.createElement("br",null),v.a.createElement("small",null,"Engaged At ",P()(e.engaged).format("lll")));case S.n:return v.a.createElement("div",null,v.a.createElement("small",null,"Waiting Time ",P()(e.engaged).from(P()(e.waiting))),v.a.createElement("br",null),v.a.createElement("small",null,"Engaged Time ",P()(e.checkout).from(P()(e.engaged))),v.a.createElement("br",null),v.a.createElement("small",null,"Total Stay Time ",P()(e.checkout).from(P()(e.waiting))))}return null}(t),v.a.createElement(s.a,{style:{height:"100px",overflow:"scroll",backgroundColor:"#eee",padding:5}},v.a.createElement("div",null,t.status==S.Cb?v.a.createElement("span",{style:{width:"70px",float:"right"}},v.a.createElement("a",{onClick:function(){return e.changeAppointmentStatus(t.id,S.Cb,S.Hb)},disabled:!e.props.activePracticePermissions.ChangeAppointmentStatus}," Check In")):null,t.status==S.Hb?v.a.createElement("span",{style:{width:"70px",float:"right"}},v.a.createElement("a",{onClick:function(){return e.changeAppointmentStatus(t.id,S.Hb,S.F)},disabled:!e.props.activePracticePermissions.ChangeAppointmentStatus}," Engage")):null,t.status==S.F?v.a.createElement("span",{style:{width:"70px",float:"right"}},v.a.createElement("a",{onClick:function(){return e.changeAppointmentStatus(t.id,S.F,S.n)},disabled:!e.props.activePracticePermissions.ChangeAppointmentStatus}," Check Out")):null,t.status==S.n?v.a.createElement("span",{style:{width:"70px",float:"right"}},v.a.createElement("small",null,"Checked Out")):null,this.state.appointment.doctor_data?v.a.createElement(i.a,{color:this.state.appointment.doctor_data?this.state.appointment.doctor_data.calendar_colour:null},v.a.createElement("b",null,"With "+this.state.appointment.doctor_data.user.first_name," ")):null),v.a.createElement(o.a,{style:{margin:0}}),v.a.createElement("b",null,"Category:"),this.state.appointment.category_data?this.state.appointment.category_data.name:null,v.a.createElement("p",null,this.state.appointment.first_appointment?v.a.createElement("span",null,"This is Patient's first apppointment"):"")),v.a.createElement(o.a,{style:{margin:0}}),v.a.createElement(s.a,{style:{textAlign:"right"}},v.a.createElement(l.a.Group,{size:"small"},e.props.activePracticePermissions.EditAppointment||e.props.allowAllPermissions?v.a.createElement(l.a,null,v.a.createElement(k.b,{to:"/calendar/"+this.state.appointment.id+"/edit-appointment"},v.a.createElement(u.a,{type:"edit"})," Edit")):null,e.props.activePracticePermissions.ChangeAppointmentStatus||e.props.allowAllPermissions?v.a.createElement(r.a,{title:"Are you sure delete this?",onConfirm:function(){return e.changeAppointmentStatus(t.id,t.status,S.m)},okText:"Yes",cancelText:"No"},v.a.createElement(l.a,{type:"danger"},v.a.createElement(u.a,{type:"cross"})," Cancel")):null))):v.a.createElement("h4",null,"No Patient Found")))}}]),t}(v.a.Component)},921:function(e,t,a){"use strict";a(223);var n=a(224),r=(a(237),a(238)),l=a(96),i=a(97),o=a(100),s=a(98),c=a(99),u=a(0),m=a.n(u),d=a(24),p=(a(243),a(2)),b=a(32),h=a(23),f=a(64),E=a.n(f),g=(a(241),a(242)),v=(a(230),a(229)),y=(a(379),a(395)),O=(a(268),a(271)),k=(a(228),a(227)),j=(a(236),a(18)),P=(a(296),a(297)),S=(a(232),a(233)),C=(a(284),a(286)),w=(a(140),a(103)),D=(a(281),a(282)),_=a(248),T=a(33),A=a(44),I=(a(225),a(226)),x=(a(250),a(253)),N=a(25),H=a(339),B=a(247),L=a(299);a(1215);function M(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function R(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?M(a,!0).forEach((function(t){Object(T.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):M(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}x.a.TextArea;var F=r.a.Item,V=(H.Radio.Group,H.Checkbox.Group,I.a.Meta),Y=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(s.a)(t).call(this,e))).loadPracticeTiming=function(){var e=Object(A.a)(a);Object(h.c)(Object(h.f)(b.J,[a.props.active_practiceId]),(function(t){var a={};t.length&&(a=t[0]);var n={};B.s.forEach((function(e){n[e]={},a.visting_hour_same_week?(n[e].startTime=E()(a.first_start_time,"HH:mm:ss"),n[e].endTime=E()(a.second_end_time,"HH:mm:ss"),a.is_two_sessions?(n[e].lunch=!0,n[e].lunchStartTime=E()(a.first_end_time,"HH:mm:ss"),n[e].lunchEndTime=E()(a.second_start_time,"HH:mm:ss")):n[e].lunch=!1):a[e]?(n[e].startTime=E()(a["first_start_time_".concat(e)],"HH:mm:ss"),n[e].endTime=E()(a["second_end_time_".concat(e)],"HH:mm:ss"),a["is_two_sessions_".concat(e)]?(n[e].lunch=!0,n[e].lunchStartTime=E()(a["first_end_time_".concat(e)],"HH:mm:ss"),n[e].lunchEndTime=E()(a["second_start_time_".concat(e)],"HH:mm:ss")):n[e].lunch=!1):n[e]=null})),e.setState({calendarTimings:R({},n)},(function(){e.findOutsidePracticeTiming()}))}),(function(){e.setState({calendarTimings:{}})}))},a.loadDoctorsTiming=function(){var e=Object(A.a)(a);e.state.timeToCheckBlock.doctor&&Object(h.c)(Object(h.f)(b.Y,[a.props.active_practiceId]),(function(t){var a={};t.length&&(a=t[0]);var n={};B.s.forEach((function(e){n[e]={},a.visting_hour_same_week?(n[e].startTime=E()(a.first_start_time,"HH:mm:ss"),n[e].endTime=E()(a.second_end_time,"HH:mm:ss"),a.is_two_sessions?(n[e].lunch=!0,n[e].lunchStartTime=E()(a.first_end_time,"HH:mm:ss"),n[e].lunchEndTime=E()(a.second_start_time,"HH:mm:ss")):n[e].lunch=!1):a[e]?(n[e].startTime=E()(a["first_start_time_".concat(e)],"HH:mm:ss"),n[e].endTime=E()(a["second_end_time_".concat(e)],"HH:mm:ss"),a["is_two_sessions_".concat(e)]?(n[e].lunch=!0,n[e].lunchStartTime=E()(a["first_end_time_".concat(e)],"HH:mm:ss"),n[e].lunchEndTime=E()(a["second_start_time_".concat(e)],"HH:mm:ss")):n[e].lunch=!1):n[e]=null})),e.setState({doctorTimings:R({},n)},(function(){e.findOutsideDoctorTiming()}))}),(function(){}),{doctor:e.state.timeToCheckBlock.doctor})},a.setBlockedTiming=function(e,t){var n=Object(A.a)(a);e&&a.setState((function(a){return{timeToCheckBlock:R({},a.timeToCheckBlock,Object(T.a)({},e,t))}}),(function(){n.loadAppointmentList(),n.findBlockedTiming(),n.findOutsidePracticeTiming(),"doctor"==e?n.loadDoctorsTiming():n.findOutsideDoctorTiming()}))},a.findBlockedTiming=function(){var e=Object(A.a)(a);Object(h.c)(b.x,(function(t){t.forEach((function(t){null==t.doctor?e.setState({practiceBlock:!0}):t.doctor==e.props.timeToCheckBlock.doctor&&e.setState({doctorBlock:!0})}))}),(function(){}),{practice:a.props.active_practiceId,cal_fdate:E()(e.state.timeToCheckBlock.schedule_at).format(),cal_tdate:E()(e.state.timeToCheckBlock.schedule_at).add(e.state.timeToCheckBlock.slot,"minutes").format()})},a.findOutsidePracticeTiming=function(){var e=Object(A.a)(a),t=!0;if(e.state.timeToCheckBlock.schedule_at&&e.state.timeToCheckBlock.slot){var n=e.state.timeToCheckBlock.schedule_at,r=e.state.calendarTimings,l=E()(n).isValid()?E()(n).format("dddd").toLowerCase():null;if(r&&l&&r[l]){var i=r[l];i.lunch?(E()(n,"HH:mm:ss").format("HH:mm:ss")<=i.startTime.format("HH:mm:ss")||E()(n,"HH:mm:ss").format("HH:mm:ss")>i.endTime.format("HH:mm:ss")||E()(n,"HH:mm:ss").format("HH:mm:ss")<i.lunchEndTime.format("HH:mm:ss")&&E()(n,"HH:mm:ss").format("HH:mm:ss")>=i.lunchStartTime.format("HH:mm:ss"))&&(t=!1):(E()(n,"HH:mm:ss").format("HH:mm:ss")<=i.startTime.format("HH:mm:ss")||E()(n,"HH:mm:ss").format("HH:mm:ss")>i.endTime.format("HH:mm:ss"))&&(t=!1)}else l&&!r[l]&&(t=!1)}e.setState({practiceOutsideAvailableTiming:!t})},a.findOutsideDoctorTiming=function(){var e=Object(A.a)(a),t=!0;if(e.state.timeToCheckBlock.schedule_at&&e.state.timeToCheckBlock.slot){var n=e.state.timeToCheckBlock.schedule_at,r=e.state.doctorTimings,l=E()(n).isValid()?E()(n).format("dddd").toLowerCase():null;if(r&&l&&r[l]){var i=r[l];i.lunch?(E()(n,"HH:mm:ss").format("HH:mm:ss")<=i.startTime.format("HH:mm:ss")||E()(n,"HH:mm:ss").format("HH:mm:ss")>i.endTime.format("HH:mm:ss")||E()(n,"HH:mm:ss").format("HH:mm:ss")<i.lunchEndTime.format("HH:mm:ss")&&E()(n,"HH:mm:ss").format("HH:mm:ss")>=i.lunchStartTime.format("HH:mm:ss"))&&(t=!1):(E()(n,"HH:mm:ss").format("HH:mm:ss")<=i.startTime.format("HH:mm:ss")||E()(n,"HH:mm:ss").format("HH:mm:ss")>i.endTime.format("HH:mm:ss"))&&(t=!1)}else l&&r&&!r[l]&&(t=!1)}e.setState({doctorOutsideAvailableTiming:!t})},a.handleSubmit=function(e){var t=Object(A.a)(a);e.preventDefault(),a.props.form.validateFields((function(e,n){if(!e){t.setState({saving:!0});var r=R({},n);r.patient={user:{}},a.state.patientDetails?r.patient=a.state.patientDetails:(r.patient.user.first_name=r.patient_name,r.patient.user.email=r.patient_email,r.patient.user.mobile=r.patient_mobile,r.patient_email=void 0,r.patient_name=void 0,r.patient_mobile=void 0),r.practice=t.props.active_practiceId;var l=function(e){t.setState({saving:!1}),t.props.history&&(t.props.history.goBack(),t.props.history.replace("/patients/appointments")),t.props.loadData&&t.props.loadData(),e&&Object(h.a)(p.Sb,"Appointment Created Successfully")},i=function(){t.setState({saving:!1})};a.state.appointment?Object(h.l)(Object(h.f)(b.o,[a.state.appointment.id]),r,l,i):Object(h.j)(b.h,r,l,i)}}))},a.handlePatientSelect=function(e){if(e){var t=Object(A.a)(a);Object(h.c)(Object(h.f)(b.wc,[e]),(function(e){t.setState({patientDetails:e})}),(function(){}))}},a.handleClick=function(e){a.setState({patientDetails:null})},a.state={redirect:!1,practice_doctors:[],appointmentCategories:null,procedure_category:null,treatmentNotes:null,practice_staff:[],appointment:null,loading:!1,patientListData:[],appointmentDetail:null,saving:!1,doctorBlock:!1,doctorOutsideAvailableTiming:!1,practiceBlock:!1,practiceOutsideAvailableTiming:!1,timeToCheckBlock:{schedule_at:E()(),slot:10},procedureObjectsById:{},startTime:a.props.startTime},a.changeRedirect=a.changeRedirect.bind(Object(A.a)(a)),a.loadDoctors=a.loadDoctors.bind(Object(A.a)(a)),a.loadProcedureCategory=a.loadProcedureCategory.bind(Object(A.a)(a)),a.loadTreatmentNotes=a.loadTreatmentNotes.bind(Object(A.a)(a)),a.searchPatient=a.searchPatient.bind(Object(A.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(A.a)(a)),a.loadAppointment=a.loadAppointment.bind(Object(A.a)(a)),a.loadAppointmentList=a.loadAppointmentList.bind(Object(A.a)(a)),a}return Object(c.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;if(this.loadDoctors(),this.loadProcedureCategory(),this.loadTreatmentNotes(),this.loadAppointmentCategories(),this.loadPracticeTiming(),this.loadAppointmentList(),this.props.match.params.appointmentid)e.loadAppointment();else if(this.props.history&&this.props.history.location.search){var t=this.props.history.location.search.substr(1).split("&");t.length&&t.forEach((function(t){var a=t.split("=");a&&2==a.length&&"patient"==a[0]&&a[1]&&e.handlePatientSelect(a[1])}))}}},{key:"loadAppointment",value:function(){var e=this;this.setState({loading:!0});Object(h.c)(Object(h.f)(b.o,[this.props.match.params.appointmentid]),(function(t){e.setState({appointment:t,patientDetails:t.patient,timeToCheckBlock:t,loading:!1},(function(){e.findBlockedTiming(),e.findOutsideDoctorTiming(),e.loadDoctorsTiming(),e.loadAppointmentList()}))}),(function(){e.setState({loading:!1})}))}},{key:"loadDoctors",value:function(){var e=this;Object(h.c)(Object(h.f)(b.Dc,[this.props.active_practiceId]),(function(t){var a=[],n={};t.staff.forEach((function(t){t.role==p.N&&(a.push(t),e.props.user.id==t.user.id&&(n=t))})),e.setState((function(e){return{selectedDoctor:a.length&&!n.id?a[0].user.id:n.user.id,practice_doctors:a,timeToCheckBlock:R({},e.timeToCheckBlock,{doctor:a.length&&!n.id?a[0].user.id:n.user.id})}}),(function(){e.findBlockedTiming(),e.loadDoctorsTiming()}))}),(function(){}))}},{key:"loadProcedureCategory",value:function(){var e=this;Object(h.c)(Object(h.f)(b.Kc,[this.props.active_practiceId]),(function(t){var a={};t.forEach((function(e){a[e.id]=e})),e.setState({procedure_category:t,procedureObjectsById:R({},a)})}),(function(){}),{pagination:!1})}},{key:"loadTreatmentNotes",value:function(){var e=this;Object(h.c)(Object(h.f)(b.kb,[this.props.active_practiceId]),(function(t){e.setState({treatmentNotes:t})}),(function(){}))}},{key:"loadAppointmentCategories",value:function(){var e=this;Object(h.c)(Object(h.f)(b.p,[this.props.active_practiceId]),(function(t){e.setState({appointmentCategories:t})}),(function(){}))}},{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"searchPatient",value:function(e){var t=this;this.setState({searchPatientString:e});e&&Object(h.c)(Object(h.f)(b.Vc,[e]),(function(a){t.setState((function(t){if(t.searchPatientString==e)return a.current>1?{patientListData:[].concat(Object(_.a)(t.patientListData),Object(_.a)(a.results))}:{patientListData:Object(_.a)(a.results)}}))}),(function(e){t.setState({searchPatientString:null})}))}},{key:"loadAppointmentList",value:function(){var e=this,t={start_time:E()(this.state.timeToCheckBlock.schedule_at).format(),end_time:E()(this.state.timeToCheckBlock.schedule_at).add(this.state.timeToCheckBlock.slot,"minutes").format(),doctor:this.state.timeToCheckBlock.doctor};Object(h.c)(Object(h.f)(b.s,[this.props.active_practiceId]),(function(t){e.setState({appointmentList:t})}),(function(e){}),t)}},{key:"render",value:function(){var e=this,t=this,a=this.props.formLayout?this.props.formLayout:{labelCol:{span:6},wrapperCol:{span:14}},l=this.props.formLayout?this.props.formLayout:{wrapperCol:{offset:6,span:14}},i=this.props.form.getFieldDecorator,o=[];this.state.treatmentNotes&&this.state.treatmentNotes.forEach((function(e){o.push({label:e.name,value:e.id})}));var s=[];this.state.appointmentCategories&&this.state.appointmentCategories.forEach((function(e){s.push({label:e.name,value:e.id})}));var c=this.state.appointment?this.state.appointment.schedule_at:this.props.startTime;c||(c=new E.a(new Date).format());return m.a.createElement(I.a,null,m.a.createElement(g.a,{spinning:this.state.saving},m.a.createElement(r.a,{onSubmit:this.handleSubmit},this.props.title?m.a.createElement("h2",null,this.props.title):null,m.a.createElement(F,Object.assign({key:"schedule_at",label:"Appointment Schedule"},a),i("schedule_at",{initialValue:c?E()(c):E()(this.props.startTime),rules:[{required:!0,message:N.j}]})(m.a.createElement(D.a,{showTime:{use12Hours:!0},format:"YYYY/MM/DD hh:mm a",allowClear:!1,onChange:function(t){return e.setBlockedTiming("schedule_at",t)}})),this.state.practiceOutsideAvailableTiming?m.a.createElement(w.a,{message:"Selected time is outside available clinic time!!",type:"warning",showIcon:!0}):null,this.state.practiceBlock?m.a.createElement(w.a,{message:"Selected time is blocked in this clinic !!",type:"warning",showIcon:!0}):null),m.a.createElement(F,Object.assign({key:"slot"},a,{label:"Time Slot"}),i("slot",{initialValue:this.state.appointment?this.state.appointment.slot:10,rules:[{required:!0,message:N.j}]})(m.a.createElement(C.a,{min:1,onChange:function(t){return e.setBlockedTiming("slot",t)}})),m.a.createElement("span",{className:"ant-form-text"},"mins",m.a.createElement(n.a,{style:{float:"right"}},m.a.createElement(S.a,{span:24},this.state.appointmentList&&this.state.appointmentList.length>0?m.a.createElement("div",{span:5,style:{float:"right"}},m.a.createElement("ul",{style:{listStyle:"none",display:"inline-flex",paddingLeft:"15px",paddingRight:"10px"}},t.state.appointmentList.map((function(e){return m.a.createElement("li",{style:{border:"1px solid #bbb",marginLeft:"13px",padding:" 0.01em 14px"}},m.a.createElement("span",{style:{width:"calc(100% - 60px)"}},m.a.createElement("b",null,E()(e.schedule_at).format("LT")),"\xa0",e.patient.user.first_name),"\xa0",m.a.createElement("b",null,"with")," \xa0",e.doctor_data.user.first_name)})))):null))),this.state.appointmentList&&this.state.appointmentList.length>0?m.a.createElement(m.a.Fragment,null,m.a.createElement(w.a,{message:"Selected time slot have assigned someone else !! please select another slot.",type:"warning",showIcon:!0})):null),t.state.patientDetails?m.a.createElement(F,Object.assign({key:"id",value:this.state.patientDetails.id},l),m.a.createElement(I.a,{bordered:!1,style:{background:"#ECECEC"}},m.a.createElement(V,{avatar:this.state.patientDetails.image?m.a.createElement(P.a,{src:Object(h.g)(this.state.patientDetails.image)}):m.a.createElement(P.a,{style:{backgroundColor:"#87d068"}},this.state.patientDetails.user.first_name?this.state.patientDetails.user.first_name.charAt(0):m.a.createElement(j.a,{type:"user"})),title:this.state.patientDetails.user.first_name,description:m.a.createElement("span",null,t.props.activePracticePermissions.PatientPhoneNumber?this.state.patientDetails.user.mobile:Object(L.b)(this.state.patientDetails.user.mobile),m.a.createElement("br",null),m.a.createElement(k.a,{type:"primary",style:{float:"right"},onClick:this.handleClick},"Add New Patient"))}))):m.a.createElement("div",null,m.a.createElement(F,Object.assign({key:"patient_name",label:"Patient Name"},a),i("patient_name",{initialValue:this.state.appointment?this.state.appointment.patient.user.first_name:null,rules:[{required:!0,message:N.j}]})(m.a.createElement(y.a,{placeholder:"Patient Name",showSearch:!0,onSearch:this.searchPatient,defaultActiveFirstOption:!1,showArrow:!1,filterOption:!1,onSelect:this.handlePatientSelect},this.state.patientListData.map((function(e){return m.a.createElement(y.a.Option,{value:e.id.toString()},m.a.createElement(O.a.Item,{style:{padding:0}},m.a.createElement(O.a.Item.Meta,{avatar:e.image?m.a.createElement(P.a,{src:Object(h.g)(e.image)}):m.a.createElement(P.a,{style:{backgroundColor:"#87d068"}},e.user.first_name?e.user.first_name.charAt(0):m.a.createElement(j.a,{type:"user"})),title:e.user.first_name+" (ID:"+(e.custom_id?e.custom_id:e.user.id)+")",description:t.props.activePracticePermissions.PatientPhoneNumber?e.user.mobile:Object(L.b)(e.user.mobile)})))}))))),m.a.createElement(F,Object.assign({key:"patient_mobile",label:"Mobile Number"},a),i("patient_mobile",{initialValue:this.state.appointment?this.state.appointment.patient.user.mobile:null,rules:[{required:!0,message:N.j}]})(m.a.createElement(x.a,{placeholder:"Mobile Number"}))),m.a.createElement(F,Object.assign({key:"patient_email",label:"Email Address"},a),i("patient_email",{initialValue:this.state.appointment?this.state.appointment.patient.user.email:null,rules:[{type:"email",message:"The input is not valid E-mail!"}]})(m.a.createElement(x.a,{placeholder:"Email Address"})))),m.a.createElement(F,Object.assign({key:"doctor"},a,{label:"Doctor"}),i("doctor",{initialValue:this.state.appointment?this.state.appointment.doctor:this.state.selectedDoctor},{rules:[{required:!0,message:N.j}]})(m.a.createElement(v.a,{placeholder:"Doctor",onChange:function(t){return e.setBlockedTiming("doctor",t)}},this.state.practice_doctors.map((function(e){return m.a.createElement(v.a.Option,{value:e.id},e.user.first_name+"("+e.user.email+")")})))),this.state.doctorBlock?m.a.createElement(w.a,{message:"Selected time is blocked for selected doctor in this clinic!!",type:"warning",showIcon:!0}):null,this.state.doctorOutsideAvailableTiming?m.a.createElement(w.a,{message:"Selected time is out of doctor's visit time in this clinic!!",type:"warning",showIcon:!0}):null,this.state.appointmentList&&this.state.appointmentList.length>0?m.a.createElement(m.a.Fragment,null,m.a.createElement(w.a,{message:"Selected time doctor's busy on other patients in  this clinic!!",type:"warning",showIcon:!0})):null),m.a.createElement(F,Object.assign({key:"category"},a,{label:"Category"}),i("category",{initialValue:this.state.appointment?this.state.appointment.category:null},{rules:[{required:!0,message:N.j}]})(m.a.createElement(v.a,{placeholder:"Category"},s.map((function(e){return m.a.createElement(v.a.Option,{value:e.value},e.label)}))))),this.state.appointment?m.a.createElement(F,Object.assign({key:"status"},a,{label:"Status"}),i("status",{initialValue:this.state.appointment.status})(m.a.createElement(v.a,{placeholder:"Status"},B.f.map((function(e){return m.a.createElement(v.a.Option,{value:e.value},e.label)}))))):null,m.a.createElement(F,Object.assign({key:"notes"},a,{label:"Notes"}),i("notes",{initialValue:this.state.appointment?this.state.appointment.notes:null},{rules:[{required:!0,message:N.j}]})(m.a.createElement(x.a,{placeholder:"Notes"}))),m.a.createElement(F,a,m.a.createElement(k.a,{loading:t.state.saving,type:"primary",htmlType:"submit",style:{margin:5}},"Submit"),t.props.history?m.a.createElement(k.a,{style:{margin:5},onClick:function(){return t.props.history.goBack()}},"Cancel"):null))))}}]),t}(m.a.Component),q=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(s.a)(t).call(this,e))).state={},a}return Object(c.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=(b.h,[{key:"practice",value:this.props.active_practiceId}]),a=r.a.create()(Y);return m.a.createElement(n.a,null,m.a.createElement(d.b,{exact:!0,path:"/calendar/:appointmentid/edit-appointment",render:function(n){return e.props.match.params.appointmentid?m.a.createElement(a,Object.assign({},n,e.props,{defaultValues:t,title:"Edit Appointment",changeRedirect:e.changeRedirect})):m.a.createElement(d.a,{to:"/patients/appointments/"})}}),m.a.createElement(d.b,{exact:!0,path:"/calendar/create-appointment",render:function(n){return m.a.createElement(a,Object.assign({},e.props,{defaultValues:t,changeRedirect:e.changeRedirect},n,{title:"ADD Appointment "}))}}))}}]),t}(m.a.Component);t.a=q}}]);
//# sourceMappingURL=12.94ef9050.chunk.js.map