{"version":3,"sources":["app/utils/export.js","app/components/common/CustomizedTable.js","app/components/common/InfiniteFeedLoaderButton.js","../node_modules/antd/es/switch/style/index.js","../node_modules/antd/es/switch/index.js","app/components/patients/wallet-ledger/PatientWalletLedger.js","../node_modules/lodash/mapKeys.js","app/components/patients/patientGroups/PatientGroups.js","app/components/patients/PatientSelection.js","app/components/patients/patient/PatientNotes.js","app/components/patients/patient/MedicalMembership.js","app/components/patients/patient/AddOrEditAgent.js","app/components/patients/patient/PatientProfile.js","app/components/patients/patient/EditPatientDetails.js","app/components/patients/appointment/Appointment.js","app/components/patients/PatientSider.js","../node_modules/antd/es/timeline/TimelineItem.js","../node_modules/antd/es/timeline/Timeline.js","../node_modules/antd/es/timeline/index.js","../node_modules/antd/es/steps/index.js","app/components/patients/timeline/PatientTimeline.js","../node_modules/react-modal-image/es/styles.js","../node_modules/react-modal-image/es/icons.js","../node_modules/react-modal-image/es/Header.js","../node_modules/react-modal-image/es/Image.js","../node_modules/react-modal-image/es/Lightbox.js","../node_modules/react-modal-image/es/index.js","app/components/patients/files/PatientFiles.js","app/components/patients/clinicNotes/AddClinicNotes.js","app/components/patients/clinicNotes/AddClinicNotesDynamic.js","app/components/patients/clinicNotes/PatientClinicNotes.js","app/components/patients/PatientHeader.js","app/components/patients/communication/PatientCommunicationSetting.js","app/components/patients/communication/PatientCommunication.js","app/components/patients/vitalSign/AddorEditPatientVitalSigns.js","app/components/patients/vitalSign/PatientVitalSign.js","app/components/patients/completedProcedures/AddorEditDynamicCompletedTreatmentPlans.js","app/components/patients/completedProcedures/PatientCompletedProcedures.js","app/components/patients/prescriptions/PrescriptionTemplate.js","app/components/patients/prescriptions/AddorEditDynamicPatientPrescriptions.js","app/components/patients/prescriptions/PatientPrescriptions.js","app/components/patients/treatmentPlans/AddorEditDynamicTreatmentPlans.js","app/components/patients/treatmentPlans/PatientTreatmentPlans.js","app/components/patients/labOrders/AddPatientLabOrders.js","app/components/patients/labOrders/PatientLabOrders.js","app/components/patients/invoices/AddInvoicedynamic.js","app/components/patients/invoices/AddReturnInvoice.js","app/components/patients/invoices/InvoiceReturnModal.js","app/components/patients/invoices/EditReturnModal.js","app/components/patients/invoices/CancelReturnModal.js","app/components/patients/invoices/PatientInvoices.js","app/components/patients/payments/AddPaymentForm.js","app/components/patients/payments/EditPaymentModal.js","app/components/patients/payments/CancelPaymentModal.js","app/components/patients/payments/PatientPayments.js","app/components/patients/invoices/ReturnInvoices.js","app/utils/patientUtils.js","app/components/patients/ledgers/PatientLedgers.js","app/components/patients/merge/PatientMerge.js","app/components/patients/PatientRequiredNoticeCard.js","app/components/patients/files/PatientMedicalCertificate.js","app/components/patients/booking/BedBookingForm.js","app/components/patients/booking/BookingHome.js","app/components/patients/PatientHome.js"],"names":["makeCSVString","columns","dataArray","printColumn","str","line","forEach","column","push","join","dataRow","downloadCSV","fileName","cCode","fName","bArr","i","length","charCodeAt","blob","Blob","Uint8Array","type","navigator","msSaveBlob","link","document","createElement","undefined","download","url","window","URL","createObjectURL","setAttribute","style","visibility","body","appendChild","click","removeChild","revokeObjectURL","addPDFHeader","pdf","addPDFFooter","setFontSize","text","CustomizedTable","props","getColumnSearchProps","dataIndex","filterDropdown","setSelectedKeys","selectedKeys","confirm","clearFilters","padding","ref","node","searchInput","placeholder","value","onChange","e","target","onPressEnter","handleSearch","width","marginBottom","display","onClick","icon","size","marginRight","handleReset","filterIcon","filtered","color","onFilter","record","toString","toLowerCase","includes","onFilterDropdownVisibleChange","visible","setTimeout","select","render","highlightStyle","backgroundColor","searchWords","state","searchText","autoEscape","textToHighlight","setState","excelExport","bind","pdfExport","newProps","this","dataSource","loading","that","excelColumns","item","hideExport","title","dataKey","dataArrayForExcel","index","dataObjectToPush","export","jsPDF","rows","Object","create","autoTable","margin","top","startY","autoTableEndPosY","headerStyle","overflow","bodyStyles","save","exportToPDF","moment","exportToExcel","map","hideReport","Group","disabled","pagination","position","pageSizeOptions","showSizeChanger","showQuickJumper","showTotal","total","range","React","Component","InfiniteFeedLoaderButton","startLoading","loaderFunction","startMakingExtraLabels","prevState","extraLoadingLabel","spinning","minHeight","hidden","textAlign","_typeof","obj","Symbol","iterator","constructor","prototype","_extends","assign","arguments","source","key","hasOwnProperty","call","apply","_defineProperty","defineProperty","enumerable","configurable","writable","_defineProperties","descriptor","_possibleConstructorReturn","self","ReferenceError","_assertThisInitialized","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","_setPrototypeOf","p","Switch","_React$Component","_this","instance","Constructor","TypeError","_classCallCheck","saveSwitch","rcSwitch","renderSwitch","_ref","_classNames","getPrefixCls","_this$props","customizePrefixCls","prefixCls","_this$props$className","className","classes","concat","loadingIcon","insertExtraNode","protoProps","staticProps","subClass","superClass","_inherits","focus","blur","__ANT_SWITCH","propTypes","Text","PatientWalletLedger","loadPatientWallet","currentPatient","id","getAPI","interpolate","AGENT_WALLET","data","walletAmount","pendingAmount","loadData","page","successFn","current","ledger","results","nextPage","next","errorFn","params","start","selectedStartDate","startOf","format","end","selectedEndDate","endOf","agents","selectedAgents","WALLET_LEDGER","loadSumData","ledgerDetails","WALLET_LEDGER_SUM","changeExpenseFilters","subtract","loadAgents","MY_AGENTS","agent","user","first_name","custom_id","referer","is_cancelled","delete","toFixed","gutter","span","mode","Option","prefix","non_refundable","precision","credit","debit","baseAssignValue","baseForOwn","baseIteratee","module","exports","object","iteratee","result","PatientGroups","getPatientGroup","PATIENT_GROUPS","active_practiceId","patientGroup","reqData","is_active","postAPI","coloumns","onConfirm","deleteObject","okText","cancelText","fields","label","required","INPUT_FIELD","formProp","console","log","displayMessage","SUCCESS_MSG_TYPE","action","method","beforeSubmit","TestFormLayout","DynamicFieldsForm","Meta","Search","MonthPicker","PatientSelection","togglePatientGroupEditing","option","showPatientGroupModal","changeSelectedPatientGroup","selectedPatientGroup","currentPage","getMorePatient","addNewOptionField","form","nextKeys","getFieldValue","setFieldsValue","keys","removeNewOptionField","k","filter","handleChangeOption","selectedOption","custm_col","AdvanceSearchPatient","preventDefault","validateFields","err","values","dob","dob_gte","dob_lte","dob_month","patientData","loadAdvanceSearchPatient","advancedSearch","advanceLoading","patientListData","morePatientList","ADVANCED_SEARCH_PATIENT","morePatients","advanced_option","ADVANCED_SEARCH","sourceList","getPatientListData","searchPatient","getSources","SOURCE","filteredData","sort","a","b","patient_count","PATIENTS_LIST","totalPatients","count","searchvalue","searchString","apiParams","page_size","SEARCH_PATIENT","parseInt","gender","age","group","advancedOptionShow","getFieldDecorator","initialValue","selectedOptionKeys","mapKeys","chooseOption","defaultValue","CHOOSE","FormItems","activePracticePermissions","ViewPatient","onSubmit","layout","Item","htmlType","advancedOption","enterButton","height","buttonStyle","Button","border","float","name","borderLeft","patient","PatientCard","showMobile","PatientPhoneNumber","showEmail","PatientEmailId","setCurrentPatient","footer","onCancel","PermissionDenied","xs","sm","md","lg","xl","xxl","paddingBottom","avatar","image","src","makeFileURL","charAt","description","mobile","hideMobile","email","hideEmail","toUpperCase","HAS_AGE","HAS_DOB","HAS_AADHAR_ID","HAS_EMAIL","GENDER_OPTION","HAS_GENDER","HAS_PINCODE","HAS_STREET","BLOOD_GROUPS","REFERED_BY_AGENT","PatientNotes","notes","loadPatientNotes","PATIENT_NOTES","patientId","defaultValues","Form","renderItem","staff","created_at","MedicalMembership","redirect","Membership","loadMembership","MEMBERSHIP_API","SELECT_FIELD","options","MembershipItem","initilValue","DATE_PICKER","loadProfile","loadMedicalMembership","formChange","PATIENTS_MEMBERSHIP_API","AddOrEditAgent","agentRoles","loadAgentRoles","AGENT_ROLES","roles","SINGLE_IMAGE_UPLOAD_FIELD","PATIENT_PROFILE","PatientProfile","add","addAgent","agentModalVisible","addAgentModalClosed","patientProfile","medicalHistory","hide","ERROR_MSG_TYPE","MEDICAL_MEMBERSHIP_CANCEL_API","extra","EditPatient","to","shape","is_agent","is_approved","referer_code","fontSize","href","onClickHandler","deleteMembership","membership_code","medical_from","medical_to","PatientRow","role","role_data","is_age","diff","referer_data","secondary_mobile_no","landline_no","address","locality","city_data","state_data","country_data","pincode","medical_history_data","intToRGB","hashCode","patient_group_data","onOk","EditPatientDetails","loadMedicalHistory","MEDICAL_HISTORY","history","setFormParams","handleSubmit","file_enable","file_count","on_dialysis","medical_history","patient_group","anniversary","custom_id_pre","file","response","image_path","removeEmpty","putAPI","match","toggleWebCam","webCamState","getImageandUpload","fieldKey","FormData","append","FILE_UPLOAD_BASE64","onChangeValue","getState","getCity","onChangeCheckbox","changeFormType","selectedFormType","handleRelation","relation_text","handleNumberChange","number","numberValidation","membership","countrylist","stateList","cityList","country","BLOOD_GROUP_CONFIG_PARAM","PATIENT_SOURCE_CONFIG_PARAM","SMS_LANGUAGE_CONFIG_PARAM","FAMILY_RELATION_CONFIG_PARAM","GENDER_CONFIG_PARAM","changeRedirect","getCountry","loadPatientData","getPatientMembership","loadConfigParameters","COUNTRY","STATE","CITY","patientDetails","redirectVar","okType","patientDelete","formItemLayout","labelCol","wrapperCol","historyOption","historyItem","patientGroupOption","patientGroupItem","membershipOption","membershipItem","singleUploadprops","makeURL","FILE_UPLOAD_API","headers","authorization","info","status","fileList","message","success","error","goBack","placement","trigger","content","onDeletePatient","valuePropName","maxWidth","Math","random","WebCamField","getScreenShot","rules","validateStatus","help","errorMsg","replace","showSearch","optionFilterProp","language","activePracticeData","aadhar_id","colon","PATIENT_AGE","min","max","blood_group","family_relation","RELATION","attendee","city","paddingTop","defaultChecked","isNaN","Appointment","appointments","practice_doctors","procedure_category","treatmentNotes","practice_staff","editAppointment","deleteAppointment","loadProcedureCategory","loadDoctors","loadTreatmentNotes","appointmentid","loadAppointment","loadAllAppointments","APPOINTMENT_API","ALL_APPOINTMENT_API","practice","PROCEDURE_CATEGORY","PRACTICESTAFF","usersdata","DOCTORS_ROLE","doctor","EMR_TREATMENTNOTES","doctors","treatmentNote","schedule_at","slot","category","category_data","checked","notify_via_email","notify_via_sms","EditAppointment","AddAppointment","allowAllPermissions","scroll","x","Sider","PatientSider","onHotKeyInner","keyNm","keyName","INNER_KEYS_HOTKEYS","onKeyDown","collapsible","collapsed","hideSidePanel","background","ItemGroup","PatientAppointments","PatientCommunications","PatientBookings","PatientVitalSigns","PatientClinicalNotes","PatientTreatmentPlans","PatientCompletedProcedure","PatientFiles","PatientPrescriptions","PatientTimeline","PatientLabOrders","PatientInvoices","PatientReturns","PatientPayments","PatientLedger","__rest","s","t","indexOf","getOwnPropertySymbols","propertyIsEnumerable","_classNames2","_props$color","children","pending","dot","restProps","itemClassName","dotClassName","borderColor","test","defaultProps","_toConsumableArray","arr","Array","isArray","arr2","_arrayWithoutHoles","iter","from","_iterableToArray","_nonIterableSpread","Timeline","renderTimeline","_a","_a$pending","pendingDot","reverse","pendingNode","classString","pendingItem","timeLineItems","toArray","getPositionCls","ele","idx","truthyItems","itemsCount","lastCls","items","pendingClass","readyClass","Steps","renderSteps","iconPrefix","icons","finish","Step","checkboxOption","changeFilters","filterParams","selectedFiltersIntermediate","checkAllFilters","loadTimeline","onCheckAllFiltersChange","queryParams","practice_id","showAllClinic","PATIENT_TIMELINE_API","lastDate","timelineData","checkList","sort_date","date","allCheckList","onCheckAllTimelineCard","checkedTimelineCards","indeterminate","checkAll","toggleTimelineCheckbox","returnObj","checkedList","keysList","flag","printCaseSheet","msg","startLoadingMessage","reqObj","timeline","PATIENT_TIMELINE_PDF","stopLoadingMessage","open","BACKEND_BASE_URL","report","backgroundImage","progressDot","direction","hoverable","bodyStyle","chief_complaints","split","CUSTOM_STRING_SEPERATOR","observations","investigations","diagnosis","timelineClinicalNote","practice_data","doctor_data","calendar_colour","paddingLeft","timelineAppointmentCard","file_type","alt","timelineFilesCard","procedure","proc","inventory","invoice_id","payments_data","timelineInvoiceCard","temperature","temperature_part","blood_pressure_up","blood_pressure_down","timelineVitalSignCard","drugs","drug","timelinePrescriptionCard","payment_id","timelinePaymentCard","offsetTop","marginLeft","borderRadius","dateTimeStamp","treatment_plans","timelineProcedureCard","timelineTreatmentPlanCard","timelineItem","StyleInjector","_Component","componentDidMount","css","head","querySelector","textContent","appendStyle","componentWillUnmount","getElementById","parentNode","lightboxStyles","imageBackgroundColor","fill","viewBox","xmlns","d","zoomed","toggleZoom","toggleRotate","onClose","enableDownload","enableZoom","enableRotate","Image","_temp","_len","args","_key","handleOnLoad","handleOnContextMenu","event","contextMenu","_props","handleDoubleClick","onLoad","onDoubleClick","onContextMenu","Lightbox","move","y","moveStart","rotationDeg","handleKeyDown","keyCode","getCoordinatesIfOverImg","point","changedTouches","dim","contentEl","getBoundingClientRect","clientX","left","clientY","handleMouseDownOrTouchStart","touches","coords","prev","handleMouseMoveOrTouchMove","handleMouseUpOrTouchEnd","addEventListener","removeEventListener","_this2","medium","large","hideDownload","hideZoom","showRotate","_props$imageBackgroun","_state","onMouseDown","onMouseUp","onMouseMove","onTouchStart","onTouchEnd","onTouchMove","el","transform","WebkitTransform","MsTransform","_default","modalOpen","toggleModal","small","smallSrcSet","cursor","maxHeight","srcSet","loadMailedFiles","files","loadMoreFiles","mailed","PATIENT_MAILEDFILES","filterTags","filterSearchTag","showModal","filesData","handleCancel","tags","showAddModal","selectedFiles","selectedTags","showAddMedicalModel","medicalCertificate","mailedfiles","loadMedicalCertificate","lastPatient","newDate","newData","tag","notag","PATIENT_FILES","EMR_FILETAGS","loadMoreCertificate","MEDICAL_CERTIFICATE_API","ALL_MEDICAL_CERITICATE_API","selected","file_tags","MEDICAL_CERTIFICATE_PDF","PatientFilesForm","MULTI_SELECT_FIELD","formProps","triggerAddModal","tagsMenu","boxShadow","listStyle","paddingInlineStart","tagsCompleteToggle","filesWithTags","borderStyle","defaultFields","overlay","paddingRight","borderRight","backgroundSize","filesCompleteToggle","deleteFile","patient_data","grid","actions","loadPDF","deleteMedicalCertificate","excused_duty_from","excused_duty_to","togglePatientListModal","TabPane","tabLists","tabResourcesAPI","EMR_COMPLAINTS","EMR_OBSERVATIONS","EMR_DIAGNOSES","EMR_INVESTIGATIONS","EMR_MEDICATION","AddClinicNotesDynamic","setInitialData","initialData","editClinicNotes","addValues","medication","loadRequiredResources","API","newResources","resourceList","filteredResourceList","filterStrings","tab","remove","changeValues","prevsOption","resourceAddModal","searchValues","searchStrings","filterValues","filteredItemOfGivenType","validateFieldsAndScroll","Complaints","field","Investigations","Diagnoses","Notes","Observations","selectedDoctor","selectedDate","isValid","PATIENT_CLINIC_NOTES_API","changeTab","selectDoctor","practiceDoctors","selectedTab","keysObject","ResourceAddForm","validateTrigger","whitespace","onFocus","offsetBottom","allowClear","tabList","block","Modal","PatientClinicNotes","clinicNotes","loadClinicNotes","editClinicNotesData","CLINIC_NOTES_PDF","exact","path","route","clinicNote","marginTop","deleteClinicNote","Divider","Header","PatientHeader","refreshWallet","textSize","ghost","slice","toggleShowAllClinic","checkedChildren","unCheckedChildren","zIndex","grand_total","valueStyle","fontWeight","tile","refundable_amount","patientSettingMenu","AddPatient","maskClosable","centered","closable","listModalVisible","right","PatientCommunicationSetting","onChanged","medicine_till","follow_up_date","saving","parient_communication_history","loadCommunication","PATIENT_COMMUNICATION_HISTORY_API","user_sms","sms_enabled","SMS_ENABLE","isSMS","email_enabled","EMAIL_ENABLE","isEmail","bithday_sms_enabled","BIRTHDAY_SMS_ENABLE","isBirth_SMS","sms_enable","email_enable","birthday_sms_email","dashed","PatientCommunication","AddorEditPatientVitalSigns","vitalSign","editVitalSign","editformProp","pulse","NUMBER_FIELD","follow","weight","resp_rate","creatinine","haemoglobin","urea","uric_acid","VITAL_SIGNS_API","PatientVitalSign","deleteVitalSign","loadVitalsigns","editObject","vitalsign","VITAL_SIGN_PDF","bottom","tickFormatter","tickCount","domain","dataMin","abs","dataMax","strokeDasharray","labelFormatter","stroke","fillOpacity","strokeWidth","verticalAlign","x1","y1","x2","y2","offset","stopColor","stopOpacity","loadInvoices","presc","VitalSignFooter","AddorEditDynamicCompletedTreatmentPlans","calculateItem","_id","getFieldsValue","tableFormValues","addNotes","removeTreatment","randId","default_notes","editId","editTreatmentPlan","quantity","cost","discount","sendingItem","TREATMENTPLANS_API","loadProcedures","loadingProcedures","tableValues","treatment","filteredItems","consumeRow","TextArea","bordered","bottomPoint","overflowX","itemLayout","PatientCompletedProcedures","treatmentPlans","completedTreatmentPlans","incompletedTreatmentPlans","productMargin","loadTreatmentPlans","editTreatmentPlanData","loadProductMargin","PRODUCT_MARGIN","incompleted","treatmentplan","is_completed","complete","TREATMENTPLANS_PDF","theme","editFields","deleteTreatmentPlans","treatmentFooter","PrescriptionTemplate","addInstructions","changeDurationUnits","removeDrug","formDrugList","removeLabs","addedLabs","formLabList","addLabs","WARNING_MSG_TYPE","addTemplate","prevLabs","prevAddedLabs","labs","lab","prevDrugs","prevAddedDrugs","addedDrugs","advice_data","removeTemplates","formTemplateList","dosage","does","duration_type","duration_unit","duration","frequency","does_frequency","instruction","food_time","after_food","before_food","advice","drugIitem","prescriptionTemplate","PRESCRIPTION_TEMPLATE","handleAddFields","loadDrugList","drugList","labList","loadPrescriptionTemplate","deletePrescriptionTemplate","loadLabList","LABTEST_API","item_type","DRUG","Drugs","item_name","INVENTORY_ITEM_API","formItemLayoutWithOutLabel","formItems","drugTableColumns","DOSE_REQUIRED","DURATIONS_UNIT","timing","instructions","labTablecolums","container","addDrug","maintain_inventory","renderRoute","AddorEditDynamicPatientPrescriptions","drugItem","PRESCRIPTIONS_API","editPrescription","prescription","drug_catalog","loadPrescriptions","loadDrugCatalog","editPrescriptionData","deletePrescriptions","nextPrescriptionPage","PRESCRIPTION_PDF","DRUG_CATALOG","strength","prescriptonFooter","AddorEditDynamicTreatmentPlans","selectedTreatments","submitCompleteTreatment","treatmentKeys","treatmentObj","TREATMENTPLANS_MARK_COMPLETE_API","treatmentCompleteToggle","AddPatientLabOrders","removeTests","lab_test","loadLabs","coloums","twoToneColor","payments","tableFormFields","batch","Addinvoicedynamic","selectedDefaultDate","loadEditInvoiceData","invoice","editInvoice","procedure_data","PROCEDURES","changeNetPrice","stocks","itemBatches","stock_quantity","batch_number","unit","batchObj","selectedBatch","inventory_item_data","INVENTORY","selectOption","offers","newTableFormValues","formValue","unit_cost","taxes","tax","retail_without_tax","finalTableFormValues","dateValue","selectBatch","addPrescription","drug_item","selectedPrescriptions","promo_code","promoCode","discount_type","saveLoading","SINGLE_INVOICE_API","CREATE_OR_EDIT_INVOICES","addItemThroughQR","loadingQr","qrSplitted","SEARCH_THROUGH_QR","randomId","row","item_type_stock","item_stock","stock","qrValue","qr","setQrValue","searchItem","loadInventoryItemList","PRESCRIPTIONS","setFields","newTableValues","tableObj","totalTaxAmount","initialDiscount","initialDiscountType","offer","taxid","taxes_list","taxObj","tax_value","totalWithoutTaxWithDiscount","total_unit_cost","retail_price","checkPromoCode","applyPromoCodeDiscounts","discountValue","valueToSet","discountApplied","loadLoyaltyDiscount","OFFERS","onChangeOption","tempArr","onChangeOffer","selectedOffer","loyaltyDiscount","onchangeDiscountSimple","retailPrice","enterPromoCode","calculateGrandTotalWithoutDiscount","grandTotal","promoCodeCheckLoading","amount","CHECK_PROMO_CODE","appliedPromoCodeDiscount","removePromoCode","classType","maxQuantityforConsume","tempValues","loadTaxes","loadingInventory","drugItems","paramsApi","UNPAID_PRESCRIPTIONS","TAXES","expiry_date","code","addonAfter","CURRENCY_TYPE","align","tip","onSearch","total_quantity","previous","lineHeight","reduce","parseFloat","AddReturnInvoice","bank","return_mode","staff_data","with_tax","return_with_tax","cash_return","advance_value","returnCashAvailable","procedure_inv","inventory_inv","INVOICE_RETURN_API","onChangeHandle","calculateReturnCashAvailable","totalAmountPaid","pay_amount","pendingPayment","worthOfReturningItems","taxAllowed","units","payment","InvoiceReturnModal","handleSubmitReturnInvoice","CANCELINVOICE_VERIFY_OTP","returnIncoiceVisible","returnInvoiceData","returnInvoiceClose","otpSent","CANCELINVOICE_RESENT_OTP","sendOTP","EditReturnModal","handleSubmitEditInvoice","editIncoiceVisible","editInvoiceData","editInvoiceClose","CancelReturnModal","handleSubmitCancelInvoice","cancelIncoiceVisible","deleteInvoice","invoiceId","SINGLE_INVOICES_API","cancelInvoiceClose","INVOICE_PDF_API","returnModelOpen","OTP_DELAY_TIME","CANCELINVOICE_GENERATE_OTP","cancelModalOpen","invoices","loadMoreInvoice","INVOICES_API","procedures","taxesdata","AddInvoicedynamic","banner","showIcon","InvoiceCard","invoiceFooter","tableObjects","reservation","medicinesPackages","reservation_data","medicines","final_price","price","mapper","bed_package","seat_type","editModelOpen","suffix","discount_value","AddPaymentForm","loadEditPyament","editPayment","addedInvoicesId","addedInvoice","totalPayingAmount","inv","invoice_data","pay_amount_wallet","calculateInvoicePayments","setPaymentAmount","addedInvoiceId","loadAvailableAdvance","AVAILABLE_ADVANCE","availableAdvance","loadPaymentModes","PAYMENT_MODES","paymentModes","selectedPaymentMode","invoicesToLoad","invoiceLoading","invoicesList","addInvoiceToPayments","is_pending","foundInvoice","invoicePayments","removeInvoiceToPayments","payable","totalPayingFromAdvanceAmount","invoicePayableAmount","advanceToBeSent","totalPayableAmount","setPaymentFromAdvanceAmount","changeSelectedPaymentMode","changeNotes","selectDate","newPayment","is_advance","totalAmountPayingFromAdvance","consumedInvoices","availableAdvancePayments","maxConsumeAmount","receivedPayIdFromRazorPay","BULK_PAYMENT_API","invoiceArray","location","search","pairValueArray","substr","patientObj","RAZORPAY_KEY","handler","paymentId","razorpay_payment_id","ACCEPT_PAYMENT","detail","Razorpay","borderBottom","max_allowed","step","paymentHandler","bed_package_price","EditPaymentModal","handleSubmitEditPayment","editPaymentVisible","editPaymentData","editPaymentClose","cancelPaymentVisible","CancelPaymentModal","handleSubmitCancelPayment","deletePayment","cancelPaymentClose","SINGLE_PAYMENT_API","loadPayments","PATIENT_PAYMENTS_API","PAYMENT_PDF","paymentmodes","PaymentCard","advancePay","PaymentFooter","rowKey","ReturnInvoices","RETURN_INVOICE_PDF_API","cancelReturnIncoiceVisible","editReturnInvoice","return_id","returnInvoiceId","deleteReturnInvoice","cancelReturnInvoiceClose","handleSubmitCancelReturnInvoice","returnInvoices","loadReturnInvoices","loadMoreReturnInvoice","SINGLE_RETURN_API","return_value","patientInvoiceDetailsInString","invoiceObj","invoiceDetailsString","trim","patientPaymentDetailsInString","paymentObj","paymentDetailsString","patientReturnInvoiceDetailsInString","payObj","PatientLedgers","loadPatientLedger","loadingLedger","PATIENT_LEDGER","ledgerData","balance","totalCredit","totalDebit","ledgerEntry","ledger_type","type_id","details","return","return_pay","selectedList","PatientMerge","searchPatientString","removePatient","handlePatientSelect","mergePatient","patient_from","patient_to","MERGE_PATIENTS","defaultActiveFirstOption","showArrow","filterOption","handleChange","onSelect","PatientRequiredNoticeCard","PatientMedicalCertificate","handleCheck","excused_duty_checked","handleLighDutyCheck","fit_light_duty_checked","handleAttendanceCheck","attendance_checked","handleChangeStart","startDate","timeString","proof_attendance_from","excused_duty","fit_light_duty","proof_attendance","fit_light_duty_from","fit_light_duty_to","proof_attendance_date","proof_attendance_to","valid_court","invalid_court","no_mention","endDate","Date","days","handleChangeEnd","radioOption","NOTES","use12Hours","BedBookingForm","loadPackages","BED_PACKAGES","packages","loadDiseases","DISEASE_LIST","diseases","patientList","ptr","checkBedStatus","handleRoomType","calculateTotalAmount","from_date","to_date","pkgObj","no_of_days","CHECK_SEAT_AVAILABILITY","availabilitySeatTatkal","TATKAL","availabilitySeatNormal","NORMAL","paid","total_price","total_tax","rest_diseases","report_upload","BOOK_SEAT","handleClick","prevSate","payAmount","bedPkg","medicinePkg","total_medicine_price","normal_price","normal_tax_value","price_with_tax","tatkal_price","tatkal_tax_value","medicinePackage","medicineItem","choosePkg","handleMedicineSelect","changeDiscount","newTableValue","loadMedicinePackages","MEDICINE_PACKAGES","BOOKING_TYPE","is_or_not","available","room","input","Content","BookingHome","loadBedBookingReport","bedBookingReports","nextReport","BED_BOOKING_REPORTS","patients","bedBooking","PatientHome","loadPatientPendingAmount","PATIENT_PENDING_AMOUNT","getCommonSettings","nextProps","nextContext","currentPathLocation","foundFlag","ROUTES_TO_HIDE_PATIENT_SIDE_PANEL","matchPath","pathname","strict","redirectUrl","urlArray","splice","saveCommonSettings","MergePatients","WebAdmin"],"mappings":"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","file":"static/js/10.9ff795ad.chunk.js","sourcesContent":["import jsPDF from 'jspdf';\nimport \"jspdf-autotable\";\nimport moment from \"moment\";\n\nexport const exportToExcel = function (columns, dataArray, fileName = \"download\") {\n    var str = makeCSVString(columns, dataArray);\n    downloadCSV(str, fileName)\n}\n\nexport const makeCSVString = function (columns, dataArray, printColumn = true) {\n    var str = '';\n    var line = [];\n    if (printColumn) {\n        columns.forEach(function (column) {\n            line.push(column);\n        });\n        str += line.join(',');\n        str += '\\r\\n';\n    }\n    dataArray.forEach(function (dataRow) {\n        line = [];\n        columns.forEach(function (column) {\n            if (dataRow[column])\n                line.push(dataRow[column]);\n            else\n                line.push('--');\n        });\n\n        str += line.join(',');\n        str += '\\r\\n';\n    });\n    return str;\n}\n\nexport const downloadCSV = function (str, fileName) {\n    var fName = fileName + '.csv';\n    var cCode, bArr = [];\n    bArr.push(255, 254);\n    for (var i = 0; i < str.length; ++i) {\n        cCode = str.charCodeAt(i);\n        bArr.push(cCode & 0xff);\n        bArr.push(cCode / 256 >>> 0);\n    }\n\n    var blob = new Blob([new Uint8Array(bArr)], {type: 'text/csv;charset=UTF-16LE;'});\n    if (navigator.msSaveBlob) {\n        navigator.msSaveBlob(blob, fName);\n    } else {\n        var link = document.createElement(\"a\");\n        if (link.download !== undefined) {\n            var url = window.URL.createObjectURL(blob);\n            link.setAttribute(\"href\", url);\n            link.setAttribute(\"download\", fName);\n            link.style.visibility = 'hidden';\n            document.body.appendChild(link);\n            link.click();\n            document.body.removeChild(link);\n            window.URL.revokeObjectURL(url);\n        }\n    }\n    // window.open(\"data:text/csv;charset=utf-8,\" + encodeURI(str));\n}\n\nexport const exportToPDF = function (columns, dataArray, fileName, printColumn = true) {\n    let summary = [];\n    var pdf = new jsPDF('p', 'mm', 'a4');\n    addPDFHeader(pdf);\n    // var rowArray = dataArray;\n    // var summaryColoumns = [\n    //     {title: \"Section\", dataKey: \"section\"},\n    // ];\n    // summaryColoumns.push({title: \"TOTAL\", dataKey: \"total\"});\n    // var finalSummRow = {};\n    // finalSummRow.section = 'TOTAL';\n    // finalSummRow.total = 0;\n    //\n    // summary.push(finalSummRow);\n\n\n    var rows = Object.create(dataArray);\n    pdf.autoTable(columns, rows, {\n        margin: {top: 35},\n        startY: pdf.autoTableEndPosY() + 20,\n        headerStyle: {\n            overflow: 'linebreak'\n        },\n        bodyStyles: {\n            overflow: 'linebreak'\n        }\n    });\n    addPDFFooter(pdf);\n    pdf.save(fileName+'.pdf')\n}\n\nfunction addPDFHeader(pdf) {\n    var locationLogo = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABAAAAAEhCAYAAAGW0uIhAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QzRDOTJGNzhGNTNBMTFFN0IzMkQ4NzVGMjlDQzg4OTQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QzRDOTJGNzlGNTNBMTFFN0IzMkQ4NzVGMjlDQzg4OTQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpDNEM5MkY3NkY1M0ExMUU3QjMyRDg3NUYyOUNDODg5NCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpDNEM5MkY3N0Y1M0ExMUU3QjMyRDg3NUYyOUNDODg5NCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PhLpaeAAAKXoSURBVHja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\";\n    // pdf.addImage(locationLogo, 'PNG', 15, 5, 36, 11);\n    pdf.line(10, 20, 200, 20);\n}\n\n\nfunction addPDFFooter(pdf) {\n    pdf.line(10, 270, 200, 270);\n    pdf.setFontSize(8);\n    pdf.text(10, 275, 'This is a computer generated report.');\n}\n","import React from \"react\";\nimport {Button, Col, Icon, Input, Row, Table, Tag} from \"antd\";\nimport {exportToExcel, exportToPDF} from \"../../utils/export\";\nimport moment from \"moment\";\nimport Highlighter from 'react-highlight-words';\n\nexport default class CustomizedTable extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...props,\n            searchText: '',\n        };\n        this.excelExport = this.excelExport.bind(this);\n        this.pdfExport = this.pdfExport.bind(this);\n    }\n\n    componentWillReceiveProps(newProps) {\n        if (newProps.columns != this.state.columns || newProps.dataSource != this.state.dataSource || newProps.loading != this.state.loading) {\n            this.setState({...newProps});\n        }\n    }\n\n    pdfExport() {\n        let that = this;\n        let excelColumns = [];\n            that.state.columns.forEach(function(item) {\n                if(!item.hideExport)\n                    excelColumns.push({title: item.title, dataKey: item.title})\n            });\n        let dataArrayForExcel = [];\n        that.state.dataSource.forEach(function (dataRow,index) {\n            let dataObjectToPush = {};\n            that.state.columns.forEach(function (column) {\n                if (column.export) {\n                    dataObjectToPush[column.title] = column.export(dataRow[column.dataIndex], dataRow,index);\n                } else {\n                    dataObjectToPush[column.title] = dataRow[column.dataIndex];\n                }\n            });\n            dataArrayForExcel.push(dataObjectToPush);\n        });\n        exportToPDF(excelColumns, dataArrayForExcel, \"Export\" + moment(), true);\n    }\n\n    excelExport() {\n        let that = this;\n        let excelColumns = [];\n        that.state.columns.forEach(function(item) {\n            if(!item.hideExport)\n                excelColumns.push(item.title)\n        });\n        let dataArrayForExcel = [];\n        that.state.dataSource.forEach(function (dataRow,index) {\n            let dataObjectToPush = {};\n            that.state.columns.forEach(function (column) {\n                if (column.export) {\n                    dataObjectToPush[column.title] = column.export(dataRow[column.dataIndex], dataRow,index);\n                } else {\n                    dataObjectToPush[column.title] = dataRow[column.dataIndex];\n                }\n            });\n            dataArrayForExcel.push(dataObjectToPush);\n        });\n        exportToExcel(excelColumns, dataArrayForExcel, \"Export\" + moment());\n    }\n\n    getColumnSearchProps = dataIndex => ({\n        filterDropdown: ({setSelectedKeys, selectedKeys, confirm, clearFilters}) => (\n            <div style={{padding: 8}}>\n                <Input\n                    ref={node => {\n                        this.searchInput = node;\n                    }}\n                    placeholder={`Search ${dataIndex}`}\n                    value={selectedKeys[0]}\n                    onChange={e => setSelectedKeys(e.target.value ? [e.target.value] : [])}\n                    onPressEnter={() => this.handleSearch(selectedKeys, confirm)}\n                    style={{width: 188, marginBottom: 8, display: 'block'}}\n                />\n                <Button\n                    type=\"primary\"\n                    onClick={() => this.handleSearch(selectedKeys, confirm)}\n                    icon=\"search\"\n                    size=\"small\"\n                    style={{width: 90, marginRight: 8}}\n                >\n                    Search\n                </Button>\n                <Button onClick={() => this.handleReset(clearFilters)} size=\"small\" style={{width: 90}}>\n                    Reset\n                </Button>\n            </div>\n        ),\n        filterIcon: filtered => (<Icon type=\"search\" style={{color: filtered ? '#1890ff' : undefined}}/>),\n        onFilter: (value, record) =>\n            record[dataIndex] != null ? record[dataIndex]\n                .toString()\n                .toLowerCase()\n                .includes(value.toLowerCase()) : '',\n        onFilterDropdownVisibleChange: visible => {\n            if (visible) {\n                setTimeout(() => this.searchInput.select());\n            }\n        },\n        render: text => (\n            <Highlighter\n                highlightStyle={{backgroundColor: '#ffc069', padding: 0}}\n                searchWords={[this.state.searchText]}\n                autoEscape\n                textToHighlight={text ? text.toString() : ''}\n            />\n        ),\n    });\n    handleSearch = (selectedKeys, confirm) => {\n        confirm();\n        this.setState({searchText: selectedKeys[0]});\n    };\n\n    handleReset = clearFilters => {\n        clearFilters();\n        this.setState({searchText: ''});\n    };\n\n    render() {\n        let that = this;\n        const columns = this.state.columns.map(item => {\n                if (!item.render)\n                    return {...item, ...that.getColumnSearchProps(item.dataIndex)}\n                return {...item};\n            }\n        )\n        return <div>\n            {this.props.hideReport ? null :\n                <Row>\n                    <Col>\n                        <Button.Group size=\"small\">\n                            <Button disabled={this.state.loading} type=\"primary\" onClick={this.excelExport}><Icon\n                                type=\"file-excel\"/> Excel</Button>\n                            <Button disabled={this.state.loading} type=\"primary\" onClick={this.pdfExport}><Icon\n                                type=\"file-pdf\"/> PDF</Button>\n                        </Button.Group>\n                    </Col>\n                </Row>}\n            <Row>\n                <Table pagination={{\n                    position: 'both',\n                    pageSizeOptions: ['10', '20', '30', '40', '50', '100'],\n                    showSizeChanger: true,\n                    showQuickJumper: true,\n                    size: \"small\",\n                    showTotal: function (total, range) {\n                        return <Tag>Showing <b>{range[0]}</b> to <b>{range[1]}</b> of <b>{total}</b> items</Tag>\n                    }\n                }} {...this.state} columns={columns}/>\n            </Row>\n        </div>\n    }\n\n}\n","import {Button, Row, Spin} from \"antd\";\nimport React from \"react\";\n\nexport default class InfiniteFeedLoaderButton extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            extraLoadingLabel: '',\n        }\n    }\n\n    startLoading = () => {\n        if (this.props.loaderFunction) {\n            this.props.loaderFunction();\n            this.startMakingExtraLabels();\n        }\n    }\n    startMakingExtraLabels = () => {\n        let that = this;\n        this.setState(function (prevState) {\n            if (prevState.extraLoadingLabel.length > 2) {\n                return {extraLoadingLabel: ''}\n            } else {\n                return {extraLoadingLabel: prevState.extraLoadingLabel + '.'}\n            }\n        }, function () {\n            if (that.props.loading)\n                setTimeout(function () {\n                    that.startMakingExtraLabels();\n                }, 500)\n        })\n    }\n\n    render() {\n        if (this.props.loading) {\n            return <Spin spinning={this.props.loading}>\n                <Row style={{minHeight: 200}}/>\n            </Spin>\n        }\n        if (this.props.hidden) {\n            return <Row>\n                <div style={{textAlign: 'center', margin: '15px 0px'}}>\n                    <small>No More Data Found</small>\n                </div>\n            </Row>\n        }\n        return <Row>\n            <div style={{textAlign: 'center', margin: '15px 0px'}}>\n                <Button type={'primary'} onClick={this.startLoading} loading={this.props.loading}>\n                    {this.props.loading ? 'Loading' + this.state.extraLoadingLabel : 'Load More'}\n                </Button>\n            </div>\n        </Row>\n    }\n}\n","import '../../style/index.less';\nimport './index.less';","function _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nimport * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport RcSwitch from 'rc-switch';\nimport classNames from 'classnames';\nimport omit from 'omit.js';\nimport Wave from '../_util/wave';\nimport Icon from '../icon';\nimport { ConfigConsumer } from '../config-provider';\nimport warning from '../_util/warning';\n\nvar Switch =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Switch, _React$Component);\n\n  function Switch(props) {\n    var _this;\n\n    _classCallCheck(this, Switch);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Switch).call(this, props));\n\n    _this.saveSwitch = function (node) {\n      _this.rcSwitch = node;\n    };\n\n    _this.renderSwitch = function (_ref) {\n      var _classNames;\n\n      var getPrefixCls = _ref.getPrefixCls;\n      var _this$props = _this.props,\n          customizePrefixCls = _this$props.prefixCls,\n          size = _this$props.size,\n          loading = _this$props.loading,\n          _this$props$className = _this$props.className,\n          className = _this$props$className === void 0 ? '' : _this$props$className,\n          disabled = _this$props.disabled;\n      var prefixCls = getPrefixCls('switch', customizePrefixCls);\n      var classes = classNames(className, (_classNames = {}, _defineProperty(_classNames, \"\".concat(prefixCls, \"-small\"), size === 'small'), _defineProperty(_classNames, \"\".concat(prefixCls, \"-loading\"), loading), _classNames));\n      var loadingIcon = loading ? React.createElement(Icon, {\n        type: \"loading\",\n        className: \"\".concat(prefixCls, \"-loading-icon\")\n      }) : null;\n      return React.createElement(Wave, {\n        insertExtraNode: true\n      }, React.createElement(RcSwitch, _extends({}, omit(_this.props, ['loading']), {\n        prefixCls: prefixCls,\n        className: classes,\n        disabled: disabled || loading,\n        ref: _this.saveSwitch,\n        loadingIcon: loadingIcon\n      })));\n    };\n\n    warning('checked' in props || !('value' in props), 'Switch', '`value` is not validate prop, do you mean `checked`?');\n    return _this;\n  }\n\n  _createClass(Switch, [{\n    key: \"focus\",\n    value: function focus() {\n      this.rcSwitch.focus();\n    }\n  }, {\n    key: \"blur\",\n    value: function blur() {\n      this.rcSwitch.blur();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(ConfigConsumer, null, this.renderSwitch);\n    }\n  }]);\n\n  return Switch;\n}(React.Component);\n\nexport { Switch as default };\nSwitch.__ANT_SWITCH = true;\nSwitch.propTypes = {\n  prefixCls: PropTypes.string,\n  // HACK: https://github.com/ant-design/ant-design/issues/5368\n  // size=default and size=large are the same\n  size: PropTypes.oneOf(['small', 'default', 'large']),\n  className: PropTypes.string\n};","import React from \"react\";\nimport CustomizedTable from \"../../common/CustomizedTable\";\nimport {getAPI, interpolate} from \"../../../utils/common\";\nimport {AGENT_WALLET, MY_AGENTS, WALLET_LEDGER, WALLET_LEDGER_SUM} from \"../../../constants/api\";\nimport {Card, Col, DatePicker, Icon, Row, Select, Statistic, Typography} from \"antd\";\nimport moment from \"moment\";\nimport InfiniteFeedLoaderButton from \"../../common/InfiniteFeedLoaderButton\";\n\nconst {Text} = Typography;\nexport default class PatientWalletLedger extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ledger: [],\n            ledgerDetails:{},\n            loading: false,\n            walletAmount: null,\n            selectedStartDate: moment().subtract(1, 'month'),\n            selectedEndDate: moment(),\n            agents: [],\n            selectedAgents: []\n        }\n    }\n\n    componentDidMount() {\n        this.loadData();\n        this.loadPatientWallet();\n        this.loadAgents();\n        this.loadSumData();\n    }\n\n    loadPatientWallet = () => {\n        let that = this;\n        if (this.props.currentPatient && this.props.currentPatient.id) {\n            let successFn = function (data) {\n                if (data.length)\n                    that.setState({\n                        walletAmount: data[0]\n                    })\n            }\n            let errorFn = function () {\n\n            }\n            getAPI(interpolate(AGENT_WALLET, [this.props.currentPatient.id]), successFn, errorFn);\n        } else {\n            this.setState({\n                pendingAmount: null\n            })\n        }\n    }\n    loadData = (page = 1) => {\n        let that = this;\n        this.setState({\n            loading: true\n        })\n        let successFn = function (data) {\n            if (data.current == 1) {\n                that.setState({\n                    ledger: data.results,\n                    loading: false,\n                    nextPage: data.next\n                })\n            } else {\n                that.setState(function (prevState) {\n                    return {\n                        ledger: [...prevState.ledger, ...data.results],\n                        loading: false,\n                        nextPage: data.next\n                    }\n                })\n            }\n        }\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            })\n        }\n        let params = {\n            page,\n            start: this.state.selectedStartDate.startOf('day').format(),\n            end: this.state.selectedEndDate.endOf('day').format(),\n            agents: this.state.selectedAgents.join(',')\n        }\n        if (this.state.selectedAgents)\n            params.agents = this.state.selectedAgents.join(',');\n        getAPI(interpolate(WALLET_LEDGER, [this.props.currentPatient.id]), successFn, errorFn, params);\n    }\n    loadSumData = (page = 1) => {\n        let that = this;\n\n        let successFn = function (data) {\n                that.setState({\n                    ledgerDetails: data,\n                    nextPage: data.next\n                })\n\n        }\n        let errorFn = function () {\n        }\n        let params = {\n            page,\n            start: this.state.selectedStartDate.format(),\n            end: this.state.selectedEndDate.format(),\n            agents: this.state.selectedAgents.join(',')\n        }\n        if (this.state.selectedAgents)\n            params.agents = this.state.selectedAgents.join(',');\n        getAPI(interpolate(WALLET_LEDGER_SUM, [this.props.currentPatient.id]), successFn, errorFn, params);\n    }\n    loadAgents() {\n        var that = this;\n        let successFn = function (data) {\n            that.setState({\n                agents: data,\n            })\n        };\n        let errorFn = function () {\n        };\n        let apiParams = {\n            agent: true,\n            pagination: false\n        }\n        getAPI(interpolate(MY_AGENTS, [this.props.currentPatient.id]), successFn, errorFn, apiParams);\n    }\n\n    changeExpenseFilters = (type, value) => {\n        let that = this;\n        this.setState({\n            [type]: value\n        }, function () {\n            that.loadData(1);\n        })\n    }\n\n    render() {\n        let columns = [{\n            title: 'Date',\n            dataIndex: 'created_at',\n            key: 'created_at',\n            render: (value) => moment(value).format('LLL')\n        }, {\n            title: 'Patient',\n            dataIndex: 'received_from',\n            key: 'received_from',\n            render: (value, record) => value ? <Text>{value.user.first_name} ({value.custom_id})</Text> : '--'\n        }, , {\n            title: 'Refered By',\n            dataIndex: 'received_from.user.referer_data',\n            key: 'received_from.user.referer_data',\n            render: (value, record) => value && value.referer ? <Text>{value.referer.first_name} ({value.custom_id})</Text> : '--'\n        }, {\n            title: 'Ledger Comment',\n            dataIndex: 'comments',\n            key: 'comments',\n            render: (value, record) => record.is_cancelled ? <Text delete>{value}</Text> : value\n        },\n            //     {\n            //     title: 'Amount Type',\n            //     dataIndex: 'amount_type',\n            //     key: 'amount_type',\n            //     render: (value, record) => record.is_cancelled ? <Text delete>{value}</Text> : value\n            // },\n            {\n                title: 'Cr/Dr',\n                dataIndex: 'ledger_type',\n                key: 'ledger_type',\n                render: (value, record) => record.is_cancelled ? <Text delete>{value}</Text> : value\n            }, {\n                title: 'Amount',\n                dataIndex: 'amount',\n                key: 'amount',\n                render: (value, record) => record.is_cancelled ?\n                    <Text delete>{value.toFixed(2)}</Text> : value.toFixed(2)\n            }];\n        return <div>\n            <Card title={\"Wallet Ledger\"}>\n                <Row gutter={16} style={{marginBottom: 10}}>\n                    <Col span={2} style={{textAlign: \"right\"}}>\n                        <b> Agents</b>\n                    </Col>\n                    <Col span={4}>\n                        <Select style={{width: '100%'}} value={this.state.selectedAgents}\n                                mode=\"multiple\"\n                                disabled={this.state.loading}\n                                onChange={(value) => this.changeExpenseFilters('selectedAgents', value)}>\n                            {this.state.agents.map(item => <Select.Option\n                                value={item.id}>{item.user.first_name}</Select.Option>)}\n                        </Select>\n                    </Col>\n                    {/*<Col span={2} style={{textAlign: \"right\"}}>*/}\n                    {/*    <b> Payment Modes</b>*/}\n                    {/*</Col>*/}\n                    {/*<Col span={4}>*/}\n                    {/*    <Select style={{width: '100%'}} value={this.state.selectedPaymentMode}*/}\n                    {/*            disabled={this.state.loading}*/}\n                    {/*            onChange={(value) => this.changeExpenseFilters('selectedPaymentMode', value)}>*/}\n                    {/*        <Select.Option value={null}>--ALL PAYMENT MODE--</Select.Option>*/}\n                    {/*        {this.state.paymentModes.map(item => <Select.Option*/}\n                    {/*            value={item.id}>{item.mode}</Select.Option>)}*/}\n                    {/*    </Select>*/}\n                    {/*</Col>*/}\n\n                    <Col span={2} style={{textAlign: \"right\"}}>\n                        <b> From</b>\n                    </Col>\n                    <Col span={4}>\n                        <DatePicker value={this.state.selectedStartDate}\n                                    disabled={this.state.loading}\n                                    onChange={(value) => this.changeExpenseFilters('selectedStartDate', value)}/>\n                    </Col>\n                    <Col span={2} style={{textAlign: \"right\"}}>\n                        <b> To</b>\n                    </Col>\n                    <Col span={4}>\n                        <DatePicker value={this.state.selectedEndDate}\n                                    disabled={this.state.loading}\n                                    onChange={(value) => this.changeExpenseFilters('selectedEndDate', value)}/>\n                    </Col>\n                </Row>\n                {this.state.walletAmount ?\n                    <Row style={{textAlign: 'center', marginBottom: 10}}>\n                        {/*<Col span={12}>*/}\n                        {/*    <Statistic title={\"\"} prefix={<Icon type={\"wallet\"}/>}*/}\n                        {/*               value={this.state.walletAmount.refundable_amount}/>*/}\n                        {/*</Col>*/}\n                        <Col span={24}>\n                            <Statistic title={\"Wallet Total\"} prefix={<Icon type={\"wallet\"}/>}\n                                       value={this.state.walletAmount.non_refundable} precision={2}/>\n                        </Col>\n                    </Row> : null}\n                <CustomizedTable dataSource={this.state.ledger} loading={this.state.loading} columns={columns}\n                                 hideReport\n                                 pagination={false}/>\n                <InfiniteFeedLoaderButton loading={this.state.loading}\n                                          hidden={!this.state.nextPage}\n                                          loaderFunction={() => this.loadData(this.state.nextPage)}/>\n                <Row style={{textAlign: 'center', marginBottom: 10}}>\n                    <Col span={8}>\n                        <Statistic title={\"Credit\"} value={this.state.ledgerDetails.credit} precision={2}/>\n                    </Col>\n                    <Col span={8}>\n                        <Statistic title={\"Debit\"} value={this.state.ledgerDetails.debit} precision={2}/>\n                    </Col>\n                    <Col span={8}>\n                        <Statistic title={\"Profit\"} value={this.state.ledgerDetails.credit-this.state.ledgerDetails.debit} precision={2}/>\n                    </Col>\n                </Row>\n            </Card>\n        </div>\n    }\n}","var baseAssignValue = require('./_baseAssignValue'),\n    baseForOwn = require('./_baseForOwn'),\n    baseIteratee = require('./_baseIteratee');\n/**\n * The opposite of `_.mapValues`; this method creates an object with the\n * same values as `object` and keys generated by running each own enumerable\n * string keyed property of `object` thru `iteratee`. The iteratee is invoked\n * with three arguments: (value, key, object).\n *\n * @static\n * @memberOf _\n * @since 3.8.0\n * @category Object\n * @param {Object} object The object to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Object} Returns the new mapped object.\n * @see _.mapValues\n * @example\n *\n * _.mapKeys({ 'a': 1, 'b': 2 }, function(value, key) {\n *   return key + value;\n * });\n * // => { 'a1': 1, 'b2': 2 }\n */\n\n\nfunction mapKeys(object, iteratee) {\n  var result = {};\n  iteratee = baseIteratee(iteratee, 3);\n  baseForOwn(object, function (value, key, object) {\n    baseAssignValue(result, iteratee(value, key, object), value);\n  });\n  return result;\n}\n\nmodule.exports = mapKeys;","import React from \"react\";\nimport {Card, Form, Popconfirm, Row, Divider} from 'antd';\nimport {displayMessage, getAPI, interpolate, postAPI} from \"../../../utils/common\";\nimport {OFFERS, PATIENT_GROUPS} from \"../../../constants/api\";\nimport CustomizedTable from \"../../common/CustomizedTable\";\nimport {INPUT_FIELD, SUCCESS_MSG_TYPE} from \"../../../constants/dataKeys\";\nimport DynamicFieldsForm from \"../../common/DynamicFieldsForm\";\n\nexport default class PatientGroups extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            patientGroup: [],\n            loading: true\n        }\n    }\n\n    componentDidMount() {\n        this.getPatientGroup();\n    }\n\n    getPatientGroup = () => {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                patientGroup: data,\n                loading: false\n            });\n        };\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            })\n\n        };\n        getAPI(interpolate(PATIENT_GROUPS, [this.props.active_practiceId]), successFn, errorFn);\n    }\n\n    deleteObject(record) {\n        let that = this;\n        let reqData = record;\n        reqData.is_active = false;\n        let successFn = function (data) {\n            that.getPatientGroup();\n        }\n        let errorFn = function () {\n        }\n        postAPI(interpolate(PATIENT_GROUPS, [this.props.active_practiceId]), reqData, successFn, errorFn);\n    }\n\n    render() {\n        let that = this;\n        const coloumns = [{\n            title: 'Group Name',\n            dataIndex: 'name',\n            key: 'name'\n        }, {\n            title: 'Patient Count',\n            dataIndex: 'patient_count',\n            key: 'patient_count'\n        }, {\n            title: 'Action',\n            key: 'action',\n            render: (text, record) => (\n                <Popconfirm title=\"Are you sure delete this prescription?\" onConfirm={() => that.deleteObject(record)}\n                            okText=\"Yes\" cancelText=\"No\">\n                    <a>\n                        Delete\n                    </a>\n                </Popconfirm>\n            ),\n        }];\n        const fields = [{\n            label: \"Group Name\",\n            key: \"name\",\n            required: true,\n            type: INPUT_FIELD\n        }]\n        const formProp = {\n            successFn: function (data) {\n                console.log(data);\n                displayMessage(SUCCESS_MSG_TYPE, \"success\")\n                that.getPatientGroup()\n\n            },\n            errorFn: function () {\n\n            },\n            action: interpolate(PATIENT_GROUPS, [this.props.active_practiceId]),\n            method: \"post\",\n            beforeSubmit: function (data) {\n                console.log(data)\n            }\n        }\n        const TestFormLayout = Form.create()(DynamicFieldsForm);\n        return <Row>\n            <TestFormLayout formProp={formProp}\n                            title={\"Patient Groups\"}\n                            fields={fields} {...this.props}/>\n            <Divider/>\n            <CustomizedTable dataSource={this.state.patientGroup} loading={this.state.loading} columns={coloumns}/>\n        </Row>\n    }\n}\n","import React from \"react\";\nimport {\n    Avatar, Input, Card, Col, Icon, InputNumber, Radio, Row, Button, Spin, Modal, Tag,\n    DatePicker, Select, Form, Divider\n} from \"antd\";\nimport {getAPI, interpolate, makeFileURL, postAPI} from \"../../utils/common\";\nimport {\n    PATIENT_GROUPS,\n    SEARCH_PATIENT,\n    PATIENTS_LIST,\n    ADVANCED_SEARCH_PATIENT, SOURCE\n} from \"../../constants/api\";\nimport InfiniteFeedLoaderButton from \"../common/InfiniteFeedLoaderButton\";\nimport PatientGroups from \"./patientGroups/PatientGroups\";\nimport {hideEmail, hideMobile} from \"../../utils/permissionUtils\";\nimport {\n    ADVANCED_SEARCH,\n    BLOOD_GROUPS,\n    HAS_AADHAR_ID,\n    HAS_AGE,\n    HAS_DOB,\n    HAS_EMAIL,\n    HAS_GENDER, HAS_PINCODE, HAS_STREET, REFERED_BY_AGENT, GENDER_OPTION\n} from \"../../constants/hardData\";\nimport {CHOOSE, GENDER} from \"../../constants/dataKeys\";\nimport moment from \"moment\";\nimport filter from \"lodash/filter\";\nimport mapKeys from \"lodash/mapKeys\"\nimport PermissionDenied from \"../common/errors/PermissionDenied\";\n\nconst {Meta} = Card;\nconst Search = Input.Search;\nconst {MonthPicker} = DatePicker;\nlet id = 1;\n\nclass PatientSelection extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            patientListData: [],\n            patientGroup: [],\n            morePatients: null,\n            loading: true,\n            selectedPatientGroup: 'all',\n            advanced_option: ADVANCED_SEARCH,\n            selectedOption: {},\n            // keys:1,\n            sourceList: [],\n            custm_col: 8,\n            advanceLoading: false,\n        };\n        this.getPatientListData = this.getPatientListData.bind(this);\n        this.searchPatient = this.searchPatient.bind(this);\n        this.getMorePatient = this.getMorePatient.bind(this);\n        this.getSources = this.getSources.bind(this);\n    }\n\n    componentDidMount() {\n        this.getPatientListData();\n        this.getPatientGroup();\n        this.getSources();\n    }\n\n    getSources() {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                sourceList: data,\n            })\n        };\n        let errorFun = function () {\n\n        };\n        getAPI(SOURCE, successFn, errorFun);\n    }\n\n\n    getPatientGroup() {\n        let that = this;\n        let successFn = function (data) {\n            let filteredData = data.sort(function (a, b) {\n                return b.patient_count - a.patient_count\n            })\n            that.setState({\n                patientGroup: filteredData,\n            });\n        };\n        let errorFn = function () {\n            that.setState({})\n\n        };\n        getAPI(interpolate(PATIENT_GROUPS, [this.props.active_practiceId]), successFn, errorFn);\n    }\n\n    getPatientListData() {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                patientListData: data.results,\n                morePatients: data.next,\n                currentPage: data.current,\n                totalPatients: data.count,\n                loading: false,\n                // advancedOptionShow: false,\n            })\n        };\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            })\n\n        };\n        getAPI(PATIENTS_LIST, successFn, errorFn);\n    }\n\n    searchPatient(value, page = 1) {\n\n        let that = this;\n        that.setState({\n            searchvalue: true,\n            searchString: value\n        });\n        let successFn = function (data) {\n            that.setState(function (prevState) {\n                if (prevState.searchString == value)\n                    if (data.current > 1) {\n                        return {\n                            patientListData: [...prevState.patientListData, ...data.results],\n                            morePatients: data.next,\n                            currentPage: data.current,\n                        }\n                    } else {\n                        return {\n                            patientListData: [...data.results],\n                            morePatients: data.next,\n                            currentPage: data.current,\n                            loading: false\n                        }\n                    }\n            })\n\n        };\n        let errorFn = function () {\n\n        };\n        let apiParams = {\n            page: page,\n            page_size: 20\n        };\n        if (value) {\n            getAPI(interpolate(SEARCH_PATIENT, [value]), successFn, errorFn, apiParams);\n        } else {\n            this.getPatientListData();\n        }\n    }\n\n    getMorePatient() {\n        let that = this;\n        let current = this.state.currentPage;\n\n        let successFn = function (data) {\n            if (data.current == current + 1)\n                that.setState(function (prevState) {\n                    if (data.current > 1)\n                        return {\n                            patientListData: [...prevState.patientListData, ...data.results],\n                            morePatients: data.next,\n                            currentPage: data.current,\n                        }\n                    else\n                        return {\n                            patientListData: [...data.results],\n                            morePatients: data.next,\n                            currentPage: data.current,\n                            loading: false\n                        }\n                })\n        }\n        let errorFn = function () {\n\n        }\n        let params = {};\n        if (current) {\n            params.page = parseInt(current) + 1;\n        } else {\n            this.setState({\n                loading: true\n            })\n        }\n        let patientGroup = this.state.selectedPatientGroup;\n        if (patientGroup != 'all') {\n            if (patientGroup == 'smart_a' || patientGroup == 'smart_b' || patientGroup == 'smart_c' || patientGroup == 'smart_d' || patientGroup == 'smart_e' || patientGroup == 'smart_f') {\n                switch (patientGroup) {\n                    case 'smart_a':\n                        params.gender = 'male';\n                        break;\n                    case 'smart_b':\n                        params.gender = 'female';\n                        break;\n                    case 'smart_c':\n                        params.gender = 'female';\n                        params.age = 30;\n                        params.type = 'gt';\n                        break;\n                    case 'smart_d':\n                        params.gender = 'female';\n                        params.age = 30;\n                        params.type = 'lt';\n                        break;\n                    case 'smart_e':\n                        params.gender = 'male';\n                        params.age = 30;\n                        params.type = 'gt';\n                        break;\n                    case 'smart_f':\n                        params.gender = 'male';\n                        params.age = 30;\n                        params.type = 'lt';\n                        break;\n                }\n            } else {\n                params.group = this.state.selectedPatientGroup\n            }\n\n        }\n        getAPI(PATIENTS_LIST, successFn, errorFn, {...params});\n    }\n\n    togglePatientGroupEditing = (option) => {\n        this.setState({\n            showPatientGroupModal: !!option\n        });\n        if (!option) {\n            this.getPatientGroup();\n        }\n    }\n\n    changeSelectedPatientGroup = (e) => {\n        let that = this;\n        this.setState({\n            selectedPatientGroup: e.target.value,\n            currentPage: null\n        }, function () {\n            that.getMorePatient();\n        })\n    };\n\n    advancedOption(value) {\n        // console.log(\"value\",value)\n        let that = this;\n        this.getPatientListData();\n        this.setState({\n            advancedOptionShow: !value,\n            selectedOption: '',\n        });\n        if (value) {\n            that.props.form.setFieldsValue({\n                keys: [0],\n            });\n        }\n\n    }\n\n    addNewOptionField = () => {\n\n        const {form} = this.props;\n\n        const keys = form.getFieldValue('keys');\n        // console.log(\"form\",form,keys)\n        const nextKeys = keys.concat(id++);\n        form.setFieldsValue({\n            keys: nextKeys,\n        });\n    };\n    removeNewOptionField = (k) => {\n        const {form} = this.props;\n        const keys = form.getFieldValue('keys');\n        if (keys.length === 1) {\n            return;\n        }\n\n        form.setFieldsValue({\n            keys: keys.filter(key => key !== k),\n        });\n    };\n\n    handleChangeOption = (index, type, value) => {\n        let that = this;\n        let selectedOption = {};\n        that.setState(function (prevState) {\n            return {\n                selectedOption: {...prevState.selectedOption, [index]: value},\n                custm_col: value ? 12 : 8,\n            }\n        })\n    };\n\n    AdvanceSearchPatient = (e) => {\n        let that = this;\n        e.preventDefault();\n        let reqData = {};\n        this.props.form.validateFields((err, values) => {\n            if (!err) {\n                reqData = {\n                    ...values,\n                    dob: values.dob ? moment(values.dob).format('YYYY-MM-DD') : null,\n                    dob_gte: values.dob_gte ? moment(values.dob_gte).format('YYYY-MM-DD') : null,\n                    dob_lte: values.dob_lte ? moment(values.dob_lte).format('YYYY-MM-DD') : null,\n                    dob_month: values.dob_month ? moment(values.dob_month).format('MM') : null,\n                };\n            }\n        });\n        delete reqData.keys;\n        that.setState({\n            patientData: reqData,\n        }, function () {\n            that.loadAdvanceSearchPatient();\n        });\n\n    };\n\n    loadAdvanceSearchPatient = (page = 1) => {\n        let that = this;\n        let reqData = that.state.patientData;\n        that.setState({\n            advancedSearch: true,\n            advanceLoading: true,\n        });\n        let successFn = function (data) {\n            that.setState(function (prevState) {\n                if (data.current > 1) {\n                    return {\n                        patientListData: [...prevState.patientListData, ...data.results],\n                        morePatientList: data.next,\n                        currentPage: data.current,\n                        advanceLoading: false\n                    }\n                } else {\n                    return {\n                        patientListData: [...data.results],\n                        morePatientList: data.next,\n                        currentPage: data.current,\n                        advanceLoading: false\n                    }\n                }\n            });\n        };\n        let errorFn = function () {\n            that.setState({\n                advanceLoading: false,\n            })\n        };\n        reqData.page = page;\n        getAPI(ADVANCED_SEARCH_PATIENT, successFn, errorFn, reqData)\n\n    }\n\n    render() {\n        let that = this;\n        const {getFieldDecorator, getFieldValue} = this.props.form;\n\n        const formItemLayout = {\n            labelCol: {\n                xs: {span: 24},\n                sm: {span: 4}\n            },\n            wrapperCol: {\n                xs: {span: 24},\n                sm: {span: 20}\n            }\n        };\n        getFieldDecorator('keys', {initialValue: [0]});\n        const keys = getFieldValue('keys');\n        const selectedOptionKeys = {\n            ...mapKeys(this.state.selectedOption, function (value) {\n                return value\n            })\n        }\n        const chooseOption = keys.map((k, index) => (<Row gutter={12} key={k}>\n                <Col span={10}>\n                    <Select style={{width: '200px'}} defaultValue={CHOOSE} key={k} size={\"small\"}\n                            onChange={(value) => this.handleChangeOption(k, 'type', value)}>\n                        <Select.Option value={''}>{CHOOSE}</Select.Option>\n                        {filter(this.state.advanced_option, function (item) {\n                            if (that.state.selectedOption[k] == item.value)\n                                return true\n                            return !selectedOptionKeys[item.value]\n                        }).map((item) => <Select.Option value={item.value} key={k}>\n                            {item.label}</Select.Option>)}\n                    </Select>\n                </Col>\n                {this.state.selectedOption ?\n                    <>\n                        <Col span={8}>\n                            <FormItems k={k} selectedOption={this.state.selectedOption} form={this.props.form}\n                                       sourceList={this.state.sourceList}/>\n                        </Col>\n                        <Col span={4}>\n                            {index ? (\n                                <Button onClick={() => this.removeNewOptionField(k)} size={\"small\"} style={{margin: 5}}>\n                                    <Icon className=\"dynamic-delete-button\" type=\"minus-circle-o\"\n                                          style={{color: \"red\"}}/>\n                                </Button>\n                            ) : null}\n                            {index == keys.length - 1 && that.state.selectedOption[k] ?\n                                <Button onClick={this.addNewOptionField} size={\"small\"} style={{margin: 5}}>\n                                    <Icon className=\"dynamic-delete-button\" type=\"plus-circle-o\"/>\n                                </Button> : null}\n                        </Col>\n                    </> : null\n                }\n            </Row>\n        ));\n\n\n        return that.props.activePracticePermissions.ViewPatient ? <div>\n\n            <Row gutter={16}>\n                {this.state.advancedOptionShow ?\n                    <Form onSubmit={this.AdvanceSearchPatient} layout={'inline'}>\n                        <Row gutter={16}>\n                            <Col span={16}>\n                                {chooseOption}\n                            </Col>\n                            <Col span={4} style={{display: 'flex'}}>\n                                <Form.Item>\n                                    <Button icon=\"search\" htmlType=\"submit\" onSubmit={this.AdvanceSearchPatient}\n                                            type={\"primary\"}\n                                            style={{margin: 5}}\n                                    >Search</Button>\n                                </Form.Item>\n                                <Form.Item>\n                                    <Button style={{margin: 5}} onClick={(value) => this.advancedOption(true)}\n                                            size={\"small\"}>Basic\n                                        Search</Button>\n                                </Form.Item>\n                            </Col>\n                        </Row>\n                    </Form>\n                    : <>\n                        <Col span={12}>\n                            <Search style={{margin: 5}}\n                                    placeholder=\"Search Patient By Name / ID / Mobile No / Aadhar No\" size={\"small\"}\n                                    onChange={value => this.searchPatient(value.target.value)}\n                                    enterButton/>\n                        </Col>\n                        <Col span={12} style={{textAlign: \"center\"}}>\n                            <Button style={{margin: 5}} onClick={(value) => this.advancedOption(false)} size={\"small\"}>Advance\n                                Search</Button>\n                        </Col>\n\n                    </>}\n                <Divider style={{margin: 0}}/>\n            </Row>\n            <Row gutter={16}>\n                <Col span={5}\n                     style={{\n                         height: 'calc(100% - 55px)',\n                         overflow: 'auto',\n                         padding: '10px',\n                         // backgroundColor: '#e3e5e6',\n                         // borderRight: '1px solid #ccc'\n                     }}>\n                    <Radio.Group buttonStyle=\"solid\" defaultValue={this.state.selectedPatientGroup}\n                                 onChange={this.changeSelectedPatientGroup}>\n                        <h2>Patients</h2>\n                        <Radio.Button key={'all'} style={{width: '100%', backgroundColor: 'transparent', border: '0px'}}\n                                      value=\"all\">\n                            All Patients\n                            <Tag color=\"#87d068\" style={{float: 'right', margin: 4}}>\n                                {this.state.totalPatients ? this.state.totalPatients : 0}\n                            </Tag>\n                        </Radio.Button>\n                        {/*<Radio.Button style={{width: '100%', backgroundColor: 'transparent', border: '0px'}} value=\"b\">*/}\n                        {/*Recently Visited*/}\n                        {/*</Radio.Button>*/}\n                        {/*<Radio.Button style={{width: '100%', backgroundColor: 'transparent', border: '0px'}} value=\"c\">*/}\n                        {/*Recently Added*/}\n                        {/*</Radio.Button>*/}\n                        <p><br/></p>\n                        <h2>Groups</h2>\n                        <p><b>My Groups</b>\n                            <a style={{float: 'right'}}\n                               onClick={() => this.togglePatientGroupEditing(true)}>Manage</a></p>\n                        {this.state.patientGroup.map((group) => <Radio.Button\n                            key={group.id}\n                            style={{width: '100%', backgroundColor: 'transparent', border: '0px'}} value={group.id}>\n                            {group.name}\n                            <Tag color=\"#87d068\" style={{float: 'right', margin: 4}}>\n                                {group.patient_count}\n                            </Tag>\n                        </Radio.Button>)}\n                        <p><br/></p>\n                        <p><b>Smart Groups</b></p>\n                        <Radio.Button\n                            style={{width: '100%', backgroundColor: 'transparent', border: '0px'}} key={\"smart_a\"}\n                            value={\"smart_a\"}>\n                            All Male\n                        </Radio.Button>\n                        <Radio.Button\n                            style={{width: '100%', backgroundColor: 'transparent', border: '0px'}} key={\"smart_b\"}\n                            value={\"smart_b\"}>\n                            All Female\n                        </Radio.Button>\n                        <Radio.Button\n                            style={{width: '100%', backgroundColor: 'transparent', border: '0px'}} key={\"smart_e\"}\n                            value={\"smart_e\"}>\n                            Male Over 30\n                        </Radio.Button>\n                        <Radio.Button\n                            style={{width: '100%', backgroundColor: 'transparent', border: '0px'}} key={\"smart_c\"}\n                            value={\"smart_c\"}>\n                            Female Over 30\n                        </Radio.Button>\n                        <Radio.Button\n                            style={{width: '100%', backgroundColor: 'transparent', border: '0px'}} key={\"smart_f\"}\n                            value={\"smart_f\"}>\n                            Male Under 30\n                        </Radio.Button>\n                        <Radio.Button\n                            style={{width: '100%', backgroundColor: 'transparent', border: '0px'}} key={\"smart_d\"}\n                            value={\"smart_d\"}>\n                            Female Under 30\n                        </Radio.Button>\n                        <p><br/></p>\n                    </Radio.Group>\n                </Col>\n                <Col span={19} style={{overflow: 'scroll', borderLeft: '1px solid #ccc'}}>\n\n\n                    <Spin spinning={this.state.loading}>\n                        <Row>\n                            {this.state.patientListData.length ?\n                                this.state.patientListData.map((patient) => <PatientCard {...patient}\n                                                                                         key={patient.id}\n                                                                                         showMobile={that.props.activePracticePermissions.PatientPhoneNumber}\n                                                                                         showEmail={that.props.activePracticePermissions.PatientEmailId}\n                                                                                         setCurrentPatient={that.props.setCurrentPatient}/>) :\n                                <p style={{textAlign: 'center'}}>No Data Found</p>\n                            }\n                        </Row>\n                    </Spin>\n                    {this.state.searchvalue ? <InfiniteFeedLoaderButton loaderFunction={this.searchPatient}\n                                                                        loading={this.state.loading}\n                                                                        hidden={!this.state.morePatients}/> : (this.state.advancedSearch ?\n                        <InfiniteFeedLoaderButton loading={this.state.advanceLoading}\n                                                  loaderFunction={() => this.loadAdvanceSearchPatient(that.state.morePatientList)}\n                                                  hidden={!this.state.morePatientList}/> :\n\n                        <InfiniteFeedLoaderButton loaderFunction={this.getMorePatient}\n                                                  loading={this.state.loading}\n                                                  hidden={!this.state.morePatients}/>)\n                    }\n                </Col>\n\n                {/*<Col span={19} style={{overflow: 'scroll', borderLeft: '1px solid #ccc'}}>*/}\n                {/*    <Search placeholder=\"Search Patient By Name / ID / Mobile No / Aadhar No\"*/}\n                {/*            onChange={value => this.searchPatient(value.target.value)}*/}\n                {/*            enterButton/>*/}\n\n                {/*    <Spin spinning={this.state.loading}>*/}\n                {/*        <Row>*/}\n                {/*            {this.state.patientListData.length ?*/}\n                {/*                this.state.patientListData.map((patient) => <PatientCard {...patient}*/}\n                {/*                                                                         key={patient.id}*/}\n                {/*                                                                         showMobile={that.props.activePracticePermissions.PatientPhoneNumber}*/}\n                {/*                                                                         showEmail={that.props.activePracticePermissions.PatientEmailId}*/}\n                {/*                                                                         setCurrentPatient={that.props.setCurrentPatient}/>) :*/}\n                {/*                <p style={{textAlign: 'center'}}>No Data Found</p>*/}\n                {/*            }*/}\n                {/*        </Row>*/}\n                {/*    </Spin>*/}\n                {/*    {this.state.searchvalue ?  <InfiniteFeedLoaderButton loaderFunction={this.searchPatient}*/}\n                {/*                                                         loading={this.state.loading}*/}\n                {/*                                                         hidden={!this.state.morePatients}/> :*/}\n\n                {/*        <InfiniteFeedLoaderButton loaderFunction={this.getMorePatient}*/}\n                {/*                                  loading={this.state.loading}*/}\n                {/*                                  hidden={!this.state.morePatients}/>*/}\n                {/*    }*/}\n\n                {/*</Col>*/}\n                <Modal visible={this.state.showPatientGroupModal}\n                       footer={null}\n                       onCancel={() => this.togglePatientGroupEditing(false)}>\n                    <PatientGroups {...this.props}/>\n                </Modal>\n            </Row>\n        </div> : <PermissionDenied/>\n    }\n}\n\nexport default Form.create()(PatientSelection);\n\nfunction PatientCard(patient) {\n    return <Col xs={24} sm={24} md={12} lg={8} xl={8} xxl={6}>\n        <Card onClick={() => patient.setCurrentPatient(patient)} style={{margin: '3px', paddingBottom: \"8px\"}}>\n            <Meta avatar={(patient.image ? <Avatar src={makeFileURL(patient.image)} size={50}/> :\n                <Avatar style={{backgroundColor: '#87d068'}} size={50}>\n                    {patient.user.first_name ? patient.user.first_name.charAt(0) :\n                        <Icon type=\"user\"/>}\n                </Avatar>)}\n                  title={patient.user.first_name}\n                  description={\n                      <span>{patient.showMobile ? patient.user.mobile : hideMobile(patient.user.mobile)}<br/>{patient.showEmail ? patient.user.email : hideEmail(patient.user.email)}\n                          <br/>\n                          <span className={\"patientIdHighlight\"}>#\n                              {patient.custom_id ? patient.custom_id : patient.id}\n                              {patient.gender ? \",\" + patient.gender.charAt(0).toUpperCase() : null}\n                          </span>\n\n                      </span>}/>\n        </Card>\n    </Col>;\n}\n\nfunction FormItems(index) {\n    return (\n        <>\n            {index.selectedOption[index.k] == 'name' ?\n                <Form.Item key={index.key} label={'contains'}>\n                    {index.form.getFieldDecorator('name',)\n                    (<Input placeholder={\"patient Name\"} size={\"small\"}/>)\n                    }\n                </Form.Item> : null}\n\n            {index.selectedOption[index.k] == 'phone' ?\n                <Form.Item key={index.key} label={'contains'}>\n                    {index.form.getFieldDecorator('phone',)\n                    (<Input placeholder={\"Contact Number\"} size={\"small\"}/>)\n                    }\n                </Form.Item> : null}\n\n            {index.selectedOption[index.k] == 'age' ?\n                <Form.Item key={index.key}>\n                    {index.form.getFieldDecorator('age',)\n                    (<InputNumber placeholder={\"Patient Age\"} size={\"small\"}/>)\n                    }\n                </Form.Item> : null}\n\n            {index.selectedOption[index.k] == 'age_gte' ?\n                <Form.Item key={index.key}>\n                    {index.form.getFieldDecorator('age_gte',)\n                    (<InputNumber placeholder={\"Age more than\"} size={\"small\"}/>)\n                    }\n                </Form.Item> : null}\n\n            {index.selectedOption[index.k] == 'age_lte' ?\n                <Form.Item key={index.key}>\n                    {index.form.getFieldDecorator('age_lte',)\n                    (<InputNumber placeholder={\"Age Less than\"} size={\"small\"}/>)\n                    }\n                </Form.Item> : null}\n\n            {index.selectedOption[index.k] == 'has_age' ?\n                <Form.Item>\n                    {index.form.getFieldDecorator('has_age')\n                    (<Select style={{width: 100}} size={\"small\"}>\n                        {HAS_AGE.map((option) => <Select.Option value={option.value}>{option.label} </Select.Option>)}\n                    </Select>)\n                    }\n                </Form.Item>\n                : null}\n\n            {index.selectedOption[index.k] == 'dob' ?\n                <Form.Item key={index.key} label={'is'}>\n                    {index.form.getFieldDecorator('dob',)\n                    (<DatePicker placeholder={\"Date of Birth\"} size={\"small\"}/>)\n                    }\n                </Form.Item> : null}\n\n            {index.selectedOption[index.k] == 'dob_gte' ?\n                <Form.Item key={index.key}>\n                    {index.form.getFieldDecorator('dob_gte',)\n                    (<DatePicker size={\"small\"}/>)\n                    }\n                </Form.Item> : null}\n\n            {index.selectedOption[index.k] == 'dob_lte' ?\n                <Form.Item key={index.key}>\n                    {index.form.getFieldDecorator('dob_lte',)\n                    (<DatePicker size={\"small\"}/>)\n                    }\n                </Form.Item> : null}\n\n            {index.selectedOption[index.k] == 'dob_month' ?\n                <Form.Item key={index.key}>\n                    {index.form.getFieldDecorator('dob_month',)\n                    (<MonthPicker size={\"small\"}/>)\n                    }\n                </Form.Item> : null}\n\n            {index.selectedOption[index.k] == 'has_dob' ?\n                <Form.Item>\n                    {index.form.getFieldDecorator('has_dob')\n                    (<Select style={{width: 100}} size={\"small\"}>\n                        {HAS_DOB.map((option) => <Select.Option value={option.value}>{option.label} </Select.Option>)}\n                    </Select>)\n                    }\n                </Form.Item>\n                : null}\n\n            {index.selectedOption[index.k] == 'patient_id' ?\n                <Form.Item key={index.key} label={'contains'}>\n                    {index.form.getFieldDecorator('patient_id',)\n                    (<Input placeholder={\"Patient Id\"} size={\"small\"}/>)\n                    }\n                </Form.Item> : null}\n\n            {index.selectedOption[index.k] == 'has_aadhar' ?\n                <Form.Item>\n                    {index.form.getFieldDecorator('has_aadhar')\n                    (<Select style={{width: 100}} size={\"small\"}>\n                        {HAS_AADHAR_ID.map((option) => <Select.Option\n                            value={option.value}>{option.label} </Select.Option>)}\n                    </Select>)\n                    }\n                </Form.Item>\n                : null}\n\n            {index.selectedOption[index.k] == 'aadhar' ?\n                <Form.Item key={index.key} label={'contains'}>\n                    {index.form.getFieldDecorator('aadhar',)\n                    (<Input placeholder={\"Aadhar Id\"} size={\"small\"}/>)\n                    }\n                </Form.Item> : null}\n\n            {index.selectedOption[index.k] == 'email' ?\n                <Form.Item key={index.key} label={'contains'}>\n                    {index.form.getFieldDecorator('email',)\n                    (<Input placeholder={\"Email Id\"} size={\"small\"}/>)\n                    }\n                </Form.Item> : null}\n\n            {index.selectedOption[index.k] == 'has_email' ?\n                <Form.Item>\n                    {index.form.getFieldDecorator('has_email')\n                    (<Select style={{width: 100}} size={\"small\"}>\n                        {HAS_EMAIL.map((option) => <Select.Option value={option.value}>{option.label} </Select.Option>)}\n                    </Select>)\n                    }\n                </Form.Item>\n                : null}\n\n            {index.selectedOption[index.k] == 'gender' ?\n                <Form.Item key={index.key} label={'is'}>\n                    {index.form.getFieldDecorator('gender')\n                    (<Select style={{width: 100}} size={\"small\"}>\n                        {GENDER_OPTION.map((option) => <Select.Option\n                            value={option.value}>{option.label} </Select.Option>)}\n                    </Select>)\n                    }\n                </Form.Item>\n                : null}\n\n\n            {index.selectedOption[index.k] == 'has_gender' ?\n                <Form.Item>\n                    {index.form.getFieldDecorator('has_gender')\n                    (<Select style={{width: 100}} size={\"small\"}>\n                        {HAS_GENDER.map((option) => <Select.Option\n                            value={option.value}>{option.label} </Select.Option>)}\n                    </Select>)\n                    }\n                </Form.Item>\n                : null}\n\n            {index.selectedOption[index.k] == 'pincode' ?\n                <Form.Item key={index.key} label={'contains'}>\n                    {index.form.getFieldDecorator('pincode',)\n                    (<Input placeholder={\"PINCODE\"} size={\"small\"}/>)\n                    }\n                </Form.Item> : null}\n\n            {index.selectedOption[index.k] == 'has_pincode' ?\n                <Form.Item>\n                    {index.form.getFieldDecorator('has_pincode')\n                    (<Select style={{width: 100}} size={\"small\"}>\n                        {HAS_PINCODE.map((option) => <Select.Option\n                            value={option.value}>{option.label} </Select.Option>)}\n                    </Select>)\n                    }\n                </Form.Item>\n                : null}\n\n            {index.selectedOption[index.k] == 'has_street' ?\n                <Form.Item>\n                    {index.form.getFieldDecorator('has_street')\n                    (<Select style={{width: 100}} size={\"small\"}>\n                        {HAS_STREET.map((option) => <Select.Option\n                            value={option.value}>{option.label} </Select.Option>)}\n                    </Select>)\n                    }\n                </Form.Item>\n                : null}\n\n\n            {index.selectedOption[index.k] == 'street' ?\n                <Form.Item key={index.key} label={'contains'}>\n                    {index.form.getFieldDecorator('street',)\n                    (<Input placeholder={\"Street Address\"} size={\"small\"}/>)\n                    }\n                </Form.Item> : null}\n\n            {index.selectedOption[index.k] == 'blood_group' ?\n                <Form.Item key={index.key} label={'is'}>\n                    {index.form.getFieldDecorator('blood_group')\n                    (<Select style={{width: 100}} size={\"small\"}>\n                        {BLOOD_GROUPS.map((option) => <Select.Option\n                            value={option.value}>{option.name} </Select.Option>)}\n                    </Select>)\n                    }\n                </Form.Item>\n                : null}\n\n            {index.selectedOption[index.k] == 'source' ?\n                <Form.Item>\n                    {index.form.getFieldDecorator('source')\n                    (<Select style={{width: 100}} size={\"small\"}>\n                        {index.sourceList.map((option) => <Select.Option\n                            value={option.id}>{option.name} </Select.Option>)}\n                    </Select>)\n                    }\n                </Form.Item>\n                : null}\n\n            {index.selectedOption[index.k] == 'agent_referal' ?\n                <Form.Item>\n                    {index.form.getFieldDecorator('agent_referal')\n                    (<Select style={{width: 100}} size={\"small\"}>\n                        {REFERED_BY_AGENT.map((option) => <Select.Option\n                            value={option.value}>{option.label} </Select.Option>)}\n                    </Select>)\n                    }\n                </Form.Item>\n                : null}\n\n\n        </>)\n}","import React from \"react\";\nimport {Divider} from \"antd\";\nimport {displayMessage, getAPI, interpolate} from \"../../../utils/common\";\nimport {INPUT_FIELD, SUCCESS_MSG_TYPE} from \"../../../constants/dataKeys\";\nimport {Form, List} from \"antd/lib/index\";\nimport DynamicFieldsForm from \"../../common/DynamicFieldsForm\";\nimport {PATIENT_GROUPS, PATIENT_NOTES} from \"../../../constants/api\";\nimport moment from \"moment\";\n\nexport default class PatientNotes extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            notes: []\n        }\n    }\n\n    componentDidMount() {\n        this.loadPatientNotes();\n    }\n\n    loadPatientNotes() {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                notes: data,\n                loading: false\n            });\n        };\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            })\n\n        };\n        getAPI(interpolate(PATIENT_NOTES, [this.props.patientId, this.props.active_practiceId]), successFn, errorFn);\n    }\n\n    render() {\n        let that = this;\n        const fields = [{\n            key: \"name\",\n            required: true,\n            type: INPUT_FIELD\n        }]\n        const formProp = {\n            successFn: function (data) {\n                \n                displayMessage(SUCCESS_MSG_TYPE, \"Patient Note Added\");\n                that.loadPatientNotes();\n            },\n            errorFn: function () {\n\n            },\n            action: interpolate(PATIENT_NOTES, [this.props.patientId, this.props.active_practiceId]),\n            method: \"post\",\n            beforeSubmit: function (data) {\n                \n            }\n        }\n        const defaultValues = [{key: 'patient', value: this.props.patientId}, {\n            key: 'practice',\n            value: this.props.active_practiceId\n        }]\n        const TestFormLayout = Form.create()(DynamicFieldsForm);\n        return <div>\n            <Divider>Patient Notes</Divider>\n            <TestFormLayout formProp={formProp}\n                            defaultValues={defaultValues}\n                            fields={fields}/>\n            <List size={'small'} dataSource={this.state.notes} renderItem={item => <List.Item>\n                <List.Item.Meta\n                    title={item.name}\n                    description={'by ' + (item.staff ? item.staff.user.first_name : '--')+' on '+moment(item.created_at).format('lll')}\n                />\n            </List.Item>}/>\n        </div>\n    }\n}\n","import React from \"react\";\nimport {Divider,Form} from \"antd\";\nimport {displayMessage, getAPI, interpolate} from \"../../../utils/common\";\nimport {PATIENTS_MEMBERSHIP_API,MEMBERSHIP_API} from \"../../../constants/api\"\nimport {INPUT_FIELD,DATE_PICKER ,SUCCESS_MSG_TYPE, SELECT_FIELD} from \"../../../constants/dataKeys\";\nimport DynamicFieldsForm from \"../../common/DynamicFieldsForm\";\nimport moment from \"moment\";\nimport {Redirect} from \"react-router-dom\";\n\nexport default class MedicalMembership extends React.Component{\n    constructor(props) {\n        super(props);\n        this.state = {\n            redirect:false,\n            currentPatient: this.props.currentPatient,\n            Membership:[],\n            \n        }\n        this.loadMembership =this.loadMembership.bind(this);\n    }\n\n    componentDidMount() {\n        this.loadMembership();\n    }\n\n    loadMembership(){\n        let that=this;\n        let successFn =function (data){\n            that.setState({\n                Membership:data,\n                loading:false\n            })\n        };\n        let errorFn = function(){\n            that.setState({\n                loading:false\n            })\n        };\n        if(that.state.currentPatient){\n            getAPI(interpolate(MEMBERSHIP_API ,[that.props.active_practiceId]),successFn,errorFn);\n        }\n\n    }\n    render(){\n        let that = this;\n        console.log(\"form state\",this.state)\n        const fields = [{\n            label: \"Type\",\n            key: \"medical_membership\",\n            type: SELECT_FIELD,\n            options: this.state.Membership.map(MembershipItem => ({label: MembershipItem.name, value: MembershipItem.id}))\n        },{\n            label:\"Start Date\",\n            key:\"medical_from\",\n            initilValue:moment(),\n            type:DATE_PICKER,format:'YYYY-MM-DD'\n\n        }];\n            const formProp = {\n                successFn: function (data) {\n                    displayMessage(SUCCESS_MSG_TYPE, \"Medical Membership added\");\n                    that.props.loadProfile();\n                    that.props.loadMedicalMembership();\n                    that.props.formChange();\n                },\n                errorFn: function () {\n                    \n                },\n                action: interpolate(PATIENTS_MEMBERSHIP_API, [this.props.patientId]),\n                method: \"post\"\n            }\n        const TestFormLayout = Form.create()(DynamicFieldsForm);\n        const defaultValues = [{key: 'patient', value: this.props.patientId}, {key: 'practice', value: this.props.active_practiceId}]\n\n        return<TestFormLayout formProp={formProp} defaultValues={defaultValues} fields={fields}/>\n    }\n}","import React from \"react\";\nimport {Divider,Form} from \"antd\";\nimport {displayMessage, getAPI, interpolate} from \"../../../utils/common\";\nimport {AGENT_ROLES, PATIENT_PROFILE} from \"../../../constants/api\"\nimport {SUCCESS_MSG_TYPE, SELECT_FIELD, SINGLE_IMAGE_UPLOAD_FIELD, INPUT_FIELD} from \"../../../constants/dataKeys\";\nimport DynamicFieldsForm from \"../../common/DynamicFieldsForm\";\n\nexport default class AddOrEditAgent extends React.Component{\n    constructor(props) {\n        super(props);\n        this.state = {\n            redirect:false,\n            currentPatient: this.props.currentPatient,\n            agentRoles:[],\n\n        }\n        this.loadAgentRoles =this.loadAgentRoles.bind(this);\n    }\n\n    componentDidMount() {\n        this.loadAgentRoles();\n    }\n\n    loadAgentRoles(){\n        let that=this;\n        let successFn =function (data){\n            that.setState({\n                agentRoles:data,\n                loading:false\n            })\n        };\n        let errorFn = function(){\n            that.setState({\n                loading:false\n            })\n        };\n        getAPI(AGENT_ROLES,successFn,errorFn);\n\n    }\n    render(){\n        let that = this;\n        const fields = [{\n            label: \"Role Type\",\n            key: \"role\",\n            type: SELECT_FIELD,\n            options: this.state.agentRoles.map(roles => ({label: roles.name, value: roles.id}))\n        },{\n            label:\"Document Upload\",\n            key:'aadhar_upload',\n            type:SINGLE_IMAGE_UPLOAD_FIELD,\n            required:true\n        }];\n            const formProp = {\n                successFn: function (data) {\n                    displayMessage(SUCCESS_MSG_TYPE, \"Agent Role added\");\n                    that.props.loadProfile();\n\n                },\n                errorFn: function () {\n\n                },\n                action: interpolate(PATIENT_PROFILE, [this.props.patientId]),\n                method: \"put\"\n            }\n        const TestFormLayout = Form.create()(DynamicFieldsForm);\n        const defaultValues = [{key:'is_agent' , value:true}]\n\n        return<TestFormLayout formProp={formProp} defaultValues={defaultValues} fields={fields}/>\n    }\n}","import React from \"react\";\nimport PatientSelection from \"../PatientSelection\";\nimport {Avatar, Button, Card, Col, Divider, Icon, List, Row, Popconfirm, Modal, Statistic, Tag} from \"antd\";\nimport {Link, Redirect} from \"react-router-dom\";\nimport {getAPI, postAPI, interpolate, displayMessage, makeFileURL} from \"../../../utils/common\";\nimport {MEDICAL_MEMBERSHIP_CANCEL_API, PATIENTS_MEMBERSHIP_API, PATIENT_PROFILE} from \"../../../constants/api\";\nimport PatientNotes from \"./PatientNotes\";\nimport MedicalMembership from \"./MedicalMembership\";\nimport {SUCCESS_MSG_TYPE, ERROR_MSG_TYPE} from \"../../../constants/dataKeys\";\nimport {hideEmail, hideMobile} from \"../../../utils/permissionUtils\";\nimport AddOrEditAgent from \"./AddOrEditAgent\";\nimport {hashCode, intToRGB} from \"../../../utils/clinicUtils\";\nimport moment from \"moment\";\n\nclass PatientProfile extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            patientProfile: null,\n            currentPatient: this.props.currentPatient,\n            medicalHistory: {},\n            loading: true,\n            add: '',\n            MedicalMembership: null,\n            hide: false,\n            agentModalVisible: false,\n        };\n        this.loadProfile = this.loadProfile.bind(this);\n        this.loadMedicalMembership = this.loadMedicalMembership.bind(this);\n    }\n\n    componentDidMount() {\n        if (this.state.currentPatient) {\n            this.loadProfile();\n            this.loadMedicalMembership();\n\n        }\n    }\n\n    formChange = (value) => {\n        this.setState({\n            add: value,\n        });\n    }\n\n    componentWillReceiveProps(newProps) {\n        let that = this;\n        if (newProps.currentPatient && newProps.currentPatient != this.state.currentPatient) {\n\n            this.setState({\n                currentPatient: newProps.currentPatient,\n            }, function () {\n                that.loadProfile();\n            })\n        }\n    }\n\n    loadProfile() {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                patientProfile: data,\n                loading: false\n            });\n        };\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            })\n        };\n        if (that.state.currentPatient)\n            getAPI(interpolate(PATIENT_PROFILE, [that.state.currentPatient.id]), successFn, errorFn);\n    }\n\n    loadMedicalMembership() {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                MedicalMembership: data[data.length - 1],\n                loading: false\n            })\n        };\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            })\n        };\n        getAPI(interpolate(PATIENTS_MEMBERSHIP_API, [that.props.currentPatient.id]), successFn, errorFn);\n\n    }\n\n    onClickHandler(value) {\n        let that = this;\n        if (this.state.MedicalMembership) {\n            displayMessage(ERROR_MSG_TYPE, \"Membership !!\");\n            that.setState({\n                add: false\n            })\n        } else {\n            this.setState({\n                add: value\n            });\n        }\n\n    }\n\n    deleteMembership(id) {\n        let that = this;\n        let reqData = {\n            id: id,\n            is_active: false\n        }\n        let successFn = function (data) {\n            that.loadProfile();\n            that.loadMedicalMembership();\n        }\n        let errorFn = function () {\n\n        };\n        postAPI(interpolate(MEDICAL_MEMBERSHIP_CANCEL_API, [that.props.currentPatient.id]), reqData, successFn, errorFn);\n    }\n\n    addAgent = () => {\n        let that = this;\n        that.setState({\n            agentModalVisible: true,\n        });\n    }\n    addAgentModalClosed = () => {\n        this.setState({\n            agentModalVisible: false\n        })\n    }\n\n    render() {\n        let that = this;\n        if (this.props.currentPatient) {\n            let patient = this.state.patientProfile;\n            if (!patient)\n                return <Card loading={this.state.loading}/>;\n            return <Card loading={this.state.loading} title=\"Patient Profile\"\n                         extra={<>\n                             {/*{that.props.activePracticePermissions.SettingsAgents ?*/}\n                             {/*    <Button type={\"primary\"} onClick={this.addAgent}><Icon type={\"usergroup-add\"}/>&nbsp;Add Agent</Button>:null} &nbsp;&nbsp;*/}\n                             {that.props.activePracticePermissions.EditPatient ?\n                                 <Link to={\"/patient/\" + this.state.currentPatient.id + \"/profile/edit\"}>\n                                     <Button type=\"primary\">\n                                         <Icon type=\"edit\"/>&nbsp;Edit Patient Profile</Button>\n                                 </Link> : null}\n\n                         </>}\n\n\n            >\n                <Row gutter={16}>\n                    <Col span={6} style={{textAlign: 'center'}}>\n                        {(patient.image ? <img src={makeFileURL(patient.image)} style={{width: '100%'}}/> :\n                            <Avatar size={200} shape=\"square\" style={{backgroundColor: '#87d068'}}>\n                                {patient.user.first_name ? patient.user.first_name :\n                                    <Icon type=\"user\"/>}\n                            </Avatar>)}\n\n                        {patient.is_agent && patient.is_approved ? <Statistic title={\"Referral Code\"}\n                                                                              value={patient.user.referer_code}/> : null}\n                        <Col>\n                            <Divider/>\n\n                            {this.state.add ? <div><h1 style={{fontSize: '18px'}}>Medical Membership <a href=\"#\"\n                                                                                                        onClick={() => this.onClickHandler(false)}>Cancel</a>\n                                </h1>\n                                    <MedicalMembership {...this.props} {...this.state} patientId={patient.id}\n                                                       loadMedicalMembership={that.loadMedicalMembership}\n                                                       formChange={that.formChange} loadProfile={that.loadProfile}/></div>\n                                : <div style={{padding: '0px'}}><h1\n                                    style={{fontSize: '18px', textAlign: 'center'}}>Medical Membership <a href=\"#\"\n                                                                                                          onClick={() => this.onClickHandler(true)}>{this.state.MedicalMembership ? 'Renew' : 'Add'}</a>\n                                </h1>\n                                    {this.state.MedicalMembership ? <Card size=\"small\" title={\"Membership\"}\n                                                                          extra={<Popconfirm\n                                                                              title=\"Are you sure delete this Membership?\"\n                                                                              onConfirm={() => that.deleteMembership(this.state.MedicalMembership.id)}\n                                                                              okText=\"Yes\" cancelText=\"No\">\n                                                                              <Button icon={\"close\"} type={\"danger\"}\n                                                                                      shape=\"circle\"\n                                                                                      size=\"small\"/>\n                                                                          </Popconfirm>} style={{textAlign: \"center\"}}>\n                                            <div style={{textAlign: \"left\"}}>\n                                                <p><strong>Membership Code : </strong>\n                                                    <span>{this.state.MedicalMembership.membership_code}</span></p>\n                                                <p><strong>Start Date : </strong>\n                                                    <span>{this.state.MedicalMembership.medical_from}</span></p>\n                                                <p><strong>Valid Till : </strong>\n                                                    <span>{this.state.MedicalMembership.medical_to}</span></p>\n                                            </div>\n                                        </Card>\n                                        : null}\n                                </div>\n                            }\n                        </Col>\n                    </Col>\n\n                    <Col span={12}>\n                        <PatientRow label=\"Patient Name\" value={patient.user.first_name}/>\n                        <PatientRow label=\"Patient ID\" value={patient.custom_id ? patient.custom_id : patient.id}/>\n                        {patient && patient.role ?\n                            <PatientRow label={\"Advisor Role\"} value={patient.role_data.name}/> : null}\n                        <PatientRow label=\"Gender\" value={patient.gender}/>\n                        {patient.is_age ?\n                            <PatientRow label=\"Age\"\n                                        value={patient.dob ? moment().diff(this.props.currentPatient.dob, 'years') : null}/>\n                            :\n                            <PatientRow label=\"Date of Birth\" value={patient.dob}/>\n                        }\n                        <PatientRow label=\"Referer\"\n                                    value={patient.user.referer_data.referer ? <Link\n                                        to={\"/patient/\" + patient.user.referer_data.patient + \"/profile\"}>{patient.user.referer_data.referer.first_name}</Link> : \"--\"}/>\n                        <Divider>Contact Details</Divider>\n                        <PatientRow label=\"Email\"\n                                    value={that.props.activePracticePermissions.PatientEmailId ? patient.user.email : hideEmail(patient.user.email)}/>\n                        <PatientRow label=\"Primary Mobile\"\n                                    value={that.props.activePracticePermissions.PatientPhoneNumber ? patient.user.mobile : hideMobile(patient.user.mobile)}/>\n                        <PatientRow label=\"Secondary Mobile\"\n                                    value={that.props.activePracticePermissions.PatientPhoneNumber ? patient.secondary_mobile_no : hideMobile(patient.secondary_mobile_no)}/>\n                        <PatientRow label=\"Landline No\" value={patient.landline_no}/>\n                        <PatientRow label=\"Address\" value={patient.address}/>\n                        <PatientRow label=\"Locality\" value={patient.locality}/>\n                        <PatientRow label=\"City\" value={patient.city_data ? patient.city_data.name : null}/>\n                        <PatientRow label=\"State\" value={patient.state_data ? patient.state_data.name : null}/>\n                        <PatientRow label=\"Country\" value={patient.country_data ? patient.country_data.name : null}/>\n                        <PatientRow label=\"Pincode\" value={patient.pincode}/>\n                    </Col>\n                    <Col span={6} style={{borderLeft: '1 px solid #ccc'}}>\n                        <PatientNotes {...this.props} patientId={patient.id}/>\n                        <Divider>Medical History</Divider>\n                        {patient.medical_history_data ?\n                            patient.medical_history_data.map((item, index) =>\n                                <Tag color={'#' + intToRGB(hashCode(item.name))}>{item.name}</Tag>) : null}\n                        {/*<List size=\"small\" loading={this.state.loading} dataSource={patient.medical_history_data}*/}\n                        {/*      renderItem={(item) =>*/}\n                        {/*          <List.Item>{item.name}</List.Item>}/>}*/}\n\n                        <Divider>Groups</Divider>\n                        <List dataSource={patient.patient_group_data}\n                              renderItem={(item) => <List.Item>{item.name}</List.Item>}/>\n                        {/* <Divider>Medical Membership</Divider>\n                        <List dataSource={patient.medical_membership}\n                              renderItem={(item) => <List.Item>{item}</List.Item>}/> */}\n                    </Col>\n\n                    <Modal\n                        title=\"Add Agent\"\n                        visible={this.state.agentModalVisible}\n                        onOk={null}\n                        footer={null}\n                        onCancel={this.addAgentModalClosed}>\n                        <AddOrEditAgent patientId={patient.id} {...this.state}/>\n                    </Modal>\n                </Row>\n\n            </Card>;\n        }\n        return <PatientSelection {...this.props}/>\n    }\n}\n\nexport default PatientProfile;\n\nfunction PatientRow(props) {\n    return <Row gutter={16} style={{marginBottom: '5px'}}>\n        <Col span={8} style={{textAlign: 'right'}}>{props.label}:</Col>\n        <Col span={16}><strong>{props.value}</strong></Col>\n    </Row>\n}\n","import React from \"react\";\nimport {\n    Button,\n    Card,\n    Checkbox,\n    DatePicker,\n    Form,\n    Icon,\n    Input,\n    message,\n    Modal,\n    Select,\n    Radio,\n    Upload,\n    Popconfirm,\n    InputNumber,\n    Popover, Row, Col,\n} from \"antd\";\nimport {\n    FILE_UPLOAD_API,\n    FILE_UPLOAD_BASE64,\n    MEDICAL_HISTORY,\n    MEMBERSHIP_API,\n    PATIENT_GROUPS,\n    PATIENT_PROFILE,\n    PATIENTS_LIST,\n    COUNTRY,\n    STATE,\n    CITY, SOURCE,\n} from \"../../../constants/api\";\nimport {\n    displayMessage,\n    getAPI,\n    interpolate,\n    makeFileURL,\n    makeURL,\n    postAPI,\n    putAPI,\n    removeEmpty\n} from \"../../../utils/common\";\nimport moment from 'moment';\nimport WebCamField from \"../../common/WebCamField\";\nimport {SUCCESS_MSG_TYPE, INPUT_FIELD, SELECT_FIELD, ALL, RELATION} from \"../../../constants/dataKeys\";\nimport {Link} from \"react-router-dom\";\nimport {\n    PATIENT_AGE,\n    BLOOD_GROUP_CONFIG_PARAM,\n    PATIENT_SOURCE_CONFIG_PARAM,\n    SMS_LANGUAGE_CONFIG_PARAM,\n    FAMILY_RELATION_CONFIG_PARAM,\n    GENDER_CONFIG_PARAM\n} from \"../../../constants/hardData\";\nimport {loadConfigParameters} from \"../../../utils/clinicUtils\";\n\n\nconst confirm = Modal.confirm;\n\n\nclass EditPatientDetails extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            redirect: false,\n            history: [],\n            patientGroup: [],\n            membership: [],\n            webCamState: {},\n            countrylist: [],\n            stateList: [],\n            cityList: [],\n            sourceList: [],\n            country: this.props.currentPatient && this.props.currentPatient.country_data ? this.props.currentPatient.country : null,\n            state: this.props.currentPatient && this.props.currentPatient.state_data ? this.props.currentPatient.state : null,\n            selectedFormType: 'DOB',\n            file_count: 10,\n            file_enable: true,\n            relation_text: true,\n            loading: false,\n            [BLOOD_GROUP_CONFIG_PARAM]: [],\n            [PATIENT_SOURCE_CONFIG_PARAM]: [],\n            [SMS_LANGUAGE_CONFIG_PARAM]: [],\n            [FAMILY_RELATION_CONFIG_PARAM]: [],\n            [GENDER_CONFIG_PARAM]: [],\n            number:{}\n\n        }\n        this.changeRedirect = this.changeRedirect.bind(this);\n        this.handleSubmit = this.handleSubmit.bind(this);\n        this.getCountry = this.getCountry.bind(this);\n        this.getState = this.getState.bind(this);\n        this.getCity = this.getCity.bind(this);\n        this.getSources = this.getSources.bind(this);\n        this.loadPatientData = this.loadPatientData.bind(this);\n    }\n\n    componentDidMount() {\n        this.loadMedicalHistory();\n        this.getPatientGroup();\n        this.getPatientMembership();\n        this.getSources();\n        this.getCountry();\n        if (this.state.country) {\n            this.getState();\n        }\n        if (this.state.state) {\n            this.getCity();\n        }\n        if (this.props.currentPatient) {\n            this.loadPatientData(this.props.currentPatient.id);\n        }\n        loadConfigParameters(this, [BLOOD_GROUP_CONFIG_PARAM, PATIENT_SOURCE_CONFIG_PARAM, SMS_LANGUAGE_CONFIG_PARAM, FAMILY_RELATION_CONFIG_PARAM, GENDER_CONFIG_PARAM])\n    }\n\n    getCountry() {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                countrylist: data,\n            })\n        };\n        let errorFun = function () {\n\n        };\n        getAPI(COUNTRY, successFn, errorFun);\n    }\n\n    getSources() {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                sourceList: data,\n            })\n        };\n        let errorFun = function () {\n\n        };\n        getAPI(SOURCE, successFn, errorFun);\n    }\n\n    getState() {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                stateList: data,\n            })\n\n        };\n        let errorFn = function () {\n\n        };\n        getAPI(STATE, successFn, errorFn, {country: this.state.country});\n\n\n    }\n\n    getCity() {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                cityList: data,\n            })\n\n        };\n        let errorFn = function () {\n\n        };\n        getAPI(CITY, successFn, errorFn, {\n            state: this.state.state,\n        });\n\n    }\n\n    getPatientMembership() {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                membership: data\n            })\n        }\n        let errorFn = function () {\n\n        }\n        getAPI(interpolate(MEMBERSHIP_API, [this.props.active_practiceId]), successFn, errorFn);\n    }\n\n    loadMedicalHistory = () => {\n        var that = this;\n        let successFn = function (data) {\n            that.setState({\n                history: data,\n            })\n        };\n        let errorFn = function () {\n\n        };\n\n        getAPI(interpolate(MEDICAL_HISTORY, [this.props.active_practiceId]), successFn, errorFn);\n\n    };\n\n    loadPatientData(patientId) {\n\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                patientDetails: data,\n                loading: false\n            })\n        }\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            })\n        };\n        getAPI(interpolate(PATIENT_PROFILE, [patientId]), successFn, errorFn);\n    }\n\n    changeRedirect() {\n        var redirectVar = this.state.redirect;\n        this.setState({\n            redirect: !redirectVar,\n        });\n    }\n\n    setFormParams = (type, value) => {\n        this.setState({\n            [type]: value\n        })\n    }\n\n    getPatientGroup = () => {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                patientGroup: data,\n                loading: false\n            });\n        };\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            })\n\n        };\n        getAPI(interpolate(PATIENT_GROUPS, [this.props.active_practiceId]), successFn, errorFn);\n    }\n    handleSubmit = (e) => {\n        let that = this;\n        e.preventDefault();\n        this.props.form.validateFields((err, values) => {\n            if (!err) {\n                let reqData = {\n                    ...values,\n                    file_enable: !!values.file_enable,\n                    file_count: values.file_count ? values.file_count : this.state.file_count,\n                    on_dialysis: that.state.on_dialysis ? true : false,\n                    medical_history: values.medical_history,\n                    patient_group: values.patient_group,\n                    user: {\n                        first_name: values.first_name ? values.first_name : '',\n                        mobile: values.mobile,\n                        email: values.email\n                    },\n\n\n                };\n\n                if (values.anniversary) {\n                    reqData.anniversary = moment(values.anniversary).format(\"YYYY-MM-DD\");\n                }\n\n                if (values.dob) {\n                    reqData.dob = moment(values.dob).format(\"YYYY-MM-DD\");\n                }\n                if (values.age) {\n                    reqData.is_age = true;\n                    reqData.dob = moment().subtract(values.age, 'years').format(\"YYYY-MM-DD\");\n                }\n                if (!values.custom_id) {\n                    reqData.custom_id = null;\n                } else {\n                    reqData.custom_id = values.custom_id_pre + values.custom_id;\n                }\n                let key = 'image';\n                if (reqData[key] && reqData[key].file && reqData[key].file.response)\n                    reqData[key] = reqData[key].file.response.image_path;\n                delete reqData.first_name;\n                delete reqData.email;\n                delete reqData.referer_code;\n                delete reqData.mobile;\n                delete reqData.age;\n                delete reqData.custom_id_pre;\n                that.setState({\n                    loading: true\n                });\n                let successFn = function (data) {\n                    displayMessage(\"Patient Saved Successfully!!\");\n                    that.setState({\n                        loading: false\n                    });\n                    that.props.history.push('/patient/' + data.id + '/profile')\n                }\n                let errorFn = function () {\n                    that.setState({\n                        loading: false\n                    })\n                }\n                reqData = removeEmpty(reqData);\n\n                if (that.props.currentPatient) {\n                    putAPI(interpolate(PATIENT_PROFILE, [that.props.currentPatient.id]), reqData, successFn, errorFn);\n                } else {\n                    postAPI(interpolate(PATIENTS_LIST, [that.props.match.params.id]), reqData, successFn, errorFn);\n                }\n            }\n        });\n    }\n    toggleWebCam = (type, value) => {\n        this.setState(function (prevState) {\n            return {\n                webCamState: {...prevState.webCamState, [type]: value}\n            }\n        })\n    }\n    getImageandUpload = (fieldKey, image) => {\n        let that = this;\n        let reqData = new FormData();\n\n        reqData.append('image', image);\n        reqData.append('name', 'file');\n\n        let successFn = function (data) {\n            that.props.form.setFieldsValue({[fieldKey]: {file: {response: data}}});\n            displayMessage(SUCCESS_MSG_TYPE, \"Image Captured and processed.\");\n            that.setState(function (prevState) {\n                return {\n                    webCamState: {...prevState.webCamState, [fieldKey]: false}\n                }\n            })\n        }\n        let errorFn = function () {\n\n        }\n        postAPI(FILE_UPLOAD_BASE64, reqData, successFn, errorFn, {\n            'content-type': 'multipart/form-data'\n        });\n\n    }\n    onChangeValue = (type, value) => {\n        let that = this;\n        that.setState({\n            [type]: value\n        }, function () {\n            if (type == 'country') {\n                that.getState();\n            }\n            if (type == 'state') {\n                that.getCity();\n            }\n\n        })\n\n    }\n    setFormParams = (type, value) => {\n        this.setState({\n            [type]: value\n        })\n    };\n\n    onChangeCheckbox = (e) => {\n        this.setState({\n            on_dialysis: !this.state.on_dialysis,\n        });\n    };\n    changeFormType = (e) => {\n        this.setState({\n            selectedFormType: e.target.value\n        })\n\n    };\n    handleRelation = (e) => {\n        if (e) {\n            this.setState({\n                relation_text: false,\n            });\n        } else {\n            this.setState({\n                relation_text: true,\n            });\n        }\n\n    };\n\n    onDeletePatient() {\n        let that = this;\n        confirm({\n            title: 'Are you sure delete this patient?',\n            okText: 'Yes',\n            okType: 'danger',\n            cancelText: 'No',\n            onOk() {\n                that.patientDelete();\n            },\n\n        });\n    }\n\n    patientDelete() {\n        let that = this;\n        let id = that.state.patientDetails.id\n        let reqData = {'id': id, is_active: false}\n        let successFn = function (data) {\n            that.setState({\n                loading: false,\n            });\n            displayMessage(\"Patient Deleted!!\");\n            that.props.history.push('/patients/profile');\n        };\n        let errorFn = function () {\n        };\n        putAPI(interpolate(PATIENT_PROFILE, [id]), reqData, successFn, errorFn)\n    };\n\n    handleNumberChange = value => {\n        this.setState({\n            number: {\n                ...numberValidation(value),\n                value,\n            },\n        });\n    }\n    render() {\n        let that = this;\n        const {getFieldDecorator} = this.props.form;\n        const formItemLayout = ({\n            labelCol: {span: 6},\n            wrapperCol: {span: 14},\n        });\n        const historyOption = []\n        if (this.state.history) {\n            this.state.history.forEach(function (historyItem) {\n                historyOption.push({label: (historyItem.name), value: historyItem.id});\n            })\n        }\n        const patientGroupOption = []\n        if (this.state.patientGroup) {\n            this.state.patientGroup.forEach(function (patientGroupItem) {\n                patientGroupOption.push({label: (patientGroupItem.name), value: patientGroupItem.id});\n            });\n        }\n\n        const membershipOption = []\n        if (this.state.membership) {\n            this.state.membership.forEach(function (membershipItem) {\n                membershipOption.push({label: (membershipItem.name), value: membershipItem.id});\n            });\n        }\n        const singleUploadprops = {\n            name: 'image',\n            data: {\n                name: 'hello'\n            },\n            action: makeURL(FILE_UPLOAD_API),\n            headers: {\n                authorization: 'authorization-text',\n            },\n            onChange(info) {\n                if (info.file.status !== 'uploading') {\n                    console.log(info.file, info.fileList);\n                }\n                if (info.file.status === 'done') {\n                    message.success(`${info.file.name} file uploaded successfully`);\n                } else if (info.file.status === 'error') {\n                    message.error(`${info.file.name} file upload failed.`);\n                }\n            },\n        };\n        const tips =\n            'Only numbers are allowed.';\n        return (\n            <Form onSubmit={that.handleSubmit}>\n                <Card title={<span>{that.props.currentPatient ? \"Edit Profile\" : \"Add Patient\"}&nbsp;&nbsp;<Link\n                    to={\"/patients/patientprintform\"}>Print Patient Form</Link></span>}\n                      extra={<div><Button style={{margin: 5}} type=\"primary\" htmlType=\"submit\">Save</Button>\n                          {that.props.history ?\n                              <Button style={{margin: 5}} onClick={() => that.props.history.goBack()}>\n                                  Cancel\n                              </Button> : null}\n\n                          {that.props.currentPatient ? <>\n                                  {this.state.patientDetails && this.state.patientDetails.is_approved ?\n                                      <Popover\n                                          placement=\"leftBottom\"\n                                          trigger={\"hover\"}\n                                          content=\"An Agent is associated. Patient can not be deleted.\"\n                                          // onConfirm={()=>that.patientDelete(this.state.patientDetails.id)}\n                                          // // onCancel={cancel}\n                                          // okText=\"Yes\"\n                                          // cancelText=\"No\"\n                                      >\n                                          <Button style={{margin: 5}} type={\"danger\"} disabled>\n                                              Delete\n                                          </Button>\n                                      </Popover> :\n                                      <Button style={{margin: 5}} onClick={() => that.onDeletePatient()} type={\"danger\"}>\n                                          Delete\n                                      </Button>\n                                  }\n                              </>\n                              : null}\n\n\n                      </div>}>\n                    <Form.Item key={'image'} {...formItemLayout} label={'Patient Image'}>\n                        {getFieldDecorator('image', {valuePropName: 'image',})(\n                            <Upload {...singleUploadprops}>\n                                <Button>\n                                    <Icon type=\"upload\"/> Select File\n                                </Button>\n                                {this.state.patientDetails && this.state.patientDetails.image ?\n                                    <img\n                                        src={makeFileURL(this.state.patientDetails ? this.state.patientDetails.image : null)}\n                                        style={{maxWidth: '100%'}}/> : null}\n                            </Upload>\n                        )}\n                        <span className=\"ant-form-text\">\n                                    <a onClick={() => that.toggleWebCam('image', Math.random())}>\n                                        Open Webcam\n                                    </a>\n                                </span>\n                        <Modal\n                            footer={null}\n                            onCancel={() => that.toggleWebCam('image', false)}\n                            visible={!!that.state.webCamState['image']}\n                            width={680}\n                            key={that.state.webCamState['image']}>\n                            <WebCamField getScreenShot={(value) => that.getImageandUpload('image', value)}/>\n                        </Modal>\n                    </Form.Item>\n                    <Form.Item label=\"Patient Name\" {...formItemLayout}>\n                        {getFieldDecorator('first_name', {\n                            rules: [{required: true, message: 'Input Patient Name!'}],\n                            initialValue: this.state.patientDetails ? this.state.patientDetails.user.first_name : ''\n                        })\n                        (<Input placeholder=\"Patient Name\"/>)\n                        }\n                    </Form.Item>\n                    <Row>\n                        <Col span={8}>\n                            <Form.Item label=\"Patient Id\"\n                                       labelCol={{span: 18}}\n                                       wrapperCol={{span: 6}}\n                            >\n                                {getFieldDecorator('custom_id_pre', {\n                                    initialValue: this.state.patientDetails && this.state.patientDetails.is_agent ? 'AD' : 'BK'\n                                })\n                                (<Select>\n                                    <Select.Option value=\"BK\">BK</Select.Option>\n                                    <Select.Option value=\"AD\">AD</Select.Option>\n                                </Select>)\n                                }\n                            </Form.Item>\n                        </Col>\n                        <Col span={16}>\n                            <Form.Item labelCol={{span: 0}}\n                                       wrapperCol={{span: 18}}\n                                       validateStatus={this.state.number.validateStatus}\n                                       help={this.state.number.errorMsg || tips}\n                            >\n                                {getFieldDecorator('custom_id', {\n                                    initialValue: this.state.patientDetails ? this.state.patientDetails.custom_id.replace(/\\D/g, '') : ''\n                                })\n                                (<InputNumber\n\n                                    style={{width: '100%'}}\n                                    placeholder=\"Patient Id\"\n                                    onChange={this.handleNumberChange}\n                                />)\n                                }\n                            </Form.Item>\n                        </Col>\n                    </Row>\n\n                    {this.state.source && this.state.source == INPUT_FIELD ?\n                        <Form.Item key={'source_extra'} label={\"Source\"}  {...formItemLayout}>\n                            {getFieldDecorator(\"source_extra\", {\n                                initialValue: '',\n\n                            })(\n                                <Input placeholder=\"Source\"/>\n                            )}\n                            <a onClick={() => that.setFormParams('source', SELECT_FIELD)}>Choose\n                                Source</a>\n                        </Form.Item>\n                        : <Form.Item label={\"Source\"} {...formItemLayout}>\n                            {getFieldDecorator('source', {initialValue: this.state.patientDetails ? this.state.patientDetails.source : null})\n                            (<Select placeholder={\"Select Source\"} showSearch optionFilterProp=\"children\">\n                                {this.state.sourceList.map((option) => <Select.Option value={option.id}>\n                                    {option.name}\n                                </Select.Option>)}\n                            </Select>)\n                            }\n                            <a onClick={() => that.setFormParams('source', INPUT_FIELD)}>Enter New\n                                Source</a>\n                        </Form.Item>\n                    }\n                    {this.state.patientDetails ? null :\n                        <Form.Item label=\"Referral Code\" {...formItemLayout}>\n                            {getFieldDecorator('referal', {initialValue: this.state.patientDetails ? this.state.patientDetails.user.referer_code : ''})\n                            (<Input placeholder=\"Referral Code\"/>)\n                            }\n                        </Form.Item>\n                    }\n                    <Form.Item label={\"SMS Language\"} {...formItemLayout}>\n                        {getFieldDecorator('language', {initialValue: this.state.patientDetails && this.state.patientDetails.language ? this.state.patientDetails.language : this.props.activePracticeData.language})\n                        (<Select>\n                            {this.state[SMS_LANGUAGE_CONFIG_PARAM].map((option) => <Select.Option value={option}>\n                                {option}\n                            </Select.Option>)}\n                        </Select>)\n                        }\n                    </Form.Item>\n                    <Form.Item label=\"Aadhar ID\" {...formItemLayout}>\n                        {getFieldDecorator('aadhar_id', {initialValue: this.state.patientDetails ? this.state.patientDetails.aadhar_id : ''})\n                        (<Input placeholder=\"Patient Aadhar Number\"/>)\n                        }\n                    </Form.Item>\n\n                    <Form.Item label=\"Gender\" {...formItemLayout}>\n                        {getFieldDecorator('gender', {initialValue: this.state.patientDetails ? this.state.patientDetails.gender : null})\n                        (<Select placeholder={\"Select Gender\"}>\n                            {this.state[GENDER_CONFIG_PARAM].map((option) => <Select.Option value={option.value}>\n                                {option.label}\n                            </Select.Option>)}\n                        </Select>)\n                        }\n                    </Form.Item>\n\n\n                    <Form.Item label=' ' {...formItemLayout} colon={false}>\n                        <Radio.Group buttonStyle=\"solid\" size=\"small\" onChange={this.changeFormType}\n                                     defaultValue={this.state.selectedFormType}>\n                            {PATIENT_AGE.map((item) => <Radio value={item.value}>{item.label}</Radio>)}\n                        </Radio.Group>\n                    </Form.Item>\n                    {this.state.selectedFormType == 'DOB' ?\n                        <Form.Item label=\"DOB\" {...formItemLayout}>\n                            {getFieldDecorator('dob', {initialValue: this.state.patientDetails && this.state.patientDetails.dob ? moment(this.state.patientDetails.dob) : ''})\n                            (<DatePicker/>)\n                            }\n                        </Form.Item>\n                        : <Form.Item label=\"Age\" {...formItemLayout}>\n                            {getFieldDecorator('age', {initialValue: this.state.patientDetails && this.state.patientDetails.dob ? moment().diff(this.state.patientDetails.dob, 'years') : null})\n                            (<InputNumber min={0} max={120} placeholder=\"Patient Age\"/>)\n                            }\n                        </Form.Item>}\n\n                    <Form.Item label=\"Anniversary\" {...formItemLayout}>\n                        {getFieldDecorator('anniversary', {initialValue: this.state.patientDetails && this.state.patientDetails.anniversary ? moment(this.state.patientDetails.anniversary) : null})\n                        (<DatePicker/>)\n                        }\n                    </Form.Item>\n\n                    {/*<Form.Item label=\"Blood Group\" {...formItemLayout}>*/}\n                    {/*    {getFieldDecorator('blood_group', {initialValue: this.props.currentPatient ? this.props.currentPatient.blood_group : ''})*/}\n                    {/*    (<Input placeholder=\"Patient Blood Group\"/>)*/}\n                    {/*    }*/}\n                    {/*</Form.Item>*/}\n                    <Form.Item label=\"Blood Group\" {...formItemLayout}>\n                        {getFieldDecorator(\"blood_group\", {initialValue: this.state.patientDetails ? this.state.patientDetails.blood_group : ''})\n                        (<Select placeholder=\"Blood Group\">\n                            {this.state[BLOOD_GROUP_CONFIG_PARAM].map((option) => <Select.Option\n                                value={option}>{option}</Select.Option>)}\n                        </Select>)\n                        }\n                    </Form.Item>\n\n                    {/*<Form.Item label=\"Family\" {...formItemLayout}>*/}\n                    {/*    {getFieldDecorator('family_relation', {initialValue: this.state.patientDetails ? this.props.currentPatient.family_relation : ''})*/}\n                    {/*    (<Input placeholder=\"Patient Family Relation\"/>)*/}\n                    {/*    }*/}\n                    {/*</Form.Item>*/}\n\n                    <Form.Item label=\"Family\" {...formItemLayout}>\n                        <Form.Item style={{display: 'inline-block', width: 'calc(30% - 12px)'}}>\n                            {getFieldDecorator(\"family_relation\", {initialValue: this.state.patientDetails && this.state.patientDetails.family_relation != null ? this.state.patientDetails.family_relation : RELATION})\n                            (<Select onChange={(value) => this.handleRelation(value)}>\n                                <Select.Option value={''}>{RELATION}</Select.Option>\n                                {this.state[FAMILY_RELATION_CONFIG_PARAM].map((option) => <Select.Option\n                                    value={option.value}>{option.name}</Select.Option>)}\n                            </Select>)\n                            }\n                        </Form.Item>\n                        <span style={{display: 'inline-block', width: '14px', textAlign: 'center'}}/>\n                        <Form.Item style={{display: 'inline-block', width: 'calc(50% - 12px)'}}>\n                            {getFieldDecorator(\"attendee\", {initialValue: this.state.patientDetails ? this.state.patientDetails.attendee : ''})\n                            (<Input\n                                disabled={this.state.patientDetails && this.state.patientDetails.attendee ? false : this.state.relation_text}/>)\n                            }\n                        </Form.Item>\n                    </Form.Item>\n\n\n                    <Form.Item label=\"Mobile (Primary)\" {...formItemLayout}>\n                        {getFieldDecorator('mobile', {\n                            initialValue: this.state.patientDetails ? this.state.patientDetails.user.mobile : null,\n                            rules: [{required: true, message: 'Input Mobile Number'}]\n                        })\n                        (<Input placeholder=\"Patient Mobile Number (Primary)\"/>)\n                        }\n                    </Form.Item>\n\n                    <Form.Item label=\"Mobile (Secondary)\" {...formItemLayout}>\n                        {getFieldDecorator('secondary_mobile_no', {initialValue: this.state.patientDetails ? this.state.patientDetails.secondary_mobile_no : ''})\n                        (<Input placeholder=\"Patient Mobile Number (Secondary)\"/>)\n                        }\n                    </Form.Item>\n\n                    <Form.Item label=\"Landline\" {...formItemLayout}>\n                        {getFieldDecorator('landline_no', {initialValue: this.state.patientDetails ? this.state.patientDetails.landline_no : ''})\n                        (<Input placeholder=\"Patient Landline Number\"/>)\n                        }\n                    </Form.Item>\n\n                    <Form.Item label=\"Address\" {...formItemLayout}>\n                        {getFieldDecorator('address', {initialValue: this.state.patientDetails ? this.state.patientDetails.address : ''})\n                        (<Input placeholder=\"Patient Address\"/>)\n                        }\n                    </Form.Item>\n\n                    <Form.Item label=\"Locality\" {...formItemLayout}>\n                        {getFieldDecorator('locality', {initialValue: this.state.patientDetails ? this.state.patientDetails.locality : ''})\n                        (<Input placeholder=\"Patient Locality\"/>)\n                        }\n                    </Form.Item>\n\n                    {this.state.country && this.state.country == INPUT_FIELD ?\n                        <Form.Item key={'country_extra'} label={\"Country\"}  {...formItemLayout}>\n                            {getFieldDecorator(\"country_extra\", {\n                                initialValue: '',\n\n                            })(\n                                <Input placeholder=\"Country\"/>\n                            )}\n                            <a onClick={() => that.setFormParams('country', SELECT_FIELD)}>Choose\n                                Country</a>\n                        </Form.Item>\n                        : <Form.Item key={\"country\"} {...formItemLayout} label={\"Country\"}>\n                            {getFieldDecorator(\"country\", {\n                                initialValue: this.state.patientDetails && this.state.patientDetails.country_data ? this.state.patientDetails.country_data.id : '',\n                            })(\n                                <Select placeholder=\"Select Country\"\n                                        onChange={(value) => this.onChangeValue(\"country\", value)} showSearch\n                                        optionFilterProp=\"children\">\n\n                                    {this.state.countrylist.map((option) => <Select.Option\n                                        value={option.id}>{option.name}</Select.Option>)}\n                                </Select>\n                            )}\n                            <a onClick={() => that.setFormParams('country', INPUT_FIELD)}>Add New\n                                Country</a>\n                        </Form.Item>\n                    }\n\n\n                    {this.state.country == INPUT_FIELD || this.state.state && this.state.state == INPUT_FIELD ?\n                        <Form.Item key={'state_extra'} label={\"State\"}  {...formItemLayout}>\n                            {getFieldDecorator(\"state_extra\", {\n                                initialValue: '',\n\n                            })(\n                                <Input placeholder=\"State\"/>\n                            )}\n                            <a onClick={() => that.setFormParams('state', SELECT_FIELD)}>Choose\n                                State</a>\n                        </Form.Item>\n                        : <Form.Item key={\"state\"} {...formItemLayout} label={\"State\"}>\n                            {getFieldDecorator(\"state\", {\n                                initialValue: this.state.patientDetails && this.state.patientDetails.state_data ? this.state.patientDetails.state_data.id : '',\n                            })(\n                                <Select placeholder=\"Select State\"\n                                        onChange={(value) => this.onChangeValue(\"state\", value)} showSearch\n                                        optionFilterProp=\"children\">\n                                    {this.state.stateList.map((option) => <Select.Option\n                                        value={option.id}>{option.name}</Select.Option>)}\n                                </Select>\n                            )}\n                            <a onClick={() => that.setFormParams('state', INPUT_FIELD)}>Add New\n                                state</a>\n                        </Form.Item>\n                    }\n                    {this.state.country == INPUT_FIELD || this.state.state == INPUT_FIELD || this.state.city && this.state.city == INPUT_FIELD ?\n                        <Form.Item key={'city_extra'} label={\"City\"}  {...formItemLayout}>\n                            {getFieldDecorator(\"city_extra\", {\n                                initialValue: '',\n                            })(\n                                <Input placeholder=\"City\"/>\n                            )}\n                            <a onClick={() => that.setFormParams('city', SELECT_FIELD)}>Choose\n                                City</a>\n                        </Form.Item>\n                        : <Form.Item key={\"City\"} {...formItemLayout} label={\"City\"}>\n                            {getFieldDecorator(\"city\", {\n                                initialValue: this.state.patientDetails && this.state.patientDetails.city_data ? this.state.patientDetails.city_data.id : '',\n                            })(\n                                <Select showSearch optionFilterProp=\"children\" placeholder=\"Select City\">\n                                    {this.state.cityList.map((option) => <Select.Option\n                                        value={option.id}>{option.name}</Select.Option>)}\n                                </Select>\n                            )}\n                            <a onClick={() => that.setFormParams('city', INPUT_FIELD)}>Add New\n                                City</a>\n                        </Form.Item>\n                    }\n\n\n                    {/* <Form.Item label=\"City\" {...formItemLayout}>\n                        {getFieldDecorator('city_extra', {initialValue: this.props.currentPatient ? this.props.currentPatient.city : null})\n                        (<Input placeholder=\"Patient City\"/>)\n                        }\n                    </Form.Item> */}\n\n                    <Form.Item label=\"Pincode\" {...formItemLayout}>\n                        {getFieldDecorator('pincode', {initialValue: this.state.patientDetails ? this.state.patientDetails.pincode : ''})\n                        (<Input placeholder=\"Patient PINCODE\"/>)\n                        }\n                    </Form.Item>\n\n                    <Form.Item label=\"Email\" {...formItemLayout}>\n                        {getFieldDecorator('email', {\n                            initialValue: this.state.patientDetails ? this.state.patientDetails.user.email : null,\n                        })\n                        (<Input placeholder=\"Patient Email\"/>)\n                        }\n                    </Form.Item>\n\n                    <Form.Item label=\"Medical History\" {...formItemLayout}>\n                        {getFieldDecorator(\"medical_history\", {initialValue: this.state.patientDetails ? this.state.patientDetails.medical_history : []})\n                        (<Select placeholder=\"Medical History\" mode={\"multiple\"}>\n                            {historyOption.map((option) => <Select.Option\n                                value={option.value}>{option.label}</Select.Option>)}\n                        </Select>)\n                        }\n                    </Form.Item>\n\n                    <Form.Item label=\"Patient Group\" {...formItemLayout}>\n                        {getFieldDecorator(\"patient_group\", {initialValue: this.state.patientDetails ? this.state.patientDetails.patient_group : []})\n                        (<Select placeholder=\"Patient Group\" mode={\"multiple\"}>\n                            {patientGroupOption.map((option) => <Select.Option\n                                value={option.value}>{option.label}</Select.Option>)}\n                        </Select>)\n                        }\n                    </Form.Item>\n\n                    <Form.Item label=\"On Dialysis\" {...formItemLayout}>\n                        {getFieldDecorator('on_dialysis', {initialValue: this.state.patientDetails ? this.state.patientDetails.on_dialysis : false})\n                        (<Checkbox onChange={(e) => this.onChangeCheckbox(e)} style={{paddingTop: '4px'}}/>)\n                        }\n                    </Form.Item>\n                    <Form.Item label=\"Allow File Upload\" {...formItemLayout}>\n                        {getFieldDecorator('file_enable', {initialValue: this.state.patientDetails ? this.state.patientDetails.file_enable : true})\n                        (<Checkbox style={{paddingTop: '4px'}}\n                                   defaultChecked={true}/>)\n                        }\n                    </Form.Item>\n\n                    {/*<Form.Item label=\"Allow File Upload\" {...formItemLayout}>*/}\n                    {/*    {getFieldDecorator('file_enable',)*/}\n                    {/*    (<Checkbox  defaultChecked={true}/>)*/}\n                    {/*    }*/}\n                    {/*</Form.Item>*/}\n\n                    <Form.Item label=\"Max Uploads Allowed\" {...formItemLayout}>\n                        {getFieldDecorator('file_count', {initialValue: this.state.patientDetails ? this.state.patientDetails.file_count : 10})\n                        (<InputNumber min={0}/>)\n                        }\n                    </Form.Item>\n                    <Form.Item>\n                        {that.props.history ?\n                            <Button style={{margin: 5}} onClick={() => that.props.history.goBack()}>\n                                Cancel\n                            </Button> : null}\n                        <Button style={{margin: 5}} type=\"primary\" htmlType=\"submit\" loading={this.state.loading}>\n                            Save\n                        </Button>\n\n                    </Form.Item>\n                </Card>\n            </Form>)\n    }\n\n}\n\nexport default Form.create()(EditPatientDetails);\n\nfunction numberValidation(number) {\n    if (isNaN(number)) {\n        return {\n            validateStatus: 'error',\n            errorMsg: 'Patient ID can only be numerical value.',\n        };\n    }\n    return {\n        validateStatus: 'success',\n        errorMsg: null,\n    };\n}","import React from \"react\";\nimport {Link} from \"react-router-dom\";\n\nimport DynamicFieldsForm from \"../../common/DynamicFieldsForm\";\nimport {Button, Card, Checkbox, Divider, Form, Icon, Popconfirm, Table} from \"antd\";\nimport {DOCTORS_ROLE} from \"../../../constants/dataKeys\";\nimport {\n    ALL_APPOINTMENT_API,\n    APPOINTMENT_API,\n    APPOINTMENT_REPORTS,\n    EMR_TREATMENTNOTES,\n    PRACTICESTAFF,\n    PROCEDURE_CATEGORY\n} from \"../../../constants/api\";\nimport {getAPI, interpolate, putAPI} from \"../../../utils/common\";\nimport moment from 'moment';\nimport {hideEmail, hideMobile} from \"../../../utils/permissionUtils\";\n\n\nclass Appointment extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            redirect: false,\n            appointments: null,\n            practice_doctors: [],\n            procedure_category: null,\n            treatmentNotes: null,\n            practice_staff: [],\n            loading: false\n\n        }\n        this.changeRedirect = this.changeRedirect.bind(this);\n        this.editAppointment = this.editAppointment.bind(this);\n        this.deleteAppointment = this.deleteAppointment.bind(this);\n        this.loadProcedureCategory = this.loadProcedureCategory.bind(this);\n        this.loadDoctors = this.loadDoctors.bind(this);\n\n    }\n\n    componentDidMount() {\n        // this.loadProcedureCategory();\n        this.loadDoctors();\n        this.loadTreatmentNotes();\n        if (this.props.match.params.appointmentid) {\n            this.loadAppointment(this.props.match.params.appointmentid);\n        } else {\n            this.loadAllAppointments();\n        }\n\n    }\n\n    loadAppointment(id) {\n        let that = this;\n        this.setState({\n            loading: true,\n        })\n        let successFn = function (data) {\n\n            that.setState({\n                appointments: [data],\n                loading: false,\n\n            });\n\n\n        }\n\n        let errorFn = function () {\n            that.setState({\n                loading: false,\n\n            })\n\n        }\n        getAPI(interpolate(APPOINTMENT_API, [id]), successFn, errorFn);\n\n    }\n\n    loadAllAppointments() {\n        let that = this;\n        this.setState({\n            loading: true,\n        })\n        let successFn = function (data) {\n            // console.log(\"DataKya h\",data);\n            let appointmentArray = data;\n            // appointmentArray.push(data);\n            // console.log(\"AppointmentArray\",JSON.stringify(appointmentArray));\n            that.setState({\n                appointments: data,\n                loading: false,\n\n            });\n            // console.log(\"appointment\", JSON.stringify(that.state.appointments));\n\n        }\n\n        let errorFn = function () {\n            that.setState({\n                loading: false,\n\n            })\n\n\n        }\n        getAPI(interpolate(ALL_APPOINTMENT_API, [this.props.active_practiceId]), successFn, errorFn, this.props.match.params.id ? {\"patient\": this.props.match.params.id,practice:this.props.active_practiceId} : {practice:this.props.active_practiceId});\n\n    }\n\n\n    loadProcedureCategory() {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                procedure_category: data\n            })\n\n        }\n        let errorFn = function () {\n\n        }\n        getAPI(interpolate(PROCEDURE_CATEGORY, [this.props.active_practiceId]), successFn, errorFn);\n    }\n\n    loadDoctors() {\n        let that = this;\n        let successFn = function (data) {\n            data.staff.forEach(function (usersdata) {\n                if (usersdata.role == DOCTORS_ROLE) {\n                    let doctor = that.state.practice_doctors;\n                    doctor.push(usersdata);\n                    that.setState({\n                        practice_doctors: doctor,\n                    })\n                } else {\n                    let doctor = that.state.practice_staff;\n                    doctor.push(usersdata);\n                    that.setState({\n                        practice_staff: doctor,\n                    })\n                }\n            })\n\n        }\n        let errorFn = function () {\n        };\n        getAPI(interpolate(PRACTICESTAFF, [this.props.active_practiceId]), successFn, errorFn);\n\n    }\n\n    loadTreatmentNotes() {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                treatmentNotes: data,\n                loading: false\n            })\n\n        }\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            })\n\n        }\n        getAPI(interpolate(EMR_TREATMENTNOTES, [this.props.active_practiceId]), successFn, errorFn)\n    }\n\n    changeRedirect() {\n        var redirectVar = this.state.redirect;\n        this.setState({\n            redirect: !redirectVar,\n        });\n    }\n\n    editAppointment(record) {\n\n        let id = record.id;\n        this.props.history.push(\"/calendar/\" + id + \"/edit-appointment\")\n\n    }\n\n    deleteAppointment(record) {\n        let that = this;\n        that.setState({\n            loading: true\n        })\n        let reqData = {'is_active': false, 'status': \"Cancelled\"}\n        let successFn = function (data) {\n            that.loadAllAppointments();\n            that.setState({\n                loading: false\n            })\n\n        }\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            })\n        }\n        putAPI(interpolate(APPOINTMENT_API, [record.id]), reqData, successFn, errorFn);\n    }\n\n    render() {\n        let that = this;\n        const doctors = []\n        if (this.state.practice_doctors.length) {\n            this.state.practice_doctors.forEach(function (doctor) {\n                doctors[doctor.id] = doctor.user.first_name\n            })\n        }\n        const treatmentNotes = [];\n        if (this.state.treatmentNotes) {\n            this.state.treatmentNotes.forEach(function (treatmentNote) {\n                treatmentNotes[treatmentNote.id] = treatmentNote.name\n            })\n        }\n        // const categories = {1: \"fast\", 2: \"Full Stomach\", 3: \"No Liquids\"}\n        const columns = [{\n            title: 'Schedule Time',\n            key: 'name',\n            render: (text, record) => (<span>{moment(record.schedule_at).format('LLL')},{record.slot}mins</span>\n            )\n        }, {\n            title: 'Patient ID',\n            key:'id',\n            render:(item ,record)=><span>{record.patient.custom_id?record.patient.custom_id:record.patient.id}</span>,\n            exports:(item ,record) =>(record.patient.custom_id?record.patient.custom_id:record.patient.id),\n        }, {\n            title: 'Patient Name',\n            dataIndex: 'patient.user.first_name',\n            key: 'patient_name',\n        }, {\n            title: 'Patient Mobile',\n            dataIndex: 'patient.user.mobile',\n            key: 'patient_mobile',\n            render: (value) => that.props.activePracticePermissions.PatientPhoneNumber ? value : hideMobile(value)\n        }, {\n            title: 'Email',\n            dataIndex: 'patient.user.email',\n            key: 'email',\n            render: value => that.props.activePracticePermissions.PatientEmailId ? value : hideEmail(value)\n        }, {\n            title: 'Doctor',\n            key: 'doctor',\n            render: (text, record) => (\n                <span> {doctors[record.doctor]}</span>\n            )\n        }, {\n            title: 'Procedure',\n            key: 'procedure',\n            // render: (text, record) => (\n            //     <span> {procedures[record.procedure]}</span>\n            // )\n        }, {\n            title: 'Treatment Notes',\n            key: 'notes',\n            render: (text, record) => (\n                <span> {treatmentNotes[record.notes]}</span>\n            )\n        }, {\n            title: 'Category',\n            key: 'category',\n            render: (text, record) => (\n                <span> {record.category?record.category_data.name:'--'}</span>\n            )\n        }, {\n            title: 'NotifyByEmail',\n            key: 'notify_via_email',\n            render: (text, record) => (\n                <Checkbox disabled checked={record.notify_via_email}/>\n            )\n        }, {\n            title: 'NotifyBySMS',\n            key: 'notify_via_sms',\n            render: (text, record) => (\n                <Checkbox disabled checked={record.notify_via_sms}/>\n            )\n        },\n\n            {\n                title: 'Action',\n                key: 'action',\n                render: (text, record) => (\n                    <span>\n                <a onClick={() => this.editAppointment(record)}\n                   disabled={!that.props.activePracticePermissions.EditAppointment}>Edit</a>\n                <Divider type=\"vertical\"/>\n                <Popconfirm title=\"Are you sure delete this item?\"\n                            onConfirm={() => this.deleteAppointment(record)} okText=\"Yes\" cancelText=\"No\">\n                    <a disabled={!that.props.activePracticePermissions.EditAppointment}>Delete</a>\n                </Popconfirm>\n\n\n              </span>\n                ),\n            }];\n        const TestFormLayout = Form.create()(DynamicFieldsForm);\n        if (this.props.match.params.id) {\n            return <Card extra={that.props.activePracticePermissions.AddAppointment || that.props.allowAllPermissions ?\n                <Link to={\"/calendar/create-appointment?patient=\" + this.props.match.params.id}>\n                    <Button type=\"primary\">\n                        <Icon type=\"plus\"/>&nbsp;Add Appointment</Button>\n                </Link> : null}>\n\n                <Table loading={this.state.loading} columns={columns} scroll={{x: 1300}}\n                       pagination={false}\n                       dataSource={this.state.appointments}/>\n\n\n            </Card>\n        }\n        return <Card extra={that.props.activePracticePermissions.AddAppointment || that.props.allowAllPermissions ?\n            <Link to=\"/calendar/create-appointment\">\n                <Button type=\"primary\">\n                    <Icon type=\"plus\"/>&nbsp;Add Appointment</Button>\n            </Link> : null}>\n            <Table loading={this.state.loading} columns={columns} scroll={{x: 1300}}\n                   pagination={false}\n                   dataSource={this.state.appointments}/>\n\n\n        </Card>\n    }\n\n}\n\nexport default Appointment;\n","import React from \"react\";\nimport {Menu, Layout, Icon, Divider, Badge} from \"antd\";\nimport {Link} from \"react-router-dom\";\nimport {INNER_KEYS_HOTKEYS} from \"../../constants/hardData\";\nimport Hotkeys from 'react-hot-keys';\n\nconst Sider = Layout.Sider;\n\nclass PatientSider extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {};\n        this.onHotKeyInner = this.onHotKeyInner.bind(this);\n    }\n\n\n    onHotKeyInner(keyNm) {\n        let that = this;\n        switch (keyNm) {\n            case 'alt+f':\n                return (this.props.currentPatient ? this.props.history.push(\"/patient/\" + this.props.currentPatient.id + \"/profile\") : this.props.history.push(\"/patients/profile\"));\n\n            case 'alt+a':\n                return (this.props.currentPatient ? this.props.history.push(\"/patient/\" + this.props.currentPatient.id + \"/appointments\") : this.props.history.push(\"/patients/appointments\"));\n\n            case 'alt+o':\n                return (this.props.currentPatient ? this.props.history.push(\"/patient/\" + this.props.currentPatient.id + \"/communications\") : this.props.history.push(\"/patients/communications\"));\n\n            case 'alt+k':\n                return (this.props.currentPatient ? this.props.history.push(\"/patient/\" + this.props.currentPatient.id + \"/booking\") : this.props.history.push(\"/patients/profile\"));\n\n            case 'alt+m':\n                return (this.props.currentPatient ? this.props.history.push(\"/patient/\" + this.props.currentPatient.id + \"/emr/vitalsigns\") : this.props.history.push(\"/patients/emr/vitalsigns\"));\n\n            case 'alt+n':\n                return (this.props.currentPatient ? this.props.history.push(\"/patient/\" + this.props.currentPatient.id + \"/emr/vitalsigns\") : this.props.history.push(\"/patients/emr/vitalsigns\"));\n\n            case 'alt+t':\n                return (this.props.currentPatient ? this.props.history.push(\"/patient/\" + this.props.currentPatient.id + \"/emr/plans\") : this.props.history.push(\"/patients/emr/plans\"));\n\n            case 'alt+l':\n                return (this.props.currentPatient ? this.props.history.push(\"/patient/\" + this.props.currentPatient.id + \"/emr/files\") : this.props.history.push(\"/patients/emr/files\"));\n\n            case 'alt+i':\n                return (this.props.currentPatient ? this.props.history.push(\"/patient/\" + this.props.currentPatient.id + \"/billing/invoices\") : this.props.history.push(\"/patients/billing/invoices\"));\n\n            case 'alt+e':\n                return (this.props.currentPatient ? this.props.history.push(\"/patient/\" + this.props.currentPatient.id + \"/billing/return/invoices\") : this.props.history.push(\"/patients/billing/return/invoices\"));\n\n            case 'alt+y':\n                return (this.props.currentPatient ? this.props.history.push(\"/patient/\" + this.props.currentPatient.id + \"/billing/payments\") : this.props.history.push(\"/patients/billing/payments\"));\n\n            case 'alt+u':\n                return (this.props.currentPatient ? this.props.history.push(\"/patient/\" + this.props.currentPatient.id + \"/emr/workdone\") : this.props.history.push(\"/patients/emr/workdone\"));\n\n            case 'alt+s':\n                return (this.props.currentPatient ? this.props.history.push(\"/patient/\" + this.props.currentPatient.id + \"/emr/prescriptions\") : this.props.history.push(\"/patients/emr/prescriptions\"));\n\n            case 'alt+g':\n                return (this.props.currentPatient ? this.props.history.push(\"/patient/\" + this.props.currentPatient.id + \"/billing/ledger\") : this.props.history.push(\"/patients/profile\"));\n\n            case 'alt+w':\n                return (this.props.currentPatient ? this.props.history.push(\"/patient/\" + this.props.currentPatient.id + \"/emr/timeline\") : this.props.history.push(\"/patients/profile\"));\n        }\n    }\n\n\n    render() {\n        let that = this;\n        return <Hotkeys keyName={INNER_KEYS_HOTKEYS} onKeyDown={(value) => this.onHotKeyInner(value)}>\n            <Sider trigger={null}\n                   collapsible\n                   collapsed={this.props.hideSidePanel}\n                   style={{overflow: 'auto', minHeight: 'calc(100vh - 64px)', background: '#fff'}}>\n                {/*<div className=\"logo\"/>*/}\n\n                <Menu mode=\"inline\">\n                    <Menu.ItemGroup key=\"g1\" title={<Divider style={{margin: '0px'}}>Patient</Divider>}>\n                        {/* {that.props.activePracticePermissions.ViewPatient || that.props.allowAllPermissions? */}\n                        <Menu.Item key=\"17\">\n                            <Link\n                                to={this.props.currentPatient ? \"/patient/\" + this.props.currentPatient.id + \"/profile\" : \"/patients/profile\"}>\n                                <Icon type=\"user\"/><span className=\"nav-text\">Pro<span\n                                className={\"shortcutLetterHighlight\"}>f</span>ile</span>\n                            </Link>\n                        </Menu.Item>\n                        {/* :null} */}\n                        {that.props.activePracticePermissions.PatientAppointments || that.props.allowAllPermissions ?\n                            <Menu.Item key=\"18\">\n                                <Link\n                                    to={this.props.currentPatient ? \"/patient/\" + this.props.currentPatient.id + \"/appointments\" : \"/patients/appointments\"}>\n                                    <Icon type=\"calendar\"/><span className=\"nav-text\"><span\n                                    className={\"shortcutLetterHighlight\"}>A</span>ppointments</span>\n                                </Link>\n                            </Menu.Item>\n                            : null}\n                        {that.props.activePracticePermissions.PatientCommunications || that.props.allowAllPermissions ?\n                            <Menu.Item key=\"19\">\n                                <Link\n                                    to={this.props.currentPatient ? \"/patient/\" + this.props.currentPatient.id + \"/communications\" : \"/patients/communications\"}>\n                                    <Icon type=\"message\"/><span className=\"nav-text\">C<span\n                                    className={\"shortcutLetterHighlight\"}>o</span>mmunications</span>\n                                </Link>\n                            </Menu.Item>\n                            : null}\n                        {that.props.activePracticePermissions.PatientBookings || that.props.allowAllPermissions ?\n                            <Menu.Item key=\"booking\" disabled={!this.props.currentPatient}>\n                                <Link\n                                    to={this.props.currentPatient ? \"/patient/\" + this.props.currentPatient.id + \"/booking\" : \"/patients/communications\"}>\n                                    <Icon type=\"book\"/><span className=\"nav-text\">Boo<span\n                                    className={\"shortcutLetterHighlight\"}>k</span>ing</span>\n                                </Link>\n                            </Menu.Item>\n                            : null}\n\n                    </Menu.ItemGroup>\n                    <Menu.ItemGroup key=\"g2\" title={<Divider style={{margin: '0px'}}>EMR</Divider>}>\n                        {/*<SubMenu key=\"nestedsub1\" title={<span>EMR</span>}>*/}\n                        {that.props.activePracticePermissions.PatientVitalSigns || that.props.allowAllPermissions ?\n                            <Menu.Item key=\"20\">\n                                <Link\n                                    to={this.props.currentPatient ? \"/patient/\" + this.props.currentPatient.id + \"/emr/vitalsigns\" : \"/patients/emr/vitalsigns\"}>\n                                    <Icon type=\"heart\"/><span className=\"nav-text\">Report <span\n                                    className={\"shortcutLetterHighlight\"}>M</span>anual</span></Link>\n                            </Menu.Item>\n                            : null}\n                        {that.props.activePracticePermissions.PatientClinicalNotes || that.props.allowAllPermissions ?\n                            <Menu.Item key=\"21\">\n                                <Link\n                                    to={this.props.currentPatient ? \"/patient/\" + this.props.currentPatient.id + \"/emr/clinicnotes\" : \"/patients/emr/clinicnotes\"}>\n                                    <Icon type=\"solution\"/><span className=\"nav-text\">Clinical <span\n                                    className={\"shortcutLetterHighlight\"}>N</span>otes</span>\n                                </Link>\n                            </Menu.Item>\n                            : null}\n                        {that.props.activePracticePermissions.PatientTreatmentPlans || that.props.allowAllPermissions ?\n                            <Menu.Item key=\"30\">\n                                <Link\n                                    to={this.props.currentPatient ? \"/patient/\" + this.props.currentPatient.id + \"/emr/plans\" : \"/patients/emr/plans\"}>\n                                    <Icon type=\"read\"/><span className=\"nav-text\"><span\n                                    className={\"shortcutLetterHighlight\"}>T</span>reatment\n                                    Plans</span>\n                                </Link>\n                            </Menu.Item>\n                            : null}\n                        {that.props.activePracticePermissions.PatientCompletedProcedure || that.props.allowAllPermissions ?\n                            <Menu.Item key=\"22\">\n                                <Link\n                                    to={this.props.currentPatient ? \"/patient/\" + this.props.currentPatient.id + \"/emr/workdone\" : \"/patients/emr/workdone\"}>\n                                    <Icon type=\"check-circle\"/><span className=\"nav-text\">Completed Proced<span\n                                    className={\"shortcutLetterHighlight\"}>u</span>re</span>\n                                </Link>\n                            </Menu.Item>\n                            : null}\n                        {that.props.activePracticePermissions.PatientFiles || that.props.allowAllPermissions ?\n                            <Menu.Item key=\"23\">\n                                <Link\n                                    to={this.props.currentPatient ? \"/patient/\" + this.props.currentPatient.id + \"/emr/files\" : \"/patients/emr/files\"}>\n                                    <Icon type=\"picture\"/><span className=\"nav-text\">Fi<span\n                                    className={\"shortcutLetterHighlight\"}>l</span>es</span>\n                                </Link>\n                            </Menu.Item>\n                            : null}\n                        {that.props.activePracticePermissions.PatientPrescriptions || that.props.allowAllPermissions ?\n                            <Menu.Item key=\"24\">\n                                <Link\n                                    to={this.props.currentPatient ? \"/patient/\" + this.props.currentPatient.id + \"/emr/prescriptions\" : \"/patients/emr/prescriptions\"}>\n                                    <Icon type=\"solution\"/><span className=\"nav-text\">Pre<span\n                                    className={\"shortcutLetterHighlight\"}>s</span>criptions</span>\n                                </Link>\n                            </Menu.Item>\n                            : null}\n                        {that.props.activePracticePermissions.PatientTimeline || that.props.allowAllPermissions ?\n                            <Menu.Item key=\"25\" disabled={!this.props.currentPatient}>\n                                <Link\n                                    to={this.props.currentPatient ? \"/patient/\" + this.props.currentPatient.id + \"/emr/timeline\" : \"/patients/profile\"}>\n                                    <Icon type=\"clock-circle\"/><span className=\"nav-text\">Timeline <span\n                                    className={\"shortcutLetterHighlight\"}>w</span></span>\n                                </Link>\n                            </Menu.Item>\n                            : null}\n                        {that.props.activePracticePermissions.PatientLabOrders || that.props.allowAllPermissions ?\n                            <Menu.Item key=\"26\" disabled={!this.props.currentPatient || true}>\n                                <Link\n                                    to={this.props.currentPatient ? \"/patient/\" + this.props.currentPatient.id + \"/emr/labtrackings\" : \"/patients/profile\"}>\n                                    <Icon type=\"solution\"/><span className=\"nav-text\">Lab Orders</span>\n                                </Link>\n                            </Menu.Item>\n                            : null}\n                    </Menu.ItemGroup>\n                    {/*</SubMenu>*/}\n                    <Menu.ItemGroup key=\"g3\" title={<Divider style={{margin: '0px'}}>Billing</Divider>}>\n\n                        {that.props.activePracticePermissions.PatientInvoices || that.props.allowAllPermissions ?\n                            <Menu.Item key=\"27\">\n                                <Link\n                                    to={this.props.currentPatient ? \"/patient/\" + this.props.currentPatient.id + \"/billing/invoices\" : \"/patients/billing/invoices\"}>\n                                    <Icon type=\"audit\"/><span className=\"nav-text\"><span\n                                    className={\"shortcutLetterHighlight\"}>I</span>nvoices</span>\n                                </Link>\n                            </Menu.Item>\n                            : null}\n                        {that.props.activePracticePermissions.PatientReturns || that.props.allowAllPermissions ?\n                            <Menu.Item key=\"31\">\n                                <Link\n                                    to={this.props.currentPatient ? \"/patient/\" + this.props.currentPatient.id + \"/billing/return/invoices\" : \"/patients/billing/return/invoices\"}>\n                                    <Icon type=\"redo\"/><span className=\"nav-text\">Invoices R<span\n                                    className={\"shortcutLetterHighlight\"}>e</span>turn</span>\n                                </Link>\n                            </Menu.Item>\n                            : null}\n                        {that.props.activePracticePermissions.PatientPayments || that.props.allowAllPermissions ?\n                            <Menu.Item key=\"28\">\n                                <Link\n                                    to={this.props.currentPatient ? \"/patient/\" + this.props.currentPatient.id + \"/billing/payments\" : \"/patients/billing/payments\"}>\n                                    <Icon type=\"dollar\"/><span className=\"nav-text\">Pa<span\n                                    className={\"shortcutLetterHighlight\"}>y</span>ments</span>\n                                </Link>\n                            </Menu.Item>\n                            : null}\n                        {that.props.activePracticePermissions.PatientLedger || that.props.allowAllPermissions ?\n                            <Menu.Item key=\"29\" disabled={!this.props.currentPatient}>\n                                <Link\n                                    to={this.props.currentPatient ? \"/patient/\" + this.props.currentPatient.id + \"/billing/ledger\" : \"/patients/profile\"}>\n                                    <Icon type=\"book\"/><span className=\"nav-text\">Led<span\n                                    className={\"shortcutLetterHighlight\"}>g</span>er</span>\n                                </Link>\n                            </Menu.Item>\n                            : null}\n                        {this.props.currentPatient && this.props.currentPatient.is_agent && (that.props.activePracticePermissions.PatientLedger || that.props.allowAllPermissions) ?\n                            <Menu.Item key=\"32\" disabled={!this.props.currentPatient}>\n                                <Link\n                                    to={this.props.currentPatient ? \"/patient/\" + this.props.currentPatient.id + \"/billing/wallet\" : \"/patients/profile\"}>\n                                    <Icon type=\"wallet\"/><span className=\"nav-text\">Wallet Ledger</span>\n                                </Link>\n                            </Menu.Item>\n                            : null}\n                    </Menu.ItemGroup>\n                </Menu>\n\n            </Sider>\n        </Hotkeys>\n    }\n}\n\nexport default PatientSider;\n","function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport omit from 'omit.js';\nimport { ConfigConsumer } from '../config-provider';\n\nvar TimelineItem = function TimelineItem(props) {\n  return React.createElement(ConfigConsumer, null, function (_ref) {\n    var _classNames, _classNames2;\n\n    var getPrefixCls = _ref.getPrefixCls;\n\n    var customizePrefixCls = props.prefixCls,\n        className = props.className,\n        _props$color = props.color,\n        color = _props$color === void 0 ? '' : _props$color,\n        children = props.children,\n        pending = props.pending,\n        dot = props.dot,\n        restProps = __rest(props, [\"prefixCls\", \"className\", \"color\", \"children\", \"pending\", \"dot\"]);\n\n    var prefixCls = getPrefixCls('timeline', customizePrefixCls);\n    var itemClassName = classNames((_classNames = {}, _defineProperty(_classNames, \"\".concat(prefixCls, \"-item\"), true), _defineProperty(_classNames, \"\".concat(prefixCls, \"-item-pending\"), pending), _classNames), className);\n    var dotClassName = classNames((_classNames2 = {}, _defineProperty(_classNames2, \"\".concat(prefixCls, \"-item-head\"), true), _defineProperty(_classNames2, \"\".concat(prefixCls, \"-item-head-custom\"), dot), _defineProperty(_classNames2, \"\".concat(prefixCls, \"-item-head-\").concat(color), true), _classNames2));\n    return React.createElement(\"li\", _extends({}, omit(restProps, ['position']), {\n      className: itemClassName\n    }), React.createElement(\"div\", {\n      className: \"\".concat(prefixCls, \"-item-tail\")\n    }), React.createElement(\"div\", {\n      className: dotClassName,\n      style: {\n        borderColor: /blue|red|green|gray/.test(color) ? undefined : color\n      }\n    }, dot), React.createElement(\"div\", {\n      className: \"\".concat(prefixCls, \"-item-content\")\n    }, children));\n  });\n};\n\nTimelineItem.defaultProps = {\n  color: 'blue',\n  pending: false,\n  position: ''\n};\nexport default TimelineItem;","function _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport TimelineItem from './TimelineItem';\nimport Icon from '../icon';\nimport { ConfigConsumer } from '../config-provider';\n\nvar Timeline =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Timeline, _React$Component);\n\n  function Timeline() {\n    var _this;\n\n    _classCallCheck(this, Timeline);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Timeline).apply(this, arguments));\n\n    _this.renderTimeline = function (_ref) {\n      var _classNames;\n\n      var getPrefixCls = _ref.getPrefixCls;\n\n      var _a = _this.props,\n          customizePrefixCls = _a.prefixCls,\n          _a$pending = _a.pending,\n          pending = _a$pending === void 0 ? null : _a$pending,\n          pendingDot = _a.pendingDot,\n          children = _a.children,\n          className = _a.className,\n          reverse = _a.reverse,\n          mode = _a.mode,\n          restProps = __rest(_a, [\"prefixCls\", \"pending\", \"pendingDot\", \"children\", \"className\", \"reverse\", \"mode\"]);\n\n      var prefixCls = getPrefixCls('timeline', customizePrefixCls);\n      var pendingNode = typeof pending === 'boolean' ? null : pending;\n      var classString = classNames(prefixCls, (_classNames = {}, _defineProperty(_classNames, \"\".concat(prefixCls, \"-pending\"), !!pending), _defineProperty(_classNames, \"\".concat(prefixCls, \"-reverse\"), !!reverse), _defineProperty(_classNames, \"\".concat(prefixCls, \"-\").concat(mode), !!mode), _classNames), className);\n      var pendingItem = pending ? React.createElement(TimelineItem, {\n        pending: !!pending,\n        dot: pendingDot || React.createElement(Icon, {\n          type: \"loading\"\n        })\n      }, pendingNode) : null;\n      var timeLineItems = reverse ? [pendingItem].concat(_toConsumableArray(React.Children.toArray(children).reverse())) : [].concat(_toConsumableArray(React.Children.toArray(children)), [pendingItem]);\n\n      var getPositionCls = function getPositionCls(ele, idx) {\n        if (mode === 'alternate') {\n          if (ele.props.position === 'right') return \"\".concat(prefixCls, \"-item-right\");\n          if (ele.props.position === 'left') return \"\".concat(prefixCls, \"-item-left\");\n          return idx % 2 === 0 ? \"\".concat(prefixCls, \"-item-left\") : \"\".concat(prefixCls, \"-item-right\");\n        }\n\n        if (mode === 'left') return \"\".concat(prefixCls, \"-item-left\");\n        if (mode === 'right') return \"\".concat(prefixCls, \"-item-right\");\n        if (ele.props.position === 'right') return \"\".concat(prefixCls, \"-item-right\");\n        return '';\n      }; // Remove falsy items\n\n\n      var truthyItems = timeLineItems.filter(function (item) {\n        return !!item;\n      });\n      var itemsCount = React.Children.count(truthyItems);\n      var lastCls = \"\".concat(prefixCls, \"-item-last\");\n      var items = React.Children.map(truthyItems, function (ele, idx) {\n        var pendingClass = idx === itemsCount - 2 ? lastCls : '';\n        var readyClass = idx === itemsCount - 1 ? lastCls : '';\n        return React.cloneElement(ele, {\n          className: classNames([ele.props.className, !reverse && !!pending ? pendingClass : readyClass, getPositionCls(ele, idx)])\n        });\n      });\n      return React.createElement(\"ul\", _extends({}, restProps, {\n        className: classString\n      }), items);\n    };\n\n    return _this;\n  }\n\n  _createClass(Timeline, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(ConfigConsumer, null, this.renderTimeline);\n    }\n  }]);\n\n  return Timeline;\n}(React.Component);\n\nexport { Timeline as default };\nTimeline.Item = TimelineItem;\nTimeline.defaultProps = {\n  reverse: false,\n  mode: ''\n};","import Timeline from './Timeline';\nexport default Timeline;","function _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nimport * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport RcSteps from 'rc-steps';\nimport Icon from '../icon';\nimport { ConfigConsumer } from '../config-provider';\n\nvar Steps =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Steps, _React$Component);\n\n  function Steps() {\n    var _this;\n\n    _classCallCheck(this, Steps);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Steps).apply(this, arguments));\n\n    _this.renderSteps = function (_ref) {\n      var getPrefixCls = _ref.getPrefixCls;\n      var prefixCls = getPrefixCls('steps', _this.props.prefixCls);\n      var iconPrefix = getPrefixCls('', _this.props.iconPrefix);\n      var icons = {\n        finish: React.createElement(Icon, {\n          type: \"check\",\n          className: \"\".concat(prefixCls, \"-finish-icon\")\n        }),\n        error: React.createElement(Icon, {\n          type: \"close\",\n          className: \"\".concat(prefixCls, \"-error-icon\")\n        })\n      };\n      return React.createElement(RcSteps, _extends({\n        icons: icons\n      }, _this.props, {\n        prefixCls: prefixCls,\n        iconPrefix: iconPrefix\n      }));\n    };\n\n    return _this;\n  }\n\n  _createClass(Steps, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(ConfigConsumer, null, this.renderSteps);\n    }\n  }]);\n\n  return Steps;\n}(React.Component);\n\nexport { Steps as default };\nSteps.Step = RcSteps.Step;\nSteps.defaultProps = {\n  current: 0\n};\nSteps.propTypes = {\n  prefixCls: PropTypes.string,\n  iconPrefix: PropTypes.string,\n  current: PropTypes.number\n};","import React from \"react\";\nimport {Button, Card, Icon, Steps, Timeline, Row, Col, Checkbox, Spin, Tag, Table, Affix, Tooltip} from \"antd\";\nimport {\n    getAPI,\n    interpolate,\n    makeFileURL,\n    postAPI,\n    startLoadingMessage,\n    stopLoadingMessage\n} from \"../../../utils/common\";\nimport {PATIENT_TIMELINE_API, PATIENT_TIMELINE_PDF} from \"../../../constants/api\";\nimport {CUSTOM_STRING_SEPERATOR} from \"../../../constants/hardData\";\nimport moment from \"moment\";\nimport {BACKEND_BASE_URL} from \"../../../config/connect\";\nimport {ERROR_MSG_TYPE, SUCCESS_MSG_TYPE} from \"../../../constants/dataKeys\";\n\nconst Step = Steps.Step;\n\nconst checkboxOption = [{\n    label: <span style={{width: '100%'}}>Appointment</span>,\n    value: 'appointments'\n}, {\n    label: <span style={{width: '100%'}}>Report Manual</span>,\n    value: 'vital_signs'\n}, {\n    label: <span style={{width: '100%'}}>Clinic Notes</span>,\n    value: 'clinic_notes'\n}, {\n    label: <span style={{width: '100%'}}>Treatment Plans</span>,\n    value: 'treatment_plans'\n}, {\n    label: <span style={{width: '100%'}}>Procedures</span>,\n    value: 'procedures'\n}, {\n    label: <span style={{width: '100%'}}>Files</span>,\n    value: 'files'\n}, {\n    label: <span style={{width: '100%'}}>Prescriptions</span>,\n    value: 'prescriptions'\n}, {\n    label: <span style={{width: '100%'}}>Invoices</span>,\n    value: 'invoices'\n}, {\n    label: <span style={{width: '100%'}}>Payments</span>,\n    value: 'payments'\n}];\n\nclass PatientTimeline extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            filterParams: ['appointments', 'vital_signs', 'clinic_notes', 'treatment_plans', 'procedures', 'files', 'prescriptions', 'invoices', 'payments'],\n            checkAllFilters: true,\n            selectedFiltersIntermediate: false,\n            timelineData: [],\n            checkedTimelineCards: []\n        }\n    }\n\n    componentDidMount() {\n        this.loadTimeline();\n    }\n\n    changeFilters = (value) => {\n        let that = this;\n        this.setState({\n            filterParams: value,\n            selectedFiltersIntermediate: !!value.length && value.length < checkboxOption.length,\n            checkAllFilters: value.length === checkboxOption.length,\n        }, function () {\n            that.loadTimeline()\n        })\n    }\n    onCheckAllFiltersChange = e => {\n        let that = this;\n        this.setState({\n            filterParams: e.target.checked ? checkboxOption.map(item => item.value) : [],\n            selectedFiltersIntermediate: false,\n            checkAllFilters: e.target.checked,\n        }, function () {\n            that.loadTimeline()\n        });\n    };\n    loadTimeline = () => {\n        let that = this;\n        let queryParams = {\n            practice_id: this.props.active_practiceId\n        };\n        that.setState({\n            loading: true\n        })\n        this.state.filterParams.forEach(function (value) {\n            queryParams[value] = 1\n        });\n        let successFn = function (data) {\n            var lastDate = moment().add(5, 'year');\n            that.setState(function () {\n                let timelineData = [];\n                let checkList = {};\n                data.forEach(function (item) {\n                    if (lastDate.format('YMD') != moment(item.sort_date).format('YMD')) {\n                        lastDate = moment(item.sort_date);\n                        timelineData.push({type: 'Time', date: item.sort_date})\n                    }\n                    timelineData.push(item);\n                    if (item.type != 'Appointments') {\n                        if (checkList[item.type]) {\n                            checkList[item.type][item.id] = true;\n                        } else {\n                            checkList[item.type] = {[item.id]: true}\n                        }\n                    }\n                });\n                return {\n                    timelineData: timelineData,\n                    loading: false,\n                    allCheckList: checkList\n                }\n            })\n        }\n\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            })\n        }\n        if (this.props.showAllClinic && this.props.match.params.id) {\n            delete (queryParams.practice_id)\n        }\n        getAPI(interpolate(PATIENT_TIMELINE_API, [this.props.match.params.id]), successFn, errorFn, queryParams);\n    }\n    onCheckAllTimelineCard = (e) => {\n        this.setState(function (prevState) {\n            return {\n                checkedTimelineCards: e.target.checked ? {...prevState.allCheckList} : {},\n                indeterminate: false,\n                checkAll: e.target.checked,\n            }\n        });\n    }\n    toggleTimelineCheckbox = (type, id, checked) => {\n        this.setState(function (prevState) {\n            let returnObj = {};\n            let checkedList = prevState.checkedTimelineCards;\n            if (checkedList[type]) {\n                checkedList[type][id] = !!checked\n            } else {\n                checkedList[type] = {[id]: !!checked}\n            }\n            if (!checked) {\n                returnObj.checkAll = false;\n                returnObj.indeterminate = true;\n                delete checkedList[type][id]\n                if (Object.keys(checkedList[type]).length) {\n\n                } else {\n                    delete checkedList[type]\n                    if (!Object.keys(checkedList).length) {\n                        returnObj.indeterminate = false;\n                    }\n                }\n\n            } else {\n                returnObj.indeterminate = true;\n                if (Object.keys(prevState.allCheckList).length == Object.keys(checkedList).length) {\n                    let keysList = Object.keys(prevState.allCheckList);\n                    let flag = false\n                    for (let i = 0; i < keysList.length; i++) {\n                        if (Object.keys(prevState.allCheckList[keysList[i]]).length != Object.keys(checkedList[keysList[i]]).length) {\n                            flag = true;\n                            returnObj.checkAll = false;\n                            break;\n                        }\n                    }\n                    if (!flag) {\n                        returnObj.indeterminate = false;\n                        returnObj.checkAll = true\n                    }\n                }\n            }\n            returnObj.checkedTimelineCards = checkedList;\n            return returnObj;\n        });\n    };\n    printCaseSheet = () => {\n        let that = this;\n        let msg = startLoadingMessage(\"Starting print case sheet...\");\n        let reqObj = {\n            practice: that.props.active_practiceId,\n            timeline: []\n        }\n        let keys = Object.keys(this.state.checkedTimelineCards);\n        keys.forEach(function (key) {\n            reqObj.timeline.push({\n                type: key,\n                id: Object.keys(that.state.checkedTimelineCards[key])\n            })\n        });\n        let successFn = function (data) {\n            stopLoadingMessage(msg, SUCCESS_MSG_TYPE, \"Fetched report successfully!!\");\n            window.open(BACKEND_BASE_URL + data.report);\n        }\n        let errorFn = function () {\n            stopLoadingMessage(msg, ERROR_MSG_TYPE, \"Case sheet printing failed!!\");\n        }\n        postAPI(interpolate(PATIENT_TIMELINE_PDF, [this.props.match.params.id]), reqObj, successFn, errorFn);\n    }\n\n    render() {\n        console.log(\"timeline\", this.state.timelineData);\n        let that = this;\n\n\n        return <Card title=\"Timeline\"\n                     extra={<Button.Group>\n                         <Button>Email Case Sheet</Button>\n                         <Button type=\"primary\" onClick={() => this.printCaseSheet()}>Print Case Sheet</Button>\n                     </Button.Group>}>\n            <Spin spinning={this.state.loading}>\n                <Row>\n                    <Col span={4}>\n                        <Checkbox\n                            indeterminate={this.state.selectedFiltersIntermediate}\n                            onChange={this.onCheckAllFiltersChange}\n                            checked={this.state.checkAllFilters}>\n                            <b>Select all</b>\n                        </Checkbox>\n                        <br/>\n                        <Checkbox.Group\n                            size={\"large\"}\n                            value={this.state.filterParams}\n                            options={checkboxOption}\n                            // defaultValue={['Apple']}\n                            onChange={this.changeFilters}\n                        />\n                    </Col>\n                    <Col span={20}>\n                        <Affix top={10}>\n                            <h4 style={{\n                                textAlign: 'right', padding: '5px',\n                                backgroundImage: 'linear-gradient(to left, white , transparent)',\n                            }}><Checkbox\n                                indeterminate={this.state.indeterminate}\n                                onChange={this.onCheckAllTimelineCard}\n                                checked={this.state.checkAll}>Select All</Checkbox></h4>\n                        </Affix>\n                        <Timeline progressDot current={1} direction=\"vertical\">\n                            {this.state.timelineData.map(item =>\n                                <Timeline.Item dot={item.type == 'Time' ? <Icon type=\"clock-circle-o\"\n                                                                                style={{fontSize: '25px'}}/> : null}>{timelineItem({\n                                    ...item,\n                                    checkedTimelineCards: that.state.checkedTimelineCards,\n                                    toggleTimelineCheckbox: that.toggleTimelineCheckbox\n                                })}</Timeline.Item>)}\n                        </Timeline>\n                    </Col>\n                </Row>\n            </Spin>\n\n        </Card>\n    }\n}\n\nexport default PatientTimeline;\n\nfunction\n\ndateTimeStamp(item) {\n    return <span><Affix top={20} offsetTop={30}><h2 style={{\n        marginLeft: '10px',\n        padding: '5px',\n        backgroundImage: 'linear-gradient(to right, #ddd , white)',\n        borderRadius: '4px'\n    }}>{moment(item.date).format('LL')}</h2></Affix></span>\n}\n\nfunction timelineItem(item) {\n    switch (item.type) {\n        case 'Clinical Notes':\n            return timelineClinicalNote(item);\n        case 'Appointments':\n            return timelineAppointmentCard(item);\n        case 'Files':\n            return timelineFilesCard(item);\n        case 'Invoices':\n            return timelineInvoiceCard(item);\n        case 'Vital Signs':\n            return timelineVitalSignCard(item);\n        case 'Prescriptions':\n            return timelinePrescriptionCard(item);\n        case 'Payments':\n            return timelinePaymentCard(item);\n        case 'Time':\n            return dateTimeStamp(item);\n        case 'Procedures':\n            return timelineProcedureCard(item);\n        case 'Treatment Plans':\n            return timelineTreatmentPlanCard(item);\n        default:\n            return item.type\n    }\n}\n\nfunction\n\ntimelineAppointmentCard(item) {\n    return <Card hoverable\n                 bodyStyle={{backgroundColor: (item.checkedTimelineCards[item.type] && item.checkedTimelineCards[item.type][item.id] ? '#B5EEFF' : 'initial')}}>\n        <h2><Icon type=\"calendar\"/> Appointment\n            {item.practice_data ? <Tag style={{float: 'right'}}>\n                <Tooltip title=\"Practice Name\">\n                    <b>{item.practice_data.name} </b>\n                </Tooltip>\n            </Tag> : null}\n        </h2>\n        {item.doctor_data ?\n            <p style={{\n                borderLeft: '5px solid ' + item.doctor_data.calendar_colour,\n                paddingLeft: '5px'\n            }}>{item.doctor_data.user.first_name}</p> : null}\n\n        {moment(item.schedule_at).format('hh:mm A')} to {moment(item.schedule_at).add(item.slot, 'mins').format('HH:mm A')}\n    </Card>;\n}\n\nfunction timelineFilesCard(item) {\n    return <Card hoverable\n                 bodyStyle={{backgroundColor: (item.checkedTimelineCards[item.type] && item.checkedTimelineCards[item.type][item.id] ? '#B5EEFF' : 'initial')}}>\n        <h2><Icon type=\"picture\"/> File<Checkbox size=\"large\" style={{float: 'right'}}\n                                                 checked={(item.checkedTimelineCards[item.type] ? item.checkedTimelineCards[item.type][item.id] : false)}\n                                                 onChange={(e) => item.toggleTimelineCheckbox(item.type, item.id, e.target.checked)}/>\n            {item.practice_data ? <Tag style={{float: 'right'}}>\n                <Tooltip title=\"Practice Name\">\n                    <b>{item.practice_data.name} </b>\n                </Tooltip>\n            </Tag> : null}\n        </h2>\n        <img src={makeFileURL(item.file_type)} alt=\"\" style={{height: 100}}/>\n    </Card>\n}\n\nfunction\n\ntimelineInvoiceCard(item) {\n    return <Card hoverable\n                 bodyStyle={{backgroundColor: (item.checkedTimelineCards[item.type] && item.checkedTimelineCards[item.type][item.id] ? '#B5EEFF' : 'initial')}}>\n        <h2><Icon type=\"audit\"/> Invoice<Checkbox size=\"large\" style={{float: 'right'}}\n                                                  checked={(item.checkedTimelineCards[item.type] ? item.checkedTimelineCards[item.type][item.id] : false)}\n                                                  onChange={(e) => item.toggleTimelineCheckbox(item.type, item.id, e.target.checked)}/>\n            {item.practice_data ? <Tag style={{float: 'right'}}>\n                <Tooltip title=\"Practice Name\">\n                    <b>{item.practice_data.name} </b>\n                </Tooltip>\n            </Tag> : null}\n        </h2>\n        {item.procedure.map(proc => <Tag>{proc.name}</Tag>)}\n        {item.inventory.map(proc => <Tag>{proc.name}</Tag>)}\n        <br/><b>{item.invoice_id}</b>\n        <br/><b>Invoice Amount: INR {item.total}</b>\n        <br/><b>Paid Amount: INR {item.payments_data}</b>\n        <br/><b>Due Amount: INR {item.total - item.payments_data}</b>\n    </Card>\n}\n\nfunction\n\ntimelineClinicalNote(item) {\n    return <Card hoverable\n                 bodyStyle={{backgroundColor: (item.checkedTimelineCards[item.type] && item.checkedTimelineCards[item.type][item.id] ? '#B5EEFF' : 'initial')}}>\n        <h2><Icon type=\"solution\"/> Clinical Note Added<Checkbox size=\"large\" style={{float: 'right'}}\n                                                                 checked={(item.checkedTimelineCards[item.type] ? item.checkedTimelineCards[item.type][item.id] : false)}\n                                                                 onChange={(e) => item.toggleTimelineCheckbox(item.type, item.id, e.target.checked)}/>\n            {item.practice ? <Tag style={{float: 'right'}}>\n                <Tooltip title=\"Practice Name\">\n                    <b>{item.practice.name} </b>\n                </Tooltip>\n            </Tag> : null}\n        </h2>\n        {item.chief_complaints ?\n            <p>Chief Complaints\n                <ul>\n                    {item.chief_complaints.split(CUSTOM_STRING_SEPERATOR).map(item =>\n                        item ? <li>{item}</li> : null)}\n                </ul>\n            </p>\n            : null}\n        {item.observations ?\n            <p>Observations\n                <ul>\n                    {item.observations.split(CUSTOM_STRING_SEPERATOR).map(item =>\n                        item ? <li>{item}</li> : null)}\n                </ul>\n            </p>\n            : null}\n        {item.investigations ?\n            <p>Investigations\n                <ul>\n                    {item.investigations.split(CUSTOM_STRING_SEPERATOR).map(item =>\n                        item ? <li>{item}</li> : null)}\n                </ul>\n            </p>\n            : null}\n        {item.diagnosis ?\n            <p>Diagnosis\n                <ul>\n                    {item.diagnosis.split(CUSTOM_STRING_SEPERATOR).map(item =>\n                        item ? <li>{item}</li> : null)}\n                </ul>\n            </p>\n            : null}\n        {item.notes ?\n            <p>Notes\n                <ul>\n                    {item.notes.split(CUSTOM_STRING_SEPERATOR).map(item =>\n                        item ? <li>{item}</li> : null)}\n                </ul>\n            </p>\n            : null}\n    </Card>;\n}\n\nfunction\n\ntimelineVitalSignCard(item) {\n    const columns = [{\n        title: 'Time',\n        dataIndex: 'created_at',\n        key: 'name',\n        render: created_at => <span>{moment(created_at).format('hh:mm A')}</span>,\n    }, {\n        title: 'Temp(F)',\n        key: 'temperature',\n        render: (text, record) => (\n            <span> {record.temperature}<br/>,{record.temperature_part}</span>\n        )\n    }, {\n        title: 'Pulse (BPM)',\n        dataIndex: 'pulse',\n        key: 'pulse',\n    }, {\n        title: 'RR breaths/min',\n        dataIndex: 'resp_rate',\n        key: 'resp_rate',\n    }, {\n        title: 'SYS/DIA mmhg',\n        key: 'address',\n        render: (text, record) => (<>{record.blood_pressure_up ?\n                <span> {record.blood_pressure_up}/{record.blood_pressure_down}<br/>,{record.position}</span> : null}\n            </>\n        )\n    }, {\n        title: 'WEIGHT kg',\n        dataIndex: 'weight',\n        key: 'weight',\n    }, {\n        title: \"Creatinine Level\",\n        key: \"creatinine\",\n        dataIndex: \"creatinine\",\n    }, {\n        title: \"Haemoglobin Level\",\n        key: \"haemoglobin\",\n        dataIndex: \"haemoglobin\",\n    }, {\n        title: \"Urea Level\",\n        key: \"urea\",\n        dataIndex: \"urea\",\n\n    }, {\n        title: \"Uric Acid Level\",\n        key: \"uric_acid\",\n        dataIndex: \"uric_acid\",\n    }];\n    return <Card hoverable\n                 bodyStyle={{backgroundColor: (item.checkedTimelineCards[item.type] && item.checkedTimelineCards[item.type][item.id] ? '#B5EEFF' : 'initial')}}>\n        <h2><Icon type=\"heart\"/> Report Manual Recorded<Checkbox size=\"large\" style={{float: 'right'}}\n                                                                 checked={(item.checkedTimelineCards[item.type] ? item.checkedTimelineCards[item.type][item.id] : false)}\n                                                                 onChange={(e) => item.toggleTimelineCheckbox(item.type, item.id, e.target.checked)}/>\n            {item.practice_data ? <Tag style={{float: 'right'}}>\n                <Tooltip title=\"Practice Name\">\n                    <b>{item.practice_data.name} </b>\n                </Tooltip>\n            </Tag> : null}\n        </h2>\n        {item.doctor_data ?\n            <p style={{\n                borderLeft: '5px solid ' + item.doctor_data.calendar_colour,\n                paddingLeft: '5px'\n            }}>{item.doctor_data.user.first_name}</p> : null}\n        <Table columns={columns}\n               size={\"small\"}\n               pagination={false}\n               dataSource={[item]}/>\n    </Card>\n}\n\nfunction\n\ntimelinePrescriptionCard(item) {\n    return <Card hoverable\n                 bodyStyle={{backgroundColor: (item.checkedTimelineCards[item.type] && item.checkedTimelineCards[item.type][item.id] ? '#B5EEFF' : 'initial')}}>\n        <h2><Icon type=\"solution\"/> Prescription Added<Checkbox size=\"large\" style={{float: 'right'}}\n                                                                checked={(item.checkedTimelineCards[item.type] ? item.checkedTimelineCards[item.type][item.id] : false)}\n                                                                onChange={(e) => item.toggleTimelineCheckbox(item.type, item.id, e.target.checked)}/>\n            {item.practice ? <Tag style={{float: 'right'}}>\n                <Tooltip title=\"Practice Name\">\n                    <b>{item.practice.name} </b>\n                </Tooltip>\n            </Tag> : null}\n        </h2>\n        {item.doctor ?\n            <p style={{\n                borderLeft: '5px solid ' + item.doctor.calendar_colour,\n                paddingLeft: '5px'\n            }}>{item.doctor.user.first_name}</p> : null}\n        {item.drugs.map(drug => <Tag>{drug.name}</Tag>)}\n\n    </Card>\n}\n\nfunction\n\ntimelinePaymentCard(item) {\n    return <Card hoverable\n                 bodyStyle={{backgroundColor: (item.checkedTimelineCards[item.type] && item.checkedTimelineCards[item.type][item.id] ? '#B5EEFF' : 'initial')}}>\n        <h2><Icon type=\"dollar\"/> Payment<Checkbox size=\"large\" style={{float: 'right'}}\n                                                   checked={(item.checkedTimelineCards[item.type] ? item.checkedTimelineCards[item.type][item.id] : false)}\n                                                   onChange={(e) => item.toggleTimelineCheckbox(item.type, item.id, e.target.checked)}/>\n            {item.practice_data ? <Tag style={{float: 'right'}}>\n                <Tooltip title=\"Practice Name\">\n                    <b>{item.practice_data.name} </b>\n                </Tooltip>\n            </Tag> : null}\n        </h2>\n        <b>{item.payment_id}</b>\n        <br/><b>Amount Paid: INR {item.total}</b>\n    </Card>\n}\n\nfunction\n\ntimelineProcedureCard(item) {\n    return <Card hoverable\n                 bodyStyle={{backgroundColor: (item.checkedTimelineCards[item.type] && item.checkedTimelineCards[item.type][item.id] ? '#B5EEFF' : 'initial')}}>\n        <h2>Procedure Performed<Checkbox size=\"large\" style={{float: 'right'}}\n                                         checked={(item.checkedTimelineCards[item.type] ? item.checkedTimelineCards[item.type][item.id] : false)}\n                                         onChange={(e) => item.toggleTimelineCheckbox(item.type, item.id, e.target.checked)}/>\n            {item.practice ? <Tag style={{float: 'right'}}>\n                <Tooltip title=\"Practice Name\">\n                    <b>{item.practice.name} </b>\n                </Tooltip>\n            </Tag> : null}\n        </h2>\n        {item.doctor ?\n            <p style={{\n                borderLeft: '5px solid ' + item.doctor.calendar_colour,\n                paddingLeft: '5px'\n            }}>{item.doctor.user.first_name}</p> : null}\n        {item.treatment_plans.map(item => <Tag>{item.procedure.name}</Tag>)}\n    </Card>\n}\n\nfunction\n\ntimelineTreatmentPlanCard(item) {\n    return <Card hoverable\n                 bodyStyle={{backgroundColor: (item.checkedTimelineCards[item.type] && item.checkedTimelineCards[item.type][item.id] ? '#B5EEFF' : 'initial')}}>\n        <h2>Treatment Plan <Checkbox size=\"large\" style={{float: 'right'}}\n                                     checked={(item.checkedTimelineCards[item.type] ? item.checkedTimelineCards[item.type][item.id] : false)}\n                                     onChange={(e) => item.toggleTimelineCheckbox(item.type, item.id, e.target.checked)}/>\n            {item.practice ? <Tag style={{float: 'right'}}>\n                <Tooltip title=\"Practice Name\">\n                    <b>{item.practice.name} </b>\n                </Tooltip>\n            </Tag> : null}\n        </h2>\n        {item.doctor ?\n            <p style={{\n                borderLeft: '5px solid ' + item.doctor.calendar_colour,\n                paddingLeft: '5px'\n            }}>{item.doctor.user.first_name}</p> : null}\n        {item.treatment_plans.map(item => <Tag>{item.procedure.name}</Tag>)}\n    </Card>\n}\n","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nimport { Component } from \"react\";\n\nfunction appendStyle(id, css) {\n  if (!document.head.querySelector(\"#\" + id)) {\n    var node = document.createElement(\"style\");\n    node.textContent = css;\n    node.type = \"text/css\";\n    node.id = id;\n    document.head.appendChild(node);\n  }\n}\n\nvar StyleInjector = function (_Component) {\n  _inherits(StyleInjector, _Component);\n\n  function StyleInjector() {\n    _classCallCheck(this, StyleInjector);\n\n    return _possibleConstructorReturn(this, _Component.apply(this, arguments));\n  }\n\n  StyleInjector.prototype.componentDidMount = function componentDidMount() {\n    appendStyle(this.props.name, this.props.css);\n  };\n\n  StyleInjector.prototype.componentWillUnmount = function componentWillUnmount() {\n    var node = document.getElementById(this.props.name);\n    node.parentNode.removeChild(node);\n  };\n\n  StyleInjector.prototype.render = function render() {\n    return null;\n  };\n\n  return StyleInjector;\n}(Component);\n\nexport { StyleInjector as default };\nexport var lightboxStyles = function lightboxStyles(_ref) {\n  var imageBackgroundColor = _ref.imageBackgroundColor;\n  return \"\\n  body {\\n    overflow: hidden;\\n  }\\n\\n  .__react_modal_image__modal_container {\\n    position: fixed;\\n    z-index: 1000;\\n    left: 0;\\n    top: 0;\\n    width: 100%;\\n    height: 100%;\\n    background-color: rgba(0, 0, 0, 0.8);\\n    touch-action: none;\\n    overflow: hidden;\\n  }\\n\\n  .__react_modal_image__modal_content {\\n    position: relative;\\n    height: 100%;\\n    width: 100%;\\n  }\\n\\n  .__react_modal_image__modal_content img, \\n  .__react_modal_image__modal_content svg {\\n    position: absolute;\\n    top: 50%;\\n    left: 50%;\\n    transform: translate3d(-50%, -50%, 0);\\n    -webkit-transform: translate3d(-50%, -50%, 0);\\n    -ms-transform: translate3d(-50%, -50%, 0);\\n    overflow: hidden;\\n  }\\n\\n  .__react_modal_image__medium_img {\\n    max-width: 98%;\\n    max-height: 98%;\\n    background-color: \" + imageBackgroundColor + \";\\n  }\\n\\n  .__react_modal_image__large_img {\\n    cursor: move;\\n    background-color: \" + imageBackgroundColor + \"\\n  }\\n\\n  .__react_modal_image__icon_menu a {\\n    display: inline-block;\\n    font-size: 40px;\\n    cursor: pointer;\\n    line-height: 40px;\\n    box-sizing: border-box;\\n    border: none;\\n    padding: 0px 5px 0px 5px;\\n    margin-left: 10px;\\n    color: white;\\n    background-color: rgba(0, 0, 0, 0);\\n  }\\n\\n  .__react_modal_image__icon_menu {\\n    display: inline-block;\\n    float: right;\\n  }\\n\\n  .__react_modal_image__caption {\\n    display: inline-block;\\n    color: white;\\n    font-size: 120%;\\n    padding: 10px;\\n    margin: 0;\\n  }\\n\\n  .__react_modal_image__header {\\n    position: absolute;\\n    top: 0;\\n    width: 100%;\\n    background-color: rgba(0, 0, 0, 0.7);\\n    overflow: hidden;\\n  }\\n\";\n};","/* \n  Icons from https://material.io/icons/\n*/\nimport React from \"react\";\nexport var ZoomInIcon = function ZoomInIcon() {\n  return React.createElement(\"svg\", {\n    fill: \"#ffffff\",\n    height: \"24\",\n    viewBox: \"0 0 24 24\",\n    width: \"24\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, React.createElement(\"path\", {\n    d: \"M0 0h24v24H0z\",\n    fill: \"none\"\n  }), React.createElement(\"path\", {\n    d: \"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z\"\n  }));\n};\nexport var ZoomOutIcon = function ZoomOutIcon() {\n  return React.createElement(\"svg\", {\n    fill: \"#ffffff\",\n    height: \"24\",\n    viewBox: \"0 0 24 24\",\n    width: \"24\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, React.createElement(\"path\", {\n    d: \"M0 0h24v24H0z\",\n    fill: \"none\"\n  }), React.createElement(\"path\", {\n    d: \"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z\"\n  }));\n};\nexport var DownloadIcon = function DownloadIcon() {\n  return React.createElement(\"svg\", {\n    fill: \"#ffffff\",\n    height: \"24\",\n    viewBox: \"0 0 24 24\",\n    width: \"24\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, React.createElement(\"path\", {\n    d: \"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z\"\n  }), React.createElement(\"path\", {\n    d: \"M0 0h24v24H0z\",\n    fill: \"none\"\n  }));\n};\nexport var CloseIcon = function CloseIcon() {\n  return React.createElement(\"svg\", {\n    fill: \"#ffffff\",\n    height: \"24\",\n    viewBox: \"0 0 24 24\",\n    width: \"24\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, React.createElement(\"path\", {\n    d: \"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"\n  }), React.createElement(\"path\", {\n    d: \"M0 0h24v24H0z\",\n    fill: \"none\"\n  }));\n};\nexport var SpinnerIcon = function SpinnerIcon() {\n  return React.createElement(\"svg\", {\n    fill: \"#ffffff\",\n    height: \"48\",\n    viewBox: \"0 0 24 24\",\n    width: \"48\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, React.createElement(\"path\", {\n    d: \"M6 2v6h.01L6 8.01 10 12l-4 4 .01.01H6V22h12v-5.99h-.01L18 16l-4-4 4-3.99-.01-.01H18V2H6zm10 14.5V20H8v-3.5l4-4 4 4zm-4-5l-4-4V4h8v3.5l-4 4z\"\n  }), React.createElement(\"path\", {\n    d: \"M0 0h24v24H0V0z\",\n    fill: \"none\"\n  }));\n};\nexport var RotateIcon = function RotateIcon() {\n  return React.createElement(\"svg\", {\n    fill: \"#ffffff\",\n    width: \"24\",\n    height: \"24\",\n    viewBox: \"0 0 24 24\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, React.createElement(\"path\", {\n    fill: \"none\",\n    d: \"M0 0h24v24H0V0zm0 0h24v24H0V0z\"\n  }), React.createElement(\"path\", {\n    d: \"M7.47 21.49C4.2 19.93 1.86 16.76 1.5 13H0c.51 6.16 5.66 11 11.95 11 .23 0 .44-.02.66-.03L8.8 20.15l-1.33 1.34zM12.05 0c-.23 0-.44.02-.66.04l3.81 3.81 1.33-1.33C19.8 4.07 22.14 7.24 22.5 11H24c-.51-6.16-5.66-11-11.95-11zM16 14h2V8c0-1.11-.9-2-2-2h-6v2h6v6zm-8 2V4H6v2H4v2h2v8c0 1.1.89 2 2 2h8v2h2v-2h2v-2H8z\"\n  }));\n};","import React from \"react\";\nimport { ZoomInIcon, ZoomOutIcon, DownloadIcon, CloseIcon, RotateIcon } from \"./icons\";\n\nvar Header = function Header(_ref) {\n  var image = _ref.image,\n      alt = _ref.alt,\n      zoomed = _ref.zoomed,\n      toggleZoom = _ref.toggleZoom,\n      toggleRotate = _ref.toggleRotate,\n      onClose = _ref.onClose,\n      enableDownload = _ref.enableDownload,\n      enableZoom = _ref.enableZoom,\n      enableRotate = _ref.enableRotate;\n  return React.createElement(\"div\", {\n    className: \"__react_modal_image__header\"\n  }, React.createElement(\"span\", {\n    className: \"__react_modal_image__icon_menu\"\n  }, enableDownload && React.createElement(\"a\", {\n    href: image,\n    download: true\n  }, React.createElement(DownloadIcon, null)), enableZoom && React.createElement(\"a\", {\n    onClick: toggleZoom\n  }, zoomed ? React.createElement(ZoomOutIcon, null) : React.createElement(ZoomInIcon, null)), enableRotate && React.createElement(\"a\", {\n    onClick: toggleRotate\n  }, React.createElement(RotateIcon, null)), React.createElement(\"a\", {\n    onClick: onClose\n  }, React.createElement(CloseIcon, null))), alt && React.createElement(\"span\", {\n    className: \"__react_modal_image__caption\"\n  }, alt));\n};\n\nexport default Header;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nimport React, { Component } from \"react\";\nimport { SpinnerIcon } from \"./icons\";\n\nvar Image = function (_Component) {\n  _inherits(Image, _Component);\n\n  function Image() {\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, Image);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, _Component.call.apply(_Component, [this].concat(args))), _this), _this.state = {\n      loading: true\n    }, _this.handleOnLoad = function () {\n      _this.setState({\n        loading: false\n      });\n    }, _this.handleOnContextMenu = function (event) {\n      !_this.props.contextMenu && event.preventDefault();\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  Image.prototype.render = function render() {\n    var _props = this.props,\n        id = _props.id,\n        className = _props.className,\n        src = _props.src,\n        style = _props.style,\n        handleDoubleClick = _props.handleDoubleClick;\n    return React.createElement(\"div\", null, this.state.loading && React.createElement(SpinnerIcon, null), React.createElement(\"img\", {\n      id: id,\n      className: className,\n      src: src,\n      style: style,\n      onLoad: this.handleOnLoad,\n      onDoubleClick: handleDoubleClick,\n      onContextMenu: this.handleOnContextMenu\n    }));\n  };\n\n  return Image;\n}(Component);\n\nexport { Image as default };","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nimport React, { Component } from \"react\";\nimport StyleInjector, { lightboxStyles } from \"./styles\";\nimport Header from \"./Header\";\nimport Image from \"./Image\";\n\nvar Lightbox = function (_Component) {\n  _inherits(Lightbox, _Component);\n\n  function Lightbox() {\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, Lightbox);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, _Component.call.apply(_Component, [this].concat(args))), _this), _this.state = {\n      move: {\n        x: 0,\n        y: 0\n      },\n      moveStart: undefined,\n      zoomed: false,\n      rotationDeg: 0\n    }, _this.handleKeyDown = function (event) {\n      // ESC or ENTER closes the modal\n      if (event.keyCode === 27 || event.keyCode === 13) {\n        _this.props.onClose();\n      }\n    }, _this.getCoordinatesIfOverImg = function (event) {\n      var point = event.changedTouches ? event.changedTouches[0] : event;\n\n      if (point.target.id !== \"react-modal-image-img\") {\n        // the img was not a target of the coordinates\n        return;\n      }\n\n      var dim = _this.contentEl.getBoundingClientRect();\n\n      var x = point.clientX - dim.left;\n      var y = point.clientY - dim.top;\n      return {\n        x: x,\n        y: y\n      };\n    }, _this.handleMouseDownOrTouchStart = function (event) {\n      event.preventDefault();\n\n      if (event.touches && event.touches.length > 1) {\n        // more than one finger, ignored\n        return;\n      }\n\n      var coords = _this.getCoordinatesIfOverImg(event);\n\n      if (!coords) {\n        // click outside the img => close modal\n        _this.props.onClose();\n      }\n\n      if (!_this.state.zoomed) {\n        // do not allow drag'n'drop if zoom has not been applied\n        return;\n      }\n\n      _this.setState(function (prev) {\n        return {\n          moveStart: {\n            x: coords.x - prev.move.x,\n            y: coords.y - prev.move.y\n          }\n        };\n      });\n    }, _this.handleMouseMoveOrTouchMove = function (event) {\n      event.preventDefault();\n\n      if (!_this.state.zoomed || !_this.state.moveStart) {\n        // do not allow drag'n'drop if zoom has not been applied\n        // or if there has not been a click\n        return;\n      }\n\n      if (event.touches && event.touches.length > 1) {\n        // more than one finger, ignored\n        return;\n      }\n\n      var coords = _this.getCoordinatesIfOverImg(event);\n\n      if (!coords) {\n        return;\n      }\n\n      _this.setState(function (prev) {\n        return {\n          move: {\n            x: coords.x - prev.moveStart.x,\n            y: coords.y - prev.moveStart.y\n          }\n        };\n      });\n    }, _this.handleMouseUpOrTouchEnd = function (event) {\n      _this.setState({\n        moveStart: undefined\n      });\n    }, _this.toggleZoom = function (event) {\n      event.preventDefault();\n\n      _this.setState(function (prev) {\n        return {\n          zoomed: !prev.zoomed,\n          // reset position if zoomed out\n          move: prev.zoomed ? {\n            x: 0,\n            y: 0\n          } : prev.move\n        };\n      });\n    }, _this.toggleRotate = function (event) {\n      event.preventDefault();\n      var rotationDeg = _this.state.rotationDeg;\n\n      if (rotationDeg === 360) {\n        _this.setState({\n          rotationDeg: 90\n        });\n\n        return;\n      }\n\n      _this.setState(function (prevState) {\n        return {\n          rotationDeg: prevState.rotationDeg += 90\n        };\n      });\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  Lightbox.prototype.componentDidMount = function componentDidMount() {\n    document.addEventListener(\"keydown\", this.handleKeyDown, false);\n  };\n\n  Lightbox.prototype.componentWillUnmount = function componentWillUnmount() {\n    document.removeEventListener(\"keydown\", this.handleKeyDown, false);\n  };\n\n  Lightbox.prototype.render = function render() {\n    var _this2 = this;\n\n    var _props = this.props,\n        medium = _props.medium,\n        large = _props.large,\n        alt = _props.alt,\n        onClose = _props.onClose,\n        hideDownload = _props.hideDownload,\n        hideZoom = _props.hideZoom,\n        showRotate = _props.showRotate,\n        _props$imageBackgroun = _props.imageBackgroundColor,\n        imageBackgroundColor = _props$imageBackgroun === undefined ? \"black\" : _props$imageBackgroun;\n    var _state = this.state,\n        move = _state.move,\n        zoomed = _state.zoomed,\n        rotationDeg = _state.rotationDeg;\n    return React.createElement(\"div\", null, React.createElement(StyleInjector, {\n      name: \"__react_modal_image__lightbox\",\n      css: lightboxStyles({\n        imageBackgroundColor: imageBackgroundColor\n      })\n    }), React.createElement(\"div\", {\n      className: \"__react_modal_image__modal_container\"\n    }, React.createElement(\"div\", {\n      className: \"__react_modal_image__modal_content\",\n      onMouseDown: this.handleMouseDownOrTouchStart,\n      onMouseUp: this.handleMouseUpOrTouchEnd,\n      onMouseMove: this.handleMouseMoveOrTouchMove,\n      onTouchStart: this.handleMouseDownOrTouchStart,\n      onTouchEnd: this.handleMouseUpOrTouchEnd,\n      onTouchMove: this.handleMouseMoveOrTouchMove,\n      ref: function ref(el) {\n        _this2.contentEl = el;\n      }\n    }, zoomed && React.createElement(Image, {\n      id: \"react-modal-image-img\",\n      className: \"__react_modal_image__large_img\",\n      src: large || medium,\n      style: {\n        transform: \"translate3d(-50%, -50%, 0) translate3d(\" + move.x + \"px, \" + move.y + \"px, 0) rotate(\" + rotationDeg + \"deg)\",\n        WebkitTransform: \"translate3d(-50%, -50%, 0) translate3d(\" + move.x + \"px, \" + move.y + \"px, 0) rotate(\" + rotationDeg + \"deg)\",\n        MsTransform: \"translate3d(-50%, -50%, 0) translate3d(\" + move.x + \"px, \" + move.y + \"px, 0) rotate(\" + rotationDeg + \"deg)\"\n      },\n      handleDoubleClick: this.toggleZoom\n    }), !zoomed && React.createElement(Image, {\n      id: \"react-modal-image-img\",\n      className: \"__react_modal_image__medium_img\",\n      src: medium || large,\n      handleDoubleClick: this.toggleZoom,\n      contextMenu: !medium,\n      style: {\n        transform: \"translate3d(-50%, -50%, 0) rotate(\" + rotationDeg + \"deg)\",\n        WebkitTransform: \"translate3d(-50%, -50%, 0) rotate(\" + rotationDeg + \"deg)\",\n        MsTransform: \"translate3d(-50%, -50%, 0) rotate(\" + rotationDeg + \"deg)\"\n      }\n    })), React.createElement(Header, {\n      image: large || medium,\n      alt: alt,\n      zoomed: zoomed,\n      toggleZoom: this.toggleZoom,\n      toggleRotate: this.toggleRotate,\n      onClose: onClose,\n      enableDownload: !hideDownload,\n      enableZoom: !hideZoom,\n      enableRotate: !!showRotate\n    })));\n  };\n\n  return Lightbox;\n}(Component);\n\nexport { Lightbox as default };","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nimport React, { Component } from \"react\";\nimport Lightbox from \"./Lightbox\";\nexport { default as Lightbox } from \"./Lightbox\";\n\nvar _default = function (_Component) {\n  _inherits(_default, _Component);\n\n  function _default() {\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, _default);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, _Component.call.apply(_Component, [this].concat(args))), _this), _this.state = {\n      modalOpen: false\n    }, _this.toggleModal = function () {\n      _this.setState(function (prev) {\n        return {\n          modalOpen: !prev.modalOpen\n        };\n      });\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  _default.prototype.render = function render() {\n    var _props = this.props,\n        className = _props.className,\n        small = _props.small,\n        smallSrcSet = _props.smallSrcSet,\n        medium = _props.medium,\n        large = _props.large,\n        alt = _props.alt,\n        hideDownload = _props.hideDownload,\n        hideZoom = _props.hideZoom,\n        showRotate = _props.showRotate,\n        imageBackgroundColor = _props.imageBackgroundColor;\n    var modalOpen = this.state.modalOpen;\n    return React.createElement(\"div\", null, React.createElement(\"img\", {\n      className: className,\n      style: {\n        cursor: \"pointer\",\n        maxWidth: \"100%\",\n        maxHeight: \"100%\"\n      },\n      onClick: this.toggleModal,\n      src: small,\n      srcSet: smallSrcSet,\n      alt: alt\n    }), modalOpen && React.createElement(Lightbox, {\n      medium: medium,\n      large: large,\n      alt: alt,\n      onClose: this.toggleModal,\n      hideDownload: hideDownload,\n      hideZoom: hideZoom,\n      showRotate: showRotate,\n      imageBackgroundColor: imageBackgroundColor\n    }));\n  };\n\n  return _default;\n}(Component);\n\nexport { _default as default };","import React from \"react\";\nimport {\n    Button,\n    Card,\n    Col,\n    Icon,\n    List,\n    Modal,\n    Radio,\n    Row,\n    Checkbox,\n    Menu,\n    Dropdown,\n    Input,\n    Popconfirm,\n    Affix, Tag\n} from \"antd\";\nimport {getAPI, postAPI, putAPI, interpolate, makeFileURL, displayMessage} from \"../../../utils/common\";\nimport {\n    ALL_PATIENT_FILES,\n    EMR_FILETAGS,\n    PATIENT_FILES,\n    MEDICAL_CERTIFICATE_API,\n    MEDICAL_CERTIFICATE_PDF,\n    ALL_MEDICAL_CERITICATE_API,\n    PATIENT_MAILEDFILES\n} from \"../../../constants/api\";\nimport DynamicFieldsForm from \"../../common/DynamicFieldsForm\";\nimport {Form} from \"antd/lib/index\";\nimport {MULTI_SELECT_FIELD, SINGLE_IMAGE_UPLOAD_FIELD, INPUT_FIELD} from \"../../../constants/dataKeys\";\nimport {Redirect, Link} from 'react-router-dom';\nimport InfiniteFeedLoaderButton from \"../../common/InfiniteFeedLoaderButton\";\nimport Meta from \"antd/lib/card/Meta\";\nimport {BACKEND_BASE_URL} from \"../../../config/connect\";\nimport ModalImage from \"react-modal-image\";\nimport {ERROR_MSG_TYPE, SUCCESS_MSG_TYPE} from \"../../../constants/dataKeys\";\nimport moment from \"moment\";\n\nclass PatientFiles extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            files: [],\n            tags: [],\n            showAddModal: false,\n            loading: true,\n            selectedFiles: {},\n            selectedTags: {},\n            filterSearchTag: null,\n            showAddMedicalModel: false,\n            // filterSearchMedical:''\n            medicalCertificate: [],\n            visible: false,\n            filesData: {},\n            mailedfiles: []\n        };\n        this.loadData = this.loadData.bind(this);\n        this.loadMedicalCertificate = this.loadMedicalCertificate.bind(this);\n    }\n\n    componentWillMount() {\n        this.loadData();\n        // this.loadTags();\n        this.loadMedicalCertificate();\n    }\n\n    loadData(page = 1) {\n        let that = this;\n        this.setState({\n            loading: true\n        })\n        let successFn = function (data) {\n            that.setState(function (prevState) {\n                let lastPatient = null;\n                if (data.current == 1) {\n                    let newData = data.results.map(file => {\n                        if (moment(file.created_at).format('YYYYMMDD') != moment(lastPatient).format('YYYYMMDD')) {\n                            lastPatient = moment(file.created_at);\n                            return {...file, newDate: true}\n                        }\n                        return {...file, newDate: false}\n                    });\n                    return {\n                        files: newData,\n                        total: data.count,\n                        loadMoreFiles: data.next,\n                        loading: false,\n                    }\n                } else {\n                    let newData = data.results.map(file => {\n                        if (moment(file.created_at).format('YYYYMMDD') != moment(lastPatient).format('YYYYMMDD')) {\n                            lastPatient = moment(file.created_at);\n                            return {...file, newDate: true}\n                        }\n                        return {...file, newDate: false}\n                    });\n                    return {\n                        files: [...prevState.files, ...newData],\n                        loadMoreFiles: data.next,\n                        loading: false\n                    }\n                }\n\n            })\n        }\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            })\n        }\n        let apiParams = {\n            page: page,\n            practice: this.props.active_practiceId,\n        };\n\n        if (this.props.match.params.id) {\n            apiParams.patient = this.props.match.params.id;\n        }\n        if (this.props.showAllClinic && this.props.match.params.id) {\n            delete (apiParams.practice)\n        }\n        if (this.state.filterSearchTag) {\n            apiParams.tag = this.state.filterSearchTag\n        } else if (this.state.filterSearchTag == '') {\n            apiParams.notag = true\n        }\n        getAPI(PATIENT_FILES, successFn, errorFn, apiParams);\n\n    }\n\n    loadTags() {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                tags: data,\n                loading: false\n            })\n        }\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            })\n        }\n        getAPI(interpolate(EMR_FILETAGS, [this.props.active_practiceId]), successFn, errorFn);\n    }\n\n    loadMedicalCertificate(page = 1) {\n        let that = this;\n        that.setState({\n            loading: true\n        });\n        let successFn = function (data) {\n            if (data.current == 1) {\n\n                that.setState({\n                    total: data.count,\n                    medicalCertificate: data.results,\n                    loading: false,\n                    loadMoreCertificate: data.next\n                })\n            } else {\n                that.setState(function (prevState) {\n                    return {\n                        total: data.count,\n                        medicalCertificate: [...prevState.medicalCertificate, ...data.results],\n                        loading: false,\n                        loadMoreCertificate: data.next\n                    }\n                })\n            }\n        }\n\n\n        //     that.setState({\n        //         medicalCertificate: data.results,\n        //         loading:false\n        //     })\n        // }\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            })\n\n        }\n        if (this.props.currentPatient) {\n            getAPI(interpolate(MEDICAL_CERTIFICATE_API, [this.props.active_practiceId, this.props.currentPatient.id, page]), successFn, errorFn);\n        }\n        if (this.props.showAllClinic && this.props.currentPatient) {\n            getAPI(interpolate(ALL_MEDICAL_CERITICATE_API, [this.props.currentPatient.id, page]), successFn, errorFn);\n        } else {\n            getAPI(interpolate(ALL_MEDICAL_CERITICATE_API, [this.props.active_practiceId, page]), successFn, errorFn);\n        }\n\n    }\n\n    loadMailedFiles = (page = 1) => {\n        let that = this;\n        let successFn = function (data) {\n            that.setState(function (prevState) {\n                if (data.current == 1) {\n                    return {\n                        files: [...data.results],\n                        total: data.count,\n                        loadMoreFiles: data.next,\n                        loading: false,\n                    }\n                } else {\n                    return {\n                        files: [...prevState.files, ...data.results],\n                        loadMoreFiles: data.next,\n                        loading: false\n                    }\n                }\n\n            })\n        }\n        let errorFn = function () {\n\n        }\n        let params = {\n            mailed: true,\n            page: page,\n            practice: this.props.active_practiceId,\n        }\n        if (this.props.currentPatient) {\n            params.patient = this.props.currentPatient.id;\n        }\n        if (this.props.showAllClinic && this.props.currentPatient) {\n            delete (params.practice)\n        }\n        getAPI(PATIENT_MAILEDFILES, successFn, errorFn, params);\n    }\n\n    triggerAddModal(option) {\n        this.setState({\n            showAddModal: !!option\n        })\n    }\n\n    triggerAddMedicalCertificateModal(option) {\n        this.setState({\n            showAddMedicalModel: !!option\n        })\n    }\n\n    filesCompleteToggle(id, option) {\n        this.setState(function (prevState) {\n            let selected = {...prevState.selectedFiles}\n            if (option) {\n                selected[id] = !!option\n            } else {\n                delete selected[id];\n            }\n            return {selectedFiles: {...selected}}\n        });\n    }\n\n    tagsCompleteToggle(id, option) {\n        this.setState(function (prevState) {\n            let selected = {...prevState.selectedTags}\n            if (option) {\n                selected[id] = !!option\n            } else {\n                delete selected[id];\n            }\n            return {selectedTags: {...selected}}\n        });\n    }\n\n    filesWithTags() {\n        let that = this;\n        let reqData = {\n            id: Object.keys(this.state.selectedFiles),\n            file_tags: Object.keys(this.state.selectedTags),\n            patient: this.props.match.params.id,\n        };\n        let successFn = function () {\n            that.setState({\n                selectedFiles: {}\n            })\n            that.loadData()\n        }\n        let errorFn = function () {\n\n        }\n        postAPI(interpolate(PATIENT_FILES, [this.props.match.params.id]), reqData, successFn, errorFn)\n    }\n\n    filterTags = (e) => {\n        let that = this;\n        this.setState({\n            filterSearchTag: e.target.value\n        }, function () {\n            that.loadData();\n        })\n    }\n\n    deleteMedicalCertificate(item) {\n        let that = this;\n        let reqData = {\n            is_active: false,\n            patient: item.patient,\n            id: item.id\n        }\n\n        let successFn = function (data) {\n            that.loadData();\n            that.loadMedicalCertificate();\n        }\n        let errorFn = function () {\n\n        };\n        postAPI(interpolate(MEDICAL_CERTIFICATE_API, [that.props.active_practiceId]), reqData, successFn, errorFn);\n    }\n\n    deleteFile(item) {\n        let that = this;\n        let reqData = {\n            id: item.id,\n            patient: item.patient,\n            is_active: false\n        }\n        let successFn = function (data) {\n            that.loadData();\n        }\n        let errorFn = function () {\n            displayMessage(ERROR_MSG_TYPE, \"Please Select Patient.\")\n\n        }\n        postAPI(interpolate(PATIENT_FILES, [this.props.match.params.id]), reqData, successFn, errorFn);\n    }\n\n    loadPDF(id) {\n        let that = this;\n        let successFn = function (data) {\n            if (data.report)\n                window.open(BACKEND_BASE_URL + data.report);\n        }\n        let errorFn = function () {\n\n        }\n        getAPI(interpolate(MEDICAL_CERTIFICATE_PDF, [id]), successFn, errorFn);\n    }\n\n    showModal = (item) => {\n        this.setState(function () {\n            return {visible: true, filesData: {...item}}\n        });\n    };\n\n    handleCancel = () => {\n        this.setState({visible: false});\n    };\n\n    render() {\n        let that = this;\n        const PatientFilesForm = Form.create()(DynamicFieldsForm);\n        const fields = [{\n            key: 'file_type',\n            label: 'File',\n            type: SINGLE_IMAGE_UPLOAD_FIELD,\n            required:true\n        }, {\n            key: 'file_tags',\n            label: 'Tags',\n            type: MULTI_SELECT_FIELD,\n            options: this.state.tags.map(tag => ({label: tag.name, value: tag.id}))\n        }];\n        const formProps = {\n            method: 'post',\n            successFn: function () {\n                that.triggerAddModal(false);\n                that.loadData()\n            },\n            errorFn: function () {\n            },\n            action: interpolate(PATIENT_FILES, [this.props.match.params.id])\n        }\n        const tagsMenu = (<div style={{\n                // width: 100,\n                boxShadow: '0 2px 4px #111',\n                border: '1px solid #bbb',\n                borderRadius: 2,\n                paddingBottom: '30px',\n                backgroundColor: 'white'\n            }}>\n                <ul style={{listStyle: 'none', paddingInlineStart: 0, paddingTop: 10}}>\n                    {this.state.tags ?\n                        <div>\n                            {this.state.tags.map((tag) => <li key={tag.id}>\n                                <Checkbox value={tag.id}\n                                          onChange={(e) => that.tagsCompleteToggle(tag.id, e.target.checked)}\n                                          checked={that.state.selectedTags[tag.id]}>{tag.name} </Checkbox>\n                            </li>)}\n                        </div>\n                        : null}\n                </ul>\n                <span>\n                    <Button type=\"primary\" onClick={() => this.filesWithTags()}\n                            style={{float: \"right\", borderStyle: \"none\"}}>Done</Button>\n                </span>\n            </div>\n        );\n        const defaultFields = [{key: 'is_active', value: true}, {\n            key: 'patient',\n            value: this.props.currentPatient ? this.props.currentPatient.id : null\n        }, {key: 'practice', value: this.props.active_practiceId}]\n\n\n        if (this.props.match.params.id) {\n            return <Card title=\"Files\"\n                         extra={<Button.Group>\n                             <Link to={\"/patient/\" + this.props.match.params.id + \"/emr/create-medicalCertificate\"}>\n                                 <Button\n                                     type=\"primary\">\n                                     <Icon type=\"plus\"/>&nbsp;Add Medical Certificate</Button> </Link>\n\n                             <Dropdown overlay={tagsMenu} trigger={['click']} placement=\"bottomLeft\">\n                                 <Button><Icon type=\"plus\"/>AddFile/remove</Button>\n                             </Dropdown>\n\n                             <Button onClick={() => this.triggerAddModal(true)}><Icon type=\"plus\"/>Add</Button>\n                         </Button.Group>}>\n                <Row gutter={8}>\n                    <Col span={6}\n                         style={{\n                             height: 'calc(100vh - 55px)',\n                             overflow: 'auto',\n                             paddingRight: '10px',\n                             // backgroundColor: '#e3e5e6',\n                             borderRight: '1px solid #ccc'\n                         }}>\n                        <Radio.Group buttonStyle=\"solid\" defaultValue=\"all\" onChange={this.filterTags}>\n                            <h2>Uploaded Files</h2>\n                            <Radio.Button style={{width: '100%', backgroundColor: 'transparent', border: '0px'}}\n                                          value={null}>\n                                All Files</Radio.Button>\n                            {this.state.tags.map(tag => <Radio.Button\n                                key={tag.id}\n                                style={{width: '100%', backgroundColor: 'transparent', border: '0px'}} value={tag.id}>\n                                {tag.name}\n                            </Radio.Button>)}\n\n                            <Radio.Button style={{width: '100%', backgroundColor: 'transparent', border: '0px'}}\n                                          value=\"\">\n                                Untagged Files\n                            </Radio.Button>\n                            <p><br/></p>\n\n                        </Radio.Group>\n\n                        <Radio.Group buttonStyle=\"solid\" defaultValue=\"\">\n                            <h2>Generated Files</h2>\n                            <Radio.Button key=\"0\" style={{width: '100%', backgroundColor: 'transparent', border: '0px'}}\n                                          value=\"a\" onClick={() => this.loadMailedFiles()}>\n                                Emailed Files\n                            </Radio.Button>\n\n                            <Radio.Button key=\"1\" style={{width: '100%', backgroundColor: 'transparent', border: '0px'}}\n                                          onClick={() => this.loadMedicalCertificate()}>\n                                Medical Leave Certificate </Radio.Button>\n                        </Radio.Group>\n                    </Col>\n                    <Col span={18}>\n                        <Row>\n                            {this.state.files.map(item => (\n                                <>\n                                    {item.newDate ? <Col span={24}>\n                                        <Affix top={20} offsetTop={30}><h2 style={{\n                                            marginLeft: '10px',\n                                            padding: '5px',\n                                            backgroundImage: 'linear-gradient(to right, #ddd , white)',\n                                            borderRadius: '4px'\n                                        }}>{moment(item.created_at).format('LL')}</h2></Affix>\n                                    </Col> : null}\n                                    <Col span={8}>\n                                        <div\n                                            // onClick={() => this.showModal(item)}\n                                            style={{\n                                                width: '100%',\n                                                height: '150px',\n                                                border: '1px solid #bbb',\n                                                // background: '#fff url(\"' + makeFileURL(item.file_type) + '\") no-repeat center center',\n                                                backgroundSize: 'cover',\n                                                padding: 'auto',\n                                                overflow: 'hidden'\n\n                                            }}>\n                                            <Checkbox key={item.id}\n                                                      disabled={(item.practice != this.props.active_practiceId)}\n                                                      style={{\n                                                          margin: 10,\n                                                          position: 'absolute',\n                                                          top: 5,\n                                                          left: 5,\n                                                          boxShadow: '0 0px 5px #000 '\n                                                      }}\n                                                      onChange={(e) => that.filesCompleteToggle(item.id, e.target.checked)}\n                                                      checked={that.state.selectedFiles[item.id]}/>\n\n                                            <ModalImage style={{border: \"3px solid red\"}}\n                                                // small={makeFileURL(this.state.filesData.file_type)}\n                                                        large={makeFileURL(item.file_type)}\n                                                        small={makeFileURL(item.file_type)}\n                                                        alt={<Button type=\"danger\"\n                                                                     onClick={() => this.deleteFile(item)}>\n                                                            <Icon type=\"delete\"/></Button>}\n                                            />\n                                        </div>\n                                        <Card bodyStyle={{padding: 3}} style={{marginBottom: 15}}>\n                                                <h4>\n                                                <b>{item.patient_data.user.first_name}&nbsp;({item.patient_data.custom_id})</b>\n                                            </h4>\n                                            <Tag><b>{item.practice_data ? item.practice_data.name : '--'}</b></Tag>\n                                        </Card>\n                                    </Col>\n                                </>\n                            ))}\n                        </Row>\n                        <Row>\n                            <Col span={24}>\n                                <InfiniteFeedLoaderButton loaderFunction={() => this.loadData(that.state.loadMoreFiles)}\n                                                          loading={this.state.loading}\n                                                          hidden={!this.state.loadMoreFiles}/>\n                            </Col>\n                        </Row>\n                        <Card title=\"Medical Certificate\">\n                            <List loading={this.state.loading}\n                                  grid={{gutter: 16, column: 3}}\n                                  dataSource={this.state.medicalCertificate}\n                                  renderItem={item => (\n                                      <Card style={{width: 600}}\n                                            actions={[<p>{\"Issued on : \" + item.date}</p>,\n                                                <a onClick={() => this.loadPDF(item.id)}><Icon type=\"printer\"/></a>,\n                                                <Popconfirm title=\"Are you sure delete this item?\"\n                                                            onConfirm={() => this.deleteMedicalCertificate(item)}\n                                                            okText=\"Yes\" cancelText=\"No\">\n                                                    <Icon type=\"delete\"/>\n                                                </Popconfirm>\n                                            ]}>\n                                          <Meta title={\"Medical Leave #\" + \"\" + item.id}\n                                                description={\"Excused From :\" + item.excused_duty_from + \" till \" + item.excused_duty_to}>\n\n                                          </Meta>\n                                      </Card>\n                                  )}\n                            />\n                            <InfiniteFeedLoaderButton\n                                loaderFunction={() => this.loadData(that.state.loadMoreCertificate)}\n                                loading={this.state.loading}\n                                hidden={!this.state.loadMoreCertificate}/>\n                        </Card>\n\n\n                    </Col>\n\n                </Row>\n                <Modal visible={this.state.showAddModal}\n                       onCancel={() => this.triggerAddModal(false)}\n                       footer={null}>\n                    <PatientFilesForm title=\"Add Files\"\n                                      fields={fields}\n                                      defaultValues={defaultFields}\n                                      formProp={formProps}/>\n                </Modal>\n            </Card>\n        } else {\n            return <Card title=\"Files\"\n                         extra={<Button.Group>\n                             <Button type={\"primary\"} style={{marginRight: \"10px\"}}\n                                     onClick={() => this.props.togglePatientListModal(true)}>\n                                 <Icon type=\"plus\"/>&nbsp; Add Medical Certificate\n                             </Button>\n\n                             <Button type={\"primary\"} style={{marginRight: \"10px\"}}\n                                     onClick={() => this.props.togglePatientListModal(true)}>\n                                 <Icon type=\"plus\"/> &nbsp; AddFile/remove\n                             </Button>\n\n                             <Button type={\"primary\"} style={{marginRight: \"10px\"}}\n                                     onClick={() => this.props.togglePatientListModal(true)}>\n                                 <Icon type=\"plus\"/> &nbsp; Add\n                             </Button>\n                         </Button.Group>}>\n                <Row gutter={8}>\n                    <Col span={6}\n                         style={{\n                             height: 'calc(100vh - 55px)',\n                             overflow: 'auto',\n                             paddingRight: '10px',\n                             // backgroundColor: '#e3e5e6',\n                             borderRight: '1px solid #ccc'\n                         }}>\n                        <Radio.Group buttonStyle=\"solid\" defaultValue=\"all\" onChange={this.filterTags}>\n                            <h2>Uploaded Files</h2>\n                            <Radio.Button style={{width: '100%', backgroundColor: 'transparent', border: '0px'}}\n                                          value={null}>\n                                All Files</Radio.Button>\n                            {this.state.tags.map(tag => <Radio.Button\n                                key={tag.id}\n                                style={{width: '100%', backgroundColor: 'transparent', border: '0px'}} value={tag.id}>\n                                {tag.name}\n                            </Radio.Button>)}\n\n                            <Radio.Button style={{width: '100%', backgroundColor: 'transparent', border: '0px'}}\n                                          value=\"\">\n                                Untagged Files\n                            </Radio.Button>\n                            <p><br/></p>\n\n                        </Radio.Group>\n\n                        <Radio.Group buttonStyle=\"solid\" defaultValue=\"\">\n                            <h2>Generated Files</h2>\n                            <Radio.Button style={{width: '100%', backgroundColor: 'transparent', border: '0px'}}\n                                          value=\"b\" onClick={() => this.loadMailedFiles()}>\n                                Emailed Files\n                            </Radio.Button>\n\n                            <Radio.Button style={{width: '100%', backgroundColor: 'transparent', border: '0px'}}\n                                          onClick={() => this.loadMedicalCertificate()} value=''>\n                                Medical Leave Certificate </Radio.Button>\n                        </Radio.Group>\n                    </Col>\n                    <Col span={18}>\n                        <Row>\n                            {this.state.files.map(item => (\n                                <>\n                                    {item.newDate ? <Col span={24}>\n                                        <Affix top={20} offsetTop={30}><h2 style={{\n                                            marginLeft: '10px',\n                                            padding: '5px',\n                                            backgroundImage: 'linear-gradient(to right, #ddd , white)',\n                                            borderRadius: '4px'\n                                        }}>{moment(item.created_at).format('LL')}</h2></Affix>\n                                    </Col> : null}\n                                    <Col span={8}>\n                                        <div\n                                            // onClick={() => this.showModal(item)}\n                                            style={{\n                                                width: '100%',\n                                                height: '150px',\n                                                border: '1px solid #bbb',\n                                                // background: '#fff url(\"' + makeFileURL(item.file_type) + '\") no-repeat center center',\n                                                backgroundSize: 'cover',\n                                                padding: 'auto',\n                                                overflow: 'hidden'\n\n                                            }}>\n                                            <Checkbox key={item.id}\n                                                      disabled={(item.practice != this.props.active_practiceId)}\n                                                      style={{\n                                                          margin: 10,\n                                                          position: 'absolute',\n                                                          top: 5,\n                                                          left: 5,\n                                                          boxShadow: '0 0px 5px #000 '\n                                                      }}\n                                                      onChange={(e) => that.filesCompleteToggle(item.id, e.target.checked)}\n                                                      checked={that.state.selectedFiles[item.id]}/>\n                                            <ModalImage style={{border: \"3px solid red\"}}\n                                                // small={makeFileURL(this.state.filesData.file_type)}\n                                                        large={makeFileURL(item.file_type)}\n                                                        small={makeFileURL(item.file_type)}\n                                                        alt={<Button type=\"danger\"\n                                                                     onClick={() => this.deleteFile(item)}>\n                                                            <Icon type=\"delete\"/></Button>}\n                                            />\n                                        </div>\n                                        <Card bodyStyle={{padding: 3}} style={{marginBottom: 15}}>\n                                            <Link to={\"/patient/\" + item.patient_data.id + \"/emr/files/\"}><h4>\n                                                <b>{item.patient_data.user.first_name}&nbsp;({item.patient_data.custom_id})</b>\n                                            </h4></Link>\n                                            <Tag><b>{item.practice_data ? item.practice_data.name : '--'}</b></Tag>\n                                        </Card>\n                                    </Col>\n                                </>\n                            ))}\n                        </Row>\n                        <Row>\n                            <Col span={24}>\n                                <InfiniteFeedLoaderButton loaderFunction={() => this.loadData(that.state.loadMoreFiles)}\n                                                          loading={this.state.loading}\n                                                          hidden={!this.state.loadMoreFiles}/>\n                            </Col>\n                        </Row>\n                        <Card title=\"Medical Certificate\">\n                            <List loading={this.state.loading}\n                                  grid={{gutter: 16, column: 3}}\n                                  dataSource={this.state.medicalCertificate}\n                                  renderItem={item => (\n                                      <Card style={{width: 600}}\n                                            actions={[<p>{\"Issued on : \" + item.date}</p>,\n                                                <a onClick={() => this.loadPDF(item.id)}><Icon type=\"printer\"/></a>,\n                                                <Popconfirm title=\"Are you sure delete this item?\"\n                                                            onConfirm={() => this.deleteMedicalCertificate(item)}\n                                                            okText=\"Yes\" cancelText=\"No\">\n                                                    <Icon type=\"delete\"/>\n                                                </Popconfirm>\n                                            ]}>\n                                          <Meta title={\"Medical Leave #\" + \"\" + item.id}\n                                                description={\"Excused From :\" + item.excused_duty_from + \" till \" + item.excused_duty_to}>\n\n                                          </Meta>\n                                      </Card>\n                                  )}\n                            />\n                            <InfiniteFeedLoaderButton\n                                loaderFunction={() => this.loadMedicalCertificate(that.state.loadMoreCertificate)}\n                                loading={this.state.loading}\n                                hidden={!this.state.loadMoreCertificate}/>\n                        </Card>\n\n\n                    </Col>\n\n                </Row>\n                <Modal visible={this.state.showAddModal}\n                       onCancel={() => this.triggerAddModal(false)}\n                       footer={null}>\n                    <PatientFilesForm title=\"Add Files\"\n                                      fields={fields}\n                                      defaultValues={defaultFields}\n                                      formProp={formProps}/>\n                </Modal>\n            </Card>\n        }\n\n    }\n}\n\nexport default PatientFiles;\n","import React from \"react\";\nimport {Route} from \"react-router\";\n\nimport DynamicFieldsForm from \"../../common/DynamicFieldsForm\";\nimport {Button, Card, Form, Icon, Row} from \"antd\";\nimport {\n    CHECKBOX_FIELD,\n    DATE_PICKER,\n    SINGLE_CHECKBOX_FIELD,\n    NUMBER_FIELD,\n    SUCCESS_MSG_TYPE,\n    INPUT_FIELD,\n    RADIO_FIELD,\n    SELECT_FIELD\n} from \"../../../constants/dataKeys\";\nimport {\n    PRESCRIPTIONS_API,\n    DRUG_CATALOG,\n    ALL_PRESCRIPTIONS_API,\n    INVOICES_API,\n    PROCEDURE_CATEGORY, TAXES, PATIENT_CLINIC_NOTES_API\n} from \"../../../constants/api\";\nimport {getAPI, interpolate, displayMessage} from \"../../../utils/common\";\nimport {Redirect} from 'react-router-dom'\nimport moment from 'moment';\n\n\nclass AddClinicNotes extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            redirect: false,\n            drug_catalog: this.props.drug_catalog ? this.props.drug_catalog : null,\n            procedure_category: this.props.procedure_category ? this.props.procedure_category : null,\n            taxes_list: this.props.taxes_list ? this.props.taxes_list : null,\n            editClinicNotes: this.props.editClinicNotes ? this.props.editClinicNotes : null,\n\n        }\n        this.changeRedirect = this.changeRedirect.bind(this);\n        console.log(\"Working or not\");\n\n    }\n\n    componentDidMount() {\n\n    }\n\n    loadDrugCatalog() {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                drug_catalog: data\n            })\n\n        }\n        let errorFn = function () {\n\n        }\n        getAPI(interpolate(DRUG_CATALOG, [this.props.active_practiceId]), successFn, errorFn)\n    }\n\n    loadProcedureCategory() {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                procedure_category: data\n            })\n\n        }\n        let errorFn = function () {\n\n        }\n        getAPI(interpolate(PROCEDURE_CATEGORY, [this.props.active_practiceId]), successFn, errorFn);\n    }\n\n    loadTaxes() {\n        var that = this;\n        let successFn = function (data) {\n            console.log(\"get table\");\n            that.setState({\n                taxes_list: data,\n            })\n        };\n        let errorFn = function () {\n        };\n        getAPI(interpolate(TAXES, [this.props.active_practiceId]), successFn, errorFn);\n\n    }\n\n    changeRedirect() {\n        var redirectVar = this.state.redirect;\n        this.setState({\n            redirect: !redirectVar,\n        });\n    }\n\n    render() {\n\n        const fields = [{\n            label: \"Name\",\n            key: \"name\",\n            required: true,\n            initialValue: this.state.editClinicNotes ? this.state.editClinicNotes.name : null,\n            type: INPUT_FIELD\n        }, {\n            label: \"Chief Complaints\",\n            key: \"chief_complaints\",\n            initialValue: this.state.editClinicNotes ? this.state.editClinicNotes.chief_complaints : null,\n            type: INPUT_FIELD\n        }, {\n            label: \"Investigations\",\n            key: \"investigations\",\n            initialValue: this.state.editClinicNotes ? this.state.editClinicNotes.investigations : null,\n            type: INPUT_FIELD,\n        }, {\n            label: \"Diagnosis\",\n            key: \"diagnosis\",\n            initialValue: this.state.editClinicNotes ? this.state.editClinicNotes.diagnosis : null,\n            type: INPUT_FIELD,\n        }, {\n            label: \"Notes\",\n            key: \"notes\",\n            initialValue: this.state.editClinicNotes ? this.state.editClinicNotes.notes : null,\n            type: INPUT_FIELD,\n        }, {\n            label: \"Observations\",\n            key: \"observations\",\n            initialValue: this.state.editClinicNotes ? this.state.editClinicNotes.observations : null,\n            type: INPUT_FIELD,\n        }];\n\n\n        let editformProp;\n        const TestFormLayout = Form.create()(DynamicFieldsForm);\n        let that = this;\n        const formProp = {\n            successFn: function (data) {\n                displayMessage(SUCCESS_MSG_TYPE, \"success\")\n                if (that.props.loadData)\n                    that.props.loadData()\n                console.log(data);\n            },\n            errorFn: function () {\n\n            },\n            action: interpolate(PATIENT_CLINIC_NOTES_API, [this.props.match.params.id]),\n            method: \"post\",\n        }\n        let defaultValues = [{key: 'is_active', value: true}]\n        if (this.state.editClinicNotes) {\n            defaultValues = [{key: 'is_active', value: true}, {\"key\": \"id\", \"value\": this.state.editClinicNotes.id}];\n        }\n        return <Row>\n            <Card>\n                <Route exact path='/patient/:id/emr/clinicnotes/edit'\n                       render={() => (this.state.editClinicNotes ?\n                           <TestFormLayout defaultValues={defaultValues} title=\"Edit Clinic notes\"\n                                           changeRedirect={this.changeRedirect} formProp={formProp} fields={fields}/> :\n                           <Redirect to={'/patient/' + this.props.match.params.id + '/billing/invoices'}/>)}/>\n                <Route exact path='/patient/:id/emr/clinicnotes/add'\n                       render={() => <TestFormLayout title=\"Add Clinic Notes\" changeRedirect={this.changeRedirect}\n                                                     formProp={formProp} fields={fields}/>}/>\n\n\n            </Card>\n            {this.state.redirect && <Redirect to={'/patient/' + this.props.match.params.id + '/emr/clinicnotes'}/>}\n        </Row>\n\n    }\n}\n\nexport default AddClinicNotes;\n","import React from \"react\";\nimport {\n    Row,\n    Card,\n    Col,\n    Form,\n    Tabs,\n    Button,\n    Icon,\n    List,\n    Input,\n    Divider,\n    Affix,\n    DatePicker,\n    Menu,\n    Dropdown,\n    Modal\n} from 'antd';\nimport {displayMessage, getAPI, interpolate, postAPI} from \"../../../utils/common\";\nimport {\n    EMR_COMPLAINTS,\n    EMR_DIAGNOSES,\n    EMR_INVESTIGATIONS, EMR_MEDICATION,\n    EMR_OBSERVATIONS,\n    EMR_TREATMENTNOTES, PATIENT_CLINIC_NOTES_API\n} from \"../../../constants/api\";\nimport DynamicFieldsForm from \"../../common/DynamicFieldsForm\";\nimport {INPUT_FIELD, SUCCESS_MSG_TYPE} from \"../../../constants/dataKeys\";\nimport {CUSTOM_STRING_SEPERATOR} from \"../../../constants/hardData\";\nimport {loadDoctors} from \"../../../utils/clinicUtils\";\nimport moment from \"moment\";\n\nconst {TabPane} = Tabs;\nconst tabLists = ['Complaints', 'Observations', 'Diagnoses', 'Investigations', 'Notes','Recent Medication'];\nconst tabResourcesAPI = {\n    'Complaints': EMR_COMPLAINTS,\n    'Observations': EMR_OBSERVATIONS,\n    'Diagnoses': EMR_DIAGNOSES,\n    'Investigations': EMR_INVESTIGATIONS,\n    'Notes': EMR_TREATMENTNOTES,\n    'Recent Medication' : EMR_MEDICATION\n};\nlet id = 0;\n\nclass AddClinicNotesDynamic extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            resourceList: {},\n            filteredResourceList: {},\n            filterStrings: {},\n            practiceDoctors: [],\n            selectedDoctor: {},\n            selectedDate: moment(),\n            resourceAddModal: null,\n            selectedTab: 'Complaints',\n            editClinicNotes: this.props.editClinicNotes ? this.props.editClinicNotes : null,\n\n        }\n    }\n\n    componentDidMount() {\n        loadDoctors(this);\n        this.loadRequiredResources(interpolate(EMR_COMPLAINTS, [this.props.active_practiceId]), 'Complaints');\n        this.loadRequiredResources(interpolate(EMR_OBSERVATIONS, [this.props.active_practiceId]), 'Observations');\n        this.loadRequiredResources(interpolate(EMR_DIAGNOSES, [this.props.active_practiceId]), 'Diagnoses');\n        this.loadRequiredResources(interpolate(EMR_INVESTIGATIONS, [this.props.active_practiceId]), 'Investigations');\n        this.loadRequiredResources(interpolate(EMR_TREATMENTNOTES, [this.props.active_practiceId]), 'Notes');\n        this.loadRequiredResources(interpolate(EMR_MEDICATION, [this.props.active_practiceId]), 'Recent Medication');\n        if (this.state.editClinicNotes) {\n            this.setInitialData();\n        }\n    }\n\n    setInitialData = () => {\n        let that = this;\n        let initialData = this.state.editClinicNotes;\n        if (initialData.chief_complaints)\n            initialData.chief_complaints.split(CUSTOM_STRING_SEPERATOR).forEach(str => setTimeout(function () {\n                if (str.length)\n                    that.addValues('Complaints', str)\n            }, 500));\n        if (initialData.investigations)\n            initialData.investigations.split(CUSTOM_STRING_SEPERATOR).forEach(str => setTimeout(function () {\n                if (str.length)\n                    that.addValues('Investigations', str)\n            }, 500));\n        if (initialData.diagnosis)\n            initialData.diagnosis.split(CUSTOM_STRING_SEPERATOR).forEach(str => setTimeout(function () {\n                if (str.length)\n                    that.addValues('Diagnoses', str)\n            }, 500));\n        if (initialData.notes)\n            initialData.notes.split(CUSTOM_STRING_SEPERATOR).forEach(str => setTimeout(function () {\n                if (str.length)\n                    that.addValues('Notes', str)\n            }, 500));\n        if (initialData.observations)\n            initialData.observations.split(CUSTOM_STRING_SEPERATOR).forEach(str => setTimeout(function () {\n                if (str.length)\n                    that.addValues('Observations', str)\n            }, 500));\n        if (initialData.medication)\n            initialData.medication.split(CUSTOM_STRING_SEPERATOR).forEach(str => setTimeout(function () {\n                if (str.length)\n                    that.addValues('Recent Medication', str)\n            }, 500));\n\n    }\n    loadRequiredResources = (API, key) => {\n        let that = this;\n        let successFn = function (data) {\n            that.setState(function (prevState) {\n                let newResources = {...prevState.resourceList, [key]: data}\n                return {\n                    resourceList: newResources,\n                    filteredResourceList: newResources,\n                    filterStrings: {}\n                }\n            })\n        }\n        let errorFn = function () {\n            console.log(key + \" fetching error\");\n        }\n        getAPI(API, successFn, errorFn);\n    }\n    add = (tab) => {\n        const {form} = this.props;\n        // can use data-binding to get\n        const keys = form.getFieldValue(tab);\n        const nextKeys = keys.concat(++id);\n        // can use data-binding to set\n        // important! notify form to detect changes\n        form.setFieldsValue({\n            [tab]: nextKeys,\n        });\n    };\n    remove = (tab, k) => {\n        const {form} = this.props;\n        // can use data-binding to get\n        const keys = form.getFieldValue(tab);\n        // We need at least one passenger\n        if (keys.length === 1) {\n            return;\n        }\n\n        // can use data-binding to set\n        form.setFieldsValue({\n            [tab]: keys.filter(key => key !== k),\n        });\n    };\n    addValues = (tab, value) => {\n        const {form} = this.props;\n        // can use data-binding to get\n        const keys = form.getFieldValue(tab);\n        const nextKeys = keys.concat(++id);\n        // can use data-binding to set\n        // important! notify form to detect changes\n        form.setFieldsValue({\n            [tab]: nextKeys,\n            [`field[${keys[keys.length - 1]}]`]: value,\n        });\n    }\n    changeValues = (tab, id) => {\n        const {form} = this.props;\n        // can use data-binding to get\n        const keys = form.getFieldValue(tab);\n        if (keys.indexOf(id) == keys.length - 1) {\n            this.add(tab);\n        }\n    }\n    toggleModal = (option) => {\n        let prevsOption = null;\n        let that = this;\n        this.setState(function (prevState) {\n            console.log(prevState.resourceAddModal);\n            if (prevState.resourceAddModal)\n                prevsOption = prevState.resourceAddModal;\n            return {resourceAddModal: option}\n        }, function () {\n            if (prevsOption) {\n                that.loadRequiredResources(interpolate(tabResourcesAPI[prevsOption], [that.props.active_practiceId]), prevsOption);\n            }\n        });\n\n    }\n    searchValues = (type, value) => {\n        let that = this;\n        this.setState(function (prevState) {\n            let searchValues = {...prevState.searchStrings};\n            searchValues[type] = value;\n            return {searchStrings: searchValues}\n        }, function () {\n            that.filterValues(type);\n        });\n    }\n    filterValues = (type) => {\n        this.setState(function (prevState) {\n            let filteredItemOfGivenType = [];\n            if (prevState.resourceList[type]) {\n                if (prevState.searchStrings[type]) {\n                    prevState.resourceList[type].forEach(function (item) {\n                        if (item.name && item.name\n                            .toString()\n                            .toLowerCase()\n                            .includes(prevState.searchStrings[type].toLowerCase())) {\n                            filteredItemOfGivenType.push(item);\n                        }\n                    });\n                } else {\n                    filteredItemOfGivenType = prevState.resourceList[type];\n                }\n            }\n            return {\n                filteredResourceList: {...prevState.filteredResourceList, [type]: filteredItemOfGivenType}\n            }\n        });\n    }\n\n    handleSubmit = (e) => {\n        let that = this;\n        e.preventDefault();\n        this.props.form.validateFieldsAndScroll((err, values) => {\n            if (!err) {\n                let reqData = {};\n                reqData.chief_complaints = values.Complaints.map(id => values.field[id]).join(CUSTOM_STRING_SEPERATOR);\n                reqData.investigations = values.Investigations.map(id => values.field[id]).join(CUSTOM_STRING_SEPERATOR);\n                reqData.diagnosis = values.Diagnoses.map(id => values.field[id]).join(CUSTOM_STRING_SEPERATOR);\n                reqData.notes = values.Notes.map(id => values.field[id]).join(CUSTOM_STRING_SEPERATOR);\n                reqData.observations = values.Observations.map(id => values.field[id]).join(CUSTOM_STRING_SEPERATOR);\n                reqData.medication = values['Recent Medication'].map(id => values.field[id]).join(CUSTOM_STRING_SEPERATOR);\n                reqData.patient = that.props.match.params.id;\n                reqData.practice = that.props.active_practiceId;\n                reqData.doctor = that.state.selectedDoctor && that.state.selectedDoctor.id ? that.state.selectedDoctor.id : that.state.selectedDoctor;\n                reqData.date = that.state.selectedDate && moment(that.state.selectedDate).isValid() ? moment(that.state.selectedDate).format('YYYY-MM-DD') : null\n                if (that.state.editClinicNotes)\n                    reqData.id = that.state.editClinicNotes.id;\n                let successFn = function (data) {\n                    if (that.props.loadData)\n                        that.props.loadData();\n                    that.props.history.push('/patient/' + that.props.match.params.id + '/emr/clinicnotes/');\n                }\n                let errorFn = function () {\n\n                }\n                postAPI(interpolate(PATIENT_CLINIC_NOTES_API, [this.props.match.params.id]), reqData, successFn, errorFn);\n            }\n        });\n\n    }\n    changeTab = (e, tab) => {\n        // this.setState({\n        //     selectedTab: tab\n        // });\n\n\n    }\n    selectDoctor = (doctor) => {\n        this.setState({\n            selectedDoctor: doctor\n        })\n    }\n    selectedDate = (date) => {\n        this.setState({\n            selectedDate: date\n        })\n    }\n\n    render() {\n        let that = this;\n        const {getFieldDecorator, getFieldValue} = this.props.form;\n        const formItemLayout = {\n            labelCol: {\n                xs: {span: 24},\n                sm: {span: 4},\n            },\n            wrapperCol: {\n                xs: {span: 24},\n                sm: {span: 20},\n            },\n        };\n        let keysObject = {};\n        tabLists.forEach(function (tab) {\n            getFieldDecorator(tab, {initialValue: [++id]});\n            keysObject[tab] = getFieldValue(tab);\n        });\n\n\n        const keys = keysObject;\n        const ResourceAddForm = Form.create()(DynamicFieldsForm);\n        return <Card>\n            <Row>\n                <Col span={18}>\n                    <h2>Clinical Notes</h2>\n                    <Form onSubmit={this.handleSubmit}>\n                        {tabLists.map(tab =>\n                            <div>\n                                <Divider style={{margin: 5}}>{tab}</Divider>\n                                <div style={{\n                                    backgroundColor: (tab == that.state.selectedTab ? '#ddd' : 'initial'),\n                                    padding: 10\n                                }}>\n                                    {keys[tab].map((k, index) => (\n                                        <Form.Item\n                                            {...formItemLayout}\n                                            label={tab + ' ' + (index + 1)}\n                                            key={k}>\n                                            {getFieldDecorator(`field[${k}]`, {\n                                                validateTrigger: ['onChange', 'onBlur'],\n                                                rules: [{\n                                                    whitespace: true,\n                                                }],\n                                            })(<Input placeholder={tab} style={{width: '60%', marginRight: 8}}\n                                                      key={k}\n                                                      onFocus={(e) => that.changeTab(e, tab)}\n                                                      onChange={() => that.changeValues(tab, k)}/>)}\n                                            {keys[tab].length - 1 != index ? (\n                                                <Button\n                                                    shape={\"circle\"}\n                                                    type={\"danger\"}\n                                                    size={\"small\"}\n                                                    icon=\"delete\"\n                                                    onClick={() => this.remove(tab, k)}\n                                                />\n                                            ) : null}\n                                        </Form.Item>\n                                    ))}\n                                </div>\n                            </div>\n                        )}\n                        <Affix offsetBottom={0}>\n                            <Card>\n                                <Row>\n                                    <span>by &nbsp;&nbsp;</span>\n                                    <Dropdown placement=\"topCenter\" overlay={<Menu>\n                                        {this.state.practiceDoctors.map(doctor =>\n                                            <Menu.Item key=\"0\">\n                                                <a onClick={() => this.selectDoctor(doctor)}>{doctor.user.first_name}</a>\n                                            </Menu.Item>)}\n                                    </Menu>} trigger={['click']}>\n                                        <a className=\"ant-dropdown-link\" href=\"#\">\n                                            <b>\n                                                {this.state.selectedDoctor.user ? this.state.selectedDoctor.user.first_name : 'No DOCTORS Found'}\n                                            </b>\n                                        </a>\n                                    </Dropdown>\n                                    <span> &nbsp;&nbsp;on&nbsp;&nbsp;</span>\n                                    <DatePicker value={this.state.selectedDate}\n                                                allowClear={false}\n                                                onChange={(value) => this.selectedDate(value)} format={\"DD-MM-YYYY\"}/>\n                                    <Button type=\"primary\" htmlType=\"submit\" style={{float: 'right', margin: 5}}>\n                                        Save\n                                    </Button>\n                                    {that.props.history ?\n                                        <Button style={{margin: 5, float: 'right'}}\n                                                onClick={() => that.props.history.goBack()}>\n                                            Cancel\n                                        </Button> : null}\n                                </Row>\n                                <Row>\n                                    Next Follow up\n                                </Row>\n                            </Card>\n                        </Affix>\n                    </Form>\n                </Col>\n                <Col span={6}>\n                    <Tabs type={\"card\"}>\n                        {tabLists.map(tabList => <TabPane tab={tabList} key={tabList}>\n                            <div style={{padding: 5}}>\n                                <Button type={\"primary\"} block size={\"small\"} onClick={() => that.toggleModal(tabList)}>\n                                    <Icon type={\"plus\"}/>Add&nbsp;{tabList}\n                                </Button>\n                                <div style={{backgroundColor: '#ddd', padding: 8}}>\n                                    <Input.Search placeholder={\"Search in \" + tabList + \" ...\"}\n                                                  onChange={e => this.searchValues(tabList, e.target.value)}/>\n                                </div>\n                                <List key={tabList} size={'small'} dataSource={that.state.filteredResourceList[tabList]}\n                                      renderItem={item => <List.Item\n                                          key={item.id}\n                                          onClick={() => this.addValues(tabList, item.name)}>\n                                          {item.name}\n                                      </List.Item>}/>\n                            </div>\n                        </TabPane>)}\n                    </Tabs>\n                </Col>\n                <Modal visible={!!this.state.resourceAddModal}\n                       onCancel={() => that.toggleModal(null)}\n                       title={\"Add \" + this.state.resourceAddModal}\n                       footer={null}>\n                    {this.state.resourceAddModal ?\n                        <ResourceAddForm\n                            fields={[{\n                                label: this.state.resourceAddModal,\n                                required: true,\n                                type: INPUT_FIELD,\n                                key: 'name'\n                            }]}\n                            defaultValues={[{key: 'practice', value: this.props.active_practiceId}]}\n                            formProp={{\n                                method: 'post',\n                                action: interpolate(tabResourcesAPI[this.state.resourceAddModal], [this.props.active_practiceId]),\n                                successFn: function () {\n                                    that.toggleModal(null);\n                                    displayMessage(SUCCESS_MSG_TYPE, that.state.resourceAddModal + \" added successfully!!\");\n                                },\n                                errorFn: function (err) {\n                                    console.log(err);\n                                }\n                            }}\n                        /> : null}\n                </Modal>\n            </Row>\n        </Card>\n    }\n}\n\nexport default Form.create()(AddClinicNotesDynamic)\n","import {Button, Card, Checkbox, Divider, Icon, Table, Dropdown, Menu, Col, Row, Tag, Spin, Tooltip, Avatar} from \"antd\";\nimport React from \"react\";\nimport {getAPI, interpolate, postAPI, putAPI} from \"../../../utils/common\";\nimport {INVOICES_API, PATIENT_CLINIC_NOTES_API, CLINIC_NOTES_PDF} from \"../../../constants/api\";\nimport moment from \"moment\";\nimport {Route, Switch} from \"react-router\";\nimport {Link, Redirect} from \"react-router-dom\";\nimport AddClinicNotes from \"./AddClinicNotes\";\nimport {CUSTOM_STRING_SEPERATOR} from \"../../../constants/hardData\";\nimport AddClinicNotesDynamic from \"./AddClinicNotesDynamic\";\nimport {Modal} from \"antd/lib/index\";\nimport {BACKEND_BASE_URL} from \"../../../config/connect\";\nimport InfiniteFeedLoaderButton from \"../../common/InfiniteFeedLoaderButton\";\n\nconst confirm = Modal.confirm;\n\nclass PatientClinicNotes extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            currentPatient: this.props.currentPatient,\n            active_practiceId: this.props.active_practiceId,\n            clinicNotes: [],\n            editClinicNotes: null,\n            loading: true,\n\n        }\n        this.loadClinicNotes = this.loadClinicNotes.bind(this);\n        this.editClinicNotesData = this.editClinicNotesData.bind(this);\n    }\n\n    componentDidMount() {\n        // if (this.props.match.params.id) {\n        this.loadClinicNotes();\n        // }\n\n    }\n\n    loadClinicNotes(page = 1) {\n        let that = this;\n        let successFn = function (data) {\n            that.setState(function (prevState) {\n                if (data.current == 1)\n                    return {\n                        clinicNotes: [...data.results],\n                        next: data.next,\n                        loading: false\n                    }\n                return {\n                    clinicNotes: [...prevState.clinicNotes, ...data.results],\n                    next: data.next,\n                    loading: false\n                }\n            })\n        }\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            })\n\n        }\n        let apiParams = {\n            page: page,\n            practice: this.props.active_practiceId\n        };\n        if (this.props.match.params.id) {\n            apiParams.patient = this.props.match.params.id;\n        }\n        if (this.props.showAllClinic && this.props.match.params.id) {\n            delete (apiParams.practice)\n        }\n\n        getAPI(PATIENT_CLINIC_NOTES_API, successFn, errorFn, apiParams)\n\n    }\n\n\n    editClinicNotesData(record) {\n        this.setState({\n            editClinicNotes: record,\n            loading: false\n        });\n        let id = this.props.match.params.id\n        this.props.history.push(\"/patient/\" + id + \"/emr/clinicnotes/edit\")\n\n    }\n\n    deleteClinicNote(record) {\n        let that = this;\n        confirm({\n            title: 'Are you sure to delete this item?',\n            okText: 'Yes',\n            okType: 'danger',\n            cancelText: 'No',\n            onOk() {\n                let reqData = {id: record.id, patient: record.patient, is_active: false};\n                let successFn = function (data) {\n                    that.loadClinicNotes();\n                }\n                let errorFn = function () {\n                }\n                postAPI(interpolate(PATIENT_CLINIC_NOTES_API, [that.props.match.params.id]), reqData, successFn, errorFn);\n            },\n            onCancel() {\n                console.log('Cancel');\n            },\n        });\n    }\n\n    loadPDF(id) {\n        let that = this;\n        let successFn = function (data) {\n            if (data.report)\n                window.open(BACKEND_BASE_URL + data.report);\n        }\n        let errorFn = function () {\n\n        }\n        getAPI(interpolate(CLINIC_NOTES_PDF, [id]), successFn, errorFn);\n    }\n\n    render() {\n        let that = this;\n        const columns = [{\n            title: 'Time',\n            dataIndex: 'created_at',\n            key: 'name',\n            render: created_at => <span>{moment(created_at).format('LLL')}</span>,\n        }, {\n            title: 'Name',\n            dataIndex: 'name',\n            key: 'name',\n        }, {\n            title: 'Chief Complaints',\n            dataIndex: 'chief_complaints',\n            key: 'chief_complaints',\n        }, {\n            title: 'Investigations',\n            dataIndex: 'investigations',\n            key: 'investigations',\n        }, {\n            title: 'Diagnosis',\n            dataIndex: 'diagnosis',\n            key: 'diagnosis',\n        }, {\n            title: 'Notes',\n            dataIndex: 'notes',\n            key: 'notes',\n        }, {\n            title: 'Observations',\n            dataIndex: 'observations',\n            key: 'observations',\n        }, {\n            title: 'Action',\n            key: 'action',\n            render: (text, record) => (\n                <span>\n                <a onClick={() => this.editClinicNotesData(record)}>Edit</a>\n                <Divider type=\"vertical\"/>\n                <a href=\"javascript:;\">Delete</a>\n              </span>\n            ),\n        }];\n\n        if (this.props.match.params.id) {\n            return <div><Switch>\n                <Route exact path='/patient/:id/emr/clinicnotes/add'\n                       render={(route) => <AddClinicNotesDynamic {...route}\n                                                                 {...this.props}\n                                                                 loadData={this.loadClinicNotes}/>}/>\n                <Route exact path='/patient/:id/emr/clinicnotes/edit'\n                       render={(route) => (this.state.editClinicNotes ? <AddClinicNotesDynamic {...this.state}\n                                                                                               {...route}\n                                                                                               loadData={this.loadClinicNotes}/> :\n                           <Redirect to={'/patient/' + that.props.match.params.id + '/emr/clinicnotes/'}/>)}/>\n                <Route>\n                    <div>\n                        <Card bodyStyle={{padding: 0}}\n                              title={this.state.currentPatient ? this.state.currentPatient.user.first_name + \" ClinicNotes\" : \"ClinicNotes\"}\n                              extra={<Button.Group>\n                                  <Link to={\"/patient/\" + this.props.match.params.id + \"/emr/clinicnotes/add\"}>\n                                      <Button type={\"primary\"}>\n                                          <Icon type=\"plus\"/>Add\n                                      </Button>\n                                  </Link>\n                              </Button.Group>}>\n\n                            {/*<Table loading={this.state.loading} columns={columns} dataSource={this.state.clinicNotes}/>*/}\n\n                        </Card>\n                        {this.state.clinicNotes.map(clinicNote => <Card\n                            style={{marginTop: 20}}\n                            title={<small>{clinicNote.date ? moment(clinicNote.date).format('ll') : null}</small>}\n                            extra={<Dropdown.Button\n                                size={\"small\"}\n                                style={{float: 'right'}}\n                                overlay={<Menu>\n                                    <Menu.Item key=\"1\"\n                                               onClick={() => that.editClinicNotesData(clinicNote)}\n                                               disabled={(clinicNote.practice && clinicNote.practice.id != this.props.active_practiceId)}>\n                                        <Icon type=\"edit\"/>\n                                        Edit\n                                    </Menu.Item>\n                                    <Menu.Item key=\"2\"\n                                               onClick={() => that.deleteClinicNote(clinicNote)}\n                                               disabled={(clinicNote.practice && clinicNote.practice.id != this.props.active_practiceId)}>\n                                        <Icon type=\"delete\"/>\n                                        Delete\n                                    </Menu.Item>\n                                    <Menu.Divider/>\n                                    <Menu.Item key=\"3\">\n                                        <Link\n                                            to={\"/patient/\" + clinicNote.patient + \"/emr/timeline\"}>\n                                            <Icon\n                                                type=\"clock-circle\"/>\n                                            &nbsp;\n                                            Patient Timeline\n                                        </Link>\n                                    </Menu.Item>\n                                </Menu>}>\n                                <a onClick={() => this.loadPDF(clinicNote.id)}><Icon\n                                    type=\"printer\"/>\n                                </a>\n\n                            </Dropdown.Button>}>\n\n\n                            <Row>\n                                <Col span={6}>\n                                    <h3>Complaints</h3>\n                                </Col>\n                                <Col span={18} style={{borderLeft: '1px solid #ccc', padding: 4}}>\n                                    <div style={{minHeight: 30}}>\n                                        {clinicNote.chief_complaints ? clinicNote.chief_complaints.split(CUSTOM_STRING_SEPERATOR).map((str, index) =>\n                                            <span>{index ? <br/> : null}{str}</span>) : null}\n                                    </div>\n                                    <Divider style={{margin: 0}}/>\n                                </Col>\n                            </Row>\n                            <Row>\n                                <Col span={6}>\n                                    <h3>Observations</h3>\n                                </Col>\n                                <Col span={18} style={{borderLeft: '1px solid #ccc', padding: 4}}>\n                                    <div style={{minHeight: 30}}>\n                                        {clinicNote.observations ? clinicNote.observations.split(CUSTOM_STRING_SEPERATOR).map((str, index) =>\n                                            <span>{index ? <br/> : null}{str}</span>) : null}\n                                    </div>\n                                    <Divider style={{margin: 0}}/>\n                                </Col>\n                            </Row>\n                            <Row>\n                                <Col span={6}>\n                                    <h3>Investigations</h3>\n                                </Col>\n                                <Col span={18} style={{borderLeft: '1px solid #ccc', padding: 4}}>\n                                    <div style={{minHeight: 30}}>\n                                        {clinicNote.investigations ? clinicNote.investigations.split(CUSTOM_STRING_SEPERATOR).map((str, index) =>\n                                            <span>{index ? <br/> : null}{str}</span>) : null}\n                                    </div>\n                                    <Divider style={{margin: 0}}/>\n                                </Col>\n                            </Row>\n                            <Row>\n                                <Col span={6}>\n                                    <h3>Diagnoses</h3>\n                                </Col>\n                                <Col span={18} style={{borderLeft: '1px solid #ccc', padding: 4}}>\n                                    <div style={{minHeight: 30}}>\n                                        {clinicNote.diagnosis ? clinicNote.diagnosis.split(CUSTOM_STRING_SEPERATOR).map((str, index) =>\n                                            <span>{index ? <br/> : null}{str}</span>) : null}\n                                    </div>\n                                    <Divider style={{margin: 0}}/>\n                                </Col>\n                            </Row>\n                            <Row>\n                                <Col span={6}>\n                                    <h3>Notes</h3>\n                                </Col>\n                                <Col span={18} style={{borderLeft: '1px solid #ccc', padding: 4}}>\n                                    <div style={{minHeight: 30}}>\n                                        {clinicNote.notes ? clinicNote.notes.split(CUSTOM_STRING_SEPERATOR).map((str, index) =>\n                                            <span>{index ? <br/> : null}{str}</span>) : null}\n                                    </div>\n                                    <Divider style={{margin: 0}}/>\n                                </Col>\n                            </Row>\n                            <Row>\n                                <Col span={6}>\n                                    <h3>Recent Medications</h3>\n                                </Col>\n                                <Col span={18} style={{borderLeft: '1px solid #ccc', padding: 4}}>\n                                    <div style={{minHeight: 30}}>\n                                        {clinicNote.medication ? clinicNote.medication.split(CUSTOM_STRING_SEPERATOR).map((str, index) =>\n                                            <span>{index ? <br/> : null}{str}</span>) : null}\n                                    </div>\n                                    <Divider style={{margin: 0}}/>\n                                </Col>\n                            </Row>\n                            <div>\n                                {clinicNote.doctor ?\n                                    <Tag color={clinicNote.doctor ? clinicNote.doctor.calendar_colour : null}>\n                                        <b>{\"prescribed by  \" + clinicNote.doctor.user.first_name} </b>\n                                    </Tag> : null}\n                                {clinicNote.practice ? <Tag style={{float: 'right'}}>\n                                    <Tooltip title=\"Practice Name\">\n                                        <b>{clinicNote.practice.name} </b>\n                                    </Tooltip>\n                                </Tag> : null}\n                            </div>\n                        </Card>)}\n                        <Spin spinning={this.state.loading}>\n                            <Row/>\n                        </Spin>\n                        <InfiniteFeedLoaderButton loaderFunction={() => this.loadClinicNotes(that.state.next)}\n                                                  loading={this.state.loading}\n                                                  hidden={!this.state.next}/>\n                    </div>\n                </Route>\n            </Switch>\n            </div>\n        }\n        else {\n            return <div>\n                <Card bodyStyle={{padding: 0}}\n                      title={this.state.currentPatient ? this.state.currentPatient.user.first_name + \" Clinic Notes\" : \"Clinic Notes\"}\n                      extra={<Button.Group>\n                          <Button type={\"primary\"} onClick={() => this.props.togglePatientListModal(true)}>\n                              <Icon type=\"plus\"/>Add\n                          </Button>\n                      </Button.Group>}/>\n                {this.state.clinicNotes.map(clinicNote => <Card\n                    style={{marginTop: 10}} key={clinicNote.id}\n                    extra={<Dropdown.Button\n                        size={\"small\"}\n                        overlay={<Menu>\n                            <Menu.Item key=\"1\"\n                                       onClick={() => that.editClinicNotesData(clinicNote)}\n                                       disabled={(clinicNote.practice && clinicNote.practice.id != this.props.active_practiceId)}>\n                                <Icon type=\"edit\"/>\n                                Edit\n                            </Menu.Item>\n                            <Menu.Item key=\"2\"\n                                       onClick={() => that.deleteClinicNote(clinicNote)}\n                                       disabled={(clinicNote.practice && clinicNote.practice.id != this.props.active_practiceId)}>\n                                <Icon type=\"delete\"/>\n                                Delete\n                            </Menu.Item>\n                            <Menu.Divider/>\n                            <Menu.Item key=\"3\">\n                                <Link\n                                    to={\"/patient/\" + clinicNote.patient + \"/emr/timeline\"}>\n                                    <Icon type=\"clock-circle\"/>\n                                    &nbsp;\n                                    Patient Timeline\n                                </Link>\n                            </Menu.Item>\n                        </Menu>}>\n                        <a onClick={() => this.loadPDF(clinicNote.id)}><Icon\n                            type=\"printer\"/></a>\n                    </Dropdown.Button>}\n                    title={<div>\n                        <small>{clinicNote.date ? moment(clinicNote.date).format('ll') : null}\n                            <Link to={\"/patient/\" + clinicNote.patient.id + \"/emr/clinicnotes\"}>\n                                &nbsp;&nbsp; {clinicNote.patient.user ? clinicNote.patient.user.first_name : null} (ID: {clinicNote.patient.custom_id?clinicNote.patient.custom_id:clinicNote.patient.id})&nbsp;\n                            </Link>\n                            <span>, {clinicNote.patient.gender}</span>\n                        </small>\n                    </div>}>\n                    <Row>\n                        <Col span={6}>\n                            <h3>Complaints</h3>\n                        </Col>\n                        <Col span={18} style={{borderLeft: '1px solid #ccc', padding: 4}}>\n                            <div style={{minHeight: 30}}>\n                                {clinicNote.chief_complaints ? clinicNote.chief_complaints.split(CUSTOM_STRING_SEPERATOR).map((str, index) =>\n                                    <span key={str}>{index ? <br/> : null}{str}</span>) : null}\n                            </div>\n                            <Divider style={{margin: 0}}/>\n                        </Col>\n                    </Row>\n                    <Row>\n                        <Col span={6}>\n                            <h3>Observations</h3>\n                        </Col>\n                        <Col span={18} style={{borderLeft: '1px solid #ccc', padding: 4}}>\n                            <div style={{minHeight: 30}}>\n                                {clinicNote.observations ? clinicNote.observations.split(CUSTOM_STRING_SEPERATOR).map((str, index) =>\n                                    <span key={str}>{index ? <br/> : null}{str}</span>) : null}\n                            </div>\n                            <Divider style={{margin: 0}}/>\n                        </Col>\n                    </Row>\n                    <Row>\n                        <Col span={6}>\n                            <h3>Investigations</h3>\n                        </Col>\n                        <Col span={18} style={{borderLeft: '1px solid #ccc', padding: 4}}>\n                            <div style={{minHeight: 30}}>\n                                {clinicNote.investigations ? clinicNote.investigations.split(CUSTOM_STRING_SEPERATOR).map((str, index) =>\n                                    <span key={str}>{index ? <br/> : null}{str}</span>) : null}\n                            </div>\n                            <Divider style={{margin: 0}}/>\n                        </Col>\n                    </Row>\n                    <Row>\n                        <Col span={6}>\n                            <h3>Diagnoses</h3>\n                        </Col>\n                        <Col span={18} style={{borderLeft: '1px solid #ccc', padding: 4}}>\n                            <div style={{minHeight: 30}}>\n                                {clinicNote.diagnosis ? clinicNote.diagnosis.split(CUSTOM_STRING_SEPERATOR).map((str, index) =>\n                                    <span key={str}>{index ? <br/> : null}{str}</span>) : null}\n                            </div>\n                            <Divider style={{margin: 0}}/>\n                        </Col>\n                    </Row>\n                    <Row>\n                        <Col span={6}>\n                            <h3>Notes</h3>\n                        </Col>\n                        <Col span={18} style={{borderLeft: '1px solid #ccc', padding: 4}}>\n                            <div style={{minHeight: 30}}>\n                                {clinicNote.notes ? clinicNote.notes.split(CUSTOM_STRING_SEPERATOR).map((str, index) =>\n                                    <span key={str}>{index ? <br/> : null}{str}</span>) : null}\n                            </div>\n                            <Divider style={{margin: 0}}/>\n                        </Col>\n                    </Row>\n                    <Row>\n                        <Col span={6}>\n                            <h3>Recent Medications</h3>\n                        </Col>\n                        <Col span={18} style={{borderLeft: '1px solid #ccc', padding: 4}}>\n                            <div style={{minHeight: 30}}>\n                                {clinicNote.medication ? clinicNote.medication.split(CUSTOM_STRING_SEPERATOR).map((str, index) =>\n                                    <span>{index ? <br/> : null}{str}</span>) : null}\n                            </div>\n                            <Divider style={{margin: 0}}/>\n                        </Col>\n                    </Row>\n                    <div>\n                        {clinicNote.doctor ?\n                            <Tag color={clinicNote.doctor ? clinicNote.doctor.calendar_colour : null}>\n                                <b>{\"prescribed by  \" + clinicNote.doctor.user.first_name} </b>\n                            </Tag> : null}\n                        {clinicNote.practice ? <Tag style={{float: 'right'}}>\n                            <Tooltip title=\"Practice Name\">\n                                <b>{clinicNote.practice.name} </b>\n                            </Tooltip>\n                        </Tag> : null}\n                    </div>\n                </Card>)}\n                <Spin spinning={this.state.loading}>\n                    <Row/>\n                </Spin>\n                <InfiniteFeedLoaderButton loaderFunction={() => this.loadClinicNotes(that.state.next)}\n                                          loading={this.state.loading}\n                                          hidden={!this.state.next}/>\n            </div>\n        }\n\n    }\n}\n\nexport default PatientClinicNotes;\n","import React from \"react\";\nimport {\n    Avatar,\n    Button,\n    Icon,\n    Layout,\n    Tooltip,\n    Dropdown,\n    Tag,\n    Switch,\n    Statistic,\n    Popover,\n    List,\n    Modal\n} from \"antd\";\nimport PatientSelection from \"./PatientSelection\";\nimport {Link} from \"react-router-dom\";\nimport {hashCode, intToRGB, patientSettingMenu} from \"../../utils/clinicUtils\";\nimport {makeFileURL} from \"../../utils/common\";\n\nconst {Header} = Layout;\n\n\nclass PatientHeader extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n\n        };\n    }\n    componentDidMount() {\n        let that=this;\n        if (that.props.refreshWallet){\n            that.props.refreshWallet();\n        }\n    }\n\n\n    render() {\n        let that = this;\n        return <Header className=\"header\" style={{background: '#e4e4e4',padding:'0px 20px'}}>\n            <div>\n                {this.props.currentPatient ?\n                    <div style={{display: 'inline'}}>\n                        <div style={{display: 'inline', textSize: '15px'}}>\n                            <Tooltip title=\"Switch Back to All Patients\">\n                                <Button onClick={() => this.props.setCurrentPatient(null)} type=\"primary\" ghost>\n                                    <Icon type=\"solution\"/> &nbsp;\n                                    Back\n                                </Button>\n                            </Tooltip>\n                        </div>\n\n                        <a style={{padding: '8px', fontSize: '15px'}}\n                           onClick={() => this.props.togglePatientListModal(true)}>\n                            {(this.props.currentPatient.image ?\n                                <Avatar src={makeFileURL(this.props.currentPatient.image)}/> :\n                                <Avatar style={{backgroundColor: '#87d068'}}>\n                                    {this.props.currentPatient.user.first_name ? this.props.currentPatient.user.first_name.charAt(0) :\n                                        <Icon type=\"user\"/>}\n                                </Avatar>)}\n                            &nbsp;&nbsp;{that.props.currentPatient.user.first_name.length < 16 ? that.props.currentPatient.user.first_name : that.props.currentPatient.user.first_name.slice(0, 12) + '...'}\n                            <small><i><b> [ID: {that.props.currentPatient.custom_id ? that.props.currentPatient.custom_id : that.props.currentPatient.id}]</b></i></small>\n\n                        </a>\n                        &nbsp;&nbsp;&nbsp;&nbsp;\n                        <Popover placement=\"topLeft\" title={\"Medical History\"}\n                                 content={<div\n                                     style={{width: 250}}>{that.props.currentPatient.medical_history_data ? that.props.currentPatient.medical_history_data.map((item, index) =>\n                                     <Tag color={'#' + intToRGB(hashCode(item.name))}>{item.name}</Tag>) : null}</div>}>\n\n                            {that.props.currentPatient.medical_history_data ? that.props.currentPatient.medical_history_data.map((item, index) =>\n                                index > 1 ? index == 2 &&\n                                    <Tag>+{that.props.currentPatient.medical_history_data.length - 2}</Tag> :\n                                    <Tag color={'#' + intToRGB(hashCode(item.name))}>{item.name}</Tag>) : null}\n\n                        </Popover>\n                        <Switch\n                            style={{marginLeft: 20}}\n                            checked={this.props.showAllClinic}\n                            onChange={(value) => this.props.toggleShowAllClinic(value)}\n                            checkedChildren={\"All Clinics\"}\n                            unCheckedChildren={\"Current Clinic\"}\n                        />\n                        {this.props.pendingAmount?<>\n                            <Button style={{marginLeft:'20px'}} type=\"primary\" size={\"small\"}>\n                                <Link to={'/patient/'+ this.props.currentPatient.id +'/billing/payments/add'}> Pay Now!</Link>\n                            </Button>\n                            <Popover placement=\"rightTop\"\n                                     content={<List size=\"small\" dataSource={this.props.pendingAmount.practice_data}\n                                                    renderItem={item => <List.Item><List.Item.Meta title={item.name}\n                                                                                                   description={\"Rs. \" + (item.total < 0 ? item.total * -1 + \" (Advance)\" : item.total)}/></List.Item>}/>}\n                                     title=\"Pending Payments\">\n\n                                <div style={{\n                                    display: 'inline',\n                                    float: 'left',\n                                    maxWidth: 200,\n                                    position: 'absolute',\n                                    margin: '0px 15px',\n                                    zIndex: 5\n                                }}>\n                                    <Statistic title=\"Total Pending Amount\" value={this.props.pendingAmount.grand_total}\n                                    valueStyle={{\n                                    color: this.props.pendingAmount.grand_total > 0 ? '#cf1322' : 'initial',\n                                    fontWeight: 500 }}\n                                    precision={2}/>\n\n                                </div>\n                            </Popover>\n                            </>: null}\n\n                        {this.props.walletAmount && this.props.walletAmount.length ?\n                            <Popover placement=\"rightTop\"\n                                     title=\"Agent Wallet Amount\"\n                                     content={<p>\n                                         {/*Refundable : {this.state.walletAmount[0].refundable_amount} <br/>*/}\n                                         Non-Refundable : {this.props.walletAmount[0].non_refundable}\n                                     </p>}>\n                                <div style={{\n                                    display: 'inline',\n                                    float: 'left',\n                                    maxWidth: 400,\n                                    position: 'absolute',\n                                    paddingLeft: 173,\n                                    margin: '12px 15px'\n                                }}>\n                                    <Statistic tile={\"wallet\"}\n                                               value={this.props.walletAmount[0].refundable_amount + this.props.walletAmount[0].non_refundable}\n                                               prefix={<Icon type=\"wallet\"/>}/>\n                                </div>\n                            </Popover> : null}\n                    </div> :\n                    <a style={{padding: '8px', fontSize: '20px'}}\n                       onClick={() => this.props.togglePatientListModal(true)}>\n                        <div style={{display: 'inline'}}><Icon type=\"solution\"/> &nbsp; All Patient</div>\n                    </a>}\n                <Dropdown overlay={patientSettingMenu}>\n                    <Button style={{float: 'right', margin: '15px'}}>\n                        <Icon type=\"setting\"/> Settings <Icon type=\"down\"/>\n                    </Button>\n                </Dropdown>\n                {that.props.activePracticePermissions.AddPatient || that.props.allowAllPermissions ?\n                    <Link to=\"/patients/profile/add\">\n                        <Button type=\"primary\" style={{float: 'right', margin: '15px'}}>\n                            <Icon type=\"plus\"/> Add Patient\n                        </Button>\n                    </Link> : null}\n\n            </div>\n            <Modal\n                width={1300}\n                maskClosable={false}\n                centered\n                footer={null}\n                closable={false}\n                visible={this.props.listModalVisible}\n                style={{\n                    height: 'calc(100vh - 120px)',\n                }}>\n                <Button icon=\"close\" type=\"danger\" shape=\"circle\" style={{position: 'absolute', top: '-50px', right: 0}}\n                        onClick={() =>\n                            this.props.togglePatientListModal(false)}/>\n                <PatientSelection {...this.props}/>\n            </Modal>\n        </Header>\n    }\n}\n\nexport default PatientHeader;\n\n\n","import React from \"react\";\nimport DynamicFieldsForm from \"../../common/DynamicFieldsForm\";\nimport {Button, List, DatePicker,Card, Form, Icon, Row, Table, Divider, Col, Radio} from \"antd\";\nimport {SINGLE_CHECKBOX_FIELD, SUCCESS_MSG_TYPE} from \"../../../constants/dataKeys\";\nimport {Link} from \"react-router-dom\";\nimport {getAPI, displayMessage, interpolate, putAPI} from \"../../../utils/common\";\nimport {PATIENT_COMMUNICATION_HISTORY_API, PATIENT_PROFILE} from \"../../../constants/api\";\nimport {SMS_ENABLE, BIRTHDAY_SMS_ENABLE, EMAIL_ENABLE} from \"../../../constants/hardData\";\nimport moment from \"moment\";\nimport CustomizedTable from \"../../common/CustomizedTable\";\n\nclass PatientCommunicationSetting extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            parient_communication_history: null,\n            patientProfile: null,\n            saving: false\n        };\n\n        this.loadCommunication = this.loadCommunication.bind(this);\n        this.loadProfile = this.loadProfile.bind(this);\n    }\n\n    componentDidMount() {\n        if (this.props.currentPatient) {\n            this.loadCommunication();\n            this.loadProfile();\n        }\n    }\n\n    loadProfile() {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                patientProfile: data,\n                loading: false\n            });\n        };\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            })\n        };\n        console.log(\"props\", that.props.match.params.id);\n        getAPI(interpolate(PATIENT_PROFILE, [that.props.match.params.id]), successFn, errorFn);\n    }\n\n    loadCommunication() {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                parient_communication_history: data.user_sms,\n                loading: false\n            })\n        }\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            })\n        }\n        getAPI(interpolate(PATIENT_COMMUNICATION_HISTORY_API, [this.props.currentPatient.user.id]), successFn, errorFn)\n    }\n\n    changeRedirect() {\n        var redirectVar = this.state.redirect;\n        this.setState({\n            redirect: !redirectVar,\n        });\n    }\n\n    onChanged = (name, value) => {\n        this.setState({\n            [name]: value,\n        });\n    }\n\n    handleSubmit = (e) => {\n        let that = this;\n        e.preventDefault();\n        this.props.form.validateFields((err, values) => {\n            if (!err) {\n                let reqData = {...values,\n                    medicine_till:moment(values.medicine_till).format('YYYY-MM-DD'),\n                    follow_up_date:moment(values.follow_up_date).format('YYYY-MM-DD'),\n                };\n                that.setState({\n                    saving: true\n                });\n                let successFn = function (data) {\n                    displayMessage(SUCCESS_MSG_TYPE, \"Communication Settings Saved Successfully!!\");\n                    that.setState({\n                        saving: false\n                    });\n                }\n                let errorFn = function () {\n                    that.setState({\n                        saving: false\n                    });\n                }\n                putAPI(interpolate(PATIENT_PROFILE, [this.props.currentPatient.id]), reqData, successFn, errorFn);\n            }\n        });\n    }\n\n\n    render() {\n        const {getFieldDecorator} = this.props.form;\n        const formItemLayout = {\n            labelCol: {\n                xs: {span: 8},\n                sm: {span: 8},\n                md: {span: 8},\n                lg: {span: 8},\n            },\n            wrapperCol: {\n                xs: {span: 16},\n                sm: {span: 16},\n                md: {span: 16},\n                lg: {span: 16},\n            },\n        };\n\n\n        const columns = [{\n            title: 'SENT TIME',\n            dataIndex: 'created_at',\n            key: 'created_at',\n            render: created_at => <span>{moment(created_at).format('LLL')}</span>,\n        }, {\n            title: 'MESSAGE',\n            dataIndex: 'body',\n            key: 'body',\n        }, {\n            title: 'TYPE',\n            dataIndex: 'sms_type',\n            key: 'sms_type',\n        }, {\n            title: 'MESSAGE STATUS',\n            dataIndex: 'status',\n            key: 'status',\n        }];\n\n\n        const sms_enabled = SMS_ENABLE.map((isSMS) => <Radio value={isSMS.value}>{isSMS.title}</Radio>)\n        const email_enabled = EMAIL_ENABLE.map((isEmail) => <Radio value={isEmail.value}>{isEmail.title}</Radio>)\n        const bithday_sms_enabled = BIRTHDAY_SMS_ENABLE.map((isBirth_SMS) => <Radio\n            value={isBirth_SMS.value}>{isBirth_SMS.title}</Radio>);\n        return (<Form onSubmit={this.handleSubmit}>\n                <Card\n                    title={this.props.currentPatient ? this.props.currentPatient.user.first_name + \" Communication\" : \"Patient Communication\"}\n                    extra={<Button type=\"primary\" htmlType=\"submit\" loading={this.state.saving}>\n                        <Icon type=\"save\"/> Save Communication Setting\n                    </Button>}>\n                    \n                    <Form.Item {...formItemLayout} key={'sms_enable'}> <label>\n                        <span className=\"ant-form-text\">{'Enable SMS the patient'} : </span>\n                        {getFieldDecorator('sms_enable', {initialValue: this.state.patientProfile ? this.state.patientProfile.sms_enable : false})\n                        (\n                            <Radio.Group onChange={(e) => this.onChanged('sms_enable', e.target.value)}>\n                                {sms_enabled}\n                            </Radio.Group>\n                        )}\n                    </label>\n                    </Form.Item>\n\n                    <Form.Item {...formItemLayout} key={'email_enable'}> <label> <span\n                        className=\"ant-form-text\">{'Enable Email the patient'} : </span>\n                        {getFieldDecorator('email_enable', {initialValue: this.state.patientProfile ? this.state.patientProfile.email_enable : false})\n                        (\n                            <Radio.Group onChange={(e) => this.onChanged('email_enable', e.target.value)}>\n                                {email_enabled}\n                            </Radio.Group>\n                        )}\n                    </label>\n                    </Form.Item>\n\n                    <Form.Item {...formItemLayout} key={'birthday_sms_email'}> <label> <span\n                        className=\"ant-form-text\"> {\"Send Birthday wish SMS & Email\"} : </span>\n                        {getFieldDecorator('birthday_sms_email', {initialValue: this.state.patientProfile ? this.state.patientProfile.birthday_sms_email : false})\n                        (\n                            <Radio.Group onChange={(e) => this.onChanged('birthday_sms_email', e.target.value)}>\n                                {bithday_sms_enabled}\n                            </Radio.Group>\n                        )}\n                    </label>\n                    </Form.Item>\n\n                    <Form.Item {...formItemLayout} key={'medicine_till'}> <label>\n                        <span\n                            className=\"ant-form-text\"> {\"Medicine Till Date\"} : </span>\n                            {getFieldDecorator('medicine_till', {initialValue: this.state.patientProfile && this.state.patientProfile.medicine_till? moment(this.state.patientProfile.medicine_till) : null})\n                                (<DatePicker/>\n                            )}\n                        </label>\n                    </Form.Item>\n\n                    <Form.Item {...formItemLayout} key={'medicine_till'}> <label>\n                        <span\n                            className=\"ant-form-text\"> {\"Next follow-up To\"} : </span>\n                        {getFieldDecorator('follow_up_date', {initialValue: this.state.patientProfile && this.state.patientProfile.follow_up_date ? moment(this.state.patientProfile.follow_up_date) : null})\n                        (<DatePicker/>\n                        )}\n                    </label>\n                    </Form.Item>\n\n\n\n\n                    <div>\n                        <Divider dashed/>\n                        <h2>Past Communication</h2>\n                        <CustomizedTable loading={this.state.loading} columns={columns}\n                               dataSource={this.state.parient_communication_history}/>\n                    </div>\n                </Card>\n            </Form>\n        );\n\n    }\n}\n\nexport default Form.create()(PatientCommunicationSetting);\n","import React from \"react\";\nimport {Card, Button, Table, Icon} from \"antd\";\nimport {Link} from \"react-router-dom\";\nimport PatientCommunicationSetting from \"./PatientCommunicationSetting\";\n\nclass PatientCommunication extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {};\n    }\n\n    render() {\n        return <PatientCommunicationSetting  {...this.state} {...this.props} />\n    }\n}\n\nexport default PatientCommunication;\n","import React from \"react\";\nimport {Route} from \"react-router\";\n\nimport DynamicFieldsForm from \"../../common/DynamicFieldsForm\";\nimport {Card, Form, Row} from \"antd\";\nimport {DATE_PICKER, NUMBER_FIELD, SELECT_FIELD, SUCCESS_MSG_TYPE} from \"../../../constants/dataKeys\";\nimport {VITAL_SIGNS_API} from \"../../../constants/api\";\nimport {displayMessage, interpolate} from \"../../../utils/common\";\nimport {Redirect} from 'react-router-dom'\nimport moment from \"moment\";\n\n\nclass AddorEditPatientVitalSigns extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            redirect: false,\n            vitalSign: null,\n            editVitalSign: this.props.editVitalSign ? this.props.editVitalSign : null,\n\n        }\n        this.changeRedirect = this.changeRedirect.bind(this);\n\n    }\n\n\n    changeRedirect() {\n        let redirectVar = this.state.redirect;\n        this.setState({\n            redirect: !redirectVar,\n        });\n    }\n\n    render() {\n        const fields = [{\n            label: \"Pulse\",\n            key: \"pulse\",\n            // required: true,\n            initialValue: this.props.editVitalSign ? this.props.editVitalSign.pulse : null,\n            type: NUMBER_FIELD,\n            follow: 'BPM'\n        }, {\n            label: \"Temperature\",\n            key: \"temperature\",\n            initialValue: this.props.editVitalSign ? this.props.editVitalSign.temperature : null,\n            type: NUMBER_FIELD,\n            follow: 'Fahrenheit'\n        }, {\n            label: \"Temperature Part\",\n            key: \"temperature_part\",\n            type: SELECT_FIELD,\n            initialValue: this.props.editVitalSign ? this.props.editVitalSign.temperature_part : null,\n            options: [{label: \"forehead\", value: \"forehead\"}, {label: \"armpit\", value: \"armpit\"}, {\n                label: \"oral \",\n                value: \"oral\"\n            }]\n        }, {\n            label: \"Blood Pressure Up\",\n            key: \"blood_pressure_up\",\n            initialValue: this.props.editVitalSign ? this.props.editVitalSign.blood_pressure_up : null,\n            type: NUMBER_FIELD,\n            follow: 'mmhg'\n        }, {\n            label: \"Blood Pressure Down\",\n            key: \"blood_pressure_down\",\n            initialValue: this.props.editVitalSign ? this.props.editVitalSign.blood_pressure_down : null,\n            type: NUMBER_FIELD,\n            follow: 'mmhg'\n        }, {\n            label: \"Position\",\n            key: \"position\",\n            type: SELECT_FIELD,\n            initialValue: this.props.editVitalSign ? this.props.editVitalSign.position : null,\n            options: [{label: \"standing\", value: \"standing\"}, {label: \"sitting\", value: \"sitting\"}]\n        }, {\n            label: \"Weight\",\n            key: \"weight\",\n            initialValue: this.props.editVitalSign ? this.props.editVitalSign.weight : null,\n            type: NUMBER_FIELD,\n            follow: 'kg.'\n        }, {\n            label: \"Resp Rate\",\n            key: \"resp_rate\",\n            initialValue: this.props.editVitalSign ? this.props.editVitalSign.resp_rate : null,\n            type: NUMBER_FIELD,\n            follow: 'breaths/min'\n        }, {\n            label: \"Creatinine Level\",\n            key: \"creatinine\",\n            initialValue: this.props.editVitalSign ? this.props.editVitalSign.creatinine : null,\n            type: NUMBER_FIELD,\n        }, {\n            label: \"Haemoglobin Level\",\n            key: \"haemoglobin\",\n            initialValue: this.props.editVitalSign ? this.props.editVitalSign.haemoglobin : null,\n            type: NUMBER_FIELD,\n        }, {\n            label: \"Urea Level\",\n            key: \"urea\",\n            initialValue: this.props.editVitalSign ? this.props.editVitalSign.urea : null,\n            type: NUMBER_FIELD,\n        }, {\n            label: \"Uric Acid Level\",\n            key: \"uric_acid\",\n            initialValue: this.props.editVitalSign ? this.props.editVitalSign.uric_acid : null,\n            type: NUMBER_FIELD,\n        },{\n            label:'Date',\n            key:'date',\n            initialValue:this.props.editVitalSign && this.props.editVitalSign.date ?this.props.editVitalSign.date:moment(),\n            type:DATE_PICKER,\n            required:true,\n        }];\n\n\n        let editformProp;\n        let defaultValues = [{key: 'patient', value: this.props.match.params.id}, {\n            key: 'practice',\n            value: this.props.active_practiceId\n        }];\n        let that = this;\n        const TestFormLayout = Form.create()(DynamicFieldsForm);\n        if (this.state.editVitalSign) {\n            editformProp = {\n                successFn: function (data) {\n                    displayMessage(SUCCESS_MSG_TYPE, \"success\")\n                    if (that.props.loadData)\n                        that.props.loadData();\n                },\n                errorFn: function () {\n\n                },\n                action: interpolate(VITAL_SIGNS_API, [this.props.match.params.id]),\n                method: \"post\",\n            }\n            defaultValues.push({\"key\": \"id\", \"value\": this.state.editVitalSign.id})\n        }\n        const formProp = {\n            successFn: function (data) {\n                displayMessage(SUCCESS_MSG_TYPE, \"success\")\n                if (that.props.loadData)\n                    that.props.loadData();\n            },\n            errorFn: function () {\n\n            },\n            action: interpolate(VITAL_SIGNS_API, [this.props.match.params.id]),\n            method: \"post\",\n        }\n\n\n        return <Row>\n            <Card>\n                <Route exact path='/patient/:id/emr/vitalsigns/edit'\n                       render={() => (this.state.editVitalSign ?\n                           <TestFormLayout defaultValues={defaultValues} title=\"Edit Report Manual\"\n                                           changeRedirect={this.changeRedirect} formProp={editformProp}\n                                           fields={fields}/> :\n                           <Redirect to='/patients/profile'/>)}/>\n                <Route exact path='/patient/:id/emr/vitalsigns/add'\n                       render={() => <TestFormLayout title=\"Add Report Manual\"\n                                                     defaultValues={defaultValues}\n                                                     changeRedirect={this.changeRedirect}\n                                                     formProp={formProp} fields={fields}/>}/>\n\n\n            </Card>\n            {this.state.redirect && <Redirect to={'/patient/' + this.props.match.params.id + '/emr/vitalsigns'}/>}\n        </Row>\n\n    }\n}\n\nexport default AddorEditPatientVitalSigns;\n","import React from \"react\";\nimport {Button, Card, Divider, Icon, Modal, Table, Tabs, Tag, Tooltip as AntTooltip} from \"antd\";\nimport {Link, Route, Switch} from \"react-router-dom\";\nimport {VITAL_SIGN_PDF, VITAL_SIGNS_API} from \"../../../constants/api\";\nimport {displayMessage, getAPI, interpolate, postAPI} from \"../../../utils/common\";\nimport moment from 'moment';\nimport CustomizedTable from \"../../common/CustomizedTable\";\nimport AddorEditPatientVitalSigns from \"./AddorEditPatientVitalSigns\";\nimport {\n    CartesianGrid,\n    Legend,\n    Line,\n    Tooltip,\n    XAxis,\n    YAxis,\n    ResponsiveContainer,\n    ComposedChart,\n} from 'recharts';\nimport {BACKEND_BASE_URL} from \"../../../config/connect\";\nimport InfiniteFeedLoaderButton from \"../../common/InfiniteFeedLoaderButton\";\nimport {SUCCESS_MSG_TYPE} from \"../../../constants/dataKeys\";\n\nconst confirm = Modal.confirm;\n\nclass PatientVitalSign extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            currentPatient: this.props.currentPatient,\n            vitalsign: [],\n            loading: true\n        }\n        this.loadVitalsigns = this.loadVitalsigns.bind(this);\n\n    }\n\n    componentDidMount() {\n        this.loadVitalsigns();\n    }\n\n    loadVitalsigns(page = 1) {\n        let that = this;\n        let successFn = function (data) {\n            that.setState(function (prevState) {\n                if (data.current == 1) {\n                    return {\n                        vitalsign: [...data.results],\n                        next: data.next,\n                        loading: false\n                    }\n                }\n                return {\n                    vitalsign: [...prevState.vitalsign, ...data.results],\n                    next: data.next,\n                    loading: false\n                }\n            })\n        }\n        let errorFn = function () {\n\n        }\n        let apiParams = {\n            page: page,\n            practice: this.props.active_practiceId\n        };\n        if (this.props.match.params.id) {\n            apiParams.patient = this.props.match.params.id;\n        }\n        if (this.props.showAllClinic && this.props.match.params.id) {\n            delete (apiParams.practice)\n        }\n        getAPI(VITAL_SIGNS_API, successFn, errorFn, apiParams)\n    }\n\n    deleteVitalSign = (record) => {\n        let that = this;\n        confirm({\n            title: 'Are you sure to delete this item?',\n            okText: 'Yes',\n            okType: 'danger',\n            cancelText: 'No',\n            onOk() {\n                let reqData = {...record, is_active: false};\n                let successFn = function (data) {\n                    that.loadVitalsigns();\n                    displayMessage(SUCCESS_MSG_TYPE, \"Deleted Successfully!!\")\n\n                };\n                let errorFn = function () {\n\n                };\n                postAPI(interpolate(VITAL_SIGNS_API, [record.patient]), reqData, successFn, errorFn)\n            },\n            onCancel() {\n                console.log('Cancel');\n            },\n        });\n    }\n    editObject = (record) => {\n        this.setState({\n            editVitalSign: record,\n            loading: false\n        });\n        if (this.props.match.params.id) {\n            let id = this.props.match.params.id;\n            this.props.history.push(\"/patient/\" + id + \"/emr/vitalsigns/edit\")\n        } else {\n            this.props.history.push(\"/patient/\" + record.patient + \"/emr/vitalsigns\");\n        }\n\n\n    }\n\n    loadPDF(id) {\n        let that = this;\n        let successFn = function (data) {\n            if (data.report)\n                window.open(BACKEND_BASE_URL + data.report);\n        }\n        let errorFn = function () {\n\n        }\n        getAPI(interpolate(VITAL_SIGN_PDF, [id]), successFn, errorFn);\n    }\n\n    render() {\n        let that = this;\n        const columns = [{\n            title: 'Date',\n            dataIndex: 'date',\n            key: 'date',\n            render: (item, record) => <span>{record.date ? moment(record.date).format('LL') : ''}</span>,\n        }, {\n            title: 'Temp(F)',\n            key: 'temperature',\n            render: (text, record) => (\n                <span> {record.temperature}<br/>,{record.temperature_part}</span>\n            )\n        }, {\n            title: 'Pulse (BPM)',\n            dataIndex: 'pulse',\n            key: 'pulse',\n        }, {\n            title: 'RR breaths/min',\n            dataIndex: 'resp_rate',\n            key: 'resp_rate',\n        }, {\n            title: 'SYS/DIA mmhg',\n            key: 'address',\n            render: (text, record) => (\n                <span> {record.blood_pressure_up}/{record.blood_pressure_down}<br/>,{record.position}</span>\n            )\n        }, {\n            title: 'WEIGHT kg',\n            dataIndex: 'weight',\n            key: 'weight',\n        }, {\n            title: \"Creatinine Level\",\n            key: \"creatinine\",\n            dataIndex: \"creatinine\",\n        }, {\n            title: \"Haemoglobin Level\",\n            key: \"haemoglobin\",\n            dataIndex: \"haemoglobin\",\n        }, {\n            title: \"Urea Level\",\n            key: \"urea\",\n            dataIndex: \"urea\",\n\n        }, {\n            title: \"Uric Acid Level\",\n            key: \"uric_acid\",\n            dataIndex: \"uric_acid\",\n        }, {\n            title: 'Action',\n            key: 'action',\n            render: (text, record) => (\n                <span>\n                    <a onClick={() => this.loadPDF(record.id)}\n                    >Print</a>\n                    <Divider type=\"vertical\"/>\n                  <a onClick={() => this.editObject(record)}\n                     disabled={(record.practice != that.props.active_practiceId)}>Edit</a>\n                    <Divider type=\"vertical\"/>\n                    <a onClick={() => that.deleteVitalSign(record)}\n                       disabled={(record.practice != that.props.active_practiceId)}>Delete</a>\n                </span>\n            ),\n        }];\n\n        if (this.props.match.params.id) {\n            return <Switch>\n                <Route path='/patient/:id/emr/vitalsigns/add'\n                       render={(route) => <AddorEditPatientVitalSigns\n                           {...this.props}\n                           key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.state} {...route}\n                           loadData={this.loadVitalsigns}/>}/>\n                <Route path='/patient/:id/emr/vitalsigns/edit'\n                       render={(route) => <AddorEditPatientVitalSigns\n                           {...this.props}\n                           key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.state} {...route}\n                           loadData={this.loadVitalsigns}/>}/>\n                <Route>\n                    <Card\n                        title={this.state.currentPatient ? this.state.currentPatient.user.first_name + \" Report Manual\" : \"Patient Report Manual\"}\n                        extra={<Button.Group>\n                            <Link to={\"/patient/\" + this.props.match.params.id + \"/emr/vitalsigns/add\"}>\n                                <Button type={\"primary\"}>\n                                    <Icon type=\"plus\"/>Add\n                                </Button>\n                            </Link>\n                        </Button.Group>}>\n                        <Tabs>\n                            <Tabs.TabPane tab={\"Charts\"} key={1} style={{margin: 'auto'}}>\n                                <Divider>Pulse Chart (bpm)</Divider>\n                                <div style={{height: 200}}>\n                                    <ResponsiveContainer>\n                                        <ComposedChart width={700} height={200} data={this.state.vitalsign.reverse()}\n                                                       margin={{top: 10, right: 30, left: 0, bottom: 0}}>\n                                            {/*<defs>*/}\n                                            {/*    <linearGradient id=\"colorUv\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">*/}\n                                            {/*        <stop offset=\"5%\" stopColor=\"#8884d8\" stopOpacity={0.8}/>*/}\n                                            {/*        <stop offset=\"95%\" stopColor=\"#8884d8\" stopOpacity={0}/>*/}\n                                            {/*    </linearGradient>*/}\n                                            {/*    <Legend verticalAlign=\"top\" height={36}/>*/}\n                                            {/*</defs>*/}\n                                            <XAxis dataKey=\"date\" tickFormatter={(value) => {\n                                                return moment(value).format('LL')\n                                            }} tickCount={that.state.vitalsign.length}/>\n                                            <YAxis\n                                                domain={[dataMin => (Math.abs(dataMin)), dataMax => (dataMax * 1.1).toFixed(0)]}/>\n                                            <CartesianGrid strokeDasharray=\"3 3\"/>\n                                            <Tooltip\n                                                labelFormatter={(value) => (value && moment(value).isValid() ? moment(value).format('LL') : '--')}/>\n                                            <Line type=\"monotone\" dataKey=\"pulse\" stroke=\"#8884d8\" fillOpacity={1}\n                                                  strokeWidth={4}\n                                                  fill=\"url(#colorUv)\"/>\n                                        </ComposedChart>\n                                    </ResponsiveContainer>\n                                </div>\n                                <Divider>Temperature (F)</Divider>\n                                <div style={{height: 200}}>\n                                    <ResponsiveContainer>\n                                        <ComposedChart width={700} height={200} data={this.state.vitalsign.reverse()}\n                                                       margin={{top: 10, right: 30, left: 0, bottom: 0}}>\n                                            <Legend verticalAlign=\"top\" height={36}/>\n                                            <defs>\n                                                <linearGradient id=\"colorUv\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                                                    <stop offset=\"5%\" stopColor=\"#82ca9d\" stopOpacity={0.8}/>\n                                                    <stop offset=\"95%\" stopColor=\"#82ca9d\" stopOpacity={0}/>\n                                                </linearGradient>\n                                            </defs>\n                                            <XAxis dataKey=\"date\" tickFormatter={(value) => {\n                                                return moment(value).format('LL')\n                                            }} tickCount={this.state.vitalsign.length}/>\n                                            <YAxis\n                                                domain={[dataMin => (Math.abs(dataMin)), dataMax => (dataMax * 1.1).toFixed(0)]}/>\n                                            <CartesianGrid strokeDasharray=\"3 3\"/>\n\n                                            <Tooltip\n                                                labelFormatter={(value) => (value && moment(value).isValid() ? moment(value).format('LL') : '--')}/>\n                                            <Line type=\"monotone\" dataKey=\"temperature\" stroke=\"#82ca9d\" fillOpacity={1}\n                                                  strokeWidth={4}\n                                                  fill=\"url(#colorUv)\"/>\n                                        </ComposedChart>\n                                    </ResponsiveContainer>\n                                </div>\n                                <Divider>Blood Pressure (mmhg)</Divider>\n                                <div style={{height: 200}}>\n                                    <ResponsiveContainer>\n                                        <ComposedChart width={700} height={200} data={this.state.vitalsign.reverse()}\n                                                       margin={{top: 10, right: 30, left: 0, bottom: 0}}>\n                                            <defs>\n                                                <linearGradient id=\"colorUv\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                                                    <stop offset=\"5%\" stopColor=\"#ffc658\" stopOpacity={0.8}/>\n                                                    <stop offset=\"95%\" stopColor=\"#ffc658\" stopOpacity={0}/>\n                                                </linearGradient>\n                                            </defs>\n                                            <XAxis dataKey=\"date\" tickFormatter={(value) => {\n                                                return moment(value).format('LL')\n                                            }} tickCount={this.state.vitalsign.length}/>\n                                            <YAxis\n                                                domain={[dataMin => (Math.abs(dataMin)), dataMax => (dataMax * 1.1).toFixed(0)]}/>\n                                            <CartesianGrid strokeDasharray=\"3 3\"/>\n                                            <Tooltip\n                                                labelFormatter={(value) => (value && moment(value).isValid() ? moment(value).format('LL') : '--')}/>\n                                            <Line type=\"monotone\" dataKey=\"blood_pressure_up\" stroke=\"#ffc658\"\n                                                  fillOpacity={1}\n                                                  strokeWidth={4}\n                                                  fill=\"url(#colorUv)\"/>\n                                            <Line type=\"monotone\" dataKey=\"blood_pressure_down\" stroke=\"#82ca9d\"\n                                                  fillOpacity={1}\n                                                  strokeWidth={4}\n                                                  fill=\"url(#colorUv)\"/>\n                                        </ComposedChart>\n                                    </ResponsiveContainer>\n                                </div>\n                                <Divider>Weight (kg)</Divider>\n                                <div style={{height: 200}}>\n                                    <ResponsiveContainer>\n                                        <ComposedChart width={700} height={200} data={this.state.vitalsign.reverse()}\n                                                       margin={{top: 10, right: 30, left: 0, bottom: 0}}>\n                                            <defs>\n                                                <linearGradient id=\"colorUv\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                                                    <stop offset=\"5%\" stopColor=\"#8884d8\" stopOpacity={0.8}/>\n                                                    <stop offset=\"95%\" stopColor=\"#8884d8\" stopOpacity={0}/>\n                                                </linearGradient>\n                                                <linearGradient id=\"colorPv\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                                                    <stop offset=\"5%\" stopColor=\"#82ca9d\" stopOpacity={0.8}/>\n                                                    <stop offset=\"95%\" stopColor=\"#82ca9d\" stopOpacity={0}/>\n                                                </linearGradient>\n                                            </defs>\n                                            <XAxis dataKey=\"date\" tickFormatter={(value) => {\n                                                return moment(value).format('LL')\n                                            }} tickCount={this.state.vitalsign.length}/>\n                                            <YAxis\n                                                domain={[dataMin => (Math.abs(dataMin)), dataMax => (dataMax * 1.1).toFixed(0)]}/>\n                                            <CartesianGrid strokeDasharray=\"3 3\"/>\n                                            <Tooltip\n                                                labelFormatter={(value) => (value && moment(value).isValid() ? moment(value).format('LL') : '--')}/>\n                                            <Line type=\"monotone\" dataKey=\"weight\" stroke=\"#8884d8\" fillOpacity={1}\n                                                  strokeWidth={4}\n                                                  fill=\"url(#colorUv)\"/>\n                                        </ComposedChart>\n                                    </ResponsiveContainer>\n                                </div>\n                                <Divider>Respiratory Rate (breaths/min)</Divider>\n                                <div style={{height: 200}}>\n                                    <ResponsiveContainer>\n                                        <ComposedChart width={700} height={200} data={this.state.vitalsign.reverse()}\n                                                       margin={{top: 10, right: 30, left: 0, bottom: 0}}>\n                                            <defs>\n                                                <linearGradient id=\"colorUv\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                                                    <stop offset=\"5%\" stopColor=\"#82ca9d\" stopOpacity={0.8}/>\n                                                    <stop offset=\"95%\" stopColor=\"#82ca9d\" stopOpacity={0}/>\n                                                </linearGradient>\n                                                <linearGradient id=\"colorPv\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                                                    <stop offset=\"5%\" stopColor=\"#82ca9d\" stopOpacity={0.8}/>\n                                                    <stop offset=\"95%\" stopColor=\"#82ca9d\" stopOpacity={0}/>\n                                                </linearGradient>\n                                            </defs>\n                                            <XAxis dataKey=\"date\" tickFormatter={(value) => {\n                                                return moment(value).format('LL')\n                                            }} tickCount={this.state.vitalsign.length}/>\n                                            <YAxis\n                                                domain={[dataMin => (Math.abs(dataMin)), dataMax => (dataMax * 1.1).toFixed(0)]}/>\n                                            <CartesianGrid strokeDasharray=\"3 3\"/>\n                                            <Tooltip\n                                                labelFormatter={(value) => (value && moment(value).isValid() ? moment(value).format('LL') : '--')}/>\n                                            <Line type=\"monotone\" dataKey=\"resp_rate\" stroke=\"#82ca9d\" fillOpacity={1}\n                                                  strokeWidth={4}\n                                                  fill=\"url(#colorUv)\"/>\n                                        </ComposedChart>\n                                    </ResponsiveContainer>\n                                </div>\n                                <Divider>Creatinine Level</Divider>\n                                <div style={{height: 200}}>\n                                    <ResponsiveContainer>\n                                        <ComposedChart width={700} height={200} data={this.state.vitalsign.reverse()}\n                                                       margin={{top: 10, right: 30, left: 0, bottom: 0}}>\n                                            <defs>\n                                                <linearGradient id=\"colorUv\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                                                    <stop offset=\"5%\" stopColor=\"#82ca9d\" stopOpacity={0.8}/>\n                                                    <stop offset=\"95%\" stopColor=\"#82ca9d\" stopOpacity={0}/>\n                                                </linearGradient>\n                                                <linearGradient id=\"colorPv\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                                                    <stop offset=\"5%\" stopColor=\"#82ca9d\" stopOpacity={0.8}/>\n                                                    <stop offset=\"95%\" stopColor=\"#82ca9d\" stopOpacity={0}/>\n                                                </linearGradient>\n                                            </defs>\n                                            <XAxis dataKey=\"date\" tickFormatter={(value) => {\n                                                return moment(value).format('LL')\n                                            }} tickCount={this.state.vitalsign.length}/>\n                                            <YAxis\n                                                domain={[dataMin => (Math.abs(dataMin)), dataMax => (dataMax * 1.1).toFixed(0)]}/>\n                                            <CartesianGrid strokeDasharray=\"3 3\"/>\n                                            <Tooltip\n                                                labelFormatter={(value) => (value && moment(value).isValid() ? moment(value).format('LL') : '--')}/>\n                                            <Line type=\"monotone\" dataKey=\"creatinine\" stroke=\"#82ca9d\" fillOpacity={1}\n                                                  strokeWidth={4}\n                                                  fill=\"url(#colorUv)\"/>\n                                        </ComposedChart>\n                                    </ResponsiveContainer>\n                                </div>\n                                <Divider>Haemoglobin Level</Divider>\n                                <div style={{height: 200}}>\n                                    <ResponsiveContainer>\n                                        <ComposedChart width={700} height={200} data={this.state.vitalsign.reverse()}\n                                                       margin={{top: 10, right: 30, left: 0, bottom: 0}}>\n                                            <defs>\n                                                <linearGradient id=\"colorUv\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                                                    <stop offset=\"5%\" stopColor=\"#82ca9d\" stopOpacity={0.8}/>\n                                                    <stop offset=\"95%\" stopColor=\"#82ca9d\" stopOpacity={0}/>\n                                                </linearGradient>\n                                                <linearGradient id=\"colorPv\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                                                    <stop offset=\"5%\" stopColor=\"#82ca9d\" stopOpacity={0.8}/>\n                                                    <stop offset=\"95%\" stopColor=\"#82ca9d\" stopOpacity={0}/>\n                                                </linearGradient>\n                                            </defs>\n                                            <XAxis dataKey=\"date\" tickFormatter={(value) => {\n                                                return moment(value).format('LL')\n                                            }} tickCount={this.state.vitalsign.length}/>\n                                            <YAxis\n                                                domain={[dataMin => (Math.abs(dataMin)), dataMax => (dataMax * 1.1).toFixed(0)]}/>\n                                            <CartesianGrid strokeDasharray=\"3 3\"/>\n                                            <Tooltip\n                                                labelFormatter={(value) => (value && moment(value).isValid() ? moment(value).format('LL') : '--')}/>\n                                            <Line type=\"monotone\" dataKey=\"haemoglobin\" stroke=\"#82ca9d\" fillOpacity={1}\n                                                  strokeWidth={4}\n                                                  fill=\"url(#colorUv)\"/>\n                                        </ComposedChart>\n                                    </ResponsiveContainer>\n                                </div>\n                                <Divider>Urea Level</Divider>\n                                <div style={{height: 200}}>\n                                    <ResponsiveContainer>\n                                        <ComposedChart width={700} height={200} data={this.state.vitalsign.reverse()}\n                                                       margin={{top: 10, right: 30, left: 0, bottom: 0}}>\n                                            <defs>\n                                                <linearGradient id=\"colorUv\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                                                    <stop offset=\"5%\" stopColor=\"#82ca9d\" stopOpacity={0.8}/>\n                                                    <stop offset=\"95%\" stopColor=\"#82ca9d\" stopOpacity={0}/>\n                                                </linearGradient>\n                                                <linearGradient id=\"colorPv\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                                                    <stop offset=\"5%\" stopColor=\"#82ca9d\" stopOpacity={0.8}/>\n                                                    <stop offset=\"95%\" stopColor=\"#82ca9d\" stopOpacity={0}/>\n                                                </linearGradient>\n                                            </defs>\n                                            <XAxis dataKey=\"date\" tickFormatter={(value) => {\n                                                return moment(value).format('LL')\n                                            }} tickCount={this.state.vitalsign.length}/>\n                                            <YAxis\n                                                domain={[dataMin => (Math.abs(dataMin)), dataMax => (dataMax * 1.1).toFixed(0)]}/>\n                                            <CartesianGrid strokeDasharray=\"3 3\"/>\n                                            <Tooltip\n                                                labelFormatter={(value) => (value && moment(value).isValid() ? moment(value).format('LL') : '--')}/>\n                                            <Line type=\"monotone\" dataKey=\"urea\" stroke=\"#82ca9d\" fillOpacity={1}\n                                                  strokeWidth={4}\n                                                  fill=\"url(#colorUv)\"/>\n                                        </ComposedChart>\n                                    </ResponsiveContainer>\n                                </div>\n                                <Divider>Uric Acid Level</Divider>\n                                <div style={{height: 200}}>\n                                    <ResponsiveContainer>\n                                        <ComposedChart width={700} height={200} data={this.state.vitalsign.reverse()}\n                                                       margin={{top: 10, right: 30, left: 0, bottom: 0}}>\n                                            <defs>\n                                                <linearGradient id=\"colorUv\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                                                    <stop offset=\"5%\" stopColor=\"#82ca9d\" stopOpacity={0.8}/>\n                                                    <stop offset=\"95%\" stopColor=\"#82ca9d\" stopOpacity={0}/>\n                                                </linearGradient>\n                                                <linearGradient id=\"colorPv\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                                                    <stop offset=\"5%\" stopColor=\"#82ca9d\" stopOpacity={0.8}/>\n                                                    <stop offset=\"95%\" stopColor=\"#82ca9d\" stopOpacity={0}/>\n                                                </linearGradient>\n                                            </defs>\n                                            <XAxis dataKey=\"date\" tickFormatter={(value) => {\n                                                return moment(value).format('LL')\n                                            }} tickCount={this.state.vitalsign.length}/>\n                                            <YAxis\n                                                domain={[dataMin => (Math.abs(dataMin)), dataMax => (dataMax * 1.1).toFixed(0)]}/>\n                                            <CartesianGrid strokeDasharray=\"3 3\"/>\n                                            <Tooltip\n                                                labelFormatter={(value) => (value && moment(value).isValid() ? moment(value).format('LL') : '--')}/>\n                                            <Line type=\"monotone\" dataKey=\"uric_acid\" stroke=\"#82ca9d\" fillOpacity={1}\n                                                  strokeWidth={4}\n                                                  fill=\"url(#colorUv)\"/>\n                                        </ComposedChart>\n                                    </ResponsiveContainer>\n                                </div>\n                            </Tabs.TabPane>\n                            <Tabs.TabPane tab={\"Details\"} key={2}>\n                                <CustomizedTable columns={columns}\n                                                 pagination={false}\n                                                 dataSource={this.state.vitalsign}/>\n                                <InfiniteFeedLoaderButton loaderFunction={() => this.loadInvoices(that.state.next)}\n                                                          loading={this.state.loading}\n                                                          hidden={!this.state.next}/>\n\n                            </Tabs.TabPane>\n\n                        </Tabs>\n                    </Card>\n                </Route>\n            </Switch>\n        } else {\n            return <div>\n                <Card\n                    bodyStyle={{padding: 0}}\n                    title={this.state.currentPatient ? this.state.currentPatient.user.first_name + \" Report Manual\" : \"Patients Report Manual\"}\n                    extra={<Button.Group>\n                        <Button type={\"primary\"} onClick={() => that.props.togglePatientListModal(true)}>\n                            <Icon type=\"plus\"/>Add\n                        </Button>\n                    </Button.Group>}/>\n                {this.state.vitalsign.map(vitalsign => <div>\n                    <Card style={{marginTop: 10}}\n                          title={<small>{vitalsign.date ? moment(vitalsign.date).format('ll') : null}\n                              <Link to={\"/patient/\" + vitalsign.patient_data.id + \"/emr/vitalsigns\"}>\n                                  &nbsp;&nbsp; {vitalsign.patient_data.user ? vitalsign.patient_data.user.first_name : null} (ID: {vitalsign.patient_data.custom_id ? vitalsign.patient_data.custom_id : vitalsign.patient_data.id})&nbsp;\n                              </Link>\n                              <span>, {vitalsign.patient_data.gender}</span>\n                          </small>}\n                          bodyStyle={{padding: 0}}>\n                        <Table columns={columns}\n                               pagination={false}\n                               dataSource={[vitalsign]}\n                               footer={() => VitalSignFooter(vitalsign)}/>\n                    </Card>\n                </div>)}\n                <InfiniteFeedLoaderButton loaderFunction={() => this.loadVitalsigns(that.state.next)}\n                                          loading={this.state.loading}\n                                          hidden={!this.state.next}/>\n            </div>\n        }\n    }\n\n}\n\nexport default PatientVitalSign;\n\nfunction CustomizedTooltip(value, name, props) {\n    console.log(value, name, props);\n    return [\"formatted value\", \"formatted name\"]\n}\n\nfunction VitalSignFooter(presc) {\n    if (presc) {\n        console.log(presc)\n        return <div>\n            {presc.doctor ? <Tag color={presc.doctor ? presc.doctor.calendar_colour : null}>\n                <b>{\"prescribed by  \" + presc.doctor.user.first_name} </b>\n            </Tag> : null}\n\n            {presc.practice_data ? <Tag style={{float: 'right'}}>\n                <AntTooltip title=\"Practice Name\">\n                    <b>{presc.practice_data.name} </b>\n                </AntTooltip>\n            </Tag> : null}\n        </div>\n    }\n    return null\n}","import React from \"react\";\nimport {\n    Card,\n    Row,\n    Form,\n    Col,\n    List,\n    Button,\n    Table,\n    InputNumber,\n    Input,\n    Icon,\n    Affix,\n    Dropdown,\n    Menu,\n    DatePicker\n} from 'antd';\nimport {displayMessage, getAPI, interpolate, postAPI} from \"../../../utils/common\";\nimport {PRACTICESTAFF, PROCEDURE_CATEGORY, TREATMENTPLANS_API} from \"../../../constants/api\";\nimport {remove} from 'lodash';\nimport {Redirect} from 'react-router-dom';\nimport {DOCTORS_ROLE} from \"../../../constants/dataKeys\";\nimport moment from \"moment\";\nimport {loadDoctors} from \"../../../utils/clinicUtils\";\n\n\nclass AddorEditDynamicCompletedTreatmentPlans extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            loadingProcedures: true,\n            procedure_category: [],\n            tableFormValues: [],\n            addNotes: {},\n            practiceDoctors: [],\n            selectedDoctor: {},\n            selectedDate: moment()\n        }\n    }\n\n    componentDidMount() {\n        if (this.props.editId) {\n            this.setState(function (prevState) {\n                let tableValues = [];\n                this.props.editTreatmentPlan.treatment_plans.forEach(function (treatment) {\n                    let randId = Math.random().toFixed(7);\n                    tableValues.push({\n                        ...treatment,\n                        ...treatment.procedure,\n                        _id: randId,\n                    })\n                });\n                return {\n                    ...this.props.editTreatmentPlan,\n                    tableFormValues: tableValues,\n                    selectedDate: moment(this.props.editTreatmentPlan.date),\n                    selectedDoctor: this.props.editTreatmentPlan.doctor\n                }\n            })\n        }\n        this.loadProcedures();\n        loadDoctors(this);\n    }\n\n    calculateItem = (_id) => {\n        const {getFieldsValue} = this.props.form;\n        console.log(getFieldsValue());\n        this.setState(function (prevState) {\n            let newtableFormValues = [...prevState.tableFormValues];\n            newtableFormValues.forEach(function (item) {\n\n            });\n        });\n    }\n    addNotes = (_id, option) => {\n        this.setState(function (prevState) {\n            return {addNotes: {...prevState.addNotes, [_id]: !!option}}\n        })\n    }\n    removeTreatment = (_id) => {\n        this.setState(function (prevState) {\n            return {\n                tableFormValues: [...remove(prevState.tableFormValues, function (item) {\n                    return item._id != _id;\n                })]\n            }\n        });\n    }\n    add = (item) => {\n        let that = this;\n        this.setState(function (prevState) {\n            let randId = Math.random().toFixed(7);\n            return {\n                addNotes: {...prevState.addNotes, [randId]: !!item.default_notes},\n                tableFormValues: [{\n                    ...item,\n                    _id: randId,\n                }, ...prevState.tableFormValues]\n            }\n        }, function () {\n            // if (that.bottomPoint)\n            //     that.bottomPoint.scrollIntoView({behavior: 'smooth'});\n        });\n    };\n\n    loadProcedures() {\n        var that = this;\n        let params = {};\n        if (this.state.searchString) {\n            params.name = this.state.searchString;\n        }\n        that.setState({\n            loadingProcedures: true\n        })\n        let successFn = function (data) {\n            if (!params.name || that.state.searchString == params.name)\n                that.setState({\n                    // procedure_category: data.results,\n                    loadingProcedures: false,\n                    filteredItems: data.results,\n                })\n        };\n        let errorFn = function () {\n            that.setState({\n                loadingProcedures: false\n            })\n        };\n\n        getAPI(interpolate(PROCEDURE_CATEGORY, [this.props.active_practiceId]), successFn, errorFn, params);\n    }\n\n    selectDoctor = (doctor) => {\n        this.setState({\n            selectedDoctor: doctor\n        })\n    }\n    selectedDate = (date) => {\n        this.setState({\n            selectedDate: date\n        })\n    }\n    handleSubmit = (e) => {\n        let that = this;\n        e.preventDefault();\n        this.props.form.validateFields((err, values) => {\n            if (!err) {\n                console.log('Received values of form: ', values);\n                let reqData = {\n                    treatment_plans: [],\n                    patient: that.props.match.params.id,\n                    \"doctor\": that.state.selectedDoctor.id,\n                    \"date\": that.state.selectedDate && moment(that.state.selectedDate).isValid() ? that.state.selectedDate.format('YYYY-MM-DD') : null,\n                    \"practice\": that.props.active_practiceId,\n                };\n                if (that.props.editId) {\n                    reqData.id = that.props.editTreatmentPlan.id\n                }\n                that.state.tableFormValues.forEach(function (item) {\n                    console.log(item);\n                    item.quantity = values.quantity[item._id];\n                    item.cost = values.cost[item._id];\n                    item.discount = values.discount[item._id];\n                    if (values.notes)\n                        item.notes = values.notes[item._id];\n                    let sendingItem = {\n                        \"procedure\": item.id,\n                        \"cost\": item.cost,\n                        \"quantity\": item.quantity,\n                        \"margin\": item.margin,\n                        \"default_notes\": item.notes,\n                        \"is_active\": true,\n                        \"is_completed\": true,\n                        \"discount\": item.discount,\n                        \"discount_type\": \"%\",\n\n                    };\n                    reqData.treatment_plans.push(sendingItem);\n                });\n\n                let successFn = function (data) {\n                    displayMessage(\"Inventory updated successfully\");\n                    if (that.props.loadData)\n                        that.props.loadData();\n                    let url = '/patient/' + that.props.match.params.id + '/emr/workdone';\n                    that.props.history.push(url);\n                };\n                let errorFn = function () {\n\n                };\n                postAPI(interpolate(TREATMENTPLANS_API, [that.props.match.params.id]), reqData, successFn, errorFn);\n            }\n        });\n    };\n    searchValues = (value) => {\n        let that = this;\n        this.setState(function (prevState) {\n            return {searchString: value}\n        }, function () {\n            that.loadProcedures();\n        });\n        return false;\n    }\n\n    render() {\n        let that = this;\n        const {getFieldDecorator, getFieldValue, getFieldsValue} = this.props.form;\n        const formItemLayout = {\n            labelCol: {\n                xs: {span: 24},\n                sm: {span: 4},\n            },\n            wrapperCol: {\n                xs: {span: 24},\n                sm: {span: 20},\n            },\n        };\n        const formItemLayoutWithOutLabel = {\n            labelCol: {\n                xs: {span: 24},\n                sm: {span: 24},\n            },\n            wrapperCol: {\n                xs: {span: 24},\n                sm: {span: 24},\n            },\n        };\n        const consumeRow = [{\n            title: 'Treatments',\n            dataIndex: 'name',\n            key: 'name',\n            render: (name, record) => <span>\n                <b>{name}</b><br/>\n                {this.state.addNotes[record._id] || this.props.editId ?\n                    <Form.Item\n                        key={`default_notes[${record._id}]`}\n                        {...formItemLayout}>\n                        {getFieldDecorator(`notes[${record._id}]`, {\n                            validateTrigger: ['onChange', 'onBlur'],\n                            rules: [{\n                                message: \"This field is required.\",\n                            }],\n                            initialValue: record.default_notes\n                        })(\n                            <Input.TextArea min={0} placeholder={\"Notes...\"}/>\n                        )}\n                    </Form.Item>\n                    : <a onClick={() => this.addNotes(record._id, true)}>+ Add Note</a>}\n                </span>\n        }, {\n            title: 'Quantity',\n            dataIndex: 'quantity',\n            key: 'quantity',\n            render: (name, record) => <Form.Item\n                key={`quantity[${record._id}]`}\n                {...formItemLayout}>\n                {getFieldDecorator(`quantity[${record._id}]`, {\n                    validateTrigger: ['onChange', 'onBlur'],\n                    rules: [{\n                        required: true,\n                        message: \"This field is required.\",\n                    }],\n                    initialValue: record.quantity,\n                })(\n                    <InputNumber min={0} placeholder=\"Quantity\" size={'small'}\n                                 onChange={() => this.calculateItem(record._id)}/>\n                )}\n            </Form.Item>\n        }, {\n            title: 'Cost',\n            dataIndex: 'cost',\n            key: 'cost',\n            render: (name, record) => <Form.Item\n                key={`cost[${record._id}]`}\n                {...formItemLayout}>\n                {getFieldDecorator(`cost[${record._id}]`, {\n                    validateTrigger: ['onChange', 'onBlur'],\n                    rules: [{\n                        required: true,\n                        message: \"This field is required.\",\n                    }],\n                    initialValue: record.cost\n                })(\n                    <InputNumber min={0} placeholder=\"Cost\" size={'small'}\n                                 onChange={() => this.calculateItem(record._id)}/>\n                )}\n            </Form.Item>\n        }, {\n            title: 'Discount',\n            dataIndex: 'discount',\n            key: 'discount',\n            render: (name, record) => <Form.Item\n                key={`discount[${record._id}]`}\n                {...formItemLayout}>\n                {getFieldDecorator(`discount[${record._id}]`, {\n                    validateTrigger: ['onChange', 'onBlur'],\n                    rules: [{\n                        message: \"This field is required.\",\n                    }],\n                })(\n                    <InputNumber min={0} placeholder=\"Discount\" size={'small'}\n                                 onChange={() => this.calculateItem(record._id)}/>\n                )} %\n            </Form.Item>\n        }, {\n            title: 'Total',\n            dataIndex: 'total',\n            key: 'total',\n            render: (total, record) => <span>\n                {total}\n                <Button icon={\"close\"} onClick={() => this.removeTreatment(record._id)} type={\"danger\"}\n                        shape=\"circle\"\n                        size=\"small\"/>\n            </span>\n        }];\n        return <div>\n\n            <Card title={\"Completed Procedures\"}>\n                <Row>\n                    <Col span={17}>\n                        <Form onSubmit={this.handleSubmit}>\n                            <Table pagination={false}\n                                   bordered={true}\n                                   dataSource={this.state.tableFormValues}\n                                   columns={consumeRow}/>\n\n                            <Affix offsetBottom={0}>\n                                <Card>\n                                    <span>by &nbsp;&nbsp;</span>\n                                    <Dropdown placement=\"topCenter\" overlay={<Menu>\n                                        {this.state.practiceDoctors.map(doctor =>\n                                            <Menu.Item key=\"0\">\n                                                <a onClick={() => this.selectDoctor(doctor)}>{doctor.user.first_name}</a>\n                                            </Menu.Item>)}\n                                    </Menu>} trigger={['click']}>\n                                        <a className=\"ant-dropdown-link\" href=\"#\">\n                                            <b>\n                                                {this.state.selectedDoctor.user ? this.state.selectedDoctor.user.first_name : 'No DOCTORS Found'}\n                                            </b>\n                                        </a>\n                                    </Dropdown>\n                                    <span> &nbsp;&nbsp;on&nbsp;&nbsp;</span>\n                                    <DatePicker value={this.state.selectedDate}\n                                                onChange={(value) => this.selectedDate(value)} format={\"DD-MM-YYYY\"}\n                                                allowClear={false}/>\n                                    <Form.Item {...formItemLayoutWithOutLabel}\n                                               style={{marginBottom: 0, float: 'right'}}>\n                                        <Button type=\"primary\" htmlType=\"submit\" style={{margin: 5}}>Save Treatment\n                                            Plan</Button>\n                                        {that.props.history ?\n                                            <Button style={{margin: 5, float: 'right'}}\n                                                    onClick={() => that.props.history.goBack()}>\n                                                Cancel\n                                            </Button> : null}\n                                    </Form.Item>\n                                </Card>\n                            </Affix>\n                            <div ref={el => {\n                                that.bottomPoint = el;\n                            }}/>\n                        </Form>\n                    </Col>\n                    <Col span={7}>\n                        <Affix offsetTop={0}>\n                            <div style={{backgroundColor: '#ddd', padding: 8}}>\n                                <Input.Search placeholder={\"Search in plans ...\"}\n                                              onChange={e => this.searchValues(e.target.value)}/>\n                            </div>\n                            <List size={\"small\"}\n                                  loading={this.state.loadingProcedures}\n                                  style={{maxHeight: '100vh', overflowX: 'scroll'}}\n                                  itemLayout=\"horizontal\"\n                                  dataSource={this.state.filteredItems}\n                                  renderItem={item => (\n                                      <List.Item onClick={() => this.add(item)}>\n                                          <List.Item.Meta\n                                              title={item.name}/>\n                                      </List.Item>)}/>\n                        </Affix>\n                    </Col>\n                </Row>\n            </Card>\n\n        </div>\n    }\n}\n\nexport default Form.create()(AddorEditDynamicCompletedTreatmentPlans)\n","import React from \"react\";\nimport {Button, Card, Checkbox, Divider, Icon, Table, Popconfirm, Menu, Dropdown, Tag, Tooltip,} from \"antd\";\nimport {getAPI, interpolate, putAPI, postAPI, displayMessage} from \"../../../utils/common\";\nimport {\n    PROCEDURE_CATEGORY,\n    PRODUCT_MARGIN,\n    TREATMENTPLANS_API,\n    SINGLE_REATMENTPLANS_API,\n    TREATMENTPLANS_PDF\n} from \"../../../constants/api\";\nimport moment from \"moment\";\nimport {Link, Redirect, Route, Switch} from \"react-router-dom\";\nimport {SELECT_FIELD, SUCCESS_MSG_TYPE} from \"../../../constants/dataKeys\";\nimport AddorEditDynamicCompletedTreatmentPlans from \"./AddorEditDynamicCompletedTreatmentPlans\";\nimport InfiniteFeedLoaderButton from \"../../common/InfiniteFeedLoaderButton\";\nimport {BACKEND_BASE_URL} from \"../../../config/connect\";\nimport {Modal} from \"antd\";\n\nconst confirm = Modal.confirm;\n\nclass PatientCompletedProcedures extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            currentPatient: this.props.currentPatient,\n            active_practiceId: this.props.active_practiceId,\n            treatmentPlans: [],\n            procedure_category: null,\n            completedTreatmentPlans: [],\n            incompletedTreatmentPlans: [],\n            productMargin: [],\n            loading: true\n        }\n        this.loadTreatmentPlans = this.loadTreatmentPlans.bind(this);\n        this.editTreatmentPlanData = this.editTreatmentPlanData.bind(this);\n    }\n\n    componentDidMount() {\n        this.loadTreatmentPlans();\n        this.loadProductMargin();\n    }\n\n    loadProductMargin() {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                productMargin: data,\n                loading: false\n            })\n        }\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            })\n        }\n        getAPI(PRODUCT_MARGIN, successFn, errorFn);\n    }\n\n    loadTreatmentPlans(page = 1) {\n        let incompleted = [];\n        let that = this;\n        let successFn = function (data) {\n            that.setState(function (prevState) {\n                if (data.current == 1)\n                    return {\n                        treatmentPlans: [...data.results],\n                        next: data.next,\n                        loading: false\n                    }\n                return {\n                    treatmentPlans: [...prevState.treatmentPlans, ...data.results],\n                    next: data.next,\n                    loading: false\n                }\n            })\n            data.results.forEach(function (treatmentplan) {\n                if (!treatmentplan.is_completed) {\n                    incompleted.push(treatmentplan)\n                }\n            })\n            that.setState(function (prevState) {\n                return {\n                    incompletedTreatmentPlans: [...prevState.incompletedTreatmentPlans, ...incompleted],\n                    loading: false\n                }\n            })\n        }\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            })\n\n        }\n        let apiParams = {\n            page: page,\n            practice: this.props.active_practiceId,\n            complete: true\n        };\n        if (this.props.match.params.id) {\n            apiParams.patient = this.props.match.params.id;\n        }\n        if (this.props.showAllClinic && this.props.match.params.id) {\n            delete (apiParams.practice)\n        }\n        getAPI(TREATMENTPLANS_API, successFn, errorFn, apiParams)\n    }\n\n    editTreatmentPlanData(record) {\n        this.setState({\n            editTreatmentPlan: record,\n        });\n        // console.log(\"props history\",this.props);\n        let id = this.props.match.params.id;\n        this.props.history.push(\"/patient/\" + id + \"/emr/workdone/edit\");\n\n    }\n\n    deleteTreatmentPlans(record) {\n        let that = this;\n        confirm({\n            title: 'Are you sure to delete this item?',\n            okText: 'Yes',\n            okType: 'danger',\n            cancelText: 'No',\n            onOk() {\n                let obj = {\n                    id: record.id,\n                    patient: record.patient.id,\n                    is_active: false\n                }\n\n\n                let successFn = function (data) {\n                    displayMessage(SUCCESS_MSG_TYPE, \"Completed Procedure Deleted Successfully!\");\n                    that.loadTreatmentPlans();\n                }\n                let errorFn = function () {\n\n                };\n                postAPI(interpolate(TREATMENTPLANS_API, [that.props.match.params.id], null), obj, successFn, errorFn);\n            },\n            onCancel() {\n                console.log('Cancel');\n            },\n        });\n    }\n\n    loadPDF(id) {\n        let that = this;\n        let successFn = function (data) {\n            if (data.report)\n                window.open(BACKEND_BASE_URL + data.report);\n        }\n        let errorFn = function () {\n\n        }\n        getAPI(interpolate(TREATMENTPLANS_PDF, [id]), successFn, errorFn);\n    }\n\n    render() {\n        let that = this;\n\n        const columns = [{\n            title: '',\n            key: 'is_completed',\n            render: (text, record) => (record.is_completed ?\n                <Icon type=\"check-circle\" theme=\"twoTone\" style={{marginLeft: '8px', fontSize: '20px'}}/> :\n                null)\n        }, {\n            title: 'Procedure',\n            key: 'procedure.name',\n            dataIndex: 'procedure.name',\n\n        }, {\n            title: 'Quantity',\n            dataIndex: 'quantity',\n            initialValue: (this.state.editFields ? this.state.editFields.quantity : null),\n            key: 'quantity',\n        }, {\n            title: 'Discount',\n            dataIndex: 'discount',\n            key: 'discount',\n        }, {\n            title: 'Cost per  Unit',\n            dataIndex: 'cost',\n            key: 'cost',\n        }, {\n            title: 'Notes',\n            dataIndex: 'default_notes',\n            key: 'default_notes',\n        }];\n\n        if (this.props.match.params.id) {\n            return <div>\n                <Switch>\n                    <Route exact path='/patient/:id/emr/workdone/add'\n                           render={(route) => <AddorEditDynamicCompletedTreatmentPlans {...this.state} {...that.props} {...route} loadData={this.loadTreatmentPlans}/>}/>\n                    <Route exact path='/patient/:id/emr/workdone/edit'\n                           render={(route) => (this.state.editTreatmentPlan ?\n                               <AddorEditDynamicCompletedTreatmentPlans {...this.state} {...route} {...that.props}\n                                                                        editId={this.state.editTreatmentPlan.id} loadData={this.loadTreatmentPlans}/> :\n                               <Redirect to={\"/patient/\" + this.props.match.params.id + \"/emr/workdone\"}/>)}/>\n                    <Route>\n\n                        <div>\n                            <Card\n                                bodyStyle={{padding: 0}}\n                                title={this.state.currentPatient ? this.state.currentPatient.user.first_name + \" Completed Procedures\" : \"Completed Procedures \"}\n                                extra={<Button.Group>\n                                    <Link\n                                        to={\"/patient/\" + this.props.match.params.id + \"/emr/workdone/add\"}><Button><Icon\n                                        type=\"plus\"/>Add</Button></Link>\n                                </Button.Group>}/>\n\n                            {this.state.treatmentPlans.map((treatment) => <Card bodyStyle={{padding: 0}}\n                                                                                style={{marginTop: 15}}>\n                                    <div style={{padding: 16}}>\n                                        <h4>{treatment.date ? moment(treatment.date).format('ll') : null}\n                                            <Dropdown.Button\n                                                size={\"small\"}\n                                                style={{float: 'right'}}\n                                                overlay={<Menu>\n                                                    <Menu.Item key=\"1\" onClick={() => that.editTreatmentPlanData(treatment)}\n                                                               disabled={(treatment.practice && treatment.practice.id != this.props.active_practiceId)}>\n                                                        <Icon type=\"edit\"/>\n                                                        Edit\n                                                    </Menu.Item>\n                                                    <Menu.Item key=\"2\" onClick={() => that.deleteTreatmentPlans(treatment)}\n                                                               disabled={(treatment.practice && treatment.practice.id != this.props.active_practiceId)}>\n                                                        <Icon type=\"delete\"/>\n                                                        Delete\n                                                    </Menu.Item>\n                                                    <Menu.Divider/>\n                                                    <Menu.Item key=\"3\">\n                                                        <Link to={\"/patient/\" + treatment.patient + \"/emr/timeline\"}>\n                                                            <Icon type=\"clock-circle\"/>\n                                                            &nbsp;\n                                                            Patient Timeline\n                                                        </Link>\n                                                    </Menu.Item>\n                                                </Menu>}>\n                                                <a onClick={() => this.loadPDF(treatment.id)}><Icon type=\"printer\"/></a>\n                                            </Dropdown.Button>\n                                        </h4>\n\n                                    </div>\n                                    <Table loading={this.state.loading} columns={columns}\n                                           dataSource={treatment.treatment_plans}\n                                           footer={() => treatmentFooter(treatment)}\n                                           pagination={false}\n                                           key={treatment.id}/>\n                                </Card>\n                            )}\n                            <InfiniteFeedLoaderButton loaderFunction={() => this.loadTreatmentPlans(that.state.next)}\n                                                      loading={this.state.loading}\n                                                      hidden={!this.state.next}/>\n                        </div>\n                    </Route>\n                </Switch>\n            </div>\n        }\n        else {\n            return <div>\n                <Card\n                    bodyStyle={{padding: 0}}\n                    title={this.state.currentPatient ? this.state.currentPatient.user.first_name + \" Completed Procedures\" : \"Completed Procedures \"}\n                    extra={<Button.Group>\n                        <Button onClick={() => this.props.togglePatientListModal(true)}>\n                            <Icon\n                                type=\"plus\"/>Add\n                        </Button>\n                    </Button.Group>}/>\n                {this.state.treatmentPlans.map((treatment) => <Card bodyStyle={{padding: 0}}\n                                                                    key={treatment.id}\n                                                                    style={{marginTop: 15}}>\n                        <div style={{padding: 16}}>\n                            <h4>{treatment.date ? moment(treatment.date).format('ll') : null}\n                            <Link to={\"/patient/\" + treatment.patient.id + \"/emr/workdone\"}>\n                             &nbsp;&nbsp; {treatment.patient.user?treatment.patient.user.first_name:null} (ID: {treatment.patient.custom_id?treatment.patient.custom_id:treatment.patient.id})&nbsp;\n                            </Link>\n                            <span>, {treatment.patient.gender}</span>\n                                <Dropdown.Button\n                                    size={\"small\"}\n                                    style={{float: 'right'}}\n                                    overlay={<Menu>\n                                        <Menu.Item key=\"1\" disabled={(treatment.practice && treatment.practice.id != this.props.active_practiceId)}>\n                                            <Link to={\"/patient/\" + treatment.patient.id + \"/emr/workdone/edit\"}>\n                                                <Icon type=\"edit\"/>\n                                                &nbsp;\n                                                Edit\n                                            </Link>\n                                        </Menu.Item>\n                                        <Menu.Item key=\"2\" onClick={() => that.deleteTreatmentPlans(treatment)}\n                                                   disabled={(treatment.practice && treatment.practice.id != this.props.active_practiceId)}>\n                                            <Icon type=\"delete\"/>\n                                            Delete\n                                        </Menu.Item>\n                                        <Menu.Divider/>\n                                        <Menu.Item key=\"3\">\n                                            <Link to={\"/patient/\" + treatment.patient.id + \"/emr/timeline\"}>\n                                                <Icon type=\"clock-circle\"/>\n                                                &nbsp;\n                                                Patient Timeline\n                                            </Link>\n                                        </Menu.Item>\n                                    </Menu>}>\n                                    <Icon type=\"printer\"/>\n                                </Dropdown.Button>\n                            </h4>\n\n                        </div>\n                        <Table loading={this.state.loading} columns={columns}\n                               dataSource={treatment.treatment_plans}\n                               footer={() => treatmentFooter(treatment)}\n                               pagination={false}\n                               key={treatment.id}/>\n\n                    </Card>\n                )}\n                <InfiniteFeedLoaderButton loaderFunction={() => this.loadTreatmentPlans(that.state.next)}\n                                          loading={this.state.loading}\n                                          hidden={!this.state.next}/>\n            </div>\n        }\n\n    }\n}\n\nexport default PatientCompletedProcedures;\n\nfunction treatmentFooter(presc) {\n    if (presc) {\n\n        return <div>\n            {presc.doctor ? <Tag color={presc.doctor ? presc.doctor.calendar_colour : null}>\n                <b>{\"Completed by  \" + presc.doctor.user.first_name} </b>\n            </Tag> : null}\n            {presc.practice ? <Tag style={{float: 'right'}}>\n                <Tooltip title=\"Practice Name\">\n                    <b>{presc.practice.name} </b>\n                </Tooltip>\n            </Tag> : null}\n        </div>\n    }\n    return null\n}\n","import React from \"react\";\nimport {\n    Card,\n    Row,\n    Col,\n    Form,\n    Table,\n    Divider,\n    Tabs,\n    List,\n    Button,\n    Input,\n    Select,\n    Radio,\n    InputNumber,\n    Icon,\n    Affix,\n    Popconfirm,\n    Tag\n} from 'antd';\nimport {DRUG_CATALOG, INVENTORY_ITEM_API, LABTEST_API} from \"../../../constants/api\";\nimport {displayMessage, getAPI, interpolate, postAPI, putAPI} from \"../../../utils/common\";\nimport {remove} from \"lodash\";\nimport {DURATIONS_UNIT, DOSE_REQUIRED, DRUG} from \"../../../constants/hardData\";\nimport {WARNING_MSG_TYPE} from \"../../../constants/dataKeys\";\nimport {PRESCRIPTIONS_API, PRESCRIPTION_TEMPLATE} from \"../../../constants/api\";\nimport {Link, Route, Switch} from \"react-router-dom\";\n\nconst TabPane = Tabs.TabPane;\nlet id = 0;\n\n\nclass PrescriptionTemplate extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            items: {},\n            filteredItems: {},\n            drugList: [],\n            labList: [],\n            formDrugList: [],\n            formLabList: [],\n            addInstructions: {},\n            changeDurationUnits: {},\n            addedDrugs: {},\n            addedLabs: {},\n            addTemplate: {},\n            formTemplateList: [],\n            searchStrings: {}\n\n        }\n        this.loadPrescriptionTemplate = this.loadPrescriptionTemplate.bind(this);\n        this.deletePrescriptionTemplate = this.deletePrescriptionTemplate.bind(this);\n    }\n\n    componentDidMount() {\n        this.loadDrugList();\n        this.loadLabList();\n        this.loadPrescriptionTemplate();\n    }\n\n    loadPrescriptionTemplate() {\n        var that = this;\n        let successFn = function (data) {\n            that.setState({\n                prescriptionTemplate: data.results,\n            })\n        };\n        let errorFn = function () {\n\n        };\n        console.log(\"template\", that.state.prescriptionTemplate);\n        getAPI(interpolate(PRESCRIPTION_TEMPLATE, [that.props.active_practiceId]), successFn, errorFn)\n    }\n\n    loadLabList() {\n        var that = this;\n        let successFn = function (data) {\n            that.setState({\n                labList: data.results,\n            })\n        };\n        let errorFn = function () {\n\n        };\n        getAPI(interpolate(LABTEST_API, [that.props.active_practiceId]), successFn, errorFn);\n    }\n\n    loadDrugList(page = 1) {\n        let that = this;\n        let successFn = function (data) {\n            that.setState(function (prevState) {\n                let items = {...prevState.items}\n                return {\n                    items: {...items, \"Drugs\": data.results},\n                    filteredItems: {...prevState.filteredItems, \"Drugs\": data.results}\n                }\n            })\n        }\n        let errorFn = function () {\n\n        }\n        let params = {\n            practice: this.props.active_practiceId,\n            item_type: DRUG,\n            page: page\n        };\n        if (that.state.searchStrings.Drugs) {\n            params.item_name = that.state.searchStrings.Drugs\n        }\n        getAPI(INVENTORY_ITEM_API, successFn, errorFn, params);\n    }\n\n    addDrug(item) {\n        this.setState(function (prevState) {\n            let randId = Math.random().toFixed(7);\n            if (prevState.addedDrugs[item.id]) {\n                displayMessage(WARNING_MSG_TYPE, \"Item Already Added\");\n                return false;\n            }\n            return {\n                addedDrugs: {...prevState.addedDrugs, [item.id]: true},\n                formDrugList: [...prevState.formDrugList, {\n                    ...item,\n                    _id: randId,\n                }]\n            }\n        });\n\n    }\n\n    addInstructions = (_id, option) => {\n        this.setState(function (prevState) {\n            return {addInstructions: {...prevState.addInstructions, [_id]: !!option}}\n        })\n    }\n    changeDurationUnits = (_id, option) => {\n        this.setState(function (prevState) {\n            return {changeDurationUnits: {...prevState.changeDurationUnits, [_id]: !!option}}\n        })\n    }\n    removeDrug = (_id) => {\n        this.setState(function (prevState) {\n            return {\n                formDrugList: [...remove(prevState.formDrugList, function (item) {\n                    return item._id != _id;\n                })]\n            }\n        });\n    }\n    removeLabs = (_id, item) => {\n        this.setState(function (prevState) {\n            return {\n                addedLabs: {...prevState.addedLabs, [item.id]: false},\n                formLabList: [...remove(prevState.formLabList, function (item) {\n                    return item._id != _id;\n                })]\n            }\n        });\n    }\n    addLabs = (item) => {\n        this.setState(function (prevState) {\n            let randId = Math.random().toFixed(7);\n            console.log(\"LAb state\", prevState);\n            if (prevState.addedLabs[item.id]) {\n                displayMessage(WARNING_MSG_TYPE, \"Item Already Added\");\n                return false;\n            }\n            return {\n                addedLabs: {...prevState.addedLabs, [item.id]: true},\n                formLabList: [...prevState.formLabList, {\n                    ...item,\n                    _id: randId,\n                }]\n            }\n            // console.log(\"ide\",this.state.tableFormValues);\n        });\n    };\n\n    addTemplate = (item) => {\n        this.setState(function (prevState) {\n            // console.log(\"templateData state\",prevState);\n            let randId = Math.random().toFixed(7);\n            if (prevState.addTemplate[item.id]) {\n                displayMessage(WARNING_MSG_TYPE, \"Item Already Added\");\n                return false;\n            }\n            let prevLabs = [...prevState.formLabList];\n            let prevAddedLabs = {...prevState.addedLabs};\n            if (item.labs)\n                item.labs.forEach(function (lab) {\n                    let randId = Math.random().toFixed(7);\n                    prevLabs.push({\n                        ...lab,\n                        _id: randId,\n                    });\n                    prevAddedLabs = {...prevAddedLabs, [lab.id]: true}\n                });\n\n            let prevDrugs = [...prevState.formDrugList];\n            let prevAddedDrugs = {...prevState.addedDrugs};\n            if (item.drugs)\n                item.drugs.forEach(function (drugs) {\n                    let randId = Math.random().toFixed(7);\n                    prevDrugs.push({\n                        ...drugs,\n                        _id: randId,\n                        advice_data: item.advice_data,\n                    });\n                    prevAddedDrugs = {...prevAddedDrugs, [drugs.id]: true}\n\n                })\n\n\n            return {\n                addedLabs: prevAddedLabs,\n                formLabList: prevLabs,\n                addedDrugs: prevAddedDrugs,\n                formDrugList: prevDrugs\n            }\n\n        });\n    };\n    removeTemplates = (_id, item) => {\n        this.setState(function (prevState) {\n            return {\n                addTemplate: {...prevState.addTemplate, [item.id]: false},\n                formTemplateList: [...remove(prevState.formTemplateList, function (item) {\n                    return item._id != _id;\n                })]\n            }\n        });\n    }\n    handleSubmit = (e) => {\n        let that = this;\n        e.preventDefault();\n        this.props.form.validateFields((err, values) => {\n            console.log(\"value form\", values);\n\n            if (!err) {\n\n                let reqData = {\n                    ...values,\n                    drug: [],\n                    labs: [],\n                    advice_data: [],\n                    patient: that.props.match.params.id,\n                    practice: that.props.active_practiceId,\n\n                };\n\n                that.state.formDrugList.forEach(function (item) {\n                    console.log(\"advice search\", item);\n                    item.dosage = values.does[item._id];\n                    item.duration_type = values.duration_unit[item._id];\n                    item.duration = values.duration[item._id];\n                    item.frequency = values.does_frequency[item._id];\n                    if (values.instruction) {\n                        item.instruction = values.instruction[item._id];\n                    }\n                    if (values.food_time[item._id]) {\n                        item.after_food = true;\n                        item.before_food = false;\n                    } else {\n                        item.before_food = true;\n                        item.after_food = false;\n                    }\n\n                    if (item.advice_data) {\n                        item.advice_data.map(function (advice) {\n                            reqData.advice_data.push(advice.id)\n                        })\n                    }\n                    const drugIitem = {\n                        \"inventory\": item.id,\n                        \"name\": item.name,\n                        \"dosage\": item.dosage,\n                        \"frequency\": item.frequency,\n                        \"duration\": item.duration,\n                        \"duration_type\": item.duration_type,\n                        \"instruction\": item.instruction,\n                        \"before_food\": item.before_food,\n                        \"after_food\": item.after_food,\n                        \"advice_data\": that.state.prescriptionTemplate.advice_data,\n                        \"is_active\": true,\n                    };\n                    reqData.drug.push(drugIitem);\n                });\n                that.state.formLabList.forEach(function (item) {\n                    reqData.labs.push(item.id);\n                });\n                let successFn = function (data) {\n                    // let url = '/patient/' + that.props.match.params.id + '/emr/prescriptions';\n                    that.props.history.goBack();\n                }\n                let errorFn = function () {\n\n                }\n                console.log(\"final\", reqData);\n                postAPI(interpolate(PRESCRIPTION_TEMPLATE, [that.props.active_practiceId]), reqData, successFn, errorFn);\n            }\n        });\n    }\n\n    deletePrescriptionTemplate(id) {\n        var that = this;\n        let reqData = {id: id, is_active: false};\n        let successFn = function (data) {\n            that.loadPrescriptionTemplate();\n        };\n        let errorFn = function () {\n        };\n        postAPI(interpolate(PRESCRIPTION_TEMPLATE, [that.props.active_practiceId]), reqData, successFn, errorFn);\n\n    }\n\n    handleAddFields = () => {\n        const {form} = this.props;\n        const keys = form.getFieldValue(\"keys\");\n        const nextKeys = keys.concat(id++);\n        form.setFieldsValue({\n            keys: nextKeys\n        });\n    };\n    remove = (k) => {\n        const {form} = this.props;\n        const keys = form.getFieldValue('keys');\n        if (keys.length === 1) {\n            return;\n        }\n        form.setFieldsValue({\n            keys: keys.filter(key => key !== k),\n        });\n    }\n    onChange = e => {\n        this.setState({});\n    };\n    searchValues = (type, value) => {\n        let that = this;\n        this.setState(function (prevState) {\n            let searchValues = {...prevState.searchStrings};\n            searchValues[type] = value;\n            return {searchStrings: searchValues}\n        }, function () {\n            if (type == 'Drugs')\n                that.loadDrugList();\n            else\n                that.filterValues(type);\n        });\n    }\n    filterValues = (type) => {\n        this.setState(function (prevState) {\n            let filteredItemOfGivenType = [];\n            if (prevState.items[type]) {\n                if (prevState.searchStrings[type]) {\n                    prevState.items[type].forEach(function (item) {\n                        if (item.name && item.name\n                            .toString()\n                            .toLowerCase()\n                            .includes(prevState.searchStrings[type].toLowerCase())) {\n                            filteredItemOfGivenType.push(item);\n                        }\n                    });\n                } else {\n                    filteredItemOfGivenType = prevState.items[type];\n                }\n            }\n            return {\n                filteredItems: {...prevState.filteredItems, [type]: filteredItemOfGivenType}\n            }\n        });\n    }\n\n    render() {\n        let that = this;\n        const formItemLayout = {\n            labelCol: {\n                xs: {span: 24},\n                sm: {span: 4}\n            },\n            wrapperCol: {\n                xs: {span: 24},\n                sm: {span: 12}\n            }\n        };\n        const formItemLayoutWithOutLabel = {\n            wrapperCol: {\n                xs: {span: 24, offset: 0},\n                sm: {span: 12, offset: 4}\n            }\n        };\n        const {getFieldDecorator, getFieldValue, getFieldsValue} = this.props.form;\n\n        getFieldDecorator('keys', {initialValue: []});\n        const keys = getFieldValue('keys');\n        const formItems = keys.map((k, index) => (\n            <Form.Item  {...(index === 0 ? formItemLayout : formItemLayoutWithOutLabel)}\n                        label={index === 0 ? 'Advice' : ''}\n                        required={false}\n                        key={k}\n            >\n                {getFieldDecorator(`advice_data[${k}]`, {\n                    validateTrigger: ['onChange', 'onBlur'],\n\n                })(\n                    <Input style={{width: '60%', marginRight: 8}}/>\n                )}\n                {keys.length > 1 ? (\n                    <Icon\n                        className=\"dynamic-delete-button\"\n                        type=\"minus-circle-o\"\n                        onClick={() => this.remove(k)}\n                    />\n                ) : null}\n            </Form.Item>\n        ));\n\n        const drugTableColumns = [{\n            title: 'Drug Name',\n            dataIndex: 'name',\n            key: 'name',\n            render: name => <h2>{name}</h2>\n        }, {\n            title: 'Dosage & Frequency',\n            dataIndex: 'dosage',\n            key: 'dosage',\n            render: (dosage, record) => <div><Form.Item\n                extra={<span>does(s)</span>}\n                key={`does[${record._id}]`}>\n                {getFieldDecorator(`does[${record._id}]`, {\n                        validateTrigger: ['onChange', 'onBlur'],\n\n                    },\n                    {\n                        rules: [{message: \"This field is required.\",}],\n                    })(\n                    <InputNumber min={0} size={\"small\"}/>\n                )}\n\n            </Form.Item>\n                <Form.Item\n                    key={`does_frequency[${record._id}]`}>\n                    {getFieldDecorator(`does_frequency[${record._id}]`, {\n                        validateTrigger: ['onChange', 'onBlur'],\n                        rules: [{\n                            message: \"This field is required.\",\n                        }],\n                        initialValue: 'twice daily'\n                    })(\n                        <Select size={\"small\"} onChange={() => this.changeDurationUnits(record._id, false)}>\n                            {DOSE_REQUIRED.map(item => <Select.Option\n                                value={item.value}>{item.label}</Select.Option>)}\n                        </Select>\n                    )}\n                </Form.Item>\n            </div>\n        }, {\n            title: 'Duration',\n            dataIndex: 'duration',\n            key: 'duration',\n            render: (duration, record) => <div>\n                <Form.Item\n                    key={`duration[${record._id}]`}>\n                    {getFieldDecorator(`duration[${record._id}]`, {\n                            validateTrigger: ['onChange', 'onBlur']\n                        },\n                        {\n                            rules: [{message: \"This field is required.\",}],\n                        })(\n                        <InputNumber min={0} size={\"small\"}/>\n                    )}\n                </Form.Item>\n                <Form.Item\n                    key={`duration_unit[${record._id}]`}>\n                    {getFieldDecorator(`duration_unit[${record._id}]`, {\n                        validateTrigger: ['onChange', 'onBlur'],\n                        rules: [{\n                            message: \"This field is required.\",\n                        }],\n                        initialValue: 'day(s)'\n                    })(\n                        <Select size={\"small\"} onChange={() => this.changeDurationUnits(record._id, false)}>\n                            {DURATIONS_UNIT.map(item => <Select.Option\n                                value={item.value}>{item.label}</Select.Option>)}\n                        </Select>\n                    )}\n                </Form.Item>\n            </div>\n        },\n            // {this.state.prescriptionTemplate.advice_data ? true:false},\n            {\n                title: 'Instructions',\n                dataIndex: 'instruction',\n                key: 'instruction',\n                render: (instruction, record) =>\n                    <div>\n                        {this.state.addInstructions[record._id] ?\n                            <Form.Item\n                                extra={<a onClick={() => this.addInstructions(record._id, false)}>Remove\n                                    Instructions</a>}\n                                key={`instruction[${record._id}]`}>\n                                {getFieldDecorator(`instruction[${record._id}]`, {\n                                    validateTrigger: ['onChange', 'onBlur'],\n                                    rules: [{\n                                        message: \"This field is required.\",\n                                    }],\n                                })(\n                                    <Input.TextArea min={0} placeholder={\"Instructions...\"} size={\"small\"}/>\n                                )}\n\n                            </Form.Item>\n                            : <a onClick={() => this.addInstructions(record._id, true)}>+ Add Instructions</a>}\n                    </div>\n            }, {\n                title: \"Timing\",\n                dataIndex: \"food_time\",\n                key: 'food_time',\n                render: (timing, record) => <div>\n                    <Form.Item key={`food_time[${record._id}]`}>\n                        {getFieldDecorator(`food_time[${record._id}]`)(\n                            <Radio.Group onChange={this.onChange}>\n                                <Radio value={1}>After Food</Radio>\n                                <Radio value={0}>Before Food</Radio>\n                            </Radio.Group>\n                        )}\n                    </Form.Item>\n\n                </div>\n\n            },\n\n            {\n                title: '',\n                dataIndex: 'action',\n                key: 'action',\n                render: (instructions, record) => <Form.Item>\n                    <Button icon={\"close\"} onClick={() => this.removeDrug(record._id)} type={\"danger\"} shape=\"circle\"\n                            size=\"small\"/>\n                </Form.Item>\n            }];\n        const labTablecolums = [{\n            title: 'Name',\n            dataIndex: 'name',\n            key: 'name',\n            render: (name, record) => <span>\n                <b>{name}</b>\n                </span>\n        }, {\n            title: 'Cost',\n            dataIndex: 'cost',\n            key: 'cost',\n            render: (name, record) => <span>{record.cost}</span>\n        }, {\n            title: 'Total',\n            dataIndex: 'total',\n            key: 'total',\n            render: (total, record) => <span>\n                {total}\n                <Button icon={\"close\"} onClick={() => this.removeLabs(record._id, record)} type={\"danger\"}\n                        shape=\"circle\"\n                        size=\"small\"/>\n            </span>\n        }];\n\n        return <Card title={\"Prescriptions Template\"}>\n            <Row>\n                <Col span={18}>\n                    <Form onSubmit={this.handleSubmit}>\n                        <Form.Item {...formItemLayout} label={\"Template Name\"}>\n                            {getFieldDecorator('name', {})(\n                                <Input/>\n                            )}\n                        </Form.Item>\n\n                        <Form.Item {...formItemLayout} label={\"Schedule\"}>\n                            {getFieldDecorator('schedule', {})(\n                                <InputNumber min={1}/>\n                            )}\n\n                        </Form.Item>\n                        <Table pagination={false} bordered={false} columns={drugTableColumns}\n                               dataSource={this.state.formDrugList}/>\n\n                        <Divider> Lab Test</Divider>\n                        <Table pagination={false} bordered={false} columns={labTablecolums}\n                               dataSource={this.state.formLabList}/>\n\n\n                        <Divider/>\n                        {formItems}\n                        <Form.Item {...formItemLayoutWithOutLabel}>\n                            <Button type=\"dashed\" onClick={this.handleAddFields} style={{width: '60%'}}>\n                                <Icon type=\"plus\"/> Add advice field\n                            </Button>\n                        </Form.Item>\n                        <Affix target={() => this.container}>\n                            <Button type=\"primary\" htmlType=\"submit\">\n                                Save\n                            </Button>\n                        </Affix>\n                    </Form>\n                </Col>\n                <Col span={6}>\n                    <Tabs type=\"card\">\n                        <TabPane tab=\"Drugs\" key=\"1\">\n                            <div style={{backgroundColor: '#ddd', padding: 8}}>\n                                <Input.Search key={\"Drugs\"}\n                                              placeholder={\"Search in Medicine...\"}\n                                              onChange={e => this.searchValues(\"Drugs\", e.target.value)}\n                                />\n                            </div>\n                            <List size={\"small\"}\n                                  itemLayout=\"horizontal\"\n                                  dataSource={this.state.filteredItems[\"Drugs\"]}\n                                  renderItem={item => (\n                                      <List.Item onClick={() => this.addDrug(item)}\n                                                 actions={(item.maintain_inventory ? null : [<Tag>Not Sold</Tag>])}>\n                                          <List.Item.Meta\n                                              title={item.name}\n                                          />\n                                      </List.Item>)}/>\n                        </TabPane>\n                        <TabPane tab=\"Labs\" key=\"2\">\n                            <List size={\"small\"}\n                                  itemLayout=\"horizontal\"\n                                  dataSource={this.state.labList}\n                                  renderItem={item => (\n                                      <List.Item onClick={() => this.addLabs(item)}>\n                                          <List.Item.Meta\n                                              title={item.name}/>\n                                      </List.Item>)}/>\n                        </TabPane>\n                        <TabPane tab=\"Template\" key=\"3\">\n\n                            <List size={\"small\"}\n                                  itemLayout=\"horizontal\"\n                                  dataSource={this.state.prescriptionTemplate}\n\n                                  renderItem={item => (\n                                      <List.Item onConfirm={() => that.deletePrescriptionTemplate(item.id)}>\n                                          <List.Item.Meta onClick={() => this.addTemplate(item)} title={item.name}/>\n                                          <Popconfirm title=\"Are you sure delete this item?\"\n                                                      onConfirm={() => that.deletePrescriptionTemplate(item.id)}\n                                                      okText=\"Yes\" cancelText=\"No\">\n                                              <a>Delete</a>\n                                          </Popconfirm>\n                                      </List.Item>)}/>\n                        </TabPane>\n                    </Tabs>\n                </Col>\n                <Switch>\n                    <Route exact path='/patient/:id/prescriptions/template/add'\n                           renderRoute={(route) => <PrescriptionTemplate {...this.state} {...route}/>}/>\n                </Switch>\n            </Row>\n        </Card>\n    }\n}\n\nexport default Form.create()(PrescriptionTemplate);\n","import React from \"react\";\nimport {\n    Card,\n    Row,\n    Col,\n    Form,\n    Table,\n    Divider,\n    Tabs,\n    List,\n    Button,\n    Input,\n    Select,\n    Radio,\n    InputNumber,\n    Icon,\n    Affix,\n    Popconfirm,\n    DatePicker,\n    Dropdown,\n    Menu, Tag\n} from 'antd';\nimport {DRUG_CATALOG, INVENTORY_ITEM_API, LABTEST_API, PRACTICESTAFF} from \"../../../constants/api\";\nimport {displayMessage, getAPI, interpolate, postAPI, putAPI} from \"../../../utils/common\";\nimport {remove} from \"lodash\";\nimport {DURATIONS_UNIT, DOSE_REQUIRED, DRUG} from \"../../../constants/hardData\";\nimport {DOCTORS_ROLE, WARNING_MSG_TYPE} from \"../../../constants/dataKeys\";\nimport {PRESCRIPTIONS_API, PRESCRIPTION_TEMPLATE} from \"../../../constants/api\";\nimport PrescriptionTemplate from \"./PrescriptionTemplate\";\nimport {Link, Route, Switch} from \"react-router-dom\";\nimport {loadDoctors} from \"../../../utils/clinicUtils\";\nimport moment from \"moment\";\n\nconst TabPane = Tabs.TabPane;\n\nclass AddorEditDynamicPatientPrescriptions extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            items: {},\n            filteredItems: {},\n            formDrugList: [],\n            formLabList: [],\n            addInstructions: {},\n            changeDurationUnits: {},\n            addedDrugs: {},\n            addedLabs: {},\n            addTemplate: {},\n            formTemplateList: [],\n            practiceDoctors: [],\n            selectedDoctor: {},\n            selectedDate: moment(),\n            searchStrings: {}\n        }\n        this.loadPrescriptionTemplate = this.loadPrescriptionTemplate.bind(this);\n        this.deletePrescriptionTemplate = this.deletePrescriptionTemplate.bind(this);\n    }\n\n    componentDidMount() {\n        let that = this;\n        this.loadDrugList();\n        this.loadLabList();\n        this.loadPrescriptionTemplate();\n        loadDoctors(this);\n        if (this.props.editId) {\n            this.setState(function (prevState) {\n                let drugList = [];\n                let addInstructions = {};\n                let addedLabs = {};\n                // let dosage = {};\n                // let frequency = {};\n                // let duration = {};\n                // let duration_type = {};\n                that.props.editPrescription.drugs.forEach(function (drug) {\n                    let _id = Math.random();\n                    drugList.push({...drug, _id: _id, food_time: (drug.after_food ? 1 : 0)});\n                    addInstructions[_id] = !!drug.instruction;\n                    // dosage[_id] = drug.dosage;\n                    // frequency[_id] = drug.frequency;\n                    // duration[_id] = drug.duration;\n                    // duration_type[_id] = drug.duration_type;\n                });\n                let labList = []\n                that.props.editPrescription.labs.forEach(lab => {\n                    labList.push({\n                        ...lab,\n                        _id: Math.random()\n                    });\n                    addedLabs[lab.id] = true\n                })\n\n                return {\n                    ...that.props.editPrescription,\n                    formDrugList: [...drugList],\n                    formLabList: [...labList],\n                    addInstructions: {...addInstructions},\n                    addedLabs: {...addedLabs},\n                    // dosage: {...dosage},\n                    // frequency: {...frequency},\n                    // duration: {...duration},\n                    // duration_type: {...duration_type},\n                    selectedDoctor: that.props.editPrescription.doctor,\n                    selectedDate: moment(that.props.editPrescription.date).isValid() ? moment(that.props.editPrescription.date) : moment()\n                }\n            })\n        }\n    }\n\n    selectDoctor = (doctor) => {\n        this.setState({\n            selectedDoctor: doctor\n        })\n    }\n\n    selectedDate = (date) => {\n        this.setState({\n            selectedDate: date\n        })\n    }\n\n    loadPrescriptionTemplate() {\n        var that = this;\n        let successFn = function (data) {\n            that.setState(function (prevState) {\n                let items = {...prevState.items}\n                return {\n                    items: {...items, \"Template\": data.results},\n                    filteredItems: {...prevState.filteredItems, \"Template\": data.results}\n                }\n            })\n\n        };\n        let errorFn = function () {\n\n        };\n        getAPI(interpolate(PRESCRIPTION_TEMPLATE, [that.props.active_practiceId]), successFn, errorFn)\n    }\n\n    loadLabList() {\n        var that = this;\n        let successFn = function (data) {\n            that.setState(function (prevState) {\n                let items = {...prevState.items}\n                return {\n                    items: {...items, \"Labs\": data.results},\n                    filteredItems: {...prevState.filteredItems, \"Labs\": data.results}\n                }\n            })\n        };\n        let errorFn = function () {\n\n        };\n        getAPI(interpolate(LABTEST_API, [that.props.active_practiceId]), successFn, errorFn);\n    }\n\n    loadDrugList(page = 1) {\n        let that = this;\n        let searchString = that.state.searchStrings.Drugs;\n        let successFn = function (data) {\n            if (searchString == that.state.searchStrings.Drugs)\n                that.setState(function (prevState) {\n                    let items = {...prevState.items}\n                    return {\n                        items: {...items, \"Drugs\": data.results},\n                        filteredItems: {...prevState.filteredItems, \"Drugs\": data.results}\n                    }\n                })\n        }\n        let errorFn = function () {\n\n        }\n        let params = {\n            practice: this.props.active_practiceId,\n            item_type: DRUG,\n            page: page\n        };\n        if (searchString) {\n            params.item_name = searchString\n        }\n        getAPI(INVENTORY_ITEM_API, successFn, errorFn, params);\n    }\n\n\n    addDrug(item) {\n        this.setState(function (prevState) {\n            let randId = Math.random().toFixed(7);\n            return {\n                addedDrugs: {...prevState.addedDrugs, [item.id]: true},\n                formDrugList: [{\n                    ...item,\n                    _id: randId,\n                }, ...prevState.formDrugList]\n            }\n        });\n\n    }\n\n    addInstructions = (_id, option) => {\n        this.setState(function (prevState) {\n            return {addInstructions: {...prevState.addInstructions, [_id]: !!option}}\n        })\n    }\n    changeDurationUnits = (_id, option) => {\n        this.setState(function (prevState) {\n            return {changeDurationUnits: {...prevState.changeDurationUnits, [_id]: !!option}}\n        })\n    }\n    removeDrug = (_id) => {\n        this.setState(function (prevState) {\n            return {\n                formDrugList: [...remove(prevState.formDrugList, function (item) {\n                    return item._id != _id;\n                })]\n            }\n        });\n    }\n    removeLabs = (_id, item) => {\n        this.setState(function (prevState) {\n            return {\n                addedLabs: {...prevState.addedLabs, [item.id]: false},\n                formLabList: [...remove(prevState.formLabList, function (item) {\n                    return item._id != _id;\n                })]\n            }\n        });\n    }\n    addLabs = (item) => {\n        this.setState(function (prevState) {\n            let randId = Math.random().toFixed(7);\n            if (prevState.addedLabs[item.id]) {\n                displayMessage(WARNING_MSG_TYPE, \"Item Already Added\");\n                return false;\n            }\n            return {\n                addedLabs: {...prevState.addedLabs, [item.id]: true},\n                formLabList: [...prevState.formLabList, {\n                    ...item,\n                    _id: randId,\n                }]\n            }\n        });\n    };\n\n    addTemplate = (item) => {\n        this.setState(function (prevState) {\n            if (prevState.addTemplate[item.id]) {\n                displayMessage(WARNING_MSG_TYPE, \"Item Already Added\");\n                return false;\n            }\n            let prevLabs = [...prevState.formLabList];\n            let prevAddedLabs = {...prevState.addedLabs};\n            item.labs.forEach(function (lab) {\n                let randId = Math.random().toFixed(7);\n                prevLabs.push({\n                    ...lab,\n                    _id: randId,\n                });\n                prevAddedLabs = {...prevAddedLabs, [lab.id]: true}\n            });\n\n            let prevDrugs = [...prevState.formDrugList];\n            let prevAddedDrugs = {...prevState.addedDrugs};\n            item.drugs.forEach(function (drugs) {\n                let randId = Math.random().toFixed(7);\n                prevDrugs.push({\n                    ...drugs,\n                    _id: randId,\n                    advice_data: item.advice_data,\n                });\n                prevAddedLabs = {...prevAddedDrugs, [drugs.id]: true}\n\n            })\n\n\n            return {\n                addedLabs: prevAddedLabs,\n                formLabList: prevLabs,\n                addedDrugs: prevAddedDrugs,\n                formDrugList: prevDrugs\n            }\n\n        });\n    };\n    removeTemplates = (_id, item) => {\n        this.setState(function (prevState) {\n            return {\n                addTemplate: {...prevState.addTemplate, [item.id]: false},\n                formTemplateList: [...remove(prevState.formTemplateList, function (item) {\n                    return item._id != _id;\n                })]\n            }\n        });\n    }\n    handleSubmit = (e) => {\n        let that = this;\n        e.preventDefault();\n        this.props.form.validateFields((err, values) => {\n            if (!err) {\n                let reqData = {\n                    drugs: [],\n                    labs: [],\n                    patient: parseInt(that.props.match.params.id),\n                    practice: that.props.active_practiceId,\n                    doctor: that.state.selectedDoctor ? that.state.selectedDoctor.id : null,\n                    date: that.state.selectedDate ? that.state.selectedDate.format('YYYY-MM-DD') : null,\n                    advice_data: []\n                };\n                if (that.props.editId) {\n                    reqData.id = that.props.editId;\n                }\n                that.state.formDrugList.forEach(function (item) {\n                    item.dosage = values.dosage[item._id];\n                    item.duration_type = values.duration_type[item._id];\n                    item.duration = values.duration[item._id];\n                    item.frequency = values.frequency[item._id];\n                    if (values.instruction) {\n                        item.instruction = values.instruction[item._id];\n                    }\n                    if (values.food_time[item._id]) {\n                        item.after_food = true;\n                        item.before_food = false;\n                    } else {\n                        item.before_food = true;\n                        item.after_food = false;\n                    }\n\n                    // if (item.advice_data) {\n                    //     item.advice_data.map(function (advice) {\n                    //         reqData.advice_data.push(advice.id)\n                    //     })\n                    // }\n                    const drugItem = {\n                        \"inventory\": item.id,\n                        \"name\": item.name,\n                        \"dosage\": item.dosage,\n                        \"frequency\": item.frequency,\n                        \"duration_type\": item.duration_type,\n                        \"duration\": item.duration,\n                        \"instruction\": item.instruction,\n                        \"before_food\": item.before_food,\n                        \"after_food\": item.after_food,\n                        \"is_active\": true,\n                    };\n                    reqData.drugs.push(drugItem);\n                    console.log(\"item drug\", item);\n                });\n                that.state.formLabList.forEach(function (item) {\n                    reqData.labs.push(item.id);\n                });\n                let successFn = function (data) {\n                    if (that.props.loadData)\n                        that.props.loadData();\n                    let url = '/patient/' + that.props.match.params.id + '/emr/prescriptions';\n                    that.props.history.push(url);\n                }\n                let errorFn = function () {\n\n                }\n                postAPI(interpolate(PRESCRIPTIONS_API, [that.props.match.params.id]), reqData, successFn, errorFn);\n            } else {\n                console.log(err);\n            }\n        });\n    }\n\n    deletePrescriptionTemplate(id) {\n        var that = this;\n        let reqData = {id: id, is_active: false};\n        let successFn = function (data) {\n            that.loadPrescriptionTemplate();\n        };\n        let errorFn = function () {\n        };\n        postAPI(interpolate(PRESCRIPTION_TEMPLATE, [that.props.active_practiceId]), reqData, successFn, errorFn);\n\n    }\n\n    onChange = e => {\n        this.setState({});\n    };\n    searchValues = (type, value) => {\n        let that = this;\n        this.setState(function (prevState) {\n            let searchValues = {...prevState.searchStrings};\n            searchValues[type] = value;\n            return {searchStrings: searchValues}\n        }, function () {\n            if (type == 'Drugs')\n                that.loadDrugList();\n            else\n                that.filterValues(type);\n        });\n    }\n    filterValues = (type) => {\n        this.setState(function (prevState) {\n            let filteredItemOfGivenType = [];\n            if (prevState.items[type]) {\n                if (prevState.searchStrings[type]) {\n                    prevState.items[type].forEach(function (item) {\n                        if (item.name && item.name\n                            .toString()\n                            .toLowerCase()\n                            .includes(prevState.searchStrings[type].toLowerCase())) {\n                            filteredItemOfGivenType.push(item);\n                        }\n                    });\n                } else {\n                    filteredItemOfGivenType = prevState.items[type];\n                }\n            }\n            return {\n                filteredItems: {...prevState.filteredItems, [type]: filteredItemOfGivenType}\n            }\n        });\n    }\n\n    render() {\n        let that = this;\n        const {getFieldDecorator, getFieldValue, getFieldsValue} = this.props.form;\n        const drugTableColumns = [{\n            title: 'Medicine Name',\n            dataIndex: 'name',\n            key: 'name',\n            render: name => <h2>{name}</h2>\n        }, {\n            title: 'Dosage & Frequency',\n            dataIndex: 'dosage',\n            key: 'dosage',\n            render: (dosage, record) => <div>\n                <Form.Item\n                    extra={<span>does(s)</span>}\n                    key={`dosage[${record._id}]`}>\n                    {getFieldDecorator(`dosage[${record._id}]`, {\n                        validateTrigger: ['onChange', 'onBlur'],\n                        rules: [{message: \"This field is required.\",}],\n                        initialValue: record.dosage,\n                        min: 0\n                    })(\n                        <InputNumber size={\"small\"}/>\n                    )}\n                </Form.Item>\n                <Form.Item\n                    key={`frequency[${record._id}]`}>\n                    {getFieldDecorator(`frequency[${record._id}]`, {\n                        validateTrigger: ['onChange', 'onBlur'],\n                        rules: [{\n                            message: \"This field is required.\",\n                        }],\n                        initialValue: record.frequency || DOSE_REQUIRED[0].value\n                    })(\n                        <Select size={\"small\"} onChange={() => this.changeDurationUnits(record._id, false)}>\n                            {DOSE_REQUIRED.map(item => <Select.Option\n                                value={item.value}>{item.label}</Select.Option>)}\n                        </Select>\n                    )}\n                </Form.Item>\n            </div>\n        }, {\n            title: 'Duration',\n            dataIndex: 'duration',\n            key: 'duration',\n            render: (duration, record) => <div>\n                <Form.Item\n                    key={`duration[${record._id}]`}>\n                    {getFieldDecorator(`duration[${record._id}]`, {\n                        validateTrigger: ['onChange', 'onBlur'],\n                        rules: [{message: \"This field is required.\",}],\n                        initialValue: record.duration,\n                        min: 0\n                    })(\n                        <InputNumber size={\"small\"}/>\n                    )}\n                </Form.Item>\n                <Form.Item\n                    key={`duration_type[${record._id}]`}>\n                    {getFieldDecorator(`duration_type[${record._id}]`, {\n                        validateTrigger: ['onChange', 'onBlur'],\n                        rules: [{\n                            message: \"This field is required.\",\n                        }],\n                        initialValue: record.duration_type || DURATIONS_UNIT[0].value\n                    })(\n                        <Select size={\"small\"} onChange={() => this.changeDurationUnits(record._id, false)}>\n                            {DURATIONS_UNIT.map(item => <Select.Option\n                                value={item.value}>{item.label}</Select.Option>)}\n                        </Select>\n                    )}\n                </Form.Item>\n            </div>\n        }, {\n            title: 'Instructions',\n            dataIndex: 'instruction',\n            key: 'instruction',\n            render: (instruction, record) =>\n                <div>\n                    {this.state.addInstructions[record._id] ?\n                        <Form.Item\n                            extra={<a onClick={() => this.addInstructions(record._id, false)}>Remove\n                                Instructions</a>}\n                            key={`instruction[${record._id}]`}>\n                            {getFieldDecorator(`instruction[${record._id}]`, {\n                                validateTrigger: ['onChange', 'onBlur'],\n                                rules: [{\n                                    message: \"This field is required.\",\n                                }],\n                                initialValue: record.instruction\n                            })(\n                                <Input.TextArea placeholder={\"Instructions...\"} size={\"small\"}/>\n                            )}\n\n                        </Form.Item>\n                        : <a onClick={() => this.addInstructions(record._id, true)}>+ Add Instructions</a>}\n                </div>\n        }, {\n            title: \"Timing\",\n            dataIndex: \"food_time\",\n            key: 'food_time',\n            render: (timing, record) => <div>\n                <Form.Item key={`food_time[${record._id}]`}>\n                    {getFieldDecorator(`food_time[${record._id}]`, {\n                        initialValue: record.food_time || 0\n                    })(\n                        <Radio.Group onChange={this.onChange}>\n                            <Radio value={1}>after</Radio>\n                            <Radio value={0}>before</Radio>\n                        </Radio.Group>\n                    )}\n                </Form.Item>\n\n            </div>\n\n        }, {\n            title: '',\n            dataIndex: 'action',\n            key: 'action',\n            render: (instructions, record) => <Form.Item>\n                <Button icon={\"close\"} onClick={() => this.removeDrug(record._id)} type={\"danger\"} shape=\"circle\"\n                        size=\"small\"/>\n            </Form.Item>\n        }];\n        const labTablecolums = [{\n            title: 'Name',\n            dataIndex: 'name',\n            key: 'name',\n            render: (name, record) => <span>\n                <b>{name}</b>\n                </span>\n        }, {\n            title: 'Cost',\n            dataIndex: 'cost',\n            key: 'cost',\n            render: (name, record) => <span>{record.cost}</span>\n        }, {\n            title: 'Total',\n            dataIndex: 'total',\n            key: 'total',\n            render: (total, record) => <span>\n                {total}\n                <Button icon={\"close\"} onClick={() => this.removeLabs(record._id, record)} type={\"danger\"}\n                        shape=\"circle\"\n                        size=\"small\"/>\n            </span>\n        }];\n\n        return <Card title={\"Prescriptions\"}>\n            <Row>\n                <Col span={18}>\n                    <Form onSubmit={this.handleSubmit}>\n                        <Table pagination={false} bordered={false} columns={drugTableColumns}\n                               dataSource={this.state.formDrugList}/>\n\n                        <Divider> Lab Test</Divider>\n                        <Table pagination={false} bordered={false} columns={labTablecolums}\n                               dataSource={this.state.formLabList}/>\n\n                        <Affix offsetBottom={0}>\n                            <Card>\n                                <span>by &nbsp;&nbsp;</span>\n                                <Dropdown placement=\"topCenter\" overlay={<Menu>\n                                    {this.state.practiceDoctors.map(doctor =>\n                                        <Menu.Item key=\"0\">\n                                            <a onClick={() => this.selectDoctor(doctor)}>{doctor.user.first_name}</a>\n                                        </Menu.Item>)}\n                                </Menu>} trigger={['click']}>\n                                    <a className=\"ant-dropdown-link\" href=\"#\">\n                                        <b>\n                                            {this.state.selectedDoctor.user ? this.state.selectedDoctor.user.first_name : 'No DOCTORS Found'}\n                                        </b>\n                                    </a>\n                                </Dropdown>\n                                <span> &nbsp;&nbsp;on&nbsp;&nbsp;</span>\n                                <DatePicker value={this.state.selectedDate}\n                                            onChange={(value) => this.selectedDate(value)} format={\"DD-MM-YYYY\"}/>\n\n                                <Button type=\"primary\" htmlType=\"submit\" style={{margin: 5, float: 'right'}}>\n                                    Save\n                                </Button>\n                                {that.props.history ?\n                                    <Button style={{margin: 5, float: 'right'}}\n                                            onClick={() => that.props.history.goBack()}>\n                                        Cancel\n                                    </Button> : null}\n                            </Card>\n                        </Affix>\n                    </Form>\n                </Col>\n                <Col span={6}>\n                    <Tabs type=\"card\">\n                        <TabPane tab=\"Medicine\" key=\"1\">\n                            <div style={{backgroundColor: '#ddd', padding: 8}}>\n                                <Input.Search key={\"Drugs\"}\n                                              placeholder={\"Search in Medicine...\"}\n                                              onChange={e => this.searchValues(\"Drugs\", e.target.value)}\n                                />\n                            </div>\n                            <List size={\"small\"}\n                                  itemLayout=\"horizontal\"\n                                  dataSource={this.state.filteredItems[\"Drugs\"]}\n                                  renderItem={item => (\n                                      <List.Item onClick={() => this.addDrug(item)}\n                                                 actions={(item.maintain_inventory ? null : [<Tag>Not Sold</Tag>])}>\n                                          <List.Item.Meta\n                                              title={item.name}\n                                          />\n                                      </List.Item>)}/>\n                        </TabPane>\n                        <TabPane tab=\"Labs\" key=\"2\">\n                            <div style={{backgroundColor: '#ddd', padding: 8}}>\n                                <Input.Search key={\"Labs\"}\n                                              placeholder={\"Search in Labs...\"}\n                                              onChange={e => this.searchValues(\"Labs\", e.target.value)}\n                                />\n                            </div>\n                            <List size={\"small\"}\n                                  itemLayout=\"horizontal\"\n                                  dataSource={this.state.filteredItems[\"Labs\"]}\n                                  renderItem={item => (\n                                      <List.Item onClick={() => this.addLabs(item)}>\n                                          <List.Item.Meta\n                                              title={item.name}/>\n                                      </List.Item>)}/>\n                        </TabPane>\n                        <TabPane tab=\"Template\" key=\"3\">\n                            <div>\n                                <Link to={\"/patient/\" + this.props.match.params.id + \"/prescriptions/template/add\"}>\n                                    <Button type=\"primary\" block size={'small'}>\n                                        <Icon type=\"plus\"/>&nbsp;Add Template\n                                    </Button>\n                                </Link>\n                            </div>\n                            <Divider style={{margin: 0}}/>\n                            <div style={{backgroundColor: '#ddd', padding: 8}}>\n                                <Input.Search key={\"Template\"}\n                                              placeholder={\"Search in Template...\"}\n                                              onChange={e => this.searchValues(\"Template\", e.target.value)}\n                                />\n                            </div>\n                            <List size={\"small\"}\n                                  itemLayout=\"horizontal\"\n                                  dataSource={this.state.filteredItems[\"Template\"]}\n                                  renderItem={item => (\n                                      <List.Item onConfirm={() => that.deletePrescriptionTemplate(item.id)}>\n                                          <List.Item.Meta onClick={() => this.addTemplate(item)} title={item.name}/>\n                                          <Popconfirm title=\"Are you sure delete this item?\"\n                                                      onConfirm={() => that.deletePrescriptionTemplate(item.id)}\n                                                      okText=\"Yes\" cancelText=\"No\">\n                                              <a>Delete</a>\n                                          </Popconfirm>\n                                      </List.Item>)}/>\n                        </TabPane>\n                    </Tabs>\n                </Col>\n                <Switch>\n                    <Route exact path='/patient/:id/prescriptions/template/add'\n                           render={(route) => <PrescriptionTemplate {...this.state} {...route}/>}/>\n                </Switch>\n            </Row>\n        </Card>\n    }\n}\n\nexport default Form.create()(AddorEditDynamicPatientPrescriptions);\n","import React from \"react\";\nimport {\n    Table,\n    Button,\n    Card,\n    Icon,\n    Tag, Menu,\n    Dropdown, Modal, Tooltip, Spin, Row\n} from \"antd\";\nimport {Link} from \"react-router-dom\";\nimport {\n    PRESCRIPTIONS_API,\n    DRUG_CATALOG,\n    PATIENT_PROFILE,\n    PATIENTS_LIST,\n    PRESCRIPTION_PDF\n} from \"../../../constants/api\";\nimport {getAPI, interpolate, displayMessage, postAPI, putAPI} from \"../../../utils/common\";\nimport moment from \"moment\";\nimport {Redirect, Switch, Route} from \"react-router\";\nimport AddorEditDynamicPatientPrescriptions from \"./AddorEditDynamicPatientPrescriptions\";\nimport InfiniteFeedLoaderButton from \"../../common/InfiniteFeedLoaderButton\";\nimport {BACKEND_BASE_URL} from \"../../../config/connect\";\n\nconst confirm = Modal.confirm;\n\nclass PatientPrescriptions extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            currentPatient: this.props.currentPatient,\n            active_practiceId: this.props.active_practiceId,\n            prescription: [],\n            drug_catalog: null,\n            editPrescription: null,\n            loading: true\n        }\n        this.loadPrescriptions = this.loadPrescriptions.bind(this);\n        this.loadDrugCatalog = this.loadDrugCatalog.bind(this);\n        this.editPrescriptionData = this.editPrescriptionData.bind(this);\n        this.deletePrescriptions = this.deletePrescriptions.bind(this);\n\n    }\n\n    componentDidMount() {\n        // if (this.props.match.params.id) {\n        this.loadPrescriptions();\n        this.loadDrugCatalog();\n        // }\n\n    }\n\n    loadPrescriptions(page = 1) {\n        let that = this;\n        this.setState({\n            loading: true\n        })\n        let successFn = function (data) {\n            that.setState({\n                prescription: data.results,\n                nextPrescriptionPage: data.next,\n                loading: false\n            })\n        }\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            })\n\n        }\n        let apiParams = {\n            page: page,\n            practice: this.props.active_practiceId\n        };\n        if (this.props.match.params.id) {\n            apiParams.patient = this.props.match.params.id;\n        }\n        if (this.props.showAllClinic && this.props.match.params.id) {\n            delete (apiParams.practice)\n        }\n        getAPI(PRESCRIPTIONS_API, successFn, errorFn, apiParams)\n    }\n\n    loadPDF(id) {\n        let that = this;\n        let successFn = function (data) {\n            if (data.report)\n                window.open(BACKEND_BASE_URL + data.report);\n        }\n        let errorFn = function () {\n\n        }\n        getAPI(interpolate(PRESCRIPTION_PDF, [id]), successFn, errorFn);\n    }\n\n\n    loadDrugCatalog() {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                drug_catalog: data,\n            })\n\n        }\n        let errorFn = function () {\n            that.setState({})\n\n        }\n        getAPI(interpolate(DRUG_CATALOG, [this.props.active_practiceId]), successFn, errorFn)\n    }\n\n    editPrescriptionData(record) {\n        let that = this;\n        this.setState({\n            editPrescription: record,\n        }, function () {\n            that.props.history.push(\"/patient/\" + record.patient + \"/emr/prescriptions/edit\")\n        });\n\n\n    }\n\n    deletePrescriptions(record) {\n        let that = this;\n        confirm({\n            title: 'Are you sure to delete this item?',\n            okText: 'Yes',\n            okType: 'danger',\n            cancelText: 'No',\n            onOk() {\n                let reqData = {\"id\": record.id, patient: record.patient, is_active: false};\n                let successFn = function (data) {\n                    that.loadPrescriptions();\n                }\n                let errorFn = function () {\n                }\n                postAPI(interpolate(PRESCRIPTIONS_API, [that.props.match.params.id]), reqData, successFn, errorFn);\n            },\n            onCancel() {\n                console.log('Cancel');\n            },\n        });\n    }\n\n\n    render() {\n        const drugs = {}\n        if (this.state.drug_catalog) {\n\n            this.state.drug_catalog.forEach(function (drug) {\n                drugs[drug.id] = (drug.name + \",\" + drug.strength)\n            })\n        }\n        let that = this;\n        const columns = [{\n            title: 'Drug',\n            key: 'name',\n            dataIndex: 'name',\n        }, {\n            title: 'Frequency',\n            dataIndex: 'frequency',\n            key: 'frequency',\n            render: (frequency, record) => <span>{record.dosage}&nbsp;{record.frequency}</span>\n        }, {\n            title: 'Duration',\n            dataIndex: 'duration',\n            key: 'duration',\n            render: (duration, record) => <span>{duration}&nbsp;{record.duration_type}</span>\n        }, {\n            title: 'Instruction',\n            dataIndex: 'instruction',\n            key: 'instruction',\n            render: (instruction, record) => <span>\n                    {record.before_food ? <Tag>before food </Tag> : null}\n                {record.after_food ? <Tag>after food</Tag> : null}\n                {instruction}\n                </span>\n        }];\n\n        if (this.props.match.params.id) {\n            return <div><Switch>\n                <Route exact path='/patient/:id/emr/prescriptions/add'\n                       render={(route) => <AddorEditDynamicPatientPrescriptions {...this.state} {...this.props}\n                                                                                loadData={this.loadPrescriptions}\n                                                                                {...route}/>}/>\n                <Route exact path='/patient/:id/emr/prescriptions/edit'\n                       render={(route) => (that.state.editPrescription ?\n                           <AddorEditDynamicPatientPrescriptions {...this.state} {...route} {...this.props}\n                                                                 loadData={this.loadPrescriptions}\n                                                                 editId={that.state.editPrescription.id}/> :\n                           <Redirect to={\"/patient/\" + that.props.match.params.id + \"/emr/prescriptions\"}/>)}/>\n                <Route>\n                    <div>\n                        <Card\n                            bodyStyle={{padding: 0}}\n                            title={this.state.currentPatient ? this.state.currentPatient.user.first_name + \" Prescriptions\" : \"Prescriptions\"}\n                            extra={<Button.Group style={{float: 'right'}}>\n                                <Link to={\"/patient/\" + this.props.match.params.id + \"/emr/prescriptions/add\"}>\n                                    <Button type={\"primary\"}><Icon type=\"plus\"/>Add</Button>\n                                </Link>\n                            </Button.Group>}/>\n\n                        {this.state.prescription.map((presc) => <div>\n                            <Card style={{marginTop: 10}}\n                                  bodyStyle={{padding: 0}}\n                                  title={<small>{presc.date ? moment(presc.date).format('ll') : null}</small>}\n                                  extra={<Dropdown.Button\n                                      size={\"small\"}\n                                      style={{float: 'right'}}\n                                      overlay={<Menu>\n                                          <Menu.Item key=\"1\" onClick={() => that.editPrescriptionData(presc)}\n                                                     disabled={(presc.practice && presc.practice.id != that.props.active_practiceId)}>\n                                              <Icon type=\"edit\"/>\n                                              Edit\n                                          </Menu.Item>\n                                          <Menu.Item key=\"2\" onClick={() => that.deletePrescriptions(presc)}\n                                                     disabled={(presc.practice && presc.practice.id != that.props.active_practiceId)}>\n                                              <Icon type=\"delete\"/>\n                                              Delete\n                                          </Menu.Item>\n                                          <Menu.Divider/>\n                                          <Menu.Item key=\"3\">\n                                              <Link to={\"/patient/\" + presc.patient + \"/emr/timeline\"}>\n                                                  <Icon type=\"clock-circle\"/>\n                                                  &nbsp;\n                                                  Patient Timeline\n                                              </Link>\n                                          </Menu.Item>\n                                      </Menu>}>\n                                      <a onClick={() => this.loadPDF(presc.id)}><Icon type=\"printer\"/></a>\n                                  </Dropdown.Button>}>\n                                <Table columns={columns} dataSource={presc.drugs} pagination={false}\n                                       footer={() => prescriptonFooter(presc)}\n                                       key={presc.id}/>\n                            </Card>\n                        </div>)}\n                        <Spin spinning={this.state.loading}>\n                            <Row>\n                            </Row>\n                        </Spin>\n                        <InfiniteFeedLoaderButton loading={this.state.loading}\n                                                  loaderFunction={() => this.loadPrescriptions(this.state.nextPrescriptionPage)}\n                                                  hidden={!this.state.nextPrescriptionPage}/>\n                    </div>\n                </Route>\n            </Switch>\n\n            </div>\n        }\n        else {\n            return <div>\n                <Card\n                    bodyStyle={{padding: 0}}\n                    title={this.state.currentPatient ? this.state.currentPatient.user.first_name + \" Prescriptions\" : \"Prescriptions\"}\n                    extra={<Button.Group style={{float: 'right'}}>\n                        <Button type={\"primary\"} onClick={() => this.props.togglePatientListModal(true)}>\n                            <Icon type=\"plus\"/>Add\n                        </Button>\n                    </Button.Group>}/>\n                {this.state.prescription.map((presc) => <div key={presc.id}>\n                    <Card style={{marginTop: 10,}}\n                          bodyStyle={{padding: 0}}\n                          title={<small>{presc.date ? moment(presc.date).format('ll') : null}\n                              <Link to={\"/patient/\" + presc.patient.id + \"/emr/prescriptions\"}>\n                                  &nbsp;&nbsp; {presc.patient.user ? presc.patient.user.first_name : null} (ID: {presc.patient.custom_id?presc.patient.custom_id:presc.patient.id})&nbsp;\n                              </Link>\n                              <span>, {presc.patient.gender}</span>\n                          </small>}\n                          extra={<Dropdown.Button\n                              size={\"small\"}\n                              style={{float: 'right'}}\n                              overlay={<Menu>\n                                  <Menu.Item key=\"1\" onClick={() => that.editPrescriptionData(presc)}\n                                             disabled={(presc.practice && presc.practice.id != that.props.active_practiceId)}>\n                                      <Icon type=\"edit\"/>\n                                      Edit\n                                  </Menu.Item>\n                                  <Menu.Item key=\"2\" onClick={() => that.deletePrescriptions(presc)}\n                                             disabled={(presc.practice && presc.practice.id != that.props.active_practiceId)}>\n                                      <Icon type=\"delete\"/>\n                                      Delete\n                                  </Menu.Item>\n                                  <Menu.Divider/>\n                                  <Menu.Item key=\"3\">\n                                      <Link to={\"/patient/\" + presc.patient + \"/emr/timeline\"}>\n                                          <Icon type=\"clock-circle\"/>\n                                          &nbsp;\n                                          Patient Timeline\n                                      </Link>\n                                  </Menu.Item>\n                              </Menu>}>\n                              <a onClick={() => this.loadPDF(presc.id)}><Icon type=\"printer\"/></a>\n                          </Dropdown.Button>}>\n                        <Table columns={columns} dataSource={presc.drugs} pagination={false}\n                               footer={() => prescriptonFooter(presc)}\n                               key={presc.id}/>\n                    </Card></div>)}\n                <Spin spinning={this.state.loading}>\n                    <Row>\n                    </Row>\n                </Spin>\n                <InfiniteFeedLoaderButton loading={this.state.loading}\n                                          loaderFunction={() => this.loadPrescriptions(this.state.nextPrescriptionPage)}\n                                          hidden={!this.state.nextPrescriptionPage}/>\n            </div>\n        }\n\n    }\n}\n\nexport default PatientPrescriptions;\n\nfunction prescriptonFooter(presc) {\n    if (presc) {\n\n        return <div>\n            {presc.doctor ? <Tooltip title=\"Doctor\"><Tag color={presc.doctor ? presc.doctor.calendar_colour : null}>\n                <b>{\"prescribed by  \" + presc.doctor.user.first_name} </b>\n            </Tag></Tooltip> : null}\n            {presc.practice ? <Tag style={{float: 'right'}}>\n                <Tooltip title=\"Practice Name\">\n                    <b>{presc.practice.name} </b>\n                </Tooltip>\n            </Tag> : null}\n            {presc.labs.length ? <div>\n                +{presc.labs.length}&nbsp;Lab Orders\n                {/*<Divider style={{margin:0}}/>*/}\n            </div> : null}\n        </div>\n    }\n    return null\n}\n\nfunction prescriptionHeader(presc) {\n    if (presc) {\n        return <span>{presc.date ? moment(presc.date).format('lll') : null}</span>\n    }\n    return null;\n}\n","import React from \"react\";\nimport {\n    Card,\n    Row,\n    Form,\n    Col,\n    List,\n    Button,\n    Table,\n    InputNumber,\n    Input,\n    Icon,\n    Affix,\n    Dropdown,\n    Menu,\n    DatePicker\n} from 'antd';\nimport {displayMessage, getAPI, interpolate, postAPI} from \"../../../utils/common\";\nimport {PRACTICESTAFF, PROCEDURE_CATEGORY, TREATMENTPLANS_API} from \"../../../constants/api\";\nimport {remove} from 'lodash';\nimport {Redirect} from 'react-router-dom';\nimport {DOCTORS_ROLE} from \"../../../constants/dataKeys\";\nimport moment from \"moment\";\nimport {loadDoctors} from \"../../../utils/clinicUtils\";\n\n\nclass AddorEditDynamicTreatmentPlans extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            loadingProcedures: true,\n            procedure_category: [],\n            tableFormValues: [],\n            addNotes: {},\n            practiceDoctors: [],\n            selectedDoctor: {},\n            selectedDate: moment()\n        }\n    }\n\n    componentDidMount() {\n        if (this.props.editId) {\n            this.setState(function (prevState) {\n                let tableValues = [];\n                this.props.editTreatmentPlan.treatment_plans.forEach(function (treatment) {\n                    let randId = Math.random().toFixed(7);\n                    tableValues.push({\n                        ...treatment,\n                        ...treatment.procedure,\n                        _id: randId,\n                    })\n                });\n                return {\n                    ...this.props.editTreatmentPlan,\n                    tableFormValues: tableValues,\n                    selectedDate: moment(this.props.editTreatmentPlan.date),\n                    selectedDoctor: this.props.editTreatmentPlan.doctor\n                }\n            })\n        }\n        this.loadProcedures();\n        loadDoctors(this);\n    }\n\n    calculateItem = (_id) => {\n        const {getFieldsValue} = this.props.form;\n        console.log(getFieldsValue());\n        this.setState(function (prevState) {\n            let newtableFormValues = [...prevState.tableFormValues];\n            newtableFormValues.forEach(function (item) {\n\n            });\n        });\n    }\n    addNotes = (_id, option) => {\n        this.setState(function (prevState) {\n            return {addNotes: {...prevState.addNotes, [_id]: !!option}}\n        })\n    }\n    removeTreatment = (_id) => {\n        this.setState(function (prevState) {\n            return {\n                tableFormValues: [...remove(prevState.tableFormValues, function (item) {\n                    return item._id != _id;\n                })]\n            }\n        });\n    }\n    add = (item) => {\n        let that = this;\n        this.setState(function (prevState) {\n            let randId = Math.random().toFixed(7);\n            return {\n                addNotes: {...prevState.addNotes, [randId]: !!item.default_notes},\n                tableFormValues: [{\n                    ...item,\n                    _id: randId,\n                },...prevState.tableFormValues]\n            }\n        }, function () {\n            // if (that.bottomPoint)\n            //     that.bottomPoint.scrollIntoView({behavior: 'smooth'});\n        });\n    };\n\n    loadProcedures() {\n        var that = this;\n        let params = {};\n        if (this.state.searchString) {\n            params.name = this.state.searchString;\n        }\n        that.setState({\n            loadingProcedures: true\n        })\n        let successFn = function (data) {\n            if (!params.name || that.state.searchString == params.name)\n                that.setState({\n                    // procedure_category: data.results,\n                    loadingProcedures: false,\n                    filteredItems: data.results,\n                })\n        };\n        let errorFn = function () {\n            that.setState({\n                loadingProcedures: false\n            })\n        };\n\n        getAPI(interpolate(PROCEDURE_CATEGORY, [this.props.active_practiceId]), successFn, errorFn, params);\n    }\n\n    selectDoctor = (doctor) => {\n        this.setState({\n            selectedDoctor: doctor\n        })\n    }\n    selectedDate = (date) => {\n        this.setState({\n            selectedDate: date\n        })\n    }\n    handleSubmit = (e) => {\n        let that = this;\n        e.preventDefault();\n        this.props.form.validateFields((err, values) => {\n            if (!err) {\n                console.log('Received values of form: ', values);\n                let reqData = {\n                    treatment_plans: [],\n                    patient: that.props.match.params.id,\n                    \"doctor\": that.state.selectedDoctor.id,\n                    \"date\": that.state.selectedDate && moment(that.state.selectedDate).isValid() ? that.state.selectedDate.format('YYYY-MM-DD') : null,\n                    \"practice\": that.props.active_practiceId,\n                };\n                if (that.props.editId) {\n                    reqData.id = that.props.editTreatmentPlan.id\n                }\n                that.state.tableFormValues.forEach(function (item) {\n                    console.log(item);\n                    item.quantity = values.quantity[item._id];\n                    item.cost = values.cost[item._id];\n                    item.discount = values.discount[item._id];\n                    if (values.notes)\n                        item.notes = values.notes[item._id];\n                    let sendingItem = {\n                        \"procedure\": item.id,\n                        \"cost\": item.cost,\n                        \"quantity\": item.quantity,\n                        \"margin\": item.margin,\n                        \"default_notes\": item.default_notes,\n                        \"is_active\": true,\n                        \"is_completed\": item.is_completed || false,\n                        \"discount\": item.discount,\n                        \"discount_type\": \"%\",\n                    };\n                    reqData.treatment_plans.push(sendingItem);\n                });\n\n                let successFn = function (data) {\n                    displayMessage(\"Inventory updated successfully\");\n                    if(that.props.loadData)\n                        that.props.loadData();\n                    let url = '/patient/' + that.props.match.params.id + '/emr/plans';\n                    that.props.history.push(url);\n                }\n                let errorFn = function () {\n\n                }\n                postAPI(interpolate(TREATMENTPLANS_API, [that.props.match.params.id]), reqData, successFn, errorFn);\n            }\n        });\n    }\n    searchValues = (value) => {\n        let that = this;\n        this.setState(function (prevState) {\n            return {searchString: value}\n        }, function () {\n            that.loadProcedures();\n        });\n        return false;\n    }\n\n    render() {\n        let that = this;\n        const {getFieldDecorator, getFieldValue, getFieldsValue} = this.props.form;\n        const formItemLayout = {\n            labelCol: {\n                xs: {span: 24},\n                sm: {span: 4},\n            },\n            wrapperCol: {\n                xs: {span: 24},\n                sm: {span: 20},\n            },\n        };\n        const formItemLayoutWithOutLabel = {\n            labelCol: {\n                xs: {span: 24},\n                sm: {span: 24},\n            },\n            wrapperCol: {\n                xs: {span: 24},\n                sm: {span: 24},\n            },\n        };\n        const consumeRow = [{\n            title: 'Treatments',\n            dataIndex: 'name',\n            key: 'name',\n            render: (name, record) => <span>\n                <b>{name}</b><br/>\n                {this.state.addNotes[record._id] ?\n                    <Form.Item\n                        key={`default_notes[${record._id}]`}\n                        {...formItemLayout}>\n                        {getFieldDecorator(`default_notes[${record._id}]`, {\n                            validateTrigger: ['onChange', 'onBlur'],\n                            rules: [{\n                                message: \"This field is required.\",\n                            }],\n                            initialValue: record.default_notes\n                        })(\n                            <Input.TextArea min={0} placeholder={\"Notes...\"}/>\n                        )}\n                    </Form.Item>\n                    : <a onClick={() => this.addNotes(record._id, true)}>+ Add Note</a>}\n                </span>\n        }, {\n            title: 'Quantity',\n            dataIndex: 'quantity',\n            key: 'quantity',\n            render: (name, record) => <Form.Item\n                key={`quantity[${record._id}]`}\n                {...formItemLayout}>\n                {getFieldDecorator(`quantity[${record._id}]`, {\n                    validateTrigger: ['onChange', 'onBlur'],\n                    rules: [{\n                        required: true,\n                        message: \"This field is required.\",\n                    }],\n                    initialValue: 1\n                })(\n                    <InputNumber min={0} placeholder=\"Quantity\" size={'small'}\n                                 onChange={() => this.calculateItem(record._id)}/>\n                )}\n            </Form.Item>\n        }, {\n            title: 'Cost',\n            dataIndex: 'cost',\n            key: 'cost',\n            render: (name, record) => <Form.Item\n                key={`cost[${record._id}]`}\n                {...formItemLayout}>\n                {getFieldDecorator(`cost[${record._id}]`, {\n                    validateTrigger: ['onChange', 'onBlur'],\n                    rules: [{\n                        required: true,\n                        message: \"This field is required.\",\n                    }],\n                    initialValue: record.cost\n                })(\n                    <InputNumber min={0} placeholder=\"Cost\" size={'small'}\n                                 onChange={() => this.calculateItem(record._id)}/>\n                )}\n            </Form.Item>\n        }, {\n            title: 'Discount',\n            dataIndex: 'discount',\n            key: 'discount',\n            render: (name, record) => <Form.Item\n                key={`discount[${record._id}]`}\n                {...formItemLayout}>\n                {getFieldDecorator(`discount[${record._id}]`, {\n                    validateTrigger: ['onChange', 'onBlur'],\n                    rules: [{\n                        message: \"This field is required.\",\n                    }],\n                })(\n                    <InputNumber min={0} placeholder=\"Discount\" size={'small'}\n                                 onChange={() => this.calculateItem(record._id)}/>\n                )} %\n            </Form.Item>\n        }, {\n            title: 'Total',\n            dataIndex: 'total',\n            key: 'total',\n            render: (total, record) => <span>\n                {total}\n                <Button icon={\"close\"} onClick={() => this.removeTreatment(record._id)} type={\"danger\"}\n                        shape=\"circle\"\n                        size=\"small\"/>\n            </span>\n        }];\n        return <div>\n\n            <Card title={\"Treatment Plans\"}>\n                <Row>\n\n                    <Col span={17}>\n                        <Form onSubmit={this.handleSubmit}>\n                            <Table pagination={false}\n                                   bordered={true}\n                                   dataSource={this.state.tableFormValues}\n                                   columns={consumeRow}/>\n\n                            <Affix offsetBottom={0}>\n                                <Card>\n                                    <span>by &nbsp;&nbsp;</span>\n                                    <Dropdown placement=\"topCenter\" overlay={<Menu>\n                                        {this.state.practiceDoctors.map(doctor =>\n                                            <Menu.Item key=\"0\">\n                                                <a onClick={() => this.selectDoctor(doctor)}>{doctor.user.first_name}</a>\n                                            </Menu.Item>)}\n                                    </Menu>} trigger={['click']}>\n                                        <a className=\"ant-dropdown-link\" href=\"#\">\n                                            <b>\n                                                {this.state.selectedDoctor.user ? this.state.selectedDoctor.user.first_name : 'No DOCTORS Found'}\n                                            </b>\n                                        </a>\n                                    </Dropdown>\n                                    <span> &nbsp;&nbsp;on&nbsp;&nbsp;</span>\n                                    <DatePicker value={this.state.selectedDate}\n                                                onChange={(value) => this.selectedDate(value)} format={\"DD-MM-YYYY\"}\n                                                allowClear={false}/>\n                                    <Form.Item {...formItemLayoutWithOutLabel}\n                                               style={{marginBottom: 0, float: 'right'}}>\n                                        <Button type=\"primary\" htmlType=\"submit\" style={{margin: 5}}>Save Treatment\n                                            Plan</Button>\n                                        {that.props.history ?\n                                            <Button style={{margin: 5, float: 'right'}}\n                                                    onClick={() => that.props.history.goBack()}>\n                                                Cancel\n                                            </Button> : null}\n                                    </Form.Item>\n                                </Card>\n                            </Affix>\n                            <div ref={el => {\n                                that.bottomPoint = el;\n                            }}/>\n                        </Form>\n                    </Col>\n                    <Col span={7}>\n                        <Affix offsetTop={0}>\n                            <div style={{backgroundColor: '#ddd', padding: 8}}>\n                                <Input.Search placeholder={\"Search in plans ...\"}\n                                              onChange={e => this.searchValues(e.target.value)}/>\n                            </div>\n                            <List size={\"small\"}\n                                  style={{maxHeight: '100vh', overflowX: 'scroll'}}\n                                  itemLayout=\"horizontal\"\n                                  dataSource={this.state.filteredItems}\n                                  loading={this.state.loadingProcedures}\n                                  renderItem={item => (\n                                      <List.Item onClick={() => this.add(item)}>\n                                          <List.Item.Meta\n                                              title={item.name}/>\n                                      </List.Item>)}/>\n                        </Affix>\n                    </Col>\n                </Row>\n            </Card>\n\n        </div>\n    }\n}\n\nexport default Form.create()(AddorEditDynamicTreatmentPlans)\n","import React from \"react\";\nimport {Checkbox, Table, Button, Card, Icon, Tag, Menu, Dropdown, Modal, Spin, Tooltip} from \"antd\";\nimport {Link} from \"react-router-dom\";\nimport {\n    PROCEDURE_CATEGORY,\n    TREATMENTPLANS_API,\n    TREATMENTPLANS_MARK_COMPLETE_API,\n    TREATMENTPLANS_PDF\n} from \"../../../constants/api\";\nimport {getAPI, interpolate, displayMessage, postAPI} from \"../../../utils/common\";\nimport moment from \"moment\";\nimport {Redirect, Switch, Route} from \"react-router\";\nimport AddorEditDynamicTreatmentPlans from \"./AddorEditDynamicTreatmentPlans\";\nimport {SUCCESS_MSG_TYPE} from \"../../../constants/dataKeys\";\nimport {BACKEND_BASE_URL} from \"../../../config/connect\";\nimport InfiniteFeedLoaderButton from \"../../common/InfiniteFeedLoaderButton\";\n\nconst confirm = Modal.confirm;\n\nclass PatientTreatmentPlans extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            currentPatient: this.props.currentPatient,\n            active_practiceId: this.props.active_practiceId,\n            treatmentPlans: [],\n            procedure_category: null,\n            incompletedTreatmentPlans: [],\n            loading: true,\n            selectedTreatments: {}\n        }\n        this.loadTreatmentPlans = this.loadTreatmentPlans.bind(this);\n        this.editTreatmentPlanData = this.editTreatmentPlanData.bind(this);\n        this.submitCompleteTreatment = this.submitCompleteTreatment.bind(this);\n    }\n\n    componentDidMount() {\n        this.loadTreatmentPlans();\n    }\n\n    loadTreatmentPlans(page = 1) {\n        let incompleted = [];\n        let that = this;\n        this.setState({\n            loading: true\n        })\n        let successFn = function (data) {\n            that.setState(function (prevState) {\n                if (data.current == 1) {\n                    return {\n                        treatmentPlans: [...data.results],\n                        next: data.next,\n                        loading: false\n                    }\n                }\n                return {\n                    treatmentPlans: [...prevState.treatmentPlans, ...data.results],\n                    next: data.next,\n                    loading: false\n                }\n            });\n            data.results.forEach(function (treatmentplan) {\n                if (!treatmentplan.is_completed) {\n                    incompleted.push(treatmentplan)\n                }\n            });\n            that.setState(function (prevState) {\n                if (data.current == 1) {\n                    return {\n                        incompletedTreatmentPlans: [...incompleted],\n                        loading: false\n                    }\n                }\n                return {\n                    incompletedTreatmentPlans: [...prevState.incompletedTreatmentPlans, ...incompleted],\n                    loading: false\n                }\n            })\n        }\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            })\n\n        };\n        let apiParams = {\n            page: page,\n            practice: this.props.active_practiceId\n        };\n        if (this.props.match.params.id) {\n            apiParams.patient = this.props.match.params.id;\n        }\n        if (this.props.showAllClinic && this.props.match.params.id) {\n            delete (apiParams.practice)\n        }\n        getAPI(TREATMENTPLANS_API, successFn, errorFn, apiParams)\n\n    }\n\n    editTreatmentPlanData(record) {\n        console.log(\"record\",record.id);\n        this.setState({\n            editTreatmentPlan: record,\n            loading: false\n        });\n        let id = record.patient;\n        this.props.history.push(\"/patient/\" + record.id + \"/emr/plans/edit\")\n\n    }\n\n\n    deleteTreatmentPlans(record) {\n        let that = this;\n        confirm({\n            title: 'Are you sure to delete this item?',\n            okText: 'Yes',\n            okType: 'danger',\n            cancelText: 'No',\n            onOk() {\n                let reqData = {\n                    id: record.id,\n                    patient: record.patient.id,\n                    is_active: false,\n                }\n                let successFn = function (data) {\n                    that.loadTreatmentPlans();\n                    displayMessage(SUCCESS_MSG_TYPE, \"Treatment Plan Deleted Successfully!\");\n\n                }\n                let errorFn = function () {\n\n                };\n                postAPI(interpolate(TREATMENTPLANS_API, [that.props.match.params.id], null), reqData, successFn, errorFn);\n            },\n            onCancel() {\n                console.log('Cancel');\n            },\n        });\n\n\n    }\n\n    treatmentCompleteToggle(id, option) {\n        this.setState(function (prevState) {\n            return {selectedTreatments: {...prevState.selectedTreatments, [id]: !!option}}\n        });\n    }\n\n    submitCompleteTreatment() {\n        let that = this;\n        let selectedTreatments = this.state.selectedTreatments;\n        let treatmentKeys = Object.keys(selectedTreatments);\n        // let reqTreatmentsArray = [];\n        let reqData = {\n            treatment: [],\n            patient: that.props.match.params.id\n        };\n        treatmentKeys.forEach(function (item) {\n            let treatmentObj = {id: item, is_completed: selectedTreatments[item]};\n            reqData.treatment.push(treatmentObj);\n        });\n        let successFn = function (data) {\n            that.loadTreatmentPlans();\n            that.setState({\n                selectedTreatments: {}\n            })\n        }\n        let errorFn = function () {\n\n        }\n        postAPI(interpolate(TREATMENTPLANS_MARK_COMPLETE_API, [this.props.match.params.id]), reqData, successFn, errorFn)\n    }\n\n    loadPDF(id) {\n        let that = this;\n        let successFn = function (data) {\n            if (data.report)\n                window.open(BACKEND_BASE_URL + data.report);\n        }\n        let errorFn = function () {\n\n        }\n        getAPI(interpolate(TREATMENTPLANS_PDF, [id]), successFn, errorFn);\n    }\n\n    render() {\n        let that = this;\n\n        const columns = [{\n            title: '',\n            key: 'is_completed',\n            render: (text, record) => (record.is_completed ?\n                <Icon type=\"check-circle\" theme=\"twoTone\" style={{marginLeft: '8px', fontSize: '20px'}}/> :\n                <Checkbox key={record.id}\n                          onChange={(e) => this.treatmentCompleteToggle(record.id, e.target.checked)}\n                          value={this.state.selectedTreatments[record.id]}/>)\n        }, {\n            title: 'Procedure',\n            dataIndex: 'procedure',\n            key: 'procedure',\n            render: (text, record) => (\n                <span> {text.name}</span>\n            )\n        }, {\n            title: 'Quantity',\n            dataIndex: 'quantity',\n            key: 'quantity',\n        }, {\n            title: 'Discount',\n            dataIndex: 'discount',\n            key: 'discount',\n        }, {\n            title: 'Cost per  Unit',\n            dataIndex: 'cost',\n            key: 'cost',\n        }, {\n            title: 'Notes',\n            dataIndex: 'default_notes',\n            key: 'default_notes',\n        }];\n\n        if (this.props.match.params.id) {\n            return <div><Switch>\n                <Route exact path='/patient/:id/emr/plans/add'\n                       render={(route) => <AddorEditDynamicTreatmentPlans {...this.state} {...route} {...that.props}\n                                                                          loadData={this.loadTreatmentPlans}/>}/>\n                <Route exact path='/patient/:id/emr/plans/edit'\n                       render={(route) => (this.state.editTreatmentPlan ?\n                           <AddorEditDynamicTreatmentPlans {...this.state} {...route} {...that.props}\n                                                           loadData={this.loadTreatmentPlans}\n                                                           editId={this.state.editTreatmentPlan.id}/> :\n                           <Redirect to={\"/patient/\" + this.props.match.params.id + \"/emr/plans\"}/>)}/>\n                <div>\n                    <Card\n                        bodyStyle={{padding: 0}}\n                        title={this.state.currentPatient ? this.state.currentPatient.user.first_name + \" TreatmentPlans\" : \"TreatmentPlans\"}\n                        extra={<Button.Group>\n                            <Button onClick={this.submitCompleteTreatment}>\n                                <Icon type=\"save\"/>Save\n                            </Button>\n                            <Link to={\"/patient/\" + this.props.match.params.id + \"/emr/plans/add\"}>\n                                <Button type={\"primary\"}>\n                                    <Icon type=\"plus\"/>Add\n                                </Button>\n                            </Link>\n                        </Button.Group>\n                        }/>\n                    <Spin spinning={this.state.loading}>\n                        {this.state.treatmentPlans.map((treatment) => <Card bodyStyle={{padding: 0}}\n                                                                            style={{marginTop: 15}}>\n                                <div style={{padding: 16}}>\n                                    <h4>{treatment.date ? moment(treatment.date).format('ll') : null}\n                                        <Dropdown.Button\n                                            size={\"small\"}\n                                            style={{float: 'right'}}\n                                            overlay={<Menu>\n                                                <Menu.Item key=\"1\" onClick={() => that.editTreatmentPlanData(treatment)}\n                                                           disabled={(treatment.practice && treatment.practice.id != this.props.active_practiceId)}>\n                                                    <Icon type=\"edit\"/>\n                                                    Edit\n                                                </Menu.Item>\n                                                <Menu.Item key=\"2\" onClick={() => that.deleteTreatmentPlans(treatment)}\n                                                           disabled={(treatment.practice && treatment.practice.id != this.props.active_practiceId)}>\n                                                    <Icon type=\"delete\"/>\n                                                    Delete\n                                                </Menu.Item>\n                                                <Menu.Divider/>\n                                                <Menu.Item key=\"3\">\n                                                    <Link to={\"/patient/\" + treatment.patient + \"/emr/timeline\"}>\n                                                        <Icon type=\"clock-circle\"/>\n                                                        &nbsp;\n                                                        Patient Timeline\n                                                    </Link>\n                                                </Menu.Item>\n                                            </Menu>}>\n                                            <a onClick={() => this.loadPDF(treatment.id)}><Icon type=\"printer\"/></a>\n                                        </Dropdown.Button>\n                                    </h4>\n\n                                </div>\n                                <Table loading={this.state.loading} columns={columns}\n                                       dataSource={treatment.treatment_plans}\n                                       footer={() => treatmentFooter(treatment)}\n                                       pagination={false}\n                                       key={treatment.id}/>\n\n                            </Card>\n                        )}</Spin>\n                    <InfiniteFeedLoaderButton loaderFunction={() => this.loadTreatmentPlans(that.state.next)}\n                                              loading={this.state.loading}\n                                              hidden={!this.state.next}/>\n                </div>\n            </Switch>\n\n            </div>\n        } else {\n            return <div>\n                <Card\n                    bodyStyle={{padding: 0}}\n                    title={this.state.currentPatient ? this.state.currentPatient.user.first_name + \" TreatmentPlans\" : \"TreatmentPlans\"}\n                    extra={<Button.Group>\n                        <Button onClick={this.submitCompleteTreatment}>\n                            <Icon type=\"save\"/>Save\n                        </Button>\n                        <Button type={\"primary\"} onClick={() => this.props.togglePatientListModal(true)}>\n                            <Icon type=\"plus\"/>Add\n                        </Button>\n                    </Button.Group>\n                    }/>\n                <Spin spinning={this.state.loading}>\n                    {this.state.treatmentPlans.map((treatment) => <Card bodyStyle={{padding: 0}}\n                                                                        key={treatment.id}\n                                                                        style={{marginTop: 15}}>\n                            <div style={{padding: 16}}>\n                                <h4>{treatment.date ? moment(treatment.date).format('ll') : null} \n                                <Link to={\"/patient/\" + treatment.patient.id + \"/emr/plans\"}>\n                                    &nbsp;&nbsp; {treatment.patient.user?treatment.patient.user.first_name:null} (ID: {treatment.patient.custom_id?treatment.patient.custom_id:treatment.patient.id})&nbsp;\n                                </Link>\n                                <span>, {treatment.patient.gender}</span>\n                                    \n                                    <Dropdown.Button\n                                        size={\"small\"}\n                                        style={{float: 'right'}}\n                                        overlay={<Menu>\n                                            <Menu.Item key=\"1\" disabled={(treatment.practice && treatment.practice.id != this.props.active_practiceId)}>\n                                                <Link to={\"/patient/\" + treatment.patient.id + \"/emr/plans/edit\"}>\n                                                    <Icon type=\"edit\"/>\n                                                    &nbsp;\n                                                    Edit\n                                                </Link> \n                                            </Menu.Item>\n                                            <Menu.Item key=\"2\" onClick={() => that.deleteTreatmentPlans(treatment)}\n                                                       disabled={(treatment.practice && treatment.practice.id != this.props.active_practiceId)}>\n                                                <Icon type=\"delete\"/>\n                                                Delete\n                                            </Menu.Item>\n                                            <Menu.Divider/>\n                                            <Menu.Item key=\"3\">\n                                                <Link to={\"/patient/\" + treatment.patient + \"/emr/timeline\"}>\n                                                    <Icon type=\"clock-circle\"/>\n                                                    &nbsp;\n                                                    Patient Timeline\n                                                </Link>\n                                            </Menu.Item>\n                                        </Menu>}>\n                                        <a onClick={() => this.loadPDF(treatment.id)}><Icon type=\"printer\"/></a>\n                                    </Dropdown.Button>\n                                </h4>\n\n                            </div>\n                            <Table loading={this.state.loading} columns={columns}\n                                   dataSource={treatment.treatment_plans}\n                                   footer={() => treatmentFooter(treatment)}\n                                   pagination={false}\n                                   key={treatment.id}/>\n\n                        </Card>\n                    )}\n                </Spin>\n                <InfiniteFeedLoaderButton loaderFunction={() => this.loadTreatmentPlans(that.state.next)}\n                                          loading={this.state.loading}\n                                          hidden={!this.state.next}/>\n            </div>\n        }\n\n    }\n}\n\nexport default PatientTreatmentPlans;\n\n\nfunction treatmentFooter(presc) {\n    if (presc) {\n\n        return <div>\n            {presc.doctor ? <Tag color={presc.doctor ? presc.doctor.calendar_colour : null}>\n                <b>{\"prescribed by  \" + presc.doctor.user.first_name} </b>\n            </Tag> : null}\n            {presc.practice ? <Tag style={{float: 'right'}}>\n                <Tooltip title=\"Practice Name\">\n                    <b>{presc.practice.name} </b>\n                </Tooltip>\n            </Tag> : null}\n        </div>\n    }\n    return null\n}\n","import React from \"react\";\nimport {Card, Row, Form, Col, List, Button, Table, InputNumber, Input, Icon} from 'antd';\nimport {displayMessage, getAPI, interpolate, postAPI} from \"../../../utils/common\";\nimport {LABTEST_API} from \"../../../constants/api\";\nimport {WARNING_MSG_TYPE} from \"../../../constants/dataKeys\";\nimport {remove} from 'lodash';\n\nclass AddPatientLabOrders extends React.Component{\n    constructor(props){\n        super(props);\n        this.state={\n        \tlab_test:[],\n        \ttableFormValues: [],\n        \taddedLabs : {}\n        }\n        console.log(\"urgent\",this.props.active_practiceId);\n    }\n\n    componentDidMount() {\n        this.loadLabs();\n    }\n\n    loadLabs(){\n    \tvar that =this;\n    \tlet successFn = function(data){\n    \t\tthat.setState({\n    \t\t\tlab_test: data,\n    \t\t})\n    \t};\n    \tlet errorFn = function(){\n\n    \t};\n    \tgetAPI(interpolate(LABTEST_API, [that.props.active_practiceId]), successFn, errorFn);\n    }\n\n    calculateItem = (_id) => {\n        const {getFieldsValue} = this.props.form;\n        console.log(getFieldsValue());\n        this.setState(function (prevState) {\n            let newtableFormValues = [...prevState.tableFormValues];\n            newtableFormValues.forEach(function (item) {\n\n            });\n        });\n    }\n\n    removeTests = (_id,item) => {\n        this.setState(function (prevState) {\n            return {\n            \taddedLabs:{...prevState.addedLabs,[item.id]:false},\n                tableFormValues: [...remove(prevState.tableFormValues, function (item) {\n                    return item._id != _id;\n                })]\n            }\n        });\n    }\n    add = (item) => {\n    \tconsole.log(\"item\",item);\n        this.setState(function (prevState) {\n        \tconsole.log(\"preview\",prevState);\n            let randId = Math.random().toFixed(7);\n            if(prevState.addedLabs[item.id]){\n            \tdisplayMessage(WARNING_MSG_TYPE,\"Item Already Added\");\n            \treturn false;\n            }\n            return {\n            \taddedLabs:{...prevState.addedLabs,[item.id]:true},\n                tableFormValues: [...prevState.tableFormValues, {\n                    ...item,\n                    _id: randId,\n                }]\n            }\n        });\n    };\n\n     handleSubmit = (e) => {\n        let that = this;\n        e.preventDefault();\n        this.props.form.validateFields((err, values) => {\n            if (!err) {\n                let reqData = {\n                    treatment: [],\n                    patient: that.props.match.params.id\n                };\n                that.state.tableFormValues.forEach(function (item) {\n                    item.cost = values.cost[item._id];\n                    let sendingItem = {\n                        \"name\": item.id,\n                        \"cost\": item.cost,\n                        \"instruction\":item.instruction,\n                        \"is_active\":true,\n                        \"practice\":item.practice,\n                        \"margin\":item.margin,\n\n                    };\n                    reqData.treatment.push(sendingItem);\n                });\n                let successFn = function (data) {\n                    displayMessage(\"Inventory updated successfully\");\n\n                }\n                let errorFn = function () {\n\n                }\n                console.log(\"DataSet\",reqData);\n                // postAPI(interpolate(\"API name\" [that.props.match.params.id]), reqData, successFn, errorFn);\n            }\n        });\n    }\n\n\n    render(){\n    \tlet that = this;\n        const {getFieldDecorator, getFieldValue, getFieldsValue} = this.props.form;\n        const formItemLayout = {\n            labelCol: {\n                xs: {span: 24},\n                sm: {span: 4},\n            },\n            wrapperCol: {\n                xs: {span: 24},\n                sm: {span: 20},\n            },\n        };\n        const formItemLayoutWithOutLabel = {\n            labelCol: {\n                xs: {span: 24},\n                sm: {span: 24},\n            },\n            wrapperCol: {\n                xs: {span: 24},\n                sm: {span: 24},\n            },\n        };\n        const coloums = [{\n            title: 'Name',\n            dataIndex: 'name',\n            key: 'name',\n            render: (name, record) => <span>\n                <b>{name}</b>\n                </span>\n        }, {\n            title: 'Cost',\n            dataIndex: 'cost',\n            key: 'cost',\n            render: (name, record) => <span><Form.Item\n                key={`cost[${record._id}]`}\n                {...formItemLayout}>\n                {getFieldDecorator(`cost[${record._id}]`, {\n                    validateTrigger: ['onChange', 'onBlur'],\n                    rules: [{\n                        required: true,\n                        message: \"This field is required.\",\n                    }],\n                    initialValue: record.cost\n                })}\n            </Form.Item>\n            </span>\n        },  {\n            title: 'Total',\n            dataIndex: 'total',\n            key: 'total',\n            render: (total, record) => <span>\n                {total}\n                <a onClick={() => this.removeTests(record._id,record)}>\n                    <Icon type=\"close-circle\" theme=\"twoTone\" twoToneColor={\"#f00\"}/>\n                </a>\n            </span>\n        }];\n        return <div>\n            <Form onSubmit={this.handleSubmit}>\n                <Card title={\"Patient Lab Orders\"} bodyStyle={{padding: 0}}\n                      extra={<Form.Item {...formItemLayoutWithOutLabel} style={{marginBottom: 0}}>\n                          <Button type=\"primary\" htmlType=\"submit\">Save Lab Orders</Button>\n                      </Form.Item>}>\n                    <Row gutter={16}>\n                        <Col span={7}>\n                            <List size={\"small\"}\n                                  itemLayout=\"horizontal\"\n                                  dataSource={this.state.lab_test}\n                                  renderItem={item => (\n                                      <List.Item>\n                                          <List.Item.Meta\n                                              title={item.name}/>\n                                          <Button type=\"primary\" size=\"small\" shape=\"circle\"\n                                                  onClick={() => this.add(item)}\n                                                  icon={\"arrow-right\"}/>\n                                      </List.Item>)}/>\n                        </Col>\n                        <Col span={17}>\n\n                            <Table pagination={false}\n                                   bordered={true}\n                                   dataSource={this.state.tableFormValues}\n                                   columns={coloums}/>\n\n\n                        </Col>\n                    </Row>\n                </Card>\n            </Form>\n        </div>\n    }\n}\nexport default Form.create()(AddPatientLabOrders);\n","import React from \"react\";\nimport {Card, Button, Icon, Table, Divider, Checkbox} from \"antd\";\nimport {Link} from \"react-router-dom\";\nimport moment from \"moment\";\nimport {Route, Switch} from \"react-router\";\nimport  AddPatientLabOrders from \"./AddPatientLabOrders\";\n\nclass PatientLabOrders extends React.Component{\n\tconstructor(props){\n        super(props);\n        this.state={\n            currentPatient: this.props.currentPatient,\n            active_practiceId: this.props.active_practiceId,\n        \tloading:false,\n        }\n    }\n\n    render(){\n    \tconst columns = [{\n            title: 'Time',\n            dataIndex: 'created_at',\n            key: 'name',\n            render: created_at => <span>{moment(created_at).format('LLL')}</span>,\n        }, {\n            title: 'Drug',\n            key: 'drug',\n\n        }, {\n            title: 'Quantity',\n            dataIndex: 'qunatity',\n            key: 'quantity',\n        }, {\n            title: 'Cost Per  Unit',\n            dataIndex: 'cost',\n            key: 'cost',\n        }, {\n            title: 'Completed',\n            key: 'is_completed',\n            render: (text, record) => (\n                <Checkbox checked={record.is_completed}/>\n            )\n        }, {\n            title: 'Action',\n            key: 'action',\n            render: (text, record) => (\n                <span>\n                <a onClick={() => this.editPrescriptionData(record)}>Edit</a>\n                <Divider type=\"vertical\"/>\n                <a href=\"javascript:;\">Delete</a>\n              </span>\n            ),\n        }];\n\n    \treturn <div><Switch>\n              <Route exact path='/patient/:id/emr/labtrackings/add'\n                     render={(route) => <AddPatientLabOrders{...this.state} {...route} />}/>\n              <Card title={ this.state.currentPatient?this.state.currentPatient.user.first_name + \" Lab Order\":\"Patients Lab Order\"}  extra={<Button.Group>\n                    <Link to={\"/patient/\"+this.props.match.params.id+\"/emr/labtrackings/add\"}><Button><Icon type=\"plus\"/>Add</Button></Link>\n              </Button.Group>}>\n\n                  <Table loading={this.state.loading} columns={columns}  dataSource={this.state.payments} />\n\n              </Card>\n            </Switch>\n\n        </div>\n    }\n\n}\n\nexport default PatientLabOrders;\n","import React from \"react\";\nimport {\n    Affix,\n    Button,\n    Card,\n    Col,\n    DatePicker, Divider,\n    Dropdown,\n    Form, Icon,\n    Input,\n    InputNumber,\n    List,\n    Menu,\n    Row,\n    Select,\n    Spin,\n    Table,\n    Tabs,\n    Tag, Typography\n} from \"antd\";\nimport {displayMessage, getAPI, interpolate, postAPI, putAPI} from \"../../../utils/common\";\nimport {CURRENCY_TYPE, DRUG, INVENTORY, PRESCRIPTIONS, PROCEDURES} from \"../../../constants/hardData\";\nimport {\n    CHECK_PROMO_CODE,\n    CREATE_OR_EDIT_INVOICES,\n    INVENTORY_ITEM_API, OFFERS,\n    PROCEDURE_CATEGORY,\n    SEARCH_THROUGH_QR,\n    SINGLE_INVOICE_API,\n    TAXES,\n    UNPAID_PRESCRIPTIONS\n} from \"../../../constants/api\";\nimport moment from \"moment\";\nimport {loadDoctors} from \"../../../utils/clinicUtils\";\n\nconst {Search} = Input;\nconst TabPane = Tabs.TabPane;\nconst {Text} = Typography;\nlet tableFormFields = {\n    _id: null,\n    quantity: 0,\n    batch: null\n};\n\nclass Addinvoicedynamic extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            classType: props.type,\n            tableFormValues: [],\n            maxQuantityforConsume: {},\n            items: {},\n            practiceDoctors: [],\n            selectedPrescriptions: [],\n            selectedDate: moment(),\n            stocks: {},\n            itemBatches: {},\n            saveLoading: false,\n            qrValue: '',\n            searchItem: '',\n            selectedDoctor: {},\n            tempValues: {},\n            offers: [],\n            loading: false,\n            taxes_list: [],\n            promoCode: '',\n            appliedPromoCodeDiscount: null,\n            promoCodeCheckLoading: false\n        }\n\n    }\n\n    componentDidMount() {\n        let that = this;\n        loadDoctors(this);\n        this.loadInventoryItemList();\n        this.loadProcedures();\n        this.loadPrescriptions();\n        this.loadTaxes();\n        this.loadLoyaltyDiscount();\n        if (this.props.editId) {\n            setTimeout(function () {\n                that.setState({\n                    loading: false,\n                })\n                that.loadEditInvoiceData();\n            }.bind(this), 2000);\n\n\n        }\n    }\n\n    selectedDefaultDate = (date) => {\n        this.setState({\n            selectedDate: date\n        })\n    }\n    loadEditInvoiceData = () => {\n        let that = this;\n        let invoice = this.props.editInvoice;\n\n        this.setState(function (prevState) {\n            let tableValues = [];\n            invoice.procedure.forEach(function (proc) {\n                let id = Math.random().toFixed(7);\n                tableValues.push({\n                    ...proc.procedure_data,\n                    ...proc,\n                    selectedDoctor: proc.doctor_data,\n                    selectedDate: moment(proc.date).isValid() ? moment(proc.date) : null,\n                    _id: id,\n                    item_type: PROCEDURES\n                });\n                that.changeNetPrice(id, proc.discount)\n            });\n            let stocks = {...prevState.stocks};\n            invoice.inventory.forEach(function (proc) {\n                let id = Math.random().toFixed(7);\n                if (prevState.itemBatches[proc.inventory]) {\n                    if (stocks[proc.inventory]) {\n                        let stock_quantity = stocks[proc.inventory];\n                        if (stock_quantity[proc.batch_number])\n                            stock_quantity[proc.batch_number] += proc.unit;\n                        else\n                            stock_quantity[proc.batch_number] += proc.unit;\n                    } else {\n                        let stock_quantity = {};\n                        stock_quantity[proc.batch_number] = proc.unit;\n                        stocks[proc.inventory] = stock_quantity;\n                    }\n                    prevState.itemBatches[proc.inventory].forEach(function (batchObj) {\n                        if (batchObj.batch_number == proc.batch_number)\n                            proc.selectedBatch = batchObj;\n                    });\n                }\n                tableValues.push({\n                    ...proc.inventory_item_data,\n                    ...proc,\n                    selectedDoctor: proc.doctor_data,\n                    _id: id,\n                    item_type: INVENTORY,\n                    selectOption: !!proc.offers\n                });\n                that.changeNetPrice(id, proc.discount)\n            });\n\n            return {\n                tableFormValues: tableValues,\n                selectedDate: moment(invoice.date).isValid() ? moment(invoice.date) : null,\n                stocks: stocks,\n                notes:invoice.notes\n            }\n        })\n\n    };\n\n    loadInventoryItemList(page = 1) {\n        let that = this;\n        let searchString = this.state.searchItem;\n        that.setState({\n            loadingInventory: true\n        })\n        let successFn = function (reqData) {\n            let data = reqData.results;\n            let drugItems = [];\n            if (that.state.searchItem == searchString)\n                that.setState(function (prevState) {\n                        let stocks = {...prevState.stocks};\n                        let itemBatches = {};\n                        data.forEach(function (item) {\n                            if (item.item_type == DRUG) {\n                                drugItems.push(item);\n                                if (stocks[item.id]) {\n                                    let stock_quantity = stocks[item.id]\n                                    if (item.item_type_stock && item.item_type_stock.item_stock)\n                                        item.item_type_stock.item_stock.forEach(function (stock) {\n                                            if (stock_quantity[stock.batch_number])\n                                                stock_quantity[stock.batch_number] += stock.quantity;\n                                            else\n                                                stock_quantity[stock.batch_number] += stock.quantity;\n                                        });\n                                } else {\n                                    let stock_quantity = {}\n                                    if (item.item_type_stock && item.item_type_stock.item_stock)\n                                        item.item_type_stock.item_stock.forEach(function (stock) {\n                                            stock_quantity[stock.batch_number] = stock.quantity\n                                        });\n                                    stocks[item.id] = stock_quantity;\n                                }\n                                itemBatches[item.id] = item.item_type_stock.item_stock;\n                            }\n\n                        });\n                        let items = prevState.items;\n                        items[INVENTORY] = {...reqData, results: drugItems};\n                        return {\n                            items: items,\n                            stocks: {...prevState.stocks, ...stocks},\n                            itemBatches: {...prevState.itemBatches, ...itemBatches},\n                            loadingInventory: false,\n                        }\n                    }, function () {\n                        if (that.props.editId) {\n                            that.loadEditInvoiceData();\n                        }\n                    }\n                )\n\n        }\n        let errorFn = function () {\n            that.setState({\n                loadingInventory: false\n            })\n        }\n        let paramsApi = {\n            practice: this.props.active_practiceId,\n            maintain_inventory: true,\n            page\n        }\n        if (this.state.searchItem) {\n            paramsApi.item_name = searchString;\n        }\n\n        getAPI(INVENTORY_ITEM_API, successFn, errorFn, paramsApi);\n    }\n\n    loadProcedures(page = 1) {\n        var that = this;\n        let searchString = this.state.searchItem;\n        let successFn = function (data) {\n            let items = that.state.items;\n            items[PROCEDURES] = data;\n            if (that.state.searchItem == searchString)\n                that.setState({\n                    items: items,\n                })\n        };\n        let errorFn = function () {\n        };\n        let paramsApi = {\n            practice: this.props.active_practiceId,\n            page\n        }\n        if (this.state.searchItem) {\n            paramsApi.name = searchString;\n        }\n        getAPI(interpolate(PROCEDURE_CATEGORY, [this.props.active_practiceId]), successFn, errorFn, paramsApi);\n    }\n\n    loadPrescriptions() {\n        let that = this;\n        let searchString = this.state.searchItem;\n        let successFn = function (data) {\n            if (that.state.searchItem == searchString)\n                that.setState(function (prevState) {\n                    return {\n                        items: {...prevState.items, [PRESCRIPTIONS]: data}\n                    }\n                })\n        };\n        let errorFn = function () {\n        };\n        let paramsApi = {\n            practice: this.props.active_practiceId,\n        }\n        if (this.state.searchItem) {\n            paramsApi.item_name = searchString;\n        }\n        getAPI(interpolate(UNPAID_PRESCRIPTIONS, [that.props.match.params.id]), successFn, errorFn, paramsApi);\n    }\n\n    loadTaxes() {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                taxes_list: data,\n            })\n        };\n        let errorFn = function () {\n        };\n        getAPI(interpolate(TAXES, [this.props.active_practiceId]), successFn, errorFn);\n\n    }\n\n    remove = (k) => {\n        this.setState(function (prevState) {\n            let newTableFormValues = [];\n            prevState.tableFormValues.forEach(function (formValue) {\n                if (formValue._id != k)\n                    newTableFormValues.push(formValue);\n            });\n            return {\n                tableFormValues: newTableFormValues\n            }\n        });\n    }\n\n\n    add = (item, randId = Math.random().toFixed(7)) => {\n        this.setState(function (prevState) {\n            if (item.item_type == PROCEDURES) {\n                item = {\n                    ...item,\n                    id: undefined,\n                    unit_cost: item.cost,\n                    procedure: item.id,\n                    selectedDoctor: prevState.selectedDoctor ? prevState.selectedDoctor : null,\n                    selectedDate: moment(),\n                    taxes: item.taxes.map(tax => tax.id)\n                }\n            } else if (item.item_type == INVENTORY) {\n                item = {\n                    ...item,\n                    id: undefined,\n                    inventory: item.id,\n                    unit_cost: item.retail_without_tax,\n                    selectedDoctor: prevState.selectedDoctor ? prevState.selectedDoctor : null,\n                }\n            }\n            return {\n                tableFormValues: [{\n                    ...tableFormFields,\n                    ...item,\n                    id: undefined,\n                    _id: randId,\n                }, ...prevState.tableFormValues]\n            }\n        });\n    };\n    selectDoctor = (doctor, id, type) => {\n        this.setState(function (prevState) {\n            let finalTableFormValues = [];\n            prevState.tableFormValues.forEach(function (formValue) {\n                if (formValue._id == id && formValue.item_type == type) {\n                    finalTableFormValues.push({...formValue, selectedDoctor: doctor});\n\n                } else {\n                    finalTableFormValues.push(formValue);\n\n                }\n            });\n            return {\n                tableFormValues: finalTableFormValues,\n            }\n        })\n    }\n\n    selectedDate = (dateValue, id, type) => {\n        this.setState(function (prevState) {\n            let finalTableFormValues = [];\n            prevState.tableFormValues.forEach(function (formValue) {\n                if (formValue._id == id && formValue.item_type == type) {\n                    finalTableFormValues.push({...formValue, selectedDate: dateValue})\n                } else {\n                    finalTableFormValues.push(formValue)\n                }\n            });\n            return {\n                tableFormValues: finalTableFormValues\n            }\n        })\n    }\n\n    selectBatch = (batch, id, type) => {\n        this.setState(function (prevState) {\n            let finalTableFormValues = [];\n            prevState.tableFormValues.forEach(function (formValue) {\n                if (formValue._id == id && formValue.item_type == type) {\n                    finalTableFormValues.push({...formValue, selectedBatch: batch})\n                } else {\n                    finalTableFormValues.push(formValue)\n                }\n            });\n            return {\n                tableFormValues: finalTableFormValues\n            }\n        })\n    }\n    addPrescription = (item) => {\n        let that = this;\n        item.drugs.forEach(function (drug_item) {\n            if (drug_item.inventory.maintain_inventory)\n                that.add({...drug_item.inventory, item_type: INVENTORY, inventory: item.inventory.id, id: undefined})\n        });\n        that.setState(function (prevState) {\n            return {selectedPrescriptions: [...prevState.selectedPrescriptions, item.id]}\n        })\n    }\n    handleSubmit = (goBack) => {\n        let that = this;\n        this.props.form.validateFields((err, values) => {\n            if (!err) {\n                that.setState({\n                    // saveLoading: true\n                });\n                let reqData = {\n                    promo_code: that.state.promoCode,\n                    practice: that.props.active_practiceId,\n                    patient: that.props.match.params.id,\n                    unit: null,\n                    cost: null,\n                    discount: null,\n                    taxes: 0,\n                    total: null,\n                    procedure: [],\n                    inventory: [],\n                    prescription: that.state.selectedPrescriptions,\n                    notes: values.notes,\n                    date: that.state.selectedDate && moment(that.state.selectedDate).isValid() ? that.state.selectedDate.format('YYYY-MM-DD') : null,\n                };\n                that.state.tableFormValues.forEach(function (item) {\n                    item.unit = values.unit[item._id];\n                    item.taxes = values.taxes[item._id];\n                    // item.unit_cost = values.unit_cost[item._id];\n                    // item.discount = values.discount[item._id];\n                    // item.discount_type = values.discount_type[item._id];\n                    // item.offers = values.offers;\n                    switch (item.item_type) {\n                        case PROCEDURES:\n                            reqData.procedure.push({\n                                \"name\": item.name,\n                                \"unit\": item.unit,\n                                \"procedure\": item.procedure,\n                                \"default_notes\": null,\n                                \"is_active\": true,\n                                \"margin\": item.margin,\n                                \"taxes\": item.taxes,\n                                \"unit_cost\": item.unit_cost,\n                                // \"unit_cost\": item.total_unit_cost?item.total_unit_cost:item.unit_cost,\n                                \"discount\": item.discount,\n                                \"discount_type\": item.discount_type,\n                                \"offers\": item.offers,\n                                \"doctor\": item.selectedDoctor ? item.selectedDoctor.id : null,\n                                id: that.props.editId ? item.id : undefined\n                            });\n                            break;\n                        case INVENTORY:\n                            reqData.inventory.push({\n                                \"inventory\": item.inventory,\n                                \"name\": item.name,\n                                \"unit\": item.unit,\n                                \"taxes\": item.taxes,\n                                \"unit_cost\": item.unit_cost,\n                                // \"unit_cost\": item.total_unit_cost?item.total_unit_cost:item.unit_cost,\n                                \"discount\": item.discount,\n                                \"discount_type\": item.discount_type,\n                                \"offers\": item.offers,\n                                \"doctor\": item.selectedDoctor ? item.selectedDoctor.id : null,\n                                \"instruction\": item.instruction,\n                                \"is_active\": true,\n                                batch_number: item.selectedBatch ? item.selectedBatch.batch_number : null,\n                                id: that.props.editId ? item.id : undefined\n                            });\n                            break;\n                        default:\n                            return null;\n                    }\n                });\n                let successFn = function (data) {\n                    that.setState({\n                        saveLoading: false\n                    });\n                    displayMessage(\"Inventory updated successfully\");\n                    that.props.loadData();\n                    if (goBack) {\n                        that.props.history.goBack()\n                    } else {\n                        let url = '/patient/' + that.props.match.params.id + '/billing/payments/add?invoices=' + data.id;\n                        that.props.history.push(url);\n                    }\n                };\n                let errorFn = function () {\n                    that.setState({\n                        saveLoading: false\n                    });\n                };\n                if (that.props.editId) {\n                    putAPI(interpolate(SINGLE_INVOICE_API, [that.props.editId]), reqData, successFn, errorFn);\n                } else {\n                    postAPI(CREATE_OR_EDIT_INVOICES, reqData, successFn, errorFn);\n                }\n\n            }\n        });\n    }\n    addItemThroughQR = (value) => {\n        let that = this;\n        that.setState({\n            loadingQr: true,\n        })\n        let qrSplitted = value.split('*');\n        let successFn = function (data) {\n\n            let item = data;\n            let {setFieldsValue, getFieldsValue, getFieldValue} = that.props.form;\n            let randomId = Math.random().toFixed(7);\n            let flag = true\n            that.state.tableFormValues.forEach(function (row) {\n                if (row.name == qrSplitted[0]) {\n                    let _id = row._id;\n                    let batch = row.selectedBatch.batch_number;\n                    let quantity = getFieldValue(`unit[${_id}]`);\n                    if (batch == qrSplitted[1]) {\n                        flag = false;\n                        setFieldsValue({\n                            [`unit[${_id}]`]: quantity + 1\n                        })\n                    }\n                }\n            });\n            if (flag) {\n                let unit_cost = null;\n                if (data.item_type_stock && data.item_type_stock.item_stock)\n                    data.item_type_stock.item_stock.forEach(function (stock) {\n                        if (stock.batch_number == qrSplitted[1]) {\n                            data.selectedBatch = stock;\n                            unit_cost = stock.unit_cost\n                        }\n                    })\n                that.add({...data, item_type: INVENTORY}, randomId);\n\n                setFieldsValue({\n                    [`unit_cost[${randomId}]`]: unit_cost,\n                })\n            }\n            that.setState(function (prevState) {\n                // if (prevState.items && prevState.items[INVENTORY]) {\n                //     prevState.items[INVENTORY].forEach(function (inventItem) {\n                //         console.log(item.inventory_item)\n                //         if (inventItem.id == item.inventory_item) {\n                //             console.log(inventItem);\n                //             that.add({...inventItem, item_type: INVENTORY});\n                //\n                //         }\n                //     })\n                // }\n                return {\n                    loadingQr: false,\n                    qrValue: ''\n                }\n            });\n        }\n        let errorFn = function () {\n\n        }\n        getAPI(SEARCH_THROUGH_QR, successFn, errorFn, {qr: value, form: 'Invoice'})\n    }\n    setQrValue = (e) => {\n        let value = e.target.value;\n        this.setState({\n            qrValue: value\n        })\n    }\n    searchValues = (e, type) => {\n        let that = this;\n        let value = e.target.value;\n        this.setState({\n            searchItem: value,\n        }, function () {\n            if (type == INVENTORY)\n                that.loadInventoryItemList();\n            else if (type == PRESCRIPTIONS)\n                that.loadPrescriptions();\n            else if (type == PROCEDURES)\n                that.loadProcedures();\n        })\n\n    }\n    changeNetPrice = (id, value) => {\n        let that = this;\n        const {getFieldsValue, setFields} = this.props.form;\n        setTimeout(function () {\n            let values = getFieldsValue();\n            if (values.unit_cost[id] || values.unit[id] || values.discount[id] || values.discount_type[id]) {\n                that.setState(function (prevState) {\n                    let newTableValues = []\n                    prevState.tableFormValues.forEach(function (tableObj) {\n                        if (tableObj._id == id) {\n                            let totalTaxAmount = 0;\n                            let initialDiscount = 0;\n                            let initialDiscountType = '%';\n                            let offer = null;\n                            let selectOption = tableObj.selectOption || tableObj.selectOption == false ? tableObj.selectOption : false;\n                            values.taxes[id].forEach(function (taxid) {\n                                prevState.taxes_list.forEach(function (taxObj) {\n                                    if (taxObj.id == taxid)\n                                        totalTaxAmount += taxObj.tax_value;\n                                })\n                            });\n                            if (value && value == '0') {\n                                selectOption = false\n                            }\n                            if (values.discount_type && values.discount_type[id]) {\n                                initialDiscount = values.discount[id];\n                                initialDiscountType = values.discount_type[id];\n                                offer = null;\n                            } else {\n                                initialDiscount = values.discount[id] ? values.discount[id].toString().split('#')[0] : '';\n                                initialDiscountType = values.discount[id] ? values.discount[id].toString().split('#')[1] : '';\n                                offer = values.discount[id] ? values.discount[id].toString().split('#')[2] : null;\n                            }\n\n                            let total = values.unit[id] * (values.unit_cost[id] ? values.unit_cost[id] : 0);\n\n                            if (initialDiscountType == '%' && initialDiscount) {\n                                if (initialDiscount > 100) {\n                                    initialDiscount = 100\n                                }\n                                total *= (1 - (initialDiscount * 0.01));\n                            } else if (initialDiscountType == 'INR' && initialDiscount) {\n                                if (total > initialDiscount) {\n                                    total -= initialDiscount;\n                                } else {\n                                    total = 0;\n                                }\n                            }\n\n                            total *= (1 + totalTaxAmount * 0.01);\n                            let totalWithoutTaxWithDiscount = total / values.unit[id];\n\n                            newTableValues.push({\n                                ...tableObj,\n                                total_unit_cost: totalWithoutTaxWithDiscount,\n                                total: total,\n                                selectOption: selectOption,\n                                discount: initialDiscount,\n                                discount_type: initialDiscountType,\n                                offers: offer\n                            })\n                        } else {\n                            newTableValues.push(tableObj);\n                        }\n                    })\n                    return {tableFormValues: newTableValues}\n                })\n            } else {\n                that.setState({\n                    retail_price: 0\n                })\n            }\n            that.checkPromoCode();\n        }, 1000);\n\n    };\n    applyPromoCodeDiscounts = (discountValue) => {\n        let that = this;\n        const {setFieldsValue, getFieldsValue} = that.props.form;\n        let newTableValues = [];\n        let values = getFieldsValue();\n        let initialDiscount = discountValue;\n        let valueToSet = {};\n        that.state.tableFormValues.forEach(function (tableObj) {\n            let totalTaxAmount = 0;\n            let initialDiscountType = 'INR';\n            let discountApplied = 0;\n            let offer = null;\n            let selectOption = tableObj.selectOption || tableObj.selectOption == false ? tableObj.selectOption : false;\n            values.taxes[tableObj._id].forEach(function (taxid) {\n                that.state.taxes_list.forEach(function (taxObj) {\n                    if (taxObj.id == taxid)\n                        totalTaxAmount += taxObj.tax_value;\n                })\n            });\n\n            let total = values.unit[tableObj._id] * (values.unit_cost[tableObj._id] ? values.unit_cost[tableObj._id] : 0);\n\n            if (initialDiscountType == 'INR' && initialDiscount) {\n                if (total > initialDiscount) {\n                    total -= initialDiscount;\n                    discountApplied = initialDiscount;\n                    initialDiscount = 0;\n\n                } else {\n                    initialDiscount -= total;\n                    discountApplied = total;\n                    total = 0;\n                }\n            }\n\n            total *= (1 + totalTaxAmount * 0.01);\n            let totalWithoutTaxWithDiscount = total / values.unit[tableObj._id];\n\n            newTableValues.push({\n                ...tableObj,\n                total_unit_cost: totalWithoutTaxWithDiscount,\n                total: total,\n                selectOption: selectOption,\n                discount: initialDiscount,\n                discount_type: initialDiscountType,\n                offers: offer\n            })\n            valueToSet[`discount[${tableObj._id}]`] = discountApplied.toFixed(2);\n            valueToSet[`discount_type[${tableObj._id}]`] = initialDiscountType;\n        });\n        that.setState({\n            tableFormValues: newTableValues\n        });\n        setFieldsValue(valueToSet);\n    }\n    loadLoyaltyDiscount = () => {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                offers: data,\n                // loading: false\n            })\n        };\n        let errorFn = function () {\n            that.setState({\n                // loading: true\n            })\n        };\n        getAPI(interpolate(OFFERS, [this.props.active_practiceId]), successFn, errorFn);\n    };\n    onChangeOption = (type, id) => {\n        let that = this;\n        that.setState(function (prevState) {\n            let tempArr = [];\n\n            prevState.tableFormValues.forEach(function (formValue) {\n\n                if (formValue._id == id) {\n                    tempArr.push({...formValue, selectOption: true})\n                } else {\n                    tempArr.push(formValue)\n                }\n            });\n            return {tableFormValues: tempArr}\n        });\n    };\n    onChangeOffer = (value, id) => {\n        let that = this;\n        that.setState(function (prevState) {\n            let selectedOffer = [];\n            prevState.tableFormValues.forEach(function (formValue) {\n                if (formValue._id == id) {\n\n                    if (value == 'none') {\n                        selectedOffer.push({...formValue, loyaltyDiscount: null})\n                    }\n                    if (value == '0') {\n                        selectedOffer.push({...formValue, selectOption: false})\n                    } else {\n                        prevState.offers.forEach(function (item) {\n\n                            if (item.id == value) {\n                                selectedOffer.push({...formValue, loyaltyDiscount: item.discount})\n                            }\n                        });\n                    }\n                } else {\n                    selectedOffer.push(formValue);\n                }\n            });\n            return {tableFormValues: selectedOffer}\n\n        });\n\n    };\n\n\n    onchangeDiscountSimple = (value, id) => {\n        console.log(value, id);\n        let that = this;\n        that.setState(function (prevState) {\n            let selectedOffer = [];\n            prevState.tableFormValues.forEach(function (formValue) {\n                if (formValue._id == id) {\n\n                    let retailPrice = formValue.unit_cost / (1 + value * 0.01);\n                    console.log(retailPrice);\n                    selectedOffer.push({...formValue, loyaltyDiscount: value})\n\n                } else {\n                    selectedOffer.push(formValue);\n                }\n            });\n            return {tableFormValues: selectedOffer}\n\n        });\n\n    }\n    enterPromoCode = (e) => {\n        this.setState({\n            promoCode: e.target.value\n        })\n    }\n    calculateGrandTotalWithoutDiscount = () => {\n        let grandTotal = 0;\n        let that = this;\n        const {getFieldsValue} = this.props.form;\n        let values = getFieldsValue();\n        this.state.tableFormValues.forEach(function (tableObj) {\n            let totalTaxAmount = 0;\n            values.taxes[tableObj._id].forEach(function (taxid) {\n                that.state.taxes_list.forEach(function (taxObj) {\n                    if (taxObj.id == taxid)\n                        totalTaxAmount += taxObj.tax_value;\n                })\n            });\n            let total = values.unit[tableObj._id] * (values.unit_cost[tableObj._id] ? values.unit_cost[tableObj._id] : 0);\n            total *= (1 + totalTaxAmount * 0.01);\n            grandTotal += total\n        });\n        return grandTotal;\n    };\n    checkPromoCode = (e) => {\n        let that = this;\n        that.setState({\n            promoCodeCheckLoading: true\n        })\n        let successFn = function (data) {\n            that.setState({\n                appliedPromoCodeDiscount: data.discount,\n                promoCodeCheckLoading: false\n            });\n            that.applyPromoCodeDiscounts(data.discount)\n        };\n        let errorFn = function () {\n\n            that.setState({\n                promoCodeCheckLoading: false, appliedPromoCodeDiscount: null, promoCode: ''\n            })\n        };\n        let params = {\n            promo_code: this.state.promoCode,\n            practice: this.props.active_practiceId,\n            patient: that.props.match.params.id,\n            amount: this.calculateGrandTotalWithoutDiscount()\n        };\n        if (params.promo_code)\n            getAPI(CHECK_PROMO_CODE, successFn, errorFn, params);\n        else\n            that.setState({\n                promoCodeCheckLoading: false\n            })\n    }\n    removePromoCode = () => {\n        this.setState({\n            appliedPromoCodeDiscount: 0,\n            promoCodeCheckLoading: false,\n            promoCode: ''\n        });\n        this.applyPromoCodeDiscounts(0)\n    }\n\n    render() {\n        let that = this;\n        const {getFieldDecorator} = this.props.form;\n        const formItemLayout = {\n            labelCol: {\n                xs: {span: 24},\n                sm: {span: 4},\n            },\n            wrapperCol: {\n                xs: {span: 24},\n                sm: {span: 24},\n                md: {span: 24},\n                lg: {span: 24},\n                xl: {span: 24},\n            },\n        };\n        const formItemLayoutWithOutLabel = {\n            labelCol: {\n                xs: {span: 24},\n                sm: {span: 24},\n            },\n            wrapperCol: {\n                xs: {span: 24},\n                sm: {span: 24},\n            },\n        };\n        getFieldDecorator('keys', {initialValue: []});\n        let consumeRow = [{\n            title: 'Item Name',\n            key: 'item_name',\n            dataIndex: 'name',\n            width: 180,\n            render: function (name, record) {\n                switch (record.item_type) {\n                    case PROCEDURES:\n                        return <Form.Item\n                            key={`name[${record._id}]`}\n                            {...formItemLayout}>\n                            {getFieldDecorator(`name[${record._id}]`, {\n                                validateTrigger: ['onChange', 'onBlur'],\n                                initialValue: name,\n                                rules: [{\n                                    required: true,\n                                    message: \"This field is required.\",\n                                }],\n                            })(\n                                <Input min={0} placeholder=\"Item name\" size={'small'}/>\n                            )}\n                            <span>by &nbsp;&nbsp;</span>\n                            <Dropdown placement=\"topCenter\" overlay={<Menu>\n                                {that.state.practiceDoctors.map(doctor =>\n                                    <Menu.Item key=\"0\">\n                                        <a onClick={() => that.selectDoctor(doctor, record._id, PROCEDURES)}>{doctor.user.first_name}</a>\n                                    </Menu.Item>)}\n                            </Menu>} trigger={['click']}>\n                                <a className=\"ant-dropdown-link\" href=\"#\">\n                                    <b>\n                                        {record.selectedDoctor.user ? record.selectedDoctor.user.first_name : 'No DOCTORS Found'}\n                                    </b>\n                                </a>\n                            </Dropdown>\n                            <span> &nbsp;&nbsp;on&nbsp;&nbsp;</span>\n                            <DatePicker value={record.selectedDate}\n                                        size={'small'}\n                                        onChange={(value) => that.selectedDate(value, record._id, PROCEDURES)}\n                                        format={\"DD-MM-YYYY\"}/>\n                        </Form.Item>;\n                    case PRESCRIPTIONS:\n                        return <b>{record.name}</b>;\n                    case INVENTORY:\n                        return <div>\n                            <span>{record.name}</span>\n\n                            <span><br/>by &nbsp;&nbsp;</span>\n                            <Dropdown placement=\"topCenter\" overlay={<Menu>\n                                {that.state.practiceDoctors.map(doctor =>\n                                    <Menu.Item key={doctor.id}>\n                                        <a onClick={() => that.selectDoctor(doctor, record._id, INVENTORY)}>{doctor.user.first_name}</a>\n                                    </Menu.Item>)}\n                            </Menu>} trigger={['click']}>\n                                <a className=\"ant-dropdown-link\" href=\"#\">\n                                    <b>\n                                        {record.selectedDoctor.user ? record.selectedDoctor.user.first_name : 'No DOCTORS Found'}\n                                    </b>\n                                </a>\n                            </Dropdown>\n                            <span><br/>from batch &nbsp;&nbsp;</span>\n                            <Dropdown placement=\"topCenter\" overlay={<Menu>\n                                {that.state.itemBatches[record.inventory] && that.state.itemBatches[record.inventory].map((batch, index) =>\n                                    (moment() >= moment(batch.expiry_date) ? <Menu.Item key={index} disabled={true}>\n                                        {batch.batch_number}&nbsp;({batch.quantity}) &nbsp;&nbsp;{batch.expiry_date}\n                                    </Menu.Item> : <Menu.Item key={index}>\n                                        <a onClick={() => that.selectBatch(batch, record._id, INVENTORY)}>{batch.batch_number}&nbsp;({batch.quantity}) &nbsp;&nbsp;{batch.expiry_date}</a>\n                                    </Menu.Item>))}\n                            </Menu>} trigger={['click']}>\n                                <a className=\"ant-dropdown-link\" href=\"#\">\n                                    <b>\n                                        {record.selectedBatch ? record.selectedBatch.batch_number : 'Select Batch'}\n                                    </b>\n                                </a>\n                            </Dropdown>\n                        </div>\n                    default:\n                        return null;\n                }\n            }\n        }];\n        consumeRow = consumeRow.concat([{\n            title: 'Unit',\n            key: 'unit',\n            width: 100,\n            dataIndex: 'unit',\n            render: (item, record) => (record.item_type == INVENTORY ?\n                    <Form.Item\n                        key={`unit[${record._id}]`}\n                        {...formItemLayout}>\n                        {getFieldDecorator(`unit[${record._id}]`, {\n                            validateTrigger: ['onChange', 'onBlur'],\n                            initialValue: record.unit || 1,\n                            rules: [{\n                                required: true,\n                                message: \"This field is required.\",\n                            }],\n                        })(\n                            <InputNumber min={1}\n                                         max={(record.selectedBatch && that.state.stocks[record.inventory] && that.state.stocks[record.inventory][record.selectedBatch.batch_number] ? that.state.stocks[record.inventory][record.selectedBatch.batch_number] : 0)}\n                                         placeholder=\"units\" size={'small'}\n                                         onChange={(value) => this.changeNetPrice(record._id, record.discount)}\n                                         disabled={!(record.selectedBatch && that.state.stocks[record.inventory] && that.state.stocks[record.inventory][record.selectedBatch.batch_number])}/>\n                        )}\n                    </Form.Item>\n                    : <Form.Item\n                        key={`unit[${record._id}]`}\n                        {...formItemLayout}>\n                        {getFieldDecorator(`unit[${record._id}]`, {\n                            initialValue: record.unit || 1,\n                            validateTrigger: ['onChange', 'onBlur'],\n                            rules: [{\n                                required: true,\n                                message: \"This field is required.\",\n                            }],\n                        })(\n                            <InputNumber min={1} max={100} placeholder=\"unit\" size={'small'}\n                                         onChange={(value) => this.changeNetPrice(record._id, record.discount)}/>\n                        )}\n                    </Form.Item>\n            )\n        }, {\n            title: 'Unit Cost',\n            key: 'unit_cost',\n            width: 100,\n            dataIndex: 'unit_cost',\n\n            render: (item, record) => <Form.Item\n                key={`unit_cost[${record._id}]`}\n                {...formItemLayout}>\n                {getFieldDecorator(`unit_cost[${record._id}]`, {\n                    validateTrigger: ['onChange', 'onBlur'],\n                    initialValue: record.item_type == INVENTORY ? record.retail_without_tax : record.cost,\n                    rules: [{\n                        required: true,\n                        message: \"This field is required.\",\n                    }],\n                })(\n                    <InputNumber min={1} placeholder=\"Unit Cost\" size={'small'}\n                                 onChange={() => that.changeNetPrice(record._id, record.discount)}/>\n                )}\n            </Form.Item>\n            // render: (item, record) => item ? item.toFixed(2) : null\n        }, {\n            title: 'Discount',\n            key: 'discount',\n            dataIndex: 'discount',\n            render: (item, record) => (record.selectOption ?\n                <Form.Item key={`discount[${record._id}]`}\n                           extra={\n                               <span>{record && record.discount ? record.discount + ' ' + record.discount_type + ' Discount' : null} </span>}>\n                    {getFieldDecorator(`discount[${record._id}]`, {\n                        initialValue: record.offers,\n                        validateTrigger: ['onChange', 'onBlur'],\n                    })\n                    (<Select style={{width: 150}} onChange={(value) => that.changeNetPrice(record._id, value)}\n                             size={\"small\"} disabled={this.state.appliedPromoCodeDiscount}>\n                        <Select.Option value={'0'}>Custom Offer</Select.Option>\n                        {that.state.offers.map(option => <Select.Option\n                            value={option.discount + '#' + option.unit + '#' + option.id}>{option.code}</Select.Option>)}\n                    </Select>)\n                    }\n                </Form.Item> : <Form.Item\n                    extra={<a onClick={() => that.onChangeOption('selectOption', record._id)}\n                              disabled={this.state.appliedPromoCodeDiscount}>Choose Offer</a>}\n                    key={`discount[${record._id}]`}\n                    {...formItemLayout}>\n                    {getFieldDecorator(`discount[${record._id}]`, {\n                        initialValue: record.discount ? record.discount : 0,\n                        validateTrigger: ['onChange', 'onBlur'],\n                    })(\n                        <Input placeholder=\"discount\"\n                               disabled={this.state.appliedPromoCodeDiscount}\n                               addonAfter={getFieldDecorator(`discount_type[${record._id}]`, {\n                                   initialValue: record.discount_type || '%',\n                               })(\n                                   <Select onChange={(value) => that.changeNetPrice(record._id, value)}\n                                           disabled={this.state.appliedPromoCodeDiscount}>\n                                       {CURRENCY_TYPE.map(option => <Select.Option\n                                           value={option.value}> {option.value}</Select.Option>)}\n                                   </Select>\n                               )}\n                               size={\"small\"}\n                               style={{width: 150}} onChange={(e) => this.changeNetPrice(record._id, e.target.value)}/>\n                    )}\n                </Form.Item>)\n        }, {\n            title: 'Taxes',\n            key: 'taxes',\n            dataIndex: 'taxes',\n            render: (item, record) => <Form.Item\n                key={`taxes[${record._id}]`}\n                {...formItemLayout}>\n                {getFieldDecorator(`taxes[${record._id}]`, {\n                    initialValue: record.taxes || [],\n                    validateTrigger: ['onChange', 'onBlur'],\n                })(\n                    <Select placeholder=\"Taxes\" size={'small'} mode={\"multiple\"}\n                            style={{width: 150}}\n                            onChange={() => that.changeNetPrice(record._id, record.discount)}>\n                        {this.state.taxes_list && this.state.taxes_list.map((tax) => <Select.Option\n                            value={tax.id}>{tax.name}@{tax.tax_value}%</Select.Option>)}\n                    </Select>\n                )}\n            </Form.Item>\n        }, {\n            title: 'Total Unit Cost',\n            key: 'total_unit_cost',\n            width: 80,\n            align: 'right',\n            dataIndex: 'total_unit_cost',\n            render: (item, record) =>\n                <span>{item ? item.toFixed(2) : '0.00'}</span>,\n        }, {\n            title: 'Total',\n            key: 'total',\n            width: 80,\n            align: 'right',\n            dataIndex: 'total',\n            render: (item, record) => item ? item.toFixed(2) : '0.00'\n\n        }]);\n\n        consumeRow = consumeRow.concat([{\n            key: '_id',\n            dataIndex: '_id',\n            render: (value, record) => <Button icon={\"close\"} onClick={() => that.remove(record._id)}\n                                               type={\"danger\"} shape=\"circle\"\n                                               size=\"small\"/>\n        }]);\n\n        return <div>\n            <Spin spinning={this.state.saveLoading} tip=\"Saving Invoice...\">\n                <Spin spinning={this.state.promoCodeCheckLoading} tip=\"Checking Promo Code and Discounts...\">\n                    <Card\n                        title={this.props.editId ? \"Edit Invoice (INV \" + this.props.editId + \")\" : \"Add Invoice\"}\n                        extra={<Search\n                            loading={this.state.loadingQr}\n                            value={this.state.qrValue}\n                            onChange={this.setQrValue}\n                            placeholder=\"Search QR Code\"\n                            onSearch={this.addItemThroughQR}\n                            style={{width: 200}}\n                        />}\n                        bodyStyle={{padding: 0}}>\n                        <Row>\n                            <Col span={6}>\n                                <Tabs size=\"small\" type=\"card\">\n                                    <TabPane tab={INVENTORY} key={INVENTORY}>\n                                        <div style={{backgroundColor: '#ddd', padding: 8}}>\n                                            <Input.Search placeholder={\"Search in \" + INVENTORY}\n                                                          onChange={(value) => this.searchValues(value, INVENTORY)}/>\n                                        </div>\n                                        <List size={\"small\"}\n                                              itemLayout=\"horizontal\"\n                                              loading={this.state.loadingInventory}\n                                              dataSource={this.state.items && this.state.items[INVENTORY] ? this.state.items[INVENTORY].results : []}\n                                              renderItem={item => (\n                                                  <List.Item>\n                                                      <List.Item.Meta\n                                                          title={item.name + ' (' + item.total_quantity + ')'}\n                                                      />\n                                                      <Button type=\"primary\" size=\"small\" shape=\"circle\"\n                                                              onClick={() => this.add({\n                                                                  ...item,\n                                                                  item_type: INVENTORY\n                                                              })}\n                                                              icon={\"arrow-right\"}/>\n                                                  </List.Item>)}/>\n                                        {this.state.items && this.state.items[INVENTORY] ?\n                                            <div style={{textAlign: 'center'}}>\n                                                <a style={{margin: 5}}\n                                                   disabled={!this.state.items[INVENTORY].previous}\n                                                   onClick={() => this.loadInventoryItemList(this.state.items[INVENTORY].previous)}>\n                                                    <Icon type=\"left\"/>Previous\n                                                </a>\n                                                <Divider type={\"vertical\"}/>\n                                                <a style={{margin: 5}} disabled={!this.state.items[INVENTORY].next}\n                                                   onClick={() => this.loadInventoryItemList(this.state.items[INVENTORY].next)}>\n                                                    Next<Icon type=\"right\"/>\n                                                </a>\n                                            </div> : null}\n                                    </TabPane>\n                                    <TabPane tab={PRESCRIPTIONS} key={PRESCRIPTIONS}>\n                                        <List size={\"small\"}\n                                              itemLayout=\"horizontal\"\n                                              dataSource={this.state.items ? this.state.items[PRESCRIPTIONS] : []}\n                                              renderItem={item => (\n                                                  <List.Item>\n                                                      <List.Item.Meta\n                                                          title={item.drugs.map(drug_item => <div>\n                                                              <span>{drug_item.name}</span> {drug_item.inventory.maintain_inventory ? null :\n                                                              <Tag color=\"red\" style={{\n                                                                  float: 'right',\n                                                                  lineHeight: '18px'\n                                                              }}>Not Sold</Tag>}<br/></div>)}\n                                                          description={item.doctor ?\n                                                              <Tag\n                                                                  color={item.doctor ? item.doctor.calendar_colour : null}>\n                                                                  <b>{\"prescribed by  \" + item.doctor.user.first_name} </b>\n                                                              </Tag> : null}\n                                                      />\n                                                      <Button type=\"primary\" size=\"small\" shape=\"circle\"\n                                                              onClick={() => this.addPrescription({...item})}\n                                                              icon={\"arrow-right\"}/>\n                                                  </List.Item>)}/>\n                                    </TabPane>\n                                    <TabPane tab={PROCEDURES} key={PROCEDURES}>\n                                        <div style={{backgroundColor: '#ddd', padding: 8}}>\n                                            <Input.Search placeholder={\"Search in \" + PROCEDURES}\n                                                          onChange={(value) => this.searchValues(value, PROCEDURES)}/>\n                                        </div>\n                                        <List size={\"small\"}\n                                              itemLayout=\"horizontal\"\n                                              dataSource={this.state.items && this.state.items[PROCEDURES] ? this.state.items[PROCEDURES].results : []}\n                                              renderItem={item => (\n                                                  <List.Item>\n                                                      <List.Item.Meta\n                                                          title={item.name}\n                                                      />\n                                                      <Button type=\"primary\" size=\"small\" shape=\"circle\"\n                                                              onClick={() => this.add({\n                                                                  ...item,\n                                                                  item_type: PROCEDURES\n                                                              })}\n                                                              icon={\"arrow-right\"}/>\n                                                  </List.Item>)}/>\n                                        {this.state.items && this.state.items[PROCEDURES] ?\n                                            <div style={{textAlign: 'center'}}>\n                                                <a style={{margin: 5}}\n                                                   disabled={!this.state.items[PROCEDURES].previous}\n                                                   onClick={() => this.loadProcedures(this.state.items[PROCEDURES].previous)}>\n                                                    <Icon type=\"left\"/>Previous\n                                                </a>\n                                                <Divider type={\"vertical\"}/>\n                                                <a style={{margin: 5}} disabled={!this.state.items[PROCEDURES].next}\n                                                   onClick={() => this.loadProcedures(this.state.items[PROCEDURES].next)}>\n                                                    Next<Icon type=\"right\"/>\n                                                </a>\n                                            </div> : null}\n                                    </TabPane>\n\n                                </Tabs>\n                            </Col>\n                            <Col span={18}>\n                                <Form>\n                                    <Table pagination={false} loading={that.state.loading}\n                                           bordered={true}\n                                           dataSource={this.state.tableFormValues}\n                                           columns={consumeRow}/>\n                                    <Affix offsetBottom={0}>\n                                        <Card>\n                                            <Col span={8}>\n                                                <Form.Item\n                                                    label={\"Notes\"}\n                                                    key={`notes`}\n                                                    {...formItemLayout}>\n                                                    {getFieldDecorator(`notes`, {\n                                                        initialValue: this.state.notes,\n                                                        validateTrigger: ['onChange', 'onBlur'],\n                                                    })(\n                                                        <Input.TextArea row={2} placeholder=\"unit\" size={'small'}/>\n                                                    )}\n                                                </Form.Item>\n                                                <h3>Grand\n                                                    Total: <b>{this.state.tableFormValues.reduce(function (total, item) {\n                                                        return (parseFloat(total) + (item && item.total ? item.total : 0)).toFixed(2);\n                                                    }, 0)}</b>\n                                                </h3>\n                                            </Col>\n                                            <span> &nbsp;&nbsp;on&nbsp;&nbsp;</span>\n                                            <DatePicker value={this.state.selectedDate}\n                                                        onChange={(value) => this.selectedDefaultDate(value)}\n                                                        format={\"DD-MM-YYYY\"}\n                                                        allowClear={false}/>\n\n                                            <Form.Item {...formItemLayoutWithOutLabel}\n                                                       style={{marginBottom: 0, float: 'right'}}>\n\n                                                <Button type=\"primary\" htmlType=\"submit\"\n                                                        onClick={() => this.handleSubmit(true)}\n                                                        style={{margin: 5}}>Save Invoice</Button>\n                                                <Button type=\"primary\" htmlType=\"submit\"\n                                                        onClick={() => this.handleSubmit(false)}\n                                                        style={{margin: 5}}>Save & Create Payment</Button>\n                                                {that.props.history ?\n                                                    <Button style={{margin: 5, float: 'right'}}\n                                                            onClick={() => that.props.history.goBack()}>\n                                                        Cancel\n                                                    </Button> : null}\n                                            </Form.Item>\n                                        </Card>\n                                    </Affix>\n                                </Form>\n                                <Row>\n                                    <Col span={12} style={{padding: 10}}>\n\n                                        <div>\n                                            {this.state.appliedPromoCodeDiscount ? <div>\n                                                <Tag>'{this.state.promoCode}' Applied <Icon\n                                                    onClick={() => this.removePromoCode()}\n                                                    theme=\"twoTone\" twoToneColor=\"#f00\"\n                                                    type={\"close-circle\"}/></Tag>\n                                                <Text type={\"success\"}><br/>Discount\n                                                    INR {this.state.appliedPromoCodeDiscount}</Text>\n                                            </div> : <div>\n                                                <Search\n                                                    enterButton=\"Apply\"\n                                                    value={this.state.promoCode}\n                                                    placeholder=\"Promo Code\"\n                                                    onChange={this.enterPromoCode}\n                                                    onSearch={this.checkPromoCode}\n                                                    style={{width: 200}}\n                                                />\n                                            </div>}\n                                        </div>\n                                    </Col>\n                                </Row>\n                            </Col>\n                        </Row>\n                    </Card>\n                </Spin>\n            </Spin>\n        </div>\n\n    }\n}\n\nexport default Form.create()(Addinvoicedynamic);\n","import React from \"react\";\nimport {\n    Affix,\n    Button,\n    Card,\n    Col,\n    DatePicker,\n    Dropdown,\n    Form,\n    Input,\n    InputNumber,\n    List,\n    Menu,\n    Row,\n    Select,\n    Spin,\n    Table,\n    Tabs,\n    Tag,\n    Checkbox, Divider\n} from \"antd\";\nimport {displayMessage, getAPI, interpolate, postAPI, putAPI} from \"../../../utils/common\";\nimport {DRUG, INVENTORY, PRESCRIPTIONS, PROCEDURES} from \"../../../constants/hardData\";\nimport {\n    INVENTORY_ITEM_API,\n    PROCEDURE_CATEGORY,\n    SEARCH_THROUGH_QR,\n    TAXES,\n    UNPAID_PRESCRIPTIONS,\n    INVOICE_RETURN_API\n} from \"../../../constants/api\";\nimport moment from \"moment\";\nimport {loadDoctors} from \"../../../utils/clinicUtils\";\n\nconst {Search} = Input;\nconst {MonthPicker} = DatePicker;\nconst TabPane = Tabs.TabPane;\n\nlet tableFormFields = {\n    _id: null,\n    quantity: 0,\n    batch: null\n};\n\nclass AddReturnInvoice extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            editInvoice: this.props.editInvoice,\n            classType: props.type,\n            tableFormValues: [],\n            maxQuantityforConsume: {},\n            items: {},\n            practiceDoctors: [],\n            selectedPrescriptions: [],\n            selectedDate: moment(),\n            stocks: {},\n            itemBatches: {},\n            saveLoading: false,\n            qrValue: '',\n            searchItem: '',\n            return_with_tax: false,\n            returnCashAvailable: 0\n        }\n\n    }\n\n    componentDidMount() {\n        loadDoctors(this);\n        this.loadInventoryItemList();\n        this.loadProcedures();\n        this.loadPrescriptions();\n        this.loadTaxes();\n        if (this.props.editId) {\n            this.loadEditInvoiceData();\n        }\n    }\n\n    selectedDefaultDate = (date) => {\n        this.setState({\n            selectedDate: date\n        })\n    }\n    loadEditInvoiceData = () => {\n        let invoice = this.props.editInvoice;\n        this.setState(function (prevState) {\n            let tableValues = [];\n            invoice.procedure.forEach(function (proc) {\n                tableValues.push({\n                    ...proc.procedure_data,\n                    ...proc,\n                    selectedDoctor: proc.doctor_data,\n                    selectedDate: moment(proc.date).isValid() ? moment(proc.date) : null,\n                    _id: Math.random().toFixed(7),\n                    item_type: PROCEDURES\n                })\n            });\n            let stocks = {...prevState.stocks};\n            invoice.inventory.forEach(function (proc) {\n\n                if (prevState.itemBatches[proc.inventory]) {\n                    if (stocks[proc.inventory]) {\n                        let stock_quantity = stocks[proc.inventory];\n                        if (stock_quantity[proc.batch_number])\n                            stock_quantity[proc.batch_number] += proc.unit;\n                        else\n                            stock_quantity[proc.batch_number] += proc.unit;\n                    } else {\n                        let stock_quantity = {};\n                        stock_quantity[proc.batch_number] = proc.unit;\n                        stocks[proc.inventory] = stock_quantity;\n                    }\n                    prevState.itemBatches[proc.inventory].forEach(function (batchObj) {\n                        if (batchObj.batch_number == proc.batch_number)\n                            proc.selectedBatch = batchObj;\n                    });\n                }\n                tableValues.push({\n                    ...proc.inventory_item_data,\n                    ...proc,\n                    selectedDoctor: proc.doctor_data,\n                    _id: Math.random().toFixed(7),\n                    item_type: INVENTORY,\n\n                });\n            });\n\n            return {\n                tableFormValues: tableValues,\n                selectedDate: moment(invoice.date).isValid() ? moment(invoice.date) : null,\n                stocks: stocks\n            }\n        })\n    }\n\n    loadInventoryItemList() {\n        let that = this;\n        let successFn = function (reqData) {\n            let data = reqData.results;\n            let drugItems = [];\n            let equipmentItems = [];\n            let supplesItems = [];\n\n            that.setState(function (prevState) {\n                    let stocks = {...prevState.stocks};\n                    let itemBatches = {};\n                    data.forEach(function (item) {\n                        if (item.item_type == DRUG) {\n                            drugItems.push(item);\n                            if (stocks[item.id]) {\n                                let stock_quantity = stocks[item.id]\n                                if (item.item_type_stock && item.item_type_stock.item_stock)\n                                    item.item_type_stock.item_stock.forEach(function (stock) {\n                                        if (stock_quantity[stock.batch_number])\n                                            stock_quantity[stock.batch_number] += stock.quantity;\n                                        else\n                                            stock_quantity[stock.batch_number] += stock.quantity;\n                                    });\n                            } else {\n                                let stock_quantity = {}\n                                if (item.item_type_stock && item.item_type_stock.item_stock)\n                                    item.item_type_stock.item_stock.forEach(function (stock) {\n                                        stock_quantity[stock.batch_number] = stock.quantity\n                                    });\n                                stocks[item.id] = stock_quantity;\n                            }\n                            itemBatches[item.id] = item.item_type_stock.item_stock;\n                        }\n\n                    });\n                    let items = that.state.items;\n                    items[INVENTORY] = drugItems;\n                    return {\n                        items: items,\n                        stocks: {...prevState.stocks, ...stocks},\n                        itemBatches: {...prevState.itemBatches, ...itemBatches}\n                    }\n                }, function () {\n                    if (that.props.editId) {\n                        that.loadEditInvoiceData();\n                    }\n                }\n            )\n\n        }\n        let errorFn = function () {\n        }\n        let paramsApi = {\n            practice: this.props.active_practiceId,\n            maintain_inventory: true,\n        }\n        if (this.state.searchItem) {\n            paramsApi.item_name = this.state.searchItem;\n        }\n\n        getAPI(INVENTORY_ITEM_API, successFn, errorFn, paramsApi);\n    }\n\n    loadProcedures() {\n        var that = this;\n        let successFn = function (data) {\n            let items = that.state.items;\n            items[PROCEDURES] = data;\n            that.setState({\n                items: items,\n            })\n        };\n        let errorFn = function () {\n        };\n\n        getAPI(interpolate(PROCEDURE_CATEGORY, [this.props.active_practiceId]), successFn, errorFn);\n    }\n\n    loadPrescriptions() {\n        var that = this;\n        let successFn = function (data) {\n\n            that.setState(function (prevState) {\n                return {\n                    items: {...prevState.items, [PRESCRIPTIONS]: data}\n                }\n            })\n        };\n        let errorFn = function () {\n        };\n        getAPI(interpolate(UNPAID_PRESCRIPTIONS, [that.props.match.params.id]), successFn, errorFn);\n    }\n\n    loadTaxes() {\n        var that = this;\n        let successFn = function (data) {\n            that.setState({\n                taxes_list: data,\n            })\n        };\n        let errorFn = function () {\n        };\n        getAPI(interpolate(TAXES, [this.props.active_practiceId]), successFn, errorFn);\n\n    }\n\n    remove = (k) => {\n        this.setState(function (prevState) {\n            let newTableFormValues = [];\n            prevState.tableFormValues.forEach(function (formValue) {\n                if (formValue._id != k)\n                    newTableFormValues.push(formValue);\n            });\n            return {\n                tableFormValues: newTableFormValues\n            }\n        });\n    }\n\n\n    add = (item, randId = Math.random().toFixed(7)) => {\n        this.setState(function (prevState) {\n            if (item.item_type == PROCEDURES) {\n                item = {\n                    ...item,\n                    id: undefined,\n                    unit_cost: item.cost,\n                    procedure: item.id,\n                    selectedDoctor: prevState.selectedDoctor ? prevState.selectedDoctor : null,\n                    selectedDate: moment(),\n                    taxes: item.taxes.map(tax => tax.id)\n                }\n            } else if (item.item_type == INVENTORY) {\n                item = {\n                    ...item,\n                    id: undefined,\n                    inventory: item.id,\n                    unit_cost: item.retail_without_tax,\n                    selectedDoctor: prevState.selectedDoctor ? prevState.selectedDoctor : null,\n                }\n            }\n            return {\n                tableFormValues: [...prevState.tableFormValues, {\n                    ...tableFormFields,\n                    ...item,\n                    id: undefined,\n                    _id: randId,\n                }]\n            }\n        });\n    };\n    selectDoctor = (doctor, id, type) => {\n        this.setState(function (prevState) {\n            let finalTableFormValues = [];\n            prevState.tableFormValues.forEach(function (formValue) {\n                if (formValue._id == id && formValue.item_type == type) {\n                    finalTableFormValues.push({...formValue, selectedDoctor: doctor})\n                } else {\n                    finalTableFormValues.push(formValue)\n                }\n            });\n            return {\n                tableFormValues: finalTableFormValues\n            }\n        })\n    }\n    selectedDate = (dateValue, id, type) => {\n        this.setState(function (prevState) {\n            let finalTableFormValues = [];\n            prevState.tableFormValues.forEach(function (formValue) {\n                if (formValue._id == id && formValue.item_type == type) {\n                    finalTableFormValues.push({...formValue, selectedDate: dateValue})\n                } else {\n                    finalTableFormValues.push(formValue)\n                }\n            });\n            return {\n                tableFormValues: finalTableFormValues\n            }\n        })\n    }\n    selectBatch = (batch, id, type) => {\n        this.setState(function (prevState) {\n            let finalTableFormValues = [];\n            prevState.tableFormValues.forEach(function (formValue) {\n                if (formValue._id == id && formValue.item_type == type) {\n                    finalTableFormValues.push({...formValue, selectedBatch: batch})\n                } else {\n                    finalTableFormValues.push(formValue)\n                }\n            });\n            return {\n                tableFormValues: finalTableFormValues\n            }\n        })\n    }\n    addPrescription = (item) => {\n        let that = this;\n        item.drugs.forEach(function (drug_item) {\n            if (drug_item.inventory.maintain_inventory)\n                that.add({...drug_item.inventory, item_type: INVENTORY, inventory: item.inventory.id, id: undefined})\n        });\n        that.setState(function (prevState) {\n            return {selectedPrescriptions: [...prevState.selectedPrescriptions, item.id]}\n        })\n    }\n    handleSubmit = (e) => {\n        let that = this;\n        e.preventDefault();\n        this.props.form.validateFields((err, values) => {\n            if (!err) {\n                that.setState({\n                    saveLoading: true\n                });\n                let reqData = {\n                    bank: '',\n                    number: '',\n                    practice: that.props.active_practiceId,\n                    return_mode: null,\n                    invoice: this.props.editInvoice.id,\n                    procedure: [],\n                    inventory: [],\n                    notes: values.notes,\n                    patient: that.props.match.params.id,\n                    staff: this.props.editInvoice.staff_data ? this.props.editInvoice.staff_data.id : null,\n                    prescription: that.state.selectedPrescriptions,\n                    date: that.state.selectedDate && moment(that.state.selectedDate).isValid() ? that.state.selectedDate.format('YYYY-MM-DD') : null,\n                    with_tax: this.state.return_with_tax ? true : false,\n                    cash_return: values.cash_return,\n                    advance_value : this.state.returnCashAvailable - values.cash_return || 0,\n                };\n                that.state.tableFormValues.forEach(function (item) {\n                    item.unit = values.unit[item._id];\n                    var id = item.id;\n                    delete (item.id);\n                    // item.taxes = values.taxes[item._id];\n                    // item.unit_cost = values.unit_cost[item._id];\n                    // item.discount = values.discount[item._id];\n                    // item.discount_type = '%';\n                    if (item.unit)\n                        switch (item.item_type) {\n                            case PROCEDURES:\n                                reqData.procedure.push({\n                                    ...item,\n                                    // \"name\": item.name,\n                                    \"unit\": item.unit,\n                                    // \"procedure\": item.procedure,\n                                    // \"default_notes\": null,\n                                    // \"is_active\": true,\n                                    // \"margin\": item.margin,\n                                    // \"taxes\": item.taxes,\n                                    // \"unit_cost\": item.unit_cost,\n                                    // \"discount\": item.discount,\n                                    // \"discount_type\": \"%\",\n                                    // \"offers\": 1,\n                                    procedure_inv: id,\n                                    // \"doctor\": item.selectedDoctor ? item.selectedDoctor.id : null,\n                                    // id:item.id\n                                });\n                                break;\n                            case INVENTORY:\n                                reqData.inventory.push({\n                                    ...item,\n                                    // \"inventory\": item.inventory,\n                                    // \"name\": item.name,\n                                    \"unit\": item.unit,\n                                    // \"taxes\": item.taxes,\n                                    // \"unit_cost\": item.unit_cost,\n                                    // \"discount\": item.discount,\n                                    // \"discount_type\": \"%\",\n                                    // \"offers\": null,\n                                    inventory_inv: id,\n                                    // \"doctor\": item.selectedDoctor ? item.selectedDoctor.id : null,\n                                    // \"instruction\": item.instruction,\n                                    // \"is_active\": true,\n                                    // batch_number: item.selectedBatch ? item.selectedBatch.batch_number : null,\n                                    // id: item.id\n                                });\n                                break;\n                            default:\n                                return null;\n                        }\n                });\n                let successFn = function (data) {\n                    that.setState({\n                        saveLoading: false\n                    });\n                    displayMessage(\"Inventory updated successfully\");\n                    that.props.loadData();\n                    let url = '/patient/' + that.props.match.params.id + '/billing/invoices';\n                    that.props.history.push(url);\n                }\n                let errorFn = function () {\n                    that.setState({\n                        saveLoading: false\n                    });\n                }\n\n                postAPI(INVOICE_RETURN_API, reqData, successFn, errorFn);\n\n            }\n        });\n    }\n    addItemThroughQR = (value) => {\n        let that = this;\n        that.setState({\n            loadingQr: true,\n        })\n        let qrSplitted = value.split('*');\n        let successFn = function (data) {\n\n            let item = data;\n            let {setFieldsValue, getFieldsValue, getFieldValue} = that.props.form;\n            let randomId = Math.random().toFixed(7);\n            let flag = true\n            that.state.tableFormValues.forEach(function (row) {\n                if (row.name == qrSplitted[0]) {\n                    let _id = row._id;\n                    let batch = row.selectedBatch.batch_number;\n                    let quantity = getFieldValue(`unit[${_id}]`);\n                    if (batch == qrSplitted[1]) {\n                        flag = false;\n                        setFieldsValue({\n                            [`unit[${_id}]`]: quantity + 1\n                        })\n                    }\n                }\n            });\n            if (flag) {\n                let unit_cost = null;\n                if (data.item_type_stock && data.item_type_stock.item_stock)\n                    data.item_type_stock.item_stock.forEach(function (stock) {\n                        if (stock.batch_number == qrSplitted[1]) {\n                            data.selectedBatch = stock;\n                            unit_cost = stock.unit_cost\n                        }\n                    })\n                that.add({...data, item_type: INVENTORY}, randomId);\n\n                setFieldsValue({\n                    [`unit_cost[${randomId}]`]: unit_cost,\n                })\n            }\n            that.setState(function (prevState) {\n\n                return {\n                    loadingQr: false,\n                    qrValue: ''\n                }\n            });\n        }\n        let errorFn = function () {\n\n        }\n        getAPI(SEARCH_THROUGH_QR, successFn, errorFn, {qr: value, form: 'Invoice'})\n    }\n    setQrValue = (e) => {\n        let value = e.target.value;\n        this.setState({\n            qrValue: value\n        })\n    }\n    searchValues = (e) => {\n        let value = e.target.value;\n        this.setState({\n            searchItem: value,\n        }, function () {\n            this.loadInventoryItemList();\n        })\n\n    }\n    changeNetPrice = (id) => {\n        let that = this;\n        const {getFieldsValue, setFields} = this.props.form;\n        setTimeout(function () {\n            let values = getFieldsValue();\n            if (values.total_unit_cost[id]) {\n\n                that.setState(function (prevState) {\n                    let newTableValues = []\n                    prevState.tableFormValues.forEach(function (tableObj) {\n                        if (tableObj._id == id) {\n                            let totalTaxAmount = 0;\n                            values.taxes[id].forEach(function (taxid) {\n                                prevState.taxes_list.forEach(function (taxObj) {\n                                    if (taxObj.id == taxid)\n                                        totalTaxAmount += taxObj.tax_value;\n                                })\n                            });\n                            let retailPrice = values.total_unit_cost[id] / (1 + totalTaxAmount * 0.01);\n                            newTableValues.push({...tableObj, unit_cost: retailPrice})\n                        } else {\n                            newTableValues.push(tableObj);\n                        }\n                    })\n                    return {tableFormValues: newTableValues}\n                })\n            } else {\n                that.setState({\n                    retail_price: 0\n                })\n            }\n        }, 1000);\n\n    }\n\n    onChangeHandle = (e) => {\n        let that = this;\n        this.setState({\n            return_with_tax: e.target.checked\n        },function(){\n            that.calculateReturnCashAvailable();\n        })\n    }\n\n    calculateReturnCashAvailable = () => {\n        let that = this;\n        let totalAmountPaid = this.state.editInvoice.payments.reduce((a, b) => a + b.pay_amount, 0);\n        let totalInvoiceAmount = this.state.editInvoice.total;\n        let pendingPayment = totalInvoiceAmount - totalAmountPaid;\n        let worthOfReturningItems = 0;\n        const {getFieldsValue} = this.props.form;\n        setTimeout(function () {\n            let values = getFieldsValue();\n            let taxAllowed = that.state.return_with_tax;\n            that.state.tableFormValues.forEach(function (item) {\n                let units = values.unit[item._id];\n                if (item.item_type == INVENTORY) {\n                    worthOfReturningItems += units * item.unit_cost;\n                    worthOfReturningItems += (taxAllowed ? (item.tax_value / item.unit) * units : null);\n                } else if (item.item_type == PRESCRIPTIONS) {\n                    worthOfReturningItems += units * item.unit_cost;\n                    worthOfReturningItems += (taxAllowed ? (item.tax_value / item.unit) * units : null);\n                } else if (item.item_type == PROCEDURES) {\n                    worthOfReturningItems += units * item.unit_cost;\n                    worthOfReturningItems += (taxAllowed ? (item.tax_value / item.unit) * units : null);\n                }\n            });\n            that.setState({\n                returnCashAvailable: (worthOfReturningItems > pendingPayment ? worthOfReturningItems - pendingPayment : 0).toFixed(2)\n            });\n        }, 500);\n\n\n    }\n\n    render() {\n        let that = this;\n        const {getFieldDecorator, getFieldValue, getFieldsValue} = this.props.form;\n        const formItemLayout = {\n            labelCol: {\n                xs: {span: 24},\n                sm: {span: 4},\n            },\n            wrapperCol: {\n                xs: {span: 24},\n                sm: {span: 24},\n                md: {span: 24},\n                lg: {span: 24},\n                xl: {span: 24},\n            },\n        };\n\n        const formItemLayoutWithOutLabel = {\n            labelCol: {\n                xs: {span: 24},\n                sm: {span: 24},\n            },\n            wrapperCol: {\n                xs: {span: 24},\n                sm: {span: 24},\n            },\n        };\n        getFieldDecorator('keys', {initialValue: []});\n        let consumeRow = [{\n            title: 'Item Name',\n            key: 'item_name',\n            dataIndex: 'name',\n            render: function (name, record) {\n                switch (record.item_type) {\n                    case PROCEDURES:\n                        return <Form.Item\n                            key={`name[${record._id}]`}\n                            {...formItemLayout}>\n                            {getFieldDecorator(`name[${record._id}]`, {\n                                validateTrigger: ['onChange', 'onBlur'],\n                                initialValue: name,\n                                rules: [{\n                                    required: true,\n                                    message: \"This field is required.\",\n                                }],\n                            })(\n                                <Input min={0} placeholder=\"Item name\" size={'small'} disabled/>\n                            )}\n                            <span>by &nbsp;&nbsp;</span>\n                            <Dropdown placement=\"topCenter\" disabled overlay={<Menu>\n                                {that.state.practiceDoctors.map(doctor =>\n                                    <Menu.Item key=\"0\">\n                                        <a onClick={() => that.selectDoctor(doctor, record._id, PROCEDURES)}>{doctor.user.first_name}</a>\n                                    </Menu.Item>)}\n                            </Menu>} trigger={['click']}>\n                                <a className=\"ant-dropdown-link\" href=\"#\">\n                                    <b>\n                                        {record.selectedDoctor.user ? record.selectedDoctor.user.first_name : 'No DOCTORS Found'}\n                                    </b>\n                                </a>\n                            </Dropdown>\n                            <span> &nbsp;&nbsp;on&nbsp;&nbsp;</span>\n                            <DatePicker value={record.selectedDate}\n                                        disabled\n                                        size={'small'}\n                                        onChange={(value) => that.selectedDate(value, record._id, PROCEDURES)}\n                                        format={\"DD-MM-YYYY\"}/>\n                        </Form.Item>;\n                    case PRESCRIPTIONS:\n                        return <b>{record.name}</b>;\n                    case INVENTORY:\n                        return <div>\n                            {record.name}\n                            <span><br/>by &nbsp;&nbsp;</span>\n                            <Dropdown placement=\"topCenter\" disabled overlay={<Menu>\n                                {that.state.practiceDoctors.map(doctor =>\n                                    <Menu.Item key={doctor.id}>\n                                        <a onClick={() => that.selectDoctor(doctor, record._id, PROCEDURES)}>{doctor.user.first_name}</a>\n                                    </Menu.Item>)}\n                            </Menu>} trigger={['click']}>\n                                <a className=\"ant-dropdown-link\" href=\"#\">\n                                    <b>\n                                        {record.selectedDoctor && record.selectedDoctor.user ? record.selectedDoctor.user.first_name : '+Add Doctor'}\n                                    </b>\n                                </a>\n                            </Dropdown>\n                            <span><br/>from batch &nbsp;&nbsp;</span>\n                            <Dropdown placement=\"topCenter\" disabled overlay={<Menu>\n                                {that.state.itemBatches[record.inventory] && that.state.itemBatches[record.inventory].map((batch, index) =>\n                                    (moment() >= moment(batch.expiry_date) ? <Menu.Item key={index} disabled={true}>\n                                        {batch.batch_number}&nbsp;({batch.quantity}) &nbsp;&nbsp;{batch.expiry_date}\n                                    </Menu.Item> : <Menu.Item key={index}>\n                                        <a onClick={() => that.selectBatch(batch, record._id, INVENTORY)}>{batch.batch_number}&nbsp;({batch.quantity}) &nbsp;&nbsp;{batch.expiry_date}</a>\n                                    </Menu.Item>))}\n                            </Menu>} trigger={['click']}>\n                                <a className=\"ant-dropdown-link\" href=\"#\">\n                                    <b>\n                                        {record.selectedBatch ? record.selectedBatch.batch_number : 'Select Batch'}\n                                    </b>\n                                </a>\n                            </Dropdown>\n                        </div>\n                    default:\n                        return null;\n                }\n            }\n        }];\n        consumeRow = consumeRow.concat([{\n            title: 'Returning Unit',\n            key: 'unit',\n            width: 100,\n            dataIndex: 'unit',\n            render: (item, record) => (record.item_type == INVENTORY ?\n                    <Form.Item\n                        key={`unit[${record._id}]`}\n                        {...formItemLayout}>\n                        {getFieldDecorator(`unit[${record._id}]`, {\n                            validateTrigger: ['onChange', 'onBlur'],\n                            initialValue: 0,\n                        })(\n                            <InputNumber max={(record.unit)}\n                                         onChange={this.calculateReturnCashAvailable}\n                                         min={0}\n                                         placeholder=\"units\" size={'small'}\n                                         disabled={!(record.selectedBatch && that.state.stocks[record.inventory] && that.state.stocks[record.inventory][record.selectedBatch.batch_number])}/>\n                        )}\n                        <span className=\"ant-form-text\">Items: {record.unit}</span>\n                    </Form.Item>\n\n                    : <Form.Item\n                        key={`unit[${record._id}]`}\n                        {...formItemLayout}>\n                        {getFieldDecorator(`unit[${record._id}]`, {\n                            initialValue: 0,\n                            validateTrigger: ['onChange', 'onBlur'],\n                        })(\n                            <InputNumber min={0} max={record.unit} placeholder=\"unit\" size={'small'}\n                                         onChange={this.calculateReturnCashAvailable}/>\n                        )}\n                        <span className=\"ant-form-text\">Items: {record.unit}</span>\n                    </Form.Item>\n            )\n        }, {\n            title: 'Unit Cost',\n            key: 'unit_cost',\n            width: 100,\n            dataIndex: 'unit_cost',\n            render: (item, record) => item ? item.toFixed(2) : null\n        }, {\n            title: 'discount %',\n            key: 'discount',\n            width: 100,\n            dataIndex: 'discount',\n            render: (item, record) => <Form.Item\n                key={`discount[${record._id}]`}\n                {...formItemLayout}>\n                {getFieldDecorator(`discount[${record._id}]`, {\n                    initialValue: record.discount,\n                    validateTrigger: ['onChange', 'onBlur'],\n\n                })(\n                    <InputNumber min={0} max={100} placeholder=\"discount\" size={'small'} disabled={true}/>\n                )}\n            </Form.Item>\n        }, {\n            title: 'Taxes',\n            key: 'taxes',\n            dataIndex: 'taxes',\n            render: (item, record) => <Form.Item\n                key={`taxes[${record._id}]`}\n                {...formItemLayout}>\n                {getFieldDecorator(`taxes[${record._id}]`, {\n                    initialValue: record.taxes || [],\n                    validateTrigger: ['onChange', 'onBlur'],\n                })(\n                    <Select placeholder=\"Taxes\" size={'small'} mode={\"multiple\"}\n                            disabled={true}\n                            style={{width: 150}}\n                            onChange={() => that.changeNetPrice(record._id)}>\n                        {this.state.taxes_list && this.state.taxes_list.map((tax) => <Select.Option\n                            value={tax.id}>{tax.name}@{tax.tax_value}%</Select.Option>)}\n                    </Select>\n                )}\n            </Form.Item>\n        }, {\n            title: 'Total Unit Cost',\n            key: 'total',\n            width: 100,\n            dataIndex: 'total',\n            render: (item, record) => (record.unit ? (record.total/record.unit).toFixed(2) : record.total.toFixed(2))\n        }]);\n\n        return <div>\n            <Spin spinning={this.state.saveLoading} tip=\"Saving Invoice...\">\n                <Row gutter={16}>\n                    <Col span={20}>\n                        <Card\n                            title={this.props.editId ? \"Return Invoice (INV \" + this.props.editId + \")\" : \"Add Invoice\"}\n                            bodyStyle={{padding: 0}}>\n                            <Row gutter={16}>\n                                <Col span={24}>\n                                    <Form onSubmit={this.handleSubmit} layout=\"inline\">\n                                        <Table pagination={false}\n                                               bordered={true}\n                                               dataSource={this.state.tableFormValues}\n                                               columns={consumeRow}/>\n                                        <Affix offsetBottom={0}>\n                                            <Card>\n                                                <Row gutter={16}>\n                                                    <Col span={6}>\n\n                                                        <span> &nbsp;&nbsp;on&nbsp;&nbsp;</span>\n                                                        <DatePicker value={this.state.selectedDate}\n                                                                    disabled\n                                                                    onChange={(value) => this.selectedDefaultDate(value)}\n                                                                    format={\"DD-MM-YYYY\"}\n                                                                    allowClear={false}/>\n                                                        <br/>\n                                                        <br/>\n                                                        <Checkbox onChange={this.onChangeHandle}\n                                                                  defaultChecked={this.state.return_with_tax}>\n                                                            Return With Tax\n                                                        </Checkbox>\n                                                    </Col>\n                                                    <Col span={8}>\n                                                        <Form.Item label={\"Returned Cash \"} >\n                                                            {getFieldDecorator('cash_return',\n                                                            )\n                                                            (<InputNumber min={0} max={this.state.returnCashAvailable}\n                                                                          placeholder={\"Cash Returned\"}/>)\n                                                            }\n                                                            <span><br/>Max Cash Return Allowed (INR) {this.state.returnCashAvailable}</span>\n                                                        </Form.Item>\n                                                    </Col>\n                                                    <Col span={10}>\n                                                        <Form.Item\n                                                            label={\"Notes\"}\n                                                            key={`notes`}\n                                                            >\n                                                            {getFieldDecorator(`notes`, {\n                                                                initialValue: this.state.tableFormValues.notes,\n                                                                validateTrigger: ['onChange', 'onBlur'],\n                                                            })(\n                                                                <Input.TextArea row={2} placeholder=\"Notes...\" size={'small'} style={{width:'100%'}}/>\n                                                            )}\n                                                        </Form.Item>\n                                                        <Form.Item {...formItemLayoutWithOutLabel}\n                                                                   style={{marginBottom: 0, float: 'right'}}>\n                                                            <Button type=\"primary\" htmlType=\"submit\"\n                                                                    style={{margin: 5}}>Save Return Invoice</Button>\n                                                            {that.props.history ?\n                                                                <Button style={{margin: 5, float: 'right'}}\n                                                                        onClick={() => that.props.history.goBack()}>\n                                                                    Cancel\n                                                                </Button> : null}\n                                                        </Form.Item>\n\n                                                    </Col>\n                                                </Row>\n\n\n                                            </Card>\n                                        </Affix>\n                                    </Form>\n                                </Col>\n                            </Row>\n                        </Card>\n                    </Col>\n                    <Col span={4}>\n                        <Divider>Payments Done</Divider>\n                        <List dataSource={this.state.editInvoice.payments}\n                              renderItem={payment => <Card title={payment.payment_id} style={{marginBottom: 10}}\n                                                           bodyStyle={{padding: 5}}>\n                                  <p>Paid (INR)<span\n                                      style={{float: 'right', fontWeight: 600}}> {payment.pay_amount.toFixed(2)}</span>\n                                  </p>\n                              </Card>}/>\n                    </Col>\n                </Row>\n            </Spin>\n        </div>\n\n    }\n}\n\nexport default Form.create()(AddReturnInvoice);\n","import React from \"react\";\nimport {Button, Card, Form, Icon, Input, Modal} from \"antd\";\nimport {CANCELINVOICE_RESENT_OTP, CANCELINVOICE_VERIFY_OTP} from \"../../../constants/api\";\nimport {getAPI, postAPI} from \"../../../utils/common\";\nclass InvoiceReturnModal extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            returnIncoiceVisible: this.props.returnIncoiceVisible,\n            otpSent:this.props.otpSent,\n\n        };\n    }\n\n    handleSubmitReturnInvoice = (e) => {\n        let that = this;\n        e.preventDefault();\n        this.props.form.validateFields((err, values) => {\n            if (!err) {\n                let reqData = {\n                    ...values,\n                    practice: this.props.active_practiceId,\n                }\n                let successFn = function (data) {\n                    that.setState({\n                        returnIncoiceVisible: false,\n                    });\n                    that.returnInvoiceData(that.props.editInvoice)\n                    that.props.returnInvoiceClose();\n                };\n                let errorFn = function () {\n\n                };\n                postAPI(CANCELINVOICE_VERIFY_OTP, reqData, successFn, errorFn);\n            }\n        });\n    };\n\n    returnInvoiceData = (record) => {\n        let that = this;\n        // let id = this.props.match.params.id;\n        this.setState({\n            editInvoice: record,\n        }, function () {\n            that.props.history.push(\"/patient/\" + record.patient_data.id + \"/billing/invoices/return/\")\n        });\n    }\n\n\n\n    sendOTP() {\n        let that = this;\n        let successFn = function (data) {\n\n        };\n        let errorFn = function () {\n\n        };\n        getAPI(CANCELINVOICE_RESENT_OTP, successFn, errorFn);\n    }\n\n    render() {\n        let that = this;\n        const {getFieldDecorator} = that.props.form;\n        return(\n            <Modal\n                visible={(this.state.returnIncoiceVisible && that.props.editInvoice && that.props.editInvoice.id == that.props.invoice.id)}\n                title=\"Return Invoice\"\n                footer={null}\n                onOk={that.props.handleSubmitReturnInvoice}\n                onCancel={that.props.returnInvoiceClose}\n            >\n                <Form>\n                    <Form.Item>\n                        {getFieldDecorator('otp', {\n                            rules: [{required: true, message: 'Please input Otp!'}],\n                        })(\n                            <Input prefix={<Icon type=\"user\" style={{color: 'rgba(0,0,0,.25)'}}/>}\n                                   placeholder=\"Otp\"\n                            />,\n                        )}\n                    </Form.Item>\n                    <Form.Item>\n                        {that.props.otpSent ? <a style={{float: 'right'}} type=\"primary\" onClick={that.sendOTP}>\n                            Resend Otp ?\n                        </a> : null}\n                        <Button size=\"small\" type=\"primary\" htmlType=\"submit\" onClick={that.handleSubmitReturnInvoice}>\n                            Submit\n                        </Button>&nbsp;\n                        <Button size=\"small\" onClick={that.props.returnInvoiceClose}>\n                            Close\n                        </Button>\n                    </Form.Item>\n                </Form>\n            </Modal>\n        )\n    }\n\n\n}\nexport default Form.create()(InvoiceReturnModal);\n","import React from \"react\";\nimport {Button, Card, Form, Icon, Input, Modal} from \"antd\";\nimport moment from \"moment\";\nimport {CANCELINVOICE_GENERATE_OTP, CANCELINVOICE_RESENT_OTP, CANCELINVOICE_VERIFY_OTP} from \"../../../constants/api\";\nimport {getAPI, postAPI} from \"../../../utils/common\";\nimport {OTP_DELAY_TIME} from \"../../../constants/dataKeys\";\nclass EditReturnModal extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            otpSent:this.props.otpSent,\n            returnIncoiceVisible: this.props.returnIncoiceVisible,\n            editIncoiceVisible: this.props.editIncoiceVisible,\n\n\n        };\n    }\n\n    handleSubmitEditInvoice = (e) => {\n        let that = this;\n        e.preventDefault();\n        this.props.form.validateFields((err, values) => {\n            if (!err) {\n                let reqData = {\n                    ...values,\n                    practice: this.props.active_practiceId,\n                }\n                let successFn = function (data) {\n                    that.setState({\n                        editIncoiceVisible: false,\n                    });\n                    that.editInvoiceData(that.props.editInvoice);\n                    that.props.editInvoiceClose();\n                };\n                let errorFn = function () {\n\n                };\n                postAPI(CANCELINVOICE_VERIFY_OTP, reqData, successFn, errorFn);\n            }\n        });\n    };\n\n    editInvoiceData = (record) => {\n        let that = this;\n        // let id = this.props.match.params.id;\n        this.setState({\n            editInvoice: record,\n        }, function () {\n            that.props.history.push(\"/patient/\" + record.patient_data.id + \"/billing/invoices/edit/\")\n        });\n    };\n\n\n    sendOTP() {\n        let that = this;\n        let successFn = function (data) {\n\n        };\n        let errorFn = function () {\n\n        };\n        getAPI(CANCELINVOICE_RESENT_OTP, successFn, errorFn);\n    }\n\n    render() {\n        let that = this;\n        const {getFieldDecorator} = that.props.form;\n        return(\n            <Modal\n                visible={(that.state.editIncoiceVisible && that.props.editInvoice && that.props.editInvoice.id == that.props.invoice.id)}\n                title=\"Edit Invoice\"\n                footer={null}\n                onOk={that.handleSubmitEditInvoice}\n                onCancel={that.props.editInvoiceClose}\n            >\n                <Form>\n                    <Form.Item>\n                        {getFieldDecorator('otp', {\n                            rules: [{required: true, message: 'Please input Otp!'}],\n                        })(\n                            <Input prefix={<Icon type=\"user\" style={{color: 'rgba(0,0,0,.25)'}}/>}\n                                   placeholder=\"Otp\"\n                            />,\n                        )}\n                    </Form.Item>\n                    <Form.Item>\n                        {that.props.otpSent ? <a style={{float: 'right'}} type=\"primary\" onClick={that.sendOTP}>\n                            Resend Otp ?\n                        </a> : null}\n                        <Button size=\"small\" type=\"primary\" htmlType=\"submit\" onClick={that.handleSubmitEditInvoice}>\n                            Submit\n                        </Button>&nbsp;\n                        <Button size=\"small\" onClick={that.props.editInvoiceClose}>\n                            Close\n                        </Button>\n                    </Form.Item>\n                </Form>\n            </Modal>\n        )\n    }\n\n\n}\nexport default Form.create()(EditReturnModal);\n","import React from \"react\";\nimport {Button, Card, Form, Icon, Input, Modal} from \"antd\";\nimport {\n    CANCELINVOICE_RESENT_OTP,\n    CANCELINVOICE_VERIFY_OTP,\n    SINGLE_INVOICES_API\n} from \"../../../constants/api\";\nimport {displayMessage, getAPI, interpolate, postAPI, putAPI} from \"../../../utils/common\";\nimport {SUCCESS_MSG_TYPE} from \"../../../constants/dataKeys\";\nclass CancelReturnModal extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            cancelIncoiceVisible: this.props.cancelIncoiceVisible,\n            otpSent:this.props.otpSent,\n\n        };\n    }\n\n    handleSubmitCancelInvoice = (e) => {\n        let that = this;\n        e.preventDefault();\n        this.props.form.validateFields((err, values) => {\n            if (!err) {\n                let reqData = {\n                    ...values,\n                    practice: this.props.active_practiceId,\n                }\n                let successFn = function (data) {\n                    that.setState({\n                        cancelIncoiceVisible: false,\n                    });\n                    that.deleteInvoice(that.props.patientId, that.props.invoiceId)\n                };\n                let errorFn = function () {\n\n                };\n                postAPI(CANCELINVOICE_VERIFY_OTP, reqData, successFn, errorFn);\n            }\n        });\n    }\n\n\n    deleteInvoice(patient, invoice) {\n        let that = this;\n        let reqData = {patient: patient, is_cancelled: true};\n        let successFn = function (data) {\n            displayMessage(SUCCESS_MSG_TYPE, \"Invoice cancelled successfully\")\n            that.props.loadInvoices();\n        }\n        let errorFn = function () {\n        }\n        putAPI(interpolate(SINGLE_INVOICES_API, [invoice]), reqData, successFn, errorFn);\n    }\n\n   \n\n    sendOTP() {\n        let that = this;\n        let successFn = function (data) {\n\n        };\n        let errorFn = function () {\n\n        };\n        getAPI(CANCELINVOICE_RESENT_OTP, successFn, errorFn);\n    }\n\n    render() {\n        let that = this;\n        const {getFieldDecorator} = that.props.form;\n        return(\n            <Modal\n                visible={(that.state.cancelIncoiceVisible && that.props.editInvoice && that.props.editInvoice.id ==that.props.invoice.id)}\n                title=\"Cancel Invoice\"\n                footer={null}\n                onOk={that.handleSubmitCancelInvoice}\n                onCancel={that.cancelInvoiceClose}\n            >\n                <Form>\n                    <Form.Item>\n                        {getFieldDecorator('otp', {\n                            rules: [{required: true, message: 'Please input Otp!'}],\n                        })(\n                            <Input prefix={<Icon type=\"user\" style={{color: 'rgba(0,0,0,.25)'}}/>}\n                                   placeholder=\"Otp\"\n                            />,\n                        )}\n                    </Form.Item>\n                    <Form.Item>\n                        {that.props.otpSent ? <a style={{float: 'right'}} type=\"primary\" onClick={that.sendOTP}>\n                            Resend Otp ?\n                        </a> : null}\n                        <Button size=\"small\" type=\"primary\" htmlType=\"submit\" onClick={that.handleSubmitCancelInvoice}>\n                            Submit\n                        </Button>&nbsp;\n                        <Button size=\"small\" onClick={that.cancelInvoiceClose}>\n                            Close\n                        </Button>\n                    </Form.Item>\n                </Form>\n            </Modal>\n        )\n    }\n\n\n}\nexport default Form.create()(CancelReturnModal);\n","import React from \"react\";\nimport {\n    Affix,\n    Alert,\n    Button,\n    Card,\n    Col,\n    Divider,\n    Dropdown,\n    Icon,\n    Menu,\n    Modal,\n    Row,\n    Spin,\n    Statistic,\n    Table,\n    Tag,\n    Tooltip,\n    Form, Input\n} from \"antd\";\nimport {displayMessage, getAPI, interpolate, putAPI, postAPI} from \"../../../utils/common\";\nimport {\n    DRUG_CATALOG,\n    INVOICE_PDF_API,\n    INVOICES_API,\n    PROCEDURE_CATEGORY,\n    SINGLE_INVOICES_API,\n    TAXES,\n    CANCELINVOICE_GENERATE_OTP,\n    CANCELINVOICE_VERIFY_OTP,\n    CANCELINVOICE_RESENT_OTP,\n} from \"../../../constants/api\";\nimport moment from \"moment\";\nimport {Route, Switch} from \"react-router\";\nimport AddInvoicedynamic from \"./AddInvoicedynamic\";\nimport InfiniteFeedLoaderButton from \"../../common/InfiniteFeedLoaderButton\";\nimport {Link, Redirect} from \"react-router-dom\";\nimport {BACKEND_BASE_URL} from \"../../../config/connect\";\nimport {SUCCESS_MSG_TYPE, OTP_DELAY_TIME} from \"../../../constants/dataKeys\";\nimport AddReturnInvoice from \"./AddReturnInvoice\";\nimport InvoiceReturnModal from \"./InvoiceReturnModal\";\nimport EditReturnModal from \"./EditReturnModal\";\nimport CancelReturnModal from \"./CancelReturnModal\";\n\nconst confirm = Modal.confirm;\n\nclass PatientInvoices extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            currentPatient: this.props.currentPatient,\n            active_practiceId: this.props.active_practiceId,\n            invoices: [],\n            drug_catalog: null,\n            procedure_category: null,\n            taxes_list: null,\n            editInvoice: null,\n            loading: true,\n            returnIncoiceVisible: false,\n            editIncoiceVisible: false,\n            cancelIncoiceVisible: false,\n        }\n        this.loadInvoices = this.loadInvoices.bind(this);\n        this.loadDrugCatalog = this.loadDrugCatalog.bind(this);\n        this.loadProcedureCategory = this.loadProcedureCategory.bind(this);\n        this.loadTaxes = this.loadTaxes.bind(this);\n    }\n\n    componentDidMount() {\n        this.loadInvoices();\n    }\n\n    loadInvoices(page = 1) {\n        let that = this;\n        if (that.props.refreshWallet && page == 1) {\n            that.props.refreshWallet();\n        }\n        that.setState({\n            loading: true\n        });\n        let successFn = function (data) {\n            if (data.current == 1) {\n                that.setState({\n                    total: data.count,\n                    invoices: data.results,\n                    loading: false,\n                    loadMoreInvoice: data.next\n                })\n            } else {\n                that.setState(function (prevState) {\n                    return {\n                        total: data.count,\n                        invoices: [...prevState.invoices, ...data.results],\n                        loading: false,\n                        loadMoreInvoice: data.next\n                    }\n                })\n            }\n        }\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            })\n\n        }\n        let apiParams = {\n            page: page,\n            practice: this.props.active_practiceId,\n        };\n        if (this.props.match.params.id) {\n            apiParams.patient = this.props.match.params.id;\n        }\n        // if (this.props.showAllClinic && this.props.match.params.id) {\n        //     delete (apiParams.practice)\n        // }\n        getAPI(INVOICES_API, successFn, errorFn, apiParams);\n    }\n\n    loadDrugCatalog() {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                drug_catalog: data,\n            })\n        }\n        let errorFn = function () {\n\n        }\n        getAPI(interpolate(DRUG_CATALOG, [this.props.active_practiceId]), successFn, errorFn)\n    }\n\n    loadProcedureCategory() {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                procedure_category: data,\n            })\n        }\n        let errorFn = function () {\n\n\n        }\n        getAPI(interpolate(PROCEDURE_CATEGORY, [this.props.active_practiceId]), successFn, errorFn);\n    }\n\n    loadTaxes() {\n        var that = this;\n        let successFn = function (data) {\n            that.setState({\n                taxes_list: data,\n            })\n        };\n        let errorFn = function () {\n        };\n        getAPI(interpolate(TAXES, [this.props.active_practiceId]), successFn, errorFn);\n\n    }\n\n\n    loadPDF = (id) => {\n        let that = this;\n        let successFn = function (data) {\n            if (data.report)\n                window.open(BACKEND_BASE_URL + data.report);\n        }\n        let errorFn = function () {\n\n        }\n        getAPI(interpolate(INVOICE_PDF_API, [id]), successFn, errorFn);\n    }\n\n\n    returnModelOpen = (record) => {\n        let that = this;\n        let created_time = moment().diff(record.created_at, 'minutes');\n        if (created_time > OTP_DELAY_TIME) {\n            that.setState({\n                returnIncoiceVisible: true,\n                editIncoiceVisible: false,\n                cancelIncoiceVisible: false,\n                editInvoice: record,\n            });\n\n            let reqData = {\n                practice: this.props.active_practiceId,\n                type: 'Invoice' + ':' + record.invoice_id + ' ' + 'Return'\n            };\n            let successFn = function (data) {\n                that.setState({\n                    otpSent: true,\n                    patientId: record.patient,\n                    invoiceId: record.id\n                })\n            };\n            let errorFn = function () {\n\n            };\n            postAPI(CANCELINVOICE_GENERATE_OTP, reqData, successFn, errorFn);\n        } else {\n            this.setState({\n                editInvoice: record,\n            }, function () {\n                that.props.history.push(\"/patient/\" + record.patient_data.id + \"/billing/invoices/return/\")\n            });\n        }\n    };\n\n\n    editModelOpen(record) {\n        let that = this;\n        let created_time = moment().diff(record.created_at, 'minutes');\n\n        if (created_time > OTP_DELAY_TIME) {\n            that.setState({\n                editIncoiceVisible: true,\n                cancelIncoiceVisible: false,\n                returnIncoiceVisible: false,\n                editInvoice: record,\n            });\n\n            let reqData = {\n                practice: this.props.active_practiceId,\n                type: 'Invoice' + ':' + record.invoice_id + ' ' + 'Edit'\n            }\n            let successFn = function (data) {\n                that.setState({\n                    otpSent: true,\n                    patientId: record.patient,\n                    invoiceId: record.id\n                })\n            }\n            let errorFn = function () {\n\n            };\n            postAPI(CANCELINVOICE_GENERATE_OTP, reqData, successFn, errorFn);\n\n        } else {\n            this.setState({\n                editInvoice: record,\n            }, function () {\n                that.props.history.push(\"/patient/\" + record.patient_data.id + \"/billing/invoices/edit/\")\n            });\n        }\n\n    };\n\n\n    cancelModalOpen = (record) => {\n        let that = this;\n        let created_time = moment().diff(record.created_at, 'minutes');\n\n        if (created_time > OTP_DELAY_TIME) {\n\n            that.setState({\n                cancelIncoiceVisible: true,\n                editIncoiceVisible: false,\n                returnIncoiceVisible: false,\n                editInvoice: record\n            });\n\n            let reqData = {\n                practice: this.props.active_practiceId,\n                type: 'Invoice' + ':' + record.invoice_id + ' ' + ' Cancellation'\n            }\n            let successFn = function (data) {\n                that.setState({\n                    otpSent: true,\n                    patientId: record.patient,\n                    invoiceId: record.id\n                })\n            }\n            let errorFn = function () {\n\n            };\n            postAPI(CANCELINVOICE_GENERATE_OTP, reqData, successFn, errorFn);\n\n        } else {\n            that.deleteInvoice(record.patient, record.id)\n        }\n    };\n\n    deleteInvoice(patient, invoice) {\n        let that = this;\n        let reqData = {patient: patient, is_cancelled: true};\n        let successFn = function (data) {\n            displayMessage(SUCCESS_MSG_TYPE, \"Invoice cancelled successfully\")\n            that.loadInvoices();\n        }\n        let errorFn = function () {\n        }\n        putAPI(interpolate(SINGLE_INVOICES_API, [invoice]), reqData, successFn, errorFn);\n    }\n\n    editInvoiceClose = () => {\n        this.setState({\n            editIncoiceVisible: false\n        })\n    };\n    returnInvoiceClose = () => {\n        this.setState({\n            returnIncoiceVisible: false\n        })\n    };\n    cancelInvoiceClose = () => {\n        this.setState({\n            cancelIncoiceVisible: false\n        })\n    };\n\n    render() {\n        let that = this;\n        const drugs = {}\n        if (this.state.drug_catalog) {\n\n            this.state.drug_catalog.forEach(function (drug) {\n                drugs[drug.id] = (drug.name + \",\" + drug.strength)\n            })\n        }\n        const procedures = {}\n        if (this.state.procedure_category) {\n            this.state.procedure_category.forEach(function (procedure) {\n                procedures[procedure.id] = procedure.name;\n            })\n        }\n\n        const taxesdata = {}\n        if (this.state.taxes_list) {\n            this.state.taxes_list.forEach(function (tax) {\n                taxesdata[tax.id] = tax.name;\n            })\n        }\n\n        if (this.props.match.params.id) {\n            return <div>\n                <Switch>\n                    <Route path='/patient/:id/billing/invoices/add'\n                           render={(route) => <AddInvoicedynamic  {...route} {...this.props}\n                                                                  loadData={this.loadInvoices}/>}/>\n                    <Route path='/patient/:id/billing/invoices/edit'\n                           render={(route) => (\n                               this.state.editInvoice ?\n                                   <AddInvoicedynamic {...this.state} {...route} {...this.props}\n                                                      editId={this.state.editInvoice.id}\n                                                      loadData={this.loadInvoices}/> :\n                                   <Redirect to={\"/patient/\" + this.props.match.params.id + \"/billing/invoices\"}/>\n                           )}/>\n                    <Route path='/patient/:id/billing/invoices/return'\n                           render={(route) => (\n                               this.state.editInvoice ?\n                                   <AddReturnInvoice {...this.state} {...route}\n                                                     editId={this.state.editInvoice.id}\n                                                     loadData={this.loadInvoices}/> :\n                                   <Redirect to={\"/patient/\" + this.props.match.params.id + \"/billing/invoices\"}/>\n                           )}/>\n                    <Route>\n                        <div>\n                            <Alert banner showIcon type={\"info\"}\n                                   message={\"The invoices shown are only for the current selected practice!\"}/>\n                            <Affix offsetTop={0}>\n                                <Card bodyStyle={{padding: 0}}\n                                      style={{boxShadow: '0 5px 8px rgba(0, 0, 0, 0.09)'}}\n                                      title={(this.state.currentPatient ? this.state.currentPatient.user.first_name + \" Invoice \" : \"Invoices \") + (this.state.total ? `(Total:${this.state.total})` : '')}\n                                      extra={<Button.Group>\n                                          <Link to={\"/patient/\" + this.props.match.params.id + \"/billing/invoices/add\"}>\n                                              <Button type={\"primary\"}>\n                                                  <Icon type=\"plus\"/>Add\n                                              </Button>\n                                          </Link>\n                                      </Button.Group>}>\n                                </Card>\n                            </Affix>\n                            {this.state.invoices.map(invoice => InvoiceCard(invoice, that))}\n                            <Spin spinning={this.state.loading}>\n                                <Row/>\n                            </Spin>\n                            <InfiniteFeedLoaderButton\n                                loaderFunction={() => this.loadInvoices(this.state.loadMoreInvoice)}\n                                loading={this.state.loading}\n                                hidden={!this.state.loadMoreInvoice}/>\n\n                        </div>\n                    </Route>\n                </Switch>\n            </div>\n        } else {\n            return <div>\n                <Affix offsetTop={0}>\n                    <Card bodyStyle={{padding: 0}}\n                          style={{boxShadow: '0 5px 8px rgba(0, 0, 0, 0.09)'}}\n                          title={(this.state.currentPatient ? this.state.currentPatient.user.first_name + \" Invoice \" : \"Invoice \") + (this.state.total ? `(Total:${this.state.total})` : '')}\n                          extra={<Button.Group>\n                              <Button type={\"primary\"} onClick={() => this.props.togglePatientListModal(true)}>\n                                  <Icon type=\"plus\"/>Add\n                              </Button>\n                          </Button.Group>}>\n                    </Card>\n                </Affix>\n                {this.state.invoices.map(invoice => InvoiceCard(invoice, that))}\n                <Spin spinning={this.state.loading}>\n                    <Row/>\n                </Spin>\n                <InfiniteFeedLoaderButton loaderFunction={() => this.loadInvoices(this.state.loadMoreInvoice)}\n                                          loading={this.state.loading}\n                                          hidden={!this.state.loadMoreInvoice}/>\n            </div>\n        }\n\n    }\n}\n\nexport default Form.create()(PatientInvoices);\n\nfunction invoiceFooter(presc) {\n    if (presc) {\n        return <p>\n            {presc.doctor ? <Tooltip title=\"Doctor\"><Tag color={presc.doctor ? presc.doctor.calendar_colour : null}>\n                <b>{\"prescribed by  \" + presc.doctor.user.first_name} </b>\n            </Tag></Tooltip> : null}\n            {presc.practice ? <Tag style={{float: 'right'}}>\n                <Tooltip title=\"Practice Name\">\n                    <b>{presc.practice.name} </b>\n                </Tooltip>\n            </Tag> : null}\n            {presc.notes ? <p>Notes: {presc.notes}</p> : null}\n        </p>\n\n\n    }\n    return null\n}\n\nfunction InvoiceCard(invoice, that) {\n    let tableObjects = [];\n    const {getFieldDecorator} = that.props.form;\n    if (invoice.reservation) {\n        let medicinesPackages = invoice.reservation_data.medicines.map(item => Object.create({\n            ...item,\n            unit: 1,\n            total: item.final_price,\n            unit_cost: item.price,\n            discount: 0\n        }));\n        let mapper = {\n            \"NORMAL\": {total: 'final_normal_price', tax: \"normal_tax_value\", unit_cost: \"normal_price\"},\n            \"TATKAL\": {total: 'final_tatkal_price', tax: \"tatkal_tax_value\", unit_cost: \"tatkal_price\"}\n        }\n        tableObjects = [...tableObjects, {\n            ...invoice.reservation_data.bed_package,\n            unit: 1,\n            total: invoice.reservation_data.bed_package ? invoice.reservation_data.bed_package[mapper[invoice.reservation_data.seat_type].total] : null,\n            tax_value: invoice.reservation_data.bed_package ? invoice.reservation_data.bed_package[mapper[invoice.reservation_data.seat_type].tax] : null,\n            unit_cost: invoice.reservation_data.bed_package ? invoice.reservation_data.bed_package[mapper[invoice.reservation_data.seat_type].unit_cost] : null\n        }, ...medicinesPackages]\n    }\n    return <Card\n        key={invoice.id}\n        style={{marginTop: 10}}\n        bodyStyle={{padding: 0}}\n        title={<small>{invoice.date ? moment(invoice.date).format('ll') : null}\n            {that.state.currentPatient ? null : <span>\n            <Link to={\"/patient/\" + (invoice.patient_data ? invoice.patient_data.id : null) + \"/billing/invoices\"}>\n                &nbsp;&nbsp; {invoice.patient_data ? invoice.patient_data.user.first_name : null} (ID: {invoice.patient_data && invoice.patient_data.custom_id ? invoice.patient_data.custom_id : invoice.patient_data.id})&nbsp;\n            </Link>, {invoice.patient_data ? invoice.patient_data.gender : null}</span>}\n        </small>}\n        extra={<Dropdown.Button\n            size={\"small\"}\n            style={{float: 'right'}}\n            overlay={<Menu>\n                <Menu.Item key=\"1\">\n                    {/* onClick={() => that.editInvoiceData(invoice)} disabled={!that.props.match.params.id}> */}\n                    <Link\n                        to={\"/patient/\" + (invoice.patient_data ? invoice.patient_data.id : null) + \"/billing/payments/add?invoices=\" + invoice.id}>\n                        <Icon type=\"dollar\"/>\n                        &nbsp;\n                        Pay\n                    </Link>\n                </Menu.Item>\n                <Menu.Divider/>\n                <Menu.Item key=\"2\" onClick={() => that.editModelOpen(invoice)}\n                           disabled={(invoice.practice != that.props.active_practiceId) || invoice.payments_data || invoice.is_cancelled}>\n                    <Icon type=\"edit\"/>\n                    Edit\n                </Menu.Item>\n                <Menu.Item key=\"5\" onClick={() => that.returnModelOpen(invoice)}\n                           disabled={(invoice.practice != that.props.active_practiceId) || invoice.is_cancelled}>\n                    <Icon type=\"redo\"/>\n                    Return\n                </Menu.Item>\n                <Menu.Item key=\"3\" onClick={() => that.cancelModalOpen(invoice)}\n                           disabled={(invoice.practice != that.props.active_practiceId) || invoice.payments_data || invoice.is_cancelled}>\n                    <Icon type=\"delete\"/>\n                    Cancel\n                </Menu.Item>\n                <Menu.Divider/>\n                <Menu.Item key=\"4\">\n                    <Link to={\"/patient/\" + invoice.patient + \"/emr/timeline\"}>\n                        <Icon type=\"clock-circle\"/>\n                        Patient Timeline\n                    </Link>\n                </Menu.Item>\n            </Menu>}>\n            <a onClick={() => that.loadPDF(invoice.id)}><Icon\n                type=\"printer\"/></a>\n        </Dropdown.Button>}>\n        <Row gutter={8}>\n            <Col xs={24} sm={24} md={6} lg={4} xl={4} xxl={4} style={{padding: 10}}>\n                {invoice.is_cancelled ?\n                    <Alert message=\"Cancelled\" type=\"error\" showIcon/> : null}\n                <Divider style={{marginBottom: 0}}>{invoice.invoice_id}</Divider>\n                <Statistic title=\"Paid / Total \"\n                           value={(invoice.payments_data ? invoice.payments_data.toFixed(2) : 0)}\n                           suffix={\"/ \" + invoice.total.toFixed(2)}/>\n            </Col>\n            <Col xs={24} sm={24} md={18} lg={20} xl={20} xxl={20}>\n                {invoice.type == \"Membership Amount.\" ?\n                    <Table\n                        bordered={true}\n                        pagination={false}\n                        columns={columns}\n                        dataSource={[{\n                            inventory: true,\n                            name: \"Membership\",\n                            unit_cost: invoice.total,\n                            unit: 1,\n                            discount_value: 0,\n                            tax_value: 0,\n                            total: invoice.total\n                        }]}\n                        footer={() => invoiceFooter({practice: invoice.practice_data, notes: invoice.notes})}/> :\n                    <Table\n                        bordered={true}\n                        pagination={false}\n                        columns={columns}\n                        dataSource={[...tableObjects, ...invoice.inventory, ...invoice.procedure]}\n                        footer={() => invoiceFooter({practice: invoice.practice_data, notes: invoice.notes})}/>}\n\n            </Col>\n        </Row>\n\n\n        {that.state.cancelIncoiceVisible && that.state.otpSent &&\n        <CancelReturnModal {...that.state} invoice={invoice} cancelInvoiceClose={that.cancelInvoiceClose}{...that.props}\n                           loadInvoices={that.loadInvoices}/>}\n\n        {that.state.editIncoiceVisible && that.state.otpSent &&\n        <EditReturnModal {...that.state} invoice={invoice} editInvoiceClose={that.editInvoiceClose} {...that.props} />}\n        {that.state.returnIncoiceVisible && that.state.otpSent && <InvoiceReturnModal {...that.state} invoice={invoice}\n                                                                                      returnInvoiceClose={that.returnInvoiceClose} {...that.props} />}\n\n    </Card>\n}\n\nconst columns = [{\n    title: 'Treatment & Products',\n    dataIndex: 'drug',\n    key: 'drug',\n    render: (text, record) => (\n        <span> <b>{record.name ? record.name : null}</b>\n                    <br/> {record.doctor_data ?\n                <Tag color={record.doctor_data ? record.doctor_data.calendar_colour : null}>\n                    <b>{\"prescribed by  \" + record.doctor_data.user.first_name} </b>\n                </Tag> : null}\n                </span>)\n}, {\n    title: 'Cost',\n    dataIndex: 'unit_cost',\n    key: 'unit_cost',\n    render: (item, record) => <span>{record.unit_cost ? record.unit_cost.toFixed(2) : null}</span>\n}, {\n    title: 'Unit',\n    dataIndex: 'unit',\n    key: 'unit',\n}, {\n    title: 'Discount',\n    dataIndex: 'discount_value',\n    key: 'discount_value',\n    render: (item, record) => <span>{record.discount_value ? record.discount_value.toFixed(2) : null}</span>\n}, {\n    title: 'Tax',\n    dataIndex: 'tax_value',\n    key: 'tax_value',\n    render: (item, record) => <span>{record.tax_value ? record.tax_value.toFixed(2) : null}</span>\n}, {\n    title: 'Total',\n    dataIndex: 'total',\n    key: 'total',\n    render: item => item ? item.toFixed(2) : null\n}];\n","import React from \"react\";\nimport {\n    Button,\n    Card,\n    Col,\n    Divider,\n    InputNumber,\n    List,\n    Popconfirm,\n    Row,\n    Select,\n    DatePicker,\n    Spin,\n    Input,\n    Form\n} from 'antd';\nimport {displayMessage, getAPI, interpolate, postAPI, putAPI} from \"../../../utils/common\";\nimport {\n    ACCEPT_PAYMENT,\n    AVAILABLE_ADVANCE, BULK_PAYMENT_API,\n    INVOICES_API,\n    PATIENT_PAYMENTS_API,\n    PAYMENT_MODES,\n    SINGLE_PAYMENT_API\n} from \"../../../constants/api\";\nimport {SUCCESS_MSG_TYPE, WARNING_MSG_TYPE} from \"../../../constants/dataKeys\";\nimport moment from \"moment\";\nimport {PROCEDURES} from \"../../../constants/hardData\";\nimport {RAZORPAY_KEY} from \"../../../config/connect\";\n\nclass AddPaymentForm extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            invoicesList: [],\n            invoiceLoading: true,\n            addedInvoiceId: {},\n            addedInvoice: [],\n            paymentModes: [],\n            totalPayableAmount: 0,\n            invoicePayments: {},\n            totalPayingAmount: 0,\n            totalPayingFromAdvanceAmount: 0,\n            selectedPaymentMode: null,\n            availableAdvance: null,\n            advanceToBeSent: 0,\n            selectDate: moment(),\n            loading: false\n        }\n        this.loadEditPyament = this.loadEditPyament.bind(this);\n    }\n\n    componentWillMount() {\n        let that = this;\n        if (that.props.editPayment && that.props.editPayment.invoices) {\n            that.loadEditPyament(that.props.editPayment.invoices);\n            // let addedInvoicesId = {};\n            // let addedInvoice = [];\n            // let totalPayingAmount = 0;\n            // this.props.editPayment.invoices.forEach(function (inv) {\n            //     console.log(\"Item\",inv);\n            //     addedInvoicesId[inv.invoice] = true;\n            //     addedInvoice.push({...inv, ...inv.invoice_data});\n            //     totalPayingAmount += inv.pay_amount + inv.pay_amount_wallet\n            // })\n            // that.setState({\n            //     addedInvoiceId: addedInvoicesId,\n            //     addedInvoice: addedInvoice,\n            //     // totalPayingAmount : totalPayingAmount\n            // }, function () {\n            //     console.log(\"Infinity Loop\");\n            //     that.calculateInvoicePayments();\n            //     that.setPaymentAmount(totalPayingAmount);\n            // })\n\n\n        }\n        let invoiceArray = [];\n        if (this.props.history && this.props.history.location.search) {\n            let pairValueArray = this.props.history.location.search.substr(1).split('&');\n            if (pairValueArray.length) {\n               pairValueArray.forEach(function(item){\n                   if((item.split('='))[0]=='invoices'){\n                       invoiceArray = ((item.split('='))[1]).split(',');\n                   }\n                })\n            }\n        }\n        this.loadInvoices(invoiceArray);\n        this.loadPaymentModes();\n        this.loadAvailableAdvance();\n    }\n\n    loadEditPyament = (editPayment) => {\n        let that = this;\n        let addedInvoicesId = {};\n        let addedInvoice = [];\n        let totalPayingAmount = 0;\n        this.setState(function (prevState) {\n            editPayment.forEach(function (inv) {\n                addedInvoicesId[inv.invoice] = true;\n                addedInvoice.push({...inv, ...inv.invoice_data});\n                totalPayingAmount += inv.pay_amount + inv.pay_amount_wallet;\n            }, function () {\n                that.calculateInvoicePayments();\n                that.setPaymentAmount(totalPayingAmount);\n            });\n            return {\n                addedInvoice: addedInvoice,\n                addedInvoiceId: addedInvoicesId,\n            }\n        });\n    };\n    loadAvailableAdvance = () => {\n        let that = this;\n        let sucessFn = function (data) {\n            that.setState({\n                availableAdvance: data\n            });\n        }\n        let errorFn = function () {\n\n        }\n        getAPI(interpolate(AVAILABLE_ADVANCE, [that.props.match.params.id]), sucessFn, errorFn, {\n            practice_id: this.props.active_practiceId\n        })\n    }\n    loadPaymentModes = () => {\n        var that = this;\n        let successFn = function (data) {\n            that.setState({\n                paymentModes: data,\n                selectedPaymentMode: data.length ? data[0].id : null\n            })\n        };\n        let errorFn = function () {\n        };\n        getAPI(interpolate(PAYMENT_MODES, [this.props.active_practiceId]), successFn, errorFn);\n    }\n    loadInvoices = (invoicesToLoad) => {\n        let that = this;\n        that.setState({\n            invoiceLoading: true\n        });\n        let successFn = function (data) {\n            that.setState(function (prevState) {\n                return {\n                    invoicesList: [...data.results, ...prevState.addedInvoice],\n                    invoiceLoading: false,\n                    loadMoreInvoice: data.next\n                }\n            }, function () {\n                if(invoicesToLoad){\n                    invoicesToLoad.forEach(function(id){\n                        that.addInvoiceToPayments(id)\n                    })\n                }\n                that.calculateInvoicePayments();\n            })\n        }\n        let errorFn = function () {\n            that.setState({\n                invoiceLoading: false\n            })\n\n        }\n        getAPI(INVOICES_API, successFn, errorFn, {\n            page: that.state.loadMoreInvoice || 1,\n            is_cancelled: false,\n            is_pending: true,\n            patient: this.props.match.params.id,\n            practice: this.props.active_practiceId\n        });\n    }\n    addInvoiceToPayments = (id) => {\n        let that = this;\n        this.setState(function (prevState) {\n            let foundInvoice = null;\n            prevState.invoicesList.forEach(function (invoice) {\n                if (invoice.id == id)\n                    foundInvoice = invoice\n            })\n            if (foundInvoice)\n                return {\n                    addedInvoice: [...prevState.addedInvoice, foundInvoice],\n                    addedInvoiceId: {...prevState.addedInvoiceId, [id]: true},\n                    invoicePayments: {...prevState.addedInvoiceId, [id]: 0}\n                }\n            return null;\n        }, function () {\n            that.calculateInvoicePayments()\n        })\n    }\n\n    removeInvoiceToPayments = (id) => {\n        let that = this;\n        this.setState(function (prevState) {\n            let foundInvoice = [];\n            prevState.addedInvoice.forEach(function (invoice) {\n                if (invoice.id != id)\n                    foundInvoice.push(invoice)\n            })\n            if (foundInvoice)\n                return {\n                    addedInvoice: foundInvoice,\n                    addedInvoiceId: {...prevState.addedInvoiceId, [id]: false},\n                }\n            return null\n        }, function () {\n            that.calculateInvoicePayments();\n        })\n    }\n    calculateInvoicePayments = () => {\n        this.setState(function (prevState) {\n            let payable = 0;\n            let totalPayingAmount = prevState.totalPayingAmount + prevState.totalPayingFromAdvanceAmount;\n            let invoicePayments = {};\n            prevState.addedInvoice.forEach(function (invoice) {\n                // invoice.inventory.forEach(function (invent) {\n                //     payable += invent.total\n                // });\n                // invoice.procedure.forEach(function (proc) {\n                //     payable += proc.unit * proc.total\n                // });\n                let invoicePayableAmount = invoice.total - invoice.payments_data;\n                if (invoice.pay_amount)\n                    invoicePayableAmount += invoice.pay_amount;\n                if (invoice.pay_amount_wallet)\n                    invoicePayableAmount += invoice.pay_amount_wallet;\n                payable += invoicePayableAmount;\n                if (totalPayingAmount >= invoicePayableAmount) {\n                    totalPayingAmount -= invoicePayableAmount;\n                    invoicePayments[invoice.id] = invoicePayableAmount;\n                } else {\n                    invoicePayments[invoice.id] = totalPayingAmount;\n                    totalPayingAmount = 0;\n                }\n\n            });\n\n            return {\n                advanceToBeSent: totalPayingAmount,\n                totalPayableAmount: payable.toFixed(2),\n                invoicePayments: invoicePayments\n            }\n        });\n    }\n    setPaymentAmount = (value) => {\n        let that = this;\n        this.setState({\n            totalPayingAmount: value\n        }, function () {\n            that.calculateInvoicePayments();\n        })\n    }\n    setPaymentFromAdvanceAmount = (value) => {\n        let that = this;\n        this.setState({\n            totalPayingFromAdvanceAmount: value\n        }, function () {\n            that.calculateInvoicePayments();\n        })\n    }\n    changeSelectedPaymentMode = (e) => {\n        this.setState({\n            selectedPaymentMode: e\n        })\n    };\n    changeNotes = (e) => {\n        this.setState({\n            notes: e\n        })\n    };\n    selectedDate = (value) => {\n        let that = this;\n        that.setState({\n            selectDate: value,\n        })\n    };\n    handleSubmit = (e) => {\n        if (!this.state.totalPayingAmount) {\n            displayMessage(WARNING_MSG_TYPE, \"Payment Amount of O INR is not allowed.\");\n            return false\n        }\n        this.setState({\n            loading: true\n        })\n        let that = this;\n        let newPayment = {\n            \"invoices\": [],\n            \"bank\": \"\",\n            \"number\": 0,\n            \"is_active\": true,\n            notes: that.state.notes,\n            \"is_cancelled\": false,\n            \"practice\": that.props.active_practiceId,\n            \"patient\": that.props.match.params.id,\n            \"payment_mode\": that.state.selectedPaymentMode,\n            advance_value: that.state.advanceToBeSent,\n            \"is_advance\": !!that.state.advanceToBeSent,\n            \"date\": moment(that.state.selectDate).format(\"YYYY-MM-DD\"),\n        }\n        let reqData = []\n        if (that.state.totalPayingAmount - that.state.totalPayableAmount > 1) {\n            reqData.advance_value = that.state.totalPayingAmount - that.state.totalPayableAmount;\n            reqData.is_advance = true;\n        }\n        let invoices = Object.keys(that.state.invoicePayments);\n        let invoicePayments = {...that.state.invoicePayments};\n        let totalAmountPayingFromAdvance = that.state.totalPayingFromAdvanceAmount;\n        let consumedInvoices = 0;\n        if (totalAmountPayingFromAdvance) {\n            that.state.availableAdvance.data.forEach(function (availableAdvancePayments) {\n                let maxConsumeAmount = totalAmountPayingFromAdvance;\n                if (availableAdvancePayments.advance_value < maxConsumeAmount) {\n                    maxConsumeAmount = availableAdvancePayments.advance_value;\n                }\n                while (totalAmountPayingFromAdvance && invoices.length > consumedInvoices) {\n                    if (invoicePayments[invoices[consumedInvoices]] && maxConsumeAmount > invoicePayments[invoices[consumedInvoices]]) {\n                        availableAdvancePayments.advance_value -= invoicePayments[invoices[consumedInvoices]];\n                        availableAdvancePayments.invoices.push({\n                            \"pay_amount_advance\": invoicePayments[invoices[consumedInvoices]],\n                            \"pay_amount\": invoicePayments[invoices[consumedInvoices]],\n                            \"is_active\": true,\n                            \"invoice\": invoices[consumedInvoices],\n                        });\n                        consumedInvoices++;\n                        totalAmountPayingFromAdvance -= invoicePayments[invoices[consumedInvoices]];\n                        invoicePayments[invoices[consumedInvoices]] -= invoicePayments[invoices[consumedInvoices]];\n                    } else if (invoicePayments[invoices[consumedInvoices]]) {\n                        availableAdvancePayments.invoices.push({\n                            \"pay_amount_advance\": maxConsumeAmount,\n                            \"pay_amount\": maxConsumeAmount,\n                            \"is_active\": true,\n                            \"invoice\": invoices[consumedInvoices],\n                        });\n\n                        invoicePayments[invoices[consumedInvoices]] -= maxConsumeAmount;\n                        totalAmountPayingFromAdvance -= maxConsumeAmount;\n                        availableAdvancePayments.advance_value -= maxConsumeAmount;\n                    }\n                }\n                reqData.push(availableAdvancePayments);\n            });\n        }\n\n        for (; invoices.length > consumedInvoices; consumedInvoices++) {\n            newPayment.invoices.push({\n                \"pay_amount\": invoicePayments[invoices[consumedInvoices]],\n                \"type\": \"Invoice\",\n                \"is_active\": true,\n                \"invoice\": invoices[consumedInvoices],\n            });\n        }\n        if (this.props.editPayment && this.props.editPayment.id)\n            newPayment.id = this.props.editPayment.id;\n        if (newPayment.invoices.length || newPayment.id || newPayment.is_advance) {\n            reqData.push(newPayment);\n        }\n        if (that.state.receivedPayIdFromRazorPay) {\n            newPayment.bank = \"RazorPay\";\n            newPayment.number = that.state.receivedPayIdFromRazorPay;\n        }\n        let successFn = function (data) {\n            that.setState({\n                loading: false\n            });\n            // if (that.props.loadData)\n            that.props.loadData();\n            that.props.history.push(\"/patient/\" + that.props.match.params.id + \"/billing/payments\")\n        };\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            });\n        };\n        postAPI(BULK_PAYMENT_API, reqData, successFn, errorFn)\n    };\n\n    paymentHandler(inv, patientObj, cost,) {\n        if (!cost) {\n            displayMessage(WARNING_MSG_TYPE, \"Payment Amount of O INR is not allowed.\");\n            return false\n        }\n        const that = this;\n        const options = {\n            key: RAZORPAY_KEY,\n            amount: cost.toFixed(2) * 100,\n            name: patientObj.custom_id,\n\n            description: 'Payment for ' + inv,\n            \"prefill\": {\n                \"name\": patientObj.user.first_name,\n                \"email\": patientObj.user.email,\n                \"contact\": patientObj.user.mobile\n            },\n            handler(response) {\n                const paymentId = response.razorpay_payment_id;\n                let reqData = {\n                    \"payment_id\": paymentId,\n                    \"amount\": cost\n                };\n                that.setState({\n                    loading: true\n                });\n                const successFn = function (data) {\n                    displayMessage(SUCCESS_MSG_TYPE, data.detail);\n                    that.setState({\n                        loading: false,\n                        receivedPayIdFromRazorPay: paymentId\n                    }, function () {\n                        that.handleSubmit();\n                    });\n\n                };\n                const errorFn = function () {\n                    that.setState({\n                        loading: false\n                    });\n                    console.log('Request failed');\n                };\n                //Using my server endpoints to capture the payment\n                postAPI(ACCEPT_PAYMENT, reqData, successFn, errorFn);\n            },\n        };\n        const rzp1 = new window.Razorpay(options);\n        rzp1.open();\n    }\n\n    render() {\n        let that = this;\n        return <div>\n            <Spin spinning={this.state.loading} size={\"large\"}>\n                <Row gutter={8}>\n                    <Col xs={24} sm={24} md={16} lg={16} xl={18} xxl={18}>\n                        <Card>\n                            <Row>\n                                <Col span={24}>\n                                    {/*<Statistic title=\"Paid / Total \" value={93} suffix={\"/ \" + invoice.total}/>*/}\n                                    {/*</Col>*/}\n                                    {/*<Col xs={24} sm={24} md={16} lg={16} xl={18} xxl={18}>*/}\n\n                                    <table style={{width: '100%'}}>\n                                        <tbody>\n                                        <tr style={{borderBottom: '2px solid #ccc'}}>\n                                            <td style={{width: '20%'}}>\n                                                <small>INVOICE NO</small>\n                                            </td>\n                                            <td style={{width: '20%'}}>\n                                                <small>PROCEDURE</small>\n                                            </td>\n                                            <td style={{width: '20%', textAlign: 'right'}}>\n                                                <small>DUE(INR)</small>\n                                            </td>\n                                            <td style={{width: '20%', textAlign: 'right'}}>\n                                                <small>PAY NOW(INR)</small>\n                                            </td>\n                                            <td style={{width: '20%', textAlign: 'right'}}>\n                                                <small>DUE AFTER PAYMENT(INR)</small>\n                                            </td>\n                                        </tr>\n\n                                        {this.state.addedInvoice.map(invoice =>\n                                            <tr style={{borderBottom: '2px solid #ccc'}}>\n                                                <td>\n                                                    <Button size={'small'} type={'danger'} shape={'circle'}\n                                                            icon={'close'}\n                                                            style={{position: 'absolute', right: '-35px'}}\n                                                            onClick={() => this.removeInvoiceToPayments(invoice.id)}/>\n                                                    <h3>{invoice.invoice_id}</h3>\n                                                    {invoice.date}\n                                                </td>\n                                                <td>\n                                                    {invoice.procedure.map(proc => proc.procedure_data.name + \", \")}\n                                                    {invoice.inventory.map(proc => proc.inventory_item_data.name + \", \")}\n                                                    {invoice.reservation ? invoice.type + \",\" : null}\n                                                    {invoice.reservation_data && invoice.reservation_data.medicines ? invoice.reservation_data.medicines.map(item => item.name + ',') : null}\n                                                </td>\n                                                <td style={{textAlign: 'right'}}>\n                                                    <b>{(invoice.total - invoice.payments_data + (invoice.pay_amount || 0) + (invoice.pay_amount_wallet || 0)).toFixed(2)}</b>\n                                                </td>\n                                                <td style={{textAlign: 'right'}}>\n                                                    <b>{that.state.invoicePayments[invoice.id]}</b></td>\n                                                <td style={{textAlign: 'right'}}>\n                                                    <b>{(invoice.total - invoice.payments_data + (invoice.pay_amount || 0) + (invoice.pay_amount_wallet || 0) - that.state.invoicePayments[invoice.id]).toFixed(2)}</b>\n                                                </td>\n                                            </tr>\n                                        )}\n                                        </tbody>\n                                    </table>\n                                </Col>\n                            </Row>\n                            <Row style={{borderBottom: '2px dashed #ccc', marginTop: '20px'}}>\n                                <Col span={6}><h3>Total Payable :</h3></Col>\n                                <Col span={6}><h2>{this.state.totalPayableAmount}</h2></Col>\n                            </Row>\n                            <Row gutter={16} style={{marginTop: '20px'}}>\n                                <Col span={12}>\n                                    <Row>\n                                        <Col span={12}>\n                                            <h3>Amount From Advance :<br/>\n                                                <small>Available: {this.state.availableAdvance ? this.state.availableAdvance.max_allowed : 0} INR</small>\n                                            </h3>\n                                        </Col>\n                                        <Col span={12}>\n                                            <InputNumber min={0} step={1}\n                                                         max={this.state.availableAdvance ? this.state.availableAdvance.max_allowed : 0}\n                                                         disabled={!this.state.availableAdvance || !this.state.availableAdvance.max_allowed}\n                                                         value={this.state.totalPayingFromAdvanceAmount}\n                                                         onChange={this.setPaymentFromAdvanceAmount}/>\n                                        </Col>\n                                    </Row>\n                                    <Row>\n                                        <Col span={12}>\n                                            <h3>Pay Now:</h3></Col>\n                                        <Col span={12}>\n                                            <InputNumber min={0} step={1}\n                                                         value={this.state.totalPayingAmount}\n                                                         onChange={this.setPaymentAmount}/>\n                                        </Col>\n                                    </Row>\n\n                                </Col>\n                                <Col span={12}>\n                                    <Input.TextArea row={2} placeholder=\"Notes...\" size={'small'} onChange={(value)=>this.changeNotes(value)}>\n                                        {this.state.notes}\n                                    </Input.TextArea>\n                                    <Select style={{width: '100%'}} value={this.state.selectedPaymentMode}\n                                            onChange={this.changeSelectedPaymentMode}>\n                                        {this.state.paymentModes.map(mode => <Select.Option value={mode.id}\n                                                                                            key={mode.id}>\n                                            {mode.mode}\n                                        </Select.Option>)}\n                                    </Select>\n\n                                    <Row>\n                                        <Col span={6}>\n                                            <br/>\n                                            <span> &nbsp;&nbsp;on&nbsp;&nbsp;</span>\n                                            <DatePicker style={{width: 150}} defaultValue={moment()}\n                                                        onChange={(value) => that.selectedDate(value)}/>\n                                        </Col>\n                                    </Row>\n                                </Col>\n\n\n                            </Row>\n                            <Row>\n                                <Col span={24} style={{align: 'center'}}>\n                                    <Popconfirm\n                                        title={\"Are you sure to take payment of INR \" + this.state.totalPayingAmount + \"?\"}\n                                        onConfirm={() => this.paymentHandler(this.state.addedInvoice.map(inv => inv.invoice_id).join(', '), this.props.currentPatient, this.state.totalPayingAmount)}>\n                                        <Button type={'primary'} style={{margin: 5}} disabled={that.props.editPayment && that.props.editPayment.invoices}>Pay Online & Save Payments</Button>\n                                    </Popconfirm>\n                                    <Popconfirm\n                                        title={\"Are you sure to take payment of INR \" + this.state.totalPayingAmount + \"?\"}\n                                        onConfirm={this.handleSubmit}>\n                                        <Button type={'primary'} style={{margin: 5}}>Only Save Payments</Button>\n                                    </Popconfirm>\n                                </Col>\n                            </Row>\n                        </Card>\n                    </Col>\n                    <Col xs={24} sm={24} md={6} lg={8} xl={6} xxl={6}>\n                        <List loading={this.state.invoiceLoading} dataSource={this.state.invoicesList}\n                              renderItem={invoice => (that.state.addedInvoiceId[invoice.id] ?\n                                  <div/> :\n                                  <Card hoverable\n                                        onClick={() => this.addInvoiceToPayments(invoice.id)}\n                                        style={{marginBottom: '10px'}}>\n                                      <table style={{width: '100%'}}>\n                                          <tbody>\n                                          <tr>\n                                              <td style={{maxWidth: 'calc(100% - 60px)'}}><h4>{invoice.invoice_id}</h4>\n                                              </td>\n                                              <td style={{textAlign: 'right'}}><b>{invoice.date}</b></td>\n                                          </tr>\n                                          </tbody>\n                                      </table>\n                                      <Divider style={{margin: 0}}/>\n                                      <table style={{width: '100%'}}>\n                                          <tbody>\n                                          {invoice.procedure.map(proc => <tr>\n                                              <td style={{maxWidth: 'calc(100% - 60px)'}}>{proc.procedure_data.name}</td>\n                                              <td style={{textAlign: 'right'}}>\n                                                  <b>{(proc.unit * proc.unit_cost).toFixed(2)}</b></td>\n                                          </tr>)}\n                                          {invoice.inventory.map(proc => <tr>\n                                              <td style={{maxWidth: 'calc(100% - 60px)'}}>{proc.inventory_item_data.name}</td>\n                                              <td style={{textAlign: 'right'}}>\n                                                  <b>{(proc.unit * proc.unit_cost).toFixed(2)}</b></td>\n                                          </tr>)}\n                                          {invoice.reservation ?\n                                              <tr>\n                                                  <td style={{maxWidth: 'calc(100% - 60px)'}}>{invoice.type}</td>\n                                                  <td style={{textAlign: 'right'}}>\n                                                      <b>{invoice.reservation_data.bed_package_price ? invoice.reservation_data.bed_package_price.toFixed(2) : null}</b>\n                                                  </td>\n                                              </tr> : null}\n\n                                          {invoice.reservation_data && invoice.reservation_data.medicines ? <>\n                                                  {invoice.reservation_data.medicines.map(item => <tr>\n                                                      <td style={{maxWidth: 'calc(100% - 60px)'}}>{item.name}</td>\n                                                      <td style={{textAlign: 'right'}}><b>{item.final_price.toFixed(2)}</b>\n                                                      </td>\n                                                  </tr>)}\n                                              </>\n                                              : null}\n                                          </tbody>\n                                      </table>\n                                      <Divider style={{margin: 0}}/>\n                                      <table style={{width: '100%'}}>\n                                          <tbody>\n                                          <tr>\n                                              <td style={{maxWidth: 'calc(100% - 60px)'}}>Invoice Amount</td>\n                                              <td style={{textAlign: 'right'}}><b>{invoice.total.toFixed(2)}</b></td>\n                                          </tr>\n                                          <tr>\n                                              <td style={{maxWidth: 'calc(100% - 60px)'}}>Paid Amount</td>\n                                              <td style={{textAlign: 'right'}}>\n                                                  <b>{invoice.payments_data ? invoice.payments_data.toFixed(2) : 0}</b>\n                                              </td>\n                                          </tr>\n                                          <tr>\n                                              <td style={{maxWidth: 'calc(100% - 60px)'}}><b>Amount Due</b></td>\n                                              <td style={{textAlign: 'right'}}>\n                                                  <b>{(invoice.total - invoice.payments_data).toFixed(2)}</b></td>\n                                          </tr>\n                                          </tbody>\n                                      </table>\n\n                                  </Card>)}/>\n                    </Col>\n                </Row>\n            </Spin>\n        </div>\n    }\n}\n\nexport default AddPaymentForm;\n","import React from \"react\";\nimport {Button, Card, Form, Icon, Input, Modal} from \"antd\";\nimport {CANCELINVOICE_RESENT_OTP, CANCELINVOICE_VERIFY_OTP} from \"../../../constants/api\";\nimport {getAPI, postAPI} from \"../../../utils/common\";\nclass EditPaymentModal extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            otpSent:this.props.otpSent,\n            editPaymentVisible: this.props.editPaymentVisible,\n            cancelPaymentVisible:this.props.cancelPaymentVisible,\n\n\n        };\n        this.editPaymentData = this.editPaymentData.bind(this);\n    }\n\n    handleSubmitEditPayment = (e) => {\n        let that = this;\n        e.preventDefault();\n        this.props.form.validateFields((err, values) => {\n            if (!err) {\n                let reqData = {\n                    ...values,\n                    practice: this.props.active_practiceId,\n                }\n                let successFn = function (data) {\n                    that.setState({\n                        editPaymentVisible: false,\n                    });\n                    that.editPaymentData(that.props.editPayment);\n                    that.props.editPaymentClose();\n                };\n                let errorFn = function () {\n\n                };\n                postAPI(CANCELINVOICE_VERIFY_OTP, reqData, successFn, errorFn);\n            }\n        });\n    };\n\n    editPaymentData = (record) => {\n        let that = this;\n        that.props.history.push(\"/patient/\" + record.patient + \"/billing/payments/edit/\");\n    };\n\n\n    sendOTP() {\n        let that = this;\n        let successFn = function (data) {\n\n        };\n        let errorFn = function () {\n\n        };\n        getAPI(CANCELINVOICE_RESENT_OTP, successFn, errorFn);\n    }\n\n    render() {\n        let that = this;\n        const {getFieldDecorator} = that.props.form;\n        return(\n            <Modal\n                visible={(that.state.editPaymentVisible && that.props.editPayment && that.props.editPayment.id == that.props.payment.id)}\n                title=\"Edit Invoice\"\n                footer={null}\n                onOk={that.handleSubmitEditPayment}\n                onCancel={that.props.editPaymentClose}\n            >\n                <Form>\n                    <Form.Item>\n                        {getFieldDecorator('otp', {\n                            rules: [{required: true, message: 'Please input Otp!'}],\n                        })(\n                            <Input prefix={<Icon type=\"user\" style={{color: 'rgba(0,0,0,.25)'}}/>}\n                                   placeholder=\"Otp\"\n                            />,\n                        )}\n                    </Form.Item>\n                    <Form.Item>\n                        {that.props.otpSent ? <a style={{float: 'right'}} type=\"primary\" onClick={that.sendOTP}>\n                            Resend Otp ?\n                        </a> : null}\n                        <Button size=\"small\" type=\"primary\" htmlType=\"submit\" onClick={that.handleSubmitEditPayment}>\n                            Submit\n                        </Button>&nbsp;\n                        <Button size=\"small\" onClick={that.props.editPaymentClose}>\n                            Close\n                        </Button>\n                    </Form.Item>\n                </Form>\n            </Modal>\n        )\n    }\n\n\n}\nexport default Form.create()(EditPaymentModal);\n","import React from \"react\";\nimport {Button, Card, Form, Icon, Input, Modal} from \"antd\";\nimport {\n    CANCELINVOICE_RESENT_OTP,\n    CANCELINVOICE_VERIFY_OTP,\n    SINGLE_INVOICES_API, SINGLE_PAYMENT_API\n} from \"../../../constants/api\";\nimport {displayMessage, getAPI, interpolate, postAPI, putAPI} from \"../../../utils/common\";\nimport {SUCCESS_MSG_TYPE} from \"../../../constants/dataKeys\";\nclass CancelPaymentModal extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            cancelPaymentVisible: this.props.cancelPaymentVisible,\n            otpSent:this.props.otpSent,\n\n        };\n    }\n\n\n    handleSubmitCancelPayment = (e) => {\n        let that = this;\n        e.preventDefault();\n        this.props.form.validateFields((err, values) => {\n            if (!err) {\n                let reqData = {\n                    ...values,\n                    practice: this.props.active_practiceId,\n                }\n                let successFn = function (data) {\n                    that.setState({\n                        cancelPaymentVisible: false,\n                    });\n                    that.deletePayment(that.props.patientId, that.props.paymentId);\n                    that.props.cancelPaymentClose();\n                };\n                let errorFn = function () {\n\n                };\n                postAPI(CANCELINVOICE_VERIFY_OTP, reqData, successFn, errorFn);\n            }\n        });\n    }\n\n\n\n    deletePayment(patient, payment) {\n        let that = this;\n        let reqData = {patient: patient, is_cancelled: true};\n        let successFn = function (data) {\n            displayMessage(SUCCESS_MSG_TYPE, \"Payment cancelled successfully\")\n            that.props.loadPayments();\n        };\n        let errorFn = function () {\n        };\n        putAPI(interpolate(SINGLE_PAYMENT_API, [payment]), reqData, successFn, errorFn);\n\n    }\n\n\n    sendOTP() {\n        let that = this;\n        let successFn = function (data) {\n\n        };\n        let errorFn = function () {\n\n        };\n        getAPI(CANCELINVOICE_RESENT_OTP, successFn, errorFn);\n    }\n\n    render() {\n        let that = this;\n        const {getFieldDecorator} = that.props.form;\n        return(\n            <Modal\n                visible={(that.state.cancelPaymentVisible && that.props.editPayment && that.props.editPayment.id == that.props.payment.id)}\n                title=\"Cancel Payment\"\n                footer={null}\n                onOk={that.handleSubmitCancelPayment}\n                onCancel={that.props.cancelPaymentClose}\n            >\n                <Form>\n                    <Form.Item>\n                        {getFieldDecorator('otp', {\n                            rules: [{required: true, message: 'Please input Otp!'}],\n                        })(\n                            <Input prefix={<Icon type=\"user\" style={{color: 'rgba(0,0,0,.25)'}}/>}\n                                   placeholder=\"Otp\"\n                            />,\n                        )}\n                    </Form.Item>\n                    <Form.Item>\n                        {that.state.otpSent ? <a style={{float: 'right'}} type=\"primary\" onClick={that.sendOTP}>\n                            Resend Otp ?\n                        </a> : null}\n                        <Button size=\"small\" type=\"primary\" htmlType=\"submit\" onClick={that.handleSubmitCancelPayment}>\n                            Submit\n                        </Button>&nbsp;\n                        <Button size=\"small\" onClick={that.props.cancelPaymentClose}>\n                            Close\n                        </Button>\n                    </Form.Item>\n                </Form>\n            </Modal>\n        )\n    }\n\n\n}\nexport default Form.create()(CancelPaymentModal);\n","import React from \"react\";\n\nimport {\n    Alert,\n    Button,\n    Card,\n    Col,\n    Divider,\n    Dropdown,\n    Icon,\n    Menu,\n    Row,\n    Spin,\n    Table,\n    Tag,\n    Tooltip,\n    Form,\n    Input, Statistic\n} from \"antd\";\nimport {displayMessage, getAPI, interpolate, putAPI, postAPI} from \"../../../utils/common\";\nimport {\n    PATIENT_PAYMENTS_API,\n    PAYMENT_PDF,\n    SINGLE_PAYMENT_API,\n    CANCELINVOICE_VERIFY_OTP,\n    CANCELINVOICE_GENERATE_OTP,\n    CANCELINVOICE_RESENT_OTP\n} from \"../../../constants/api\";\nimport moment from \"moment\";\nimport {Link, Redirect} from \"react-router-dom\";\nimport {Route, Switch} from \"react-router\";\nimport AddPaymentForm from \"./AddPaymentForm\";\nimport InfiniteFeedLoaderButton from \"../../common/InfiniteFeedLoaderButton\";\nimport {BACKEND_BASE_URL} from \"../../../config/connect\";\nimport {OTP_DELAY_TIME, SUCCESS_MSG_TYPE} from \"../../../constants/dataKeys\";\nimport {Modal} from \"antd/lib/index\";\nimport EditPaymentModal from \"../payments/EditPaymentModal\";\nimport InvoiceReturnModal from \"../invoices/InvoiceReturnModal\";\nimport CancelPaymentModal from \"./CancelPaymentModal\";\n\nconst confirm = Modal.confirm;\n\nclass PatientPayments extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            payments: [],\n            active_practiceId: this.props.active_practiceId,\n            loading: true,\n            otpSent: false,\n            editPaymentVisible: false,\n            editPayment:null,\n        }\n\n    }\n\n    componentDidMount() {\n        let that=this;\n        this.loadPayments();\n\n    }\n\n\n    loadPayments = (page = 1) => {\n        let that = this;\n        if (that.props.refreshWallet && page==1){\n            that.props.refreshWallet();\n        }\n        this.setState({\n            loading: true\n        });\n        let successFn = function (data) {\n            that.setState(function (prevState) {\n                if (data.current == 1)\n                    return {\n                        payments: [...data.results],\n                        next: data.next,\n                        loading: false\n                    }\n                return {\n                    payments: [...prevState.payments, ...data.results],\n                    next: data.next,\n                    loading: false\n                }\n            })\n        }\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            })\n\n        }\n        let apiParams = {\n            page: page,\n            practice: this.props.active_practiceId,\n        };\n        if (this.props.match.params.id) {\n            apiParams.patient = this.props.match.params.id;\n        }\n        // if (this.props.showAllClinic && this.props.match.params.id) {\n        //     delete (apiParams.practice)\n        // }\n        getAPI(PATIENT_PAYMENTS_API, successFn, errorFn, apiParams);\n    };\n\n\n\n    loadPDF = (id) => {\n        let that = this;\n        let successFn = function (data) {\n            if (data.report)\n                window.open(BACKEND_BASE_URL + data.report);\n        };\n        let errorFn = function () {\n\n        };\n        getAPI(interpolate(PAYMENT_PDF, [id]), successFn, errorFn);\n    };\n\n\n\n\n    editModelOpen = (record) => {\n        let that = this;\n\n        let created_time=moment().diff(record.created_at,'minutes');\n\n        if(created_time >OTP_DELAY_TIME){\n            that.setState({\n                editPaymentVisible: true,\n                cancelPaymentVisible:false,\n                editPayment: record,\n            });\n            let reqData = {\n                practice: this.props.active_practiceId,\n                type: 'Payment' + ':' + record.payment_id + ' ' + 'Edit'\n            }\n            let successFn = function (data) {\n                that.setState({\n                    otpSent: true,\n                    patientId: record.patient,\n                    paymentId: record.payment_id\n                })\n            };\n            let errorFn = function () {\n\n            };\n\n            postAPI(CANCELINVOICE_GENERATE_OTP, reqData, successFn, errorFn);\n        }else{\n            that.setState({\n                editPayment:record,\n            },function () {\n                that.props.history.push(\"/patient/\" + record.patient + \"/billing/payments/edit\")\n            });\n        }\n    };\n\n\n    editPaymentData = (record) => {\n        let that = this;\n        // let id = this.props.match.params.id;\n        that.setState({\n            editPayment: record,\n        }, function () {\n            that.props.history.push(\"/patient/\" + record.patient + \"/billing/payments/edit/\")\n        });\n    };\n    // editPaymentClose = () => {\n    //     this.setState({\n    //         editPaymentVisible: false\n    //     })\n    // };\n    //\n    // handleSubmitEditPayment = (e) => {\n    //     let that = this;\n    //     e.preventDefault();\n    //     this.props.form.validateFields((err, values) => {\n    //         if (!err) {\n    //             let reqData = {\n    //                 ...values,\n    //                 practice: this.props.active_practiceId,\n    //             };\n    //             let successFn = function (data) {\n    //                 that.setState({\n    //                     editPaymentVisible: false,\n    //                 });\n    //                 that.editPaymentData(that.state.editPayment);\n    //\n    //             };\n    //             let errorFn = function () {\n    //\n    //             };\n    //             postAPI(CANCELINVOICE_VERIFY_OTP, reqData, successFn, errorFn);\n    //         }\n    //     });\n    // };\n    // editPaymentData=(record)=>{\n    //     let that =this;\n    //     console.log('\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\">',record);\n    //     that.setState({\n    //         editPayment:record,\n    //     },function () {\n    //         that.props.history.push(\"/patient/\" + record.patient + \"/billing/payments/edit\")\n    //     });\n    //\n    // };\n\n    cancelModalOpen = (record) => {\n        let that = this;\n        let created_time=moment().diff(record.created_at,'minutes');\n\n        if(created_time >OTP_DELAY_TIME){\n\n            that.setState({\n                editPaymentVisible:false,\n                cancelPaymentVisible: true,\n                editPayment: record,\n            });\n            let reqData = {\n                practice: this.props.active_practiceId,\n                type: 'Payment' + ':' + record.payment_id + ' ' + ' Cancellation'\n            }\n            let successFn = function (data) {\n                that.setState({\n                    otpSent: true,\n                    patientId: record.patient,\n                    paymentId: record.id\n                })\n            }\n            let errorFn = function () {\n\n            };\n\n            postAPI(CANCELINVOICE_GENERATE_OTP, reqData, successFn, errorFn);\n        }else{\n            that.deletePayment(record.patient, record.id)\n        }\n    };\n\n    deletePayment(patient, payment) {\n        let that = this;\n        let reqData = {patient: patient, is_cancelled: true};\n        let successFn = function (data) {\n            displayMessage(SUCCESS_MSG_TYPE, \"Payment cancelled successfully\")\n            that.loadPayments();\n        };\n        let errorFn = function () {\n        };\n        putAPI(interpolate(SINGLE_PAYMENT_API, [payment]), reqData, successFn, errorFn);\n\n    }\n\n\n\n\n    editPaymentClose = () => {\n        this.setState({\n            editPaymentVisible: false\n        })\n    };\n    cancelPaymentClose = () => {\n        this.setState({\n            cancelPaymentVisible: false\n        })\n    }\n\n\n    render() {\n        let that = this;\n        const paymentmodes = {}\n        if (this.state.paymentModes) {\n            this.state.paymentModes.forEach(function (mode) {\n                paymentmodes[mode.id] = mode.mode;\n            })\n        }\n\n\n        if (this.props.match.params.id) {\n            return <div>\n                <Switch>\n                    <Route exact path='/patient/:id/billing/payments/add'\n                           render={(route) => <AddPaymentForm {...this.state} {...route} {...this.props}\n                                                              loadData={this.loadPayments}/>}/>\n                    <Route exact path='/patient/:id/billing/payments/edit'\n                           render={(route) => (that.state.editPayment ?\n                               <AddPaymentForm {...this.state} {...route} {...this.props}\n                                               paymentId={this.state.paymentId}\n                                               loadData={this.loadPayments}/> :\n                               <Redirect to={\"/patient/\" + route.match.params.id + \"/billing/payments\"}/>)\n                           }/>\n                    <Route>\n                        <div>\n                            <Alert banner showIcon type={\"info\"}\n                                   message={\"The payments shown are only for the current selected practice!\"}/>\n                            <Card\n                                bodyStyle={{padding: 0}}\n                                title={this.state.currentPatient ? this.state.currentPatient.name + \" Payments\" : \"Payments\"}\n                                extra={<Button.Group>\n                                    <Link\n                                        to={\"/patient/\" + this.props.match.params.id + \"/billing/payments/add\"}><Button><Icon\n                                        type=\"plus\"/>Add</Button></Link>\n                                </Button.Group>}>\n                            </Card>\n                            {this.state.payments.map(payment => PaymentCard(payment, this))}\n                            <Spin spinning={this.state.loading}>\n                                <Row/>\n                            </Spin>\n                            <InfiniteFeedLoaderButton loaderFunction={() => this.loadPayments(that.state.next)}\n                                                      loading={this.state.loading}\n                                                      hidden={!this.state.next}/>\n                        </div>\n                    </Route>\n                </Switch>\n            </div>\n        } else {\n            return <div>\n                <Card\n                    bodyStyle={{padding: 0}}\n                    title={this.state.currentPatient ? this.state.currentPatient.name + \" Payments\" : \"Payments\"}\n                    extra={<Button.Group>\n                        {/* onClick={() => this.props.togglePatientListModal(true)} */}\n                        <Button type={\"primary\"} onClick={() => this.props.togglePatientListModal(true)}>\n                            <Icon type=\"plus\"/>Add\n                        </Button>\n                    </Button.Group>}>\n                </Card>\n                {this.state.payments.map(payment => PaymentCard(payment, this))}\n                <Spin spinning={this.state.loading}>\n                    <Row/>\n                </Spin>\n                <InfiniteFeedLoaderButton loaderFunction={() => this.loadPayments(that.state.next)}\n                                          loading={this.state.loading}\n                                          hidden={!this.state.next}/>\n\n            </div>\n        }\n\n    }\n}\n\nexport default Form.create()(PatientPayments);\n\nconst columns = [{\n    title: 'INVOICE',\n    dataIndex: 'invoice_id',\n    key: 'invoice',\n    render: invoice => <span>{invoice}</span>,\n}, {\n    title: 'Amount Paid',\n    key: 'pay_amount',\n    dataIndex: 'pay_amount',\n    render: value => value.toFixed(2),\n}];\n\nfunction PaymentCard(payment, that) {\n    const {getFieldDecorator} = that.props.form;\n    let advancePay = [];\n    if(payment.is_advance){\n        advancePay.push({\n            invoice_id:\"Advance Payment\",\n            pay_amount : payment.advance_value\n        })\n    }\n    return <Card style={{marginTop: 10}}\n                 key={payment.id}\n                 bodyStyle={{padding: 0}}\n                 title={(payment.patient_data && !that.props.currentPatient ?\n                     <small>{payment.date ? moment(payment.date).format('lll') : null}\n                         <Link to={\"/patient/\" + payment.patient_data.id + \"/billing/payments\"}>\n                             &nbsp;&nbsp; {payment.patient_data.user.first_name} (ID: {payment.patient_data.custom_id?payment.patient_data.custom_id:payment.patient_data.id})&nbsp;\n                         </Link>\n                         <span>, {payment.patient_data.gender}</span></small>\n                     : <small>{payment.created_at ? moment(payment.created_at).format('lll') : null}</small>)}\n                 extra={<Dropdown.Button\n                     size={\"small\"}\n                     style={{float: 'right'}}\n                     overlay={<Menu>\n                         <Menu.Item key=\"2\" onClick={() => that.editModelOpen(payment)}\n                                    disabled={(payment.practice != that.props.active_practiceId)}>\n                             <Icon type=\"edit\"/>\n                             Edit\n                         </Menu.Item>\n                         <Menu.Item key=\"3\" onClick={() => that.cancelModalOpen(payment)}\n                                    disabled={(payment.practice != that.props.active_practiceId) || payment.is_cancelled}>\n                             <Icon type=\"delete\"/>\n                             Cancel\n                         </Menu.Item>\n                         <Menu.Divider/>\n                         <Menu.Item key=\"4\">\n                             <Link to={\"/patient/\" + payment.patient + \"/emr/timeline\"}>\n                                 <Icon type=\"clock-circle\"/>\n                                 Patient Timeline\n                             </Link>\n                         </Menu.Item>\n                     </Menu>}>\n                     <a onClick={() => that.loadPDF(payment.id)}><Icon\n                         type=\"printer\"/></a>\n                 </Dropdown.Button>}>\n        <Row gutter={8}>\n            <Col xs={24} sm={24} md={6} lg={4} xl={4} xxl={4} style={{padding: 10}}>\n                {payment.is_cancelled ?\n                    <Alert message=\"Cancelled\" type=\"error\" showIcon/> : null}\n                <Divider style={{marginBottom: 0}}>{payment.payment_id}</Divider>\n\n            </Col>\n            <Col xs={24} sm={24} md={18} lg={20} xl={20} xxl={20}>\n\n                <Table columns={columns}\n                       pagination={false}\n                       footer={() => PaymentFooter({practice: payment.practice_data,notes:payment.notes})}\n                       dataSource={[...payment.invoices,...advancePay]} rowKey={payment.id}/>\n            </Col>\n        </Row>\n\n        {that.state.editPaymentVisible && that.state.otpSent && <EditPaymentModal {...that.state} payment={payment} editPaymentClose={that.editPaymentClose} editPaymentData={that.editPaymentData} {...that.props} />}\n\n        {that.state.cancelPaymentVisible && that.state.otpSent && <CancelPaymentModal {...that.state} payment={payment} cancelPaymentClose={that.cancelPaymentClose} {...that.props} loadPayments={that.loadPayments} />}\n\n    </Card>\n}\n\nfunction PaymentFooter(presc) {\n    if (presc) {\n        return <p>\n            {presc.doctor ? <Tooltip title=\"Doctor\"><Tag color={presc.doctor ? presc.doctor.calendar_colour : null}>\n                <b>{\"prescribed by  \" + presc.doctor.user.first_name} </b>\n            </Tag></Tooltip> : null}\n            {presc.practice ? <Tag style={{float: 'right'}}>\n                <Tooltip title=\"Practice Name\">\n                    <b>{presc.practice.name} </b>\n                </Tooltip>\n            </Tag> : null}\n            {presc.notes ? <p>Notes: {presc.notes}</p> : null}\n        </p>\n    }\n    return null\n}\n","import React from \"react\";\nimport {\n    Affix,\n    Alert,\n    Card,\n    Col,\n    Divider,\n    Modal,\n    Row,\n    Spin,\n    Statistic,\n    Table,\n    Tag,\n    Tooltip,\n    Form,\n    Menu,\n    Icon,\n    Button,\n    Dropdown,\n    Input,\n} from \"antd\";\nimport {displayMessage, getAPI, interpolate, putAPI, postAPI} from \"../../../utils/common\";\nimport {\n    INVOICE_RETURN_API,\n    DRUG_CATALOG,\n    PROCEDURE_CATEGORY,\n    TAXES,\n    RETURN_INVOICE_PDF_API,\n    SINGLE_RETURN_API,\n    CANCELINVOICE_GENERATE_OTP,\n    CANCELINVOICE_RESENT_OTP,\n    CANCELINVOICE_VERIFY_OTP\n} from \"../../../constants/api\";\nimport moment from \"moment\";\nimport {Route, Switch} from \"react-router\";\nimport InfiniteFeedLoaderButton from \"../../common/InfiniteFeedLoaderButton\";\nimport {Link, Redirect} from \"react-router-dom\";\nimport {BACKEND_BASE_URL} from \"../../../config/connect\";\nimport {SUCCESS_MSG_TYPE, OTP_DELAY_TIME} from \"../../../constants/dataKeys\";\n\nclass ReturnInvoices extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            currentPatient: this.props.currentPatient,\n            active_practiceId: this.props.active_practiceId,\n            returnInvoices: [],\n            drug_catalog: null,\n            procedure_category: null,\n            taxes_list: null,\n            loading: true,\n            cancelReturnIncoiceVisible:false,\n        }\n        this.loadReturnInvoices = this.loadReturnInvoices.bind(this);\n        this.loadDrugCatalog = this.loadDrugCatalog.bind(this);\n        this.loadProcedureCategory = this.loadProcedureCategory.bind(this);\n        this.loadTaxes = this.loadTaxes.bind(this);\n\n    }\n\n    componentDidMount() {\n        this.loadReturnInvoices();\n    }\n\n    loadReturnInvoices(page = 1) {\n        let that = this;\n        if (that.props.refreshWallet && page==1){\n            that.props.refreshWallet();\n        }\n        that.setState({\n            loading: true\n        });\n        let successFn = function (data) {\n            if (data.current == 1) {\n                that.setState({\n                    total: data.count,\n                    returnInvoices: data.results,\n                    loading: false,\n                    loadMoreReturnInvoice: data.next\n                })\n            } else {\n                that.setState(function (prevState) {\n                    return {\n                        total: data.count,\n                        returnInvoices: [...prevState.returnInvoices, ...data.results],\n                        loading: false,\n                        loadMoreReturnInvoice: data.next\n                    }\n                })\n            }\n        }\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            })\n\n        }\n        let apiParams = {\n            page: page,\n            practice: this.props.active_practiceId,\n        };\n        if (this.props.match.params.id) {\n            apiParams.patient = this.props.match.params.id;\n        }\n        // if (this.props.showAllClinic && this.props.match.params.id) {\n        //     delete (apiParams.practice)\n        // }\n        getAPI(INVOICE_RETURN_API, successFn, errorFn, apiParams);\n    }\n\n    loadDrugCatalog() {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                drug_catalog: data,\n            })\n        }\n        let errorFn = function () {\n\n        }\n        getAPI(interpolate(DRUG_CATALOG, [this.props.active_practiceId]), successFn, errorFn)\n    }\n\n    loadProcedureCategory() {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                procedure_category: data,\n            })\n        }\n        let errorFn = function () {\n\n\n        }\n        getAPI(interpolate(PROCEDURE_CATEGORY, [this.props.active_practiceId]), successFn, errorFn);\n    }\n\n    loadTaxes() {\n        var that = this;\n        let successFn = function (data) {\n            that.setState({\n                taxes_list: data,\n            })\n        };\n        let errorFn = function () {\n        };\n        getAPI(interpolate(TAXES, [this.props.active_practiceId]), successFn, errorFn);\n\n    }\n\n   \n\n    loadPDF = (id) => {\n        let that = this;\n        let successFn = function (data) {\n            if (data.report)\n                window.open(BACKEND_BASE_URL + data.report);\n        }\n        let errorFn = function () {\n\n        }\n        getAPI(interpolate(RETURN_INVOICE_PDF_API, [id]), successFn, errorFn);\n    }\n\n\n    cancelModalOpen = (record) => {\n        let that = this;\n        let created_time=moment().diff(record.created_at,'minutes');\n\n        if(created_time >OTP_DELAY_TIME){\n                            \n            that.setState({\n                cancelReturnIncoiceVisible: true,\n                editReturnInvoice: record\n            });\n            let reqData = {\n                practice: this.props.active_practiceId,\n                type: 'Return Invoice' + ':' + record.return_id + ' ' + ' Cancellation'\n            }\n            let successFn = function (data) {\n                that.setState({\n                    otpSent: true,\n                    patientId: record.patient,\n                    returnInvoiceId: record.id\n                })\n            }\n            let errorFn = function () {\n\n            };\n            postAPI(CANCELINVOICE_GENERATE_OTP, reqData, successFn, errorFn);\n        }else{\n            that.deleteReturnInvoice(record.patient, record.id);\n        }\n    };\n\n\n    sendOTP() {\n        let that = this;\n        let successFn = function (data) {\n\n        }\n        let errorFn = function () {\n\n        }\n        getAPI(CANCELINVOICE_RESENT_OTP, successFn, errorFn);\n    }\n\n    cancelReturnInvoiceClose = () => {\n        this.setState({\n            cancelReturnIncoiceVisible: false\n        })\n    }\n    handleSubmitCancelReturnInvoice = (e) => {\n        let that = this;\n        e.preventDefault();\n        this.props.form.validateFields((err, values) => {\n            if (!err) {\n                let reqData = {\n                    ...values,\n                    practice: this.props.active_practiceId,\n                }\n                let successFn = function (data) {\n                    that.setState({\n                        cancelReturnIncoiceVisible: false,\n                    });\n                    that.deleteReturnInvoice(that.state.patientId, that.state.returnInvoiceId)\n                };\n                let errorFn = function () {\n\n                };\n                postAPI(CANCELINVOICE_VERIFY_OTP, reqData, successFn, errorFn);\n            }\n        });\n    }\n    // deleteReturnInvoice(patient ,returnInvoiceId)\n    deleteReturnInvoice(patient ,returnInvoiceId) {\n        let that = this;\n        let reqData = {patient: patient, is_cancelled: true};\n        let successFn = function (data) {\n            displayMessage(SUCCESS_MSG_TYPE, \"Return Invoice cancelled successfully\")\n            that.loadReturnInvoices();\n        }\n        let errorFn = function () {\n        }\n        putAPI(interpolate(SINGLE_RETURN_API, [returnInvoiceId]), reqData, successFn, errorFn);\n     }\n\n    render() {\n        let that = this;\n        const drugs = {}\n        if (this.state.drug_catalog) {\n\n            this.state.drug_catalog.forEach(function (drug) {\n                drugs[drug.id] = (drug.name + \",\" + drug.strength)\n            })\n        }\n        const procedures = {}\n        if (this.state.procedure_category) {\n            this.state.procedure_category.forEach(function (procedure) {\n                procedures[procedure.id] = procedure.name;\n            })\n        }\n\n        const taxesdata = {}\n        if (this.state.taxes_list) {\n            this.state.taxes_list.forEach(function (tax) {\n                taxesdata[tax.id] = tax.name;\n            })\n        }\n\n        if (this.props.match.params.id) {\n            return <div>\n                <Switch>\n                    <Route>\n                        <div>\n                            <Alert banner showIcon type={\"info\"}\n                                   message={\"The invoices return shown are only for the current selected practice!\"}/>\n                            <Affix offsetTop={0}>\n                                <Card bodyStyle={{padding: 0}}\n                                      style={{boxShadow: '0 5px 8px rgba(0, 0, 0, 0.09)'}}\n                                      title={(this.state.currentPatient ? this.state.currentPatient.user.first_name + \" Invoice Return\" : \"Invoices Return \") + (this.state.total ? `(Total:${this.state.total})` : '')}\n                                    //   extra={<Button.Group>\n                                    //       <Link to={\"/patient/\" + this.props.match.params.id + \"/billing/invoices/add\"}>\n                                    //           <Button type={\"primary\"}>\n                                    //               <Icon type=\"plus\"/>Add\n                                    //           </Button>\n                                    //       </Link>\n                                    //   </Button.Group>}>\n                                    >\n                                </Card>\n                            </Affix>\n                            {this.state.returnInvoices.map(invoice => InvoiceCard(invoice, that))}\n                            <Spin spinning={this.state.loading}>\n                                <Row/>\n                            </Spin>\n                            <InfiniteFeedLoaderButton\n                                loaderFunction={() => this.loadInvoices(this.state.loadMoreInvoice)}\n                                loading={this.state.loading}\n                                hidden={!this.state.loadMoreInvoice}/>\n\n                        </div>\n                    </Route>\n                </Switch>\n            </div>\n        } else {\n            return <div>\n                <Affix offsetTop={0}>\n                    <Card bodyStyle={{padding: 0}}\n                          style={{boxShadow: '0 5px 8px rgba(0, 0, 0, 0.09)'}}\n                          title={(this.state.currentPatient ? this.state.currentPatient.user.first_name + \" Invoice Return\" : \"Invoice Return \") + (this.state.total ? `(Total:${this.state.total})` : '')}\n                        //   extra={<Button.Group>\n                        //       <Button type={\"primary\"} onClick={() => this.props.togglePatientListModal(true)}>\n                        //           <Icon type=\"plus\"/>Add\n                        //       </Button>\n                        //   </Button.Group>}>\n                        >\n                    </Card>\n                </Affix>\n                {this.state.returnInvoices.map(invoice => InvoiceCard(invoice, that))}\n                <Spin spinning={this.state.loading}>\n                    <Row/>\n                </Spin>\n                <InfiniteFeedLoaderButton loaderFunction={() => this.loadInvoices(this.state.loadMoreInvoice)}\n                                          loading={this.state.loading}\n                                          hidden={!this.state.loadMoreInvoice}/>\n            </div>\n        }\n\n    }\n}\n\nexport default Form.create()(ReturnInvoices);\n\nfunction invoiceFooter(presc) {\n    if (presc) {\n        return <p>\n            {presc.staff ? <Tooltip title=\"Staff\"><Tag color={presc.staff ? presc.staff_data.calendar_colour : null}>\n                <b>{\"Return by  \" + presc.staff_data.user.first_name} </b>\n            </Tag></Tooltip> : null}\n            {presc.practice ? <Tag style={{float: 'right'}}>\n                <Tooltip title=\"Practice Name\">\n                    <b>{presc.practice_data.name} </b>\n                </Tooltip>\n            </Tag> : null}\n            {presc.notes ? <p>Notes: {presc.notes}</p> : null}\n        </p>\n    }\n    return null\n}\n\nfunction InvoiceCard(invoice, that) {\n    const {getFieldDecorator} = that.props.form;\n   \n    return <Card\n        key={invoice.id}\n        style={{marginTop: 10}}\n        bodyStyle={{padding: 0}}\n        title={<small>{invoice.date ? moment(invoice.date).format('ll') : null}\n            {that.state.currentPatient ? null : <span>\n            <Link to={\"/patient/\" + (invoice.patient_data ? invoice.patient_data.id : null) + \"/billing/return/invoices\"}>\n                &nbsp;&nbsp; {invoice.patient_data ? invoice.patient_data.user.first_name : null} (ID: {invoice.patient_data.custom_id? invoice.patient_data.custom_id :invoice.patient_data.id })&nbsp;\n            </Link>, {invoice.patient_data ? invoice.patient_data.gender : null}</span>}\n        </small>}\n          extra={<Dropdown.Button\n            size={\"small\"}\n            style={{float: 'right'}}\n            overlay={<Menu>\n                {/* <Menu.Item key=\"1\" onClick={() => that.deleteReturnInvoice(invoice)} */}\n                <Menu.Item key=\"1\" onClick={() =>that.cancelModalOpen(invoice)}\n                           disabled={(invoice.practice != that.props.active_practiceId) || invoice.payments_data || invoice.is_cancelled}>\n                    <Icon type=\"delete\"/>\n                    Cancel\n                </Menu.Item>\n            </Menu>}>\n            <a onClick={() => that.loadPDF(invoice.id)}><Icon\n                type=\"printer\"/></a>\n        </Dropdown.Button>}>\n        <Row gutter={8}>\n            <Col xs={24} sm={24} md={6} lg={4} xl={4} xxl={4} style={{padding: 10}}>\n                {invoice.is_cancelled ?\n                    <Alert message=\"Cancelled\" type=\"error\" showIcon/> : null}\n                <Divider style={{marginBottom: 0}}>{invoice.return_id}</Divider>\n                <Statistic title=\"Cash / Return \"\n                           value={(invoice.cash_return ? invoice.cash_return.toFixed(2) : 0)}\n                           suffix={\"/ \" + (invoice.return_value ? invoice.return_value.toFixed(2):0)}/>\n            </Col>\n            <Col xs={24} sm={24} md={18} lg={20} xl={20} xxl={20}>\n               \n                    <Table\n                        bordered={true}\n                        pagination={false}\n                        columns={columns}\n                        dataSource={[...invoice.inventory, ...invoice.procedure]}\n                        footer={() => invoiceFooter({...invoice})}/>\n            </Col>\n        </Row>\n\n        <Modal\n            visible={(that.state.cancelReturnIncoiceVisible && that.state.editReturnInvoice && that.state.editReturnInvoice.id == invoice.id)}\n            title=\"Cancel Return Invoice\"\n            footer={null}\n            onOk={that.handleSubmitCancelReturnInvoice}\n            onCancel={that.cancelReturnInvoiceClose}>\n            <Form>\n                <Form.Item>\n                    {getFieldDecorator('otp', {\n                        rules: [{required: true, message: 'Please input Otp!'}],\n                    })(\n                        <Input prefix={<Icon type=\"user\" style={{color: 'rgba(0,0,0,.25)'}}/>}\n                               placeholder=\"Otp\"\n                        />,\n                    )}\n                </Form.Item>\n                <Form.Item>\n                    {that.state.otpSent ? <a style={{float: 'right'}} type=\"primary\" onClick={that.sendOTP}>\n                        Resend Otp ?\n                    </a> : null}\n                    <Button size=\"small\" type=\"primary\" htmlType=\"submit\" onClick={that.handleSubmitCancelReturnInvoice}>\n                        Submit\n                    </Button>&nbsp;\n                    <Button size=\"small\" onClick={that.cancelReturnInvoiceClose}>\n                        Close\n                    </Button>\n                </Form.Item>\n            </Form>\n        </Modal>\n\n\n       \n    </Card>\n}\n\nconst columns = [{\n    title: 'Treatment & Products',\n    dataIndex: 'drug',\n    key: 'drug',\n    render: (text, record) => (\n        <span> <b>{record.name ? record.name : null}</b>\n                    {/* <br/> {record.staff_data ?\n                <Tag color={record.staff_data ? record.staff_data.calendar_colour : null}>\n                    <b>{\"return by  \" + record.staff_data.user.first_name} </b>\n                </Tag> : null} */}\n                </span>)\n}, {\n    title: 'Cost',\n    dataIndex: 'unit_cost',\n    key: 'unit_cost',\n    render: (item, record) => <span>{record.unit_cost ? record.unit_cost.toFixed(2) : null}</span>\n}, {\n    title: 'Unit',\n    dataIndex: 'unit',\n    key: 'unit',\n}, {\n    title: 'Discount',\n    dataIndex: 'discount_value',\n    key: 'discount_value',\n    render: (item, record) => <span>{record.discount_value ? record.discount_value.toFixed(2) : null}</span>\n}, {\n    title: 'Tax',\n    dataIndex: 'tax_value',\n    key: 'tax_value',\n    render: (item, record) => <span>{record.tax_value ? record.tax_value.toFixed(2) : null}</span>\n}, {\n    title: 'Total',\n    dataIndex: 'total',\n    key: 'total',\n    render: item => item ? item.toFixed(2) : null\n}];\n","import React from \"react\";\n\nexport const patientInvoiceDetailsInString = function (invoiceObj) {\n    let invoiceDetailsString = '';\n    if (invoiceObj.type != \"Invoice\")\n        invoiceDetailsString += invoiceObj.type + \", \";\n    if (invoiceObj.procedure)\n        invoiceObj.procedure.forEach(function (proc) {\n            if (proc.procedure_data)\n                invoiceDetailsString += proc.procedure_data.name + \", \"\n        });\n    if (invoiceObj.inventory)\n        invoiceObj.inventory.forEach(function (proc) {\n            if (proc.inventory_item_data)\n                invoiceDetailsString += proc.inventory_item_data.name + \", \"\n        });\n    if (invoiceObj.reservation)\n        invoiceDetailsString += invoiceObj.type + \",\";\n    if (invoiceObj.reservation_data && invoiceObj.reservation_data.medicines)\n        invoiceObj.reservation_data.medicines.forEach(function (proc) {\n            invoiceDetailsString += proc.name + ','\n        });\n\n    return invoiceDetailsString.trim(',');\n\n}\n\nexport const patientPaymentDetailsInString = function (paymentObj) {\n    let paymentDetailsString = '';\n    if (paymentObj.invoices)\n        paymentObj.invoices.forEach(function (inv) {\n            if (inv.invoice)\n                paymentDetailsString += inv.invoice.invoice_id + \", \"\n        })\n    return paymentDetailsString;\n}\n\nexport const patientReturnInvoiceDetailsInString = function (payObj) {\n    let paymentDetailsString = '';\n    if (payObj.procedure)\n        payObj.procedure.forEach(function (proc) {\n            if (proc.procedure_data)\n                paymentDetailsString += proc.procedure_data.name + \", \"\n        });\n    if (payObj.inventory)\n        payObj.inventory.forEach(function (proc) {\n            paymentDetailsString += proc.name + \", \"\n        });\n    if (payObj.reservation)\n        paymentDetailsString += payObj.type + \",\";\n    if (payObj.reservation_data && payObj.reservation_data.medicines)\n        payObj.reservation_data.medicines.forEach(function (proc) {\n            paymentDetailsString += proc.name + ','\n        });\n\n    return paymentDetailsString.trim(',');\n\n}","import React from \"react\";\nimport {Card, Table, Row, Button, Icon, Checkbox, Col} from \"antd\";\nimport {Link} from \"react-router-dom\";\nimport {BACKEND_BASE_URL} from \"../../../config/connect\";\nimport {getAPI, interpolate} from \"../../../utils/common\";\nimport {PATIENT_LEDGER} from \"../../../constants/api\";\nimport {\n    patientInvoiceDetailsInString,\n    patientPaymentDetailsInString,\n    patientReturnInvoiceDetailsInString\n} from \"../../../utils/patientUtils\";\n\nclass PatientLedgers extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            loading: false,\n            ledger: [],\n            loadingLedger: false,\n            selectedList: {},\n            credit: 0,\n            debit: 0,\n            balance: 0,\n        }\n    }\n\n    componentDidMount() {\n        this.loadPatientLedger();\n    }\n\n    loadPatientLedger = () => {\n        let that = this;\n        if (that.props.refreshWallet){\n            that.props.refreshWallet();\n        }\n        this.setState({\n            loadingLedger: true\n        })\n        let successFn = function (data) {\n            let ledgerData = [];\n            let balance = 0;\n            let totalCredit = 0;\n            let totalDebit = 0;\n            data.forEach(function (dataRow) {\n                let ledgerEntry = {\n                    date: dataRow.date,\n                    type: dataRow.ledger_type\n                };\n                if (dataRow.ledger_type == 'Invoice') {\n                    ledgerEntry.type_id = dataRow.invoice_id;\n                    ledgerEntry.details = patientInvoiceDetailsInString(dataRow);\n                    ledgerEntry.credit = dataRow.total;\n                    ledgerEntry.debit = 0;\n                    ledgerEntry.return = 0;\n                    ledgerEntry.cash_return = 0;\n\n                } else if (dataRow.ledger_type == 'Payment') {\n                    ledgerEntry.type_id = dataRow.payment_id;\n                    ledgerEntry.details = patientPaymentDetailsInString(dataRow);\n                    if (dataRow.return_pay) {\n                        ledgerEntry.credit = 0;\n                        ledgerEntry.debit = 0;\n                        ledgerEntry.return = -1 * (dataRow.total + dataRow.advance_value);\n                    } else {\n                        ledgerEntry.credit = 0;\n                        ledgerEntry.debit = dataRow.total + dataRow.advance_value;\n                        ledgerEntry.return = 0;\n                    }\n                    ledgerEntry.cash_return = 0;\n\n                } else if (dataRow.ledger_type == 'Return') {\n                    ledgerEntry.type_id = dataRow.return_id;\n                    ledgerEntry.details = patientReturnInvoiceDetailsInString(dataRow);\n                    ledgerEntry.credit = dataRow.cash_return;\n                    ledgerEntry.debit = 0;\n                    ledgerEntry.return = dataRow.return_value;\n                    if(dataRow.with_tax == false){\n                        ledgerEntry.credit += dataRow.taxes;\n                    }\n                    ledgerEntry.cash_return = dataRow.cash_return;\n                }\n                balance += ledgerEntry.credit;\n                balance -= ledgerEntry.debit;\n                totalDebit += ledgerEntry.debit;\n                totalCredit += ledgerEntry.credit;\n                ledgerEntry.balance = balance;\n                ledgerData.push(ledgerEntry);\n            });\n            that.setState({\n                loadingLedger: false,\n                credit: totalCredit,\n                debit: totalDebit,\n                balance: balance,\n                ledger: ledgerData\n            })\n        }\n        let errorFn = function () {\n            that.setState({\n                loadingLedger: false\n            })\n        }\n        let apiParams = {\n            practice_id: this.props.active_practiceId\n        };\n        if (this.props.showAllClinic && this.props.match.params.id) {\n            delete (apiParams.practice)\n        }\n        getAPI(interpolate(PATIENT_LEDGER, [that.props.currentPatient.id]), successFn, errorFn, apiParams);\n    }\n\n    ledgerCompleteToggle(id, option) {\n        this.setState(function (prevState) {\n            return {selectedList: {...prevState.selectedList, [id]: !!option}}\n        });\n    }\n\n    loadPDF = (id) => {\n        let that = this;\n        let successFn = function (data) {\n            if (data.report)\n                window.open(BACKEND_BASE_URL + data.report);\n        }\n        let errorFn = function () {\n\n        }\n        // getAPI(interpolate(INVOICE_PDF_API, [id]), successFn, errorFn);\n    }\n\n    render() {\n        const columns = [\n            //     {\n            //     title: '',\n            //     key: 'is_completed',\n            //     render: (text, record) => (record.is_completed ?\n            //         <Icon type=\"check-circle\" theme=\"twoTone\" style={{marginLeft: '8px', fontSize: '20px'}}/> :\n            //         <Checkbox key={record.id}\n            //                   onChange={(e) => this.ledgerCompleteToggle(record.id, e.target.checked)}\n            //                   value={this.state.selectedList[record.id]}/>)\n            // },\n            {\n                title: 'Date',\n                key: 'date',\n                dataIndex: \"date\",\n                width:120\n            }, {\n                title: 'Invoice/ Receipt/ Return No',\n                key: 'type_id',\n                dataIndex: \"type_id\",\n            }, {\n                title: 'Details',\n                key: 'details',\n                dataIndex: \"details\",\n            }, {\n                title: 'Type',\n                key: 'type',\n                dataIndex: \"type\",\n            }, {\n                title: 'Return(INR)',\n                key: 'return',\n                dataIndex: \"return\",\n                align: \"right\",\n                render: value => value.toFixed(2)\n            }, {\n                title: 'Cash Return(INR)',\n                key: 'cash_return',\n                dataIndex: \"cash_return\",\n                align: \"right\",\n                render: value => value.toFixed(2)\n            }, {\n                title: 'Credit(INR)',\n                key: 'credit',\n                dataIndex: \"credit\",\n                align: \"right\",\n                render: value => value.toFixed(2)\n            }, {\n                title: 'Debit(INR)',\n                key: 'debit',\n                dataIndex: \"debit\",\n                align: \"right\",\n                render: value => value.toFixed(2)\n            }, {\n                title: 'Balance(INR)',\n                key: 'balance',\n                dataIndex: \"balance\",\n                align: \"right\",\n                render: value => value.toFixed(2)\n            }];\n        return <Row>\n            <Card\n                title={this.state.currentPatient ? this.state.currentPatient.name + \" Payment Ledger\" : \"Patient Ledgers\"}\n                extra={<Button.Group>\n                    {/*<Button type=\"primary\">*/}\n                    {/*    <Icon type=\"printer\"/>Print billing summary*/}\n                    {/*</Button>*/}\n                    <Link to={\"/patient/\" + this.props.match.params.id + \"/billing/payments\"}> <Button\n                        type=\"primary\">\n                        <Icon type=\"plus\"/>&nbsp;Add Payment</Button>\n                    </Link>\n\n                    <Link to={\"/patient/\" + this.props.match.params.id + \"/billing/invoices\"}> <Button\n                        type=\"primary\">\n                        <Icon type=\"plus\"/>&nbsp;Add Invoice</Button>\n                    </Link>&nbsp;\n\n                    {/*<Button type=\"primary\" onClick={() => this.loadPDF()}>*/}\n                    {/*    <Icon type=\"printer\"/>&nbsp;Print*/}\n                    {/*</Button>&nbsp;*/}\n\n                    {/*<Button type=\"primary\" onClick={this.submitLedgers}>*/}\n                    {/*    <Icon type=\"save\"/>Send Payment Reminder*/}\n                    {/*</Button>*/}\n                </Button.Group>}>\n                <Table loading={this.state.loadingLedger} columns={columns}\n                       dataSource={this.state.ledger} pagination={false}/>\n                <Row style={{marginTop: 20, textAlign: 'center'}}>\n                    <Col span={8}>\n                        <h3>Total Credit: {this.state.credit.toFixed(2)}</h3>\n                    </Col>\n                    <Col span={8}>\n                        <h3>Total Debit: {this.state.debit.toFixed(2)}</h3>\n                    </Col>\n                    <Col span={8}>\n                        <h3>Total\n                            Balance: {this.state.balance < 0 ? (this.state.balance * -1).toFixed(2) + \" (Advance)\" : this.state.balance.toFixed(2)}</h3>\n                    </Col>\n                </Row>\n            </Card>\n        </Row>\n    }\n}\n\nexport default PatientLedgers;\n","import React from \"react\";\nimport {Row, Alert, Card, Col, AutoComplete, List, Avatar, Button, Icon, Spin} from 'antd';\nimport {displayMessage, getAPI, interpolate, makeFileURL, postAPI} from \"../../../utils/common\";\nimport {MERGE_PATIENTS, PATIENT_PROFILE, SEARCH_PATIENT} from \"../../../constants/api\";\nimport {ERROR_MSG_TYPE, SUCCESS_MSG_TYPE} from \"../../../constants/dataKeys\";\n\nexport default class PatientMerge extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            patient_from: null,\n            patient_to: null,\n            loading: false,\n            patientListData: [],\n        }\n\n    }\n\n    searchPatient = (value) => {\n        this.setState({\n            searchPatientString: value\n        })\n        // console.log(e.target.value);\n        let that = this;\n        let successFn = function (data) {\n            if (data) {\n                that.setState({\n                    patientListData: data.results,\n\n                })\n                // console.log(\"list\",that.state.patientListData);\n            }\n        };\n        let errorFn = function () {\n        };\n        if (value){\n            getAPI(interpolate(SEARCH_PATIENT, [value]), successFn, errorFn);\n        }\n\n    };\n    removePatient = (type) => {\n        this.setState({\n            [type]: null\n        })\n    };\n    handlePatientSelect = (event, type) => {\n        console.log(event);\n        if (event) {\n            let that = this;\n            let successFn = function (data) {\n                that.setState({\n                    [type]: data\n\n                });\n                // console.log(\"event\",that.state.patientDetails);\n            };\n            let errorFn = function () {\n            };\n            getAPI(interpolate(PATIENT_PROFILE, [event]), successFn, errorFn);\n        }\n    }\n\n    mergePatient = () => {\n        this.setState({\n            loading: true\n        })\n        let that = this;\n        let reqData = {\n            patient_from: this.state.patient_from.id,\n            patient_to: this.state.patient_to.id\n        }\n        let successFn = function (data) {\n            displayMessage(SUCCESS_MSG_TYPE, \"Patients Merged Successfully!!\");\n            that.setState({\n                loading: false,\n                patient_from: null,\n                patient_to: null\n            });\n        }\n        let errorFn = function () {\n            displayMessage(ERROR_MSG_TYPE, \"Patients Merging Failed!!\");\n            that.setState({\n                loading: false,\n            })\n        }\n        postAPI(MERGE_PATIENTS, reqData, successFn, errorFn);\n    }\n\n    render() {\n        let that = this;\n        return <div>\n\n            <h2>Merge Patients</h2>\n            <Card>\n                <Alert\n                    message={\"Profile details and records of Patient 1 will be moved to Patient 2. You cannot undo this action once done.\"}\n                    type=\"warning\"/>\n                <Spin spinning={this.state.loading}>\n\n                    <Row gutter={16} style={{marginTop: 10}}>\n                        <Col span={12} style={{textAlign: 'center'}}>\n                            <h3>Patient 1</h3>\n                            {this.state.patient_from ?\n                                <Card bordered={false} style={{background: '#ECECEC', textAlign: 'left'}}>\n                                    <Card.Meta\n                                        avatar={(this.state.patient_from.image ? <Avatar src={makeFileURL(this.state.patient_from.image)}/> :\n                                            <Avatar style={{backgroundColor: '#87d068'}}>\n                                                {this.state.patient_from.user.first_name ? this.state.patient_from.user.first_name.charAt(0) :\n                                                    <Icon type=\"user\"/>}\n                                            </Avatar>)}\n\n                                        title={this.state.patient_from.user.first_name}\n                                        description={this.state.patient_from.user.mobile}\n\n                                    />\n\n                                    <Button type=\"primary\" style={{float: 'right'}}\n                                            onClick={() => this.removePatient('patient_from')}>Select Different\n                                        Patient</Button>\n                                </Card> :\n                                <AutoComplete placeholder=\"Patient Name\"\n                                              showSearch\n                                              onSearch={this.searchPatient}\n                                              defaultActiveFirstOption={false}\n                                              showArrow={false}\n                                    // value={this.state.patient_from}\n                                              filterOption={false}\n                                              onChange={this.handleChange}\n                                              onSelect={(e) => this.handlePatientSelect(e, 'patient_from')}>\n                                    {this.state.patientListData.map((option) => <AutoComplete.Option\n                                        value={option.id.toString()}>\n                                        <List.Item style={{padding: 0}}>\n                                            <List.Item.Meta\n                                                avatar={(option.image ? <Avatar src={makeFileURL(option.image)}/> :\n                                                    <Avatar style={{backgroundColor: '#87d068'}}>\n                                                        {option.user.first_name ? option.user.first_name.charAt(0) :\n                                                            <Icon type=\"user\"/>}\n                                                    </Avatar>)}\n                                                title={option.user.first_name + \" (\" + option.user.id + \")\"}\n                                                description={<small>{option.user.mobile}</small>}\n                                            />\n\n                                        </List.Item>\n                                    </AutoComplete.Option>)}\n                                </AutoComplete>}\n                            {/*{this.state.patient_from ? <List.Item style={{padding: 0}}>*/}\n                            {/*<List.Item.Meta*/}\n                            {/*avatar={<Avatar*/}\n                            {/*src=\"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png\"/>}*/}\n                            {/*title={that.state.patient_from.user.first_name + \" (\" + that.state.patient_from.user.id + \")\"}*/}\n                            {/*description={<small>{that.state.patient_from.user.mobile}</small>}*/}\n                            {/*/>*/}\n\n                            {/*</List.Item>:null}*/}\n                        </Col>\n                        <Col span={12} style={{textAlign: 'center'}}>\n                            <h3>Patient 2</h3>\n                            {this.state.patient_to ?\n                                <Card bordered={false} style={{background: '#ECECEC', textAlign: 'left'}}>\n                                    <Card.Meta\n                                        avatar={(this.state.patient_to.image ? <Avatar src={makeFileURL(this.state.patient_to.image)}/> :\n                                            <Avatar style={{backgroundColor: '#87d068'}}>\n                                                {this.state.patient_to.user.first_name ? this.state.patient_to.user.first_name.charAt(0) :\n                                                    <Icon type=\"user\"/>}\n                                            </Avatar>)}\n                                        title={this.state.patient_to.user.first_name}\n                                        description={this.state.patient_to.user.mobile}\n\n                                    />\n\n                                    <Button type=\"primary\" style={{float: 'right'}}\n                                            onClick={() => this.removePatient('patient_to')}>Select Different\n                                        Patient</Button>\n                                </Card> :\n                                <AutoComplete placeholder=\"Patient Name\"\n                                              showSearch\n                                              onSearch={this.searchPatient}\n                                              defaultActiveFirstOption={false}\n                                              showArrow={false}\n                                    // value={this.state.patient_from}\n                                              filterOption={false}\n                                              onChange={this.handleChange}\n                                              onSelect={(e) => this.handlePatientSelect(e, 'patient_to')}>\n                                    {this.state.patientListData.map((option) => <AutoComplete.Option\n                                        value={option.id.toString()}>\n                                        <List.Item style={{padding: 0}}>\n                                            <List.Item.Meta\n                                                avatar={(option.image ? <Avatar src={makeFileURL(option.image)}/> :\n                                                    <Avatar style={{backgroundColor: '#87d068'}}>\n                                                        {option.user.first_name ? option.user.first_name.charAt(0) :\n                                                            <Icon type=\"user\"/>}\n                                                    </Avatar>)}\n                                                title={option.user.first_name + \" (\" + option.user.id + \")\"}\n                                                description={<small>{option.user.mobile}</small>}\n                                            />\n\n                                        </List.Item>\n                                    </AutoComplete.Option>)}\n                                </AutoComplete>}\n                            {/*{this.state.patient_to ? <List.Item style={{padding: 0}}>*/}\n                            {/*<List.Item.Meta*/}\n                            {/*avatar={<Avatar*/}\n                            {/*src=\"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png\"/>}*/}\n                            {/*title={that.state.patient_to.user.first_name + \" (\" + that.state.patient_to.user.id + \")\"}*/}\n                            {/*description={<small>{that.state.patient_to.user.mobile}</small>}*/}\n                            {/*/>*/}\n\n                            {/*</List.Item>:null}*/}\n                        </Col>\n                        <Col span={24} style={{textAlign: 'center', marginTop: 30}}>\n                            <Button disabled={this.state.loading || !this.state.patient_from || !this.state.patient_to}\n                                    type={\"primary\"} onClick={this.mergePatient}>\n                                <Icon type={\"plus\"}/>Merge Patients\n                            </Button>\n                        </Col>\n                    </Row>\n\n                </Spin>\n            </Card>\n        </div>\n    }\n}\n","import React from \"react\";\nimport {Button, Card, Icon} from 'antd';\n\nexport default class PatientRequiredNoticeCard extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n\n    render() {\n        let that = this;\n        return <Card style={{textAlign: 'center'}}>\n            <h2> Please select patient to further continue !!</h2>\n            {this.props.togglePatientListModal ?\n                <Button type={\"primary\"} onClick={() => that.props.togglePatientListModal(true)}><Icon\n                    type={\"user\"}/> Select Patient</Button> : null}\n        </Card>\n    }\n}\n","import React from \"react\";\nimport {Route} from \"react-router\";\nimport {\n    Form,\n    Icon,\n    Input,\n    Button,\n    Checkbox,\n    Card,\n    DatePicker,\n    Radio,\n    Row,\n    Col,\n    Select,\n    TimePicker,\n    Affix,\n    Dropdown,\n    Menu\n} from 'antd';\nimport {Redirect, Link} from 'react-router-dom'\nimport {postAPI, interpolate, displayMessage} from \"../../../utils/common\";\nimport {NOTES} from \"../../../constants/hardData\";\nimport {MEDICAL_CERTIFICATE_API} from \"../../../constants/api\";\nimport {SUCCESS_MSG_TYPE ,ERROR_MSG_TYPE} from \"../../../constants/dataKeys\";\nimport moment from 'moment';\nimport {loadDoctors} from \"../../../utils/clinicUtils\";\n\n\nconst {TextArea} = Input;\nconst {Option} = Select;\n\nclass PatientMedicalCertificate extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            redirect: false,\n            excused_duty_checked: false,\n            fit_light_duty_checked: false,\n            attendance_checked: false,\n            startDate: this.props.value,\n            endDate: new Date(),\n            proof_attendance_from: null,\n            days: 0,\n            practiceDoctors: [],\n            selectedDoctor: {},\n            selectedDate: moment(),\n            value: ''\n        }\n        this.handleChangeStart = this.handleChangeStart.bind(this);\n        this.handleChangeEnd = this.handleChangeEnd.bind(this);\n    }\n\n    componentDidMount() {\n        loadDoctors(this);\n    }\n\n    changeRedirect() {\n        var redirectVar = this.state.redirect;\n        this.setState({\n            redirect: !redirectVar,\n        });\n    }\n\n    handleCheck = (e) => {\n        this.setState({\n            excused_duty_checked: !this.state.excused_duty_checked\n        });\n    }\n    handleLighDutyCheck = (e) => {\n        this.setState({\n            fit_light_duty_checked: !this.state.fit_light_duty_checked\n        });\n    }\n    onChangeHandle = (e) => {\n        console.log(\"handlechanged\",e);\n        this.setState({\n            value: e.target.value,\n        });\n    }\n    handleAttendanceCheck = (e) => {\n        this.setState({\n            attendance_checked: !this.state.attendance_checked\n        });\n    }\n    handleChangeStart = (date) => {\n        this.setState({\n            startDate: date\n        });\n\n    }\n\n    handleChangeEnd(date) {\n        this.setState({\n            endDate: date\n        });\n    }\n\n    // totalDays(){\n    //     let {startDate, endDate} = this.state;\n    //     let amount = endDate.diff(startDate ,\"days\");\n    //     this.setState({\n    //     days: amount\n    //     });\n    // }\n\n    onChange = (timeString) => {\n        this.setState({\n            proof_attendance_from: timeString\n        });\n    }\n    selectedDate = (date) => {\n        this.setState({\n            selectedDate: date\n        })\n    }\n    selectDoctor = (doctor) => {\n        this.setState({\n            selectedDoctor: doctor\n        })\n    }\n    handleSubmit = (e) => {\n        let that = this;\n        e.preventDefault();\n        this.props.form.validateFields((err, values) => {\n            \n            if(values.excused_duty || values.fit_light_duty || values.proof_attendance){\n                if (!err) {\n                    let reqData = {\n                        ...values,\n                        doctor: that.state.selectedDoctor.id,\n                        practice: that.props.active_practiceId,\n                        date: that.state.selectedDate && moment(that.state.selectedDate).isValid() ? that.state.selectedDate.format('YYYY-MM-DD') : null,\n                        excused_duty_from: moment(values.excused_duty_from).format(\"YYYY-MM-DD\"),\n                        excused_duty_to: moment(values.excused_duty_to).format(\"YYYY-MM-DD\"),\n                        fit_light_duty_from: moment(values.fit_light_duty_from).format(\"YYYY-MM-DD\"),\n                        fit_light_duty_to: moment(values.fit_light_duty_to).format(\"YYYY-MM-DD\"),\n                        proof_attendance_date: moment(values.proof_attendance_date).format(\"YYYY-MM-DD\"),\n                        proof_attendance_from: moment(values.proof_attendance_from).format('LT'),\n                        proof_attendance_to: moment(values.proof_attendance_to).format('LT'),\n                        patient: that.props.match.params.id,\n                        is_active: true,\n                        valid_court:false,\n                        invalid_court:false,\n                        no_mention:false\n                    };\n                    if(values.group)\n                        reqData[values.group] = true\n                    delete reqData.group;\n                    let successFn = function (data) {\n                        displayMessage(SUCCESS_MSG_TYPE, \"Medical Certificate Generated.\");\n                        that.props.history.push('/patient/' + that.props.match.params.id + '/emr/files');\n                    }\n                    let errorFn = function () {\n                        that.setState({});\n                    }\n                    postAPI(interpolate(MEDICAL_CERTIFICATE_API, [this.props.currentPatient.id]), reqData, successFn, errorFn);\n                }\n            }else{\n               displayMessage(ERROR_MSG_TYPE,\"Please select at least one of the above options\");\n            }\n           \n        });\n    }\n\n    render() {\n        const {getFieldDecorator} = this.props.form;\n        const formItemLayout = {\n            labelCol: {\n                xs: {span: 24},\n                sm: {span: 8},\n                md: {span: 8},\n                lg: {span: 8},\n            },\n            wrapperCol: {\n                xs: {span: 24},\n                sm: {span: 16},\n                md: {span: 16},\n                lg: {span: 16},\n            },\n        };\n        let that = this;\n        const radioOption = NOTES.map((option) => <Radio value={option.value}>{option.label}</Radio>)\n        return (<Form onSubmit={this.handleSubmit} {...formItemLayout}>\n                <Card title=\"ADD MEDICAL LEAVE CERTIFICATE\"\n                      extra={<Button.Group>\n                          <Button type=\"primary\" htmlType=\"submit\">Save Certificate</Button>\n                      </Button.Group>}>\n\n\n                    <Form.Item>\n                        {getFieldDecorator('excused_duty', {})(\n                            (<Checkbox onClick={this.handleCheck} defaultChecked={this.state.excused_duty_checked}>Excused\n                                from duty</Checkbox>),\n                        )}\n                    </Form.Item>\n                    {this.state.excused_duty_checked ?\n                        <Row>\n                            <Col span={6} offset={6}>\n                                <Form.Item label=\"From\">\n                                    {getFieldDecorator('excused_duty_from', {})\n                                    (\n                                        <DatePicker/>\n                                    )\n                                    }\n                                </Form.Item>\n\n                                <Form.Item label=\"till\">\n                                    {getFieldDecorator('excused_duty_to', {})\n                                    (\n                                        <DatePicker/>\n                                    )\n                                    }\n                                </Form.Item>\n\n                            </Col>\n                            <Col span={6}>\n                                <Form.Item>\n                                    {getFieldDecorator('excused_duty_from_session', {\n                                        initialValue: \"Morning\"\n                                    })\n                                    (\n                                        <Select>\n                                            <Option value=\"Morning\">Morning Session</Option>\n                                            <Option value=\"Morning\">Evening Session</Option>\n                                        </Select>\n                                    )}\n\n                                </Form.Item>\n\n                                <Form.Item>\n                                    {getFieldDecorator('excused_duty_to_session', {\n                                        initialValue: \"Morning\"\n                                    })\n                                    (\n                                        <Select>\n                                            <Option value=\"Morning\">Morning Session</Option>\n                                            <Option value=\"Morning\">Evening Session</Option>\n                                        </Select>\n                                    )}\n                                </Form.Item>\n\n                            </Col>\n\n                        </Row>\n\n                        : null}\n\n\n                    <Form.Item>\n                        {getFieldDecorator('fit_light_duty', {})(\n                            (<Checkbox onClick={this.handleLighDutyCheck}\n                                       defaultChecked={this.state.fit_light_duty_checked}>Fit for light\n                                duty</Checkbox>),\n                        )}\n                    </Form.Item>\n\n                    {this.state.fit_light_duty_checked ?\n                        <Row>\n                            <Col>\n                                <Form.Item label=\"From\">\n                                    {getFieldDecorator('fit_light_duty_from', {})\n                                    (\n                                        <DatePicker/>\n                                    )\n                                    }\n\n                                </Form.Item>\n\n                                <Form.Item label=\"till\">\n                                    {getFieldDecorator('fit_light_duty_to', {})\n                                    (\n                                        <DatePicker/>\n                                    )\n                                    }\n\n                                </Form.Item>\n                            </Col>\n\n                        </Row>\n                        : null\n                    }\n\n                    <Form.Item>\n                        {getFieldDecorator('proof_attendance', {})(\n                            (<Checkbox onClick={this.handleAttendanceCheck}\n                                       defaultChecked={this.state.attendance_checked}>Proof of attendance at\n                                practice</Checkbox>),\n                        )}\n                    </Form.Item>\n                    {this.state.attendance_checked ?\n                        <Row>\n                            <Form.Item label=\"on\">\n                                {getFieldDecorator('proof_attendance_date', {})\n                                (<DatePicker/>)\n                                }\n                            </Form.Item>\n                            <Col span={6} offset={6}>\n                                <Form.Item label=\"From\">\n                                    {getFieldDecorator('proof_attendance_from', {})\n                                    (\n                                        <TimePicker use12Hours format=\"h:mm A\"/>\n                                    )\n                                    }\n\n                                </Form.Item>\n                                <Form.Item label=\"till\">\n                                    {getFieldDecorator('proof_attendance_to', {})\n                                    (\n                                        <TimePicker use12Hours format=\"h:mm A\"/>\n                                    )\n                                    }\n                                </Form.Item>\n                            </Col>\n                        </Row>\n\n\n                        : null}\n\n\n                    <Form.Item label=\"Notes\">\n                        {getFieldDecorator('notes', {})(\n                            (<TextArea/>),\n                        )}\n                    </Form.Item>\n\n\n                    <Form.Item>\n                        {getFieldDecorator('group', {initialValue:'no_mention'})(\n                            <Radio.Group>\n                                {radioOption}\n                            </Radio.Group>\n                        )}\n\n                    </Form.Item>\n                    <Affix offsetBottom={0}>\n                        <Card>\n                            <span>Issued by &nbsp;&nbsp;</span>\n                            <Dropdown placement=\"topCenter\" overlay={<Menu>\n                                {this.state.practiceDoctors.map(doctor =>\n                                    <Menu.Item key=\"0\">\n                                        <a onClick={() => this.selectDoctor(doctor)}>{doctor.user.first_name}</a>\n                                    </Menu.Item>)}\n                            </Menu>} trigger={['click']}>\n                                <a className=\"ant-dropdown-link\" href=\"#\">\n                                    <b>\n                                        {this.state.selectedDoctor.user ? this.state.selectedDoctor.user.first_name : 'No DOCTORS Found'}\n                                    </b>\n                                </a>\n                            </Dropdown>\n                            <span> &nbsp;&nbsp;on&nbsp;&nbsp;</span>\n                            <DatePicker value={this.state.selectedDate}\n                                        onChange={(value) => this.selectedDate(value)} format={\"DD-MM-YYYY\"}\n                                        allowClear={false}/>\n                        </Card>\n                    </Affix>\n\n                </Card>\n            </Form>\n\n        );\n    }\n}\n\nexport default Form.create()(PatientMedicalCertificate);\n","import React from \"react\";\nimport {\n    Alert,\n    AutoComplete,\n    Avatar,\n    Button,\n    Card,\n    Col,\n    DatePicker,\n    Divider,\n    Form,\n    Icon,\n    Input,\n    InputNumber,\n    List,\n    message,\n    Popconfirm,\n    Radio,\n    Row,\n    Select,\n    Table,\n    Upload\n} from \"antd\";\nimport {displayMessage, getAPI, interpolate, makeFileURL, makeURL, postAPI} from \"../../../utils/common\";\nimport {\n    BED_PACKAGES,\n    BOOK_SEAT,\n    CHECK_SEAT_AVAILABILITY,\n    DISEASE_LIST,\n    FILE_UPLOAD_API,\n    MEDICINE_PACKAGES,\n    PATIENT_PROFILE,\n    PAYMENT_MODES,\n    SEARCH_PATIENT\n} from \"../../../constants/api\";\nimport moment from \"moment\";\n// import {Booking_Type} from \"../../constants/hardData\";\nimport {SUCCESS_MSG_TYPE} from \"../../../constants/dataKeys\";\n\nconst {Meta} = Card;\n\nclass BedBookingForm extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            packages: [],\n            totalPayableAmount: 0,\n            totalPayingAmount: 0,\n            patientList: [],\n            paymentModes: [],\n            medicinePackage: [],\n            medicineItem: [],\n            diseases: []\n            //choosePkg:{},\n\n\n        }\n    }\n\n    componentDidMount() {\n        if (this.props.currentPatient)\n            this.handlePatientSelect(this.props.currentPatient.id);\n        this.loadPackages();\n        this.loadPaymentModes();\n        this.loadMedicinePackages();\n        this.loadDiseases();\n    }\n\n    loadPackages = () => {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                packages: data\n            })\n        }\n        let errorFn = function () {\n        }\n        getAPI(interpolate(BED_PACKAGES, [this.props.active_practiceId]), successFn, errorFn);\n\n    }\n    loadDiseases = () => {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                diseases: data\n            })\n        }\n        let errorFn = function () {\n        }\n        getAPI(interpolate(DISEASE_LIST, [this.props.active_practiceId]), successFn, errorFn);\n\n    }\n\n    loadMedicinePackages() {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                medicinePackage: data,\n            })\n        }\n        let errorFn = function () {\n\n        }\n        getAPI(interpolate(MEDICINE_PACKAGES, [this.props.active_practiceId]), successFn, errorFn);\n    }\n\n    searchPatient = (value) => {\n        let that = this;\n        let successFn = function (data) {\n            if (data) {\n                that.setState({\n                    patientList: data,\n                    ptr: data,\n\n                })\n            }\n        };\n        let errorFn = function () {\n        };\n        getAPI(interpolate(SEARCH_PATIENT, [value]), successFn, errorFn);\n    }\n\n    handlePatientSelect = (event) => {\n        if (event) {\n            let that = this;\n            let successFn = function (data) {\n                that.setState({\n                    patientDetails: data\n                });\n            };\n            let errorFn = function () {\n            };\n            getAPI(interpolate(PATIENT_PROFILE, [event]), successFn, errorFn);\n        }\n    }\n\n    loadPaymentModes() {\n        var that = this;\n        let successFn = function (data) {\n            that.setState({\n                paymentModes: data,\n            })\n        };\n        let errorFn = function () {\n        };\n        getAPI(interpolate(PAYMENT_MODES, [this.props.active_practiceId]), successFn, errorFn);\n    }\n\n    checkBedStatus = (type, value) => {\n        let that = this;\n        that.handleRoomType();\n        this.setState({\n            [type]: value\n        }, function () {\n\n            let successFn = function (data) {\n                that.setState({\n                    availabilitySeatTatkal: data.TATKAL,\n                    availabilitySeatNormal: data.NORMAL,\n                });\n                let currentSelected = that.props.form.getFieldValue('seat_type');\n                if (!data[currentSelected]) {\n                    that.props.form.setFieldsValue({\n                        seat_type: null\n                    })\n                    that.calculateTotalAmount();\n                }\n            }\n            that.calculateTotalAmount();\n            let errorFn = function () {\n\n            }\n            let {from_date, bed_package} = that.state;\n            if (from_date && bed_package) {\n                let to_date = null;\n                that.state.packages.forEach(function (pkgObj) {\n                    if (bed_package == pkgObj.id) {\n                        to_date = moment(from_date).add(pkgObj.no_of_days - 1, 'day')\n                    }\n                });\n                if (from_date && to_date && bed_package) {\n                    let {setFieldsValue} = that.props.form;\n                    setFieldsValue({\n                        to_date: to_date\n                    })\n                    getAPI(interpolate(CHECK_SEAT_AVAILABILITY, [that.props.active_practiceId]), successFn, errorFn, {\n                        start: moment(from_date).format('YYYY-MM-DD'),\n                        end: moment(to_date).format('YYYY-MM-DD'),\n                        bed_package: bed_package\n                    })\n                }\n            }\n        });\n    }\n\n\n    handleSubmit = (e) => {\n        this.setState({\n            loading: true\n        })\n        let that = this;\n        e.preventDefault();\n        this.props.form.validateFields((err, values) => {\n            if (!err) {\n                let reqData = {\n                    ...values,\n                    to_date: moment(values.to_date).format('YYYY-MM-DD'),\n                    from_date: moment(values.from_date).format('YYYY-MM-DD'),\n                    paid: false,\n                    total_price: this.state.totalPayableAmount,\n                    date: moment().format('YYYY-MM-DD'),\n                    total_tax: this.state.tax,\n                    patient: this.state.patientDetails.id,\n                    rest_diseases: values.rest_diseases ? values.rest_diseases.join(',') : null,\n                    report_upload: values.file && values.file.file.response ? values.file.file.response.image_path : null\n                };\n                // delete reqData.medicines;\n                //\n                // if (values.medicines){\n                //     values.medicines.forEach(function (item) {\n                //         let medicines={medicineId:item};\n                //     })\n                //\n                // }\n\n                let successFn = function (data) {\n                    displayMessage(SUCCESS_MSG_TYPE, \"Saved Successfully!!\");\n                    that.props.history.goBack();\n                    if (that.props.loadData)\n                        that.props.loadData();\n                };\n                let errorFn = function () {\n\n                };\n\n                postAPI(interpolate(BOOK_SEAT, [this.props.active_practiceId]), reqData, successFn, errorFn);\n            }\n        })\n\n\n    };\n    handleClick = (e) => {\n        this.setState({\n            patientDetails: null\n        })\n\n    };\n    handleRoomType = (name, value) => {\n        let that = this;\n        this.setState({\n            [name]: value,\n        }, function () {\n            that.calculateTotalAmount();\n        });\n\n    }\n    calculateTotalAmount = () => {\n        let that = this;\n        that.setState(function (prevSate) {\n            let payAmount = 0;\n            let total_tax = 0;\n            let bedPkg = {};\n            let medicinePkg = [];\n            let total_medicine_price = 0;\n            prevSate.packages.forEach(function (item) {\n                if (prevSate.bed_package == item.id) {\n                    if (prevSate.seat_type == 'NORMAL') {\n                        payAmount = item.normal_price + item.normal_tax_value;\n                        total_tax += item.normal_tax_value\n                        bedPkg = {\n                            ...item,\n                            type: \"BED\",\n                            price_with_tax: payAmount,\n                            tax: item.normal_tax_value,\n                            price: item.normal_price,\n                            _id:Math.random().toFixed(7),\n                        };\n                        medicinePkg = [bedPkg];\n                    }\n                    if (prevSate.seat_type == 'TATKAL') {\n                        payAmount = item.tatkal_price + item.tatkal_tax_value;\n                        total_tax += item.tatkal_tax_value\n                        bedPkg = {\n                            ...item,\n                            type: \"BED\",\n                            price_with_tax: payAmount,\n                            tax: item.tatkal_tax_value,\n                            price: item.tatkal_price,\n                            _id:Math.random().toFixed(7),\n                        };\n                        medicinePkg = [bedPkg];\n                    }\n                }\n            });\n\n            prevSate.medicinePackage.forEach(function (item) {\n                prevSate.medicineItem.forEach(function (ele) {\n                    if (item.id == ele) {\n                        total_medicine_price += item.final_price;\n                        total_tax += item.tax_value;\n                        medicinePkg = [...medicinePkg, {\n                            ...item,\n                            type: \"MEDICINE\",\n                            price_with_tax: item.final_price,\n                            tax: item.tax_value,\n                            _id:Math.random().toFixed(7),\n                        }]\n\n                    }\n                });\n            });\n            return {\n                totalPayableAmount: payAmount + total_medicine_price,\n                tax: total_tax,\n                choosePkg: [...medicinePkg]\n            }\n        })\n    }\n    setPaymentAmount = (value) => {\n        let that = this;\n        this.setState({\n            totalPayingAmount: value\n        }, function () {\n            that.calculateTotalAmount();\n        })\n    }\n    handleMedicineSelect = (e) => {\n        let value = e;\n        this.setState({\n            medicineItem: value,\n        }, function () {\n            this.calculateTotalAmount()\n        })\n    }\n    changeDiscount=(id, value)=>{\n        let that=this;\n        that.setState(function (prevState) {\n            let newTableValue = [];\n            prevState.choosePkg.forEach(function (tableObj) {\n                if (tableObj._id == id) {\n\n                    newTableValue.push({...tableObj, discount: value})\n                }else {\n                    newTableValue.push(tableObj);\n                }\n            });\n            return {choosePkg:newTableValue}\n        });\n    }\n    render() {\n        const BOOKING_TYPE = [\n            {\n                value: 'NORMAL',\n                is_or_not: this.state.availabilitySeatNormal && this.state.availabilitySeatNormal.available ? true : false\n            },\n            {\n                value: 'TATKAL',\n                is_or_not: this.state.availabilitySeatTatkal && this.state.availabilitySeatTatkal.available ? true : false\n            },\n\n        ];\n\n        let that = this;\n        const {getFieldDecorator} = this.props.form;\n        const formItemLayout = ({\n            labelCol: {\n                xs: {span: 24},\n                sm: {span: 6},\n            },\n            wrapperCol: {\n                xs: {span: 24},\n                sm: {span: 14},\n            },\n        });\n        const formPatients = ({\n            wrapperCol: {\n                xs: {offset: 6, span: 24},\n                sm: {offset: 6, span: 14},\n            },\n        });\n\n        const columns = [{\n            title: 'Item',\n            key: 'name',\n            dataIndex: 'name'\n        },\n                {\n                title: 'Normal Price',\n                key: 'normal_price',\n                dataIndex: 'normal_price',\n                // render:(value,record)=>(<p>{value.toFixed()}</p>)\n            }, {\n                title: 'Tatkal Price',\n                key: 'tatkal_price',\n                dataIndex: 'tatkal_price',\n                // render:(value,record)=>(<p>{record?(record.tatkal_price).toFixed():null}</p>)\n            },\n\n            {\n                title: 'discount %',\n                key: 'discount',\n                width: 100,\n                dataIndex: 'discount',\n                render: (item, record) => <Form.Item\n                    key={`discount[${record._id}]`}\n                    {...formItemLayout}>\n                    {getFieldDecorator(`discount[${record._id}]`, {\n                        initialValue: record.discount,\n                        validateTrigger: ['onChange', 'onBlur'],\n\n                    })(\n                        <InputNumber min={0} max={100} placeholder=\"discount\" size={'small'} value={record.discount} onChange={(value) => that.changeDiscount(record._id ,value)}/>\n                    )}\n                </Form.Item>\n            },\n            {\n                title: 'Price',\n                key: 'price',\n                dataIndex: 'price',\n                render: (value, record) => (<p>{value ? (value).toFixed(2) : null}</p>)\n\n            }, {\n                title: 'Tax',\n                key: 'tax',\n                dataIndex: 'tax',\n                render: (value, record) => (<p>{value ? (value).toFixed(2) : null}</p>)\n            }, {\n                title: 'Total Amount',\n                key: 'price_with_tax',\n                dataIndex: 'price_with_tax',\n                render: (value, record) => (<p>{value ? (value).toFixed(2) : null}</p>)\n            }];\n        const singleUploadprops = {\n            name: 'image',\n            data: {\n                name: 'hello'\n            },\n            action: makeURL(FILE_UPLOAD_API),\n            headers: {\n                authorization: 'authorization-text',\n            },\n            onChange(info) {\n                if (info.file.status !== 'uploading') {\n\n                }\n                if (info.file.status === 'done') {\n                    message.success(`${info.file.name} file uploaded successfully`);\n                } else if (info.file.status === 'error') {\n                    message.error(`${info.file.name} file upload failed.`);\n                }\n            },\n        };\n        return <div>\n            <Card title={\"Book a Seat/Bed\"}>\n                <Form>\n                    <Row>\n                        <Col xs={24} sm={24} md={12} lg={12} xl={12}>\n                            <div>\n\n                                {this.state.patientDetails ? <Form.Item key=\"id\"\n                                                                        value={this.state.patientDetails ? this.state.patientDetails.id : ''} {...formPatients}>\n                                        <Card bordered={false} style={{background: '#ECECEC'}}>\n                                            <Meta\n                                                avatar={(this.state.patientDetails.image ? <Avatar src={makeFileURL(this.state.patientDetails.image)}/> :\n                                                    <Avatar style={{backgroundColor: '#87d068'}}>\n                                                        {this.state.patientDetails.user.first_name ? this.state.patientDetails.user.first_name.charAt(0) :\n                                                            <Icon type=\"user\"/>}\n                                                    </Avatar>)}\n                                                title={this.state.patientDetails.user.first_name}\n                                                description={this.state.patientDetails.user.mobile}\n                                            />\n                                            {/*<Button onClick={this.handleClick} icon=\"close-circle\"*/}\n                                            {/*        type={\"danger\"}/>*/}\n                                            {/* <Button type=\"primary\" style={{float: 'right'}} onClick={this.handleClick}>Add New\n                                                Patient</Button> */}\n                                        </Card>\n                                    </Form.Item>\n                                    : <div>\n                                        <Form.Item label=\"Patient\" {...formItemLayout}>\n                                            {getFieldDecorator('patient', {\n                                                rules: [{required: true, message: 'this field required'}],\n                                            })\n                                            (<AutoComplete placeholder=\"Patient Name\"\n                                                           showSearch\n                                                           onSearch={this.searchPatient}\n                                                           defaultActiveFirstOption={false}\n                                                           showArrow={false}\n                                                           filterOption={false}\n                                                           onSelect={this.handlePatientSelect}>\n                                                {this.state.patientList.map((option) => <AutoComplete.Option\n                                                    value={option ? option.id.toString() : ''}>\n                                                    <List.Item style={{padding: 0}}>\n                                                        <List.Item.Meta\n                                                            avatar={option.image ?\n                                                                <Avatar style={{backgroundColor: '#ffff'}}\n                                                                        src={makeFileURL(option.image)}/> :\n                                                                <Icon type=\"user\"/>}\n                                                            title={option.user.first_name + \" (\" + option.user.id + \")\"}\n                                                            description={<small>{option.user.mobile}</small>}\n                                                        />\n\n                                                    </List.Item>\n                                                </AutoComplete.Option>)}\n                                            </AutoComplete>)\n                                            }\n\n                                            {this.state.ptr ? <Alert message=\"Patient Not Found !!\"\n                                                                     description=\"Please Search another patient or create new patient.\"\n                                                                     type=\"error\"/> : null}\n                                        </Form.Item>\n                                    </div>}\n\n                                <Form.Item label=\"Bed Package\" {...formItemLayout}>\n                                    {getFieldDecorator('bed_package', {\n                                        rules: [{required: true, message: 'this field required!'}],\n                                    })\n                                    (<Select onChange={(value) => that.checkBedStatus('bed_package', value)}>\n                                        {that.state.packages.map(room => <Select.Option\n                                            value={room.id}>{room.name}</Select.Option>)}\n                                    </Select>)\n                                    }\n                                </Form.Item>\n                                <Form.Item label=\"Book From\" {...formItemLayout}>\n                                    {getFieldDecorator('from_date', {\n                                        rules: [{required: true, message: 'Input From Date!'}],\n                                    })\n                                    (<DatePicker onChange={(value) => that.checkBedStatus('from_date', value)}\n                                                 format={'DD-MM-YYYY'}/>)\n                                    }\n                                </Form.Item>\n                                <Form.Item label=\"Book To\" {...formItemLayout}>\n                                    {getFieldDecorator('to_date', {\n                                        rules: [{required: true, message: 'Input To Date!'}],\n                                    })\n                                    (<DatePicker disabled format={'DD-MM-YYYY'}/>)\n                                    }\n                                </Form.Item>\n\n                                <Form.Item label={\"Booking Type\"} {...formItemLayout} >\n                                    {getFieldDecorator('seat_type', {\n                                        rules: [{\n                                            required: true, message: 'this field required'\n                                        }]\n                                    })(<Radio.Group\n                                            onChange={(e) => this.handleRoomType('seat_type', e.target.value)}>\n                                            {BOOKING_TYPE.map((seat_type) => <Radio\n                                                value={seat_type.is_or_not ? seat_type.value : ''}\n                                                disabled={seat_type.is_or_not ? false : true}>{seat_type.value}</Radio>)}\n                                        </Radio.Group>\n                                    )}\n                                </Form.Item>\n                                <Form.Item label=\"Medicine  Package\" {...formItemLayout}>\n                                    {getFieldDecorator('medicines', {})\n                                    (<Select mode=\"multiple\" onChange={this.handleMedicineSelect}>\n                                        {that.state.medicinePackage.map(item => <Select.Option\n                                            value={item.id}>{item.name}</Select.Option>)}\n                                    </Select>)\n                                    }\n                                </Form.Item>\n\n                                <Form.Item label=\"Pay Now : \" {...formItemLayout}>\n                                    {getFieldDecorator('pay_value', {\n                                        rules: [{\n                                            required: true,\n                                            message: 'this field is required'\n                                        }],\n                                        initialValue: this.state.totalPayingAmount ? this.state.totalPayingAmount : null\n                                    })\n                                    (\n                                        <InputNumber min={0} step={1} max={this.state.totalPayableAmount}\n                                                     onChange={this.setPaymentAmount}/>\n                                    )\n                                    }\n                                </Form.Item>\n                                <Form.Item label=\"Payment Mode\" {...formItemLayout}>\n                                    {getFieldDecorator('payment_mode', {\n                                        rules: [{required: true, message: 'this field required'}],\n                                    })\n                                    (<Select showSearch\n                                             filterOption={(input, option) =>\n                                                 option.props.children.toLowerCase().indexOf(input.toLowerCase()) >= 0\n                                             }\n                                    >\n                                        {this.state.paymentModes.map(type => <Select.Option\n                                            value={type.id}>{type.mode}</Select.Option>)}\n                                    </Select>)\n                                    }\n                                </Form.Item>\n\n                                {/* <Col span={7} style={{float:\"right\"}}>\n                                    <Form.Item>\n                                        <Popconfirm\n                                            title={\"Are you sure to take payment of INR \" + this.state.totalPayingAmount + \"?\"}  onConfirm={this.handleSubmit}>\n                                            <Button type={'primary'}>Submit</Button>\n                                        </Popconfirm>\n                                        {that.props.history ?\n                                            <Button style={{margin: 5}}\n                                                    onClick={() => that.props.history.goBack()}>\n                                                Cancel\n                                            </Button> : null}\n                                    </Form.Item>\n                                </Col>  */}\n\n                            </div>\n                        </Col>\n                        <Col xs={24} sm={24} md={12} lg={12} xl={12}>\n                            <Divider>Patient Details</Divider>\n                            <Form.Item label=\"Creatinine Level\" {...formItemLayout}>\n                                {getFieldDecorator('creatinine', {\n                                    // rules: [{required: true, message: 'this field required'}],\n                                })\n                                (<Input/>)\n                                }\n                            </Form.Item>\n                            <Form.Item label=\"Urea Level\" {...formItemLayout}>\n                                {getFieldDecorator('urea_level', {\n                                    // rules: [{required: true, message: 'this field required'}],\n                                })\n                                (<Input/>)\n                                }\n                            </Form.Item>\n                            <Form.Item label=\"Currently on Dialysis?\" {...formItemLayout}>\n                                {getFieldDecorator('dialysis', {\n                                    // rules: [{required: true, message: 'this field required'}],\n                                })\n                                (<Select showSearch\n                                         filterOption={(input, option) =>\n                                             option.props.children.toLowerCase().indexOf(input.toLowerCase()) >= 0\n                                         }>\n                                    <Select.Option\n                                        value={true}>YES</Select.Option>\n                                    <Select.Option\n                                        value={false}>NO</Select.Option>\n                                </Select>)\n                                }\n                            </Form.Item>\n                            <Form.Item label=\"Diseases\" {...formItemLayout}>\n                                {getFieldDecorator('other_diseases', {\n                                    // rules: [{required: true, message: 'this field required'}],\n                                })\n                                (<Select showSearch mode={\"multiple\"}\n                                         filterOption={(input, option) =>\n                                             option.props.children.toLowerCase().indexOf(input.toLowerCase()) >= 0\n                                         }>\n                                    {this.state.diseases.map(item => <Select.Option\n                                        value={item.id}>{item.name}</Select.Option>)}\n                                </Select>)\n                                }\n                            </Form.Item>\n                            <Form.Item label=\"Other Diseases\" {...formItemLayout}>\n                                {getFieldDecorator('rest_diseases', {\n                                    // rules: [{required: true, message: 'this field required'}],\n                                })\n                                (<Select mode={\"tags\"}>\n\n                                </Select>)\n                                }\n                            </Form.Item>\n                            <Form.Item label=\"Upload Report\" {...formItemLayout}>\n                                {getFieldDecorator('file', {\n                                    // rules: [{required: true, message: 'this field required'}],\n                                })\n                                (<Upload {...singleUploadprops}>\n                                    <Button>\n                                        <Icon type=\"upload\"/> Select File\n                                    </Button>\n\n                                </Upload>)\n                                }\n                            </Form.Item>\n                            <Table pagination={false} columns={columns} size={'small'}\n                                   dataSource={this.state.choosePkg}/>\n\n                        </Col>\n                        <Col span={24}>\n                            <h3>Grand Total: <b>{this.state.totalPayableAmount.toFixed(2)}</b></h3>\n                            <Form.Item>\n                                <Popconfirm\n                                    title={\"Are you sure to take payment of INR \" + this.state.totalPayingAmount + \"?\"}\n                                    onConfirm={this.handleSubmit}>\n                                    <Button type={'primary'}>Submit</Button>\n                                </Popconfirm>\n                                {that.props.history ?\n                                    <Button style={{margin: 5}}\n                                            onClick={() => that.props.history.goBack()}>\n                                        Cancel\n                                    </Button> : null}\n                            </Form.Item>\n                        </Col>\n                    </Row>\n                </Form>\n            </Card>\n        </div>\n    }\n}\n\nexport default Form.create()(BedBookingForm)\n","import React from \"react\";\nimport {Button, Card, Icon, Layout, Tag} from \"antd\";\nimport {Route, Switch} from \"react-router\";\nimport {Link} from \"react-router-dom\";\nimport BedBookingForm from \"./BedBookingForm\";\nimport {BED_BOOKING_REPORTS} from \"../../../constants/api\";\nimport {getAPI, interpolate} from \"../../../utils/common\";\nimport CustomizedTable from \"../../common/CustomizedTable\";\nimport moment from \"moment\";\nimport InfiniteFeedLoaderButton from \"../../common/InfiniteFeedLoaderButton\";\nimport PermissionDenied from \"../../common/errors/PermissionDenied\";\n\nconst {Content} = Layout;\n\nexport default class BookingHome extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            loading: true,\n            bedBookingReports: [],\n            patient: this.props.currentPatient || {}\n        };\n        this.loadBedBookingReport = this.loadBedBookingReport.bind(this);\n    }\n\n    componentDidMount() {\n        this.loadBedBookingReport();\n    }\n\n    loadBedBookingReport = (page = 1) => {\n        let that = this;\n        this.setState({\n            loading: true\n        })\n        let successFn = function (data) {\n            console.log(data);\n            if (data.current == 1)\n                that.setState({\n                    bedBookingReports: data.results,\n                    loading: false,\n                    nextReport: data.next\n                });\n            else\n                that.setState(function (prevState) {\n                        return {\n                            bedBookingReports: [...prevState.bedBookingReports, ...data.results],\n                            loading: false,\n                            nextReport: data.next\n                        }\n                    }\n                );\n        };\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            })\n        };\n        getAPI(interpolate(BED_BOOKING_REPORTS, [this.props.active_practiceId]), successFn, errorFn, {\n            page: page,\n            patients: this.state.patient.id\n        });\n    }\n\n    render() {\n        let that=this;\n        const columns = [{\n            title: 'Bed Package',\n            key: 'name',\n            dataIndex: 'bed_package.name'\n        }, {\n            title: 'Medicine Package',\n            key: 'medicine',\n            dataIndex: 'medicines',\n            render: (text, record) => <span>{text.map((item) =>\n                <Tag>{item.name}</Tag>\n            )}</span>\n        }, {\n            title: 'From ',\n            key: 'from_date',\n            render: (text, record) => (\n                <span>\n                {moment(record.from_date).format('LL')}\n                  </span>\n            ),\n        }, {\n            title: 'To ',\n            key: 'to_date',\n            render: (text, record) => (\n                <span>\n                {moment(record.to_date).format('LL')}\n                  </span>\n            ),\n        }, {\n            title: 'Seat/Bed Type',\n            key: 'seat_type',\n            dataIndex: 'seat_type'\n\n        }, {\n            title: 'Seat Number',\n            key: 'seat_no',\n            dataIndex: 'seat_no'\n\n        }, {\n            title: 'Total price',\n            key: 'total_price',\n            dataIndex: 'total_price',\n            render: (value) => (<p>{value.toFixed(2)}</p>)\n\n        }, {\n            title: 'Payment Status',\n            key: 'payment_status',\n            dataIndex: 'payment_status'\n\n        }];\n\n        return <Content className=\"main-container\" style={{minHeight: 280,}}>\n            <Layout>\n                <Switch>\n                    <Route path={\"/patient/:patient/booking/bed-booking\"}\n                           render={() =>(that.props.activePracticePermissions.PatientBookings || that.props.allowAllPermissions ?<BedBookingForm {...this.props} bedBooking={true}\n                           loadData={this.loadBedBookingReport}/>:<PermissionDenied/>)}/>\n\n                    <Route>\n                        <div>\n                            <h2>Bed Booking Management\n                                <Link to={\"/patient/\" + this.state.patient.id + \"/booking/bed-booking\"}>\n                                    <Button type=\"primary\" style={{float: 'right'}}>\n                                        <Icon type=\"plus\"/>&nbsp;Book A Seat\n                                    </Button>\n                                </Link>\n                            </h2>\n                            <Card>\n                                <CustomizedTable pagination={false} hideReport={true}\n                                                 loading={this.state.loading}\n                                                 columns={columns} size={'small'}\n                                                 dataSource={this.state.bedBookingReports}/>\n                                <InfiniteFeedLoaderButton\n                                    loaderFunction={() => this.loadBedBookingReport(this.state.nextReport)}\n                                    loading={this.state.loading}\n                                    hidden={!this.state.nextReport}/>\n                            </Card>\n                        </div>\n                    </Route>\n                </Switch>\n            </Layout>\n        </Content>\n\n    }\n}\n","import React from \"react\";\n\nimport {Layout, Spin} from \"antd\";\nimport {Redirect, Route, matchPath} from \"react-router\";\nimport PatientProfile from \"./patient/PatientProfile\";\nimport EditPatientDetails from \"./patient/EditPatientDetails\";\nimport Appointment from \"./appointment/Appointment\"\nimport PatientSider from \"./PatientSider\";\nimport PatientTimeline from \"./timeline/PatientTimeline\";\nimport PatientFiles from \"./files/PatientFiles\";\nimport PatientClinicNotes from \"./clinicNotes/PatientClinicNotes\";\nimport PatientHeader from \"./PatientHeader\";\nimport PatientCommunication from \"./communication/PatientCommunication\";\nimport PatientVitalSign from \"./vitalSign/PatientVitalSign\";\nimport AddorEditPatientVitalSigns from \"./vitalSign/AddorEditPatientVitalSigns\";\nimport PatientCompletedProcedures from \"./completedProcedures/PatientCompletedProcedures\";\nimport PatientPrescriptions from \"./prescriptions/PatientPrescriptions\";\nimport PatientTreatmentPlans from \"./treatmentPlans/PatientTreatmentPlans\";\nimport PatientLabOrders from \"./labOrders/PatientLabOrders\";\nimport PatientInvoices from \"./invoices/PatientInvoices\";\nimport PatientPayments from \"./payments/PatientPayments\";\nimport PatientInvoicesReturn from \"./invoices/ReturnInvoices\";\nimport PatientLedgers from \"./ledgers/PatientLedgers\";\nimport {Switch} from \"react-router-dom\";\nimport PrescriptionTemplate from \"./prescriptions/PrescriptionTemplate\";\nimport {displayMessage, getAPI, getCommonSettings, interpolate, saveCommonSettings} from \"../../utils/common\";\nimport {AGENT_WALLET, PATIENT_PENDING_AMOUNT, PATIENT_PROFILE} from \"../../constants/api\";\nimport {ERROR_MSG_TYPE} from \"../../constants/dataKeys\";\nimport PatientMerge from \"./merge/PatientMerge\";\nimport PatientRequiredNoticeCard from \"./PatientRequiredNoticeCard\";\nimport PatientMedicalCertificate from \"./files/PatientMedicalCertificate\";\nimport PermissionDenied from \"../common/errors/PermissionDenied\";\nimport BookingHome from \"./booking/BookingHome\";\nimport PatientWalletLedger from \"./wallet-ledger/PatientWalletLedger\";\nimport {ROUTES_TO_HIDE_PATIENT_SIDE_PANEL} from \"../../constants/hardData\";\n\nconst {Content} = Layout;\n\nclass PatientHome extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            currentPatient: null,\n            active_practiceId: this.props.active_practiceId,\n            medicalHistory: [],\n            listModalVisible: false,\n            loading: false,\n            showAllClinic: getCommonSettings('showAllClinic'),\n            pendingAmount: null,\n            walletAmount: null,\n            hideSidePanel: false\n        };\n        this.setCurrentPatient = this.setCurrentPatient.bind(this);\n        this.togglePatientListModal = this.togglePatientListModal.bind(this);\n        this.toggleShowAllClinic = this.toggleShowAllClinic.bind(this);\n        this.loadPatientPendingAmount = this.loadPatientPendingAmount.bind(this);\n        this.loadPatientWallet = this.loadPatientWallet.bind(this);\n    }\n\n    componentDidMount() {\n        if (this.props.match.params.id && (!this.state.currentPatient || this.props.match.params.id != this.state.currentPatient.id)) {\n            this.getPatientListData(this.props.match.params.id);\n        }\n        this.loadPatientPendingAmount();\n        this.loadPatientWallet();\n    }\n\n    componentWillReceiveProps(nextProps, nextContext) {\n        let that = this;\n        if (this.state.currentPathLocation != nextProps.location)\n            this.setState({\n                currentPathLocation: nextProps.location\n            }, function () {\n                let foundFlag = false;\n                for (var i = 0; i < ROUTES_TO_HIDE_PATIENT_SIDE_PANEL.length; i++) {\n                    if (matchPath(that.state.currentPathLocation.pathname, {\n                        path: ROUTES_TO_HIDE_PATIENT_SIDE_PANEL[i],\n                        exact: false,\n                        strict: false\n                    })) {\n                        foundFlag = true;\n                        that.setState({\n                            hideSidePanel: true\n                        })\n                    }\n                }\n                if (!foundFlag)\n                    that.setState({\n                        hideSidePanel: false\n                    })\n            })\n    }\n\n    getPatientListData(id) {\n        let that = this;\n        that.setState({\n            loading: true\n        });\n        let successFn = function (data) {\n            that.setCurrentPatient(data)\n            // that.setState({\n            //     patientListData: data.results,\n            //     morePatients: data.next,\n            //     currentPage: data.current,\n            //     loading: false\n            // })\n        };\n        let errorFn = function () {\n            displayMessage(ERROR_MSG_TYPE, \"Patient Loading Failed\");\n            that.setState({\n                loading: false\n            })\n\n        };\n        getAPI(interpolate(PATIENT_PROFILE, [id]), successFn, errorFn);\n    }\n\n    setCurrentPatient(patientObj, redirectUrl = null) {\n        let that = this;\n        let urlArray = this.props.location.pathname.split(\"/\");\n        if (!isNaN(parseInt(urlArray[2]))) {\n            if (patientObj) {\n                urlArray[1] = \"patient\";\n                urlArray[2] = patientObj.id;\n            } else {\n                urlArray[1] = \"patients\";\n                urlArray.splice(2, 1);\n            }\n        } else {\n            if (patientObj) {\n                urlArray[1] = \"patient\";\n                urlArray.splice(2, 0, patientObj.id);\n            }\n        }\n        this.props.history.push(urlArray.join(\"/\"));\n        this.setState({\n            currentPatient: patientObj,\n            loading: false,\n            listModalVisible: false\n        }, function () {\n            if (redirectUrl)\n                that.props.history.push(interpolate(redirectUrl, [patientObj.id]))\n        });\n    }\n\n    togglePatientListModal(option) {\n        this.setState({\n            listModalVisible: !!option\n        });\n    }\n\n    toggleShowAllClinic(option) {\n        this.setState({\n            showAllClinic: !!option\n        }, function () {\n            saveCommonSettings('showAllClinic', !!option)\n        });\n    }\n\n    loadPatientPendingAmount = () => {\n        let that = this;\n        if (this.state.currentPatient && this.state.currentPatient.id) {\n            let successFn = function (data) {\n                that.setState({\n                    pendingAmount: data\n                })\n            }\n            let errorFn = function () {\n\n            }\n            getAPI(interpolate(PATIENT_PENDING_AMOUNT, [this.state.currentPatient.id]), successFn, errorFn);\n        } else {\n            this.setState({\n                pendingAmount: null\n            })\n        }\n    };\n    loadPatientWallet = () => {\n        let that = this;\n        if (this.state.currentPatient && this.state.currentPatient.id) {\n            let successFn = function (data) {\n                that.setState({\n                    walletAmount: data\n                })\n            }\n            let errorFn = function () {\n\n            }\n            getAPI(interpolate(AGENT_WALLET, [this.state.currentPatient.id]), successFn, errorFn);\n        } else {\n            this.setState({\n                pendingAmount: null\n            })\n        }\n    };\n\n    refreshWallet = () => {\n        this.loadPatientWallet();\n        this.loadPatientPendingAmount();\n    };\n\n    render() {\n        let that = this;\n        return <Content>\n            <Spin spinning={this.state.loading} size={\"large\"}>\n                <PatientHeader {...this.state} {...this.props} togglePatientListModal={this.togglePatientListModal}\n                               key={this.state.currentPatient}\n                               setCurrentPatient={this.setCurrentPatient}\n                               toggleShowAllClinic={this.toggleShowAllClinic} refreshWallet={this.refreshWallet}/>\n\n                <Layout>\n                    <PatientSider {...this.state} {...this.props}/>\n                    <Layout>\n                        <Content className=\"main-container\"\n                                 key={this.state.showAllClinic.toString()}\n                                 style={{\n                                     // margin: '24px 16px',\n                                     padding: '0px 5px',\n                                     minHeight: 280,\n                                     // marginLeft: '200px'\n                                 }}>\n                            <Switch>\n                                {/*** Patient Profile Routes*/}\n                                <Route exact path={\"/patients/merge\"}\n                                       render={(route) => (that.props.activePracticePermissions.MergePatients || that.props.allowAllPermissions ?\n                                           <PatientMerge {...this.state}/> : <PermissionDenied/>)}/>\n\n                                {that.props.activePracticePermissions.WebAdmin || that.allowAllPermissions ?\n                                    <Route exact path='/patients/profile'\n                                           render={(route) =>\n                                               (this.state.currentPatient ?\n                                                   <Redirect\n                                                       to={\"/patient/\" + this.state.currentPatient.id + \"/profile\"}/> :\n                                                   <PatientProfile {...this.state}\n                                                                   key={this.state.currentPatient}\n                                                                   setCurrentPatient={this.setCurrentPatient} {...this.props}/>)}/>\n                                    : null}\n\n                                <Route exact path='/patients/profile/add'\n                                       render={(route) => (that.props.activePracticePermissions.AddPatient || that.props.allowAllPermissions ?\n                                           <EditPatientDetails\n                                               key={this.state.currentPatient} {...this.props} {...route}/> :\n                                           <PermissionDenied/>)}/>\n                                <Route exact path='/patient/:id/profile'\n                                       render={(route) => (that.props.activePracticePermissions.ViewPatient || that.props.allowAllPermissions ?\n                                           <PatientProfile {...this.state}\n                                                           key={this.state.currentPatient}\n                                                           setCurrentPatient={this.setCurrentPatient} {...this.props} {...route}/> :\n                                           <PermissionDenied/>)}/>\n                                <Route exact path='/patient/:id/profile/edit'\n                                       render={(route) => (that.props.activePracticePermissions.EditPatient || that.props.allowAllPermissions ?\n                                           <EditPatientDetails\n                                               key={this.state.currentPatient}{...this.state}{...this.props} {...route}/> :\n                                           <PermissionDenied/>)}/>\n\n                                {/*** Patient Appointment Routes*/}\n                                {that.props.activePracticePermissions.PatientAppointments || that.allowAllPermissions ?\n                                    <Route exact path='/patients/appointments'\n                                           render={(route) => (this.state.currentPatient ?\n                                               <Redirect\n                                                   to={\"/patient/\" + this.state.currentPatient.id + \"/appointments\"}/> :\n                                               <Appointment\n                                                   key={this.state.currentPatient} {...this.state} {...route} {...this.props}/>)}/>\n                                    : null}\n                                {that.props.activePracticePermissions.PatientAppointments || that.allowAllPermissions ?\n                                    <Route exact path='/patient/:id/appointments'\n                                           render={(route) => <Appointment\n                                               key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.state} {...route} {...this.props}/>}/>\n                                    : null}\n                                {that.props.activePracticePermissions.PatientAppointments || that.allowAllPermissions ?\n                                    <Route exact path='/patients/appointments/:appointmentid'\n                                           render={(route) => <Appointment\n                                               key={this.state.currentPatient} {...this.state} {...route} {...this.props}/>}/>\n                                    : null}\n                                {/*      <Route exact path='/patients/appointments/create'\n                           render={() => <CreateAppointment {...this.props} />}/>*/}\n\n                                {/*** Patient Communication Routes*/}\n                                {that.props.activePracticePermissions.PatientCommunications || that.allowAllPermissions ?\n                                    <Route exact path='/patients/communications'\n                                           render={() => (this.state.currentPatient ?\n                                               <Redirect\n                                                   to={\"/patient/\" + this.state.currentPatient.id + \"/communications\"}/> :\n                                               <PatientRequiredNoticeCard\n                                                   togglePatientListModal={this.togglePatientListModal}/>)}/>\n                                    : null}\n                                {that.props.activePracticePermissions.PatientCommunications || that.allowAllPermissions ?\n                                    <Route exact path='/patient/:id/communications'\n                                           render={(route) => <PatientCommunication\n                                               key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.state} {...route}/>}/>\n                                    : null}\n\n                                {/*** Patient Vital Sign Routes*/}\n                                {that.props.activePracticePermissions.PatientVitalSigns || that.allowAllPermissions ?\n                                    <Route exact path='/patients/emr/vitalsigns'\n                                           render={(route) => (this.state.currentPatient ?\n                                               <Redirect\n                                                   to={\"/patient/\" + this.state.currentPatient.id + \"/emr/vitalsigns\"}/> :\n                                               <PatientVitalSign\n                                                   togglePatientListModal={this.togglePatientListModal}\n                                                   key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.state} {...route} />)}/>\n                                    : null}\n\n                                <Route path='/patient/:id/emr/vitalsigns'\n                                       render={(route) => (that.props.activePracticePermissions.PatientVitalSigns || that.allowAllPermissions ?\n                                           <PatientVitalSign\n                                               key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.state} {...route} /> :\n                                           <PermissionDenied/>)}/>\n\n\n                                <Route exact path='/patient/:id/emr/vitalsigns/edit'\n                                       render={(route) => (that.props.activePracticePermissions.PatientVitalSigns || that.allowAllPermissions ?\n                                           <AddorEditPatientVitalSigns\n                                               key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.state} {...route}/> :\n                                           <PermissionDenied/>)}/>\n\n                                {/*** Patient Clinic Notes Routes*/}\n\n                                <Route path={\"/patients/emr/clinicnotes\"}\n                                       render={(route) =>\n                                           <PatientClinicNotes\n                                               togglePatientListModal={this.togglePatientListModal}\n                                               key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.props} {...this.state} {...route}/>}/>}/>\n                                <Route path={\"/patient/:id/emr/clinicnotes\"}\n                                       render={(route) =>\n                                           <PatientClinicNotes\n                                               key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.props} {...this.state} {...route}/>}/>\n\n                                {/*** Patient Completed Procedures Routes*/}\n                                {that.props.activePracticePermissions.PatientCompletedProcedure || that.allowAllPermissions ?\n                                    <Route exact path='/patients/emr/workdone'\n                                           render={(route) => (this.state.currentPatient ?\n                                               <Redirect\n                                                   to={\"/patient/\" + this.state.currentPatient.id + \"/emr/workdone\"}/> :\n                                               <PatientCompletedProcedures\n                                                   togglePatientListModal={this.togglePatientListModal}\n                                                   key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.props} {...this.state} {...route}/>)}/>\n                                    : null}\n                                {that.props.activePracticePermissions.PatientCompletedProcedure || that.allowAllPermissions ?\n                                    <Route path='/patient/:id/emr/workdone'\n                                           render={(route) => <PatientCompletedProcedures {...that.props}\n                                                                                          key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.state} {...route}/>}/>\n                                    : null}\n                                {/*** Patient Files Routes*/}\n                                {that.props.activePracticePermissions.PatientFiles || that.allowAllPermissions ?\n                                    <Route exact path='/patients/emr/files'\n                                           render={(route) => (this.state.currentPatient ?\n                                               <Redirect\n                                                   to={\"/patient/\" + this.state.currentPatient.id + \"/emr/files\"}/> :\n                                               <PatientFiles\n                                                   togglePatientListModal={this.togglePatientListModal}\n                                                   key={this.state.currentPatient ? this.state.currentPatient.id : null} {...route} {...this.state}/>)}/>\n                                    : null}\n                                {that.props.activePracticePermissions.PatientFiles || that.allowAllPermissions ?\n                                    <Route path={\"/patient/:id/emr/files\"}\n                                           render={(route) => <PatientFiles\n                                               key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.props} {...route} {...this.state}/>}/>\n                                    : null}\n                                {that.props.activePracticePermissions.PatientFiles || that.allowAllPermissions ?\n                                    <Route path={\"/patient/:id/emr/create-medicalCertificate\"}\n                                           render={(route) => <PatientMedicalCertificate\n\n                                               key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.props} {...route} {...this.state}/>}/>\n                                    : null}\n                                {/*** Patient Prescriptions Routes*/}\n                                {that.props.activePracticePermissions.PatientPrescriptions || that.allowAllPermissions ?\n                                    <Route exact path='/patients/emr/prescriptions'\n                                           render={(route) => (this.state.currentPatient ?\n                                               <Redirect\n                                                   to={\"/patient/\" + this.state.currentPatient.id + \"/emr/prescriptions\"}/> :\n                                               <PatientPrescriptions\n                                                   togglePatientListModal={this.togglePatientListModal}\n                                                   key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.props} {...this.state} {...route} />)}/>\n                                    : null}\n                                {that.props.activePracticePermissions.PatientPrescriptions || that.allowAllPermissions ?\n                                    <Route path='/patient/:id/emr/prescriptions'\n                                           render={(route) => <PatientPrescriptions\n                                               key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.props} {...this.state} {...route} />}/>\n                                    : null}\n                                {/*** Patient Treatment Plan Routes*/}\n                                {that.props.activePracticePermissions.PatientTreatmentPlans || that.allowAllPermissions ?\n                                    <Route exact path='/patients/emr/plans'\n                                           render={(route) => (this.state.currentPatient ?\n                                               <Redirect\n                                                   to={\"/patient/\" + this.state.currentPatient.id + \"/emr/plans\"}/> :\n                                               <PatientTreatmentPlans\n                                                   togglePatientListModal={this.togglePatientListModal}\n                                                   key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.state} {...this.props} {...route} />)}/>\n                                    : null}\n                                {that.props.activePracticePermissions.PatientTreatmentPlans || that.allowAllPermissions ?\n                                    <Route path='/patient/:id/emr/plans'\n                                           render={(route) => <PatientTreatmentPlans\n                                               key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.state} {...that.props} {...route} />}/>\n                                    : null}\n                                {/*** Patient Timeline Routes*/}\n\n                                <Route path={\"/patient/:id/emr/timeline\"}\n                                       render={(route) => (that.props.activePracticePermissions.PatientTimeline || that.allowAllPermissions ?\n                                           <PatientTimeline\n                                               key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.state} {...route}/> :\n                                           <PermissionDenied/>)}/>\n                                {/*** Patient Lab Order Routes*/}\n                                {that.props.activePracticePermissions.PatientLabOrders || that.allowAllPermissions ?\n                                    <Route exact path='/patient/emr/labtrackings'\n                                           render={(route) => (this.state.currentPatient ?\n                                                   <Redirect\n                                                       to={\"/patient/\" + this.state.currentPatient.id + \"/emr/labtrackings\"}/> :\n                                                   <PatientLabOrders\n                                                       key={this.state.currentPatient} {...this.state} {...route}/>\n                                           )}/>\n                                    : null}\n\n                                <Route path='/patient/:id/emr/labtrackings'\n                                       render={(route) => (that.props.activePracticePermissions.PatientLabOrders || that.allowAllPermissions ?\n                                           <PatientLabOrders\n                                               key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.state} {...route} /> :\n                                           <PermissionDenied/>)}/>\n\n                                {/*** Patient Invoices Routes*/}\n                                {that.props.activePracticePermissions.PatientInvoices || that.allowAllPermissions ?\n                                    <Route exact path='/patients/billing/invoices'\n                                           render={(route) => (this.state.currentPatient ?\n                                               <Redirect\n                                                   to={\"/patient/\" + this.state.currentPatient.id + \"/billing/invoices\"}/> :\n                                               <PatientInvoices\n                                                   togglePatientListModal={this.togglePatientListModal}\n                                                   key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.props} {...this.state} {...route} />)}/>\n                                    : null}\n                                <Route path='/patient/:id/billing/invoices'\n                                       render={(route) => (that.props.activePracticePermissions.PatientInvoices || that.allowAllPermissions ?\n                                           <PatientInvoices refreshWallet={this.refreshWallet}\n                                                            key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.props} {...this.state} {...route}/> :\n                                           <PermissionDenied/>)}/>\n\n\n                                {that.props.activePracticePermissions.PatientReturns || that.allowAllPermissions ?\n                                    <Route exact path='/patients/billing/return/invoices'\n                                           render={(route) => (this.state.currentPatient ?\n                                               <Redirect\n                                                   to={\"/patient/\" + this.state.currentPatient.id + \"/billing/return/invoices\"}/> :\n                                               <PatientInvoicesReturn\n                                                   togglePatientListModal={this.togglePatientListModal}\n                                                   key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.state} {...route}/>)}/>\n                                    : null}\n\n\n                                <Route exact path='/patient/:id/billing/return/invoices'\n                                       render={(route) => (that.props.activePracticePermissions.PatientReturns || that.allowAllPermissions ?\n                                           <PatientInvoicesReturn refreshWallet={this.refreshWallet}\n                                                                  key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.state} {...route}/> :\n                                           <PermissionDenied/>)}/>\n\n\n                                {/*** Patient Payments Routes*/}\n                                {that.props.activePracticePermissions.PatientPayments || that.allowAllPermissions ?\n                                    <Route path='/patients/billing/payments'\n                                           render={(route) => (this.state.currentPatient ?\n                                               <Redirect\n                                                   to={\"/patient/\" + this.state.currentPatient.id + \"/billing/payments\"}/> :\n                                               <PatientPayments\n                                                   togglePatientListModal={this.togglePatientListModal}\n                                                   key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.state} {...this.props} {...route}/>)}/>\n                                    : null}\n                                <Route path='/patient/:id/billing/payments'\n                                       render={(route) => (that.props.activePracticePermissions.PatientPayments || that.allowAllPermissions ?\n                                           <PatientPayments refreshWallet={this.refreshWallet}\n                                                            key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.state} {...route}/> :\n                                           <PermissionDenied/>)}/>\n\n                                {/*** Patient Ledger Routes*/}\n                                {this.state.currentPatient ?\n                                    <Route exact path='/patient/:id/billing/ledger'\n                                           render={(route) => (that.props.activePracticePermissions.PatientLedger || that.allowAllPermissions ?\n                                               <PatientLedgers\n                                                   refreshWallet={this.refreshWallet}\n                                                   key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.state} {...route}/> :\n                                               <PermissionDenied/>)}/> : null}\n\n                                <Route exact path='/patient/:id/prescriptions/template/add'\n                                       render={(route) => (that.props.activePracticePermissions.PatientPrescriptions || that.allowAllPermissions ?\n                                           <PrescriptionTemplate\n                                               key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.state} {...route}/> :\n                                           <PermissionDenied/>)}/>\n\n                                <Route path=\"/patient/:id/booking\"\n                                       render={(route) => (that.props.activePracticePermissions.PatientBookings || that.props.allowAllPermissions ?\n                                           <BookingHome {...this.state}{...this.props} {...route}\n                                                        key={this.state.currentPatient ? this.state.currentPatient.id : null}/> :\n                                           <PermissionDenied/>)}/>\n                                {this.state.currentPatient && this.state.currentPatient.is_agent ?\n                                    <Route exact path=\"/patient/:id/billing/wallet\"\n                                           render={(route) => (that.props.activePracticePermissions.PatientBookings || that.props.allowAllPermissions ?\n                                               <PatientWalletLedger {...this.state} {...this.props} {...route}\n                                                                    key={this.state.currentPatient ? this.state.currentPatient.id : null}/> :\n                                               <PermissionDenied/>)}/> : null}\n\n                                <Route render={(route) =>\n                                    (this.state.currentPatient ?\n                                        <Redirect\n                                            to={\"/patient/\" + this.state.currentPatient.id + \"/profile\"}/> :\n                                        <PatientProfile {...this.state}\n                                                        key={this.state.currentPatient}\n                                                        setCurrentPatient={this.setCurrentPatient} {...this.props}/>)}/>\n\n\n                            </Switch>\n                        </Content>\n                    </Layout>\n                </Layout>\n            </Spin>\n        </Content>\n    }\n}\n\nexport default PatientHome;\n"],"sourceRoot":""}