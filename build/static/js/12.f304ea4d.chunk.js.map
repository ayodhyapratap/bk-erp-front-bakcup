{"version":3,"sources":["../node_modules/lodash/mapKeys.js","app/components/patients/patientGroups/PatientGroups.js","app/components/patients/PatientSelection.js","app/components/patients/patient/PatientNotes.js","app/components/patients/patient/MedicalMembership.js","app/components/patients/patient/AddOrEditAgent.js","app/components/patients/patient/PatientProfile.js","app/components/patients/patient/EditPatientDetails.js","app/components/patients/appointment/Appointment.js","app/components/patients/PatientSider.js","../node_modules/antd/es/timeline/TimelineItem.js","../node_modules/antd/es/timeline/Timeline.js","../node_modules/antd/es/timeline/index.js","../node_modules/antd/es/steps/index.js","app/components/patients/timeline/PatientTimeline.js","../node_modules/react-modal-image/es/styles.js","../node_modules/react-modal-image/es/icons.js","../node_modules/react-modal-image/es/Header.js","../node_modules/react-modal-image/es/Image.js","../node_modules/react-modal-image/es/Lightbox.js","../node_modules/react-modal-image/es/index.js","app/components/patients/files/PatientFiles.js","app/components/patients/clinicNotes/AddClinicNotes.js","app/components/patients/clinicNotes/AddClinicNotesDynamic.js","app/components/patients/clinicNotes/PatientClinicNotes.js","app/components/patients/PatientHeader.js","app/components/patients/communication/PatientCommunicationSetting.js","app/components/patients/communication/PatientCommunication.js","app/components/patients/vitalSign/AddorEditPatientVitalSigns.js","app/components/patients/vitalSign/PatientVitalSign.js","app/components/patients/completedProcedures/AddorEditDynamicCompletedTreatmentPlans.js","app/components/patients/completedProcedures/PatientCompletedProcedures.js","app/components/patients/prescriptions/PrescriptionTemplate.js","app/components/patients/prescriptions/AddorEditDynamicPatientPrescriptions.js","app/components/patients/prescriptions/PatientPrescriptions.js","app/components/patients/treatmentPlans/AddorEditDynamicTreatmentPlans.js","app/components/patients/treatmentPlans/PatientTreatmentPlans.js","app/components/patients/labOrders/AddPatientLabOrders.js","app/components/patients/labOrders/PatientLabOrders.js","app/components/patients/invoices/AddInvoicedynamic.js","app/components/patients/invoices/AddReturnInvoice.js","app/components/patients/invoices/InvoiceReturnModal.js","app/components/patients/invoices/EditReturnModal.js","app/components/patients/invoices/CancelReturnModal.js","app/components/patients/invoices/PatientInvoices.js","app/components/patients/payments/AddPaymentForm.js","app/components/patients/payments/EditPaymentModal.js","app/components/patients/payments/CancelPaymentModal.js","app/components/patients/payments/PatientPayments.js","app/components/patients/invoices/ReturnInvoices.js","app/utils/patientUtils.js","app/components/patients/ledgers/PatientLedgers.js","app/components/patients/merge/PatientMerge.js","app/components/patients/PatientRequiredNoticeCard.js","app/components/patients/files/PatientMedicalCertificate.js","app/components/patients/booking/BedBookingForm.js","app/components/patients/booking/BookingHome.js","app/components/patients/PatientHome.js","app/utils/export.js","app/components/common/CustomizedTable.js","app/components/common/InfiniteFeedLoaderButton.js","../node_modules/antd/es/switch/style/index.js","../node_modules/antd/es/switch/index.js","app/components/patients/wallet-ledger/PatientWalletLedger.js"],"names":["baseAssignValue","baseForOwn","baseIteratee","module","exports","object","iteratee","result","value","key","PatientGroups","props","getPatientGroup","that","getAPI","interpolate","PATIENT_GROUPS","active_practiceId","data","setState","patientGroup","loading","state","this","record","reqData","is_active","postAPI","coloumns","title","dataIndex","render","text","onConfirm","deleteObject","okText","cancelText","fields","label","required","type","INPUT_FIELD","formProp","successFn","console","log","displayMessage","SUCCESS_MSG_TYPE","errorFn","action","method","beforeSubmit","TestFormLayout","create","DynamicFieldsForm","CustomizedTable","dataSource","columns","React","Component","Meta","Search","MonthPicker","id","PatientSelection","togglePatientGroupEditing","option","showPatientGroupModal","changeSelectedPatientGroup","e","selectedPatientGroup","target","currentPage","getMorePatient","addNewOptionField","form","nextKeys","getFieldValue","concat","setFieldsValue","keys","removeNewOptionField","k","length","filter","handleChangeOption","index","prevState","selectedOption","custm_col","AdvanceSearchPatient","preventDefault","validateFields","err","values","dob","moment","format","dob_gte","dob_lte","dob_month","patientData","loadAdvanceSearchPatient","page","advancedSearch","advanceLoading","current","patientListData","results","morePatientList","next","ADVANCED_SEARCH_PATIENT","morePatients","advanced_option","ADVANCED_SEARCH","sourceList","getPatientListData","bind","searchPatient","getSources","SOURCE","filteredData","sort","a","b","patient_count","PATIENTS_LIST","totalPatients","count","searchvalue","searchString","apiParams","page_size","SEARCH_PATIENT","params","parseInt","gender","age","group","advancedOptionShow","getFieldDecorator","initialValue","selectedOptionKeys","mapKeys","chooseOption","map","gutter","span","style","width","defaultValue","CHOOSE","size","onChange","Option","item","FormItems","onClick","margin","className","color","activePracticePermissions","ViewPatient","onSubmit","layout","display","Item","icon","htmlType","advancedOption","placeholder","enterButton","textAlign","height","overflow","padding","Group","buttonStyle","Button","backgroundColor","border","float","name","borderLeft","spinning","patient","PatientCard","showMobile","PatientPhoneNumber","showEmail","PatientEmailId","setCurrentPatient","InfiniteFeedLoaderButton","loaderFunction","hidden","visible","footer","onCancel","PermissionDenied","xs","sm","md","lg","xl","xxl","paddingBottom","avatar","image","src","makeFileURL","user","first_name","charAt","description","mobile","hideMobile","email","hideEmail","custom_id","toUpperCase","HAS_AGE","HAS_DOB","HAS_AADHAR_ID","HAS_EMAIL","GENDER_OPTION","HAS_GENDER","HAS_PINCODE","HAS_STREET","BLOOD_GROUPS","REFERED_BY_AGENT","PatientNotes","loadPatientCallNotes","callNotesLoading","patientId","PATIENT_CALL_NOTES","callNotes","notes","loadPatientNotes","PATIENT_NOTES","defaultValues","Form","renderItem","staff","created_at","remarks","timestamp","MedicalMembership","redirect","currentPatient","Membership","loadMembership","MEMBERSHIP_API","SELECT_FIELD","options","MembershipItem","initilValue","DATE_PICKER","loadProfile","loadMedicalMembership","formChange","PATIENTS_MEMBERSHIP_API","AddOrEditAgent","agentRoles","loadAgentRoles","AGENT_ROLES","roles","SINGLE_IMAGE_UPLOAD_FIELD","PATIENT_PROFILE","PatientProfile","add","addAgent","agentModalVisible","addAgentModalClosed","patientProfile","medicalHistory","hide","newProps","ERROR_MSG_TYPE","MEDICAL_MEMBERSHIP_CANCEL_API","extra","EditPatient","to","shape","is_agent","is_approved","referer_code","fontSize","href","onClickHandler","deleteMembership","membership_code","medical_from","medical_to","PatientRow","role","role_data","is_age","diff","referer_data","referer","secondary_mobile_no","landline_no","address","locality","city_data","state_data","country_data","pincode","medical_history_data","intToRGB","hashCode","patient_group_data","onOk","marginBottom","confirm","EditPatientDetails","loadMedicalHistory","MEDICAL_HISTORY","history","setFormParams","handleSubmit","file_enable","file_count","on_dialysis","medical_history","patient_group","anniversary","subtract","custom_id_pre","file","response","image_path","push","removeEmpty","putAPI","match","toggleWebCam","webCamState","getImageandUpload","fieldKey","FormData","append","FILE_UPLOAD_BASE64","onChangeValue","getState","getCity","onChangeCheckbox","changeFormType","selectedFormType","handleRelation","relation_text","handleNumberChange","number","numberValidation","membership","countrylist","stateList","cityList","country","BLOOD_GROUP_CONFIG_PARAM","PATIENT_SOURCE_CONFIG_PARAM","SMS_LANGUAGE_CONFIG_PARAM","FAMILY_RELATION_CONFIG_PARAM","GENDER_CONFIG_PARAM","changeRedirect","getCountry","loadPatientData","getPatientMembership","loadConfigParameters","COUNTRY","STATE","CITY","patientDetails","redirectVar","okType","patientDelete","formItemLayout","labelCol","wrapperCol","historyOption","forEach","historyItem","patientGroupOption","patientGroupItem","membershipOption","membershipItem","singleUploadprops","makeURL","FILE_UPLOAD_API","headers","authorization","info","status","fileList","message","success","error","goBack","placement","trigger","content","disabled","onDeletePatient","valuePropName","maxWidth","Math","random","WebCamField","getScreenShot","rules","validateStatus","help","errorMsg","replace","source","showSearch","optionFilterProp","language","activePracticeData","aadhar_id","colon","PATIENT_AGE","min","max","blood_group","family_relation","RELATION","attendee","city","mode","paddingTop","defaultChecked","isNaN","Appointment","appointments","practice_doctors","procedure_category","treatmentNotes","practice_staff","editAppointment","deleteAppointment","loadProcedureCategory","loadDoctors","loadTreatmentNotes","appointmentid","loadAppointment","loadAllAppointments","APPOINTMENT_API","ALL_APPOINTMENT_API","practice","PROCEDURE_CATEGORY","PRACTICESTAFF","usersdata","DOCTORS_ROLE","doctor","EMR_TREATMENTNOTES","doctors","treatmentNote","schedule_at","slot","category","category_data","checked","notify_via_email","notify_via_sms","EditAppointment","AddAppointment","allowAllPermissions","scroll","x","pagination","Sider","PatientSider","onHotKeyInner","keyNm","keyName","INNER_KEYS_HOTKEYS","onKeyDown","collapsible","collapsed","hideSidePanel","minHeight","background","ItemGroup","PatientAppointments","PatientCommunications","PatientBookings","PatientVitalSigns","PatientClinicalNotes","PatientTreatmentPlans","PatientCompletedProcedure","PatientFiles","PatientPrescriptions","PatientTimeline","PatientLabOrders","PatientInvoices","PatientReturns","PatientPayments","PatientLedger","_extends","Object","assign","i","arguments","prototype","hasOwnProperty","call","apply","_defineProperty","obj","defineProperty","enumerable","configurable","writable","__rest","s","t","p","indexOf","getOwnPropertySymbols","propertyIsEnumerable","_ref","_classNames","_classNames2","getPrefixCls","customizePrefixCls","prefixCls","_props$color","children","pending","dot","restProps","itemClassName","dotClassName","borderColor","test","undefined","defaultProps","position","_typeof","Symbol","iterator","constructor","_toConsumableArray","arr","Array","isArray","arr2","_arrayWithoutHoles","iter","toString","from","_iterableToArray","TypeError","_nonIterableSpread","_defineProperties","descriptor","_possibleConstructorReturn","self","ReferenceError","_assertThisInitialized","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","_setPrototypeOf","_React$Component","Timeline","_this","instance","Constructor","_classCallCheck","renderTimeline","_a","_a$pending","pendingDot","reverse","pendingNode","classString","pendingItem","timeLineItems","toArray","getPositionCls","ele","idx","truthyItems","itemsCount","lastCls","items","pendingClass","readyClass","protoProps","staticProps","subClass","superClass","_inherits","Steps","renderSteps","iconPrefix","icons","finish","Step","propTypes","checkboxOption","changeFilters","filterParams","selectedFiltersIntermediate","checkAllFilters","loadTimeline","onCheckAllFiltersChange","queryParams","practice_id","showAllClinic","PATIENT_TIMELINE_API","lastDate","timelineData","checkList","sort_date","date","allCheckList","onCheckAllTimelineCard","checkedTimelineCards","indeterminate","checkAll","toggleTimelineCheckbox","returnObj","checkedList","keysList","flag","printCaseSheet","msg","startLoadingMessage","reqObj","timeline","PATIENT_TIMELINE_PDF","stopLoadingMessage","window","open","BACKEND_BASE_URL","report","top","backgroundImage","progressDot","direction","hoverable","bodyStyle","chief_complaints","split","CUSTOM_STRING_SEPERATOR","observations","investigations","diagnosis","timelineClinicalNote","practice_data","doctor_data","calendar_colour","paddingLeft","timelineAppointmentCard","file_type","alt","timelineFilesCard","procedure","proc","inventory","invoice_id","total","payments_data","timelineInvoiceCard","temperature","temperature_part","blood_pressure_up","blood_pressure_down","timelineVitalSignCard","drugs","drug","timelinePrescriptionCard","payment_id","timelinePaymentCard","offsetTop","marginLeft","borderRadius","dateTimeStamp","treatment_plans","timelineProcedureCard","timelineTreatmentPlanCard","timelineItem","StyleInjector","_Component","componentDidMount","css","document","head","querySelector","node","createElement","textContent","appendChild","appendStyle","componentWillUnmount","getElementById","parentNode","removeChild","lightboxStyles","imageBackgroundColor","fill","viewBox","xmlns","d","zoomed","toggleZoom","toggleRotate","onClose","enableDownload","enableZoom","enableRotate","download","Image","_temp","_len","args","_key","handleOnLoad","handleOnContextMenu","event","contextMenu","_props","handleDoubleClick","onLoad","onDoubleClick","onContextMenu","Lightbox","move","y","moveStart","rotationDeg","handleKeyDown","keyCode","getCoordinatesIfOverImg","point","changedTouches","dim","contentEl","getBoundingClientRect","clientX","left","clientY","handleMouseDownOrTouchStart","touches","coords","prev","handleMouseMoveOrTouchMove","handleMouseUpOrTouchEnd","addEventListener","removeEventListener","_this2","medium","large","hideDownload","hideZoom","showRotate","_props$imageBackgroun","_state","onMouseDown","onMouseUp","onMouseMove","onTouchStart","onTouchEnd","onTouchMove","ref","el","transform","WebkitTransform","MsTransform","_default","modalOpen","toggleModal","small","smallSrcSet","cursor","maxHeight","srcSet","loadMailedFiles","files","loadMoreFiles","mailed","PATIENT_MAILEDFILES","filterTags","filterSearchTag","loadData","showModal","filesData","handleCancel","togglePDFModal","path","showPDFFile","tags","showAddModal","selectedFiles","selectedTags","showAddMedicalModel","medicalCertificate","mailedfiles","loadMedicalCertificate","lastPatient","newDate","newData","tag","notag","PATIENT_FILES","EMR_FILETAGS","loadMoreCertificate","MEDICAL_CERTIFICATE_API","ALL_MEDICAL_CERITICATE_API","selected","file_tags","MEDICAL_CERTIFICATE_PDF","PatientFilesForm","MULTI_SELECT_FIELD","formProps","triggerAddModal","tagsMenu","boxShadow","listStyle","paddingInlineStart","tagsCompleteToggle","filesWithTags","borderStyle","defaultFields","overlay","marginRight","togglePatientListModal","paddingRight","borderRight","backgroundSize","filesCompleteToggle","fildFileExtension","PDF_FILE_EXTENSION","deleteFile","patient_data","grid","column","actions","loadPDF","deleteMedicalCertificate","excused_duty_from","excused_duty_to","centered","frameborder","TabPane","tabLists","tabResourcesAPI","EMR_COMPLAINTS","EMR_OBSERVATIONS","EMR_DIAGNOSES","EMR_INVESTIGATIONS","EMR_MEDICATION","AddClinicNotesDynamic","setInitialData","initialData","editClinicNotes","str","setTimeout","addValues","medication","loadRequiredResources","API","newResources","resourceList","filteredResourceList","filterStrings","tab","remove","changeValues","prevsOption","resourceAddModal","searchValues","searchStrings","filterValues","filteredItemOfGivenType","toLowerCase","includes","validateFieldsAndScroll","Complaints","field","join","Investigations","Diagnoses","Notes","Observations","selectedDoctor","selectedDate","isValid","PATIENT_CLINIC_NOTES_API","changeTab","selectDoctor","practiceDoctors","selectedTab","keysObject","ResourceAddForm","validateTrigger","whitespace","onFocus","offsetBottom","allowClear","tabList","block","Modal","PatientClinicNotes","clinicNotes","loadClinicNotes","editClinicNotesData","CLINIC_NOTES_PDF","exact","route","clinicNote","marginTop","deleteClinicNote","Divider","Header","PatientHeader","refreshWallet","textSize","ghost","slice","toggleShowAllClinic","checkedChildren","unCheckedChildren","pendingAmount","zIndex","grand_total","valueStyle","fontWeight","precision","walletAmount","non_refundable","tile","refundable_amount","prefix","patientSettingMenu","AddPatient","maskClosable","closable","listModalVisible","right","PatientCommunicationSetting","onChanged","medicine_till","follow_up_date","saving","parient_communication_history","loadCommunication","PATIENT_COMMUNICATION_HISTORY_API","user_sms","sms_enabled","SMS_ENABLE","isSMS","email_enabled","EMAIL_ENABLE","isEmail","bithday_sms_enabled","BIRTHDAY_SMS_ENABLE","isBirth_SMS","sms_enable","email_enable","birthday_sms_email","dashed","PatientCommunication","AddorEditPatientVitalSigns","vitalSign","editVitalSign","editformProp","pulse","NUMBER_FIELD","follow","weight","resp_rate","creatinine","haemoglobin","urea","uric_acid","VITAL_SIGNS_API","PatientVitalSign","deleteVitalSign","loadVitalsigns","editObject","vitalsign","VITAL_SIGN_PDF","bottom","dataKey","tickFormatter","tickCount","domain","dataMin","abs","dataMax","toFixed","strokeDasharray","labelFormatter","stroke","fillOpacity","strokeWidth","verticalAlign","x1","y1","x2","y2","offset","stopColor","stopOpacity","loadInvoices","presc","VitalSignFooter","AddorEditDynamicCompletedTreatmentPlans","calculateItem","_id","getFieldsValue","tableFormValues","addNotes","removeTreatment","randId","default_notes","editId","editTreatmentPlan","quantity","cost","discount","sendingItem","TREATMENTPLANS_API","url","loadProcedures","loadingProcedures","tableValues","treatment","filteredItems","consumeRow","TextArea","bordered","bottomPoint","overflowX","itemLayout","PatientCompletedProcedures","treatmentPlans","completedTreatmentPlans","incompletedTreatmentPlans","productMargin","loadTreatmentPlans","editTreatmentPlanData","loadProductMargin","PRODUCT_MARGIN","incompleted","treatmentplan","is_completed","complete","TREATMENTPLANS_PDF","theme","editFields","deleteTreatmentPlans","treatmentFooter","PrescriptionTemplate","addInstructions","changeDurationUnits","removeDrug","formDrugList","removeLabs","addedLabs","formLabList","addLabs","WARNING_MSG_TYPE","addTemplate","prevLabs","prevAddedLabs","labs","lab","prevDrugs","prevAddedDrugs","addedDrugs","advice_data","removeTemplates","formTemplateList","dosage","does","duration_type","duration_unit","duration","frequency","does_frequency","instruction","food_time","after_food","before_food","advice","drugIitem","prescriptionTemplate","PRESCRIPTION_TEMPLATE","handleAddFields","loadDrugList","drugList","labList","loadPrescriptionTemplate","deletePrescriptionTemplate","loadLabList","LABTEST_API","item_type","DRUG","Drugs","item_name","INVENTORY_ITEM_API","formItemLayoutWithOutLabel","formItems","drugTableColumns","DOSE_REQUIRED","DURATIONS_UNIT","timing","instructions","labTablecolums","container","addDrug","maintain_inventory","renderRoute","AddorEditDynamicPatientPrescriptions","drugItem","PRESCRIPTIONS_API","editPrescription","prescription","drug_catalog","loadPrescriptions","loadDrugCatalog","editPrescriptionData","deletePrescriptions","nextPrescriptionPage","PRESCRIPTION_PDF","DRUG_CATALOG","strength","prescriptonFooter","AddorEditDynamicTreatmentPlans","selectedTreatments","submitCompleteTreatment","treatmentKeys","treatmentObj","TREATMENTPLANS_MARK_COMPLETE_API","treatmentCompleteToggle","AddPatientLabOrders","removeTests","lab_test","loadLabs","coloums","twoToneColor","payments","Text","tableFormFields","batch","Addinvoicedynamic","selectedDefaultDate","loadEditInvoiceData","invoice","editInvoice","procedure_data","PROCEDURES","changeNetPrice","stocks","itemBatches","stock_quantity","batch_number","unit","batchObj","selectedBatch","inventory_item_data","INVENTORY","selectOption","offers","newTableFormValues","formValue","unit_cost","taxes","tax","retail_without_tax","finalTableFormValues","dateValue","selectBatch","addPrescription","drug_item","selectedPrescriptions","promo_code","promoCode","discount_type","saveLoading","SINGLE_INVOICE_API","CREATE_OR_EDIT_INVOICES","addItemThroughQR","loadingQr","qrSplitted","SEARCH_THROUGH_QR","randomId","row","item_type_stock","item_stock","stock","qrValue","qr","setQrValue","searchItem","loadInventoryItemList","PRESCRIPTIONS","setFields","newTableValues","tableObj","totalTaxAmount","initialDiscount","initialDiscountType","offer","taxid","taxes_list","taxObj","tax_value","totalWithoutTaxWithDiscount","total_unit_cost","retail_price","checkPromoCode","applyPromoCodeDiscounts","discountValue","valueToSet","discountApplied","loadLoyaltyDiscount","OFFERS","onChangeOption","tempArr","onChangeOffer","selectedOffer","loyaltyDiscount","onchangeDiscountSimple","retailPrice","enterPromoCode","calculateGrandTotalWithoutDiscount","grandTotal","promoCodeCheckLoading","amount","CHECK_PROMO_CODE","appliedPromoCodeDiscount","removePromoCode","classType","maxQuantityforConsume","tempValues","loadTaxes","loadingInventory","drugItems","paramsApi","UNPAID_PRESCRIPTIONS","TAXES","expiry_date","code","addonAfter","CURRENCY_TYPE","align","tip","onSearch","total_quantity","previous","lineHeight","reduce","parseFloat","AddReturnInvoice","bank","return_mode","staff_data","with_tax","return_with_tax","cash_return","advance_value","returnCashAvailable","procedure_inv","inventory_inv","INVOICE_RETURN_API","onChangeHandle","calculateReturnCashAvailable","totalAmountPaid","pay_amount","pendingPayment","worthOfReturningItems","taxAllowed","units","payment","InvoiceReturnModal","handleSubmitReturnInvoice","CANCELINVOICE_VERIFY_OTP","returnIncoiceVisible","returnInvoiceData","returnInvoiceClose","otpSent","CANCELINVOICE_RESENT_OTP","sendOTP","EditReturnModal","handleSubmitEditInvoice","editIncoiceVisible","editInvoiceData","editInvoiceClose","CancelReturnModal","handleSubmitCancelInvoice","cancelIncoiceVisible","deleteInvoice","invoiceId","is_cancelled","SINGLE_INVOICES_API","cancelInvoiceClose","INVOICE_PDF_API","returnModelOpen","OTP_DELAY_TIME","CANCELINVOICE_GENERATE_OTP","cancelModalOpen","invoices","loadMoreInvoice","INVOICES_API","procedures","taxesdata","AddInvoicedynamic","banner","showIcon","InvoiceCard","invoiceFooter","tableObjects","reservation","medicinesPackages","reservation_data","medicines","final_price","price","mapper","bed_package","seat_type","editModelOpen","suffix","discount_value","AddPaymentForm","loadEditPyament","editPayment","addedInvoicesId","addedInvoice","totalPayingAmount","inv","invoice_data","pay_amount_wallet","calculateInvoicePayments","setPaymentAmount","addedInvoiceId","loadAvailableAdvance","AVAILABLE_ADVANCE","availableAdvance","loadPaymentModes","PAYMENT_MODES","paymentModes","selectedPaymentMode","invoicesToLoad","invoiceLoading","invoicesList","addInvoiceToPayments","is_pending","foundInvoice","invoicePayments","removeInvoiceToPayments","payable","totalPayingFromAdvanceAmount","invoicePayableAmount","advanceToBeSent","totalPayableAmount","setPaymentFromAdvanceAmount","changeSelectedPaymentMode","changeNotes","selectDate","newPayment","is_advance","totalAmountPayingFromAdvance","consumedInvoices","availableAdvancePayments","maxConsumeAmount","receivedPayIdFromRazorPay","BULK_PAYMENT_API","invoiceArray","location","search","pairValueArray","substr","patientObj","RAZORPAY_KEY","handler","paymentId","razorpay_payment_id","ACCEPT_PAYMENT","detail","Razorpay","borderBottom","max_allowed","step","paymentHandler","bed_package_price","EditPaymentModal","handleSubmitEditPayment","editPaymentVisible","editPaymentData","editPaymentClose","cancelPaymentVisible","CancelPaymentModal","handleSubmitCancelPayment","deletePayment","cancelPaymentClose","SINGLE_PAYMENT_API","loadPayments","PATIENT_PAYMENTS_API","PAYMENT_PDF","paymentmodes","PaymentCard","advancePay","PaymentFooter","rowKey","ReturnInvoices","RETURN_INVOICE_PDF_API","cancelReturnIncoiceVisible","editReturnInvoice","return_id","returnInvoiceId","deleteReturnInvoice","cancelReturnInvoiceClose","handleSubmitCancelReturnInvoice","returnInvoices","loadReturnInvoices","loadMoreReturnInvoice","SINGLE_RETURN_API","return_value","patientInvoiceDetailsInString","invoiceObj","invoiceDetailsString","trim","patientPaymentDetailsInString","paymentObj","paymentDetailsString","patientReturnInvoiceDetailsInString","payObj","PatientLedgers","loadPatientLedger","loadingLedger","PATIENT_LEDGER","ledgerData","balance","totalCredit","totalDebit","dataRow","ledgerEntry","ledger_type","type_id","details","credit","debit","return","return_pay","ledger","selectedList","PatientMerge","searchPatientString","removePatient","handlePatientSelect","mergePatient","patient_from","patient_to","MERGE_PATIENTS","defaultActiveFirstOption","showArrow","filterOption","handleChange","onSelect","PatientRequiredNoticeCard","PatientMedicalCertificate","handleCheck","excused_duty_checked","handleLighDutyCheck","fit_light_duty_checked","handleAttendanceCheck","attendance_checked","handleChangeStart","startDate","timeString","proof_attendance_from","excused_duty","fit_light_duty","proof_attendance","fit_light_duty_from","fit_light_duty_to","proof_attendance_date","proof_attendance_to","valid_court","invalid_court","no_mention","endDate","Date","days","handleChangeEnd","radioOption","NOTES","use12Hours","BedBookingForm","loadPackages","BED_PACKAGES","packages","loadDiseases","DISEASE_LIST","diseases","patientList","ptr","checkBedStatus","handleRoomType","calculateTotalAmount","from_date","to_date","pkgObj","no_of_days","CHECK_SEAT_AVAILABILITY","availabilitySeatTatkal","TATKAL","availabilitySeatNormal","NORMAL","start","end","paid","total_price","total_tax","rest_diseases","report_upload","BOOK_SEAT","handleClick","prevSate","payAmount","bedPkg","medicinePkg","total_medicine_price","normal_price","normal_tax_value","price_with_tax","tatkal_price","tatkal_tax_value","medicinePackage","medicineItem","choosePkg","handleMedicineSelect","changeDiscount","newTableValue","loadMedicinePackages","MEDICINE_PACKAGES","BOOKING_TYPE","is_or_not","available","room","input","Content","BookingHome","loadBedBookingReport","bedBookingReports","nextReport","BED_BOOKING_REPORTS","patients","bedBooking","hideReport","PatientHome","loadPatientPendingAmount","PATIENT_PENDING_AMOUNT","loadPatientWallet","AGENT_WALLET","getCommonSettings","nextProps","nextContext","currentPathLocation","foundFlag","ROUTES_TO_HIDE_PATIENT_SIDE_PANEL","matchPath","pathname","strict","redirectUrl","urlArray","splice","saveCommonSettings","MergePatients","WebAdmin","PatientWalletLedger","makeCSVString","dataArray","printColumn","line","downloadCSV","fileName","cCode","fName","bArr","charCodeAt","blob","Blob","Uint8Array","navigator","msSaveBlob","link","URL","createObjectURL","setAttribute","visibility","body","click","revokeObjectURL","addPDFHeader","pdf","addPDFFooter","setFontSize","getColumnSearchProps","filterDropdown","setSelectedKeys","selectedKeys","clearFilters","searchInput","onPressEnter","handleSearch","handleReset","filterIcon","filtered","onFilter","onFilterDropdownVisibleChange","select","highlightStyle","searchWords","searchText","autoEscape","textToHighlight","excelExport","pdfExport","excelColumns","hideExport","dataArrayForExcel","dataObjectToPush","export","jsPDF","rows","autoTable","startY","autoTableEndPosY","headerStyle","bodyStyles","save","exportToPDF","exportToExcel","pageSizeOptions","showSizeChanger","showQuickJumper","showTotal","range","startLoading","startMakingExtraLabels","extraLoadingLabel","Switch","saveSwitch","rcSwitch","renderSwitch","_this$props","_this$props$className","classes","loadingIcon","insertExtraNode","focus","blur","__ANT_SWITCH","nextPage","selectedStartDate","startOf","selectedEndDate","endOf","agents","selectedAgents","WALLET_LEDGER","loadSumData","ledgerDetails","WALLET_LEDGER_SUM","changeExpenseFilters","loadAgents","MY_AGENTS","agent","delete"],"mappings":"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","file":"static/js/12.f304ea4d.chunk.js","sourcesContent":["var baseAssignValue = require('./_baseAssignValue'),\n    baseForOwn = require('./_baseForOwn'),\n    baseIteratee = require('./_baseIteratee');\n/**\n * The opposite of `_.mapValues`; this method creates an object with the\n * same values as `object` and keys generated by running each own enumerable\n * string keyed property of `object` thru `iteratee`. The iteratee is invoked\n * with three arguments: (value, key, object).\n *\n * @static\n * @memberOf _\n * @since 3.8.0\n * @category Object\n * @param {Object} object The object to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Object} Returns the new mapped object.\n * @see _.mapValues\n * @example\n *\n * _.mapKeys({ 'a': 1, 'b': 2 }, function(value, key) {\n *   return key + value;\n * });\n * // => { 'a1': 1, 'b2': 2 }\n */\n\n\nfunction mapKeys(object, iteratee) {\n  var result = {};\n  iteratee = baseIteratee(iteratee, 3);\n  baseForOwn(object, function (value, key, object) {\n    baseAssignValue(result, iteratee(value, key, object), value);\n  });\n  return result;\n}\n\nmodule.exports = mapKeys;","import React from \"react\";\nimport {Card, Form, Popconfirm, Row, Divider} from 'antd';\nimport {displayMessage, getAPI, interpolate, postAPI} from \"../../../utils/common\";\nimport {OFFERS, PATIENT_GROUPS} from \"../../../constants/api\";\nimport CustomizedTable from \"../../common/CustomizedTable\";\nimport {INPUT_FIELD, SUCCESS_MSG_TYPE} from \"../../../constants/dataKeys\";\nimport DynamicFieldsForm from \"../../common/DynamicFieldsForm\";\n\nexport default class PatientGroups extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            patientGroup: [],\n            loading: true\n        }\n    }\n\n    componentDidMount() {\n        this.getPatientGroup();\n    }\n\n    getPatientGroup = () => {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                patientGroup: data,\n                loading: false\n            });\n        };\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            })\n\n        };\n        getAPI(interpolate(PATIENT_GROUPS, [this.props.active_practiceId]), successFn, errorFn);\n    }\n\n    deleteObject(record) {\n        let that = this;\n        let reqData = record;\n        reqData.is_active = false;\n        let successFn = function (data) {\n            that.getPatientGroup();\n        }\n        let errorFn = function () {\n        }\n        postAPI(interpolate(PATIENT_GROUPS, [this.props.active_practiceId]), reqData, successFn, errorFn);\n    }\n\n    render() {\n        let that = this;\n        const coloumns = [{\n            title: 'Group Name',\n            dataIndex: 'name',\n            key: 'name'\n        }, {\n            title: 'Patient Count',\n            dataIndex: 'patient_count',\n            key: 'patient_count'\n        }, {\n            title: 'Action',\n            key: 'action',\n            render: (text, record) => (\n                <Popconfirm title=\"Are you sure delete this prescription?\" onConfirm={() => that.deleteObject(record)}\n                            okText=\"Yes\" cancelText=\"No\">\n                    <a>\n                        Delete\n                    </a>\n                </Popconfirm>\n            ),\n        }];\n        const fields = [{\n            label: \"Group Name\",\n            key: \"name\",\n            required: true,\n            type: INPUT_FIELD\n        }]\n        const formProp = {\n            successFn: function (data) {\n                console.log(data);\n                displayMessage(SUCCESS_MSG_TYPE, \"success\")\n                that.getPatientGroup()\n\n            },\n            errorFn: function () {\n\n            },\n            action: interpolate(PATIENT_GROUPS, [this.props.active_practiceId]),\n            method: \"post\",\n            beforeSubmit: function (data) {\n                console.log(data)\n            }\n        }\n        const TestFormLayout = Form.create()(DynamicFieldsForm);\n        return <Row>\n            <TestFormLayout formProp={formProp}\n                            title={\"Patient Groups\"}\n                            fields={fields} {...this.props}/>\n            <Divider/>\n            <CustomizedTable dataSource={this.state.patientGroup} loading={this.state.loading} columns={coloumns}/>\n        </Row>\n    }\n}\n","import React from \"react\";\nimport {\n    Avatar, Input, Card, Col, Icon, InputNumber, Radio, Row, Button, Spin, Modal, Tag,\n    DatePicker, Select, Form, Divider\n} from \"antd\";\nimport {getAPI, interpolate, makeFileURL, postAPI} from \"../../utils/common\";\nimport {\n    PATIENT_GROUPS,\n    SEARCH_PATIENT,\n    PATIENTS_LIST,\n    ADVANCED_SEARCH_PATIENT, SOURCE\n} from \"../../constants/api\";\nimport InfiniteFeedLoaderButton from \"../common/InfiniteFeedLoaderButton\";\nimport PatientGroups from \"./patientGroups/PatientGroups\";\nimport {hideEmail, hideMobile} from \"../../utils/permissionUtils\";\nimport {\n    ADVANCED_SEARCH,\n    BLOOD_GROUPS,\n    HAS_AADHAR_ID,\n    HAS_AGE,\n    HAS_DOB,\n    HAS_EMAIL,\n    HAS_GENDER, HAS_PINCODE, HAS_STREET, REFERED_BY_AGENT, GENDER_OPTION\n} from \"../../constants/hardData\";\nimport {CHOOSE, GENDER} from \"../../constants/dataKeys\";\nimport moment from \"moment\";\nimport filter from \"lodash/filter\";\nimport mapKeys from \"lodash/mapKeys\"\nimport PermissionDenied from \"../common/errors/PermissionDenied\";\n\nconst {Meta} = Card;\nconst Search = Input.Search;\nconst {MonthPicker} = DatePicker;\nlet id = 1;\n\nclass PatientSelection extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            patientListData: [],\n            patientGroup: [],\n            morePatients: null,\n            loading: true,\n            selectedPatientGroup: 'all',\n            advanced_option: ADVANCED_SEARCH,\n            selectedOption: {},\n            // keys:1,\n            sourceList: [],\n            custm_col: 8,\n            advanceLoading: false,\n        };\n        this.getPatientListData = this.getPatientListData.bind(this);\n        this.searchPatient = this.searchPatient.bind(this);\n        this.getMorePatient = this.getMorePatient.bind(this);\n        this.getSources = this.getSources.bind(this);\n    }\n\n    componentDidMount() {\n        this.getPatientListData();\n        this.getPatientGroup();\n        this.getSources();\n    }\n\n    getSources() {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                sourceList: data,\n            })\n        };\n        let errorFun = function () {\n\n        };\n        getAPI(SOURCE, successFn, errorFun);\n    }\n\n\n    getPatientGroup() {\n        let that = this;\n        let successFn = function (data) {\n            let filteredData = data.sort(function (a, b) {\n                return b.patient_count - a.patient_count\n            })\n            that.setState({\n                patientGroup: filteredData,\n            });\n        };\n        let errorFn = function () {\n            that.setState({})\n\n        };\n        getAPI(interpolate(PATIENT_GROUPS, [this.props.active_practiceId]), successFn, errorFn);\n    }\n\n    getPatientListData() {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                patientListData: data.results,\n                morePatients: data.next,\n                currentPage: data.current,\n                totalPatients: data.count,\n                loading: false,\n                // advancedOptionShow: false,\n            })\n        };\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            })\n\n        };\n        getAPI(PATIENTS_LIST, successFn, errorFn);\n    }\n\n    searchPatient(value, page = 1) {\n\n        let that = this;\n        that.setState({\n            searchvalue: true,\n            searchString: value\n        });\n        let successFn = function (data) {\n            that.setState(function (prevState) {\n                if (prevState.searchString == value)\n                    if (data.current > 1) {\n                        return {\n                            patientListData: [...prevState.patientListData, ...data.results],\n                            morePatients: data.next,\n                            currentPage: data.current,\n                        }\n                    } else {\n                        return {\n                            patientListData: [...data.results],\n                            morePatients: data.next,\n                            currentPage: data.current,\n                            loading: false\n                        }\n                    }\n            })\n\n        };\n        let errorFn = function () {\n\n        };\n        let apiParams = {\n            page: page,\n            page_size: 20\n        };\n        if (value) {\n            getAPI(interpolate(SEARCH_PATIENT, [value]), successFn, errorFn, apiParams);\n        } else {\n            this.getPatientListData();\n        }\n    }\n\n    getMorePatient() {\n        let that = this;\n        let current = this.state.currentPage;\n\n        let successFn = function (data) {\n            if (data.current == current + 1)\n                that.setState(function (prevState) {\n                    if (data.current > 1)\n                        return {\n                            patientListData: [...prevState.patientListData, ...data.results],\n                            morePatients: data.next,\n                            currentPage: data.current,\n                        }\n                    else\n                        return {\n                            patientListData: [...data.results],\n                            morePatients: data.next,\n                            currentPage: data.current,\n                            loading: false\n                        }\n                })\n        }\n        let errorFn = function () {\n\n        }\n        let params = {};\n        if (current) {\n            params.page = parseInt(current) + 1;\n        } else {\n            this.setState({\n                loading: true\n            })\n        }\n        let patientGroup = this.state.selectedPatientGroup;\n        if (patientGroup != 'all') {\n            if (patientGroup == 'smart_a' || patientGroup == 'smart_b' || patientGroup == 'smart_c' || patientGroup == 'smart_d' || patientGroup == 'smart_e' || patientGroup == 'smart_f') {\n                switch (patientGroup) {\n                    case 'smart_a':\n                        params.gender = 'male';\n                        break;\n                    case 'smart_b':\n                        params.gender = 'female';\n                        break;\n                    case 'smart_c':\n                        params.gender = 'female';\n                        params.age = 30;\n                        params.type = 'gt';\n                        break;\n                    case 'smart_d':\n                        params.gender = 'female';\n                        params.age = 30;\n                        params.type = 'lt';\n                        break;\n                    case 'smart_e':\n                        params.gender = 'male';\n                        params.age = 30;\n                        params.type = 'gt';\n                        break;\n                    case 'smart_f':\n                        params.gender = 'male';\n                        params.age = 30;\n                        params.type = 'lt';\n                        break;\n                }\n            } else {\n                params.group = this.state.selectedPatientGroup\n            }\n\n        }\n        getAPI(PATIENTS_LIST, successFn, errorFn, {...params});\n    }\n\n    togglePatientGroupEditing = (option) => {\n        this.setState({\n            showPatientGroupModal: !!option\n        });\n        if (!option) {\n            this.getPatientGroup();\n        }\n    }\n\n    changeSelectedPatientGroup = (e) => {\n        let that = this;\n        this.setState({\n            selectedPatientGroup: e.target.value,\n            currentPage: null\n        }, function () {\n            that.getMorePatient();\n        })\n    };\n\n    advancedOption(value) {\n        // console.log(\"value\",value)\n        let that = this;\n        this.getPatientListData();\n        this.setState({\n            advancedOptionShow: !value,\n            selectedOption: '',\n        });\n        if (value) {\n            that.props.form.setFieldsValue({\n                keys: [0],\n            });\n        }\n\n    }\n\n    addNewOptionField = () => {\n\n        const {form} = this.props;\n\n        const keys = form.getFieldValue('keys');\n        // console.log(\"form\",form,keys)\n        const nextKeys = keys.concat(id++);\n        form.setFieldsValue({\n            keys: nextKeys,\n        });\n    };\n    removeNewOptionField = (k) => {\n        const {form} = this.props;\n        const keys = form.getFieldValue('keys');\n        if (keys.length === 1) {\n            return;\n        }\n\n        form.setFieldsValue({\n            keys: keys.filter(key => key !== k),\n        });\n    };\n\n    handleChangeOption = (index, type, value) => {\n        let that = this;\n        let selectedOption = {};\n        that.setState(function (prevState) {\n            return {\n                selectedOption: {...prevState.selectedOption, [index]: value},\n                custm_col: value ? 12 : 8,\n            }\n        })\n    };\n\n    AdvanceSearchPatient = (e) => {\n        let that = this;\n        e.preventDefault();\n        let reqData = {};\n        this.props.form.validateFields((err, values) => {\n            if (!err) {\n                reqData = {\n                    ...values,\n                    dob: values.dob ? moment(values.dob).format('YYYY-MM-DD') : null,\n                    dob_gte: values.dob_gte ? moment(values.dob_gte).format('YYYY-MM-DD') : null,\n                    dob_lte: values.dob_lte ? moment(values.dob_lte).format('YYYY-MM-DD') : null,\n                    dob_month: values.dob_month ? moment(values.dob_month).format('MM') : null,\n                };\n            }\n        });\n        delete reqData.keys;\n        that.setState({\n            patientData: reqData,\n        }, function () {\n            that.loadAdvanceSearchPatient();\n        });\n\n    };\n\n    loadAdvanceSearchPatient = (page = 1) => {\n        let that = this;\n        let reqData = that.state.patientData;\n        that.setState({\n            advancedSearch: true,\n            advanceLoading: true,\n        });\n        let successFn = function (data) {\n            that.setState(function (prevState) {\n                if (data.current > 1) {\n                    return {\n                        patientListData: [...prevState.patientListData, ...data.results],\n                        morePatientList: data.next,\n                        currentPage: data.current,\n                        advanceLoading: false\n                    }\n                } else {\n                    return {\n                        patientListData: [...data.results],\n                        morePatientList: data.next,\n                        currentPage: data.current,\n                        advanceLoading: false\n                    }\n                }\n            });\n        };\n        let errorFn = function () {\n            that.setState({\n                advanceLoading: false,\n            })\n        };\n        reqData.page = page;\n        getAPI(ADVANCED_SEARCH_PATIENT, successFn, errorFn, reqData)\n\n    }\n\n    render() {\n        let that = this;\n        const {getFieldDecorator, getFieldValue} = this.props.form;\n\n        const formItemLayout = {\n            labelCol: {\n                xs: {span: 24},\n                sm: {span: 4}\n            },\n            wrapperCol: {\n                xs: {span: 24},\n                sm: {span: 20}\n            }\n        };\n        getFieldDecorator('keys', {initialValue: [0]});\n        const keys = getFieldValue('keys');\n        const selectedOptionKeys = {\n            ...mapKeys(this.state.selectedOption, function (value) {\n                return value\n            })\n        }\n        const chooseOption = keys.map((k, index) => (<Row gutter={12} key={k}>\n                <Col span={10}>\n                    <Select style={{width: '200px'}} defaultValue={CHOOSE} key={k} size={\"small\"}\n                            onChange={(value) => this.handleChangeOption(k, 'type', value)}>\n                        <Select.Option value={''}>{CHOOSE}</Select.Option>\n                        {filter(this.state.advanced_option, function (item) {\n                            if (that.state.selectedOption[k] == item.value)\n                                return true\n                            return !selectedOptionKeys[item.value]\n                        }).map((item) => <Select.Option value={item.value} key={k}>\n                            {item.label}</Select.Option>)}\n                    </Select>\n                </Col>\n                {this.state.selectedOption ?\n                    <>\n                        <Col span={8}>\n                            <FormItems k={k} selectedOption={this.state.selectedOption} form={this.props.form}\n                                       sourceList={this.state.sourceList}/>\n                        </Col>\n                        <Col span={4}>\n                            {index ? (\n                                <Button onClick={() => this.removeNewOptionField(k)} size={\"small\"} style={{margin: 5}}>\n                                    <Icon className=\"dynamic-delete-button\" type=\"minus-circle-o\"\n                                          style={{color: \"red\"}}/>\n                                </Button>\n                            ) : null}\n                            {index == keys.length - 1 && that.state.selectedOption[k] ?\n                                <Button onClick={this.addNewOptionField} size={\"small\"} style={{margin: 5}}>\n                                    <Icon className=\"dynamic-delete-button\" type=\"plus-circle-o\"/>\n                                </Button> : null}\n                        </Col>\n                    </> : null\n                }\n            </Row>\n        ));\n\n\n        return that.props.activePracticePermissions.ViewPatient ? <div>\n\n            <Row gutter={16}>\n                {this.state.advancedOptionShow ?\n                    <Form onSubmit={this.AdvanceSearchPatient} layout={'inline'}>\n                        <Row gutter={16}>\n                            <Col span={16}>\n                                {chooseOption}\n                            </Col>\n                            <Col span={4} style={{display: 'flex'}}>\n                                <Form.Item>\n                                    <Button icon=\"search\" htmlType=\"submit\" onSubmit={this.AdvanceSearchPatient}\n                                            type={\"primary\"}\n                                            style={{margin: 5}}\n                                    >Search</Button>\n                                </Form.Item>\n                                <Form.Item>\n                                    <Button style={{margin: 5}} onClick={(value) => this.advancedOption(true)}\n                                            size={\"small\"}>Basic\n                                        Search</Button>\n                                </Form.Item>\n                            </Col>\n                        </Row>\n                    </Form>\n                    : <>\n                        <Col span={12}>\n                            <Search style={{margin: 5}}\n                                    placeholder=\"Search Patient By Name / ID / Mobile No / Aadhar No\" size={\"small\"}\n                                    onChange={value => this.searchPatient(value.target.value)}\n                                    enterButton/>\n                        </Col>\n                        <Col span={12} style={{textAlign: \"center\"}}>\n                            <Button style={{margin: 5}} onClick={(value) => this.advancedOption(false)} size={\"small\"}>Advance\n                                Search</Button>\n                        </Col>\n\n                    </>}\n                <Divider style={{margin: 0}}/>\n            </Row>\n            <Row gutter={16}>\n                <Col span={5}\n                     style={{\n                         height: 'calc(100% - 55px)',\n                         overflow: 'auto',\n                         padding: '10px',\n                         // backgroundColor: '#e3e5e6',\n                         // borderRight: '1px solid #ccc'\n                     }}>\n                    <Radio.Group buttonStyle=\"solid\" defaultValue={this.state.selectedPatientGroup}\n                                 onChange={this.changeSelectedPatientGroup}>\n                        <h2>Patients</h2>\n                        <Radio.Button key={'all'} style={{width: '100%', backgroundColor: 'transparent', border: '0px'}}\n                                      value=\"all\">\n                            All Patients\n                            <Tag color=\"#87d068\" style={{float: 'right', margin: 4}}>\n                                {this.state.totalPatients ? this.state.totalPatients : 0}\n                            </Tag>\n                        </Radio.Button>\n                        {/*<Radio.Button style={{width: '100%', backgroundColor: 'transparent', border: '0px'}} value=\"b\">*/}\n                        {/*Recently Visited*/}\n                        {/*</Radio.Button>*/}\n                        {/*<Radio.Button style={{width: '100%', backgroundColor: 'transparent', border: '0px'}} value=\"c\">*/}\n                        {/*Recently Added*/}\n                        {/*</Radio.Button>*/}\n                        <p><br/></p>\n                        <h2>Groups</h2>\n                        <p><b>My Groups</b>\n                            <a style={{float: 'right'}}\n                               onClick={() => this.togglePatientGroupEditing(true)}>Manage</a></p>\n                        {this.state.patientGroup.map((group) => <Radio.Button\n                            key={group.id}\n                            style={{width: '100%', backgroundColor: 'transparent', border: '0px'}} value={group.id}>\n                            {group.name}\n                            <Tag color=\"#87d068\" style={{float: 'right', margin: 4}}>\n                                {group.patient_count}\n                            </Tag>\n                        </Radio.Button>)}\n                        <p><br/></p>\n                        <p><b>Smart Groups</b></p>\n                        <Radio.Button\n                            style={{width: '100%', backgroundColor: 'transparent', border: '0px'}} key={\"smart_a\"}\n                            value={\"smart_a\"}>\n                            All Male\n                        </Radio.Button>\n                        <Radio.Button\n                            style={{width: '100%', backgroundColor: 'transparent', border: '0px'}} key={\"smart_b\"}\n                            value={\"smart_b\"}>\n                            All Female\n                        </Radio.Button>\n                        <Radio.Button\n                            style={{width: '100%', backgroundColor: 'transparent', border: '0px'}} key={\"smart_e\"}\n                            value={\"smart_e\"}>\n                            Male Over 30\n                        </Radio.Button>\n                        <Radio.Button\n                            style={{width: '100%', backgroundColor: 'transparent', border: '0px'}} key={\"smart_c\"}\n                            value={\"smart_c\"}>\n                            Female Over 30\n                        </Radio.Button>\n                        <Radio.Button\n                            style={{width: '100%', backgroundColor: 'transparent', border: '0px'}} key={\"smart_f\"}\n                            value={\"smart_f\"}>\n                            Male Under 30\n                        </Radio.Button>\n                        <Radio.Button\n                            style={{width: '100%', backgroundColor: 'transparent', border: '0px'}} key={\"smart_d\"}\n                            value={\"smart_d\"}>\n                            Female Under 30\n                        </Radio.Button>\n                        <p><br/></p>\n                    </Radio.Group>\n                </Col>\n                <Col span={19} style={{overflow: 'scroll', borderLeft: '1px solid #ccc'}}>\n\n\n                    <Spin spinning={this.state.loading}>\n                        <Row>\n                            {this.state.patientListData.length ?\n                                this.state.patientListData.map((patient) => <PatientCard {...patient}\n                                                                                         key={patient.id}\n                                                                                         showMobile={that.props.activePracticePermissions.PatientPhoneNumber}\n                                                                                         showEmail={that.props.activePracticePermissions.PatientEmailId}\n                                                                                         setCurrentPatient={that.props.setCurrentPatient}/>) :\n                                <p style={{textAlign: 'center'}}>No Data Found</p>\n                            }\n                        </Row>\n                    </Spin>\n                    {this.state.searchvalue ? <InfiniteFeedLoaderButton loaderFunction={this.searchPatient}\n                                                                        loading={this.state.loading}\n                                                                        hidden={!this.state.morePatients}/> : (this.state.advancedSearch ?\n                        <InfiniteFeedLoaderButton loading={this.state.advanceLoading}\n                                                  loaderFunction={() => this.loadAdvanceSearchPatient(that.state.morePatientList)}\n                                                  hidden={!this.state.morePatientList}/> :\n\n                        <InfiniteFeedLoaderButton loaderFunction={this.getMorePatient}\n                                                  loading={this.state.loading}\n                                                  hidden={!this.state.morePatients}/>)\n                    }\n                </Col>\n\n                {/*<Col span={19} style={{overflow: 'scroll', borderLeft: '1px solid #ccc'}}>*/}\n                {/*    <Search placeholder=\"Search Patient By Name / ID / Mobile No / Aadhar No\"*/}\n                {/*            onChange={value => this.searchPatient(value.target.value)}*/}\n                {/*            enterButton/>*/}\n\n                {/*    <Spin spinning={this.state.loading}>*/}\n                {/*        <Row>*/}\n                {/*            {this.state.patientListData.length ?*/}\n                {/*                this.state.patientListData.map((patient) => <PatientCard {...patient}*/}\n                {/*                                                                         key={patient.id}*/}\n                {/*                                                                         showMobile={that.props.activePracticePermissions.PatientPhoneNumber}*/}\n                {/*                                                                         showEmail={that.props.activePracticePermissions.PatientEmailId}*/}\n                {/*                                                                         setCurrentPatient={that.props.setCurrentPatient}/>) :*/}\n                {/*                <p style={{textAlign: 'center'}}>No Data Found</p>*/}\n                {/*            }*/}\n                {/*        </Row>*/}\n                {/*    </Spin>*/}\n                {/*    {this.state.searchvalue ?  <InfiniteFeedLoaderButton loaderFunction={this.searchPatient}*/}\n                {/*                                                         loading={this.state.loading}*/}\n                {/*                                                         hidden={!this.state.morePatients}/> :*/}\n\n                {/*        <InfiniteFeedLoaderButton loaderFunction={this.getMorePatient}*/}\n                {/*                                  loading={this.state.loading}*/}\n                {/*                                  hidden={!this.state.morePatients}/>*/}\n                {/*    }*/}\n\n                {/*</Col>*/}\n                <Modal visible={this.state.showPatientGroupModal}\n                       footer={null}\n                       onCancel={() => this.togglePatientGroupEditing(false)}>\n                    <PatientGroups {...this.props}/>\n                </Modal>\n            </Row>\n        </div> : <PermissionDenied/>\n    }\n}\n\nexport default Form.create()(PatientSelection);\n\nfunction PatientCard(patient) {\n    return <Col xs={24} sm={24} md={12} lg={8} xl={8} xxl={6}>\n        <Card onClick={() => patient.setCurrentPatient(patient)} style={{margin: '3px', paddingBottom: \"8px\"}}>\n            <Meta avatar={(patient.image ? <Avatar src={makeFileURL(patient.image)} size={50}/> :\n                <Avatar style={{backgroundColor: '#87d068'}} size={50}>\n                    {patient.user.first_name ? patient.user.first_name.charAt(0) :\n                        <Icon type=\"user\"/>}\n                </Avatar>)}\n                  title={patient.user.first_name}\n                  description={\n                      <span>{patient.showMobile ? patient.user.mobile : hideMobile(patient.user.mobile)}<br/>{patient.showEmail ? patient.user.email : hideEmail(patient.user.email)}\n                          <br/>\n                          <span className={\"patientIdHighlight\"}>#\n                              {patient.custom_id ? patient.custom_id : patient.id}\n                              {patient.gender ? \",\" + patient.gender.charAt(0).toUpperCase() : null}\n                          </span>\n\n                      </span>}/>\n        </Card>\n    </Col>;\n}\n\nfunction FormItems(index) {\n    return (\n        <>\n            {index.selectedOption[index.k] == 'name' ?\n                <Form.Item key={index.key} label={'contains'}>\n                    {index.form.getFieldDecorator('name',)\n                    (<Input placeholder={\"patient Name\"} size={\"small\"}/>)\n                    }\n                </Form.Item> : null}\n\n            {index.selectedOption[index.k] == 'phone' ?\n                <Form.Item key={index.key} label={'contains'}>\n                    {index.form.getFieldDecorator('phone',)\n                    (<Input placeholder={\"Contact Number\"} size={\"small\"}/>)\n                    }\n                </Form.Item> : null}\n\n            {index.selectedOption[index.k] == 'age' ?\n                <Form.Item key={index.key}>\n                    {index.form.getFieldDecorator('age',)\n                    (<InputNumber placeholder={\"Patient Age\"} size={\"small\"}/>)\n                    }\n                </Form.Item> : null}\n\n            {index.selectedOption[index.k] == 'age_gte' ?\n                <Form.Item key={index.key}>\n                    {index.form.getFieldDecorator('age_gte',)\n                    (<InputNumber placeholder={\"Age more than\"} size={\"small\"}/>)\n                    }\n                </Form.Item> : null}\n\n            {index.selectedOption[index.k] == 'age_lte' ?\n                <Form.Item key={index.key}>\n                    {index.form.getFieldDecorator('age_lte',)\n                    (<InputNumber placeholder={\"Age Less than\"} size={\"small\"}/>)\n                    }\n                </Form.Item> : null}\n\n            {index.selectedOption[index.k] == 'has_age' ?\n                <Form.Item>\n                    {index.form.getFieldDecorator('has_age')\n                    (<Select style={{width: 100}} size={\"small\"}>\n                        {HAS_AGE.map((option) => <Select.Option value={option.value}>{option.label} </Select.Option>)}\n                    </Select>)\n                    }\n                </Form.Item>\n                : null}\n\n            {index.selectedOption[index.k] == 'dob' ?\n                <Form.Item key={index.key} label={'is'}>\n                    {index.form.getFieldDecorator('dob',)\n                    (<DatePicker placeholder={\"Date of Birth\"} size={\"small\"}/>)\n                    }\n                </Form.Item> : null}\n\n            {index.selectedOption[index.k] == 'dob_gte' ?\n                <Form.Item key={index.key}>\n                    {index.form.getFieldDecorator('dob_gte',)\n                    (<DatePicker size={\"small\"}/>)\n                    }\n                </Form.Item> : null}\n\n            {index.selectedOption[index.k] == 'dob_lte' ?\n                <Form.Item key={index.key}>\n                    {index.form.getFieldDecorator('dob_lte',)\n                    (<DatePicker size={\"small\"}/>)\n                    }\n                </Form.Item> : null}\n\n            {index.selectedOption[index.k] == 'dob_month' ?\n                <Form.Item key={index.key}>\n                    {index.form.getFieldDecorator('dob_month',)\n                    (<MonthPicker size={\"small\"}/>)\n                    }\n                </Form.Item> : null}\n\n            {index.selectedOption[index.k] == 'has_dob' ?\n                <Form.Item>\n                    {index.form.getFieldDecorator('has_dob')\n                    (<Select style={{width: 100}} size={\"small\"}>\n                        {HAS_DOB.map((option) => <Select.Option value={option.value}>{option.label} </Select.Option>)}\n                    </Select>)\n                    }\n                </Form.Item>\n                : null}\n\n            {index.selectedOption[index.k] == 'patient_id' ?\n                <Form.Item key={index.key} label={'contains'}>\n                    {index.form.getFieldDecorator('patient_id',)\n                    (<Input placeholder={\"Patient Id\"} size={\"small\"}/>)\n                    }\n                </Form.Item> : null}\n\n            {index.selectedOption[index.k] == 'has_aadhar' ?\n                <Form.Item>\n                    {index.form.getFieldDecorator('has_aadhar')\n                    (<Select style={{width: 100}} size={\"small\"}>\n                        {HAS_AADHAR_ID.map((option) => <Select.Option\n                            value={option.value}>{option.label} </Select.Option>)}\n                    </Select>)\n                    }\n                </Form.Item>\n                : null}\n\n            {index.selectedOption[index.k] == 'aadhar' ?\n                <Form.Item key={index.key} label={'contains'}>\n                    {index.form.getFieldDecorator('aadhar',)\n                    (<Input placeholder={\"Aadhar Id\"} size={\"small\"}/>)\n                    }\n                </Form.Item> : null}\n\n            {index.selectedOption[index.k] == 'email' ?\n                <Form.Item key={index.key} label={'contains'}>\n                    {index.form.getFieldDecorator('email',)\n                    (<Input placeholder={\"Email Id\"} size={\"small\"}/>)\n                    }\n                </Form.Item> : null}\n\n            {index.selectedOption[index.k] == 'has_email' ?\n                <Form.Item>\n                    {index.form.getFieldDecorator('has_email')\n                    (<Select style={{width: 100}} size={\"small\"}>\n                        {HAS_EMAIL.map((option) => <Select.Option value={option.value}>{option.label} </Select.Option>)}\n                    </Select>)\n                    }\n                </Form.Item>\n                : null}\n\n            {index.selectedOption[index.k] == 'gender' ?\n                <Form.Item key={index.key} label={'is'}>\n                    {index.form.getFieldDecorator('gender')\n                    (<Select style={{width: 100}} size={\"small\"}>\n                        {GENDER_OPTION.map((option) => <Select.Option\n                            value={option.value}>{option.label} </Select.Option>)}\n                    </Select>)\n                    }\n                </Form.Item>\n                : null}\n\n\n            {index.selectedOption[index.k] == 'has_gender' ?\n                <Form.Item>\n                    {index.form.getFieldDecorator('has_gender')\n                    (<Select style={{width: 100}} size={\"small\"}>\n                        {HAS_GENDER.map((option) => <Select.Option\n                            value={option.value}>{option.label} </Select.Option>)}\n                    </Select>)\n                    }\n                </Form.Item>\n                : null}\n\n            {index.selectedOption[index.k] == 'pincode' ?\n                <Form.Item key={index.key} label={'contains'}>\n                    {index.form.getFieldDecorator('pincode',)\n                    (<Input placeholder={\"PINCODE\"} size={\"small\"}/>)\n                    }\n                </Form.Item> : null}\n\n            {index.selectedOption[index.k] == 'has_pincode' ?\n                <Form.Item>\n                    {index.form.getFieldDecorator('has_pincode')\n                    (<Select style={{width: 100}} size={\"small\"}>\n                        {HAS_PINCODE.map((option) => <Select.Option\n                            value={option.value}>{option.label} </Select.Option>)}\n                    </Select>)\n                    }\n                </Form.Item>\n                : null}\n\n            {index.selectedOption[index.k] == 'has_street' ?\n                <Form.Item>\n                    {index.form.getFieldDecorator('has_street')\n                    (<Select style={{width: 100}} size={\"small\"}>\n                        {HAS_STREET.map((option) => <Select.Option\n                            value={option.value}>{option.label} </Select.Option>)}\n                    </Select>)\n                    }\n                </Form.Item>\n                : null}\n\n\n            {index.selectedOption[index.k] == 'street' ?\n                <Form.Item key={index.key} label={'contains'}>\n                    {index.form.getFieldDecorator('street',)\n                    (<Input placeholder={\"Street Address\"} size={\"small\"}/>)\n                    }\n                </Form.Item> : null}\n\n            {index.selectedOption[index.k] == 'blood_group' ?\n                <Form.Item key={index.key} label={'is'}>\n                    {index.form.getFieldDecorator('blood_group')\n                    (<Select style={{width: 100}} size={\"small\"}>\n                        {BLOOD_GROUPS.map((option) => <Select.Option\n                            value={option.value}>{option.name} </Select.Option>)}\n                    </Select>)\n                    }\n                </Form.Item>\n                : null}\n\n            {index.selectedOption[index.k] == 'source' ?\n                <Form.Item>\n                    {index.form.getFieldDecorator('source')\n                    (<Select style={{width: 100}} size={\"small\"}>\n                        {index.sourceList.map((option) => <Select.Option\n                            value={option.id}>{option.name} </Select.Option>)}\n                    </Select>)\n                    }\n                </Form.Item>\n                : null}\n\n            {index.selectedOption[index.k] == 'agent_referal' ?\n                <Form.Item>\n                    {index.form.getFieldDecorator('agent_referal')\n                    (<Select style={{width: 100}} size={\"small\"}>\n                        {REFERED_BY_AGENT.map((option) => <Select.Option\n                            value={option.value}>{option.label} </Select.Option>)}\n                    </Select>)\n                    }\n                </Form.Item>\n                : null}\n\n\n        </>)\n}","import React from \"react\";\nimport {Divider} from \"antd\";\nimport {displayMessage, getAPI, interpolate} from \"../../../utils/common\";\nimport {INPUT_FIELD, SUCCESS_MSG_TYPE} from \"../../../constants/dataKeys\";\nimport {Form, List} from \"antd/lib/index\";\nimport DynamicFieldsForm from \"../../common/DynamicFieldsForm\";\nimport {PATIENT_CALL_NOTES, PATIENT_GROUPS, PATIENT_NOTES} from \"../../../constants/api\";\nimport moment from \"moment\";\n\nexport default class PatientNotes extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            notes: [],\n            callNotesLoading:false,\n            loading:true\n        }\n    }\n\n    componentDidMount() {\n        this.loadPatientNotes();\n        this.loadPatientCallNotes();\n    }\n\n    loadPatientNotes() {\n        let that = this;\n        that.setState({\n            loading:true\n        })\n        let successFn = function (data) {\n            that.setState({\n                notes: data,\n                loading: false\n            });\n        };\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            })\n\n        };\n        getAPI(interpolate(PATIENT_NOTES, [this.props.patientId, this.props.active_practiceId]), successFn, errorFn);\n    }\n    loadPatientCallNotes=()=>{\n      let that = this;\n      that.setState({\n          callNotesLoading:true\n      })\n      let successFn = function (data) {\n          that.setState({\n              callNotes:data,\n              callNotesLoading:false,\n          })\n      }\n      let errorFn = function (data) {\n          that.setState({\n              callNotesLoading:false\n          })\n      }\n      let apiParams ={\n          patient:this.props.patientId\n      }\n      getAPI(PATIENT_CALL_NOTES,  successFn, errorFn, apiParams);\n    };\n\n    render() {\n        let that = this;\n        const fields = [{\n            key: \"name\",\n            required: true,\n            type: INPUT_FIELD\n        }]\n        const formProp = {\n            successFn: function (data) {\n\n                displayMessage(SUCCESS_MSG_TYPE, \"Patient Note Added\");\n                that.loadPatientNotes();\n            },\n            errorFn: function () {\n\n            },\n            action: interpolate(PATIENT_NOTES, [this.props.patientId, this.props.active_practiceId]),\n            method: \"post\",\n            beforeSubmit: function (data) {\n\n            }\n        }\n        const defaultValues = [{key: 'patient', value: this.props.patientId}, {\n            key: 'practice',\n            value: this.props.active_practiceId\n        }]\n        const TestFormLayout = Form.create()(DynamicFieldsForm);\n        return <div>\n            <Divider>Patient Notes</Divider>\n            <TestFormLayout formProp={formProp}\n                            defaultValues={defaultValues}\n                            fields={fields}/>\n            <List size={'small'} loading ={this.state.loading} dataSource={this.state.notes} renderItem={item => <List.Item>\n                <List.Item.Meta\n                    title={item.name}\n                    description={'by ' + (item.staff ? item.staff.user.first_name : '--')+' on '+moment(item.created_at).format('lll')}\n                />\n            </List.Item>}/>\n\n            <Divider>Voice Call Notes</Divider>\n            <List size={'small'} loading ={this.state.callNotesLoading} dataSource={this.state.callNotes} renderItem={item => <List.Item>\n                <List.Item.Meta\n                    title={item.remarks?item.remarks:'--'}\n                    description={'Created on '+moment(item.timestamp).format('lll')}\n                />\n            </List.Item>}/>\n\n        </div>\n    }\n}\n","import React from \"react\";\nimport {Divider,Form} from \"antd\";\nimport {displayMessage, getAPI, interpolate} from \"../../../utils/common\";\nimport {PATIENTS_MEMBERSHIP_API,MEMBERSHIP_API} from \"../../../constants/api\"\nimport {INPUT_FIELD,DATE_PICKER ,SUCCESS_MSG_TYPE, SELECT_FIELD} from \"../../../constants/dataKeys\";\nimport DynamicFieldsForm from \"../../common/DynamicFieldsForm\";\nimport moment from \"moment\";\nimport {Redirect} from \"react-router-dom\";\n\nexport default class MedicalMembership extends React.Component{\n    constructor(props) {\n        super(props);\n        this.state = {\n            redirect:false,\n            currentPatient: this.props.currentPatient,\n            Membership:[],\n            \n        }\n        this.loadMembership =this.loadMembership.bind(this);\n    }\n\n    componentDidMount() {\n        this.loadMembership();\n    }\n\n    loadMembership(){\n        let that=this;\n        let successFn =function (data){\n            that.setState({\n                Membership:data,\n                loading:false\n            })\n        };\n        let errorFn = function(){\n            that.setState({\n                loading:false\n            })\n        };\n        if(that.state.currentPatient){\n            getAPI(interpolate(MEMBERSHIP_API ,[that.props.active_practiceId]),successFn,errorFn);\n        }\n\n    }\n    render(){\n        let that = this;\n        console.log(\"form state\",this.state)\n        const fields = [{\n            label: \"Type\",\n            key: \"medical_membership\",\n            type: SELECT_FIELD,\n            options: this.state.Membership.map(MembershipItem => ({label: MembershipItem.name, value: MembershipItem.id}))\n        },{\n            label:\"Start Date\",\n            key:\"medical_from\",\n            initilValue:moment(),\n            type:DATE_PICKER,format:'YYYY-MM-DD'\n\n        }];\n            const formProp = {\n                successFn: function (data) {\n                    displayMessage(SUCCESS_MSG_TYPE, \"Medical Membership added\");\n                    that.props.loadProfile();\n                    that.props.loadMedicalMembership();\n                    that.props.formChange();\n                },\n                errorFn: function () {\n                    \n                },\n                action: interpolate(PATIENTS_MEMBERSHIP_API, [this.props.patientId]),\n                method: \"post\"\n            }\n        const TestFormLayout = Form.create()(DynamicFieldsForm);\n        const defaultValues = [{key: 'patient', value: this.props.patientId}, {key: 'practice', value: this.props.active_practiceId}]\n\n        return<TestFormLayout formProp={formProp} defaultValues={defaultValues} fields={fields}/>\n    }\n}","import React from \"react\";\nimport {Divider,Form} from \"antd\";\nimport {displayMessage, getAPI, interpolate} from \"../../../utils/common\";\nimport {AGENT_ROLES, PATIENT_PROFILE} from \"../../../constants/api\"\nimport {SUCCESS_MSG_TYPE, SELECT_FIELD, SINGLE_IMAGE_UPLOAD_FIELD, INPUT_FIELD} from \"../../../constants/dataKeys\";\nimport DynamicFieldsForm from \"../../common/DynamicFieldsForm\";\n\nexport default class AddOrEditAgent extends React.Component{\n    constructor(props) {\n        super(props);\n        this.state = {\n            redirect:false,\n            currentPatient: this.props.currentPatient,\n            agentRoles:[],\n\n        }\n        this.loadAgentRoles =this.loadAgentRoles.bind(this);\n    }\n\n    componentDidMount() {\n        this.loadAgentRoles();\n    }\n\n    loadAgentRoles(){\n        let that=this;\n        let successFn =function (data){\n            that.setState({\n                agentRoles:data,\n                loading:false\n            })\n        };\n        let errorFn = function(){\n            that.setState({\n                loading:false\n            })\n        };\n        getAPI(AGENT_ROLES,successFn,errorFn);\n\n    }\n    render(){\n        let that = this;\n        const fields = [{\n            label: \"Role Type\",\n            key: \"role\",\n            type: SELECT_FIELD,\n            options: this.state.agentRoles.map(roles => ({label: roles.name, value: roles.id}))\n        },{\n            label:\"Document Upload\",\n            key:'aadhar_upload',\n            type:SINGLE_IMAGE_UPLOAD_FIELD,\n            required:true\n        }];\n            const formProp = {\n                successFn: function (data) {\n                    displayMessage(SUCCESS_MSG_TYPE, \"Agent Role added\");\n                    that.props.loadProfile();\n\n                },\n                errorFn: function () {\n\n                },\n                action: interpolate(PATIENT_PROFILE, [this.props.patientId]),\n                method: \"put\"\n            }\n        const TestFormLayout = Form.create()(DynamicFieldsForm);\n        const defaultValues = [{key:'is_agent' , value:true}]\n\n        return<TestFormLayout formProp={formProp} defaultValues={defaultValues} fields={fields}/>\n    }\n}","import React from \"react\";\nimport PatientSelection from \"../PatientSelection\";\nimport {Avatar, Button, Card, Col, Divider, Icon, List, Row, Popconfirm, Modal, Statistic, Tag} from \"antd\";\nimport {Link, Redirect} from \"react-router-dom\";\nimport {getAPI, postAPI, interpolate, displayMessage, makeFileURL} from \"../../../utils/common\";\nimport {MEDICAL_MEMBERSHIP_CANCEL_API, PATIENTS_MEMBERSHIP_API, PATIENT_PROFILE} from \"../../../constants/api\";\nimport PatientNotes from \"./PatientNotes\";\nimport MedicalMembership from \"./MedicalMembership\";\nimport {SUCCESS_MSG_TYPE, ERROR_MSG_TYPE} from \"../../../constants/dataKeys\";\nimport {hideEmail, hideMobile} from \"../../../utils/permissionUtils\";\nimport AddOrEditAgent from \"./AddOrEditAgent\";\nimport {hashCode, intToRGB} from \"../../../utils/clinicUtils\";\nimport moment from \"moment\";\n\nclass PatientProfile extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            patientProfile: null,\n            currentPatient: this.props.currentPatient,\n            medicalHistory: {},\n            loading: true,\n            add: '',\n            MedicalMembership: null,\n            hide: false,\n            agentModalVisible: false,\n        };\n        this.loadProfile = this.loadProfile.bind(this);\n        this.loadMedicalMembership = this.loadMedicalMembership.bind(this);\n    }\n\n    componentDidMount() {\n        if (this.state.currentPatient) {\n            this.loadProfile();\n            this.loadMedicalMembership();\n\n        }\n    }\n\n    formChange = (value) => {\n        this.setState({\n            add: value,\n        });\n    }\n\n    componentWillReceiveProps(newProps) {\n        let that = this;\n        if (newProps.currentPatient && newProps.currentPatient != this.state.currentPatient) {\n\n            this.setState({\n                currentPatient: newProps.currentPatient,\n            }, function () {\n                that.loadProfile();\n            })\n        }\n    }\n\n    loadProfile() {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                patientProfile: data,\n                loading: false\n            });\n        };\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            })\n        };\n        if (that.state.currentPatient)\n            getAPI(interpolate(PATIENT_PROFILE, [that.state.currentPatient.id]), successFn, errorFn);\n    }\n\n    loadMedicalMembership() {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                MedicalMembership: data[data.length - 1],\n                loading: false\n            })\n        };\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            })\n        };\n        getAPI(interpolate(PATIENTS_MEMBERSHIP_API, [that.props.currentPatient.id]), successFn, errorFn);\n\n    }\n\n    onClickHandler(value) {\n        let that = this;\n        if (this.state.MedicalMembership) {\n            displayMessage(ERROR_MSG_TYPE, \"Membership !!\");\n            that.setState({\n                add: false\n            })\n        } else {\n            this.setState({\n                add: value\n            });\n        }\n\n    }\n\n    deleteMembership(id) {\n        let that = this;\n        let reqData = {\n            id: id,\n            is_active: false\n        }\n        let successFn = function (data) {\n            that.loadProfile();\n            that.loadMedicalMembership();\n        }\n        let errorFn = function () {\n\n        };\n        postAPI(interpolate(MEDICAL_MEMBERSHIP_CANCEL_API, [that.props.currentPatient.id]), reqData, successFn, errorFn);\n    }\n\n    addAgent = () => {\n        let that = this;\n        that.setState({\n            agentModalVisible: true,\n        });\n    }\n    addAgentModalClosed = () => {\n        this.setState({\n            agentModalVisible: false\n        })\n    }\n\n    render() {\n        let that = this;\n        if (this.props.currentPatient) {\n            let patient = this.state.patientProfile;\n            if (!patient)\n                return <Card loading={this.state.loading}/>;\n            return <Card loading={this.state.loading} title=\"Patient Profile\"\n                         extra={<>\n                             {/*{that.props.activePracticePermissions.SettingsAgents ?*/}\n                             {/*    <Button type={\"primary\"} onClick={this.addAgent}><Icon type={\"usergroup-add\"}/>&nbsp;Add Agent</Button>:null} &nbsp;&nbsp;*/}\n                             {that.props.activePracticePermissions.EditPatient ?\n                                 <Link to={\"/patient/\" + this.state.currentPatient.id + \"/profile/edit\"}>\n                                     <Button type=\"primary\">\n                                         <Icon type=\"edit\"/>&nbsp;Edit Patient Profile</Button>\n                                 </Link> : null}\n\n                         </>}\n\n\n            >\n                <Row gutter={16}>\n                    <Col span={6} style={{textAlign: 'center'}}>\n                        {(patient.image ? <img src={makeFileURL(patient.image)} style={{width: '100%'}}/> :\n                            <Avatar size={200} shape=\"square\" style={{backgroundColor: '#87d068'}}>\n                                {patient.user.first_name ? patient.user.first_name :\n                                    <Icon type=\"user\"/>}\n                            </Avatar>)}\n\n                        {patient.is_agent && patient.is_approved ? <Statistic title={\"Referral Code\"}\n                                                                              value={patient.user.referer_code}/> : null}\n                        <Col>\n                            <Divider/>\n\n                            {this.state.add ? <div><h1 style={{fontSize: '18px'}}>Medical Membership <a href=\"#\"\n                                                                                                        onClick={() => this.onClickHandler(false)}>Cancel</a>\n                                </h1>\n                                    <MedicalMembership {...this.props} {...this.state} patientId={patient.id}\n                                                       loadMedicalMembership={that.loadMedicalMembership}\n                                                       formChange={that.formChange} loadProfile={that.loadProfile}/></div>\n                                : <div style={{padding: '0px'}}><h1\n                                    style={{fontSize: '18px', textAlign: 'center'}}>Medical Membership <a href=\"#\"\n                                                                                                          onClick={() => this.onClickHandler(true)}>{this.state.MedicalMembership ? 'Renew' : 'Add'}</a>\n                                </h1>\n                                    {this.state.MedicalMembership ? <Card size=\"small\" title={\"Membership\"}\n                                                                          extra={<Popconfirm\n                                                                              title=\"Are you sure delete this Membership?\"\n                                                                              onConfirm={() => that.deleteMembership(this.state.MedicalMembership.id)}\n                                                                              okText=\"Yes\" cancelText=\"No\">\n                                                                              <Button icon={\"close\"} type={\"danger\"}\n                                                                                      shape=\"circle\"\n                                                                                      size=\"small\"/>\n                                                                          </Popconfirm>} style={{textAlign: \"center\"}}>\n                                            <div style={{textAlign: \"left\"}}>\n                                                <p><strong>Membership Code : </strong>\n                                                    <span>{this.state.MedicalMembership.membership_code}</span></p>\n                                                <p><strong>Start Date : </strong>\n                                                    <span>{this.state.MedicalMembership.medical_from}</span></p>\n                                                <p><strong>Valid Till : </strong>\n                                                    <span>{this.state.MedicalMembership.medical_to}</span></p>\n                                            </div>\n                                        </Card>\n                                        : null}\n                                </div>\n                            }\n                        </Col>\n                    </Col>\n\n                    <Col span={12}>\n                        <PatientRow label=\"Patient Name\" value={patient.user.first_name}/>\n                        <PatientRow label=\"Patient ID\" value={patient.custom_id ? patient.custom_id : patient.id}/>\n                        {patient && patient.role ?\n                            <PatientRow label={\"Advisor Role\"} value={patient.role_data.name}/> : null}\n                        <PatientRow label=\"Gender\" value={patient.gender}/>\n                        {patient.is_age ?\n                            <PatientRow label=\"Age\"\n                                        value={patient.dob ? moment().diff(this.props.currentPatient.dob, 'years') : null}/>\n                            :\n                            <PatientRow label=\"Date of Birth\" value={patient.dob}/>\n                        }\n                        <PatientRow label=\"Referer\"\n                                    value={patient.user.referer_data.referer ? <Link\n                                        to={\"/patient/\" + patient.user.referer_data.patient + \"/profile\"}>{patient.user.referer_data.referer.first_name}</Link> : \"--\"}/>\n                        <Divider>Contact Details</Divider>\n                        <PatientRow label=\"Email\"\n                                    value={that.props.activePracticePermissions.PatientEmailId ? patient.user.email : hideEmail(patient.user.email)}/>\n                        <PatientRow label=\"Primary Mobile\"\n                                    value={that.props.activePracticePermissions.PatientPhoneNumber ? patient.user.mobile : hideMobile(patient.user.mobile)}/>\n                        <PatientRow label=\"Secondary Mobile\"\n                                    value={that.props.activePracticePermissions.PatientPhoneNumber ? patient.secondary_mobile_no : hideMobile(patient.secondary_mobile_no)}/>\n                        <PatientRow label=\"Landline No\" value={patient.landline_no}/>\n                        <PatientRow label=\"Address\" value={patient.address}/>\n                        <PatientRow label=\"Locality\" value={patient.locality}/>\n                        <PatientRow label=\"City\" value={patient.city_data ? patient.city_data.name : null}/>\n                        <PatientRow label=\"State\" value={patient.state_data ? patient.state_data.name : null}/>\n                        <PatientRow label=\"Country\" value={patient.country_data ? patient.country_data.name : null}/>\n                        <PatientRow label=\"Pincode\" value={patient.pincode}/>\n                    </Col>\n                    <Col span={6} style={{borderLeft: '1 px solid #ccc'}}>\n                        <PatientNotes {...this.props} patientId={patient.id}/>\n                        <Divider>Medical History</Divider>\n                        {patient.medical_history_data ?\n                            patient.medical_history_data.map((item, index) =>\n                                <Tag color={'#' + intToRGB(hashCode(item.name))}>{item.name}</Tag>) : null}\n                        {/*<List size=\"small\" loading={this.state.loading} dataSource={patient.medical_history_data}*/}\n                        {/*      renderItem={(item) =>*/}\n                        {/*          <List.Item>{item.name}</List.Item>}/>}*/}\n\n                        <Divider>Groups</Divider>\n                        <List dataSource={patient.patient_group_data}\n                              renderItem={(item) => <List.Item>{item.name}</List.Item>}/>\n                        {/* <Divider>Medical Membership</Divider>\n                        <List dataSource={patient.medical_membership}\n                              renderItem={(item) => <List.Item>{item}</List.Item>}/> */}\n                    </Col>\n\n                    <Modal\n                        title=\"Add Agent\"\n                        visible={this.state.agentModalVisible}\n                        onOk={null}\n                        footer={null}\n                        onCancel={this.addAgentModalClosed}>\n                        <AddOrEditAgent patientId={patient.id} {...this.state}/>\n                    </Modal>\n                </Row>\n\n            </Card>;\n        }\n        return <PatientSelection {...this.props}/>\n    }\n}\n\nexport default PatientProfile;\n\nfunction PatientRow(props) {\n    return <Row gutter={16} style={{marginBottom: '5px'}}>\n        <Col span={8} style={{textAlign: 'right'}}>{props.label}:</Col>\n        <Col span={16}><strong>{props.value}</strong></Col>\n    </Row>\n}\n","import React from \"react\";\nimport {\n    Button,\n    Card,\n    Checkbox,\n    DatePicker,\n    Form,\n    Icon,\n    Input,\n    message,\n    Modal,\n    Select,\n    Radio,\n    Upload,\n    Popconfirm,\n    InputNumber,\n    Popover, Row, Col,\n} from \"antd\";\nimport {\n    FILE_UPLOAD_API,\n    FILE_UPLOAD_BASE64,\n    MEDICAL_HISTORY,\n    MEMBERSHIP_API,\n    PATIENT_GROUPS,\n    PATIENT_PROFILE,\n    PATIENTS_LIST,\n    COUNTRY,\n    STATE,\n    CITY, SOURCE,\n} from \"../../../constants/api\";\nimport {\n    displayMessage,\n    getAPI,\n    interpolate,\n    makeFileURL,\n    makeURL,\n    postAPI,\n    putAPI,\n    removeEmpty\n} from \"../../../utils/common\";\nimport moment from 'moment';\nimport WebCamField from \"../../common/WebCamField\";\nimport {SUCCESS_MSG_TYPE, INPUT_FIELD, SELECT_FIELD, ALL, RELATION} from \"../../../constants/dataKeys\";\nimport {Link} from \"react-router-dom\";\nimport {\n    PATIENT_AGE,\n    BLOOD_GROUP_CONFIG_PARAM,\n    PATIENT_SOURCE_CONFIG_PARAM,\n    SMS_LANGUAGE_CONFIG_PARAM,\n    FAMILY_RELATION_CONFIG_PARAM,\n    GENDER_CONFIG_PARAM\n} from \"../../../constants/hardData\";\nimport {loadConfigParameters} from \"../../../utils/clinicUtils\";\n\n\nconst confirm = Modal.confirm;\n\n\nclass EditPatientDetails extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            redirect: false,\n            history: [],\n            patientGroup: [],\n            membership: [],\n            webCamState: {},\n            countrylist: [],\n            stateList: [],\n            cityList: [],\n            sourceList: [],\n            country: this.props.currentPatient && this.props.currentPatient.country_data ? this.props.currentPatient.country : null,\n            state: this.props.currentPatient && this.props.currentPatient.state_data ? this.props.currentPatient.state : null,\n            selectedFormType: 'DOB',\n            file_count: 10,\n            file_enable: true,\n            relation_text: true,\n            loading: false,\n            [BLOOD_GROUP_CONFIG_PARAM]: [],\n            [PATIENT_SOURCE_CONFIG_PARAM]: [],\n            [SMS_LANGUAGE_CONFIG_PARAM]: [],\n            [FAMILY_RELATION_CONFIG_PARAM]: [],\n            [GENDER_CONFIG_PARAM]: [],\n            number:{}\n\n        }\n        this.changeRedirect = this.changeRedirect.bind(this);\n        this.handleSubmit = this.handleSubmit.bind(this);\n        this.getCountry = this.getCountry.bind(this);\n        this.getState = this.getState.bind(this);\n        this.getCity = this.getCity.bind(this);\n        this.getSources = this.getSources.bind(this);\n        this.loadPatientData = this.loadPatientData.bind(this);\n    }\n\n    componentDidMount() {\n        this.loadMedicalHistory();\n        this.getPatientGroup();\n        this.getPatientMembership();\n        this.getSources();\n        this.getCountry();\n        if (this.state.country) {\n            this.getState();\n        }\n        if (this.state.state) {\n            this.getCity();\n        }\n        if (this.props.currentPatient) {\n            this.loadPatientData(this.props.currentPatient.id);\n        }\n        loadConfigParameters(this, [BLOOD_GROUP_CONFIG_PARAM, PATIENT_SOURCE_CONFIG_PARAM, SMS_LANGUAGE_CONFIG_PARAM, FAMILY_RELATION_CONFIG_PARAM, GENDER_CONFIG_PARAM])\n    }\n\n    getCountry() {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                countrylist: data,\n            })\n        };\n        let errorFun = function () {\n\n        };\n        getAPI(COUNTRY, successFn, errorFun);\n    }\n\n    getSources() {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                sourceList: data,\n            })\n        };\n        let errorFun = function () {\n\n        };\n        getAPI(SOURCE, successFn, errorFun);\n    }\n\n    getState() {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                stateList: data,\n            })\n\n        };\n        let errorFn = function () {\n\n        };\n        getAPI(STATE, successFn, errorFn, {country: this.state.country});\n\n\n    }\n\n    getCity() {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                cityList: data,\n            })\n\n        };\n        let errorFn = function () {\n\n        };\n        getAPI(CITY, successFn, errorFn, {\n            state: this.state.state,\n        });\n\n    }\n\n    getPatientMembership() {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                membership: data\n            })\n        }\n        let errorFn = function () {\n\n        }\n        getAPI(interpolate(MEMBERSHIP_API, [this.props.active_practiceId]), successFn, errorFn);\n    }\n\n    loadMedicalHistory = () => {\n        var that = this;\n        let successFn = function (data) {\n            that.setState({\n                history: data,\n            })\n        };\n        let errorFn = function () {\n\n        };\n\n        getAPI(interpolate(MEDICAL_HISTORY, [this.props.active_practiceId]), successFn, errorFn);\n\n    };\n\n    loadPatientData(patientId) {\n\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                patientDetails: data,\n                loading: false\n            })\n        }\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            })\n        };\n        getAPI(interpolate(PATIENT_PROFILE, [patientId]), successFn, errorFn);\n    }\n\n    changeRedirect() {\n        var redirectVar = this.state.redirect;\n        this.setState({\n            redirect: !redirectVar,\n        });\n    }\n\n    setFormParams = (type, value) => {\n        this.setState({\n            [type]: value\n        })\n    }\n\n    getPatientGroup = () => {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                patientGroup: data,\n                loading: false\n            });\n        };\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            })\n\n        };\n        getAPI(interpolate(PATIENT_GROUPS, [this.props.active_practiceId]), successFn, errorFn);\n    }\n    handleSubmit = (e) => {\n        let that = this;\n        e.preventDefault();\n        this.props.form.validateFields((err, values) => {\n            if (!err) {\n                let reqData = {\n                    ...values,\n                    file_enable: !!values.file_enable,\n                    file_count: values.file_count ? values.file_count : this.state.file_count,\n                    on_dialysis: that.state.on_dialysis ? true : false,\n                    medical_history: values.medical_history,\n                    patient_group: values.patient_group,\n                    user: {\n                        first_name: values.first_name ? values.first_name : '',\n                        mobile: values.mobile,\n                        email: values.email\n                    },\n\n\n                };\n\n                if (values.anniversary) {\n                    reqData.anniversary = moment(values.anniversary).format(\"YYYY-MM-DD\");\n                }\n\n                if (values.dob) {\n                    reqData.dob = moment(values.dob).format(\"YYYY-MM-DD\");\n                }\n                if (values.age) {\n                    reqData.is_age = true;\n                    reqData.dob = moment().subtract(values.age, 'years').format(\"YYYY-MM-DD\");\n                }\n                if (!values.custom_id) {\n                    reqData.custom_id = null;\n                } else {\n                    reqData.custom_id = values.custom_id_pre + values.custom_id;\n                }\n                let key = 'image';\n                if (reqData[key] && reqData[key].file && reqData[key].file.response)\n                    reqData[key] = reqData[key].file.response.image_path;\n                delete reqData.first_name;\n                delete reqData.email;\n                delete reqData.referer_code;\n                delete reqData.mobile;\n                delete reqData.age;\n                delete reqData.custom_id_pre;\n                that.setState({\n                    loading: true\n                });\n                let successFn = function (data) {\n                    displayMessage(\"Patient Saved Successfully!!\");\n                    that.setState({\n                        loading: false\n                    });\n                    that.props.history.push('/patient/' + data.id + '/profile')\n                }\n                let errorFn = function () {\n                    that.setState({\n                        loading: false\n                    })\n                }\n                reqData = removeEmpty(reqData);\n\n                if (that.props.currentPatient) {\n                    putAPI(interpolate(PATIENT_PROFILE, [that.props.currentPatient.id]), reqData, successFn, errorFn);\n                } else {\n                    postAPI(interpolate(PATIENTS_LIST, [that.props.match.params.id]), reqData, successFn, errorFn);\n                }\n            }\n        });\n    }\n    toggleWebCam = (type, value) => {\n        this.setState(function (prevState) {\n            return {\n                webCamState: {...prevState.webCamState, [type]: value}\n            }\n        })\n    }\n    getImageandUpload = (fieldKey, image) => {\n        let that = this;\n        let reqData = new FormData();\n\n        reqData.append('image', image);\n        reqData.append('name', 'file');\n\n        let successFn = function (data) {\n            that.props.form.setFieldsValue({[fieldKey]: {file: {response: data}}});\n            displayMessage(SUCCESS_MSG_TYPE, \"Image Captured and processed.\");\n            that.setState(function (prevState) {\n                return {\n                    webCamState: {...prevState.webCamState, [fieldKey]: false}\n                }\n            })\n        }\n        let errorFn = function () {\n\n        }\n        postAPI(FILE_UPLOAD_BASE64, reqData, successFn, errorFn, {\n            'content-type': 'multipart/form-data'\n        });\n\n    }\n    onChangeValue = (type, value) => {\n        let that = this;\n        that.setState({\n            [type]: value\n        }, function () {\n            if (type == 'country') {\n                that.getState();\n            }\n            if (type == 'state') {\n                that.getCity();\n            }\n\n        })\n\n    }\n    setFormParams = (type, value) => {\n        this.setState({\n            [type]: value\n        })\n    };\n\n    onChangeCheckbox = (e) => {\n        this.setState({\n            on_dialysis: !this.state.on_dialysis,\n        });\n    };\n    changeFormType = (e) => {\n        this.setState({\n            selectedFormType: e.target.value\n        })\n\n    };\n    handleRelation = (e) => {\n        if (e) {\n            this.setState({\n                relation_text: false,\n            });\n        } else {\n            this.setState({\n                relation_text: true,\n            });\n        }\n\n    };\n\n    onDeletePatient() {\n        let that = this;\n        confirm({\n            title: 'Are you sure delete this patient?',\n            okText: 'Yes',\n            okType: 'danger',\n            cancelText: 'No',\n            onOk() {\n                that.patientDelete();\n            },\n\n        });\n    }\n\n    patientDelete() {\n        let that = this;\n        let id = that.state.patientDetails.id\n        let reqData = {'id': id, is_active: false}\n        let successFn = function (data) {\n            that.setState({\n                loading: false,\n            });\n            displayMessage(\"Patient Deleted!!\");\n            that.props.history.push('/patients/profile');\n        };\n        let errorFn = function () {\n        };\n        putAPI(interpolate(PATIENT_PROFILE, [id]), reqData, successFn, errorFn)\n    };\n\n    handleNumberChange = value => {\n        this.setState({\n            number: {\n                ...numberValidation(value),\n                value,\n            },\n        });\n    }\n    render() {\n        let that = this;\n        const {getFieldDecorator} = this.props.form;\n        const formItemLayout = ({\n            labelCol: {span: 6},\n            wrapperCol: {span: 14},\n        });\n        const historyOption = []\n        if (this.state.history) {\n            this.state.history.forEach(function (historyItem) {\n                historyOption.push({label: (historyItem.name), value: historyItem.id});\n            })\n        }\n        const patientGroupOption = []\n        if (this.state.patientGroup) {\n            this.state.patientGroup.forEach(function (patientGroupItem) {\n                patientGroupOption.push({label: (patientGroupItem.name), value: patientGroupItem.id});\n            });\n        }\n\n        const membershipOption = []\n        if (this.state.membership) {\n            this.state.membership.forEach(function (membershipItem) {\n                membershipOption.push({label: (membershipItem.name), value: membershipItem.id});\n            });\n        }\n        const singleUploadprops = {\n            name: 'image',\n            data: {\n                name: 'hello'\n            },\n            action: makeURL(FILE_UPLOAD_API),\n            headers: {\n                authorization: 'authorization-text',\n            },\n            onChange(info) {\n                if (info.file.status !== 'uploading') {\n                    console.log(info.file, info.fileList);\n                }\n                if (info.file.status === 'done') {\n                    message.success(`${info.file.name} file uploaded successfully`);\n                } else if (info.file.status === 'error') {\n                    message.error(`${info.file.name} file upload failed.`);\n                }\n            },\n        };\n        const tips =\n            'Only numbers are allowed.';\n        return (\n            <Form onSubmit={that.handleSubmit}>\n                <Card title={<span>{that.props.currentPatient ? \"Edit Profile\" : \"Add Patient\"}&nbsp;&nbsp;<Link\n                    to={\"/patients/patientprintform\"}>Print Patient Form</Link></span>}\n                      extra={<div><Button style={{margin: 5}} type=\"primary\" htmlType=\"submit\">Save</Button>\n                          {that.props.history ?\n                              <Button style={{margin: 5}} onClick={() => that.props.history.goBack()}>\n                                  Cancel\n                              </Button> : null}\n\n                          {that.props.currentPatient ? <>\n                                  {this.state.patientDetails && this.state.patientDetails.is_approved ?\n                                      <Popover\n                                          placement=\"leftBottom\"\n                                          trigger={\"hover\"}\n                                          content=\"An Agent is associated. Patient can not be deleted.\"\n                                          // onConfirm={()=>that.patientDelete(this.state.patientDetails.id)}\n                                          // // onCancel={cancel}\n                                          // okText=\"Yes\"\n                                          // cancelText=\"No\"\n                                      >\n                                          <Button style={{margin: 5}} type={\"danger\"} disabled>\n                                              Delete\n                                          </Button>\n                                      </Popover> :\n                                      <Button style={{margin: 5}} onClick={() => that.onDeletePatient()} type={\"danger\"}>\n                                          Delete\n                                      </Button>\n                                  }\n                              </>\n                              : null}\n\n\n                      </div>}>\n                    <Form.Item key={'image'} {...formItemLayout} label={'Patient Image'}>\n                        {getFieldDecorator('image', {valuePropName: 'image',})(\n                            <Upload {...singleUploadprops}>\n                                <Button>\n                                    <Icon type=\"upload\"/> Select File\n                                </Button>\n                                {this.state.patientDetails && this.state.patientDetails.image ?\n                                    <img\n                                        src={makeFileURL(this.state.patientDetails ? this.state.patientDetails.image : null)}\n                                        style={{maxWidth: '100%'}}/> : null}\n                            </Upload>\n                        )}\n                        <span className=\"ant-form-text\">\n                                    <a onClick={() => that.toggleWebCam('image', Math.random())}>\n                                        Open Webcam\n                                    </a>\n                                </span>\n                        <Modal\n                            footer={null}\n                            onCancel={() => that.toggleWebCam('image', false)}\n                            visible={!!that.state.webCamState['image']}\n                            width={680}\n                            key={that.state.webCamState['image']}>\n                            <WebCamField getScreenShot={(value) => that.getImageandUpload('image', value)}/>\n                        </Modal>\n                    </Form.Item>\n                    <Form.Item label=\"Patient Name\" {...formItemLayout}>\n                        {getFieldDecorator('first_name', {\n                            rules: [{required: true, message: 'Input Patient Name!'}],\n                            initialValue: this.state.patientDetails ? this.state.patientDetails.user.first_name : ''\n                        })\n                        (<Input placeholder=\"Patient Name\"/>)\n                        }\n                    </Form.Item>\n                    <Row>\n                        <Col span={8}>\n                            <Form.Item label=\"Patient Id\"\n                                       labelCol={{span: 18}}\n                                       wrapperCol={{span: 6}}\n                            >\n                                {getFieldDecorator('custom_id_pre', {\n                                    initialValue: this.state.patientDetails && this.state.patientDetails.is_agent ? 'AD' : 'BK'\n                                })\n                                (<Select>\n                                    <Select.Option value=\"BK\">BK</Select.Option>\n                                    <Select.Option value=\"AD\">AD</Select.Option>\n                                </Select>)\n                                }\n                            </Form.Item>\n                        </Col>\n                        <Col span={16}>\n                            <Form.Item labelCol={{span: 0}}\n                                       wrapperCol={{span: 18}}\n                                       validateStatus={this.state.number.validateStatus}\n                                       help={this.state.number.errorMsg || tips}\n                            >\n                                {getFieldDecorator('custom_id', {\n                                    initialValue: this.state.patientDetails ? this.state.patientDetails.custom_id.replace(/\\D/g, '') : ''\n                                })\n                                (<InputNumber\n\n                                    style={{width: '100%'}}\n                                    placeholder=\"Patient Id\"\n                                    onChange={this.handleNumberChange}\n                                />)\n                                }\n                            </Form.Item>\n                        </Col>\n                    </Row>\n\n                    {this.state.source && this.state.source == INPUT_FIELD ?\n                        <Form.Item key={'source_extra'} label={\"Source\"}  {...formItemLayout}>\n                            {getFieldDecorator(\"source_extra\", {\n                                initialValue: '',\n\n                            })(\n                                <Input placeholder=\"Source\"/>\n                            )}\n                            <a onClick={() => that.setFormParams('source', SELECT_FIELD)}>Choose\n                                Source</a>\n                        </Form.Item>\n                        : <Form.Item label={\"Source\"} {...formItemLayout}>\n                            {getFieldDecorator('source', {initialValue: this.state.patientDetails ? this.state.patientDetails.source : null})\n                            (<Select placeholder={\"Select Source\"} showSearch optionFilterProp=\"children\">\n                                {this.state.sourceList.map((option) => <Select.Option value={option.id}>\n                                    {option.name}\n                                </Select.Option>)}\n                            </Select>)\n                            }\n                            <a onClick={() => that.setFormParams('source', INPUT_FIELD)}>Enter New\n                                Source</a>\n                        </Form.Item>\n                    }\n                    {this.state.patientDetails ? null :\n                        <Form.Item label=\"Referral Code\" {...formItemLayout}>\n                            {getFieldDecorator('referal', {initialValue: this.state.patientDetails ? this.state.patientDetails.user.referer_code : ''})\n                            (<Input placeholder=\"Referral Code\"/>)\n                            }\n                        </Form.Item>\n                    }\n                    <Form.Item label={\"SMS Language\"} {...formItemLayout}>\n                        {getFieldDecorator('language', {initialValue: this.state.patientDetails && this.state.patientDetails.language ? this.state.patientDetails.language : this.props.activePracticeData.language})\n                        (<Select>\n                            {this.state[SMS_LANGUAGE_CONFIG_PARAM].map((option) => <Select.Option value={option}>\n                                {option}\n                            </Select.Option>)}\n                        </Select>)\n                        }\n                    </Form.Item>\n                    <Form.Item label=\"Aadhar ID\" {...formItemLayout}>\n                        {getFieldDecorator('aadhar_id', {initialValue: this.state.patientDetails ? this.state.patientDetails.aadhar_id : ''})\n                        (<Input placeholder=\"Patient Aadhar Number\"/>)\n                        }\n                    </Form.Item>\n\n                    <Form.Item label=\"Gender\" {...formItemLayout}>\n                        {getFieldDecorator('gender', {initialValue: this.state.patientDetails ? this.state.patientDetails.gender : null})\n                        (<Select placeholder={\"Select Gender\"}>\n                            {this.state[GENDER_CONFIG_PARAM].map((option) => <Select.Option value={option.value}>\n                                {option.label}\n                            </Select.Option>)}\n                        </Select>)\n                        }\n                    </Form.Item>\n\n\n                    <Form.Item label=' ' {...formItemLayout} colon={false}>\n                        <Radio.Group buttonStyle=\"solid\" size=\"small\" onChange={this.changeFormType}\n                                     defaultValue={this.state.selectedFormType}>\n                            {PATIENT_AGE.map((item) => <Radio value={item.value}>{item.label}</Radio>)}\n                        </Radio.Group>\n                    </Form.Item>\n                    {this.state.selectedFormType == 'DOB' ?\n                        <Form.Item label=\"DOB\" {...formItemLayout}>\n                            {getFieldDecorator('dob', {initialValue: this.state.patientDetails && this.state.patientDetails.dob ? moment(this.state.patientDetails.dob) : ''})\n                            (<DatePicker/>)\n                            }\n                        </Form.Item>\n                        : <Form.Item label=\"Age\" {...formItemLayout}>\n                            {getFieldDecorator('age', {initialValue: this.state.patientDetails && this.state.patientDetails.dob ? moment().diff(this.state.patientDetails.dob, 'years') : null})\n                            (<InputNumber min={0} max={120} placeholder=\"Patient Age\"/>)\n                            }\n                        </Form.Item>}\n\n                    <Form.Item label=\"Anniversary\" {...formItemLayout}>\n                        {getFieldDecorator('anniversary', {initialValue: this.state.patientDetails && this.state.patientDetails.anniversary ? moment(this.state.patientDetails.anniversary) : null})\n                        (<DatePicker/>)\n                        }\n                    </Form.Item>\n\n                    {/*<Form.Item label=\"Blood Group\" {...formItemLayout}>*/}\n                    {/*    {getFieldDecorator('blood_group', {initialValue: this.props.currentPatient ? this.props.currentPatient.blood_group : ''})*/}\n                    {/*    (<Input placeholder=\"Patient Blood Group\"/>)*/}\n                    {/*    }*/}\n                    {/*</Form.Item>*/}\n                    <Form.Item label=\"Blood Group\" {...formItemLayout}>\n                        {getFieldDecorator(\"blood_group\", {initialValue: this.state.patientDetails ? this.state.patientDetails.blood_group : ''})\n                        (<Select placeholder=\"Blood Group\">\n                            {this.state[BLOOD_GROUP_CONFIG_PARAM].map((option) => <Select.Option\n                                value={option}>{option}</Select.Option>)}\n                        </Select>)\n                        }\n                    </Form.Item>\n\n                    {/*<Form.Item label=\"Family\" {...formItemLayout}>*/}\n                    {/*    {getFieldDecorator('family_relation', {initialValue: this.state.patientDetails ? this.props.currentPatient.family_relation : ''})*/}\n                    {/*    (<Input placeholder=\"Patient Family Relation\"/>)*/}\n                    {/*    }*/}\n                    {/*</Form.Item>*/}\n\n                    <Form.Item label=\"Family\" {...formItemLayout}>\n                        <Form.Item style={{display: 'inline-block', width: 'calc(30% - 12px)'}}>\n                            {getFieldDecorator(\"family_relation\", {initialValue: this.state.patientDetails && this.state.patientDetails.family_relation != null ? this.state.patientDetails.family_relation : RELATION})\n                            (<Select onChange={(value) => this.handleRelation(value)}>\n                                <Select.Option value={''}>{RELATION}</Select.Option>\n                                {this.state[FAMILY_RELATION_CONFIG_PARAM].map((option) => <Select.Option\n                                    value={option.value}>{option.name}</Select.Option>)}\n                            </Select>)\n                            }\n                        </Form.Item>\n                        <span style={{display: 'inline-block', width: '14px', textAlign: 'center'}}/>\n                        <Form.Item style={{display: 'inline-block', width: 'calc(50% - 12px)'}}>\n                            {getFieldDecorator(\"attendee\", {initialValue: this.state.patientDetails ? this.state.patientDetails.attendee : ''})\n                            (<Input\n                                disabled={this.state.patientDetails && this.state.patientDetails.attendee ? false : this.state.relation_text}/>)\n                            }\n                        </Form.Item>\n                    </Form.Item>\n\n\n                    <Form.Item label=\"Mobile (Primary)\" {...formItemLayout}>\n                        {getFieldDecorator('mobile', {\n                            initialValue: this.state.patientDetails ? this.state.patientDetails.user.mobile : null,\n                            rules: [{required: true, message: 'Input Mobile Number'}]\n                        })\n                        (<Input placeholder=\"Patient Mobile Number (Primary)\"/>)\n                        }\n                    </Form.Item>\n\n                    <Form.Item label=\"Mobile (Secondary)\" {...formItemLayout}>\n                        {getFieldDecorator('secondary_mobile_no', {initialValue: this.state.patientDetails ? this.state.patientDetails.secondary_mobile_no : ''})\n                        (<Input placeholder=\"Patient Mobile Number (Secondary)\"/>)\n                        }\n                    </Form.Item>\n\n                    <Form.Item label=\"Landline\" {...formItemLayout}>\n                        {getFieldDecorator('landline_no', {initialValue: this.state.patientDetails ? this.state.patientDetails.landline_no : ''})\n                        (<Input placeholder=\"Patient Landline Number\"/>)\n                        }\n                    </Form.Item>\n\n                    <Form.Item label=\"Address\" {...formItemLayout}>\n                        {getFieldDecorator('address', {initialValue: this.state.patientDetails ? this.state.patientDetails.address : ''})\n                        (<Input placeholder=\"Patient Address\"/>)\n                        }\n                    </Form.Item>\n\n                    <Form.Item label=\"Locality\" {...formItemLayout}>\n                        {getFieldDecorator('locality', {initialValue: this.state.patientDetails ? this.state.patientDetails.locality : ''})\n                        (<Input placeholder=\"Patient Locality\"/>)\n                        }\n                    </Form.Item>\n\n                    {this.state.country && this.state.country == INPUT_FIELD ?\n                        <Form.Item key={'country_extra'} label={\"Country\"}  {...formItemLayout}>\n                            {getFieldDecorator(\"country_extra\", {\n                                initialValue: '',\n\n                            })(\n                                <Input placeholder=\"Country\"/>\n                            )}\n                            <a onClick={() => that.setFormParams('country', SELECT_FIELD)}>Choose\n                                Country</a>\n                        </Form.Item>\n                        : <Form.Item key={\"country\"} {...formItemLayout} label={\"Country\"}>\n                            {getFieldDecorator(\"country\", {\n                                initialValue: this.state.patientDetails && this.state.patientDetails.country_data ? this.state.patientDetails.country_data.id : '',\n                            })(\n                                <Select placeholder=\"Select Country\"\n                                        onChange={(value) => this.onChangeValue(\"country\", value)} showSearch\n                                        optionFilterProp=\"children\">\n\n                                    {this.state.countrylist.map((option) => <Select.Option\n                                        value={option.id}>{option.name}</Select.Option>)}\n                                </Select>\n                            )}\n                            <a onClick={() => that.setFormParams('country', INPUT_FIELD)}>Add New\n                                Country</a>\n                        </Form.Item>\n                    }\n\n\n                    {this.state.country == INPUT_FIELD || this.state.state && this.state.state == INPUT_FIELD ?\n                        <Form.Item key={'state_extra'} label={\"State\"}  {...formItemLayout}>\n                            {getFieldDecorator(\"state_extra\", {\n                                initialValue: '',\n\n                            })(\n                                <Input placeholder=\"State\"/>\n                            )}\n                            <a onClick={() => that.setFormParams('state', SELECT_FIELD)}>Choose\n                                State</a>\n                        </Form.Item>\n                        : <Form.Item key={\"state\"} {...formItemLayout} label={\"State\"}>\n                            {getFieldDecorator(\"state\", {\n                                initialValue: this.state.patientDetails && this.state.patientDetails.state_data ? this.state.patientDetails.state_data.id : '',\n                            })(\n                                <Select placeholder=\"Select State\"\n                                        onChange={(value) => this.onChangeValue(\"state\", value)} showSearch\n                                        optionFilterProp=\"children\">\n                                    {this.state.stateList.map((option) => <Select.Option\n                                        value={option.id}>{option.name}</Select.Option>)}\n                                </Select>\n                            )}\n                            <a onClick={() => that.setFormParams('state', INPUT_FIELD)}>Add New\n                                state</a>\n                        </Form.Item>\n                    }\n                    {this.state.country == INPUT_FIELD || this.state.state == INPUT_FIELD || this.state.city && this.state.city == INPUT_FIELD ?\n                        <Form.Item key={'city_extra'} label={\"City\"}  {...formItemLayout}>\n                            {getFieldDecorator(\"city_extra\", {\n                                initialValue: '',\n                            })(\n                                <Input placeholder=\"City\"/>\n                            )}\n                            <a onClick={() => that.setFormParams('city', SELECT_FIELD)}>Choose\n                                City</a>\n                        </Form.Item>\n                        : <Form.Item key={\"City\"} {...formItemLayout} label={\"City\"}>\n                            {getFieldDecorator(\"city\", {\n                                initialValue: this.state.patientDetails && this.state.patientDetails.city_data ? this.state.patientDetails.city_data.id : '',\n                            })(\n                                <Select showSearch optionFilterProp=\"children\" placeholder=\"Select City\">\n                                    {this.state.cityList.map((option) => <Select.Option\n                                        value={option.id}>{option.name}</Select.Option>)}\n                                </Select>\n                            )}\n                            <a onClick={() => that.setFormParams('city', INPUT_FIELD)}>Add New\n                                City</a>\n                        </Form.Item>\n                    }\n\n\n                    {/* <Form.Item label=\"City\" {...formItemLayout}>\n                        {getFieldDecorator('city_extra', {initialValue: this.props.currentPatient ? this.props.currentPatient.city : null})\n                        (<Input placeholder=\"Patient City\"/>)\n                        }\n                    </Form.Item> */}\n\n                    <Form.Item label=\"Pincode\" {...formItemLayout}>\n                        {getFieldDecorator('pincode', {initialValue: this.state.patientDetails ? this.state.patientDetails.pincode : ''})\n                        (<Input placeholder=\"Patient PINCODE\"/>)\n                        }\n                    </Form.Item>\n\n                    <Form.Item label=\"Email\" {...formItemLayout}>\n                        {getFieldDecorator('email', {\n                            initialValue: this.state.patientDetails ? this.state.patientDetails.user.email : null,\n                        })\n                        (<Input placeholder=\"Patient Email\"/>)\n                        }\n                    </Form.Item>\n\n                    <Form.Item label=\"Medical History\" {...formItemLayout}>\n                        {getFieldDecorator(\"medical_history\", {initialValue: this.state.patientDetails ? this.state.patientDetails.medical_history : []})\n                        (<Select placeholder=\"Medical History\" mode={\"multiple\"}>\n                            {historyOption.map((option) => <Select.Option\n                                value={option.value}>{option.label}</Select.Option>)}\n                        </Select>)\n                        }\n                    </Form.Item>\n\n                    <Form.Item label=\"Patient Group\" {...formItemLayout}>\n                        {getFieldDecorator(\"patient_group\", {initialValue: this.state.patientDetails ? this.state.patientDetails.patient_group : []})\n                        (<Select placeholder=\"Patient Group\" mode={\"multiple\"}>\n                            {patientGroupOption.map((option) => <Select.Option\n                                value={option.value}>{option.label}</Select.Option>)}\n                        </Select>)\n                        }\n                    </Form.Item>\n\n                    <Form.Item label=\"On Dialysis\" {...formItemLayout}>\n                        {getFieldDecorator('on_dialysis', {initialValue: this.state.patientDetails ? this.state.patientDetails.on_dialysis : false})\n                        (<Checkbox onChange={(e) => this.onChangeCheckbox(e)} style={{paddingTop: '4px'}}/>)\n                        }\n                    </Form.Item>\n                    <Form.Item label=\"Allow File Upload\" {...formItemLayout}>\n                        {getFieldDecorator('file_enable', {initialValue: this.state.patientDetails ? this.state.patientDetails.file_enable : true})\n                        (<Checkbox style={{paddingTop: '4px'}}\n                                   defaultChecked={true}/>)\n                        }\n                    </Form.Item>\n\n                    {/*<Form.Item label=\"Allow File Upload\" {...formItemLayout}>*/}\n                    {/*    {getFieldDecorator('file_enable',)*/}\n                    {/*    (<Checkbox  defaultChecked={true}/>)*/}\n                    {/*    }*/}\n                    {/*</Form.Item>*/}\n\n                    <Form.Item label=\"Max Uploads Allowed\" {...formItemLayout}>\n                        {getFieldDecorator('file_count', {initialValue: this.state.patientDetails ? this.state.patientDetails.file_count : 10})\n                        (<InputNumber min={0}/>)\n                        }\n                    </Form.Item>\n                    <Form.Item>\n                        {that.props.history ?\n                            <Button style={{margin: 5}} onClick={() => that.props.history.goBack()}>\n                                Cancel\n                            </Button> : null}\n                        <Button style={{margin: 5}} type=\"primary\" htmlType=\"submit\" loading={this.state.loading}>\n                            Save\n                        </Button>\n\n                    </Form.Item>\n                </Card>\n            </Form>)\n    }\n\n}\n\nexport default Form.create()(EditPatientDetails);\n\nfunction numberValidation(number) {\n    if (isNaN(number)) {\n        return {\n            validateStatus: 'error',\n            errorMsg: 'Patient ID can only be numerical value.',\n        };\n    }\n    return {\n        validateStatus: 'success',\n        errorMsg: null,\n    };\n}","import React from \"react\";\nimport {Link} from \"react-router-dom\";\n\nimport DynamicFieldsForm from \"../../common/DynamicFieldsForm\";\nimport {Button, Card, Checkbox, Divider, Form, Icon, Popconfirm, Table} from \"antd\";\nimport {DOCTORS_ROLE} from \"../../../constants/dataKeys\";\nimport {\n    ALL_APPOINTMENT_API,\n    APPOINTMENT_API,\n    APPOINTMENT_REPORTS,\n    EMR_TREATMENTNOTES,\n    PRACTICESTAFF,\n    PROCEDURE_CATEGORY\n} from \"../../../constants/api\";\nimport {getAPI, interpolate, putAPI} from \"../../../utils/common\";\nimport moment from 'moment';\nimport {hideEmail, hideMobile} from \"../../../utils/permissionUtils\";\n\n\nclass Appointment extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            redirect: false,\n            appointments: null,\n            practice_doctors: [],\n            procedure_category: null,\n            treatmentNotes: null,\n            practice_staff: [],\n            loading: false\n\n        }\n        this.changeRedirect = this.changeRedirect.bind(this);\n        this.editAppointment = this.editAppointment.bind(this);\n        this.deleteAppointment = this.deleteAppointment.bind(this);\n        this.loadProcedureCategory = this.loadProcedureCategory.bind(this);\n        this.loadDoctors = this.loadDoctors.bind(this);\n\n    }\n\n    componentDidMount() {\n        // this.loadProcedureCategory();\n        this.loadDoctors();\n        this.loadTreatmentNotes();\n        if (this.props.match.params.appointmentid) {\n            this.loadAppointment(this.props.match.params.appointmentid);\n        } else {\n            this.loadAllAppointments();\n        }\n\n    }\n\n    loadAppointment(id) {\n        let that = this;\n        this.setState({\n            loading: true,\n        })\n        let successFn = function (data) {\n\n            that.setState({\n                appointments: [data],\n                loading: false,\n\n            });\n\n\n        }\n\n        let errorFn = function () {\n            that.setState({\n                loading: false,\n\n            })\n\n        }\n        getAPI(interpolate(APPOINTMENT_API, [id]), successFn, errorFn);\n\n    }\n\n    loadAllAppointments() {\n        let that = this;\n        this.setState({\n            loading: true,\n        })\n        let successFn = function (data) {\n            // console.log(\"DataKya h\",data);\n            let appointmentArray = data;\n            // appointmentArray.push(data);\n            // console.log(\"AppointmentArray\",JSON.stringify(appointmentArray));\n            that.setState({\n                appointments: data,\n                loading: false,\n\n            });\n            // console.log(\"appointment\", JSON.stringify(that.state.appointments));\n\n        }\n\n        let errorFn = function () {\n            that.setState({\n                loading: false,\n\n            })\n\n\n        }\n        getAPI(interpolate(ALL_APPOINTMENT_API, [this.props.active_practiceId]), successFn, errorFn, this.props.match.params.id ? {\"patient\": this.props.match.params.id,practice:this.props.active_practiceId} : {practice:this.props.active_practiceId});\n\n    }\n\n\n    loadProcedureCategory() {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                procedure_category: data\n            })\n\n        }\n        let errorFn = function () {\n\n        }\n        getAPI(interpolate(PROCEDURE_CATEGORY, [this.props.active_practiceId]), successFn, errorFn);\n    }\n\n    loadDoctors() {\n        let that = this;\n        let successFn = function (data) {\n            data.staff.forEach(function (usersdata) {\n                if (usersdata.role == DOCTORS_ROLE) {\n                    let doctor = that.state.practice_doctors;\n                    doctor.push(usersdata);\n                    that.setState({\n                        practice_doctors: doctor,\n                    })\n                } else {\n                    let doctor = that.state.practice_staff;\n                    doctor.push(usersdata);\n                    that.setState({\n                        practice_staff: doctor,\n                    })\n                }\n            })\n\n        }\n        let errorFn = function () {\n        };\n        getAPI(interpolate(PRACTICESTAFF, [this.props.active_practiceId]), successFn, errorFn);\n\n    }\n\n    loadTreatmentNotes() {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                treatmentNotes: data,\n                loading: false\n            })\n\n        }\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            })\n\n        }\n        getAPI(interpolate(EMR_TREATMENTNOTES, [this.props.active_practiceId]), successFn, errorFn)\n    }\n\n    changeRedirect() {\n        var redirectVar = this.state.redirect;\n        this.setState({\n            redirect: !redirectVar,\n        });\n    }\n\n    editAppointment(record) {\n\n        let id = record.id;\n        this.props.history.push(\"/calendar/\" + id + \"/edit-appointment\")\n\n    }\n\n    deleteAppointment(record) {\n        let that = this;\n        that.setState({\n            loading: true\n        })\n        let reqData = {'is_active': false, 'status': \"Cancelled\"}\n        let successFn = function (data) {\n            that.loadAllAppointments();\n            that.setState({\n                loading: false\n            })\n\n        }\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            })\n        }\n        putAPI(interpolate(APPOINTMENT_API, [record.id]), reqData, successFn, errorFn);\n    }\n\n    render() {\n        let that = this;\n        const doctors = []\n        if (this.state.practice_doctors.length) {\n            this.state.practice_doctors.forEach(function (doctor) {\n                doctors[doctor.id] = doctor.user.first_name\n            })\n        }\n        const treatmentNotes = [];\n        if (this.state.treatmentNotes) {\n            this.state.treatmentNotes.forEach(function (treatmentNote) {\n                treatmentNotes[treatmentNote.id] = treatmentNote.name\n            })\n        }\n        // const categories = {1: \"fast\", 2: \"Full Stomach\", 3: \"No Liquids\"}\n        const columns = [{\n            title: 'Schedule Time',\n            key: 'name',\n            render: (text, record) => (<span>{moment(record.schedule_at).format('LLL')},{record.slot}mins</span>\n            )\n        }, {\n            title: 'Patient ID',\n            key:'id',\n            render:(item ,record)=><span>{record.patient.custom_id?record.patient.custom_id:record.patient.id}</span>,\n            exports:(item ,record) =>(record.patient.custom_id?record.patient.custom_id:record.patient.id),\n        }, {\n            title: 'Patient Name',\n            dataIndex: 'patient.user.first_name',\n            key: 'patient_name',\n        }, {\n            title: 'Patient Mobile',\n            dataIndex: 'patient.user.mobile',\n            key: 'patient_mobile',\n            render: (value) => that.props.activePracticePermissions.PatientPhoneNumber ? value : hideMobile(value)\n        }, {\n            title: 'Email',\n            dataIndex: 'patient.user.email',\n            key: 'email',\n            render: value => that.props.activePracticePermissions.PatientEmailId ? value : hideEmail(value)\n        }, {\n            title: 'Doctor',\n            key: 'doctor',\n            render: (text, record) => (\n                <span> {doctors[record.doctor]}</span>\n            )\n        }, {\n            title: 'Procedure',\n            key: 'procedure',\n            // render: (text, record) => (\n            //     <span> {procedures[record.procedure]}</span>\n            // )\n        }, {\n            title: 'Treatment Notes',\n            key: 'notes',\n            render: (text, record) => (\n                <span> {treatmentNotes[record.notes]}</span>\n            )\n        }, {\n            title: 'Category',\n            key: 'category',\n            render: (text, record) => (\n                <span> {record.category?record.category_data.name:'--'}</span>\n            )\n        }, {\n            title: 'NotifyByEmail',\n            key: 'notify_via_email',\n            render: (text, record) => (\n                <Checkbox disabled checked={record.notify_via_email}/>\n            )\n        }, {\n            title: 'NotifyBySMS',\n            key: 'notify_via_sms',\n            render: (text, record) => (\n                <Checkbox disabled checked={record.notify_via_sms}/>\n            )\n        },\n\n            {\n                title: 'Action',\n                key: 'action',\n                render: (text, record) => (\n                    <span>\n                <a onClick={() => this.editAppointment(record)}\n                   disabled={!that.props.activePracticePermissions.EditAppointment}>Edit</a>\n                <Divider type=\"vertical\"/>\n                <Popconfirm title=\"Are you sure delete this item?\"\n                            onConfirm={() => this.deleteAppointment(record)} okText=\"Yes\" cancelText=\"No\">\n                    <a disabled={!that.props.activePracticePermissions.EditAppointment}>Delete</a>\n                </Popconfirm>\n\n\n              </span>\n                ),\n            }];\n        const TestFormLayout = Form.create()(DynamicFieldsForm);\n        if (this.props.match.params.id) {\n            return <Card extra={that.props.activePracticePermissions.AddAppointment || that.props.allowAllPermissions ?\n                <Link to={\"/calendar/create-appointment?patient=\" + this.props.match.params.id}>\n                    <Button type=\"primary\">\n                        <Icon type=\"plus\"/>&nbsp;Add Appointment</Button>\n                </Link> : null}>\n\n                <Table loading={this.state.loading} columns={columns} scroll={{x: 1300}}\n                       pagination={false}\n                       dataSource={this.state.appointments}/>\n\n\n            </Card>\n        }\n        return <Card extra={that.props.activePracticePermissions.AddAppointment || that.props.allowAllPermissions ?\n            <Link to=\"/calendar/create-appointment\">\n                <Button type=\"primary\">\n                    <Icon type=\"plus\"/>&nbsp;Add Appointment</Button>\n            </Link> : null}>\n            <Table loading={this.state.loading} columns={columns} scroll={{x: 1300}}\n                   pagination={false}\n                   dataSource={this.state.appointments}/>\n\n\n        </Card>\n    }\n\n}\n\nexport default Appointment;\n","import React from \"react\";\nimport {Menu, Layout, Icon, Divider, Badge} from \"antd\";\nimport {Link} from \"react-router-dom\";\nimport {INNER_KEYS_HOTKEYS} from \"../../constants/hardData\";\nimport Hotkeys from 'react-hot-keys';\n\nconst Sider = Layout.Sider;\n\nclass PatientSider extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {};\n        this.onHotKeyInner = this.onHotKeyInner.bind(this);\n    }\n\n\n    onHotKeyInner(keyNm) {\n        let that = this;\n        switch (keyNm) {\n            case 'alt+f':\n                return (this.props.currentPatient ? this.props.history.push(\"/patient/\" + this.props.currentPatient.id + \"/profile\") : this.props.history.push(\"/patients/profile\"));\n\n            case 'alt+a':\n                return (this.props.currentPatient ? this.props.history.push(\"/patient/\" + this.props.currentPatient.id + \"/appointments\") : this.props.history.push(\"/patients/appointments\"));\n\n            case 'alt+o':\n                return (this.props.currentPatient ? this.props.history.push(\"/patient/\" + this.props.currentPatient.id + \"/communications\") : this.props.history.push(\"/patients/communications\"));\n\n            case 'alt+k':\n                return (this.props.currentPatient ? this.props.history.push(\"/patient/\" + this.props.currentPatient.id + \"/booking\") : this.props.history.push(\"/patients/profile\"));\n\n            case 'alt+m':\n                return (this.props.currentPatient ? this.props.history.push(\"/patient/\" + this.props.currentPatient.id + \"/emr/vitalsigns\") : this.props.history.push(\"/patients/emr/vitalsigns\"));\n\n            case 'alt+n':\n                return (this.props.currentPatient ? this.props.history.push(\"/patient/\" + this.props.currentPatient.id + \"/emr/vitalsigns\") : this.props.history.push(\"/patients/emr/vitalsigns\"));\n\n            case 'alt+t':\n                return (this.props.currentPatient ? this.props.history.push(\"/patient/\" + this.props.currentPatient.id + \"/emr/plans\") : this.props.history.push(\"/patients/emr/plans\"));\n\n            case 'alt+l':\n                return (this.props.currentPatient ? this.props.history.push(\"/patient/\" + this.props.currentPatient.id + \"/emr/files\") : this.props.history.push(\"/patients/emr/files\"));\n\n            case 'alt+i':\n                return (this.props.currentPatient ? this.props.history.push(\"/patient/\" + this.props.currentPatient.id + \"/billing/invoices\") : this.props.history.push(\"/patients/billing/invoices\"));\n\n            case 'alt+e':\n                return (this.props.currentPatient ? this.props.history.push(\"/patient/\" + this.props.currentPatient.id + \"/billing/return/invoices\") : this.props.history.push(\"/patients/billing/return/invoices\"));\n\n            case 'alt+y':\n                return (this.props.currentPatient ? this.props.history.push(\"/patient/\" + this.props.currentPatient.id + \"/billing/payments\") : this.props.history.push(\"/patients/billing/payments\"));\n\n            case 'alt+u':\n                return (this.props.currentPatient ? this.props.history.push(\"/patient/\" + this.props.currentPatient.id + \"/emr/workdone\") : this.props.history.push(\"/patients/emr/workdone\"));\n\n            case 'alt+s':\n                return (this.props.currentPatient ? this.props.history.push(\"/patient/\" + this.props.currentPatient.id + \"/emr/prescriptions\") : this.props.history.push(\"/patients/emr/prescriptions\"));\n\n            case 'alt+g':\n                return (this.props.currentPatient ? this.props.history.push(\"/patient/\" + this.props.currentPatient.id + \"/billing/ledger\") : this.props.history.push(\"/patients/profile\"));\n\n            case 'alt+w':\n                return (this.props.currentPatient ? this.props.history.push(\"/patient/\" + this.props.currentPatient.id + \"/emr/timeline\") : this.props.history.push(\"/patients/profile\"));\n        }\n    }\n\n\n    render() {\n        let that = this;\n        return <Hotkeys keyName={INNER_KEYS_HOTKEYS} onKeyDown={(value) => this.onHotKeyInner(value)}>\n            <Sider trigger={null}\n                   collapsible\n                   collapsed={this.props.hideSidePanel}\n                   style={{overflow: 'auto', minHeight: 'calc(100vh - 64px)', background: '#fff'}}>\n                {/*<div className=\"logo\"/>*/}\n\n                <Menu mode=\"inline\">\n                    <Menu.ItemGroup key=\"g1\" title={<Divider style={{margin: '0px'}}>Patient</Divider>}>\n                        {/* {that.props.activePracticePermissions.ViewPatient || that.props.allowAllPermissions? */}\n                        <Menu.Item key=\"17\">\n                            <Link\n                                to={this.props.currentPatient ? \"/patient/\" + this.props.currentPatient.id + \"/profile\" : \"/patients/profile\"}>\n                                <Icon type=\"user\"/><span className=\"nav-text\">Pro<span\n                                className={\"shortcutLetterHighlight\"}>f</span>ile</span>\n                            </Link>\n                        </Menu.Item>\n                        {/* :null} */}\n                        {that.props.activePracticePermissions.PatientAppointments || that.props.allowAllPermissions ?\n                            <Menu.Item key=\"18\">\n                                <Link\n                                    to={this.props.currentPatient ? \"/patient/\" + this.props.currentPatient.id + \"/appointments\" : \"/patients/appointments\"}>\n                                    <Icon type=\"calendar\"/><span className=\"nav-text\"><span\n                                    className={\"shortcutLetterHighlight\"}>A</span>ppointments</span>\n                                </Link>\n                            </Menu.Item>\n                            : null}\n                        {that.props.activePracticePermissions.PatientCommunications || that.props.allowAllPermissions ?\n                            <Menu.Item key=\"19\">\n                                <Link\n                                    to={this.props.currentPatient ? \"/patient/\" + this.props.currentPatient.id + \"/communications\" : \"/patients/communications\"}>\n                                    <Icon type=\"message\"/><span className=\"nav-text\">C<span\n                                    className={\"shortcutLetterHighlight\"}>o</span>mmunications</span>\n                                </Link>\n                            </Menu.Item>\n                            : null}\n                        {that.props.activePracticePermissions.PatientBookings || that.props.allowAllPermissions ?\n                            <Menu.Item key=\"booking\" disabled={!this.props.currentPatient}>\n                                <Link\n                                    to={this.props.currentPatient ? \"/patient/\" + this.props.currentPatient.id + \"/booking\" : \"/patients/communications\"}>\n                                    <Icon type=\"book\"/><span className=\"nav-text\">Boo<span\n                                    className={\"shortcutLetterHighlight\"}>k</span>ing</span>\n                                </Link>\n                            </Menu.Item>\n                            : null}\n\n                    </Menu.ItemGroup>\n                    <Menu.ItemGroup key=\"g2\" title={<Divider style={{margin: '0px'}}>EMR</Divider>}>\n                        {/*<SubMenu key=\"nestedsub1\" title={<span>EMR</span>}>*/}\n                        {that.props.activePracticePermissions.PatientVitalSigns || that.props.allowAllPermissions ?\n                            <Menu.Item key=\"20\">\n                                <Link\n                                    to={this.props.currentPatient ? \"/patient/\" + this.props.currentPatient.id + \"/emr/vitalsigns\" : \"/patients/emr/vitalsigns\"}>\n                                    <Icon type=\"heart\"/><span className=\"nav-text\">Report <span\n                                    className={\"shortcutLetterHighlight\"}>M</span>anual</span></Link>\n                            </Menu.Item>\n                            : null}\n                        {that.props.activePracticePermissions.PatientClinicalNotes || that.props.allowAllPermissions ?\n                            <Menu.Item key=\"21\">\n                                <Link\n                                    to={this.props.currentPatient ? \"/patient/\" + this.props.currentPatient.id + \"/emr/clinicnotes\" : \"/patients/emr/clinicnotes\"}>\n                                    <Icon type=\"solution\"/><span className=\"nav-text\">Clinical <span\n                                    className={\"shortcutLetterHighlight\"}>N</span>otes</span>\n                                </Link>\n                            </Menu.Item>\n                            : null}\n                        {that.props.activePracticePermissions.PatientTreatmentPlans || that.props.allowAllPermissions ?\n                            <Menu.Item key=\"30\">\n                                <Link\n                                    to={this.props.currentPatient ? \"/patient/\" + this.props.currentPatient.id + \"/emr/plans\" : \"/patients/emr/plans\"}>\n                                    <Icon type=\"read\"/><span className=\"nav-text\"><span\n                                    className={\"shortcutLetterHighlight\"}>T</span>reatment\n                                    Plans</span>\n                                </Link>\n                            </Menu.Item>\n                            : null}\n                        {that.props.activePracticePermissions.PatientCompletedProcedure || that.props.allowAllPermissions ?\n                            <Menu.Item key=\"22\">\n                                <Link\n                                    to={this.props.currentPatient ? \"/patient/\" + this.props.currentPatient.id + \"/emr/workdone\" : \"/patients/emr/workdone\"}>\n                                    <Icon type=\"check-circle\"/><span className=\"nav-text\">Completed Proced<span\n                                    className={\"shortcutLetterHighlight\"}>u</span>re</span>\n                                </Link>\n                            </Menu.Item>\n                            : null}\n                        {that.props.activePracticePermissions.PatientFiles || that.props.allowAllPermissions ?\n                            <Menu.Item key=\"23\">\n                                <Link\n                                    to={this.props.currentPatient ? \"/patient/\" + this.props.currentPatient.id + \"/emr/files\" : \"/patients/emr/files\"}>\n                                    <Icon type=\"picture\"/><span className=\"nav-text\">Fi<span\n                                    className={\"shortcutLetterHighlight\"}>l</span>es</span>\n                                </Link>\n                            </Menu.Item>\n                            : null}\n                        {that.props.activePracticePermissions.PatientPrescriptions || that.props.allowAllPermissions ?\n                            <Menu.Item key=\"24\">\n                                <Link\n                                    to={this.props.currentPatient ? \"/patient/\" + this.props.currentPatient.id + \"/emr/prescriptions\" : \"/patients/emr/prescriptions\"}>\n                                    <Icon type=\"solution\"/><span className=\"nav-text\">Pre<span\n                                    className={\"shortcutLetterHighlight\"}>s</span>criptions</span>\n                                </Link>\n                            </Menu.Item>\n                            : null}\n                        {that.props.activePracticePermissions.PatientTimeline || that.props.allowAllPermissions ?\n                            <Menu.Item key=\"25\" disabled={!this.props.currentPatient}>\n                                <Link\n                                    to={this.props.currentPatient ? \"/patient/\" + this.props.currentPatient.id + \"/emr/timeline\" : \"/patients/profile\"}>\n                                    <Icon type=\"clock-circle\"/><span className=\"nav-text\">Timeline <span\n                                    className={\"shortcutLetterHighlight\"}>w</span></span>\n                                </Link>\n                            </Menu.Item>\n                            : null}\n                        {that.props.activePracticePermissions.PatientLabOrders || that.props.allowAllPermissions ?\n                            <Menu.Item key=\"26\" disabled={!this.props.currentPatient || true}>\n                                <Link\n                                    to={this.props.currentPatient ? \"/patient/\" + this.props.currentPatient.id + \"/emr/labtrackings\" : \"/patients/profile\"}>\n                                    <Icon type=\"solution\"/><span className=\"nav-text\">Lab Orders</span>\n                                </Link>\n                            </Menu.Item>\n                            : null}\n                    </Menu.ItemGroup>\n                    {/*</SubMenu>*/}\n                    <Menu.ItemGroup key=\"g3\" title={<Divider style={{margin: '0px'}}>Billing</Divider>}>\n\n                        {that.props.activePracticePermissions.PatientInvoices || that.props.allowAllPermissions ?\n                            <Menu.Item key=\"27\">\n                                <Link\n                                    to={this.props.currentPatient ? \"/patient/\" + this.props.currentPatient.id + \"/billing/invoices\" : \"/patients/billing/invoices\"}>\n                                    <Icon type=\"audit\"/><span className=\"nav-text\"><span\n                                    className={\"shortcutLetterHighlight\"}>I</span>nvoices</span>\n                                </Link>\n                            </Menu.Item>\n                            : null}\n                        {that.props.activePracticePermissions.PatientReturns || that.props.allowAllPermissions ?\n                            <Menu.Item key=\"31\">\n                                <Link\n                                    to={this.props.currentPatient ? \"/patient/\" + this.props.currentPatient.id + \"/billing/return/invoices\" : \"/patients/billing/return/invoices\"}>\n                                    <Icon type=\"redo\"/><span className=\"nav-text\">Invoices R<span\n                                    className={\"shortcutLetterHighlight\"}>e</span>turn</span>\n                                </Link>\n                            </Menu.Item>\n                            : null}\n                        {that.props.activePracticePermissions.PatientPayments || that.props.allowAllPermissions ?\n                            <Menu.Item key=\"28\">\n                                <Link\n                                    to={this.props.currentPatient ? \"/patient/\" + this.props.currentPatient.id + \"/billing/payments\" : \"/patients/billing/payments\"}>\n                                    <Icon type=\"dollar\"/><span className=\"nav-text\">Pa<span\n                                    className={\"shortcutLetterHighlight\"}>y</span>ments</span>\n                                </Link>\n                            </Menu.Item>\n                            : null}\n                        {that.props.activePracticePermissions.PatientLedger || that.props.allowAllPermissions ?\n                            <Menu.Item key=\"29\" disabled={!this.props.currentPatient}>\n                                <Link\n                                    to={this.props.currentPatient ? \"/patient/\" + this.props.currentPatient.id + \"/billing/ledger\" : \"/patients/profile\"}>\n                                    <Icon type=\"book\"/><span className=\"nav-text\">Led<span\n                                    className={\"shortcutLetterHighlight\"}>g</span>er</span>\n                                </Link>\n                            </Menu.Item>\n                            : null}\n                        {this.props.currentPatient && this.props.currentPatient.is_agent && (that.props.activePracticePermissions.PatientLedger || that.props.allowAllPermissions) ?\n                            <Menu.Item key=\"32\" disabled={!this.props.currentPatient}>\n                                <Link\n                                    to={this.props.currentPatient ? \"/patient/\" + this.props.currentPatient.id + \"/billing/wallet\" : \"/patients/profile\"}>\n                                    <Icon type=\"wallet\"/><span className=\"nav-text\">Wallet Ledger</span>\n                                </Link>\n                            </Menu.Item>\n                            : null}\n                    </Menu.ItemGroup>\n                </Menu>\n\n            </Sider>\n        </Hotkeys>\n    }\n}\n\nexport default PatientSider;\n","function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport omit from 'omit.js';\nimport { ConfigConsumer } from '../config-provider';\n\nvar TimelineItem = function TimelineItem(props) {\n  return React.createElement(ConfigConsumer, null, function (_ref) {\n    var _classNames, _classNames2;\n\n    var getPrefixCls = _ref.getPrefixCls;\n\n    var customizePrefixCls = props.prefixCls,\n        className = props.className,\n        _props$color = props.color,\n        color = _props$color === void 0 ? '' : _props$color,\n        children = props.children,\n        pending = props.pending,\n        dot = props.dot,\n        restProps = __rest(props, [\"prefixCls\", \"className\", \"color\", \"children\", \"pending\", \"dot\"]);\n\n    var prefixCls = getPrefixCls('timeline', customizePrefixCls);\n    var itemClassName = classNames((_classNames = {}, _defineProperty(_classNames, \"\".concat(prefixCls, \"-item\"), true), _defineProperty(_classNames, \"\".concat(prefixCls, \"-item-pending\"), pending), _classNames), className);\n    var dotClassName = classNames((_classNames2 = {}, _defineProperty(_classNames2, \"\".concat(prefixCls, \"-item-head\"), true), _defineProperty(_classNames2, \"\".concat(prefixCls, \"-item-head-custom\"), dot), _defineProperty(_classNames2, \"\".concat(prefixCls, \"-item-head-\").concat(color), true), _classNames2));\n    return React.createElement(\"li\", _extends({}, omit(restProps, ['position']), {\n      className: itemClassName\n    }), React.createElement(\"div\", {\n      className: \"\".concat(prefixCls, \"-item-tail\")\n    }), React.createElement(\"div\", {\n      className: dotClassName,\n      style: {\n        borderColor: /blue|red|green|gray/.test(color) ? undefined : color\n      }\n    }, dot), React.createElement(\"div\", {\n      className: \"\".concat(prefixCls, \"-item-content\")\n    }, children));\n  });\n};\n\nTimelineItem.defaultProps = {\n  color: 'blue',\n  pending: false,\n  position: ''\n};\nexport default TimelineItem;","function _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport TimelineItem from './TimelineItem';\nimport Icon from '../icon';\nimport { ConfigConsumer } from '../config-provider';\n\nvar Timeline =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Timeline, _React$Component);\n\n  function Timeline() {\n    var _this;\n\n    _classCallCheck(this, Timeline);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Timeline).apply(this, arguments));\n\n    _this.renderTimeline = function (_ref) {\n      var _classNames;\n\n      var getPrefixCls = _ref.getPrefixCls;\n\n      var _a = _this.props,\n          customizePrefixCls = _a.prefixCls,\n          _a$pending = _a.pending,\n          pending = _a$pending === void 0 ? null : _a$pending,\n          pendingDot = _a.pendingDot,\n          children = _a.children,\n          className = _a.className,\n          reverse = _a.reverse,\n          mode = _a.mode,\n          restProps = __rest(_a, [\"prefixCls\", \"pending\", \"pendingDot\", \"children\", \"className\", \"reverse\", \"mode\"]);\n\n      var prefixCls = getPrefixCls('timeline', customizePrefixCls);\n      var pendingNode = typeof pending === 'boolean' ? null : pending;\n      var classString = classNames(prefixCls, (_classNames = {}, _defineProperty(_classNames, \"\".concat(prefixCls, \"-pending\"), !!pending), _defineProperty(_classNames, \"\".concat(prefixCls, \"-reverse\"), !!reverse), _defineProperty(_classNames, \"\".concat(prefixCls, \"-\").concat(mode), !!mode), _classNames), className);\n      var pendingItem = pending ? React.createElement(TimelineItem, {\n        pending: !!pending,\n        dot: pendingDot || React.createElement(Icon, {\n          type: \"loading\"\n        })\n      }, pendingNode) : null;\n      var timeLineItems = reverse ? [pendingItem].concat(_toConsumableArray(React.Children.toArray(children).reverse())) : [].concat(_toConsumableArray(React.Children.toArray(children)), [pendingItem]);\n\n      var getPositionCls = function getPositionCls(ele, idx) {\n        if (mode === 'alternate') {\n          if (ele.props.position === 'right') return \"\".concat(prefixCls, \"-item-right\");\n          if (ele.props.position === 'left') return \"\".concat(prefixCls, \"-item-left\");\n          return idx % 2 === 0 ? \"\".concat(prefixCls, \"-item-left\") : \"\".concat(prefixCls, \"-item-right\");\n        }\n\n        if (mode === 'left') return \"\".concat(prefixCls, \"-item-left\");\n        if (mode === 'right') return \"\".concat(prefixCls, \"-item-right\");\n        if (ele.props.position === 'right') return \"\".concat(prefixCls, \"-item-right\");\n        return '';\n      }; // Remove falsy items\n\n\n      var truthyItems = timeLineItems.filter(function (item) {\n        return !!item;\n      });\n      var itemsCount = React.Children.count(truthyItems);\n      var lastCls = \"\".concat(prefixCls, \"-item-last\");\n      var items = React.Children.map(truthyItems, function (ele, idx) {\n        var pendingClass = idx === itemsCount - 2 ? lastCls : '';\n        var readyClass = idx === itemsCount - 1 ? lastCls : '';\n        return React.cloneElement(ele, {\n          className: classNames([ele.props.className, !reverse && !!pending ? pendingClass : readyClass, getPositionCls(ele, idx)])\n        });\n      });\n      return React.createElement(\"ul\", _extends({}, restProps, {\n        className: classString\n      }), items);\n    };\n\n    return _this;\n  }\n\n  _createClass(Timeline, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(ConfigConsumer, null, this.renderTimeline);\n    }\n  }]);\n\n  return Timeline;\n}(React.Component);\n\nexport { Timeline as default };\nTimeline.Item = TimelineItem;\nTimeline.defaultProps = {\n  reverse: false,\n  mode: ''\n};","import Timeline from './Timeline';\nexport default Timeline;","function _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nimport * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport RcSteps from 'rc-steps';\nimport Icon from '../icon';\nimport { ConfigConsumer } from '../config-provider';\n\nvar Steps =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Steps, _React$Component);\n\n  function Steps() {\n    var _this;\n\n    _classCallCheck(this, Steps);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Steps).apply(this, arguments));\n\n    _this.renderSteps = function (_ref) {\n      var getPrefixCls = _ref.getPrefixCls;\n      var prefixCls = getPrefixCls('steps', _this.props.prefixCls);\n      var iconPrefix = getPrefixCls('', _this.props.iconPrefix);\n      var icons = {\n        finish: React.createElement(Icon, {\n          type: \"check\",\n          className: \"\".concat(prefixCls, \"-finish-icon\")\n        }),\n        error: React.createElement(Icon, {\n          type: \"close\",\n          className: \"\".concat(prefixCls, \"-error-icon\")\n        })\n      };\n      return React.createElement(RcSteps, _extends({\n        icons: icons\n      }, _this.props, {\n        prefixCls: prefixCls,\n        iconPrefix: iconPrefix\n      }));\n    };\n\n    return _this;\n  }\n\n  _createClass(Steps, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(ConfigConsumer, null, this.renderSteps);\n    }\n  }]);\n\n  return Steps;\n}(React.Component);\n\nexport { Steps as default };\nSteps.Step = RcSteps.Step;\nSteps.defaultProps = {\n  current: 0\n};\nSteps.propTypes = {\n  prefixCls: PropTypes.string,\n  iconPrefix: PropTypes.string,\n  current: PropTypes.number\n};","import React from \"react\";\nimport {Button, Card, Icon, Steps, Timeline, Row, Col, Checkbox, Spin, Tag, Table, Affix, Tooltip} from \"antd\";\nimport {\n    getAPI,\n    interpolate,\n    makeFileURL,\n    postAPI,\n    startLoadingMessage,\n    stopLoadingMessage\n} from \"../../../utils/common\";\nimport {PATIENT_TIMELINE_API, PATIENT_TIMELINE_PDF} from \"../../../constants/api\";\nimport {CUSTOM_STRING_SEPERATOR} from \"../../../constants/hardData\";\nimport moment from \"moment\";\nimport {BACKEND_BASE_URL} from \"../../../config/connect\";\nimport {ERROR_MSG_TYPE, SUCCESS_MSG_TYPE} from \"../../../constants/dataKeys\";\n\nconst Step = Steps.Step;\n\nconst checkboxOption = [{\n    label: <span style={{width: '100%'}}>Appointment</span>,\n    value: 'appointments'\n}, {\n    label: <span style={{width: '100%'}}>Report Manual</span>,\n    value: 'vital_signs'\n}, {\n    label: <span style={{width: '100%'}}>Clinic Notes</span>,\n    value: 'clinic_notes'\n}, {\n    label: <span style={{width: '100%'}}>Treatment Plans</span>,\n    value: 'treatment_plans'\n}, {\n    label: <span style={{width: '100%'}}>Procedures</span>,\n    value: 'procedures'\n}, {\n    label: <span style={{width: '100%'}}>Files</span>,\n    value: 'files'\n}, {\n    label: <span style={{width: '100%'}}>Prescriptions</span>,\n    value: 'prescriptions'\n}, {\n    label: <span style={{width: '100%'}}>Invoices</span>,\n    value: 'invoices'\n}, {\n    label: <span style={{width: '100%'}}>Payments</span>,\n    value: 'payments'\n}];\n\nclass PatientTimeline extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            filterParams: ['appointments', 'vital_signs', 'clinic_notes', 'treatment_plans', 'procedures', 'files', 'prescriptions', 'invoices', 'payments'],\n            checkAllFilters: true,\n            selectedFiltersIntermediate: false,\n            timelineData: [],\n            checkedTimelineCards: []\n        }\n    }\n\n    componentDidMount() {\n        this.loadTimeline();\n    }\n\n    changeFilters = (value) => {\n        let that = this;\n        this.setState({\n            filterParams: value,\n            selectedFiltersIntermediate: !!value.length && value.length < checkboxOption.length,\n            checkAllFilters: value.length === checkboxOption.length,\n        }, function () {\n            that.loadTimeline()\n        })\n    }\n    onCheckAllFiltersChange = e => {\n        let that = this;\n        this.setState({\n            filterParams: e.target.checked ? checkboxOption.map(item => item.value) : [],\n            selectedFiltersIntermediate: false,\n            checkAllFilters: e.target.checked,\n        }, function () {\n            that.loadTimeline()\n        });\n    };\n    loadTimeline = () => {\n        let that = this;\n        let queryParams = {\n            practice_id: this.props.active_practiceId\n        };\n        that.setState({\n            loading: true\n        })\n        this.state.filterParams.forEach(function (value) {\n            queryParams[value] = 1\n        });\n        let successFn = function (data) {\n            var lastDate = moment().add(5, 'year');\n            that.setState(function () {\n                let timelineData = [];\n                let checkList = {};\n                data.forEach(function (item) {\n                    if (lastDate.format('YMD') != moment(item.sort_date).format('YMD')) {\n                        lastDate = moment(item.sort_date);\n                        timelineData.push({type: 'Time', date: item.sort_date})\n                    }\n                    timelineData.push(item);\n                    if (item.type != 'Appointments') {\n                        if (checkList[item.type]) {\n                            checkList[item.type][item.id] = true;\n                        } else {\n                            checkList[item.type] = {[item.id]: true}\n                        }\n                    }\n                });\n                return {\n                    timelineData: timelineData,\n                    loading: false,\n                    allCheckList: checkList\n                }\n            })\n        }\n\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            })\n        }\n        if (this.props.showAllClinic && this.props.match.params.id) {\n            delete (queryParams.practice_id)\n        }\n        getAPI(interpolate(PATIENT_TIMELINE_API, [this.props.match.params.id]), successFn, errorFn, queryParams);\n    }\n    onCheckAllTimelineCard = (e) => {\n        this.setState(function (prevState) {\n            return {\n                checkedTimelineCards: e.target.checked ? {...prevState.allCheckList} : {},\n                indeterminate: false,\n                checkAll: e.target.checked,\n            }\n        });\n    }\n    toggleTimelineCheckbox = (type, id, checked) => {\n        this.setState(function (prevState) {\n            let returnObj = {};\n            let checkedList = prevState.checkedTimelineCards;\n            if (checkedList[type]) {\n                checkedList[type][id] = !!checked\n            } else {\n                checkedList[type] = {[id]: !!checked}\n            }\n            if (!checked) {\n                returnObj.checkAll = false;\n                returnObj.indeterminate = true;\n                delete checkedList[type][id]\n                if (Object.keys(checkedList[type]).length) {\n\n                } else {\n                    delete checkedList[type]\n                    if (!Object.keys(checkedList).length) {\n                        returnObj.indeterminate = false;\n                    }\n                }\n\n            } else {\n                returnObj.indeterminate = true;\n                if (Object.keys(prevState.allCheckList).length == Object.keys(checkedList).length) {\n                    let keysList = Object.keys(prevState.allCheckList);\n                    let flag = false\n                    for (let i = 0; i < keysList.length; i++) {\n                        if (Object.keys(prevState.allCheckList[keysList[i]]).length != Object.keys(checkedList[keysList[i]]).length) {\n                            flag = true;\n                            returnObj.checkAll = false;\n                            break;\n                        }\n                    }\n                    if (!flag) {\n                        returnObj.indeterminate = false;\n                        returnObj.checkAll = true\n                    }\n                }\n            }\n            returnObj.checkedTimelineCards = checkedList;\n            return returnObj;\n        });\n    };\n    printCaseSheet = () => {\n        let that = this;\n        let msg = startLoadingMessage(\"Starting print case sheet...\");\n        let reqObj = {\n            practice: that.props.active_practiceId,\n            timeline: []\n        }\n        let keys = Object.keys(this.state.checkedTimelineCards);\n        keys.forEach(function (key) {\n            reqObj.timeline.push({\n                type: key,\n                id: Object.keys(that.state.checkedTimelineCards[key])\n            })\n        });\n        let successFn = function (data) {\n            stopLoadingMessage(msg, SUCCESS_MSG_TYPE, \"Fetched report successfully!!\");\n            window.open(BACKEND_BASE_URL + data.report);\n        }\n        let errorFn = function () {\n            stopLoadingMessage(msg, ERROR_MSG_TYPE, \"Case sheet printing failed!!\");\n        }\n        postAPI(interpolate(PATIENT_TIMELINE_PDF, [this.props.match.params.id]), reqObj, successFn, errorFn);\n    }\n\n    render() {\n        console.log(\"timeline\", this.state.timelineData);\n        let that = this;\n\n\n        return <Card title=\"Timeline\"\n                     extra={<Button.Group>\n                         <Button>Email Case Sheet</Button>\n                         <Button type=\"primary\" onClick={() => this.printCaseSheet()}>Print Case Sheet</Button>\n                     </Button.Group>}>\n            <Spin spinning={this.state.loading}>\n                <Row>\n                    <Col span={4}>\n                        <Checkbox\n                            indeterminate={this.state.selectedFiltersIntermediate}\n                            onChange={this.onCheckAllFiltersChange}\n                            checked={this.state.checkAllFilters}>\n                            <b>Select all</b>\n                        </Checkbox>\n                        <br/>\n                        <Checkbox.Group\n                            size={\"large\"}\n                            value={this.state.filterParams}\n                            options={checkboxOption}\n                            // defaultValue={['Apple']}\n                            onChange={this.changeFilters}\n                        />\n                    </Col>\n                    <Col span={20}>\n                        <Affix top={10}>\n                            <h4 style={{\n                                textAlign: 'right', padding: '5px',\n                                backgroundImage: 'linear-gradient(to left, white , transparent)',\n                            }}><Checkbox\n                                indeterminate={this.state.indeterminate}\n                                onChange={this.onCheckAllTimelineCard}\n                                checked={this.state.checkAll}>Select All</Checkbox></h4>\n                        </Affix>\n                        <Timeline progressDot current={1} direction=\"vertical\">\n                            {this.state.timelineData.map(item =>\n                                <Timeline.Item dot={item.type == 'Time' ? <Icon type=\"clock-circle-o\"\n                                                                                style={{fontSize: '25px'}}/> : null}>{timelineItem({\n                                    ...item,\n                                    checkedTimelineCards: that.state.checkedTimelineCards,\n                                    toggleTimelineCheckbox: that.toggleTimelineCheckbox\n                                })}</Timeline.Item>)}\n                        </Timeline>\n                    </Col>\n                </Row>\n            </Spin>\n\n        </Card>\n    }\n}\n\nexport default PatientTimeline;\n\nfunction\n\ndateTimeStamp(item) {\n    return <span><Affix top={20} offsetTop={30}><h2 style={{\n        marginLeft: '10px',\n        padding: '5px',\n        backgroundImage: 'linear-gradient(to right, #ddd , white)',\n        borderRadius: '4px'\n    }}>{moment(item.date).format('LL')}</h2></Affix></span>\n}\n\nfunction timelineItem(item) {\n    switch (item.type) {\n        case 'Clinical Notes':\n            return timelineClinicalNote(item);\n        case 'Appointments':\n            return timelineAppointmentCard(item);\n        case 'Files':\n            return timelineFilesCard(item);\n        case 'Invoices':\n            return timelineInvoiceCard(item);\n        case 'Vital Signs':\n            return timelineVitalSignCard(item);\n        case 'Prescriptions':\n            return timelinePrescriptionCard(item);\n        case 'Payments':\n            return timelinePaymentCard(item);\n        case 'Time':\n            return dateTimeStamp(item);\n        case 'Procedures':\n            return timelineProcedureCard(item);\n        case 'Treatment Plans':\n            return timelineTreatmentPlanCard(item);\n        default:\n            return item.type\n    }\n}\n\nfunction\n\ntimelineAppointmentCard(item) {\n    return <Card hoverable\n                 bodyStyle={{backgroundColor: (item.checkedTimelineCards[item.type] && item.checkedTimelineCards[item.type][item.id] ? '#B5EEFF' : 'initial')}}>\n        <h2><Icon type=\"calendar\"/> Appointment\n            {item.practice_data ? <Tag style={{float: 'right'}}>\n                <Tooltip title=\"Practice Name\">\n                    <b>{item.practice_data.name} </b>\n                </Tooltip>\n            </Tag> : null}\n        </h2>\n        {item.doctor_data ?\n            <p style={{\n                borderLeft: '5px solid ' + item.doctor_data.calendar_colour,\n                paddingLeft: '5px'\n            }}>{item.doctor_data.user.first_name}</p> : null}\n\n        {moment(item.schedule_at).format('hh:mm A')} to {moment(item.schedule_at).add(item.slot, 'mins').format('HH:mm A')}\n    </Card>;\n}\n\nfunction timelineFilesCard(item) {\n    return <Card hoverable\n                 bodyStyle={{backgroundColor: (item.checkedTimelineCards[item.type] && item.checkedTimelineCards[item.type][item.id] ? '#B5EEFF' : 'initial')}}>\n        <h2><Icon type=\"picture\"/> File<Checkbox size=\"large\" style={{float: 'right'}}\n                                                 checked={(item.checkedTimelineCards[item.type] ? item.checkedTimelineCards[item.type][item.id] : false)}\n                                                 onChange={(e) => item.toggleTimelineCheckbox(item.type, item.id, e.target.checked)}/>\n            {item.practice_data ? <Tag style={{float: 'right'}}>\n                <Tooltip title=\"Practice Name\">\n                    <b>{item.practice_data.name} </b>\n                </Tooltip>\n            </Tag> : null}\n        </h2>\n        <img src={makeFileURL(item.file_type)} alt=\"\" style={{height: 100}}/>\n    </Card>\n}\n\nfunction\n\ntimelineInvoiceCard(item) {\n    return <Card hoverable\n                 bodyStyle={{backgroundColor: (item.checkedTimelineCards[item.type] && item.checkedTimelineCards[item.type][item.id] ? '#B5EEFF' : 'initial')}}>\n        <h2><Icon type=\"audit\"/> Invoice<Checkbox size=\"large\" style={{float: 'right'}}\n                                                  checked={(item.checkedTimelineCards[item.type] ? item.checkedTimelineCards[item.type][item.id] : false)}\n                                                  onChange={(e) => item.toggleTimelineCheckbox(item.type, item.id, e.target.checked)}/>\n            {item.practice_data ? <Tag style={{float: 'right'}}>\n                <Tooltip title=\"Practice Name\">\n                    <b>{item.practice_data.name} </b>\n                </Tooltip>\n            </Tag> : null}\n        </h2>\n        {item.procedure.map(proc => <Tag>{proc.name}</Tag>)}\n        {item.inventory.map(proc => <Tag>{proc.name}</Tag>)}\n        <br/><b>{item.invoice_id}</b>\n        <br/><b>Invoice Amount: INR {item.total}</b>\n        <br/><b>Paid Amount: INR {item.payments_data}</b>\n        <br/><b>Due Amount: INR {item.total - item.payments_data}</b>\n    </Card>\n}\n\nfunction\n\ntimelineClinicalNote(item) {\n    return <Card hoverable\n                 bodyStyle={{backgroundColor: (item.checkedTimelineCards[item.type] && item.checkedTimelineCards[item.type][item.id] ? '#B5EEFF' : 'initial')}}>\n        <h2><Icon type=\"solution\"/> Clinical Note Added<Checkbox size=\"large\" style={{float: 'right'}}\n                                                                 checked={(item.checkedTimelineCards[item.type] ? item.checkedTimelineCards[item.type][item.id] : false)}\n                                                                 onChange={(e) => item.toggleTimelineCheckbox(item.type, item.id, e.target.checked)}/>\n            {item.practice ? <Tag style={{float: 'right'}}>\n                <Tooltip title=\"Practice Name\">\n                    <b>{item.practice.name} </b>\n                </Tooltip>\n            </Tag> : null}\n        </h2>\n        {item.chief_complaints ?\n            <p>Chief Complaints\n                <ul>\n                    {item.chief_complaints.split(CUSTOM_STRING_SEPERATOR).map(item =>\n                        item ? <li>{item}</li> : null)}\n                </ul>\n            </p>\n            : null}\n        {item.observations ?\n            <p>Observations\n                <ul>\n                    {item.observations.split(CUSTOM_STRING_SEPERATOR).map(item =>\n                        item ? <li>{item}</li> : null)}\n                </ul>\n            </p>\n            : null}\n        {item.investigations ?\n            <p>Investigations\n                <ul>\n                    {item.investigations.split(CUSTOM_STRING_SEPERATOR).map(item =>\n                        item ? <li>{item}</li> : null)}\n                </ul>\n            </p>\n            : null}\n        {item.diagnosis ?\n            <p>Diagnosis\n                <ul>\n                    {item.diagnosis.split(CUSTOM_STRING_SEPERATOR).map(item =>\n                        item ? <li>{item}</li> : null)}\n                </ul>\n            </p>\n            : null}\n        {item.notes ?\n            <p>Notes\n                <ul>\n                    {item.notes.split(CUSTOM_STRING_SEPERATOR).map(item =>\n                        item ? <li>{item}</li> : null)}\n                </ul>\n            </p>\n            : null}\n    </Card>;\n}\n\nfunction\n\ntimelineVitalSignCard(item) {\n    const columns = [{\n        title: 'Time',\n        dataIndex: 'created_at',\n        key: 'name',\n        render: created_at => <span>{moment(created_at).format('hh:mm A')}</span>,\n    }, {\n        title: 'Temp(F)',\n        key: 'temperature',\n        render: (text, record) => (\n            <span> {record.temperature}<br/>,{record.temperature_part}</span>\n        )\n    }, {\n        title: 'Pulse (BPM)',\n        dataIndex: 'pulse',\n        key: 'pulse',\n    }, {\n        title: 'RR breaths/min',\n        dataIndex: 'resp_rate',\n        key: 'resp_rate',\n    }, {\n        title: 'SYS/DIA mmhg',\n        key: 'address',\n        render: (text, record) => (<>{record.blood_pressure_up ?\n                <span> {record.blood_pressure_up}/{record.blood_pressure_down}<br/>,{record.position}</span> : null}\n            </>\n        )\n    }, {\n        title: 'WEIGHT kg',\n        dataIndex: 'weight',\n        key: 'weight',\n    }, {\n        title: \"Creatinine Level\",\n        key: \"creatinine\",\n        dataIndex: \"creatinine\",\n    }, {\n        title: \"Haemoglobin Level\",\n        key: \"haemoglobin\",\n        dataIndex: \"haemoglobin\",\n    }, {\n        title: \"Urea Level\",\n        key: \"urea\",\n        dataIndex: \"urea\",\n\n    }, {\n        title: \"Uric Acid Level\",\n        key: \"uric_acid\",\n        dataIndex: \"uric_acid\",\n    }];\n    return <Card hoverable\n                 bodyStyle={{backgroundColor: (item.checkedTimelineCards[item.type] && item.checkedTimelineCards[item.type][item.id] ? '#B5EEFF' : 'initial')}}>\n        <h2><Icon type=\"heart\"/> Report Manual Recorded<Checkbox size=\"large\" style={{float: 'right'}}\n                                                                 checked={(item.checkedTimelineCards[item.type] ? item.checkedTimelineCards[item.type][item.id] : false)}\n                                                                 onChange={(e) => item.toggleTimelineCheckbox(item.type, item.id, e.target.checked)}/>\n            {item.practice_data ? <Tag style={{float: 'right'}}>\n                <Tooltip title=\"Practice Name\">\n                    <b>{item.practice_data.name} </b>\n                </Tooltip>\n            </Tag> : null}\n        </h2>\n        {item.doctor_data ?\n            <p style={{\n                borderLeft: '5px solid ' + item.doctor_data.calendar_colour,\n                paddingLeft: '5px'\n            }}>{item.doctor_data.user.first_name}</p> : null}\n        <Table columns={columns}\n               size={\"small\"}\n               pagination={false}\n               dataSource={[item]}/>\n    </Card>\n}\n\nfunction\n\ntimelinePrescriptionCard(item) {\n    return <Card hoverable\n                 bodyStyle={{backgroundColor: (item.checkedTimelineCards[item.type] && item.checkedTimelineCards[item.type][item.id] ? '#B5EEFF' : 'initial')}}>\n        <h2><Icon type=\"solution\"/> Prescription Added<Checkbox size=\"large\" style={{float: 'right'}}\n                                                                checked={(item.checkedTimelineCards[item.type] ? item.checkedTimelineCards[item.type][item.id] : false)}\n                                                                onChange={(e) => item.toggleTimelineCheckbox(item.type, item.id, e.target.checked)}/>\n            {item.practice ? <Tag style={{float: 'right'}}>\n                <Tooltip title=\"Practice Name\">\n                    <b>{item.practice.name} </b>\n                </Tooltip>\n            </Tag> : null}\n        </h2>\n        {item.doctor ?\n            <p style={{\n                borderLeft: '5px solid ' + item.doctor.calendar_colour,\n                paddingLeft: '5px'\n            }}>{item.doctor.user.first_name}</p> : null}\n        {item.drugs.map(drug => <Tag>{drug.name}</Tag>)}\n\n    </Card>\n}\n\nfunction\n\ntimelinePaymentCard(item) {\n    return <Card hoverable\n                 bodyStyle={{backgroundColor: (item.checkedTimelineCards[item.type] && item.checkedTimelineCards[item.type][item.id] ? '#B5EEFF' : 'initial')}}>\n        <h2><Icon type=\"dollar\"/> Payment<Checkbox size=\"large\" style={{float: 'right'}}\n                                                   checked={(item.checkedTimelineCards[item.type] ? item.checkedTimelineCards[item.type][item.id] : false)}\n                                                   onChange={(e) => item.toggleTimelineCheckbox(item.type, item.id, e.target.checked)}/>\n            {item.practice_data ? <Tag style={{float: 'right'}}>\n                <Tooltip title=\"Practice Name\">\n                    <b>{item.practice_data.name} </b>\n                </Tooltip>\n            </Tag> : null}\n        </h2>\n        <b>{item.payment_id}</b>\n        <br/><b>Amount Paid: INR {item.total}</b>\n    </Card>\n}\n\nfunction\n\ntimelineProcedureCard(item) {\n    return <Card hoverable\n                 bodyStyle={{backgroundColor: (item.checkedTimelineCards[item.type] && item.checkedTimelineCards[item.type][item.id] ? '#B5EEFF' : 'initial')}}>\n        <h2>Procedure Performed<Checkbox size=\"large\" style={{float: 'right'}}\n                                         checked={(item.checkedTimelineCards[item.type] ? item.checkedTimelineCards[item.type][item.id] : false)}\n                                         onChange={(e) => item.toggleTimelineCheckbox(item.type, item.id, e.target.checked)}/>\n            {item.practice ? <Tag style={{float: 'right'}}>\n                <Tooltip title=\"Practice Name\">\n                    <b>{item.practice.name} </b>\n                </Tooltip>\n            </Tag> : null}\n        </h2>\n        {item.doctor ?\n            <p style={{\n                borderLeft: '5px solid ' + item.doctor.calendar_colour,\n                paddingLeft: '5px'\n            }}>{item.doctor.user.first_name}</p> : null}\n        {item.treatment_plans.map(item => <Tag>{item.procedure.name}</Tag>)}\n    </Card>\n}\n\nfunction\n\ntimelineTreatmentPlanCard(item) {\n    return <Card hoverable\n                 bodyStyle={{backgroundColor: (item.checkedTimelineCards[item.type] && item.checkedTimelineCards[item.type][item.id] ? '#B5EEFF' : 'initial')}}>\n        <h2>Treatment Plan <Checkbox size=\"large\" style={{float: 'right'}}\n                                     checked={(item.checkedTimelineCards[item.type] ? item.checkedTimelineCards[item.type][item.id] : false)}\n                                     onChange={(e) => item.toggleTimelineCheckbox(item.type, item.id, e.target.checked)}/>\n            {item.practice ? <Tag style={{float: 'right'}}>\n                <Tooltip title=\"Practice Name\">\n                    <b>{item.practice.name} </b>\n                </Tooltip>\n            </Tag> : null}\n        </h2>\n        {item.doctor ?\n            <p style={{\n                borderLeft: '5px solid ' + item.doctor.calendar_colour,\n                paddingLeft: '5px'\n            }}>{item.doctor.user.first_name}</p> : null}\n        {item.treatment_plans.map(item => <Tag>{item.procedure.name}</Tag>)}\n    </Card>\n}\n","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nimport { Component } from \"react\";\n\nfunction appendStyle(id, css) {\n  if (!document.head.querySelector(\"#\" + id)) {\n    var node = document.createElement(\"style\");\n    node.textContent = css;\n    node.type = \"text/css\";\n    node.id = id;\n    document.head.appendChild(node);\n  }\n}\n\nvar StyleInjector = function (_Component) {\n  _inherits(StyleInjector, _Component);\n\n  function StyleInjector() {\n    _classCallCheck(this, StyleInjector);\n\n    return _possibleConstructorReturn(this, _Component.apply(this, arguments));\n  }\n\n  StyleInjector.prototype.componentDidMount = function componentDidMount() {\n    appendStyle(this.props.name, this.props.css);\n  };\n\n  StyleInjector.prototype.componentWillUnmount = function componentWillUnmount() {\n    var node = document.getElementById(this.props.name);\n    node.parentNode.removeChild(node);\n  };\n\n  StyleInjector.prototype.render = function render() {\n    return null;\n  };\n\n  return StyleInjector;\n}(Component);\n\nexport { StyleInjector as default };\nexport var lightboxStyles = function lightboxStyles(_ref) {\n  var imageBackgroundColor = _ref.imageBackgroundColor;\n  return \"\\n  body {\\n    overflow: hidden;\\n  }\\n\\n  .__react_modal_image__modal_container {\\n    position: fixed;\\n    z-index: 1000;\\n    left: 0;\\n    top: 0;\\n    width: 100%;\\n    height: 100%;\\n    background-color: rgba(0, 0, 0, 0.8);\\n    touch-action: none;\\n    overflow: hidden;\\n  }\\n\\n  .__react_modal_image__modal_content {\\n    position: relative;\\n    height: 100%;\\n    width: 100%;\\n  }\\n\\n  .__react_modal_image__modal_content img, \\n  .__react_modal_image__modal_content svg {\\n    position: absolute;\\n    top: 50%;\\n    left: 50%;\\n    transform: translate3d(-50%, -50%, 0);\\n    -webkit-transform: translate3d(-50%, -50%, 0);\\n    -ms-transform: translate3d(-50%, -50%, 0);\\n    overflow: hidden;\\n  }\\n\\n  .__react_modal_image__medium_img {\\n    max-width: 98%;\\n    max-height: 98%;\\n    background-color: \" + imageBackgroundColor + \";\\n  }\\n\\n  .__react_modal_image__large_img {\\n    cursor: move;\\n    background-color: \" + imageBackgroundColor + \"\\n  }\\n\\n  .__react_modal_image__icon_menu a {\\n    display: inline-block;\\n    font-size: 40px;\\n    cursor: pointer;\\n    line-height: 40px;\\n    box-sizing: border-box;\\n    border: none;\\n    padding: 0px 5px 0px 5px;\\n    margin-left: 10px;\\n    color: white;\\n    background-color: rgba(0, 0, 0, 0);\\n  }\\n\\n  .__react_modal_image__icon_menu {\\n    display: inline-block;\\n    float: right;\\n  }\\n\\n  .__react_modal_image__caption {\\n    display: inline-block;\\n    color: white;\\n    font-size: 120%;\\n    padding: 10px;\\n    margin: 0;\\n  }\\n\\n  .__react_modal_image__header {\\n    position: absolute;\\n    top: 0;\\n    width: 100%;\\n    background-color: rgba(0, 0, 0, 0.7);\\n    overflow: hidden;\\n  }\\n\";\n};","/* \n  Icons from https://material.io/icons/\n*/\nimport React from \"react\";\nexport var ZoomInIcon = function ZoomInIcon() {\n  return React.createElement(\"svg\", {\n    fill: \"#ffffff\",\n    height: \"24\",\n    viewBox: \"0 0 24 24\",\n    width: \"24\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, React.createElement(\"path\", {\n    d: \"M0 0h24v24H0z\",\n    fill: \"none\"\n  }), React.createElement(\"path\", {\n    d: \"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z\"\n  }));\n};\nexport var ZoomOutIcon = function ZoomOutIcon() {\n  return React.createElement(\"svg\", {\n    fill: \"#ffffff\",\n    height: \"24\",\n    viewBox: \"0 0 24 24\",\n    width: \"24\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, React.createElement(\"path\", {\n    d: \"M0 0h24v24H0z\",\n    fill: \"none\"\n  }), React.createElement(\"path\", {\n    d: \"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z\"\n  }));\n};\nexport var DownloadIcon = function DownloadIcon() {\n  return React.createElement(\"svg\", {\n    fill: \"#ffffff\",\n    height: \"24\",\n    viewBox: \"0 0 24 24\",\n    width: \"24\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, React.createElement(\"path\", {\n    d: \"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z\"\n  }), React.createElement(\"path\", {\n    d: \"M0 0h24v24H0z\",\n    fill: \"none\"\n  }));\n};\nexport var CloseIcon = function CloseIcon() {\n  return React.createElement(\"svg\", {\n    fill: \"#ffffff\",\n    height: \"24\",\n    viewBox: \"0 0 24 24\",\n    width: \"24\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, React.createElement(\"path\", {\n    d: \"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"\n  }), React.createElement(\"path\", {\n    d: \"M0 0h24v24H0z\",\n    fill: \"none\"\n  }));\n};\nexport var SpinnerIcon = function SpinnerIcon() {\n  return React.createElement(\"svg\", {\n    fill: \"#ffffff\",\n    height: \"48\",\n    viewBox: \"0 0 24 24\",\n    width: \"48\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, React.createElement(\"path\", {\n    d: \"M6 2v6h.01L6 8.01 10 12l-4 4 .01.01H6V22h12v-5.99h-.01L18 16l-4-4 4-3.99-.01-.01H18V2H6zm10 14.5V20H8v-3.5l4-4 4 4zm-4-5l-4-4V4h8v3.5l-4 4z\"\n  }), React.createElement(\"path\", {\n    d: \"M0 0h24v24H0V0z\",\n    fill: \"none\"\n  }));\n};\nexport var RotateIcon = function RotateIcon() {\n  return React.createElement(\"svg\", {\n    fill: \"#ffffff\",\n    width: \"24\",\n    height: \"24\",\n    viewBox: \"0 0 24 24\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, React.createElement(\"path\", {\n    fill: \"none\",\n    d: \"M0 0h24v24H0V0zm0 0h24v24H0V0z\"\n  }), React.createElement(\"path\", {\n    d: \"M7.47 21.49C4.2 19.93 1.86 16.76 1.5 13H0c.51 6.16 5.66 11 11.95 11 .23 0 .44-.02.66-.03L8.8 20.15l-1.33 1.34zM12.05 0c-.23 0-.44.02-.66.04l3.81 3.81 1.33-1.33C19.8 4.07 22.14 7.24 22.5 11H24c-.51-6.16-5.66-11-11.95-11zM16 14h2V8c0-1.11-.9-2-2-2h-6v2h6v6zm-8 2V4H6v2H4v2h2v8c0 1.1.89 2 2 2h8v2h2v-2h2v-2H8z\"\n  }));\n};","import React from \"react\";\nimport { ZoomInIcon, ZoomOutIcon, DownloadIcon, CloseIcon, RotateIcon } from \"./icons\";\n\nvar Header = function Header(_ref) {\n  var image = _ref.image,\n      alt = _ref.alt,\n      zoomed = _ref.zoomed,\n      toggleZoom = _ref.toggleZoom,\n      toggleRotate = _ref.toggleRotate,\n      onClose = _ref.onClose,\n      enableDownload = _ref.enableDownload,\n      enableZoom = _ref.enableZoom,\n      enableRotate = _ref.enableRotate;\n  return React.createElement(\"div\", {\n    className: \"__react_modal_image__header\"\n  }, React.createElement(\"span\", {\n    className: \"__react_modal_image__icon_menu\"\n  }, enableDownload && React.createElement(\"a\", {\n    href: image,\n    download: true\n  }, React.createElement(DownloadIcon, null)), enableZoom && React.createElement(\"a\", {\n    onClick: toggleZoom\n  }, zoomed ? React.createElement(ZoomOutIcon, null) : React.createElement(ZoomInIcon, null)), enableRotate && React.createElement(\"a\", {\n    onClick: toggleRotate\n  }, React.createElement(RotateIcon, null)), React.createElement(\"a\", {\n    onClick: onClose\n  }, React.createElement(CloseIcon, null))), alt && React.createElement(\"span\", {\n    className: \"__react_modal_image__caption\"\n  }, alt));\n};\n\nexport default Header;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nimport React, { Component } from \"react\";\nimport { SpinnerIcon } from \"./icons\";\n\nvar Image = function (_Component) {\n  _inherits(Image, _Component);\n\n  function Image() {\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, Image);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, _Component.call.apply(_Component, [this].concat(args))), _this), _this.state = {\n      loading: true\n    }, _this.handleOnLoad = function () {\n      _this.setState({\n        loading: false\n      });\n    }, _this.handleOnContextMenu = function (event) {\n      !_this.props.contextMenu && event.preventDefault();\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  Image.prototype.render = function render() {\n    var _props = this.props,\n        id = _props.id,\n        className = _props.className,\n        src = _props.src,\n        style = _props.style,\n        handleDoubleClick = _props.handleDoubleClick;\n    return React.createElement(\"div\", null, this.state.loading && React.createElement(SpinnerIcon, null), React.createElement(\"img\", {\n      id: id,\n      className: className,\n      src: src,\n      style: style,\n      onLoad: this.handleOnLoad,\n      onDoubleClick: handleDoubleClick,\n      onContextMenu: this.handleOnContextMenu\n    }));\n  };\n\n  return Image;\n}(Component);\n\nexport { Image as default };","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nimport React, { Component } from \"react\";\nimport StyleInjector, { lightboxStyles } from \"./styles\";\nimport Header from \"./Header\";\nimport Image from \"./Image\";\n\nvar Lightbox = function (_Component) {\n  _inherits(Lightbox, _Component);\n\n  function Lightbox() {\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, Lightbox);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, _Component.call.apply(_Component, [this].concat(args))), _this), _this.state = {\n      move: {\n        x: 0,\n        y: 0\n      },\n      moveStart: undefined,\n      zoomed: false,\n      rotationDeg: 0\n    }, _this.handleKeyDown = function (event) {\n      // ESC or ENTER closes the modal\n      if (event.keyCode === 27 || event.keyCode === 13) {\n        _this.props.onClose();\n      }\n    }, _this.getCoordinatesIfOverImg = function (event) {\n      var point = event.changedTouches ? event.changedTouches[0] : event;\n\n      if (point.target.id !== \"react-modal-image-img\") {\n        // the img was not a target of the coordinates\n        return;\n      }\n\n      var dim = _this.contentEl.getBoundingClientRect();\n\n      var x = point.clientX - dim.left;\n      var y = point.clientY - dim.top;\n      return {\n        x: x,\n        y: y\n      };\n    }, _this.handleMouseDownOrTouchStart = function (event) {\n      event.preventDefault();\n\n      if (event.touches && event.touches.length > 1) {\n        // more than one finger, ignored\n        return;\n      }\n\n      var coords = _this.getCoordinatesIfOverImg(event);\n\n      if (!coords) {\n        // click outside the img => close modal\n        _this.props.onClose();\n      }\n\n      if (!_this.state.zoomed) {\n        // do not allow drag'n'drop if zoom has not been applied\n        return;\n      }\n\n      _this.setState(function (prev) {\n        return {\n          moveStart: {\n            x: coords.x - prev.move.x,\n            y: coords.y - prev.move.y\n          }\n        };\n      });\n    }, _this.handleMouseMoveOrTouchMove = function (event) {\n      event.preventDefault();\n\n      if (!_this.state.zoomed || !_this.state.moveStart) {\n        // do not allow drag'n'drop if zoom has not been applied\n        // or if there has not been a click\n        return;\n      }\n\n      if (event.touches && event.touches.length > 1) {\n        // more than one finger, ignored\n        return;\n      }\n\n      var coords = _this.getCoordinatesIfOverImg(event);\n\n      if (!coords) {\n        return;\n      }\n\n      _this.setState(function (prev) {\n        return {\n          move: {\n            x: coords.x - prev.moveStart.x,\n            y: coords.y - prev.moveStart.y\n          }\n        };\n      });\n    }, _this.handleMouseUpOrTouchEnd = function (event) {\n      _this.setState({\n        moveStart: undefined\n      });\n    }, _this.toggleZoom = function (event) {\n      event.preventDefault();\n\n      _this.setState(function (prev) {\n        return {\n          zoomed: !prev.zoomed,\n          // reset position if zoomed out\n          move: prev.zoomed ? {\n            x: 0,\n            y: 0\n          } : prev.move\n        };\n      });\n    }, _this.toggleRotate = function (event) {\n      event.preventDefault();\n      var rotationDeg = _this.state.rotationDeg;\n\n      if (rotationDeg === 360) {\n        _this.setState({\n          rotationDeg: 90\n        });\n\n        return;\n      }\n\n      _this.setState(function (prevState) {\n        return {\n          rotationDeg: prevState.rotationDeg += 90\n        };\n      });\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  Lightbox.prototype.componentDidMount = function componentDidMount() {\n    document.addEventListener(\"keydown\", this.handleKeyDown, false);\n  };\n\n  Lightbox.prototype.componentWillUnmount = function componentWillUnmount() {\n    document.removeEventListener(\"keydown\", this.handleKeyDown, false);\n  };\n\n  Lightbox.prototype.render = function render() {\n    var _this2 = this;\n\n    var _props = this.props,\n        medium = _props.medium,\n        large = _props.large,\n        alt = _props.alt,\n        onClose = _props.onClose,\n        hideDownload = _props.hideDownload,\n        hideZoom = _props.hideZoom,\n        showRotate = _props.showRotate,\n        _props$imageBackgroun = _props.imageBackgroundColor,\n        imageBackgroundColor = _props$imageBackgroun === undefined ? \"black\" : _props$imageBackgroun;\n    var _state = this.state,\n        move = _state.move,\n        zoomed = _state.zoomed,\n        rotationDeg = _state.rotationDeg;\n    return React.createElement(\"div\", null, React.createElement(StyleInjector, {\n      name: \"__react_modal_image__lightbox\",\n      css: lightboxStyles({\n        imageBackgroundColor: imageBackgroundColor\n      })\n    }), React.createElement(\"div\", {\n      className: \"__react_modal_image__modal_container\"\n    }, React.createElement(\"div\", {\n      className: \"__react_modal_image__modal_content\",\n      onMouseDown: this.handleMouseDownOrTouchStart,\n      onMouseUp: this.handleMouseUpOrTouchEnd,\n      onMouseMove: this.handleMouseMoveOrTouchMove,\n      onTouchStart: this.handleMouseDownOrTouchStart,\n      onTouchEnd: this.handleMouseUpOrTouchEnd,\n      onTouchMove: this.handleMouseMoveOrTouchMove,\n      ref: function ref(el) {\n        _this2.contentEl = el;\n      }\n    }, zoomed && React.createElement(Image, {\n      id: \"react-modal-image-img\",\n      className: \"__react_modal_image__large_img\",\n      src: large || medium,\n      style: {\n        transform: \"translate3d(-50%, -50%, 0) translate3d(\" + move.x + \"px, \" + move.y + \"px, 0) rotate(\" + rotationDeg + \"deg)\",\n        WebkitTransform: \"translate3d(-50%, -50%, 0) translate3d(\" + move.x + \"px, \" + move.y + \"px, 0) rotate(\" + rotationDeg + \"deg)\",\n        MsTransform: \"translate3d(-50%, -50%, 0) translate3d(\" + move.x + \"px, \" + move.y + \"px, 0) rotate(\" + rotationDeg + \"deg)\"\n      },\n      handleDoubleClick: this.toggleZoom\n    }), !zoomed && React.createElement(Image, {\n      id: \"react-modal-image-img\",\n      className: \"__react_modal_image__medium_img\",\n      src: medium || large,\n      handleDoubleClick: this.toggleZoom,\n      contextMenu: !medium,\n      style: {\n        transform: \"translate3d(-50%, -50%, 0) rotate(\" + rotationDeg + \"deg)\",\n        WebkitTransform: \"translate3d(-50%, -50%, 0) rotate(\" + rotationDeg + \"deg)\",\n        MsTransform: \"translate3d(-50%, -50%, 0) rotate(\" + rotationDeg + \"deg)\"\n      }\n    })), React.createElement(Header, {\n      image: large || medium,\n      alt: alt,\n      zoomed: zoomed,\n      toggleZoom: this.toggleZoom,\n      toggleRotate: this.toggleRotate,\n      onClose: onClose,\n      enableDownload: !hideDownload,\n      enableZoom: !hideZoom,\n      enableRotate: !!showRotate\n    })));\n  };\n\n  return Lightbox;\n}(Component);\n\nexport { Lightbox as default };","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nimport React, { Component } from \"react\";\nimport Lightbox from \"./Lightbox\";\nexport { default as Lightbox } from \"./Lightbox\";\n\nvar _default = function (_Component) {\n  _inherits(_default, _Component);\n\n  function _default() {\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, _default);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, _Component.call.apply(_Component, [this].concat(args))), _this), _this.state = {\n      modalOpen: false\n    }, _this.toggleModal = function () {\n      _this.setState(function (prev) {\n        return {\n          modalOpen: !prev.modalOpen\n        };\n      });\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  _default.prototype.render = function render() {\n    var _props = this.props,\n        className = _props.className,\n        small = _props.small,\n        smallSrcSet = _props.smallSrcSet,\n        medium = _props.medium,\n        large = _props.large,\n        alt = _props.alt,\n        hideDownload = _props.hideDownload,\n        hideZoom = _props.hideZoom,\n        showRotate = _props.showRotate,\n        imageBackgroundColor = _props.imageBackgroundColor;\n    var modalOpen = this.state.modalOpen;\n    return React.createElement(\"div\", null, React.createElement(\"img\", {\n      className: className,\n      style: {\n        cursor: \"pointer\",\n        maxWidth: \"100%\",\n        maxHeight: \"100%\"\n      },\n      onClick: this.toggleModal,\n      src: small,\n      srcSet: smallSrcSet,\n      alt: alt\n    }), modalOpen && React.createElement(Lightbox, {\n      medium: medium,\n      large: large,\n      alt: alt,\n      onClose: this.toggleModal,\n      hideDownload: hideDownload,\n      hideZoom: hideZoom,\n      showRotate: showRotate,\n      imageBackgroundColor: imageBackgroundColor\n    }));\n  };\n\n  return _default;\n}(Component);\n\nexport { _default as default };","import React from \"react\";\nimport {\n    Button,\n    Card,\n    Col,\n    Icon,\n    List,\n    Modal,\n    Radio,\n    Row,\n    Checkbox,\n    Menu,\n    Dropdown,\n    Input,\n    Popconfirm,\n    Affix, Tag\n} from \"antd\";\nimport {\n    getAPI,\n    postAPI,\n    putAPI,\n    interpolate,\n    makeFileURL,\n    displayMessage,\n    fildFileExtension\n} from \"../../../utils/common\";\nimport {\n    ALL_PATIENT_FILES,\n    EMR_FILETAGS,\n    PATIENT_FILES,\n    MEDICAL_CERTIFICATE_API,\n    MEDICAL_CERTIFICATE_PDF,\n    ALL_MEDICAL_CERITICATE_API,\n    PATIENT_MAILEDFILES\n} from \"../../../constants/api\";\nimport DynamicFieldsForm from \"../../common/DynamicFieldsForm\";\nimport {Form} from \"antd/lib/index\";\nimport {MULTI_SELECT_FIELD, SINGLE_IMAGE_UPLOAD_FIELD, INPUT_FIELD} from \"../../../constants/dataKeys\";\nimport {Redirect, Link} from 'react-router-dom';\nimport InfiniteFeedLoaderButton from \"../../common/InfiniteFeedLoaderButton\";\nimport Meta from \"antd/lib/card/Meta\";\nimport {BACKEND_BASE_URL} from \"../../../config/connect\";\nimport ModalImage from \"react-modal-image\";\nimport {ERROR_MSG_TYPE, SUCCESS_MSG_TYPE} from \"../../../constants/dataKeys\";\nimport moment from \"moment\";\nimport {PDF_FILE_EXTENSION} from \"../../../constants/hardData\";\n\nclass PatientFiles extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            files: [],\n            tags: [],\n            showAddModal: false,\n            loading: true,\n            selectedFiles: {},\n            selectedTags: {},\n            filterSearchTag: null,\n            showAddMedicalModel: false,\n            // filterSearchMedical:''\n            medicalCertificate: [],\n            visible: false,\n            filesData: {},\n            mailedfiles: []\n        };\n        this.loadData = this.loadData.bind(this);\n        this.loadMedicalCertificate = this.loadMedicalCertificate.bind(this);\n    }\n\n    componentWillMount() {\n        this.loadData();\n        // this.loadTags();\n        this.loadMedicalCertificate();\n    }\n\n    loadData(page = 1) {\n        let that = this;\n        this.setState({\n            loading: true\n        })\n        let successFn = function (data) {\n            that.setState(function (prevState) {\n                let lastPatient = null;\n                if (data.current == 1) {\n                    let newData = data.results.map(file => {\n                        if (moment(file.created_at).format('YYYYMMDD') != moment(lastPatient).format('YYYYMMDD')) {\n                            lastPatient = moment(file.created_at);\n                            return {...file, newDate: true}\n                        }\n                        return {...file, newDate: false}\n                    });\n                    return {\n                        files: newData,\n                        total: data.count,\n                        loadMoreFiles: data.next,\n                        loading: false,\n                    }\n                } else {\n                    let newData = data.results.map(file => {\n                        if (moment(file.created_at).format('YYYYMMDD') != moment(lastPatient).format('YYYYMMDD')) {\n                            lastPatient = moment(file.created_at);\n                            return {...file, newDate: true}\n                        }\n                        return {...file, newDate: false}\n                    });\n                    return {\n                        files: [...prevState.files, ...newData],\n                        loadMoreFiles: data.next,\n                        loading: false\n                    }\n                }\n\n            })\n        }\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            })\n        }\n        let apiParams = {\n            page: page,\n            practice: this.props.active_practiceId,\n        };\n\n        if (this.props.match.params.id) {\n            apiParams.patient = this.props.match.params.id;\n        }\n        if (this.props.showAllClinic && this.props.match.params.id) {\n            delete (apiParams.practice)\n        }\n        if (this.state.filterSearchTag) {\n            apiParams.tag = this.state.filterSearchTag\n        } else if (this.state.filterSearchTag == '') {\n            apiParams.notag = true\n        }\n        getAPI(PATIENT_FILES, successFn, errorFn, apiParams);\n\n    }\n\n    loadTags() {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                tags: data,\n                loading: false\n            })\n        }\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            })\n        }\n        getAPI(interpolate(EMR_FILETAGS, [this.props.active_practiceId]), successFn, errorFn);\n    }\n\n    loadMedicalCertificate(page = 1) {\n        let that = this;\n        that.setState({\n            loading: true\n        });\n        let successFn = function (data) {\n            if (data.current == 1) {\n\n                that.setState({\n                    total: data.count,\n                    medicalCertificate: data.results,\n                    loading: false,\n                    loadMoreCertificate: data.next\n                })\n            } else {\n                that.setState(function (prevState) {\n                    return {\n                        total: data.count,\n                        medicalCertificate: [...prevState.medicalCertificate, ...data.results],\n                        loading: false,\n                        loadMoreCertificate: data.next\n                    }\n                })\n            }\n        }\n\n\n        //     that.setState({\n        //         medicalCertificate: data.results,\n        //         loading:false\n        //     })\n        // }\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            })\n\n        }\n        if (this.props.currentPatient) {\n            getAPI(interpolate(MEDICAL_CERTIFICATE_API, [this.props.active_practiceId, this.props.currentPatient.id, page]), successFn, errorFn);\n        }\n        if (this.props.showAllClinic && this.props.currentPatient) {\n            getAPI(interpolate(ALL_MEDICAL_CERITICATE_API, [this.props.currentPatient.id, page]), successFn, errorFn);\n        } else {\n            getAPI(interpolate(ALL_MEDICAL_CERITICATE_API, [this.props.active_practiceId, page]), successFn, errorFn);\n        }\n\n    }\n\n    loadMailedFiles = (page = 1) => {\n        let that = this;\n        let successFn = function (data) {\n            that.setState(function (prevState) {\n                if (data.current == 1) {\n                    return {\n                        files: [...data.results],\n                        total: data.count,\n                        loadMoreFiles: data.next,\n                        loading: false,\n                    }\n                } else {\n                    return {\n                        files: [...prevState.files, ...data.results],\n                        loadMoreFiles: data.next,\n                        loading: false\n                    }\n                }\n\n            })\n        }\n        let errorFn = function () {\n\n        }\n        let params = {\n            mailed: true,\n            page: page,\n            practice: this.props.active_practiceId,\n        }\n        if (this.props.currentPatient) {\n            params.patient = this.props.currentPatient.id;\n        }\n        if (this.props.showAllClinic && this.props.currentPatient) {\n            delete (params.practice)\n        }\n        getAPI(PATIENT_MAILEDFILES, successFn, errorFn, params);\n    }\n\n    triggerAddModal(option) {\n        this.setState({\n            showAddModal: !!option\n        })\n    }\n\n    triggerAddMedicalCertificateModal(option) {\n        this.setState({\n            showAddMedicalModel: !!option\n        })\n    }\n\n    filesCompleteToggle(id, option) {\n        this.setState(function (prevState) {\n            let selected = {...prevState.selectedFiles}\n            if (option) {\n                selected[id] = !!option\n            } else {\n                delete selected[id];\n            }\n            return {selectedFiles: {...selected}}\n        });\n    }\n\n    tagsCompleteToggle(id, option) {\n        this.setState(function (prevState) {\n            let selected = {...prevState.selectedTags}\n            if (option) {\n                selected[id] = !!option\n            } else {\n                delete selected[id];\n            }\n            return {selectedTags: {...selected}}\n        });\n    }\n\n    filesWithTags() {\n        let that = this;\n        let reqData = {\n            id: Object.keys(this.state.selectedFiles),\n            file_tags: Object.keys(this.state.selectedTags),\n            patient: this.props.match.params.id,\n        };\n        let successFn = function () {\n            that.setState({\n                selectedFiles: {}\n            })\n            that.loadData()\n        }\n        let errorFn = function () {\n\n        }\n        postAPI(interpolate(PATIENT_FILES, [this.props.match.params.id]), reqData, successFn, errorFn)\n    }\n\n    filterTags = (e) => {\n        let that = this;\n        this.setState({\n            filterSearchTag: e.target.value\n        }, function () {\n            that.loadData();\n        })\n    }\n\n    deleteMedicalCertificate(item) {\n        let that = this;\n        let reqData = {\n            is_active: false,\n            patient: item.patient,\n            id: item.id\n        }\n\n        let successFn = function (data) {\n            that.loadData();\n            that.loadMedicalCertificate();\n        }\n        let errorFn = function () {\n\n        };\n        postAPI(interpolate(MEDICAL_CERTIFICATE_API, [that.props.active_practiceId]), reqData, successFn, errorFn);\n    }\n\n    deleteFile(item) {\n        let that = this;\n        let reqData = {\n            id: item.id,\n            patient: item.patient,\n            is_active: false\n        }\n        let successFn = function (data) {\n            that.setState({\n                showPDFFile : false\n            })\n            that.loadData();\n        }\n        let errorFn = function () {\n            displayMessage(ERROR_MSG_TYPE, \"Please Select Patient.\")\n\n        }\n        postAPI(interpolate(PATIENT_FILES, [this.props.match.params.id]), reqData, successFn, errorFn);\n    }\n\n    loadPDF(id) {\n        let that = this;\n        let successFn = function (data) {\n            if (data.report)\n                window.open(BACKEND_BASE_URL + data.report);\n        }\n        let errorFn = function () {\n\n        }\n        getAPI(interpolate(MEDICAL_CERTIFICATE_PDF, [id]), successFn, errorFn);\n    }\n\n    showModal = (item) => {\n        this.setState(function () {\n            return {visible: true, filesData: {...item}}\n        });\n    };\n\n    handleCancel = () => {\n        this.setState({visible: false});\n    };\n\n    togglePDFModal = (path) => {\n        this.setState({\n            showPDFFile: path\n        })\n    }\n\n    render() {\n        let that = this;\n        const PatientFilesForm = Form.create()(DynamicFieldsForm);\n        const fields = [{\n            key: 'file_type',\n            label: 'File',\n            type: SINGLE_IMAGE_UPLOAD_FIELD,\n            required: true\n        }, {\n            key: 'file_tags',\n            label: 'Tags',\n            type: MULTI_SELECT_FIELD,\n            options: this.state.tags.map(tag => ({label: tag.name, value: tag.id}))\n        }];\n        const formProps = {\n            method: 'post',\n            successFn: function () {\n                that.triggerAddModal(false);\n                that.loadData()\n            },\n            errorFn: function () {\n            },\n            action: interpolate(PATIENT_FILES, [this.props.match.params.id])\n        }\n        const tagsMenu = (<div style={{\n                // width: 100,\n                boxShadow: '0 2px 4px #111',\n                border: '1px solid #bbb',\n                borderRadius: 2,\n                paddingBottom: '30px',\n                backgroundColor: 'white'\n            }}>\n                <ul style={{listStyle: 'none', paddingInlineStart: 0, paddingTop: 10}}>\n                    {this.state.tags ?\n                        <div>\n                            {this.state.tags.map((tag) => <li key={tag.id}>\n                                <Checkbox value={tag.id}\n                                          onChange={(e) => that.tagsCompleteToggle(tag.id, e.target.checked)}\n                                          checked={that.state.selectedTags[tag.id]}>{tag.name} </Checkbox>\n                            </li>)}\n                        </div>\n                        : null}\n                </ul>\n                <span>\n                    <Button type=\"primary\" onClick={() => this.filesWithTags()}\n                            style={{float: \"right\", borderStyle: \"none\"}}>Done</Button>\n                </span>\n            </div>\n        );\n        const defaultFields = [{key: 'is_active', value: true}, {\n            key: 'patient',\n            value: this.props.currentPatient ? this.props.currentPatient.id : null\n        }, {key: 'practice', value: this.props.active_practiceId}]\n\n\n        return <Card title=\"Files\"\n                     extra={this.props.match.params.id ? <Button.Group>\n                         <Link to={\"/patient/\" + this.props.match.params.id + \"/emr/create-medicalCertificate\"}>\n                             <Button\n                                 type=\"primary\">\n                                 <Icon type=\"plus\"/>&nbsp;Add Medical Certificate</Button> </Link>\n\n                         <Dropdown overlay={tagsMenu} trigger={['click']} placement=\"bottomLeft\">\n                             <Button><Icon type=\"plus\"/>AddFile/remove</Button>\n                         </Dropdown>\n\n                         <Button onClick={() => this.triggerAddModal(true)}><Icon type=\"plus\"/>Add</Button>\n                     </Button.Group> : <Button.Group>\n                         <Button type={\"primary\"} style={{marginRight: \"10px\"}}\n                                 onClick={() => this.props.togglePatientListModal(true)}>\n                             <Icon type=\"plus\"/>&nbsp; Add Medical Certificate\n                         </Button>\n\n                         <Button type={\"primary\"} style={{marginRight: \"10px\"}}\n                                 onClick={() => this.props.togglePatientListModal(true)}>\n                             <Icon type=\"plus\"/> &nbsp; AddFile/remove\n                         </Button>\n\n                         <Button type={\"primary\"} style={{marginRight: \"10px\"}}\n                                 onClick={() => this.props.togglePatientListModal(true)}>\n                             <Icon type=\"plus\"/> &nbsp; Add\n                         </Button>\n                     </Button.Group>}>\n            <Row gutter={8}>\n                <Col span={6}\n                     style={{\n                         height: 'calc(100vh - 55px)',\n                         overflow: 'auto',\n                         paddingRight: '10px',\n                         // backgroundColor: '#e3e5e6',\n                         borderRight: '1px solid #ccc'\n                     }}>\n                    <Radio.Group buttonStyle=\"solid\" defaultValue=\"all\" onChange={this.filterTags}>\n                        <h2>Uploaded Files</h2>\n                        <Radio.Button style={{width: '100%', backgroundColor: 'transparent', border: '0px'}}\n                                      value={null}>\n                            All Files</Radio.Button>\n                        {this.state.tags.map(tag => <Radio.Button\n                            key={tag.id}\n                            style={{width: '100%', backgroundColor: 'transparent', border: '0px'}} value={tag.id}>\n                            {tag.name}\n                        </Radio.Button>)}\n\n                        <Radio.Button style={{width: '100%', backgroundColor: 'transparent', border: '0px'}}\n                                      value=\"\">\n                            Untagged Files\n                        </Radio.Button>\n                        <p><br/></p>\n\n                    </Radio.Group>\n\n                    <Radio.Group buttonStyle=\"solid\" defaultValue=\"\">\n                        <h2>Generated Files</h2>\n                        <Radio.Button key=\"0\" style={{width: '100%', backgroundColor: 'transparent', border: '0px'}}\n                                      value=\"a\" onClick={() => this.loadMailedFiles()}>\n                            Emailed Files\n                        </Radio.Button>\n\n                        <Radio.Button key=\"1\" style={{width: '100%', backgroundColor: 'transparent', border: '0px'}}\n                                      onClick={() => this.loadMedicalCertificate()}>\n                            Medical Leave Certificate </Radio.Button>\n                    </Radio.Group>\n                </Col>\n                <Col span={18}>\n                    <Row>\n                        {this.state.files.map(item => (\n                            <>\n                                {item.newDate ? <Col span={24}>\n                                    <Affix top={20} offsetTop={30}><h2 style={{\n                                        marginLeft: '10px',\n                                        padding: '5px',\n                                        backgroundImage: 'linear-gradient(to right, #ddd , white)',\n                                        borderRadius: '4px'\n                                    }}>{moment(item.created_at).format('LL')}</h2></Affix>\n                                </Col> : null}\n                                <Col span={8}>\n                                    <div\n                                        // onClick={() => this.showModal(item)}\n                                        style={{\n                                            width: '100%',\n                                            height: '150px',\n                                            border: '1px solid #bbb',\n                                            // background: '#fff url(\"' + makeFileURL(item.file_type) + '\") no-repeat center center',\n                                            backgroundSize: 'cover',\n                                            padding: 'auto',\n                                            overflow: 'hidden'\n\n                                        }}>\n                                        <Checkbox key={item.id}\n                                                  disabled={(item.practice != this.props.active_practiceId)}\n                                                  style={{\n                                                      margin: 10,\n                                                      position: 'absolute',\n                                                      top: 5,\n                                                      left: 5,\n                                                      boxShadow: '0 0px 5px #000 '\n                                                  }}\n                                                  onChange={(e) => that.filesCompleteToggle(item.id, e.target.checked)}\n                                                  checked={that.state.selectedFiles[item.id]}/>\n\n                                        {fildFileExtension(item.file_type) == PDF_FILE_EXTENSION ?\n                                            <div style={{textAlign: 'center', paddingTop: 30, height: '100%'}}\n                                                 onClick={() => this.togglePDFModal(item)}>\n                                                <Icon type=\"file-pdf\" style={{fontSize: '56px', color: '#08c'}}/>\n                                                <h4>Preview Not Avaialable</h4>\n                                            </div> :\n                                            <ModalImage style={{border: \"3px solid red\"}}\n                                                // small={makeFileURL(this.state.filesData.file_type)}\n                                                        large={makeFileURL(item.file_type)}\n                                                        small={makeFileURL(item.file_type)}\n                                                        alt={<Button type=\"danger\"\n                                                                     onClick={() => this.deleteFile(item)}>\n                                                            <Icon type=\"delete\"/></Button>}\n                                            />}\n                                    </div>\n                                    <Card bodyStyle={{padding: 3}} style={{marginBottom: 15}}>\n                                        <Link to={\"/patient/\" + item.patient_data.id + \"/emr/files/\"}><h4>\n                                            <b>{item.patient_data.user.first_name}&nbsp;({item.patient_data.custom_id})</b>\n                                        </h4></Link>\n                                        <Tag><b>{item.practice_data ? item.practice_data.name : '--'}</b></Tag>\n                                    </Card>\n                                </Col>\n                            </>\n                        ))}\n                    </Row>\n                    <Row>\n                        <Col span={24}>\n                            <InfiniteFeedLoaderButton loaderFunction={() => this.loadData(that.state.loadMoreFiles)}\n                                                      loading={this.state.loading}\n                                                      hidden={!this.state.loadMoreFiles}/>\n                        </Col>\n                    </Row>\n                    <Card title=\"Medical Certificate\">\n                        <List loading={this.state.loading}\n                              grid={{gutter: 16, column: 3}}\n                              dataSource={this.state.medicalCertificate}\n                              renderItem={item => (\n                                  <Card style={{width: 600}}\n                                        actions={[<p>{\"Issued on : \" + item.date}</p>,\n                                            <a onClick={() => this.loadPDF(item.id)}><Icon type=\"printer\"/></a>,\n                                            <Popconfirm title=\"Are you sure delete this item?\"\n                                                        onConfirm={() => this.deleteMedicalCertificate(item)}\n                                                        okText=\"Yes\" cancelText=\"No\">\n                                                <Icon type=\"delete\"/>\n                                            </Popconfirm>\n                                        ]}>\n                                      <Meta title={\"Medical Leave #\" + \"\" + item.id}\n                                            description={\"Excused From :\" + item.excused_duty_from + \" till \" + item.excused_duty_to}>\n\n                                      </Meta>\n                                  </Card>\n                              )}\n                        />\n                        <InfiniteFeedLoaderButton\n                            loaderFunction={() => this.loadData(that.state.loadMoreCertificate)}\n                            loading={this.state.loading}\n                            hidden={!this.state.loadMoreCertificate}/>\n                    </Card>\n\n\n                </Col>\n\n            </Row>\n            <Modal visible={this.state.showAddModal}\n                   onCancel={() => this.triggerAddModal(false)}\n                   footer={null}>\n                <PatientFilesForm title=\"Add Files\"\n                                  fields={fields}\n                                  defaultValues={defaultFields}\n                                  formProp={formProps}/>\n            </Modal>\n            <Modal visible={this.state.showPDFFile}\n                   key={this.state.showPDFFile}\n                   centered\n                   width={1000}\n                   onCancel={() => this.togglePDFModal(false)}\n                   footer={null} style={{padding:0}}\n            title={<h4><span style={{color:'red',textAlign:'right'}} onClick={() => this.deleteFile(this.state.showPDFFile)}>DELETE</span></h4>}>\n                {this.state.showPDFFile ?\n                    <iframe src={makeFileURL(this.state.showPDFFile.file_type)} frameborder=\"0\" style={{width:'100%',minHeight:'80vh'}}></iframe> : null}\n            </Modal>\n        </Card>\n\n\n        return <Card title=\"Files\"\n        >\n            <Row gutter={8}>\n                <Col span={6}\n                     style={{\n                         height: 'calc(100vh - 55px)',\n                         overflow: 'auto',\n                         paddingRight: '10px',\n                         // backgroundColor: '#e3e5e6',\n                         borderRight: '1px solid #ccc'\n                     }}>\n                    <Radio.Group buttonStyle=\"solid\" defaultValue=\"all\" onChange={this.filterTags}>\n                        <h2>Uploaded Files</h2>\n                        <Radio.Button style={{width: '100%', backgroundColor: 'transparent', border: '0px'}}\n                                      value={null}>\n                            All Files</Radio.Button>\n                        {this.state.tags.map(tag => <Radio.Button\n                            key={tag.id}\n                            style={{width: '100%', backgroundColor: 'transparent', border: '0px'}} value={tag.id}>\n                            {tag.name}\n                        </Radio.Button>)}\n\n                        <Radio.Button style={{width: '100%', backgroundColor: 'transparent', border: '0px'}}\n                                      value=\"\">\n                            Untagged Files\n                        </Radio.Button>\n                        <p><br/></p>\n\n                    </Radio.Group>\n\n                    <Radio.Group buttonStyle=\"solid\" defaultValue=\"\">\n                        <h2>Generated Files</h2>\n                        <Radio.Button style={{width: '100%', backgroundColor: 'transparent', border: '0px'}}\n                                      value=\"b\" onClick={() => this.loadMailedFiles()}>\n                            Emailed Files\n                        </Radio.Button>\n\n                        <Radio.Button style={{width: '100%', backgroundColor: 'transparent', border: '0px'}}\n                                      onClick={() => this.loadMedicalCertificate()} value=''>\n                            Medical Leave Certificate </Radio.Button>\n                    </Radio.Group>\n                </Col>\n                <Col span={18}>\n                    <Row>\n                        {this.state.files.map(item => (\n                            <>\n                                {item.newDate ? <Col span={24}>\n                                    <Affix top={20} offsetTop={30}><h2 style={{\n                                        marginLeft: '10px',\n                                        padding: '5px',\n                                        backgroundImage: 'linear-gradient(to right, #ddd , white)',\n                                        borderRadius: '4px'\n                                    }}>{moment(item.created_at).format('LL')}</h2></Affix>\n                                </Col> : null}\n                                <Col span={8}>\n                                    <div\n                                        // onClick={() => this.showModal(item)}\n                                        style={{\n                                            width: '100%',\n                                            height: '150px',\n                                            border: '1px solid #bbb',\n                                            // background: '#fff url(\"' + makeFileURL(item.file_type) + '\") no-repeat center center',\n                                            backgroundSize: 'cover',\n                                            padding: 'auto',\n                                            overflow: 'hidden'\n\n                                        }}>\n                                        <Checkbox key={item.id}\n                                                  disabled={(item.practice != this.props.active_practiceId)}\n                                                  style={{\n                                                      margin: 10,\n                                                      position: 'absolute',\n                                                      top: 5,\n                                                      left: 5,\n                                                      boxShadow: '0 0px 5px #000 '\n                                                  }}\n                                                  onChange={(e) => that.filesCompleteToggle(item.id, e.target.checked)}\n                                                  checked={that.state.selectedFiles[item.id]}/>\n                                        <ModalImage style={{border: \"3px solid red\"}}\n                                            // small={makeFileURL(this.state.filesData.file_type)}\n                                                    large={makeFileURL(item.file_type)}\n                                                    small={makeFileURL(item.file_type)}\n                                                    alt={<Button type=\"danger\"\n                                                                 onClick={() => this.deleteFile(item)}>\n                                                        <Icon type=\"delete\"/></Button>}\n                                        />\n                                    </div>\n                                    <Card bodyStyle={{padding: 3}} style={{marginBottom: 15}}>\n                                        <Link to={\"/patient/\" + item.patient_data.id + \"/emr/files/\"}><h4>\n                                            <b>{item.patient_data.user.first_name}&nbsp;({item.patient_data.custom_id})</b>\n                                        </h4></Link>\n                                        <Tag><b>{item.practice_data ? item.practice_data.name : '--'}</b></Tag>\n                                    </Card>\n                                </Col>\n                            </>\n                        ))}\n                    </Row>\n                    <Row>\n                        <Col span={24}>\n                            <InfiniteFeedLoaderButton loaderFunction={() => this.loadData(that.state.loadMoreFiles)}\n                                                      loading={this.state.loading}\n                                                      hidden={!this.state.loadMoreFiles}/>\n                        </Col>\n                    </Row>\n                    <Card title=\"Medical Certificate\">\n                        <List loading={this.state.loading}\n                              grid={{gutter: 16, column: 3}}\n                              dataSource={this.state.medicalCertificate}\n                              renderItem={item => (\n                                  <Card style={{width: 600}}\n                                        actions={[<p>{\"Issued on : \" + item.date}</p>,\n                                            <a onClick={() => this.loadPDF(item.id)}><Icon type=\"printer\"/></a>,\n                                            <Popconfirm title=\"Are you sure delete this item?\"\n                                                        onConfirm={() => this.deleteMedicalCertificate(item)}\n                                                        okText=\"Yes\" cancelText=\"No\">\n                                                <Icon type=\"delete\"/>\n                                            </Popconfirm>\n                                        ]}>\n                                      <Meta title={\"Medical Leave #\" + \"\" + item.id}\n                                            description={\"Excused From :\" + item.excused_duty_from + \" till \" + item.excused_duty_to}>\n\n                                      </Meta>\n                                  </Card>\n                              )}\n                        />\n                        <InfiniteFeedLoaderButton\n                            loaderFunction={() => this.loadMedicalCertificate(that.state.loadMoreCertificate)}\n                            loading={this.state.loading}\n                            hidden={!this.state.loadMoreCertificate}/>\n                    </Card>\n\n\n                </Col>\n\n            </Row>\n            <Modal visible={this.state.showAddModal}\n                   onCancel={() => this.triggerAddModal(false)}\n                   footer={null}>\n                <PatientFilesForm title=\"Add Files\"\n                                  fields={fields}\n                                  defaultValues={defaultFields}\n                                  formProp={formProps}/>\n            </Modal>\n        </Card>\n\n\n    }\n}\n\nexport default PatientFiles;\n","import React from \"react\";\nimport {Route} from \"react-router\";\n\nimport DynamicFieldsForm from \"../../common/DynamicFieldsForm\";\nimport {Button, Card, Form, Icon, Row} from \"antd\";\nimport {\n    CHECKBOX_FIELD,\n    DATE_PICKER,\n    SINGLE_CHECKBOX_FIELD,\n    NUMBER_FIELD,\n    SUCCESS_MSG_TYPE,\n    INPUT_FIELD,\n    RADIO_FIELD,\n    SELECT_FIELD\n} from \"../../../constants/dataKeys\";\nimport {\n    PRESCRIPTIONS_API,\n    DRUG_CATALOG,\n    ALL_PRESCRIPTIONS_API,\n    INVOICES_API,\n    PROCEDURE_CATEGORY, TAXES, PATIENT_CLINIC_NOTES_API\n} from \"../../../constants/api\";\nimport {getAPI, interpolate, displayMessage} from \"../../../utils/common\";\nimport {Redirect} from 'react-router-dom'\nimport moment from 'moment';\n\n\nclass AddClinicNotes extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            redirect: false,\n            drug_catalog: this.props.drug_catalog ? this.props.drug_catalog : null,\n            procedure_category: this.props.procedure_category ? this.props.procedure_category : null,\n            taxes_list: this.props.taxes_list ? this.props.taxes_list : null,\n            editClinicNotes: this.props.editClinicNotes ? this.props.editClinicNotes : null,\n\n        }\n        this.changeRedirect = this.changeRedirect.bind(this);\n        console.log(\"Working or not\");\n\n    }\n\n    componentDidMount() {\n\n    }\n\n    loadDrugCatalog() {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                drug_catalog: data\n            })\n\n        }\n        let errorFn = function () {\n\n        }\n        getAPI(interpolate(DRUG_CATALOG, [this.props.active_practiceId]), successFn, errorFn)\n    }\n\n    loadProcedureCategory() {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                procedure_category: data\n            })\n\n        }\n        let errorFn = function () {\n\n        }\n        getAPI(interpolate(PROCEDURE_CATEGORY, [this.props.active_practiceId]), successFn, errorFn);\n    }\n\n    loadTaxes() {\n        var that = this;\n        let successFn = function (data) {\n            console.log(\"get table\");\n            that.setState({\n                taxes_list: data,\n            })\n        };\n        let errorFn = function () {\n        };\n        getAPI(interpolate(TAXES, [this.props.active_practiceId]), successFn, errorFn);\n\n    }\n\n    changeRedirect() {\n        var redirectVar = this.state.redirect;\n        this.setState({\n            redirect: !redirectVar,\n        });\n    }\n\n    render() {\n\n        const fields = [{\n            label: \"Name\",\n            key: \"name\",\n            required: true,\n            initialValue: this.state.editClinicNotes ? this.state.editClinicNotes.name : null,\n            type: INPUT_FIELD\n        }, {\n            label: \"Chief Complaints\",\n            key: \"chief_complaints\",\n            initialValue: this.state.editClinicNotes ? this.state.editClinicNotes.chief_complaints : null,\n            type: INPUT_FIELD\n        }, {\n            label: \"Investigations\",\n            key: \"investigations\",\n            initialValue: this.state.editClinicNotes ? this.state.editClinicNotes.investigations : null,\n            type: INPUT_FIELD,\n        }, {\n            label: \"Diagnosis\",\n            key: \"diagnosis\",\n            initialValue: this.state.editClinicNotes ? this.state.editClinicNotes.diagnosis : null,\n            type: INPUT_FIELD,\n        }, {\n            label: \"Notes\",\n            key: \"notes\",\n            initialValue: this.state.editClinicNotes ? this.state.editClinicNotes.notes : null,\n            type: INPUT_FIELD,\n        }, {\n            label: \"Observations\",\n            key: \"observations\",\n            initialValue: this.state.editClinicNotes ? this.state.editClinicNotes.observations : null,\n            type: INPUT_FIELD,\n        }];\n\n\n        let editformProp;\n        const TestFormLayout = Form.create()(DynamicFieldsForm);\n        let that = this;\n        const formProp = {\n            successFn: function (data) {\n                displayMessage(SUCCESS_MSG_TYPE, \"success\")\n                if (that.props.loadData)\n                    that.props.loadData()\n                console.log(data);\n            },\n            errorFn: function () {\n\n            },\n            action: interpolate(PATIENT_CLINIC_NOTES_API, [this.props.match.params.id]),\n            method: \"post\",\n        }\n        let defaultValues = [{key: 'is_active', value: true}]\n        if (this.state.editClinicNotes) {\n            defaultValues = [{key: 'is_active', value: true}, {\"key\": \"id\", \"value\": this.state.editClinicNotes.id}];\n        }\n        return <Row>\n            <Card>\n                <Route exact path='/patient/:id/emr/clinicnotes/edit'\n                       render={() => (this.state.editClinicNotes ?\n                           <TestFormLayout defaultValues={defaultValues} title=\"Edit Clinic notes\"\n                                           changeRedirect={this.changeRedirect} formProp={formProp} fields={fields}/> :\n                           <Redirect to={'/patient/' + this.props.match.params.id + '/billing/invoices'}/>)}/>\n                <Route exact path='/patient/:id/emr/clinicnotes/add'\n                       render={() => <TestFormLayout title=\"Add Clinic Notes\" changeRedirect={this.changeRedirect}\n                                                     formProp={formProp} fields={fields}/>}/>\n\n\n            </Card>\n            {this.state.redirect && <Redirect to={'/patient/' + this.props.match.params.id + '/emr/clinicnotes'}/>}\n        </Row>\n\n    }\n}\n\nexport default AddClinicNotes;\n","import React from \"react\";\nimport {\n    Row,\n    Card,\n    Col,\n    Form,\n    Tabs,\n    Button,\n    Icon,\n    List,\n    Input,\n    Divider,\n    Affix,\n    DatePicker,\n    Menu,\n    Dropdown,\n    Modal\n} from 'antd';\nimport {displayMessage, getAPI, interpolate, postAPI} from \"../../../utils/common\";\nimport {\n    EMR_COMPLAINTS,\n    EMR_DIAGNOSES,\n    EMR_INVESTIGATIONS, EMR_MEDICATION,\n    EMR_OBSERVATIONS,\n    EMR_TREATMENTNOTES, PATIENT_CLINIC_NOTES_API\n} from \"../../../constants/api\";\nimport DynamicFieldsForm from \"../../common/DynamicFieldsForm\";\nimport {INPUT_FIELD, SUCCESS_MSG_TYPE} from \"../../../constants/dataKeys\";\nimport {CUSTOM_STRING_SEPERATOR} from \"../../../constants/hardData\";\nimport {loadDoctors} from \"../../../utils/clinicUtils\";\nimport moment from \"moment\";\n\nconst {TabPane} = Tabs;\nconst tabLists = ['Complaints', 'Observations', 'Diagnoses', 'Investigations', 'Notes','Recent Medication'];\nconst tabResourcesAPI = {\n    'Complaints': EMR_COMPLAINTS,\n    'Observations': EMR_OBSERVATIONS,\n    'Diagnoses': EMR_DIAGNOSES,\n    'Investigations': EMR_INVESTIGATIONS,\n    'Notes': EMR_TREATMENTNOTES,\n    'Recent Medication' : EMR_MEDICATION\n};\nlet id = 0;\n\nclass AddClinicNotesDynamic extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            resourceList: {},\n            filteredResourceList: {},\n            filterStrings: {},\n            practiceDoctors: [],\n            selectedDoctor: {},\n            selectedDate: moment(),\n            resourceAddModal: null,\n            selectedTab: 'Complaints',\n            editClinicNotes: this.props.editClinicNotes ? this.props.editClinicNotes : null,\n\n        }\n    }\n\n    componentDidMount() {\n        loadDoctors(this);\n        this.loadRequiredResources(interpolate(EMR_COMPLAINTS, [this.props.active_practiceId]), 'Complaints');\n        this.loadRequiredResources(interpolate(EMR_OBSERVATIONS, [this.props.active_practiceId]), 'Observations');\n        this.loadRequiredResources(interpolate(EMR_DIAGNOSES, [this.props.active_practiceId]), 'Diagnoses');\n        this.loadRequiredResources(interpolate(EMR_INVESTIGATIONS, [this.props.active_practiceId]), 'Investigations');\n        this.loadRequiredResources(interpolate(EMR_TREATMENTNOTES, [this.props.active_practiceId]), 'Notes');\n        this.loadRequiredResources(interpolate(EMR_MEDICATION, [this.props.active_practiceId]), 'Recent Medication');\n        if (this.state.editClinicNotes) {\n            this.setInitialData();\n        }\n    }\n\n    setInitialData = () => {\n        let that = this;\n        let initialData = this.state.editClinicNotes;\n        if (initialData.chief_complaints)\n            initialData.chief_complaints.split(CUSTOM_STRING_SEPERATOR).forEach(str => setTimeout(function () {\n                if (str.length)\n                    that.addValues('Complaints', str)\n            }, 500));\n        if (initialData.investigations)\n            initialData.investigations.split(CUSTOM_STRING_SEPERATOR).forEach(str => setTimeout(function () {\n                if (str.length)\n                    that.addValues('Investigations', str)\n            }, 500));\n        if (initialData.diagnosis)\n            initialData.diagnosis.split(CUSTOM_STRING_SEPERATOR).forEach(str => setTimeout(function () {\n                if (str.length)\n                    that.addValues('Diagnoses', str)\n            }, 500));\n        if (initialData.notes)\n            initialData.notes.split(CUSTOM_STRING_SEPERATOR).forEach(str => setTimeout(function () {\n                if (str.length)\n                    that.addValues('Notes', str)\n            }, 500));\n        if (initialData.observations)\n            initialData.observations.split(CUSTOM_STRING_SEPERATOR).forEach(str => setTimeout(function () {\n                if (str.length)\n                    that.addValues('Observations', str)\n            }, 500));\n        if (initialData.medication)\n            initialData.medication.split(CUSTOM_STRING_SEPERATOR).forEach(str => setTimeout(function () {\n                if (str.length)\n                    that.addValues('Recent Medication', str)\n            }, 500));\n\n    }\n    loadRequiredResources = (API, key) => {\n        let that = this;\n        let successFn = function (data) {\n            that.setState(function (prevState) {\n                let newResources = {...prevState.resourceList, [key]: data}\n                return {\n                    resourceList: newResources,\n                    filteredResourceList: newResources,\n                    filterStrings: {}\n                }\n            })\n        }\n        let errorFn = function () {\n            console.log(key + \" fetching error\");\n        }\n        getAPI(API, successFn, errorFn);\n    }\n    add = (tab) => {\n        const {form} = this.props;\n        // can use data-binding to get\n        const keys = form.getFieldValue(tab);\n        const nextKeys = keys.concat(++id);\n        // can use data-binding to set\n        // important! notify form to detect changes\n        form.setFieldsValue({\n            [tab]: nextKeys,\n        });\n    };\n    remove = (tab, k) => {\n        const {form} = this.props;\n        // can use data-binding to get\n        const keys = form.getFieldValue(tab);\n        // We need at least one passenger\n        if (keys.length === 1) {\n            return;\n        }\n\n        // can use data-binding to set\n        form.setFieldsValue({\n            [tab]: keys.filter(key => key !== k),\n        });\n    };\n    addValues = (tab, value) => {\n        const {form} = this.props;\n        // can use data-binding to get\n        const keys = form.getFieldValue(tab);\n        const nextKeys = keys.concat(++id);\n        // can use data-binding to set\n        // important! notify form to detect changes\n        form.setFieldsValue({\n            [tab]: nextKeys,\n            [`field[${keys[keys.length - 1]}]`]: value,\n        });\n    }\n    changeValues = (tab, id) => {\n        const {form} = this.props;\n        // can use data-binding to get\n        const keys = form.getFieldValue(tab);\n        if (keys.indexOf(id) == keys.length - 1) {\n            this.add(tab);\n        }\n    }\n    toggleModal = (option) => {\n        let prevsOption = null;\n        let that = this;\n        this.setState(function (prevState) {\n            console.log(prevState.resourceAddModal);\n            if (prevState.resourceAddModal)\n                prevsOption = prevState.resourceAddModal;\n            return {resourceAddModal: option}\n        }, function () {\n            if (prevsOption) {\n                that.loadRequiredResources(interpolate(tabResourcesAPI[prevsOption], [that.props.active_practiceId]), prevsOption);\n            }\n        });\n\n    }\n    searchValues = (type, value) => {\n        let that = this;\n        this.setState(function (prevState) {\n            let searchValues = {...prevState.searchStrings};\n            searchValues[type] = value;\n            return {searchStrings: searchValues}\n        }, function () {\n            that.filterValues(type);\n        });\n    }\n    filterValues = (type) => {\n        this.setState(function (prevState) {\n            let filteredItemOfGivenType = [];\n            if (prevState.resourceList[type]) {\n                if (prevState.searchStrings[type]) {\n                    prevState.resourceList[type].forEach(function (item) {\n                        if (item.name && item.name\n                            .toString()\n                            .toLowerCase()\n                            .includes(prevState.searchStrings[type].toLowerCase())) {\n                            filteredItemOfGivenType.push(item);\n                        }\n                    });\n                } else {\n                    filteredItemOfGivenType = prevState.resourceList[type];\n                }\n            }\n            return {\n                filteredResourceList: {...prevState.filteredResourceList, [type]: filteredItemOfGivenType}\n            }\n        });\n    }\n\n    handleSubmit = (e) => {\n        let that = this;\n        e.preventDefault();\n        this.props.form.validateFieldsAndScroll((err, values) => {\n            if (!err) {\n                let reqData = {};\n                reqData.chief_complaints = values.Complaints.map(id => values.field[id]).join(CUSTOM_STRING_SEPERATOR);\n                reqData.investigations = values.Investigations.map(id => values.field[id]).join(CUSTOM_STRING_SEPERATOR);\n                reqData.diagnosis = values.Diagnoses.map(id => values.field[id]).join(CUSTOM_STRING_SEPERATOR);\n                reqData.notes = values.Notes.map(id => values.field[id]).join(CUSTOM_STRING_SEPERATOR);\n                reqData.observations = values.Observations.map(id => values.field[id]).join(CUSTOM_STRING_SEPERATOR);\n                reqData.medication = values['Recent Medication'].map(id => values.field[id]).join(CUSTOM_STRING_SEPERATOR);\n                reqData.patient = that.props.match.params.id;\n                reqData.practice = that.props.active_practiceId;\n                reqData.doctor = that.state.selectedDoctor && that.state.selectedDoctor.id ? that.state.selectedDoctor.id : that.state.selectedDoctor;\n                reqData.date = that.state.selectedDate && moment(that.state.selectedDate).isValid() ? moment(that.state.selectedDate).format('YYYY-MM-DD') : null\n                if (that.state.editClinicNotes)\n                    reqData.id = that.state.editClinicNotes.id;\n                let successFn = function (data) {\n                    if (that.props.loadData)\n                        that.props.loadData();\n                    that.props.history.push('/patient/' + that.props.match.params.id + '/emr/clinicnotes/');\n                }\n                let errorFn = function () {\n\n                }\n                postAPI(interpolate(PATIENT_CLINIC_NOTES_API, [this.props.match.params.id]), reqData, successFn, errorFn);\n            }\n        });\n\n    }\n    changeTab = (e, tab) => {\n        // this.setState({\n        //     selectedTab: tab\n        // });\n\n\n    }\n    selectDoctor = (doctor) => {\n        this.setState({\n            selectedDoctor: doctor\n        })\n    }\n    selectedDate = (date) => {\n        this.setState({\n            selectedDate: date\n        })\n    }\n\n    render() {\n        let that = this;\n        const {getFieldDecorator, getFieldValue} = this.props.form;\n        const formItemLayout = {\n            labelCol: {\n                xs: {span: 24},\n                sm: {span: 4},\n            },\n            wrapperCol: {\n                xs: {span: 24},\n                sm: {span: 20},\n            },\n        };\n        let keysObject = {};\n        tabLists.forEach(function (tab) {\n            getFieldDecorator(tab, {initialValue: [++id]});\n            keysObject[tab] = getFieldValue(tab);\n        });\n\n\n        const keys = keysObject;\n        const ResourceAddForm = Form.create()(DynamicFieldsForm);\n        return <Card>\n            <Row>\n                <Col span={18}>\n                    <h2>Clinical Notes</h2>\n                    <Form onSubmit={this.handleSubmit}>\n                        {tabLists.map(tab =>\n                            <div>\n                                <Divider style={{margin: 5}}>{tab}</Divider>\n                                <div style={{\n                                    backgroundColor: (tab == that.state.selectedTab ? '#ddd' : 'initial'),\n                                    padding: 10\n                                }}>\n                                    {keys[tab].map((k, index) => (\n                                        <Form.Item\n                                            {...formItemLayout}\n                                            label={tab + ' ' + (index + 1)}\n                                            key={k}>\n                                            {getFieldDecorator(`field[${k}]`, {\n                                                validateTrigger: ['onChange', 'onBlur'],\n                                                rules: [{\n                                                    whitespace: true,\n                                                }],\n                                            })(<Input placeholder={tab} style={{width: '60%', marginRight: 8}}\n                                                      key={k}\n                                                      onFocus={(e) => that.changeTab(e, tab)}\n                                                      onChange={() => that.changeValues(tab, k)}/>)}\n                                            {keys[tab].length - 1 != index ? (\n                                                <Button\n                                                    shape={\"circle\"}\n                                                    type={\"danger\"}\n                                                    size={\"small\"}\n                                                    icon=\"delete\"\n                                                    onClick={() => this.remove(tab, k)}\n                                                />\n                                            ) : null}\n                                        </Form.Item>\n                                    ))}\n                                </div>\n                            </div>\n                        )}\n                        <Affix offsetBottom={0}>\n                            <Card>\n                                <Row>\n                                    <span>by &nbsp;&nbsp;</span>\n                                    <Dropdown placement=\"topCenter\" overlay={<Menu>\n                                        {this.state.practiceDoctors.map(doctor =>\n                                            <Menu.Item key=\"0\">\n                                                <a onClick={() => this.selectDoctor(doctor)}>{doctor.user.first_name}</a>\n                                            </Menu.Item>)}\n                                    </Menu>} trigger={['click']}>\n                                        <a className=\"ant-dropdown-link\" href=\"#\">\n                                            <b>\n                                                {this.state.selectedDoctor.user ? this.state.selectedDoctor.user.first_name : 'No DOCTORS Found'}\n                                            </b>\n                                        </a>\n                                    </Dropdown>\n                                    <span> &nbsp;&nbsp;on&nbsp;&nbsp;</span>\n                                    <DatePicker value={this.state.selectedDate}\n                                                allowClear={false}\n                                                onChange={(value) => this.selectedDate(value)} format={\"DD-MM-YYYY\"}/>\n                                    <Button type=\"primary\" htmlType=\"submit\" style={{float: 'right', margin: 5}}>\n                                        Save\n                                    </Button>\n                                    {that.props.history ?\n                                        <Button style={{margin: 5, float: 'right'}}\n                                                onClick={() => that.props.history.goBack()}>\n                                            Cancel\n                                        </Button> : null}\n                                </Row>\n                                <Row>\n                                    Next Follow up\n                                </Row>\n                            </Card>\n                        </Affix>\n                    </Form>\n                </Col>\n                <Col span={6}>\n                    <Tabs type={\"card\"}>\n                        {tabLists.map(tabList => <TabPane tab={tabList} key={tabList}>\n                            <div style={{padding: 5}}>\n                                <Button type={\"primary\"} block size={\"small\"} onClick={() => that.toggleModal(tabList)}>\n                                    <Icon type={\"plus\"}/>Add&nbsp;{tabList}\n                                </Button>\n                                <div style={{backgroundColor: '#ddd', padding: 8}}>\n                                    <Input.Search placeholder={\"Search in \" + tabList + \" ...\"}\n                                                  onChange={e => this.searchValues(tabList, e.target.value)}/>\n                                </div>\n                                <List key={tabList} size={'small'} dataSource={that.state.filteredResourceList[tabList]}\n                                      renderItem={item => <List.Item\n                                          key={item.id}\n                                          onClick={() => this.addValues(tabList, item.name)}>\n                                          {item.name}\n                                      </List.Item>}/>\n                            </div>\n                        </TabPane>)}\n                    </Tabs>\n                </Col>\n                <Modal visible={!!this.state.resourceAddModal}\n                       onCancel={() => that.toggleModal(null)}\n                       title={\"Add \" + this.state.resourceAddModal}\n                       footer={null}>\n                    {this.state.resourceAddModal ?\n                        <ResourceAddForm\n                            fields={[{\n                                label: this.state.resourceAddModal,\n                                required: true,\n                                type: INPUT_FIELD,\n                                key: 'name'\n                            }]}\n                            defaultValues={[{key: 'practice', value: this.props.active_practiceId}]}\n                            formProp={{\n                                method: 'post',\n                                action: interpolate(tabResourcesAPI[this.state.resourceAddModal], [this.props.active_practiceId]),\n                                successFn: function () {\n                                    that.toggleModal(null);\n                                    displayMessage(SUCCESS_MSG_TYPE, that.state.resourceAddModal + \" added successfully!!\");\n                                },\n                                errorFn: function (err) {\n                                    console.log(err);\n                                }\n                            }}\n                        /> : null}\n                </Modal>\n            </Row>\n        </Card>\n    }\n}\n\nexport default Form.create()(AddClinicNotesDynamic)\n","import {Button, Card, Checkbox, Divider, Icon, Table, Dropdown, Menu, Col, Row, Tag, Spin, Tooltip, Avatar} from \"antd\";\nimport React from \"react\";\nimport {getAPI, interpolate, postAPI, putAPI} from \"../../../utils/common\";\nimport {INVOICES_API, PATIENT_CLINIC_NOTES_API, CLINIC_NOTES_PDF} from \"../../../constants/api\";\nimport moment from \"moment\";\nimport {Route, Switch} from \"react-router\";\nimport {Link, Redirect} from \"react-router-dom\";\nimport AddClinicNotes from \"./AddClinicNotes\";\nimport {CUSTOM_STRING_SEPERATOR} from \"../../../constants/hardData\";\nimport AddClinicNotesDynamic from \"./AddClinicNotesDynamic\";\nimport {Modal} from \"antd/lib/index\";\nimport {BACKEND_BASE_URL} from \"../../../config/connect\";\nimport InfiniteFeedLoaderButton from \"../../common/InfiniteFeedLoaderButton\";\n\nconst confirm = Modal.confirm;\n\nclass PatientClinicNotes extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            currentPatient: this.props.currentPatient,\n            active_practiceId: this.props.active_practiceId,\n            clinicNotes: [],\n            editClinicNotes: null,\n            loading: true,\n\n        }\n        this.loadClinicNotes = this.loadClinicNotes.bind(this);\n        this.editClinicNotesData = this.editClinicNotesData.bind(this);\n    }\n\n    componentDidMount() {\n        // if (this.props.match.params.id) {\n        this.loadClinicNotes();\n        // }\n\n    }\n\n    loadClinicNotes(page = 1) {\n        let that = this;\n        let successFn = function (data) {\n            that.setState(function (prevState) {\n                if (data.current == 1)\n                    return {\n                        clinicNotes: [...data.results],\n                        next: data.next,\n                        loading: false\n                    }\n                return {\n                    clinicNotes: [...prevState.clinicNotes, ...data.results],\n                    next: data.next,\n                    loading: false\n                }\n            })\n        }\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            })\n\n        }\n        let apiParams = {\n            page: page,\n            practice: this.props.active_practiceId\n        };\n        if (this.props.match.params.id) {\n            apiParams.patient = this.props.match.params.id;\n        }\n        if (this.props.showAllClinic && this.props.match.params.id) {\n            delete (apiParams.practice)\n        }\n\n        getAPI(PATIENT_CLINIC_NOTES_API, successFn, errorFn, apiParams)\n\n    }\n\n\n    editClinicNotesData(record) {\n        this.setState({\n            editClinicNotes: record,\n            loading: false\n        });\n        let id = this.props.match.params.id\n        this.props.history.push(\"/patient/\" + id + \"/emr/clinicnotes/edit\")\n\n    }\n\n    deleteClinicNote(record) {\n        let that = this;\n        confirm({\n            title: 'Are you sure to delete this item?',\n            okText: 'Yes',\n            okType: 'danger',\n            cancelText: 'No',\n            onOk() {\n                let reqData = {id: record.id, patient: record.patient, is_active: false};\n                let successFn = function (data) {\n                    that.loadClinicNotes();\n                }\n                let errorFn = function () {\n                }\n                postAPI(interpolate(PATIENT_CLINIC_NOTES_API, [that.props.match.params.id]), reqData, successFn, errorFn);\n            },\n            onCancel() {\n                console.log('Cancel');\n            },\n        });\n    }\n\n    loadPDF(id) {\n        let that = this;\n        let successFn = function (data) {\n            if (data.report)\n                window.open(BACKEND_BASE_URL + data.report);\n        }\n        let errorFn = function () {\n\n        }\n        getAPI(interpolate(CLINIC_NOTES_PDF, [id]), successFn, errorFn);\n    }\n\n    render() {\n        let that = this;\n        const columns = [{\n            title: 'Time',\n            dataIndex: 'created_at',\n            key: 'name',\n            render: created_at => <span>{moment(created_at).format('LLL')}</span>,\n        }, {\n            title: 'Name',\n            dataIndex: 'name',\n            key: 'name',\n        }, {\n            title: 'Chief Complaints',\n            dataIndex: 'chief_complaints',\n            key: 'chief_complaints',\n        }, {\n            title: 'Investigations',\n            dataIndex: 'investigations',\n            key: 'investigations',\n        }, {\n            title: 'Diagnosis',\n            dataIndex: 'diagnosis',\n            key: 'diagnosis',\n        }, {\n            title: 'Notes',\n            dataIndex: 'notes',\n            key: 'notes',\n        }, {\n            title: 'Observations',\n            dataIndex: 'observations',\n            key: 'observations',\n        }, {\n            title: 'Action',\n            key: 'action',\n            render: (text, record) => (\n                <span>\n                <a onClick={() => this.editClinicNotesData(record)}>Edit</a>\n                <Divider type=\"vertical\"/>\n                <a href=\"javascript:;\">Delete</a>\n              </span>\n            ),\n        }];\n\n        if (this.props.match.params.id) {\n            return <div><Switch>\n                <Route exact path='/patient/:id/emr/clinicnotes/add'\n                       render={(route) => <AddClinicNotesDynamic {...route}\n                                                                 {...this.props}\n                                                                 loadData={this.loadClinicNotes}/>}/>\n                <Route exact path='/patient/:id/emr/clinicnotes/edit'\n                       render={(route) => (this.state.editClinicNotes ? <AddClinicNotesDynamic {...this.state}\n                                                                                               {...route}\n                                                                                               loadData={this.loadClinicNotes}/> :\n                           <Redirect to={'/patient/' + that.props.match.params.id + '/emr/clinicnotes/'}/>)}/>\n                <Route>\n                    <div>\n                        <Card bodyStyle={{padding: 0}}\n                              title={this.state.currentPatient ? this.state.currentPatient.user.first_name + \" ClinicNotes\" : \"ClinicNotes\"}\n                              extra={<Button.Group>\n                                  <Link to={\"/patient/\" + this.props.match.params.id + \"/emr/clinicnotes/add\"}>\n                                      <Button type={\"primary\"}>\n                                          <Icon type=\"plus\"/>Add\n                                      </Button>\n                                  </Link>\n                              </Button.Group>}>\n\n                            {/*<Table loading={this.state.loading} columns={columns} dataSource={this.state.clinicNotes}/>*/}\n\n                        </Card>\n                        {this.state.clinicNotes.map(clinicNote => <Card\n                            style={{marginTop: 20}}\n                            title={<small>{clinicNote.date ? moment(clinicNote.date).format('ll') : null}</small>}\n                            extra={<Dropdown.Button\n                                size={\"small\"}\n                                style={{float: 'right'}}\n                                overlay={<Menu>\n                                    <Menu.Item key=\"1\"\n                                               onClick={() => that.editClinicNotesData(clinicNote)}\n                                               disabled={(clinicNote.practice && clinicNote.practice.id != this.props.active_practiceId)}>\n                                        <Icon type=\"edit\"/>\n                                        Edit\n                                    </Menu.Item>\n                                    <Menu.Item key=\"2\"\n                                               onClick={() => that.deleteClinicNote(clinicNote)}\n                                               disabled={(clinicNote.practice && clinicNote.practice.id != this.props.active_practiceId)}>\n                                        <Icon type=\"delete\"/>\n                                        Delete\n                                    </Menu.Item>\n                                    <Menu.Divider/>\n                                    <Menu.Item key=\"3\">\n                                        <Link\n                                            to={\"/patient/\" + clinicNote.patient + \"/emr/timeline\"}>\n                                            <Icon\n                                                type=\"clock-circle\"/>\n                                            &nbsp;\n                                            Patient Timeline\n                                        </Link>\n                                    </Menu.Item>\n                                </Menu>}>\n                                <a onClick={() => this.loadPDF(clinicNote.id)}><Icon\n                                    type=\"printer\"/>\n                                </a>\n\n                            </Dropdown.Button>}>\n\n\n                            <Row>\n                                <Col span={6}>\n                                    <h3>Complaints</h3>\n                                </Col>\n                                <Col span={18} style={{borderLeft: '1px solid #ccc', padding: 4}}>\n                                    <div style={{minHeight: 30}}>\n                                        {clinicNote.chief_complaints ? clinicNote.chief_complaints.split(CUSTOM_STRING_SEPERATOR).map((str, index) =>\n                                            <span>{index ? <br/> : null}{str}</span>) : null}\n                                    </div>\n                                    <Divider style={{margin: 0}}/>\n                                </Col>\n                            </Row>\n                            <Row>\n                                <Col span={6}>\n                                    <h3>Observations</h3>\n                                </Col>\n                                <Col span={18} style={{borderLeft: '1px solid #ccc', padding: 4}}>\n                                    <div style={{minHeight: 30}}>\n                                        {clinicNote.observations ? clinicNote.observations.split(CUSTOM_STRING_SEPERATOR).map((str, index) =>\n                                            <span>{index ? <br/> : null}{str}</span>) : null}\n                                    </div>\n                                    <Divider style={{margin: 0}}/>\n                                </Col>\n                            </Row>\n                            <Row>\n                                <Col span={6}>\n                                    <h3>Investigations</h3>\n                                </Col>\n                                <Col span={18} style={{borderLeft: '1px solid #ccc', padding: 4}}>\n                                    <div style={{minHeight: 30}}>\n                                        {clinicNote.investigations ? clinicNote.investigations.split(CUSTOM_STRING_SEPERATOR).map((str, index) =>\n                                            <span>{index ? <br/> : null}{str}</span>) : null}\n                                    </div>\n                                    <Divider style={{margin: 0}}/>\n                                </Col>\n                            </Row>\n                            <Row>\n                                <Col span={6}>\n                                    <h3>Diagnoses</h3>\n                                </Col>\n                                <Col span={18} style={{borderLeft: '1px solid #ccc', padding: 4}}>\n                                    <div style={{minHeight: 30}}>\n                                        {clinicNote.diagnosis ? clinicNote.diagnosis.split(CUSTOM_STRING_SEPERATOR).map((str, index) =>\n                                            <span>{index ? <br/> : null}{str}</span>) : null}\n                                    </div>\n                                    <Divider style={{margin: 0}}/>\n                                </Col>\n                            </Row>\n                            <Row>\n                                <Col span={6}>\n                                    <h3>Notes</h3>\n                                </Col>\n                                <Col span={18} style={{borderLeft: '1px solid #ccc', padding: 4}}>\n                                    <div style={{minHeight: 30}}>\n                                        {clinicNote.notes ? clinicNote.notes.split(CUSTOM_STRING_SEPERATOR).map((str, index) =>\n                                            <span>{index ? <br/> : null}{str}</span>) : null}\n                                    </div>\n                                    <Divider style={{margin: 0}}/>\n                                </Col>\n                            </Row>\n                            <Row>\n                                <Col span={6}>\n                                    <h3>Recent Medications</h3>\n                                </Col>\n                                <Col span={18} style={{borderLeft: '1px solid #ccc', padding: 4}}>\n                                    <div style={{minHeight: 30}}>\n                                        {clinicNote.medication ? clinicNote.medication.split(CUSTOM_STRING_SEPERATOR).map((str, index) =>\n                                            <span>{index ? <br/> : null}{str}</span>) : null}\n                                    </div>\n                                    <Divider style={{margin: 0}}/>\n                                </Col>\n                            </Row>\n                            <div>\n                                {clinicNote.doctor ?\n                                    <Tag color={clinicNote.doctor ? clinicNote.doctor.calendar_colour : null}>\n                                        <b>{\"prescribed by  \" + clinicNote.doctor.user.first_name} </b>\n                                    </Tag> : null}\n                                {clinicNote.practice ? <Tag style={{float: 'right'}}>\n                                    <Tooltip title=\"Practice Name\">\n                                        <b>{clinicNote.practice.name} </b>\n                                    </Tooltip>\n                                </Tag> : null}\n                            </div>\n                        </Card>)}\n                        <Spin spinning={this.state.loading}>\n                            <Row/>\n                        </Spin>\n                        <InfiniteFeedLoaderButton loaderFunction={() => this.loadClinicNotes(that.state.next)}\n                                                  loading={this.state.loading}\n                                                  hidden={!this.state.next}/>\n                    </div>\n                </Route>\n            </Switch>\n            </div>\n        }\n        else {\n            return <div>\n                <Card bodyStyle={{padding: 0}}\n                      title={this.state.currentPatient ? this.state.currentPatient.user.first_name + \" Clinic Notes\" : \"Clinic Notes\"}\n                      extra={<Button.Group>\n                          <Button type={\"primary\"} onClick={() => this.props.togglePatientListModal(true)}>\n                              <Icon type=\"plus\"/>Add\n                          </Button>\n                      </Button.Group>}/>\n                {this.state.clinicNotes.map(clinicNote => <Card\n                    style={{marginTop: 10}} key={clinicNote.id}\n                    extra={<Dropdown.Button\n                        size={\"small\"}\n                        overlay={<Menu>\n                            <Menu.Item key=\"1\"\n                                       onClick={() => that.editClinicNotesData(clinicNote)}\n                                       disabled={(clinicNote.practice && clinicNote.practice.id != this.props.active_practiceId)}>\n                                <Icon type=\"edit\"/>\n                                Edit\n                            </Menu.Item>\n                            <Menu.Item key=\"2\"\n                                       onClick={() => that.deleteClinicNote(clinicNote)}\n                                       disabled={(clinicNote.practice && clinicNote.practice.id != this.props.active_practiceId)}>\n                                <Icon type=\"delete\"/>\n                                Delete\n                            </Menu.Item>\n                            <Menu.Divider/>\n                            <Menu.Item key=\"3\">\n                                <Link\n                                    to={\"/patient/\" + clinicNote.patient + \"/emr/timeline\"}>\n                                    <Icon type=\"clock-circle\"/>\n                                    &nbsp;\n                                    Patient Timeline\n                                </Link>\n                            </Menu.Item>\n                        </Menu>}>\n                        <a onClick={() => this.loadPDF(clinicNote.id)}><Icon\n                            type=\"printer\"/></a>\n                    </Dropdown.Button>}\n                    title={<div>\n                        <small>{clinicNote.date ? moment(clinicNote.date).format('ll') : null}\n                            <Link to={\"/patient/\" + clinicNote.patient.id + \"/emr/clinicnotes\"}>\n                                &nbsp;&nbsp; {clinicNote.patient.user ? clinicNote.patient.user.first_name : null} (ID: {clinicNote.patient.custom_id?clinicNote.patient.custom_id:clinicNote.patient.id})&nbsp;\n                            </Link>\n                            <span>, {clinicNote.patient.gender}</span>\n                        </small>\n                    </div>}>\n                    <Row>\n                        <Col span={6}>\n                            <h3>Complaints</h3>\n                        </Col>\n                        <Col span={18} style={{borderLeft: '1px solid #ccc', padding: 4}}>\n                            <div style={{minHeight: 30}}>\n                                {clinicNote.chief_complaints ? clinicNote.chief_complaints.split(CUSTOM_STRING_SEPERATOR).map((str, index) =>\n                                    <span key={str}>{index ? <br/> : null}{str}</span>) : null}\n                            </div>\n                            <Divider style={{margin: 0}}/>\n                        </Col>\n                    </Row>\n                    <Row>\n                        <Col span={6}>\n                            <h3>Observations</h3>\n                        </Col>\n                        <Col span={18} style={{borderLeft: '1px solid #ccc', padding: 4}}>\n                            <div style={{minHeight: 30}}>\n                                {clinicNote.observations ? clinicNote.observations.split(CUSTOM_STRING_SEPERATOR).map((str, index) =>\n                                    <span key={str}>{index ? <br/> : null}{str}</span>) : null}\n                            </div>\n                            <Divider style={{margin: 0}}/>\n                        </Col>\n                    </Row>\n                    <Row>\n                        <Col span={6}>\n                            <h3>Investigations</h3>\n                        </Col>\n                        <Col span={18} style={{borderLeft: '1px solid #ccc', padding: 4}}>\n                            <div style={{minHeight: 30}}>\n                                {clinicNote.investigations ? clinicNote.investigations.split(CUSTOM_STRING_SEPERATOR).map((str, index) =>\n                                    <span key={str}>{index ? <br/> : null}{str}</span>) : null}\n                            </div>\n                            <Divider style={{margin: 0}}/>\n                        </Col>\n                    </Row>\n                    <Row>\n                        <Col span={6}>\n                            <h3>Diagnoses</h3>\n                        </Col>\n                        <Col span={18} style={{borderLeft: '1px solid #ccc', padding: 4}}>\n                            <div style={{minHeight: 30}}>\n                                {clinicNote.diagnosis ? clinicNote.diagnosis.split(CUSTOM_STRING_SEPERATOR).map((str, index) =>\n                                    <span key={str}>{index ? <br/> : null}{str}</span>) : null}\n                            </div>\n                            <Divider style={{margin: 0}}/>\n                        </Col>\n                    </Row>\n                    <Row>\n                        <Col span={6}>\n                            <h3>Notes</h3>\n                        </Col>\n                        <Col span={18} style={{borderLeft: '1px solid #ccc', padding: 4}}>\n                            <div style={{minHeight: 30}}>\n                                {clinicNote.notes ? clinicNote.notes.split(CUSTOM_STRING_SEPERATOR).map((str, index) =>\n                                    <span key={str}>{index ? <br/> : null}{str}</span>) : null}\n                            </div>\n                            <Divider style={{margin: 0}}/>\n                        </Col>\n                    </Row>\n                    <Row>\n                        <Col span={6}>\n                            <h3>Recent Medications</h3>\n                        </Col>\n                        <Col span={18} style={{borderLeft: '1px solid #ccc', padding: 4}}>\n                            <div style={{minHeight: 30}}>\n                                {clinicNote.medication ? clinicNote.medication.split(CUSTOM_STRING_SEPERATOR).map((str, index) =>\n                                    <span>{index ? <br/> : null}{str}</span>) : null}\n                            </div>\n                            <Divider style={{margin: 0}}/>\n                        </Col>\n                    </Row>\n                    <div>\n                        {clinicNote.doctor ?\n                            <Tag color={clinicNote.doctor ? clinicNote.doctor.calendar_colour : null}>\n                                <b>{\"prescribed by  \" + clinicNote.doctor.user.first_name} </b>\n                            </Tag> : null}\n                        {clinicNote.practice ? <Tag style={{float: 'right'}}>\n                            <Tooltip title=\"Practice Name\">\n                                <b>{clinicNote.practice.name} </b>\n                            </Tooltip>\n                        </Tag> : null}\n                    </div>\n                </Card>)}\n                <Spin spinning={this.state.loading}>\n                    <Row/>\n                </Spin>\n                <InfiniteFeedLoaderButton loaderFunction={() => this.loadClinicNotes(that.state.next)}\n                                          loading={this.state.loading}\n                                          hidden={!this.state.next}/>\n            </div>\n        }\n\n    }\n}\n\nexport default PatientClinicNotes;\n","import React from \"react\";\nimport {\n    Avatar,\n    Button,\n    Icon,\n    Layout,\n    Tooltip,\n    Dropdown,\n    Tag,\n    Switch,\n    Statistic,\n    Popover,\n    List,\n    Modal\n} from \"antd\";\nimport PatientSelection from \"./PatientSelection\";\nimport {Link} from \"react-router-dom\";\nimport {hashCode, intToRGB, patientSettingMenu} from \"../../utils/clinicUtils\";\nimport {makeFileURL} from \"../../utils/common\";\n\nconst {Header} = Layout;\n\n\nclass PatientHeader extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n\n        };\n    }\n    componentDidMount() {\n        let that=this;\n        if (that.props.refreshWallet){\n            that.props.refreshWallet();\n        }\n    }\n\n\n    render() {\n        let that = this;\n        return <Header className=\"header\" style={{background: '#e4e4e4',padding:'0px 20px'}}>\n            <div>\n                {this.props.currentPatient ?\n                    <div style={{display: 'inline'}}>\n                        <div style={{display: 'inline', textSize: '15px'}}>\n                            <Tooltip title=\"Switch Back to All Patients\">\n                                <Button onClick={() => this.props.setCurrentPatient(null)} type=\"primary\" ghost>\n                                    <Icon type=\"solution\"/> &nbsp;\n                                    Back\n                                </Button>\n                            </Tooltip>\n                        </div>\n\n                        <a style={{padding: '8px', fontSize: '15px'}}\n                           onClick={() => this.props.togglePatientListModal(true)}>\n                            {(this.props.currentPatient.image ?\n                                <Avatar src={makeFileURL(this.props.currentPatient.image)}/> :\n                                <Avatar style={{backgroundColor: '#87d068'}}>\n                                    {this.props.currentPatient.user.first_name ? this.props.currentPatient.user.first_name.charAt(0) :\n                                        <Icon type=\"user\"/>}\n                                </Avatar>)}\n                            &nbsp;&nbsp;{that.props.currentPatient.user.first_name.length < 16 ? that.props.currentPatient.user.first_name : that.props.currentPatient.user.first_name.slice(0, 12) + '...'}\n                            <small><i><b> [ID: {that.props.currentPatient.custom_id ? that.props.currentPatient.custom_id : that.props.currentPatient.id}]</b></i></small>\n\n                        </a>\n                        &nbsp;&nbsp;&nbsp;&nbsp;\n                        <Popover placement=\"topLeft\" title={\"Medical History\"}\n                                 content={<div\n                                     style={{width: 250}}>{that.props.currentPatient.medical_history_data ? that.props.currentPatient.medical_history_data.map((item, index) =>\n                                     <Tag color={'#' + intToRGB(hashCode(item.name))}>{item.name}</Tag>) : null}</div>}>\n\n                            {that.props.currentPatient.medical_history_data ? that.props.currentPatient.medical_history_data.map((item, index) =>\n                                index > 1 ? index == 2 &&\n                                    <Tag>+{that.props.currentPatient.medical_history_data.length - 2}</Tag> :\n                                    <Tag color={'#' + intToRGB(hashCode(item.name))}>{item.name}</Tag>) : null}\n\n                        </Popover>\n                        <Switch\n                            style={{marginLeft: 20}}\n                            checked={this.props.showAllClinic}\n                            onChange={(value) => this.props.toggleShowAllClinic(value)}\n                            checkedChildren={\"All Clinics\"}\n                            unCheckedChildren={\"Current Clinic\"}\n                        />\n                        {this.props.pendingAmount?<>\n                            <Button style={{marginLeft:'20px'}} type=\"primary\" size={\"small\"}>\n                                <Link to={'/patient/'+ this.props.currentPatient.id +'/billing/payments/add'}> Pay Now!</Link>\n                            </Button>\n                            <Popover placement=\"rightTop\"\n                                     content={<List size=\"small\" dataSource={this.props.pendingAmount.practice_data}\n                                                    renderItem={item => <List.Item><List.Item.Meta title={item.name}\n                                                                                                   description={\"Rs. \" + (item.total < 0 ? item.total * -1 + \" (Advance)\" : item.total)}/></List.Item>}/>}\n                                     title=\"Pending Payments\">\n\n                                <div style={{\n                                    display: 'inline',\n                                    float: 'left',\n                                    maxWidth: 200,\n                                    position: 'absolute',\n                                    margin: '0px 15px',\n                                    zIndex: 5\n                                }}>\n                                    <Statistic title=\"Total Pending Amount\" value={this.props.pendingAmount.grand_total}\n                                    valueStyle={{\n                                    color: this.props.pendingAmount.grand_total > 0 ? '#cf1322' : 'initial',\n                                    fontWeight: 500 }}\n                                    precision={2}/>\n\n                                </div>\n                            </Popover>\n                            </>: null}\n\n                        {this.props.walletAmount && this.props.walletAmount.length ?\n                            <Popover placement=\"rightTop\"\n                                     title=\"Agent Wallet Amount\"\n                                     content={<p>\n                                         {/*Refundable : {this.state.walletAmount[0].refundable_amount} <br/>*/}\n                                         Non-Refundable : {this.props.walletAmount[0].non_refundable}\n                                     </p>}>\n                                <div style={{\n                                    display: 'inline',\n                                    float: 'left',\n                                    maxWidth: 400,\n                                    position: 'absolute',\n                                    paddingLeft: 173,\n                                    margin: '12px 15px'\n                                }}>\n                                    <Statistic tile={\"wallet\"}\n                                               value={this.props.walletAmount[0].refundable_amount + this.props.walletAmount[0].non_refundable}\n                                               prefix={<Icon type=\"wallet\"/>}/>\n                                </div>\n                            </Popover> : null}\n                    </div> :\n                    <a style={{padding: '8px', fontSize: '20px'}}\n                       onClick={() => this.props.togglePatientListModal(true)}>\n                        <div style={{display: 'inline'}}><Icon type=\"solution\"/> &nbsp; All Patient</div>\n                    </a>}\n                <Dropdown overlay={patientSettingMenu}>\n                    <Button style={{float: 'right', margin: '15px'}}>\n                        <Icon type=\"setting\"/> Settings <Icon type=\"down\"/>\n                    </Button>\n                </Dropdown>\n                {that.props.activePracticePermissions.AddPatient || that.props.allowAllPermissions ?\n                    <Link to=\"/patients/profile/add\">\n                        <Button type=\"primary\" style={{float: 'right', margin: '15px'}}>\n                            <Icon type=\"plus\"/> Add Patient\n                        </Button>\n                    </Link> : null}\n\n            </div>\n            <Modal\n                width={1300}\n                maskClosable={false}\n                centered\n                footer={null}\n                closable={false}\n                visible={this.props.listModalVisible}\n                style={{\n                    height: 'calc(100vh - 120px)',\n                }}>\n                <Button icon=\"close\" type=\"danger\" shape=\"circle\" style={{position: 'absolute', top: '-50px', right: 0}}\n                        onClick={() =>\n                            this.props.togglePatientListModal(false)}/>\n                <PatientSelection {...this.props}/>\n            </Modal>\n        </Header>\n    }\n}\n\nexport default PatientHeader;\n\n\n","import React from \"react\";\nimport DynamicFieldsForm from \"../../common/DynamicFieldsForm\";\nimport {Button, List, DatePicker,Card, Form, Icon, Row, Table, Divider, Col, Radio} from \"antd\";\nimport {SINGLE_CHECKBOX_FIELD, SUCCESS_MSG_TYPE} from \"../../../constants/dataKeys\";\nimport {Link} from \"react-router-dom\";\nimport {getAPI, displayMessage, interpolate, putAPI} from \"../../../utils/common\";\nimport {PATIENT_COMMUNICATION_HISTORY_API, PATIENT_PROFILE} from \"../../../constants/api\";\nimport {SMS_ENABLE, BIRTHDAY_SMS_ENABLE, EMAIL_ENABLE} from \"../../../constants/hardData\";\nimport moment from \"moment\";\nimport CustomizedTable from \"../../common/CustomizedTable\";\n\nclass PatientCommunicationSetting extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            parient_communication_history: null,\n            patientProfile: null,\n            saving: false\n        };\n\n        this.loadCommunication = this.loadCommunication.bind(this);\n        this.loadProfile = this.loadProfile.bind(this);\n    }\n\n    componentDidMount() {\n        if (this.props.currentPatient) {\n            this.loadCommunication();\n            this.loadProfile();\n        }\n    }\n\n    loadProfile() {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                patientProfile: data,\n                loading: false\n            });\n        };\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            })\n        };\n        console.log(\"props\", that.props.match.params.id);\n        getAPI(interpolate(PATIENT_PROFILE, [that.props.match.params.id]), successFn, errorFn);\n    }\n\n    loadCommunication() {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                parient_communication_history: data.user_sms,\n                loading: false\n            })\n        }\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            })\n        }\n        getAPI(interpolate(PATIENT_COMMUNICATION_HISTORY_API, [this.props.currentPatient.user.id]), successFn, errorFn)\n    }\n\n    changeRedirect() {\n        var redirectVar = this.state.redirect;\n        this.setState({\n            redirect: !redirectVar,\n        });\n    }\n\n    onChanged = (name, value) => {\n        this.setState({\n            [name]: value,\n        });\n    }\n\n    handleSubmit = (e) => {\n        let that = this;\n        e.preventDefault();\n        this.props.form.validateFields((err, values) => {\n            if (!err) {\n                let reqData = {...values,\n                    medicine_till:moment(values.medicine_till).format('YYYY-MM-DD'),\n                    follow_up_date:moment(values.follow_up_date).format('YYYY-MM-DD'),\n                };\n                that.setState({\n                    saving: true\n                });\n                let successFn = function (data) {\n                    displayMessage(SUCCESS_MSG_TYPE, \"Communication Settings Saved Successfully!!\");\n                    that.setState({\n                        saving: false\n                    });\n                }\n                let errorFn = function () {\n                    that.setState({\n                        saving: false\n                    });\n                }\n                putAPI(interpolate(PATIENT_PROFILE, [this.props.currentPatient.id]), reqData, successFn, errorFn);\n            }\n        });\n    }\n\n\n    render() {\n        const {getFieldDecorator} = this.props.form;\n        const formItemLayout = {\n            labelCol: {\n                xs: {span: 8},\n                sm: {span: 8},\n                md: {span: 8},\n                lg: {span: 8},\n            },\n            wrapperCol: {\n                xs: {span: 16},\n                sm: {span: 16},\n                md: {span: 16},\n                lg: {span: 16},\n            },\n        };\n\n\n        const columns = [{\n            title: 'SENT TIME',\n            dataIndex: 'created_at',\n            key: 'created_at',\n            render: created_at => <span>{moment(created_at).format('LLL')}</span>,\n        }, {\n            title: 'MESSAGE',\n            dataIndex: 'body',\n            key: 'body',\n        }, {\n            title: 'TYPE',\n            dataIndex: 'sms_type',\n            key: 'sms_type',\n        }, {\n            title: 'MESSAGE STATUS',\n            dataIndex: 'status',\n            key: 'status',\n        }];\n\n\n        const sms_enabled = SMS_ENABLE.map((isSMS) => <Radio value={isSMS.value}>{isSMS.title}</Radio>)\n        const email_enabled = EMAIL_ENABLE.map((isEmail) => <Radio value={isEmail.value}>{isEmail.title}</Radio>)\n        const bithday_sms_enabled = BIRTHDAY_SMS_ENABLE.map((isBirth_SMS) => <Radio\n            value={isBirth_SMS.value}>{isBirth_SMS.title}</Radio>);\n        return (<Form onSubmit={this.handleSubmit}>\n                <Card\n                    title={this.props.currentPatient ? this.props.currentPatient.user.first_name + \" Communication\" : \"Patient Communication\"}\n                    extra={<Button type=\"primary\" htmlType=\"submit\" loading={this.state.saving}>\n                        <Icon type=\"save\"/> Save Communication Setting\n                    </Button>}>\n                    \n                    <Form.Item {...formItemLayout} key={'sms_enable'}> <label>\n                        <span className=\"ant-form-text\">{'Enable SMS the patient'} : </span>\n                        {getFieldDecorator('sms_enable', {initialValue: this.state.patientProfile ? this.state.patientProfile.sms_enable : false})\n                        (\n                            <Radio.Group onChange={(e) => this.onChanged('sms_enable', e.target.value)}>\n                                {sms_enabled}\n                            </Radio.Group>\n                        )}\n                    </label>\n                    </Form.Item>\n\n                    <Form.Item {...formItemLayout} key={'email_enable'}> <label> <span\n                        className=\"ant-form-text\">{'Enable Email the patient'} : </span>\n                        {getFieldDecorator('email_enable', {initialValue: this.state.patientProfile ? this.state.patientProfile.email_enable : false})\n                        (\n                            <Radio.Group onChange={(e) => this.onChanged('email_enable', e.target.value)}>\n                                {email_enabled}\n                            </Radio.Group>\n                        )}\n                    </label>\n                    </Form.Item>\n\n                    <Form.Item {...formItemLayout} key={'birthday_sms_email'}> <label> <span\n                        className=\"ant-form-text\"> {\"Send Birthday wish SMS & Email\"} : </span>\n                        {getFieldDecorator('birthday_sms_email', {initialValue: this.state.patientProfile ? this.state.patientProfile.birthday_sms_email : false})\n                        (\n                            <Radio.Group onChange={(e) => this.onChanged('birthday_sms_email', e.target.value)}>\n                                {bithday_sms_enabled}\n                            </Radio.Group>\n                        )}\n                    </label>\n                    </Form.Item>\n\n                    <Form.Item {...formItemLayout} key={'medicine_till'}> <label>\n                        <span\n                            className=\"ant-form-text\"> {\"Medicine Till Date\"} : </span>\n                            {getFieldDecorator('medicine_till', {initialValue: this.state.patientProfile && this.state.patientProfile.medicine_till? moment(this.state.patientProfile.medicine_till) : null})\n                                (<DatePicker/>\n                            )}\n                        </label>\n                    </Form.Item>\n\n                    <Form.Item {...formItemLayout} key={'medicine_till'}> <label>\n                        <span\n                            className=\"ant-form-text\"> {\"Next follow-up To\"} : </span>\n                        {getFieldDecorator('follow_up_date', {initialValue: this.state.patientProfile && this.state.patientProfile.follow_up_date ? moment(this.state.patientProfile.follow_up_date) : null})\n                        (<DatePicker/>\n                        )}\n                    </label>\n                    </Form.Item>\n\n\n\n\n                    <div>\n                        <Divider dashed/>\n                        <h2>Past Communication</h2>\n                        <CustomizedTable loading={this.state.loading} columns={columns}\n                               dataSource={this.state.parient_communication_history}/>\n                    </div>\n                </Card>\n            </Form>\n        );\n\n    }\n}\n\nexport default Form.create()(PatientCommunicationSetting);\n","import React from \"react\";\nimport {Card, Button, Table, Icon} from \"antd\";\nimport {Link} from \"react-router-dom\";\nimport PatientCommunicationSetting from \"./PatientCommunicationSetting\";\n\nclass PatientCommunication extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {};\n    }\n\n    render() {\n        return <PatientCommunicationSetting  {...this.state} {...this.props} />\n    }\n}\n\nexport default PatientCommunication;\n","import React from \"react\";\nimport {Route} from \"react-router\";\n\nimport DynamicFieldsForm from \"../../common/DynamicFieldsForm\";\nimport {Card, Form, Row} from \"antd\";\nimport {DATE_PICKER, NUMBER_FIELD, SELECT_FIELD, SUCCESS_MSG_TYPE} from \"../../../constants/dataKeys\";\nimport {VITAL_SIGNS_API} from \"../../../constants/api\";\nimport {displayMessage, interpolate} from \"../../../utils/common\";\nimport {Redirect} from 'react-router-dom'\nimport moment from \"moment\";\n\n\nclass AddorEditPatientVitalSigns extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            redirect: false,\n            vitalSign: null,\n            editVitalSign: this.props.editVitalSign ? this.props.editVitalSign : null,\n\n        }\n        this.changeRedirect = this.changeRedirect.bind(this);\n\n    }\n\n\n    changeRedirect() {\n        let redirectVar = this.state.redirect;\n        this.setState({\n            redirect: !redirectVar,\n        });\n    }\n\n    render() {\n        const fields = [{\n            label: \"Pulse\",\n            key: \"pulse\",\n            // required: true,\n            initialValue: this.props.editVitalSign ? this.props.editVitalSign.pulse : null,\n            type: NUMBER_FIELD,\n            follow: 'BPM'\n        }, {\n            label: \"Temperature\",\n            key: \"temperature\",\n            initialValue: this.props.editVitalSign ? this.props.editVitalSign.temperature : null,\n            type: NUMBER_FIELD,\n            follow: 'Fahrenheit'\n        }, {\n            label: \"Temperature Part\",\n            key: \"temperature_part\",\n            type: SELECT_FIELD,\n            initialValue: this.props.editVitalSign ? this.props.editVitalSign.temperature_part : null,\n            options: [{label: \"forehead\", value: \"forehead\"}, {label: \"armpit\", value: \"armpit\"}, {\n                label: \"oral \",\n                value: \"oral\"\n            }]\n        }, {\n            label: \"Blood Pressure Up\",\n            key: \"blood_pressure_up\",\n            initialValue: this.props.editVitalSign ? this.props.editVitalSign.blood_pressure_up : null,\n            type: NUMBER_FIELD,\n            follow: 'mmhg'\n        }, {\n            label: \"Blood Pressure Down\",\n            key: \"blood_pressure_down\",\n            initialValue: this.props.editVitalSign ? this.props.editVitalSign.blood_pressure_down : null,\n            type: NUMBER_FIELD,\n            follow: 'mmhg'\n        }, {\n            label: \"Position\",\n            key: \"position\",\n            type: SELECT_FIELD,\n            initialValue: this.props.editVitalSign ? this.props.editVitalSign.position : null,\n            options: [{label: \"standing\", value: \"standing\"}, {label: \"sitting\", value: \"sitting\"}]\n        }, {\n            label: \"Weight\",\n            key: \"weight\",\n            initialValue: this.props.editVitalSign ? this.props.editVitalSign.weight : null,\n            type: NUMBER_FIELD,\n            follow: 'kg.'\n        }, {\n            label: \"Resp Rate\",\n            key: \"resp_rate\",\n            initialValue: this.props.editVitalSign ? this.props.editVitalSign.resp_rate : null,\n            type: NUMBER_FIELD,\n            follow: 'breaths/min'\n        }, {\n            label: \"Creatinine Level\",\n            key: \"creatinine\",\n            initialValue: this.props.editVitalSign ? this.props.editVitalSign.creatinine : null,\n            type: NUMBER_FIELD,\n        }, {\n            label: \"Haemoglobin Level\",\n            key: \"haemoglobin\",\n            initialValue: this.props.editVitalSign ? this.props.editVitalSign.haemoglobin : null,\n            type: NUMBER_FIELD,\n        }, {\n            label: \"Urea Level\",\n            key: \"urea\",\n            initialValue: this.props.editVitalSign ? this.props.editVitalSign.urea : null,\n            type: NUMBER_FIELD,\n        }, {\n            label: \"Uric Acid Level\",\n            key: \"uric_acid\",\n            initialValue: this.props.editVitalSign ? this.props.editVitalSign.uric_acid : null,\n            type: NUMBER_FIELD,\n        },{\n            label:'Date',\n            key:'date',\n            initialValue:this.props.editVitalSign && this.props.editVitalSign.date ?this.props.editVitalSign.date:moment(),\n            type:DATE_PICKER,\n            required:true,\n        }];\n\n\n        let editformProp;\n        let defaultValues = [{key: 'patient', value: this.props.match.params.id}, {\n            key: 'practice',\n            value: this.props.active_practiceId\n        }];\n        let that = this;\n        const TestFormLayout = Form.create()(DynamicFieldsForm);\n        if (this.state.editVitalSign) {\n            editformProp = {\n                successFn: function (data) {\n                    displayMessage(SUCCESS_MSG_TYPE, \"success\")\n                    if (that.props.loadData)\n                        that.props.loadData();\n                },\n                errorFn: function () {\n\n                },\n                action: interpolate(VITAL_SIGNS_API, [this.props.match.params.id]),\n                method: \"post\",\n            }\n            defaultValues.push({\"key\": \"id\", \"value\": this.state.editVitalSign.id})\n        }\n        const formProp = {\n            successFn: function (data) {\n                displayMessage(SUCCESS_MSG_TYPE, \"success\")\n                if (that.props.loadData)\n                    that.props.loadData();\n            },\n            errorFn: function () {\n\n            },\n            action: interpolate(VITAL_SIGNS_API, [this.props.match.params.id]),\n            method: \"post\",\n        }\n\n\n        return <Row>\n            <Card>\n                <Route exact path='/patient/:id/emr/vitalsigns/edit'\n                       render={() => (this.state.editVitalSign ?\n                           <TestFormLayout defaultValues={defaultValues} title=\"Edit Report Manual\"\n                                           changeRedirect={this.changeRedirect} formProp={editformProp}\n                                           fields={fields}/> :\n                           <Redirect to='/patients/profile'/>)}/>\n                <Route exact path='/patient/:id/emr/vitalsigns/add'\n                       render={() => <TestFormLayout title=\"Add Report Manual\"\n                                                     defaultValues={defaultValues}\n                                                     changeRedirect={this.changeRedirect}\n                                                     formProp={formProp} fields={fields}/>}/>\n\n\n            </Card>\n            {this.state.redirect && <Redirect to={'/patient/' + this.props.match.params.id + '/emr/vitalsigns'}/>}\n        </Row>\n\n    }\n}\n\nexport default AddorEditPatientVitalSigns;\n","import React from \"react\";\nimport {Button, Card, Divider, Icon, Modal, Table, Tabs, Tag, Tooltip as AntTooltip} from \"antd\";\nimport {Link, Route, Switch} from \"react-router-dom\";\nimport {VITAL_SIGN_PDF, VITAL_SIGNS_API} from \"../../../constants/api\";\nimport {displayMessage, getAPI, interpolate, postAPI} from \"../../../utils/common\";\nimport moment from 'moment';\nimport CustomizedTable from \"../../common/CustomizedTable\";\nimport AddorEditPatientVitalSigns from \"./AddorEditPatientVitalSigns\";\nimport {\n    CartesianGrid,\n    Legend,\n    Line,\n    Tooltip,\n    XAxis,\n    YAxis,\n    ResponsiveContainer,\n    ComposedChart,\n} from 'recharts';\nimport {BACKEND_BASE_URL} from \"../../../config/connect\";\nimport InfiniteFeedLoaderButton from \"../../common/InfiniteFeedLoaderButton\";\nimport {SUCCESS_MSG_TYPE} from \"../../../constants/dataKeys\";\n\nconst confirm = Modal.confirm;\n\nclass PatientVitalSign extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            currentPatient: this.props.currentPatient,\n            vitalsign: [],\n            loading: true\n        }\n        this.loadVitalsigns = this.loadVitalsigns.bind(this);\n\n    }\n\n    componentDidMount() {\n        this.loadVitalsigns();\n    }\n\n    loadVitalsigns(page = 1) {\n        let that = this;\n        let successFn = function (data) {\n            that.setState(function (prevState) {\n                if (data.current == 1) {\n                    return {\n                        vitalsign: [...data.results],\n                        next: data.next,\n                        loading: false\n                    }\n                }\n                return {\n                    vitalsign: [...prevState.vitalsign, ...data.results],\n                    next: data.next,\n                    loading: false\n                }\n            })\n        }\n        let errorFn = function () {\n\n        }\n        let apiParams = {\n            page: page,\n            practice: this.props.active_practiceId\n        };\n        if (this.props.match.params.id) {\n            apiParams.patient = this.props.match.params.id;\n        }\n        if (this.props.showAllClinic && this.props.match.params.id) {\n            delete (apiParams.practice)\n        }\n        getAPI(VITAL_SIGNS_API, successFn, errorFn, apiParams)\n    }\n\n    deleteVitalSign = (record) => {\n        let that = this;\n        confirm({\n            title: 'Are you sure to delete this item?',\n            okText: 'Yes',\n            okType: 'danger',\n            cancelText: 'No',\n            onOk() {\n                let reqData = {...record, is_active: false};\n                let successFn = function (data) {\n                    that.loadVitalsigns();\n                    displayMessage(SUCCESS_MSG_TYPE, \"Deleted Successfully!!\")\n\n                };\n                let errorFn = function () {\n\n                };\n                postAPI(interpolate(VITAL_SIGNS_API, [record.patient]), reqData, successFn, errorFn)\n            },\n            onCancel() {\n                console.log('Cancel');\n            },\n        });\n    }\n    editObject = (record) => {\n        this.setState({\n            editVitalSign: record,\n            loading: false\n        });\n        if (this.props.match.params.id) {\n            let id = this.props.match.params.id;\n            this.props.history.push(\"/patient/\" + id + \"/emr/vitalsigns/edit\")\n        } else {\n            this.props.history.push(\"/patient/\" + record.patient + \"/emr/vitalsigns\");\n        }\n\n\n    }\n\n    loadPDF(id) {\n        let that = this;\n        let successFn = function (data) {\n            if (data.report)\n                window.open(BACKEND_BASE_URL + data.report);\n        }\n        let errorFn = function () {\n\n        }\n        getAPI(interpolate(VITAL_SIGN_PDF, [id]), successFn, errorFn);\n    }\n\n    render() {\n        let that = this;\n        const columns = [{\n            title: 'Date',\n            dataIndex: 'date',\n            key: 'date',\n            render: (item, record) => <span>{record.date ? moment(record.date).format('LL') : ''}</span>,\n        }, {\n            title: 'Temp(F)',\n            key: 'temperature',\n            render: (text, record) => (\n                <span> {record.temperature}<br/>,{record.temperature_part}</span>\n            )\n        }, {\n            title: 'Pulse (BPM)',\n            dataIndex: 'pulse',\n            key: 'pulse',\n        }, {\n            title: 'RR breaths/min',\n            dataIndex: 'resp_rate',\n            key: 'resp_rate',\n        }, {\n            title: 'SYS/DIA mmhg',\n            key: 'address',\n            render: (text, record) => (\n                <span> {record.blood_pressure_up}/{record.blood_pressure_down}<br/>,{record.position}</span>\n            )\n        }, {\n            title: 'WEIGHT kg',\n            dataIndex: 'weight',\n            key: 'weight',\n        }, {\n            title: \"Creatinine Level\",\n            key: \"creatinine\",\n            dataIndex: \"creatinine\",\n        }, {\n            title: \"Haemoglobin Level\",\n            key: \"haemoglobin\",\n            dataIndex: \"haemoglobin\",\n        }, {\n            title: \"Urea Level\",\n            key: \"urea\",\n            dataIndex: \"urea\",\n\n        }, {\n            title: \"Uric Acid Level\",\n            key: \"uric_acid\",\n            dataIndex: \"uric_acid\",\n        }, {\n            title: 'Action',\n            key: 'action',\n            render: (text, record) => (\n                <span>\n                    <a onClick={() => this.loadPDF(record.id)}\n                    >Print</a>\n                    <Divider type=\"vertical\"/>\n                  <a onClick={() => this.editObject(record)}\n                     disabled={(record.practice != that.props.active_practiceId)}>Edit</a>\n                    <Divider type=\"vertical\"/>\n                    <a onClick={() => that.deleteVitalSign(record)}\n                       disabled={(record.practice != that.props.active_practiceId)}>Delete</a>\n                </span>\n            ),\n        }];\n\n        if (this.props.match.params.id) {\n            return <Switch>\n                <Route path='/patient/:id/emr/vitalsigns/add'\n                       render={(route) => <AddorEditPatientVitalSigns\n                           {...this.props}\n                           key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.state} {...route}\n                           loadData={this.loadVitalsigns}/>}/>\n                <Route path='/patient/:id/emr/vitalsigns/edit'\n                       render={(route) => <AddorEditPatientVitalSigns\n                           {...this.props}\n                           key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.state} {...route}\n                           loadData={this.loadVitalsigns}/>}/>\n                <Route>\n                    <Card\n                        title={this.state.currentPatient ? this.state.currentPatient.user.first_name + \" Report Manual\" : \"Patient Report Manual\"}\n                        extra={<Button.Group>\n                            <Link to={\"/patient/\" + this.props.match.params.id + \"/emr/vitalsigns/add\"}>\n                                <Button type={\"primary\"}>\n                                    <Icon type=\"plus\"/>Add\n                                </Button>\n                            </Link>\n                        </Button.Group>}>\n                        <Tabs>\n                            <Tabs.TabPane tab={\"Charts\"} key={1} style={{margin: 'auto'}}>\n                                <Divider>Pulse Chart (bpm)</Divider>\n                                <div style={{height: 200}}>\n                                    <ResponsiveContainer>\n                                        <ComposedChart width={700} height={200} data={this.state.vitalsign.reverse()}\n                                                       margin={{top: 10, right: 30, left: 0, bottom: 0}}>\n                                            {/*<defs>*/}\n                                            {/*    <linearGradient id=\"colorUv\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">*/}\n                                            {/*        <stop offset=\"5%\" stopColor=\"#8884d8\" stopOpacity={0.8}/>*/}\n                                            {/*        <stop offset=\"95%\" stopColor=\"#8884d8\" stopOpacity={0}/>*/}\n                                            {/*    </linearGradient>*/}\n                                            {/*    <Legend verticalAlign=\"top\" height={36}/>*/}\n                                            {/*</defs>*/}\n                                            <XAxis dataKey=\"date\" tickFormatter={(value) => {\n                                                return moment(value).format('LL')\n                                            }} tickCount={that.state.vitalsign.length}/>\n                                            <YAxis\n                                                domain={[dataMin => (Math.abs(dataMin)), dataMax => (dataMax * 1.1).toFixed(0)]}/>\n                                            <CartesianGrid strokeDasharray=\"3 3\"/>\n                                            <Tooltip\n                                                labelFormatter={(value) => (value && moment(value).isValid() ? moment(value).format('LL') : '--')}/>\n                                            <Line type=\"monotone\" dataKey=\"pulse\" stroke=\"#8884d8\" fillOpacity={1}\n                                                  strokeWidth={4}\n                                                  fill=\"url(#colorUv)\"/>\n                                        </ComposedChart>\n                                    </ResponsiveContainer>\n                                </div>\n                                <Divider>Temperature (F)</Divider>\n                                <div style={{height: 200}}>\n                                    <ResponsiveContainer>\n                                        <ComposedChart width={700} height={200} data={this.state.vitalsign.reverse()}\n                                                       margin={{top: 10, right: 30, left: 0, bottom: 0}}>\n                                            <Legend verticalAlign=\"top\" height={36}/>\n                                            <defs>\n                                                <linearGradient id=\"colorUv\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                                                    <stop offset=\"5%\" stopColor=\"#82ca9d\" stopOpacity={0.8}/>\n                                                    <stop offset=\"95%\" stopColor=\"#82ca9d\" stopOpacity={0}/>\n                                                </linearGradient>\n                                            </defs>\n                                            <XAxis dataKey=\"date\" tickFormatter={(value) => {\n                                                return moment(value).format('LL')\n                                            }} tickCount={this.state.vitalsign.length}/>\n                                            <YAxis\n                                                domain={[dataMin => (Math.abs(dataMin)), dataMax => (dataMax * 1.1).toFixed(0)]}/>\n                                            <CartesianGrid strokeDasharray=\"3 3\"/>\n\n                                            <Tooltip\n                                                labelFormatter={(value) => (value && moment(value).isValid() ? moment(value).format('LL') : '--')}/>\n                                            <Line type=\"monotone\" dataKey=\"temperature\" stroke=\"#82ca9d\" fillOpacity={1}\n                                                  strokeWidth={4}\n                                                  fill=\"url(#colorUv)\"/>\n                                        </ComposedChart>\n                                    </ResponsiveContainer>\n                                </div>\n                                <Divider>Blood Pressure (mmhg)</Divider>\n                                <div style={{height: 200}}>\n                                    <ResponsiveContainer>\n                                        <ComposedChart width={700} height={200} data={this.state.vitalsign.reverse()}\n                                                       margin={{top: 10, right: 30, left: 0, bottom: 0}}>\n                                            <defs>\n                                                <linearGradient id=\"colorUv\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                                                    <stop offset=\"5%\" stopColor=\"#ffc658\" stopOpacity={0.8}/>\n                                                    <stop offset=\"95%\" stopColor=\"#ffc658\" stopOpacity={0}/>\n                                                </linearGradient>\n                                            </defs>\n                                            <XAxis dataKey=\"date\" tickFormatter={(value) => {\n                                                return moment(value).format('LL')\n                                            }} tickCount={this.state.vitalsign.length}/>\n                                            <YAxis\n                                                domain={[dataMin => (Math.abs(dataMin)), dataMax => (dataMax * 1.1).toFixed(0)]}/>\n                                            <CartesianGrid strokeDasharray=\"3 3\"/>\n                                            <Tooltip\n                                                labelFormatter={(value) => (value && moment(value).isValid() ? moment(value).format('LL') : '--')}/>\n                                            <Line type=\"monotone\" dataKey=\"blood_pressure_up\" stroke=\"#ffc658\"\n                                                  fillOpacity={1}\n                                                  strokeWidth={4}\n                                                  fill=\"url(#colorUv)\"/>\n                                            <Line type=\"monotone\" dataKey=\"blood_pressure_down\" stroke=\"#82ca9d\"\n                                                  fillOpacity={1}\n                                                  strokeWidth={4}\n                                                  fill=\"url(#colorUv)\"/>\n                                        </ComposedChart>\n                                    </ResponsiveContainer>\n                                </div>\n                                <Divider>Weight (kg)</Divider>\n                                <div style={{height: 200}}>\n                                    <ResponsiveContainer>\n                                        <ComposedChart width={700} height={200} data={this.state.vitalsign.reverse()}\n                                                       margin={{top: 10, right: 30, left: 0, bottom: 0}}>\n                                            <defs>\n                                                <linearGradient id=\"colorUv\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                                                    <stop offset=\"5%\" stopColor=\"#8884d8\" stopOpacity={0.8}/>\n                                                    <stop offset=\"95%\" stopColor=\"#8884d8\" stopOpacity={0}/>\n                                                </linearGradient>\n                                                <linearGradient id=\"colorPv\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                                                    <stop offset=\"5%\" stopColor=\"#82ca9d\" stopOpacity={0.8}/>\n                                                    <stop offset=\"95%\" stopColor=\"#82ca9d\" stopOpacity={0}/>\n                                                </linearGradient>\n                                            </defs>\n                                            <XAxis dataKey=\"date\" tickFormatter={(value) => {\n                                                return moment(value).format('LL')\n                                            }} tickCount={this.state.vitalsign.length}/>\n                                            <YAxis\n                                                domain={[dataMin => (Math.abs(dataMin)), dataMax => (dataMax * 1.1).toFixed(0)]}/>\n                                            <CartesianGrid strokeDasharray=\"3 3\"/>\n                                            <Tooltip\n                                                labelFormatter={(value) => (value && moment(value).isValid() ? moment(value).format('LL') : '--')}/>\n                                            <Line type=\"monotone\" dataKey=\"weight\" stroke=\"#8884d8\" fillOpacity={1}\n                                                  strokeWidth={4}\n                                                  fill=\"url(#colorUv)\"/>\n                                        </ComposedChart>\n                                    </ResponsiveContainer>\n                                </div>\n                                <Divider>Respiratory Rate (breaths/min)</Divider>\n                                <div style={{height: 200}}>\n                                    <ResponsiveContainer>\n                                        <ComposedChart width={700} height={200} data={this.state.vitalsign.reverse()}\n                                                       margin={{top: 10, right: 30, left: 0, bottom: 0}}>\n                                            <defs>\n                                                <linearGradient id=\"colorUv\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                                                    <stop offset=\"5%\" stopColor=\"#82ca9d\" stopOpacity={0.8}/>\n                                                    <stop offset=\"95%\" stopColor=\"#82ca9d\" stopOpacity={0}/>\n                                                </linearGradient>\n                                                <linearGradient id=\"colorPv\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                                                    <stop offset=\"5%\" stopColor=\"#82ca9d\" stopOpacity={0.8}/>\n                                                    <stop offset=\"95%\" stopColor=\"#82ca9d\" stopOpacity={0}/>\n                                                </linearGradient>\n                                            </defs>\n                                            <XAxis dataKey=\"date\" tickFormatter={(value) => {\n                                                return moment(value).format('LL')\n                                            }} tickCount={this.state.vitalsign.length}/>\n                                            <YAxis\n                                                domain={[dataMin => (Math.abs(dataMin)), dataMax => (dataMax * 1.1).toFixed(0)]}/>\n                                            <CartesianGrid strokeDasharray=\"3 3\"/>\n                                            <Tooltip\n                                                labelFormatter={(value) => (value && moment(value).isValid() ? moment(value).format('LL') : '--')}/>\n                                            <Line type=\"monotone\" dataKey=\"resp_rate\" stroke=\"#82ca9d\" fillOpacity={1}\n                                                  strokeWidth={4}\n                                                  fill=\"url(#colorUv)\"/>\n                                        </ComposedChart>\n                                    </ResponsiveContainer>\n                                </div>\n                                <Divider>Creatinine Level</Divider>\n                                <div style={{height: 200}}>\n                                    <ResponsiveContainer>\n                                        <ComposedChart width={700} height={200} data={this.state.vitalsign.reverse()}\n                                                       margin={{top: 10, right: 30, left: 0, bottom: 0}}>\n                                            <defs>\n                                                <linearGradient id=\"colorUv\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                                                    <stop offset=\"5%\" stopColor=\"#82ca9d\" stopOpacity={0.8}/>\n                                                    <stop offset=\"95%\" stopColor=\"#82ca9d\" stopOpacity={0}/>\n                                                </linearGradient>\n                                                <linearGradient id=\"colorPv\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                                                    <stop offset=\"5%\" stopColor=\"#82ca9d\" stopOpacity={0.8}/>\n                                                    <stop offset=\"95%\" stopColor=\"#82ca9d\" stopOpacity={0}/>\n                                                </linearGradient>\n                                            </defs>\n                                            <XAxis dataKey=\"date\" tickFormatter={(value) => {\n                                                return moment(value).format('LL')\n                                            }} tickCount={this.state.vitalsign.length}/>\n                                            <YAxis\n                                                domain={[dataMin => (Math.abs(dataMin)), dataMax => (dataMax * 1.1).toFixed(0)]}/>\n                                            <CartesianGrid strokeDasharray=\"3 3\"/>\n                                            <Tooltip\n                                                labelFormatter={(value) => (value && moment(value).isValid() ? moment(value).format('LL') : '--')}/>\n                                            <Line type=\"monotone\" dataKey=\"creatinine\" stroke=\"#82ca9d\" fillOpacity={1}\n                                                  strokeWidth={4}\n                                                  fill=\"url(#colorUv)\"/>\n                                        </ComposedChart>\n                                    </ResponsiveContainer>\n                                </div>\n                                <Divider>Haemoglobin Level</Divider>\n                                <div style={{height: 200}}>\n                                    <ResponsiveContainer>\n                                        <ComposedChart width={700} height={200} data={this.state.vitalsign.reverse()}\n                                                       margin={{top: 10, right: 30, left: 0, bottom: 0}}>\n                                            <defs>\n                                                <linearGradient id=\"colorUv\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                                                    <stop offset=\"5%\" stopColor=\"#82ca9d\" stopOpacity={0.8}/>\n                                                    <stop offset=\"95%\" stopColor=\"#82ca9d\" stopOpacity={0}/>\n                                                </linearGradient>\n                                                <linearGradient id=\"colorPv\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                                                    <stop offset=\"5%\" stopColor=\"#82ca9d\" stopOpacity={0.8}/>\n                                                    <stop offset=\"95%\" stopColor=\"#82ca9d\" stopOpacity={0}/>\n                                                </linearGradient>\n                                            </defs>\n                                            <XAxis dataKey=\"date\" tickFormatter={(value) => {\n                                                return moment(value).format('LL')\n                                            }} tickCount={this.state.vitalsign.length}/>\n                                            <YAxis\n                                                domain={[dataMin => (Math.abs(dataMin)), dataMax => (dataMax * 1.1).toFixed(0)]}/>\n                                            <CartesianGrid strokeDasharray=\"3 3\"/>\n                                            <Tooltip\n                                                labelFormatter={(value) => (value && moment(value).isValid() ? moment(value).format('LL') : '--')}/>\n                                            <Line type=\"monotone\" dataKey=\"haemoglobin\" stroke=\"#82ca9d\" fillOpacity={1}\n                                                  strokeWidth={4}\n                                                  fill=\"url(#colorUv)\"/>\n                                        </ComposedChart>\n                                    </ResponsiveContainer>\n                                </div>\n                                <Divider>Urea Level</Divider>\n                                <div style={{height: 200}}>\n                                    <ResponsiveContainer>\n                                        <ComposedChart width={700} height={200} data={this.state.vitalsign.reverse()}\n                                                       margin={{top: 10, right: 30, left: 0, bottom: 0}}>\n                                            <defs>\n                                                <linearGradient id=\"colorUv\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                                                    <stop offset=\"5%\" stopColor=\"#82ca9d\" stopOpacity={0.8}/>\n                                                    <stop offset=\"95%\" stopColor=\"#82ca9d\" stopOpacity={0}/>\n                                                </linearGradient>\n                                                <linearGradient id=\"colorPv\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                                                    <stop offset=\"5%\" stopColor=\"#82ca9d\" stopOpacity={0.8}/>\n                                                    <stop offset=\"95%\" stopColor=\"#82ca9d\" stopOpacity={0}/>\n                                                </linearGradient>\n                                            </defs>\n                                            <XAxis dataKey=\"date\" tickFormatter={(value) => {\n                                                return moment(value).format('LL')\n                                            }} tickCount={this.state.vitalsign.length}/>\n                                            <YAxis\n                                                domain={[dataMin => (Math.abs(dataMin)), dataMax => (dataMax * 1.1).toFixed(0)]}/>\n                                            <CartesianGrid strokeDasharray=\"3 3\"/>\n                                            <Tooltip\n                                                labelFormatter={(value) => (value && moment(value).isValid() ? moment(value).format('LL') : '--')}/>\n                                            <Line type=\"monotone\" dataKey=\"urea\" stroke=\"#82ca9d\" fillOpacity={1}\n                                                  strokeWidth={4}\n                                                  fill=\"url(#colorUv)\"/>\n                                        </ComposedChart>\n                                    </ResponsiveContainer>\n                                </div>\n                                <Divider>Uric Acid Level</Divider>\n                                <div style={{height: 200}}>\n                                    <ResponsiveContainer>\n                                        <ComposedChart width={700} height={200} data={this.state.vitalsign.reverse()}\n                                                       margin={{top: 10, right: 30, left: 0, bottom: 0}}>\n                                            <defs>\n                                                <linearGradient id=\"colorUv\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                                                    <stop offset=\"5%\" stopColor=\"#82ca9d\" stopOpacity={0.8}/>\n                                                    <stop offset=\"95%\" stopColor=\"#82ca9d\" stopOpacity={0}/>\n                                                </linearGradient>\n                                                <linearGradient id=\"colorPv\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                                                    <stop offset=\"5%\" stopColor=\"#82ca9d\" stopOpacity={0.8}/>\n                                                    <stop offset=\"95%\" stopColor=\"#82ca9d\" stopOpacity={0}/>\n                                                </linearGradient>\n                                            </defs>\n                                            <XAxis dataKey=\"date\" tickFormatter={(value) => {\n                                                return moment(value).format('LL')\n                                            }} tickCount={this.state.vitalsign.length}/>\n                                            <YAxis\n                                                domain={[dataMin => (Math.abs(dataMin)), dataMax => (dataMax * 1.1).toFixed(0)]}/>\n                                            <CartesianGrid strokeDasharray=\"3 3\"/>\n                                            <Tooltip\n                                                labelFormatter={(value) => (value && moment(value).isValid() ? moment(value).format('LL') : '--')}/>\n                                            <Line type=\"monotone\" dataKey=\"uric_acid\" stroke=\"#82ca9d\" fillOpacity={1}\n                                                  strokeWidth={4}\n                                                  fill=\"url(#colorUv)\"/>\n                                        </ComposedChart>\n                                    </ResponsiveContainer>\n                                </div>\n                            </Tabs.TabPane>\n                            <Tabs.TabPane tab={\"Details\"} key={2}>\n                                <CustomizedTable columns={columns}\n                                                 pagination={false}\n                                                 dataSource={this.state.vitalsign}/>\n                                <InfiniteFeedLoaderButton loaderFunction={() => this.loadInvoices(that.state.next)}\n                                                          loading={this.state.loading}\n                                                          hidden={!this.state.next}/>\n\n                            </Tabs.TabPane>\n\n                        </Tabs>\n                    </Card>\n                </Route>\n            </Switch>\n        } else {\n            return <div>\n                <Card\n                    bodyStyle={{padding: 0}}\n                    title={this.state.currentPatient ? this.state.currentPatient.user.first_name + \" Report Manual\" : \"Patients Report Manual\"}\n                    extra={<Button.Group>\n                        <Button type={\"primary\"} onClick={() => that.props.togglePatientListModal(true)}>\n                            <Icon type=\"plus\"/>Add\n                        </Button>\n                    </Button.Group>}/>\n                {this.state.vitalsign.map(vitalsign => <div>\n                    <Card style={{marginTop: 10}}\n                          title={<small>{vitalsign.date ? moment(vitalsign.date).format('ll') : null}\n                              <Link to={\"/patient/\" + vitalsign.patient_data.id + \"/emr/vitalsigns\"}>\n                                  &nbsp;&nbsp; {vitalsign.patient_data.user ? vitalsign.patient_data.user.first_name : null} (ID: {vitalsign.patient_data.custom_id ? vitalsign.patient_data.custom_id : vitalsign.patient_data.id})&nbsp;\n                              </Link>\n                              <span>, {vitalsign.patient_data.gender}</span>\n                          </small>}\n                          bodyStyle={{padding: 0}}>\n                        <Table columns={columns}\n                               pagination={false}\n                               dataSource={[vitalsign]}\n                               footer={() => VitalSignFooter(vitalsign)}/>\n                    </Card>\n                </div>)}\n                <InfiniteFeedLoaderButton loaderFunction={() => this.loadVitalsigns(that.state.next)}\n                                          loading={this.state.loading}\n                                          hidden={!this.state.next}/>\n            </div>\n        }\n    }\n\n}\n\nexport default PatientVitalSign;\n\nfunction CustomizedTooltip(value, name, props) {\n    console.log(value, name, props);\n    return [\"formatted value\", \"formatted name\"]\n}\n\nfunction VitalSignFooter(presc) {\n    if (presc) {\n        console.log(presc)\n        return <div>\n            {presc.doctor ? <Tag color={presc.doctor ? presc.doctor.calendar_colour : null}>\n                <b>{\"prescribed by  \" + presc.doctor.user.first_name} </b>\n            </Tag> : null}\n\n            {presc.practice_data ? <Tag style={{float: 'right'}}>\n                <AntTooltip title=\"Practice Name\">\n                    <b>{presc.practice_data.name} </b>\n                </AntTooltip>\n            </Tag> : null}\n        </div>\n    }\n    return null\n}","import React from \"react\";\nimport {\n    Card,\n    Row,\n    Form,\n    Col,\n    List,\n    Button,\n    Table,\n    InputNumber,\n    Input,\n    Icon,\n    Affix,\n    Dropdown,\n    Menu,\n    DatePicker\n} from 'antd';\nimport {displayMessage, getAPI, interpolate, postAPI} from \"../../../utils/common\";\nimport {PRACTICESTAFF, PROCEDURE_CATEGORY, TREATMENTPLANS_API} from \"../../../constants/api\";\nimport {remove} from 'lodash';\nimport {Redirect} from 'react-router-dom';\nimport {DOCTORS_ROLE} from \"../../../constants/dataKeys\";\nimport moment from \"moment\";\nimport {loadDoctors} from \"../../../utils/clinicUtils\";\n\n\nclass AddorEditDynamicCompletedTreatmentPlans extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            loadingProcedures: true,\n            procedure_category: [],\n            tableFormValues: [],\n            addNotes: {},\n            practiceDoctors: [],\n            selectedDoctor: {},\n            selectedDate: moment()\n        }\n    }\n\n    componentDidMount() {\n        if (this.props.editId) {\n            this.setState(function (prevState) {\n                let tableValues = [];\n                this.props.editTreatmentPlan.treatment_plans.forEach(function (treatment) {\n                    let randId = Math.random().toFixed(7);\n                    tableValues.push({\n                        ...treatment,\n                        ...treatment.procedure,\n                        _id: randId,\n                    })\n                });\n                return {\n                    ...this.props.editTreatmentPlan,\n                    tableFormValues: tableValues,\n                    selectedDate: moment(this.props.editTreatmentPlan.date),\n                    selectedDoctor: this.props.editTreatmentPlan.doctor\n                }\n            })\n        }\n        this.loadProcedures();\n        loadDoctors(this);\n    }\n\n    calculateItem = (_id) => {\n        const {getFieldsValue} = this.props.form;\n        console.log(getFieldsValue());\n        this.setState(function (prevState) {\n            let newtableFormValues = [...prevState.tableFormValues];\n            newtableFormValues.forEach(function (item) {\n\n            });\n        });\n    }\n    addNotes = (_id, option) => {\n        this.setState(function (prevState) {\n            return {addNotes: {...prevState.addNotes, [_id]: !!option}}\n        })\n    }\n    removeTreatment = (_id) => {\n        this.setState(function (prevState) {\n            return {\n                tableFormValues: [...remove(prevState.tableFormValues, function (item) {\n                    return item._id != _id;\n                })]\n            }\n        });\n    }\n    add = (item) => {\n        let that = this;\n        this.setState(function (prevState) {\n            let randId = Math.random().toFixed(7);\n            return {\n                addNotes: {...prevState.addNotes, [randId]: !!item.default_notes},\n                tableFormValues: [{\n                    ...item,\n                    _id: randId,\n                }, ...prevState.tableFormValues]\n            }\n        }, function () {\n            // if (that.bottomPoint)\n            //     that.bottomPoint.scrollIntoView({behavior: 'smooth'});\n        });\n    };\n\n    loadProcedures() {\n        var that = this;\n        let params = {};\n        if (this.state.searchString) {\n            params.name = this.state.searchString;\n        }\n        that.setState({\n            loadingProcedures: true\n        })\n        let successFn = function (data) {\n            if (!params.name || that.state.searchString == params.name)\n                that.setState({\n                    // procedure_category: data.results,\n                    loadingProcedures: false,\n                    filteredItems: data.results,\n                })\n        };\n        let errorFn = function () {\n            that.setState({\n                loadingProcedures: false\n            })\n        };\n\n        getAPI(interpolate(PROCEDURE_CATEGORY, [this.props.active_practiceId]), successFn, errorFn, params);\n    }\n\n    selectDoctor = (doctor) => {\n        this.setState({\n            selectedDoctor: doctor\n        })\n    }\n    selectedDate = (date) => {\n        this.setState({\n            selectedDate: date\n        })\n    }\n    handleSubmit = (e) => {\n        let that = this;\n        e.preventDefault();\n        this.props.form.validateFields((err, values) => {\n            if (!err) {\n                console.log('Received values of form: ', values);\n                let reqData = {\n                    treatment_plans: [],\n                    patient: that.props.match.params.id,\n                    \"doctor\": that.state.selectedDoctor.id,\n                    \"date\": that.state.selectedDate && moment(that.state.selectedDate).isValid() ? that.state.selectedDate.format('YYYY-MM-DD') : null,\n                    \"practice\": that.props.active_practiceId,\n                };\n                if (that.props.editId) {\n                    reqData.id = that.props.editTreatmentPlan.id\n                }\n                that.state.tableFormValues.forEach(function (item) {\n                    console.log(item);\n                    item.quantity = values.quantity[item._id];\n                    item.cost = values.cost[item._id];\n                    item.discount = values.discount[item._id];\n                    if (values.notes)\n                        item.notes = values.notes[item._id];\n                    let sendingItem = {\n                        \"procedure\": item.id,\n                        \"cost\": item.cost,\n                        \"quantity\": item.quantity,\n                        \"margin\": item.margin,\n                        \"default_notes\": item.notes,\n                        \"is_active\": true,\n                        \"is_completed\": true,\n                        \"discount\": item.discount,\n                        \"discount_type\": \"%\",\n\n                    };\n                    reqData.treatment_plans.push(sendingItem);\n                });\n\n                let successFn = function (data) {\n                    displayMessage(\"Inventory updated successfully\");\n                    if (that.props.loadData)\n                        that.props.loadData();\n                    let url = '/patient/' + that.props.match.params.id + '/emr/workdone';\n                    that.props.history.push(url);\n                };\n                let errorFn = function () {\n\n                };\n                postAPI(interpolate(TREATMENTPLANS_API, [that.props.match.params.id]), reqData, successFn, errorFn);\n            }\n        });\n    };\n    searchValues = (value) => {\n        let that = this;\n        this.setState(function (prevState) {\n            return {searchString: value}\n        }, function () {\n            that.loadProcedures();\n        });\n        return false;\n    }\n\n    render() {\n        let that = this;\n        const {getFieldDecorator, getFieldValue, getFieldsValue} = this.props.form;\n        const formItemLayout = {\n            labelCol: {\n                xs: {span: 24},\n                sm: {span: 4},\n            },\n            wrapperCol: {\n                xs: {span: 24},\n                sm: {span: 20},\n            },\n        };\n        const formItemLayoutWithOutLabel = {\n            labelCol: {\n                xs: {span: 24},\n                sm: {span: 24},\n            },\n            wrapperCol: {\n                xs: {span: 24},\n                sm: {span: 24},\n            },\n        };\n        const consumeRow = [{\n            title: 'Treatments',\n            dataIndex: 'name',\n            key: 'name',\n            render: (name, record) => <span>\n                <b>{name}</b><br/>\n                {this.state.addNotes[record._id] || this.props.editId ?\n                    <Form.Item\n                        key={`default_notes[${record._id}]`}\n                        {...formItemLayout}>\n                        {getFieldDecorator(`notes[${record._id}]`, {\n                            validateTrigger: ['onChange', 'onBlur'],\n                            rules: [{\n                                message: \"This field is required.\",\n                            }],\n                            initialValue: record.default_notes\n                        })(\n                            <Input.TextArea min={0} placeholder={\"Notes...\"}/>\n                        )}\n                    </Form.Item>\n                    : <a onClick={() => this.addNotes(record._id, true)}>+ Add Note</a>}\n                </span>\n        }, {\n            title: 'Quantity',\n            dataIndex: 'quantity',\n            key: 'quantity',\n            render: (name, record) => <Form.Item\n                key={`quantity[${record._id}]`}\n                {...formItemLayout}>\n                {getFieldDecorator(`quantity[${record._id}]`, {\n                    validateTrigger: ['onChange', 'onBlur'],\n                    rules: [{\n                        required: true,\n                        message: \"This field is required.\",\n                    }],\n                    initialValue: record.quantity,\n                })(\n                    <InputNumber min={0} placeholder=\"Quantity\" size={'small'}\n                                 onChange={() => this.calculateItem(record._id)}/>\n                )}\n            </Form.Item>\n        }, {\n            title: 'Cost',\n            dataIndex: 'cost',\n            key: 'cost',\n            render: (name, record) => <Form.Item\n                key={`cost[${record._id}]`}\n                {...formItemLayout}>\n                {getFieldDecorator(`cost[${record._id}]`, {\n                    validateTrigger: ['onChange', 'onBlur'],\n                    rules: [{\n                        required: true,\n                        message: \"This field is required.\",\n                    }],\n                    initialValue: record.cost\n                })(\n                    <InputNumber min={0} placeholder=\"Cost\" size={'small'}\n                                 onChange={() => this.calculateItem(record._id)}/>\n                )}\n            </Form.Item>\n        }, {\n            title: 'Discount',\n            dataIndex: 'discount',\n            key: 'discount',\n            render: (name, record) => <Form.Item\n                key={`discount[${record._id}]`}\n                {...formItemLayout}>\n                {getFieldDecorator(`discount[${record._id}]`, {\n                    validateTrigger: ['onChange', 'onBlur'],\n                    rules: [{\n                        message: \"This field is required.\",\n                    }],\n                })(\n                    <InputNumber min={0} placeholder=\"Discount\" size={'small'}\n                                 onChange={() => this.calculateItem(record._id)}/>\n                )} %\n            </Form.Item>\n        }, {\n            title: 'Total',\n            dataIndex: 'total',\n            key: 'total',\n            render: (total, record) => <span>\n                {total}\n                <Button icon={\"close\"} onClick={() => this.removeTreatment(record._id)} type={\"danger\"}\n                        shape=\"circle\"\n                        size=\"small\"/>\n            </span>\n        }];\n        return <div>\n\n            <Card title={\"Completed Procedures\"}>\n                <Row>\n                    <Col span={17}>\n                        <Form onSubmit={this.handleSubmit}>\n                            <Table pagination={false}\n                                   bordered={true}\n                                   dataSource={this.state.tableFormValues}\n                                   columns={consumeRow}/>\n\n                            <Affix offsetBottom={0}>\n                                <Card>\n                                    <span>by &nbsp;&nbsp;</span>\n                                    <Dropdown placement=\"topCenter\" overlay={<Menu>\n                                        {this.state.practiceDoctors.map(doctor =>\n                                            <Menu.Item key=\"0\">\n                                                <a onClick={() => this.selectDoctor(doctor)}>{doctor.user.first_name}</a>\n                                            </Menu.Item>)}\n                                    </Menu>} trigger={['click']}>\n                                        <a className=\"ant-dropdown-link\" href=\"#\">\n                                            <b>\n                                                {this.state.selectedDoctor.user ? this.state.selectedDoctor.user.first_name : 'No DOCTORS Found'}\n                                            </b>\n                                        </a>\n                                    </Dropdown>\n                                    <span> &nbsp;&nbsp;on&nbsp;&nbsp;</span>\n                                    <DatePicker value={this.state.selectedDate}\n                                                onChange={(value) => this.selectedDate(value)} format={\"DD-MM-YYYY\"}\n                                                allowClear={false}/>\n                                    <Form.Item {...formItemLayoutWithOutLabel}\n                                               style={{marginBottom: 0, float: 'right'}}>\n                                        <Button type=\"primary\" htmlType=\"submit\" style={{margin: 5}}>Save Treatment\n                                            Plan</Button>\n                                        {that.props.history ?\n                                            <Button style={{margin: 5, float: 'right'}}\n                                                    onClick={() => that.props.history.goBack()}>\n                                                Cancel\n                                            </Button> : null}\n                                    </Form.Item>\n                                </Card>\n                            </Affix>\n                            <div ref={el => {\n                                that.bottomPoint = el;\n                            }}/>\n                        </Form>\n                    </Col>\n                    <Col span={7}>\n                        <Affix offsetTop={0}>\n                            <div style={{backgroundColor: '#ddd', padding: 8}}>\n                                <Input.Search placeholder={\"Search in plans ...\"}\n                                              onChange={e => this.searchValues(e.target.value)}/>\n                            </div>\n                            <List size={\"small\"}\n                                  loading={this.state.loadingProcedures}\n                                  style={{maxHeight: '100vh', overflowX: 'scroll'}}\n                                  itemLayout=\"horizontal\"\n                                  dataSource={this.state.filteredItems}\n                                  renderItem={item => (\n                                      <List.Item onClick={() => this.add(item)}>\n                                          <List.Item.Meta\n                                              title={item.name}/>\n                                      </List.Item>)}/>\n                        </Affix>\n                    </Col>\n                </Row>\n            </Card>\n\n        </div>\n    }\n}\n\nexport default Form.create()(AddorEditDynamicCompletedTreatmentPlans)\n","import React from \"react\";\nimport {Button, Card, Checkbox, Divider, Icon, Table, Popconfirm, Menu, Dropdown, Tag, Tooltip,} from \"antd\";\nimport {getAPI, interpolate, putAPI, postAPI, displayMessage} from \"../../../utils/common\";\nimport {\n    PROCEDURE_CATEGORY,\n    PRODUCT_MARGIN,\n    TREATMENTPLANS_API,\n    SINGLE_REATMENTPLANS_API,\n    TREATMENTPLANS_PDF\n} from \"../../../constants/api\";\nimport moment from \"moment\";\nimport {Link, Redirect, Route, Switch} from \"react-router-dom\";\nimport {SELECT_FIELD, SUCCESS_MSG_TYPE} from \"../../../constants/dataKeys\";\nimport AddorEditDynamicCompletedTreatmentPlans from \"./AddorEditDynamicCompletedTreatmentPlans\";\nimport InfiniteFeedLoaderButton from \"../../common/InfiniteFeedLoaderButton\";\nimport {BACKEND_BASE_URL} from \"../../../config/connect\";\nimport {Modal} from \"antd\";\n\nconst confirm = Modal.confirm;\n\nclass PatientCompletedProcedures extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            currentPatient: this.props.currentPatient,\n            active_practiceId: this.props.active_practiceId,\n            treatmentPlans: [],\n            procedure_category: null,\n            completedTreatmentPlans: [],\n            incompletedTreatmentPlans: [],\n            productMargin: [],\n            loading: true\n        }\n        this.loadTreatmentPlans = this.loadTreatmentPlans.bind(this);\n        this.editTreatmentPlanData = this.editTreatmentPlanData.bind(this);\n    }\n\n    componentDidMount() {\n        this.loadTreatmentPlans();\n        this.loadProductMargin();\n    }\n\n    loadProductMargin() {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                productMargin: data,\n                loading: false\n            })\n        }\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            })\n        }\n        getAPI(PRODUCT_MARGIN, successFn, errorFn);\n    }\n\n    loadTreatmentPlans(page = 1) {\n        let incompleted = [];\n        let that = this;\n        let successFn = function (data) {\n            that.setState(function (prevState) {\n                if (data.current == 1)\n                    return {\n                        treatmentPlans: [...data.results],\n                        next: data.next,\n                        loading: false\n                    }\n                return {\n                    treatmentPlans: [...prevState.treatmentPlans, ...data.results],\n                    next: data.next,\n                    loading: false\n                }\n            })\n            data.results.forEach(function (treatmentplan) {\n                if (!treatmentplan.is_completed) {\n                    incompleted.push(treatmentplan)\n                }\n            })\n            that.setState(function (prevState) {\n                return {\n                    incompletedTreatmentPlans: [...prevState.incompletedTreatmentPlans, ...incompleted],\n                    loading: false\n                }\n            })\n        }\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            })\n\n        }\n        let apiParams = {\n            page: page,\n            practice: this.props.active_practiceId,\n            complete: true\n        };\n        if (this.props.match.params.id) {\n            apiParams.patient = this.props.match.params.id;\n        }\n        if (this.props.showAllClinic && this.props.match.params.id) {\n            delete (apiParams.practice)\n        }\n        getAPI(TREATMENTPLANS_API, successFn, errorFn, apiParams)\n    }\n\n    editTreatmentPlanData(record) {\n        this.setState({\n            editTreatmentPlan: record,\n        });\n        // console.log(\"props history\",this.props);\n        let id = this.props.match.params.id;\n        this.props.history.push(\"/patient/\" + id + \"/emr/workdone/edit\");\n\n    }\n\n    deleteTreatmentPlans(record) {\n        let that = this;\n        confirm({\n            title: 'Are you sure to delete this item?',\n            okText: 'Yes',\n            okType: 'danger',\n            cancelText: 'No',\n            onOk() {\n                let obj = {\n                    id: record.id,\n                    patient: record.patient.id,\n                    is_active: false\n                }\n\n\n                let successFn = function (data) {\n                    displayMessage(SUCCESS_MSG_TYPE, \"Completed Procedure Deleted Successfully!\");\n                    that.loadTreatmentPlans();\n                }\n                let errorFn = function () {\n\n                };\n                postAPI(interpolate(TREATMENTPLANS_API, [that.props.match.params.id], null), obj, successFn, errorFn);\n            },\n            onCancel() {\n                console.log('Cancel');\n            },\n        });\n    }\n\n    loadPDF(id) {\n        let that = this;\n        let successFn = function (data) {\n            if (data.report)\n                window.open(BACKEND_BASE_URL + data.report);\n        }\n        let errorFn = function () {\n\n        }\n        getAPI(interpolate(TREATMENTPLANS_PDF, [id]), successFn, errorFn);\n    }\n\n    render() {\n        let that = this;\n\n        const columns = [{\n            title: '',\n            key: 'is_completed',\n            render: (text, record) => (record.is_completed ?\n                <Icon type=\"check-circle\" theme=\"twoTone\" style={{marginLeft: '8px', fontSize: '20px'}}/> :\n                null)\n        }, {\n            title: 'Procedure',\n            key: 'procedure.name',\n            dataIndex: 'procedure.name',\n\n        }, {\n            title: 'Quantity',\n            dataIndex: 'quantity',\n            initialValue: (this.state.editFields ? this.state.editFields.quantity : null),\n            key: 'quantity',\n        }, {\n            title: 'Discount',\n            dataIndex: 'discount',\n            key: 'discount',\n        }, {\n            title: 'Cost per  Unit',\n            dataIndex: 'cost',\n            key: 'cost',\n        }, {\n            title: 'Notes',\n            dataIndex: 'default_notes',\n            key: 'default_notes',\n        }];\n\n        if (this.props.match.params.id) {\n            return <div>\n                <Switch>\n                    <Route exact path='/patient/:id/emr/workdone/add'\n                           render={(route) => <AddorEditDynamicCompletedTreatmentPlans {...this.state} {...that.props} {...route} loadData={this.loadTreatmentPlans}/>}/>\n                    <Route exact path='/patient/:id/emr/workdone/edit'\n                           render={(route) => (this.state.editTreatmentPlan ?\n                               <AddorEditDynamicCompletedTreatmentPlans {...this.state} {...route} {...that.props}\n                                                                        editId={this.state.editTreatmentPlan.id} loadData={this.loadTreatmentPlans}/> :\n                               <Redirect to={\"/patient/\" + this.props.match.params.id + \"/emr/workdone\"}/>)}/>\n                    <Route>\n\n                        <div>\n                            <Card\n                                bodyStyle={{padding: 0}}\n                                title={this.state.currentPatient ? this.state.currentPatient.user.first_name + \" Completed Procedures\" : \"Completed Procedures \"}\n                                extra={<Button.Group>\n                                    <Link\n                                        to={\"/patient/\" + this.props.match.params.id + \"/emr/workdone/add\"}><Button><Icon\n                                        type=\"plus\"/>Add</Button></Link>\n                                </Button.Group>}/>\n\n                            {this.state.treatmentPlans.map((treatment) => <Card bodyStyle={{padding: 0}}\n                                                                                style={{marginTop: 15}}>\n                                    <div style={{padding: 16}}>\n                                        <h4>{treatment.date ? moment(treatment.date).format('ll') : null}\n                                            <Dropdown.Button\n                                                size={\"small\"}\n                                                style={{float: 'right'}}\n                                                overlay={<Menu>\n                                                    <Menu.Item key=\"1\" onClick={() => that.editTreatmentPlanData(treatment)}\n                                                               disabled={(treatment.practice && treatment.practice.id != this.props.active_practiceId)}>\n                                                        <Icon type=\"edit\"/>\n                                                        Edit\n                                                    </Menu.Item>\n                                                    <Menu.Item key=\"2\" onClick={() => that.deleteTreatmentPlans(treatment)}\n                                                               disabled={(treatment.practice && treatment.practice.id != this.props.active_practiceId)}>\n                                                        <Icon type=\"delete\"/>\n                                                        Delete\n                                                    </Menu.Item>\n                                                    <Menu.Divider/>\n                                                    <Menu.Item key=\"3\">\n                                                        <Link to={\"/patient/\" + treatment.patient + \"/emr/timeline\"}>\n                                                            <Icon type=\"clock-circle\"/>\n                                                            &nbsp;\n                                                            Patient Timeline\n                                                        </Link>\n                                                    </Menu.Item>\n                                                </Menu>}>\n                                                <a onClick={() => this.loadPDF(treatment.id)}><Icon type=\"printer\"/></a>\n                                            </Dropdown.Button>\n                                        </h4>\n\n                                    </div>\n                                    <Table loading={this.state.loading} columns={columns}\n                                           dataSource={treatment.treatment_plans}\n                                           footer={() => treatmentFooter(treatment)}\n                                           pagination={false}\n                                           key={treatment.id}/>\n                                </Card>\n                            )}\n                            <InfiniteFeedLoaderButton loaderFunction={() => this.loadTreatmentPlans(that.state.next)}\n                                                      loading={this.state.loading}\n                                                      hidden={!this.state.next}/>\n                        </div>\n                    </Route>\n                </Switch>\n            </div>\n        }\n        else {\n            return <div>\n                <Card\n                    bodyStyle={{padding: 0}}\n                    title={this.state.currentPatient ? this.state.currentPatient.user.first_name + \" Completed Procedures\" : \"Completed Procedures \"}\n                    extra={<Button.Group>\n                        <Button onClick={() => this.props.togglePatientListModal(true)}>\n                            <Icon\n                                type=\"plus\"/>Add\n                        </Button>\n                    </Button.Group>}/>\n                {this.state.treatmentPlans.map((treatment) => <Card bodyStyle={{padding: 0}}\n                                                                    key={treatment.id}\n                                                                    style={{marginTop: 15}}>\n                        <div style={{padding: 16}}>\n                            <h4>{treatment.date ? moment(treatment.date).format('ll') : null}\n                            <Link to={\"/patient/\" + treatment.patient.id + \"/emr/workdone\"}>\n                             &nbsp;&nbsp; {treatment.patient.user?treatment.patient.user.first_name:null} (ID: {treatment.patient.custom_id?treatment.patient.custom_id:treatment.patient.id})&nbsp;\n                            </Link>\n                            <span>, {treatment.patient.gender}</span>\n                                <Dropdown.Button\n                                    size={\"small\"}\n                                    style={{float: 'right'}}\n                                    overlay={<Menu>\n                                        <Menu.Item key=\"1\" disabled={(treatment.practice && treatment.practice.id != this.props.active_practiceId)}>\n                                            <Link to={\"/patient/\" + treatment.patient.id + \"/emr/workdone/edit\"}>\n                                                <Icon type=\"edit\"/>\n                                                &nbsp;\n                                                Edit\n                                            </Link>\n                                        </Menu.Item>\n                                        <Menu.Item key=\"2\" onClick={() => that.deleteTreatmentPlans(treatment)}\n                                                   disabled={(treatment.practice && treatment.practice.id != this.props.active_practiceId)}>\n                                            <Icon type=\"delete\"/>\n                                            Delete\n                                        </Menu.Item>\n                                        <Menu.Divider/>\n                                        <Menu.Item key=\"3\">\n                                            <Link to={\"/patient/\" + treatment.patient.id + \"/emr/timeline\"}>\n                                                <Icon type=\"clock-circle\"/>\n                                                &nbsp;\n                                                Patient Timeline\n                                            </Link>\n                                        </Menu.Item>\n                                    </Menu>}>\n                                    <Icon type=\"printer\"/>\n                                </Dropdown.Button>\n                            </h4>\n\n                        </div>\n                        <Table loading={this.state.loading} columns={columns}\n                               dataSource={treatment.treatment_plans}\n                               footer={() => treatmentFooter(treatment)}\n                               pagination={false}\n                               key={treatment.id}/>\n\n                    </Card>\n                )}\n                <InfiniteFeedLoaderButton loaderFunction={() => this.loadTreatmentPlans(that.state.next)}\n                                          loading={this.state.loading}\n                                          hidden={!this.state.next}/>\n            </div>\n        }\n\n    }\n}\n\nexport default PatientCompletedProcedures;\n\nfunction treatmentFooter(presc) {\n    if (presc) {\n\n        return <div>\n            {presc.doctor ? <Tag color={presc.doctor ? presc.doctor.calendar_colour : null}>\n                <b>{\"Completed by  \" + presc.doctor.user.first_name} </b>\n            </Tag> : null}\n            {presc.practice ? <Tag style={{float: 'right'}}>\n                <Tooltip title=\"Practice Name\">\n                    <b>{presc.practice.name} </b>\n                </Tooltip>\n            </Tag> : null}\n        </div>\n    }\n    return null\n}\n","import React from \"react\";\nimport {\n    Card,\n    Row,\n    Col,\n    Form,\n    Table,\n    Divider,\n    Tabs,\n    List,\n    Button,\n    Input,\n    Select,\n    Radio,\n    InputNumber,\n    Icon,\n    Affix,\n    Popconfirm,\n    Tag\n} from 'antd';\nimport {DRUG_CATALOG, INVENTORY_ITEM_API, LABTEST_API} from \"../../../constants/api\";\nimport {displayMessage, getAPI, interpolate, postAPI, putAPI} from \"../../../utils/common\";\nimport {remove} from \"lodash\";\nimport {DURATIONS_UNIT, DOSE_REQUIRED, DRUG} from \"../../../constants/hardData\";\nimport {WARNING_MSG_TYPE} from \"../../../constants/dataKeys\";\nimport {PRESCRIPTIONS_API, PRESCRIPTION_TEMPLATE} from \"../../../constants/api\";\nimport {Link, Route, Switch} from \"react-router-dom\";\n\nconst TabPane = Tabs.TabPane;\nlet id = 0;\n\n\nclass PrescriptionTemplate extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            items: {},\n            filteredItems: {},\n            drugList: [],\n            labList: [],\n            formDrugList: [],\n            formLabList: [],\n            addInstructions: {},\n            changeDurationUnits: {},\n            addedDrugs: {},\n            addedLabs: {},\n            addTemplate: {},\n            formTemplateList: [],\n            searchStrings: {}\n\n        }\n        this.loadPrescriptionTemplate = this.loadPrescriptionTemplate.bind(this);\n        this.deletePrescriptionTemplate = this.deletePrescriptionTemplate.bind(this);\n    }\n\n    componentDidMount() {\n        this.loadDrugList();\n        this.loadLabList();\n        this.loadPrescriptionTemplate();\n    }\n\n    loadPrescriptionTemplate() {\n        var that = this;\n        let successFn = function (data) {\n            that.setState({\n                prescriptionTemplate: data.results,\n            })\n        };\n        let errorFn = function () {\n\n        };\n        console.log(\"template\", that.state.prescriptionTemplate);\n        getAPI(interpolate(PRESCRIPTION_TEMPLATE, [that.props.active_practiceId]), successFn, errorFn)\n    }\n\n    loadLabList() {\n        var that = this;\n        let successFn = function (data) {\n            that.setState({\n                labList: data.results,\n            })\n        };\n        let errorFn = function () {\n\n        };\n        getAPI(interpolate(LABTEST_API, [that.props.active_practiceId]), successFn, errorFn);\n    }\n\n    loadDrugList(page = 1) {\n        let that = this;\n        let successFn = function (data) {\n            that.setState(function (prevState) {\n                let items = {...prevState.items}\n                return {\n                    items: {...items, \"Drugs\": data.results},\n                    filteredItems: {...prevState.filteredItems, \"Drugs\": data.results}\n                }\n            })\n        }\n        let errorFn = function () {\n\n        }\n        let params = {\n            practice: this.props.active_practiceId,\n            item_type: DRUG,\n            page: page\n        };\n        if (that.state.searchStrings.Drugs) {\n            params.item_name = that.state.searchStrings.Drugs\n        }\n        getAPI(INVENTORY_ITEM_API, successFn, errorFn, params);\n    }\n\n    addDrug(item) {\n        this.setState(function (prevState) {\n            let randId = Math.random().toFixed(7);\n            if (prevState.addedDrugs[item.id]) {\n                displayMessage(WARNING_MSG_TYPE, \"Item Already Added\");\n                return false;\n            }\n            return {\n                addedDrugs: {...prevState.addedDrugs, [item.id]: true},\n                formDrugList: [...prevState.formDrugList, {\n                    ...item,\n                    _id: randId,\n                }]\n            }\n        });\n\n    }\n\n    addInstructions = (_id, option) => {\n        this.setState(function (prevState) {\n            return {addInstructions: {...prevState.addInstructions, [_id]: !!option}}\n        })\n    }\n    changeDurationUnits = (_id, option) => {\n        this.setState(function (prevState) {\n            return {changeDurationUnits: {...prevState.changeDurationUnits, [_id]: !!option}}\n        })\n    }\n    removeDrug = (_id) => {\n        this.setState(function (prevState) {\n            return {\n                formDrugList: [...remove(prevState.formDrugList, function (item) {\n                    return item._id != _id;\n                })]\n            }\n        });\n    }\n    removeLabs = (_id, item) => {\n        this.setState(function (prevState) {\n            return {\n                addedLabs: {...prevState.addedLabs, [item.id]: false},\n                formLabList: [...remove(prevState.formLabList, function (item) {\n                    return item._id != _id;\n                })]\n            }\n        });\n    }\n    addLabs = (item) => {\n        this.setState(function (prevState) {\n            let randId = Math.random().toFixed(7);\n            console.log(\"LAb state\", prevState);\n            if (prevState.addedLabs[item.id]) {\n                displayMessage(WARNING_MSG_TYPE, \"Item Already Added\");\n                return false;\n            }\n            return {\n                addedLabs: {...prevState.addedLabs, [item.id]: true},\n                formLabList: [...prevState.formLabList, {\n                    ...item,\n                    _id: randId,\n                }]\n            }\n            // console.log(\"ide\",this.state.tableFormValues);\n        });\n    };\n\n    addTemplate = (item) => {\n        this.setState(function (prevState) {\n            // console.log(\"templateData state\",prevState);\n            let randId = Math.random().toFixed(7);\n            if (prevState.addTemplate[item.id]) {\n                displayMessage(WARNING_MSG_TYPE, \"Item Already Added\");\n                return false;\n            }\n            let prevLabs = [...prevState.formLabList];\n            let prevAddedLabs = {...prevState.addedLabs};\n            if (item.labs)\n                item.labs.forEach(function (lab) {\n                    let randId = Math.random().toFixed(7);\n                    prevLabs.push({\n                        ...lab,\n                        _id: randId,\n                    });\n                    prevAddedLabs = {...prevAddedLabs, [lab.id]: true}\n                });\n\n            let prevDrugs = [...prevState.formDrugList];\n            let prevAddedDrugs = {...prevState.addedDrugs};\n            if (item.drugs)\n                item.drugs.forEach(function (drugs) {\n                    let randId = Math.random().toFixed(7);\n                    prevDrugs.push({\n                        ...drugs,\n                        _id: randId,\n                        advice_data: item.advice_data,\n                    });\n                    prevAddedDrugs = {...prevAddedDrugs, [drugs.id]: true}\n\n                })\n\n\n            return {\n                addedLabs: prevAddedLabs,\n                formLabList: prevLabs,\n                addedDrugs: prevAddedDrugs,\n                formDrugList: prevDrugs\n            }\n\n        });\n    };\n    removeTemplates = (_id, item) => {\n        this.setState(function (prevState) {\n            return {\n                addTemplate: {...prevState.addTemplate, [item.id]: false},\n                formTemplateList: [...remove(prevState.formTemplateList, function (item) {\n                    return item._id != _id;\n                })]\n            }\n        });\n    }\n    handleSubmit = (e) => {\n        let that = this;\n        e.preventDefault();\n        this.props.form.validateFields((err, values) => {\n            console.log(\"value form\", values);\n\n            if (!err) {\n\n                let reqData = {\n                    ...values,\n                    drug: [],\n                    labs: [],\n                    advice_data: [],\n                    patient: that.props.match.params.id,\n                    practice: that.props.active_practiceId,\n\n                };\n\n                that.state.formDrugList.forEach(function (item) {\n                    console.log(\"advice search\", item);\n                    item.dosage = values.does[item._id];\n                    item.duration_type = values.duration_unit[item._id];\n                    item.duration = values.duration[item._id];\n                    item.frequency = values.does_frequency[item._id];\n                    if (values.instruction) {\n                        item.instruction = values.instruction[item._id];\n                    }\n                    if (values.food_time[item._id]) {\n                        item.after_food = true;\n                        item.before_food = false;\n                    } else {\n                        item.before_food = true;\n                        item.after_food = false;\n                    }\n\n                    if (item.advice_data) {\n                        item.advice_data.map(function (advice) {\n                            reqData.advice_data.push(advice.id)\n                        })\n                    }\n                    const drugIitem = {\n                        \"inventory\": item.id,\n                        \"name\": item.name,\n                        \"dosage\": item.dosage,\n                        \"frequency\": item.frequency,\n                        \"duration\": item.duration,\n                        \"duration_type\": item.duration_type,\n                        \"instruction\": item.instruction,\n                        \"before_food\": item.before_food,\n                        \"after_food\": item.after_food,\n                        \"advice_data\": that.state.prescriptionTemplate.advice_data,\n                        \"is_active\": true,\n                    };\n                    reqData.drug.push(drugIitem);\n                });\n                that.state.formLabList.forEach(function (item) {\n                    reqData.labs.push(item.id);\n                });\n                let successFn = function (data) {\n                    // let url = '/patient/' + that.props.match.params.id + '/emr/prescriptions';\n                    that.props.history.goBack();\n                }\n                let errorFn = function () {\n\n                }\n                console.log(\"final\", reqData);\n                postAPI(interpolate(PRESCRIPTION_TEMPLATE, [that.props.active_practiceId]), reqData, successFn, errorFn);\n            }\n        });\n    }\n\n    deletePrescriptionTemplate(id) {\n        var that = this;\n        let reqData = {id: id, is_active: false};\n        let successFn = function (data) {\n            that.loadPrescriptionTemplate();\n        };\n        let errorFn = function () {\n        };\n        postAPI(interpolate(PRESCRIPTION_TEMPLATE, [that.props.active_practiceId]), reqData, successFn, errorFn);\n\n    }\n\n    handleAddFields = () => {\n        const {form} = this.props;\n        const keys = form.getFieldValue(\"keys\");\n        const nextKeys = keys.concat(id++);\n        form.setFieldsValue({\n            keys: nextKeys\n        });\n    };\n    remove = (k) => {\n        const {form} = this.props;\n        const keys = form.getFieldValue('keys');\n        if (keys.length === 1) {\n            return;\n        }\n        form.setFieldsValue({\n            keys: keys.filter(key => key !== k),\n        });\n    }\n    onChange = e => {\n        this.setState({});\n    };\n    searchValues = (type, value) => {\n        let that = this;\n        this.setState(function (prevState) {\n            let searchValues = {...prevState.searchStrings};\n            searchValues[type] = value;\n            return {searchStrings: searchValues}\n        }, function () {\n            if (type == 'Drugs')\n                that.loadDrugList();\n            else\n                that.filterValues(type);\n        });\n    }\n    filterValues = (type) => {\n        this.setState(function (prevState) {\n            let filteredItemOfGivenType = [];\n            if (prevState.items[type]) {\n                if (prevState.searchStrings[type]) {\n                    prevState.items[type].forEach(function (item) {\n                        if (item.name && item.name\n                            .toString()\n                            .toLowerCase()\n                            .includes(prevState.searchStrings[type].toLowerCase())) {\n                            filteredItemOfGivenType.push(item);\n                        }\n                    });\n                } else {\n                    filteredItemOfGivenType = prevState.items[type];\n                }\n            }\n            return {\n                filteredItems: {...prevState.filteredItems, [type]: filteredItemOfGivenType}\n            }\n        });\n    }\n\n    render() {\n        let that = this;\n        const formItemLayout = {\n            labelCol: {\n                xs: {span: 24},\n                sm: {span: 4}\n            },\n            wrapperCol: {\n                xs: {span: 24},\n                sm: {span: 12}\n            }\n        };\n        const formItemLayoutWithOutLabel = {\n            wrapperCol: {\n                xs: {span: 24, offset: 0},\n                sm: {span: 12, offset: 4}\n            }\n        };\n        const {getFieldDecorator, getFieldValue, getFieldsValue} = this.props.form;\n\n        getFieldDecorator('keys', {initialValue: []});\n        const keys = getFieldValue('keys');\n        const formItems = keys.map((k, index) => (\n            <Form.Item  {...(index === 0 ? formItemLayout : formItemLayoutWithOutLabel)}\n                        label={index === 0 ? 'Advice' : ''}\n                        required={false}\n                        key={k}\n            >\n                {getFieldDecorator(`advice_data[${k}]`, {\n                    validateTrigger: ['onChange', 'onBlur'],\n\n                })(\n                    <Input style={{width: '60%', marginRight: 8}}/>\n                )}\n                {keys.length > 1 ? (\n                    <Icon\n                        className=\"dynamic-delete-button\"\n                        type=\"minus-circle-o\"\n                        onClick={() => this.remove(k)}\n                    />\n                ) : null}\n            </Form.Item>\n        ));\n\n        const drugTableColumns = [{\n            title: 'Drug Name',\n            dataIndex: 'name',\n            key: 'name',\n            render: name => <h2>{name}</h2>\n        }, {\n            title: 'Dosage & Frequency',\n            dataIndex: 'dosage',\n            key: 'dosage',\n            render: (dosage, record) => <div><Form.Item\n                extra={<span>does(s)</span>}\n                key={`does[${record._id}]`}>\n                {getFieldDecorator(`does[${record._id}]`, {\n                        validateTrigger: ['onChange', 'onBlur'],\n\n                    },\n                    {\n                        rules: [{message: \"This field is required.\",}],\n                    })(\n                    <InputNumber min={0} size={\"small\"}/>\n                )}\n\n            </Form.Item>\n                <Form.Item\n                    key={`does_frequency[${record._id}]`}>\n                    {getFieldDecorator(`does_frequency[${record._id}]`, {\n                        validateTrigger: ['onChange', 'onBlur'],\n                        rules: [{\n                            message: \"This field is required.\",\n                        }],\n                        initialValue: 'twice daily'\n                    })(\n                        <Select size={\"small\"} onChange={() => this.changeDurationUnits(record._id, false)}>\n                            {DOSE_REQUIRED.map(item => <Select.Option\n                                value={item.value}>{item.label}</Select.Option>)}\n                        </Select>\n                    )}\n                </Form.Item>\n            </div>\n        }, {\n            title: 'Duration',\n            dataIndex: 'duration',\n            key: 'duration',\n            render: (duration, record) => <div>\n                <Form.Item\n                    key={`duration[${record._id}]`}>\n                    {getFieldDecorator(`duration[${record._id}]`, {\n                            validateTrigger: ['onChange', 'onBlur']\n                        },\n                        {\n                            rules: [{message: \"This field is required.\",}],\n                        })(\n                        <InputNumber min={0} size={\"small\"}/>\n                    )}\n                </Form.Item>\n                <Form.Item\n                    key={`duration_unit[${record._id}]`}>\n                    {getFieldDecorator(`duration_unit[${record._id}]`, {\n                        validateTrigger: ['onChange', 'onBlur'],\n                        rules: [{\n                            message: \"This field is required.\",\n                        }],\n                        initialValue: 'day(s)'\n                    })(\n                        <Select size={\"small\"} onChange={() => this.changeDurationUnits(record._id, false)}>\n                            {DURATIONS_UNIT.map(item => <Select.Option\n                                value={item.value}>{item.label}</Select.Option>)}\n                        </Select>\n                    )}\n                </Form.Item>\n            </div>\n        },\n            // {this.state.prescriptionTemplate.advice_data ? true:false},\n            {\n                title: 'Instructions',\n                dataIndex: 'instruction',\n                key: 'instruction',\n                render: (instruction, record) =>\n                    <div>\n                        {this.state.addInstructions[record._id] ?\n                            <Form.Item\n                                extra={<a onClick={() => this.addInstructions(record._id, false)}>Remove\n                                    Instructions</a>}\n                                key={`instruction[${record._id}]`}>\n                                {getFieldDecorator(`instruction[${record._id}]`, {\n                                    validateTrigger: ['onChange', 'onBlur'],\n                                    rules: [{\n                                        message: \"This field is required.\",\n                                    }],\n                                })(\n                                    <Input.TextArea min={0} placeholder={\"Instructions...\"} size={\"small\"}/>\n                                )}\n\n                            </Form.Item>\n                            : <a onClick={() => this.addInstructions(record._id, true)}>+ Add Instructions</a>}\n                    </div>\n            }, {\n                title: \"Timing\",\n                dataIndex: \"food_time\",\n                key: 'food_time',\n                render: (timing, record) => <div>\n                    <Form.Item key={`food_time[${record._id}]`}>\n                        {getFieldDecorator(`food_time[${record._id}]`)(\n                            <Radio.Group onChange={this.onChange}>\n                                <Radio value={1}>After Food</Radio>\n                                <Radio value={0}>Before Food</Radio>\n                            </Radio.Group>\n                        )}\n                    </Form.Item>\n\n                </div>\n\n            },\n\n            {\n                title: '',\n                dataIndex: 'action',\n                key: 'action',\n                render: (instructions, record) => <Form.Item>\n                    <Button icon={\"close\"} onClick={() => this.removeDrug(record._id)} type={\"danger\"} shape=\"circle\"\n                            size=\"small\"/>\n                </Form.Item>\n            }];\n        const labTablecolums = [{\n            title: 'Name',\n            dataIndex: 'name',\n            key: 'name',\n            render: (name, record) => <span>\n                <b>{name}</b>\n                </span>\n        }, {\n            title: 'Cost',\n            dataIndex: 'cost',\n            key: 'cost',\n            render: (name, record) => <span>{record.cost}</span>\n        }, {\n            title: 'Total',\n            dataIndex: 'total',\n            key: 'total',\n            render: (total, record) => <span>\n                {total}\n                <Button icon={\"close\"} onClick={() => this.removeLabs(record._id, record)} type={\"danger\"}\n                        shape=\"circle\"\n                        size=\"small\"/>\n            </span>\n        }];\n\n        return <Card title={\"Prescriptions Template\"}>\n            <Row>\n                <Col span={18}>\n                    <Form onSubmit={this.handleSubmit}>\n                        <Form.Item {...formItemLayout} label={\"Template Name\"}>\n                            {getFieldDecorator('name', {})(\n                                <Input/>\n                            )}\n                        </Form.Item>\n\n                        <Form.Item {...formItemLayout} label={\"Schedule\"}>\n                            {getFieldDecorator('schedule', {})(\n                                <InputNumber min={1}/>\n                            )}\n\n                        </Form.Item>\n                        <Table pagination={false} bordered={false} columns={drugTableColumns}\n                               dataSource={this.state.formDrugList}/>\n\n                        <Divider> Lab Test</Divider>\n                        <Table pagination={false} bordered={false} columns={labTablecolums}\n                               dataSource={this.state.formLabList}/>\n\n\n                        <Divider/>\n                        {formItems}\n                        <Form.Item {...formItemLayoutWithOutLabel}>\n                            <Button type=\"dashed\" onClick={this.handleAddFields} style={{width: '60%'}}>\n                                <Icon type=\"plus\"/> Add advice field\n                            </Button>\n                        </Form.Item>\n                        <Affix target={() => this.container}>\n                            <Button type=\"primary\" htmlType=\"submit\">\n                                Save\n                            </Button>\n                        </Affix>\n                    </Form>\n                </Col>\n                <Col span={6}>\n                    <Tabs type=\"card\">\n                        <TabPane tab=\"Drugs\" key=\"1\">\n                            <div style={{backgroundColor: '#ddd', padding: 8}}>\n                                <Input.Search key={\"Drugs\"}\n                                              placeholder={\"Search in Medicine...\"}\n                                              onChange={e => this.searchValues(\"Drugs\", e.target.value)}\n                                />\n                            </div>\n                            <List size={\"small\"}\n                                  itemLayout=\"horizontal\"\n                                  dataSource={this.state.filteredItems[\"Drugs\"]}\n                                  renderItem={item => (\n                                      <List.Item onClick={() => this.addDrug(item)}\n                                                 actions={(item.maintain_inventory ? null : [<Tag>Not Sold</Tag>])}>\n                                          <List.Item.Meta\n                                              title={item.name}\n                                          />\n                                      </List.Item>)}/>\n                        </TabPane>\n                        <TabPane tab=\"Labs\" key=\"2\">\n                            <List size={\"small\"}\n                                  itemLayout=\"horizontal\"\n                                  dataSource={this.state.labList}\n                                  renderItem={item => (\n                                      <List.Item onClick={() => this.addLabs(item)}>\n                                          <List.Item.Meta\n                                              title={item.name}/>\n                                      </List.Item>)}/>\n                        </TabPane>\n                        <TabPane tab=\"Template\" key=\"3\">\n\n                            <List size={\"small\"}\n                                  itemLayout=\"horizontal\"\n                                  dataSource={this.state.prescriptionTemplate}\n\n                                  renderItem={item => (\n                                      <List.Item onConfirm={() => that.deletePrescriptionTemplate(item.id)}>\n                                          <List.Item.Meta onClick={() => this.addTemplate(item)} title={item.name}/>\n                                          <Popconfirm title=\"Are you sure delete this item?\"\n                                                      onConfirm={() => that.deletePrescriptionTemplate(item.id)}\n                                                      okText=\"Yes\" cancelText=\"No\">\n                                              <a>Delete</a>\n                                          </Popconfirm>\n                                      </List.Item>)}/>\n                        </TabPane>\n                    </Tabs>\n                </Col>\n                <Switch>\n                    <Route exact path='/patient/:id/prescriptions/template/add'\n                           renderRoute={(route) => <PrescriptionTemplate {...this.state} {...route}/>}/>\n                </Switch>\n            </Row>\n        </Card>\n    }\n}\n\nexport default Form.create()(PrescriptionTemplate);\n","import React from \"react\";\nimport {\n    Card,\n    Row,\n    Col,\n    Form,\n    Table,\n    Divider,\n    Tabs,\n    List,\n    Button,\n    Input,\n    Select,\n    Radio,\n    InputNumber,\n    Icon,\n    Affix,\n    Popconfirm,\n    DatePicker,\n    Dropdown,\n    Menu, Tag\n} from 'antd';\nimport {DRUG_CATALOG, INVENTORY_ITEM_API, LABTEST_API, PRACTICESTAFF} from \"../../../constants/api\";\nimport {displayMessage, getAPI, interpolate, postAPI, putAPI} from \"../../../utils/common\";\nimport {remove} from \"lodash\";\nimport {DURATIONS_UNIT, DOSE_REQUIRED, DRUG} from \"../../../constants/hardData\";\nimport {DOCTORS_ROLE, WARNING_MSG_TYPE} from \"../../../constants/dataKeys\";\nimport {PRESCRIPTIONS_API, PRESCRIPTION_TEMPLATE} from \"../../../constants/api\";\nimport PrescriptionTemplate from \"./PrescriptionTemplate\";\nimport {Link, Route, Switch} from \"react-router-dom\";\nimport {loadDoctors} from \"../../../utils/clinicUtils\";\nimport moment from \"moment\";\n\nconst TabPane = Tabs.TabPane;\n\nclass AddorEditDynamicPatientPrescriptions extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            items: {},\n            filteredItems: {},\n            formDrugList: [],\n            formLabList: [],\n            addInstructions: {},\n            changeDurationUnits: {},\n            addedDrugs: {},\n            addedLabs: {},\n            addTemplate: {},\n            formTemplateList: [],\n            practiceDoctors: [],\n            selectedDoctor: {},\n            selectedDate: moment(),\n            searchStrings: {}\n        }\n        this.loadPrescriptionTemplate = this.loadPrescriptionTemplate.bind(this);\n        this.deletePrescriptionTemplate = this.deletePrescriptionTemplate.bind(this);\n    }\n\n    componentDidMount() {\n        let that = this;\n        this.loadDrugList();\n        this.loadLabList();\n        this.loadPrescriptionTemplate();\n        loadDoctors(this);\n        if (this.props.editId) {\n            this.setState(function (prevState) {\n                let drugList = [];\n                let addInstructions = {};\n                let addedLabs = {};\n                // let dosage = {};\n                // let frequency = {};\n                // let duration = {};\n                // let duration_type = {};\n                that.props.editPrescription.drugs.forEach(function (drug) {\n                    let _id = Math.random();\n                    drugList.push({...drug, _id: _id, food_time: (drug.after_food ? 1 : 0)});\n                    addInstructions[_id] = !!drug.instruction;\n                    // dosage[_id] = drug.dosage;\n                    // frequency[_id] = drug.frequency;\n                    // duration[_id] = drug.duration;\n                    // duration_type[_id] = drug.duration_type;\n                });\n                let labList = []\n                that.props.editPrescription.labs.forEach(lab => {\n                    labList.push({\n                        ...lab,\n                        _id: Math.random()\n                    });\n                    addedLabs[lab.id] = true\n                })\n\n                return {\n                    ...that.props.editPrescription,\n                    formDrugList: [...drugList],\n                    formLabList: [...labList],\n                    addInstructions: {...addInstructions},\n                    addedLabs: {...addedLabs},\n                    // dosage: {...dosage},\n                    // frequency: {...frequency},\n                    // duration: {...duration},\n                    // duration_type: {...duration_type},\n                    selectedDoctor: that.props.editPrescription.doctor,\n                    selectedDate: moment(that.props.editPrescription.date).isValid() ? moment(that.props.editPrescription.date) : moment()\n                }\n            })\n        }\n    }\n\n    selectDoctor = (doctor) => {\n        this.setState({\n            selectedDoctor: doctor\n        })\n    }\n\n    selectedDate = (date) => {\n        this.setState({\n            selectedDate: date\n        })\n    }\n\n    loadPrescriptionTemplate() {\n        var that = this;\n        let successFn = function (data) {\n            that.setState(function (prevState) {\n                let items = {...prevState.items}\n                return {\n                    items: {...items, \"Template\": data.results},\n                    filteredItems: {...prevState.filteredItems, \"Template\": data.results}\n                }\n            })\n\n        };\n        let errorFn = function () {\n\n        };\n        getAPI(interpolate(PRESCRIPTION_TEMPLATE, [that.props.active_practiceId]), successFn, errorFn)\n    }\n\n    loadLabList() {\n        var that = this;\n        let successFn = function (data) {\n            that.setState(function (prevState) {\n                let items = {...prevState.items}\n                return {\n                    items: {...items, \"Labs\": data.results},\n                    filteredItems: {...prevState.filteredItems, \"Labs\": data.results}\n                }\n            })\n        };\n        let errorFn = function () {\n\n        };\n        getAPI(interpolate(LABTEST_API, [that.props.active_practiceId]), successFn, errorFn);\n    }\n\n    loadDrugList(page = 1) {\n        let that = this;\n        let searchString = that.state.searchStrings.Drugs;\n        let successFn = function (data) {\n            if (searchString == that.state.searchStrings.Drugs)\n                that.setState(function (prevState) {\n                    let items = {...prevState.items}\n                    return {\n                        items: {...items, \"Drugs\": data.results},\n                        filteredItems: {...prevState.filteredItems, \"Drugs\": data.results}\n                    }\n                })\n        }\n        let errorFn = function () {\n\n        }\n        let params = {\n            practice: this.props.active_practiceId,\n            item_type: DRUG,\n            page: page\n        };\n        if (searchString) {\n            params.item_name = searchString\n        }\n        getAPI(INVENTORY_ITEM_API, successFn, errorFn, params);\n    }\n\n\n    addDrug(item) {\n        this.setState(function (prevState) {\n            let randId = Math.random().toFixed(7);\n            return {\n                addedDrugs: {...prevState.addedDrugs, [item.id]: true},\n                formDrugList: [{\n                    ...item,\n                    _id: randId,\n                }, ...prevState.formDrugList]\n            }\n        });\n\n    }\n\n    addInstructions = (_id, option) => {\n        this.setState(function (prevState) {\n            return {addInstructions: {...prevState.addInstructions, [_id]: !!option}}\n        })\n    }\n    changeDurationUnits = (_id, option) => {\n        this.setState(function (prevState) {\n            return {changeDurationUnits: {...prevState.changeDurationUnits, [_id]: !!option}}\n        })\n    }\n    removeDrug = (_id) => {\n        this.setState(function (prevState) {\n            return {\n                formDrugList: [...remove(prevState.formDrugList, function (item) {\n                    return item._id != _id;\n                })]\n            }\n        });\n    }\n    removeLabs = (_id, item) => {\n        this.setState(function (prevState) {\n            return {\n                addedLabs: {...prevState.addedLabs, [item.id]: false},\n                formLabList: [...remove(prevState.formLabList, function (item) {\n                    return item._id != _id;\n                })]\n            }\n        });\n    }\n    addLabs = (item) => {\n        this.setState(function (prevState) {\n            let randId = Math.random().toFixed(7);\n            if (prevState.addedLabs[item.id]) {\n                displayMessage(WARNING_MSG_TYPE, \"Item Already Added\");\n                return false;\n            }\n            return {\n                addedLabs: {...prevState.addedLabs, [item.id]: true},\n                formLabList: [...prevState.formLabList, {\n                    ...item,\n                    _id: randId,\n                }]\n            }\n        });\n    };\n\n    addTemplate = (item) => {\n        this.setState(function (prevState) {\n            if (prevState.addTemplate[item.id]) {\n                displayMessage(WARNING_MSG_TYPE, \"Item Already Added\");\n                return false;\n            }\n            let prevLabs = [...prevState.formLabList];\n            let prevAddedLabs = {...prevState.addedLabs};\n            item.labs.forEach(function (lab) {\n                let randId = Math.random().toFixed(7);\n                prevLabs.push({\n                    ...lab,\n                    _id: randId,\n                });\n                prevAddedLabs = {...prevAddedLabs, [lab.id]: true}\n            });\n\n            let prevDrugs = [...prevState.formDrugList];\n            let prevAddedDrugs = {...prevState.addedDrugs};\n            item.drugs.forEach(function (drugs) {\n                let randId = Math.random().toFixed(7);\n                prevDrugs.push({\n                    ...drugs,\n                    _id: randId,\n                    advice_data: item.advice_data,\n                });\n                prevAddedLabs = {...prevAddedDrugs, [drugs.id]: true}\n\n            })\n\n\n            return {\n                addedLabs: prevAddedLabs,\n                formLabList: prevLabs,\n                addedDrugs: prevAddedDrugs,\n                formDrugList: prevDrugs\n            }\n\n        });\n    };\n    removeTemplates = (_id, item) => {\n        this.setState(function (prevState) {\n            return {\n                addTemplate: {...prevState.addTemplate, [item.id]: false},\n                formTemplateList: [...remove(prevState.formTemplateList, function (item) {\n                    return item._id != _id;\n                })]\n            }\n        });\n    }\n    handleSubmit = (e) => {\n        let that = this;\n        e.preventDefault();\n        this.props.form.validateFields((err, values) => {\n            if (!err) {\n                let reqData = {\n                    drugs: [],\n                    labs: [],\n                    patient: parseInt(that.props.match.params.id),\n                    practice: that.props.active_practiceId,\n                    doctor: that.state.selectedDoctor ? that.state.selectedDoctor.id : null,\n                    date: that.state.selectedDate ? that.state.selectedDate.format('YYYY-MM-DD') : null,\n                    advice_data: []\n                };\n                if (that.props.editId) {\n                    reqData.id = that.props.editId;\n                }\n                that.state.formDrugList.forEach(function (item) {\n                    item.dosage = values.dosage[item._id];\n                    item.duration_type = values.duration_type[item._id];\n                    item.duration = values.duration[item._id];\n                    item.frequency = values.frequency[item._id];\n                    if (values.instruction) {\n                        item.instruction = values.instruction[item._id];\n                    }\n                    if (values.food_time[item._id]) {\n                        item.after_food = true;\n                        item.before_food = false;\n                    } else {\n                        item.before_food = true;\n                        item.after_food = false;\n                    }\n\n                    // if (item.advice_data) {\n                    //     item.advice_data.map(function (advice) {\n                    //         reqData.advice_data.push(advice.id)\n                    //     })\n                    // }\n                    const drugItem = {\n                        \"inventory\": item.id,\n                        \"name\": item.name,\n                        \"dosage\": item.dosage,\n                        \"frequency\": item.frequency,\n                        \"duration_type\": item.duration_type,\n                        \"duration\": item.duration,\n                        \"instruction\": item.instruction,\n                        \"before_food\": item.before_food,\n                        \"after_food\": item.after_food,\n                        \"is_active\": true,\n                    };\n                    reqData.drugs.push(drugItem);\n                    console.log(\"item drug\", item);\n                });\n                that.state.formLabList.forEach(function (item) {\n                    reqData.labs.push(item.id);\n                });\n                let successFn = function (data) {\n                    if (that.props.loadData)\n                        that.props.loadData();\n                    let url = '/patient/' + that.props.match.params.id + '/emr/prescriptions';\n                    that.props.history.push(url);\n                }\n                let errorFn = function () {\n\n                }\n                postAPI(interpolate(PRESCRIPTIONS_API, [that.props.match.params.id]), reqData, successFn, errorFn);\n            } else {\n                console.log(err);\n            }\n        });\n    }\n\n    deletePrescriptionTemplate(id) {\n        var that = this;\n        let reqData = {id: id, is_active: false};\n        let successFn = function (data) {\n            that.loadPrescriptionTemplate();\n        };\n        let errorFn = function () {\n        };\n        postAPI(interpolate(PRESCRIPTION_TEMPLATE, [that.props.active_practiceId]), reqData, successFn, errorFn);\n\n    }\n\n    onChange = e => {\n        this.setState({});\n    };\n    searchValues = (type, value) => {\n        let that = this;\n        this.setState(function (prevState) {\n            let searchValues = {...prevState.searchStrings};\n            searchValues[type] = value;\n            return {searchStrings: searchValues}\n        }, function () {\n            if (type == 'Drugs')\n                that.loadDrugList();\n            else\n                that.filterValues(type);\n        });\n    }\n    filterValues = (type) => {\n        this.setState(function (prevState) {\n            let filteredItemOfGivenType = [];\n            if (prevState.items[type]) {\n                if (prevState.searchStrings[type]) {\n                    prevState.items[type].forEach(function (item) {\n                        if (item.name && item.name\n                            .toString()\n                            .toLowerCase()\n                            .includes(prevState.searchStrings[type].toLowerCase())) {\n                            filteredItemOfGivenType.push(item);\n                        }\n                    });\n                } else {\n                    filteredItemOfGivenType = prevState.items[type];\n                }\n            }\n            return {\n                filteredItems: {...prevState.filteredItems, [type]: filteredItemOfGivenType}\n            }\n        });\n    }\n\n    render() {\n        let that = this;\n        const {getFieldDecorator, getFieldValue, getFieldsValue} = this.props.form;\n        const drugTableColumns = [{\n            title: 'Medicine Name',\n            dataIndex: 'name',\n            key: 'name',\n            render: name => <h2>{name}</h2>\n        }, {\n            title: 'Dosage & Frequency',\n            dataIndex: 'dosage',\n            key: 'dosage',\n            render: (dosage, record) => <div>\n                <Form.Item\n                    extra={<span>does(s)</span>}\n                    key={`dosage[${record._id}]`}>\n                    {getFieldDecorator(`dosage[${record._id}]`, {\n                        validateTrigger: ['onChange', 'onBlur'],\n                        rules: [{message: \"This field is required.\",}],\n                        initialValue: record.dosage,\n                        min: 0\n                    })(\n                        <InputNumber size={\"small\"}/>\n                    )}\n                </Form.Item>\n                <Form.Item\n                    key={`frequency[${record._id}]`}>\n                    {getFieldDecorator(`frequency[${record._id}]`, {\n                        validateTrigger: ['onChange', 'onBlur'],\n                        rules: [{\n                            message: \"This field is required.\",\n                        }],\n                        initialValue: record.frequency || DOSE_REQUIRED[0].value\n                    })(\n                        <Select size={\"small\"} onChange={() => this.changeDurationUnits(record._id, false)}>\n                            {DOSE_REQUIRED.map(item => <Select.Option\n                                value={item.value}>{item.label}</Select.Option>)}\n                        </Select>\n                    )}\n                </Form.Item>\n            </div>\n        }, {\n            title: 'Duration',\n            dataIndex: 'duration',\n            key: 'duration',\n            render: (duration, record) => <div>\n                <Form.Item\n                    key={`duration[${record._id}]`}>\n                    {getFieldDecorator(`duration[${record._id}]`, {\n                        validateTrigger: ['onChange', 'onBlur'],\n                        rules: [{message: \"This field is required.\",}],\n                        initialValue: record.duration,\n                        min: 0\n                    })(\n                        <InputNumber size={\"small\"}/>\n                    )}\n                </Form.Item>\n                <Form.Item\n                    key={`duration_type[${record._id}]`}>\n                    {getFieldDecorator(`duration_type[${record._id}]`, {\n                        validateTrigger: ['onChange', 'onBlur'],\n                        rules: [{\n                            message: \"This field is required.\",\n                        }],\n                        initialValue: record.duration_type || DURATIONS_UNIT[0].value\n                    })(\n                        <Select size={\"small\"} onChange={() => this.changeDurationUnits(record._id, false)}>\n                            {DURATIONS_UNIT.map(item => <Select.Option\n                                value={item.value}>{item.label}</Select.Option>)}\n                        </Select>\n                    )}\n                </Form.Item>\n            </div>\n        }, {\n            title: 'Instructions',\n            dataIndex: 'instruction',\n            key: 'instruction',\n            render: (instruction, record) =>\n                <div>\n                    {this.state.addInstructions[record._id] ?\n                        <Form.Item\n                            extra={<a onClick={() => this.addInstructions(record._id, false)}>Remove\n                                Instructions</a>}\n                            key={`instruction[${record._id}]`}>\n                            {getFieldDecorator(`instruction[${record._id}]`, {\n                                validateTrigger: ['onChange', 'onBlur'],\n                                rules: [{\n                                    message: \"This field is required.\",\n                                }],\n                                initialValue: record.instruction\n                            })(\n                                <Input.TextArea placeholder={\"Instructions...\"} size={\"small\"}/>\n                            )}\n\n                        </Form.Item>\n                        : <a onClick={() => this.addInstructions(record._id, true)}>+ Add Instructions</a>}\n                </div>\n        }, {\n            title: \"Timing\",\n            dataIndex: \"food_time\",\n            key: 'food_time',\n            render: (timing, record) => <div>\n                <Form.Item key={`food_time[${record._id}]`}>\n                    {getFieldDecorator(`food_time[${record._id}]`, {\n                        initialValue: record.food_time || 0\n                    })(\n                        <Radio.Group onChange={this.onChange}>\n                            <Radio value={1}>after</Radio>\n                            <Radio value={0}>before</Radio>\n                        </Radio.Group>\n                    )}\n                </Form.Item>\n\n            </div>\n\n        }, {\n            title: '',\n            dataIndex: 'action',\n            key: 'action',\n            render: (instructions, record) => <Form.Item>\n                <Button icon={\"close\"} onClick={() => this.removeDrug(record._id)} type={\"danger\"} shape=\"circle\"\n                        size=\"small\"/>\n            </Form.Item>\n        }];\n        const labTablecolums = [{\n            title: 'Name',\n            dataIndex: 'name',\n            key: 'name',\n            render: (name, record) => <span>\n                <b>{name}</b>\n                </span>\n        }, {\n            title: 'Cost',\n            dataIndex: 'cost',\n            key: 'cost',\n            render: (name, record) => <span>{record.cost}</span>\n        }, {\n            title: 'Total',\n            dataIndex: 'total',\n            key: 'total',\n            render: (total, record) => <span>\n                {total}\n                <Button icon={\"close\"} onClick={() => this.removeLabs(record._id, record)} type={\"danger\"}\n                        shape=\"circle\"\n                        size=\"small\"/>\n            </span>\n        }];\n\n        return <Card title={\"Prescriptions\"}>\n            <Row>\n                <Col span={18}>\n                    <Form onSubmit={this.handleSubmit}>\n                        <Table pagination={false} bordered={false} columns={drugTableColumns}\n                               dataSource={this.state.formDrugList}/>\n\n                        <Divider> Lab Test</Divider>\n                        <Table pagination={false} bordered={false} columns={labTablecolums}\n                               dataSource={this.state.formLabList}/>\n\n                        <Affix offsetBottom={0}>\n                            <Card>\n                                <span>by &nbsp;&nbsp;</span>\n                                <Dropdown placement=\"topCenter\" overlay={<Menu>\n                                    {this.state.practiceDoctors.map(doctor =>\n                                        <Menu.Item key=\"0\">\n                                            <a onClick={() => this.selectDoctor(doctor)}>{doctor.user.first_name}</a>\n                                        </Menu.Item>)}\n                                </Menu>} trigger={['click']}>\n                                    <a className=\"ant-dropdown-link\" href=\"#\">\n                                        <b>\n                                            {this.state.selectedDoctor.user ? this.state.selectedDoctor.user.first_name : 'No DOCTORS Found'}\n                                        </b>\n                                    </a>\n                                </Dropdown>\n                                <span> &nbsp;&nbsp;on&nbsp;&nbsp;</span>\n                                <DatePicker value={this.state.selectedDate}\n                                            onChange={(value) => this.selectedDate(value)} format={\"DD-MM-YYYY\"}/>\n\n                                <Button type=\"primary\" htmlType=\"submit\" style={{margin: 5, float: 'right'}}>\n                                    Save\n                                </Button>\n                                {that.props.history ?\n                                    <Button style={{margin: 5, float: 'right'}}\n                                            onClick={() => that.props.history.goBack()}>\n                                        Cancel\n                                    </Button> : null}\n                            </Card>\n                        </Affix>\n                    </Form>\n                </Col>\n                <Col span={6}>\n                    <Tabs type=\"card\">\n                        <TabPane tab=\"Medicine\" key=\"1\">\n                            <div style={{backgroundColor: '#ddd', padding: 8}}>\n                                <Input.Search key={\"Drugs\"}\n                                              placeholder={\"Search in Medicine...\"}\n                                              onChange={e => this.searchValues(\"Drugs\", e.target.value)}\n                                />\n                            </div>\n                            <List size={\"small\"}\n                                  itemLayout=\"horizontal\"\n                                  dataSource={this.state.filteredItems[\"Drugs\"]}\n                                  renderItem={item => (\n                                      <List.Item onClick={() => this.addDrug(item)}\n                                                 actions={(item.maintain_inventory ? null : [<Tag>Not Sold</Tag>])}>\n                                          <List.Item.Meta\n                                              title={item.name}\n                                          />\n                                      </List.Item>)}/>\n                        </TabPane>\n                        <TabPane tab=\"Labs\" key=\"2\">\n                            <div style={{backgroundColor: '#ddd', padding: 8}}>\n                                <Input.Search key={\"Labs\"}\n                                              placeholder={\"Search in Labs...\"}\n                                              onChange={e => this.searchValues(\"Labs\", e.target.value)}\n                                />\n                            </div>\n                            <List size={\"small\"}\n                                  itemLayout=\"horizontal\"\n                                  dataSource={this.state.filteredItems[\"Labs\"]}\n                                  renderItem={item => (\n                                      <List.Item onClick={() => this.addLabs(item)}>\n                                          <List.Item.Meta\n                                              title={item.name}/>\n                                      </List.Item>)}/>\n                        </TabPane>\n                        <TabPane tab=\"Template\" key=\"3\">\n                            <div>\n                                <Link to={\"/patient/\" + this.props.match.params.id + \"/prescriptions/template/add\"}>\n                                    <Button type=\"primary\" block size={'small'}>\n                                        <Icon type=\"plus\"/>&nbsp;Add Template\n                                    </Button>\n                                </Link>\n                            </div>\n                            <Divider style={{margin: 0}}/>\n                            <div style={{backgroundColor: '#ddd', padding: 8}}>\n                                <Input.Search key={\"Template\"}\n                                              placeholder={\"Search in Template...\"}\n                                              onChange={e => this.searchValues(\"Template\", e.target.value)}\n                                />\n                            </div>\n                            <List size={\"small\"}\n                                  itemLayout=\"horizontal\"\n                                  dataSource={this.state.filteredItems[\"Template\"]}\n                                  renderItem={item => (\n                                      <List.Item onConfirm={() => that.deletePrescriptionTemplate(item.id)}>\n                                          <List.Item.Meta onClick={() => this.addTemplate(item)} title={item.name}/>\n                                          <Popconfirm title=\"Are you sure delete this item?\"\n                                                      onConfirm={() => that.deletePrescriptionTemplate(item.id)}\n                                                      okText=\"Yes\" cancelText=\"No\">\n                                              <a>Delete</a>\n                                          </Popconfirm>\n                                      </List.Item>)}/>\n                        </TabPane>\n                    </Tabs>\n                </Col>\n                <Switch>\n                    <Route exact path='/patient/:id/prescriptions/template/add'\n                           render={(route) => <PrescriptionTemplate {...this.state} {...route}/>}/>\n                </Switch>\n            </Row>\n        </Card>\n    }\n}\n\nexport default Form.create()(AddorEditDynamicPatientPrescriptions);\n","import React from \"react\";\nimport {\n    Table,\n    Button,\n    Card,\n    Icon,\n    Tag, Menu,\n    Dropdown, Modal, Tooltip, Spin, Row\n} from \"antd\";\nimport {Link} from \"react-router-dom\";\nimport {\n    PRESCRIPTIONS_API,\n    DRUG_CATALOG,\n    PATIENT_PROFILE,\n    PATIENTS_LIST,\n    PRESCRIPTION_PDF\n} from \"../../../constants/api\";\nimport {getAPI, interpolate, displayMessage, postAPI, putAPI} from \"../../../utils/common\";\nimport moment from \"moment\";\nimport {Redirect, Switch, Route} from \"react-router\";\nimport AddorEditDynamicPatientPrescriptions from \"./AddorEditDynamicPatientPrescriptions\";\nimport InfiniteFeedLoaderButton from \"../../common/InfiniteFeedLoaderButton\";\nimport {BACKEND_BASE_URL} from \"../../../config/connect\";\n\nconst confirm = Modal.confirm;\n\nclass PatientPrescriptions extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            currentPatient: this.props.currentPatient,\n            active_practiceId: this.props.active_practiceId,\n            prescription: [],\n            drug_catalog: null,\n            editPrescription: null,\n            loading: true\n        }\n        this.loadPrescriptions = this.loadPrescriptions.bind(this);\n        this.loadDrugCatalog = this.loadDrugCatalog.bind(this);\n        this.editPrescriptionData = this.editPrescriptionData.bind(this);\n        this.deletePrescriptions = this.deletePrescriptions.bind(this);\n\n    }\n\n    componentDidMount() {\n        // if (this.props.match.params.id) {\n        this.loadPrescriptions();\n        this.loadDrugCatalog();\n        // }\n\n    }\n\n    loadPrescriptions(page = 1) {\n        let that = this;\n        this.setState({\n            loading: true\n        })\n        let successFn = function (data) {\n            that.setState({\n                prescription: data.results,\n                nextPrescriptionPage: data.next,\n                loading: false\n            })\n        }\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            })\n\n        }\n        let apiParams = {\n            page: page,\n            practice: this.props.active_practiceId\n        };\n        if (this.props.match.params.id) {\n            apiParams.patient = this.props.match.params.id;\n        }\n        if (this.props.showAllClinic && this.props.match.params.id) {\n            delete (apiParams.practice)\n        }\n        getAPI(PRESCRIPTIONS_API, successFn, errorFn, apiParams)\n    }\n\n    loadPDF(id) {\n        let that = this;\n        let successFn = function (data) {\n            if (data.report)\n                window.open(BACKEND_BASE_URL + data.report);\n        }\n        let errorFn = function () {\n\n        }\n        getAPI(interpolate(PRESCRIPTION_PDF, [id]), successFn, errorFn);\n    }\n\n\n    loadDrugCatalog() {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                drug_catalog: data,\n            })\n\n        }\n        let errorFn = function () {\n            that.setState({})\n\n        }\n        getAPI(interpolate(DRUG_CATALOG, [this.props.active_practiceId]), successFn, errorFn)\n    }\n\n    editPrescriptionData(record) {\n        let that = this;\n        this.setState({\n            editPrescription: record,\n        }, function () {\n            that.props.history.push(\"/patient/\" + record.patient + \"/emr/prescriptions/edit\")\n        });\n\n\n    }\n\n    deletePrescriptions(record) {\n        let that = this;\n        confirm({\n            title: 'Are you sure to delete this item?',\n            okText: 'Yes',\n            okType: 'danger',\n            cancelText: 'No',\n            onOk() {\n                let reqData = {\"id\": record.id, patient: record.patient, is_active: false};\n                let successFn = function (data) {\n                    that.loadPrescriptions();\n                }\n                let errorFn = function () {\n                }\n                postAPI(interpolate(PRESCRIPTIONS_API, [that.props.match.params.id]), reqData, successFn, errorFn);\n            },\n            onCancel() {\n                console.log('Cancel');\n            },\n        });\n    }\n\n\n    render() {\n        const drugs = {}\n        if (this.state.drug_catalog) {\n\n            this.state.drug_catalog.forEach(function (drug) {\n                drugs[drug.id] = (drug.name + \",\" + drug.strength)\n            })\n        }\n        let that = this;\n        const columns = [{\n            title: 'Drug',\n            key: 'name',\n            dataIndex: 'name',\n        }, {\n            title: 'Frequency',\n            dataIndex: 'frequency',\n            key: 'frequency',\n            render: (frequency, record) => <span>{record.dosage}&nbsp;{record.frequency}</span>\n        }, {\n            title: 'Duration',\n            dataIndex: 'duration',\n            key: 'duration',\n            render: (duration, record) => <span>{duration}&nbsp;{record.duration_type}</span>\n        }, {\n            title: 'Instruction',\n            dataIndex: 'instruction',\n            key: 'instruction',\n            render: (instruction, record) => <span>\n                    {record.before_food ? <Tag>before food </Tag> : null}\n                {record.after_food ? <Tag>after food</Tag> : null}\n                {instruction}\n                </span>\n        }];\n\n        if (this.props.match.params.id) {\n            return <div><Switch>\n                <Route exact path='/patient/:id/emr/prescriptions/add'\n                       render={(route) => <AddorEditDynamicPatientPrescriptions {...this.state} {...this.props}\n                                                                                loadData={this.loadPrescriptions}\n                                                                                {...route}/>}/>\n                <Route exact path='/patient/:id/emr/prescriptions/edit'\n                       render={(route) => (that.state.editPrescription ?\n                           <AddorEditDynamicPatientPrescriptions {...this.state} {...route} {...this.props}\n                                                                 loadData={this.loadPrescriptions}\n                                                                 editId={that.state.editPrescription.id}/> :\n                           <Redirect to={\"/patient/\" + that.props.match.params.id + \"/emr/prescriptions\"}/>)}/>\n                <Route>\n                    <div>\n                        <Card\n                            bodyStyle={{padding: 0}}\n                            title={this.state.currentPatient ? this.state.currentPatient.user.first_name + \" Prescriptions\" : \"Prescriptions\"}\n                            extra={<Button.Group style={{float: 'right'}}>\n                                <Link to={\"/patient/\" + this.props.match.params.id + \"/emr/prescriptions/add\"}>\n                                    <Button type={\"primary\"}><Icon type=\"plus\"/>Add</Button>\n                                </Link>\n                            </Button.Group>}/>\n\n                        {this.state.prescription.map((presc) => <div>\n                            <Card style={{marginTop: 10}}\n                                  bodyStyle={{padding: 0}}\n                                  title={<small>{presc.date ? moment(presc.date).format('ll') : null}</small>}\n                                  extra={<Dropdown.Button\n                                      size={\"small\"}\n                                      style={{float: 'right'}}\n                                      overlay={<Menu>\n                                          <Menu.Item key=\"1\" onClick={() => that.editPrescriptionData(presc)}\n                                                     disabled={(presc.practice && presc.practice.id != that.props.active_practiceId)}>\n                                              <Icon type=\"edit\"/>\n                                              Edit\n                                          </Menu.Item>\n                                          <Menu.Item key=\"2\" onClick={() => that.deletePrescriptions(presc)}\n                                                     disabled={(presc.practice && presc.practice.id != that.props.active_practiceId)}>\n                                              <Icon type=\"delete\"/>\n                                              Delete\n                                          </Menu.Item>\n                                          <Menu.Divider/>\n                                          <Menu.Item key=\"3\">\n                                              <Link to={\"/patient/\" + presc.patient + \"/emr/timeline\"}>\n                                                  <Icon type=\"clock-circle\"/>\n                                                  &nbsp;\n                                                  Patient Timeline\n                                              </Link>\n                                          </Menu.Item>\n                                      </Menu>}>\n                                      <a onClick={() => this.loadPDF(presc.id)}><Icon type=\"printer\"/></a>\n                                  </Dropdown.Button>}>\n                                <Table columns={columns} dataSource={presc.drugs} pagination={false}\n                                       footer={() => prescriptonFooter(presc)}\n                                       key={presc.id}/>\n                            </Card>\n                        </div>)}\n                        <Spin spinning={this.state.loading}>\n                            <Row>\n                            </Row>\n                        </Spin>\n                        <InfiniteFeedLoaderButton loading={this.state.loading}\n                                                  loaderFunction={() => this.loadPrescriptions(this.state.nextPrescriptionPage)}\n                                                  hidden={!this.state.nextPrescriptionPage}/>\n                    </div>\n                </Route>\n            </Switch>\n\n            </div>\n        }\n        else {\n            return <div>\n                <Card\n                    bodyStyle={{padding: 0}}\n                    title={this.state.currentPatient ? this.state.currentPatient.user.first_name + \" Prescriptions\" : \"Prescriptions\"}\n                    extra={<Button.Group style={{float: 'right'}}>\n                        <Button type={\"primary\"} onClick={() => this.props.togglePatientListModal(true)}>\n                            <Icon type=\"plus\"/>Add\n                        </Button>\n                    </Button.Group>}/>\n                {this.state.prescription.map((presc) => <div key={presc.id}>\n                    <Card style={{marginTop: 10,}}\n                          bodyStyle={{padding: 0}}\n                          title={<small>{presc.date ? moment(presc.date).format('ll') : null}\n                              <Link to={\"/patient/\" + presc.patient.id + \"/emr/prescriptions\"}>\n                                  &nbsp;&nbsp; {presc.patient.user ? presc.patient.user.first_name : null} (ID: {presc.patient.custom_id?presc.patient.custom_id:presc.patient.id})&nbsp;\n                              </Link>\n                              <span>, {presc.patient.gender}</span>\n                          </small>}\n                          extra={<Dropdown.Button\n                              size={\"small\"}\n                              style={{float: 'right'}}\n                              overlay={<Menu>\n                                  <Menu.Item key=\"1\" onClick={() => that.editPrescriptionData(presc)}\n                                             disabled={(presc.practice && presc.practice.id != that.props.active_practiceId)}>\n                                      <Icon type=\"edit\"/>\n                                      Edit\n                                  </Menu.Item>\n                                  <Menu.Item key=\"2\" onClick={() => that.deletePrescriptions(presc)}\n                                             disabled={(presc.practice && presc.practice.id != that.props.active_practiceId)}>\n                                      <Icon type=\"delete\"/>\n                                      Delete\n                                  </Menu.Item>\n                                  <Menu.Divider/>\n                                  <Menu.Item key=\"3\">\n                                      <Link to={\"/patient/\" + presc.patient + \"/emr/timeline\"}>\n                                          <Icon type=\"clock-circle\"/>\n                                          &nbsp;\n                                          Patient Timeline\n                                      </Link>\n                                  </Menu.Item>\n                              </Menu>}>\n                              <a onClick={() => this.loadPDF(presc.id)}><Icon type=\"printer\"/></a>\n                          </Dropdown.Button>}>\n                        <Table columns={columns} dataSource={presc.drugs} pagination={false}\n                               footer={() => prescriptonFooter(presc)}\n                               key={presc.id}/>\n                    </Card></div>)}\n                <Spin spinning={this.state.loading}>\n                    <Row>\n                    </Row>\n                </Spin>\n                <InfiniteFeedLoaderButton loading={this.state.loading}\n                                          loaderFunction={() => this.loadPrescriptions(this.state.nextPrescriptionPage)}\n                                          hidden={!this.state.nextPrescriptionPage}/>\n            </div>\n        }\n\n    }\n}\n\nexport default PatientPrescriptions;\n\nfunction prescriptonFooter(presc) {\n    if (presc) {\n\n        return <div>\n            {presc.doctor ? <Tooltip title=\"Doctor\"><Tag color={presc.doctor ? presc.doctor.calendar_colour : null}>\n                <b>{\"prescribed by  \" + presc.doctor.user.first_name} </b>\n            </Tag></Tooltip> : null}\n            {presc.practice ? <Tag style={{float: 'right'}}>\n                <Tooltip title=\"Practice Name\">\n                    <b>{presc.practice.name} </b>\n                </Tooltip>\n            </Tag> : null}\n            {presc.labs.length ? <div>\n                +{presc.labs.length}&nbsp;Lab Orders\n                {/*<Divider style={{margin:0}}/>*/}\n            </div> : null}\n        </div>\n    }\n    return null\n}\n\nfunction prescriptionHeader(presc) {\n    if (presc) {\n        return <span>{presc.date ? moment(presc.date).format('lll') : null}</span>\n    }\n    return null;\n}\n","import React from \"react\";\nimport {\n    Card,\n    Row,\n    Form,\n    Col,\n    List,\n    Button,\n    Table,\n    InputNumber,\n    Input,\n    Icon,\n    Affix,\n    Dropdown,\n    Menu,\n    DatePicker\n} from 'antd';\nimport {displayMessage, getAPI, interpolate, postAPI} from \"../../../utils/common\";\nimport {PRACTICESTAFF, PROCEDURE_CATEGORY, TREATMENTPLANS_API} from \"../../../constants/api\";\nimport {remove} from 'lodash';\nimport {Redirect} from 'react-router-dom';\nimport {DOCTORS_ROLE} from \"../../../constants/dataKeys\";\nimport moment from \"moment\";\nimport {loadDoctors} from \"../../../utils/clinicUtils\";\n\n\nclass AddorEditDynamicTreatmentPlans extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            loadingProcedures: true,\n            procedure_category: [],\n            tableFormValues: [],\n            addNotes: {},\n            practiceDoctors: [],\n            selectedDoctor: {},\n            selectedDate: moment()\n        }\n    }\n\n    componentDidMount() {\n        if (this.props.editId) {\n            this.setState(function (prevState) {\n                let tableValues = [];\n                this.props.editTreatmentPlan.treatment_plans.forEach(function (treatment) {\n                    let randId = Math.random().toFixed(7);\n                    tableValues.push({\n                        ...treatment,\n                        ...treatment.procedure,\n                        _id: randId,\n                    })\n                });\n                return {\n                    ...this.props.editTreatmentPlan,\n                    tableFormValues: tableValues,\n                    selectedDate: moment(this.props.editTreatmentPlan.date),\n                    selectedDoctor: this.props.editTreatmentPlan.doctor\n                }\n            })\n        }\n        this.loadProcedures();\n        loadDoctors(this);\n    }\n\n    calculateItem = (_id) => {\n        const {getFieldsValue} = this.props.form;\n        console.log(getFieldsValue());\n        this.setState(function (prevState) {\n            let newtableFormValues = [...prevState.tableFormValues];\n            newtableFormValues.forEach(function (item) {\n\n            });\n        });\n    }\n    addNotes = (_id, option) => {\n        this.setState(function (prevState) {\n            return {addNotes: {...prevState.addNotes, [_id]: !!option}}\n        })\n    }\n    removeTreatment = (_id) => {\n        this.setState(function (prevState) {\n            return {\n                tableFormValues: [...remove(prevState.tableFormValues, function (item) {\n                    return item._id != _id;\n                })]\n            }\n        });\n    }\n    add = (item) => {\n        let that = this;\n        this.setState(function (prevState) {\n            let randId = Math.random().toFixed(7);\n            return {\n                addNotes: {...prevState.addNotes, [randId]: !!item.default_notes},\n                tableFormValues: [{\n                    ...item,\n                    _id: randId,\n                },...prevState.tableFormValues]\n            }\n        }, function () {\n            // if (that.bottomPoint)\n            //     that.bottomPoint.scrollIntoView({behavior: 'smooth'});\n        });\n    };\n\n    loadProcedures() {\n        var that = this;\n        let params = {};\n        if (this.state.searchString) {\n            params.name = this.state.searchString;\n        }\n        that.setState({\n            loadingProcedures: true\n        })\n        let successFn = function (data) {\n            if (!params.name || that.state.searchString == params.name)\n                that.setState({\n                    // procedure_category: data.results,\n                    loadingProcedures: false,\n                    filteredItems: data.results,\n                })\n        };\n        let errorFn = function () {\n            that.setState({\n                loadingProcedures: false\n            })\n        };\n\n        getAPI(interpolate(PROCEDURE_CATEGORY, [this.props.active_practiceId]), successFn, errorFn, params);\n    }\n\n    selectDoctor = (doctor) => {\n        this.setState({\n            selectedDoctor: doctor\n        })\n    }\n    selectedDate = (date) => {\n        this.setState({\n            selectedDate: date\n        })\n    }\n    handleSubmit = (e) => {\n        let that = this;\n        e.preventDefault();\n        this.props.form.validateFields((err, values) => {\n            if (!err) {\n                console.log('Received values of form: ', values);\n                let reqData = {\n                    treatment_plans: [],\n                    patient: that.props.match.params.id,\n                    \"doctor\": that.state.selectedDoctor.id,\n                    \"date\": that.state.selectedDate && moment(that.state.selectedDate).isValid() ? that.state.selectedDate.format('YYYY-MM-DD') : null,\n                    \"practice\": that.props.active_practiceId,\n                };\n                if (that.props.editId) {\n                    reqData.id = that.props.editTreatmentPlan.id\n                }\n                that.state.tableFormValues.forEach(function (item) {\n                    console.log(item);\n                    item.quantity = values.quantity[item._id];\n                    item.cost = values.cost[item._id];\n                    item.discount = values.discount[item._id];\n                    if (values.notes)\n                        item.notes = values.notes[item._id];\n                    let sendingItem = {\n                        \"procedure\": item.id,\n                        \"cost\": item.cost,\n                        \"quantity\": item.quantity,\n                        \"margin\": item.margin,\n                        \"default_notes\": item.default_notes,\n                        \"is_active\": true,\n                        \"is_completed\": item.is_completed || false,\n                        \"discount\": item.discount,\n                        \"discount_type\": \"%\",\n                    };\n                    reqData.treatment_plans.push(sendingItem);\n                });\n\n                let successFn = function (data) {\n                    displayMessage(\"Inventory updated successfully\");\n                    if(that.props.loadData)\n                        that.props.loadData();\n                    let url = '/patient/' + that.props.match.params.id + '/emr/plans';\n                    that.props.history.push(url);\n                }\n                let errorFn = function () {\n\n                }\n                postAPI(interpolate(TREATMENTPLANS_API, [that.props.match.params.id]), reqData, successFn, errorFn);\n            }\n        });\n    }\n    searchValues = (value) => {\n        let that = this;\n        this.setState(function (prevState) {\n            return {searchString: value}\n        }, function () {\n            that.loadProcedures();\n        });\n        return false;\n    }\n\n    render() {\n        let that = this;\n        const {getFieldDecorator, getFieldValue, getFieldsValue} = this.props.form;\n        const formItemLayout = {\n            labelCol: {\n                xs: {span: 24},\n                sm: {span: 4},\n            },\n            wrapperCol: {\n                xs: {span: 24},\n                sm: {span: 20},\n            },\n        };\n        const formItemLayoutWithOutLabel = {\n            labelCol: {\n                xs: {span: 24},\n                sm: {span: 24},\n            },\n            wrapperCol: {\n                xs: {span: 24},\n                sm: {span: 24},\n            },\n        };\n        const consumeRow = [{\n            title: 'Treatments',\n            dataIndex: 'name',\n            key: 'name',\n            render: (name, record) => <span>\n                <b>{name}</b><br/>\n                {this.state.addNotes[record._id] ?\n                    <Form.Item\n                        key={`default_notes[${record._id}]`}\n                        {...formItemLayout}>\n                        {getFieldDecorator(`default_notes[${record._id}]`, {\n                            validateTrigger: ['onChange', 'onBlur'],\n                            rules: [{\n                                message: \"This field is required.\",\n                            }],\n                            initialValue: record.default_notes\n                        })(\n                            <Input.TextArea min={0} placeholder={\"Notes...\"}/>\n                        )}\n                    </Form.Item>\n                    : <a onClick={() => this.addNotes(record._id, true)}>+ Add Note</a>}\n                </span>\n        }, {\n            title: 'Quantity',\n            dataIndex: 'quantity',\n            key: 'quantity',\n            render: (name, record) => <Form.Item\n                key={`quantity[${record._id}]`}\n                {...formItemLayout}>\n                {getFieldDecorator(`quantity[${record._id}]`, {\n                    validateTrigger: ['onChange', 'onBlur'],\n                    rules: [{\n                        required: true,\n                        message: \"This field is required.\",\n                    }],\n                    initialValue: 1\n                })(\n                    <InputNumber min={0} placeholder=\"Quantity\" size={'small'}\n                                 onChange={() => this.calculateItem(record._id)}/>\n                )}\n            </Form.Item>\n        }, {\n            title: 'Cost',\n            dataIndex: 'cost',\n            key: 'cost',\n            render: (name, record) => <Form.Item\n                key={`cost[${record._id}]`}\n                {...formItemLayout}>\n                {getFieldDecorator(`cost[${record._id}]`, {\n                    validateTrigger: ['onChange', 'onBlur'],\n                    rules: [{\n                        required: true,\n                        message: \"This field is required.\",\n                    }],\n                    initialValue: record.cost\n                })(\n                    <InputNumber min={0} placeholder=\"Cost\" size={'small'}\n                                 onChange={() => this.calculateItem(record._id)}/>\n                )}\n            </Form.Item>\n        }, {\n            title: 'Discount',\n            dataIndex: 'discount',\n            key: 'discount',\n            render: (name, record) => <Form.Item\n                key={`discount[${record._id}]`}\n                {...formItemLayout}>\n                {getFieldDecorator(`discount[${record._id}]`, {\n                    validateTrigger: ['onChange', 'onBlur'],\n                    rules: [{\n                        message: \"This field is required.\",\n                    }],\n                })(\n                    <InputNumber min={0} placeholder=\"Discount\" size={'small'}\n                                 onChange={() => this.calculateItem(record._id)}/>\n                )} %\n            </Form.Item>\n        }, {\n            title: 'Total',\n            dataIndex: 'total',\n            key: 'total',\n            render: (total, record) => <span>\n                {total}\n                <Button icon={\"close\"} onClick={() => this.removeTreatment(record._id)} type={\"danger\"}\n                        shape=\"circle\"\n                        size=\"small\"/>\n            </span>\n        }];\n        return <div>\n\n            <Card title={\"Treatment Plans\"}>\n                <Row>\n\n                    <Col span={17}>\n                        <Form onSubmit={this.handleSubmit}>\n                            <Table pagination={false}\n                                   bordered={true}\n                                   dataSource={this.state.tableFormValues}\n                                   columns={consumeRow}/>\n\n                            <Affix offsetBottom={0}>\n                                <Card>\n                                    <span>by &nbsp;&nbsp;</span>\n                                    <Dropdown placement=\"topCenter\" overlay={<Menu>\n                                        {this.state.practiceDoctors.map(doctor =>\n                                            <Menu.Item key=\"0\">\n                                                <a onClick={() => this.selectDoctor(doctor)}>{doctor.user.first_name}</a>\n                                            </Menu.Item>)}\n                                    </Menu>} trigger={['click']}>\n                                        <a className=\"ant-dropdown-link\" href=\"#\">\n                                            <b>\n                                                {this.state.selectedDoctor.user ? this.state.selectedDoctor.user.first_name : 'No DOCTORS Found'}\n                                            </b>\n                                        </a>\n                                    </Dropdown>\n                                    <span> &nbsp;&nbsp;on&nbsp;&nbsp;</span>\n                                    <DatePicker value={this.state.selectedDate}\n                                                onChange={(value) => this.selectedDate(value)} format={\"DD-MM-YYYY\"}\n                                                allowClear={false}/>\n                                    <Form.Item {...formItemLayoutWithOutLabel}\n                                               style={{marginBottom: 0, float: 'right'}}>\n                                        <Button type=\"primary\" htmlType=\"submit\" style={{margin: 5}}>Save Treatment\n                                            Plan</Button>\n                                        {that.props.history ?\n                                            <Button style={{margin: 5, float: 'right'}}\n                                                    onClick={() => that.props.history.goBack()}>\n                                                Cancel\n                                            </Button> : null}\n                                    </Form.Item>\n                                </Card>\n                            </Affix>\n                            <div ref={el => {\n                                that.bottomPoint = el;\n                            }}/>\n                        </Form>\n                    </Col>\n                    <Col span={7}>\n                        <Affix offsetTop={0}>\n                            <div style={{backgroundColor: '#ddd', padding: 8}}>\n                                <Input.Search placeholder={\"Search in plans ...\"}\n                                              onChange={e => this.searchValues(e.target.value)}/>\n                            </div>\n                            <List size={\"small\"}\n                                  style={{maxHeight: '100vh', overflowX: 'scroll'}}\n                                  itemLayout=\"horizontal\"\n                                  dataSource={this.state.filteredItems}\n                                  loading={this.state.loadingProcedures}\n                                  renderItem={item => (\n                                      <List.Item onClick={() => this.add(item)}>\n                                          <List.Item.Meta\n                                              title={item.name}/>\n                                      </List.Item>)}/>\n                        </Affix>\n                    </Col>\n                </Row>\n            </Card>\n\n        </div>\n    }\n}\n\nexport default Form.create()(AddorEditDynamicTreatmentPlans)\n","import React from \"react\";\nimport {Checkbox, Table, Button, Card, Icon, Tag, Menu, Dropdown, Modal, Spin, Tooltip} from \"antd\";\nimport {Link} from \"react-router-dom\";\nimport {\n    PROCEDURE_CATEGORY,\n    TREATMENTPLANS_API,\n    TREATMENTPLANS_MARK_COMPLETE_API,\n    TREATMENTPLANS_PDF\n} from \"../../../constants/api\";\nimport {getAPI, interpolate, displayMessage, postAPI} from \"../../../utils/common\";\nimport moment from \"moment\";\nimport {Redirect, Switch, Route} from \"react-router\";\nimport AddorEditDynamicTreatmentPlans from \"./AddorEditDynamicTreatmentPlans\";\nimport {SUCCESS_MSG_TYPE} from \"../../../constants/dataKeys\";\nimport {BACKEND_BASE_URL} from \"../../../config/connect\";\nimport InfiniteFeedLoaderButton from \"../../common/InfiniteFeedLoaderButton\";\n\nconst confirm = Modal.confirm;\n\nclass PatientTreatmentPlans extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            currentPatient: this.props.currentPatient,\n            active_practiceId: this.props.active_practiceId,\n            treatmentPlans: [],\n            procedure_category: null,\n            incompletedTreatmentPlans: [],\n            loading: true,\n            selectedTreatments: {}\n        }\n        this.loadTreatmentPlans = this.loadTreatmentPlans.bind(this);\n        this.editTreatmentPlanData = this.editTreatmentPlanData.bind(this);\n        this.submitCompleteTreatment = this.submitCompleteTreatment.bind(this);\n    }\n\n    componentDidMount() {\n        this.loadTreatmentPlans();\n    }\n\n    loadTreatmentPlans(page = 1) {\n        let incompleted = [];\n        let that = this;\n        this.setState({\n            loading: true\n        })\n        let successFn = function (data) {\n            that.setState(function (prevState) {\n                if (data.current == 1) {\n                    return {\n                        treatmentPlans: [...data.results],\n                        next: data.next,\n                        loading: false\n                    }\n                }\n                return {\n                    treatmentPlans: [...prevState.treatmentPlans, ...data.results],\n                    next: data.next,\n                    loading: false\n                }\n            });\n            data.results.forEach(function (treatmentplan) {\n                if (!treatmentplan.is_completed) {\n                    incompleted.push(treatmentplan)\n                }\n            });\n            that.setState(function (prevState) {\n                if (data.current == 1) {\n                    return {\n                        incompletedTreatmentPlans: [...incompleted],\n                        loading: false\n                    }\n                }\n                return {\n                    incompletedTreatmentPlans: [...prevState.incompletedTreatmentPlans, ...incompleted],\n                    loading: false\n                }\n            })\n        }\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            })\n\n        };\n        let apiParams = {\n            page: page,\n            practice: this.props.active_practiceId\n        };\n        if (this.props.match.params.id) {\n            apiParams.patient = this.props.match.params.id;\n        }\n        if (this.props.showAllClinic && this.props.match.params.id) {\n            delete (apiParams.practice)\n        }\n        getAPI(TREATMENTPLANS_API, successFn, errorFn, apiParams)\n\n    }\n\n    editTreatmentPlanData(record) {\n        console.log(\"record\",record.id);\n        this.setState({\n            editTreatmentPlan: record,\n            loading: false\n        });\n        let id = record.patient;\n        this.props.history.push(\"/patient/\" + record.id + \"/emr/plans/edit\")\n\n    }\n\n\n    deleteTreatmentPlans(record) {\n        let that = this;\n        confirm({\n            title: 'Are you sure to delete this item?',\n            okText: 'Yes',\n            okType: 'danger',\n            cancelText: 'No',\n            onOk() {\n                let reqData = {\n                    id: record.id,\n                    patient: record.patient.id,\n                    is_active: false,\n                }\n                let successFn = function (data) {\n                    that.loadTreatmentPlans();\n                    displayMessage(SUCCESS_MSG_TYPE, \"Treatment Plan Deleted Successfully!\");\n\n                }\n                let errorFn = function () {\n\n                };\n                postAPI(interpolate(TREATMENTPLANS_API, [that.props.match.params.id], null), reqData, successFn, errorFn);\n            },\n            onCancel() {\n                console.log('Cancel');\n            },\n        });\n\n\n    }\n\n    treatmentCompleteToggle(id, option) {\n        this.setState(function (prevState) {\n            return {selectedTreatments: {...prevState.selectedTreatments, [id]: !!option}}\n        });\n    }\n\n    submitCompleteTreatment() {\n        let that = this;\n        let selectedTreatments = this.state.selectedTreatments;\n        let treatmentKeys = Object.keys(selectedTreatments);\n        // let reqTreatmentsArray = [];\n        let reqData = {\n            treatment: [],\n            patient: that.props.match.params.id\n        };\n        treatmentKeys.forEach(function (item) {\n            let treatmentObj = {id: item, is_completed: selectedTreatments[item]};\n            reqData.treatment.push(treatmentObj);\n        });\n        let successFn = function (data) {\n            that.loadTreatmentPlans();\n            that.setState({\n                selectedTreatments: {}\n            })\n        }\n        let errorFn = function () {\n\n        }\n        postAPI(interpolate(TREATMENTPLANS_MARK_COMPLETE_API, [this.props.match.params.id]), reqData, successFn, errorFn)\n    }\n\n    loadPDF(id) {\n        let that = this;\n        let successFn = function (data) {\n            if (data.report)\n                window.open(BACKEND_BASE_URL + data.report);\n        }\n        let errorFn = function () {\n\n        }\n        getAPI(interpolate(TREATMENTPLANS_PDF, [id]), successFn, errorFn);\n    }\n\n    render() {\n        let that = this;\n\n        const columns = [{\n            title: '',\n            key: 'is_completed',\n            render: (text, record) => (record.is_completed ?\n                <Icon type=\"check-circle\" theme=\"twoTone\" style={{marginLeft: '8px', fontSize: '20px'}}/> :\n                <Checkbox key={record.id}\n                          onChange={(e) => this.treatmentCompleteToggle(record.id, e.target.checked)}\n                          value={this.state.selectedTreatments[record.id]}/>)\n        }, {\n            title: 'Procedure',\n            dataIndex: 'procedure',\n            key: 'procedure',\n            render: (text, record) => (\n                <span> {text.name}</span>\n            )\n        }, {\n            title: 'Quantity',\n            dataIndex: 'quantity',\n            key: 'quantity',\n        }, {\n            title: 'Discount',\n            dataIndex: 'discount',\n            key: 'discount',\n        }, {\n            title: 'Cost per  Unit',\n            dataIndex: 'cost',\n            key: 'cost',\n        }, {\n            title: 'Notes',\n            dataIndex: 'default_notes',\n            key: 'default_notes',\n        }];\n\n        if (this.props.match.params.id) {\n            return <div><Switch>\n                <Route exact path='/patient/:id/emr/plans/add'\n                       render={(route) => <AddorEditDynamicTreatmentPlans {...this.state} {...route} {...that.props}\n                                                                          loadData={this.loadTreatmentPlans}/>}/>\n                <Route exact path='/patient/:id/emr/plans/edit'\n                       render={(route) => (this.state.editTreatmentPlan ?\n                           <AddorEditDynamicTreatmentPlans {...this.state} {...route} {...that.props}\n                                                           loadData={this.loadTreatmentPlans}\n                                                           editId={this.state.editTreatmentPlan.id}/> :\n                           <Redirect to={\"/patient/\" + this.props.match.params.id + \"/emr/plans\"}/>)}/>\n                <div>\n                    <Card\n                        bodyStyle={{padding: 0}}\n                        title={this.state.currentPatient ? this.state.currentPatient.user.first_name + \" TreatmentPlans\" : \"TreatmentPlans\"}\n                        extra={<Button.Group>\n                            <Button onClick={this.submitCompleteTreatment}>\n                                <Icon type=\"save\"/>Save\n                            </Button>\n                            <Link to={\"/patient/\" + this.props.match.params.id + \"/emr/plans/add\"}>\n                                <Button type={\"primary\"}>\n                                    <Icon type=\"plus\"/>Add\n                                </Button>\n                            </Link>\n                        </Button.Group>\n                        }/>\n                    <Spin spinning={this.state.loading}>\n                        {this.state.treatmentPlans.map((treatment) => <Card bodyStyle={{padding: 0}}\n                                                                            style={{marginTop: 15}}>\n                                <div style={{padding: 16}}>\n                                    <h4>{treatment.date ? moment(treatment.date).format('ll') : null}\n                                        <Dropdown.Button\n                                            size={\"small\"}\n                                            style={{float: 'right'}}\n                                            overlay={<Menu>\n                                                <Menu.Item key=\"1\" onClick={() => that.editTreatmentPlanData(treatment)}\n                                                           disabled={(treatment.practice && treatment.practice.id != this.props.active_practiceId)}>\n                                                    <Icon type=\"edit\"/>\n                                                    Edit\n                                                </Menu.Item>\n                                                <Menu.Item key=\"2\" onClick={() => that.deleteTreatmentPlans(treatment)}\n                                                           disabled={(treatment.practice && treatment.practice.id != this.props.active_practiceId)}>\n                                                    <Icon type=\"delete\"/>\n                                                    Delete\n                                                </Menu.Item>\n                                                <Menu.Divider/>\n                                                <Menu.Item key=\"3\">\n                                                    <Link to={\"/patient/\" + treatment.patient + \"/emr/timeline\"}>\n                                                        <Icon type=\"clock-circle\"/>\n                                                        &nbsp;\n                                                        Patient Timeline\n                                                    </Link>\n                                                </Menu.Item>\n                                            </Menu>}>\n                                            <a onClick={() => this.loadPDF(treatment.id)}><Icon type=\"printer\"/></a>\n                                        </Dropdown.Button>\n                                    </h4>\n\n                                </div>\n                                <Table loading={this.state.loading} columns={columns}\n                                       dataSource={treatment.treatment_plans}\n                                       footer={() => treatmentFooter(treatment)}\n                                       pagination={false}\n                                       key={treatment.id}/>\n\n                            </Card>\n                        )}</Spin>\n                    <InfiniteFeedLoaderButton loaderFunction={() => this.loadTreatmentPlans(that.state.next)}\n                                              loading={this.state.loading}\n                                              hidden={!this.state.next}/>\n                </div>\n            </Switch>\n\n            </div>\n        } else {\n            return <div>\n                <Card\n                    bodyStyle={{padding: 0}}\n                    title={this.state.currentPatient ? this.state.currentPatient.user.first_name + \" TreatmentPlans\" : \"TreatmentPlans\"}\n                    extra={<Button.Group>\n                        <Button onClick={this.submitCompleteTreatment}>\n                            <Icon type=\"save\"/>Save\n                        </Button>\n                        <Button type={\"primary\"} onClick={() => this.props.togglePatientListModal(true)}>\n                            <Icon type=\"plus\"/>Add\n                        </Button>\n                    </Button.Group>\n                    }/>\n                <Spin spinning={this.state.loading}>\n                    {this.state.treatmentPlans.map((treatment) => <Card bodyStyle={{padding: 0}}\n                                                                        key={treatment.id}\n                                                                        style={{marginTop: 15}}>\n                            <div style={{padding: 16}}>\n                                <h4>{treatment.date ? moment(treatment.date).format('ll') : null} \n                                <Link to={\"/patient/\" + treatment.patient.id + \"/emr/plans\"}>\n                                    &nbsp;&nbsp; {treatment.patient.user?treatment.patient.user.first_name:null} (ID: {treatment.patient.custom_id?treatment.patient.custom_id:treatment.patient.id})&nbsp;\n                                </Link>\n                                <span>, {treatment.patient.gender}</span>\n                                    \n                                    <Dropdown.Button\n                                        size={\"small\"}\n                                        style={{float: 'right'}}\n                                        overlay={<Menu>\n                                            <Menu.Item key=\"1\" disabled={(treatment.practice && treatment.practice.id != this.props.active_practiceId)}>\n                                                <Link to={\"/patient/\" + treatment.patient.id + \"/emr/plans/edit\"}>\n                                                    <Icon type=\"edit\"/>\n                                                    &nbsp;\n                                                    Edit\n                                                </Link> \n                                            </Menu.Item>\n                                            <Menu.Item key=\"2\" onClick={() => that.deleteTreatmentPlans(treatment)}\n                                                       disabled={(treatment.practice && treatment.practice.id != this.props.active_practiceId)}>\n                                                <Icon type=\"delete\"/>\n                                                Delete\n                                            </Menu.Item>\n                                            <Menu.Divider/>\n                                            <Menu.Item key=\"3\">\n                                                <Link to={\"/patient/\" + treatment.patient + \"/emr/timeline\"}>\n                                                    <Icon type=\"clock-circle\"/>\n                                                    &nbsp;\n                                                    Patient Timeline\n                                                </Link>\n                                            </Menu.Item>\n                                        </Menu>}>\n                                        <a onClick={() => this.loadPDF(treatment.id)}><Icon type=\"printer\"/></a>\n                                    </Dropdown.Button>\n                                </h4>\n\n                            </div>\n                            <Table loading={this.state.loading} columns={columns}\n                                   dataSource={treatment.treatment_plans}\n                                   footer={() => treatmentFooter(treatment)}\n                                   pagination={false}\n                                   key={treatment.id}/>\n\n                        </Card>\n                    )}\n                </Spin>\n                <InfiniteFeedLoaderButton loaderFunction={() => this.loadTreatmentPlans(that.state.next)}\n                                          loading={this.state.loading}\n                                          hidden={!this.state.next}/>\n            </div>\n        }\n\n    }\n}\n\nexport default PatientTreatmentPlans;\n\n\nfunction treatmentFooter(presc) {\n    if (presc) {\n\n        return <div>\n            {presc.doctor ? <Tag color={presc.doctor ? presc.doctor.calendar_colour : null}>\n                <b>{\"prescribed by  \" + presc.doctor.user.first_name} </b>\n            </Tag> : null}\n            {presc.practice ? <Tag style={{float: 'right'}}>\n                <Tooltip title=\"Practice Name\">\n                    <b>{presc.practice.name} </b>\n                </Tooltip>\n            </Tag> : null}\n        </div>\n    }\n    return null\n}\n","import React from \"react\";\nimport {Card, Row, Form, Col, List, Button, Table, InputNumber, Input, Icon} from 'antd';\nimport {displayMessage, getAPI, interpolate, postAPI} from \"../../../utils/common\";\nimport {LABTEST_API} from \"../../../constants/api\";\nimport {WARNING_MSG_TYPE} from \"../../../constants/dataKeys\";\nimport {remove} from 'lodash';\n\nclass AddPatientLabOrders extends React.Component{\n    constructor(props){\n        super(props);\n        this.state={\n        \tlab_test:[],\n        \ttableFormValues: [],\n        \taddedLabs : {}\n        }\n        console.log(\"urgent\",this.props.active_practiceId);\n    }\n\n    componentDidMount() {\n        this.loadLabs();\n    }\n\n    loadLabs(){\n    \tvar that =this;\n    \tlet successFn = function(data){\n    \t\tthat.setState({\n    \t\t\tlab_test: data,\n    \t\t})\n    \t};\n    \tlet errorFn = function(){\n\n    \t};\n    \tgetAPI(interpolate(LABTEST_API, [that.props.active_practiceId]), successFn, errorFn);\n    }\n\n    calculateItem = (_id) => {\n        const {getFieldsValue} = this.props.form;\n        console.log(getFieldsValue());\n        this.setState(function (prevState) {\n            let newtableFormValues = [...prevState.tableFormValues];\n            newtableFormValues.forEach(function (item) {\n\n            });\n        });\n    }\n\n    removeTests = (_id,item) => {\n        this.setState(function (prevState) {\n            return {\n            \taddedLabs:{...prevState.addedLabs,[item.id]:false},\n                tableFormValues: [...remove(prevState.tableFormValues, function (item) {\n                    return item._id != _id;\n                })]\n            }\n        });\n    }\n    add = (item) => {\n    \tconsole.log(\"item\",item);\n        this.setState(function (prevState) {\n        \tconsole.log(\"preview\",prevState);\n            let randId = Math.random().toFixed(7);\n            if(prevState.addedLabs[item.id]){\n            \tdisplayMessage(WARNING_MSG_TYPE,\"Item Already Added\");\n            \treturn false;\n            }\n            return {\n            \taddedLabs:{...prevState.addedLabs,[item.id]:true},\n                tableFormValues: [...prevState.tableFormValues, {\n                    ...item,\n                    _id: randId,\n                }]\n            }\n        });\n    };\n\n     handleSubmit = (e) => {\n        let that = this;\n        e.preventDefault();\n        this.props.form.validateFields((err, values) => {\n            if (!err) {\n                let reqData = {\n                    treatment: [],\n                    patient: that.props.match.params.id\n                };\n                that.state.tableFormValues.forEach(function (item) {\n                    item.cost = values.cost[item._id];\n                    let sendingItem = {\n                        \"name\": item.id,\n                        \"cost\": item.cost,\n                        \"instruction\":item.instruction,\n                        \"is_active\":true,\n                        \"practice\":item.practice,\n                        \"margin\":item.margin,\n\n                    };\n                    reqData.treatment.push(sendingItem);\n                });\n                let successFn = function (data) {\n                    displayMessage(\"Inventory updated successfully\");\n\n                }\n                let errorFn = function () {\n\n                }\n                console.log(\"DataSet\",reqData);\n                // postAPI(interpolate(\"API name\" [that.props.match.params.id]), reqData, successFn, errorFn);\n            }\n        });\n    }\n\n\n    render(){\n    \tlet that = this;\n        const {getFieldDecorator, getFieldValue, getFieldsValue} = this.props.form;\n        const formItemLayout = {\n            labelCol: {\n                xs: {span: 24},\n                sm: {span: 4},\n            },\n            wrapperCol: {\n                xs: {span: 24},\n                sm: {span: 20},\n            },\n        };\n        const formItemLayoutWithOutLabel = {\n            labelCol: {\n                xs: {span: 24},\n                sm: {span: 24},\n            },\n            wrapperCol: {\n                xs: {span: 24},\n                sm: {span: 24},\n            },\n        };\n        const coloums = [{\n            title: 'Name',\n            dataIndex: 'name',\n            key: 'name',\n            render: (name, record) => <span>\n                <b>{name}</b>\n                </span>\n        }, {\n            title: 'Cost',\n            dataIndex: 'cost',\n            key: 'cost',\n            render: (name, record) => <span><Form.Item\n                key={`cost[${record._id}]`}\n                {...formItemLayout}>\n                {getFieldDecorator(`cost[${record._id}]`, {\n                    validateTrigger: ['onChange', 'onBlur'],\n                    rules: [{\n                        required: true,\n                        message: \"This field is required.\",\n                    }],\n                    initialValue: record.cost\n                })}\n            </Form.Item>\n            </span>\n        },  {\n            title: 'Total',\n            dataIndex: 'total',\n            key: 'total',\n            render: (total, record) => <span>\n                {total}\n                <a onClick={() => this.removeTests(record._id,record)}>\n                    <Icon type=\"close-circle\" theme=\"twoTone\" twoToneColor={\"#f00\"}/>\n                </a>\n            </span>\n        }];\n        return <div>\n            <Form onSubmit={this.handleSubmit}>\n                <Card title={\"Patient Lab Orders\"} bodyStyle={{padding: 0}}\n                      extra={<Form.Item {...formItemLayoutWithOutLabel} style={{marginBottom: 0}}>\n                          <Button type=\"primary\" htmlType=\"submit\">Save Lab Orders</Button>\n                      </Form.Item>}>\n                    <Row gutter={16}>\n                        <Col span={7}>\n                            <List size={\"small\"}\n                                  itemLayout=\"horizontal\"\n                                  dataSource={this.state.lab_test}\n                                  renderItem={item => (\n                                      <List.Item>\n                                          <List.Item.Meta\n                                              title={item.name}/>\n                                          <Button type=\"primary\" size=\"small\" shape=\"circle\"\n                                                  onClick={() => this.add(item)}\n                                                  icon={\"arrow-right\"}/>\n                                      </List.Item>)}/>\n                        </Col>\n                        <Col span={17}>\n\n                            <Table pagination={false}\n                                   bordered={true}\n                                   dataSource={this.state.tableFormValues}\n                                   columns={coloums}/>\n\n\n                        </Col>\n                    </Row>\n                </Card>\n            </Form>\n        </div>\n    }\n}\nexport default Form.create()(AddPatientLabOrders);\n","import React from \"react\";\nimport {Card, Button, Icon, Table, Divider, Checkbox} from \"antd\";\nimport {Link} from \"react-router-dom\";\nimport moment from \"moment\";\nimport {Route, Switch} from \"react-router\";\nimport  AddPatientLabOrders from \"./AddPatientLabOrders\";\n\nclass PatientLabOrders extends React.Component{\n\tconstructor(props){\n        super(props);\n        this.state={\n            currentPatient: this.props.currentPatient,\n            active_practiceId: this.props.active_practiceId,\n        \tloading:false,\n        }\n    }\n\n    render(){\n    \tconst columns = [{\n            title: 'Time',\n            dataIndex: 'created_at',\n            key: 'name',\n            render: created_at => <span>{moment(created_at).format('LLL')}</span>,\n        }, {\n            title: 'Drug',\n            key: 'drug',\n\n        }, {\n            title: 'Quantity',\n            dataIndex: 'qunatity',\n            key: 'quantity',\n        }, {\n            title: 'Cost Per  Unit',\n            dataIndex: 'cost',\n            key: 'cost',\n        }, {\n            title: 'Completed',\n            key: 'is_completed',\n            render: (text, record) => (\n                <Checkbox checked={record.is_completed}/>\n            )\n        }, {\n            title: 'Action',\n            key: 'action',\n            render: (text, record) => (\n                <span>\n                <a onClick={() => this.editPrescriptionData(record)}>Edit</a>\n                <Divider type=\"vertical\"/>\n                <a href=\"javascript:;\">Delete</a>\n              </span>\n            ),\n        }];\n\n    \treturn <div><Switch>\n              <Route exact path='/patient/:id/emr/labtrackings/add'\n                     render={(route) => <AddPatientLabOrders{...this.state} {...route} />}/>\n              <Card title={ this.state.currentPatient?this.state.currentPatient.user.first_name + \" Lab Order\":\"Patients Lab Order\"}  extra={<Button.Group>\n                    <Link to={\"/patient/\"+this.props.match.params.id+\"/emr/labtrackings/add\"}><Button><Icon type=\"plus\"/>Add</Button></Link>\n              </Button.Group>}>\n\n                  <Table loading={this.state.loading} columns={columns}  dataSource={this.state.payments} />\n\n              </Card>\n            </Switch>\n\n        </div>\n    }\n\n}\n\nexport default PatientLabOrders;\n","import React from \"react\";\nimport {\n    Affix,\n    Button,\n    Card,\n    Col,\n    DatePicker, Divider,\n    Dropdown,\n    Form, Icon,\n    Input,\n    InputNumber,\n    List,\n    Menu,\n    Row,\n    Select,\n    Spin,\n    Table,\n    Tabs,\n    Tag, Typography\n} from \"antd\";\nimport {displayMessage, getAPI, interpolate, postAPI, putAPI} from \"../../../utils/common\";\nimport {CURRENCY_TYPE, DRUG, INVENTORY, PRESCRIPTIONS, PROCEDURES} from \"../../../constants/hardData\";\nimport {\n    CHECK_PROMO_CODE,\n    CREATE_OR_EDIT_INVOICES,\n    INVENTORY_ITEM_API, OFFERS,\n    PROCEDURE_CATEGORY,\n    SEARCH_THROUGH_QR,\n    SINGLE_INVOICE_API,\n    TAXES,\n    UNPAID_PRESCRIPTIONS\n} from \"../../../constants/api\";\nimport moment from \"moment\";\nimport {loadDoctors} from \"../../../utils/clinicUtils\";\n\nconst {Search} = Input;\nconst TabPane = Tabs.TabPane;\nconst {Text} = Typography;\nlet tableFormFields = {\n    _id: null,\n    quantity: 0,\n    batch: null\n};\n\nclass Addinvoicedynamic extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            classType: props.type,\n            tableFormValues: [],\n            maxQuantityforConsume: {},\n            items: {},\n            practiceDoctors: [],\n            selectedPrescriptions: [],\n            selectedDate: moment(),\n            stocks: {},\n            itemBatches: {},\n            saveLoading: false,\n            qrValue: '',\n            searchItem: '',\n            selectedDoctor: {},\n            tempValues: {},\n            offers: [],\n            loading: false,\n            taxes_list: [],\n            promoCode: '',\n            appliedPromoCodeDiscount: null,\n            promoCodeCheckLoading: false\n        }\n\n    }\n\n    componentDidMount() {\n        let that = this;\n        loadDoctors(this);\n        this.loadInventoryItemList();\n        this.loadProcedures();\n        this.loadPrescriptions();\n        this.loadTaxes();\n        this.loadLoyaltyDiscount();\n        if (this.props.editId) {\n            setTimeout(function () {\n                that.setState({\n                    loading: false,\n                })\n                that.loadEditInvoiceData();\n            }.bind(this), 2000);\n\n\n        }\n    }\n\n    selectedDefaultDate = (date) => {\n        this.setState({\n            selectedDate: date\n        })\n    }\n    loadEditInvoiceData = () => {\n        let that = this;\n        let invoice = this.props.editInvoice;\n\n        this.setState(function (prevState) {\n            let tableValues = [];\n            invoice.procedure.forEach(function (proc) {\n                let id = Math.random().toFixed(7);\n                tableValues.push({\n                    ...proc.procedure_data,\n                    ...proc,\n                    selectedDoctor: proc.doctor_data,\n                    selectedDate: moment(proc.date).isValid() ? moment(proc.date) : null,\n                    _id: id,\n                    item_type: PROCEDURES\n                });\n                that.changeNetPrice(id, proc.discount)\n            });\n            let stocks = {...prevState.stocks};\n            invoice.inventory.forEach(function (proc) {\n                let id = Math.random().toFixed(7);\n                if (prevState.itemBatches[proc.inventory]) {\n                    if (stocks[proc.inventory]) {\n                        let stock_quantity = stocks[proc.inventory];\n                        if (stock_quantity[proc.batch_number])\n                            stock_quantity[proc.batch_number] += proc.unit;\n                        else\n                            stock_quantity[proc.batch_number] += proc.unit;\n                    } else {\n                        let stock_quantity = {};\n                        stock_quantity[proc.batch_number] = proc.unit;\n                        stocks[proc.inventory] = stock_quantity;\n                    }\n                    prevState.itemBatches[proc.inventory].forEach(function (batchObj) {\n                        if (batchObj.batch_number == proc.batch_number)\n                            proc.selectedBatch = batchObj;\n                    });\n                }\n                tableValues.push({\n                    ...proc.inventory_item_data,\n                    ...proc,\n                    selectedDoctor: proc.doctor_data,\n                    _id: id,\n                    item_type: INVENTORY,\n                    selectOption: !!proc.offers\n                });\n                that.changeNetPrice(id, proc.discount)\n            });\n\n            return {\n                tableFormValues: tableValues,\n                selectedDate: moment(invoice.date).isValid() ? moment(invoice.date) : null,\n                stocks: stocks,\n                notes:invoice.notes\n            }\n        })\n\n    };\n\n    loadInventoryItemList(page = 1) {\n        let that = this;\n        let searchString = this.state.searchItem;\n        that.setState({\n            loadingInventory: true\n        })\n        let successFn = function (reqData) {\n            let data = reqData.results;\n            let drugItems = [];\n            if (that.state.searchItem == searchString)\n                that.setState(function (prevState) {\n                        let stocks = {...prevState.stocks};\n                        let itemBatches = {};\n                        data.forEach(function (item) {\n                            if (item.item_type == DRUG) {\n                                drugItems.push(item);\n                                if (stocks[item.id]) {\n                                    let stock_quantity = stocks[item.id]\n                                    if (item.item_type_stock && item.item_type_stock.item_stock)\n                                        item.item_type_stock.item_stock.forEach(function (stock) {\n                                            if (stock_quantity[stock.batch_number])\n                                                stock_quantity[stock.batch_number] += stock.quantity;\n                                            else\n                                                stock_quantity[stock.batch_number] += stock.quantity;\n                                        });\n                                } else {\n                                    let stock_quantity = {}\n                                    if (item.item_type_stock && item.item_type_stock.item_stock)\n                                        item.item_type_stock.item_stock.forEach(function (stock) {\n                                            stock_quantity[stock.batch_number] = stock.quantity\n                                        });\n                                    stocks[item.id] = stock_quantity;\n                                }\n                                itemBatches[item.id] = item.item_type_stock.item_stock;\n                            }\n\n                        });\n                        let items = prevState.items;\n                        items[INVENTORY] = {...reqData, results: drugItems};\n                        return {\n                            items: items,\n                            stocks: {...prevState.stocks, ...stocks},\n                            itemBatches: {...prevState.itemBatches, ...itemBatches},\n                            loadingInventory: false,\n                        }\n                    }, function () {\n                        if (that.props.editId) {\n                            that.loadEditInvoiceData();\n                        }\n                    }\n                )\n\n        }\n        let errorFn = function () {\n            that.setState({\n                loadingInventory: false\n            })\n        }\n        let paramsApi = {\n            practice: this.props.active_practiceId,\n            maintain_inventory: true,\n            page\n        }\n        if (this.state.searchItem) {\n            paramsApi.item_name = searchString;\n        }\n\n        getAPI(INVENTORY_ITEM_API, successFn, errorFn, paramsApi);\n    }\n\n    loadProcedures(page = 1) {\n        var that = this;\n        let searchString = this.state.searchItem;\n        let successFn = function (data) {\n            let items = that.state.items;\n            items[PROCEDURES] = data;\n            if (that.state.searchItem == searchString)\n                that.setState({\n                    items: items,\n                })\n        };\n        let errorFn = function () {\n        };\n        let paramsApi = {\n            practice: this.props.active_practiceId,\n            page\n        }\n        if (this.state.searchItem) {\n            paramsApi.name = searchString;\n        }\n        getAPI(interpolate(PROCEDURE_CATEGORY, [this.props.active_practiceId]), successFn, errorFn, paramsApi);\n    }\n\n    loadPrescriptions() {\n        let that = this;\n        let searchString = this.state.searchItem;\n        let successFn = function (data) {\n            if (that.state.searchItem == searchString)\n                that.setState(function (prevState) {\n                    return {\n                        items: {...prevState.items, [PRESCRIPTIONS]: data}\n                    }\n                })\n        };\n        let errorFn = function () {\n        };\n        let paramsApi = {\n            practice: this.props.active_practiceId,\n        }\n        if (this.state.searchItem) {\n            paramsApi.item_name = searchString;\n        }\n        getAPI(interpolate(UNPAID_PRESCRIPTIONS, [that.props.match.params.id]), successFn, errorFn, paramsApi);\n    }\n\n    loadTaxes() {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                taxes_list: data,\n            })\n        };\n        let errorFn = function () {\n        };\n        getAPI(interpolate(TAXES, [this.props.active_practiceId]), successFn, errorFn);\n\n    }\n\n    remove = (k) => {\n        this.setState(function (prevState) {\n            let newTableFormValues = [];\n            prevState.tableFormValues.forEach(function (formValue) {\n                if (formValue._id != k)\n                    newTableFormValues.push(formValue);\n            });\n            return {\n                tableFormValues: newTableFormValues\n            }\n        });\n    }\n\n\n    add = (item, randId = Math.random().toFixed(7)) => {\n        this.setState(function (prevState) {\n            if (item.item_type == PROCEDURES) {\n                item = {\n                    ...item,\n                    id: undefined,\n                    unit_cost: item.cost,\n                    procedure: item.id,\n                    selectedDoctor: prevState.selectedDoctor ? prevState.selectedDoctor : null,\n                    selectedDate: moment(),\n                    taxes: item.taxes.map(tax => tax.id)\n                }\n            } else if (item.item_type == INVENTORY) {\n                item = {\n                    ...item,\n                    id: undefined,\n                    inventory: item.id,\n                    unit_cost: item.retail_without_tax,\n                    selectedDoctor: prevState.selectedDoctor ? prevState.selectedDoctor : null,\n                }\n            }\n            return {\n                tableFormValues: [{\n                    ...tableFormFields,\n                    ...item,\n                    id: undefined,\n                    _id: randId,\n                }, ...prevState.tableFormValues]\n            }\n        });\n    };\n    selectDoctor = (doctor, id, type) => {\n        this.setState(function (prevState) {\n            let finalTableFormValues = [];\n            prevState.tableFormValues.forEach(function (formValue) {\n                if (formValue._id == id && formValue.item_type == type) {\n                    finalTableFormValues.push({...formValue, selectedDoctor: doctor});\n\n                } else {\n                    finalTableFormValues.push(formValue);\n\n                }\n            });\n            return {\n                tableFormValues: finalTableFormValues,\n            }\n        })\n    }\n\n    selectedDate = (dateValue, id, type) => {\n        this.setState(function (prevState) {\n            let finalTableFormValues = [];\n            prevState.tableFormValues.forEach(function (formValue) {\n                if (formValue._id == id && formValue.item_type == type) {\n                    finalTableFormValues.push({...formValue, selectedDate: dateValue})\n                } else {\n                    finalTableFormValues.push(formValue)\n                }\n            });\n            return {\n                tableFormValues: finalTableFormValues\n            }\n        })\n    }\n\n    selectBatch = (batch, id, type) => {\n        this.setState(function (prevState) {\n            let finalTableFormValues = [];\n            prevState.tableFormValues.forEach(function (formValue) {\n                if (formValue._id == id && formValue.item_type == type) {\n                    finalTableFormValues.push({...formValue, selectedBatch: batch})\n                } else {\n                    finalTableFormValues.push(formValue)\n                }\n            });\n            return {\n                tableFormValues: finalTableFormValues\n            }\n        })\n    }\n    addPrescription = (item) => {\n        let that = this;\n        item.drugs.forEach(function (drug_item) {\n            if (drug_item.inventory.maintain_inventory)\n                that.add({...drug_item.inventory, item_type: INVENTORY, inventory: item.inventory.id, id: undefined})\n        });\n        that.setState(function (prevState) {\n            return {selectedPrescriptions: [...prevState.selectedPrescriptions, item.id]}\n        })\n    }\n    handleSubmit = (goBack) => {\n        let that = this;\n        this.props.form.validateFields((err, values) => {\n            if (!err) {\n                that.setState({\n                    // saveLoading: true\n                });\n                let reqData = {\n                    promo_code: that.state.promoCode,\n                    practice: that.props.active_practiceId,\n                    patient: that.props.match.params.id,\n                    unit: null,\n                    cost: null,\n                    discount: null,\n                    taxes: 0,\n                    total: null,\n                    procedure: [],\n                    inventory: [],\n                    prescription: that.state.selectedPrescriptions,\n                    notes: values.notes,\n                    date: that.state.selectedDate && moment(that.state.selectedDate).isValid() ? that.state.selectedDate.format('YYYY-MM-DD') : null,\n                };\n                that.state.tableFormValues.forEach(function (item) {\n                    item.unit = values.unit[item._id];\n                    item.taxes = values.taxes[item._id];\n                    // item.unit_cost = values.unit_cost[item._id];\n                    // item.discount = values.discount[item._id];\n                    // item.discount_type = values.discount_type[item._id];\n                    // item.offers = values.offers;\n                    switch (item.item_type) {\n                        case PROCEDURES:\n                            reqData.procedure.push({\n                                \"name\": item.name,\n                                \"unit\": item.unit,\n                                \"procedure\": item.procedure,\n                                \"default_notes\": null,\n                                \"is_active\": true,\n                                \"margin\": item.margin,\n                                \"taxes\": item.taxes,\n                                \"unit_cost\": item.unit_cost,\n                                // \"unit_cost\": item.total_unit_cost?item.total_unit_cost:item.unit_cost,\n                                \"discount\": item.discount,\n                                \"discount_type\": item.discount_type,\n                                \"offers\": item.offers,\n                                \"doctor\": item.selectedDoctor ? item.selectedDoctor.id : null,\n                                id: that.props.editId ? item.id : undefined\n                            });\n                            break;\n                        case INVENTORY:\n                            reqData.inventory.push({\n                                \"inventory\": item.inventory,\n                                \"name\": item.name,\n                                \"unit\": item.unit,\n                                \"taxes\": item.taxes,\n                                \"unit_cost\": item.unit_cost,\n                                // \"unit_cost\": item.total_unit_cost?item.total_unit_cost:item.unit_cost,\n                                \"discount\": item.discount,\n                                \"discount_type\": item.discount_type,\n                                \"offers\": item.offers,\n                                \"doctor\": item.selectedDoctor ? item.selectedDoctor.id : null,\n                                \"instruction\": item.instruction,\n                                \"is_active\": true,\n                                batch_number: item.selectedBatch ? item.selectedBatch.batch_number : null,\n                                id: that.props.editId ? item.id : undefined\n                            });\n                            break;\n                        default:\n                            return null;\n                    }\n                });\n                let successFn = function (data) {\n                    that.setState({\n                        saveLoading: false\n                    });\n                    displayMessage(\"Inventory updated successfully\");\n                    that.props.loadData();\n                    if (goBack) {\n                        that.props.history.goBack()\n                    } else {\n                        let url = '/patient/' + that.props.match.params.id + '/billing/payments/add?invoices=' + data.id;\n                        that.props.history.push(url);\n                    }\n                };\n                let errorFn = function () {\n                    that.setState({\n                        saveLoading: false\n                    });\n                };\n                if (that.props.editId) {\n                    putAPI(interpolate(SINGLE_INVOICE_API, [that.props.editId]), reqData, successFn, errorFn);\n                } else {\n                    postAPI(CREATE_OR_EDIT_INVOICES, reqData, successFn, errorFn);\n                }\n\n            }\n        });\n    }\n    addItemThroughQR = (value) => {\n        let that = this;\n        that.setState({\n            loadingQr: true,\n        })\n        let qrSplitted = value.split('*');\n        let successFn = function (data) {\n\n            let item = data;\n            let {setFieldsValue, getFieldsValue, getFieldValue} = that.props.form;\n            let randomId = Math.random().toFixed(7);\n            let flag = true\n            that.state.tableFormValues.forEach(function (row) {\n                if (row.name == qrSplitted[0]) {\n                    let _id = row._id;\n                    let batch = row.selectedBatch.batch_number;\n                    let quantity = getFieldValue(`unit[${_id}]`);\n                    if (batch == qrSplitted[1]) {\n                        flag = false;\n                        setFieldsValue({\n                            [`unit[${_id}]`]: quantity + 1\n                        })\n                    }\n                }\n            });\n            if (flag) {\n                let unit_cost = null;\n                if (data.item_type_stock && data.item_type_stock.item_stock)\n                    data.item_type_stock.item_stock.forEach(function (stock) {\n                        if (stock.batch_number == qrSplitted[1]) {\n                            data.selectedBatch = stock;\n                            unit_cost = stock.unit_cost\n                        }\n                    })\n                that.add({...data, item_type: INVENTORY}, randomId);\n\n                setFieldsValue({\n                    [`unit_cost[${randomId}]`]: unit_cost,\n                })\n            }\n            that.setState(function (prevState) {\n                // if (prevState.items && prevState.items[INVENTORY]) {\n                //     prevState.items[INVENTORY].forEach(function (inventItem) {\n                //         console.log(item.inventory_item)\n                //         if (inventItem.id == item.inventory_item) {\n                //             console.log(inventItem);\n                //             that.add({...inventItem, item_type: INVENTORY});\n                //\n                //         }\n                //     })\n                // }\n                return {\n                    loadingQr: false,\n                    qrValue: ''\n                }\n            });\n        }\n        let errorFn = function () {\n\n        }\n        getAPI(SEARCH_THROUGH_QR, successFn, errorFn, {qr: value, form: 'Invoice'})\n    }\n    setQrValue = (e) => {\n        let value = e.target.value;\n        this.setState({\n            qrValue: value\n        })\n    }\n    searchValues = (e, type) => {\n        let that = this;\n        let value = e.target.value;\n        this.setState({\n            searchItem: value,\n        }, function () {\n            if (type == INVENTORY)\n                that.loadInventoryItemList();\n            else if (type == PRESCRIPTIONS)\n                that.loadPrescriptions();\n            else if (type == PROCEDURES)\n                that.loadProcedures();\n        })\n\n    }\n    changeNetPrice = (id, value) => {\n        let that = this;\n        const {getFieldsValue, setFields} = this.props.form;\n        setTimeout(function () {\n            let values = getFieldsValue();\n            if (values.unit_cost[id] || values.unit[id] || values.discount[id] || values.discount_type[id]) {\n                that.setState(function (prevState) {\n                    let newTableValues = []\n                    prevState.tableFormValues.forEach(function (tableObj) {\n                        if (tableObj._id == id) {\n                            let totalTaxAmount = 0;\n                            let initialDiscount = 0;\n                            let initialDiscountType = '%';\n                            let offer = null;\n                            let selectOption = tableObj.selectOption || tableObj.selectOption == false ? tableObj.selectOption : false;\n                            values.taxes[id].forEach(function (taxid) {\n                                prevState.taxes_list.forEach(function (taxObj) {\n                                    if (taxObj.id == taxid)\n                                        totalTaxAmount += taxObj.tax_value;\n                                })\n                            });\n                            if (value && value == '0') {\n                                selectOption = false\n                            }\n                            if (values.discount_type && values.discount_type[id]) {\n                                initialDiscount = values.discount[id];\n                                initialDiscountType = values.discount_type[id];\n                                offer = null;\n                            } else {\n                                initialDiscount = values.discount[id] ? values.discount[id].toString().split('#')[0] : '';\n                                initialDiscountType = values.discount[id] ? values.discount[id].toString().split('#')[1] : '';\n                                offer = values.discount[id] ? values.discount[id].toString().split('#')[2] : null;\n                            }\n\n                            let total = values.unit[id] * (values.unit_cost[id] ? values.unit_cost[id] : 0);\n\n                            if (initialDiscountType == '%' && initialDiscount) {\n                                if (initialDiscount > 100) {\n                                    initialDiscount = 100\n                                }\n                                total *= (1 - (initialDiscount * 0.01));\n                            } else if (initialDiscountType == 'INR' && initialDiscount) {\n                                if (total > initialDiscount) {\n                                    total -= initialDiscount;\n                                } else {\n                                    total = 0;\n                                }\n                            }\n\n                            total *= (1 + totalTaxAmount * 0.01);\n                            let totalWithoutTaxWithDiscount = total / values.unit[id];\n\n                            newTableValues.push({\n                                ...tableObj,\n                                total_unit_cost: totalWithoutTaxWithDiscount,\n                                total: total,\n                                selectOption: selectOption,\n                                discount: initialDiscount,\n                                discount_type: initialDiscountType,\n                                offers: offer\n                            })\n                        } else {\n                            newTableValues.push(tableObj);\n                        }\n                    })\n                    return {tableFormValues: newTableValues}\n                })\n            } else {\n                that.setState({\n                    retail_price: 0\n                })\n            }\n            that.checkPromoCode();\n        }, 1000);\n\n    };\n    applyPromoCodeDiscounts = (discountValue) => {\n        let that = this;\n        const {setFieldsValue, getFieldsValue} = that.props.form;\n        let newTableValues = [];\n        let values = getFieldsValue();\n        let initialDiscount = discountValue;\n        let valueToSet = {};\n        that.state.tableFormValues.forEach(function (tableObj) {\n            let totalTaxAmount = 0;\n            let initialDiscountType = 'INR';\n            let discountApplied = 0;\n            let offer = null;\n            let selectOption = tableObj.selectOption || tableObj.selectOption == false ? tableObj.selectOption : false;\n            values.taxes[tableObj._id].forEach(function (taxid) {\n                that.state.taxes_list.forEach(function (taxObj) {\n                    if (taxObj.id == taxid)\n                        totalTaxAmount += taxObj.tax_value;\n                })\n            });\n\n            let total = values.unit[tableObj._id] * (values.unit_cost[tableObj._id] ? values.unit_cost[tableObj._id] : 0);\n\n            if (initialDiscountType == 'INR' && initialDiscount) {\n                if (total > initialDiscount) {\n                    total -= initialDiscount;\n                    discountApplied = initialDiscount;\n                    initialDiscount = 0;\n\n                } else {\n                    initialDiscount -= total;\n                    discountApplied = total;\n                    total = 0;\n                }\n            }\n\n            total *= (1 + totalTaxAmount * 0.01);\n            let totalWithoutTaxWithDiscount = total / values.unit[tableObj._id];\n\n            newTableValues.push({\n                ...tableObj,\n                total_unit_cost: totalWithoutTaxWithDiscount,\n                total: total,\n                selectOption: selectOption,\n                discount: initialDiscount,\n                discount_type: initialDiscountType,\n                offers: offer\n            })\n            valueToSet[`discount[${tableObj._id}]`] = discountApplied.toFixed(2);\n            valueToSet[`discount_type[${tableObj._id}]`] = initialDiscountType;\n        });\n        that.setState({\n            tableFormValues: newTableValues\n        });\n        setFieldsValue(valueToSet);\n    }\n    loadLoyaltyDiscount = () => {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                offers: data,\n                // loading: false\n            })\n        };\n        let errorFn = function () {\n            that.setState({\n                // loading: true\n            })\n        };\n        getAPI(interpolate(OFFERS, [this.props.active_practiceId]), successFn, errorFn);\n    };\n    onChangeOption = (type, id) => {\n        let that = this;\n        that.setState(function (prevState) {\n            let tempArr = [];\n\n            prevState.tableFormValues.forEach(function (formValue) {\n\n                if (formValue._id == id) {\n                    tempArr.push({...formValue, selectOption: true})\n                } else {\n                    tempArr.push(formValue)\n                }\n            });\n            return {tableFormValues: tempArr}\n        });\n    };\n    onChangeOffer = (value, id) => {\n        let that = this;\n        that.setState(function (prevState) {\n            let selectedOffer = [];\n            prevState.tableFormValues.forEach(function (formValue) {\n                if (formValue._id == id) {\n\n                    if (value == 'none') {\n                        selectedOffer.push({...formValue, loyaltyDiscount: null})\n                    }\n                    if (value == '0') {\n                        selectedOffer.push({...formValue, selectOption: false})\n                    } else {\n                        prevState.offers.forEach(function (item) {\n\n                            if (item.id == value) {\n                                selectedOffer.push({...formValue, loyaltyDiscount: item.discount})\n                            }\n                        });\n                    }\n                } else {\n                    selectedOffer.push(formValue);\n                }\n            });\n            return {tableFormValues: selectedOffer}\n\n        });\n\n    };\n\n\n    onchangeDiscountSimple = (value, id) => {\n        console.log(value, id);\n        let that = this;\n        that.setState(function (prevState) {\n            let selectedOffer = [];\n            prevState.tableFormValues.forEach(function (formValue) {\n                if (formValue._id == id) {\n\n                    let retailPrice = formValue.unit_cost / (1 + value * 0.01);\n                    console.log(retailPrice);\n                    selectedOffer.push({...formValue, loyaltyDiscount: value})\n\n                } else {\n                    selectedOffer.push(formValue);\n                }\n            });\n            return {tableFormValues: selectedOffer}\n\n        });\n\n    }\n    enterPromoCode = (e) => {\n        this.setState({\n            promoCode: e.target.value\n        })\n    }\n    calculateGrandTotalWithoutDiscount = () => {\n        let grandTotal = 0;\n        let that = this;\n        const {getFieldsValue} = this.props.form;\n        let values = getFieldsValue();\n        this.state.tableFormValues.forEach(function (tableObj) {\n            let totalTaxAmount = 0;\n            values.taxes[tableObj._id].forEach(function (taxid) {\n                that.state.taxes_list.forEach(function (taxObj) {\n                    if (taxObj.id == taxid)\n                        totalTaxAmount += taxObj.tax_value;\n                })\n            });\n            let total = values.unit[tableObj._id] * (values.unit_cost[tableObj._id] ? values.unit_cost[tableObj._id] : 0);\n            total *= (1 + totalTaxAmount * 0.01);\n            grandTotal += total\n        });\n        return grandTotal;\n    };\n    checkPromoCode = (e) => {\n        let that = this;\n        that.setState({\n            promoCodeCheckLoading: true\n        })\n        let successFn = function (data) {\n            that.setState({\n                appliedPromoCodeDiscount: data.discount,\n                promoCodeCheckLoading: false\n            });\n            that.applyPromoCodeDiscounts(data.discount)\n        };\n        let errorFn = function () {\n\n            that.setState({\n                promoCodeCheckLoading: false, appliedPromoCodeDiscount: null, promoCode: ''\n            })\n        };\n        let params = {\n            promo_code: this.state.promoCode,\n            practice: this.props.active_practiceId,\n            patient: that.props.match.params.id,\n            amount: this.calculateGrandTotalWithoutDiscount()\n        };\n        if (params.promo_code)\n            getAPI(CHECK_PROMO_CODE, successFn, errorFn, params);\n        else\n            that.setState({\n                promoCodeCheckLoading: false\n            })\n    }\n    removePromoCode = () => {\n        this.setState({\n            appliedPromoCodeDiscount: 0,\n            promoCodeCheckLoading: false,\n            promoCode: ''\n        });\n        this.applyPromoCodeDiscounts(0)\n    }\n\n    render() {\n        let that = this;\n        const {getFieldDecorator} = this.props.form;\n        const formItemLayout = {\n            labelCol: {\n                xs: {span: 24},\n                sm: {span: 4},\n            },\n            wrapperCol: {\n                xs: {span: 24},\n                sm: {span: 24},\n                md: {span: 24},\n                lg: {span: 24},\n                xl: {span: 24},\n            },\n        };\n        const formItemLayoutWithOutLabel = {\n            labelCol: {\n                xs: {span: 24},\n                sm: {span: 24},\n            },\n            wrapperCol: {\n                xs: {span: 24},\n                sm: {span: 24},\n            },\n        };\n        getFieldDecorator('keys', {initialValue: []});\n        let consumeRow = [{\n            title: 'Item Name',\n            key: 'item_name',\n            dataIndex: 'name',\n            width: 180,\n            render: function (name, record) {\n                switch (record.item_type) {\n                    case PROCEDURES:\n                        return <Form.Item\n                            key={`name[${record._id}]`}\n                            {...formItemLayout}>\n                            {getFieldDecorator(`name[${record._id}]`, {\n                                validateTrigger: ['onChange', 'onBlur'],\n                                initialValue: name,\n                                rules: [{\n                                    required: true,\n                                    message: \"This field is required.\",\n                                }],\n                            })(\n                                <Input min={0} placeholder=\"Item name\" size={'small'}/>\n                            )}\n                            <span>by &nbsp;&nbsp;</span>\n                            <Dropdown placement=\"topCenter\" overlay={<Menu>\n                                {that.state.practiceDoctors.map(doctor =>\n                                    <Menu.Item key=\"0\">\n                                        <a onClick={() => that.selectDoctor(doctor, record._id, PROCEDURES)}>{doctor.user.first_name}</a>\n                                    </Menu.Item>)}\n                            </Menu>} trigger={['click']}>\n                                <a className=\"ant-dropdown-link\" href=\"#\">\n                                    <b>\n                                        {record.selectedDoctor.user ? record.selectedDoctor.user.first_name : 'No DOCTORS Found'}\n                                    </b>\n                                </a>\n                            </Dropdown>\n                            <span> &nbsp;&nbsp;on&nbsp;&nbsp;</span>\n                            <DatePicker value={record.selectedDate}\n                                        size={'small'}\n                                        onChange={(value) => that.selectedDate(value, record._id, PROCEDURES)}\n                                        format={\"DD-MM-YYYY\"}/>\n                        </Form.Item>;\n                    case PRESCRIPTIONS:\n                        return <b>{record.name}</b>;\n                    case INVENTORY:\n                        return <div>\n                            <span>{record.name}</span>\n\n                            <span><br/>by &nbsp;&nbsp;</span>\n                            <Dropdown placement=\"topCenter\" overlay={<Menu>\n                                {that.state.practiceDoctors.map(doctor =>\n                                    <Menu.Item key={doctor.id}>\n                                        <a onClick={() => that.selectDoctor(doctor, record._id, INVENTORY)}>{doctor.user.first_name}</a>\n                                    </Menu.Item>)}\n                            </Menu>} trigger={['click']}>\n                                <a className=\"ant-dropdown-link\" href=\"#\">\n                                    <b>\n                                        {record.selectedDoctor.user ? record.selectedDoctor.user.first_name : 'No DOCTORS Found'}\n                                    </b>\n                                </a>\n                            </Dropdown>\n                            <span><br/>from batch &nbsp;&nbsp;</span>\n                            <Dropdown placement=\"topCenter\" overlay={<Menu>\n                                {that.state.itemBatches[record.inventory] && that.state.itemBatches[record.inventory].map((batch, index) =>\n                                    (moment() >= moment(batch.expiry_date) ? <Menu.Item key={index} disabled={true}>\n                                        {batch.batch_number}&nbsp;({batch.quantity}) &nbsp;&nbsp;{batch.expiry_date}\n                                    </Menu.Item> : <Menu.Item key={index}>\n                                        <a onClick={() => that.selectBatch(batch, record._id, INVENTORY)}>{batch.batch_number}&nbsp;({batch.quantity}) &nbsp;&nbsp;{batch.expiry_date}</a>\n                                    </Menu.Item>))}\n                            </Menu>} trigger={['click']}>\n                                <a className=\"ant-dropdown-link\" href=\"#\">\n                                    <b>\n                                        {record.selectedBatch ? record.selectedBatch.batch_number : 'Select Batch'}\n                                    </b>\n                                </a>\n                            </Dropdown>\n                        </div>\n                    default:\n                        return null;\n                }\n            }\n        }];\n        consumeRow = consumeRow.concat([{\n            title: 'Unit',\n            key: 'unit',\n            width: 100,\n            dataIndex: 'unit',\n            render: (item, record) => (record.item_type == INVENTORY ?\n                    <Form.Item\n                        key={`unit[${record._id}]`}\n                        {...formItemLayout}>\n                        {getFieldDecorator(`unit[${record._id}]`, {\n                            validateTrigger: ['onChange', 'onBlur'],\n                            initialValue: record.unit || 1,\n                            rules: [{\n                                required: true,\n                                message: \"This field is required.\",\n                            }],\n                        })(\n                            <InputNumber min={1}\n                                         max={(record.selectedBatch && that.state.stocks[record.inventory] && that.state.stocks[record.inventory][record.selectedBatch.batch_number] ? that.state.stocks[record.inventory][record.selectedBatch.batch_number] : 0)}\n                                         placeholder=\"units\" size={'small'}\n                                         onChange={(value) => this.changeNetPrice(record._id, record.discount)}\n                                         disabled={!(record.selectedBatch && that.state.stocks[record.inventory] && that.state.stocks[record.inventory][record.selectedBatch.batch_number])}/>\n                        )}\n                    </Form.Item>\n                    : <Form.Item\n                        key={`unit[${record._id}]`}\n                        {...formItemLayout}>\n                        {getFieldDecorator(`unit[${record._id}]`, {\n                            initialValue: record.unit || 1,\n                            validateTrigger: ['onChange', 'onBlur'],\n                            rules: [{\n                                required: true,\n                                message: \"This field is required.\",\n                            }],\n                        })(\n                            <InputNumber min={1} max={100} placeholder=\"unit\" size={'small'}\n                                         onChange={(value) => this.changeNetPrice(record._id, record.discount)}/>\n                        )}\n                    </Form.Item>\n            )\n        }, {\n            title: 'Unit Cost',\n            key: 'unit_cost',\n            width: 100,\n            dataIndex: 'unit_cost',\n\n            render: (item, record) => <Form.Item\n                key={`unit_cost[${record._id}]`}\n                {...formItemLayout}>\n                {getFieldDecorator(`unit_cost[${record._id}]`, {\n                    validateTrigger: ['onChange', 'onBlur'],\n                    initialValue: record.item_type == INVENTORY ? record.retail_without_tax : record.cost,\n                    rules: [{\n                        required: true,\n                        message: \"This field is required.\",\n                    }],\n                })(\n                    <InputNumber min={1} placeholder=\"Unit Cost\" size={'small'}\n                                 onChange={() => that.changeNetPrice(record._id, record.discount)}/>\n                )}\n            </Form.Item>\n            // render: (item, record) => item ? item.toFixed(2) : null\n        }, {\n            title: 'Discount',\n            key: 'discount',\n            dataIndex: 'discount',\n            render: (item, record) => (record.selectOption ?\n                <Form.Item key={`discount[${record._id}]`}\n                           extra={\n                               <span>{record && record.discount ? record.discount + ' ' + record.discount_type + ' Discount' : null} </span>}>\n                    {getFieldDecorator(`discount[${record._id}]`, {\n                        initialValue: record.offers,\n                        validateTrigger: ['onChange', 'onBlur'],\n                    })\n                    (<Select style={{width: 150}} onChange={(value) => that.changeNetPrice(record._id, value)}\n                             size={\"small\"} disabled={this.state.appliedPromoCodeDiscount}>\n                        <Select.Option value={'0'}>Custom Offer</Select.Option>\n                        {that.state.offers.map(option => <Select.Option\n                            value={option.discount + '#' + option.unit + '#' + option.id}>{option.code}</Select.Option>)}\n                    </Select>)\n                    }\n                </Form.Item> : <Form.Item\n                    extra={<a onClick={() => that.onChangeOption('selectOption', record._id)}\n                              disabled={this.state.appliedPromoCodeDiscount}>Choose Offer</a>}\n                    key={`discount[${record._id}]`}\n                    {...formItemLayout}>\n                    {getFieldDecorator(`discount[${record._id}]`, {\n                        initialValue: record.discount ? record.discount : 0,\n                        validateTrigger: ['onChange', 'onBlur'],\n                    })(\n                        <Input placeholder=\"discount\"\n                               disabled={this.state.appliedPromoCodeDiscount}\n                               addonAfter={getFieldDecorator(`discount_type[${record._id}]`, {\n                                   initialValue: record.discount_type || '%',\n                               })(\n                                   <Select onChange={(value) => that.changeNetPrice(record._id, value)}\n                                           disabled={this.state.appliedPromoCodeDiscount}>\n                                       {CURRENCY_TYPE.map(option => <Select.Option\n                                           value={option.value}> {option.value}</Select.Option>)}\n                                   </Select>\n                               )}\n                               size={\"small\"}\n                               style={{width: 150}} onChange={(e) => this.changeNetPrice(record._id, e.target.value)}/>\n                    )}\n                </Form.Item>)\n        }, {\n            title: 'Taxes',\n            key: 'taxes',\n            dataIndex: 'taxes',\n            render: (item, record) => <Form.Item\n                key={`taxes[${record._id}]`}\n                {...formItemLayout}>\n                {getFieldDecorator(`taxes[${record._id}]`, {\n                    initialValue: record.taxes || [],\n                    validateTrigger: ['onChange', 'onBlur'],\n                })(\n                    <Select placeholder=\"Taxes\" size={'small'} mode={\"multiple\"}\n                            style={{width: 150}}\n                            onChange={() => that.changeNetPrice(record._id, record.discount)}>\n                        {this.state.taxes_list && this.state.taxes_list.map((tax) => <Select.Option\n                            value={tax.id}>{tax.name}@{tax.tax_value}%</Select.Option>)}\n                    </Select>\n                )}\n            </Form.Item>\n        }, {\n            title: 'Total Unit Cost',\n            key: 'total_unit_cost',\n            width: 80,\n            align: 'right',\n            dataIndex: 'total_unit_cost',\n            render: (item, record) =>\n                <span>{item ? item.toFixed(2) : '0.00'}</span>,\n        }, {\n            title: 'Total',\n            key: 'total',\n            width: 80,\n            align: 'right',\n            dataIndex: 'total',\n            render: (item, record) => item ? item.toFixed(2) : '0.00'\n\n        }]);\n\n        consumeRow = consumeRow.concat([{\n            key: '_id',\n            dataIndex: '_id',\n            render: (value, record) => <Button icon={\"close\"} onClick={() => that.remove(record._id)}\n                                               type={\"danger\"} shape=\"circle\"\n                                               size=\"small\"/>\n        }]);\n\n        return <div>\n            <Spin spinning={this.state.saveLoading} tip=\"Saving Invoice...\">\n                <Spin spinning={this.state.promoCodeCheckLoading} tip=\"Checking Promo Code and Discounts...\">\n                    <Card\n                        title={this.props.editId ? \"Edit Invoice (INV \" + this.props.editId + \")\" : \"Add Invoice\"}\n                        extra={<Search\n                            loading={this.state.loadingQr}\n                            value={this.state.qrValue}\n                            onChange={this.setQrValue}\n                            placeholder=\"Search QR Code\"\n                            onSearch={this.addItemThroughQR}\n                            style={{width: 200}}\n                        />}\n                        bodyStyle={{padding: 0}}>\n                        <Row>\n                            <Col span={6}>\n                                <Tabs size=\"small\" type=\"card\">\n                                    <TabPane tab={INVENTORY} key={INVENTORY}>\n                                        <div style={{backgroundColor: '#ddd', padding: 8}}>\n                                            <Input.Search placeholder={\"Search in \" + INVENTORY}\n                                                          onChange={(value) => this.searchValues(value, INVENTORY)}/>\n                                        </div>\n                                        <List size={\"small\"}\n                                              itemLayout=\"horizontal\"\n                                              loading={this.state.loadingInventory}\n                                              dataSource={this.state.items && this.state.items[INVENTORY] ? this.state.items[INVENTORY].results : []}\n                                              renderItem={item => (\n                                                  <List.Item>\n                                                      <List.Item.Meta\n                                                          title={item.name + ' (' + item.total_quantity + ')'}\n                                                      />\n                                                      <Button type=\"primary\" size=\"small\" shape=\"circle\"\n                                                              onClick={() => this.add({\n                                                                  ...item,\n                                                                  item_type: INVENTORY\n                                                              })}\n                                                              icon={\"arrow-right\"}/>\n                                                  </List.Item>)}/>\n                                        {this.state.items && this.state.items[INVENTORY] ?\n                                            <div style={{textAlign: 'center'}}>\n                                                <a style={{margin: 5}}\n                                                   disabled={!this.state.items[INVENTORY].previous}\n                                                   onClick={() => this.loadInventoryItemList(this.state.items[INVENTORY].previous)}>\n                                                    <Icon type=\"left\"/>Previous\n                                                </a>\n                                                <Divider type={\"vertical\"}/>\n                                                <a style={{margin: 5}} disabled={!this.state.items[INVENTORY].next}\n                                                   onClick={() => this.loadInventoryItemList(this.state.items[INVENTORY].next)}>\n                                                    Next<Icon type=\"right\"/>\n                                                </a>\n                                            </div> : null}\n                                    </TabPane>\n                                    <TabPane tab={PRESCRIPTIONS} key={PRESCRIPTIONS}>\n                                        <List size={\"small\"}\n                                              itemLayout=\"horizontal\"\n                                              dataSource={this.state.items ? this.state.items[PRESCRIPTIONS] : []}\n                                              renderItem={item => (\n                                                  <List.Item>\n                                                      <List.Item.Meta\n                                                          title={item.drugs.map(drug_item => <div>\n                                                              <span>{drug_item.name}</span> {drug_item.inventory.maintain_inventory ? null :\n                                                              <Tag color=\"red\" style={{\n                                                                  float: 'right',\n                                                                  lineHeight: '18px'\n                                                              }}>Not Sold</Tag>}<br/></div>)}\n                                                          description={item.doctor ?\n                                                              <Tag\n                                                                  color={item.doctor ? item.doctor.calendar_colour : null}>\n                                                                  <b>{\"prescribed by  \" + item.doctor.user.first_name} </b>\n                                                              </Tag> : null}\n                                                      />\n                                                      <Button type=\"primary\" size=\"small\" shape=\"circle\"\n                                                              onClick={() => this.addPrescription({...item})}\n                                                              icon={\"arrow-right\"}/>\n                                                  </List.Item>)}/>\n                                    </TabPane>\n                                    <TabPane tab={PROCEDURES} key={PROCEDURES}>\n                                        <div style={{backgroundColor: '#ddd', padding: 8}}>\n                                            <Input.Search placeholder={\"Search in \" + PROCEDURES}\n                                                          onChange={(value) => this.searchValues(value, PROCEDURES)}/>\n                                        </div>\n                                        <List size={\"small\"}\n                                              itemLayout=\"horizontal\"\n                                              dataSource={this.state.items && this.state.items[PROCEDURES] ? this.state.items[PROCEDURES].results : []}\n                                              renderItem={item => (\n                                                  <List.Item>\n                                                      <List.Item.Meta\n                                                          title={item.name}\n                                                      />\n                                                      <Button type=\"primary\" size=\"small\" shape=\"circle\"\n                                                              onClick={() => this.add({\n                                                                  ...item,\n                                                                  item_type: PROCEDURES\n                                                              })}\n                                                              icon={\"arrow-right\"}/>\n                                                  </List.Item>)}/>\n                                        {this.state.items && this.state.items[PROCEDURES] ?\n                                            <div style={{textAlign: 'center'}}>\n                                                <a style={{margin: 5}}\n                                                   disabled={!this.state.items[PROCEDURES].previous}\n                                                   onClick={() => this.loadProcedures(this.state.items[PROCEDURES].previous)}>\n                                                    <Icon type=\"left\"/>Previous\n                                                </a>\n                                                <Divider type={\"vertical\"}/>\n                                                <a style={{margin: 5}} disabled={!this.state.items[PROCEDURES].next}\n                                                   onClick={() => this.loadProcedures(this.state.items[PROCEDURES].next)}>\n                                                    Next<Icon type=\"right\"/>\n                                                </a>\n                                            </div> : null}\n                                    </TabPane>\n\n                                </Tabs>\n                            </Col>\n                            <Col span={18}>\n                                <Form>\n                                    <Table pagination={false} loading={that.state.loading}\n                                           bordered={true}\n                                           dataSource={this.state.tableFormValues}\n                                           columns={consumeRow}/>\n                                    <Affix offsetBottom={0}>\n                                        <Card>\n                                            <Col span={8}>\n                                                <Form.Item\n                                                    label={\"Notes\"}\n                                                    key={`notes`}\n                                                    {...formItemLayout}>\n                                                    {getFieldDecorator(`notes`, {\n                                                        initialValue: this.state.notes,\n                                                        validateTrigger: ['onChange', 'onBlur'],\n                                                    })(\n                                                        <Input.TextArea row={2} placeholder=\"unit\" size={'small'}/>\n                                                    )}\n                                                </Form.Item>\n                                                <h3>Grand\n                                                    Total: <b>{this.state.tableFormValues.reduce(function (total, item) {\n                                                        return (parseFloat(total) + (item && item.total ? item.total : 0)).toFixed(2);\n                                                    }, 0)}</b>\n                                                </h3>\n                                            </Col>\n                                            <span> &nbsp;&nbsp;on&nbsp;&nbsp;</span>\n                                            <DatePicker value={this.state.selectedDate}\n                                                        onChange={(value) => this.selectedDefaultDate(value)}\n                                                        format={\"DD-MM-YYYY\"}\n                                                        allowClear={false}/>\n\n                                            <Form.Item {...formItemLayoutWithOutLabel}\n                                                       style={{marginBottom: 0, float: 'right'}}>\n\n                                                <Button type=\"primary\" htmlType=\"submit\"\n                                                        onClick={() => this.handleSubmit(true)}\n                                                        style={{margin: 5}}>Save Invoice</Button>\n                                                <Button type=\"primary\" htmlType=\"submit\"\n                                                        onClick={() => this.handleSubmit(false)}\n                                                        style={{margin: 5}}>Save & Create Payment</Button>\n                                                {that.props.history ?\n                                                    <Button style={{margin: 5, float: 'right'}}\n                                                            onClick={() => that.props.history.goBack()}>\n                                                        Cancel\n                                                    </Button> : null}\n                                            </Form.Item>\n                                        </Card>\n                                    </Affix>\n                                </Form>\n                                <Row>\n                                    <Col span={12} style={{padding: 10}}>\n\n                                        <div>\n                                            {this.state.appliedPromoCodeDiscount ? <div>\n                                                <Tag>'{this.state.promoCode}' Applied <Icon\n                                                    onClick={() => this.removePromoCode()}\n                                                    theme=\"twoTone\" twoToneColor=\"#f00\"\n                                                    type={\"close-circle\"}/></Tag>\n                                                <Text type={\"success\"}><br/>Discount\n                                                    INR {this.state.appliedPromoCodeDiscount}</Text>\n                                            </div> : <div>\n                                                <Search\n                                                    enterButton=\"Apply\"\n                                                    value={this.state.promoCode}\n                                                    placeholder=\"Promo Code\"\n                                                    onChange={this.enterPromoCode}\n                                                    onSearch={this.checkPromoCode}\n                                                    style={{width: 200}}\n                                                />\n                                            </div>}\n                                        </div>\n                                    </Col>\n                                </Row>\n                            </Col>\n                        </Row>\n                    </Card>\n                </Spin>\n            </Spin>\n        </div>\n\n    }\n}\n\nexport default Form.create()(Addinvoicedynamic);\n","import React from \"react\";\nimport {\n    Affix,\n    Button,\n    Card,\n    Col,\n    DatePicker,\n    Dropdown,\n    Form,\n    Input,\n    InputNumber,\n    List,\n    Menu,\n    Row,\n    Select,\n    Spin,\n    Table,\n    Tabs,\n    Tag,\n    Checkbox, Divider\n} from \"antd\";\nimport {displayMessage, getAPI, interpolate, postAPI, putAPI} from \"../../../utils/common\";\nimport {DRUG, INVENTORY, PRESCRIPTIONS, PROCEDURES} from \"../../../constants/hardData\";\nimport {\n    INVENTORY_ITEM_API,\n    PROCEDURE_CATEGORY,\n    SEARCH_THROUGH_QR,\n    TAXES,\n    UNPAID_PRESCRIPTIONS,\n    INVOICE_RETURN_API\n} from \"../../../constants/api\";\nimport moment from \"moment\";\nimport {loadDoctors} from \"../../../utils/clinicUtils\";\n\nconst {Search} = Input;\nconst {MonthPicker} = DatePicker;\nconst TabPane = Tabs.TabPane;\n\nlet tableFormFields = {\n    _id: null,\n    quantity: 0,\n    batch: null\n};\n\nclass AddReturnInvoice extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            editInvoice: this.props.editInvoice,\n            classType: props.type,\n            tableFormValues: [],\n            maxQuantityforConsume: {},\n            items: {},\n            practiceDoctors: [],\n            selectedPrescriptions: [],\n            selectedDate: moment(),\n            stocks: {},\n            itemBatches: {},\n            saveLoading: false,\n            qrValue: '',\n            searchItem: '',\n            return_with_tax: false,\n            returnCashAvailable: 0\n        }\n\n    }\n\n    componentDidMount() {\n        loadDoctors(this);\n        this.loadInventoryItemList();\n        this.loadProcedures();\n        this.loadPrescriptions();\n        this.loadTaxes();\n        if (this.props.editId) {\n            this.loadEditInvoiceData();\n        }\n    }\n\n    selectedDefaultDate = (date) => {\n        this.setState({\n            selectedDate: date\n        })\n    }\n    loadEditInvoiceData = () => {\n        let invoice = this.props.editInvoice;\n        this.setState(function (prevState) {\n            let tableValues = [];\n            invoice.procedure.forEach(function (proc) {\n                tableValues.push({\n                    ...proc.procedure_data,\n                    ...proc,\n                    selectedDoctor: proc.doctor_data,\n                    selectedDate: moment(proc.date).isValid() ? moment(proc.date) : null,\n                    _id: Math.random().toFixed(7),\n                    item_type: PROCEDURES\n                })\n            });\n            let stocks = {...prevState.stocks};\n            invoice.inventory.forEach(function (proc) {\n\n                if (prevState.itemBatches[proc.inventory]) {\n                    if (stocks[proc.inventory]) {\n                        let stock_quantity = stocks[proc.inventory];\n                        if (stock_quantity[proc.batch_number])\n                            stock_quantity[proc.batch_number] += proc.unit;\n                        else\n                            stock_quantity[proc.batch_number] += proc.unit;\n                    } else {\n                        let stock_quantity = {};\n                        stock_quantity[proc.batch_number] = proc.unit;\n                        stocks[proc.inventory] = stock_quantity;\n                    }\n                    prevState.itemBatches[proc.inventory].forEach(function (batchObj) {\n                        if (batchObj.batch_number == proc.batch_number)\n                            proc.selectedBatch = batchObj;\n                    });\n                }\n                tableValues.push({\n                    ...proc.inventory_item_data,\n                    ...proc,\n                    selectedDoctor: proc.doctor_data,\n                    _id: Math.random().toFixed(7),\n                    item_type: INVENTORY,\n\n                });\n            });\n\n            return {\n                tableFormValues: tableValues,\n                selectedDate: moment(invoice.date).isValid() ? moment(invoice.date) : null,\n                stocks: stocks\n            }\n        })\n    }\n\n    loadInventoryItemList() {\n        let that = this;\n        let successFn = function (reqData) {\n            let data = reqData.results;\n            let drugItems = [];\n            let equipmentItems = [];\n            let supplesItems = [];\n\n            that.setState(function (prevState) {\n                    let stocks = {...prevState.stocks};\n                    let itemBatches = {};\n                    data.forEach(function (item) {\n                        if (item.item_type == DRUG) {\n                            drugItems.push(item);\n                            if (stocks[item.id]) {\n                                let stock_quantity = stocks[item.id]\n                                if (item.item_type_stock && item.item_type_stock.item_stock)\n                                    item.item_type_stock.item_stock.forEach(function (stock) {\n                                        if (stock_quantity[stock.batch_number])\n                                            stock_quantity[stock.batch_number] += stock.quantity;\n                                        else\n                                            stock_quantity[stock.batch_number] += stock.quantity;\n                                    });\n                            } else {\n                                let stock_quantity = {}\n                                if (item.item_type_stock && item.item_type_stock.item_stock)\n                                    item.item_type_stock.item_stock.forEach(function (stock) {\n                                        stock_quantity[stock.batch_number] = stock.quantity\n                                    });\n                                stocks[item.id] = stock_quantity;\n                            }\n                            itemBatches[item.id] = item.item_type_stock.item_stock;\n                        }\n\n                    });\n                    let items = that.state.items;\n                    items[INVENTORY] = drugItems;\n                    return {\n                        items: items,\n                        stocks: {...prevState.stocks, ...stocks},\n                        itemBatches: {...prevState.itemBatches, ...itemBatches}\n                    }\n                }, function () {\n                    if (that.props.editId) {\n                        that.loadEditInvoiceData();\n                    }\n                }\n            )\n\n        }\n        let errorFn = function () {\n        }\n        let paramsApi = {\n            practice: this.props.active_practiceId,\n            maintain_inventory: true,\n        }\n        if (this.state.searchItem) {\n            paramsApi.item_name = this.state.searchItem;\n        }\n\n        getAPI(INVENTORY_ITEM_API, successFn, errorFn, paramsApi);\n    }\n\n    loadProcedures() {\n        var that = this;\n        let successFn = function (data) {\n            let items = that.state.items;\n            items[PROCEDURES] = data;\n            that.setState({\n                items: items,\n            })\n        };\n        let errorFn = function () {\n        };\n\n        getAPI(interpolate(PROCEDURE_CATEGORY, [this.props.active_practiceId]), successFn, errorFn);\n    }\n\n    loadPrescriptions() {\n        var that = this;\n        let successFn = function (data) {\n\n            that.setState(function (prevState) {\n                return {\n                    items: {...prevState.items, [PRESCRIPTIONS]: data}\n                }\n            })\n        };\n        let errorFn = function () {\n        };\n        getAPI(interpolate(UNPAID_PRESCRIPTIONS, [that.props.match.params.id]), successFn, errorFn);\n    }\n\n    loadTaxes() {\n        var that = this;\n        let successFn = function (data) {\n            that.setState({\n                taxes_list: data,\n            })\n        };\n        let errorFn = function () {\n        };\n        getAPI(interpolate(TAXES, [this.props.active_practiceId]), successFn, errorFn);\n\n    }\n\n    remove = (k) => {\n        this.setState(function (prevState) {\n            let newTableFormValues = [];\n            prevState.tableFormValues.forEach(function (formValue) {\n                if (formValue._id != k)\n                    newTableFormValues.push(formValue);\n            });\n            return {\n                tableFormValues: newTableFormValues\n            }\n        });\n    }\n\n\n    add = (item, randId = Math.random().toFixed(7)) => {\n        this.setState(function (prevState) {\n            if (item.item_type == PROCEDURES) {\n                item = {\n                    ...item,\n                    id: undefined,\n                    unit_cost: item.cost,\n                    procedure: item.id,\n                    selectedDoctor: prevState.selectedDoctor ? prevState.selectedDoctor : null,\n                    selectedDate: moment(),\n                    taxes: item.taxes.map(tax => tax.id)\n                }\n            } else if (item.item_type == INVENTORY) {\n                item = {\n                    ...item,\n                    id: undefined,\n                    inventory: item.id,\n                    unit_cost: item.retail_without_tax,\n                    selectedDoctor: prevState.selectedDoctor ? prevState.selectedDoctor : null,\n                }\n            }\n            return {\n                tableFormValues: [...prevState.tableFormValues, {\n                    ...tableFormFields,\n                    ...item,\n                    id: undefined,\n                    _id: randId,\n                }]\n            }\n        });\n    };\n    selectDoctor = (doctor, id, type) => {\n        this.setState(function (prevState) {\n            let finalTableFormValues = [];\n            prevState.tableFormValues.forEach(function (formValue) {\n                if (formValue._id == id && formValue.item_type == type) {\n                    finalTableFormValues.push({...formValue, selectedDoctor: doctor})\n                } else {\n                    finalTableFormValues.push(formValue)\n                }\n            });\n            return {\n                tableFormValues: finalTableFormValues\n            }\n        })\n    }\n    selectedDate = (dateValue, id, type) => {\n        this.setState(function (prevState) {\n            let finalTableFormValues = [];\n            prevState.tableFormValues.forEach(function (formValue) {\n                if (formValue._id == id && formValue.item_type == type) {\n                    finalTableFormValues.push({...formValue, selectedDate: dateValue})\n                } else {\n                    finalTableFormValues.push(formValue)\n                }\n            });\n            return {\n                tableFormValues: finalTableFormValues\n            }\n        })\n    }\n    selectBatch = (batch, id, type) => {\n        this.setState(function (prevState) {\n            let finalTableFormValues = [];\n            prevState.tableFormValues.forEach(function (formValue) {\n                if (formValue._id == id && formValue.item_type == type) {\n                    finalTableFormValues.push({...formValue, selectedBatch: batch})\n                } else {\n                    finalTableFormValues.push(formValue)\n                }\n            });\n            return {\n                tableFormValues: finalTableFormValues\n            }\n        })\n    }\n    addPrescription = (item) => {\n        let that = this;\n        item.drugs.forEach(function (drug_item) {\n            if (drug_item.inventory.maintain_inventory)\n                that.add({...drug_item.inventory, item_type: INVENTORY, inventory: item.inventory.id, id: undefined})\n        });\n        that.setState(function (prevState) {\n            return {selectedPrescriptions: [...prevState.selectedPrescriptions, item.id]}\n        })\n    }\n    handleSubmit = (e) => {\n        let that = this;\n        e.preventDefault();\n        this.props.form.validateFields((err, values) => {\n            if (!err) {\n                that.setState({\n                    saveLoading: true\n                });\n                let reqData = {\n                    bank: '',\n                    number: '',\n                    practice: that.props.active_practiceId,\n                    return_mode: null,\n                    invoice: this.props.editInvoice.id,\n                    procedure: [],\n                    inventory: [],\n                    notes: values.notes,\n                    patient: that.props.match.params.id,\n                    staff: this.props.editInvoice.staff_data ? this.props.editInvoice.staff_data.id : null,\n                    prescription: that.state.selectedPrescriptions,\n                    date: that.state.selectedDate && moment(that.state.selectedDate).isValid() ? that.state.selectedDate.format('YYYY-MM-DD') : null,\n                    with_tax: this.state.return_with_tax ? true : false,\n                    cash_return: values.cash_return,\n                    advance_value : this.state.returnCashAvailable - values.cash_return || 0,\n                };\n                that.state.tableFormValues.forEach(function (item) {\n                    item.unit = values.unit[item._id];\n                    var id = item.id;\n                    delete (item.id);\n                    // item.taxes = values.taxes[item._id];\n                    // item.unit_cost = values.unit_cost[item._id];\n                    // item.discount = values.discount[item._id];\n                    // item.discount_type = '%';\n                    if (item.unit)\n                        switch (item.item_type) {\n                            case PROCEDURES:\n                                reqData.procedure.push({\n                                    ...item,\n                                    // \"name\": item.name,\n                                    \"unit\": item.unit,\n                                    // \"procedure\": item.procedure,\n                                    // \"default_notes\": null,\n                                    // \"is_active\": true,\n                                    // \"margin\": item.margin,\n                                    // \"taxes\": item.taxes,\n                                    // \"unit_cost\": item.unit_cost,\n                                    // \"discount\": item.discount,\n                                    // \"discount_type\": \"%\",\n                                    // \"offers\": 1,\n                                    procedure_inv: id,\n                                    // \"doctor\": item.selectedDoctor ? item.selectedDoctor.id : null,\n                                    // id:item.id\n                                });\n                                break;\n                            case INVENTORY:\n                                reqData.inventory.push({\n                                    ...item,\n                                    // \"inventory\": item.inventory,\n                                    // \"name\": item.name,\n                                    \"unit\": item.unit,\n                                    // \"taxes\": item.taxes,\n                                    // \"unit_cost\": item.unit_cost,\n                                    // \"discount\": item.discount,\n                                    // \"discount_type\": \"%\",\n                                    // \"offers\": null,\n                                    inventory_inv: id,\n                                    // \"doctor\": item.selectedDoctor ? item.selectedDoctor.id : null,\n                                    // \"instruction\": item.instruction,\n                                    // \"is_active\": true,\n                                    // batch_number: item.selectedBatch ? item.selectedBatch.batch_number : null,\n                                    // id: item.id\n                                });\n                                break;\n                            default:\n                                return null;\n                        }\n                });\n                let successFn = function (data) {\n                    that.setState({\n                        saveLoading: false\n                    });\n                    displayMessage(\"Inventory updated successfully\");\n                    that.props.loadData();\n                    let url = '/patient/' + that.props.match.params.id + '/billing/invoices';\n                    that.props.history.push(url);\n                }\n                let errorFn = function () {\n                    that.setState({\n                        saveLoading: false\n                    });\n                }\n\n                postAPI(INVOICE_RETURN_API, reqData, successFn, errorFn);\n\n            }\n        });\n    }\n    addItemThroughQR = (value) => {\n        let that = this;\n        that.setState({\n            loadingQr: true,\n        })\n        let qrSplitted = value.split('*');\n        let successFn = function (data) {\n\n            let item = data;\n            let {setFieldsValue, getFieldsValue, getFieldValue} = that.props.form;\n            let randomId = Math.random().toFixed(7);\n            let flag = true\n            that.state.tableFormValues.forEach(function (row) {\n                if (row.name == qrSplitted[0]) {\n                    let _id = row._id;\n                    let batch = row.selectedBatch.batch_number;\n                    let quantity = getFieldValue(`unit[${_id}]`);\n                    if (batch == qrSplitted[1]) {\n                        flag = false;\n                        setFieldsValue({\n                            [`unit[${_id}]`]: quantity + 1\n                        })\n                    }\n                }\n            });\n            if (flag) {\n                let unit_cost = null;\n                if (data.item_type_stock && data.item_type_stock.item_stock)\n                    data.item_type_stock.item_stock.forEach(function (stock) {\n                        if (stock.batch_number == qrSplitted[1]) {\n                            data.selectedBatch = stock;\n                            unit_cost = stock.unit_cost\n                        }\n                    })\n                that.add({...data, item_type: INVENTORY}, randomId);\n\n                setFieldsValue({\n                    [`unit_cost[${randomId}]`]: unit_cost,\n                })\n            }\n            that.setState(function (prevState) {\n\n                return {\n                    loadingQr: false,\n                    qrValue: ''\n                }\n            });\n        }\n        let errorFn = function () {\n\n        }\n        getAPI(SEARCH_THROUGH_QR, successFn, errorFn, {qr: value, form: 'Invoice'})\n    }\n    setQrValue = (e) => {\n        let value = e.target.value;\n        this.setState({\n            qrValue: value\n        })\n    }\n    searchValues = (e) => {\n        let value = e.target.value;\n        this.setState({\n            searchItem: value,\n        }, function () {\n            this.loadInventoryItemList();\n        })\n\n    }\n    changeNetPrice = (id) => {\n        let that = this;\n        const {getFieldsValue, setFields} = this.props.form;\n        setTimeout(function () {\n            let values = getFieldsValue();\n            if (values.total_unit_cost[id]) {\n\n                that.setState(function (prevState) {\n                    let newTableValues = []\n                    prevState.tableFormValues.forEach(function (tableObj) {\n                        if (tableObj._id == id) {\n                            let totalTaxAmount = 0;\n                            values.taxes[id].forEach(function (taxid) {\n                                prevState.taxes_list.forEach(function (taxObj) {\n                                    if (taxObj.id == taxid)\n                                        totalTaxAmount += taxObj.tax_value;\n                                })\n                            });\n                            let retailPrice = values.total_unit_cost[id] / (1 + totalTaxAmount * 0.01);\n                            newTableValues.push({...tableObj, unit_cost: retailPrice})\n                        } else {\n                            newTableValues.push(tableObj);\n                        }\n                    })\n                    return {tableFormValues: newTableValues}\n                })\n            } else {\n                that.setState({\n                    retail_price: 0\n                })\n            }\n        }, 1000);\n\n    }\n\n    onChangeHandle = (e) => {\n        let that = this;\n        this.setState({\n            return_with_tax: e.target.checked\n        },function(){\n            that.calculateReturnCashAvailable();\n        })\n    }\n\n    calculateReturnCashAvailable = () => {\n        let that = this;\n        let totalAmountPaid = this.state.editInvoice.payments.reduce((a, b) => a + b.pay_amount, 0);\n        let totalInvoiceAmount = this.state.editInvoice.total;\n        let pendingPayment = totalInvoiceAmount - totalAmountPaid;\n        let worthOfReturningItems = 0;\n        const {getFieldsValue} = this.props.form;\n        setTimeout(function () {\n            let values = getFieldsValue();\n            let taxAllowed = that.state.return_with_tax;\n            that.state.tableFormValues.forEach(function (item) {\n                let units = values.unit[item._id];\n                if (item.item_type == INVENTORY) {\n                    worthOfReturningItems += units * item.unit_cost;\n                    worthOfReturningItems += (taxAllowed ? (item.tax_value / item.unit) * units : null);\n                } else if (item.item_type == PRESCRIPTIONS) {\n                    worthOfReturningItems += units * item.unit_cost;\n                    worthOfReturningItems += (taxAllowed ? (item.tax_value / item.unit) * units : null);\n                } else if (item.item_type == PROCEDURES) {\n                    worthOfReturningItems += units * item.unit_cost;\n                    worthOfReturningItems += (taxAllowed ? (item.tax_value / item.unit) * units : null);\n                }\n            });\n            that.setState({\n                returnCashAvailable: (worthOfReturningItems > pendingPayment ? worthOfReturningItems - pendingPayment : 0).toFixed(2)\n            });\n        }, 500);\n\n\n    }\n\n    render() {\n        let that = this;\n        const {getFieldDecorator, getFieldValue, getFieldsValue} = this.props.form;\n        const formItemLayout = {\n            labelCol: {\n                xs: {span: 24},\n                sm: {span: 4},\n            },\n            wrapperCol: {\n                xs: {span: 24},\n                sm: {span: 24},\n                md: {span: 24},\n                lg: {span: 24},\n                xl: {span: 24},\n            },\n        };\n\n        const formItemLayoutWithOutLabel = {\n            labelCol: {\n                xs: {span: 24},\n                sm: {span: 24},\n            },\n            wrapperCol: {\n                xs: {span: 24},\n                sm: {span: 24},\n            },\n        };\n        getFieldDecorator('keys', {initialValue: []});\n        let consumeRow = [{\n            title: 'Item Name',\n            key: 'item_name',\n            dataIndex: 'name',\n            render: function (name, record) {\n                switch (record.item_type) {\n                    case PROCEDURES:\n                        return <Form.Item\n                            key={`name[${record._id}]`}\n                            {...formItemLayout}>\n                            {getFieldDecorator(`name[${record._id}]`, {\n                                validateTrigger: ['onChange', 'onBlur'],\n                                initialValue: name,\n                                rules: [{\n                                    required: true,\n                                    message: \"This field is required.\",\n                                }],\n                            })(\n                                <Input min={0} placeholder=\"Item name\" size={'small'} disabled/>\n                            )}\n                            <span>by &nbsp;&nbsp;</span>\n                            <Dropdown placement=\"topCenter\" disabled overlay={<Menu>\n                                {that.state.practiceDoctors.map(doctor =>\n                                    <Menu.Item key=\"0\">\n                                        <a onClick={() => that.selectDoctor(doctor, record._id, PROCEDURES)}>{doctor.user.first_name}</a>\n                                    </Menu.Item>)}\n                            </Menu>} trigger={['click']}>\n                                <a className=\"ant-dropdown-link\" href=\"#\">\n                                    <b>\n                                        {record.selectedDoctor.user ? record.selectedDoctor.user.first_name : 'No DOCTORS Found'}\n                                    </b>\n                                </a>\n                            </Dropdown>\n                            <span> &nbsp;&nbsp;on&nbsp;&nbsp;</span>\n                            <DatePicker value={record.selectedDate}\n                                        disabled\n                                        size={'small'}\n                                        onChange={(value) => that.selectedDate(value, record._id, PROCEDURES)}\n                                        format={\"DD-MM-YYYY\"}/>\n                        </Form.Item>;\n                    case PRESCRIPTIONS:\n                        return <b>{record.name}</b>;\n                    case INVENTORY:\n                        return <div>\n                            {record.name}\n                            <span><br/>by &nbsp;&nbsp;</span>\n                            <Dropdown placement=\"topCenter\" disabled overlay={<Menu>\n                                {that.state.practiceDoctors.map(doctor =>\n                                    <Menu.Item key={doctor.id}>\n                                        <a onClick={() => that.selectDoctor(doctor, record._id, PROCEDURES)}>{doctor.user.first_name}</a>\n                                    </Menu.Item>)}\n                            </Menu>} trigger={['click']}>\n                                <a className=\"ant-dropdown-link\" href=\"#\">\n                                    <b>\n                                        {record.selectedDoctor && record.selectedDoctor.user ? record.selectedDoctor.user.first_name : '+Add Doctor'}\n                                    </b>\n                                </a>\n                            </Dropdown>\n                            <span><br/>from batch &nbsp;&nbsp;</span>\n                            <Dropdown placement=\"topCenter\" disabled overlay={<Menu>\n                                {that.state.itemBatches[record.inventory] && that.state.itemBatches[record.inventory].map((batch, index) =>\n                                    (moment() >= moment(batch.expiry_date) ? <Menu.Item key={index} disabled={true}>\n                                        {batch.batch_number}&nbsp;({batch.quantity}) &nbsp;&nbsp;{batch.expiry_date}\n                                    </Menu.Item> : <Menu.Item key={index}>\n                                        <a onClick={() => that.selectBatch(batch, record._id, INVENTORY)}>{batch.batch_number}&nbsp;({batch.quantity}) &nbsp;&nbsp;{batch.expiry_date}</a>\n                                    </Menu.Item>))}\n                            </Menu>} trigger={['click']}>\n                                <a className=\"ant-dropdown-link\" href=\"#\">\n                                    <b>\n                                        {record.selectedBatch ? record.selectedBatch.batch_number : 'Select Batch'}\n                                    </b>\n                                </a>\n                            </Dropdown>\n                        </div>\n                    default:\n                        return null;\n                }\n            }\n        }];\n        consumeRow = consumeRow.concat([{\n            title: 'Returning Unit',\n            key: 'unit',\n            width: 100,\n            dataIndex: 'unit',\n            render: (item, record) => (record.item_type == INVENTORY ?\n                    <Form.Item\n                        key={`unit[${record._id}]`}\n                        {...formItemLayout}>\n                        {getFieldDecorator(`unit[${record._id}]`, {\n                            validateTrigger: ['onChange', 'onBlur'],\n                            initialValue: 0,\n                        })(\n                            <InputNumber max={(record.unit)}\n                                         onChange={this.calculateReturnCashAvailable}\n                                         min={0}\n                                         placeholder=\"units\" size={'small'}\n                                         disabled={!(record.selectedBatch && that.state.stocks[record.inventory] && that.state.stocks[record.inventory][record.selectedBatch.batch_number])}/>\n                        )}\n                        <span className=\"ant-form-text\">Items: {record.unit}</span>\n                    </Form.Item>\n\n                    : <Form.Item\n                        key={`unit[${record._id}]`}\n                        {...formItemLayout}>\n                        {getFieldDecorator(`unit[${record._id}]`, {\n                            initialValue: 0,\n                            validateTrigger: ['onChange', 'onBlur'],\n                        })(\n                            <InputNumber min={0} max={record.unit} placeholder=\"unit\" size={'small'}\n                                         onChange={this.calculateReturnCashAvailable}/>\n                        )}\n                        <span className=\"ant-form-text\">Items: {record.unit}</span>\n                    </Form.Item>\n            )\n        }, {\n            title: 'Unit Cost',\n            key: 'unit_cost',\n            width: 100,\n            dataIndex: 'unit_cost',\n            render: (item, record) => item ? item.toFixed(2) : null\n        }, {\n            title: 'discount %',\n            key: 'discount',\n            width: 100,\n            dataIndex: 'discount',\n            render: (item, record) => <Form.Item\n                key={`discount[${record._id}]`}\n                {...formItemLayout}>\n                {getFieldDecorator(`discount[${record._id}]`, {\n                    initialValue: record.discount,\n                    validateTrigger: ['onChange', 'onBlur'],\n\n                })(\n                    <InputNumber min={0} max={100} placeholder=\"discount\" size={'small'} disabled={true}/>\n                )}\n            </Form.Item>\n        }, {\n            title: 'Taxes',\n            key: 'taxes',\n            dataIndex: 'taxes',\n            render: (item, record) => <Form.Item\n                key={`taxes[${record._id}]`}\n                {...formItemLayout}>\n                {getFieldDecorator(`taxes[${record._id}]`, {\n                    initialValue: record.taxes || [],\n                    validateTrigger: ['onChange', 'onBlur'],\n                })(\n                    <Select placeholder=\"Taxes\" size={'small'} mode={\"multiple\"}\n                            disabled={true}\n                            style={{width: 150}}\n                            onChange={() => that.changeNetPrice(record._id)}>\n                        {this.state.taxes_list && this.state.taxes_list.map((tax) => <Select.Option\n                            value={tax.id}>{tax.name}@{tax.tax_value}%</Select.Option>)}\n                    </Select>\n                )}\n            </Form.Item>\n        }, {\n            title: 'Total Unit Cost',\n            key: 'total',\n            width: 100,\n            dataIndex: 'total',\n            render: (item, record) => (record.unit ? (record.total/record.unit).toFixed(2) : record.total.toFixed(2))\n        }]);\n\n        return <div>\n            <Spin spinning={this.state.saveLoading} tip=\"Saving Invoice...\">\n                <Row gutter={16}>\n                    <Col span={20}>\n                        <Card\n                            title={this.props.editId ? \"Return Invoice (INV \" + this.props.editId + \")\" : \"Add Invoice\"}\n                            bodyStyle={{padding: 0}}>\n                            <Row gutter={16}>\n                                <Col span={24}>\n                                    <Form onSubmit={this.handleSubmit} layout=\"inline\">\n                                        <Table pagination={false}\n                                               bordered={true}\n                                               dataSource={this.state.tableFormValues}\n                                               columns={consumeRow}/>\n                                        <Affix offsetBottom={0}>\n                                            <Card>\n                                                <Row gutter={16}>\n                                                    <Col span={6}>\n\n                                                        <span> &nbsp;&nbsp;on&nbsp;&nbsp;</span>\n                                                        <DatePicker value={this.state.selectedDate}\n                                                                    disabled\n                                                                    onChange={(value) => this.selectedDefaultDate(value)}\n                                                                    format={\"DD-MM-YYYY\"}\n                                                                    allowClear={false}/>\n                                                        <br/>\n                                                        <br/>\n                                                        <Checkbox onChange={this.onChangeHandle}\n                                                                  defaultChecked={this.state.return_with_tax}>\n                                                            Return With Tax\n                                                        </Checkbox>\n                                                    </Col>\n                                                    <Col span={8}>\n                                                        <Form.Item label={\"Returned Cash \"} >\n                                                            {getFieldDecorator('cash_return',\n                                                            )\n                                                            (<InputNumber min={0} max={this.state.returnCashAvailable}\n                                                                          placeholder={\"Cash Returned\"}/>)\n                                                            }\n                                                            <span><br/>Max Cash Return Allowed (INR) {this.state.returnCashAvailable}</span>\n                                                        </Form.Item>\n                                                    </Col>\n                                                    <Col span={10}>\n                                                        <Form.Item\n                                                            label={\"Notes\"}\n                                                            key={`notes`}\n                                                            >\n                                                            {getFieldDecorator(`notes`, {\n                                                                initialValue: this.state.tableFormValues.notes,\n                                                                validateTrigger: ['onChange', 'onBlur'],\n                                                            })(\n                                                                <Input.TextArea row={2} placeholder=\"Notes...\" size={'small'} style={{width:'100%'}}/>\n                                                            )}\n                                                        </Form.Item>\n                                                        <Form.Item {...formItemLayoutWithOutLabel}\n                                                                   style={{marginBottom: 0, float: 'right'}}>\n                                                            <Button type=\"primary\" htmlType=\"submit\"\n                                                                    style={{margin: 5}}>Save Return Invoice</Button>\n                                                            {that.props.history ?\n                                                                <Button style={{margin: 5, float: 'right'}}\n                                                                        onClick={() => that.props.history.goBack()}>\n                                                                    Cancel\n                                                                </Button> : null}\n                                                        </Form.Item>\n\n                                                    </Col>\n                                                </Row>\n\n\n                                            </Card>\n                                        </Affix>\n                                    </Form>\n                                </Col>\n                            </Row>\n                        </Card>\n                    </Col>\n                    <Col span={4}>\n                        <Divider>Payments Done</Divider>\n                        <List dataSource={this.state.editInvoice.payments}\n                              renderItem={payment => <Card title={payment.payment_id} style={{marginBottom: 10}}\n                                                           bodyStyle={{padding: 5}}>\n                                  <p>Paid (INR)<span\n                                      style={{float: 'right', fontWeight: 600}}> {payment.pay_amount.toFixed(2)}</span>\n                                  </p>\n                              </Card>}/>\n                    </Col>\n                </Row>\n            </Spin>\n        </div>\n\n    }\n}\n\nexport default Form.create()(AddReturnInvoice);\n","import React from \"react\";\nimport {Button, Card, Form, Icon, Input, Modal} from \"antd\";\nimport {CANCELINVOICE_RESENT_OTP, CANCELINVOICE_VERIFY_OTP} from \"../../../constants/api\";\nimport {getAPI, postAPI} from \"../../../utils/common\";\nclass InvoiceReturnModal extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            returnIncoiceVisible: this.props.returnIncoiceVisible,\n            otpSent:this.props.otpSent,\n\n        };\n    }\n\n    handleSubmitReturnInvoice = (e) => {\n        let that = this;\n        e.preventDefault();\n        this.props.form.validateFields((err, values) => {\n            if (!err) {\n                let reqData = {\n                    ...values,\n                    practice: this.props.active_practiceId,\n                }\n                let successFn = function (data) {\n                    that.setState({\n                        returnIncoiceVisible: false,\n                    });\n                    that.returnInvoiceData(that.props.editInvoice)\n                    that.props.returnInvoiceClose();\n                };\n                let errorFn = function () {\n\n                };\n                postAPI(CANCELINVOICE_VERIFY_OTP, reqData, successFn, errorFn);\n            }\n        });\n    };\n\n    returnInvoiceData = (record) => {\n        let that = this;\n        // let id = this.props.match.params.id;\n        this.setState({\n            editInvoice: record,\n        }, function () {\n            that.props.history.push(\"/patient/\" + record.patient_data.id + \"/billing/invoices/return/\")\n        });\n    }\n\n\n\n    sendOTP() {\n        let that = this;\n        let successFn = function (data) {\n\n        };\n        let errorFn = function () {\n\n        };\n        getAPI(CANCELINVOICE_RESENT_OTP, successFn, errorFn);\n    }\n\n    render() {\n        let that = this;\n        const {getFieldDecorator} = that.props.form;\n        return(\n            <Modal\n                visible={(this.state.returnIncoiceVisible && that.props.editInvoice && that.props.editInvoice.id == that.props.invoice.id)}\n                title=\"Return Invoice\"\n                footer={null}\n                onOk={that.props.handleSubmitReturnInvoice}\n                onCancel={that.props.returnInvoiceClose}\n            >\n                <Form>\n                    <Form.Item>\n                        {getFieldDecorator('otp', {\n                            rules: [{required: true, message: 'Please input Otp!'}],\n                        })(\n                            <Input prefix={<Icon type=\"user\" style={{color: 'rgba(0,0,0,.25)'}}/>}\n                                   placeholder=\"Otp\"\n                            />,\n                        )}\n                    </Form.Item>\n                    <Form.Item>\n                        {that.props.otpSent ? <a style={{float: 'right'}} type=\"primary\" onClick={that.sendOTP}>\n                            Resend Otp ?\n                        </a> : null}\n                        <Button size=\"small\" type=\"primary\" htmlType=\"submit\" onClick={that.handleSubmitReturnInvoice}>\n                            Submit\n                        </Button>&nbsp;\n                        <Button size=\"small\" onClick={that.props.returnInvoiceClose}>\n                            Close\n                        </Button>\n                    </Form.Item>\n                </Form>\n            </Modal>\n        )\n    }\n\n\n}\nexport default Form.create()(InvoiceReturnModal);\n","import React from \"react\";\nimport {Button, Card, Form, Icon, Input, Modal} from \"antd\";\nimport moment from \"moment\";\nimport {CANCELINVOICE_GENERATE_OTP, CANCELINVOICE_RESENT_OTP, CANCELINVOICE_VERIFY_OTP} from \"../../../constants/api\";\nimport {getAPI, postAPI} from \"../../../utils/common\";\nimport {OTP_DELAY_TIME} from \"../../../constants/dataKeys\";\nclass EditReturnModal extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            otpSent:this.props.otpSent,\n            returnIncoiceVisible: this.props.returnIncoiceVisible,\n            editIncoiceVisible: this.props.editIncoiceVisible,\n\n\n        };\n    }\n\n    handleSubmitEditInvoice = (e) => {\n        let that = this;\n        e.preventDefault();\n        this.props.form.validateFields((err, values) => {\n            if (!err) {\n                let reqData = {\n                    ...values,\n                    practice: this.props.active_practiceId,\n                }\n                let successFn = function (data) {\n                    that.setState({\n                        editIncoiceVisible: false,\n                    });\n                    that.editInvoiceData(that.props.editInvoice);\n                    that.props.editInvoiceClose();\n                };\n                let errorFn = function () {\n\n                };\n                postAPI(CANCELINVOICE_VERIFY_OTP, reqData, successFn, errorFn);\n            }\n        });\n    };\n\n    editInvoiceData = (record) => {\n        let that = this;\n        // let id = this.props.match.params.id;\n        this.setState({\n            editInvoice: record,\n        }, function () {\n            that.props.history.push(\"/patient/\" + record.patient_data.id + \"/billing/invoices/edit/\")\n        });\n    };\n\n\n    sendOTP() {\n        let that = this;\n        let successFn = function (data) {\n\n        };\n        let errorFn = function () {\n\n        };\n        getAPI(CANCELINVOICE_RESENT_OTP, successFn, errorFn);\n    }\n\n    render() {\n        let that = this;\n        const {getFieldDecorator} = that.props.form;\n        return(\n            <Modal\n                visible={(that.state.editIncoiceVisible && that.props.editInvoice && that.props.editInvoice.id == that.props.invoice.id)}\n                title=\"Edit Invoice\"\n                footer={null}\n                onOk={that.handleSubmitEditInvoice}\n                onCancel={that.props.editInvoiceClose}\n            >\n                <Form>\n                    <Form.Item>\n                        {getFieldDecorator('otp', {\n                            rules: [{required: true, message: 'Please input Otp!'}],\n                        })(\n                            <Input prefix={<Icon type=\"user\" style={{color: 'rgba(0,0,0,.25)'}}/>}\n                                   placeholder=\"Otp\"\n                            />,\n                        )}\n                    </Form.Item>\n                    <Form.Item>\n                        {that.props.otpSent ? <a style={{float: 'right'}} type=\"primary\" onClick={that.sendOTP}>\n                            Resend Otp ?\n                        </a> : null}\n                        <Button size=\"small\" type=\"primary\" htmlType=\"submit\" onClick={that.handleSubmitEditInvoice}>\n                            Submit\n                        </Button>&nbsp;\n                        <Button size=\"small\" onClick={that.props.editInvoiceClose}>\n                            Close\n                        </Button>\n                    </Form.Item>\n                </Form>\n            </Modal>\n        )\n    }\n\n\n}\nexport default Form.create()(EditReturnModal);\n","import React from \"react\";\nimport {Button, Card, Form, Icon, Input, Modal} from \"antd\";\nimport {\n    CANCELINVOICE_RESENT_OTP,\n    CANCELINVOICE_VERIFY_OTP,\n    SINGLE_INVOICES_API\n} from \"../../../constants/api\";\nimport {displayMessage, getAPI, interpolate, postAPI, putAPI} from \"../../../utils/common\";\nimport {SUCCESS_MSG_TYPE} from \"../../../constants/dataKeys\";\nclass CancelReturnModal extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            cancelIncoiceVisible: this.props.cancelIncoiceVisible,\n            otpSent:this.props.otpSent,\n\n        };\n    }\n\n    handleSubmitCancelInvoice = (e) => {\n        let that = this;\n        e.preventDefault();\n        this.props.form.validateFields((err, values) => {\n            if (!err) {\n                let reqData = {\n                    ...values,\n                    practice: this.props.active_practiceId,\n                }\n                let successFn = function (data) {\n                    that.setState({\n                        cancelIncoiceVisible: false,\n                    });\n                    that.deleteInvoice(that.props.patientId, that.props.invoiceId)\n                };\n                let errorFn = function () {\n\n                };\n                postAPI(CANCELINVOICE_VERIFY_OTP, reqData, successFn, errorFn);\n            }\n        });\n    }\n\n\n    deleteInvoice(patient, invoice) {\n        let that = this;\n        let reqData = {patient: patient, is_cancelled: true};\n        let successFn = function (data) {\n            displayMessage(SUCCESS_MSG_TYPE, \"Invoice cancelled successfully\")\n            that.props.loadInvoices();\n        }\n        let errorFn = function () {\n        }\n        putAPI(interpolate(SINGLE_INVOICES_API, [invoice]), reqData, successFn, errorFn);\n    }\n\n   \n\n    sendOTP() {\n        let that = this;\n        let successFn = function (data) {\n\n        };\n        let errorFn = function () {\n\n        };\n        getAPI(CANCELINVOICE_RESENT_OTP, successFn, errorFn);\n    }\n\n    render() {\n        let that = this;\n        const {getFieldDecorator} = that.props.form;\n        return(\n            <Modal\n                visible={(that.state.cancelIncoiceVisible && that.props.editInvoice && that.props.editInvoice.id ==that.props.invoice.id)}\n                title=\"Cancel Invoice\"\n                footer={null}\n                onOk={that.handleSubmitCancelInvoice}\n                onCancel={that.cancelInvoiceClose}\n            >\n                <Form>\n                    <Form.Item>\n                        {getFieldDecorator('otp', {\n                            rules: [{required: true, message: 'Please input Otp!'}],\n                        })(\n                            <Input prefix={<Icon type=\"user\" style={{color: 'rgba(0,0,0,.25)'}}/>}\n                                   placeholder=\"Otp\"\n                            />,\n                        )}\n                    </Form.Item>\n                    <Form.Item>\n                        {that.props.otpSent ? <a style={{float: 'right'}} type=\"primary\" onClick={that.sendOTP}>\n                            Resend Otp ?\n                        </a> : null}\n                        <Button size=\"small\" type=\"primary\" htmlType=\"submit\" onClick={that.handleSubmitCancelInvoice}>\n                            Submit\n                        </Button>&nbsp;\n                        <Button size=\"small\" onClick={that.cancelInvoiceClose}>\n                            Close\n                        </Button>\n                    </Form.Item>\n                </Form>\n            </Modal>\n        )\n    }\n\n\n}\nexport default Form.create()(CancelReturnModal);\n","import React from \"react\";\nimport {\n    Affix,\n    Alert,\n    Button,\n    Card,\n    Col,\n    Divider,\n    Dropdown,\n    Icon,\n    Menu,\n    Modal,\n    Row,\n    Spin,\n    Statistic,\n    Table,\n    Tag,\n    Tooltip,\n    Form, Input\n} from \"antd\";\nimport {displayMessage, getAPI, interpolate, putAPI, postAPI} from \"../../../utils/common\";\nimport {\n    DRUG_CATALOG,\n    INVOICE_PDF_API,\n    INVOICES_API,\n    PROCEDURE_CATEGORY,\n    SINGLE_INVOICES_API,\n    TAXES,\n    CANCELINVOICE_GENERATE_OTP,\n    CANCELINVOICE_VERIFY_OTP,\n    CANCELINVOICE_RESENT_OTP,\n} from \"../../../constants/api\";\nimport moment from \"moment\";\nimport {Route, Switch} from \"react-router\";\nimport AddInvoicedynamic from \"./AddInvoicedynamic\";\nimport InfiniteFeedLoaderButton from \"../../common/InfiniteFeedLoaderButton\";\nimport {Link, Redirect} from \"react-router-dom\";\nimport {BACKEND_BASE_URL} from \"../../../config/connect\";\nimport {SUCCESS_MSG_TYPE, OTP_DELAY_TIME} from \"../../../constants/dataKeys\";\nimport AddReturnInvoice from \"./AddReturnInvoice\";\nimport InvoiceReturnModal from \"./InvoiceReturnModal\";\nimport EditReturnModal from \"./EditReturnModal\";\nimport CancelReturnModal from \"./CancelReturnModal\";\n\nconst confirm = Modal.confirm;\n\nclass PatientInvoices extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            currentPatient: this.props.currentPatient,\n            active_practiceId: this.props.active_practiceId,\n            invoices: [],\n            drug_catalog: null,\n            procedure_category: null,\n            taxes_list: null,\n            editInvoice: null,\n            loading: true,\n            returnIncoiceVisible: false,\n            editIncoiceVisible: false,\n            cancelIncoiceVisible: false,\n        }\n        this.loadInvoices = this.loadInvoices.bind(this);\n        this.loadDrugCatalog = this.loadDrugCatalog.bind(this);\n        this.loadProcedureCategory = this.loadProcedureCategory.bind(this);\n        this.loadTaxes = this.loadTaxes.bind(this);\n    }\n\n    componentDidMount() {\n        this.loadInvoices();\n    }\n\n    loadInvoices(page = 1) {\n        let that = this;\n        if (that.props.refreshWallet && page == 1) {\n            that.props.refreshWallet();\n        }\n        that.setState({\n            loading: true\n        });\n        let successFn = function (data) {\n            if (data.current == 1) {\n                that.setState({\n                    total: data.count,\n                    invoices: data.results,\n                    loading: false,\n                    loadMoreInvoice: data.next\n                })\n            } else {\n                that.setState(function (prevState) {\n                    return {\n                        total: data.count,\n                        invoices: [...prevState.invoices, ...data.results],\n                        loading: false,\n                        loadMoreInvoice: data.next\n                    }\n                })\n            }\n        }\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            })\n\n        }\n        let apiParams = {\n            page: page,\n            practice: this.props.active_practiceId,\n        };\n        if (this.props.match.params.id) {\n            apiParams.patient = this.props.match.params.id;\n        }\n        // if (this.props.showAllClinic && this.props.match.params.id) {\n        //     delete (apiParams.practice)\n        // }\n        getAPI(INVOICES_API, successFn, errorFn, apiParams);\n    }\n\n    loadDrugCatalog() {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                drug_catalog: data,\n            })\n        }\n        let errorFn = function () {\n\n        }\n        getAPI(interpolate(DRUG_CATALOG, [this.props.active_practiceId]), successFn, errorFn)\n    }\n\n    loadProcedureCategory() {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                procedure_category: data,\n            })\n        }\n        let errorFn = function () {\n\n\n        }\n        getAPI(interpolate(PROCEDURE_CATEGORY, [this.props.active_practiceId]), successFn, errorFn);\n    }\n\n    loadTaxes() {\n        var that = this;\n        let successFn = function (data) {\n            that.setState({\n                taxes_list: data,\n            })\n        };\n        let errorFn = function () {\n        };\n        getAPI(interpolate(TAXES, [this.props.active_practiceId]), successFn, errorFn);\n\n    }\n\n\n    loadPDF = (id) => {\n        let that = this;\n        let successFn = function (data) {\n            if (data.report)\n                window.open(BACKEND_BASE_URL + data.report);\n        }\n        let errorFn = function () {\n\n        }\n        getAPI(interpolate(INVOICE_PDF_API, [id]), successFn, errorFn);\n    }\n\n\n    returnModelOpen = (record) => {\n        let that = this;\n        let created_time = moment().diff(record.created_at, 'minutes');\n        if (created_time > OTP_DELAY_TIME) {\n            that.setState({\n                returnIncoiceVisible: true,\n                editIncoiceVisible: false,\n                cancelIncoiceVisible: false,\n                editInvoice: record,\n            });\n\n            let reqData = {\n                practice: this.props.active_practiceId,\n                type: 'Invoice' + ':' + record.invoice_id + ' ' + 'Return'\n            };\n            let successFn = function (data) {\n                that.setState({\n                    otpSent: true,\n                    patientId: record.patient,\n                    invoiceId: record.id\n                })\n            };\n            let errorFn = function () {\n\n            };\n            postAPI(CANCELINVOICE_GENERATE_OTP, reqData, successFn, errorFn);\n        } else {\n            this.setState({\n                editInvoice: record,\n            }, function () {\n                that.props.history.push(\"/patient/\" + record.patient_data.id + \"/billing/invoices/return/\")\n            });\n        }\n    };\n\n\n    editModelOpen(record) {\n        let that = this;\n        let created_time = moment().diff(record.created_at, 'minutes');\n\n        if (created_time > OTP_DELAY_TIME) {\n            that.setState({\n                editIncoiceVisible: true,\n                cancelIncoiceVisible: false,\n                returnIncoiceVisible: false,\n                editInvoice: record,\n            });\n\n            let reqData = {\n                practice: this.props.active_practiceId,\n                type: 'Invoice' + ':' + record.invoice_id + ' ' + 'Edit'\n            }\n            let successFn = function (data) {\n                that.setState({\n                    otpSent: true,\n                    patientId: record.patient,\n                    invoiceId: record.id\n                })\n            }\n            let errorFn = function () {\n\n            };\n            postAPI(CANCELINVOICE_GENERATE_OTP, reqData, successFn, errorFn);\n\n        } else {\n            this.setState({\n                editInvoice: record,\n            }, function () {\n                that.props.history.push(\"/patient/\" + record.patient_data.id + \"/billing/invoices/edit/\")\n            });\n        }\n\n    };\n\n\n    cancelModalOpen = (record) => {\n        let that = this;\n        let created_time = moment().diff(record.created_at, 'minutes');\n\n        if (created_time > OTP_DELAY_TIME) {\n\n            that.setState({\n                cancelIncoiceVisible: true,\n                editIncoiceVisible: false,\n                returnIncoiceVisible: false,\n                editInvoice: record\n            });\n\n            let reqData = {\n                practice: this.props.active_practiceId,\n                type: 'Invoice' + ':' + record.invoice_id + ' ' + ' Cancellation'\n            }\n            let successFn = function (data) {\n                that.setState({\n                    otpSent: true,\n                    patientId: record.patient,\n                    invoiceId: record.id\n                })\n            }\n            let errorFn = function () {\n\n            };\n            postAPI(CANCELINVOICE_GENERATE_OTP, reqData, successFn, errorFn);\n\n        } else {\n            that.deleteInvoice(record.patient, record.id)\n        }\n    };\n\n    deleteInvoice(patient, invoice) {\n        let that = this;\n        let reqData = {patient: patient, is_cancelled: true};\n        let successFn = function (data) {\n            displayMessage(SUCCESS_MSG_TYPE, \"Invoice cancelled successfully\")\n            that.loadInvoices();\n        }\n        let errorFn = function () {\n        }\n        putAPI(interpolate(SINGLE_INVOICES_API, [invoice]), reqData, successFn, errorFn);\n    }\n\n    editInvoiceClose = () => {\n        this.setState({\n            editIncoiceVisible: false\n        })\n    };\n    returnInvoiceClose = () => {\n        this.setState({\n            returnIncoiceVisible: false\n        })\n    };\n    cancelInvoiceClose = () => {\n        this.setState({\n            cancelIncoiceVisible: false\n        })\n    };\n\n    render() {\n        let that = this;\n        const drugs = {}\n        if (this.state.drug_catalog) {\n\n            this.state.drug_catalog.forEach(function (drug) {\n                drugs[drug.id] = (drug.name + \",\" + drug.strength)\n            })\n        }\n        const procedures = {}\n        if (this.state.procedure_category) {\n            this.state.procedure_category.forEach(function (procedure) {\n                procedures[procedure.id] = procedure.name;\n            })\n        }\n\n        const taxesdata = {}\n        if (this.state.taxes_list) {\n            this.state.taxes_list.forEach(function (tax) {\n                taxesdata[tax.id] = tax.name;\n            })\n        }\n\n        if (this.props.match.params.id) {\n            return <div>\n                <Switch>\n                    <Route path='/patient/:id/billing/invoices/add'\n                           render={(route) => <AddInvoicedynamic  {...route} {...this.props}\n                                                                  loadData={this.loadInvoices}/>}/>\n                    <Route path='/patient/:id/billing/invoices/edit'\n                           render={(route) => (\n                               this.state.editInvoice ?\n                                   <AddInvoicedynamic {...this.state} {...route} {...this.props}\n                                                      editId={this.state.editInvoice.id}\n                                                      loadData={this.loadInvoices}/> :\n                                   <Redirect to={\"/patient/\" + this.props.match.params.id + \"/billing/invoices\"}/>\n                           )}/>\n                    <Route path='/patient/:id/billing/invoices/return'\n                           render={(route) => (\n                               this.state.editInvoice ?\n                                   <AddReturnInvoice {...this.state} {...route}\n                                                     editId={this.state.editInvoice.id}\n                                                     loadData={this.loadInvoices}/> :\n                                   <Redirect to={\"/patient/\" + this.props.match.params.id + \"/billing/invoices\"}/>\n                           )}/>\n                    <Route>\n                        <div>\n                            <Alert banner showIcon type={\"info\"}\n                                   message={\"The invoices shown are only for the current selected practice!\"}/>\n                            <Affix offsetTop={0}>\n                                <Card bodyStyle={{padding: 0}}\n                                      style={{boxShadow: '0 5px 8px rgba(0, 0, 0, 0.09)'}}\n                                      title={(this.state.currentPatient ? this.state.currentPatient.user.first_name + \" Invoice \" : \"Invoices \") + (this.state.total ? `(Total:${this.state.total})` : '')}\n                                      extra={<Button.Group>\n                                          <Link to={\"/patient/\" + this.props.match.params.id + \"/billing/invoices/add\"}>\n                                              <Button type={\"primary\"}>\n                                                  <Icon type=\"plus\"/>Add\n                                              </Button>\n                                          </Link>\n                                      </Button.Group>}>\n                                </Card>\n                            </Affix>\n                            {this.state.invoices.map(invoice => InvoiceCard(invoice, that))}\n                            <Spin spinning={this.state.loading}>\n                                <Row/>\n                            </Spin>\n                            <InfiniteFeedLoaderButton\n                                loaderFunction={() => this.loadInvoices(this.state.loadMoreInvoice)}\n                                loading={this.state.loading}\n                                hidden={!this.state.loadMoreInvoice}/>\n\n                        </div>\n                    </Route>\n                </Switch>\n            </div>\n        } else {\n            return <div>\n                <Affix offsetTop={0}>\n                    <Card bodyStyle={{padding: 0}}\n                          style={{boxShadow: '0 5px 8px rgba(0, 0, 0, 0.09)'}}\n                          title={(this.state.currentPatient ? this.state.currentPatient.user.first_name + \" Invoice \" : \"Invoice \") + (this.state.total ? `(Total:${this.state.total})` : '')}\n                          extra={<Button.Group>\n                              <Button type={\"primary\"} onClick={() => this.props.togglePatientListModal(true)}>\n                                  <Icon type=\"plus\"/>Add\n                              </Button>\n                          </Button.Group>}>\n                    </Card>\n                </Affix>\n                {this.state.invoices.map(invoice => InvoiceCard(invoice, that))}\n                <Spin spinning={this.state.loading}>\n                    <Row/>\n                </Spin>\n                <InfiniteFeedLoaderButton loaderFunction={() => this.loadInvoices(this.state.loadMoreInvoice)}\n                                          loading={this.state.loading}\n                                          hidden={!this.state.loadMoreInvoice}/>\n            </div>\n        }\n\n    }\n}\n\nexport default Form.create()(PatientInvoices);\n\nfunction invoiceFooter(presc) {\n    if (presc) {\n        return <p>\n            {presc.doctor ? <Tooltip title=\"Doctor\"><Tag color={presc.doctor ? presc.doctor.calendar_colour : null}>\n                <b>{\"prescribed by  \" + presc.doctor.user.first_name} </b>\n            </Tag></Tooltip> : null}\n            {presc.practice ? <Tag style={{float: 'right'}}>\n                <Tooltip title=\"Practice Name\">\n                    <b>{presc.practice.name} </b>\n                </Tooltip>\n            </Tag> : null}\n            {presc.notes ? <p>Notes: {presc.notes}</p> : null}\n        </p>\n\n\n    }\n    return null\n}\n\nfunction InvoiceCard(invoice, that) {\n    let tableObjects = [];\n    const {getFieldDecorator} = that.props.form;\n    if (invoice.reservation) {\n        let medicinesPackages = invoice.reservation_data.medicines.map(item => Object.create({\n            ...item,\n            unit: 1,\n            total: item.final_price,\n            unit_cost: item.price,\n            discount: 0\n        }));\n        let mapper = {\n            \"NORMAL\": {total: 'final_normal_price', tax: \"normal_tax_value\", unit_cost: \"normal_price\"},\n            \"TATKAL\": {total: 'final_tatkal_price', tax: \"tatkal_tax_value\", unit_cost: \"tatkal_price\"}\n        }\n        tableObjects = [...tableObjects, {\n            ...invoice.reservation_data.bed_package,\n            unit: 1,\n            total: invoice.reservation_data.bed_package ? invoice.reservation_data.bed_package[mapper[invoice.reservation_data.seat_type].total] : null,\n            tax_value: invoice.reservation_data.bed_package ? invoice.reservation_data.bed_package[mapper[invoice.reservation_data.seat_type].tax] : null,\n            unit_cost: invoice.reservation_data.bed_package ? invoice.reservation_data.bed_package[mapper[invoice.reservation_data.seat_type].unit_cost] : null\n        }, ...medicinesPackages]\n    }\n    return <Card\n        key={invoice.id}\n        style={{marginTop: 10}}\n        bodyStyle={{padding: 0}}\n        title={<small>{invoice.date ? moment(invoice.date).format('ll') : null}\n            {that.state.currentPatient ? null : <span>\n            <Link to={\"/patient/\" + (invoice.patient_data ? invoice.patient_data.id : null) + \"/billing/invoices\"}>\n                &nbsp;&nbsp; {invoice.patient_data ? invoice.patient_data.user.first_name : null} (ID: {invoice.patient_data && invoice.patient_data.custom_id ? invoice.patient_data.custom_id : invoice.patient_data.id})&nbsp;\n            </Link>, {invoice.patient_data ? invoice.patient_data.gender : null}</span>}\n        </small>}\n        extra={<Dropdown.Button\n            size={\"small\"}\n            style={{float: 'right'}}\n            overlay={<Menu>\n                <Menu.Item key=\"1\">\n                    {/* onClick={() => that.editInvoiceData(invoice)} disabled={!that.props.match.params.id}> */}\n                    <Link\n                        to={\"/patient/\" + (invoice.patient_data ? invoice.patient_data.id : null) + \"/billing/payments/add?invoices=\" + invoice.id}>\n                        <Icon type=\"dollar\"/>\n                        &nbsp;\n                        Pay\n                    </Link>\n                </Menu.Item>\n                <Menu.Divider/>\n                <Menu.Item key=\"2\" onClick={() => that.editModelOpen(invoice)}\n                           disabled={(invoice.practice != that.props.active_practiceId) || invoice.payments_data || invoice.is_cancelled}>\n                    <Icon type=\"edit\"/>\n                    Edit\n                </Menu.Item>\n                <Menu.Item key=\"5\" onClick={() => that.returnModelOpen(invoice)}\n                           disabled={(invoice.practice != that.props.active_practiceId) || invoice.is_cancelled}>\n                    <Icon type=\"redo\"/>\n                    Return\n                </Menu.Item>\n                <Menu.Item key=\"3\" onClick={() => that.cancelModalOpen(invoice)}\n                           disabled={(invoice.practice != that.props.active_practiceId) || invoice.payments_data || invoice.is_cancelled}>\n                    <Icon type=\"delete\"/>\n                    Cancel\n                </Menu.Item>\n                <Menu.Divider/>\n                <Menu.Item key=\"4\">\n                    <Link to={\"/patient/\" + invoice.patient + \"/emr/timeline\"}>\n                        <Icon type=\"clock-circle\"/>\n                        Patient Timeline\n                    </Link>\n                </Menu.Item>\n            </Menu>}>\n            <a onClick={() => that.loadPDF(invoice.id)}><Icon\n                type=\"printer\"/></a>\n        </Dropdown.Button>}>\n        <Row gutter={8}>\n            <Col xs={24} sm={24} md={6} lg={4} xl={4} xxl={4} style={{padding: 10}}>\n                {invoice.is_cancelled ?\n                    <Alert message=\"Cancelled\" type=\"error\" showIcon/> : null}\n                <Divider style={{marginBottom: 0}}>{invoice.invoice_id}</Divider>\n                <Statistic title=\"Paid / Total \"\n                           value={(invoice.payments_data ? invoice.payments_data.toFixed(2) : 0)}\n                           suffix={\"/ \" + invoice.total.toFixed(2)}/>\n            </Col>\n            <Col xs={24} sm={24} md={18} lg={20} xl={20} xxl={20}>\n                {invoice.type == \"Membership Amount.\" ?\n                    <Table\n                        bordered={true}\n                        pagination={false}\n                        columns={columns}\n                        dataSource={[{\n                            inventory: true,\n                            name: \"Membership\",\n                            unit_cost: invoice.total,\n                            unit: 1,\n                            discount_value: 0,\n                            tax_value: 0,\n                            total: invoice.total\n                        }]}\n                        footer={() => invoiceFooter({practice: invoice.practice_data, notes: invoice.notes})}/> :\n                    <Table\n                        bordered={true}\n                        pagination={false}\n                        columns={columns}\n                        dataSource={[...tableObjects, ...invoice.inventory, ...invoice.procedure]}\n                        footer={() => invoiceFooter({practice: invoice.practice_data, notes: invoice.notes})}/>}\n\n            </Col>\n        </Row>\n\n\n        {that.state.cancelIncoiceVisible && that.state.otpSent &&\n        <CancelReturnModal {...that.state} invoice={invoice} cancelInvoiceClose={that.cancelInvoiceClose}{...that.props}\n                           loadInvoices={that.loadInvoices}/>}\n\n        {that.state.editIncoiceVisible && that.state.otpSent &&\n        <EditReturnModal {...that.state} invoice={invoice} editInvoiceClose={that.editInvoiceClose} {...that.props} />}\n        {that.state.returnIncoiceVisible && that.state.otpSent && <InvoiceReturnModal {...that.state} invoice={invoice}\n                                                                                      returnInvoiceClose={that.returnInvoiceClose} {...that.props} />}\n\n    </Card>\n}\n\nconst columns = [{\n    title: 'Treatment & Products',\n    dataIndex: 'drug',\n    key: 'drug',\n    render: (text, record) => (\n        <span> <b>{record.name ? record.name : null}</b>\n                    <br/> {record.doctor_data ?\n                <Tag color={record.doctor_data ? record.doctor_data.calendar_colour : null}>\n                    <b>{\"prescribed by  \" + record.doctor_data.user.first_name} </b>\n                </Tag> : null}\n                </span>)\n}, {\n    title: 'Cost',\n    dataIndex: 'unit_cost',\n    key: 'unit_cost',\n    render: (item, record) => <span>{record.unit_cost ? record.unit_cost.toFixed(2) : null}</span>\n}, {\n    title: 'Unit',\n    dataIndex: 'unit',\n    key: 'unit',\n}, {\n    title: 'Discount',\n    dataIndex: 'discount_value',\n    key: 'discount_value',\n    render: (item, record) => <span>{record.discount_value ? record.discount_value.toFixed(2) : null}</span>\n}, {\n    title: 'Tax',\n    dataIndex: 'tax_value',\n    key: 'tax_value',\n    render: (item, record) => <span>{record.tax_value ? record.tax_value.toFixed(2) : null}</span>\n}, {\n    title: 'Total',\n    dataIndex: 'total',\n    key: 'total',\n    render: item => item ? item.toFixed(2) : null\n}];\n","import React from \"react\";\nimport {\n    Button,\n    Card,\n    Col,\n    Divider,\n    InputNumber,\n    List,\n    Popconfirm,\n    Row,\n    Select,\n    DatePicker,\n    Spin,\n    Input,\n    Form\n} from 'antd';\nimport {displayMessage, getAPI, interpolate, postAPI, putAPI} from \"../../../utils/common\";\nimport {\n    ACCEPT_PAYMENT,\n    AVAILABLE_ADVANCE, BULK_PAYMENT_API,\n    INVOICES_API,\n    PATIENT_PAYMENTS_API,\n    PAYMENT_MODES,\n    SINGLE_PAYMENT_API\n} from \"../../../constants/api\";\nimport {SUCCESS_MSG_TYPE, WARNING_MSG_TYPE} from \"../../../constants/dataKeys\";\nimport moment from \"moment\";\nimport {PROCEDURES} from \"../../../constants/hardData\";\nimport {RAZORPAY_KEY} from \"../../../config/connect\";\n\nclass AddPaymentForm extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            invoicesList: [],\n            invoiceLoading: true,\n            addedInvoiceId: {},\n            addedInvoice: [],\n            paymentModes: [],\n            totalPayableAmount: 0,\n            invoicePayments: {},\n            totalPayingAmount: 0,\n            totalPayingFromAdvanceAmount: 0,\n            selectedPaymentMode: null,\n            availableAdvance: null,\n            advanceToBeSent: 0,\n            selectDate: moment(),\n            loading: false\n        }\n        this.loadEditPyament = this.loadEditPyament.bind(this);\n    }\n\n    componentWillMount() {\n        let that = this;\n        if (that.props.editPayment && that.props.editPayment.invoices) {\n            that.loadEditPyament(that.props.editPayment.invoices);\n            // let addedInvoicesId = {};\n            // let addedInvoice = [];\n            // let totalPayingAmount = 0;\n            // this.props.editPayment.invoices.forEach(function (inv) {\n            //     console.log(\"Item\",inv);\n            //     addedInvoicesId[inv.invoice] = true;\n            //     addedInvoice.push({...inv, ...inv.invoice_data});\n            //     totalPayingAmount += inv.pay_amount + inv.pay_amount_wallet\n            // })\n            // that.setState({\n            //     addedInvoiceId: addedInvoicesId,\n            //     addedInvoice: addedInvoice,\n            //     // totalPayingAmount : totalPayingAmount\n            // }, function () {\n            //     console.log(\"Infinity Loop\");\n            //     that.calculateInvoicePayments();\n            //     that.setPaymentAmount(totalPayingAmount);\n            // })\n\n\n        }\n        let invoiceArray = [];\n        if (this.props.history && this.props.history.location.search) {\n            let pairValueArray = this.props.history.location.search.substr(1).split('&');\n            if (pairValueArray.length) {\n                pairValueArray.forEach(function (item) {\n                    if ((item.split('='))[0] == 'invoices') {\n                        invoiceArray = ((item.split('='))[1]).split(',');\n                    }\n                })\n            }\n        }\n        this.loadInvoices(invoiceArray);\n        this.loadPaymentModes();\n        this.loadAvailableAdvance();\n    }\n\n    loadEditPyament = (editPayment) => {\n        let that = this;\n        let addedInvoicesId = {};\n        let addedInvoice = [];\n        let totalPayingAmount = 0;\n        this.setState(function (prevState) {\n            editPayment.forEach(function (inv) {\n                addedInvoicesId[inv.invoice] = true;\n                addedInvoice.push({...inv, ...inv.invoice_data});\n                totalPayingAmount += inv.pay_amount + inv.pay_amount_wallet;\n            }, function () {\n                that.calculateInvoicePayments();\n                that.setPaymentAmount(totalPayingAmount);\n            });\n            return {\n                addedInvoice: addedInvoice,\n                addedInvoiceId: addedInvoicesId,\n            }\n        });\n    };\n    loadAvailableAdvance = () => {\n        let that = this;\n        let sucessFn = function (data) {\n            that.setState({\n                availableAdvance: data\n            });\n        }\n        let errorFn = function () {\n\n        }\n        getAPI(interpolate(AVAILABLE_ADVANCE, [that.props.match.params.id]), sucessFn, errorFn, {\n            practice_id: this.props.active_practiceId\n        })\n    }\n    loadPaymentModes = () => {\n        var that = this;\n        let successFn = function (data) {\n            that.setState({\n                paymentModes: data,\n                selectedPaymentMode: data.length ? data[0].id : null\n            })\n        };\n        let errorFn = function () {\n        };\n        getAPI(interpolate(PAYMENT_MODES, [this.props.active_practiceId]), successFn, errorFn);\n    }\n    loadInvoices = (invoicesToLoad) => {\n        let that = this;\n        that.setState({\n            invoiceLoading: true\n        });\n        let successFn = function (data) {\n            that.setState(function (prevState) {\n                return {\n                    invoicesList: [...data.results, ...prevState.addedInvoice],\n                    invoiceLoading: false,\n                    loadMoreInvoice: data.next\n                }\n            }, function () {\n                if (invoicesToLoad) {\n                    invoicesToLoad.forEach(function (id) {\n                        that.addInvoiceToPayments(id)\n                    })\n                }\n                that.calculateInvoicePayments();\n            })\n        }\n        let errorFn = function () {\n            that.setState({\n                invoiceLoading: false\n            })\n\n        }\n        getAPI(INVOICES_API, successFn, errorFn, {\n            page: that.state.loadMoreInvoice || 1,\n            is_cancelled: false,\n            is_pending: true,\n            patient: this.props.match.params.id,\n            practice: this.props.active_practiceId\n        });\n    }\n    addInvoiceToPayments = (id) => {\n        let that = this;\n        this.setState(function (prevState) {\n            let foundInvoice = null;\n            prevState.invoicesList.forEach(function (invoice) {\n                if (invoice.id == id)\n                    foundInvoice = invoice\n            })\n            if (foundInvoice)\n                return {\n                    addedInvoice: [...prevState.addedInvoice, foundInvoice],\n                    addedInvoiceId: {...prevState.addedInvoiceId, [id]: true},\n                    invoicePayments: {...prevState.addedInvoiceId, [id]: 0}\n                }\n            return null;\n        }, function () {\n            that.calculateInvoicePayments()\n        })\n    }\n\n    removeInvoiceToPayments = (id) => {\n        let that = this;\n        this.setState(function (prevState) {\n            let foundInvoice = [];\n            prevState.addedInvoice.forEach(function (invoice) {\n                if (invoice.id != id)\n                    foundInvoice.push(invoice)\n            })\n            if (foundInvoice)\n                return {\n                    addedInvoice: foundInvoice,\n                    addedInvoiceId: {...prevState.addedInvoiceId, [id]: false},\n                }\n            return null\n        }, function () {\n            that.calculateInvoicePayments();\n        })\n    }\n    calculateInvoicePayments = () => {\n        this.setState(function (prevState) {\n            let payable = 0;\n            let totalPayingAmount = prevState.totalPayingAmount + prevState.totalPayingFromAdvanceAmount;\n            let invoicePayments = {};\n            prevState.addedInvoice.forEach(function (invoice) {\n                // invoice.inventory.forEach(function (invent) {\n                //     payable += invent.total\n                // });\n                // invoice.procedure.forEach(function (proc) {\n                //     payable += proc.unit * proc.total\n                // });\n                let invoicePayableAmount = invoice.total - invoice.payments_data;\n                if (invoice.pay_amount)\n                    invoicePayableAmount += invoice.pay_amount;\n                if (invoice.pay_amount_wallet)\n                    invoicePayableAmount += invoice.pay_amount_wallet;\n                payable += invoicePayableAmount;\n                if (totalPayingAmount >= invoicePayableAmount) {\n                    totalPayingAmount -= invoicePayableAmount;\n                    invoicePayments[invoice.id] = invoicePayableAmount;\n                } else {\n                    invoicePayments[invoice.id] = totalPayingAmount;\n                    totalPayingAmount = 0;\n                }\n\n            });\n\n            return {\n                advanceToBeSent: totalPayingAmount,\n                totalPayableAmount: payable.toFixed(2),\n                invoicePayments: invoicePayments\n            }\n        });\n    }\n    setPaymentAmount = (value) => {\n        let that = this;\n        this.setState({\n            totalPayingAmount: value\n        }, function () {\n            that.calculateInvoicePayments();\n        })\n    }\n    setPaymentFromAdvanceAmount = (value) => {\n        let that = this;\n        this.setState({\n            totalPayingFromAdvanceAmount: value\n        }, function () {\n            that.calculateInvoicePayments();\n        })\n    }\n    changeSelectedPaymentMode = (e) => {\n        this.setState({\n            selectedPaymentMode: e\n        })\n    };\n    changeNotes = (e) => {\n        this.setState({\n            notes: e\n        })\n    };\n    selectedDate = (value) => {\n        let that = this;\n        that.setState({\n            selectDate: value,\n        })\n    };\n    handleSubmit = (e) => {\n        if (!this.state.totalPayingAmount) {\n            displayMessage(WARNING_MSG_TYPE, \"Payment Amount of O INR is not allowed.\");\n            return false\n        }\n        this.setState({\n            loading: true\n        })\n        let that = this;\n        let newPayment = {\n            \"invoices\": [],\n            \"bank\": \"\",\n            \"number\": 0,\n            \"is_active\": true,\n            notes: that.state.notes,\n            \"is_cancelled\": false,\n            \"practice\": that.props.active_practiceId,\n            \"patient\": that.props.match.params.id,\n            \"payment_mode\": that.state.selectedPaymentMode,\n            advance_value: that.state.advanceToBeSent,\n            \"is_advance\": !!that.state.advanceToBeSent,\n            \"date\": moment(that.state.selectDate).format(\"YYYY-MM-DD\"),\n        }\n        let reqData = []\n        if (that.state.totalPayingAmount - that.state.totalPayableAmount > 1) {\n            reqData.advance_value = that.state.totalPayingAmount - that.state.totalPayableAmount;\n            reqData.is_advance = true;\n        }\n        let invoices = Object.keys(that.state.invoicePayments);\n        let invoicePayments = {...that.state.invoicePayments};\n        let totalAmountPayingFromAdvance = that.state.totalPayingFromAdvanceAmount;\n        let consumedInvoices = 0;\n        if (totalAmountPayingFromAdvance) {\n            that.state.availableAdvance.data.forEach(function (availableAdvancePayments) {\n                let maxConsumeAmount = totalAmountPayingFromAdvance;\n                if (availableAdvancePayments.advance_value < maxConsumeAmount) {\n                    maxConsumeAmount = availableAdvancePayments.advance_value;\n                }\n                while (totalAmountPayingFromAdvance && invoices.length > consumedInvoices) {\n                    if (invoicePayments[invoices[consumedInvoices]] && maxConsumeAmount > invoicePayments[invoices[consumedInvoices]]) {\n                        availableAdvancePayments.advance_value -= invoicePayments[invoices[consumedInvoices]];\n                        availableAdvancePayments.invoices.push({\n                            \"pay_amount_advance\": invoicePayments[invoices[consumedInvoices]],\n                            \"pay_amount\": invoicePayments[invoices[consumedInvoices]],\n                            \"is_active\": true,\n                            \"invoice\": invoices[consumedInvoices],\n                        });\n                        consumedInvoices++;\n                        totalAmountPayingFromAdvance -= invoicePayments[invoices[consumedInvoices]];\n                        invoicePayments[invoices[consumedInvoices]] -= invoicePayments[invoices[consumedInvoices]];\n                    } else if (invoicePayments[invoices[consumedInvoices]]) {\n                        availableAdvancePayments.invoices.push({\n                            \"pay_amount_advance\": maxConsumeAmount,\n                            \"pay_amount\": maxConsumeAmount,\n                            \"is_active\": true,\n                            \"invoice\": invoices[consumedInvoices],\n                        });\n\n                        invoicePayments[invoices[consumedInvoices]] -= maxConsumeAmount;\n                        totalAmountPayingFromAdvance -= maxConsumeAmount;\n                        availableAdvancePayments.advance_value -= maxConsumeAmount;\n                    }\n                    if (!availableAdvancePayments.advance_value) {\n                        availableAdvancePayments.is_advance = false;\n                    }\n                }\n                reqData.push(availableAdvancePayments);\n            });\n        }\n\n        for (; invoices.length > consumedInvoices; consumedInvoices++) {\n            newPayment.invoices.push({\n                \"pay_amount\": invoicePayments[invoices[consumedInvoices]],\n                \"type\": \"Invoice\",\n                \"is_active\": true,\n                \"invoice\": invoices[consumedInvoices],\n            });\n        }\n        if (this.props.editPayment && this.props.editPayment.id)\n            newPayment.id = this.props.editPayment.id;\n        if (newPayment.invoices.length || newPayment.id || newPayment.is_advance) {\n            reqData.push(newPayment);\n        }\n        if (that.state.receivedPayIdFromRazorPay) {\n            newPayment.bank = \"RazorPay\";\n            newPayment.number = that.state.receivedPayIdFromRazorPay;\n        }\n        console.log(reqData);\n        let successFn = function (data) {\n            that.setState({\n                loading: false\n            });\n            // if (that.props.loadData)\n            that.props.loadData();\n            that.props.history.push(\"/patient/\" + that.props.match.params.id + \"/billing/payments\")\n        };\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            });\n        };\n        postAPI(BULK_PAYMENT_API, reqData, successFn, errorFn)\n    };\n\n    paymentHandler(inv, patientObj, cost,) {\n        if (!cost) {\n            displayMessage(WARNING_MSG_TYPE, \"Payment Amount of O INR is not allowed.\");\n            return false\n        }\n        const that = this;\n        const options = {\n            key: RAZORPAY_KEY,\n            amount: cost.toFixed(2) * 100,\n            name: patientObj.custom_id,\n\n            description: 'Payment for ' + inv,\n            \"prefill\": {\n                \"name\": patientObj.user.first_name,\n                \"email\": patientObj.user.email,\n                \"contact\": patientObj.user.mobile\n            },\n            handler(response) {\n                const paymentId = response.razorpay_payment_id;\n                let reqData = {\n                    \"payment_id\": paymentId,\n                    \"amount\": cost\n                };\n                that.setState({\n                    loading: true\n                });\n                const successFn = function (data) {\n                    displayMessage(SUCCESS_MSG_TYPE, data.detail);\n                    that.setState({\n                        loading: false,\n                        receivedPayIdFromRazorPay: paymentId\n                    }, function () {\n                        that.handleSubmit();\n                    });\n\n                };\n                const errorFn = function () {\n                    that.setState({\n                        loading: false\n                    });\n                    console.log('Request failed');\n                };\n                //Using my server endpoints to capture the payment\n                postAPI(ACCEPT_PAYMENT, reqData, successFn, errorFn);\n            },\n        };\n        const rzp1 = new window.Razorpay(options);\n        rzp1.open();\n    }\n\n    render() {\n        let that = this;\n        return <div>\n            <Spin spinning={this.state.loading} size={\"large\"}>\n                <Row gutter={8}>\n                    <Col xs={24} sm={24} md={16} lg={16} xl={18} xxl={18}>\n                        <Card>\n                            <Row>\n                                <Col span={24}>\n                                    {/*<Statistic title=\"Paid / Total \" value={93} suffix={\"/ \" + invoice.total}/>*/}\n                                    {/*</Col>*/}\n                                    {/*<Col xs={24} sm={24} md={16} lg={16} xl={18} xxl={18}>*/}\n\n                                    <table style={{width: '100%'}}>\n                                        <tbody>\n                                        <tr style={{borderBottom: '2px solid #ccc'}}>\n                                            <td style={{width: '20%'}}>\n                                                <small>INVOICE NO</small>\n                                            </td>\n                                            <td style={{width: '20%'}}>\n                                                <small>PROCEDURE</small>\n                                            </td>\n                                            <td style={{width: '20%', textAlign: 'right'}}>\n                                                <small>DUE(INR)</small>\n                                            </td>\n                                            <td style={{width: '20%', textAlign: 'right'}}>\n                                                <small>PAY NOW(INR)</small>\n                                            </td>\n                                            <td style={{width: '20%', textAlign: 'right'}}>\n                                                <small>DUE AFTER PAYMENT(INR)</small>\n                                            </td>\n                                        </tr>\n\n                                        {this.state.addedInvoice.map(invoice =>\n                                            <tr style={{borderBottom: '2px solid #ccc'}}>\n                                                <td>\n                                                    <Button size={'small'} type={'danger'} shape={'circle'}\n                                                            icon={'close'}\n                                                            style={{position: 'absolute', right: '-35px'}}\n                                                            onClick={() => this.removeInvoiceToPayments(invoice.id)}/>\n                                                    <h3>{invoice.invoice_id}</h3>\n                                                    {invoice.date}\n                                                </td>\n                                                <td>\n                                                    {invoice.procedure.map(proc => proc.procedure_data.name + \", \")}\n                                                    {invoice.inventory.map(proc => proc.inventory_item_data.name + \", \")}\n                                                    {invoice.reservation ? invoice.type + \",\" : null}\n                                                    {invoice.reservation_data && invoice.reservation_data.medicines ? invoice.reservation_data.medicines.map(item => item.name + ',') : null}\n                                                </td>\n                                                <td style={{textAlign: 'right'}}>\n                                                    <b>{(invoice.total - invoice.payments_data + (invoice.pay_amount || 0) + (invoice.pay_amount_wallet || 0)).toFixed(2)}</b>\n                                                </td>\n                                                <td style={{textAlign: 'right'}}>\n                                                    <b>{that.state.invoicePayments[invoice.id]}</b></td>\n                                                <td style={{textAlign: 'right'}}>\n                                                    <b>{(invoice.total - invoice.payments_data + (invoice.pay_amount || 0) + (invoice.pay_amount_wallet || 0) - that.state.invoicePayments[invoice.id]).toFixed(2)}</b>\n                                                </td>\n                                            </tr>\n                                        )}\n                                        </tbody>\n                                    </table>\n                                </Col>\n                            </Row>\n                            <Row style={{borderBottom: '2px dashed #ccc', marginTop: '20px'}}>\n                                <Col span={6}><h3>Total Payable :</h3></Col>\n                                <Col span={6}><h2>{this.state.totalPayableAmount}</h2></Col>\n                            </Row>\n                            <Row gutter={16} style={{marginTop: '20px'}}>\n                                <Col span={12}>\n                                    <Row>\n                                        <Col span={12}>\n                                            <h3>Amount From Advance :<br/>\n                                                <small>Available: {this.state.availableAdvance ? this.state.availableAdvance.max_allowed : 0} INR</small>\n                                            </h3>\n                                        </Col>\n                                        <Col span={12}>\n                                            <InputNumber min={0} step={1}\n                                                         max={this.state.availableAdvance ? this.state.availableAdvance.max_allowed : 0}\n                                                         disabled={!this.state.availableAdvance || !this.state.availableAdvance.max_allowed}\n                                                         value={this.state.totalPayingFromAdvanceAmount}\n                                                         onChange={this.setPaymentFromAdvanceAmount}/>\n                                        </Col>\n                                    </Row>\n                                    <Row>\n                                        <Col span={12}>\n                                            <h3>Pay Now:</h3></Col>\n                                        <Col span={12}>\n                                            <InputNumber min={0} step={1}\n                                                         value={this.state.totalPayingAmount}\n                                                         onChange={this.setPaymentAmount}/>\n                                        </Col>\n                                    </Row>\n\n                                </Col>\n                                <Col span={12}>\n                                    <Input.TextArea row={2} placeholder=\"Notes...\" size={'small'}\n                                                    onChange={(e) => this.changeNotes(e.target.value)}>\n                                        {this.state.notes}\n                                    </Input.TextArea>\n                                    <Select style={{width: '100%'}} value={this.state.selectedPaymentMode}\n                                            onChange={this.changeSelectedPaymentMode}>\n                                        {this.state.paymentModes.map(mode => <Select.Option value={mode.id}\n                                                                                            key={mode.id}>\n                                            {mode.mode}\n                                        </Select.Option>)}\n                                    </Select>\n\n                                    <Row>\n                                        <Col span={6}>\n                                            <br/>\n                                            <span> &nbsp;&nbsp;on&nbsp;&nbsp;</span>\n                                            <DatePicker style={{width: 150}} defaultValue={moment()}\n                                                        onChange={(value) => that.selectedDate(value)}/>\n                                        </Col>\n                                    </Row>\n                                </Col>\n\n\n                            </Row>\n                            <Row>\n                                <Col span={24} style={{align: 'center'}}>\n                                    <Popconfirm\n                                        title={\"Are you sure to take payment of INR \" + this.state.totalPayingAmount + \"?\"}\n                                        onConfirm={() => this.paymentHandler(this.state.addedInvoice.map(inv => inv.invoice_id).join(', '), this.props.currentPatient, this.state.totalPayingAmount)}>\n                                        <Button type={'primary'} style={{margin: 5}}\n                                                disabled={that.props.editPayment && that.props.editPayment.invoices}>Pay\n                                            Online & Save Payments</Button>\n                                    </Popconfirm>\n                                    <Popconfirm\n                                        title={\"Are you sure to take payment of INR \" + this.state.totalPayingAmount + \"?\"}\n                                        onConfirm={this.handleSubmit}>\n                                        <Button type={'primary'} style={{margin: 5}}>Only Save Payments</Button>\n                                    </Popconfirm>\n                                </Col>\n                            </Row>\n                        </Card>\n                    </Col>\n                    <Col xs={24} sm={24} md={6} lg={8} xl={6} xxl={6}>\n                        <List loading={this.state.invoiceLoading} dataSource={this.state.invoicesList}\n                              renderItem={invoice => (that.state.addedInvoiceId[invoice.id] ?\n                                  <div/> :\n                                  <Card hoverable\n                                        onClick={() => this.addInvoiceToPayments(invoice.id)}\n                                        style={{marginBottom: '10px'}}>\n                                      <table style={{width: '100%'}}>\n                                          <tbody>\n                                          <tr>\n                                              <td style={{maxWidth: 'calc(100% - 60px)'}}><h4>{invoice.invoice_id}</h4>\n                                              </td>\n                                              <td style={{textAlign: 'right'}}><b>{invoice.date}</b></td>\n                                          </tr>\n                                          </tbody>\n                                      </table>\n                                      <Divider style={{margin: 0}}/>\n                                      <table style={{width: '100%'}}>\n                                          <tbody>\n                                          {invoice.procedure.map(proc => <tr>\n                                              <td style={{maxWidth: 'calc(100% - 60px)'}}>{proc.procedure_data.name}</td>\n                                              <td style={{textAlign: 'right'}}>\n                                                  <b>{(proc.unit * proc.unit_cost).toFixed(2)}</b></td>\n                                          </tr>)}\n                                          {invoice.inventory.map(proc => <tr>\n                                              <td style={{maxWidth: 'calc(100% - 60px)'}}>{proc.inventory_item_data.name}</td>\n                                              <td style={{textAlign: 'right'}}>\n                                                  <b>{(proc.unit * proc.unit_cost).toFixed(2)}</b></td>\n                                          </tr>)}\n                                          {invoice.reservation ?\n                                              <tr>\n                                                  <td style={{maxWidth: 'calc(100% - 60px)'}}>{invoice.type}</td>\n                                                  <td style={{textAlign: 'right'}}>\n                                                      <b>{invoice.reservation_data.bed_package_price ? invoice.reservation_data.bed_package_price.toFixed(2) : null}</b>\n                                                  </td>\n                                              </tr> : null}\n\n                                          {invoice.reservation_data && invoice.reservation_data.medicines ? <>\n                                                  {invoice.reservation_data.medicines.map(item => <tr>\n                                                      <td style={{maxWidth: 'calc(100% - 60px)'}}>{item.name}</td>\n                                                      <td style={{textAlign: 'right'}}><b>{item.final_price.toFixed(2)}</b>\n                                                      </td>\n                                                  </tr>)}\n                                              </>\n                                              : null}\n                                          </tbody>\n                                      </table>\n                                      <Divider style={{margin: 0}}/>\n                                      <table style={{width: '100%'}}>\n                                          <tbody>\n                                          <tr>\n                                              <td style={{maxWidth: 'calc(100% - 60px)'}}>Invoice Amount</td>\n                                              <td style={{textAlign: 'right'}}><b>{invoice.total.toFixed(2)}</b></td>\n                                          </tr>\n                                          <tr>\n                                              <td style={{maxWidth: 'calc(100% - 60px)'}}>Paid Amount</td>\n                                              <td style={{textAlign: 'right'}}>\n                                                  <b>{invoice.payments_data ? invoice.payments_data.toFixed(2) : 0}</b>\n                                              </td>\n                                          </tr>\n                                          <tr>\n                                              <td style={{maxWidth: 'calc(100% - 60px)'}}><b>Amount Due</b></td>\n                                              <td style={{textAlign: 'right'}}>\n                                                  <b>{(invoice.total - invoice.payments_data).toFixed(2)}</b></td>\n                                          </tr>\n                                          </tbody>\n                                      </table>\n\n                                  </Card>)}/>\n                    </Col>\n                </Row>\n            </Spin>\n        </div>\n    }\n}\n\nexport default AddPaymentForm;\n","import React from \"react\";\nimport {Button, Card, Form, Icon, Input, Modal} from \"antd\";\nimport {CANCELINVOICE_RESENT_OTP, CANCELINVOICE_VERIFY_OTP} from \"../../../constants/api\";\nimport {getAPI, postAPI} from \"../../../utils/common\";\nclass EditPaymentModal extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            otpSent:this.props.otpSent,\n            editPaymentVisible: this.props.editPaymentVisible,\n            cancelPaymentVisible:this.props.cancelPaymentVisible,\n\n\n        };\n        this.editPaymentData = this.editPaymentData.bind(this);\n    }\n\n    handleSubmitEditPayment = (e) => {\n        let that = this;\n        e.preventDefault();\n        this.props.form.validateFields((err, values) => {\n            if (!err) {\n                let reqData = {\n                    ...values,\n                    practice: this.props.active_practiceId,\n                }\n                let successFn = function (data) {\n                    that.setState({\n                        editPaymentVisible: false,\n                    });\n                    that.editPaymentData(that.props.editPayment);\n                    that.props.editPaymentClose();\n                };\n                let errorFn = function () {\n\n                };\n                postAPI(CANCELINVOICE_VERIFY_OTP, reqData, successFn, errorFn);\n            }\n        });\n    };\n\n    editPaymentData = (record) => {\n        let that = this;\n        that.props.history.push(\"/patient/\" + record.patient + \"/billing/payments/edit/\");\n    };\n\n\n    sendOTP() {\n        let that = this;\n        let successFn = function (data) {\n\n        };\n        let errorFn = function () {\n\n        };\n        getAPI(CANCELINVOICE_RESENT_OTP, successFn, errorFn);\n    }\n\n    render() {\n        let that = this;\n        const {getFieldDecorator} = that.props.form;\n        return(\n            <Modal\n                visible={(that.state.editPaymentVisible && that.props.editPayment && that.props.editPayment.id == that.props.payment.id)}\n                title=\"Edit Invoice\"\n                footer={null}\n                onOk={that.handleSubmitEditPayment}\n                onCancel={that.props.editPaymentClose}\n            >\n                <Form>\n                    <Form.Item>\n                        {getFieldDecorator('otp', {\n                            rules: [{required: true, message: 'Please input Otp!'}],\n                        })(\n                            <Input prefix={<Icon type=\"user\" style={{color: 'rgba(0,0,0,.25)'}}/>}\n                                   placeholder=\"Otp\"\n                            />,\n                        )}\n                    </Form.Item>\n                    <Form.Item>\n                        {that.props.otpSent ? <a style={{float: 'right'}} type=\"primary\" onClick={that.sendOTP}>\n                            Resend Otp ?\n                        </a> : null}\n                        <Button size=\"small\" type=\"primary\" htmlType=\"submit\" onClick={that.handleSubmitEditPayment}>\n                            Submit\n                        </Button>&nbsp;\n                        <Button size=\"small\" onClick={that.props.editPaymentClose}>\n                            Close\n                        </Button>\n                    </Form.Item>\n                </Form>\n            </Modal>\n        )\n    }\n\n\n}\nexport default Form.create()(EditPaymentModal);\n","import React from \"react\";\nimport {Button, Card, Form, Icon, Input, Modal} from \"antd\";\nimport {\n    CANCELINVOICE_RESENT_OTP,\n    CANCELINVOICE_VERIFY_OTP,\n    SINGLE_INVOICES_API, SINGLE_PAYMENT_API\n} from \"../../../constants/api\";\nimport {displayMessage, getAPI, interpolate, postAPI, putAPI} from \"../../../utils/common\";\nimport {SUCCESS_MSG_TYPE} from \"../../../constants/dataKeys\";\nclass CancelPaymentModal extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            cancelPaymentVisible: this.props.cancelPaymentVisible,\n            otpSent:this.props.otpSent,\n\n        };\n    }\n\n\n    handleSubmitCancelPayment = (e) => {\n        let that = this;\n        e.preventDefault();\n        this.props.form.validateFields((err, values) => {\n            if (!err) {\n                let reqData = {\n                    ...values,\n                    practice: this.props.active_practiceId,\n                }\n                let successFn = function (data) {\n                    that.setState({\n                        cancelPaymentVisible: false,\n                    });\n                    that.deletePayment(that.props.patientId, that.props.paymentId);\n                    that.props.cancelPaymentClose();\n                };\n                let errorFn = function () {\n\n                };\n                postAPI(CANCELINVOICE_VERIFY_OTP, reqData, successFn, errorFn);\n            }\n        });\n    }\n\n\n\n    deletePayment(patient, payment) {\n        let that = this;\n        let reqData = {patient: patient, is_cancelled: true};\n        let successFn = function (data) {\n            displayMessage(SUCCESS_MSG_TYPE, \"Payment cancelled successfully\")\n            that.props.loadPayments();\n        };\n        let errorFn = function () {\n        };\n        putAPI(interpolate(SINGLE_PAYMENT_API, [payment]), reqData, successFn, errorFn);\n\n    }\n\n\n    sendOTP() {\n        let that = this;\n        let successFn = function (data) {\n\n        };\n        let errorFn = function () {\n\n        };\n        getAPI(CANCELINVOICE_RESENT_OTP, successFn, errorFn);\n    }\n\n    render() {\n        let that = this;\n        const {getFieldDecorator} = that.props.form;\n        return(\n            <Modal\n                visible={(that.state.cancelPaymentVisible && that.props.editPayment && that.props.editPayment.id == that.props.payment.id)}\n                title=\"Cancel Payment\"\n                footer={null}\n                onOk={that.handleSubmitCancelPayment}\n                onCancel={that.props.cancelPaymentClose}\n            >\n                <Form>\n                    <Form.Item>\n                        {getFieldDecorator('otp', {\n                            rules: [{required: true, message: 'Please input Otp!'}],\n                        })(\n                            <Input prefix={<Icon type=\"user\" style={{color: 'rgba(0,0,0,.25)'}}/>}\n                                   placeholder=\"Otp\"\n                            />,\n                        )}\n                    </Form.Item>\n                    <Form.Item>\n                        {that.state.otpSent ? <a style={{float: 'right'}} type=\"primary\" onClick={that.sendOTP}>\n                            Resend Otp ?\n                        </a> : null}\n                        <Button size=\"small\" type=\"primary\" htmlType=\"submit\" onClick={that.handleSubmitCancelPayment}>\n                            Submit\n                        </Button>&nbsp;\n                        <Button size=\"small\" onClick={that.props.cancelPaymentClose}>\n                            Close\n                        </Button>\n                    </Form.Item>\n                </Form>\n            </Modal>\n        )\n    }\n\n\n}\nexport default Form.create()(CancelPaymentModal);\n","import React from \"react\";\n\nimport {\n    Alert,\n    Button,\n    Card,\n    Col,\n    Divider,\n    Dropdown,\n    Icon,\n    Menu,\n    Row,\n    Spin,\n    Table,\n    Tag,\n    Tooltip,\n    Form,\n    Input, Statistic\n} from \"antd\";\nimport {displayMessage, getAPI, interpolate, putAPI, postAPI} from \"../../../utils/common\";\nimport {\n    PATIENT_PAYMENTS_API,\n    PAYMENT_PDF,\n    SINGLE_PAYMENT_API,\n    CANCELINVOICE_VERIFY_OTP,\n    CANCELINVOICE_GENERATE_OTP,\n    CANCELINVOICE_RESENT_OTP\n} from \"../../../constants/api\";\nimport moment from \"moment\";\nimport {Link, Redirect} from \"react-router-dom\";\nimport {Route, Switch} from \"react-router\";\nimport AddPaymentForm from \"./AddPaymentForm\";\nimport InfiniteFeedLoaderButton from \"../../common/InfiniteFeedLoaderButton\";\nimport {BACKEND_BASE_URL} from \"../../../config/connect\";\nimport {OTP_DELAY_TIME, SUCCESS_MSG_TYPE} from \"../../../constants/dataKeys\";\nimport {Modal} from \"antd/lib/index\";\nimport EditPaymentModal from \"../payments/EditPaymentModal\";\nimport InvoiceReturnModal from \"../invoices/InvoiceReturnModal\";\nimport CancelPaymentModal from \"./CancelPaymentModal\";\n\nconst confirm = Modal.confirm;\n\nclass PatientPayments extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            payments: [],\n            active_practiceId: this.props.active_practiceId,\n            loading: true,\n            otpSent: false,\n            editPaymentVisible: false,\n            editPayment:null,\n        }\n\n    }\n\n    componentDidMount() {\n        let that=this;\n        this.loadPayments();\n\n    }\n\n\n    loadPayments = (page = 1) => {\n        let that = this;\n        if (that.props.refreshWallet && page==1){\n            that.props.refreshWallet();\n        }\n        this.setState({\n            loading: true\n        });\n        let successFn = function (data) {\n            that.setState(function (prevState) {\n                if (data.current == 1)\n                    return {\n                        payments: [...data.results],\n                        next: data.next,\n                        loading: false\n                    }\n                return {\n                    payments: [...prevState.payments, ...data.results],\n                    next: data.next,\n                    loading: false\n                }\n            })\n        }\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            })\n\n        }\n        let apiParams = {\n            page: page,\n            practice: this.props.active_practiceId,\n        };\n        if (this.props.match.params.id) {\n            apiParams.patient = this.props.match.params.id;\n        }\n        // if (this.props.showAllClinic && this.props.match.params.id) {\n        //     delete (apiParams.practice)\n        // }\n        getAPI(PATIENT_PAYMENTS_API, successFn, errorFn, apiParams);\n    };\n\n\n\n    loadPDF = (id) => {\n        let that = this;\n        let successFn = function (data) {\n            if (data.report)\n                window.open(BACKEND_BASE_URL + data.report);\n        };\n        let errorFn = function () {\n\n        };\n        getAPI(interpolate(PAYMENT_PDF, [id]), successFn, errorFn);\n    };\n\n\n\n\n    editModelOpen = (record) => {\n        let that = this;\n\n        let created_time=moment().diff(record.created_at,'minutes');\n\n        if(created_time >OTP_DELAY_TIME){\n            that.setState({\n                editPaymentVisible: true,\n                cancelPaymentVisible:false,\n                editPayment: record,\n            });\n            let reqData = {\n                practice: this.props.active_practiceId,\n                type: 'Payment' + ':' + record.payment_id + ' ' + 'Edit'\n            }\n            let successFn = function (data) {\n                that.setState({\n                    otpSent: true,\n                    patientId: record.patient,\n                    paymentId: record.payment_id\n                })\n            };\n            let errorFn = function () {\n\n            };\n\n            postAPI(CANCELINVOICE_GENERATE_OTP, reqData, successFn, errorFn);\n        }else{\n            that.setState({\n                editPayment:record,\n            },function () {\n                that.props.history.push(\"/patient/\" + record.patient + \"/billing/payments/edit\")\n            });\n        }\n    };\n\n\n    editPaymentData = (record) => {\n        let that = this;\n        // let id = this.props.match.params.id;\n        that.setState({\n            editPayment: record,\n        }, function () {\n            that.props.history.push(\"/patient/\" + record.patient + \"/billing/payments/edit/\")\n        });\n    };\n    // editPaymentClose = () => {\n    //     this.setState({\n    //         editPaymentVisible: false\n    //     })\n    // };\n    //\n    // handleSubmitEditPayment = (e) => {\n    //     let that = this;\n    //     e.preventDefault();\n    //     this.props.form.validateFields((err, values) => {\n    //         if (!err) {\n    //             let reqData = {\n    //                 ...values,\n    //                 practice: this.props.active_practiceId,\n    //             };\n    //             let successFn = function (data) {\n    //                 that.setState({\n    //                     editPaymentVisible: false,\n    //                 });\n    //                 that.editPaymentData(that.state.editPayment);\n    //\n    //             };\n    //             let errorFn = function () {\n    //\n    //             };\n    //             postAPI(CANCELINVOICE_VERIFY_OTP, reqData, successFn, errorFn);\n    //         }\n    //     });\n    // };\n    // editPaymentData=(record)=>{\n    //     let that =this;\n    //     console.log('\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\">',record);\n    //     that.setState({\n    //         editPayment:record,\n    //     },function () {\n    //         that.props.history.push(\"/patient/\" + record.patient + \"/billing/payments/edit\")\n    //     });\n    //\n    // };\n\n    cancelModalOpen = (record) => {\n        let that = this;\n        let created_time=moment().diff(record.created_at,'minutes');\n\n        if(created_time >OTP_DELAY_TIME){\n\n            that.setState({\n                editPaymentVisible:false,\n                cancelPaymentVisible: true,\n                editPayment: record,\n            });\n            let reqData = {\n                practice: this.props.active_practiceId,\n                type: 'Payment' + ':' + record.payment_id + ' ' + ' Cancellation'\n            }\n            let successFn = function (data) {\n                that.setState({\n                    otpSent: true,\n                    patientId: record.patient,\n                    paymentId: record.id\n                })\n            }\n            let errorFn = function () {\n\n            };\n\n            postAPI(CANCELINVOICE_GENERATE_OTP, reqData, successFn, errorFn);\n        }else{\n            that.deletePayment(record.patient, record.id)\n        }\n    };\n\n    deletePayment(patient, payment) {\n        let that = this;\n        let reqData = {patient: patient, is_cancelled: true};\n        let successFn = function (data) {\n            displayMessage(SUCCESS_MSG_TYPE, \"Payment cancelled successfully\")\n            that.loadPayments();\n        };\n        let errorFn = function () {\n        };\n        putAPI(interpolate(SINGLE_PAYMENT_API, [payment]), reqData, successFn, errorFn);\n\n    }\n\n\n\n\n    editPaymentClose = () => {\n        this.setState({\n            editPaymentVisible: false\n        })\n    };\n    cancelPaymentClose = () => {\n        this.setState({\n            cancelPaymentVisible: false\n        })\n    }\n\n\n    render() {\n        let that = this;\n        const paymentmodes = {}\n        if (this.state.paymentModes) {\n            this.state.paymentModes.forEach(function (mode) {\n                paymentmodes[mode.id] = mode.mode;\n            })\n        }\n\n\n        if (this.props.match.params.id) {\n            return <div>\n                <Switch>\n                    <Route exact path='/patient/:id/billing/payments/add'\n                           render={(route) => <AddPaymentForm {...this.state} {...route} {...this.props}\n                                                              loadData={this.loadPayments}/>}/>\n                    <Route exact path='/patient/:id/billing/payments/edit'\n                           render={(route) => (that.state.editPayment ?\n                               <AddPaymentForm {...this.state} {...route} {...this.props}\n                                               paymentId={this.state.paymentId}\n                                               loadData={this.loadPayments}/> :\n                               <Redirect to={\"/patient/\" + route.match.params.id + \"/billing/payments\"}/>)\n                           }/>\n                    <Route>\n                        <div>\n                            <Alert banner showIcon type={\"info\"}\n                                   message={\"The payments shown are only for the current selected practice!\"}/>\n                            <Card\n                                bodyStyle={{padding: 0}}\n                                title={this.state.currentPatient ? this.state.currentPatient.name + \" Payments\" : \"Payments\"}\n                                extra={<Button.Group>\n                                    <Link\n                                        to={\"/patient/\" + this.props.match.params.id + \"/billing/payments/add\"}><Button><Icon\n                                        type=\"plus\"/>Add</Button></Link>\n                                </Button.Group>}>\n                            </Card>\n                            {this.state.payments.map(payment => PaymentCard(payment, this))}\n                            <Spin spinning={this.state.loading}>\n                                <Row/>\n                            </Spin>\n                            <InfiniteFeedLoaderButton loaderFunction={() => this.loadPayments(that.state.next)}\n                                                      loading={this.state.loading}\n                                                      hidden={!this.state.next}/>\n                        </div>\n                    </Route>\n                </Switch>\n            </div>\n        } else {\n            return <div>\n                <Card\n                    bodyStyle={{padding: 0}}\n                    title={this.state.currentPatient ? this.state.currentPatient.name + \" Payments\" : \"Payments\"}\n                    extra={<Button.Group>\n                        {/* onClick={() => this.props.togglePatientListModal(true)} */}\n                        <Button type={\"primary\"} onClick={() => this.props.togglePatientListModal(true)}>\n                            <Icon type=\"plus\"/>Add\n                        </Button>\n                    </Button.Group>}>\n                </Card>\n                {this.state.payments.map(payment => PaymentCard(payment, this))}\n                <Spin spinning={this.state.loading}>\n                    <Row/>\n                </Spin>\n                <InfiniteFeedLoaderButton loaderFunction={() => this.loadPayments(that.state.next)}\n                                          loading={this.state.loading}\n                                          hidden={!this.state.next}/>\n\n            </div>\n        }\n\n    }\n}\n\nexport default Form.create()(PatientPayments);\n\nconst columns = [{\n    title: 'INVOICE',\n    dataIndex: 'invoice_id',\n    key: 'invoice',\n    render: invoice => <span>{invoice}</span>,\n}, {\n    title: 'Amount Paid',\n    key: 'pay_amount',\n    dataIndex: 'pay_amount',\n    render: value => value ? value.toFixed(2) : ''\n}];\n\nfunction PaymentCard(payment, that) {\n    const {getFieldDecorator} = that.props.form;\n    let advancePay = [];\n    if(payment.is_advance){\n        advancePay.push({\n            invoice_id:\"Advance Payment\",\n            pay_amount : payment.advance_value\n        })\n    }\n    return <Card style={{marginTop: 10}}\n                 key={payment.id}\n                 bodyStyle={{padding: 0}}\n                 title={(payment.patient_data && !that.props.currentPatient ?\n                     <small>{payment.date ? moment(payment.date).format('lll') : null}\n                         <Link to={\"/patient/\" + payment.patient_data.id + \"/billing/payments\"}>\n                             &nbsp;&nbsp; {payment.patient_data.user.first_name} (ID: {payment.patient_data.custom_id?payment.patient_data.custom_id:payment.patient_data.id})&nbsp;\n                         </Link>\n                         <span>, {payment.patient_data.gender}</span></small>\n                     : <small>{payment.created_at ? moment(payment.created_at).format('lll') : null}</small>)}\n                 extra={<Dropdown.Button\n                     size={\"small\"}\n                     style={{float: 'right'}}\n                     overlay={<Menu>\n                         <Menu.Item key=\"2\" onClick={() => that.editModelOpen(payment)}\n                                    disabled={(payment.practice != that.props.active_practiceId)}>\n                             <Icon type=\"edit\"/>\n                             Edit\n                         </Menu.Item>\n                         <Menu.Item key=\"3\" onClick={() => that.cancelModalOpen(payment)}\n                                    disabled={(payment.practice != that.props.active_practiceId) || payment.is_cancelled}>\n                             <Icon type=\"delete\"/>\n                             Cancel\n                         </Menu.Item>\n                         <Menu.Divider/>\n                         <Menu.Item key=\"4\">\n                             <Link to={\"/patient/\" + payment.patient + \"/emr/timeline\"}>\n                                 <Icon type=\"clock-circle\"/>\n                                 Patient Timeline\n                             </Link>\n                         </Menu.Item>\n                     </Menu>}>\n                     <a onClick={() => that.loadPDF(payment.id)}><Icon\n                         type=\"printer\"/></a>\n                 </Dropdown.Button>}>\n        <Row gutter={8}>\n            <Col xs={24} sm={24} md={6} lg={4} xl={4} xxl={4} style={{padding: 10}}>\n                {payment.is_cancelled ?\n                    <Alert message=\"Cancelled\" type=\"error\" showIcon/> : null}\n                <Divider style={{marginBottom: 0}}>{payment.payment_id}</Divider>\n\n            </Col>\n            <Col xs={24} sm={24} md={18} lg={20} xl={20} xxl={20}>\n\n                <Table columns={columns}\n                       pagination={false}\n                       footer={() => PaymentFooter({practice: payment.practice_data,notes:payment.notes})}\n                       dataSource={[...payment.invoices,...advancePay]} rowKey={payment.id}/>\n            </Col>\n        </Row>\n\n        {that.state.editPaymentVisible && that.state.otpSent && <EditPaymentModal {...that.state} payment={payment} editPaymentClose={that.editPaymentClose} editPaymentData={that.editPaymentData} {...that.props} />}\n\n        {that.state.cancelPaymentVisible && that.state.otpSent && <CancelPaymentModal {...that.state} payment={payment} cancelPaymentClose={that.cancelPaymentClose} {...that.props} loadPayments={that.loadPayments} />}\n\n    </Card>\n}\n\nfunction PaymentFooter(presc) {\n    if (presc) {\n        return <p>\n            {presc.doctor ? <Tooltip title=\"Doctor\"><Tag color={presc.doctor ? presc.doctor.calendar_colour : null}>\n                <b>{\"prescribed by  \" + presc.doctor.user.first_name} </b>\n            </Tag></Tooltip> : null}\n            {presc.practice ? <Tag style={{float: 'right'}}>\n                <Tooltip title=\"Practice Name\">\n                    <b>{presc.practice.name} </b>\n                </Tooltip>\n            </Tag> : null}\n            {presc.notes ? <p>Notes: {presc.notes}</p> : null}\n        </p>\n    }\n    return null\n}\n","import React from \"react\";\nimport {\n    Affix,\n    Alert,\n    Card,\n    Col,\n    Divider,\n    Modal,\n    Row,\n    Spin,\n    Statistic,\n    Table,\n    Tag,\n    Tooltip,\n    Form,\n    Menu,\n    Icon,\n    Button,\n    Dropdown,\n    Input,\n} from \"antd\";\nimport {displayMessage, getAPI, interpolate, putAPI, postAPI} from \"../../../utils/common\";\nimport {\n    INVOICE_RETURN_API,\n    DRUG_CATALOG,\n    PROCEDURE_CATEGORY,\n    TAXES,\n    RETURN_INVOICE_PDF_API,\n    SINGLE_RETURN_API,\n    CANCELINVOICE_GENERATE_OTP,\n    CANCELINVOICE_RESENT_OTP,\n    CANCELINVOICE_VERIFY_OTP\n} from \"../../../constants/api\";\nimport moment from \"moment\";\nimport {Route, Switch} from \"react-router\";\nimport InfiniteFeedLoaderButton from \"../../common/InfiniteFeedLoaderButton\";\nimport {Link, Redirect} from \"react-router-dom\";\nimport {BACKEND_BASE_URL} from \"../../../config/connect\";\nimport {SUCCESS_MSG_TYPE, OTP_DELAY_TIME} from \"../../../constants/dataKeys\";\n\nclass ReturnInvoices extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            currentPatient: this.props.currentPatient,\n            active_practiceId: this.props.active_practiceId,\n            returnInvoices: [],\n            drug_catalog: null,\n            procedure_category: null,\n            taxes_list: null,\n            loading: true,\n            cancelReturnIncoiceVisible:false,\n        }\n        this.loadReturnInvoices = this.loadReturnInvoices.bind(this);\n        this.loadDrugCatalog = this.loadDrugCatalog.bind(this);\n        this.loadProcedureCategory = this.loadProcedureCategory.bind(this);\n        this.loadTaxes = this.loadTaxes.bind(this);\n\n    }\n\n    componentDidMount() {\n        this.loadReturnInvoices();\n    }\n\n    loadReturnInvoices(page = 1) {\n        let that = this;\n        if (that.props.refreshWallet && page==1){\n            that.props.refreshWallet();\n        }\n        that.setState({\n            loading: true\n        });\n        let successFn = function (data) {\n            if (data.current == 1) {\n                that.setState({\n                    total: data.count,\n                    returnInvoices: data.results,\n                    loading: false,\n                    loadMoreReturnInvoice: data.next\n                })\n            } else {\n                that.setState(function (prevState) {\n                    return {\n                        total: data.count,\n                        returnInvoices: [...prevState.returnInvoices, ...data.results],\n                        loading: false,\n                        loadMoreReturnInvoice: data.next\n                    }\n                })\n            }\n        }\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            })\n\n        }\n        let apiParams = {\n            page: page,\n            practice: this.props.active_practiceId,\n        };\n        if (this.props.match.params.id) {\n            apiParams.patient = this.props.match.params.id;\n        }\n        // if (this.props.showAllClinic && this.props.match.params.id) {\n        //     delete (apiParams.practice)\n        // }\n        getAPI(INVOICE_RETURN_API, successFn, errorFn, apiParams);\n    }\n\n    loadDrugCatalog() {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                drug_catalog: data,\n            })\n        }\n        let errorFn = function () {\n\n        }\n        getAPI(interpolate(DRUG_CATALOG, [this.props.active_practiceId]), successFn, errorFn)\n    }\n\n    loadProcedureCategory() {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                procedure_category: data,\n            })\n        }\n        let errorFn = function () {\n\n\n        }\n        getAPI(interpolate(PROCEDURE_CATEGORY, [this.props.active_practiceId]), successFn, errorFn);\n    }\n\n    loadTaxes() {\n        var that = this;\n        let successFn = function (data) {\n            that.setState({\n                taxes_list: data,\n            })\n        };\n        let errorFn = function () {\n        };\n        getAPI(interpolate(TAXES, [this.props.active_practiceId]), successFn, errorFn);\n\n    }\n\n   \n\n    loadPDF = (id) => {\n        let that = this;\n        let successFn = function (data) {\n            if (data.report)\n                window.open(BACKEND_BASE_URL + data.report);\n        }\n        let errorFn = function () {\n\n        }\n        getAPI(interpolate(RETURN_INVOICE_PDF_API, [id]), successFn, errorFn);\n    }\n\n\n    cancelModalOpen = (record) => {\n        let that = this;\n        let created_time=moment().diff(record.created_at,'minutes');\n\n        if(created_time >OTP_DELAY_TIME){\n                            \n            that.setState({\n                cancelReturnIncoiceVisible: true,\n                editReturnInvoice: record\n            });\n            let reqData = {\n                practice: this.props.active_practiceId,\n                type: 'Return Invoice' + ':' + record.return_id + ' ' + ' Cancellation'\n            }\n            let successFn = function (data) {\n                that.setState({\n                    otpSent: true,\n                    patientId: record.patient,\n                    returnInvoiceId: record.id\n                })\n            }\n            let errorFn = function () {\n\n            };\n            postAPI(CANCELINVOICE_GENERATE_OTP, reqData, successFn, errorFn);\n        }else{\n            that.deleteReturnInvoice(record.patient, record.id);\n        }\n    };\n\n\n    sendOTP() {\n        let that = this;\n        let successFn = function (data) {\n\n        }\n        let errorFn = function () {\n\n        }\n        getAPI(CANCELINVOICE_RESENT_OTP, successFn, errorFn);\n    }\n\n    cancelReturnInvoiceClose = () => {\n        this.setState({\n            cancelReturnIncoiceVisible: false\n        })\n    }\n    handleSubmitCancelReturnInvoice = (e) => {\n        let that = this;\n        e.preventDefault();\n        this.props.form.validateFields((err, values) => {\n            if (!err) {\n                let reqData = {\n                    ...values,\n                    practice: this.props.active_practiceId,\n                }\n                let successFn = function (data) {\n                    that.setState({\n                        cancelReturnIncoiceVisible: false,\n                    });\n                    that.deleteReturnInvoice(that.state.patientId, that.state.returnInvoiceId)\n                };\n                let errorFn = function () {\n\n                };\n                postAPI(CANCELINVOICE_VERIFY_OTP, reqData, successFn, errorFn);\n            }\n        });\n    }\n    // deleteReturnInvoice(patient ,returnInvoiceId)\n    deleteReturnInvoice(patient ,returnInvoiceId) {\n        let that = this;\n        let reqData = {patient: patient, is_cancelled: true};\n        let successFn = function (data) {\n            displayMessage(SUCCESS_MSG_TYPE, \"Return Invoice cancelled successfully\")\n            that.loadReturnInvoices();\n        }\n        let errorFn = function () {\n        }\n        putAPI(interpolate(SINGLE_RETURN_API, [returnInvoiceId]), reqData, successFn, errorFn);\n     }\n\n    render() {\n        let that = this;\n        const drugs = {}\n        if (this.state.drug_catalog) {\n\n            this.state.drug_catalog.forEach(function (drug) {\n                drugs[drug.id] = (drug.name + \",\" + drug.strength)\n            })\n        }\n        const procedures = {}\n        if (this.state.procedure_category) {\n            this.state.procedure_category.forEach(function (procedure) {\n                procedures[procedure.id] = procedure.name;\n            })\n        }\n\n        const taxesdata = {}\n        if (this.state.taxes_list) {\n            this.state.taxes_list.forEach(function (tax) {\n                taxesdata[tax.id] = tax.name;\n            })\n        }\n\n        if (this.props.match.params.id) {\n            return <div>\n                <Switch>\n                    <Route>\n                        <div>\n                            <Alert banner showIcon type={\"info\"}\n                                   message={\"The invoices return shown are only for the current selected practice!\"}/>\n                            <Affix offsetTop={0}>\n                                <Card bodyStyle={{padding: 0}}\n                                      style={{boxShadow: '0 5px 8px rgba(0, 0, 0, 0.09)'}}\n                                      title={(this.state.currentPatient ? this.state.currentPatient.user.first_name + \" Invoice Return\" : \"Invoices Return \") + (this.state.total ? `(Total:${this.state.total})` : '')}\n                                    //   extra={<Button.Group>\n                                    //       <Link to={\"/patient/\" + this.props.match.params.id + \"/billing/invoices/add\"}>\n                                    //           <Button type={\"primary\"}>\n                                    //               <Icon type=\"plus\"/>Add\n                                    //           </Button>\n                                    //       </Link>\n                                    //   </Button.Group>}>\n                                    >\n                                </Card>\n                            </Affix>\n                            {this.state.returnInvoices.map(invoice => InvoiceCard(invoice, that))}\n                            <Spin spinning={this.state.loading}>\n                                <Row/>\n                            </Spin>\n                            <InfiniteFeedLoaderButton\n                                loaderFunction={() => this.loadInvoices(this.state.loadMoreInvoice)}\n                                loading={this.state.loading}\n                                hidden={!this.state.loadMoreInvoice}/>\n\n                        </div>\n                    </Route>\n                </Switch>\n            </div>\n        } else {\n            return <div>\n                <Affix offsetTop={0}>\n                    <Card bodyStyle={{padding: 0}}\n                          style={{boxShadow: '0 5px 8px rgba(0, 0, 0, 0.09)'}}\n                          title={(this.state.currentPatient ? this.state.currentPatient.user.first_name + \" Invoice Return\" : \"Invoice Return \") + (this.state.total ? `(Total:${this.state.total})` : '')}\n                        //   extra={<Button.Group>\n                        //       <Button type={\"primary\"} onClick={() => this.props.togglePatientListModal(true)}>\n                        //           <Icon type=\"plus\"/>Add\n                        //       </Button>\n                        //   </Button.Group>}>\n                        >\n                    </Card>\n                </Affix>\n                {this.state.returnInvoices.map(invoice => InvoiceCard(invoice, that))}\n                <Spin spinning={this.state.loading}>\n                    <Row/>\n                </Spin>\n                <InfiniteFeedLoaderButton loaderFunction={() => this.loadInvoices(this.state.loadMoreInvoice)}\n                                          loading={this.state.loading}\n                                          hidden={!this.state.loadMoreInvoice}/>\n            </div>\n        }\n\n    }\n}\n\nexport default Form.create()(ReturnInvoices);\n\nfunction invoiceFooter(presc) {\n    if (presc) {\n        return <p>\n            {presc.staff ? <Tooltip title=\"Staff\"><Tag color={presc.staff ? presc.staff_data.calendar_colour : null}>\n                <b>{\"Return by  \" + presc.staff_data.user.first_name} </b>\n            </Tag></Tooltip> : null}\n            {presc.practice ? <Tag style={{float: 'right'}}>\n                <Tooltip title=\"Practice Name\">\n                    <b>{presc.practice_data.name} </b>\n                </Tooltip>\n            </Tag> : null}\n            {presc.notes ? <p>Notes: {presc.notes}</p> : null}\n        </p>\n    }\n    return null\n}\n\nfunction InvoiceCard(invoice, that) {\n    const {getFieldDecorator} = that.props.form;\n   \n    return <Card\n        key={invoice.id}\n        style={{marginTop: 10}}\n        bodyStyle={{padding: 0}}\n        title={<small>{invoice.date ? moment(invoice.date).format('ll') : null}\n            {that.state.currentPatient ? null : <span>\n            <Link to={\"/patient/\" + (invoice.patient_data ? invoice.patient_data.id : null) + \"/billing/return/invoices\"}>\n                &nbsp;&nbsp; {invoice.patient_data ? invoice.patient_data.user.first_name : null} (ID: {invoice.patient_data.custom_id? invoice.patient_data.custom_id :invoice.patient_data.id })&nbsp;\n            </Link>, {invoice.patient_data ? invoice.patient_data.gender : null}</span>}\n        </small>}\n          extra={<Dropdown.Button\n            size={\"small\"}\n            style={{float: 'right'}}\n            overlay={<Menu>\n                {/* <Menu.Item key=\"1\" onClick={() => that.deleteReturnInvoice(invoice)} */}\n                <Menu.Item key=\"1\" onClick={() =>that.cancelModalOpen(invoice)}\n                           disabled={(invoice.practice != that.props.active_practiceId) || invoice.payments_data || invoice.is_cancelled}>\n                    <Icon type=\"delete\"/>\n                    Cancel\n                </Menu.Item>\n            </Menu>}>\n            <a onClick={() => that.loadPDF(invoice.id)}><Icon\n                type=\"printer\"/></a>\n        </Dropdown.Button>}>\n        <Row gutter={8}>\n            <Col xs={24} sm={24} md={6} lg={4} xl={4} xxl={4} style={{padding: 10}}>\n                {invoice.is_cancelled ?\n                    <Alert message=\"Cancelled\" type=\"error\" showIcon/> : null}\n                <Divider style={{marginBottom: 0}}>{invoice.return_id}</Divider>\n                <Statistic title=\"Cash / Return \"\n                           value={(invoice.cash_return ? invoice.cash_return.toFixed(2) : 0)}\n                           suffix={\"/ \" + (invoice.return_value ? invoice.return_value.toFixed(2):0)}/>\n            </Col>\n            <Col xs={24} sm={24} md={18} lg={20} xl={20} xxl={20}>\n               \n                    <Table\n                        bordered={true}\n                        pagination={false}\n                        columns={columns}\n                        dataSource={[...invoice.inventory, ...invoice.procedure]}\n                        footer={() => invoiceFooter({...invoice})}/>\n            </Col>\n        </Row>\n\n        <Modal\n            visible={(that.state.cancelReturnIncoiceVisible && that.state.editReturnInvoice && that.state.editReturnInvoice.id == invoice.id)}\n            title=\"Cancel Return Invoice\"\n            footer={null}\n            onOk={that.handleSubmitCancelReturnInvoice}\n            onCancel={that.cancelReturnInvoiceClose}>\n            <Form>\n                <Form.Item>\n                    {getFieldDecorator('otp', {\n                        rules: [{required: true, message: 'Please input Otp!'}],\n                    })(\n                        <Input prefix={<Icon type=\"user\" style={{color: 'rgba(0,0,0,.25)'}}/>}\n                               placeholder=\"Otp\"\n                        />,\n                    )}\n                </Form.Item>\n                <Form.Item>\n                    {that.state.otpSent ? <a style={{float: 'right'}} type=\"primary\" onClick={that.sendOTP}>\n                        Resend Otp ?\n                    </a> : null}\n                    <Button size=\"small\" type=\"primary\" htmlType=\"submit\" onClick={that.handleSubmitCancelReturnInvoice}>\n                        Submit\n                    </Button>&nbsp;\n                    <Button size=\"small\" onClick={that.cancelReturnInvoiceClose}>\n                        Close\n                    </Button>\n                </Form.Item>\n            </Form>\n        </Modal>\n\n\n       \n    </Card>\n}\n\nconst columns = [{\n    title: 'Treatment & Products',\n    dataIndex: 'drug',\n    key: 'drug',\n    render: (text, record) => (\n        <span> <b>{record.name ? record.name : null}</b>\n                    {/* <br/> {record.staff_data ?\n                <Tag color={record.staff_data ? record.staff_data.calendar_colour : null}>\n                    <b>{\"return by  \" + record.staff_data.user.first_name} </b>\n                </Tag> : null} */}\n                </span>)\n}, {\n    title: 'Cost',\n    dataIndex: 'unit_cost',\n    key: 'unit_cost',\n    render: (item, record) => <span>{record.unit_cost ? record.unit_cost.toFixed(2) : null}</span>\n}, {\n    title: 'Unit',\n    dataIndex: 'unit',\n    key: 'unit',\n}, {\n    title: 'Discount',\n    dataIndex: 'discount_value',\n    key: 'discount_value',\n    render: (item, record) => <span>{record.discount_value ? record.discount_value.toFixed(2) : null}</span>\n}, {\n    title: 'Tax',\n    dataIndex: 'tax_value',\n    key: 'tax_value',\n    render: (item, record) => <span>{record.tax_value ? record.tax_value.toFixed(2) : null}</span>\n}, {\n    title: 'Total',\n    dataIndex: 'total',\n    key: 'total',\n    render: item => item ? item.toFixed(2) : null\n}];\n","import React from \"react\";\n\nexport const patientInvoiceDetailsInString = function (invoiceObj) {\n    let invoiceDetailsString = '';\n    if (invoiceObj.type != \"Invoice\")\n        invoiceDetailsString += invoiceObj.type + \", \";\n    if (invoiceObj.procedure)\n        invoiceObj.procedure.forEach(function (proc) {\n            if (proc.procedure_data)\n                invoiceDetailsString += proc.procedure_data.name + \", \"\n        });\n    if (invoiceObj.inventory)\n        invoiceObj.inventory.forEach(function (proc) {\n            if (proc.inventory_item_data)\n                invoiceDetailsString += proc.inventory_item_data.name + \", \"\n        });\n    if (invoiceObj.reservation)\n        invoiceDetailsString += invoiceObj.type + \",\";\n    if (invoiceObj.reservation_data && invoiceObj.reservation_data.medicines)\n        invoiceObj.reservation_data.medicines.forEach(function (proc) {\n            invoiceDetailsString += proc.name + ','\n        });\n\n    return invoiceDetailsString.trim(',');\n\n}\n\nexport const patientPaymentDetailsInString = function (paymentObj) {\n    let paymentDetailsString = '';\n    if (paymentObj.invoices)\n        paymentObj.invoices.forEach(function (inv) {\n            if (inv.invoice)\n                paymentDetailsString += inv.invoice.invoice_id + \", \"\n        })\n    return paymentDetailsString;\n}\n\nexport const patientReturnInvoiceDetailsInString = function (payObj) {\n    let paymentDetailsString = '';\n    if (payObj.procedure)\n        payObj.procedure.forEach(function (proc) {\n            if (proc.procedure_data)\n                paymentDetailsString += proc.procedure_data.name + \", \"\n        });\n    if (payObj.inventory)\n        payObj.inventory.forEach(function (proc) {\n            paymentDetailsString += proc.name + \", \"\n        });\n    if (payObj.reservation)\n        paymentDetailsString += payObj.type + \",\";\n    if (payObj.reservation_data && payObj.reservation_data.medicines)\n        payObj.reservation_data.medicines.forEach(function (proc) {\n            paymentDetailsString += proc.name + ','\n        });\n\n    return paymentDetailsString.trim(',');\n\n}","import React from \"react\";\nimport {Card, Table, Row, Button, Icon, Checkbox, Col} from \"antd\";\nimport {Link} from \"react-router-dom\";\nimport {BACKEND_BASE_URL} from \"../../../config/connect\";\nimport {getAPI, interpolate} from \"../../../utils/common\";\nimport {PATIENT_LEDGER} from \"../../../constants/api\";\nimport {\n    patientInvoiceDetailsInString,\n    patientPaymentDetailsInString,\n    patientReturnInvoiceDetailsInString\n} from \"../../../utils/patientUtils\";\n\nclass PatientLedgers extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            loading: false,\n            ledger: [],\n            loadingLedger: false,\n            selectedList: {},\n            credit: 0,\n            debit: 0,\n            balance: 0,\n        }\n    }\n\n    componentDidMount() {\n        this.loadPatientLedger();\n    }\n\n    loadPatientLedger = () => {\n        let that = this;\n        if (that.props.refreshWallet){\n            that.props.refreshWallet();\n        }\n        this.setState({\n            loadingLedger: true\n        })\n        let successFn = function (data) {\n            let ledgerData = [];\n            let balance = 0;\n            let totalCredit = 0;\n            let totalDebit = 0;\n            data.forEach(function (dataRow) {\n                let ledgerEntry = {\n                    date: dataRow.date,\n                    type: dataRow.ledger_type\n                };\n                if (dataRow.ledger_type == 'Invoice') {\n                    ledgerEntry.type_id = dataRow.invoice_id;\n                    ledgerEntry.details = patientInvoiceDetailsInString(dataRow);\n                    ledgerEntry.credit = dataRow.total;\n                    ledgerEntry.debit = 0;\n                    ledgerEntry.return = 0;\n                    ledgerEntry.cash_return = 0;\n\n                } else if (dataRow.ledger_type == 'Payment') {\n                    ledgerEntry.type_id = dataRow.payment_id;\n                    ledgerEntry.details = patientPaymentDetailsInString(dataRow);\n                    if (dataRow.return_pay) {\n                        ledgerEntry.credit = 0;\n                        ledgerEntry.debit = 0;\n                        ledgerEntry.return = -1 * (dataRow.total + dataRow.advance_value);\n                    } else {\n                        ledgerEntry.credit = 0;\n                        ledgerEntry.debit = dataRow.total + dataRow.advance_value;\n                        ledgerEntry.return = 0;\n                    }\n                    ledgerEntry.cash_return = 0;\n\n                } else if (dataRow.ledger_type == 'Return') {\n                    ledgerEntry.type_id = dataRow.return_id;\n                    ledgerEntry.details = patientReturnInvoiceDetailsInString(dataRow);\n                    ledgerEntry.credit = dataRow.cash_return;\n                    ledgerEntry.debit = 0;\n                    ledgerEntry.return = dataRow.return_value;\n                    if(dataRow.with_tax == false){\n                        ledgerEntry.credit += dataRow.taxes;\n                    }\n                    ledgerEntry.cash_return = dataRow.cash_return;\n                }\n                balance += ledgerEntry.credit;\n                balance -= ledgerEntry.debit;\n                totalDebit += ledgerEntry.debit;\n                totalCredit += ledgerEntry.credit;\n                ledgerEntry.balance = balance;\n                ledgerData.push(ledgerEntry);\n            });\n            that.setState({\n                loadingLedger: false,\n                credit: totalCredit,\n                debit: totalDebit,\n                balance: balance,\n                ledger: ledgerData\n            })\n        }\n        let errorFn = function () {\n            that.setState({\n                loadingLedger: false\n            })\n        }\n        let apiParams = {\n            practice_id: this.props.active_practiceId\n        };\n        if (this.props.showAllClinic && this.props.match.params.id) {\n            delete (apiParams.practice)\n        }\n        getAPI(interpolate(PATIENT_LEDGER, [that.props.currentPatient.id]), successFn, errorFn, apiParams);\n    }\n\n    ledgerCompleteToggle(id, option) {\n        this.setState(function (prevState) {\n            return {selectedList: {...prevState.selectedList, [id]: !!option}}\n        });\n    }\n\n    loadPDF = (id) => {\n        let that = this;\n        let successFn = function (data) {\n            if (data.report)\n                window.open(BACKEND_BASE_URL + data.report);\n        }\n        let errorFn = function () {\n\n        }\n        // getAPI(interpolate(INVOICE_PDF_API, [id]), successFn, errorFn);\n    }\n\n    render() {\n        const columns = [\n            //     {\n            //     title: '',\n            //     key: 'is_completed',\n            //     render: (text, record) => (record.is_completed ?\n            //         <Icon type=\"check-circle\" theme=\"twoTone\" style={{marginLeft: '8px', fontSize: '20px'}}/> :\n            //         <Checkbox key={record.id}\n            //                   onChange={(e) => this.ledgerCompleteToggle(record.id, e.target.checked)}\n            //                   value={this.state.selectedList[record.id]}/>)\n            // },\n            {\n                title: 'Date',\n                key: 'date',\n                dataIndex: \"date\",\n                width:120\n            }, {\n                title: 'Invoice/ Receipt/ Return No',\n                key: 'type_id',\n                dataIndex: \"type_id\",\n            }, {\n                title: 'Details',\n                key: 'details',\n                dataIndex: \"details\",\n            }, {\n                title: 'Type',\n                key: 'type',\n                dataIndex: \"type\",\n            }, {\n                title: 'Return(INR)',\n                key: 'return',\n                dataIndex: \"return\",\n                align: \"right\",\n                render: value => value.toFixed(2)\n            }, {\n                title: 'Cash Return(INR)',\n                key: 'cash_return',\n                dataIndex: \"cash_return\",\n                align: \"right\",\n                render: value => value.toFixed(2)\n            }, {\n                title: 'Credit(INR)',\n                key: 'credit',\n                dataIndex: \"credit\",\n                align: \"right\",\n                render: value => value.toFixed(2)\n            }, {\n                title: 'Debit(INR)',\n                key: 'debit',\n                dataIndex: \"debit\",\n                align: \"right\",\n                render: value => value.toFixed(2)\n            }, {\n                title: 'Balance(INR)',\n                key: 'balance',\n                dataIndex: \"balance\",\n                align: \"right\",\n                render: value => value.toFixed(2)\n            }];\n        return <Row>\n            <Card\n                title={this.state.currentPatient ? this.state.currentPatient.name + \" Payment Ledger\" : \"Patient Ledgers\"}\n                extra={<Button.Group>\n                    {/*<Button type=\"primary\">*/}\n                    {/*    <Icon type=\"printer\"/>Print billing summary*/}\n                    {/*</Button>*/}\n                    <Link to={\"/patient/\" + this.props.match.params.id + \"/billing/payments\"}> <Button\n                        type=\"primary\">\n                        <Icon type=\"plus\"/>&nbsp;Add Payment</Button>\n                    </Link>\n\n                    <Link to={\"/patient/\" + this.props.match.params.id + \"/billing/invoices\"}> <Button\n                        type=\"primary\">\n                        <Icon type=\"plus\"/>&nbsp;Add Invoice</Button>\n                    </Link>&nbsp;\n\n                    {/*<Button type=\"primary\" onClick={() => this.loadPDF()}>*/}\n                    {/*    <Icon type=\"printer\"/>&nbsp;Print*/}\n                    {/*</Button>&nbsp;*/}\n\n                    {/*<Button type=\"primary\" onClick={this.submitLedgers}>*/}\n                    {/*    <Icon type=\"save\"/>Send Payment Reminder*/}\n                    {/*</Button>*/}\n                </Button.Group>}>\n                <Table loading={this.state.loadingLedger} columns={columns}\n                       dataSource={this.state.ledger} pagination={false}/>\n                <Row style={{marginTop: 20, textAlign: 'center'}}>\n                    <Col span={8}>\n                        <h3>Total Credit: {this.state.credit.toFixed(2)}</h3>\n                    </Col>\n                    <Col span={8}>\n                        <h3>Total Debit: {this.state.debit.toFixed(2)}</h3>\n                    </Col>\n                    <Col span={8}>\n                        <h3>Total\n                            Balance: {this.state.balance < 0 ? (this.state.balance * -1).toFixed(2) + \" (Advance)\" : this.state.balance.toFixed(2)}</h3>\n                    </Col>\n                </Row>\n            </Card>\n        </Row>\n    }\n}\n\nexport default PatientLedgers;\n","import React from \"react\";\nimport {Row, Alert, Card, Col, AutoComplete, List, Avatar, Button, Icon, Spin} from 'antd';\nimport {displayMessage, getAPI, interpolate, makeFileURL, postAPI} from \"../../../utils/common\";\nimport {MERGE_PATIENTS, PATIENT_PROFILE, SEARCH_PATIENT} from \"../../../constants/api\";\nimport {ERROR_MSG_TYPE, SUCCESS_MSG_TYPE} from \"../../../constants/dataKeys\";\n\nexport default class PatientMerge extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            patient_from: null,\n            patient_to: null,\n            loading: false,\n            patientListData: [],\n        }\n\n    }\n\n    searchPatient = (value) => {\n        this.setState({\n            searchPatientString: value\n        })\n        // console.log(e.target.value);\n        let that = this;\n        let successFn = function (data) {\n            if (data) {\n                that.setState({\n                    patientListData: data.results,\n\n                })\n                // console.log(\"list\",that.state.patientListData);\n            }\n        };\n        let errorFn = function () {\n        };\n        if (value){\n            getAPI(interpolate(SEARCH_PATIENT, [value]), successFn, errorFn);\n        }\n\n    };\n    removePatient = (type) => {\n        this.setState({\n            [type]: null\n        })\n    };\n    handlePatientSelect = (event, type) => {\n        console.log(event);\n        if (event) {\n            let that = this;\n            let successFn = function (data) {\n                that.setState({\n                    [type]: data\n\n                });\n                // console.log(\"event\",that.state.patientDetails);\n            };\n            let errorFn = function () {\n            };\n            getAPI(interpolate(PATIENT_PROFILE, [event]), successFn, errorFn);\n        }\n    }\n\n    mergePatient = () => {\n        this.setState({\n            loading: true\n        })\n        let that = this;\n        let reqData = {\n            patient_from: this.state.patient_from.id,\n            patient_to: this.state.patient_to.id\n        }\n        let successFn = function (data) {\n            displayMessage(SUCCESS_MSG_TYPE, \"Patients Merged Successfully!!\");\n            that.setState({\n                loading: false,\n                patient_from: null,\n                patient_to: null\n            });\n        }\n        let errorFn = function () {\n            displayMessage(ERROR_MSG_TYPE, \"Patients Merging Failed!!\");\n            that.setState({\n                loading: false,\n            })\n        }\n        postAPI(MERGE_PATIENTS, reqData, successFn, errorFn);\n    }\n\n    render() {\n        let that = this;\n        return <div>\n\n            <h2>Merge Patients</h2>\n            <Card>\n                <Alert\n                    message={\"Profile details and records of Patient 1 will be moved to Patient 2. You cannot undo this action once done.\"}\n                    type=\"warning\"/>\n                <Spin spinning={this.state.loading}>\n\n                    <Row gutter={16} style={{marginTop: 10}}>\n                        <Col span={12} style={{textAlign: 'center'}}>\n                            <h3>Patient 1</h3>\n                            {this.state.patient_from ?\n                                <Card bordered={false} style={{background: '#ECECEC', textAlign: 'left'}}>\n                                    <Card.Meta\n                                        avatar={(this.state.patient_from.image ? <Avatar src={makeFileURL(this.state.patient_from.image)}/> :\n                                            <Avatar style={{backgroundColor: '#87d068'}}>\n                                                {this.state.patient_from.user.first_name ? this.state.patient_from.user.first_name.charAt(0) :\n                                                    <Icon type=\"user\"/>}\n                                            </Avatar>)}\n\n                                        title={this.state.patient_from.user.first_name}\n                                        description={this.state.patient_from.user.mobile}\n\n                                    />\n\n                                    <Button type=\"primary\" style={{float: 'right'}}\n                                            onClick={() => this.removePatient('patient_from')}>Select Different\n                                        Patient</Button>\n                                </Card> :\n                                <AutoComplete placeholder=\"Patient Name\"\n                                              showSearch\n                                              onSearch={this.searchPatient}\n                                              defaultActiveFirstOption={false}\n                                              showArrow={false}\n                                    // value={this.state.patient_from}\n                                              filterOption={false}\n                                              onChange={this.handleChange}\n                                              onSelect={(e) => this.handlePatientSelect(e, 'patient_from')}>\n                                    {this.state.patientListData.map((option) => <AutoComplete.Option\n                                        value={option.id.toString()}>\n                                        <List.Item style={{padding: 0}}>\n                                            <List.Item.Meta\n                                                avatar={(option.image ? <Avatar src={makeFileURL(option.image)}/> :\n                                                    <Avatar style={{backgroundColor: '#87d068'}}>\n                                                        {option.user.first_name ? option.user.first_name.charAt(0) :\n                                                            <Icon type=\"user\"/>}\n                                                    </Avatar>)}\n                                                title={option.user.first_name + \" (\" + option.user.id + \")\"}\n                                                description={<small>{option.user.mobile}</small>}\n                                            />\n\n                                        </List.Item>\n                                    </AutoComplete.Option>)}\n                                </AutoComplete>}\n                            {/*{this.state.patient_from ? <List.Item style={{padding: 0}}>*/}\n                            {/*<List.Item.Meta*/}\n                            {/*avatar={<Avatar*/}\n                            {/*src=\"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png\"/>}*/}\n                            {/*title={that.state.patient_from.user.first_name + \" (\" + that.state.patient_from.user.id + \")\"}*/}\n                            {/*description={<small>{that.state.patient_from.user.mobile}</small>}*/}\n                            {/*/>*/}\n\n                            {/*</List.Item>:null}*/}\n                        </Col>\n                        <Col span={12} style={{textAlign: 'center'}}>\n                            <h3>Patient 2</h3>\n                            {this.state.patient_to ?\n                                <Card bordered={false} style={{background: '#ECECEC', textAlign: 'left'}}>\n                                    <Card.Meta\n                                        avatar={(this.state.patient_to.image ? <Avatar src={makeFileURL(this.state.patient_to.image)}/> :\n                                            <Avatar style={{backgroundColor: '#87d068'}}>\n                                                {this.state.patient_to.user.first_name ? this.state.patient_to.user.first_name.charAt(0) :\n                                                    <Icon type=\"user\"/>}\n                                            </Avatar>)}\n                                        title={this.state.patient_to.user.first_name}\n                                        description={this.state.patient_to.user.mobile}\n\n                                    />\n\n                                    <Button type=\"primary\" style={{float: 'right'}}\n                                            onClick={() => this.removePatient('patient_to')}>Select Different\n                                        Patient</Button>\n                                </Card> :\n                                <AutoComplete placeholder=\"Patient Name\"\n                                              showSearch\n                                              onSearch={this.searchPatient}\n                                              defaultActiveFirstOption={false}\n                                              showArrow={false}\n                                    // value={this.state.patient_from}\n                                              filterOption={false}\n                                              onChange={this.handleChange}\n                                              onSelect={(e) => this.handlePatientSelect(e, 'patient_to')}>\n                                    {this.state.patientListData.map((option) => <AutoComplete.Option\n                                        value={option.id.toString()}>\n                                        <List.Item style={{padding: 0}}>\n                                            <List.Item.Meta\n                                                avatar={(option.image ? <Avatar src={makeFileURL(option.image)}/> :\n                                                    <Avatar style={{backgroundColor: '#87d068'}}>\n                                                        {option.user.first_name ? option.user.first_name.charAt(0) :\n                                                            <Icon type=\"user\"/>}\n                                                    </Avatar>)}\n                                                title={option.user.first_name + \" (\" + option.user.id + \")\"}\n                                                description={<small>{option.user.mobile}</small>}\n                                            />\n\n                                        </List.Item>\n                                    </AutoComplete.Option>)}\n                                </AutoComplete>}\n                            {/*{this.state.patient_to ? <List.Item style={{padding: 0}}>*/}\n                            {/*<List.Item.Meta*/}\n                            {/*avatar={<Avatar*/}\n                            {/*src=\"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png\"/>}*/}\n                            {/*title={that.state.patient_to.user.first_name + \" (\" + that.state.patient_to.user.id + \")\"}*/}\n                            {/*description={<small>{that.state.patient_to.user.mobile}</small>}*/}\n                            {/*/>*/}\n\n                            {/*</List.Item>:null}*/}\n                        </Col>\n                        <Col span={24} style={{textAlign: 'center', marginTop: 30}}>\n                            <Button disabled={this.state.loading || !this.state.patient_from || !this.state.patient_to}\n                                    type={\"primary\"} onClick={this.mergePatient}>\n                                <Icon type={\"plus\"}/>Merge Patients\n                            </Button>\n                        </Col>\n                    </Row>\n\n                </Spin>\n            </Card>\n        </div>\n    }\n}\n","import React from \"react\";\nimport {Button, Card, Icon} from 'antd';\n\nexport default class PatientRequiredNoticeCard extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n\n    render() {\n        let that = this;\n        return <Card style={{textAlign: 'center'}}>\n            <h2> Please select patient to further continue !!</h2>\n            {this.props.togglePatientListModal ?\n                <Button type={\"primary\"} onClick={() => that.props.togglePatientListModal(true)}><Icon\n                    type={\"user\"}/> Select Patient</Button> : null}\n        </Card>\n    }\n}\n","import React from \"react\";\nimport {Route} from \"react-router\";\nimport {\n    Form,\n    Icon,\n    Input,\n    Button,\n    Checkbox,\n    Card,\n    DatePicker,\n    Radio,\n    Row,\n    Col,\n    Select,\n    TimePicker,\n    Affix,\n    Dropdown,\n    Menu\n} from 'antd';\nimport {Redirect, Link} from 'react-router-dom'\nimport {postAPI, interpolate, displayMessage} from \"../../../utils/common\";\nimport {NOTES} from \"../../../constants/hardData\";\nimport {MEDICAL_CERTIFICATE_API} from \"../../../constants/api\";\nimport {SUCCESS_MSG_TYPE ,ERROR_MSG_TYPE} from \"../../../constants/dataKeys\";\nimport moment from 'moment';\nimport {loadDoctors} from \"../../../utils/clinicUtils\";\n\n\nconst {TextArea} = Input;\nconst {Option} = Select;\n\nclass PatientMedicalCertificate extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            redirect: false,\n            excused_duty_checked: false,\n            fit_light_duty_checked: false,\n            attendance_checked: false,\n            startDate: this.props.value,\n            endDate: new Date(),\n            proof_attendance_from: null,\n            days: 0,\n            practiceDoctors: [],\n            selectedDoctor: {},\n            selectedDate: moment(),\n            value: ''\n        }\n        this.handleChangeStart = this.handleChangeStart.bind(this);\n        this.handleChangeEnd = this.handleChangeEnd.bind(this);\n    }\n\n    componentDidMount() {\n        loadDoctors(this);\n    }\n\n    changeRedirect() {\n        var redirectVar = this.state.redirect;\n        this.setState({\n            redirect: !redirectVar,\n        });\n    }\n\n    handleCheck = (e) => {\n        this.setState({\n            excused_duty_checked: !this.state.excused_duty_checked\n        });\n    }\n    handleLighDutyCheck = (e) => {\n        this.setState({\n            fit_light_duty_checked: !this.state.fit_light_duty_checked\n        });\n    }\n    onChangeHandle = (e) => {\n        console.log(\"handlechanged\",e);\n        this.setState({\n            value: e.target.value,\n        });\n    }\n    handleAttendanceCheck = (e) => {\n        this.setState({\n            attendance_checked: !this.state.attendance_checked\n        });\n    }\n    handleChangeStart = (date) => {\n        this.setState({\n            startDate: date\n        });\n\n    }\n\n    handleChangeEnd(date) {\n        this.setState({\n            endDate: date\n        });\n    }\n\n    // totalDays(){\n    //     let {startDate, endDate} = this.state;\n    //     let amount = endDate.diff(startDate ,\"days\");\n    //     this.setState({\n    //     days: amount\n    //     });\n    // }\n\n    onChange = (timeString) => {\n        this.setState({\n            proof_attendance_from: timeString\n        });\n    }\n    selectedDate = (date) => {\n        this.setState({\n            selectedDate: date\n        })\n    }\n    selectDoctor = (doctor) => {\n        this.setState({\n            selectedDoctor: doctor\n        })\n    }\n    handleSubmit = (e) => {\n        let that = this;\n        e.preventDefault();\n        this.props.form.validateFields((err, values) => {\n            \n            if(values.excused_duty || values.fit_light_duty || values.proof_attendance){\n                if (!err) {\n                    let reqData = {\n                        ...values,\n                        doctor: that.state.selectedDoctor.id,\n                        practice: that.props.active_practiceId,\n                        date: that.state.selectedDate && moment(that.state.selectedDate).isValid() ? that.state.selectedDate.format('YYYY-MM-DD') : null,\n                        excused_duty_from: moment(values.excused_duty_from).format(\"YYYY-MM-DD\"),\n                        excused_duty_to: moment(values.excused_duty_to).format(\"YYYY-MM-DD\"),\n                        fit_light_duty_from: moment(values.fit_light_duty_from).format(\"YYYY-MM-DD\"),\n                        fit_light_duty_to: moment(values.fit_light_duty_to).format(\"YYYY-MM-DD\"),\n                        proof_attendance_date: moment(values.proof_attendance_date).format(\"YYYY-MM-DD\"),\n                        proof_attendance_from: moment(values.proof_attendance_from).format('LT'),\n                        proof_attendance_to: moment(values.proof_attendance_to).format('LT'),\n                        patient: that.props.match.params.id,\n                        is_active: true,\n                        valid_court:false,\n                        invalid_court:false,\n                        no_mention:false\n                    };\n                    if(values.group)\n                        reqData[values.group] = true\n                    delete reqData.group;\n                    let successFn = function (data) {\n                        displayMessage(SUCCESS_MSG_TYPE, \"Medical Certificate Generated.\");\n                        that.props.history.push('/patient/' + that.props.match.params.id + '/emr/files');\n                    }\n                    let errorFn = function () {\n                        that.setState({});\n                    }\n                    postAPI(interpolate(MEDICAL_CERTIFICATE_API, [this.props.currentPatient.id]), reqData, successFn, errorFn);\n                }\n            }else{\n               displayMessage(ERROR_MSG_TYPE,\"Please select at least one of the above options\");\n            }\n           \n        });\n    }\n\n    render() {\n        const {getFieldDecorator} = this.props.form;\n        const formItemLayout = {\n            labelCol: {\n                xs: {span: 24},\n                sm: {span: 8},\n                md: {span: 8},\n                lg: {span: 8},\n            },\n            wrapperCol: {\n                xs: {span: 24},\n                sm: {span: 16},\n                md: {span: 16},\n                lg: {span: 16},\n            },\n        };\n        let that = this;\n        const radioOption = NOTES.map((option) => <Radio value={option.value}>{option.label}</Radio>)\n        return (<Form onSubmit={this.handleSubmit} {...formItemLayout}>\n                <Card title=\"ADD MEDICAL LEAVE CERTIFICATE\"\n                      extra={<Button.Group>\n                          <Button type=\"primary\" htmlType=\"submit\">Save Certificate</Button>\n                      </Button.Group>}>\n\n\n                    <Form.Item>\n                        {getFieldDecorator('excused_duty', {})(\n                            (<Checkbox onClick={this.handleCheck} defaultChecked={this.state.excused_duty_checked}>Excused\n                                from duty</Checkbox>),\n                        )}\n                    </Form.Item>\n                    {this.state.excused_duty_checked ?\n                        <Row>\n                            <Col span={6} offset={6}>\n                                <Form.Item label=\"From\">\n                                    {getFieldDecorator('excused_duty_from', {})\n                                    (\n                                        <DatePicker/>\n                                    )\n                                    }\n                                </Form.Item>\n\n                                <Form.Item label=\"till\">\n                                    {getFieldDecorator('excused_duty_to', {})\n                                    (\n                                        <DatePicker/>\n                                    )\n                                    }\n                                </Form.Item>\n\n                            </Col>\n                            <Col span={6}>\n                                <Form.Item>\n                                    {getFieldDecorator('excused_duty_from_session', {\n                                        initialValue: \"Morning\"\n                                    })\n                                    (\n                                        <Select>\n                                            <Option value=\"Morning\">Morning Session</Option>\n                                            <Option value=\"Morning\">Evening Session</Option>\n                                        </Select>\n                                    )}\n\n                                </Form.Item>\n\n                                <Form.Item>\n                                    {getFieldDecorator('excused_duty_to_session', {\n                                        initialValue: \"Morning\"\n                                    })\n                                    (\n                                        <Select>\n                                            <Option value=\"Morning\">Morning Session</Option>\n                                            <Option value=\"Morning\">Evening Session</Option>\n                                        </Select>\n                                    )}\n                                </Form.Item>\n\n                            </Col>\n\n                        </Row>\n\n                        : null}\n\n\n                    <Form.Item>\n                        {getFieldDecorator('fit_light_duty', {})(\n                            (<Checkbox onClick={this.handleLighDutyCheck}\n                                       defaultChecked={this.state.fit_light_duty_checked}>Fit for light\n                                duty</Checkbox>),\n                        )}\n                    </Form.Item>\n\n                    {this.state.fit_light_duty_checked ?\n                        <Row>\n                            <Col>\n                                <Form.Item label=\"From\">\n                                    {getFieldDecorator('fit_light_duty_from', {})\n                                    (\n                                        <DatePicker/>\n                                    )\n                                    }\n\n                                </Form.Item>\n\n                                <Form.Item label=\"till\">\n                                    {getFieldDecorator('fit_light_duty_to', {})\n                                    (\n                                        <DatePicker/>\n                                    )\n                                    }\n\n                                </Form.Item>\n                            </Col>\n\n                        </Row>\n                        : null\n                    }\n\n                    <Form.Item>\n                        {getFieldDecorator('proof_attendance', {})(\n                            (<Checkbox onClick={this.handleAttendanceCheck}\n                                       defaultChecked={this.state.attendance_checked}>Proof of attendance at\n                                practice</Checkbox>),\n                        )}\n                    </Form.Item>\n                    {this.state.attendance_checked ?\n                        <Row>\n                            <Form.Item label=\"on\">\n                                {getFieldDecorator('proof_attendance_date', {})\n                                (<DatePicker/>)\n                                }\n                            </Form.Item>\n                            <Col span={6} offset={6}>\n                                <Form.Item label=\"From\">\n                                    {getFieldDecorator('proof_attendance_from', {})\n                                    (\n                                        <TimePicker use12Hours format=\"h:mm A\"/>\n                                    )\n                                    }\n\n                                </Form.Item>\n                                <Form.Item label=\"till\">\n                                    {getFieldDecorator('proof_attendance_to', {})\n                                    (\n                                        <TimePicker use12Hours format=\"h:mm A\"/>\n                                    )\n                                    }\n                                </Form.Item>\n                            </Col>\n                        </Row>\n\n\n                        : null}\n\n\n                    <Form.Item label=\"Notes\">\n                        {getFieldDecorator('notes', {})(\n                            (<TextArea/>),\n                        )}\n                    </Form.Item>\n\n\n                    <Form.Item>\n                        {getFieldDecorator('group', {initialValue:'no_mention'})(\n                            <Radio.Group>\n                                {radioOption}\n                            </Radio.Group>\n                        )}\n\n                    </Form.Item>\n                    <Affix offsetBottom={0}>\n                        <Card>\n                            <span>Issued by &nbsp;&nbsp;</span>\n                            <Dropdown placement=\"topCenter\" overlay={<Menu>\n                                {this.state.practiceDoctors.map(doctor =>\n                                    <Menu.Item key=\"0\">\n                                        <a onClick={() => this.selectDoctor(doctor)}>{doctor.user.first_name}</a>\n                                    </Menu.Item>)}\n                            </Menu>} trigger={['click']}>\n                                <a className=\"ant-dropdown-link\" href=\"#\">\n                                    <b>\n                                        {this.state.selectedDoctor.user ? this.state.selectedDoctor.user.first_name : 'No DOCTORS Found'}\n                                    </b>\n                                </a>\n                            </Dropdown>\n                            <span> &nbsp;&nbsp;on&nbsp;&nbsp;</span>\n                            <DatePicker value={this.state.selectedDate}\n                                        onChange={(value) => this.selectedDate(value)} format={\"DD-MM-YYYY\"}\n                                        allowClear={false}/>\n                        </Card>\n                    </Affix>\n\n                </Card>\n            </Form>\n\n        );\n    }\n}\n\nexport default Form.create()(PatientMedicalCertificate);\n","import React from \"react\";\nimport {\n    Alert,\n    AutoComplete,\n    Avatar,\n    Button,\n    Card,\n    Col,\n    DatePicker,\n    Divider,\n    Form,\n    Icon,\n    Input,\n    InputNumber,\n    List,\n    message,\n    Popconfirm,\n    Radio,\n    Row,\n    Select,\n    Table,\n    Upload\n} from \"antd\";\nimport {displayMessage, getAPI, interpolate, makeFileURL, makeURL, postAPI} from \"../../../utils/common\";\nimport {\n    BED_PACKAGES,\n    BOOK_SEAT,\n    CHECK_SEAT_AVAILABILITY,\n    DISEASE_LIST,\n    FILE_UPLOAD_API,\n    MEDICINE_PACKAGES,\n    PATIENT_PROFILE,\n    PAYMENT_MODES,\n    SEARCH_PATIENT\n} from \"../../../constants/api\";\nimport moment from \"moment\";\n// import {Booking_Type} from \"../../constants/hardData\";\nimport {SUCCESS_MSG_TYPE} from \"../../../constants/dataKeys\";\n\nconst {Meta} = Card;\n\nclass BedBookingForm extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            packages: [],\n            totalPayableAmount: 0,\n            totalPayingAmount: 0,\n            patientList: [],\n            paymentModes: [],\n            medicinePackage: [],\n            medicineItem: [],\n            diseases: []\n            //choosePkg:{},\n\n\n        }\n    }\n\n    componentDidMount() {\n        if (this.props.currentPatient)\n            this.handlePatientSelect(this.props.currentPatient.id);\n        this.loadPackages();\n        this.loadPaymentModes();\n        this.loadMedicinePackages();\n        this.loadDiseases();\n    }\n\n    loadPackages = () => {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                packages: data\n            })\n        }\n        let errorFn = function () {\n        }\n        getAPI(interpolate(BED_PACKAGES, [this.props.active_practiceId]), successFn, errorFn);\n\n    }\n    loadDiseases = () => {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                diseases: data\n            })\n        }\n        let errorFn = function () {\n        }\n        getAPI(interpolate(DISEASE_LIST, [this.props.active_practiceId]), successFn, errorFn);\n\n    }\n\n    loadMedicinePackages() {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                medicinePackage: data,\n            })\n        }\n        let errorFn = function () {\n\n        }\n        getAPI(interpolate(MEDICINE_PACKAGES, [this.props.active_practiceId]), successFn, errorFn);\n    }\n\n    searchPatient = (value) => {\n        let that = this;\n        let successFn = function (data) {\n            if (data) {\n                that.setState({\n                    patientList: data,\n                    ptr: data,\n\n                })\n            }\n        };\n        let errorFn = function () {\n        };\n        getAPI(interpolate(SEARCH_PATIENT, [value]), successFn, errorFn);\n    }\n\n    handlePatientSelect = (event) => {\n        if (event) {\n            let that = this;\n            let successFn = function (data) {\n                that.setState({\n                    patientDetails: data\n                });\n            };\n            let errorFn = function () {\n            };\n            getAPI(interpolate(PATIENT_PROFILE, [event]), successFn, errorFn);\n        }\n    }\n\n    loadPaymentModes() {\n        var that = this;\n        let successFn = function (data) {\n            that.setState({\n                paymentModes: data,\n            })\n        };\n        let errorFn = function () {\n        };\n        getAPI(interpolate(PAYMENT_MODES, [this.props.active_practiceId]), successFn, errorFn);\n    }\n\n    checkBedStatus = (type, value) => {\n        let that = this;\n        that.handleRoomType();\n        this.setState({\n            [type]: value\n        }, function () {\n\n            let successFn = function (data) {\n                that.setState({\n                    availabilitySeatTatkal: data.TATKAL,\n                    availabilitySeatNormal: data.NORMAL,\n                });\n                let currentSelected = that.props.form.getFieldValue('seat_type');\n                if (!data[currentSelected]) {\n                    that.props.form.setFieldsValue({\n                        seat_type: null\n                    })\n                    that.calculateTotalAmount();\n                }\n            }\n            that.calculateTotalAmount();\n            let errorFn = function () {\n\n            }\n            let {from_date, bed_package} = that.state;\n            if (from_date && bed_package) {\n                let to_date = null;\n                that.state.packages.forEach(function (pkgObj) {\n                    if (bed_package == pkgObj.id) {\n                        to_date = moment(from_date).add(pkgObj.no_of_days - 1, 'day')\n                    }\n                });\n                if (from_date && to_date && bed_package) {\n                    let {setFieldsValue} = that.props.form;\n                    setFieldsValue({\n                        to_date: to_date\n                    })\n                    getAPI(interpolate(CHECK_SEAT_AVAILABILITY, [that.props.active_practiceId]), successFn, errorFn, {\n                        start: moment(from_date).format('YYYY-MM-DD'),\n                        end: moment(to_date).format('YYYY-MM-DD'),\n                        bed_package: bed_package\n                    })\n                }\n            }\n        });\n    }\n\n\n    handleSubmit = (e) => {\n        this.setState({\n            loading: true\n        })\n        let that = this;\n        e.preventDefault();\n        this.props.form.validateFields((err, values) => {\n            if (!err) {\n                let reqData = {\n                    ...values,\n                    to_date: moment(values.to_date).format('YYYY-MM-DD'),\n                    from_date: moment(values.from_date).format('YYYY-MM-DD'),\n                    paid: false,\n                    total_price: this.state.totalPayableAmount,\n                    date: moment().format('YYYY-MM-DD'),\n                    total_tax: this.state.tax,\n                    patient: this.state.patientDetails.id,\n                    rest_diseases: values.rest_diseases ? values.rest_diseases.join(',') : null,\n                    report_upload: values.file && values.file.file.response ? values.file.file.response.image_path : null\n                };\n                // delete reqData.medicines;\n                //\n                // if (values.medicines){\n                //     values.medicines.forEach(function (item) {\n                //         let medicines={medicineId:item};\n                //     })\n                //\n                // }\n\n                let successFn = function (data) {\n                    displayMessage(SUCCESS_MSG_TYPE, \"Saved Successfully!!\");\n                    that.props.history.goBack();\n                    if (that.props.loadData)\n                        that.props.loadData();\n                };\n                let errorFn = function () {\n\n                };\n\n                postAPI(interpolate(BOOK_SEAT, [this.props.active_practiceId]), reqData, successFn, errorFn);\n            }\n        })\n\n\n    };\n    handleClick = (e) => {\n        this.setState({\n            patientDetails: null\n        })\n\n    };\n    handleRoomType = (name, value) => {\n        let that = this;\n        this.setState({\n            [name]: value,\n        }, function () {\n            that.calculateTotalAmount();\n        });\n\n    }\n    calculateTotalAmount = () => {\n        let that = this;\n        that.setState(function (prevSate) {\n            let payAmount = 0;\n            let total_tax = 0;\n            let bedPkg = {};\n            let medicinePkg = [];\n            let total_medicine_price = 0;\n            prevSate.packages.forEach(function (item) {\n                if (prevSate.bed_package == item.id) {\n                    if (prevSate.seat_type == 'NORMAL') {\n                        payAmount = item.normal_price + item.normal_tax_value;\n                        total_tax += item.normal_tax_value\n                        bedPkg = {\n                            ...item,\n                            type: \"BED\",\n                            price_with_tax: payAmount,\n                            tax: item.normal_tax_value,\n                            price: item.normal_price,\n                            _id:Math.random().toFixed(7),\n                        };\n                        medicinePkg = [bedPkg];\n                    }\n                    if (prevSate.seat_type == 'TATKAL') {\n                        payAmount = item.tatkal_price + item.tatkal_tax_value;\n                        total_tax += item.tatkal_tax_value\n                        bedPkg = {\n                            ...item,\n                            type: \"BED\",\n                            price_with_tax: payAmount,\n                            tax: item.tatkal_tax_value,\n                            price: item.tatkal_price,\n                            _id:Math.random().toFixed(7),\n                        };\n                        medicinePkg = [bedPkg];\n                    }\n                }\n            });\n\n            prevSate.medicinePackage.forEach(function (item) {\n                prevSate.medicineItem.forEach(function (ele) {\n                    if (item.id == ele) {\n                        total_medicine_price += item.final_price;\n                        total_tax += item.tax_value;\n                        medicinePkg = [...medicinePkg, {\n                            ...item,\n                            type: \"MEDICINE\",\n                            price_with_tax: item.final_price,\n                            tax: item.tax_value,\n                            _id:Math.random().toFixed(7),\n                        }]\n\n                    }\n                });\n            });\n            return {\n                totalPayableAmount: payAmount + total_medicine_price,\n                tax: total_tax,\n                choosePkg: [...medicinePkg]\n            }\n        })\n    }\n    setPaymentAmount = (value) => {\n        let that = this;\n        this.setState({\n            totalPayingAmount: value\n        }, function () {\n            that.calculateTotalAmount();\n        })\n    }\n    handleMedicineSelect = (e) => {\n        let value = e;\n        this.setState({\n            medicineItem: value,\n        }, function () {\n            this.calculateTotalAmount()\n        })\n    }\n    changeDiscount=(id, value)=>{\n        let that=this;\n        that.setState(function (prevState) {\n            let newTableValue = [];\n            prevState.choosePkg.forEach(function (tableObj) {\n                if (tableObj._id == id) {\n\n                    newTableValue.push({...tableObj, discount: value})\n                }else {\n                    newTableValue.push(tableObj);\n                }\n            });\n            return {choosePkg:newTableValue}\n        });\n    }\n    render() {\n        const BOOKING_TYPE = [\n            {\n                value: 'NORMAL',\n                is_or_not: this.state.availabilitySeatNormal && this.state.availabilitySeatNormal.available ? true : false\n            },\n            {\n                value: 'TATKAL',\n                is_or_not: this.state.availabilitySeatTatkal && this.state.availabilitySeatTatkal.available ? true : false\n            },\n\n        ];\n\n        let that = this;\n        const {getFieldDecorator} = this.props.form;\n        const formItemLayout = ({\n            labelCol: {\n                xs: {span: 24},\n                sm: {span: 6},\n            },\n            wrapperCol: {\n                xs: {span: 24},\n                sm: {span: 14},\n            },\n        });\n        const formPatients = ({\n            wrapperCol: {\n                xs: {offset: 6, span: 24},\n                sm: {offset: 6, span: 14},\n            },\n        });\n\n        const columns = [{\n            title: 'Item',\n            key: 'name',\n            dataIndex: 'name'\n        },\n                {\n                title: 'Normal Price',\n                key: 'normal_price',\n                dataIndex: 'normal_price',\n                // render:(value,record)=>(<p>{value.toFixed()}</p>)\n            }, {\n                title: 'Tatkal Price',\n                key: 'tatkal_price',\n                dataIndex: 'tatkal_price',\n                // render:(value,record)=>(<p>{record?(record.tatkal_price).toFixed():null}</p>)\n            },\n\n            {\n                title: 'discount %',\n                key: 'discount',\n                width: 100,\n                dataIndex: 'discount',\n                render: (item, record) => <Form.Item\n                    key={`discount[${record._id}]`}\n                    {...formItemLayout}>\n                    {getFieldDecorator(`discount[${record._id}]`, {\n                        initialValue: record.discount,\n                        validateTrigger: ['onChange', 'onBlur'],\n\n                    })(\n                        <InputNumber min={0} max={100} placeholder=\"discount\" size={'small'} value={record.discount} onChange={(value) => that.changeDiscount(record._id ,value)}/>\n                    )}\n                </Form.Item>\n            },\n            {\n                title: 'Price',\n                key: 'price',\n                dataIndex: 'price',\n                render: (value, record) => (<p>{value ? (value).toFixed(2) : null}</p>)\n\n            }, {\n                title: 'Tax',\n                key: 'tax',\n                dataIndex: 'tax',\n                render: (value, record) => (<p>{value ? (value).toFixed(2) : null}</p>)\n            }, {\n                title: 'Total Amount',\n                key: 'price_with_tax',\n                dataIndex: 'price_with_tax',\n                render: (value, record) => (<p>{value ? (value).toFixed(2) : null}</p>)\n            }];\n        const singleUploadprops = {\n            name: 'image',\n            data: {\n                name: 'hello'\n            },\n            action: makeURL(FILE_UPLOAD_API),\n            headers: {\n                authorization: 'authorization-text',\n            },\n            onChange(info) {\n                if (info.file.status !== 'uploading') {\n\n                }\n                if (info.file.status === 'done') {\n                    message.success(`${info.file.name} file uploaded successfully`);\n                } else if (info.file.status === 'error') {\n                    message.error(`${info.file.name} file upload failed.`);\n                }\n            },\n        };\n        return <div>\n            <Card title={\"Book a Seat/Bed\"}>\n                <Form>\n                    <Row>\n                        <Col xs={24} sm={24} md={12} lg={12} xl={12}>\n                            <div>\n\n                                {this.state.patientDetails ? <Form.Item key=\"id\"\n                                                                        value={this.state.patientDetails ? this.state.patientDetails.id : ''} {...formPatients}>\n                                        <Card bordered={false} style={{background: '#ECECEC'}}>\n                                            <Meta\n                                                avatar={(this.state.patientDetails.image ? <Avatar src={makeFileURL(this.state.patientDetails.image)}/> :\n                                                    <Avatar style={{backgroundColor: '#87d068'}}>\n                                                        {this.state.patientDetails.user.first_name ? this.state.patientDetails.user.first_name.charAt(0) :\n                                                            <Icon type=\"user\"/>}\n                                                    </Avatar>)}\n                                                title={this.state.patientDetails.user.first_name}\n                                                description={this.state.patientDetails.user.mobile}\n                                            />\n                                            {/*<Button onClick={this.handleClick} icon=\"close-circle\"*/}\n                                            {/*        type={\"danger\"}/>*/}\n                                            {/* <Button type=\"primary\" style={{float: 'right'}} onClick={this.handleClick}>Add New\n                                                Patient</Button> */}\n                                        </Card>\n                                    </Form.Item>\n                                    : <div>\n                                        <Form.Item label=\"Patient\" {...formItemLayout}>\n                                            {getFieldDecorator('patient', {\n                                                rules: [{required: true, message: 'this field required'}],\n                                            })\n                                            (<AutoComplete placeholder=\"Patient Name\"\n                                                           showSearch\n                                                           onSearch={this.searchPatient}\n                                                           defaultActiveFirstOption={false}\n                                                           showArrow={false}\n                                                           filterOption={false}\n                                                           onSelect={this.handlePatientSelect}>\n                                                {this.state.patientList.map((option) => <AutoComplete.Option\n                                                    value={option ? option.id.toString() : ''}>\n                                                    <List.Item style={{padding: 0}}>\n                                                        <List.Item.Meta\n                                                            avatar={option.image ?\n                                                                <Avatar style={{backgroundColor: '#ffff'}}\n                                                                        src={makeFileURL(option.image)}/> :\n                                                                <Icon type=\"user\"/>}\n                                                            title={option.user.first_name + \" (\" + option.user.id + \")\"}\n                                                            description={<small>{option.user.mobile}</small>}\n                                                        />\n\n                                                    </List.Item>\n                                                </AutoComplete.Option>)}\n                                            </AutoComplete>)\n                                            }\n\n                                            {this.state.ptr ? <Alert message=\"Patient Not Found !!\"\n                                                                     description=\"Please Search another patient or create new patient.\"\n                                                                     type=\"error\"/> : null}\n                                        </Form.Item>\n                                    </div>}\n\n                                <Form.Item label=\"Bed Package\" {...formItemLayout}>\n                                    {getFieldDecorator('bed_package', {\n                                        rules: [{required: true, message: 'this field required!'}],\n                                    })\n                                    (<Select onChange={(value) => that.checkBedStatus('bed_package', value)}>\n                                        {that.state.packages.map(room => <Select.Option\n                                            value={room.id}>{room.name}</Select.Option>)}\n                                    </Select>)\n                                    }\n                                </Form.Item>\n                                <Form.Item label=\"Book From\" {...formItemLayout}>\n                                    {getFieldDecorator('from_date', {\n                                        rules: [{required: true, message: 'Input From Date!'}],\n                                    })\n                                    (<DatePicker onChange={(value) => that.checkBedStatus('from_date', value)}\n                                                 format={'DD-MM-YYYY'}/>)\n                                    }\n                                </Form.Item>\n                                <Form.Item label=\"Book To\" {...formItemLayout}>\n                                    {getFieldDecorator('to_date', {\n                                        rules: [{required: true, message: 'Input To Date!'}],\n                                    })\n                                    (<DatePicker disabled format={'DD-MM-YYYY'}/>)\n                                    }\n                                </Form.Item>\n\n                                <Form.Item label={\"Booking Type\"} {...formItemLayout} >\n                                    {getFieldDecorator('seat_type', {\n                                        rules: [{\n                                            required: true, message: 'this field required'\n                                        }]\n                                    })(<Radio.Group\n                                            onChange={(e) => this.handleRoomType('seat_type', e.target.value)}>\n                                            {BOOKING_TYPE.map((seat_type) => <Radio\n                                                value={seat_type.is_or_not ? seat_type.value : ''}\n                                                disabled={seat_type.is_or_not ? false : true}>{seat_type.value}</Radio>)}\n                                        </Radio.Group>\n                                    )}\n                                </Form.Item>\n                                <Form.Item label=\"Medicine  Package\" {...formItemLayout}>\n                                    {getFieldDecorator('medicines', {})\n                                    (<Select mode=\"multiple\" onChange={this.handleMedicineSelect}>\n                                        {that.state.medicinePackage.map(item => <Select.Option\n                                            value={item.id}>{item.name}</Select.Option>)}\n                                    </Select>)\n                                    }\n                                </Form.Item>\n\n                                <Form.Item label=\"Pay Now : \" {...formItemLayout}>\n                                    {getFieldDecorator('pay_value', {\n                                        rules: [{\n                                            required: true,\n                                            message: 'this field is required'\n                                        }],\n                                        initialValue: this.state.totalPayingAmount ? this.state.totalPayingAmount : null\n                                    })\n                                    (\n                                        <InputNumber min={0} step={1} max={this.state.totalPayableAmount}\n                                                     onChange={this.setPaymentAmount}/>\n                                    )\n                                    }\n                                </Form.Item>\n                                <Form.Item label=\"Payment Mode\" {...formItemLayout}>\n                                    {getFieldDecorator('payment_mode', {\n                                        rules: [{required: true, message: 'this field required'}],\n                                    })\n                                    (<Select showSearch\n                                             filterOption={(input, option) =>\n                                                 option.props.children.toLowerCase().indexOf(input.toLowerCase()) >= 0\n                                             }\n                                    >\n                                        {this.state.paymentModes.map(type => <Select.Option\n                                            value={type.id}>{type.mode}</Select.Option>)}\n                                    </Select>)\n                                    }\n                                </Form.Item>\n\n                                {/* <Col span={7} style={{float:\"right\"}}>\n                                    <Form.Item>\n                                        <Popconfirm\n                                            title={\"Are you sure to take payment of INR \" + this.state.totalPayingAmount + \"?\"}  onConfirm={this.handleSubmit}>\n                                            <Button type={'primary'}>Submit</Button>\n                                        </Popconfirm>\n                                        {that.props.history ?\n                                            <Button style={{margin: 5}}\n                                                    onClick={() => that.props.history.goBack()}>\n                                                Cancel\n                                            </Button> : null}\n                                    </Form.Item>\n                                </Col>  */}\n\n                            </div>\n                        </Col>\n                        <Col xs={24} sm={24} md={12} lg={12} xl={12}>\n                            <Divider>Patient Details</Divider>\n                            <Form.Item label=\"Creatinine Level\" {...formItemLayout}>\n                                {getFieldDecorator('creatinine', {\n                                    // rules: [{required: true, message: 'this field required'}],\n                                })\n                                (<Input/>)\n                                }\n                            </Form.Item>\n                            <Form.Item label=\"Urea Level\" {...formItemLayout}>\n                                {getFieldDecorator('urea_level', {\n                                    // rules: [{required: true, message: 'this field required'}],\n                                })\n                                (<Input/>)\n                                }\n                            </Form.Item>\n                            <Form.Item label=\"Currently on Dialysis?\" {...formItemLayout}>\n                                {getFieldDecorator('dialysis', {\n                                    // rules: [{required: true, message: 'this field required'}],\n                                })\n                                (<Select showSearch\n                                         filterOption={(input, option) =>\n                                             option.props.children.toLowerCase().indexOf(input.toLowerCase()) >= 0\n                                         }>\n                                    <Select.Option\n                                        value={true}>YES</Select.Option>\n                                    <Select.Option\n                                        value={false}>NO</Select.Option>\n                                </Select>)\n                                }\n                            </Form.Item>\n                            <Form.Item label=\"Diseases\" {...formItemLayout}>\n                                {getFieldDecorator('other_diseases', {\n                                    // rules: [{required: true, message: 'this field required'}],\n                                })\n                                (<Select showSearch mode={\"multiple\"}\n                                         filterOption={(input, option) =>\n                                             option.props.children.toLowerCase().indexOf(input.toLowerCase()) >= 0\n                                         }>\n                                    {this.state.diseases.map(item => <Select.Option\n                                        value={item.id}>{item.name}</Select.Option>)}\n                                </Select>)\n                                }\n                            </Form.Item>\n                            <Form.Item label=\"Other Diseases\" {...formItemLayout}>\n                                {getFieldDecorator('rest_diseases', {\n                                    // rules: [{required: true, message: 'this field required'}],\n                                })\n                                (<Select mode={\"tags\"}>\n\n                                </Select>)\n                                }\n                            </Form.Item>\n                            <Form.Item label=\"Upload Report\" {...formItemLayout}>\n                                {getFieldDecorator('file', {\n                                    // rules: [{required: true, message: 'this field required'}],\n                                })\n                                (<Upload {...singleUploadprops}>\n                                    <Button>\n                                        <Icon type=\"upload\"/> Select File\n                                    </Button>\n\n                                </Upload>)\n                                }\n                            </Form.Item>\n                            <Table pagination={false} columns={columns} size={'small'}\n                                   dataSource={this.state.choosePkg}/>\n\n                        </Col>\n                        <Col span={24}>\n                            <h3>Grand Total: <b>{this.state.totalPayableAmount.toFixed(2)}</b></h3>\n                            <Form.Item>\n                                <Popconfirm\n                                    title={\"Are you sure to take payment of INR \" + this.state.totalPayingAmount + \"?\"}\n                                    onConfirm={this.handleSubmit}>\n                                    <Button type={'primary'}>Submit</Button>\n                                </Popconfirm>\n                                {that.props.history ?\n                                    <Button style={{margin: 5}}\n                                            onClick={() => that.props.history.goBack()}>\n                                        Cancel\n                                    </Button> : null}\n                            </Form.Item>\n                        </Col>\n                    </Row>\n                </Form>\n            </Card>\n        </div>\n    }\n}\n\nexport default Form.create()(BedBookingForm)\n","import React from \"react\";\nimport {Button, Card, Icon, Layout, Tag} from \"antd\";\nimport {Route, Switch} from \"react-router\";\nimport {Link} from \"react-router-dom\";\nimport BedBookingForm from \"./BedBookingForm\";\nimport {BED_BOOKING_REPORTS} from \"../../../constants/api\";\nimport {getAPI, interpolate} from \"../../../utils/common\";\nimport CustomizedTable from \"../../common/CustomizedTable\";\nimport moment from \"moment\";\nimport InfiniteFeedLoaderButton from \"../../common/InfiniteFeedLoaderButton\";\nimport PermissionDenied from \"../../common/errors/PermissionDenied\";\n\nconst {Content} = Layout;\n\nexport default class BookingHome extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            loading: true,\n            bedBookingReports: [],\n            patient: this.props.currentPatient || {}\n        };\n        this.loadBedBookingReport = this.loadBedBookingReport.bind(this);\n    }\n\n    componentDidMount() {\n        this.loadBedBookingReport();\n    }\n\n    loadBedBookingReport = (page = 1) => {\n        let that = this;\n        this.setState({\n            loading: true\n        })\n        let successFn = function (data) {\n            console.log(data);\n            if (data.current == 1)\n                that.setState({\n                    bedBookingReports: data.results,\n                    loading: false,\n                    nextReport: data.next\n                });\n            else\n                that.setState(function (prevState) {\n                        return {\n                            bedBookingReports: [...prevState.bedBookingReports, ...data.results],\n                            loading: false,\n                            nextReport: data.next\n                        }\n                    }\n                );\n        };\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            })\n        };\n        getAPI(interpolate(BED_BOOKING_REPORTS, [this.props.active_practiceId]), successFn, errorFn, {\n            page: page,\n            patients: this.state.patient.id\n        });\n    }\n\n    render() {\n        let that=this;\n        const columns = [{\n            title: 'Bed Package',\n            key: 'name',\n            dataIndex: 'bed_package.name'\n        }, {\n            title: 'Medicine Package',\n            key: 'medicine',\n            dataIndex: 'medicines',\n            render: (text, record) => <span>{text.map((item) =>\n                <Tag>{item.name}</Tag>\n            )}</span>\n        }, {\n            title: 'From ',\n            key: 'from_date',\n            render: (text, record) => (\n                <span>\n                {moment(record.from_date).format('LL')}\n                  </span>\n            ),\n        }, {\n            title: 'To ',\n            key: 'to_date',\n            render: (text, record) => (\n                <span>\n                {moment(record.to_date).format('LL')}\n                  </span>\n            ),\n        }, {\n            title: 'Seat/Bed Type',\n            key: 'seat_type',\n            dataIndex: 'seat_type'\n\n        }, {\n            title: 'Seat Number',\n            key: 'seat_no',\n            dataIndex: 'seat_no'\n\n        }, {\n            title: 'Total price',\n            key: 'total_price',\n            dataIndex: 'total_price',\n            render: (value) => (<p>{value.toFixed(2)}</p>)\n\n        }, {\n            title: 'Payment Status',\n            key: 'payment_status',\n            dataIndex: 'payment_status'\n\n        }];\n\n        return <Content className=\"main-container\" style={{minHeight: 280,}}>\n            <Layout>\n                <Switch>\n                    <Route path={\"/patient/:patient/booking/bed-booking\"}\n                           render={() =>(that.props.activePracticePermissions.PatientBookings || that.props.allowAllPermissions ?<BedBookingForm {...this.props} bedBooking={true}\n                           loadData={this.loadBedBookingReport}/>:<PermissionDenied/>)}/>\n\n                    <Route>\n                        <div>\n                            <h2>Bed Booking Management\n                                <Link to={\"/patient/\" + this.state.patient.id + \"/booking/bed-booking\"}>\n                                    <Button type=\"primary\" style={{float: 'right'}}>\n                                        <Icon type=\"plus\"/>&nbsp;Book A Seat\n                                    </Button>\n                                </Link>\n                            </h2>\n                            <Card>\n                                <CustomizedTable pagination={false} hideReport={true}\n                                                 loading={this.state.loading}\n                                                 columns={columns} size={'small'}\n                                                 dataSource={this.state.bedBookingReports}/>\n                                <InfiniteFeedLoaderButton\n                                    loaderFunction={() => this.loadBedBookingReport(this.state.nextReport)}\n                                    loading={this.state.loading}\n                                    hidden={!this.state.nextReport}/>\n                            </Card>\n                        </div>\n                    </Route>\n                </Switch>\n            </Layout>\n        </Content>\n\n    }\n}\n","import React from \"react\";\n\nimport {Layout, Spin} from \"antd\";\nimport {Redirect, Route, matchPath} from \"react-router\";\nimport PatientProfile from \"./patient/PatientProfile\";\nimport EditPatientDetails from \"./patient/EditPatientDetails\";\nimport Appointment from \"./appointment/Appointment\"\nimport PatientSider from \"./PatientSider\";\nimport PatientTimeline from \"./timeline/PatientTimeline\";\nimport PatientFiles from \"./files/PatientFiles\";\nimport PatientClinicNotes from \"./clinicNotes/PatientClinicNotes\";\nimport PatientHeader from \"./PatientHeader\";\nimport PatientCommunication from \"./communication/PatientCommunication\";\nimport PatientVitalSign from \"./vitalSign/PatientVitalSign\";\nimport AddorEditPatientVitalSigns from \"./vitalSign/AddorEditPatientVitalSigns\";\nimport PatientCompletedProcedures from \"./completedProcedures/PatientCompletedProcedures\";\nimport PatientPrescriptions from \"./prescriptions/PatientPrescriptions\";\nimport PatientTreatmentPlans from \"./treatmentPlans/PatientTreatmentPlans\";\nimport PatientLabOrders from \"./labOrders/PatientLabOrders\";\nimport PatientInvoices from \"./invoices/PatientInvoices\";\nimport PatientPayments from \"./payments/PatientPayments\";\nimport PatientInvoicesReturn from \"./invoices/ReturnInvoices\";\nimport PatientLedgers from \"./ledgers/PatientLedgers\";\nimport {Switch} from \"react-router-dom\";\nimport PrescriptionTemplate from \"./prescriptions/PrescriptionTemplate\";\nimport {displayMessage, getAPI, getCommonSettings, interpolate, saveCommonSettings} from \"../../utils/common\";\nimport {AGENT_WALLET, PATIENT_PENDING_AMOUNT, PATIENT_PROFILE} from \"../../constants/api\";\nimport {ERROR_MSG_TYPE} from \"../../constants/dataKeys\";\nimport PatientMerge from \"./merge/PatientMerge\";\nimport PatientRequiredNoticeCard from \"./PatientRequiredNoticeCard\";\nimport PatientMedicalCertificate from \"./files/PatientMedicalCertificate\";\nimport PermissionDenied from \"../common/errors/PermissionDenied\";\nimport BookingHome from \"./booking/BookingHome\";\nimport PatientWalletLedger from \"./wallet-ledger/PatientWalletLedger\";\nimport {ROUTES_TO_HIDE_PATIENT_SIDE_PANEL} from \"../../constants/hardData\";\n\nconst {Content} = Layout;\n\nclass PatientHome extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            currentPatient: null,\n            active_practiceId: this.props.active_practiceId,\n            medicalHistory: [],\n            listModalVisible: false,\n            loading: false,\n            showAllClinic: getCommonSettings('showAllClinic'),\n            pendingAmount: null,\n            walletAmount: null,\n            hideSidePanel: false\n        };\n        this.setCurrentPatient = this.setCurrentPatient.bind(this);\n        this.togglePatientListModal = this.togglePatientListModal.bind(this);\n        this.toggleShowAllClinic = this.toggleShowAllClinic.bind(this);\n        this.loadPatientPendingAmount = this.loadPatientPendingAmount.bind(this);\n        this.loadPatientWallet = this.loadPatientWallet.bind(this);\n    }\n\n    componentDidMount() {\n        if (this.props.match.params.id && (!this.state.currentPatient || this.props.match.params.id != this.state.currentPatient.id)) {\n            this.getPatientListData(this.props.match.params.id);\n        }\n        this.loadPatientPendingAmount();\n        this.loadPatientWallet();\n    }\n\n    componentWillReceiveProps(nextProps, nextContext) {\n        let that = this;\n        if (this.state.currentPathLocation != nextProps.location)\n            this.setState({\n                currentPathLocation: nextProps.location\n            }, function () {\n                let foundFlag = false;\n                for (var i = 0; i < ROUTES_TO_HIDE_PATIENT_SIDE_PANEL.length; i++) {\n                    if (matchPath(that.state.currentPathLocation.pathname, {\n                        path: ROUTES_TO_HIDE_PATIENT_SIDE_PANEL[i],\n                        exact: false,\n                        strict: false\n                    })) {\n                        foundFlag = true;\n                        that.setState({\n                            hideSidePanel: true\n                        })\n                    }\n                }\n                if (!foundFlag)\n                    that.setState({\n                        hideSidePanel: false\n                    })\n            })\n    }\n\n    getPatientListData(id) {\n        let that = this;\n        that.setState({\n            loading: true\n        });\n        let successFn = function (data) {\n            that.setCurrentPatient(data)\n            // that.setState({\n            //     patientListData: data.results,\n            //     morePatients: data.next,\n            //     currentPage: data.current,\n            //     loading: false\n            // })\n        };\n        let errorFn = function () {\n            displayMessage(ERROR_MSG_TYPE, \"Patient Loading Failed\");\n            that.setState({\n                loading: false\n            })\n\n        };\n        getAPI(interpolate(PATIENT_PROFILE, [id]), successFn, errorFn);\n    }\n\n    setCurrentPatient(patientObj, redirectUrl = null) {\n        let that = this;\n        let urlArray = this.props.location.pathname.split(\"/\");\n        if (!isNaN(parseInt(urlArray[2]))) {\n            if (patientObj) {\n                urlArray[1] = \"patient\";\n                urlArray[2] = patientObj.id;\n            } else {\n                urlArray[1] = \"patients\";\n                urlArray.splice(2, 1);\n            }\n        } else {\n            if (patientObj) {\n                urlArray[1] = \"patient\";\n                urlArray.splice(2, 0, patientObj.id);\n            }\n        }\n        this.props.history.push(urlArray.join(\"/\"));\n        this.setState({\n            currentPatient: patientObj,\n            loading: false,\n            listModalVisible: false\n        }, function () {\n            if (redirectUrl)\n                that.props.history.push(interpolate(redirectUrl, [patientObj.id]))\n        });\n    }\n\n    togglePatientListModal(option) {\n        this.setState({\n            listModalVisible: !!option\n        });\n    }\n\n    toggleShowAllClinic(option) {\n        this.setState({\n            showAllClinic: !!option\n        }, function () {\n            saveCommonSettings('showAllClinic', !!option)\n        });\n    }\n\n    loadPatientPendingAmount = () => {\n        let that = this;\n        if (this.state.currentPatient && this.state.currentPatient.id) {\n            let successFn = function (data) {\n                that.setState({\n                    pendingAmount: data\n                })\n            }\n            let errorFn = function () {\n\n            }\n            getAPI(interpolate(PATIENT_PENDING_AMOUNT, [this.state.currentPatient.id]), successFn, errorFn);\n        } else {\n            this.setState({\n                pendingAmount: null\n            })\n        }\n    };\n    loadPatientWallet = () => {\n        let that = this;\n        if (this.state.currentPatient && this.state.currentPatient.id) {\n            let successFn = function (data) {\n                that.setState({\n                    walletAmount: data\n                })\n            }\n            let errorFn = function () {\n\n            }\n            getAPI(interpolate(AGENT_WALLET, [this.state.currentPatient.id]), successFn, errorFn);\n        } else {\n            this.setState({\n                pendingAmount: null\n            })\n        }\n    };\n\n    refreshWallet = () => {\n        this.loadPatientWallet();\n        this.loadPatientPendingAmount();\n    };\n\n    render() {\n        let that = this;\n        return <Content>\n            <Spin spinning={this.state.loading} size={\"large\"}>\n                <PatientHeader {...this.state} {...this.props} togglePatientListModal={this.togglePatientListModal}\n                               key={this.state.currentPatient}\n                               setCurrentPatient={this.setCurrentPatient}\n                               toggleShowAllClinic={this.toggleShowAllClinic} refreshWallet={this.refreshWallet}/>\n\n                <Layout>\n                    <PatientSider {...this.state} {...this.props}/>\n                    <Layout>\n                        <Content className=\"main-container\"\n                                 key={this.state.showAllClinic.toString()}\n                                 style={{\n                                     // margin: '24px 16px',\n                                     padding: '0px 5px',\n                                     minHeight: 280,\n                                     // marginLeft: '200px'\n                                 }}>\n                            <Switch>\n                                {/*** Patient Profile Routes*/}\n                                <Route exact path={\"/patients/merge\"}\n                                       render={(route) => (that.props.activePracticePermissions.MergePatients || that.props.allowAllPermissions ?\n                                           <PatientMerge {...this.state}/> : <PermissionDenied/>)}/>\n\n                                {that.props.activePracticePermissions.WebAdmin || that.allowAllPermissions ?\n                                    <Route exact path='/patients/profile'\n                                           render={(route) =>\n                                               (this.state.currentPatient ?\n                                                   <Redirect\n                                                       to={\"/patient/\" + this.state.currentPatient.id + \"/profile\"}/> :\n                                                   <PatientProfile {...this.state}\n                                                                   key={this.state.currentPatient}\n                                                                   setCurrentPatient={this.setCurrentPatient} {...this.props}/>)}/>\n                                    : null}\n\n                                <Route exact path='/patients/profile/add'\n                                       render={(route) => (that.props.activePracticePermissions.AddPatient || that.props.allowAllPermissions ?\n                                           <EditPatientDetails\n                                               key={this.state.currentPatient} {...this.props} {...route}/> :\n                                           <PermissionDenied/>)}/>\n                                <Route exact path='/patient/:id/profile'\n                                       render={(route) => (that.props.activePracticePermissions.ViewPatient || that.props.allowAllPermissions ?\n                                           <PatientProfile {...this.state}\n                                                           key={this.state.currentPatient}\n                                                           setCurrentPatient={this.setCurrentPatient} {...this.props} {...route}/> :\n                                           <PermissionDenied/>)}/>\n                                <Route exact path='/patient/:id/profile/edit'\n                                       render={(route) => (that.props.activePracticePermissions.EditPatient || that.props.allowAllPermissions ?\n                                           <EditPatientDetails\n                                               key={this.state.currentPatient}{...this.state}{...this.props} {...route}/> :\n                                           <PermissionDenied/>)}/>\n\n                                {/*** Patient Appointment Routes*/}\n                                {that.props.activePracticePermissions.PatientAppointments || that.allowAllPermissions ?\n                                    <Route exact path='/patients/appointments'\n                                           render={(route) => (this.state.currentPatient ?\n                                               <Redirect\n                                                   to={\"/patient/\" + this.state.currentPatient.id + \"/appointments\"}/> :\n                                               <Appointment\n                                                   key={this.state.currentPatient} {...this.state} {...route} {...this.props}/>)}/>\n                                    : null}\n                                {that.props.activePracticePermissions.PatientAppointments || that.allowAllPermissions ?\n                                    <Route exact path='/patient/:id/appointments'\n                                           render={(route) => <Appointment\n                                               key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.state} {...route} {...this.props}/>}/>\n                                    : null}\n                                {that.props.activePracticePermissions.PatientAppointments || that.allowAllPermissions ?\n                                    <Route exact path='/patients/appointments/:appointmentid'\n                                           render={(route) => <Appointment\n                                               key={this.state.currentPatient} {...this.state} {...route} {...this.props}/>}/>\n                                    : null}\n                                {/*      <Route exact path='/patients/appointments/create'\n                           render={() => <CreateAppointment {...this.props} />}/>*/}\n\n                                {/*** Patient Communication Routes*/}\n                                {that.props.activePracticePermissions.PatientCommunications || that.allowAllPermissions ?\n                                    <Route exact path='/patients/communications'\n                                           render={() => (this.state.currentPatient ?\n                                               <Redirect\n                                                   to={\"/patient/\" + this.state.currentPatient.id + \"/communications\"}/> :\n                                               <PatientRequiredNoticeCard\n                                                   togglePatientListModal={this.togglePatientListModal}/>)}/>\n                                    : null}\n                                {that.props.activePracticePermissions.PatientCommunications || that.allowAllPermissions ?\n                                    <Route exact path='/patient/:id/communications'\n                                           render={(route) => <PatientCommunication\n                                               key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.state} {...route}/>}/>\n                                    : null}\n\n                                {/*** Patient Vital Sign Routes*/}\n                                {that.props.activePracticePermissions.PatientVitalSigns || that.allowAllPermissions ?\n                                    <Route exact path='/patients/emr/vitalsigns'\n                                           render={(route) => (this.state.currentPatient ?\n                                               <Redirect\n                                                   to={\"/patient/\" + this.state.currentPatient.id + \"/emr/vitalsigns\"}/> :\n                                               <PatientVitalSign\n                                                   togglePatientListModal={this.togglePatientListModal}\n                                                   key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.state} {...route} />)}/>\n                                    : null}\n\n                                <Route path='/patient/:id/emr/vitalsigns'\n                                       render={(route) => (that.props.activePracticePermissions.PatientVitalSigns || that.allowAllPermissions ?\n                                           <PatientVitalSign\n                                               key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.state} {...route} /> :\n                                           <PermissionDenied/>)}/>\n\n\n                                <Route exact path='/patient/:id/emr/vitalsigns/edit'\n                                       render={(route) => (that.props.activePracticePermissions.PatientVitalSigns || that.allowAllPermissions ?\n                                           <AddorEditPatientVitalSigns\n                                               key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.state} {...route}/> :\n                                           <PermissionDenied/>)}/>\n\n                                {/*** Patient Clinic Notes Routes*/}\n\n                                <Route path={\"/patients/emr/clinicnotes\"}\n                                       render={(route) =>\n                                           <PatientClinicNotes\n                                               togglePatientListModal={this.togglePatientListModal}\n                                               key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.props} {...this.state} {...route}/>}/>}/>\n                                <Route path={\"/patient/:id/emr/clinicnotes\"}\n                                       render={(route) =>\n                                           <PatientClinicNotes\n                                               key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.props} {...this.state} {...route}/>}/>\n\n                                {/*** Patient Completed Procedures Routes*/}\n                                {that.props.activePracticePermissions.PatientCompletedProcedure || that.allowAllPermissions ?\n                                    <Route exact path='/patients/emr/workdone'\n                                           render={(route) => (this.state.currentPatient ?\n                                               <Redirect\n                                                   to={\"/patient/\" + this.state.currentPatient.id + \"/emr/workdone\"}/> :\n                                               <PatientCompletedProcedures\n                                                   togglePatientListModal={this.togglePatientListModal}\n                                                   key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.props} {...this.state} {...route}/>)}/>\n                                    : null}\n                                {that.props.activePracticePermissions.PatientCompletedProcedure || that.allowAllPermissions ?\n                                    <Route path='/patient/:id/emr/workdone'\n                                           render={(route) => <PatientCompletedProcedures {...that.props}\n                                                                                          key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.state} {...route}/>}/>\n                                    : null}\n                                {/*** Patient Files Routes*/}\n                                {that.props.activePracticePermissions.PatientFiles || that.allowAllPermissions ?\n                                    <Route exact path='/patients/emr/files'\n                                           render={(route) => (this.state.currentPatient ?\n                                               <Redirect\n                                                   to={\"/patient/\" + this.state.currentPatient.id + \"/emr/files\"}/> :\n                                               <PatientFiles\n                                                   togglePatientListModal={this.togglePatientListModal}\n                                                   key={this.state.currentPatient ? this.state.currentPatient.id : null} {...route} {...this.state}/>)}/>\n                                    : null}\n                                {that.props.activePracticePermissions.PatientFiles || that.allowAllPermissions ?\n                                    <Route path={\"/patient/:id/emr/files\"}\n                                           render={(route) => <PatientFiles\n                                               key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.props} {...route} {...this.state}/>}/>\n                                    : null}\n                                {that.props.activePracticePermissions.PatientFiles || that.allowAllPermissions ?\n                                    <Route path={\"/patient/:id/emr/create-medicalCertificate\"}\n                                           render={(route) => <PatientMedicalCertificate\n\n                                               key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.props} {...route} {...this.state}/>}/>\n                                    : null}\n                                {/*** Patient Prescriptions Routes*/}\n                                {that.props.activePracticePermissions.PatientPrescriptions || that.allowAllPermissions ?\n                                    <Route exact path='/patients/emr/prescriptions'\n                                           render={(route) => (this.state.currentPatient ?\n                                               <Redirect\n                                                   to={\"/patient/\" + this.state.currentPatient.id + \"/emr/prescriptions\"}/> :\n                                               <PatientPrescriptions\n                                                   togglePatientListModal={this.togglePatientListModal}\n                                                   key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.props} {...this.state} {...route} />)}/>\n                                    : null}\n                                {that.props.activePracticePermissions.PatientPrescriptions || that.allowAllPermissions ?\n                                    <Route path='/patient/:id/emr/prescriptions'\n                                           render={(route) => <PatientPrescriptions\n                                               key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.props} {...this.state} {...route} />}/>\n                                    : null}\n                                {/*** Patient Treatment Plan Routes*/}\n                                {that.props.activePracticePermissions.PatientTreatmentPlans || that.allowAllPermissions ?\n                                    <Route exact path='/patients/emr/plans'\n                                           render={(route) => (this.state.currentPatient ?\n                                               <Redirect\n                                                   to={\"/patient/\" + this.state.currentPatient.id + \"/emr/plans\"}/> :\n                                               <PatientTreatmentPlans\n                                                   togglePatientListModal={this.togglePatientListModal}\n                                                   key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.state} {...this.props} {...route} />)}/>\n                                    : null}\n                                {that.props.activePracticePermissions.PatientTreatmentPlans || that.allowAllPermissions ?\n                                    <Route path='/patient/:id/emr/plans'\n                                           render={(route) => <PatientTreatmentPlans\n                                               key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.state} {...that.props} {...route} />}/>\n                                    : null}\n                                {/*** Patient Timeline Routes*/}\n\n                                <Route path={\"/patient/:id/emr/timeline\"}\n                                       render={(route) => (that.props.activePracticePermissions.PatientTimeline || that.allowAllPermissions ?\n                                           <PatientTimeline\n                                               key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.state} {...route}/> :\n                                           <PermissionDenied/>)}/>\n                                {/*** Patient Lab Order Routes*/}\n                                {that.props.activePracticePermissions.PatientLabOrders || that.allowAllPermissions ?\n                                    <Route exact path='/patient/emr/labtrackings'\n                                           render={(route) => (this.state.currentPatient ?\n                                                   <Redirect\n                                                       to={\"/patient/\" + this.state.currentPatient.id + \"/emr/labtrackings\"}/> :\n                                                   <PatientLabOrders\n                                                       key={this.state.currentPatient} {...this.state} {...route}/>\n                                           )}/>\n                                    : null}\n\n                                <Route path='/patient/:id/emr/labtrackings'\n                                       render={(route) => (that.props.activePracticePermissions.PatientLabOrders || that.allowAllPermissions ?\n                                           <PatientLabOrders\n                                               key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.state} {...route} /> :\n                                           <PermissionDenied/>)}/>\n\n                                {/*** Patient Invoices Routes*/}\n                                {that.props.activePracticePermissions.PatientInvoices || that.allowAllPermissions ?\n                                    <Route exact path='/patients/billing/invoices'\n                                           render={(route) => (this.state.currentPatient ?\n                                               <Redirect\n                                                   to={\"/patient/\" + this.state.currentPatient.id + \"/billing/invoices\"}/> :\n                                               <PatientInvoices\n                                                   togglePatientListModal={this.togglePatientListModal}\n                                                   key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.props} {...this.state} {...route} />)}/>\n                                    : null}\n                                <Route path='/patient/:id/billing/invoices'\n                                       render={(route) => (that.props.activePracticePermissions.PatientInvoices || that.allowAllPermissions ?\n                                           <PatientInvoices refreshWallet={this.refreshWallet}\n                                                            key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.props} {...this.state} {...route}/> :\n                                           <PermissionDenied/>)}/>\n\n\n                                {that.props.activePracticePermissions.PatientReturns || that.allowAllPermissions ?\n                                    <Route exact path='/patients/billing/return/invoices'\n                                           render={(route) => (this.state.currentPatient ?\n                                               <Redirect\n                                                   to={\"/patient/\" + this.state.currentPatient.id + \"/billing/return/invoices\"}/> :\n                                               <PatientInvoicesReturn\n                                                   togglePatientListModal={this.togglePatientListModal}\n                                                   key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.state} {...route}/>)}/>\n                                    : null}\n\n\n                                <Route exact path='/patient/:id/billing/return/invoices'\n                                       render={(route) => (that.props.activePracticePermissions.PatientReturns || that.allowAllPermissions ?\n                                           <PatientInvoicesReturn refreshWallet={this.refreshWallet}\n                                                                  key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.state} {...route}/> :\n                                           <PermissionDenied/>)}/>\n\n\n                                {/*** Patient Payments Routes*/}\n                                {that.props.activePracticePermissions.PatientPayments || that.allowAllPermissions ?\n                                    <Route path='/patients/billing/payments'\n                                           render={(route) => (this.state.currentPatient ?\n                                               <Redirect\n                                                   to={\"/patient/\" + this.state.currentPatient.id + \"/billing/payments\"}/> :\n                                               <PatientPayments\n                                                   togglePatientListModal={this.togglePatientListModal}\n                                                   key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.state} {...this.props} {...route}/>)}/>\n                                    : null}\n                                <Route path='/patient/:id/billing/payments'\n                                       render={(route) => (that.props.activePracticePermissions.PatientPayments || that.allowAllPermissions ?\n                                           <PatientPayments refreshWallet={this.refreshWallet}\n                                                            key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.state} {...route}/> :\n                                           <PermissionDenied/>)}/>\n\n                                {/*** Patient Ledger Routes*/}\n                                {this.state.currentPatient ?\n                                    <Route exact path='/patient/:id/billing/ledger'\n                                           render={(route) => (that.props.activePracticePermissions.PatientLedger || that.allowAllPermissions ?\n                                               <PatientLedgers\n                                                   refreshWallet={this.refreshWallet}\n                                                   key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.state} {...route}/> :\n                                               <PermissionDenied/>)}/> : null}\n\n                                <Route exact path='/patient/:id/prescriptions/template/add'\n                                       render={(route) => (that.props.activePracticePermissions.PatientPrescriptions || that.allowAllPermissions ?\n                                           <PrescriptionTemplate\n                                               key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.state} {...route}/> :\n                                           <PermissionDenied/>)}/>\n\n                                <Route path=\"/patient/:id/booking\"\n                                       render={(route) => (that.props.activePracticePermissions.PatientBookings || that.props.allowAllPermissions ?\n                                           <BookingHome {...this.state}{...this.props} {...route}\n                                                        key={this.state.currentPatient ? this.state.currentPatient.id : null}/> :\n                                           <PermissionDenied/>)}/>\n                                {this.state.currentPatient && this.state.currentPatient.is_agent ?\n                                    <Route exact path=\"/patient/:id/billing/wallet\"\n                                           render={(route) => (that.props.activePracticePermissions.PatientBookings || that.props.allowAllPermissions ?\n                                               <PatientWalletLedger {...this.state} {...this.props} {...route}\n                                                                    key={this.state.currentPatient ? this.state.currentPatient.id : null}/> :\n                                               <PermissionDenied/>)}/> : null}\n\n                                <Route render={(route) =>\n                                    (this.state.currentPatient ?\n                                        <Redirect\n                                            to={\"/patient/\" + this.state.currentPatient.id + \"/profile\"}/> :\n                                        <PatientProfile {...this.state}\n                                                        key={this.state.currentPatient}\n                                                        setCurrentPatient={this.setCurrentPatient} {...this.props}/>)}/>\n\n\n                            </Switch>\n                        </Content>\n                    </Layout>\n                </Layout>\n            </Spin>\n        </Content>\n    }\n}\n\nexport default PatientHome;\n","import jsPDF from 'jspdf';\nimport \"jspdf-autotable\";\nimport moment from \"moment\";\n\nexport const exportToExcel = function (columns, dataArray, fileName = \"download\") {\n    var str = makeCSVString(columns, dataArray);\n    downloadCSV(str, fileName)\n}\n\nexport const makeCSVString = function (columns, dataArray, printColumn = true) {\n    var str = '';\n    var line = [];\n    if (printColumn) {\n        columns.forEach(function (column) {\n            line.push(column);\n        });\n        str += line.join(',');\n        str += '\\r\\n';\n    }\n    dataArray.forEach(function (dataRow) {\n        line = [];\n        columns.forEach(function (column) {\n            if (dataRow[column])\n                line.push(dataRow[column]);\n            else\n                line.push('--');\n        });\n\n        str += line.join(',');\n        str += '\\r\\n';\n    });\n    return str;\n}\n\nexport const downloadCSV = function (str, fileName) {\n    var fName = fileName + '.csv';\n    var cCode, bArr = [];\n    bArr.push(255, 254);\n    for (var i = 0; i < str.length; ++i) {\n        cCode = str.charCodeAt(i);\n        bArr.push(cCode & 0xff);\n        bArr.push(cCode / 256 >>> 0);\n    }\n\n    var blob = new Blob([new Uint8Array(bArr)], {type: 'text/csv;charset=UTF-16LE;'});\n    if (navigator.msSaveBlob) {\n        navigator.msSaveBlob(blob, fName);\n    } else {\n        var link = document.createElement(\"a\");\n        if (link.download !== undefined) {\n            var url = window.URL.createObjectURL(blob);\n            link.setAttribute(\"href\", url);\n            link.setAttribute(\"download\", fName);\n            link.style.visibility = 'hidden';\n            document.body.appendChild(link);\n            link.click();\n            document.body.removeChild(link);\n            window.URL.revokeObjectURL(url);\n        }\n    }\n    // window.open(\"data:text/csv;charset=utf-8,\" + encodeURI(str));\n}\n\nexport const exportToPDF = function (columns, dataArray, fileName, printColumn = true) {\n    let summary = [];\n    var pdf = new jsPDF('p', 'mm', 'a4');\n    addPDFHeader(pdf);\n    // var rowArray = dataArray;\n    // var summaryColoumns = [\n    //     {title: \"Section\", dataKey: \"section\"},\n    // ];\n    // summaryColoumns.push({title: \"TOTAL\", dataKey: \"total\"});\n    // var finalSummRow = {};\n    // finalSummRow.section = 'TOTAL';\n    // finalSummRow.total = 0;\n    //\n    // summary.push(finalSummRow);\n\n\n    var rows = Object.create(dataArray);\n    pdf.autoTable(columns, rows, {\n        margin: {top: 35},\n        startY: pdf.autoTableEndPosY() + 20,\n        headerStyle: {\n            overflow: 'linebreak'\n        },\n        bodyStyles: {\n            overflow: 'linebreak'\n        }\n    });\n    addPDFFooter(pdf);\n    pdf.save(fileName+'.pdf')\n}\n\nfunction addPDFHeader(pdf) {\n    var locationLogo = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABAAAAAEhCAYAAAGW0uIhAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QzRDOTJGNzhGNTNBMTFFN0IzMkQ4NzVGMjlDQzg4OTQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QzRDOTJGNzlGNTNBMTFFN0IzMkQ4NzVGMjlDQzg4OTQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpDNEM5MkY3NkY1M0ExMUU3QjMyRDg3NUYyOUNDODg5NCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpDNEM5MkY3N0Y1M0ExMUU3QjMyRDg3NUYyOUNDODg5NCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PhLpaeAAAKXoSURBVHja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\";\n    // pdf.addImage(locationLogo, 'PNG', 15, 5, 36, 11);\n    pdf.line(10, 20, 200, 20);\n}\n\n\nfunction addPDFFooter(pdf) {\n    pdf.line(10, 270, 200, 270);\n    pdf.setFontSize(8);\n    pdf.text(10, 275, 'This is a computer generated report.');\n}\n","import React from \"react\";\nimport {Button, Col, Icon, Input, Row, Table, Tag} from \"antd\";\nimport {exportToExcel, exportToPDF} from \"../../utils/export\";\nimport moment from \"moment\";\nimport Highlighter from 'react-highlight-words';\n\nexport default class CustomizedTable extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...props,\n            searchText: '',\n        };\n        this.excelExport = this.excelExport.bind(this);\n        this.pdfExport = this.pdfExport.bind(this);\n    }\n\n    componentWillReceiveProps(newProps) {\n        if (newProps.columns != this.state.columns || newProps.dataSource != this.state.dataSource || newProps.loading != this.state.loading) {\n            this.setState({...newProps});\n        }\n    }\n\n    pdfExport() {\n        let that = this;\n        let excelColumns = [];\n            that.state.columns.forEach(function(item) {\n                if(!item.hideExport)\n                    excelColumns.push({title: item.title, dataKey: item.title})\n            });\n        let dataArrayForExcel = [];\n        that.state.dataSource.forEach(function (dataRow,index) {\n            let dataObjectToPush = {};\n            that.state.columns.forEach(function (column) {\n                if (column.export) {\n                    dataObjectToPush[column.title] = column.export(dataRow[column.dataIndex], dataRow,index);\n                } else {\n                    dataObjectToPush[column.title] = dataRow[column.dataIndex];\n                }\n            });\n            dataArrayForExcel.push(dataObjectToPush);\n        });\n        exportToPDF(excelColumns, dataArrayForExcel, \"Export\" + moment(), true);\n    }\n\n    excelExport() {\n        let that = this;\n        let excelColumns = [];\n        that.state.columns.forEach(function(item) {\n            if(!item.hideExport)\n                excelColumns.push(item.title)\n        });\n        let dataArrayForExcel = [];\n        that.state.dataSource.forEach(function (dataRow,index) {\n            let dataObjectToPush = {};\n            that.state.columns.forEach(function (column) {\n                if (column.export) {\n                    dataObjectToPush[column.title] = column.export(dataRow[column.dataIndex], dataRow,index);\n                } else {\n                    dataObjectToPush[column.title] = dataRow[column.dataIndex];\n                }\n            });\n            dataArrayForExcel.push(dataObjectToPush);\n        });\n        exportToExcel(excelColumns, dataArrayForExcel, \"Export\" + moment());\n    }\n\n    getColumnSearchProps = dataIndex => ({\n        filterDropdown: ({setSelectedKeys, selectedKeys, confirm, clearFilters}) => (\n            <div style={{padding: 8}}>\n                <Input\n                    ref={node => {\n                        this.searchInput = node;\n                    }}\n                    placeholder={`Search ${dataIndex}`}\n                    value={selectedKeys[0]}\n                    onChange={e => setSelectedKeys(e.target.value ? [e.target.value] : [])}\n                    onPressEnter={() => this.handleSearch(selectedKeys, confirm)}\n                    style={{width: 188, marginBottom: 8, display: 'block'}}\n                />\n                <Button\n                    type=\"primary\"\n                    onClick={() => this.handleSearch(selectedKeys, confirm)}\n                    icon=\"search\"\n                    size=\"small\"\n                    style={{width: 90, marginRight: 8}}\n                >\n                    Search\n                </Button>\n                <Button onClick={() => this.handleReset(clearFilters)} size=\"small\" style={{width: 90}}>\n                    Reset\n                </Button>\n            </div>\n        ),\n        filterIcon: filtered => (<Icon type=\"search\" style={{color: filtered ? '#1890ff' : undefined}}/>),\n        onFilter: (value, record) =>\n            record[dataIndex] != null ? record[dataIndex]\n                .toString()\n                .toLowerCase()\n                .includes(value.toLowerCase()) : '',\n        onFilterDropdownVisibleChange: visible => {\n            if (visible) {\n                setTimeout(() => this.searchInput.select());\n            }\n        },\n        render: text => (\n            <Highlighter\n                highlightStyle={{backgroundColor: '#ffc069', padding: 0}}\n                searchWords={[this.state.searchText]}\n                autoEscape\n                textToHighlight={text ? text.toString() : ''}\n            />\n        ),\n    });\n    handleSearch = (selectedKeys, confirm) => {\n        confirm();\n        this.setState({searchText: selectedKeys[0]});\n    };\n\n    handleReset = clearFilters => {\n        clearFilters();\n        this.setState({searchText: ''});\n    };\n\n    render() {\n        let that = this;\n        const columns = this.state.columns.map(item => {\n                if (!item.render)\n                    return {...item, ...that.getColumnSearchProps(item.dataIndex)}\n                return {...item};\n            }\n        )\n        return <div>\n            {this.props.hideReport ? null :\n                <Row>\n                    <Col>\n                        <Button.Group size=\"small\">\n                            <Button disabled={this.state.loading} type=\"primary\" onClick={this.excelExport}><Icon\n                                type=\"file-excel\"/> Excel</Button>\n                            <Button disabled={this.state.loading} type=\"primary\" onClick={this.pdfExport}><Icon\n                                type=\"file-pdf\"/> PDF</Button>\n                        </Button.Group>\n                    </Col>\n                </Row>}\n            <Row>\n                <Table pagination={{\n                    position: 'both',\n                    pageSizeOptions: ['10', '20', '30', '40', '50', '100'],\n                    showSizeChanger: true,\n                    showQuickJumper: true,\n                    size: \"small\",\n                    showTotal: function (total, range) {\n                        return <Tag>Showing <b>{range[0]}</b> to <b>{range[1]}</b> of <b>{total}</b> items</Tag>\n                    }\n                }} {...this.state} columns={columns}/>\n            </Row>\n        </div>\n    }\n\n}\n","import {Button, Row, Spin} from \"antd\";\nimport React from \"react\";\n\nexport default class InfiniteFeedLoaderButton extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            extraLoadingLabel: '',\n        }\n    }\n\n    startLoading = () => {\n        if (this.props.loaderFunction) {\n            this.props.loaderFunction();\n            this.startMakingExtraLabels();\n        }\n    }\n    startMakingExtraLabels = () => {\n        let that = this;\n        this.setState(function (prevState) {\n            if (prevState.extraLoadingLabel.length > 2) {\n                return {extraLoadingLabel: ''}\n            } else {\n                return {extraLoadingLabel: prevState.extraLoadingLabel + '.'}\n            }\n        }, function () {\n            if (that.props.loading)\n                setTimeout(function () {\n                    that.startMakingExtraLabels();\n                }, 500)\n        })\n    }\n\n    render() {\n        if (this.props.loading) {\n            return <Spin spinning={this.props.loading}>\n                <Row style={{minHeight: 200}}/>\n            </Spin>\n        }\n        if (this.props.hidden) {\n            return <Row>\n                <div style={{textAlign: 'center', margin: '15px 0px'}}>\n                    <small>No More Data Found</small>\n                </div>\n            </Row>\n        }\n        return <Row>\n            <div style={{textAlign: 'center', margin: '15px 0px'}}>\n                <Button type={'primary'} onClick={this.startLoading} loading={this.props.loading}>\n                    {this.props.loading ? 'Loading' + this.state.extraLoadingLabel : 'Load More'}\n                </Button>\n            </div>\n        </Row>\n    }\n}\n","import '../../style/index.less';\nimport './index.less';","function _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nimport * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport RcSwitch from 'rc-switch';\nimport classNames from 'classnames';\nimport omit from 'omit.js';\nimport Wave from '../_util/wave';\nimport Icon from '../icon';\nimport { ConfigConsumer } from '../config-provider';\nimport warning from '../_util/warning';\n\nvar Switch =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Switch, _React$Component);\n\n  function Switch(props) {\n    var _this;\n\n    _classCallCheck(this, Switch);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Switch).call(this, props));\n\n    _this.saveSwitch = function (node) {\n      _this.rcSwitch = node;\n    };\n\n    _this.renderSwitch = function (_ref) {\n      var _classNames;\n\n      var getPrefixCls = _ref.getPrefixCls;\n      var _this$props = _this.props,\n          customizePrefixCls = _this$props.prefixCls,\n          size = _this$props.size,\n          loading = _this$props.loading,\n          _this$props$className = _this$props.className,\n          className = _this$props$className === void 0 ? '' : _this$props$className,\n          disabled = _this$props.disabled;\n      var prefixCls = getPrefixCls('switch', customizePrefixCls);\n      var classes = classNames(className, (_classNames = {}, _defineProperty(_classNames, \"\".concat(prefixCls, \"-small\"), size === 'small'), _defineProperty(_classNames, \"\".concat(prefixCls, \"-loading\"), loading), _classNames));\n      var loadingIcon = loading ? React.createElement(Icon, {\n        type: \"loading\",\n        className: \"\".concat(prefixCls, \"-loading-icon\")\n      }) : null;\n      return React.createElement(Wave, {\n        insertExtraNode: true\n      }, React.createElement(RcSwitch, _extends({}, omit(_this.props, ['loading']), {\n        prefixCls: prefixCls,\n        className: classes,\n        disabled: disabled || loading,\n        ref: _this.saveSwitch,\n        loadingIcon: loadingIcon\n      })));\n    };\n\n    warning('checked' in props || !('value' in props), 'Switch', '`value` is not validate prop, do you mean `checked`?');\n    return _this;\n  }\n\n  _createClass(Switch, [{\n    key: \"focus\",\n    value: function focus() {\n      this.rcSwitch.focus();\n    }\n  }, {\n    key: \"blur\",\n    value: function blur() {\n      this.rcSwitch.blur();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(ConfigConsumer, null, this.renderSwitch);\n    }\n  }]);\n\n  return Switch;\n}(React.Component);\n\nexport { Switch as default };\nSwitch.__ANT_SWITCH = true;\nSwitch.propTypes = {\n  prefixCls: PropTypes.string,\n  // HACK: https://github.com/ant-design/ant-design/issues/5368\n  // size=default and size=large are the same\n  size: PropTypes.oneOf(['small', 'default', 'large']),\n  className: PropTypes.string\n};","import React from \"react\";\nimport CustomizedTable from \"../../common/CustomizedTable\";\nimport {getAPI, interpolate} from \"../../../utils/common\";\nimport {AGENT_WALLET, MY_AGENTS, WALLET_LEDGER, WALLET_LEDGER_SUM} from \"../../../constants/api\";\nimport {Card, Col, DatePicker, Icon, Row, Select, Statistic, Typography} from \"antd\";\nimport moment from \"moment\";\nimport InfiniteFeedLoaderButton from \"../../common/InfiniteFeedLoaderButton\";\n\nconst {Text} = Typography;\nexport default class PatientWalletLedger extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ledger: [],\n            ledgerDetails:{},\n            loading: false,\n            walletAmount: null,\n            selectedStartDate: moment().subtract(1, 'month'),\n            selectedEndDate: moment(),\n            agents: [],\n            selectedAgents: []\n        }\n    }\n\n    componentDidMount() {\n        this.loadData();\n        this.loadPatientWallet();\n        this.loadAgents();\n        this.loadSumData();\n    }\n\n    loadPatientWallet = () => {\n        let that = this;\n        if (this.props.currentPatient && this.props.currentPatient.id) {\n            let successFn = function (data) {\n                if (data.length)\n                    that.setState({\n                        walletAmount: data[0]\n                    })\n            }\n            let errorFn = function () {\n\n            }\n            getAPI(interpolate(AGENT_WALLET, [this.props.currentPatient.id]), successFn, errorFn);\n        } else {\n            this.setState({\n                pendingAmount: null\n            })\n        }\n    }\n    loadData = (page = 1) => {\n        let that = this;\n        this.setState({\n            loading: true\n        })\n        let successFn = function (data) {\n            if (data.current == 1) {\n                that.setState({\n                    ledger: data.results,\n                    loading: false,\n                    nextPage: data.next\n                })\n            } else {\n                that.setState(function (prevState) {\n                    return {\n                        ledger: [...prevState.ledger, ...data.results],\n                        loading: false,\n                        nextPage: data.next\n                    }\n                })\n            }\n        }\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            })\n        }\n        let params = {\n            page,\n            start: this.state.selectedStartDate.startOf('day').format(),\n            end: this.state.selectedEndDate.endOf('day').format(),\n            agents: this.state.selectedAgents.join(',')\n        }\n        if (this.state.selectedAgents)\n            params.agents = this.state.selectedAgents.join(',');\n        getAPI(interpolate(WALLET_LEDGER, [this.props.currentPatient.id]), successFn, errorFn, params);\n    }\n    loadSumData = (page = 1) => {\n        let that = this;\n\n        let successFn = function (data) {\n                that.setState({\n                    ledgerDetails: data,\n                    nextPage: data.next\n                })\n\n        }\n        let errorFn = function () {\n        }\n        let params = {\n            page,\n            start: this.state.selectedStartDate.format(),\n            end: this.state.selectedEndDate.format(),\n            agents: this.state.selectedAgents.join(',')\n        }\n        if (this.state.selectedAgents)\n            params.agents = this.state.selectedAgents.join(',');\n        getAPI(interpolate(WALLET_LEDGER_SUM, [this.props.currentPatient.id]), successFn, errorFn, params);\n    }\n    loadAgents() {\n        var that = this;\n        let successFn = function (data) {\n            that.setState({\n                agents: data,\n            })\n        };\n        let errorFn = function () {\n        };\n        let apiParams = {\n            agent: true,\n            pagination: false\n        }\n        getAPI(interpolate(MY_AGENTS, [this.props.currentPatient.id]), successFn, errorFn, apiParams);\n    }\n\n    changeExpenseFilters = (type, value) => {\n        let that = this;\n        this.setState({\n            [type]: value\n        }, function () {\n            that.loadData(1);\n        })\n    }\n\n    render() {\n        let columns = [{\n            title: 'Date',\n            dataIndex: 'created_at',\n            key: 'created_at',\n            render: (value) => moment(value).format('LLL')\n        }, {\n            title: 'Patient',\n            dataIndex: 'received_from',\n            key: 'received_from',\n            render: (value, record) => value ? <Text>{value.user.first_name} ({value.custom_id})</Text> : '--'\n        }, , {\n            title: 'Refered By',\n            dataIndex: 'received_from.user.referer_data',\n            key: 'received_from.user.referer_data',\n            render: (value, record) => value && value.referer ? <Text>{value.referer.first_name} ({value.custom_id})</Text> : '--'\n        }, {\n            title: 'Ledger Comment',\n            dataIndex: 'comments',\n            key: 'comments',\n            render: (value, record) => record.is_cancelled ? <Text delete>{value}</Text> : value\n        },\n            //     {\n            //     title: 'Amount Type',\n            //     dataIndex: 'amount_type',\n            //     key: 'amount_type',\n            //     render: (value, record) => record.is_cancelled ? <Text delete>{value}</Text> : value\n            // },\n            {\n                title: 'Cr/Dr',\n                dataIndex: 'ledger_type',\n                key: 'ledger_type',\n                render: (value, record) => record.is_cancelled ? <Text delete>{value}</Text> : value\n            }, {\n                title: 'Amount',\n                dataIndex: 'amount',\n                key: 'amount',\n                render: (value, record) => record.is_cancelled ?\n                    <Text delete>{value.toFixed(2)}</Text> : value.toFixed(2)\n            }];\n        return <div>\n            <Card title={\"Wallet Ledger\"}>\n                <Row gutter={16} style={{marginBottom: 10}}>\n                    <Col span={2} style={{textAlign: \"right\"}}>\n                        <b> Agents</b>\n                    </Col>\n                    <Col span={4}>\n                        <Select style={{width: '100%'}} value={this.state.selectedAgents}\n                                mode=\"multiple\"\n                                disabled={this.state.loading}\n                                onChange={(value) => this.changeExpenseFilters('selectedAgents', value)}>\n                            {this.state.agents.map(item => <Select.Option\n                                value={item.id}>{item.user.first_name}</Select.Option>)}\n                        </Select>\n                    </Col>\n                    {/*<Col span={2} style={{textAlign: \"right\"}}>*/}\n                    {/*    <b> Payment Modes</b>*/}\n                    {/*</Col>*/}\n                    {/*<Col span={4}>*/}\n                    {/*    <Select style={{width: '100%'}} value={this.state.selectedPaymentMode}*/}\n                    {/*            disabled={this.state.loading}*/}\n                    {/*            onChange={(value) => this.changeExpenseFilters('selectedPaymentMode', value)}>*/}\n                    {/*        <Select.Option value={null}>--ALL PAYMENT MODE--</Select.Option>*/}\n                    {/*        {this.state.paymentModes.map(item => <Select.Option*/}\n                    {/*            value={item.id}>{item.mode}</Select.Option>)}*/}\n                    {/*    </Select>*/}\n                    {/*</Col>*/}\n\n                    <Col span={2} style={{textAlign: \"right\"}}>\n                        <b> From</b>\n                    </Col>\n                    <Col span={4}>\n                        <DatePicker value={this.state.selectedStartDate}\n                                    disabled={this.state.loading}\n                                    onChange={(value) => this.changeExpenseFilters('selectedStartDate', value)}/>\n                    </Col>\n                    <Col span={2} style={{textAlign: \"right\"}}>\n                        <b> To</b>\n                    </Col>\n                    <Col span={4}>\n                        <DatePicker value={this.state.selectedEndDate}\n                                    disabled={this.state.loading}\n                                    onChange={(value) => this.changeExpenseFilters('selectedEndDate', value)}/>\n                    </Col>\n                </Row>\n                {this.state.walletAmount ?\n                    <Row style={{textAlign: 'center', marginBottom: 10}}>\n                        {/*<Col span={12}>*/}\n                        {/*    <Statistic title={\"\"} prefix={<Icon type={\"wallet\"}/>}*/}\n                        {/*               value={this.state.walletAmount.refundable_amount}/>*/}\n                        {/*</Col>*/}\n                        <Col span={24}>\n                            <Statistic title={\"Wallet Total\"} prefix={<Icon type={\"wallet\"}/>}\n                                       value={this.state.walletAmount.non_refundable} precision={2}/>\n                        </Col>\n                    </Row> : null}\n                <CustomizedTable dataSource={this.state.ledger} loading={this.state.loading} columns={columns}\n                                 hideReport\n                                 pagination={false}/>\n                <InfiniteFeedLoaderButton loading={this.state.loading}\n                                          hidden={!this.state.nextPage}\n                                          loaderFunction={() => this.loadData(this.state.nextPage)}/>\n                <Row style={{textAlign: 'center', marginBottom: 10}}>\n                    <Col span={8}>\n                        <Statistic title={\"Credit\"} value={this.state.ledgerDetails.credit} precision={2}/>\n                    </Col>\n                    <Col span={8}>\n                        <Statistic title={\"Debit\"} value={this.state.ledgerDetails.debit} precision={2}/>\n                    </Col>\n                    <Col span={8}>\n                        <Statistic title={\"Profit\"} value={this.state.ledgerDetails.credit-this.state.ledgerDetails.debit} precision={2}/>\n                    </Col>\n                </Row>\n            </Card>\n        </div>\n    }\n}"],"sourceRoot":""}