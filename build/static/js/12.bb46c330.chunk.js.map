{"version":3,"sources":["../node_modules/lodash/mapKeys.js","app/components/patients/patientGroups/PatientGroups.js","app/components/patients/PatientSelection.js","app/components/patients/patient/PatientNotes.js","app/components/patients/patient/MedicalMembership.js","app/components/patients/patient/AddOrEditAgent.js","app/components/patients/patient/PatientProfile.js","app/components/patients/patient/EditPatientDetails.js","app/components/patients/appointment/Appointment.js","app/components/patients/PatientSider.js","../node_modules/antd/es/timeline/TimelineItem.js","../node_modules/antd/es/timeline/Timeline.js","../node_modules/antd/es/timeline/index.js","../node_modules/antd/es/steps/index.js","app/components/patients/timeline/PatientTimeline.js","../node_modules/react-modal-image/es/styles.js","../node_modules/react-modal-image/es/icons.js","../node_modules/react-modal-image/es/Header.js","../node_modules/react-modal-image/es/Image.js","../node_modules/react-modal-image/es/Lightbox.js","../node_modules/react-modal-image/es/index.js","app/components/patients/files/PatientFiles.js","app/components/patients/clinicNotes/AddClinicNotes.js","app/components/patients/clinicNotes/AddClinicNotesDynamic.js","app/components/patients/clinicNotes/PatientClinicNotes.js","app/components/patients/PatientHeader.js","app/components/patients/communication/PatientCommunicationSetting.js","app/components/patients/communication/PatientCommunication.js","app/components/patients/vitalSign/AddorEditPatientVitalSigns.js","app/components/patients/vitalSign/PatientVitalSign.js","app/components/patients/completedProcedures/AddorEditDynamicCompletedTreatmentPlans.js","app/components/patients/completedProcedures/PatientCompletedProcedures.js","app/components/patients/prescriptions/PrescriptionTemplate.js","app/components/patients/prescriptions/AddorEditDynamicPatientPrescriptions.js","app/components/patients/prescriptions/PatientPrescriptions.js","app/components/patients/treatmentPlans/AddorEditDynamicTreatmentPlans.js","app/components/patients/treatmentPlans/PatientTreatmentPlans.js","app/components/patients/labOrders/AddPatientLabOrders.js","app/components/patients/labOrders/PatientLabOrders.js","app/components/patients/invoices/AddInvoicedynamic.js","app/components/patients/invoices/AddReturnInvoice.js","app/components/patients/invoices/InvoiceReturnModal.js","app/components/patients/invoices/EditReturnModal.js","app/components/patients/invoices/CancelReturnModal.js","app/components/patients/invoices/PatientInvoices.js","app/components/patients/payments/AddPaymentForm.js","app/components/patients/payments/EditPaymentModal.js","app/components/patients/payments/CancelPaymentModal.js","app/components/patients/payments/PatientPayments.js","app/components/patients/invoices/ReturnInvoices.js","app/utils/patientUtils.js","app/components/patients/ledgers/PatientLedgers.js","app/components/patients/merge/PatientMerge.js","app/components/patients/PatientRequiredNoticeCard.js","app/components/patients/files/PatientMedicalCertificate.js","app/components/patients/booking/BedBookingForm.js","app/components/patients/booking/BookingHome.js","app/components/patients/PatientHome.js","app/utils/export.js","app/components/common/CustomizedTable.js","app/components/common/InfiniteFeedLoaderButton.js","../node_modules/antd/es/switch/style/index.js","../node_modules/antd/es/switch/index.js","app/components/patients/wallet-ledger/PatientWalletLedger.js"],"names":["baseAssignValue","baseForOwn","baseIteratee","module","exports","object","iteratee","result","value","key","PatientGroups","props","getPatientGroup","that","getAPI","interpolate","PATIENT_GROUPS","active_practiceId","data","setState","patientGroup","loading","state","this","record","reqData","is_active","postAPI","coloumns","title","dataIndex","render","text","onConfirm","deleteObject","okText","cancelText","fields","label","required","type","INPUT_FIELD","formProp","successFn","console","log","displayMessage","SUCCESS_MSG_TYPE","errorFn","action","method","beforeSubmit","TestFormLayout","create","DynamicFieldsForm","CustomizedTable","dataSource","columns","React","Component","Meta","Search","MonthPicker","id","PatientSelection","togglePatientGroupEditing","option","showPatientGroupModal","changeSelectedPatientGroup","e","selectedPatientGroup","target","currentPage","getMorePatient","addNewOptionField","form","nextKeys","getFieldValue","concat","setFieldsValue","keys","removeNewOptionField","k","length","filter","handleChangeOption","index","prevState","selectedOption","custm_col","AdvanceSearchPatient","preventDefault","validateFields","err","values","dob","moment","format","dob_gte","dob_lte","dob_month","patientData","loadAdvanceSearchPatient","page","advancedSearch","advanceLoading","current","patientListData","results","morePatientList","next","ADVANCED_SEARCH_PATIENT","morePatients","advanced_option","ADVANCED_SEARCH","sourceList","getPatientListData","bind","searchPatient","getSources","SOURCE","filteredData","sort","a","b","patient_count","PATIENTS_LIST","totalPatients","count","searchvalue","searchString","apiParams","page_size","SEARCH_PATIENT","params","parseInt","gender","age","group","advancedOptionShow","getFieldDecorator","initialValue","selectedOptionKeys","mapKeys","chooseOption","map","gutter","span","style","width","defaultValue","CHOOSE","size","onChange","Option","item","FormItems","onClick","margin","className","color","activePracticePermissions","ViewPatient","onSubmit","layout","display","Item","icon","htmlType","advancedOption","placeholder","enterButton","textAlign","height","overflow","padding","Group","buttonStyle","Button","backgroundColor","border","float","name","borderLeft","spinning","patient","PatientCard","showMobile","PatientPhoneNumber","showEmail","PatientEmailId","setCurrentPatient","InfiniteFeedLoaderButton","loaderFunction","hidden","visible","footer","onCancel","PermissionDenied","xs","sm","md","lg","xl","xxl","paddingBottom","avatar","image","src","makeFileURL","user","first_name","charAt","description","mobile","hideMobile","email","hideEmail","custom_id","toUpperCase","HAS_AGE","HAS_DOB","HAS_AADHAR_ID","HAS_EMAIL","GENDER_OPTION","HAS_GENDER","HAS_PINCODE","HAS_STREET","BLOOD_GROUPS","REFERED_BY_AGENT","PatientNotes","loadPatientCallNotes","callNotesLoading","patientId","PATIENT_CALL_NOTES","callNotes","notes","loadPatientNotes","PATIENT_NOTES","defaultValues","Form","renderItem","staff","created_at","remarks","timestamp","MedicalMembership","redirect","currentPatient","Membership","loadMembership","MEMBERSHIP_API","SELECT_FIELD","options","MembershipItem","initilValue","DATE_PICKER","loadProfile","loadMedicalMembership","formChange","PATIENTS_MEMBERSHIP_API","AddOrEditAgent","agentRoles","loadAgentRoles","AGENT_ROLES","roles","SINGLE_IMAGE_UPLOAD_FIELD","PATIENT_PROFILE","PatientProfile","add","addAgent","agentModalVisible","addAgentModalClosed","patientProfile","medicalHistory","hide","newProps","refreshHeader","refreshWallet","ERROR_MSG_TYPE","MEDICAL_MEMBERSHIP_CANCEL_API","shape","is_agent","is_approved","referer_code","EditPatient","to","block","fontSize","href","onClickHandler","extra","deleteMembership","membership_code","medical_from","medical_to","PatientRow","role","role_data","is_age","diff","on_dialysis","referer_data","referer","secondary_mobile_no","landline_no","address","locality","city_data","state_data","country_data","pincode","medical_history_data","intToRGB","hashCode","patient_group_data","onOk","marginBottom","confirm","EditPatientDetails","loadMedicalHistory","MEDICAL_HISTORY","history","setFormParams","handleSubmit","file_enable","file_count","medical_history","patient_group","anniversary","subtract","custom_id_pre","file","response","image_path","replace","removeEmpty","putAPI","match","toggleWebCam","webCamState","getImageandUpload","fieldKey","FormData","append","FILE_UPLOAD_BASE64","onChangeValue","getState","getCity","onChangeCheckbox","changeFormType","selectedFormType","handleRelation","relation_text","handleNumberChange","number","numberValidation","membership","countrylist","stateList","cityList","country","BLOOD_GROUP_CONFIG_PARAM","PATIENT_SOURCE_CONFIG_PARAM","SMS_LANGUAGE_CONFIG_PARAM","FAMILY_RELATION_CONFIG_PARAM","GENDER_CONFIG_PARAM","changeRedirect","getCountry","loadPatientData","getPatientMembership","loadConfigParameters","COUNTRY","STATE","CITY","patientDetails","redirectVar","okType","patientDelete","push","formItemLayout","labelCol","wrapperCol","historyOption","forEach","historyItem","patientGroupOption","patientGroupItem","membershipOption","membershipItem","singleUploadprops","makeURL","FILE_UPLOAD_API","headers","authorization","info","status","fileList","message","success","error","goBack","placement","trigger","content","disabled","onDeletePatient","valuePropName","maxWidth","Math","random","WebCamField","getScreenShot","rules","validateStatus","help","errorMsg","source","showSearch","optionFilterProp","is_superuser","language","activePracticeData","aadhar_id","colon","PATIENT_AGE","min","max","blood_group","family_relation","RELATION","attendee","city","mode","paddingTop","defaultChecked","isNaN","Appointment","appointments","practice_doctors","procedure_category","treatmentNotes","practice_staff","editAppointment","deleteAppointment","loadProcedureCategory","loadDoctors","loadTreatmentNotes","appointmentid","loadAppointment","loadAllAppointments","APPOINTMENT_API","total","loadMoreAppointment","practice","pagination","ALL_APPOINTMENT_API","PROCEDURE_CATEGORY","PRACTICESTAFF","usersdata","DOCTORS_ROLE","doctor","EMR_TREATMENTNOTES","doctors","treatmentNote","schedule_at","slot","category","category_data","checked","notify_via_email","notify_via_sms","EditAppointment","AddAppointment","allowAllPermissions","scroll","x","Sider","PatientSider","onHotKeyInner","keyNm","keyName","INNER_KEYS_HOTKEYS","onKeyDown","collapsible","collapsed","hideSidePanel","minHeight","background","ItemGroup","PatientAppointments","PatientCommunications","PatientBookings","PatientVitalSigns","PatientClinicalNotes","PatientTreatmentPlans","PatientCompletedProcedure","PatientFiles","PatientPrescriptions","PatientTimeline","PatientLabOrders","PatientInvoices","PatientReturns","PatientPayments","PatientLedger","_extends","Object","assign","i","arguments","prototype","hasOwnProperty","call","apply","_defineProperty","obj","defineProperty","enumerable","configurable","writable","__rest","s","t","p","indexOf","getOwnPropertySymbols","propertyIsEnumerable","_ref","_classNames","_classNames2","getPrefixCls","customizePrefixCls","prefixCls","_props$color","children","pending","dot","restProps","itemClassName","dotClassName","borderColor","test","undefined","defaultProps","position","_typeof","Symbol","iterator","constructor","_toConsumableArray","arr","Array","isArray","arr2","_arrayWithoutHoles","iter","toString","from","_iterableToArray","TypeError","_nonIterableSpread","_defineProperties","descriptor","_possibleConstructorReturn","self","ReferenceError","_assertThisInitialized","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","_setPrototypeOf","_React$Component","Timeline","_this","instance","Constructor","_classCallCheck","renderTimeline","_a","_a$pending","pendingDot","reverse","pendingNode","classString","pendingItem","timeLineItems","toArray","getPositionCls","ele","idx","truthyItems","itemsCount","lastCls","items","pendingClass","readyClass","protoProps","staticProps","subClass","superClass","_inherits","Steps","renderSteps","iconPrefix","icons","finish","Step","propTypes","checkboxOption","changeFilters","filterParams","selectedFiltersIntermediate","checkAllFilters","loadTimeline","onCheckAllFiltersChange","queryParams","practice_id","showAllClinic","PATIENT_TIMELINE_API","lastDate","timelineData","checkList","sort_date","date","allCheckList","onCheckAllTimelineCard","checkedTimelineCards","indeterminate","checkAll","toggleTimelineCheckbox","returnObj","checkedList","keysList","flag","printCaseSheet","msg","startLoadingMessage","reqObj","timeline","PATIENT_TIMELINE_PDF","stopLoadingMessage","window","open","BACKEND_BASE_URL","report","updateFormValue","mailModalOpen","visibleMail","mailModalClose","sendCaseSheet","mail_to","_","sendMailToPatient","top","backgroundImage","progressDot","direction","hoverable","bodyStyle","chief_complaints","split","CUSTOM_STRING_SEPERATOR","observations","investigations","diagnosis","timelineClinicalNote","practice_data","doctor_data","calendar_colour","paddingLeft","timelineAppointmentCard","file_type","alt","timelineFilesCard","procedure","proc","inventory","invoice_id","payments_data","timelineInvoiceCard","temperature","temperature_part","blood_pressure_up","blood_pressure_down","timelineVitalSignCard","drugs","drug","timelinePrescriptionCard","payment_id","timelinePaymentCard","offsetTop","marginLeft","borderRadius","dateTimeStamp","treatment_plans","timelineProcedureCard","timelineTreatmentPlanCard","timelineItem","StyleInjector","_Component","componentDidMount","css","document","head","querySelector","node","createElement","textContent","appendChild","appendStyle","componentWillUnmount","getElementById","parentNode","removeChild","lightboxStyles","imageBackgroundColor","fill","viewBox","xmlns","d","zoomed","toggleZoom","toggleRotate","onClose","enableDownload","enableZoom","enableRotate","download","Image","_temp","_len","args","_key","handleOnLoad","handleOnContextMenu","event","contextMenu","_props","handleDoubleClick","onLoad","onDoubleClick","onContextMenu","Lightbox","move","y","moveStart","rotationDeg","handleKeyDown","keyCode","getCoordinatesIfOverImg","point","changedTouches","dim","contentEl","getBoundingClientRect","clientX","left","clientY","handleMouseDownOrTouchStart","touches","coords","prev","handleMouseMoveOrTouchMove","handleMouseUpOrTouchEnd","addEventListener","removeEventListener","_this2","medium","large","hideDownload","hideZoom","showRotate","_props$imageBackgroun","_state","onMouseDown","onMouseUp","onMouseMove","onTouchStart","onTouchEnd","onTouchMove","ref","el","transform","WebkitTransform","MsTransform","_default","modalOpen","toggleModal","small","smallSrcSet","cursor","maxHeight","srcSet","loadMailedFiles","files","loadMoreFiles","mailed","PATIENT_MAILEDFILES","filterTags","filterSearchTag","loadData","showModal","filesData","handleCancel","togglePDFModal","path","showPDFFile","sendFiles","handleVisibleChange","visibleTag","tags","showAddModal","selectedFiles","selectedTags","showAddMedicalModel","medicalCertificate","mailedfiles","loadMedicalCertificate","loadTags","lastPatient","newDate","newData","tag","notag","PATIENT_FILES","EMR_FILETAGS","loadMoreCertificate","MEDICAL_CERTIFICATE_API","ALL_MEDICAL_CERITICATE_API","selected","file_tags","MEDICAL_CERTIFICATE_PDF","PatientFilesForm","MULTI_SELECT_FIELD","formProps","triggerAddModal","tagsMenu","boxShadow","listStyle","paddingInlineStart","tagsCompleteToggle","filesWithTags","borderStyle","defaultFields","overlay","onVisibleChange","marginRight","togglePatientListModal","paddingRight","borderRight","backgroundSize","filesCompleteToggle","fildFileExtension","PDF_FILE_EXTENSION","deleteFile","patient_data","grid","column","actions","loadPDF","deleteMedicalCertificate","excused_duty_from","excused_duty_to","centered","frameborder","TabPane","tabLists","tabResourcesAPI","EMR_COMPLAINTS","EMR_OBSERVATIONS","EMR_DIAGNOSES","EMR_INVESTIGATIONS","EMR_MEDICATION","AddClinicNotesDynamic","setInitialData","initialData","editClinicNotes","str","setTimeout","addValues","medication","loadRequiredResources","API","newResources","resourceList","filteredResourceList","filterStrings","tab","remove","changeValues","prevsOption","resourceAddModal","searchValues","searchStrings","filterValues","filteredItemOfGivenType","toLowerCase","includes","validateFieldsAndScroll","Complaints","field","join","Investigations","Diagnoses","Notes","Observations","selectedDoctor","selectedDate","isValid","PATIENT_CLINIC_NOTES_API","changeTab","selectDoctor","practiceDoctors","selectedTab","keysObject","ResourceAddForm","validateTrigger","whitespace","onFocus","offsetBottom","allowClear","tabList","Modal","PatientClinicNotes","sendPatientMail","clinicalNotes","patientName","clinicId","sendMail","CLINIC_NOTES_PDF","clinicNotes","loadClinicNotes","editClinicNotesData","exact","route","clinicNote","marginTop","deleteClinicNote","Divider","Header","PatientHeader","textSize","ghost","slice","lineHeight","theme","twoToneColor","toggleShowAllClinic","checkedChildren","unCheckedChildren","pendingAmount","zIndex","grand_total","valueStyle","fontWeight","precision","walletAmount","non_refundable","tile","refundable_amount","prefix","patientSettingMenu","AddPatient","maskClosable","closable","listModalVisible","right","PatientCommunicationSetting","onChanged","medicine_till","follow_up_date","saving","parient_communication_history","loadCommunication","PATIENT_COMMUNICATION_HISTORY_API","user_sms","sms_enabled","SMS_ENABLE","isSMS","email_enabled","EMAIL_ENABLE","isEmail","bithday_sms_enabled","BIRTHDAY_SMS_ENABLE","isBirth_SMS","sms_enable","email_enable","birthday_sms_email","dashed","PatientCommunication","AddorEditPatientVitalSigns","vitalSign","editVitalSign","editformProp","pulse","NUMBER_FIELD","follow","weight","resp_rate","creatinine","haemoglobin","urea","uric_acid","VITAL_SIGNS_API","PatientVitalSign","deleteVitalSign","loadVitalsigns","editObject","reportManualId","VITAL_SIGN_PDF","vitalsign","bottom","dataKey","tickFormatter","tickCount","domain","dataMin","abs","dataMax","toFixed","strokeDasharray","labelFormatter","stroke","fillOpacity","strokeWidth","verticalAlign","x1","y1","x2","y2","offset","stopColor","stopOpacity","loadInvoices","presc","VitalSignFooter","AddorEditDynamicCompletedTreatmentPlans","calculateItem","_id","getFieldsValue","tableFormValues","addNotes","removeTreatment","randId","default_notes","editId","editTreatmentPlan","quantity","cost","discount","sendingItem","TREATMENTPLANS_API","url","loadProcedures","loadingProcedures","tableValues","treatment","filteredItems","consumeRow","TextArea","bordered","bottomPoint","overflowX","itemLayout","PatientCompletedProcedures","treatmentId","TREATMENTPLANS_PDF","treatmentPlans","completedTreatmentPlans","incompletedTreatmentPlans","productMargin","loadTreatmentPlans","editTreatmentPlanData","loadProductMargin","PRODUCT_MARGIN","incompleted","treatmentplan","is_completed","complete","editFields","deleteTreatmentPlans","treatmentFooter","PrescriptionTemplate","addInstructions","changeDurationUnits","removeDrug","formDrugList","removeLabs","addedLabs","formLabList","addLabs","WARNING_MSG_TYPE","addTemplate","prevLabs","prevAddedLabs","labs","lab","prevDrugs","prevAddedDrugs","addedDrugs","advice_data","removeTemplates","formTemplateList","dosage","does","duration_type","duration_unit","duration","frequency","does_frequency","instruction","food_time","after_food","before_food","advice","drugIitem","prescriptionTemplate","PRESCRIPTION_TEMPLATE","handleAddFields","loadDrugList","drugList","labList","loadPrescriptionTemplate","deletePrescriptionTemplate","loadLabList","LABTEST_API","item_type","DRUG","Drugs","item_name","INVENTORY_ITEM_API","formItemLayoutWithOutLabel","formItems","drugTableColumns","DOSE_REQUIRED","DURATIONS_UNIT","timing","instructions","labTablecolums","container","addDrug","maintain_inventory","renderRoute","AddorEditDynamicPatientPrescriptions","drugItem","PRESCRIPTIONS_API","editPrescription","prescriptionId","prescription","drug_catalog","loadPrescriptions","loadDrugCatalog","editPrescriptionData","deletePrescriptions","nextPrescriptionPage","PRESCRIPTION_PDF","DRUG_CATALOG","strength","prescriptonFooter","AddorEditDynamicTreatmentPlans","selectedTreatments","submitCompleteTreatment","treatmentKeys","treatmentObj","TREATMENTPLANS_MARK_COMPLETE_API","treatmentCompleteToggle","AddPatientLabOrders","removeTests","lab_test","loadLabs","coloums","payments","Text","tableFormFields","batch","Addinvoicedynamic","selectedDefaultDate","loadEditInvoiceData","SINGLE_INVOICE_API","invoice","procedure_data","PROCEDURES","changeNetPrice","stocks","itemBatches","stock_quantity","batch_number","unit","batchObj","selectedBatch","inventory_item_data","INVENTORY","selectOption","offers","newTableFormValues","formValue","unit_cost","taxes","tax","retail_without_tax","membershipDiscount","medical_membership","benefit","finalTableFormValues","dateValue","selectBatch","addPrescription","drug_item","selectedPrescriptions","promo_code","promoCode","discount_type","saveLoading","CREATE_OR_EDIT_INVOICES","addItemThroughQR","loadingQr","qrSplitted","SEARCH_THROUGH_QR","randomId","row","item_type_stock","item_stock","stock","qrValue","qr","setQrValue","searchItem","loadInventoryItemList","PRESCRIPTIONS","setFields","newTableValues","tableObj","totalTaxAmount","initialDiscount","initialDiscountType","offer","taxid","taxes_list","taxObj","tax_value","totalWithoutTaxWithDiscount","total_unit_cost","retail_price","checkPromoCode","applyPromoCodeDiscounts","discountValue","valueToSet","discountApplied","discountAppliedOnProduct","loadLoyaltyDiscount","OFFERS","onChangeOption","tempArr","onChangeOffer","selectedOffer","loyaltyDiscount","onchangeDiscountSimple","retailPrice","enterPromoCode","calculateGrandTotalWithoutDiscount","grandTotal","promoCodeCheckLoading","amount","CHECK_PROMO_CODE","appliedPromoCodeDiscount","removePromoCode","classType","maxQuantityforConsume","tempValues","loadTaxes","loadingInventory","drugItems","paramsApi","UNPAID_PRESCRIPTIONS","TAXES","expiry_date","code","addonAfter","CURRENCY_TYPE","align","tip","onSearch","total_quantity","previous","reduce","parseFloat","AddReturnInvoice","bank","return_mode","editInvoice","staff_data","with_tax","return_with_tax","cash_return","advance_value","returnCashAvailable","procedure_inv","inventory_inv","INVOICE_RETURN_API","onChangeHandle","calculateReturnCashAvailable","totalAmountPaid","pay_amount","pendingPayment","worthOfReturningItems","taxAllowed","units","payment","InvoiceReturnModal","handleSubmitReturnInvoice","CANCELINVOICE_VERIFY_OTP","returnIncoiceVisible","returnInvoiceData","returnInvoiceClose","otpSent","CANCELINVOICE_RESENT_OTP","sendOTP","EditReturnModal","handleSubmitEditInvoice","editIncoiceVisible","editInvoiceData","editInvoiceClose","CancelReturnModal","handleSubmitCancelInvoice","otpField","cancelIncoiceVisible","deleteInvoice","cancel_note","OTP_DELAY_TIME","is_cancelled","SINGLE_INVOICES_API","cancelInvoiceClose","REQUIRED_FIELD_MESSAGE","INVOICE_PDF_API","returnModelOpen","CANCELINVOICE_GENERATE_OTP","invoiceId","cancelModalOpen","created_time","paymentId","invoices","loadMoreInvoice","summary","INVOICES_API","procedures","taxesdata","AddInvoicedynamic","banner","showIcon","InvoiceCard","invoiceFooter","tableObjects","reservation","medicinesPackages","reservation_data","medicines","final_price","price","mapper","bed_package","seat_type","editModelOpen","suffix","discount_value","AddPaymentForm","loadEditPyament","editPayment","addedInvoicesId","addedInvoice","totalPayingAmount","inv","invoice_data","pay_amount_wallet","calculateInvoicePayments","setPaymentAmount","addedInvoiceId","loadAvailableAdvance","AVAILABLE_ADVANCE","availableAdvance","loadPaymentModes","PAYMENT_MODES","PAYMENT_OFFLINE_MODE","paymentModeOffline","paymentModes","selectedPaymentMode","invoicesToLoad","invoiceLoading","invoicesList","addInvoiceToPayments","is_pending","foundInvoice","invoicePayments","removeInvoiceToPayments","payable","totalPayingFromAdvanceAmount","invoicePayableAmount","advanceToBeSent","totalPayableAmount","setPaymentFromAdvanceAmount","changeSelectedPaymentMode","changeNotes","selectDate","newPayment","is_advance","totalAmountPayingFromAdvance","consumedInvoices","availableAdvancePayments","maxConsumeAmount","receivedPayIdFromRazorPay","BULK_PAYMENT_API","invoiceArray","location","search","pairValueArray","substr","patientObj","RAZORPAY_KEY","handler","razorpay_payment_id","ACCEPT_PAYMENT","detail","Razorpay","borderBottom","max_allowed","step","paymentHandler","bed_package_price","EditPaymentModal","handleSubmitEditPayment","editPaymentVisible","editPaymentData","editPaymentClose","cancelPaymentVisible","CancelPaymentModal","handleSubmitCancelPayment","deletePayment","SINGLE_PAYMENT_API","cancelPaymentClose","loadPayments","PATIENT_PAYMENTS_API","PAYMENT_PDF","paymentmodes","PaymentCard","advancePay","PaymentFooter","rowKey","ReturnInvoices","RETURN_INVOICE_PDF_API","cancelReturnIncoiceVisible","editReturnInvoice","return_id","returnInvoiceId","cancelReturnInvoiceClose","handleSubmitCancelReturnInvoice","deleteReturnInvoice","returnInvoices","loadReturnInvoices","loadMoreReturnInvoice","SINGLE_RETURN_API","return_value","patientInvoiceDetailsInString","invoiceObj","invoiceDetailsString","trim","patientPaymentDetailsInString","paymentObj","paymentDetailsString","patientReturnInvoiceDetailsInString","payObj","PatientLedgers","loadPatientLedger","loadingLedger","PATIENT_LEDGER","ledgerData","balance","totalCredit","totalDebit","dataRow","ledgerEntry","ledger_type","type_id","details","credit","debit","return","return_pay","ledger","selectedList","PatientMerge","searchPatientString","removePatient","handlePatientSelect","mergePatient","patient_from","patient_to","MERGE_PATIENTS","defaultActiveFirstOption","showArrow","filterOption","handleChange","onSelect","PatientRequiredNoticeCard","PatientMedicalCertificate","handleCheck","excused_duty_checked","handleLighDutyCheck","fit_light_duty_checked","handleAttendanceCheck","attendance_checked","handleChangeStart","startDate","timeString","proof_attendance_from","excused_duty","fit_light_duty","proof_attendance","fit_light_duty_from","fit_light_duty_to","proof_attendance_date","proof_attendance_to","valid_court","invalid_court","no_mention","endDate","Date","days","handleChangeEnd","radioOption","NOTES","use12Hours","BedBookingForm","loadPackages","BED_PACKAGES","packages","loadDiseases","DISEASE_LIST","diseases","patientList","ptr","checkBedStatus","handleRoomType","calculateTotalAmount","from_date","to_date","pkgObj","no_of_days","CHECK_SEAT_AVAILABILITY","availabilitySeatTatkal","TATKAL","availabilitySeatNormal","NORMAL","start","end","paid","total_price","total_tax","rest_diseases","report_upload","BOOK_SEAT","handleClick","prevSate","payAmount","bedPkg","medicinePkg","total_medicine_price","normal_price","normal_tax_value","price_with_tax","tatkal_price","tatkal_tax_value","medicinePackage","medicineItem","choosePkg","handleMedicineSelect","changeDiscount","newTableValue","addNewFields","loadMedicinePackages","MEDICINE_PACKAGES","BOOKING_TYPE","is_or_not","available","room","input","Content","BookingHome","loadBedBookingReport","bedBookingReports","nextReport","BED_BOOKING_REPORTS","patients","bedBooking","hideReport","PatientHome","loadPatientPendingAmount","PATIENT_PENDING_AMOUNT","loadPatientWallet","AGENT_WALLET","getCommonSettings","nextProps","nextContext","currentPathLocation","foundFlag","ROUTES_TO_HIDE_PATIENT_SIDE_PANEL","matchPath","pathname","strict","redirectUrl","urlArray","splice","saveCommonSettings","MergePatients","WebAdmin","PatientWalletLedger","makeCSVString","dataArray","printColumn","line","downloadCSV","fileName","cCode","fName","bArr","charCodeAt","blob","Blob","Uint8Array","navigator","msSaveBlob","link","URL","createObjectURL","setAttribute","visibility","body","click","revokeObjectURL","addPDFHeader","pdf","addPDFFooter","setFontSize","getColumnSearchProps","filterDropdown","setSelectedKeys","selectedKeys","clearFilters","searchInput","onPressEnter","handleSearch","handleReset","filterIcon","filtered","onFilter","onFilterDropdownVisibleChange","select","highlightStyle","searchWords","searchText","autoEscape","textToHighlight","excelExport","pdfExport","excelColumns","hideExport","dataArrayForExcel","dataObjectToPush","export","jsPDF","rows","autoTable","startY","autoTableEndPosY","headerStyle","bodyStyles","save","exportToPDF","exportToExcel","pageSizeOptions","showSizeChanger","showQuickJumper","showTotal","range","startLoading","startMakingExtraLabels","extraLoadingLabel","Switch","saveSwitch","rcSwitch","renderSwitch","_this$props","_this$props$className","classes","loadingIcon","insertExtraNode","focus","blur","__ANT_SWITCH","nextPage","selectedStartDate","startOf","selectedEndDate","endOf","agents","selectedAgents","WALLET_LEDGER","loadSumData","ledgerDetails","WALLET_LEDGER_SUM","changeExpenseFilters","loadAgents","MY_AGENTS","agent","delete"],"mappings":"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","file":"static/js/12.bb46c330.chunk.js","sourcesContent":["var baseAssignValue = require('./_baseAssignValue'),\n    baseForOwn = require('./_baseForOwn'),\n    baseIteratee = require('./_baseIteratee');\n/**\n * The opposite of `_.mapValues`; this method creates an object with the\n * same values as `object` and keys generated by running each own enumerable\n * string keyed property of `object` thru `iteratee`. The iteratee is invoked\n * with three arguments: (value, key, object).\n *\n * @static\n * @memberOf _\n * @since 3.8.0\n * @category Object\n * @param {Object} object The object to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Object} Returns the new mapped object.\n * @see _.mapValues\n * @example\n *\n * _.mapKeys({ 'a': 1, 'b': 2 }, function(value, key) {\n *   return key + value;\n * });\n * // => { 'a1': 1, 'b2': 2 }\n */\n\n\nfunction mapKeys(object, iteratee) {\n  var result = {};\n  iteratee = baseIteratee(iteratee, 3);\n  baseForOwn(object, function (value, key, object) {\n    baseAssignValue(result, iteratee(value, key, object), value);\n  });\n  return result;\n}\n\nmodule.exports = mapKeys;","import React from \"react\";\nimport {Card, Form, Popconfirm, Row, Divider} from 'antd';\nimport {displayMessage, getAPI, interpolate, postAPI} from \"../../../utils/common\";\nimport {OFFERS, PATIENT_GROUPS} from \"../../../constants/api\";\nimport CustomizedTable from \"../../common/CustomizedTable\";\nimport {INPUT_FIELD, SUCCESS_MSG_TYPE} from \"../../../constants/dataKeys\";\nimport DynamicFieldsForm from \"../../common/DynamicFieldsForm\";\n\nexport default class PatientGroups extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            patientGroup: [],\n            loading: true\n        }\n    }\n\n    componentDidMount() {\n        this.getPatientGroup();\n    }\n\n    getPatientGroup = () => {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                patientGroup: data,\n                loading: false\n            });\n        };\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            })\n\n        };\n        getAPI(interpolate(PATIENT_GROUPS, [this.props.active_practiceId]), successFn, errorFn);\n    }\n\n    deleteObject(record) {\n        let that = this;\n        let reqData = record;\n        reqData.is_active = false;\n        let successFn = function (data) {\n            that.getPatientGroup();\n        }\n        let errorFn = function () {\n        }\n        postAPI(interpolate(PATIENT_GROUPS, [this.props.active_practiceId]), reqData, successFn, errorFn);\n    }\n\n    render() {\n        let that = this;\n        const coloumns = [{\n            title: 'Group Name',\n            dataIndex: 'name',\n            key: 'name'\n        }, {\n            title: 'Patient Count',\n            dataIndex: 'patient_count',\n            key: 'patient_count'\n        }, {\n            title: 'Action',\n            key: 'action',\n            render: (text, record) => (\n                <Popconfirm title=\"Are you sure delete this prescription?\" onConfirm={() => that.deleteObject(record)}\n                            okText=\"Yes\" cancelText=\"No\">\n                    <a>\n                        Delete\n                    </a>\n                </Popconfirm>\n            ),\n        }];\n        const fields = [{\n            label: \"Group Name\",\n            key: \"name\",\n            required: true,\n            type: INPUT_FIELD\n        }]\n        const formProp = {\n            successFn: function (data) {\n                console.log(data);\n                displayMessage(SUCCESS_MSG_TYPE, \"success\")\n                that.getPatientGroup()\n\n            },\n            errorFn: function () {\n\n            },\n            action: interpolate(PATIENT_GROUPS, [this.props.active_practiceId]),\n            method: \"post\",\n            beforeSubmit: function (data) {\n                console.log(data)\n            }\n        }\n        const TestFormLayout = Form.create()(DynamicFieldsForm);\n        return <Row>\n            <TestFormLayout formProp={formProp}\n                            title={\"Patient Groups\"}\n                            fields={fields} {...this.props}/>\n            <Divider/>\n            <CustomizedTable dataSource={this.state.patientGroup} loading={this.state.loading} columns={coloumns}/>\n        </Row>\n    }\n}\n","import React from \"react\";\nimport {\n    Avatar, Input, Card, Col, Icon, InputNumber, Radio, Row, Button, Spin, Modal, Tag,\n    DatePicker, Select, Form, Divider\n} from \"antd\";\nimport {getAPI, interpolate, makeFileURL, postAPI} from \"../../utils/common\";\nimport {\n    PATIENT_GROUPS,\n    SEARCH_PATIENT,\n    PATIENTS_LIST,\n    ADVANCED_SEARCH_PATIENT, SOURCE\n} from \"../../constants/api\";\nimport InfiniteFeedLoaderButton from \"../common/InfiniteFeedLoaderButton\";\nimport PatientGroups from \"./patientGroups/PatientGroups\";\nimport {hideEmail, hideMobile} from \"../../utils/permissionUtils\";\nimport {\n    ADVANCED_SEARCH,\n    BLOOD_GROUPS,\n    HAS_AADHAR_ID,\n    HAS_AGE,\n    HAS_DOB,\n    HAS_EMAIL,\n    HAS_GENDER, HAS_PINCODE, HAS_STREET, REFERED_BY_AGENT, GENDER_OPTION\n} from \"../../constants/hardData\";\nimport {CHOOSE, GENDER} from \"../../constants/dataKeys\";\nimport moment from \"moment\";\nimport filter from \"lodash/filter\";\nimport mapKeys from \"lodash/mapKeys\"\nimport PermissionDenied from \"../common/errors/PermissionDenied\";\n\nconst {Meta} = Card;\nconst Search = Input.Search;\nconst {MonthPicker} = DatePicker;\nlet id = 1;\n\nclass PatientSelection extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            patientListData: [],\n            patientGroup: [],\n            morePatients: null,\n            loading: true,\n            selectedPatientGroup: 'all',\n            advanced_option: ADVANCED_SEARCH,\n            selectedOption: {},\n            // keys:1,\n            sourceList: [],\n            custm_col: 8,\n            advanceLoading: false,\n        };\n        this.getPatientListData = this.getPatientListData.bind(this);\n        this.searchPatient = this.searchPatient.bind(this);\n        this.getMorePatient = this.getMorePatient.bind(this);\n        this.getSources = this.getSources.bind(this);\n    }\n\n    componentDidMount() {\n        this.getPatientListData();\n        this.getPatientGroup();\n        this.getSources();\n    }\n\n    getSources() {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                sourceList: data,\n            })\n        };\n        let errorFun = function () {\n\n        };\n        getAPI(SOURCE, successFn, errorFun);\n    }\n\n\n    getPatientGroup() {\n        let that = this;\n        let successFn = function (data) {\n            let filteredData = data.sort(function (a, b) {\n                return b.patient_count - a.patient_count\n            })\n            that.setState({\n                patientGroup: filteredData,\n            });\n        };\n        let errorFn = function () {\n            that.setState({})\n\n        };\n        getAPI(interpolate(PATIENT_GROUPS, [this.props.active_practiceId]), successFn, errorFn);\n    }\n\n    getPatientListData() {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                patientListData: data.results,\n                morePatients: data.next,\n                currentPage: data.current,\n                totalPatients: data.count,\n                loading: false,\n                // advancedOptionShow: false,\n            })\n        };\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            })\n\n        };\n        getAPI(PATIENTS_LIST, successFn, errorFn);\n    }\n\n    searchPatient(value, page = 1) {\n\n        let that = this;\n        that.setState({\n            searchvalue: true,\n            searchString: value\n        });\n        let successFn = function (data) {\n            that.setState(function (prevState) {\n                if (prevState.searchString == value)\n                    if (data.current > 1) {\n                        return {\n                            patientListData: [...prevState.patientListData, ...data.results],\n                            morePatients: data.next,\n                            currentPage: data.current,\n                        }\n                    } else {\n                        return {\n                            patientListData: [...data.results],\n                            morePatients: data.next,\n                            currentPage: data.current,\n                            loading: false\n                        }\n                    }\n            })\n\n        };\n        let errorFn = function () {\n\n        };\n        let apiParams = {\n            page: page,\n            page_size: 20\n        };\n        if (value) {\n            getAPI(interpolate(SEARCH_PATIENT, [value]), successFn, errorFn, apiParams);\n        } else {\n            this.getPatientListData();\n        }\n    }\n\n    getMorePatient() {\n        let that = this;\n        let current = this.state.currentPage;\n\n        let successFn = function (data) {\n            if (data.current == current + 1)\n                that.setState(function (prevState) {\n                    if (data.current > 1)\n                        return {\n                            patientListData: [...prevState.patientListData, ...data.results],\n                            morePatients: data.next,\n                            currentPage: data.current,\n                        }\n                    else\n                        return {\n                            patientListData: [...data.results],\n                            morePatients: data.next,\n                            currentPage: data.current,\n                            loading: false\n                        }\n                })\n        }\n        let errorFn = function () {\n\n        }\n        let params = {};\n        if (current) {\n            params.page = parseInt(current) + 1;\n        } else {\n            this.setState({\n                loading: true\n            })\n        }\n        let patientGroup = this.state.selectedPatientGroup;\n        if (patientGroup != 'all') {\n            if (patientGroup == 'smart_a' || patientGroup == 'smart_b' || patientGroup == 'smart_c' || patientGroup == 'smart_d' || patientGroup == 'smart_e' || patientGroup == 'smart_f') {\n                switch (patientGroup) {\n                    case 'smart_a':\n                        params.gender = 'male';\n                        break;\n                    case 'smart_b':\n                        params.gender = 'female';\n                        break;\n                    case 'smart_c':\n                        params.gender = 'female';\n                        params.age = 30;\n                        params.type = 'gt';\n                        break;\n                    case 'smart_d':\n                        params.gender = 'female';\n                        params.age = 30;\n                        params.type = 'lt';\n                        break;\n                    case 'smart_e':\n                        params.gender = 'male';\n                        params.age = 30;\n                        params.type = 'gt';\n                        break;\n                    case 'smart_f':\n                        params.gender = 'male';\n                        params.age = 30;\n                        params.type = 'lt';\n                        break;\n                }\n            } else {\n                params.group = this.state.selectedPatientGroup\n            }\n\n        }\n        getAPI(PATIENTS_LIST, successFn, errorFn, {...params});\n    }\n\n    togglePatientGroupEditing = (option) => {\n        this.setState({\n            showPatientGroupModal: !!option\n        });\n        if (!option) {\n            this.getPatientGroup();\n        }\n    }\n\n    changeSelectedPatientGroup = (e) => {\n        let that = this;\n        this.setState({\n            selectedPatientGroup: e.target.value,\n            currentPage: null\n        }, function () {\n            that.getMorePatient();\n        })\n    };\n\n    advancedOption(value) {\n        // console.log(\"value\",value)\n        let that = this;\n        this.getPatientListData();\n        this.setState({\n            advancedOptionShow: !value,\n            selectedOption: '',\n        });\n        if (value) {\n            that.props.form.setFieldsValue({\n                keys: [0],\n            });\n        }\n\n    }\n\n    addNewOptionField = () => {\n\n        const {form} = this.props;\n\n        const keys = form.getFieldValue('keys');\n        // console.log(\"form\",form,keys)\n        const nextKeys = keys.concat(id++);\n        form.setFieldsValue({\n            keys: nextKeys,\n        });\n    };\n    removeNewOptionField = (k) => {\n        const {form} = this.props;\n        const keys = form.getFieldValue('keys');\n        if (keys.length === 1) {\n            return;\n        }\n\n        form.setFieldsValue({\n            keys: keys.filter(key => key !== k),\n        });\n    };\n\n    handleChangeOption = (index, type, value) => {\n        let that = this;\n        let selectedOption = {};\n        that.setState(function (prevState) {\n            return {\n                selectedOption: {...prevState.selectedOption, [index]: value},\n                custm_col: value ? 12 : 8,\n            }\n        })\n    };\n\n    AdvanceSearchPatient = (e) => {\n        let that = this;\n        e.preventDefault();\n        let reqData = {};\n        this.props.form.validateFields((err, values) => {\n            if (!err) {\n                reqData = {\n                    ...values,\n                    dob: values.dob ? moment(values.dob).format('YYYY-MM-DD') : null,\n                    dob_gte: values.dob_gte ? moment(values.dob_gte).format('YYYY-MM-DD') : null,\n                    dob_lte: values.dob_lte ? moment(values.dob_lte).format('YYYY-MM-DD') : null,\n                    dob_month: values.dob_month ? moment(values.dob_month).format('MM') : null,\n                };\n            }\n        });\n        delete reqData.keys;\n        that.setState({\n            patientData: reqData,\n        }, function () {\n            that.loadAdvanceSearchPatient();\n        });\n\n    };\n\n    loadAdvanceSearchPatient = (page = 1) => {\n        let that = this;\n        let reqData = that.state.patientData;\n        that.setState({\n            advancedSearch: true,\n            advanceLoading: true,\n        });\n        let successFn = function (data) {\n            that.setState(function (prevState) {\n                if (data.current > 1) {\n                    return {\n                        patientListData: [...prevState.patientListData, ...data.results],\n                        morePatientList: data.next,\n                        currentPage: data.current,\n                        advanceLoading: false\n                    }\n                } else {\n                    return {\n                        patientListData: [...data.results],\n                        morePatientList: data.next,\n                        currentPage: data.current,\n                        advanceLoading: false\n                    }\n                }\n            });\n        };\n        let errorFn = function () {\n            that.setState({\n                advanceLoading: false,\n            })\n        };\n        reqData.page = page;\n        getAPI(ADVANCED_SEARCH_PATIENT, successFn, errorFn, reqData)\n\n    }\n\n    render() {\n        let that = this;\n        const {getFieldDecorator, getFieldValue} = this.props.form;\n\n        const formItemLayout = {\n            labelCol: {\n                xs: {span: 24},\n                sm: {span: 4}\n            },\n            wrapperCol: {\n                xs: {span: 24},\n                sm: {span: 20}\n            }\n        };\n        getFieldDecorator('keys', {initialValue: [0]});\n        const keys = getFieldValue('keys');\n        const selectedOptionKeys = {\n            ...mapKeys(this.state.selectedOption, function (value) {\n                return value\n            })\n        }\n        const chooseOption = keys.map((k, index) => (<Row gutter={12} key={k}>\n                <Col span={10}>\n                    <Select style={{width: '200px'}} defaultValue={CHOOSE} key={k} size={\"small\"}\n                            onChange={(value) => this.handleChangeOption(k, 'type', value)}>\n                        <Select.Option value={''}>{CHOOSE}</Select.Option>\n                        {filter(this.state.advanced_option, function (item) {\n                            if (that.state.selectedOption[k] == item.value)\n                                return true\n                            return !selectedOptionKeys[item.value]\n                        }).map((item) => <Select.Option value={item.value} key={k}>\n                            {item.label}</Select.Option>)}\n                    </Select>\n                </Col>\n                {this.state.selectedOption ?\n                    <>\n                        <Col span={8}>\n                            <FormItems k={k} selectedOption={this.state.selectedOption} form={this.props.form}\n                                       sourceList={this.state.sourceList}/>\n                        </Col>\n                        <Col span={4}>\n                            {index ? (\n                                <Button onClick={() => this.removeNewOptionField(k)} size={\"small\"} style={{margin: 5}}>\n                                    <Icon className=\"dynamic-delete-button\" type=\"minus-circle-o\"\n                                          style={{color: \"red\"}}/>\n                                </Button>\n                            ) : null}\n                            {index == keys.length - 1 && that.state.selectedOption[k] ?\n                                <Button onClick={this.addNewOptionField} size={\"small\"} style={{margin: 5}}>\n                                    <Icon className=\"dynamic-delete-button\" type=\"plus-circle-o\"/>\n                                </Button> : null}\n                        </Col>\n                    </> : null\n                }\n            </Row>\n        ));\n\n\n        return that.props.activePracticePermissions.ViewPatient ? <div>\n\n            <Row gutter={16}>\n                {this.state.advancedOptionShow ?\n                    <Form onSubmit={this.AdvanceSearchPatient} layout={'inline'}>\n                        <Row gutter={16}>\n                            <Col span={16}>\n                                {chooseOption}\n                            </Col>\n                            <Col span={4} style={{display: 'flex'}}>\n                                <Form.Item>\n                                    <Button icon=\"search\" htmlType=\"submit\" onSubmit={this.AdvanceSearchPatient}\n                                            type={\"primary\"}\n                                            style={{margin: 5}}\n                                    >Search</Button>\n                                </Form.Item>\n                                <Form.Item>\n                                    <Button style={{margin: 5}} onClick={(value) => this.advancedOption(true)}\n                                            size={\"small\"}>Basic\n                                        Search</Button>\n                                </Form.Item>\n                            </Col>\n                        </Row>\n                    </Form>\n                    : <>\n                        <Col span={12}>\n                            <Search style={{margin: 5}}\n                                    placeholder=\"Search Patient By Name / ID / Mobile No / Aadhar No\" size={\"small\"}\n                                    onChange={value => this.searchPatient(value.target.value)}\n                                    enterButton/>\n                        </Col>\n                        <Col span={12} style={{textAlign: \"center\"}}>\n                            <Button style={{margin: 5}} onClick={(value) => this.advancedOption(false)} size={\"small\"}>Advance\n                                Search</Button>\n                        </Col>\n\n                    </>}\n                <Divider style={{margin: 0}}/>\n            </Row>\n            <Row gutter={16}>\n                <Col span={5}\n                     style={{\n                         height: 'calc(100% - 55px)',\n                         overflow: 'auto',\n                         padding: '10px',\n                         // backgroundColor: '#e3e5e6',\n                         // borderRight: '1px solid #ccc'\n                     }}>\n                    <Radio.Group buttonStyle=\"solid\" defaultValue={this.state.selectedPatientGroup}\n                                 onChange={this.changeSelectedPatientGroup}>\n                        <h2>Patients</h2>\n                        <Radio.Button key={'all'} style={{width: '100%', backgroundColor: 'transparent', border: '0px'}}\n                                      value=\"all\">\n                            All Patients\n                            <Tag color=\"#87d068\" style={{float: 'right', margin: 4}}>\n                                {this.state.totalPatients ? this.state.totalPatients : 0}\n                            </Tag>\n                        </Radio.Button>\n                        {/*<Radio.Button style={{width: '100%', backgroundColor: 'transparent', border: '0px'}} value=\"b\">*/}\n                        {/*Recently Visited*/}\n                        {/*</Radio.Button>*/}\n                        {/*<Radio.Button style={{width: '100%', backgroundColor: 'transparent', border: '0px'}} value=\"c\">*/}\n                        {/*Recently Added*/}\n                        {/*</Radio.Button>*/}\n                        <p><br/></p>\n                        <h2>Groups</h2>\n                        <p><b>My Groups</b>\n                            <a style={{float: 'right'}}\n                               onClick={() => this.togglePatientGroupEditing(true)}>Manage</a></p>\n                        {this.state.patientGroup.map((group) => <Radio.Button\n                            key={group.id}\n                            style={{width: '100%', backgroundColor: 'transparent', border: '0px'}} value={group.id}>\n                            {group.name}\n                            <Tag color=\"#87d068\" style={{float: 'right', margin: 4}}>\n                                {group.patient_count}\n                            </Tag>\n                        </Radio.Button>)}\n                        <p><br/></p>\n                        <p><b>Smart Groups</b></p>\n                        <Radio.Button\n                            style={{width: '100%', backgroundColor: 'transparent', border: '0px'}} key={\"smart_a\"}\n                            value={\"smart_a\"}>\n                            All Male\n                        </Radio.Button>\n                        <Radio.Button\n                            style={{width: '100%', backgroundColor: 'transparent', border: '0px'}} key={\"smart_b\"}\n                            value={\"smart_b\"}>\n                            All Female\n                        </Radio.Button>\n                        <Radio.Button\n                            style={{width: '100%', backgroundColor: 'transparent', border: '0px'}} key={\"smart_e\"}\n                            value={\"smart_e\"}>\n                            Male Over 30\n                        </Radio.Button>\n                        <Radio.Button\n                            style={{width: '100%', backgroundColor: 'transparent', border: '0px'}} key={\"smart_c\"}\n                            value={\"smart_c\"}>\n                            Female Over 30\n                        </Radio.Button>\n                        <Radio.Button\n                            style={{width: '100%', backgroundColor: 'transparent', border: '0px'}} key={\"smart_f\"}\n                            value={\"smart_f\"}>\n                            Male Under 30\n                        </Radio.Button>\n                        <Radio.Button\n                            style={{width: '100%', backgroundColor: 'transparent', border: '0px'}} key={\"smart_d\"}\n                            value={\"smart_d\"}>\n                            Female Under 30\n                        </Radio.Button>\n                        <p><br/></p>\n                    </Radio.Group>\n                </Col>\n                <Col span={19} style={{overflow: 'scroll', borderLeft: '1px solid #ccc'}}>\n\n\n                    <Spin spinning={this.state.loading}>\n                        <Row>\n                            {this.state.patientListData.length ?\n                                this.state.patientListData.map((patient) => <PatientCard {...patient}\n                                                                                         key={patient.id}\n                                                                                         showMobile={that.props.activePracticePermissions.PatientPhoneNumber}\n                                                                                         showEmail={that.props.activePracticePermissions.PatientEmailId}\n                                                                                         setCurrentPatient={that.props.setCurrentPatient}/>) :\n                                <p style={{textAlign: 'center'}}>No Data Found</p>\n                            }\n                        </Row>\n                    </Spin>\n                    {this.state.searchvalue ? <InfiniteFeedLoaderButton loaderFunction={this.searchPatient}\n                                                                        loading={this.state.loading}\n                                                                        hidden={!this.state.morePatients}/> : (this.state.advancedSearch ?\n                        <InfiniteFeedLoaderButton loading={this.state.advanceLoading}\n                                                  loaderFunction={() => this.loadAdvanceSearchPatient(that.state.morePatientList)}\n                                                  hidden={!this.state.morePatientList}/> :\n\n                        <InfiniteFeedLoaderButton loaderFunction={this.getMorePatient}\n                                                  loading={this.state.loading}\n                                                  hidden={!this.state.morePatients}/>)\n                    }\n                </Col>\n\n                {/*<Col span={19} style={{overflow: 'scroll', borderLeft: '1px solid #ccc'}}>*/}\n                {/*    <Search placeholder=\"Search Patient By Name / ID / Mobile No / Aadhar No\"*/}\n                {/*            onChange={value => this.searchPatient(value.target.value)}*/}\n                {/*            enterButton/>*/}\n\n                {/*    <Spin spinning={this.state.loading}>*/}\n                {/*        <Row>*/}\n                {/*            {this.state.patientListData.length ?*/}\n                {/*                this.state.patientListData.map((patient) => <PatientCard {...patient}*/}\n                {/*                                                                         key={patient.id}*/}\n                {/*                                                                         showMobile={that.props.activePracticePermissions.PatientPhoneNumber}*/}\n                {/*                                                                         showEmail={that.props.activePracticePermissions.PatientEmailId}*/}\n                {/*                                                                         setCurrentPatient={that.props.setCurrentPatient}/>) :*/}\n                {/*                <p style={{textAlign: 'center'}}>No Data Found</p>*/}\n                {/*            }*/}\n                {/*        </Row>*/}\n                {/*    </Spin>*/}\n                {/*    {this.state.searchvalue ?  <InfiniteFeedLoaderButton loaderFunction={this.searchPatient}*/}\n                {/*                                                         loading={this.state.loading}*/}\n                {/*                                                         hidden={!this.state.morePatients}/> :*/}\n\n                {/*        <InfiniteFeedLoaderButton loaderFunction={this.getMorePatient}*/}\n                {/*                                  loading={this.state.loading}*/}\n                {/*                                  hidden={!this.state.morePatients}/>*/}\n                {/*    }*/}\n\n                {/*</Col>*/}\n                <Modal visible={this.state.showPatientGroupModal}\n                       footer={null}\n                       onCancel={() => this.togglePatientGroupEditing(false)}>\n                    <PatientGroups {...this.props}/>\n                </Modal>\n            </Row>\n        </div> : <PermissionDenied/>\n    }\n}\n\nexport default Form.create()(PatientSelection);\n\nfunction PatientCard(patient) {\n    return <Col xs={24} sm={24} md={12} lg={8} xl={8} xxl={6}>\n        <Card onClick={() => patient.setCurrentPatient(patient)} style={{margin: '3px', paddingBottom: \"8px\"}}>\n            <Meta avatar={(patient.image ? <Avatar src={makeFileURL(patient.image)} size={50}/> :\n                <Avatar style={{backgroundColor: '#87d068'}} size={50}>\n                    {patient.user.first_name ? patient.user.first_name.charAt(0) :\n                        <Icon type=\"user\"/>}\n                </Avatar>)}\n                  title={patient.user.first_name}\n                  description={\n                      <span>{patient.showMobile ? patient.user.mobile : hideMobile(patient.user.mobile)}<br/>{patient.showEmail ? patient.user.email : hideEmail(patient.user.email)}\n                          <br/>\n                          <span className={\"patientIdHighlight\"}>#\n                              {patient.custom_id ? patient.custom_id : patient.id}\n                              {patient.gender ? \",\" + patient.gender.charAt(0).toUpperCase() : null}\n                          </span>\n\n                      </span>}/>\n        </Card>\n    </Col>;\n}\n\nfunction FormItems(index) {\n    return (\n        <>\n            {index.selectedOption[index.k] == 'name' ?\n                <Form.Item key={index.key} label={'contains'}>\n                    {index.form.getFieldDecorator('name',)\n                    (<Input placeholder={\"patient Name\"} size={\"small\"}/>)\n                    }\n                </Form.Item> : null}\n\n            {index.selectedOption[index.k] == 'phone' ?\n                <Form.Item key={index.key} label={'contains'}>\n                    {index.form.getFieldDecorator('phone',)\n                    (<Input placeholder={\"Contact Number\"} size={\"small\"}/>)\n                    }\n                </Form.Item> : null}\n\n            {index.selectedOption[index.k] == 'age' ?\n                <Form.Item key={index.key}>\n                    {index.form.getFieldDecorator('age',)\n                    (<InputNumber placeholder={\"Patient Age\"} size={\"small\"}/>)\n                    }\n                </Form.Item> : null}\n\n            {index.selectedOption[index.k] == 'age_gte' ?\n                <Form.Item key={index.key}>\n                    {index.form.getFieldDecorator('age_gte',)\n                    (<InputNumber placeholder={\"Age more than\"} size={\"small\"}/>)\n                    }\n                </Form.Item> : null}\n\n            {index.selectedOption[index.k] == 'age_lte' ?\n                <Form.Item key={index.key}>\n                    {index.form.getFieldDecorator('age_lte',)\n                    (<InputNumber placeholder={\"Age Less than\"} size={\"small\"}/>)\n                    }\n                </Form.Item> : null}\n\n            {index.selectedOption[index.k] == 'has_age' ?\n                <Form.Item>\n                    {index.form.getFieldDecorator('has_age')\n                    (<Select style={{width: 100}} size={\"small\"}>\n                        {HAS_AGE.map((option) => <Select.Option value={option.value}>{option.label} </Select.Option>)}\n                    </Select>)\n                    }\n                </Form.Item>\n                : null}\n\n            {index.selectedOption[index.k] == 'dob' ?\n                <Form.Item key={index.key} label={'is'}>\n                    {index.form.getFieldDecorator('dob',)\n                    (<DatePicker placeholder={\"Date of Birth\"} size={\"small\"}/>)\n                    }\n                </Form.Item> : null}\n\n            {index.selectedOption[index.k] == 'dob_gte' ?\n                <Form.Item key={index.key}>\n                    {index.form.getFieldDecorator('dob_gte',)\n                    (<DatePicker size={\"small\"}/>)\n                    }\n                </Form.Item> : null}\n\n            {index.selectedOption[index.k] == 'dob_lte' ?\n                <Form.Item key={index.key}>\n                    {index.form.getFieldDecorator('dob_lte',)\n                    (<DatePicker size={\"small\"}/>)\n                    }\n                </Form.Item> : null}\n\n            {index.selectedOption[index.k] == 'dob_month' ?\n                <Form.Item key={index.key}>\n                    {index.form.getFieldDecorator('dob_month',)\n                    (<MonthPicker size={\"small\"}/>)\n                    }\n                </Form.Item> : null}\n\n            {index.selectedOption[index.k] == 'has_dob' ?\n                <Form.Item>\n                    {index.form.getFieldDecorator('has_dob')\n                    (<Select style={{width: 100}} size={\"small\"}>\n                        {HAS_DOB.map((option) => <Select.Option value={option.value}>{option.label} </Select.Option>)}\n                    </Select>)\n                    }\n                </Form.Item>\n                : null}\n\n            {index.selectedOption[index.k] == 'patient_id' ?\n                <Form.Item key={index.key} label={'contains'}>\n                    {index.form.getFieldDecorator('patient_id',)\n                    (<Input placeholder={\"Patient Id\"} size={\"small\"}/>)\n                    }\n                </Form.Item> : null}\n\n            {index.selectedOption[index.k] == 'has_aadhar' ?\n                <Form.Item>\n                    {index.form.getFieldDecorator('has_aadhar')\n                    (<Select style={{width: 100}} size={\"small\"}>\n                        {HAS_AADHAR_ID.map((option) => <Select.Option\n                            value={option.value}>{option.label} </Select.Option>)}\n                    </Select>)\n                    }\n                </Form.Item>\n                : null}\n\n            {index.selectedOption[index.k] == 'aadhar' ?\n                <Form.Item key={index.key} label={'contains'}>\n                    {index.form.getFieldDecorator('aadhar',)\n                    (<Input placeholder={\"Aadhar Id\"} size={\"small\"}/>)\n                    }\n                </Form.Item> : null}\n\n            {index.selectedOption[index.k] == 'email' ?\n                <Form.Item key={index.key} label={'contains'}>\n                    {index.form.getFieldDecorator('email',)\n                    (<Input placeholder={\"Email Id\"} size={\"small\"}/>)\n                    }\n                </Form.Item> : null}\n\n            {index.selectedOption[index.k] == 'has_email' ?\n                <Form.Item>\n                    {index.form.getFieldDecorator('has_email')\n                    (<Select style={{width: 100}} size={\"small\"}>\n                        {HAS_EMAIL.map((option) => <Select.Option value={option.value}>{option.label} </Select.Option>)}\n                    </Select>)\n                    }\n                </Form.Item>\n                : null}\n\n            {index.selectedOption[index.k] == 'gender' ?\n                <Form.Item key={index.key} label={'is'}>\n                    {index.form.getFieldDecorator('gender')\n                    (<Select style={{width: 100}} size={\"small\"}>\n                        {GENDER_OPTION.map((option) => <Select.Option\n                            value={option.value}>{option.label} </Select.Option>)}\n                    </Select>)\n                    }\n                </Form.Item>\n                : null}\n\n\n            {index.selectedOption[index.k] == 'has_gender' ?\n                <Form.Item>\n                    {index.form.getFieldDecorator('has_gender')\n                    (<Select style={{width: 100}} size={\"small\"}>\n                        {HAS_GENDER.map((option) => <Select.Option\n                            value={option.value}>{option.label} </Select.Option>)}\n                    </Select>)\n                    }\n                </Form.Item>\n                : null}\n\n            {index.selectedOption[index.k] == 'pincode' ?\n                <Form.Item key={index.key} label={'contains'}>\n                    {index.form.getFieldDecorator('pincode',)\n                    (<Input placeholder={\"PINCODE\"} size={\"small\"}/>)\n                    }\n                </Form.Item> : null}\n\n            {index.selectedOption[index.k] == 'has_pincode' ?\n                <Form.Item>\n                    {index.form.getFieldDecorator('has_pincode')\n                    (<Select style={{width: 100}} size={\"small\"}>\n                        {HAS_PINCODE.map((option) => <Select.Option\n                            value={option.value}>{option.label} </Select.Option>)}\n                    </Select>)\n                    }\n                </Form.Item>\n                : null}\n\n            {index.selectedOption[index.k] == 'has_street' ?\n                <Form.Item>\n                    {index.form.getFieldDecorator('has_street')\n                    (<Select style={{width: 100}} size={\"small\"}>\n                        {HAS_STREET.map((option) => <Select.Option\n                            value={option.value}>{option.label} </Select.Option>)}\n                    </Select>)\n                    }\n                </Form.Item>\n                : null}\n\n\n            {index.selectedOption[index.k] == 'street' ?\n                <Form.Item key={index.key} label={'contains'}>\n                    {index.form.getFieldDecorator('street',)\n                    (<Input placeholder={\"Street Address\"} size={\"small\"}/>)\n                    }\n                </Form.Item> : null}\n\n            {index.selectedOption[index.k] == 'blood_group' ?\n                <Form.Item key={index.key} label={'is'}>\n                    {index.form.getFieldDecorator('blood_group')\n                    (<Select style={{width: 100}} size={\"small\"}>\n                        {BLOOD_GROUPS.map((option) => <Select.Option\n                            value={option.value}>{option.name} </Select.Option>)}\n                    </Select>)\n                    }\n                </Form.Item>\n                : null}\n\n            {index.selectedOption[index.k] == 'source' ?\n                <Form.Item>\n                    {index.form.getFieldDecorator('source')\n                    (<Select style={{width: 100}} size={\"small\"}>\n                        {index.sourceList.map((option) => <Select.Option\n                            value={option.id}>{option.name} </Select.Option>)}\n                    </Select>)\n                    }\n                </Form.Item>\n                : null}\n\n            {index.selectedOption[index.k] == 'agent_referal' ?\n                <Form.Item>\n                    {index.form.getFieldDecorator('agent_referal')\n                    (<Select style={{width: 100}} size={\"small\"}>\n                        {REFERED_BY_AGENT.map((option) => <Select.Option\n                            value={option.value}>{option.label} </Select.Option>)}\n                    </Select>)\n                    }\n                </Form.Item>\n                : null}\n\n\n        </>)\n}","import React from \"react\";\nimport {Divider} from \"antd\";\nimport {displayMessage, getAPI, interpolate} from \"../../../utils/common\";\nimport {INPUT_FIELD, SUCCESS_MSG_TYPE} from \"../../../constants/dataKeys\";\nimport {Form, List} from \"antd/lib/index\";\nimport DynamicFieldsForm from \"../../common/DynamicFieldsForm\";\nimport {PATIENT_CALL_NOTES, PATIENT_GROUPS, PATIENT_NOTES} from \"../../../constants/api\";\nimport moment from \"moment\";\n\nexport default class PatientNotes extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            notes: [],\n            callNotesLoading:false,\n            loading:true\n        }\n    }\n\n    componentDidMount() {\n        this.loadPatientNotes();\n        this.loadPatientCallNotes();\n    }\n\n    loadPatientNotes() {\n        let that = this;\n        that.setState({\n            loading:true\n        })\n        let successFn = function (data) {\n            that.setState({\n                notes: data,\n                loading: false\n            });\n        };\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            })\n\n        };\n        getAPI(interpolate(PATIENT_NOTES, [this.props.patientId, this.props.active_practiceId]), successFn, errorFn);\n    }\n    loadPatientCallNotes=()=>{\n      let that = this;\n      that.setState({\n          callNotesLoading:true\n      })\n      let successFn = function (data) {\n          that.setState({\n              callNotes:data,\n              callNotesLoading:false,\n          })\n      }\n      let errorFn = function (data) {\n          that.setState({\n              callNotesLoading:false\n          })\n      }\n      let apiParams ={\n          patient:this.props.patientId\n      }\n      getAPI(PATIENT_CALL_NOTES,  successFn, errorFn, apiParams);\n    };\n\n    render() {\n        let that = this;\n        const fields = [{\n            key: \"name\",\n            required: true,\n            type: INPUT_FIELD\n        }]\n        const formProp = {\n            successFn: function (data) {\n\n                displayMessage(SUCCESS_MSG_TYPE, \"Patient Note Added\");\n                that.loadPatientNotes();\n            },\n            errorFn: function () {\n\n            },\n            action: interpolate(PATIENT_NOTES, [this.props.patientId, this.props.active_practiceId]),\n            method: \"post\",\n            beforeSubmit: function (data) {\n\n            }\n        }\n        const defaultValues = [{key: 'patient', value: this.props.patientId}, {\n            key: 'practice',\n            value: this.props.active_practiceId\n        }]\n        const TestFormLayout = Form.create()(DynamicFieldsForm);\n        return <div>\n            <Divider>Patient Notes</Divider>\n            <TestFormLayout formProp={formProp}\n                            defaultValues={defaultValues}\n                            fields={fields}/>\n            <List size={'small'} loading ={this.state.loading} dataSource={this.state.notes} renderItem={item => <List.Item>\n                <List.Item.Meta\n                    title={item.name}\n                    description={'by ' + (item.staff ? item.staff.user.first_name : '--')+' on '+moment(item.created_at).format('lll')}\n                />\n            </List.Item>}/>\n\n            <Divider>Voice Call Notes</Divider>\n            <List size={'small'} loading ={this.state.callNotesLoading} dataSource={this.state.callNotes} renderItem={item => <List.Item>\n                <List.Item.Meta\n                    title={item.remarks?item.remarks:'--'}\n                    description={'Created on '+moment(item.timestamp).format('lll')}\n                />\n            </List.Item>}/>\n\n        </div>\n    }\n}\n","import React from \"react\";\nimport {Divider,Form} from \"antd\";\nimport {displayMessage, getAPI, interpolate} from \"../../../utils/common\";\nimport {PATIENTS_MEMBERSHIP_API,MEMBERSHIP_API} from \"../../../constants/api\"\nimport {INPUT_FIELD,DATE_PICKER ,SUCCESS_MSG_TYPE, SELECT_FIELD} from \"../../../constants/dataKeys\";\nimport DynamicFieldsForm from \"../../common/DynamicFieldsForm\";\nimport moment from \"moment\";\nimport {Redirect} from \"react-router-dom\";\n\nexport default class MedicalMembership extends React.Component{\n    constructor(props) {\n        super(props);\n        this.state = {\n            redirect:false,\n            currentPatient: this.props.currentPatient,\n            Membership:[],\n            \n        }\n        this.loadMembership =this.loadMembership.bind(this);\n    }\n\n    componentDidMount() {\n        this.loadMembership();\n    }\n\n    loadMembership(){\n        let that=this;\n        let successFn =function (data){\n            that.setState({\n                Membership:data,\n                loading:false\n            })\n        };\n        let errorFn = function(){\n            that.setState({\n                loading:false\n            })\n        };\n        if(that.state.currentPatient){\n            getAPI(interpolate(MEMBERSHIP_API ,[that.props.active_practiceId]),successFn,errorFn);\n        }\n\n    }\n    render(){\n        let that = this;\n        console.log(\"form state\",this.state)\n        const fields = [{\n            label: \"Type\",\n            key: \"medical_membership\",\n            type: SELECT_FIELD,\n            options: this.state.Membership.map(MembershipItem => ({label: MembershipItem.name, value: MembershipItem.id}))\n        },{\n            label:\"Start Date\",\n            key:\"medical_from\",\n            initilValue:moment(),\n            type:DATE_PICKER,format:'YYYY-MM-DD'\n\n        }];\n            const formProp = {\n                successFn: function (data) {\n                    displayMessage(SUCCESS_MSG_TYPE, \"Medical Membership added\");\n                    that.props.loadProfile();\n                    that.props.loadMedicalMembership();\n                    that.props.formChange();\n                },\n                errorFn: function () {\n                    \n                },\n                action: interpolate(PATIENTS_MEMBERSHIP_API, [this.props.patientId]),\n                method: \"post\"\n            }\n        const TestFormLayout = Form.create()(DynamicFieldsForm);\n        const defaultValues = [{key: 'patient', value: this.props.patientId}, {key: 'practice', value: this.props.active_practiceId}]\n\n        return<TestFormLayout formProp={formProp} defaultValues={defaultValues} fields={fields}/>\n    }\n}","import React from \"react\";\nimport {Divider,Form} from \"antd\";\nimport {displayMessage, getAPI, interpolate} from \"../../../utils/common\";\nimport {AGENT_ROLES, PATIENT_PROFILE} from \"../../../constants/api\"\nimport {SUCCESS_MSG_TYPE, SELECT_FIELD, SINGLE_IMAGE_UPLOAD_FIELD, INPUT_FIELD} from \"../../../constants/dataKeys\";\nimport DynamicFieldsForm from \"../../common/DynamicFieldsForm\";\n\nexport default class AddOrEditAgent extends React.Component{\n    constructor(props) {\n        super(props);\n        this.state = {\n            redirect:false,\n            currentPatient: this.props.currentPatient,\n            agentRoles:[],\n\n        }\n        this.loadAgentRoles =this.loadAgentRoles.bind(this);\n    }\n\n    componentDidMount() {\n        this.loadAgentRoles();\n    }\n\n    loadAgentRoles(){\n        let that=this;\n        let successFn =function (data){\n            that.setState({\n                agentRoles:data,\n                loading:false\n            })\n        };\n        let errorFn = function(){\n            that.setState({\n                loading:false\n            })\n        };\n        getAPI(AGENT_ROLES,successFn,errorFn);\n\n    }\n    render(){\n        let that = this;\n        const fields = [{\n            label: \"Role Type\",\n            key: \"role\",\n            type: SELECT_FIELD,\n            options: this.state.agentRoles.map(roles => ({label: roles.name, value: roles.id}))\n        },{\n            label:\"Document Upload\",\n            key:'aadhar_upload',\n            type:SINGLE_IMAGE_UPLOAD_FIELD,\n            required:true\n        }];\n            const formProp = {\n                successFn: function (data) {\n                    displayMessage(SUCCESS_MSG_TYPE, \"Agent Role added\");\n                    that.props.loadProfile();\n\n                },\n                errorFn: function () {\n\n                },\n                action: interpolate(PATIENT_PROFILE, [this.props.patientId]),\n                method: \"put\"\n            }\n        const TestFormLayout = Form.create()(DynamicFieldsForm);\n        const defaultValues = [{key:'is_agent' , value:true}]\n\n        return<TestFormLayout formProp={formProp} defaultValues={defaultValues} fields={fields}/>\n    }\n}","import React from \"react\";\nimport PatientSelection from \"../PatientSelection\";\nimport {Avatar, Button, Card, Col, Divider, Icon, List, Row, Popconfirm, Modal, Statistic, Tag} from \"antd\";\nimport {Link, Redirect} from \"react-router-dom\";\nimport {getAPI, postAPI, interpolate, displayMessage, makeFileURL} from \"../../../utils/common\";\nimport {MEDICAL_MEMBERSHIP_CANCEL_API, PATIENTS_MEMBERSHIP_API, PATIENT_PROFILE} from \"../../../constants/api\";\nimport PatientNotes from \"./PatientNotes\";\nimport MedicalMembership from \"./MedicalMembership\";\nimport {SUCCESS_MSG_TYPE, ERROR_MSG_TYPE} from \"../../../constants/dataKeys\";\nimport {hideEmail, hideMobile} from \"../../../utils/permissionUtils\";\nimport AddOrEditAgent from \"./AddOrEditAgent\";\nimport {hashCode, intToRGB} from \"../../../utils/clinicUtils\";\nimport moment from \"moment\";\n\nclass PatientProfile extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            patientProfile: null,\n            currentPatient: this.props.currentPatient,\n            medicalHistory: {},\n            loading: true,\n            add: '',\n            MedicalMembership: null,\n            hide: false,\n            agentModalVisible: false,\n        };\n        this.loadProfile = this.loadProfile.bind(this);\n        this.loadMedicalMembership = this.loadMedicalMembership.bind(this);\n    }\n\n    componentDidMount() {\n        if (this.state.currentPatient) {\n            this.loadProfile(false);\n            this.loadMedicalMembership();\n        }\n    }\n\n    formChange = (value) => {\n        this.setState({\n            add: value,\n        });\n    }\n\n    componentWillReceiveProps(newProps) {\n        let that = this;\n        if (newProps.currentPatient && newProps.currentPatient != this.state.currentPatient) {\n\n            this.setState({\n                currentPatient: newProps.currentPatient,\n            }, function () {\n                that.loadProfile(false);\n            })\n        }\n    }\n\n    loadProfile(refreshHeader = true) {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                patientProfile: data,\n                loading: false\n            });\n            if (that.props.refreshWallet && refreshHeader) {\n                that.props.refreshWallet();\n            }\n        };\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            })\n        };\n        if (that.state.currentPatient)\n            getAPI(interpolate(PATIENT_PROFILE, [that.state.currentPatient.id]), successFn, errorFn);\n    }\n\n    loadMedicalMembership() {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                MedicalMembership: data[data.length - 1],\n                loading: false\n            })\n        };\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            })\n        };\n        getAPI(interpolate(PATIENTS_MEMBERSHIP_API, [that.props.currentPatient.id]), successFn, errorFn);\n\n    }\n\n    onClickHandler(value) {\n        let that = this;\n        if (this.state.MedicalMembership) {\n            displayMessage(ERROR_MSG_TYPE, \"Membership !!\");\n            that.setState({\n                add: false\n            })\n        } else {\n            this.setState({\n                add: value\n            });\n        }\n\n    }\n\n    deleteMembership(id) {\n        let that = this;\n        let reqData = {\n            id: id,\n            is_active: false\n        }\n        let successFn = function (data) {\n            that.loadProfile();\n            that.loadMedicalMembership();\n            if (that.props.refreshWallet) {\n                that.props.refreshWallet();\n            }\n        }\n        let errorFn = function () {\n\n        };\n        postAPI(interpolate(MEDICAL_MEMBERSHIP_CANCEL_API, [that.props.currentPatient.id]), reqData, successFn, errorFn);\n    }\n\n    addAgent = () => {\n        let that = this;\n        that.setState({\n            agentModalVisible: true,\n        });\n    }\n    addAgentModalClosed = () => {\n        this.setState({\n            agentModalVisible: false\n        })\n    }\n\n    render() {\n        let that = this;\n        if (this.props.currentPatient) {\n            let patient = this.state.patientProfile;\n            if (!patient)\n                return <Card loading={this.state.loading}/>;\n            return <Card loading={this.state.loading} title=\"Patient Profile\">\n                <Row gutter={16}>\n                    <Col span={6} style={{textAlign: 'center'}}>\n                        {(patient.image ? <img src={makeFileURL(patient.image)} style={{width: '100%'}}/> :\n                            <Avatar size={200} shape=\"square\" style={{backgroundColor: '#87d068'}}>\n                                {patient.user.first_name ? patient.user.first_name :\n                                    <Icon type=\"user\"/>}\n                            </Avatar>)}\n\n                        {patient.is_agent && patient.is_approved ? <Statistic title={\"Referral Code\"}\n                                                                              value={patient.user.referer_code}/> : null}\n                        {that.props.activePracticePermissions.EditPatient ?\n                            <Link to={\"/patient/\" + this.state.currentPatient.id + \"/profile/edit\"}>\n                                <Button type=\"primary\" style={{margin:10}} block>\n                                    <Icon type=\"edit\"/>&nbsp;Edit Patient Profile</Button>\n                            </Link> : null}\n                        <Col>\n                            <Divider/>\n\n                            {this.state.add ? <div><h1 style={{fontSize: '18px'}}>Medical Membership <a href=\"#\"\n                                                                                                        onClick={() => this.onClickHandler(false)}>Cancel</a>\n                                </h1>\n                                    <MedicalMembership {...this.props} {...this.state} patientId={patient.id}\n                                                       loadMedicalMembership={that.loadMedicalMembership}\n                                                       formChange={that.formChange} loadProfile={that.loadProfile}/></div>\n                                : <div style={{padding: '0px'}}><h1\n                                    style={{fontSize: '18px', textAlign: 'center'}}>Medical Membership <a href=\"#\"\n                                                                                                          onClick={() => this.onClickHandler(true)}>{this.state.MedicalMembership ? 'Renew' : 'Add'}</a>\n                                </h1>\n                                    {this.state.MedicalMembership ? <Card size=\"small\" title={\"Membership\"}\n                                                                          extra={<Popconfirm\n                                                                              title=\"Are you sure delete this Membership?\"\n                                                                              onConfirm={() => that.deleteMembership(this.state.MedicalMembership.id)}\n                                                                              okText=\"Yes\" cancelText=\"No\">\n                                                                              <Button icon={\"close\"} type={\"danger\"}\n                                                                                      shape=\"circle\"\n                                                                                      size=\"small\"/>\n                                                                          </Popconfirm>} style={{textAlign: \"center\"}}>\n                                            <div style={{textAlign: \"left\"}}>\n                                                <p><strong>Membership Code : </strong>\n                                                    <span>{this.state.MedicalMembership.membership_code}</span></p>\n                                                <p><strong>Start Date : </strong>\n                                                    <span>{this.state.MedicalMembership.medical_from}</span></p>\n                                                <p><strong>Valid Till : </strong>\n                                                    <span>{this.state.MedicalMembership.medical_to}</span></p>\n                                            </div>\n                                        </Card>\n                                        : null}\n                                </div>\n                            }\n                        </Col>\n                    </Col>\n\n                    <Col span={12}>\n                        <PatientRow label=\"Patient Name\" value={patient.user.first_name}/>\n                        <PatientRow label=\"Patient ID\" value={patient.custom_id ? patient.custom_id : patient.id}/>\n                        {patient && patient.role ?\n                            <PatientRow label={\"Advisor Role\"} value={patient.role_data.name}/> : null}\n                        <PatientRow label=\"Gender\" value={patient.gender}/>\n                        {patient.is_age ?\n                            <PatientRow label=\"Age\"\n                                        value={patient.dob ? moment().diff(this.props.currentPatient.dob, 'years') : null}/>\n                            :\n                            <PatientRow label=\"Date of Birth\" value={patient.dob}/>\n                        }\n                        <PatientRow label=\"On Dialysis?\" value={patient.on_dialysis?\"Yes\":\"No\"}/>\n                        <PatientRow label=\"Referer\"\n                                    value={patient.user.referer_data.referer ? <Link\n                                        to={\"/patient/\" + patient.user.referer_data.patient + \"/profile\"}>{patient.user.referer_data.referer.first_name}</Link> : \"--\"}/>\n                        <Divider>Contact Details</Divider>\n                        <PatientRow label=\"Email\"\n                                    value={that.props.activePracticePermissions.PatientEmailId ? patient.user.email : hideEmail(patient.user.email)}/>\n                        <PatientRow label=\"Primary Mobile\"\n                                    value={that.props.activePracticePermissions.PatientPhoneNumber ? patient.user.mobile : hideMobile(patient.user.mobile)}/>\n                        <PatientRow label=\"Secondary Mobile\"\n                                    value={that.props.activePracticePermissions.PatientPhoneNumber ? patient.secondary_mobile_no : hideMobile(patient.secondary_mobile_no)}/>\n                        <PatientRow label=\"Landline No\" value={patient.landline_no}/>\n                        <PatientRow label=\"Address\" value={patient.address}/>\n                        <PatientRow label=\"Locality\" value={patient.locality}/>\n                        <PatientRow label=\"City\" value={patient.city_data ? patient.city_data.name : null}/>\n                        <PatientRow label=\"State\" value={patient.state_data ? patient.state_data.name : null}/>\n                        <PatientRow label=\"Country\" value={patient.country_data ? patient.country_data.name : null}/>\n                        <PatientRow label=\"Pincode\" value={patient.pincode}/>\n                    </Col>\n                    <Col span={6} style={{borderLeft: '1 px solid #ccc'}}>\n                        <PatientNotes {...this.props} patientId={patient.id}/>\n                        <Divider>Medical History</Divider>\n                        {patient.medical_history_data ?\n                            patient.medical_history_data.map((item, index) =>\n                                <Tag color={'#' + intToRGB(hashCode(item.name))}>{item.name}</Tag>) : null}\n                        {/*<List size=\"small\" loading={this.state.loading} dataSource={patient.medical_history_data}*/}\n                        {/*      renderItem={(item) =>*/}\n                        {/*          <List.Item>{item.name}</List.Item>}/>}*/}\n\n                        <Divider>Groups</Divider>\n                        <List dataSource={patient.patient_group_data}\n                              renderItem={(item) => <List.Item>{item.name}</List.Item>}/>\n                        {/* <Divider>Medical Membership</Divider>\n                        <List dataSource={patient.medical_membership}\n                              renderItem={(item) => <List.Item>{item}</List.Item>}/> */}\n                    </Col>\n\n                    <Modal\n                        title=\"Add Agent\"\n                        visible={this.state.agentModalVisible}\n                        onOk={null}\n                        footer={null}\n                        onCancel={this.addAgentModalClosed}>\n                        <AddOrEditAgent patientId={patient.id} {...this.state}/>\n                    </Modal>\n                </Row>\n\n            </Card>;\n        }\n        return <PatientSelection {...this.props}/>\n    }\n}\n\nexport default PatientProfile;\n\nfunction PatientRow(props) {\n    return <Row gutter={16} style={{marginBottom: '5px'}}>\n        <Col span={8} style={{textAlign: 'right'}}>{props.label}:</Col>\n        <Col span={16}><strong>{props.value}</strong></Col>\n    </Row>\n}\n","import React from \"react\";\nimport {\n    Button,\n    Card,\n    Checkbox,\n    DatePicker,\n    Form,\n    Icon,\n    Input,\n    message,\n    Modal,\n    Select,\n    Radio,\n    Upload,\n    Popconfirm,\n    InputNumber,\n    Popover, Row, Col,\n} from \"antd\";\nimport {\n    FILE_UPLOAD_API,\n    FILE_UPLOAD_BASE64,\n    MEDICAL_HISTORY,\n    MEMBERSHIP_API,\n    PATIENT_GROUPS,\n    PATIENT_PROFILE,\n    PATIENTS_LIST,\n    COUNTRY,\n    STATE,\n    CITY, SOURCE,\n} from \"../../../constants/api\";\nimport {\n    displayMessage,\n    getAPI,\n    interpolate,\n    makeFileURL,\n    makeURL,\n    postAPI,\n    putAPI,\n    removeEmpty\n} from \"../../../utils/common\";\nimport moment from 'moment';\nimport WebCamField from \"../../common/WebCamField\";\nimport {SUCCESS_MSG_TYPE, INPUT_FIELD, SELECT_FIELD, ALL, RELATION} from \"../../../constants/dataKeys\";\nimport {Link} from \"react-router-dom\";\nimport {\n    PATIENT_AGE,\n    BLOOD_GROUP_CONFIG_PARAM,\n    PATIENT_SOURCE_CONFIG_PARAM,\n    SMS_LANGUAGE_CONFIG_PARAM,\n    FAMILY_RELATION_CONFIG_PARAM,\n    GENDER_CONFIG_PARAM\n} from \"../../../constants/hardData\";\nimport {loadConfigParameters} from \"../../../utils/clinicUtils\";\n\n\nconst confirm = Modal.confirm;\n\n\nclass EditPatientDetails extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            redirect: false,\n            history: [],\n            patientGroup: [],\n            membership: [],\n            webCamState: {},\n            countrylist: [],\n            stateList: [],\n            cityList: [],\n            sourceList: [],\n            country: this.props.currentPatient && this.props.currentPatient.country_data ? this.props.currentPatient.country : null,\n            state: this.props.currentPatient && this.props.currentPatient.state_data ? this.props.currentPatient.state : null,\n            selectedFormType: 'DOB',\n            file_count: 10,\n            file_enable: true,\n            relation_text: true,\n            loading: false,\n            [BLOOD_GROUP_CONFIG_PARAM]: [],\n            [PATIENT_SOURCE_CONFIG_PARAM]: [],\n            [SMS_LANGUAGE_CONFIG_PARAM]: [],\n            [FAMILY_RELATION_CONFIG_PARAM]: [],\n            [GENDER_CONFIG_PARAM]: [],\n            number:{}\n\n        }\n        this.changeRedirect = this.changeRedirect.bind(this);\n        this.handleSubmit = this.handleSubmit.bind(this);\n        this.getCountry = this.getCountry.bind(this);\n        this.getState = this.getState.bind(this);\n        this.getCity = this.getCity.bind(this);\n        this.getSources = this.getSources.bind(this);\n        this.loadPatientData = this.loadPatientData.bind(this);\n    }\n\n    componentDidMount() {\n        this.loadMedicalHistory();\n        this.getPatientGroup();\n        this.getPatientMembership();\n        this.getSources();\n        this.getCountry();\n        if (this.state.country) {\n            this.getState();\n        }\n        if (this.state.state) {\n            this.getCity();\n        }\n        if (this.props.currentPatient) {\n            this.loadPatientData(this.props.currentPatient.id);\n        }\n        loadConfigParameters(this, [BLOOD_GROUP_CONFIG_PARAM, PATIENT_SOURCE_CONFIG_PARAM, SMS_LANGUAGE_CONFIG_PARAM, FAMILY_RELATION_CONFIG_PARAM, GENDER_CONFIG_PARAM])\n    }\n\n    getCountry() {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                countrylist: data,\n            })\n        };\n        let errorFun = function () {\n\n        };\n        getAPI(COUNTRY, successFn, errorFun);\n    }\n\n    getSources() {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                sourceList: data,\n            })\n        };\n        let errorFun = function () {\n\n        };\n        getAPI(SOURCE, successFn, errorFun);\n    }\n\n    getState() {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                stateList: data,\n            })\n\n        };\n        let errorFn = function () {\n\n        };\n        getAPI(STATE, successFn, errorFn, {country: this.state.country});\n\n\n    }\n\n    getCity() {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                cityList: data,\n            })\n\n        };\n        let errorFn = function () {\n\n        };\n        getAPI(CITY, successFn, errorFn, {\n            state: this.state.state,\n        });\n\n    }\n\n    getPatientMembership() {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                membership: data\n            })\n        }\n        let errorFn = function () {\n\n        }\n        getAPI(interpolate(MEMBERSHIP_API, [this.props.active_practiceId]), successFn, errorFn);\n    }\n\n    loadMedicalHistory = () => {\n        var that = this;\n        let successFn = function (data) {\n            that.setState({\n                history: data,\n            })\n        };\n        let errorFn = function () {\n\n        };\n\n        getAPI(interpolate(MEDICAL_HISTORY, [this.props.active_practiceId]), successFn, errorFn);\n\n    };\n\n    loadPatientData(patientId) {\n\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                patientDetails: data,\n                loading: false\n            })\n        }\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            })\n        };\n        getAPI(interpolate(PATIENT_PROFILE, [patientId]), successFn, errorFn);\n    }\n\n    changeRedirect() {\n        var redirectVar = this.state.redirect;\n        this.setState({\n            redirect: !redirectVar,\n        });\n    }\n\n    setFormParams = (type, value) => {\n        this.setState({\n            [type]: value\n        })\n    }\n\n    getPatientGroup = () => {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                patientGroup: data,\n                loading: false\n            });\n        };\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            })\n\n        };\n        getAPI(interpolate(PATIENT_GROUPS, [this.props.active_practiceId]), successFn, errorFn);\n    }\n    handleSubmit = (e) => {\n        let that = this;\n        e.preventDefault();\n        this.props.form.validateFields((err, values) => {\n            if (!err) {\n                let reqData = {\n                    ...values,\n                    file_enable: !!values.file_enable,\n                    file_count: values.file_count ? values.file_count : this.state.file_count,\n                    on_dialysis: that.state.on_dialysis ? true : false,\n                    medical_history: values.medical_history,\n                    patient_group: values.patient_group,\n                    user: {\n                        first_name: values.first_name ? values.first_name : '',\n                        mobile: values.mobile,\n                        email: values.email\n                    },\n\n\n                };\n\n                if (values.anniversary) {\n                    reqData.anniversary = moment(values.anniversary).format(\"YYYY-MM-DD\");\n                }\n\n                if (values.dob) {\n                    reqData.dob = moment(values.dob).format(\"YYYY-MM-DD\");\n                }\n                if (values.age) {\n                    reqData.is_age = true;\n                    reqData.dob = moment().subtract(values.age, 'years').format(\"YYYY-MM-DD\");\n                }\n                if (!values.custom_id) {\n                    reqData.custom_id = null;\n                } else {\n                    reqData.custom_id = values.custom_id_pre + values.custom_id;\n                }\n                let key = 'image';\n                if (reqData[key] && reqData[key].file && reqData[key].file.response)\n                    reqData[key] = reqData[key].file.response.image_path;\n                delete reqData.first_name;\n                delete reqData.email;\n                delete reqData.referer_code;\n                delete reqData.mobile;\n                delete reqData.age;\n                delete reqData.custom_id_pre;\n                that.setState({\n                    loading: true\n                });\n                let successFn = function (data) {\n                    displayMessage(\"Patient Saved Successfully!!\");\n                    that.setState({\n                        loading: false\n                    });\n                    that.props.history.replace('/patient/' + data.id + '/profile')\n                }\n                let errorFn = function () {\n                    that.setState({\n                        loading: false\n                    })\n                }\n                reqData = removeEmpty(reqData);\n\n                if (that.props.currentPatient) {\n                    putAPI(interpolate(PATIENT_PROFILE, [that.props.currentPatient.id]), reqData, successFn, errorFn);\n                } else {\n                    postAPI(interpolate(PATIENTS_LIST, [that.props.match.params.id]), reqData, successFn, errorFn);\n                }\n            }\n        });\n    }\n    toggleWebCam = (type, value) => {\n        this.setState(function (prevState) {\n            return {\n                webCamState: {...prevState.webCamState, [type]: value}\n            }\n        })\n    }\n    getImageandUpload = (fieldKey, image) => {\n        let that = this;\n        let reqData = new FormData();\n\n        reqData.append('image', image);\n        reqData.append('name', 'file');\n\n        let successFn = function (data) {\n            that.props.form.setFieldsValue({[fieldKey]: {file: {response: data}}});\n            displayMessage(SUCCESS_MSG_TYPE, \"Image Captured and processed.\");\n            that.setState(function (prevState) {\n                return {\n                    webCamState: {...prevState.webCamState, [fieldKey]: false}\n                }\n            })\n        }\n        let errorFn = function () {\n\n        }\n        postAPI(FILE_UPLOAD_BASE64, reqData, successFn, errorFn, {\n            'content-type': 'multipart/form-data'\n        });\n\n    }\n    onChangeValue = (type, value) => {\n        let that = this;\n        that.setState({\n            [type]: value\n        }, function () {\n            if (type == 'country') {\n                that.getState();\n            }\n            if (type == 'state') {\n                that.getCity();\n            }\n\n        })\n\n    }\n    setFormParams = (type, value) => {\n        this.setState({\n            [type]: value\n        })\n    };\n\n    onChangeCheckbox = (e) => {\n        this.setState({\n            on_dialysis: !this.state.on_dialysis,\n        });\n    };\n    changeFormType = (e) => {\n        this.setState({\n            selectedFormType: e.target.value\n        })\n\n    };\n    handleRelation = (e) => {\n        if (e) {\n            this.setState({\n                relation_text: false,\n            });\n        } else {\n            this.setState({\n                relation_text: true,\n            });\n        }\n\n    };\n\n    onDeletePatient() {\n        let that = this;\n        confirm({\n            title: 'Are you sure delete this patient?',\n            okText: 'Yes',\n            okType: 'danger',\n            cancelText: 'No',\n            onOk() {\n                that.patientDelete();\n            },\n\n        });\n    }\n\n    patientDelete() {\n        let that = this;\n        let id = that.state.patientDetails.id\n        let reqData = {'id': id, is_active: false}\n        let successFn = function (data) {\n            that.setState({\n                loading: false,\n            });\n            displayMessage(\"Patient Deleted!!\");\n            that.props.history.push('/patients/profile');\n        };\n        let errorFn = function () {\n        };\n        putAPI(interpolate(PATIENT_PROFILE, [id]), reqData, successFn, errorFn)\n    };\n\n    handleNumberChange = value => {\n        this.setState({\n            number: {\n                ...numberValidation(value),\n                value,\n            },\n        });\n    }\n    render() {\n        let that = this;\n        const {getFieldDecorator} = this.props.form;\n        const formItemLayout = ({\n            labelCol: {span: 6},\n            wrapperCol: {span: 14},\n        });\n        const historyOption = []\n        if (this.state.history) {\n            this.state.history.forEach(function (historyItem) {\n                historyOption.push({label: (historyItem.name), value: historyItem.id});\n            })\n        }\n        const patientGroupOption = []\n        if (this.state.patientGroup) {\n            this.state.patientGroup.forEach(function (patientGroupItem) {\n                patientGroupOption.push({label: (patientGroupItem.name), value: patientGroupItem.id});\n            });\n        }\n\n        const membershipOption = []\n        if (this.state.membership) {\n            this.state.membership.forEach(function (membershipItem) {\n                membershipOption.push({label: (membershipItem.name), value: membershipItem.id});\n            });\n        }\n        const singleUploadprops = {\n            name: 'image',\n            data: {\n                name: 'hello'\n            },\n            action: makeURL(FILE_UPLOAD_API),\n            headers: {\n                authorization: 'authorization-text',\n            },\n            onChange(info) {\n                if (info.file.status !== 'uploading') {\n                    console.log(info.file, info.fileList);\n                }\n                if (info.file.status === 'done') {\n                    message.success(`${info.file.name} file uploaded successfully`);\n                } else if (info.file.status === 'error') {\n                    message.error(`${info.file.name} file upload failed.`);\n                }\n            },\n        };\n        const tips =\n            'Only numbers are allowed.';\n        return (\n            <Form onSubmit={that.handleSubmit}>\n                <Card title={<span>{that.props.currentPatient ? \"Edit Profile\" : \"Add Patient\"}&nbsp;&nbsp;<Link\n                    to={\"/patients/patientprintform\"}>Print Patient Form</Link></span>}\n                      extra={<div><Button style={{margin: 5}} type=\"primary\" htmlType=\"submit\">Save</Button>\n                          {that.props.history ?\n                              <Button style={{margin: 5}} onClick={() => that.props.history.goBack()}>\n                                  Cancel\n                              </Button> : null}\n\n                          {that.props.currentPatient ? <>\n                                  {this.state.patientDetails && this.state.patientDetails.is_approved ?\n                                      <Popover\n                                          placement=\"leftBottom\"\n                                          trigger={\"hover\"}\n                                          content=\"An Agent is associated. Patient can not be deleted.\"\n                                          // onConfirm={()=>that.patientDelete(this.state.patientDetails.id)}\n                                          // // onCancel={cancel}\n                                          // okText=\"Yes\"\n                                          // cancelText=\"No\"\n                                      >\n                                          <Button style={{margin: 5}} type={\"danger\"} disabled>\n                                              Delete\n                                          </Button>\n                                      </Popover> :\n                                      <Button style={{margin: 5}} onClick={() => that.onDeletePatient()} type={\"danger\"} disabled={!this.state.patientDetails}>\n                                          Delete\n                                      </Button>\n                                  }\n                              </>\n                              : null}\n\n\n                      </div>}>\n                    <Form.Item key={'image'} {...formItemLayout} label={'Patient Image'}>\n                        {getFieldDecorator('image', {valuePropName: 'image',})(\n                            <Upload {...singleUploadprops}>\n                                <Button>\n                                    <Icon type=\"upload\"/> Select File\n                                </Button>\n                                {this.state.patientDetails && this.state.patientDetails.image ?\n                                    <img\n                                        src={makeFileURL(this.state.patientDetails ? this.state.patientDetails.image : null)}\n                                        style={{maxWidth: '100%'}}/> : null}\n                            </Upload>\n                        )}\n                        <span className=\"ant-form-text\">\n                                    <a onClick={() => that.toggleWebCam('image', Math.random())}>\n                                        Open Webcam\n                                    </a>\n                                </span>\n                        <Modal\n                            footer={null}\n                            onCancel={() => that.toggleWebCam('image', false)}\n                            visible={!!that.state.webCamState['image']}\n                            width={680}\n                            key={that.state.webCamState['image']}>\n                            <WebCamField getScreenShot={(value) => that.getImageandUpload('image', value)}/>\n                        </Modal>\n                    </Form.Item>\n                    <Form.Item label=\"Patient Name\" {...formItemLayout}>\n                        {getFieldDecorator('first_name', {\n                            rules: [{required: true, message: 'Input Patient Name!'}],\n                            initialValue: this.state.patientDetails ? this.state.patientDetails.user.first_name : ''\n                        })\n                        (<Input placeholder=\"Patient Name\"/>)\n                        }\n                    </Form.Item>\n                    <Row>\n                        <Col span={8}>\n                            <Form.Item label=\"Patient Id\"\n                                       labelCol={{span: 18}}\n                                       wrapperCol={{span: 6}}\n                            >\n                                {getFieldDecorator('custom_id_pre', {\n                                    initialValue: this.state.patientDetails && this.state.patientDetails.is_agent ? 'AD' : 'BK'\n                                })\n                                (<Select>\n                                    <Select.Option value=\"BK\">BK</Select.Option>\n                                    <Select.Option value=\"AD\">AD</Select.Option>\n                                </Select>)\n                                }\n                            </Form.Item>\n                        </Col>\n                        <Col span={16}>\n                            <Form.Item labelCol={{span: 0}}\n                                       wrapperCol={{span: 18}}\n                                       validateStatus={this.state.number.validateStatus}\n                                       help={this.state.number.errorMsg || tips}\n                            >\n                                {getFieldDecorator('custom_id', {\n                                    initialValue: this.state.patientDetails ? this.state.patientDetails.custom_id.replace(/\\D/g, '') : ''\n                                })\n                                (<InputNumber\n\n                                    style={{width: '100%'}}\n                                    placeholder=\"Patient Id\"\n                                    onChange={this.handleNumberChange}\n                                />)\n                                }\n                            </Form.Item>\n                        </Col>\n                    </Row>\n\n                    {this.state.source && this.state.source == INPUT_FIELD ?\n                        <Form.Item key={'source_extra'} label={\"Source\"}  {...formItemLayout}>\n                            {getFieldDecorator(\"source_extra\", {\n                                initialValue: '',\n\n                            })(\n                                <Input placeholder=\"Source\"/>\n                            )}\n                            <a onClick={() => that.setFormParams('source', SELECT_FIELD)}>Choose\n                                Source</a>\n                        </Form.Item>\n                        : <Form.Item label={\"Source\"} {...formItemLayout}>\n                            {getFieldDecorator('source', {initialValue: this.state.patientDetails ? this.state.patientDetails.source : null})\n                            (<Select placeholder={\"Select Source\"} showSearch optionFilterProp=\"children\">\n                                {this.state.sourceList.map((option) => <Select.Option value={option.id}>\n                                    {option.name}\n                                </Select.Option>)}\n                            </Select>)\n                            }\n                            {this.props.user.is_superuser ?   <a onClick={() => that.setFormParams('source', INPUT_FIELD)}>Enter New\n                                Source</a> :null}\n                        </Form.Item>\n                    }\n                    {/*{this.state.patientDetails ? null :*/}\n                        <Form.Item label=\"Referral Code\" {...formItemLayout}>\n                            {getFieldDecorator('referal', {initialValue: that.state.patientDetails && that.state.patientDetails.user.referer_data.referer ? that.state.patientDetails.user.referer_data.referer.referer_code : \"\",})\n                            (<Input placeholder=\"Referral Code\"/>)\n                            }\n                        </Form.Item>\n                    {/*}*/}\n                    <Form.Item label={\"SMS Language\"} {...formItemLayout}>\n                        {getFieldDecorator('language', {initialValue: this.state.patientDetails && this.state.patientDetails.language ? this.state.patientDetails.language : this.props.activePracticeData.language})\n                        (<Select>\n                            {this.state[SMS_LANGUAGE_CONFIG_PARAM].map((option) => <Select.Option value={option}>\n                                {option}\n                            </Select.Option>)}\n                        </Select>)\n                        }\n                    </Form.Item>\n                    <Form.Item label=\"Aadhar ID\" {...formItemLayout}>\n                        {getFieldDecorator('aadhar_id', {initialValue: this.state.patientDetails ? this.state.patientDetails.aadhar_id : ''})\n                        (<Input placeholder=\"Patient Aadhar Number\"/>)\n                        }\n                    </Form.Item>\n\n                    <Form.Item label=\"Gender\" {...formItemLayout}>\n                        {getFieldDecorator('gender', {initialValue: this.state.patientDetails ? this.state.patientDetails.gender : null})\n                        (<Select placeholder={\"Select Gender\"}>\n                            {this.state[GENDER_CONFIG_PARAM].map((option) => <Select.Option value={option.value}>\n                                {option.label}\n                            </Select.Option>)}\n                        </Select>)\n                        }\n                    </Form.Item>\n\n\n                    <Form.Item label=' ' {...formItemLayout} colon={false}>\n                        <Radio.Group buttonStyle=\"solid\" size=\"small\" onChange={this.changeFormType}\n                                     defaultValue={this.state.selectedFormType}>\n                            {PATIENT_AGE.map((item) => <Radio value={item.value}>{item.label}</Radio>)}\n                        </Radio.Group>\n                    </Form.Item>\n                    {this.state.selectedFormType == 'DOB' ?\n                        <Form.Item label=\"DOB\" {...formItemLayout}>\n                            {getFieldDecorator('dob', {initialValue: this.state.patientDetails && this.state.patientDetails.dob ? moment(this.state.patientDetails.dob) : ''})\n                            (<DatePicker/>)\n                            }\n                        </Form.Item>\n                        : <Form.Item label=\"Age\" {...formItemLayout}>\n                            {getFieldDecorator('age', {initialValue: this.state.patientDetails && this.state.patientDetails.dob ? moment().diff(this.state.patientDetails.dob, 'years') : null})\n                            (<InputNumber min={0} max={120} placeholder=\"00\"/>)\n                            }\n                            <span className=\"ant-form-text\">Years</span>\n                        </Form.Item>}\n\n                    <Form.Item label=\"Anniversary\" {...formItemLayout}>\n                        {getFieldDecorator('anniversary', {initialValue: this.state.patientDetails && this.state.patientDetails.anniversary ? moment(this.state.patientDetails.anniversary) : null})\n                        (<DatePicker/>)\n                        }\n                    </Form.Item>\n\n                    {/*<Form.Item label=\"Blood Group\" {...formItemLayout}>*/}\n                    {/*    {getFieldDecorator('blood_group', {initialValue: this.props.currentPatient ? this.props.currentPatient.blood_group : ''})*/}\n                    {/*    (<Input placeholder=\"Patient Blood Group\"/>)*/}\n                    {/*    }*/}\n                    {/*</Form.Item>*/}\n                    <Form.Item label=\"Blood Group\" {...formItemLayout}>\n                        {getFieldDecorator(\"blood_group\", {initialValue: this.state.patientDetails ? this.state.patientDetails.blood_group : ''})\n                        (<Select placeholder=\"Blood Group\">\n                            {this.state[BLOOD_GROUP_CONFIG_PARAM].map((option) => <Select.Option\n                                value={option}>{option}</Select.Option>)}\n                        </Select>)\n                        }\n                    </Form.Item>\n\n                    {/*<Form.Item label=\"Family\" {...formItemLayout}>*/}\n                    {/*    {getFieldDecorator('family_relation', {initialValue: this.state.patientDetails ? this.props.currentPatient.family_relation : ''})*/}\n                    {/*    (<Input placeholder=\"Patient Family Relation\"/>)*/}\n                    {/*    }*/}\n                    {/*</Form.Item>*/}\n\n                    <Form.Item label=\"Family\" {...formItemLayout}>\n                        <Form.Item style={{display: 'inline-block', width: 'calc(30% - 12px)'}}>\n                            {getFieldDecorator(\"family_relation\", {initialValue: this.state.patientDetails && this.state.patientDetails.family_relation != null ? this.state.patientDetails.family_relation : RELATION})\n                            (<Select onChange={(value) => this.handleRelation(value)}>\n                                <Select.Option value={''}>{RELATION}</Select.Option>\n                                {this.state[FAMILY_RELATION_CONFIG_PARAM].map((option) => <Select.Option\n                                    value={option.value}>{option.name}</Select.Option>)}\n                            </Select>)\n                            }\n                        </Form.Item>\n                        <span style={{display: 'inline-block', width: '14px', textAlign: 'center'}}/>\n                        <Form.Item style={{display: 'inline-block', width: 'calc(50% - 12px)'}}>\n                            {getFieldDecorator(\"attendee\", {initialValue: this.state.patientDetails ? this.state.patientDetails.attendee : ''})\n                            (<Input\n                                disabled={this.state.patientDetails && this.state.patientDetails.attendee ? false : this.state.relation_text}/>)\n                            }\n                        </Form.Item>\n                    </Form.Item>\n\n\n                    <Form.Item label=\"Mobile (Primary)\" {...formItemLayout}>\n                        {getFieldDecorator('mobile', {\n                            initialValue: this.state.patientDetails ? this.state.patientDetails.user.mobile : null,\n                            rules: [{required: true, message: 'Input Mobile Number'}]\n                        })\n                        (<Input placeholder=\"Patient Mobile Number (Primary)\"/>)\n                        }\n                    </Form.Item>\n\n                    <Form.Item label=\"Mobile (Secondary)\" {...formItemLayout}>\n                        {getFieldDecorator('secondary_mobile_no', {initialValue: this.state.patientDetails ? this.state.patientDetails.secondary_mobile_no : ''})\n                        (<Input placeholder=\"Patient Mobile Number (Secondary)\"/>)\n                        }\n                    </Form.Item>\n\n                    <Form.Item label=\"Landline\" {...formItemLayout}>\n                        {getFieldDecorator('landline_no', {initialValue: this.state.patientDetails ? this.state.patientDetails.landline_no : ''})\n                        (<Input placeholder=\"Patient Landline Number\"/>)\n                        }\n                    </Form.Item>\n\n                    <Form.Item label=\"Address\" {...formItemLayout}>\n                        {getFieldDecorator('address', {initialValue: this.state.patientDetails ? this.state.patientDetails.address : ''})\n                        (<Input placeholder=\"Patient Address\"/>)\n                        }\n                    </Form.Item>\n\n                    <Form.Item label=\"Locality\" {...formItemLayout}>\n                        {getFieldDecorator('locality', {initialValue: this.state.patientDetails ? this.state.patientDetails.locality : ''})\n                        (<Input placeholder=\"Patient Locality\"/>)\n                        }\n                    </Form.Item>\n\n                    {this.state.country && this.state.country == INPUT_FIELD ?\n                        <Form.Item key={'country_extra'} label={\"Country\"}  {...formItemLayout}>\n                            {getFieldDecorator(\"country_extra\", {\n                                initialValue: '',\n\n                            })(\n                                <Input placeholder=\"Country\"/>\n                            )}\n                            {this.props.user.is_superuser ? <a onClick={() => that.setFormParams('country', SELECT_FIELD)}>Choose\n                                      Country</a>:null}\n                        </Form.Item>\n                        : <Form.Item key={\"country\"} {...formItemLayout} label={\"Country\"}>\n                            {getFieldDecorator(\"country\", {\n                                initialValue: this.state.patientDetails && this.state.patientDetails.country_data ? this.state.patientDetails.country_data.id : '',\n                            })(\n                                <Select placeholder=\"Select Country\"\n                                        onChange={(value) => this.onChangeValue(\"country\", value)} showSearch\n                                        optionFilterProp=\"children\">\n\n                                    {this.state.countrylist.map((option) => <Select.Option\n                                        value={option.id}>{option.name}</Select.Option>)}\n                                </Select>\n                            )}\n                            {this.props.user.is_superuser ?    <a onClick={() => that.setFormParams('country', INPUT_FIELD)}>Add New\n                                Country</a> :null}\n                        </Form.Item>\n                    }\n\n\n                    {this.state.country == INPUT_FIELD || this.state.state && this.state.state == INPUT_FIELD ?\n                        <Form.Item key={'state_extra'} label={\"State\"}  {...formItemLayout}>\n                            {getFieldDecorator(\"state_extra\", {\n                                initialValue: '',\n\n                            })(\n                                <Input placeholder=\"State\"/>\n                            )}\n                            <a onClick={() => that.setFormParams('state', SELECT_FIELD)}>Choose\n                                State</a>\n                        </Form.Item>\n                        : <Form.Item key={\"state\"} {...formItemLayout} label={\"State\"}>\n                            {getFieldDecorator(\"state\", {\n                                initialValue: this.state.patientDetails && this.state.patientDetails.state_data ? this.state.patientDetails.state_data.id : '',\n                            })(\n                                <Select placeholder=\"Select State\"\n                                        onChange={(value) => this.onChangeValue(\"state\", value)} showSearch\n                                        optionFilterProp=\"children\">\n                                    {this.state.stateList.map((option) => <Select.Option\n                                        value={option.id}>{option.name}</Select.Option>)}\n                                </Select>\n                            )}\n                            {this.props.user.is_superuser ?  <a onClick={() => that.setFormParams('state', INPUT_FIELD)}>Add New\n                                state</a> :null}\n                        </Form.Item>\n                    }\n                    {this.state.country == INPUT_FIELD || this.state.state == INPUT_FIELD || this.state.city && this.state.city == INPUT_FIELD ?\n                        <Form.Item key={'city_extra'} label={\"City\"}  {...formItemLayout}>\n                            {getFieldDecorator(\"city_extra\", {\n                                initialValue: '',\n                            })(\n                                <Input placeholder=\"City\"/>\n                            )}\n                            <a onClick={() => that.setFormParams('city', SELECT_FIELD)}>Choose\n                                City</a>\n                        </Form.Item>\n                        : <Form.Item key={\"City\"} {...formItemLayout} label={\"City\"}>\n                            {getFieldDecorator(\"city\", {\n                                initialValue: this.state.patientDetails && this.state.patientDetails.city_data ? this.state.patientDetails.city_data.id : '',\n                            })(\n                                <Select showSearch optionFilterProp=\"children\" placeholder=\"Select City\">\n                                    {this.state.cityList.map((option) => <Select.Option\n                                        value={option.id}>{option.name}</Select.Option>)}\n                                </Select>\n                            )}\n                            {this.props.user.is_superuser ?  <a onClick={() => that.setFormParams('city', INPUT_FIELD)}>Add New\n                                City</a>:null}\n                        </Form.Item>\n                    }\n\n\n                    {/* <Form.Item label=\"City\" {...formItemLayout}>\n                        {getFieldDecorator('city_extra', {initialValue: this.props.currentPatient ? this.props.currentPatient.city : null})\n                        (<Input placeholder=\"Patient City\"/>)\n                        }\n                    </Form.Item> */}\n\n                    <Form.Item label=\"Pincode\" {...formItemLayout}>\n                        {getFieldDecorator('pincode', {initialValue: this.state.patientDetails ? this.state.patientDetails.pincode : ''})\n                        (<Input placeholder=\"Patient PINCODE\"/>)\n                        }\n                    </Form.Item>\n\n                    <Form.Item label=\"Email\" {...formItemLayout}>\n                        {getFieldDecorator('email', {\n                            initialValue: this.state.patientDetails ? this.state.patientDetails.user.email : null,\n                        })\n                        (<Input placeholder=\"Patient Email\"/>)\n                        }\n                    </Form.Item>\n\n                    <Form.Item label=\"Medical History\" {...formItemLayout}>\n                        {getFieldDecorator(\"medical_history\", {initialValue: this.state.patientDetails ? this.state.patientDetails.medical_history : []})\n                        (<Select placeholder=\"Medical History\" mode={\"multiple\"}>\n                            {historyOption.map((option) => <Select.Option\n                                value={option.value}>{option.label}</Select.Option>)}\n                        </Select>)\n                        }\n                    </Form.Item>\n\n                    <Form.Item label=\"Patient Group\" {...formItemLayout}>\n                        {getFieldDecorator(\"patient_group\", {initialValue: this.state.patientDetails ? this.state.patientDetails.patient_group : []})\n                        (<Select placeholder=\"Patient Group\" mode={\"multiple\"}>\n                            {patientGroupOption.map((option) => <Select.Option\n                                value={option.value}>{option.label}</Select.Option>)}\n                        </Select>)\n                        }\n                    </Form.Item>\n\n                    <Form.Item label=\"On Dialysis\" {...formItemLayout}>\n                        {getFieldDecorator('on_dialysis', {initialValue: this.state.patientDetails ? this.state.patientDetails.on_dialysis : false})\n                        (<Checkbox onChange={(e) => this.onChangeCheckbox(e)} style={{paddingTop: '4px'}}/>)\n                        }\n                    </Form.Item>\n                    <Form.Item label=\"Allow File Upload\" {...formItemLayout}>\n                        {getFieldDecorator('file_enable', {initialValue: this.state.patientDetails ? this.state.patientDetails.file_enable : true})\n                        (<Checkbox style={{paddingTop: '4px'}}\n                                   defaultChecked={true}/>)\n                        }\n                    </Form.Item>\n\n                    {/*<Form.Item label=\"Allow File Upload\" {...formItemLayout}>*/}\n                    {/*    {getFieldDecorator('file_enable',)*/}\n                    {/*    (<Checkbox  defaultChecked={true}/>)*/}\n                    {/*    }*/}\n                    {/*</Form.Item>*/}\n\n                    <Form.Item label=\"Max Uploads Allowed\" {...formItemLayout}>\n                        {getFieldDecorator('file_count', {initialValue: this.state.patientDetails ? this.state.patientDetails.file_count : 10})\n                        (<InputNumber min={0}/>)\n                        }\n                    </Form.Item>\n                    <Form.Item>\n                        {that.props.history ?\n                            <Button style={{margin: 5}} onClick={() => that.props.history.goBack()}>\n                                Cancel\n                            </Button> : null}\n                        <Button style={{margin: 5}} type=\"primary\" htmlType=\"submit\" loading={this.state.loading}>\n                            Save\n                        </Button>\n\n                    </Form.Item>\n                </Card>\n            </Form>)\n    }\n\n}\n\nexport default Form.create()(EditPatientDetails);\n\nfunction numberValidation(number) {\n    if (isNaN(number)) {\n        return {\n            validateStatus: 'error',\n            errorMsg: 'Patient ID can only be numerical value.',\n        };\n    }\n    return {\n        validateStatus: 'success',\n        errorMsg: null,\n    };\n}\n","import React from \"react\";\nimport {Link} from \"react-router-dom\";\n\nimport DynamicFieldsForm from \"../../common/DynamicFieldsForm\";\nimport {Button, Card, Checkbox, Divider, Form, Icon, Popconfirm, Table} from \"antd\";\nimport {DOCTORS_ROLE} from \"../../../constants/dataKeys\";\nimport {\n    ALL_APPOINTMENT_API,\n    APPOINTMENT_API,\n    APPOINTMENT_REPORTS,\n    EMR_TREATMENTNOTES,\n    PRACTICESTAFF,\n    PROCEDURE_CATEGORY\n} from \"../../../constants/api\";\nimport {getAPI, interpolate, putAPI} from \"../../../utils/common\";\nimport moment from 'moment';\nimport {hideEmail, hideMobile} from \"../../../utils/permissionUtils\";\nimport InfiniteFeedLoaderButton from \"../../common/InfiniteFeedLoaderButton\";\n\n\nclass Appointment extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            redirect: false,\n            appointments: null,\n            practice_doctors: [],\n            procedure_category: null,\n            treatmentNotes: null,\n            practice_staff: [],\n            loading: false\n\n        }\n        this.changeRedirect = this.changeRedirect.bind(this);\n        this.editAppointment = this.editAppointment.bind(this);\n        this.deleteAppointment = this.deleteAppointment.bind(this);\n        this.loadProcedureCategory = this.loadProcedureCategory.bind(this);\n        this.loadDoctors = this.loadDoctors.bind(this);\n\n    }\n\n    componentDidMount() {\n        // this.loadProcedureCategory();\n        this.loadDoctors();\n        this.loadTreatmentNotes();\n        if (this.props.match.params.appointmentid) {\n            this.loadAppointment(this.props.match.params.appointmentid);\n        } else {\n            this.loadAllAppointments();\n        }\n\n    }\n\n    loadAppointment(id) {\n        let that = this;\n        this.setState({\n            loading: true,\n        })\n        let successFn = function (data) {\n\n            that.setState({\n                appointments: [data],\n                loading: false,\n\n            });\n\n\n        }\n\n        let errorFn = function () {\n            that.setState({\n                loading: false,\n\n            })\n\n        }\n        getAPI(interpolate(APPOINTMENT_API, [id]), successFn, errorFn);\n\n    }\n\n    loadAllAppointments(page = 1 ) {\n        let that = this; \n        this.setState({\n            loading: true,\n        })\n        let successFn = function (data) {\n            if (data.current == 1) {\n                that.setState({\n                    appointments: data.results,\n                    total: data.count,\n                    loadMoreAppointment: data.next,\n                    loading: false,\n    \n                });\n            } else {\n                that.setState(function (prevState) {\n                    return {\n                        total: data.count,\n                        appointments: [...prevState.appointments, ...data.results],\n                        loading: false,\n                        loadMoreAppointment: data.next\n                    }\n                })\n            }\n\n           \n\n        }\n\n        let errorFn = function () {\n            that.setState({\n                loading: false,\n\n            })\n\n\n        }\n        let apiParams={\n            practice:this.props.active_practiceId,\n            pagination:true,\n            page: page\n        }\n        if(this.props.match.params.id){\n            apiParams.patient=this.props.match.params.id;\n        }\n\n        getAPI(ALL_APPOINTMENT_API, successFn, errorFn ,apiParams);\n\n    }\n\n\n    loadProcedureCategory() {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                procedure_category: data\n            })\n\n        }\n        let errorFn = function () {\n\n        }\n        getAPI(interpolate(PROCEDURE_CATEGORY, [this.props.active_practiceId]), successFn, errorFn);\n    }\n\n    loadDoctors() {\n        let that = this;\n        let successFn = function (data) {\n            data.staff.forEach(function (usersdata) {\n                if (usersdata.role == DOCTORS_ROLE) {\n                    let doctor = that.state.practice_doctors;\n                    doctor.push(usersdata);\n                    that.setState({\n                        practice_doctors: doctor,\n                    })\n                } else {\n                    let doctor = that.state.practice_staff;\n                    doctor.push(usersdata);\n                    that.setState({\n                        practice_staff: doctor,\n                    })\n                }\n            })\n\n        }\n        let errorFn = function () {\n        };\n        getAPI(interpolate(PRACTICESTAFF, [this.props.active_practiceId]), successFn, errorFn);\n\n    }\n\n    loadTreatmentNotes() {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                treatmentNotes: data,\n                loading: false\n            })\n\n        }\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            })\n\n        }\n        getAPI(interpolate(EMR_TREATMENTNOTES, [this.props.active_practiceId]), successFn, errorFn)\n    }\n\n    changeRedirect() {\n        var redirectVar = this.state.redirect;\n        this.setState({\n            redirect: !redirectVar,\n        });\n    }\n\n    editAppointment(record) {\n\n        let id = record.id;\n        this.props.history.push(\"/calendar/\" + id + \"/edit-appointment\")\n\n    }\n\n    deleteAppointment(record) {\n        let that = this;\n        that.setState({\n            loading: true\n        })\n        let reqData = {'is_active': false, 'status': \"Cancelled\"}\n        let successFn = function (data) {\n            that.loadAllAppointments();\n            that.setState({\n                loading: false\n            })\n\n        }\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            })\n        }\n        putAPI(interpolate(APPOINTMENT_API, [record.id]), reqData, successFn, errorFn);\n    }\n\n    render() {\n        let that = this;\n        const doctors = []\n        if (this.state.practice_doctors.length) {\n            this.state.practice_doctors.forEach(function (doctor) {\n                doctors[doctor.id] = doctor.user.first_name\n            })\n        }\n        const treatmentNotes = [];\n        if (this.state.treatmentNotes) {\n            this.state.treatmentNotes.forEach(function (treatmentNote) {\n                treatmentNotes[treatmentNote.id] = treatmentNote.name\n            })\n        }\n        // const categories = {1: \"fast\", 2: \"Full Stomach\", 3: \"No Liquids\"}\n        const columns = [{\n            title: 'Schedule Time',\n            key: 'name',\n            render: (text, record) => (<span>{moment(record.schedule_at).format('LLL')},{record.slot}mins</span>\n            )\n        }, {\n            title: 'Patient ID',\n            key:'id',\n            render:(item ,record)=><span>{record.patient.custom_id?record.patient.custom_id:record.patient.id}</span>,\n            exports:(item ,record) =>(record.patient.custom_id?record.patient.custom_id:record.patient.id),\n        }, {\n            title: 'Patient Name',\n            dataIndex: 'patient.user.first_name',\n            key: 'patient_name',\n        }, {\n            title: 'Patient Mobile',\n            dataIndex: 'patient.user.mobile',\n            key: 'patient_mobile',\n            render: (value) => that.props.activePracticePermissions.PatientPhoneNumber ? value : hideMobile(value)\n        }, {\n            title: 'Email',\n            dataIndex: 'patient.user.email',\n            key: 'email',\n            render: value => that.props.activePracticePermissions.PatientEmailId ? value : hideEmail(value)\n        }, {\n            title: 'Doctor',\n            key: 'doctor',\n            render: (text, record) => (\n                <span> {doctors[record.doctor]}</span>\n            )\n        }, {\n            title: 'Procedure',\n            key: 'procedure',\n            // render: (text, record) => (\n            //     <span> {procedures[record.procedure]}</span>\n            // )\n        }, {\n            title: 'Treatment Notes',\n            key: 'notes',\n            render: (text, record) => (\n                <span> {treatmentNotes[record.notes]}</span>\n            )\n        }, {\n            title: 'Category',\n            key: 'category',\n            render: (text, record) => (\n                <span> {record.category?record.category_data.name:'--'}</span>\n            )\n        }, {\n            title: 'NotifyByEmail',\n            key: 'notify_via_email',\n            render: (text, record) => (\n                <Checkbox disabled checked={record.notify_via_email}/>\n            )\n        }, {\n            title: 'NotifyBySMS',\n            key: 'notify_via_sms',\n            render: (text, record) => (\n                <Checkbox disabled checked={record.notify_via_sms}/>\n            )\n        },\n\n            {\n                title: 'Action',\n                key: 'action',\n                render: (text, record) => (\n                    <span>\n                <a onClick={() => this.editAppointment(record)}\n                   disabled={!that.props.activePracticePermissions.EditAppointment}>Edit</a>\n                <Divider type=\"vertical\"/>\n                <Popconfirm title=\"Are you sure delete this item?\"\n                            onConfirm={() => this.deleteAppointment(record)} okText=\"Yes\" cancelText=\"No\">\n                    <a disabled={!that.props.activePracticePermissions.EditAppointment}>Delete</a>\n                </Popconfirm>\n\n\n              </span>\n                ),\n            }];\n        const TestFormLayout = Form.create()(DynamicFieldsForm);\n        if (this.props.match.params.id) {\n            return <Card extra={that.props.activePracticePermissions.AddAppointment || that.props.allowAllPermissions ?\n                <Link to={\"/calendar/create-appointment?patient=\" + this.props.match.params.id}>\n                    <Button type=\"primary\">\n                        <Icon type=\"plus\"/>&nbsp;Add Appointment</Button>\n                </Link> : null}>\n\n                <Table loading={this.state.loading} columns={columns} scroll={{x: 1300}}\n                       pagination={false}\n                       dataSource={this.state.appointments}/>\n                       \n                <InfiniteFeedLoaderButton\n                        loaderFunction={() => this.loadAllAppointments(this.state.loadMoreAppointment)}\n                        loading={this.state.loading}\n                        hidden={!this.state.loadMoreAppointment}/>\n\n\n            </Card>\n        }\n        return <Card extra={that.props.activePracticePermissions.AddAppointment || that.props.allowAllPermissions ?\n            <Link to=\"/calendar/create-appointment\">\n                <Button type=\"primary\">\n                    <Icon type=\"plus\"/>&nbsp;Add Appointment</Button>\n            </Link> : null}>\n            <Table loading={this.state.loading} columns={columns} scroll={{x: 1300}}\n                   pagination={false}\n                   dataSource={this.state.appointments}/>\n\n            <InfiniteFeedLoaderButton\n                        loaderFunction={() => this.loadAllAppointments(this.state.loadMoreAppointment)}\n                        loading={this.state.loading}\n                        hidden={!this.state.loadMoreAppointment}/>\n\n\n        </Card>\n    }\n\n}\n\nexport default Appointment;\n","import React from \"react\";\nimport {Menu, Layout, Icon, Divider, Badge} from \"antd\";\nimport {Link} from \"react-router-dom\";\nimport {INNER_KEYS_HOTKEYS} from \"../../constants/hardData\";\nimport Hotkeys from 'react-hot-keys';\n\nconst Sider = Layout.Sider;\n\nclass PatientSider extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {};\n        this.onHotKeyInner = this.onHotKeyInner.bind(this);\n    }\n\n\n    onHotKeyInner(keyNm) {\n        let that = this;\n        switch (keyNm) {\n            case 'alt+f':\n                return (this.props.currentPatient ? this.props.history.push(\"/patient/\" + this.props.currentPatient.id + \"/profile\") : this.props.history.push(\"/patients/profile\"));\n\n            case 'alt+a':\n                return (this.props.currentPatient ? this.props.history.push(\"/patient/\" + this.props.currentPatient.id + \"/appointments\") : this.props.history.push(\"/patients/appointments\"));\n\n            case 'alt+o':\n                return (this.props.currentPatient ? this.props.history.push(\"/patient/\" + this.props.currentPatient.id + \"/communications\") : this.props.history.push(\"/patients/communications\"));\n\n            case 'alt+k':\n                return (this.props.currentPatient ? this.props.history.push(\"/patient/\" + this.props.currentPatient.id + \"/booking\") : this.props.history.push(\"/patients/profile\"));\n\n            case 'alt+m':\n                return (this.props.currentPatient ? this.props.history.push(\"/patient/\" + this.props.currentPatient.id + \"/emr/vitalsigns\") : this.props.history.push(\"/patients/emr/vitalsigns\"));\n\n            case 'alt+n':\n                return (this.props.currentPatient ? this.props.history.push(\"/patient/\" + this.props.currentPatient.id + \"/emr/vitalsigns\") : this.props.history.push(\"/patients/emr/vitalsigns\"));\n\n            case 'alt+t':\n                return (this.props.currentPatient ? this.props.history.push(\"/patient/\" + this.props.currentPatient.id + \"/emr/plans\") : this.props.history.push(\"/patients/emr/plans\"));\n\n            case 'alt+l':\n                return (this.props.currentPatient ? this.props.history.push(\"/patient/\" + this.props.currentPatient.id + \"/emr/files\") : this.props.history.push(\"/patients/emr/files\"));\n\n            case 'alt+i':\n                return (this.props.currentPatient ? this.props.history.push(\"/patient/\" + this.props.currentPatient.id + \"/billing/invoices\") : this.props.history.push(\"/patients/billing/invoices\"));\n\n            case 'alt+e':\n                return (this.props.currentPatient ? this.props.history.push(\"/patient/\" + this.props.currentPatient.id + \"/billing/return/invoices\") : this.props.history.push(\"/patients/billing/return/invoices\"));\n\n            case 'alt+y':\n                return (this.props.currentPatient ? this.props.history.push(\"/patient/\" + this.props.currentPatient.id + \"/billing/payments\") : this.props.history.push(\"/patients/billing/payments\"));\n\n            case 'alt+u':\n                return (this.props.currentPatient ? this.props.history.push(\"/patient/\" + this.props.currentPatient.id + \"/emr/workdone\") : this.props.history.push(\"/patients/emr/workdone\"));\n\n            case 'alt+s':\n                return (this.props.currentPatient ? this.props.history.push(\"/patient/\" + this.props.currentPatient.id + \"/emr/prescriptions\") : this.props.history.push(\"/patients/emr/prescriptions\"));\n\n            case 'alt+g':\n                return (this.props.currentPatient ? this.props.history.push(\"/patient/\" + this.props.currentPatient.id + \"/billing/ledger\") : this.props.history.push(\"/patients/profile\"));\n\n            case 'alt+w':\n                return (this.props.currentPatient ? this.props.history.push(\"/patient/\" + this.props.currentPatient.id + \"/emr/timeline\") : this.props.history.push(\"/patients/profile\"));\n        }\n    }\n\n\n    render() {\n        let that = this;\n        return <Hotkeys keyName={INNER_KEYS_HOTKEYS} onKeyDown={(value) => this.onHotKeyInner(value)}>\n            <Sider trigger={null}\n                   collapsible\n                   collapsed={this.props.hideSidePanel}\n                   style={{overflow: 'auto', minHeight: 'calc(100vh - 64px)', background: '#fff'}}>\n                {/*<div className=\"logo\"/>*/}\n\n                <Menu mode=\"inline\">\n                    <Menu.ItemGroup key=\"g1\" title={<Divider style={{margin: '0px'}}>Patient</Divider>}>\n                        {/* {that.props.activePracticePermissions.ViewPatient || that.props.allowAllPermissions? */}\n                        <Menu.Item key=\"17\">\n                            <Link\n                                to={this.props.currentPatient ? \"/patient/\" + this.props.currentPatient.id + \"/profile\" : \"/patients/profile\"}>\n                                <Icon type=\"user\"/><span className=\"nav-text\">Pro<span\n                                className={\"shortcutLetterHighlight\"}>f</span>ile</span>\n                            </Link>\n                        </Menu.Item>\n                        {/* :null} */}\n                        {that.props.activePracticePermissions.PatientAppointments || that.props.allowAllPermissions ?\n                            <Menu.Item key=\"18\">\n                                <Link\n                                    to={this.props.currentPatient ? \"/patient/\" + this.props.currentPatient.id + \"/appointments\" : \"/patients/appointments\"}>\n                                    <Icon type=\"calendar\"/><span className=\"nav-text\"><span\n                                    className={\"shortcutLetterHighlight\"}>A</span>ppointments</span>\n                                </Link>\n                            </Menu.Item>\n                            : null}\n                        {that.props.activePracticePermissions.PatientCommunications || that.props.allowAllPermissions ?\n                            <Menu.Item key=\"19\">\n                                <Link\n                                    to={this.props.currentPatient ? \"/patient/\" + this.props.currentPatient.id + \"/communications\" : \"/patients/communications\"}>\n                                    <Icon type=\"message\"/><span className=\"nav-text\">C<span\n                                    className={\"shortcutLetterHighlight\"}>o</span>mmunications</span>\n                                </Link>\n                            </Menu.Item>\n                            : null}\n                        {that.props.activePracticePermissions.PatientBookings || that.props.allowAllPermissions ?\n                            <Menu.Item key=\"booking\" disabled={!this.props.currentPatient}>\n                                <Link\n                                    to={this.props.currentPatient ? \"/patient/\" + this.props.currentPatient.id + \"/booking\" : \"/patients/communications\"}>\n                                    <Icon type=\"book\"/><span className=\"nav-text\">Boo<span\n                                    className={\"shortcutLetterHighlight\"}>k</span>ing</span>\n                                </Link>\n                            </Menu.Item>\n                            : null}\n\n                    </Menu.ItemGroup>\n                    <Menu.ItemGroup key=\"g2\" title={<Divider style={{margin: '0px'}}>EMR</Divider>}>\n                        {/*<SubMenu key=\"nestedsub1\" title={<span>EMR</span>}>*/}\n                        {that.props.activePracticePermissions.PatientVitalSigns || that.props.allowAllPermissions ?\n                            <Menu.Item key=\"20\">\n                                <Link\n                                    to={this.props.currentPatient ? \"/patient/\" + this.props.currentPatient.id + \"/emr/vitalsigns\" : \"/patients/emr/vitalsigns\"}>\n                                    <Icon type=\"heart\"/><span className=\"nav-text\">Report <span\n                                    className={\"shortcutLetterHighlight\"}>M</span>anual</span></Link>\n                            </Menu.Item>\n                            : null}\n                        {that.props.activePracticePermissions.PatientClinicalNotes || that.props.allowAllPermissions ?\n                            <Menu.Item key=\"21\">\n                                <Link\n                                    to={this.props.currentPatient ? \"/patient/\" + this.props.currentPatient.id + \"/emr/clinicnotes\" : \"/patients/emr/clinicnotes\"}>\n                                    <Icon type=\"solution\"/><span className=\"nav-text\">Clinical <span\n                                    className={\"shortcutLetterHighlight\"}>N</span>otes</span>\n                                </Link>\n                            </Menu.Item>\n                            : null}\n                        {that.props.activePracticePermissions.PatientTreatmentPlans || that.props.allowAllPermissions ?\n                            <Menu.Item key=\"30\">\n                                <Link\n                                    to={this.props.currentPatient ? \"/patient/\" + this.props.currentPatient.id + \"/emr/plans\" : \"/patients/emr/plans\"}>\n                                    <Icon type=\"read\"/><span className=\"nav-text\"><span\n                                    className={\"shortcutLetterHighlight\"}>T</span>reatment\n                                    Plans</span>\n                                </Link>\n                            </Menu.Item>\n                            : null}\n                        {that.props.activePracticePermissions.PatientCompletedProcedure || that.props.allowAllPermissions ?\n                            <Menu.Item key=\"22\">\n                                <Link\n                                    to={this.props.currentPatient ? \"/patient/\" + this.props.currentPatient.id + \"/emr/workdone\" : \"/patients/emr/workdone\"}>\n                                    <Icon type=\"check-circle\"/><span className=\"nav-text\">Completed Proced<span\n                                    className={\"shortcutLetterHighlight\"}>u</span>re</span>\n                                </Link>\n                            </Menu.Item>\n                            : null}\n                        {that.props.activePracticePermissions.PatientFiles || that.props.allowAllPermissions ?\n                            <Menu.Item key=\"23\">\n                                <Link\n                                    to={this.props.currentPatient ? \"/patient/\" + this.props.currentPatient.id + \"/emr/files\" : \"/patients/emr/files\"}>\n                                    <Icon type=\"picture\"/><span className=\"nav-text\">Fi<span\n                                    className={\"shortcutLetterHighlight\"}>l</span>es</span>\n                                </Link>\n                            </Menu.Item>\n                            : null}\n                        {that.props.activePracticePermissions.PatientPrescriptions || that.props.allowAllPermissions ?\n                            <Menu.Item key=\"24\">\n                                <Link\n                                    to={this.props.currentPatient ? \"/patient/\" + this.props.currentPatient.id + \"/emr/prescriptions\" : \"/patients/emr/prescriptions\"}>\n                                    <Icon type=\"solution\"/><span className=\"nav-text\">Pre<span\n                                    className={\"shortcutLetterHighlight\"}>s</span>criptions</span>\n                                </Link>\n                            </Menu.Item>\n                            : null}\n                        {that.props.activePracticePermissions.PatientTimeline || that.props.allowAllPermissions ?\n                            <Menu.Item key=\"25\" disabled={!this.props.currentPatient}>\n                                <Link\n                                    to={this.props.currentPatient ? \"/patient/\" + this.props.currentPatient.id + \"/emr/timeline\" : \"/patients/profile\"}>\n                                    <Icon type=\"clock-circle\"/><span className=\"nav-text\">Timeline <span\n                                    className={\"shortcutLetterHighlight\"}>w</span></span>\n                                </Link>\n                            </Menu.Item>\n                            : null}\n                        {that.props.activePracticePermissions.PatientLabOrders || that.props.allowAllPermissions ?\n                            <Menu.Item key=\"26\" disabled={!this.props.currentPatient || true}>\n                                <Link\n                                    to={this.props.currentPatient ? \"/patient/\" + this.props.currentPatient.id + \"/emr/labtrackings\" : \"/patients/profile\"}>\n                                    <Icon type=\"solution\"/><span className=\"nav-text\">Lab Orders</span>\n                                </Link>\n                            </Menu.Item>\n                            : null}\n                    </Menu.ItemGroup>\n                    {/*</SubMenu>*/}\n                    <Menu.ItemGroup key=\"g3\" title={<Divider style={{margin: '0px'}}>Billing</Divider>}>\n\n                        {that.props.activePracticePermissions.PatientInvoices || that.props.allowAllPermissions ?\n                            <Menu.Item key=\"27\">\n                                <Link\n                                    to={this.props.currentPatient ? \"/patient/\" + this.props.currentPatient.id + \"/billing/invoices\" : \"/patients/billing/invoices\"}>\n                                    <Icon type=\"audit\"/><span className=\"nav-text\"><span\n                                    className={\"shortcutLetterHighlight\"}>I</span>nvoices</span>\n                                </Link>\n                            </Menu.Item>\n                            : null}\n                        {that.props.activePracticePermissions.PatientReturns || that.props.allowAllPermissions ?\n                            <Menu.Item key=\"31\">\n                                <Link\n                                    to={this.props.currentPatient ? \"/patient/\" + this.props.currentPatient.id + \"/billing/return/invoices\" : \"/patients/billing/return/invoices\"}>\n                                    <Icon type=\"redo\"/><span className=\"nav-text\">Invoices R<span\n                                    className={\"shortcutLetterHighlight\"}>e</span>turn</span>\n                                </Link>\n                            </Menu.Item>\n                            : null}\n                        {that.props.activePracticePermissions.PatientPayments || that.props.allowAllPermissions ?\n                            <Menu.Item key=\"28\">\n                                <Link\n                                    to={this.props.currentPatient ? \"/patient/\" + this.props.currentPatient.id + \"/billing/payments\" : \"/patients/billing/payments\"}>\n                                    <Icon type=\"dollar\"/><span className=\"nav-text\">Pa<span\n                                    className={\"shortcutLetterHighlight\"}>y</span>ments</span>\n                                </Link>\n                            </Menu.Item>\n                            : null}\n                        {that.props.activePracticePermissions.PatientLedger || that.props.allowAllPermissions ?\n                            <Menu.Item key=\"29\" disabled={!this.props.currentPatient}>\n                                <Link\n                                    to={this.props.currentPatient ? \"/patient/\" + this.props.currentPatient.id + \"/billing/ledger\" : \"/patients/profile\"}>\n                                    <Icon type=\"book\"/><span className=\"nav-text\">Led<span\n                                    className={\"shortcutLetterHighlight\"}>g</span>er</span>\n                                </Link>\n                            </Menu.Item>\n                            : null}\n                        {this.props.currentPatient && this.props.currentPatient.is_agent && (that.props.activePracticePermissions.PatientLedger || that.props.allowAllPermissions) ?\n                            <Menu.Item key=\"32\" disabled={!this.props.currentPatient}>\n                                <Link\n                                    to={this.props.currentPatient ? \"/patient/\" + this.props.currentPatient.id + \"/billing/wallet\" : \"/patients/profile\"}>\n                                    <Icon type=\"wallet\"/><span className=\"nav-text\">Wallet Ledger</span>\n                                </Link>\n                            </Menu.Item>\n                            : null}\n                    </Menu.ItemGroup>\n                </Menu>\n\n            </Sider>\n        </Hotkeys>\n    }\n}\n\nexport default PatientSider;\n","function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport omit from 'omit.js';\nimport { ConfigConsumer } from '../config-provider';\n\nvar TimelineItem = function TimelineItem(props) {\n  return React.createElement(ConfigConsumer, null, function (_ref) {\n    var _classNames, _classNames2;\n\n    var getPrefixCls = _ref.getPrefixCls;\n\n    var customizePrefixCls = props.prefixCls,\n        className = props.className,\n        _props$color = props.color,\n        color = _props$color === void 0 ? '' : _props$color,\n        children = props.children,\n        pending = props.pending,\n        dot = props.dot,\n        restProps = __rest(props, [\"prefixCls\", \"className\", \"color\", \"children\", \"pending\", \"dot\"]);\n\n    var prefixCls = getPrefixCls('timeline', customizePrefixCls);\n    var itemClassName = classNames((_classNames = {}, _defineProperty(_classNames, \"\".concat(prefixCls, \"-item\"), true), _defineProperty(_classNames, \"\".concat(prefixCls, \"-item-pending\"), pending), _classNames), className);\n    var dotClassName = classNames((_classNames2 = {}, _defineProperty(_classNames2, \"\".concat(prefixCls, \"-item-head\"), true), _defineProperty(_classNames2, \"\".concat(prefixCls, \"-item-head-custom\"), dot), _defineProperty(_classNames2, \"\".concat(prefixCls, \"-item-head-\").concat(color), true), _classNames2));\n    return React.createElement(\"li\", _extends({}, omit(restProps, ['position']), {\n      className: itemClassName\n    }), React.createElement(\"div\", {\n      className: \"\".concat(prefixCls, \"-item-tail\")\n    }), React.createElement(\"div\", {\n      className: dotClassName,\n      style: {\n        borderColor: /blue|red|green|gray/.test(color) ? undefined : color\n      }\n    }, dot), React.createElement(\"div\", {\n      className: \"\".concat(prefixCls, \"-item-content\")\n    }, children));\n  });\n};\n\nTimelineItem.defaultProps = {\n  color: 'blue',\n  pending: false,\n  position: ''\n};\nexport default TimelineItem;","function _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport TimelineItem from './TimelineItem';\nimport Icon from '../icon';\nimport { ConfigConsumer } from '../config-provider';\n\nvar Timeline =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Timeline, _React$Component);\n\n  function Timeline() {\n    var _this;\n\n    _classCallCheck(this, Timeline);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Timeline).apply(this, arguments));\n\n    _this.renderTimeline = function (_ref) {\n      var _classNames;\n\n      var getPrefixCls = _ref.getPrefixCls;\n\n      var _a = _this.props,\n          customizePrefixCls = _a.prefixCls,\n          _a$pending = _a.pending,\n          pending = _a$pending === void 0 ? null : _a$pending,\n          pendingDot = _a.pendingDot,\n          children = _a.children,\n          className = _a.className,\n          reverse = _a.reverse,\n          mode = _a.mode,\n          restProps = __rest(_a, [\"prefixCls\", \"pending\", \"pendingDot\", \"children\", \"className\", \"reverse\", \"mode\"]);\n\n      var prefixCls = getPrefixCls('timeline', customizePrefixCls);\n      var pendingNode = typeof pending === 'boolean' ? null : pending;\n      var classString = classNames(prefixCls, (_classNames = {}, _defineProperty(_classNames, \"\".concat(prefixCls, \"-pending\"), !!pending), _defineProperty(_classNames, \"\".concat(prefixCls, \"-reverse\"), !!reverse), _defineProperty(_classNames, \"\".concat(prefixCls, \"-\").concat(mode), !!mode), _classNames), className);\n      var pendingItem = pending ? React.createElement(TimelineItem, {\n        pending: !!pending,\n        dot: pendingDot || React.createElement(Icon, {\n          type: \"loading\"\n        })\n      }, pendingNode) : null;\n      var timeLineItems = reverse ? [pendingItem].concat(_toConsumableArray(React.Children.toArray(children).reverse())) : [].concat(_toConsumableArray(React.Children.toArray(children)), [pendingItem]);\n\n      var getPositionCls = function getPositionCls(ele, idx) {\n        if (mode === 'alternate') {\n          if (ele.props.position === 'right') return \"\".concat(prefixCls, \"-item-right\");\n          if (ele.props.position === 'left') return \"\".concat(prefixCls, \"-item-left\");\n          return idx % 2 === 0 ? \"\".concat(prefixCls, \"-item-left\") : \"\".concat(prefixCls, \"-item-right\");\n        }\n\n        if (mode === 'left') return \"\".concat(prefixCls, \"-item-left\");\n        if (mode === 'right') return \"\".concat(prefixCls, \"-item-right\");\n        if (ele.props.position === 'right') return \"\".concat(prefixCls, \"-item-right\");\n        return '';\n      }; // Remove falsy items\n\n\n      var truthyItems = timeLineItems.filter(function (item) {\n        return !!item;\n      });\n      var itemsCount = React.Children.count(truthyItems);\n      var lastCls = \"\".concat(prefixCls, \"-item-last\");\n      var items = React.Children.map(truthyItems, function (ele, idx) {\n        var pendingClass = idx === itemsCount - 2 ? lastCls : '';\n        var readyClass = idx === itemsCount - 1 ? lastCls : '';\n        return React.cloneElement(ele, {\n          className: classNames([ele.props.className, !reverse && !!pending ? pendingClass : readyClass, getPositionCls(ele, idx)])\n        });\n      });\n      return React.createElement(\"ul\", _extends({}, restProps, {\n        className: classString\n      }), items);\n    };\n\n    return _this;\n  }\n\n  _createClass(Timeline, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(ConfigConsumer, null, this.renderTimeline);\n    }\n  }]);\n\n  return Timeline;\n}(React.Component);\n\nexport { Timeline as default };\nTimeline.Item = TimelineItem;\nTimeline.defaultProps = {\n  reverse: false,\n  mode: ''\n};","import Timeline from './Timeline';\nexport default Timeline;","function _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nimport * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport RcSteps from 'rc-steps';\nimport Icon from '../icon';\nimport { ConfigConsumer } from '../config-provider';\n\nvar Steps =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Steps, _React$Component);\n\n  function Steps() {\n    var _this;\n\n    _classCallCheck(this, Steps);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Steps).apply(this, arguments));\n\n    _this.renderSteps = function (_ref) {\n      var getPrefixCls = _ref.getPrefixCls;\n      var prefixCls = getPrefixCls('steps', _this.props.prefixCls);\n      var iconPrefix = getPrefixCls('', _this.props.iconPrefix);\n      var icons = {\n        finish: React.createElement(Icon, {\n          type: \"check\",\n          className: \"\".concat(prefixCls, \"-finish-icon\")\n        }),\n        error: React.createElement(Icon, {\n          type: \"close\",\n          className: \"\".concat(prefixCls, \"-error-icon\")\n        })\n      };\n      return React.createElement(RcSteps, _extends({\n        icons: icons\n      }, _this.props, {\n        prefixCls: prefixCls,\n        iconPrefix: iconPrefix\n      }));\n    };\n\n    return _this;\n  }\n\n  _createClass(Steps, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(ConfigConsumer, null, this.renderSteps);\n    }\n  }]);\n\n  return Steps;\n}(React.Component);\n\nexport { Steps as default };\nSteps.Step = RcSteps.Step;\nSteps.defaultProps = {\n  current: 0\n};\nSteps.propTypes = {\n  prefixCls: PropTypes.string,\n  iconPrefix: PropTypes.string,\n  current: PropTypes.number\n};","import React from \"react\";\nimport {\n    Button,\n    Card,\n    Icon,\n    Steps,\n    Timeline,\n    Row,\n    Col,\n    Checkbox,\n    Spin,\n    Tag,\n    Table,\n    Affix,\n    Tooltip,\n    Input,\n    Modal\n} from \"antd\";\nimport {\n    getAPI,\n    interpolate,\n    makeFileURL,\n    postAPI,\n    startLoadingMessage,\n    stopLoadingMessage\n} from \"../../../utils/common\";\nimport {PATIENT_TIMELINE_API, PATIENT_TIMELINE_PDF, TREATMENTPLANS_PDF} from \"../../../constants/api\";\nimport {CUSTOM_STRING_SEPERATOR} from \"../../../constants/hardData\";\nimport moment from \"moment\";\nimport {BACKEND_BASE_URL} from \"../../../config/connect\";\nimport {ERROR_MSG_TYPE, SUCCESS_MSG_TYPE} from \"../../../constants/dataKeys\";\nimport * as _ from \"lodash\";\nimport {sendMail} from \"../../../utils/clinicUtils\";\n\nconst Step = Steps.Step;\n\nconst checkboxOption = [{\n    label: <span style={{width: '100%'}}>Appointment</span>,\n    value: 'appointments'\n}, {\n    label: <span style={{width: '100%'}}>Report Manual</span>,\n    value: 'vital_signs'\n}, {\n    label: <span style={{width: '100%'}}>Clinic Notes</span>,\n    value: 'clinic_notes'\n}, {\n    label: <span style={{width: '100%'}}>Treatment Plans</span>,\n    value: 'treatment_plans'\n}, {\n    label: <span style={{width: '100%'}}>Procedures</span>,\n    value: 'procedures'\n}, {\n    label: <span style={{width: '100%'}}>Files</span>,\n    value: 'files'\n}, {\n    label: <span style={{width: '100%'}}>Prescriptions</span>,\n    value: 'prescriptions'\n}, {\n    label: <span style={{width: '100%'}}>Invoices</span>,\n    value: 'invoices'\n}, {\n    label: <span style={{width: '100%'}}>Payments</span>,\n    value: 'payments'\n}];\n\nclass PatientTimeline extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            filterParams: ['appointments', 'vital_signs', 'clinic_notes', 'treatment_plans', 'procedures', 'files', 'prescriptions', 'invoices', 'payments'],\n            checkAllFilters: true,\n            selectedFiltersIntermediate: false,\n            timelineData: [],\n            checkedTimelineCards: []\n        }\n    }\n\n    componentDidMount() {\n        this.loadTimeline();\n    }\n\n    changeFilters = (value) => {\n        let that = this;\n        this.setState({\n            filterParams: value,\n            selectedFiltersIntermediate: !!value.length && value.length < checkboxOption.length,\n            checkAllFilters: value.length === checkboxOption.length,\n        }, function () {\n            that.loadTimeline()\n        })\n    }\n    onCheckAllFiltersChange = e => {\n        let that = this;\n        this.setState({\n            filterParams: e.target.checked ? checkboxOption.map(item => item.value) : [],\n            selectedFiltersIntermediate: false,\n            checkAllFilters: e.target.checked,\n        }, function () {\n            that.loadTimeline()\n        });\n    };\n    loadTimeline = () => {\n        let that = this;\n        let queryParams = {\n            practice_id: this.props.active_practiceId\n        };\n        that.setState({\n            loading: true\n        })\n        this.state.filterParams.forEach(function (value) {\n            queryParams[value] = 1\n        });\n        let successFn = function (data) {\n            var lastDate = moment().add(5, 'year');\n            that.setState(function () {\n                let timelineData = [];\n                let checkList = {};\n                data.forEach(function (item) {\n                    if (lastDate.format('YMD') != moment(item.sort_date).format('YMD')) {\n                        lastDate = moment(item.sort_date);\n                        timelineData.push({type: 'Time', date: item.sort_date})\n                    }\n                    timelineData.push(item);\n                    if (item.type != 'Appointments') {\n                        if (checkList[item.type]) {\n                            checkList[item.type][item.id] = true;\n                        } else {\n                            checkList[item.type] = {[item.id]: true}\n                        }\n                    }\n                });\n                return {\n                    timelineData: timelineData,\n                    loading: false,\n                    allCheckList: checkList\n                }\n            })\n        }\n\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            })\n        }\n        if (this.props.showAllClinic && this.props.match.params.id) {\n            delete (queryParams.practice_id)\n        }\n        getAPI(interpolate(PATIENT_TIMELINE_API, [this.props.match.params.id]), successFn, errorFn, queryParams);\n    }\n    onCheckAllTimelineCard = (e) => {\n        this.setState(function (prevState) {\n            return {\n                checkedTimelineCards: e.target.checked ? {...prevState.allCheckList} : {},\n                indeterminate: false,\n                checkAll: e.target.checked,\n            }\n        });\n    }\n    toggleTimelineCheckbox = (type, id, checked) => {\n        this.setState(function (prevState) {\n            let returnObj = {};\n            let checkedList = prevState.checkedTimelineCards;\n            if (checkedList[type]) {\n                checkedList[type][id] = !!checked\n            } else {\n                checkedList[type] = {[id]: !!checked}\n            }\n            if (!checked) {\n                returnObj.checkAll = false;\n                returnObj.indeterminate = true;\n                delete checkedList[type][id]\n                if (Object.keys(checkedList[type]).length) {\n\n                } else {\n                    delete checkedList[type]\n                    if (!Object.keys(checkedList).length) {\n                        returnObj.indeterminate = false;\n                    }\n                }\n\n            } else {\n                returnObj.indeterminate = true;\n                if (Object.keys(prevState.allCheckList).length == Object.keys(checkedList).length) {\n                    let keysList = Object.keys(prevState.allCheckList);\n                    let flag = false\n                    for (let i = 0; i < keysList.length; i++) {\n                        if (Object.keys(prevState.allCheckList[keysList[i]]).length != Object.keys(checkedList[keysList[i]]).length) {\n                            flag = true;\n                            returnObj.checkAll = false;\n                            break;\n                        }\n                    }\n                    if (!flag) {\n                        returnObj.indeterminate = false;\n                        returnObj.checkAll = true\n                    }\n                }\n            }\n            returnObj.checkedTimelineCards = checkedList;\n            return returnObj;\n        });\n    };\n    printCaseSheet = () => {\n        let that = this;\n        let msg = startLoadingMessage(\"Starting print case sheet...\");\n        let reqObj = {\n            practice: that.props.active_practiceId,\n            timeline: []\n        }\n        let keys = Object.keys(this.state.checkedTimelineCards);\n        keys.forEach(function (key) {\n            reqObj.timeline.push({\n                type: key,\n                id: Object.keys(that.state.checkedTimelineCards[key])\n            })\n        });\n        let successFn = function (data) {\n            stopLoadingMessage(msg, SUCCESS_MSG_TYPE, \"Fetched report successfully!!\");\n            window.open(BACKEND_BASE_URL + data.report);\n        }\n        let errorFn = function () {\n            stopLoadingMessage(msg, ERROR_MSG_TYPE, \"Case sheet printing failed!!\");\n        }\n        postAPI(interpolate(PATIENT_TIMELINE_PDF, [this.props.match.params.id]), reqObj, successFn, errorFn);\n    }\n\n    updateFormValue =(type,value)=>{\n        this.setState({\n            [type]: value\n        })\n    };\n    mailModalOpen =() =>{\n        this.setState({\n            visibleMail:true\n        })\n    };\n\n    mailModalClose =() =>{\n        this.setState({\n            visibleMail:false\n        })\n    };\n\n\n    sendCaseSheet =()=>{\n        this.mailModalOpen()\n        this.setState({\n            mail_to:_.get(this.props.currentPatient,'user.email')\n        })\n\n    };\n    sendMailToPatient =()=>{\n        let that =this;\n        let {mail_to  } = this.state;\n\n        let reqObj = {\n            mail_to:mail_to,\n            practice: that.props.active_practiceId,\n            timeline: []\n        }\n        let keys = Object.keys(this.state.checkedTimelineCards);\n        keys.forEach(function (key) {\n            reqObj.timeline.push({\n                type: key,\n                id: Object.keys(that.state.checkedTimelineCards[key])\n            })\n        });\n\n        let successFn =function(data){\n\n        }\n        let errorFn = function(data){\n\n        }\n        postAPI(interpolate(PATIENT_TIMELINE_PDF,[this.props.match.params.id]),reqObj, successFn ,errorFn)\n        this.mailModalClose();\n    }\n    render() {\n        let that = this;\n        let {timelineData} =this.state\n\n\n        return <Card title=\"Timeline\"\n                     extra={<Button.Group>\n                         <Button onClick={() => this.sendCaseSheet(this.state.timelineData)}><Icon type=\"mail\"/> Case Sheet</Button>\n                         <Button type=\"primary\" onClick={() => this.printCaseSheet()}>Print Case Sheet</Button>\n                     </Button.Group>}>\n            <Spin spinning={this.state.loading}>\n                <Row>\n                    <Col span={4}>\n                        <Checkbox\n                            indeterminate={this.state.selectedFiltersIntermediate}\n                            onChange={this.onCheckAllFiltersChange}\n                            checked={this.state.checkAllFilters}>\n                            <b>Select all</b>\n                        </Checkbox>\n                        <br/>\n                        <Checkbox.Group\n                            size={\"large\"}\n                            value={this.state.filterParams}\n                            options={checkboxOption}\n                            // defaultValue={['Apple']}\n                            onChange={this.changeFilters}\n                        />\n                    </Col>\n                    <Col span={20}>\n                        <Affix top={10}>\n                            <h4 style={{\n                                textAlign: 'right', padding: '5px',\n                                backgroundImage: 'linear-gradient(to left, white , transparent)',\n                            }}><Checkbox\n                                indeterminate={this.state.indeterminate}\n                                onChange={this.onCheckAllTimelineCard}\n                                checked={this.state.checkAll}>Select All</Checkbox></h4>\n                        </Affix>\n                        <Timeline progressDot current={1} direction=\"vertical\">\n                            {this.state.timelineData.map(item =>\n                                <Timeline.Item dot={item.type == 'Time' ? <Icon type=\"clock-circle-o\"\n                                                                                style={{fontSize: '25px'}}/> : null}>{timelineItem({\n                                    ...item,\n                                    checkedTimelineCards: that.state.checkedTimelineCards,\n                                    toggleTimelineCheckbox: that.toggleTimelineCheckbox\n                                })}</Timeline.Item>)}\n                        </Timeline>\n\n                        <Modal\n                            title={null}\n                            visible={this.state.visibleMail}\n                            onOk={this.sendMailToPatient}\n                            onCancel={this.mailModalClose}\n                            footer={[\n                                <Button key=\"back\" onClick={this.mailModalClose}>\n                                    Cancel\n                                </Button>,\n                                <Button key=\"submit\" type=\"primary\"  onClick={this.sendMailToPatient}>\n                                    Send\n                                </Button>,\n                            ]}\n                        >\n                            <p>Send Timeline To {_.get(this.props.currentPatient,'user.first_name')} ?</p>\n                            <Input value={this.state.mail_to} placeholder={\"Email\"}\n                                   onChange={(e)=>that.updateFormValue('mail_to',e.target.value)}/>\n                        </Modal>\n                    </Col>\n                </Row>\n            </Spin>\n\n        </Card>\n    }\n}\n\nexport default PatientTimeline;\n\nfunction\n\ndateTimeStamp(item) {\n    return <span><Affix top={20} offsetTop={30}><h2 style={{\n        marginLeft: '10px',\n        padding: '5px',\n        backgroundImage: 'linear-gradient(to right, #ddd , white)',\n        borderRadius: '4px'\n    }}>{moment(item.date).format('LL')}</h2></Affix></span>\n}\n\nfunction timelineItem(item) {\n    switch (item.type) {\n        case 'Clinical Notes':\n            return timelineClinicalNote(item);\n        case 'Appointments':\n            return timelineAppointmentCard(item);\n        case 'Files':\n            return timelineFilesCard(item);\n        case 'Invoices':\n            return timelineInvoiceCard(item);\n        case 'Vital Signs':\n            return timelineVitalSignCard(item);\n        case 'Prescriptions':\n            return timelinePrescriptionCard(item);\n        case 'Payments':\n            return timelinePaymentCard(item);\n        case 'Time':\n            return dateTimeStamp(item);\n        case 'Procedures':\n            return timelineProcedureCard(item);\n        case 'Treatment Plans':\n            return timelineTreatmentPlanCard(item);\n        default:\n            return item.type\n    }\n}\n\nfunction\n\ntimelineAppointmentCard(item) {\n    return <Card hoverable\n                 bodyStyle={{backgroundColor: (item.checkedTimelineCards[item.type] && item.checkedTimelineCards[item.type][item.id] ? '#B5EEFF' : 'initial')}}>\n        <h2><Icon type=\"calendar\"/> Appointment\n            {item.practice_data ? <Tag style={{float: 'right'}}>\n                <Tooltip title=\"Practice Name\">\n                    <b>{item.practice_data.name} </b>\n                </Tooltip>\n            </Tag> : null}\n        </h2>\n        {item.doctor_data ?\n            <p style={{\n                borderLeft: '5px solid ' + item.doctor_data.calendar_colour,\n                paddingLeft: '5px'\n            }}>{item.doctor_data.user.first_name}</p> : null}\n\n        {moment(item.schedule_at).format('hh:mm A')} to {moment(item.schedule_at).add(item.slot, 'mins').format('HH:mm A')}\n    </Card>;\n}\n\nfunction timelineFilesCard(item) {\n    return <Card hoverable\n                 bodyStyle={{backgroundColor: (item.checkedTimelineCards[item.type] && item.checkedTimelineCards[item.type][item.id] ? '#B5EEFF' : 'initial')}}>\n        <h2><Icon type=\"picture\"/> File<Checkbox size=\"large\" style={{float: 'right'}}\n                                                 checked={(item.checkedTimelineCards[item.type] ? item.checkedTimelineCards[item.type][item.id] : false)}\n                                                 onChange={(e) => item.toggleTimelineCheckbox(item.type, item.id, e.target.checked)}/>\n            {item.practice_data ? <Tag style={{float: 'right'}}>\n                <Tooltip title=\"Practice Name\">\n                    <b>{item.practice_data.name} </b>\n                </Tooltip>\n            </Tag> : null}\n        </h2>\n        <img src={makeFileURL(item.file_type)} alt=\"\" style={{height: 100}}/>\n    </Card>\n}\n\nfunction\n\ntimelineInvoiceCard(item) {\n    return <Card hoverable\n                 bodyStyle={{backgroundColor: (item.checkedTimelineCards[item.type] && item.checkedTimelineCards[item.type][item.id] ? '#B5EEFF' : 'initial')}}>\n        <h2><Icon type=\"audit\"/> Invoice<Checkbox size=\"large\" style={{float: 'right'}}\n                                                  checked={(item.checkedTimelineCards[item.type] ? item.checkedTimelineCards[item.type][item.id] : false)}\n                                                  onChange={(e) => item.toggleTimelineCheckbox(item.type, item.id, e.target.checked)}/>\n            {item.practice_data ? <Tag style={{float: 'right'}}>\n                <Tooltip title=\"Practice Name\">\n                    <b>{item.practice_data.name} </b>\n                </Tooltip>\n            </Tag> : null}\n        </h2>\n        {item.procedure.map(proc => <Tag>{proc.name}</Tag>)}\n        {item.inventory.map(proc => <Tag>{proc.name}</Tag>)}\n        <br/><b>{item.invoice_id}</b>\n        <br/><b>Invoice Amount: INR {item.total}</b>\n        <br/><b>Paid Amount: INR {item.payments_data}</b>\n        <br/><b>Due Amount: INR {item.total - item.payments_data}</b>\n    </Card>\n}\n\nfunction\n\ntimelineClinicalNote(item) {\n    return <Card hoverable\n                 bodyStyle={{backgroundColor: (item.checkedTimelineCards[item.type] && item.checkedTimelineCards[item.type][item.id] ? '#B5EEFF' : 'initial')}}>\n        <h2><Icon type=\"solution\"/> Clinical Note Added<Checkbox size=\"large\" style={{float: 'right'}}\n                                                                 checked={(item.checkedTimelineCards[item.type] ? item.checkedTimelineCards[item.type][item.id] : false)}\n                                                                 onChange={(e) => item.toggleTimelineCheckbox(item.type, item.id, e.target.checked)}/>\n            {item.practice ? <Tag style={{float: 'right'}}>\n                <Tooltip title=\"Practice Name\">\n                    <b>{item.practice.name} </b>\n                </Tooltip>\n            </Tag> : null}\n        </h2>\n        {item.chief_complaints ?\n            <p>Chief Complaints\n                <ul>\n                    {item.chief_complaints.split(CUSTOM_STRING_SEPERATOR).map(item =>\n                        item ? <li>{item}</li> : null)}\n                </ul>\n            </p>\n            : null}\n        {item.observations ?\n            <p>Observations\n                <ul>\n                    {item.observations.split(CUSTOM_STRING_SEPERATOR).map(item =>\n                        item ? <li>{item}</li> : null)}\n                </ul>\n            </p>\n            : null}\n        {item.investigations ?\n            <p>Investigations\n                <ul>\n                    {item.investigations.split(CUSTOM_STRING_SEPERATOR).map(item =>\n                        item ? <li>{item}</li> : null)}\n                </ul>\n            </p>\n            : null}\n        {item.diagnosis ?\n            <p>Diagnosis\n                <ul>\n                    {item.diagnosis.split(CUSTOM_STRING_SEPERATOR).map(item =>\n                        item ? <li>{item}</li> : null)}\n                </ul>\n            </p>\n            : null}\n        {item.notes ?\n            <p>Notes\n                <ul>\n                    {item.notes.split(CUSTOM_STRING_SEPERATOR).map(item =>\n                        item ? <li>{item}</li> : null)}\n                </ul>\n            </p>\n            : null}\n    </Card>;\n}\n\nfunction\n\ntimelineVitalSignCard(item) {\n    const columns = [{\n        title: 'Time',\n        dataIndex: 'created_at',\n        key: 'name',\n        render: created_at => <span>{moment(created_at).format('hh:mm A')}</span>,\n    }, {\n        title: 'Temp(F)',\n        key: 'temperature',\n        render: (text, record) => (\n            <span> {record.temperature}<br/>,{record.temperature_part}</span>\n        )\n    }, {\n        title: 'Pulse (BPM)',\n        dataIndex: 'pulse',\n        key: 'pulse',\n    }, {\n        title: 'RR breaths/min',\n        dataIndex: 'resp_rate',\n        key: 'resp_rate',\n    }, {\n        title: 'SYS/DIA mmhg',\n        key: 'address',\n        render: (text, record) => (<>{record.blood_pressure_up ?\n                <span> {record.blood_pressure_up}/{record.blood_pressure_down}<br/>,{record.position}</span> : null}\n            </>\n        )\n    }, {\n        title: 'WEIGHT kg',\n        dataIndex: 'weight',\n        key: 'weight',\n    }, {\n        title: \"Creatinine Level\",\n        key: \"creatinine\",\n        dataIndex: \"creatinine\",\n    }, {\n        title: \"Haemoglobin Level\",\n        key: \"haemoglobin\",\n        dataIndex: \"haemoglobin\",\n    }, {\n        title: \"Urea Level\",\n        key: \"urea\",\n        dataIndex: \"urea\",\n\n    }, {\n        title: \"Uric Acid Level\",\n        key: \"uric_acid\",\n        dataIndex: \"uric_acid\",\n    }];\n    return <Card hoverable\n                 bodyStyle={{backgroundColor: (item.checkedTimelineCards[item.type] && item.checkedTimelineCards[item.type][item.id] ? '#B5EEFF' : 'initial')}}>\n        <h2><Icon type=\"heart\"/> Report Manual Recorded<Checkbox size=\"large\" style={{float: 'right'}}\n                                                                 checked={(item.checkedTimelineCards[item.type] ? item.checkedTimelineCards[item.type][item.id] : false)}\n                                                                 onChange={(e) => item.toggleTimelineCheckbox(item.type, item.id, e.target.checked)}/>\n            {item.practice_data ? <Tag style={{float: 'right'}}>\n                <Tooltip title=\"Practice Name\">\n                    <b>{item.practice_data.name} </b>\n                </Tooltip>\n            </Tag> : null}\n        </h2>\n        {item.doctor_data ?\n            <p style={{\n                borderLeft: '5px solid ' + item.doctor_data.calendar_colour,\n                paddingLeft: '5px'\n            }}>{item.doctor_data.user.first_name}</p> : null}\n        <Table columns={columns}\n               size={\"small\"}\n               pagination={false}\n               dataSource={[item]}/>\n    </Card>\n}\n\nfunction\n\ntimelinePrescriptionCard(item) {\n    return <Card hoverable\n                 bodyStyle={{backgroundColor: (item.checkedTimelineCards[item.type] && item.checkedTimelineCards[item.type][item.id] ? '#B5EEFF' : 'initial')}}>\n        <h2><Icon type=\"solution\"/> Prescription Added<Checkbox size=\"large\" style={{float: 'right'}}\n                                                                checked={(item.checkedTimelineCards[item.type] ? item.checkedTimelineCards[item.type][item.id] : false)}\n                                                                onChange={(e) => item.toggleTimelineCheckbox(item.type, item.id, e.target.checked)}/>\n            {item.practice ? <Tag style={{float: 'right'}}>\n                <Tooltip title=\"Practice Name\">\n                    <b>{item.practice.name} </b>\n                </Tooltip>\n            </Tag> : null}\n        </h2>\n        {item.doctor ?\n            <p style={{\n                borderLeft: '5px solid ' + item.doctor.calendar_colour,\n                paddingLeft: '5px'\n            }}>{item.doctor.user.first_name}</p> : null}\n        {item.drugs.map(drug => <Tag>{drug.name}</Tag>)}\n\n    </Card>\n}\n\nfunction\n\ntimelinePaymentCard(item) {\n    return <Card hoverable\n                 bodyStyle={{backgroundColor: (item.checkedTimelineCards[item.type] && item.checkedTimelineCards[item.type][item.id] ? '#B5EEFF' : 'initial')}}>\n        <h2><Icon type=\"dollar\"/> Payment<Checkbox size=\"large\" style={{float: 'right'}}\n                                                   checked={(item.checkedTimelineCards[item.type] ? item.checkedTimelineCards[item.type][item.id] : false)}\n                                                   onChange={(e) => item.toggleTimelineCheckbox(item.type, item.id, e.target.checked)}/>\n            {item.practice_data ? <Tag style={{float: 'right'}}>\n                <Tooltip title=\"Practice Name\">\n                    <b>{item.practice_data.name} </b>\n                </Tooltip>\n            </Tag> : null}\n        </h2>\n        <b>{item.payment_id}</b>\n        <br/><b>Amount Paid: INR {item.total}</b>\n    </Card>\n}\n\nfunction\n\ntimelineProcedureCard(item) {\n    return <Card hoverable\n                 bodyStyle={{backgroundColor: (item.checkedTimelineCards[item.type] && item.checkedTimelineCards[item.type][item.id] ? '#B5EEFF' : 'initial')}}>\n        <h2>Procedure Performed<Checkbox size=\"large\" style={{float: 'right'}}\n                                         checked={(item.checkedTimelineCards[item.type] ? item.checkedTimelineCards[item.type][item.id] : false)}\n                                         onChange={(e) => item.toggleTimelineCheckbox(item.type, item.id, e.target.checked)}/>\n            {item.practice ? <Tag style={{float: 'right'}}>\n                <Tooltip title=\"Practice Name\">\n                    <b>{item.practice.name} </b>\n                </Tooltip>\n            </Tag> : null}\n        </h2>\n        {item.doctor ?\n            <p style={{\n                borderLeft: '5px solid ' + item.doctor.calendar_colour,\n                paddingLeft: '5px'\n            }}>{item.doctor.user.first_name}</p> : null}\n        {item.treatment_plans.map(item => <Tag>{item.procedure.name}</Tag>)}\n    </Card>\n}\n\nfunction\n\ntimelineTreatmentPlanCard(item) {\n    return <Card hoverable\n                 bodyStyle={{backgroundColor: (item.checkedTimelineCards[item.type] && item.checkedTimelineCards[item.type][item.id] ? '#B5EEFF' : 'initial')}}>\n        <h2>Treatment Plan <Checkbox size=\"large\" style={{float: 'right'}}\n                                     checked={(item.checkedTimelineCards[item.type] ? item.checkedTimelineCards[item.type][item.id] : false)}\n                                     onChange={(e) => item.toggleTimelineCheckbox(item.type, item.id, e.target.checked)}/>\n            {item.practice ? <Tag style={{float: 'right'}}>\n                <Tooltip title=\"Practice Name\">\n                    <b>{item.practice.name} </b>\n                </Tooltip>\n            </Tag> : null}\n        </h2>\n        {item.doctor ?\n            <p style={{\n                borderLeft: '5px solid ' + item.doctor.calendar_colour,\n                paddingLeft: '5px'\n            }}>{item.doctor.user.first_name}</p> : null}\n        {item.treatment_plans.map(item => <Tag>{item.procedure.name}</Tag>)}\n    </Card>\n}\n","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nimport { Component } from \"react\";\n\nfunction appendStyle(id, css) {\n  if (!document.head.querySelector(\"#\" + id)) {\n    var node = document.createElement(\"style\");\n    node.textContent = css;\n    node.type = \"text/css\";\n    node.id = id;\n    document.head.appendChild(node);\n  }\n}\n\nvar StyleInjector = function (_Component) {\n  _inherits(StyleInjector, _Component);\n\n  function StyleInjector() {\n    _classCallCheck(this, StyleInjector);\n\n    return _possibleConstructorReturn(this, _Component.apply(this, arguments));\n  }\n\n  StyleInjector.prototype.componentDidMount = function componentDidMount() {\n    appendStyle(this.props.name, this.props.css);\n  };\n\n  StyleInjector.prototype.componentWillUnmount = function componentWillUnmount() {\n    var node = document.getElementById(this.props.name);\n    node.parentNode.removeChild(node);\n  };\n\n  StyleInjector.prototype.render = function render() {\n    return null;\n  };\n\n  return StyleInjector;\n}(Component);\n\nexport { StyleInjector as default };\nexport var lightboxStyles = function lightboxStyles(_ref) {\n  var imageBackgroundColor = _ref.imageBackgroundColor;\n  return \"\\n  body {\\n    overflow: hidden;\\n  }\\n\\n  .__react_modal_image__modal_container {\\n    position: fixed;\\n    z-index: 1000;\\n    left: 0;\\n    top: 0;\\n    width: 100%;\\n    height: 100%;\\n    background-color: rgba(0, 0, 0, 0.8);\\n    touch-action: none;\\n    overflow: hidden;\\n  }\\n\\n  .__react_modal_image__modal_content {\\n    position: relative;\\n    height: 100%;\\n    width: 100%;\\n  }\\n\\n  .__react_modal_image__modal_content img, \\n  .__react_modal_image__modal_content svg {\\n    position: absolute;\\n    top: 50%;\\n    left: 50%;\\n    transform: translate3d(-50%, -50%, 0);\\n    -webkit-transform: translate3d(-50%, -50%, 0);\\n    -ms-transform: translate3d(-50%, -50%, 0);\\n    overflow: hidden;\\n  }\\n\\n  .__react_modal_image__medium_img {\\n    max-width: 98%;\\n    max-height: 98%;\\n    background-color: \" + imageBackgroundColor + \";\\n  }\\n\\n  .__react_modal_image__large_img {\\n    cursor: move;\\n    background-color: \" + imageBackgroundColor + \"\\n  }\\n\\n  .__react_modal_image__icon_menu a {\\n    display: inline-block;\\n    font-size: 40px;\\n    cursor: pointer;\\n    line-height: 40px;\\n    box-sizing: border-box;\\n    border: none;\\n    padding: 0px 5px 0px 5px;\\n    margin-left: 10px;\\n    color: white;\\n    background-color: rgba(0, 0, 0, 0);\\n  }\\n\\n  .__react_modal_image__icon_menu {\\n    display: inline-block;\\n    float: right;\\n  }\\n\\n  .__react_modal_image__caption {\\n    display: inline-block;\\n    color: white;\\n    font-size: 120%;\\n    padding: 10px;\\n    margin: 0;\\n  }\\n\\n  .__react_modal_image__header {\\n    position: absolute;\\n    top: 0;\\n    width: 100%;\\n    background-color: rgba(0, 0, 0, 0.7);\\n    overflow: hidden;\\n  }\\n\";\n};","/* \n  Icons from https://material.io/icons/\n*/\nimport React from \"react\";\nexport var ZoomInIcon = function ZoomInIcon() {\n  return React.createElement(\"svg\", {\n    fill: \"#ffffff\",\n    height: \"24\",\n    viewBox: \"0 0 24 24\",\n    width: \"24\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, React.createElement(\"path\", {\n    d: \"M0 0h24v24H0z\",\n    fill: \"none\"\n  }), React.createElement(\"path\", {\n    d: \"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z\"\n  }));\n};\nexport var ZoomOutIcon = function ZoomOutIcon() {\n  return React.createElement(\"svg\", {\n    fill: \"#ffffff\",\n    height: \"24\",\n    viewBox: \"0 0 24 24\",\n    width: \"24\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, React.createElement(\"path\", {\n    d: \"M0 0h24v24H0z\",\n    fill: \"none\"\n  }), React.createElement(\"path\", {\n    d: \"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z\"\n  }));\n};\nexport var DownloadIcon = function DownloadIcon() {\n  return React.createElement(\"svg\", {\n    fill: \"#ffffff\",\n    height: \"24\",\n    viewBox: \"0 0 24 24\",\n    width: \"24\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, React.createElement(\"path\", {\n    d: \"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z\"\n  }), React.createElement(\"path\", {\n    d: \"M0 0h24v24H0z\",\n    fill: \"none\"\n  }));\n};\nexport var CloseIcon = function CloseIcon() {\n  return React.createElement(\"svg\", {\n    fill: \"#ffffff\",\n    height: \"24\",\n    viewBox: \"0 0 24 24\",\n    width: \"24\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, React.createElement(\"path\", {\n    d: \"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"\n  }), React.createElement(\"path\", {\n    d: \"M0 0h24v24H0z\",\n    fill: \"none\"\n  }));\n};\nexport var SpinnerIcon = function SpinnerIcon() {\n  return React.createElement(\"svg\", {\n    fill: \"#ffffff\",\n    height: \"48\",\n    viewBox: \"0 0 24 24\",\n    width: \"48\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, React.createElement(\"path\", {\n    d: \"M6 2v6h.01L6 8.01 10 12l-4 4 .01.01H6V22h12v-5.99h-.01L18 16l-4-4 4-3.99-.01-.01H18V2H6zm10 14.5V20H8v-3.5l4-4 4 4zm-4-5l-4-4V4h8v3.5l-4 4z\"\n  }), React.createElement(\"path\", {\n    d: \"M0 0h24v24H0V0z\",\n    fill: \"none\"\n  }));\n};\nexport var RotateIcon = function RotateIcon() {\n  return React.createElement(\"svg\", {\n    fill: \"#ffffff\",\n    width: \"24\",\n    height: \"24\",\n    viewBox: \"0 0 24 24\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, React.createElement(\"path\", {\n    fill: \"none\",\n    d: \"M0 0h24v24H0V0zm0 0h24v24H0V0z\"\n  }), React.createElement(\"path\", {\n    d: \"M7.47 21.49C4.2 19.93 1.86 16.76 1.5 13H0c.51 6.16 5.66 11 11.95 11 .23 0 .44-.02.66-.03L8.8 20.15l-1.33 1.34zM12.05 0c-.23 0-.44.02-.66.04l3.81 3.81 1.33-1.33C19.8 4.07 22.14 7.24 22.5 11H24c-.51-6.16-5.66-11-11.95-11zM16 14h2V8c0-1.11-.9-2-2-2h-6v2h6v6zm-8 2V4H6v2H4v2h2v8c0 1.1.89 2 2 2h8v2h2v-2h2v-2H8z\"\n  }));\n};","import React from \"react\";\nimport { ZoomInIcon, ZoomOutIcon, DownloadIcon, CloseIcon, RotateIcon } from \"./icons\";\n\nvar Header = function Header(_ref) {\n  var image = _ref.image,\n      alt = _ref.alt,\n      zoomed = _ref.zoomed,\n      toggleZoom = _ref.toggleZoom,\n      toggleRotate = _ref.toggleRotate,\n      onClose = _ref.onClose,\n      enableDownload = _ref.enableDownload,\n      enableZoom = _ref.enableZoom,\n      enableRotate = _ref.enableRotate;\n  return React.createElement(\"div\", {\n    className: \"__react_modal_image__header\"\n  }, React.createElement(\"span\", {\n    className: \"__react_modal_image__icon_menu\"\n  }, enableDownload && React.createElement(\"a\", {\n    href: image,\n    download: true\n  }, React.createElement(DownloadIcon, null)), enableZoom && React.createElement(\"a\", {\n    onClick: toggleZoom\n  }, zoomed ? React.createElement(ZoomOutIcon, null) : React.createElement(ZoomInIcon, null)), enableRotate && React.createElement(\"a\", {\n    onClick: toggleRotate\n  }, React.createElement(RotateIcon, null)), React.createElement(\"a\", {\n    onClick: onClose\n  }, React.createElement(CloseIcon, null))), alt && React.createElement(\"span\", {\n    className: \"__react_modal_image__caption\"\n  }, alt));\n};\n\nexport default Header;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nimport React, { Component } from \"react\";\nimport { SpinnerIcon } from \"./icons\";\n\nvar Image = function (_Component) {\n  _inherits(Image, _Component);\n\n  function Image() {\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, Image);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, _Component.call.apply(_Component, [this].concat(args))), _this), _this.state = {\n      loading: true\n    }, _this.handleOnLoad = function () {\n      _this.setState({\n        loading: false\n      });\n    }, _this.handleOnContextMenu = function (event) {\n      !_this.props.contextMenu && event.preventDefault();\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  Image.prototype.render = function render() {\n    var _props = this.props,\n        id = _props.id,\n        className = _props.className,\n        src = _props.src,\n        style = _props.style,\n        handleDoubleClick = _props.handleDoubleClick;\n    return React.createElement(\"div\", null, this.state.loading && React.createElement(SpinnerIcon, null), React.createElement(\"img\", {\n      id: id,\n      className: className,\n      src: src,\n      style: style,\n      onLoad: this.handleOnLoad,\n      onDoubleClick: handleDoubleClick,\n      onContextMenu: this.handleOnContextMenu\n    }));\n  };\n\n  return Image;\n}(Component);\n\nexport { Image as default };","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nimport React, { Component } from \"react\";\nimport StyleInjector, { lightboxStyles } from \"./styles\";\nimport Header from \"./Header\";\nimport Image from \"./Image\";\n\nvar Lightbox = function (_Component) {\n  _inherits(Lightbox, _Component);\n\n  function Lightbox() {\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, Lightbox);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, _Component.call.apply(_Component, [this].concat(args))), _this), _this.state = {\n      move: {\n        x: 0,\n        y: 0\n      },\n      moveStart: undefined,\n      zoomed: false,\n      rotationDeg: 0\n    }, _this.handleKeyDown = function (event) {\n      // ESC or ENTER closes the modal\n      if (event.keyCode === 27 || event.keyCode === 13) {\n        _this.props.onClose();\n      }\n    }, _this.getCoordinatesIfOverImg = function (event) {\n      var point = event.changedTouches ? event.changedTouches[0] : event;\n\n      if (point.target.id !== \"react-modal-image-img\") {\n        // the img was not a target of the coordinates\n        return;\n      }\n\n      var dim = _this.contentEl.getBoundingClientRect();\n\n      var x = point.clientX - dim.left;\n      var y = point.clientY - dim.top;\n      return {\n        x: x,\n        y: y\n      };\n    }, _this.handleMouseDownOrTouchStart = function (event) {\n      event.preventDefault();\n\n      if (event.touches && event.touches.length > 1) {\n        // more than one finger, ignored\n        return;\n      }\n\n      var coords = _this.getCoordinatesIfOverImg(event);\n\n      if (!coords) {\n        // click outside the img => close modal\n        _this.props.onClose();\n      }\n\n      if (!_this.state.zoomed) {\n        // do not allow drag'n'drop if zoom has not been applied\n        return;\n      }\n\n      _this.setState(function (prev) {\n        return {\n          moveStart: {\n            x: coords.x - prev.move.x,\n            y: coords.y - prev.move.y\n          }\n        };\n      });\n    }, _this.handleMouseMoveOrTouchMove = function (event) {\n      event.preventDefault();\n\n      if (!_this.state.zoomed || !_this.state.moveStart) {\n        // do not allow drag'n'drop if zoom has not been applied\n        // or if there has not been a click\n        return;\n      }\n\n      if (event.touches && event.touches.length > 1) {\n        // more than one finger, ignored\n        return;\n      }\n\n      var coords = _this.getCoordinatesIfOverImg(event);\n\n      if (!coords) {\n        return;\n      }\n\n      _this.setState(function (prev) {\n        return {\n          move: {\n            x: coords.x - prev.moveStart.x,\n            y: coords.y - prev.moveStart.y\n          }\n        };\n      });\n    }, _this.handleMouseUpOrTouchEnd = function (event) {\n      _this.setState({\n        moveStart: undefined\n      });\n    }, _this.toggleZoom = function (event) {\n      event.preventDefault();\n\n      _this.setState(function (prev) {\n        return {\n          zoomed: !prev.zoomed,\n          // reset position if zoomed out\n          move: prev.zoomed ? {\n            x: 0,\n            y: 0\n          } : prev.move\n        };\n      });\n    }, _this.toggleRotate = function (event) {\n      event.preventDefault();\n      var rotationDeg = _this.state.rotationDeg;\n\n      if (rotationDeg === 360) {\n        _this.setState({\n          rotationDeg: 90\n        });\n\n        return;\n      }\n\n      _this.setState(function (prevState) {\n        return {\n          rotationDeg: prevState.rotationDeg += 90\n        };\n      });\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  Lightbox.prototype.componentDidMount = function componentDidMount() {\n    document.addEventListener(\"keydown\", this.handleKeyDown, false);\n  };\n\n  Lightbox.prototype.componentWillUnmount = function componentWillUnmount() {\n    document.removeEventListener(\"keydown\", this.handleKeyDown, false);\n  };\n\n  Lightbox.prototype.render = function render() {\n    var _this2 = this;\n\n    var _props = this.props,\n        medium = _props.medium,\n        large = _props.large,\n        alt = _props.alt,\n        onClose = _props.onClose,\n        hideDownload = _props.hideDownload,\n        hideZoom = _props.hideZoom,\n        showRotate = _props.showRotate,\n        _props$imageBackgroun = _props.imageBackgroundColor,\n        imageBackgroundColor = _props$imageBackgroun === undefined ? \"black\" : _props$imageBackgroun;\n    var _state = this.state,\n        move = _state.move,\n        zoomed = _state.zoomed,\n        rotationDeg = _state.rotationDeg;\n    return React.createElement(\"div\", null, React.createElement(StyleInjector, {\n      name: \"__react_modal_image__lightbox\",\n      css: lightboxStyles({\n        imageBackgroundColor: imageBackgroundColor\n      })\n    }), React.createElement(\"div\", {\n      className: \"__react_modal_image__modal_container\"\n    }, React.createElement(\"div\", {\n      className: \"__react_modal_image__modal_content\",\n      onMouseDown: this.handleMouseDownOrTouchStart,\n      onMouseUp: this.handleMouseUpOrTouchEnd,\n      onMouseMove: this.handleMouseMoveOrTouchMove,\n      onTouchStart: this.handleMouseDownOrTouchStart,\n      onTouchEnd: this.handleMouseUpOrTouchEnd,\n      onTouchMove: this.handleMouseMoveOrTouchMove,\n      ref: function ref(el) {\n        _this2.contentEl = el;\n      }\n    }, zoomed && React.createElement(Image, {\n      id: \"react-modal-image-img\",\n      className: \"__react_modal_image__large_img\",\n      src: large || medium,\n      style: {\n        transform: \"translate3d(-50%, -50%, 0) translate3d(\" + move.x + \"px, \" + move.y + \"px, 0) rotate(\" + rotationDeg + \"deg)\",\n        WebkitTransform: \"translate3d(-50%, -50%, 0) translate3d(\" + move.x + \"px, \" + move.y + \"px, 0) rotate(\" + rotationDeg + \"deg)\",\n        MsTransform: \"translate3d(-50%, -50%, 0) translate3d(\" + move.x + \"px, \" + move.y + \"px, 0) rotate(\" + rotationDeg + \"deg)\"\n      },\n      handleDoubleClick: this.toggleZoom\n    }), !zoomed && React.createElement(Image, {\n      id: \"react-modal-image-img\",\n      className: \"__react_modal_image__medium_img\",\n      src: medium || large,\n      handleDoubleClick: this.toggleZoom,\n      contextMenu: !medium,\n      style: {\n        transform: \"translate3d(-50%, -50%, 0) rotate(\" + rotationDeg + \"deg)\",\n        WebkitTransform: \"translate3d(-50%, -50%, 0) rotate(\" + rotationDeg + \"deg)\",\n        MsTransform: \"translate3d(-50%, -50%, 0) rotate(\" + rotationDeg + \"deg)\"\n      }\n    })), React.createElement(Header, {\n      image: large || medium,\n      alt: alt,\n      zoomed: zoomed,\n      toggleZoom: this.toggleZoom,\n      toggleRotate: this.toggleRotate,\n      onClose: onClose,\n      enableDownload: !hideDownload,\n      enableZoom: !hideZoom,\n      enableRotate: !!showRotate\n    })));\n  };\n\n  return Lightbox;\n}(Component);\n\nexport { Lightbox as default };","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nimport React, { Component } from \"react\";\nimport Lightbox from \"./Lightbox\";\nexport { default as Lightbox } from \"./Lightbox\";\n\nvar _default = function (_Component) {\n  _inherits(_default, _Component);\n\n  function _default() {\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, _default);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, _Component.call.apply(_Component, [this].concat(args))), _this), _this.state = {\n      modalOpen: false\n    }, _this.toggleModal = function () {\n      _this.setState(function (prev) {\n        return {\n          modalOpen: !prev.modalOpen\n        };\n      });\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  _default.prototype.render = function render() {\n    var _props = this.props,\n        className = _props.className,\n        small = _props.small,\n        smallSrcSet = _props.smallSrcSet,\n        medium = _props.medium,\n        large = _props.large,\n        alt = _props.alt,\n        hideDownload = _props.hideDownload,\n        hideZoom = _props.hideZoom,\n        showRotate = _props.showRotate,\n        imageBackgroundColor = _props.imageBackgroundColor;\n    var modalOpen = this.state.modalOpen;\n    return React.createElement(\"div\", null, React.createElement(\"img\", {\n      className: className,\n      style: {\n        cursor: \"pointer\",\n        maxWidth: \"100%\",\n        maxHeight: \"100%\"\n      },\n      onClick: this.toggleModal,\n      src: small,\n      srcSet: smallSrcSet,\n      alt: alt\n    }), modalOpen && React.createElement(Lightbox, {\n      medium: medium,\n      large: large,\n      alt: alt,\n      onClose: this.toggleModal,\n      hideDownload: hideDownload,\n      hideZoom: hideZoom,\n      showRotate: showRotate,\n      imageBackgroundColor: imageBackgroundColor\n    }));\n  };\n\n  return _default;\n}(Component);\n\nexport { _default as default };","import React from \"react\";\nimport {\n    Button,\n    Card,\n    Col,\n    Icon,\n    List,\n    Modal,\n    Radio,\n    Row,\n    Checkbox,\n    Menu,\n    Dropdown,\n    Input,\n    Popconfirm,\n    Affix, Tag\n} from \"antd\";\nimport {\n    getAPI,\n    postAPI,\n    putAPI,\n    interpolate,\n    makeFileURL,\n    displayMessage,\n    fildFileExtension\n} from \"../../../utils/common\";\nimport {\n    ALL_PATIENT_FILES,\n    EMR_FILETAGS,\n    PATIENT_FILES,\n    MEDICAL_CERTIFICATE_API,\n    MEDICAL_CERTIFICATE_PDF,\n    ALL_MEDICAL_CERITICATE_API,\n    PATIENT_MAILEDFILES\n} from \"../../../constants/api\";\nimport DynamicFieldsForm from \"../../common/DynamicFieldsForm\";\nimport {Form} from \"antd/lib/index\";\nimport {MULTI_SELECT_FIELD, SINGLE_IMAGE_UPLOAD_FIELD, INPUT_FIELD} from \"../../../constants/dataKeys\";\nimport {Redirect, Link} from 'react-router-dom';\nimport InfiniteFeedLoaderButton from \"../../common/InfiniteFeedLoaderButton\";\nimport Meta from \"antd/lib/card/Meta\";\nimport {BACKEND_BASE_URL} from \"../../../config/connect\";\nimport ModalImage from \"react-modal-image\";\nimport {ERROR_MSG_TYPE, SUCCESS_MSG_TYPE} from \"../../../constants/dataKeys\";\nimport moment from \"moment\";\nimport {PDF_FILE_EXTENSION} from \"../../../constants/hardData\";\nimport * as _ from \"lodash\";\n\nclass PatientFiles extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            files: [],\n            tags: [],\n            showAddModal: false,\n            loading: true,\n            selectedFiles: {},\n            selectedTags: {},\n            filterSearchTag: null,\n            showAddMedicalModel: false,\n            // filterSearchMedical:''\n            medicalCertificate: [],\n            visible: false,\n            filesData: {},\n            mailedfiles: [],\n            visibleTag:false,\n        };\n        this.loadData = this.loadData.bind(this);\n        this.loadMedicalCertificate = this.loadMedicalCertificate.bind(this);\n    }\n\n    componentWillMount() {\n        this.loadData();\n        this.loadTags();\n        this.loadMedicalCertificate();\n    }\n\n    loadData(page = 1) {\n        let that = this;\n        this.setState({\n            loading: true\n        })\n        let successFn = function (data) {\n            that.setState(function (prevState) {\n                let lastPatient = null;\n                if (data.current == 1) {\n                    let newData = data.results.map(file => {\n                        if (moment(file.created_at).format('YYYYMMDD') != moment(lastPatient).format('YYYYMMDD')) {\n                            lastPatient = moment(file.created_at);\n                            return {...file, newDate: true}\n                        }\n                        return {...file, newDate: false}\n                    });\n                    return {\n                        files: newData,\n                        total: data.count,\n                        loadMoreFiles: data.next,\n                        loading: false,\n                    }\n                } else {\n                    let newData = data.results.map(file => {\n                        if (moment(file.created_at).format('YYYYMMDD') != moment(lastPatient).format('YYYYMMDD')) {\n                            lastPatient = moment(file.created_at);\n                            return {...file, newDate: true}\n                        }\n                        return {...file, newDate: false}\n                    });\n                    return {\n                        files: [...prevState.files, ...newData],\n                        loadMoreFiles: data.next,\n                        loading: false\n                    }\n                }\n\n            })\n        }\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            })\n        }\n        let apiParams = {\n            page: page,\n            practice: this.props.active_practiceId,\n        };\n\n        if (this.props.match.params.id) {\n            apiParams.patient = this.props.match.params.id;\n        }\n        if (this.props.showAllClinic && this.props.match.params.id) {\n            delete (apiParams.practice)\n        }\n        if (this.state.filterSearchTag) {\n            apiParams.tag = this.state.filterSearchTag\n        } else if (this.state.filterSearchTag == '') {\n            apiParams.notag = true\n        }\n        getAPI(PATIENT_FILES, successFn, errorFn, apiParams);\n\n    }\n\n    loadTags() {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                tags: data,\n                loading: false\n            })\n        }\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            })\n        }\n        getAPI(interpolate(EMR_FILETAGS, [this.props.active_practiceId]), successFn, errorFn);\n    }\n\n    loadMedicalCertificate(page = 1) {\n        let that = this;\n        that.setState({\n            loading: true\n        });\n        let successFn = function (data) {\n            if (data.current == 1) {\n\n                that.setState({\n                    total: data.count,\n                    medicalCertificate: data.results,\n                    loading: false,\n                    loadMoreCertificate: data.next\n                })\n            } else {\n                that.setState(function (prevState) {\n                    return {\n                        total: data.count,\n                        medicalCertificate: [...prevState.medicalCertificate, ...data.results],\n                        loading: false,\n                        loadMoreCertificate: data.next\n                    }\n                })\n            }\n        }\n\n\n        //     that.setState({\n        //         medicalCertificate: data.results,\n        //         loading:false\n        //     })\n        // }\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            })\n\n        }\n        if (this.props.currentPatient) {\n            getAPI(interpolate(MEDICAL_CERTIFICATE_API, [this.props.active_practiceId, this.props.currentPatient.id, page]), successFn, errorFn);\n        }\n        if (this.props.showAllClinic && this.props.currentPatient) {\n            getAPI(interpolate(ALL_MEDICAL_CERITICATE_API, [this.props.currentPatient.id, page]), successFn, errorFn);\n        } else {\n            getAPI(interpolate(ALL_MEDICAL_CERITICATE_API, [this.props.active_practiceId, page]), successFn, errorFn);\n        }\n\n    }\n\n    loadMailedFiles = (page = 1) => {\n        let that = this;\n        let successFn = function (data) {\n            that.setState(function (prevState) {\n                if (data.current == 1) {\n                    return {\n                        files: [...data.results],\n                        total: data.count,\n                        loadMoreFiles: data.next,\n                        loading: false,\n                    }\n                } else {\n                    return {\n                        files: [...prevState.files, ...data.results],\n                        loadMoreFiles: data.next,\n                        loading: false\n                    }\n                }\n\n            })\n        }\n        let errorFn = function () {\n\n        }\n        let params = {\n            mailed: true,\n            page: page,\n            practice: this.props.active_practiceId,\n        }\n        if (this.props.currentPatient) {\n            params.patient = this.props.currentPatient.id;\n        }\n        if (this.props.showAllClinic && this.props.currentPatient) {\n            delete (params.practice)\n        }\n        getAPI(PATIENT_MAILEDFILES, successFn, errorFn, params);\n    }\n\n    triggerAddModal(option) {\n        this.setState({\n            showAddModal: !!option\n        })\n    }\n\n    triggerAddMedicalCertificateModal(option) {\n        this.setState({\n            showAddMedicalModel: !!option\n        })\n    }\n\n    filesCompleteToggle(id, option) {\n        this.setState(function (prevState) {\n            let selected = {...prevState.selectedFiles}\n            if (option) {\n                selected[id] = !!option\n            } else {\n                delete selected[id];\n            }\n            return {selectedFiles: {...selected}}\n        });\n    }\n\n    tagsCompleteToggle(id, option) {\n        this.setState(function (prevState) {\n            let selected = {...prevState.selectedTags}\n            if (option) {\n                selected[id] = !!option\n            } else {\n                delete selected[id];\n            }\n            return {selectedTags: {...selected}}\n        });\n    }\n\n    filesWithTags() {\n        let that = this;\n        let reqData = {\n            id: Object.keys(this.state.selectedFiles),\n            file_tags: Object.keys(this.state.selectedTags),\n            patient: this.props.match.params.id,\n        };\n        let successFn = function () {\n            that.setState({\n                selectedFiles: {},\n                visibleTag:false,\n            })\n            that.loadData()\n        }\n        let errorFn = function () {\n\n        }\n        postAPI(interpolate(PATIENT_FILES, [this.props.match.params.id]), reqData, successFn, errorFn)\n    }\n\n    filterTags = (e) => {\n        let that = this;\n        this.setState({\n            filterSearchTag: e.target.value\n        }, function () {\n            that.loadData();\n        })\n    }\n\n    deleteMedicalCertificate(item) {\n        let that = this;\n        let reqData = {\n            is_active: false,\n            patient: item.patient,\n            id: item.id\n        }\n\n        let successFn = function (data) {\n            that.loadData();\n            that.loadMedicalCertificate();\n        }\n        let errorFn = function () {\n\n        };\n        postAPI(interpolate(MEDICAL_CERTIFICATE_API, [that.props.active_practiceId]), reqData, successFn, errorFn);\n    }\n\n    deleteFile(item) {\n        let that = this;\n        let reqData = {\n            id: item.id,\n            patient: item.patient,\n            is_active: false\n        }\n        let successFn = function (data) {\n            that.setState({\n                showPDFFile : false\n            })\n            that.loadData();\n        }\n        let errorFn = function () {\n            displayMessage(ERROR_MSG_TYPE, \"Please Select Patient.\")\n\n        }\n        postAPI(interpolate(PATIENT_FILES, [this.props.match.params.id]), reqData, successFn, errorFn);\n    }\n\n    loadPDF(id) {\n        let that = this;\n        let successFn = function (data) {\n            if (data.report)\n                window.open(BACKEND_BASE_URL + data.report);\n        }\n        let errorFn = function () {\n\n        }\n        getAPI(interpolate(MEDICAL_CERTIFICATE_PDF, [id]), successFn, errorFn);\n    }\n\n    showModal = (item) => {\n        this.setState(function () {\n            return {visible: true, filesData: {...item}}\n        });\n    };\n\n    handleCancel = () => {\n        this.setState({visible: false});\n    };\n\n    togglePDFModal = (path) => {\n        this.setState({\n            showPDFFile: path\n        })\n    }\n\n    updateFormValue =(type,value)=>{\n        this.setState({\n            [type]: value\n        })\n    };\n    mailModalOpen =() =>{\n        this.setState({\n            visibleMail:true\n        })\n    };\n\n    mailModalClose =() =>{\n        this.setState({\n            visibleMail:false\n        })\n    };\n\n\n    sendFiles =()=>{\n        this.mailModalOpen()\n        this.setState({\n            mail_to:_.get(this.props.currentPatient,'user.email')\n        })\n\n    };\n\n    handleVisibleChange =()=>{\n        console.log(\"sdad\")\n        this.setState({\n            visibleTag: !this.state.visibleTag, \n        });\n      };\n\n    render() {\n        let that = this;\n        const PatientFilesForm = Form.create()(DynamicFieldsForm);\n        const fields = [{\n            key: 'file_type',\n            label: 'File',\n            type: SINGLE_IMAGE_UPLOAD_FIELD,\n            required: true\n        }, {\n            key: 'file_tags',\n            label: 'Tags',\n            type: MULTI_SELECT_FIELD,\n            options: this.state.tags.map(tag => ({label: tag.name, value: tag.id}))\n        }];\n        const formProps = {\n            method: 'post',\n            successFn: function () {\n                that.triggerAddModal(false);\n                that.loadData()\n            },\n            errorFn: function () {\n            },\n            action: interpolate(PATIENT_FILES, [this.props.match.params.id])\n        }\n        const tagsMenu = (<div style={{\n                // width: 100,\n                boxShadow: '0 2px 4px #111',\n                border: '1px solid #bbb',\n                borderRadius: 2,\n                paddingBottom: '30px',\n                backgroundColor: 'white'\n            }}>\n                <ul style={{listStyle: 'none', paddingInlineStart: 0, paddingTop: 10}}>\n                    {this.state.tags ?\n                        <div>\n                            {this.state.tags.map((tag) => <li key={tag.id}>\n                                <Checkbox value={tag.id}\n                                          onChange={(e) => that.tagsCompleteToggle(tag.id, e.target.checked)}\n                                          checked={that.state.selectedTags[tag.id]}>{tag.name} </Checkbox>\n                            </li>)}\n                        </div>\n                        : null}\n                </ul>\n                <span>\n                    <Button type=\"primary\" onClick={() => this.filesWithTags()}\n                            style={{float: \"right\", borderStyle: \"none\"}}>Done</Button>\n                </span>\n            </div>\n        );\n        const defaultFields = [{key: 'is_active', value: true}, {\n            key: 'patient',\n            value: this.props.currentPatient ? this.props.currentPatient.id : null\n        }, {key: 'practice', value: this.props.active_practiceId}]\n\n\n        return <Card title=\"Files\"\n                     extra={this.props.match.params.id ? <Button.Group>\n                         <Link to={\"/patient/\" + this.props.match.params.id + \"/emr/create-medicalCertificate\"}>\n                             <Button\n                                 type=\"primary\">\n                                 <Icon type=\"plus\"/>&nbsp;Add Medical Certificate</Button> </Link>\n\n                         <Dropdown overlay={tagsMenu} trigger={['click']} placement=\"bottomLeft\" onVisibleChange={that.handleVisibleChange} visible={that.state.visibleTag}>\n                             <Button><Icon type=\"plus\"/>Add/Remove File Tags</Button>\n                         </Dropdown>\n\n                         <Button onClick={() => this.triggerAddModal(true)}><Icon type=\"plus\"/>Add</Button>\n                         <Button  style={{marginRight: \"10px\"}}\n                                  onClick={() => that.sendFiles()}>\n                             <Icon type=\"mail\"/> &nbsp; Send to patient\n                         </Button>\n                     </Button.Group> : <Button.Group>\n                         <Button type={\"primary\"} style={{marginRight: \"10px\"}}\n                                 onClick={() => this.props.togglePatientListModal(true)}>\n                             <Icon type=\"plus\"/>&nbsp; Add Medical Certificate\n                         </Button>\n\n                         <Dropdown overlay={tagsMenu} trigger={['click']} placement=\"bottomLeft\" onVisibleChange={that.handleVisibleChange} visible={that.state.visibleTag}>\n                \n                             <Button><Icon type=\"plus\"/>Add/Remove File Tags</Button>\n                         </Dropdown>\n\n                         <Button type={\"primary\"} style={{marginRight: \"10px\"}}\n                                 onClick={() => this.props.togglePatientListModal(true)}>\n                             <Icon type=\"plus\"/> &nbsp; Add\n                         </Button>\n                     </Button.Group>}>\n            <Row gutter={8}>\n                <Col span={6}\n                     style={{\n                         height: 'calc(100vh - 55px)',\n                         overflow: 'auto',\n                         paddingRight: '10px',\n                         // backgroundColor: '#e3e5e6',\n                         borderRight: '1px solid #ccc'\n                     }}>\n                    <Radio.Group buttonStyle=\"solid\" defaultValue=\"all\" onChange={this.filterTags}>\n                        <h2>Uploaded Files</h2>\n                        <Radio.Button style={{width: '100%', backgroundColor: 'transparent', border: '0px'}}\n                                      value={null}>\n                            All Files</Radio.Button>\n                        {this.state.tags.map(tag => <Radio.Button\n                            key={tag.id}\n                            style={{width: '100%', backgroundColor: 'transparent', border: '0px'}} value={tag.id}>\n                            {tag.name}\n                        </Radio.Button>)}\n\n                        <Radio.Button style={{width: '100%', backgroundColor: 'transparent', border: '0px'}}\n                                      value=\"\">\n                            Untagged Files\n                        </Radio.Button>\n                        <p><br/></p>\n\n                    </Radio.Group>\n\n                    <Radio.Group buttonStyle=\"solid\" defaultValue=\"\">\n                        <h2>Generated Files</h2>\n                        <Radio.Button key=\"0\" style={{width: '100%', backgroundColor: 'transparent', border: '0px'}}\n                                      value=\"a\" onClick={() => this.loadMailedFiles()}>\n                            Emailed Files\n                        </Radio.Button>\n\n                        <Radio.Button key=\"1\" style={{width: '100%', backgroundColor: 'transparent', border: '0px'}}\n                                      onClick={() => this.loadMedicalCertificate()}>\n                            Medical Leave Certificate </Radio.Button>\n                    </Radio.Group>\n                </Col>\n                <Col span={18}>\n                    <Row>\n                        {this.state.files.map(item => (\n                            <>\n                                {item.newDate ? <Col span={24}>\n                                    <Affix top={20} offsetTop={30}><h2 style={{\n                                        marginLeft: '10px',\n                                        padding: '5px',\n                                        backgroundImage: 'linear-gradient(to right, #ddd , white)',\n                                        borderRadius: '4px'\n                                    }}>{moment(item.created_at).format('LL')}</h2></Affix>\n                                </Col> : null}\n                                <Col span={8}>\n                                    <div\n                                        // onClick={() => this.showModal(item)}\n                                        style={{\n                                            width: '100%',\n                                            height: '150px',\n                                            border: '1px solid #bbb',\n                                            // background: '#fff url(\"' + makeFileURL(item.file_type) + '\") no-repeat center center',\n                                            backgroundSize: 'cover',\n                                            padding: 'auto',\n                                            overflow: 'hidden'\n\n                                        }}>\n                                        <Checkbox key={item.id}\n                                                  disabled={(item.practice != this.props.active_practiceId)}\n                                                  style={{\n                                                      margin: 10,\n                                                      position: 'absolute',\n                                                      top: 5,\n                                                      left: 5,\n                                                      boxShadow: '0 0px 5px #000 '\n                                                  }}\n                                                  onChange={(e) => that.filesCompleteToggle(item.id, e.target.checked)}\n                                                  checked={that.state.selectedFiles[item.id]}/>\n\n                                        {fildFileExtension(item.file_type) == PDF_FILE_EXTENSION ?\n                                            <div style={{textAlign: 'center', paddingTop: 30, height: '100%'}}\n                                                 onClick={() => this.togglePDFModal(item)}>\n                                                <Icon type=\"file-pdf\" style={{fontSize: '56px', color: '#08c'}}/>\n                                                <h4>Preview Not Avaialable</h4>\n                                            </div> :\n                                            <ModalImage style={{border: \"3px solid red\"}}\n                                                // small={makeFileURL(this.state.filesData.file_type)}\n                                                        large={makeFileURL(item.file_type)}\n                                                        small={makeFileURL(item.file_type)}\n                                                        alt={<Button type=\"danger\"\n                                                                     onClick={() => this.deleteFile(item)}>\n                                                            <Icon type=\"delete\"/></Button>}\n                                            />}\n                                    </div>\n                                    <Card bodyStyle={{padding: 3}} style={{marginBottom: 15}}>\n                                        <Link to={\"/patient/\" + item.patient_data.id + \"/emr/files/\"}><h4>\n                                            <b>{item.patient_data.user.first_name}&nbsp;({item.patient_data.custom_id})</b>\n                                        </h4></Link>\n                                        <Tag><b>{item.practice_data ? item.practice_data.name : '--'}</b></Tag>\n                                    </Card>\n                                </Col>\n                            </>\n                        ))}\n                    </Row>\n                    <Row>\n                        <Col span={24}>\n                            <InfiniteFeedLoaderButton loaderFunction={() => this.loadData(that.state.loadMoreFiles)}\n                                                      loading={this.state.loading}\n                                                      hidden={!this.state.loadMoreFiles}/>\n                        </Col>\n\n                    </Row>\n                    <Card title=\"Medical Certificate\">\n                        <List loading={this.state.loading}\n                              grid={{gutter: 16, column: 3}}\n                              dataSource={this.state.medicalCertificate}\n                              renderItem={item => (\n                                  <Card style={{width: 600}}\n                                        actions={[<p>{\"Issued on : \" + item.date}</p>,\n                                            <a onClick={() => this.loadPDF(item.id)}><Icon type=\"printer\"/></a>,\n                                            <Popconfirm title=\"Are you sure delete this item?\"\n                                                        onConfirm={() => this.deleteMedicalCertificate(item)}\n                                                        okText=\"Yes\" cancelText=\"No\">\n                                                <Icon type=\"delete\"/>\n                                            </Popconfirm>\n                                        ]}>\n                                      <Meta title={\"Medical Leave #\" + \"\" + item.id}\n                                            description={\"Excused From :\" + item.excused_duty_from + \" till \" + item.excused_duty_to}>\n\n                                      </Meta>\n                                  </Card>\n                              )}\n                        />\n                        <InfiniteFeedLoaderButton\n                            loaderFunction={() => this.loadData(that.state.loadMoreCertificate)}\n                            loading={this.state.loading}\n                            hidden={!this.state.loadMoreCertificate}/>\n\n\n\n                    </Card>\n\n\n                </Col>\n\n            </Row>\n            <Modal\n                title={null}\n                visible={this.state.visibleMail}\n                onOk={this.sendMailToPatient}\n                onCancel={this.mailModalClose}\n                footer={[\n                    <Button key=\"back\" onClick={this.mailModalClose}>\n                        Cancel\n                    </Button>,\n                    <Button key=\"submit\" type=\"primary\"  onClick={this.sendMailToPatient}>\n                        Send\n                    </Button>,\n                ]}\n            >\n                <p>Send Timeline To {_.get(this.props.currentPatient,'user.first_name')} ?</p>\n                <Input value={this.state.mail_to} placeholder={\"Email\"}\n                       onChange={(e)=>that.updateFormValue('mail_to',e.target.value)}/>\n            </Modal>\n            <Modal visible={this.state.showAddModal}\n                   onCancel={() => this.triggerAddModal(false)}\n                   footer={null}>\n                <PatientFilesForm title=\"Add Files\"\n                                  fields={fields}\n                                  defaultValues={defaultFields}\n                                  formProp={formProps}/>\n            </Modal>\n            <Modal visible={this.state.showPDFFile}\n                   key={this.state.showPDFFile}\n                   centered\n                   width={1000}\n                   onCancel={() => this.togglePDFModal(false)}\n                   footer={null} style={{padding:0}}\n            title={<h4><span style={{color:'red',textAlign:'right'}} onClick={() => this.deleteFile(this.state.showPDFFile)}>DELETE</span></h4>}>\n                {this.state.showPDFFile ?\n                    <iframe src={makeFileURL(this.state.showPDFFile.file_type)} frameborder=\"0\" style={{width:'100%',minHeight:'80vh'}}></iframe> : null}\n            </Modal>\n        </Card>\n\n\n        return <Card title=\"Files\"\n        >\n            <Row gutter={8}>\n                <Col span={6}\n                     style={{\n                         height: 'calc(100vh - 55px)',\n                         overflow: 'auto',\n                         paddingRight: '10px',\n                         // backgroundColor: '#e3e5e6',\n                         borderRight: '1px solid #ccc'\n                     }}>\n                    <Radio.Group buttonStyle=\"solid\" defaultValue=\"all\" onChange={this.filterTags}>\n                        <h2>Uploaded Files</h2>\n                        <Radio.Button style={{width: '100%', backgroundColor: 'transparent', border: '0px'}}\n                                      value={null}>\n                            All Files</Radio.Button>\n                        {this.state.tags.map(tag => <Radio.Button\n                            key={tag.id}\n                            style={{width: '100%', backgroundColor: 'transparent', border: '0px'}} value={tag.id}>\n                            {tag.name}\n                        </Radio.Button>)}\n\n                        <Radio.Button style={{width: '100%', backgroundColor: 'transparent', border: '0px'}}\n                                      value=\"\">\n                            Untagged Files\n                        </Radio.Button>\n                        <p><br/></p>\n\n                    </Radio.Group>\n\n                    <Radio.Group buttonStyle=\"solid\" defaultValue=\"\">\n                        <h2>Generated Files</h2>\n                        <Radio.Button style={{width: '100%', backgroundColor: 'transparent', border: '0px'}}\n                                      value=\"b\" onClick={() => this.loadMailedFiles()}>\n                            Emailed Files\n                        </Radio.Button>\n\n                        <Radio.Button style={{width: '100%', backgroundColor: 'transparent', border: '0px'}}\n                                      onClick={() => this.loadMedicalCertificate()} value=''>\n                            Medical Leave Certificate </Radio.Button>\n                    </Radio.Group>\n                </Col>\n                <Col span={18}>\n                    <Row>\n                        {this.state.files.map(item => (\n                            <>\n                                {item.newDate ? <Col span={24}>\n                                    <Affix top={20} offsetTop={30}><h2 style={{\n                                        marginLeft: '10px',\n                                        padding: '5px',\n                                        backgroundImage: 'linear-gradient(to right, #ddd , white)',\n                                        borderRadius: '4px'\n                                    }}>{moment(item.created_at).format('LL')}</h2></Affix>\n                                </Col> : null}\n                                <Col span={8}>\n                                    <div\n                                        // onClick={() => this.showModal(item)}\n                                        style={{\n                                            width: '100%',\n                                            height: '150px',\n                                            border: '1px solid #bbb',\n                                            // background: '#fff url(\"' + makeFileURL(item.file_type) + '\") no-repeat center center',\n                                            backgroundSize: 'cover',\n                                            padding: 'auto',\n                                            overflow: 'hidden'\n\n                                        }}>\n                                        <Checkbox key={item.id}\n                                                  disabled={(item.practice != this.props.active_practiceId)}\n                                                  style={{\n                                                      margin: 10,\n                                                      position: 'absolute',\n                                                      top: 5,\n                                                      left: 5,\n                                                      boxShadow: '0 0px 5px #000 '\n                                                  }}\n                                                  onChange={(e) => that.filesCompleteToggle(item.id, e.target.checked)}\n                                                  checked={that.state.selectedFiles[item.id]}/>\n                                        <ModalImage style={{border: \"3px solid red\"}}\n                                            // small={makeFileURL(this.state.filesData.file_type)}\n                                                    large={makeFileURL(item.file_type)}\n                                                    small={makeFileURL(item.file_type)}\n                                                    alt={<Button type=\"danger\"\n                                                                 onClick={() => this.deleteFile(item)}>\n                                                        <Icon type=\"delete\"/></Button>}\n                                        />\n                                    </div>\n                                    <Card bodyStyle={{padding: 3}} style={{marginBottom: 15}}>\n                                        <Link to={\"/patient/\" + item.patient_data.id + \"/emr/files/\"}><h4>\n                                            <b>{item.patient_data.user.first_name}&nbsp;({item.patient_data.custom_id})</b>\n                                        </h4></Link>\n                                        <Tag><b>{item.practice_data ? item.practice_data.name : '--'}</b></Tag>\n                                    </Card>\n                                </Col>\n                            </>\n                        ))}\n                    </Row>\n                    <Row>\n                        <Col span={24}>\n                            <InfiniteFeedLoaderButton loaderFunction={() => this.loadData(that.state.loadMoreFiles)}\n                                                      loading={this.state.loading}\n                                                      hidden={!this.state.loadMoreFiles}/>\n                        </Col>\n                    </Row>\n                    <Card title=\"Medical Certificate\">\n                        <List loading={this.state.loading}\n                              grid={{gutter: 16, column: 3}}\n                              dataSource={this.state.medicalCertificate}\n                              renderItem={item => (\n                                  <Card style={{width: 600}}\n                                        actions={[<p>{\"Issued on : \" + item.date}</p>,\n                                            <a onClick={() => this.loadPDF(item.id)}><Icon type=\"printer\"/></a>,\n                                            <Popconfirm title=\"Are you sure delete this item?\"\n                                                        onConfirm={() => this.deleteMedicalCertificate(item)}\n                                                        okText=\"Yes\" cancelText=\"No\">\n                                                <Icon type=\"delete\"/>\n                                            </Popconfirm>\n                                        ]}>\n                                      <Meta title={\"Medical Leave #\" + \"\" + item.id}\n                                            description={\"Excused From :\" + item.excused_duty_from + \" till \" + item.excused_duty_to}>\n\n                                      </Meta>\n                                  </Card>\n                              )}\n                        />\n                        <InfiniteFeedLoaderButton\n                            loaderFunction={() => this.loadMedicalCertificate(that.state.loadMoreCertificate)}\n                            loading={this.state.loading}\n                            hidden={!this.state.loadMoreCertificate}/>\n                    </Card>\n\n\n                </Col>\n\n            </Row>\n            <Modal visible={this.state.showAddModal}\n                   onCancel={() => this.triggerAddModal(false)}\n                   footer={null}>\n                <PatientFilesForm title=\"Add Files\"\n                                  fields={fields}\n                                  defaultValues={defaultFields}\n                                  formProp={formProps}/>\n            </Modal>\n        </Card>\n\n\n    }\n}\n\nexport default PatientFiles;\n","import React from \"react\";\nimport {Route} from \"react-router\";\n\nimport DynamicFieldsForm from \"../../common/DynamicFieldsForm\";\nimport {Button, Card, Form, Icon, Row} from \"antd\";\nimport {\n    CHECKBOX_FIELD,\n    DATE_PICKER,\n    SINGLE_CHECKBOX_FIELD,\n    NUMBER_FIELD,\n    SUCCESS_MSG_TYPE,\n    INPUT_FIELD,\n    RADIO_FIELD,\n    SELECT_FIELD\n} from \"../../../constants/dataKeys\";\nimport {\n    PRESCRIPTIONS_API,\n    DRUG_CATALOG,\n    ALL_PRESCRIPTIONS_API,\n    INVOICES_API,\n    PROCEDURE_CATEGORY, TAXES, PATIENT_CLINIC_NOTES_API\n} from \"../../../constants/api\";\nimport {getAPI, interpolate, displayMessage} from \"../../../utils/common\";\nimport {Redirect} from 'react-router-dom'\nimport moment from 'moment';\n\n\nclass AddClinicNotes extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            redirect: false,\n            drug_catalog: this.props.drug_catalog ? this.props.drug_catalog : null,\n            procedure_category: this.props.procedure_category ? this.props.procedure_category : null,\n            taxes_list: this.props.taxes_list ? this.props.taxes_list : null,\n            editClinicNotes: this.props.editClinicNotes ? this.props.editClinicNotes : null,\n\n        }\n        this.changeRedirect = this.changeRedirect.bind(this);\n        console.log(\"Working or not\");\n\n    }\n\n    componentDidMount() {\n\n    }\n\n    loadDrugCatalog() {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                drug_catalog: data\n            })\n\n        }\n        let errorFn = function () {\n\n        }\n        getAPI(interpolate(DRUG_CATALOG, [this.props.active_practiceId]), successFn, errorFn)\n    }\n\n    loadProcedureCategory() {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                procedure_category: data\n            })\n\n        }\n        let errorFn = function () {\n\n        }\n        getAPI(interpolate(PROCEDURE_CATEGORY, [this.props.active_practiceId]), successFn, errorFn);\n    }\n\n    loadTaxes() {\n        var that = this;\n        let successFn = function (data) {\n            console.log(\"get table\");\n            that.setState({\n                taxes_list: data,\n            })\n        };\n        let errorFn = function () {\n        };\n        getAPI(interpolate(TAXES, [this.props.active_practiceId]), successFn, errorFn);\n\n    }\n\n    changeRedirect() {\n        var redirectVar = this.state.redirect;\n        this.setState({\n            redirect: !redirectVar,\n        });\n    }\n\n    render() {\n\n        const fields = [{\n            label: \"Name\",\n            key: \"name\",\n            required: true,\n            initialValue: this.state.editClinicNotes ? this.state.editClinicNotes.name : null,\n            type: INPUT_FIELD\n        }, {\n            label: \"Chief Complaints\",\n            key: \"chief_complaints\",\n            initialValue: this.state.editClinicNotes ? this.state.editClinicNotes.chief_complaints : null,\n            type: INPUT_FIELD\n        }, {\n            label: \"Investigations\",\n            key: \"investigations\",\n            initialValue: this.state.editClinicNotes ? this.state.editClinicNotes.investigations : null,\n            type: INPUT_FIELD,\n        }, {\n            label: \"Diagnosis\",\n            key: \"diagnosis\",\n            initialValue: this.state.editClinicNotes ? this.state.editClinicNotes.diagnosis : null,\n            type: INPUT_FIELD,\n        }, {\n            label: \"Notes\",\n            key: \"notes\",\n            initialValue: this.state.editClinicNotes ? this.state.editClinicNotes.notes : null,\n            type: INPUT_FIELD,\n        }, {\n            label: \"Observations\",\n            key: \"observations\",\n            initialValue: this.state.editClinicNotes ? this.state.editClinicNotes.observations : null,\n            type: INPUT_FIELD,\n        }];\n\n\n        let editformProp;\n        const TestFormLayout = Form.create()(DynamicFieldsForm);\n        let that = this;\n        const formProp = {\n            successFn: function (data) {\n                displayMessage(SUCCESS_MSG_TYPE, \"success\")\n                if (that.props.loadData)\n                    that.props.loadData()\n                console.log(data);\n            },\n            errorFn: function () {\n\n            },\n            action: interpolate(PATIENT_CLINIC_NOTES_API, [this.props.match.params.id]),\n            method: \"post\",\n        }\n        let defaultValues = [{key: 'is_active', value: true}]\n        if (this.state.editClinicNotes) {\n            defaultValues = [{key: 'is_active', value: true}, {\"key\": \"id\", \"value\": this.state.editClinicNotes.id}];\n        }\n        return <Row>\n            <Card>\n                <Route exact path='/patient/:id/emr/clinicnotes/edit'\n                       render={() => (this.state.editClinicNotes ?\n                           <TestFormLayout defaultValues={defaultValues} title=\"Edit Clinic notes\"\n                                           changeRedirect={this.changeRedirect} formProp={formProp} fields={fields}/> :\n                           <Redirect to={'/patient/' + this.props.match.params.id + '/billing/invoices'}/>)}/>\n                <Route exact path='/patient/:id/emr/clinicnotes/add'\n                       render={() => <TestFormLayout title=\"Add Clinic Notes\" changeRedirect={this.changeRedirect}\n                                                     formProp={formProp} fields={fields}/>}/>\n\n\n            </Card>\n            {this.state.redirect && <Redirect to={'/patient/' + this.props.match.params.id + '/emr/clinicnotes'}/>}\n        </Row>\n\n    }\n}\n\nexport default AddClinicNotes;\n","import React from \"react\";\nimport {\n    Row,\n    Card,\n    Col,\n    Form,\n    Tabs,\n    Button,\n    Icon,\n    List,\n    Input,\n    Divider,\n    Affix,\n    DatePicker,\n    Menu,\n    Dropdown,\n    Modal\n} from 'antd';\nimport {displayMessage, getAPI, interpolate, postAPI} from \"../../../utils/common\";\nimport {\n    EMR_COMPLAINTS,\n    EMR_DIAGNOSES,\n    EMR_INVESTIGATIONS, EMR_MEDICATION,\n    EMR_OBSERVATIONS,\n    EMR_TREATMENTNOTES, PATIENT_CLINIC_NOTES_API\n} from \"../../../constants/api\";\nimport DynamicFieldsForm from \"../../common/DynamicFieldsForm\";\nimport {INPUT_FIELD, SUCCESS_MSG_TYPE} from \"../../../constants/dataKeys\";\nimport {CUSTOM_STRING_SEPERATOR} from \"../../../constants/hardData\";\nimport {loadDoctors} from \"../../../utils/clinicUtils\";\nimport moment from \"moment\";\n\nconst {TabPane} = Tabs;\nconst tabLists = ['Complaints', 'Observations', 'Diagnoses', 'Investigations', 'Notes','Recent Medication'];\nconst tabResourcesAPI = {\n    'Complaints': EMR_COMPLAINTS,\n    'Observations': EMR_OBSERVATIONS,\n    'Diagnoses': EMR_DIAGNOSES,\n    'Investigations': EMR_INVESTIGATIONS,\n    'Notes': EMR_TREATMENTNOTES,\n    'Recent Medication' : EMR_MEDICATION\n};\nlet id = 0;\n\nclass AddClinicNotesDynamic extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            resourceList: {},\n            filteredResourceList: {},\n            filterStrings: {},\n            practiceDoctors: [],\n            selectedDoctor: {},\n            selectedDate: moment(),\n            resourceAddModal: null,\n            selectedTab: 'Complaints',\n            editClinicNotes: this.props.editClinicNotes ? this.props.editClinicNotes : null,\n\n        }\n    }\n\n    componentDidMount() {\n        loadDoctors(this);\n        this.loadRequiredResources(interpolate(EMR_COMPLAINTS, [this.props.active_practiceId]), 'Complaints');\n        this.loadRequiredResources(interpolate(EMR_OBSERVATIONS, [this.props.active_practiceId]), 'Observations');\n        this.loadRequiredResources(interpolate(EMR_DIAGNOSES, [this.props.active_practiceId]), 'Diagnoses');\n        this.loadRequiredResources(interpolate(EMR_INVESTIGATIONS, [this.props.active_practiceId]), 'Investigations');\n        this.loadRequiredResources(interpolate(EMR_TREATMENTNOTES, [this.props.active_practiceId]), 'Notes');\n        this.loadRequiredResources(interpolate(EMR_MEDICATION, [this.props.active_practiceId]), 'Recent Medication');\n        if (this.state.editClinicNotes) {\n            this.setInitialData();\n        }\n    }\n\n    setInitialData = () => {\n        let that = this;\n        let initialData = this.state.editClinicNotes;\n        if (initialData.chief_complaints)\n            initialData.chief_complaints.split(CUSTOM_STRING_SEPERATOR).forEach(str => setTimeout(function () {\n                if (str.length)\n                    that.addValues('Complaints', str)\n            }, 500));\n        if (initialData.investigations)\n            initialData.investigations.split(CUSTOM_STRING_SEPERATOR).forEach(str => setTimeout(function () {\n                if (str.length)\n                    that.addValues('Investigations', str)\n            }, 500));\n        if (initialData.diagnosis)\n            initialData.diagnosis.split(CUSTOM_STRING_SEPERATOR).forEach(str => setTimeout(function () {\n                if (str.length)\n                    that.addValues('Diagnoses', str)\n            }, 500));\n        if (initialData.notes)\n            initialData.notes.split(CUSTOM_STRING_SEPERATOR).forEach(str => setTimeout(function () {\n                if (str.length)\n                    that.addValues('Notes', str)\n            }, 500));\n        if (initialData.observations)\n            initialData.observations.split(CUSTOM_STRING_SEPERATOR).forEach(str => setTimeout(function () {\n                if (str.length)\n                    that.addValues('Observations', str)\n            }, 500));\n        if (initialData.medication)\n            initialData.medication.split(CUSTOM_STRING_SEPERATOR).forEach(str => setTimeout(function () {\n                if (str.length)\n                    that.addValues('Recent Medication', str)\n            }, 500));\n\n    }\n    loadRequiredResources = (API, key) => {\n        let that = this;\n        let successFn = function (data) {\n            that.setState(function (prevState) {\n                let newResources = {...prevState.resourceList, [key]: data}\n                return {\n                    resourceList: newResources,\n                    filteredResourceList: newResources,\n                    filterStrings: {}\n                }\n            })\n        }\n        let errorFn = function () {\n            console.log(key + \" fetching error\");\n        }\n        getAPI(API, successFn, errorFn);\n    }\n    add = (tab) => {\n        const {form} = this.props;\n        // can use data-binding to get\n        const keys = form.getFieldValue(tab);\n        const nextKeys = keys.concat(++id);\n        // can use data-binding to set\n        // important! notify form to detect changes\n        form.setFieldsValue({\n            [tab]: nextKeys,\n        });\n    };\n    remove = (tab, k) => {\n        const {form} = this.props;\n        // can use data-binding to get\n        const keys = form.getFieldValue(tab);\n        // We need at least one passenger\n        if (keys.length === 1) {\n            return;\n        }\n\n        // can use data-binding to set\n        form.setFieldsValue({\n            [tab]: keys.filter(key => key !== k),\n        });\n    };\n    addValues = (tab, value) => {\n        const {form} = this.props;\n        // can use data-binding to get\n        const keys = form.getFieldValue(tab);\n        const nextKeys = keys.concat(++id);\n        // can use data-binding to set\n        // important! notify form to detect changes\n        form.setFieldsValue({\n            [tab]: nextKeys,\n            [`field[${keys[keys.length - 1]}]`]: value,\n        });\n    }\n    changeValues = (tab, id) => {\n        const {form} = this.props;\n        // can use data-binding to get\n        const keys = form.getFieldValue(tab);\n        if (keys.indexOf(id) == keys.length - 1) {\n            this.add(tab);\n        }\n    }\n    toggleModal = (option) => {\n        let prevsOption = null;\n        let that = this;\n        this.setState(function (prevState) {\n            console.log(prevState.resourceAddModal);\n            if (prevState.resourceAddModal)\n                prevsOption = prevState.resourceAddModal;\n            return {resourceAddModal: option}\n        }, function () {\n            if (prevsOption) {\n                that.loadRequiredResources(interpolate(tabResourcesAPI[prevsOption], [that.props.active_practiceId]), prevsOption);\n            }\n        });\n\n    }\n    searchValues = (type, value) => {\n        let that = this;\n        this.setState(function (prevState) {\n            let searchValues = {...prevState.searchStrings};\n            searchValues[type] = value;\n            return {searchStrings: searchValues}\n        }, function () {\n            that.filterValues(type);\n        });\n    }\n    filterValues = (type) => {\n        this.setState(function (prevState) {\n            let filteredItemOfGivenType = [];\n            if (prevState.resourceList[type]) {\n                if (prevState.searchStrings[type]) {\n                    prevState.resourceList[type].forEach(function (item) {\n                        if (item.name && item.name\n                            .toString()\n                            .toLowerCase()\n                            .includes(prevState.searchStrings[type].toLowerCase())) {\n                            filteredItemOfGivenType.push(item);\n                        }\n                    });\n                } else {\n                    filteredItemOfGivenType = prevState.resourceList[type];\n                }\n            }\n            return {\n                filteredResourceList: {...prevState.filteredResourceList, [type]: filteredItemOfGivenType}\n            }\n        });\n    }\n\n    handleSubmit = (e) => {\n        let that = this;\n        e.preventDefault();\n        this.props.form.validateFieldsAndScroll((err, values) => {\n            if (!err) {\n                let reqData = {};\n                reqData.chief_complaints = values.Complaints.map(id => values.field[id]).join(CUSTOM_STRING_SEPERATOR);\n                reqData.investigations = values.Investigations.map(id => values.field[id]).join(CUSTOM_STRING_SEPERATOR);\n                reqData.diagnosis = values.Diagnoses.map(id => values.field[id]).join(CUSTOM_STRING_SEPERATOR);\n                reqData.notes = values.Notes.map(id => values.field[id]).join(CUSTOM_STRING_SEPERATOR);\n                reqData.observations = values.Observations.map(id => values.field[id]).join(CUSTOM_STRING_SEPERATOR);\n                reqData.medication = values['Recent Medication'].map(id => values.field[id]).join(CUSTOM_STRING_SEPERATOR);\n                reqData.patient = that.props.match.params.id;\n                reqData.practice = that.props.active_practiceId;\n                reqData.doctor = that.state.selectedDoctor && that.state.selectedDoctor.id ? that.state.selectedDoctor.id : that.state.selectedDoctor;\n                reqData.date = that.state.selectedDate && moment(that.state.selectedDate).isValid() ? moment(that.state.selectedDate).format('YYYY-MM-DD') : null\n                if (that.state.editClinicNotes)\n                    reqData.id = that.state.editClinicNotes.id;\n                let successFn = function (data) {\n                    if (that.props.loadData){\n                        that.props.loadData();\n                    }\n\n                    if (that.props.history){\n                        that.props.history.replace('/patient/' + that.props.match.params.id + '/emr/clinicnotes/');\n                    }\n\n                };\n                let errorFn = function () {\n\n                }\n                postAPI(interpolate(PATIENT_CLINIC_NOTES_API, [this.props.match.params.id]), reqData, successFn, errorFn);\n            }\n        });\n\n    }\n    changeTab = (e, tab) => {\n        // this.setState({\n        //     selectedTab: tab\n        // });\n\n\n    }\n    selectDoctor = (doctor) => {\n        this.setState({\n            selectedDoctor: doctor\n        })\n    }\n    selectedDate = (date) => {\n        this.setState({\n            selectedDate: date\n        })\n    }\n\n    render() {\n        let that = this;\n        const {getFieldDecorator, getFieldValue} = this.props.form;\n        const formItemLayout = {\n            labelCol: {\n                xs: {span: 24},\n                sm: {span: 4},\n            },\n            wrapperCol: {\n                xs: {span: 24},\n                sm: {span: 20},\n            },\n        };\n        let keysObject = {};\n        tabLists.forEach(function (tab) {\n            getFieldDecorator(tab, {initialValue: [++id]});\n            keysObject[tab] = getFieldValue(tab);\n        });\n\n\n        const keys = keysObject;\n        const ResourceAddForm = Form.create()(DynamicFieldsForm);\n        return <Card>\n            <Row>\n                <Col span={18}>\n                    <h2>Clinical Notes</h2>\n                    <Form onSubmit={this.handleSubmit}>\n                        {tabLists.map(tab =>\n                            <div>\n                                <Divider style={{margin: 5}}>{tab}</Divider>\n                                <div style={{\n                                    backgroundColor: (tab == that.state.selectedTab ? '#ddd' : 'initial'),\n                                    padding: 10\n                                }}>\n                                    {keys[tab].map((k, index) => (\n                                        <Form.Item\n                                            {...formItemLayout}\n                                            label={tab + ' ' + (index + 1)}\n                                            key={k}>\n                                            {getFieldDecorator(`field[${k}]`, {\n                                                validateTrigger: ['onChange', 'onBlur'],\n                                                rules: [{\n                                                    whitespace: true,\n                                                }],\n                                            })(<Input placeholder={tab} style={{width: '60%', marginRight: 8}}\n                                                      key={k}\n                                                      onFocus={(e) => that.changeTab(e, tab)}\n                                                      onChange={() => that.changeValues(tab, k)}/>)}\n                                            {keys[tab].length - 1 != index ? (\n                                                <Button\n                                                    shape={\"circle\"}\n                                                    type={\"danger\"}\n                                                    size={\"small\"}\n                                                    icon=\"delete\"\n                                                    onClick={() => this.remove(tab, k)}\n                                                />\n                                            ) : null}\n                                        </Form.Item>\n                                    ))}\n                                </div>\n                            </div>\n                        )}\n                        <Affix offsetBottom={0}>\n                            <Card>\n                                <Row>\n                                    <span>by &nbsp;&nbsp;</span>\n                                    <Dropdown placement=\"topCenter\" overlay={<Menu>\n                                        {this.state.practiceDoctors.map(doctor =>\n                                            <Menu.Item key=\"0\">\n                                                <a onClick={() => this.selectDoctor(doctor)}>{doctor.user.first_name}</a>\n                                            </Menu.Item>)}\n                                    </Menu>} trigger={['click']}>\n                                        <a className=\"ant-dropdown-link\" href=\"#\">\n                                            <b>\n                                                {this.state.selectedDoctor.user ? this.state.selectedDoctor.user.first_name : 'No DOCTORS Found'}\n                                            </b>\n                                        </a>\n                                    </Dropdown>\n                                    <span> &nbsp;&nbsp;on&nbsp;&nbsp;</span>\n                                    <DatePicker value={this.state.selectedDate}\n                                                allowClear={false}\n                                                onChange={(value) => this.selectedDate(value)} format={\"DD-MM-YYYY\"}/>\n                                    <Button type=\"primary\" htmlType=\"submit\" style={{float: 'right', margin: 5}}>\n                                        Save\n                                    </Button>\n                                    {that.props.history ?\n                                        <Button style={{margin: 5, float: 'right'}}\n                                                onClick={() => that.props.history.goBack()}>\n                                            Cancel\n                                        </Button> : null}\n                                </Row>\n                                <Row>\n                                    Next Follow up\n                                </Row>\n                            </Card>\n                        </Affix>\n                    </Form>\n                </Col>\n                <Col span={6}>\n                    <Tabs type={\"card\"}>\n                        {tabLists.map(tabList => <TabPane tab={tabList} key={tabList}>\n                            <div style={{padding: 5}}>\n                                <Button type={\"primary\"} block size={\"small\"} onClick={() => that.toggleModal(tabList)}>\n                                    <Icon type={\"plus\"}/>Add&nbsp;{tabList}\n                                </Button>\n                                <div style={{backgroundColor: '#ddd', padding: 8}}>\n                                    <Input.Search placeholder={\"Search in \" + tabList + \" ...\"}\n                                                  onChange={e => this.searchValues(tabList, e.target.value)}/>\n                                </div>\n                                <List key={tabList} size={'small'} dataSource={that.state.filteredResourceList[tabList]}\n                                      renderItem={item => <List.Item\n                                          key={item.id}\n                                          onClick={() => this.addValues(tabList, item.name)}>\n                                          {item.name}\n                                      </List.Item>}/>\n                            </div>\n                        </TabPane>)}\n                    </Tabs>\n                </Col>\n                <Modal visible={!!this.state.resourceAddModal}\n                       onCancel={() => that.toggleModal(null)}\n                       title={\"Add \" + this.state.resourceAddModal}\n                       footer={null}>\n                    {this.state.resourceAddModal ?\n                        <ResourceAddForm\n                            fields={[{\n                                label: this.state.resourceAddModal,\n                                required: true,\n                                type: INPUT_FIELD,\n                                key: 'name'\n                            }]}\n                            defaultValues={[{key: 'practice', value: this.props.active_practiceId}]}\n                            formProp={{\n                                method: 'post',\n                                action: interpolate(tabResourcesAPI[this.state.resourceAddModal], [this.props.active_practiceId]),\n                                successFn: function () {\n                                    that.toggleModal(null);\n                                    displayMessage(SUCCESS_MSG_TYPE, that.state.resourceAddModal + \" added successfully!!\");\n                                },\n                                errorFn: function (err) {\n                                    console.log(err);\n                                }\n                            }}\n                        /> : null}\n                </Modal>\n            </Row>\n        </Card>\n    }\n}\n\nexport default Form.create()(AddClinicNotesDynamic)\n","import {\n    Button,\n    Card,\n    Checkbox,\n    Divider,\n    Icon,\n    Table,\n    Dropdown,\n    Menu,\n    Col,\n    Row,\n    Tag,\n    Spin,\n    Tooltip,\n    Avatar,\n    Form, Input\n} from \"antd\";\nimport React from \"react\";\nimport {getAPI, interpolate, postAPI, putAPI} from \"../../../utils/common\";\nimport {INVOICES_API, PATIENT_CLINIC_NOTES_API, CLINIC_NOTES_PDF} from \"../../../constants/api\";\nimport moment from \"moment\";\nimport {Route, Switch} from \"react-router\";\nimport {Link, Redirect} from \"react-router-dom\";\nimport AddClinicNotes from \"./AddClinicNotes\";\nimport {CUSTOM_STRING_SEPERATOR} from \"../../../constants/hardData\";\nimport AddClinicNotesDynamic from \"./AddClinicNotesDynamic\";\nimport {Modal} from \"antd/lib/index\";\nimport {BACKEND_BASE_URL} from \"../../../config/connect\";\nimport InfiniteFeedLoaderButton from \"../../common/InfiniteFeedLoaderButton\";\nimport {sendMail} from  \"../../../utils/clinicUtils\";\nimport * as _ from 'lodash'\nconst confirm = Modal.confirm;\n\nclass PatientClinicNotes extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            currentPatient: this.props.currentPatient,\n            active_practiceId: this.props.active_practiceId,\n            clinicNotes: [],\n            editClinicNotes: null,\n            loading: true,\n            mail_to:null,\n\n        }\n        this.loadClinicNotes = this.loadClinicNotes.bind(this);\n        this.editClinicNotesData = this.editClinicNotesData.bind(this);\n    }\n\n    componentDidMount() {\n        // if (this.props.match.params.id) {\n        this.loadClinicNotes();\n        // }\n\n    }\n\n    loadClinicNotes(page = 1) {\n        let that = this;\n        let successFn = function (data) {\n            that.setState(function (prevState) {\n                if (data.current == 1)\n                    return {\n                        clinicNotes: [...data.results],\n                        next: data.next,\n                        loading: false\n                    }\n                return {\n                    clinicNotes: [...prevState.clinicNotes, ...data.results],\n                    next: data.next,\n                    loading: false\n                }\n            })\n        }\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            })\n\n        }\n        let apiParams = {\n            page: page,\n            practice: this.props.active_practiceId\n        };\n        if (this.props.match.params.id) {\n            apiParams.patient = this.props.match.params.id;\n        }\n        if (this.props.showAllClinic && this.props.match.params.id) {\n            delete (apiParams.practice)\n        }\n\n        getAPI(PATIENT_CLINIC_NOTES_API, successFn, errorFn, apiParams)\n\n    }\n\n\n    editClinicNotesData(record) {\n        this.setState({\n            editClinicNotes: record,\n            loading: false\n        });\n        let id = this.props.match.params.id\n        this.props.history.push(\"/patient/\" + id + \"/emr/clinicnotes/edit\")\n\n    }\n\n    deleteClinicNote(record) {\n        let that = this;\n        confirm({\n            title: 'Are you sure to delete this item?',\n            okText: 'Yes',\n            okType: 'danger',\n            cancelText: 'No',\n            onOk() {\n                let reqData = {id: record.id, patient: record.patient, is_active: false};\n                let successFn = function (data) {\n                    that.loadClinicNotes();\n                }\n                let errorFn = function () {\n                }\n                postAPI(interpolate(PATIENT_CLINIC_NOTES_API, [that.props.match.params.id]), reqData, successFn, errorFn);\n            },\n            onCancel() {\n                console.log('Cancel');\n            },\n        });\n    }\n\n    loadPDF(id) {\n        let that = this;\n        let successFn = function (data) {\n            if (data.report)\n                window.open(BACKEND_BASE_URL + data.report);\n        }\n        let errorFn = function () {\n\n        }\n        getAPI(interpolate(CLINIC_NOTES_PDF, [id]), successFn, errorFn);\n    }\n\n    updateFormValue =(type,value)=>{\n        this.setState({\n            [type]: value\n        })\n    };\n\n    mailModalOpen =() =>{\n        this.setState({\n            visibleMail:true\n        })\n    };\n\n    mailModalClose =() =>{\n        this.setState({\n            visibleMail:false\n        })\n    };\n\n    sendPatientMail =(clinicalNotes)=>{\n        this.mailModalOpen()\n        this.setState({\n            patientName:_.get(clinicalNotes,'patient.user.first_name'),\n            clinicId:_.get(clinicalNotes,'id'),\n            mail_to:_.get(clinicalNotes,'patient.user.email')\n        })\n\n    };\n\n    sendMailToPatient =()=>{\n        let {mail_to ,clinicId } = this.state;\n        let apiParams ={\n            mail_to:mail_to,\n        }\n        sendMail(interpolate(CLINIC_NOTES_PDF,[clinicId]),apiParams)\n        this.mailModalClose();\n    }\n\n    render() {\n\n        let that = this;\n        const columns = [{\n            title: 'Time',\n            dataIndex: 'created_at',\n            key: 'name',\n            render: created_at => <span>{moment(created_at).format('LLL')}</span>,\n        }, {\n            title: 'Name',\n            dataIndex: 'name',\n            key: 'name',\n        }, {\n            title: 'Chief Complaints',\n            dataIndex: 'chief_complaints',\n            key: 'chief_complaints',\n        }, {\n            title: 'Investigations',\n            dataIndex: 'investigations',\n            key: 'investigations',\n        }, {\n            title: 'Diagnosis',\n            dataIndex: 'diagnosis',\n            key: 'diagnosis',\n        }, {\n            title: 'Notes',\n            dataIndex: 'notes',\n            key: 'notes',\n        }, {\n            title: 'Observations',\n            dataIndex: 'observations',\n            key: 'observations',\n        }, {\n            title: 'Action',\n            key: 'action',\n            render: (text, record) => (\n                <span>\n                <a onClick={() => this.editClinicNotesData(record)}>Edit</a>\n                <Divider type=\"vertical\"/>\n                <a href=\"javascript:;\">Delete</a>\n              </span>\n            ),\n        }];\n\n        if (this.props.match.params.id) {\n            return <div><Switch>\n                <Route exact path='/patient/:id/emr/clinicnotes/add'\n                       render={(route) => <AddClinicNotesDynamic {...route}\n                                                                 {...this.props}\n                                                                 loadData={this.loadClinicNotes}/>}/>\n                <Route exact path='/patient/:id/emr/clinicnotes/edit'\n                       render={(route) => (this.state.editClinicNotes ? <AddClinicNotesDynamic {...this.state}\n                                                                                               {...route}\n                                                                                               loadData={this.loadClinicNotes}/> :\n                           <Redirect to={'/patient/' + that.props.match.params.id + '/emr/clinicnotes/'}/>)}/>\n                <Route>\n                    <div>\n                        <Card bodyStyle={{padding: 0}}\n                              title={this.state.currentPatient ? this.state.currentPatient.user.first_name + \" ClinicNotes\" : \"ClinicNotes\"}\n                              extra={<Button.Group>\n                                  <Link to={\"/patient/\" + this.props.match.params.id + \"/emr/clinicnotes/add\"}>\n                                      <Button type={\"primary\"}>\n                                          <Icon type=\"plus\"/>Add\n                                      </Button>\n                                  </Link>\n                              </Button.Group>}>\n\n                            {/*<Table loading={this.state.loading} columns={columns} dataSource={this.state.clinicNotes}/>*/}\n\n                        </Card>\n                        {this.state.clinicNotes.map(clinicNote => <Card\n                            style={{marginTop: 20}}\n                            title={<small>{clinicNote.date ? moment(clinicNote.date).format('ll') : null}</small>}\n                            extra={<Dropdown.Button\n                                size={\"small\"}\n                                style={{float: 'right'}}\n                                overlay={<Menu>\n                                    <Menu.Item key=\"1\"\n                                               onClick={() => that.editClinicNotesData(clinicNote)}\n                                               disabled={(clinicNote.practice && clinicNote.practice.id != this.props.active_practiceId)}>\n                                        <Icon type=\"edit\"/>\n                                        Edit\n                                    </Menu.Item>\n                                    <Menu.Item key=\"2\"\n                                               onClick={() => that.deleteClinicNote(clinicNote)}\n                                               disabled={(clinicNote.practice && clinicNote.practice.id != this.props.active_practiceId)}>\n                                        <Icon type=\"delete\"/>\n                                        Delete\n                                    </Menu.Item>\n                                    <Menu.Divider/>\n                                    <Menu.Item key=\"3\">\n                                        <Link\n                                            to={\"/patient/\" + clinicNote.patient + \"/emr/timeline\"}>\n                                            <Icon\n                                                type=\"clock-circle\"/>\n                                            &nbsp;\n                                            Patient Timeline\n                                        </Link>\n                                    </Menu.Item>\n                                    <Menu.Divider/>\n                                    <Menu.Item key={'4'}>\n                                        <a onClick={() => this.sendPatientMail(clinicNote)}><Icon\n                                            type=\"mail\"/> Send mail to patient\n                                        </a>\n                                    </Menu.Item>\n                                </Menu>}>\n                                <a onClick={() => this.loadPDF(clinicNote.id)}><Icon\n                                    type=\"printer\"/>\n                                </a>\n\n                            </Dropdown.Button>}>\n\n                            <Modal\n                                title={null}\n                                visible={this.state.visibleMail}\n                                onOk={this.sendMailToPatient}\n                                onCancel={this.mailModalClose}\n                                footer={[\n                                    <Button key=\"back\" onClick={this.mailModalClose}>\n                                        Cancel\n                                    </Button>,\n                                    <Button key=\"submit\" type=\"primary\"  onClick={this.sendMailToPatient}>\n                                        Send\n                                    </Button>,\n                                ]}\n                            >\n                                <p>Send Clinical Notes To {_.get(clinicNote,'patient.user.first_name')} ?</p>\n                                <Input value={this.state.mail_to} placeholder={\"Email\"}\n                                       onChange={(e)=>that.updateFormValue('mail_to',e.target.value)}/>\n                            </Modal>\n\n                            <Row>\n                                <Col span={6}>\n                                    <h3>Complaints</h3>\n                                </Col>\n                                <Col span={18} style={{borderLeft: '1px solid #ccc', padding: 4}}>\n                                    <div style={{minHeight: 30}}>\n                                        {clinicNote.chief_complaints ? clinicNote.chief_complaints.split(CUSTOM_STRING_SEPERATOR).map((str, index) =>\n                                            <span>{index ? <br/> : null}{str}</span>) : null}\n                                    </div>\n                                    <Divider style={{margin: 0}}/>\n                                </Col>\n                            </Row>\n                            <Row>\n                                <Col span={6}>\n                                    <h3>Observations</h3>\n                                </Col>\n                                <Col span={18} style={{borderLeft: '1px solid #ccc', padding: 4}}>\n                                    <div style={{minHeight: 30}}>\n                                        {clinicNote.observations ? clinicNote.observations.split(CUSTOM_STRING_SEPERATOR).map((str, index) =>\n                                            <span>{index ? <br/> : null}{str}</span>) : null}\n                                    </div>\n                                    <Divider style={{margin: 0}}/>\n                                </Col>\n                            </Row>\n                            <Row>\n                                <Col span={6}>\n                                    <h3>Investigations</h3>\n                                </Col>\n                                <Col span={18} style={{borderLeft: '1px solid #ccc', padding: 4}}>\n                                    <div style={{minHeight: 30}}>\n                                        {clinicNote.investigations ? clinicNote.investigations.split(CUSTOM_STRING_SEPERATOR).map((str, index) =>\n                                            <span>{index ? <br/> : null}{str}</span>) : null}\n                                    </div>\n                                    <Divider style={{margin: 0}}/>\n                                </Col>\n                            </Row>\n                            <Row>\n                                <Col span={6}>\n                                    <h3>Diagnoses</h3>\n                                </Col>\n                                <Col span={18} style={{borderLeft: '1px solid #ccc', padding: 4}}>\n                                    <div style={{minHeight: 30}}>\n                                        {clinicNote.diagnosis ? clinicNote.diagnosis.split(CUSTOM_STRING_SEPERATOR).map((str, index) =>\n                                            <span>{index ? <br/> : null}{str}</span>) : null}\n                                    </div>\n                                    <Divider style={{margin: 0}}/>\n                                </Col>\n                            </Row>\n                            <Row>\n                                <Col span={6}>\n                                    <h3>Notes</h3>\n                                </Col>\n                                <Col span={18} style={{borderLeft: '1px solid #ccc', padding: 4}}>\n                                    <div style={{minHeight: 30}}>\n                                        {clinicNote.notes ? clinicNote.notes.split(CUSTOM_STRING_SEPERATOR).map((str, index) =>\n                                            <span>{index ? <br/> : null}{str}</span>) : null}\n                                    </div>\n                                    <Divider style={{margin: 0}}/>\n                                </Col>\n                            </Row>\n                            <Row>\n                                <Col span={6}>\n                                    <h3>Recent Medications</h3>\n                                </Col>\n                                <Col span={18} style={{borderLeft: '1px solid #ccc', padding: 4}}>\n                                    <div style={{minHeight: 30}}>\n                                        {clinicNote.medication ? clinicNote.medication.split(CUSTOM_STRING_SEPERATOR).map((str, index) =>\n                                            <span>{index ? <br/> : null}{str}</span>) : null}\n                                    </div>\n                                    <Divider style={{margin: 0}}/>\n                                </Col>\n                            </Row>\n                            <div>\n                                {clinicNote.doctor ?\n                                    <Tag color={clinicNote.doctor ? clinicNote.doctor.calendar_colour : null}>\n                                        <b>{\"prescribed by  \" + clinicNote.doctor.user.first_name} </b>\n                                    </Tag> : null}\n                                {clinicNote.practice ? <Tag style={{float: 'right'}}>\n                                    <Tooltip title=\"Practice Name\">\n                                        <b>{clinicNote.practice.name} </b>\n                                    </Tooltip>\n                                </Tag> : null}\n                            </div>\n                        </Card>)}\n                        <Spin spinning={this.state.loading}>\n                            <Row/>\n                        </Spin>\n                        <InfiniteFeedLoaderButton loaderFunction={() => this.loadClinicNotes(that.state.next)}\n                                                  loading={this.state.loading}\n                                                  hidden={!this.state.next}/>\n\n\n                    </div>\n                </Route>\n            </Switch>\n            </div>\n        }\n        else {\n            return <div>\n                <Card bodyStyle={{padding: 0}}\n                      title={this.state.currentPatient ? this.state.currentPatient.user.first_name + \" Clinic Notes\" : \"Clinic Notes\"}\n                      extra={<Button.Group>\n                          <Button type={\"primary\"} onClick={() => this.props.togglePatientListModal(true)}>\n                              <Icon type=\"plus\"/>Add\n                          </Button>\n                      </Button.Group>}/>\n                {this.state.clinicNotes.map(clinicNote => <Card\n                    style={{marginTop: 10}} key={clinicNote.id}\n                    extra={<Dropdown.Button\n                        size={\"small\"}\n                        overlay={<Menu>\n                            <Menu.Item key=\"1\"\n                                       onClick={() => that.editClinicNotesData(clinicNote)}\n                                       disabled={(clinicNote.practice && clinicNote.practice.id != this.props.active_practiceId)}>\n                                <Icon type=\"edit\"/>\n                                Edit\n                            </Menu.Item>\n                            <Menu.Item key=\"2\"\n                                       onClick={() => that.deleteClinicNote(clinicNote)}\n                                       disabled={(clinicNote.practice && clinicNote.practice.id != this.props.active_practiceId)}>\n                                <Icon type=\"delete\"/>\n                                Delete\n                            </Menu.Item>\n                            <Menu.Divider/>\n                            <Menu.Item key=\"3\">\n                                <Link\n                                    to={\"/patient/\" + clinicNote.patient + \"/emr/timeline\"}>\n                                    <Icon type=\"clock-circle\"/>\n                                    &nbsp;\n                                    Patient Timeline\n                                </Link>\n                            </Menu.Item>\n\n                            <Menu.Divider/>\n                            <Menu.Item key={'4'}>\n                                <a onClick={() => this.sendPatientMail(clinicNote)}><Icon\n                                    type=\"mail\"/> Send mail to patient\n                                </a>\n                            </Menu.Item>\n                        </Menu>}>\n                        <a onClick={() => this.loadPDF(clinicNote.id)}><Icon\n                            type=\"printer\"/></a>\n                    </Dropdown.Button>}\n                    title={<div>\n                        <small>{clinicNote.date ? moment(clinicNote.date).format('ll') : null}\n                            <Link to={\"/patient/\" + clinicNote.patient.id + \"/emr/clinicnotes\"}>\n                                &nbsp;&nbsp; {clinicNote.patient.user ? clinicNote.patient.user.first_name : null} (ID: {clinicNote.patient.custom_id?clinicNote.patient.custom_id:clinicNote.patient.id})&nbsp;\n                            </Link>\n                            <span>, {clinicNote.patient.gender}</span>\n                        </small>\n                    </div>}>\n\n\n                    <Row>\n                        <Col span={6}>\n                            <h3>Complaints</h3>\n                        </Col>\n                        <Col span={18} style={{borderLeft: '1px solid #ccc', padding: 4}}>\n                            <div style={{minHeight: 30}}>\n                                {clinicNote.chief_complaints ? clinicNote.chief_complaints.split(CUSTOM_STRING_SEPERATOR).map((str, index) =>\n                                    <span key={str}>{index ? <br/> : null}{str}</span>) : null}\n                            </div>\n                            <Divider style={{margin: 0}}/>\n                        </Col>\n                    </Row>\n                    <Row>\n                        <Col span={6}>\n                            <h3>Observations</h3>\n                        </Col>\n                        <Col span={18} style={{borderLeft: '1px solid #ccc', padding: 4}}>\n                            <div style={{minHeight: 30}}>\n                                {clinicNote.observations ? clinicNote.observations.split(CUSTOM_STRING_SEPERATOR).map((str, index) =>\n                                    <span key={str}>{index ? <br/> : null}{str}</span>) : null}\n                            </div>\n                            <Divider style={{margin: 0}}/>\n                        </Col>\n                    </Row>\n                    <Row>\n                        <Col span={6}>\n                            <h3>Investigations</h3>\n                        </Col>\n                        <Col span={18} style={{borderLeft: '1px solid #ccc', padding: 4}}>\n                            <div style={{minHeight: 30}}>\n                                {clinicNote.investigations ? clinicNote.investigations.split(CUSTOM_STRING_SEPERATOR).map((str, index) =>\n                                    <span key={str}>{index ? <br/> : null}{str}</span>) : null}\n                            </div>\n                            <Divider style={{margin: 0}}/>\n                        </Col>\n                    </Row>\n                    <Row>\n                        <Col span={6}>\n                            <h3>Diagnoses</h3>\n                        </Col>\n                        <Col span={18} style={{borderLeft: '1px solid #ccc', padding: 4}}>\n                            <div style={{minHeight: 30}}>\n                                {clinicNote.diagnosis ? clinicNote.diagnosis.split(CUSTOM_STRING_SEPERATOR).map((str, index) =>\n                                    <span key={str}>{index ? <br/> : null}{str}</span>) : null}\n                            </div>\n                            <Divider style={{margin: 0}}/>\n                        </Col>\n                    </Row>\n                    <Row>\n                        <Col span={6}>\n                            <h3>Notes</h3>\n                        </Col>\n                        <Col span={18} style={{borderLeft: '1px solid #ccc', padding: 4}}>\n                            <div style={{minHeight: 30}}>\n                                {clinicNote.notes ? clinicNote.notes.split(CUSTOM_STRING_SEPERATOR).map((str, index) =>\n                                    <span key={str}>{index ? <br/> : null}{str}</span>) : null}\n                            </div>\n                            <Divider style={{margin: 0}}/>\n                        </Col>\n                    </Row>\n                    <Row>\n                        <Col span={6}>\n                            <h3>Recent Medications</h3>\n                        </Col>\n                        <Col span={18} style={{borderLeft: '1px solid #ccc', padding: 4}}>\n                            <div style={{minHeight: 30}}>\n                                {clinicNote.medication ? clinicNote.medication.split(CUSTOM_STRING_SEPERATOR).map((str, index) =>\n                                    <span>{index ? <br/> : null}{str}</span>) : null}\n                            </div>\n                            <Divider style={{margin: 0}}/>\n                        </Col>\n                    </Row>\n                    <div>\n                        {clinicNote.doctor ?\n                            <Tag color={clinicNote.doctor ? clinicNote.doctor.calendar_colour : null}>\n                                <b>{\"prescribed by  \" + clinicNote.doctor.user.first_name} </b>\n                            </Tag> : null}\n                        {clinicNote.practice ? <Tag style={{float: 'right'}}>\n                            <Tooltip title=\"Practice Name\">\n                                <b>{clinicNote.practice.name} </b>\n                            </Tooltip>\n                        </Tag> : null}\n                    </div>\n\n                </Card>)}\n                <Spin spinning={this.state.loading}>\n                    <Row/>\n                </Spin>\n                <InfiniteFeedLoaderButton loaderFunction={() => this.loadClinicNotes(that.state.next)}\n                                          loading={this.state.loading}\n                                          hidden={!this.state.next}/>\n\n                <Modal\n                    title={null}\n                    visible={this.state.visibleMail}\n                    onOk={this.sendMailToPatient}\n                    onCancel={this.mailModalClose}\n                    footer={[\n                        <Button key=\"back\" onClick={this.mailModalClose}>\n                            Cancel\n                        </Button>,\n                        <Button key=\"submit\" type=\"primary\"  onClick={this.sendMailToPatient}>\n                            Send\n                        </Button>,\n                    ]}\n                >\n                    <p>Send Clinical Notes To {that.state.patientName} ?</p>\n                    <Input value={this.state.mail_to} placeholder={\"Email\"}\n                           onChange={(e)=>that.updateFormValue('mail_to',e.target.value)}/>\n                </Modal>\n            </div>\n        }\n\n    }\n}\n\nexport default PatientClinicNotes;\n","import React from \"react\";\nimport {\n    Avatar,\n    Button,\n    Icon,\n    Layout,\n    Tooltip,\n    Dropdown,\n    Tag,\n    Switch,\n    Statistic,\n    Popover,\n    List,\n    Modal\n} from \"antd\";\nimport PatientSelection from \"./PatientSelection\";\nimport {Link} from \"react-router-dom\";\nimport {hashCode, intToRGB, patientSettingMenu} from \"../../utils/clinicUtils\";\nimport {makeFileURL} from \"../../utils/common\";\n\nconst {Header} = Layout;\n\n\nclass PatientHeader extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {};\n    }\n\n    componentDidMount() {\n        let that = this;\n        if (that.props.refreshWallet) {\n            that.props.refreshWallet();\n        }\n    }\n\n\n    render() {\n        let that = this;\n        return <Header className=\"header\" style={{background: '#e4e4e4', padding: '0px 20px'}}>\n            <div>\n                {this.props.currentPatient ?\n                    <div style={{display: 'inline'}}>\n                        <div style={{display: 'inline', textSize: '15px'}}>\n                            <Tooltip title=\"Switch Back to All Patients\">\n                                <Button onClick={() => this.props.setCurrentPatient(null)} type=\"primary\" ghost>\n                                    <Icon type=\"arrow-left\"/>\n                                </Button>\n                            </Tooltip>\n                        </div>\n\n                        <a style={{padding: '8px', fontSize: '15px'}}\n                           onClick={() => this.props.togglePatientListModal(true)}>\n                            {(this.props.currentPatient.image ?\n                                <Avatar src={makeFileURL(this.props.currentPatient.image)}/> :\n                                <Avatar style={{backgroundColor: '#87d068'}}>\n                                    {this.props.currentPatient.user.first_name ? this.props.currentPatient.user.first_name.charAt(0) :\n                                        <Icon type=\"user\"/>}\n                                </Avatar>)}\n                            &nbsp;&nbsp;{that.props.currentPatient.user.first_name.length < 16 ? that.props.currentPatient.user.first_name : that.props.currentPatient.user.first_name.slice(0, 12) + '...'}\n                            <small><i><b> [ID: {that.props.currentPatient.custom_id ? that.props.currentPatient.custom_id : that.props.currentPatient.id}]</b></i></small>\n\n                        </a>\n                        {this.props.MedicalMembership ?\n                            <Popover placement=\"rightTop\"\n                                     title=\"Patient Membership\"\n                                     content={<div><p><strong>Membership Code : </strong>\n                                         <span>{this.props.MedicalMembership.membership_code}</span></p>\n                                         <p><strong>Start Date : </strong>\n                                             <span>{this.props.MedicalMembership.medical_from}</span></p>\n                                         <p><strong>Valid Till : </strong>\n                                             <span>{this.props.MedicalMembership.medical_to}</span></p></div>}>\n                                <div style={{\n                                    display: 'inline',\n                                    // float: 'left',\n                                    maxWidth: 50,\n                                    // position: 'absolute',\n                                    // paddingLeft: 173,\n                                    // margin: '12px 15px',\n                                    fontSize: 30,\n                                    lineHeight: \"40px\"\n                                }}>\n                                    <Icon type=\"crown\" theme=\"twoTone\" twoToneColor={\"#FFBA3A\"}/>\n                                </div>\n                            </Popover> : null}\n                        <Popover placement=\"topLeft\" title={\"Medical History\"}\n                                 content={<div\n                                     style={{width: 250}}>{that.props.currentPatient.medical_history_data ? that.props.currentPatient.medical_history_data.map((item, index) =>\n                                     <Tag color={'#' + intToRGB(hashCode(item.name))}>{item.name}</Tag>) : null}</div>}>\n\n                            {that.props.currentPatient.medical_history_data ? that.props.currentPatient.medical_history_data.map((item, index) =>\n                                index > 0 ? index == 1 &&\n                                    <Tag>+{that.props.currentPatient.medical_history_data.length - 1}</Tag> :\n                                    <Tag color={'#' + intToRGB(hashCode(item.name))}>{item.name}</Tag>) : null}\n\n                        </Popover>\n                        <Switch\n                            style={{marginLeft: 20}}\n                            checked={this.props.showAllClinic}\n                            onChange={(value) => this.props.toggleShowAllClinic(value)}\n                            checkedChildren={\"All Clinics\"}\n                            unCheckedChildren={\"Current Clinic\"}\n                        />\n                        {this.props.pendingAmount ? <>\n                            <Button style={{marginLeft: '20px'}} type=\"primary\" size={\"small\"}>\n                                <Link to={'/patient/' + this.props.currentPatient.id + '/billing/payments/add'}>Pay!</Link>\n                            </Button>\n                            <Popover placement=\"rightTop\"\n                                     content={<List size=\"small\" dataSource={this.props.pendingAmount.practice_data}\n                                                    renderItem={item => <List.Item><List.Item.Meta title={item.name}\n                                                                                                   description={\"Rs. \" + (item.total < 0 ? item.total * -1 + \" (Advance)\" : item.total)}/></List.Item>}/>}\n                                     title=\"Pending Payments\">\n\n                                <div style={{\n                                    display: 'inline',\n                                    float: 'left',\n                                    maxWidth: 200,\n                                    position: 'absolute',\n                                    margin: '5px 15px',\n                                    zIndex: 5\n                                }}>\n                                    <Statistic title=\"Amount Due\" value={this.props.pendingAmount.grand_total}\n                                               valueStyle={{\n                                                   color: this.props.pendingAmount.grand_total > 0 ? '#cf1322' : 'initial',\n                                                   fontWeight: 500,\n                                                   fontSize:20\n                                               }}\n                                               precision={2}/>\n\n                                </div>\n                            </Popover>\n                        </> : null}\n\n                        {this.props.walletAmount && this.props.walletAmount.length ?\n                            <Popover placement=\"rightTop\"\n                                     title=\"Agent Wallet Amount\"\n                                     content={<p>\n                                         {/*Refundable : {this.state.walletAmount[0].refundable_amount} <br/>*/}\n                                         Non-Refundable : {this.props.walletAmount[0].non_refundable}\n                                     </p>}>\n                                <div style={{\n                                    display: 'inline',\n                                    float: 'left',\n                                    maxWidth: 400,\n                                    position: 'absolute',\n                                    paddingLeft: 150,\n                                    margin: '20px 15px'\n                                }}>\n                                    <Statistic tile={\"wallet\"}\n                                               value={this.props.walletAmount[0].refundable_amount + this.props.walletAmount[0].non_refundable}\n                                               precision={2}\n                                               valueStyle={{\n                                                   fontSize:20\n                                               }}\n                                               prefix={<Icon type=\"wallet\" twoToneColor={\"#a2711c\"}/>}/>\n                                </div>\n                            </Popover> : null}\n                    </div> :\n                    <a style={{padding: '8px', fontSize: '20px'}}\n                       onClick={() => this.props.togglePatientListModal(true)}>\n                        <div style={{display: 'inline'}}><Icon type=\"solution\"/> &nbsp; All Patient</div>\n                    </a>}\n                <Dropdown overlay={patientSettingMenu}>\n                    <Button style={{float: 'right', margin: '15px'}}>\n                        <Icon type=\"setting\"/> Settings <Icon type=\"down\"/>\n                    </Button>\n                </Dropdown>\n                {that.props.activePracticePermissions.AddPatient || that.props.allowAllPermissions ?\n                    <Link to=\"/patients/profile/add\">\n                        <Button type=\"primary\" style={{float: 'right', margin: '15px'}}>\n                            <Icon type=\"plus\"/> Add Patient\n                        </Button>\n                    </Link> : null}\n\n            </div>\n            <Modal\n                width={1300}\n                maskClosable={false}\n                centered\n                footer={null}\n                closable={false}\n                visible={this.props.listModalVisible}\n                style={{\n                    height: 'calc(100vh - 120px)',\n                }}>\n                <Button icon=\"close\" type=\"danger\" shape=\"circle\" style={{position: 'absolute', top: '-50px', right: 0}}\n                        onClick={() =>\n                            this.props.togglePatientListModal(false)}/>\n                <PatientSelection {...this.props}/>\n            </Modal>\n        </Header>\n    }\n}\n\nexport default PatientHeader;\n\n\n","import React from \"react\";\nimport DynamicFieldsForm from \"../../common/DynamicFieldsForm\";\nimport {Button, List, DatePicker,Card, Form, Icon, Row, Table, Divider, Col, Radio} from \"antd\";\nimport {SINGLE_CHECKBOX_FIELD, SUCCESS_MSG_TYPE} from \"../../../constants/dataKeys\";\nimport {Link} from \"react-router-dom\";\nimport {getAPI, displayMessage, interpolate, putAPI} from \"../../../utils/common\";\nimport {PATIENT_COMMUNICATION_HISTORY_API, PATIENT_PROFILE} from \"../../../constants/api\";\nimport {SMS_ENABLE, BIRTHDAY_SMS_ENABLE, EMAIL_ENABLE} from \"../../../constants/hardData\";\nimport moment from \"moment\";\nimport CustomizedTable from \"../../common/CustomizedTable\";\n\nclass PatientCommunicationSetting extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            parient_communication_history: null,\n            patientProfile: null,\n            saving: false\n        };\n\n        this.loadCommunication = this.loadCommunication.bind(this);\n        this.loadProfile = this.loadProfile.bind(this);\n    }\n\n    componentDidMount() {\n        if (this.props.currentPatient) {\n            this.loadCommunication();\n            this.loadProfile();\n        }\n    }\n\n    loadProfile() {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                patientProfile: data,\n                loading: false\n            });\n        };\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            })\n        };\n        getAPI(interpolate(PATIENT_PROFILE, [that.props.match.params.id]), successFn, errorFn);\n    }\n\n    loadCommunication() {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                parient_communication_history: data.user_sms,\n                loading: false\n            })\n        }\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            })\n        }\n        getAPI(interpolate(PATIENT_COMMUNICATION_HISTORY_API, [this.props.currentPatient.user.id]), successFn, errorFn)\n    }\n\n    changeRedirect() {\n        var redirectVar = this.state.redirect;\n        this.setState({\n            redirect: !redirectVar,\n        });\n    }\n\n    onChanged = (name, value) => {\n        this.setState({\n            [name]: value,\n        });\n    }\n\n    handleSubmit = (e) => {\n        let that = this;\n        e.preventDefault();\n        this.props.form.validateFields((err, values) => {\n            if (!err) {\n                let reqData = {...values,\n                    medicine_till:moment(values.medicine_till).format('YYYY-MM-DD'),\n                    follow_up_date:moment(values.follow_up_date).format('YYYY-MM-DD'),\n                };\n                that.setState({\n                    saving: true\n                });\n                let successFn = function (data) {\n                    displayMessage(SUCCESS_MSG_TYPE, \"Communication Settings Saved Successfully!!\");\n                    that.setState({\n                        saving: false\n                    });\n                }\n                let errorFn = function () {\n                    that.setState({\n                        saving: false\n                    });\n                }\n                putAPI(interpolate(PATIENT_PROFILE, [this.props.currentPatient.id]), reqData, successFn, errorFn);\n            }\n        });\n    }\n\n\n    render() {\n        const {getFieldDecorator} = this.props.form;\n        const formItemLayout = {\n            labelCol: {\n                xs: {span: 8},\n                sm: {span: 8},\n                md: {span: 8},\n                lg: {span: 8},\n            },\n            wrapperCol: {\n                xs: {span: 16},\n                sm: {span: 16},\n                md: {span: 16},\n                lg: {span: 16},\n            },\n        };\n\n\n        const columns = [{\n            title: 'SENT TIME',\n            dataIndex: 'created_at',\n            key: 'created_at',\n            render: created_at => <span>{moment(created_at).format('LLL')}</span>,\n        }, {\n            title: 'MESSAGE',\n            dataIndex: 'body',\n            key: 'body',\n        }, {\n            title: 'TYPE',\n            dataIndex: 'sms_type',\n            key: 'sms_type',\n        }, {\n            title: 'MESSAGE STATUS',\n            dataIndex: 'status',\n            key: 'status',\n        }];\n\n\n        const sms_enabled = SMS_ENABLE.map((isSMS) => <Radio value={isSMS.value}>{isSMS.title}</Radio>)\n        const email_enabled = EMAIL_ENABLE.map((isEmail) => <Radio value={isEmail.value}>{isEmail.title}</Radio>)\n        const bithday_sms_enabled = BIRTHDAY_SMS_ENABLE.map((isBirth_SMS) => <Radio\n            value={isBirth_SMS.value}>{isBirth_SMS.title}</Radio>);\n        return (<Form onSubmit={this.handleSubmit}>\n                <Card\n                    title={this.props.currentPatient ? this.props.currentPatient.user.first_name + \" Communication\" : \"Patient Communication\"}\n                    extra={<Button type=\"primary\" htmlType=\"submit\" loading={this.state.saving}>\n                        <Icon type=\"save\"/> Save Communication Setting\n                    </Button>}>\n\n                    <Form.Item {...formItemLayout} key={'sms_enable'}> <label>\n                        <span className=\"ant-form-text\">{'Enable SMS the patient'} : </span>\n                        {getFieldDecorator('sms_enable', {initialValue: this.state.patientProfile ? this.state.patientProfile.sms_enable : false})\n                        (\n                            <Radio.Group onChange={(e) => this.onChanged('sms_enable', e.target.value)}>\n                                {sms_enabled}\n                            </Radio.Group>\n                        )}\n                    </label>\n                    </Form.Item>\n\n                    <Form.Item {...formItemLayout} key={'email_enable'}> <label> <span\n                        className=\"ant-form-text\">{'Enable Email the patient'} : </span>\n                        {getFieldDecorator('email_enable', {initialValue: this.state.patientProfile ? this.state.patientProfile.email_enable : false})\n                        (\n                            <Radio.Group onChange={(e) => this.onChanged('email_enable', e.target.value)}>\n                                {email_enabled}\n                            </Radio.Group>\n                        )}\n                    </label>\n                    </Form.Item>\n\n                    <Form.Item {...formItemLayout} key={'birthday_sms_email'}> <label> <span\n                        className=\"ant-form-text\"> {\"Send Birthday wish SMS & Email\"} : </span>\n                        {getFieldDecorator('birthday_sms_email', {initialValue: this.state.patientProfile ? this.state.patientProfile.birthday_sms_email : false})\n                        (\n                            <Radio.Group onChange={(e) => this.onChanged('birthday_sms_email', e.target.value)}>\n                                {bithday_sms_enabled}\n                            </Radio.Group>\n                        )}\n                    </label>\n                    </Form.Item>\n\n                    <Form.Item {...formItemLayout} key={'medicine_till'}> <label>\n                        <span\n                            className=\"ant-form-text\"> {\"Medicine Till Date\"} : </span>\n                            {getFieldDecorator('medicine_till', {initialValue: this.state.patientProfile && this.state.patientProfile.medicine_till? moment(this.state.patientProfile.medicine_till) : moment()})\n                                (<DatePicker allowClear={false} format={'YYYY-MM-DD'}/>\n                            )}\n                        </label>\n                    </Form.Item>\n\n                    <Form.Item {...formItemLayout} key={'medicine_till'}> <label>\n                        <span\n                            className=\"ant-form-text\"> {\"Next follow-up To\"} : </span>\n                        {getFieldDecorator('follow_up_date', {initialValue: this.state.patientProfile && this.state.patientProfile.follow_up_date ? moment(this.state.patientProfile.follow_up_date) : moment()})\n                        (<DatePicker allowClear={false} format={'YYYY-MM-DD'}/>\n                        )}\n                    </label>\n                    </Form.Item>\n\n\n\n\n                    <div>\n                        <Divider dashed/>\n                        <h2>Past Communication</h2>\n                        <CustomizedTable loading={this.state.loading} columns={columns}\n                               dataSource={this.state.parient_communication_history}/>\n                    </div>\n                </Card>\n            </Form>\n        );\n\n    }\n}\n\nexport default Form.create()(PatientCommunicationSetting);\n","import React from \"react\";\nimport {Card, Button, Table, Icon} from \"antd\";\nimport {Link} from \"react-router-dom\";\nimport PatientCommunicationSetting from \"./PatientCommunicationSetting\";\n\nclass PatientCommunication extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {};\n    }\n\n    render() {\n        return <PatientCommunicationSetting  {...this.state} {...this.props} />\n    }\n}\n\nexport default PatientCommunication;\n","import React from \"react\";\nimport {Route} from \"react-router\";\n\nimport DynamicFieldsForm from \"../../common/DynamicFieldsForm\";\nimport {Card, Form, Row} from \"antd\";\nimport {DATE_PICKER, NUMBER_FIELD, SELECT_FIELD, SUCCESS_MSG_TYPE} from \"../../../constants/dataKeys\";\nimport {VITAL_SIGNS_API} from \"../../../constants/api\";\nimport {displayMessage, interpolate} from \"../../../utils/common\";\nimport {Redirect} from 'react-router-dom'\nimport moment from \"moment\";\n\n\nclass AddorEditPatientVitalSigns extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            redirect: false,\n            vitalSign: null,\n            editVitalSign: this.props.editVitalSign ? this.props.editVitalSign : null,\n\n        }\n        this.changeRedirect = this.changeRedirect.bind(this);\n\n    }\n\n\n    changeRedirect() {\n        let redirectVar = this.state.redirect;\n        this.setState({\n            redirect: !redirectVar,\n        });\n    }\n\n    render() {\n        const fields = [{\n            label: \"Pulse\",\n            key: \"pulse\",\n            // required: true,\n            initialValue: this.props.editVitalSign ? this.props.editVitalSign.pulse : null,\n            type: NUMBER_FIELD,\n            follow: 'BPM'\n        }, {\n            label: \"Temperature\",\n            key: \"temperature\",\n            initialValue: this.props.editVitalSign ? this.props.editVitalSign.temperature : null,\n            type: NUMBER_FIELD,\n            follow: 'Fahrenheit'\n        }, {\n            label: \"Temperature Part\",\n            key: \"temperature_part\",\n            type: SELECT_FIELD,\n            initialValue: this.props.editVitalSign ? this.props.editVitalSign.temperature_part : null,\n            options: [{label: \"forehead\", value: \"forehead\"}, {label: \"armpit\", value: \"armpit\"}, {\n                label: \"oral \",\n                value: \"oral\"\n            }]\n        }, {\n            label: \"Blood Pressure Up\",\n            key: \"blood_pressure_up\",\n            initialValue: this.props.editVitalSign ? this.props.editVitalSign.blood_pressure_up : null,\n            type: NUMBER_FIELD,\n            follow: 'mmhg'\n        }, {\n            label: \"Blood Pressure Down\",\n            key: \"blood_pressure_down\",\n            initialValue: this.props.editVitalSign ? this.props.editVitalSign.blood_pressure_down : null,\n            type: NUMBER_FIELD,\n            follow: 'mmhg'\n        }, {\n            label: \"Position\",\n            key: \"position\",\n            type: SELECT_FIELD,\n            initialValue: this.props.editVitalSign ? this.props.editVitalSign.position : null,\n            options: [{label: \"standing\", value: \"standing\"}, {label: \"sitting\", value: \"sitting\"}]\n        }, {\n            label: \"Weight\",\n            key: \"weight\",\n            initialValue: this.props.editVitalSign ? this.props.editVitalSign.weight : null,\n            type: NUMBER_FIELD,\n            follow: 'kg.'\n        }, {\n            label: \"Resp Rate\",\n            key: \"resp_rate\",\n            initialValue: this.props.editVitalSign ? this.props.editVitalSign.resp_rate : null,\n            type: NUMBER_FIELD,\n            follow: 'breaths/min'\n        }, {\n            label: \"Creatinine Level\",\n            key: \"creatinine\",\n            initialValue: this.props.editVitalSign ? this.props.editVitalSign.creatinine : null,\n            type: NUMBER_FIELD,\n        }, {\n            label: \"Haemoglobin Level\",\n            key: \"haemoglobin\",\n            initialValue: this.props.editVitalSign ? this.props.editVitalSign.haemoglobin : null,\n            type: NUMBER_FIELD,\n        }, {\n            label: \"Urea Level\",\n            key: \"urea\",\n            initialValue: this.props.editVitalSign ? this.props.editVitalSign.urea : null,\n            type: NUMBER_FIELD,\n        }, {\n            label: \"Uric Acid Level\",\n            key: \"uric_acid\",\n            initialValue: this.props.editVitalSign ? this.props.editVitalSign.uric_acid : null,\n            type: NUMBER_FIELD,\n        },{\n            label:'Date',\n            key:'date',\n            initialValue:this.props.editVitalSign && this.props.editVitalSign.date ?this.props.editVitalSign.date:moment(),\n            type:DATE_PICKER,\n            required:true,\n        }];\n\n\n        let editformProp;\n        let defaultValues = [{key: 'patient', value: this.props.match.params.id}, {\n            key: 'practice',\n            value: this.props.active_practiceId\n        }];\n        let that = this;\n        const TestFormLayout = Form.create()(DynamicFieldsForm);\n        if (this.state.editVitalSign) {\n            editformProp = {\n                successFn: function (data) {\n                    displayMessage(SUCCESS_MSG_TYPE, \"success\")\n                    if (that.props.loadData){\n                        that.props.loadData();\n                    }\n                    if (that.props.history){\n                        that.props.history.replace('/patient/'+ that.props.match.params.id +'/emr/vitalsigns')\n                    }\n\n                },\n                errorFn: function () {\n\n                },\n                action: interpolate(VITAL_SIGNS_API, [this.props.match.params.id]),\n                method: \"post\",\n            }\n            defaultValues.push({\"key\": \"id\", \"value\": this.state.editVitalSign.id})\n        }\n        const formProp = {\n            successFn: function (data) {\n                displayMessage(SUCCESS_MSG_TYPE, \"success\")\n                if (that.props.loadData) {\n                    that.props.loadData();\n                }\n                if (that.props.history){\n                    that.props.history.replace('/patient/'+ that.props.match.params.id +'/emr/vitalsigns')\n                }\n            },\n            errorFn: function () {\n\n            },\n            action: interpolate(VITAL_SIGNS_API, [this.props.match.params.id]),\n            method: \"post\",\n        }\n\n\n        return <Row>\n            <Card>\n                <Route exact path='/patient/:id/emr/vitalsigns/edit'\n                       render={() => (this.state.editVitalSign ?\n                           <TestFormLayout defaultValues={defaultValues} title=\"Edit Report Manual\"\n                                           changeRedirect={this.changeRedirect} formProp={editformProp}\n                                           fields={fields}/> :\n                           <Redirect to='/patients/profile'/>)}/>\n                <Route exact path='/patient/:id/emr/vitalsigns/add'\n                       render={() => <TestFormLayout title=\"Add Report Manual\"\n                                                     defaultValues={defaultValues}\n                                                     changeRedirect={this.changeRedirect}\n                                                     formProp={formProp} fields={fields}/>}/>\n\n\n            </Card>\n            {this.state.redirect && <Redirect to={'/patient/' + this.props.match.params.id + '/emr/vitalsigns'}/>}\n        </Row>\n\n    }\n}\n\nexport default AddorEditPatientVitalSigns;\n","import React from \"react\";\nimport {Button, Card, Divider, Icon, Input, Modal, Table, Tabs, Tag, Tooltip as AntTooltip} from \"antd\";\nimport {Link, Route, Switch} from \"react-router-dom\";\nimport {CLINIC_NOTES_PDF, VITAL_SIGN_PDF, VITAL_SIGNS_API} from \"../../../constants/api\";\nimport {displayMessage, getAPI, interpolate, postAPI} from \"../../../utils/common\";\nimport moment from 'moment';\nimport CustomizedTable from \"../../common/CustomizedTable\";\nimport AddorEditPatientVitalSigns from \"./AddorEditPatientVitalSigns\";\nimport {\n    CartesianGrid,\n    Legend,\n    Line,\n    Tooltip,\n    XAxis,\n    YAxis,\n    ResponsiveContainer,\n    ComposedChart,\n} from 'recharts';\nimport {BACKEND_BASE_URL} from \"../../../config/connect\";\nimport InfiniteFeedLoaderButton from \"../../common/InfiniteFeedLoaderButton\";\nimport {SUCCESS_MSG_TYPE} from \"../../../constants/dataKeys\";\nimport * as _ from \"lodash\";\nimport {sendMail} from \"../../../utils/clinicUtils\";\n\nconst confirm = Modal.confirm;\n\nclass PatientVitalSign extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            currentPatient: this.props.currentPatient,\n            vitalsign: [],\n            loading: true\n        }\n        this.loadVitalsigns = this.loadVitalsigns.bind(this);\n\n    }\n\n    componentDidMount() {\n        this.loadVitalsigns();\n    }\n\n    loadVitalsigns(page = 1) {\n        let that = this;\n        let successFn = function (data) {\n            that.setState(function (prevState) {\n                if (data.current == 1) {\n                    return {\n                        vitalsign: [...data.results],\n                        next: data.next,\n                        loading: false\n                    }\n                }\n                return {\n                    vitalsign: [...prevState.vitalsign, ...data.results],\n                    next: data.next,\n                    loading: false\n                }\n            })\n        }\n        let errorFn = function () {\n\n        }\n        let apiParams = {\n            page: page,\n            practice: this.props.active_practiceId\n        };\n        if (this.props.match.params.id) {\n            apiParams.patient = this.props.match.params.id;\n        }\n        if (this.props.showAllClinic && this.props.match.params.id) {\n            delete (apiParams.practice)\n        }\n        getAPI(VITAL_SIGNS_API, successFn, errorFn, apiParams)\n    }\n\n    deleteVitalSign = (record) => {\n        let that = this;\n        confirm({\n            title: 'Are you sure to delete this item?',\n            okText: 'Yes',\n            okType: 'danger',\n            cancelText: 'No',\n            onOk() {\n                let reqData = {...record, is_active: false};\n                let successFn = function (data) {\n                    that.loadVitalsigns();\n                    displayMessage(SUCCESS_MSG_TYPE, \"Deleted Successfully!!\")\n\n                };\n                let errorFn = function () {\n\n                };\n                postAPI(interpolate(VITAL_SIGNS_API, [record.patient]), reqData, successFn, errorFn)\n            },\n            onCancel() {\n                console.log('Cancel');\n            },\n        });\n    }\n    editObject = (record) => {\n        this.setState({\n            editVitalSign: record,\n            loading: false\n        });\n        if (this.props.match.params.id) {\n            let id = this.props.match.params.id;\n            this.props.history.push(\"/patient/\" + id + \"/emr/vitalsigns/edit\")\n        } else {\n            this.props.history.push(\"/patient/\" + record.patient + \"/emr/vitalsigns\");\n        }\n\n\n    }\n\n    loadPDF(id) {\n        let that = this;\n        let successFn = function (data) {\n            if (data.report)\n                window.open(BACKEND_BASE_URL + data.report);\n        }\n        let errorFn = function () {\n\n        }\n        getAPI(interpolate(VITAL_SIGN_PDF, [id]), successFn, errorFn);\n    }\n\n    updateFormValue =(type,value)=>{\n        this.setState({\n            [type]: value\n        })\n    };\n\n    mailModalOpen =() =>{\n        this.setState({\n            visibleMail:true\n        })\n    };\n\n    mailModalClose =() =>{\n        this.setState({\n            visibleMail:false\n        })\n    };\n    sendPatientMail =(record)=>{\n        this.mailModalOpen()\n        this.setState({\n            patientName:_.get(record,'patient_data.user.first_name'),\n            reportManualId:_.get(record,'id'),\n            mail_to:_.get(record,'patient_data.user.email')\n        })\n\n    };\n    sendMailToPatient =()=>{\n        let {mail_to ,reportManualId } = this.state;\n        let apiParams ={\n            mail_to:mail_to,\n        }\n        sendMail(interpolate(VITAL_SIGN_PDF,[reportManualId]),apiParams)\n        this.mailModalClose();\n    }\n\n    render() {\n        let that = this;\n        let{vitalsign} =this.state;\n        const columns = [{\n            title: 'Date',\n            dataIndex: 'date',\n            key: 'date',\n            render: (item, record) => <span>{record.date ? moment(record.date).format('LL') : ''}</span>,\n        }, {\n            title: 'Temp(F)',\n            key: 'temperature',\n            render: (text, record) => (\n                <span> {record.temperature}<br/>,{record.temperature_part}</span>\n            )\n        }, {\n            title: 'Pulse (BPM)',\n            dataIndex: 'pulse',\n            key: 'pulse',\n        }, {\n            title: 'RR breaths/min',\n            dataIndex: 'resp_rate',\n            key: 'resp_rate',\n        }, {\n            title: 'SYS/DIA mmhg',\n            key: 'address',\n            render: (text, record) => (\n                <span> {record.blood_pressure_up}/{record.blood_pressure_down}<br/>,{record.position}</span>\n            )\n        }, {\n            title: 'WEIGHT kg',\n            dataIndex: 'weight',\n            key: 'weight',\n        }, {\n            title: \"Creatinine Level\",\n            key: \"creatinine\",\n            dataIndex: \"creatinine\",\n        }, {\n            title: \"Haemoglobin Level\",\n            key: \"haemoglobin\",\n            dataIndex: \"haemoglobin\",\n        }, {\n            title: \"Urea Level\",\n            key: \"urea\",\n            dataIndex: \"urea\",\n\n        }, {\n            title: \"Uric Acid Level\",\n            key: \"uric_acid\",\n            dataIndex: \"uric_acid\",\n        }, {\n            title: 'Action',\n            key: 'action',\n            render: (text, record) => (\n                <span>\n                    <a onClick={() => this.loadPDF(record.id)}\n                    >Print</a>\n                    <Divider type=\"vertical\"/>\n                  <a onClick={() => this.editObject(record)}\n                     disabled={(record.practice != that.props.active_practiceId)}>Edit</a>\n                    <Divider type=\"vertical\"/>\n                    <a onClick={() => that.deleteVitalSign(record)}\n                       disabled={(record.practice != that.props.active_practiceId)}>Delete</a>\n\n                    <Divider type=\"vertical\"/>\n                    <a onClick={() => that.sendPatientMail(record)}\n                       >Send to patient</a>\n                </span>\n            ),\n        }];\n\n        if (this.props.match.params.id) {\n            return <Switch>\n                <Route path='/patient/:id/emr/vitalsigns/add'\n                       render={(route) => <AddorEditPatientVitalSigns\n                           {...this.props}\n                           key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.state} {...route}\n                           loadData={this.loadVitalsigns}/>}/>\n                <Route path='/patient/:id/emr/vitalsigns/edit'\n                       render={(route) => <AddorEditPatientVitalSigns\n                           {...this.props}\n                           key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.state} {...route}\n                           loadData={this.loadVitalsigns}/>}/>\n                <Route>\n                    <Card\n                        title={this.state.currentPatient ? this.state.currentPatient.user.first_name + \" Report Manual\" : \"Patient Report Manual\"}\n                        extra={<Button.Group>\n                            <Link to={\"/patient/\" + this.props.match.params.id + \"/emr/vitalsigns/add\"}>\n                                <Button type={\"primary\"}>\n                                    <Icon type=\"plus\"/>Add\n                                </Button>\n                            </Link>\n                        </Button.Group>}>\n                        <Tabs>\n                            <Tabs.TabPane tab={\"Charts\"} key={1} style={{margin: 'auto'}}>\n                                <Divider>Pulse Chart (bpm)</Divider>\n                                <div style={{height: 200}}>\n                                    <ResponsiveContainer>\n                                        <ComposedChart width={700} height={200} data={this.state.vitalsign.reverse()}\n                                                       margin={{top: 10, right: 30, left: 0, bottom: 0}}>\n                                            {/*<defs>*/}\n                                            {/*    <linearGradient id=\"colorUv\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">*/}\n                                            {/*        <stop offset=\"5%\" stopColor=\"#8884d8\" stopOpacity={0.8}/>*/}\n                                            {/*        <stop offset=\"95%\" stopColor=\"#8884d8\" stopOpacity={0}/>*/}\n                                            {/*    </linearGradient>*/}\n                                            {/*    <Legend verticalAlign=\"top\" height={36}/>*/}\n                                            {/*</defs>*/}\n                                            <XAxis dataKey=\"date\" tickFormatter={(value) => {\n                                                return moment(value).format('LL')\n                                            }} tickCount={that.state.vitalsign.length}/>\n                                            <YAxis\n                                                domain={[dataMin => (Math.abs(dataMin)), dataMax => (dataMax * 1.1).toFixed(0)]}/>\n                                            <CartesianGrid strokeDasharray=\"3 3\"/>\n                                            <Tooltip\n                                                labelFormatter={(value) => (value && moment(value).isValid() ? moment(value).format('LL') : '--')}/>\n                                            <Line type=\"monotone\" dataKey=\"pulse\" stroke=\"#8884d8\" fillOpacity={1}\n                                                  strokeWidth={4}\n                                                  fill=\"url(#colorUv)\"/>\n                                        </ComposedChart>\n                                    </ResponsiveContainer>\n                                </div>\n                                <Divider>Temperature (F)</Divider>\n                                <div style={{height: 200}}>\n                                    <ResponsiveContainer>\n                                        <ComposedChart width={700} height={200} data={this.state.vitalsign.reverse()}\n                                                       margin={{top: 10, right: 30, left: 0, bottom: 0}}>\n                                            <Legend verticalAlign=\"top\" height={36}/>\n                                            <defs>\n                                                <linearGradient id=\"colorUv\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                                                    <stop offset=\"5%\" stopColor=\"#82ca9d\" stopOpacity={0.8}/>\n                                                    <stop offset=\"95%\" stopColor=\"#82ca9d\" stopOpacity={0}/>\n                                                </linearGradient>\n                                            </defs>\n                                            <XAxis dataKey=\"date\" tickFormatter={(value) => {\n                                                return moment(value).format('LL')\n                                            }} tickCount={this.state.vitalsign.length}/>\n                                            <YAxis\n                                                domain={[dataMin => (Math.abs(dataMin)), dataMax => (dataMax * 1.1).toFixed(0)]}/>\n                                            <CartesianGrid strokeDasharray=\"3 3\"/>\n\n                                            <Tooltip\n                                                labelFormatter={(value) => (value && moment(value).isValid() ? moment(value).format('LL') : '--')}/>\n                                            <Line type=\"monotone\" dataKey=\"temperature\" stroke=\"#82ca9d\" fillOpacity={1}\n                                                  strokeWidth={4}\n                                                  fill=\"url(#colorUv)\"/>\n                                        </ComposedChart>\n                                    </ResponsiveContainer>\n                                </div>\n                                <Divider>Blood Pressure (mmhg)</Divider>\n                                <div style={{height: 200}}>\n                                    <ResponsiveContainer>\n                                        <ComposedChart width={700} height={200} data={this.state.vitalsign.reverse()}\n                                                       margin={{top: 10, right: 30, left: 0, bottom: 0}}>\n                                            <defs>\n                                                <linearGradient id=\"colorUv\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                                                    <stop offset=\"5%\" stopColor=\"#ffc658\" stopOpacity={0.8}/>\n                                                    <stop offset=\"95%\" stopColor=\"#ffc658\" stopOpacity={0}/>\n                                                </linearGradient>\n                                            </defs>\n                                            <XAxis dataKey=\"date\" tickFormatter={(value) => {\n                                                return moment(value).format('LL')\n                                            }} tickCount={this.state.vitalsign.length}/>\n                                            <YAxis\n                                                domain={[dataMin => (Math.abs(dataMin)), dataMax => (dataMax * 1.1).toFixed(0)]}/>\n                                            <CartesianGrid strokeDasharray=\"3 3\"/>\n                                            <Tooltip\n                                                labelFormatter={(value) => (value && moment(value).isValid() ? moment(value).format('LL') : '--')}/>\n                                            <Line type=\"monotone\" dataKey=\"blood_pressure_up\" stroke=\"#ffc658\"\n                                                  fillOpacity={1}\n                                                  strokeWidth={4}\n                                                  fill=\"url(#colorUv)\"/>\n                                            <Line type=\"monotone\" dataKey=\"blood_pressure_down\" stroke=\"#82ca9d\"\n                                                  fillOpacity={1}\n                                                  strokeWidth={4}\n                                                  fill=\"url(#colorUv)\"/>\n                                        </ComposedChart>\n                                    </ResponsiveContainer>\n                                </div>\n                                <Divider>Weight (kg)</Divider>\n                                <div style={{height: 200}}>\n                                    <ResponsiveContainer>\n                                        <ComposedChart width={700} height={200} data={this.state.vitalsign.reverse()}\n                                                       margin={{top: 10, right: 30, left: 0, bottom: 0}}>\n                                            <defs>\n                                                <linearGradient id=\"colorUv\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                                                    <stop offset=\"5%\" stopColor=\"#8884d8\" stopOpacity={0.8}/>\n                                                    <stop offset=\"95%\" stopColor=\"#8884d8\" stopOpacity={0}/>\n                                                </linearGradient>\n                                                <linearGradient id=\"colorPv\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                                                    <stop offset=\"5%\" stopColor=\"#82ca9d\" stopOpacity={0.8}/>\n                                                    <stop offset=\"95%\" stopColor=\"#82ca9d\" stopOpacity={0}/>\n                                                </linearGradient>\n                                            </defs>\n                                            <XAxis dataKey=\"date\" tickFormatter={(value) => {\n                                                return moment(value).format('LL')\n                                            }} tickCount={this.state.vitalsign.length}/>\n                                            <YAxis\n                                                domain={[dataMin => (Math.abs(dataMin)), dataMax => (dataMax * 1.1).toFixed(0)]}/>\n                                            <CartesianGrid strokeDasharray=\"3 3\"/>\n                                            <Tooltip\n                                                labelFormatter={(value) => (value && moment(value).isValid() ? moment(value).format('LL') : '--')}/>\n                                            <Line type=\"monotone\" dataKey=\"weight\" stroke=\"#8884d8\" fillOpacity={1}\n                                                  strokeWidth={4}\n                                                  fill=\"url(#colorUv)\"/>\n                                        </ComposedChart>\n                                    </ResponsiveContainer>\n                                </div>\n                                <Divider>Respiratory Rate (breaths/min)</Divider>\n                                <div style={{height: 200}}>\n                                    <ResponsiveContainer>\n                                        <ComposedChart width={700} height={200} data={this.state.vitalsign.reverse()}\n                                                       margin={{top: 10, right: 30, left: 0, bottom: 0}}>\n                                            <defs>\n                                                <linearGradient id=\"colorUv\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                                                    <stop offset=\"5%\" stopColor=\"#82ca9d\" stopOpacity={0.8}/>\n                                                    <stop offset=\"95%\" stopColor=\"#82ca9d\" stopOpacity={0}/>\n                                                </linearGradient>\n                                                <linearGradient id=\"colorPv\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                                                    <stop offset=\"5%\" stopColor=\"#82ca9d\" stopOpacity={0.8}/>\n                                                    <stop offset=\"95%\" stopColor=\"#82ca9d\" stopOpacity={0}/>\n                                                </linearGradient>\n                                            </defs>\n                                            <XAxis dataKey=\"date\" tickFormatter={(value) => {\n                                                return moment(value).format('LL')\n                                            }} tickCount={this.state.vitalsign.length}/>\n                                            <YAxis\n                                                domain={[dataMin => (Math.abs(dataMin)), dataMax => (dataMax * 1.1).toFixed(0)]}/>\n                                            <CartesianGrid strokeDasharray=\"3 3\"/>\n                                            <Tooltip\n                                                labelFormatter={(value) => (value && moment(value).isValid() ? moment(value).format('LL') : '--')}/>\n                                            <Line type=\"monotone\" dataKey=\"resp_rate\" stroke=\"#82ca9d\" fillOpacity={1}\n                                                  strokeWidth={4}\n                                                  fill=\"url(#colorUv)\"/>\n                                        </ComposedChart>\n                                    </ResponsiveContainer>\n                                </div>\n                                <Divider>Creatinine Level</Divider>\n                                <div style={{height: 200}}>\n                                    <ResponsiveContainer>\n                                        <ComposedChart width={700} height={200} data={this.state.vitalsign.reverse()}\n                                                       margin={{top: 10, right: 30, left: 0, bottom: 0}}>\n                                            <defs>\n                                                <linearGradient id=\"colorUv\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                                                    <stop offset=\"5%\" stopColor=\"#82ca9d\" stopOpacity={0.8}/>\n                                                    <stop offset=\"95%\" stopColor=\"#82ca9d\" stopOpacity={0}/>\n                                                </linearGradient>\n                                                <linearGradient id=\"colorPv\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                                                    <stop offset=\"5%\" stopColor=\"#82ca9d\" stopOpacity={0.8}/>\n                                                    <stop offset=\"95%\" stopColor=\"#82ca9d\" stopOpacity={0}/>\n                                                </linearGradient>\n                                            </defs>\n                                            <XAxis dataKey=\"date\" tickFormatter={(value) => {\n                                                return moment(value).format('LL')\n                                            }} tickCount={this.state.vitalsign.length}/>\n                                            <YAxis\n                                                domain={[dataMin => (Math.abs(dataMin)), dataMax => (dataMax * 1.1).toFixed(0)]}/>\n                                            <CartesianGrid strokeDasharray=\"3 3\"/>\n                                            <Tooltip\n                                                labelFormatter={(value) => (value && moment(value).isValid() ? moment(value).format('LL') : '--')}/>\n                                            <Line type=\"monotone\" dataKey=\"creatinine\" stroke=\"#82ca9d\" fillOpacity={1}\n                                                  strokeWidth={4}\n                                                  fill=\"url(#colorUv)\"/>\n                                        </ComposedChart>\n                                    </ResponsiveContainer>\n                                </div>\n                                <Divider>Haemoglobin Level</Divider>\n                                <div style={{height: 200}}>\n                                    <ResponsiveContainer>\n                                        <ComposedChart width={700} height={200} data={this.state.vitalsign.reverse()}\n                                                       margin={{top: 10, right: 30, left: 0, bottom: 0}}>\n                                            <defs>\n                                                <linearGradient id=\"colorUv\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                                                    <stop offset=\"5%\" stopColor=\"#82ca9d\" stopOpacity={0.8}/>\n                                                    <stop offset=\"95%\" stopColor=\"#82ca9d\" stopOpacity={0}/>\n                                                </linearGradient>\n                                                <linearGradient id=\"colorPv\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                                                    <stop offset=\"5%\" stopColor=\"#82ca9d\" stopOpacity={0.8}/>\n                                                    <stop offset=\"95%\" stopColor=\"#82ca9d\" stopOpacity={0}/>\n                                                </linearGradient>\n                                            </defs>\n                                            <XAxis dataKey=\"date\" tickFormatter={(value) => {\n                                                return moment(value).format('LL')\n                                            }} tickCount={this.state.vitalsign.length}/>\n                                            <YAxis\n                                                domain={[dataMin => (Math.abs(dataMin)), dataMax => (dataMax * 1.1).toFixed(0)]}/>\n                                            <CartesianGrid strokeDasharray=\"3 3\"/>\n                                            <Tooltip\n                                                labelFormatter={(value) => (value && moment(value).isValid() ? moment(value).format('LL') : '--')}/>\n                                            <Line type=\"monotone\" dataKey=\"haemoglobin\" stroke=\"#82ca9d\" fillOpacity={1}\n                                                  strokeWidth={4}\n                                                  fill=\"url(#colorUv)\"/>\n                                        </ComposedChart>\n                                    </ResponsiveContainer>\n                                </div>\n                                <Divider>Urea Level</Divider>\n                                <div style={{height: 200}}>\n                                    <ResponsiveContainer>\n                                        <ComposedChart width={700} height={200} data={this.state.vitalsign.reverse()}\n                                                       margin={{top: 10, right: 30, left: 0, bottom: 0}}>\n                                            <defs>\n                                                <linearGradient id=\"colorUv\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                                                    <stop offset=\"5%\" stopColor=\"#82ca9d\" stopOpacity={0.8}/>\n                                                    <stop offset=\"95%\" stopColor=\"#82ca9d\" stopOpacity={0}/>\n                                                </linearGradient>\n                                                <linearGradient id=\"colorPv\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                                                    <stop offset=\"5%\" stopColor=\"#82ca9d\" stopOpacity={0.8}/>\n                                                    <stop offset=\"95%\" stopColor=\"#82ca9d\" stopOpacity={0}/>\n                                                </linearGradient>\n                                            </defs>\n                                            <XAxis dataKey=\"date\" tickFormatter={(value) => {\n                                                return moment(value).format('LL')\n                                            }} tickCount={this.state.vitalsign.length}/>\n                                            <YAxis\n                                                domain={[dataMin => (Math.abs(dataMin)), dataMax => (dataMax * 1.1).toFixed(0)]}/>\n                                            <CartesianGrid strokeDasharray=\"3 3\"/>\n                                            <Tooltip\n                                                labelFormatter={(value) => (value && moment(value).isValid() ? moment(value).format('LL') : '--')}/>\n                                            <Line type=\"monotone\" dataKey=\"urea\" stroke=\"#82ca9d\" fillOpacity={1}\n                                                  strokeWidth={4}\n                                                  fill=\"url(#colorUv)\"/>\n                                        </ComposedChart>\n                                    </ResponsiveContainer>\n                                </div>\n                                <Divider>Uric Acid Level</Divider>\n                                <div style={{height: 200}}>\n                                    <ResponsiveContainer>\n                                        <ComposedChart width={700} height={200} data={this.state.vitalsign.reverse()}\n                                                       margin={{top: 10, right: 30, left: 0, bottom: 0}}>\n                                            <defs>\n                                                <linearGradient id=\"colorUv\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                                                    <stop offset=\"5%\" stopColor=\"#82ca9d\" stopOpacity={0.8}/>\n                                                    <stop offset=\"95%\" stopColor=\"#82ca9d\" stopOpacity={0}/>\n                                                </linearGradient>\n                                                <linearGradient id=\"colorPv\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                                                    <stop offset=\"5%\" stopColor=\"#82ca9d\" stopOpacity={0.8}/>\n                                                    <stop offset=\"95%\" stopColor=\"#82ca9d\" stopOpacity={0}/>\n                                                </linearGradient>\n                                            </defs>\n                                            <XAxis dataKey=\"date\" tickFormatter={(value) => {\n                                                return moment(value).format('LL')\n                                            }} tickCount={this.state.vitalsign.length}/>\n                                            <YAxis\n                                                domain={[dataMin => (Math.abs(dataMin)), dataMax => (dataMax * 1.1).toFixed(0)]}/>\n                                            <CartesianGrid strokeDasharray=\"3 3\"/>\n                                            <Tooltip\n                                                labelFormatter={(value) => (value && moment(value).isValid() ? moment(value).format('LL') : '--')}/>\n                                            <Line type=\"monotone\" dataKey=\"uric_acid\" stroke=\"#82ca9d\" fillOpacity={1}\n                                                  strokeWidth={4}\n                                                  fill=\"url(#colorUv)\"/>\n                                        </ComposedChart>\n                                    </ResponsiveContainer>\n                                </div>\n                            </Tabs.TabPane>\n                            <Tabs.TabPane tab={\"Details\"} key={2}>\n                                <CustomizedTable columns={columns}\n                                                 pagination={false}\n                                                 dataSource={this.state.vitalsign}/>\n                                <InfiniteFeedLoaderButton loaderFunction={() => this.loadInvoices(that.state.next)}\n                                                          loading={this.state.loading}\n                                                          hidden={!this.state.next}/>\n                                <Modal\n                                    title={null}\n                                    visible={this.state.visibleMail}\n                                    onOk={this.sendMailToPatient}\n                                    onCancel={this.mailModalClose}\n                                    footer={[\n                                        <Button key=\"back\" onClick={this.mailModalClose}>\n                                            Cancel\n                                        </Button>,\n                                        <Button key=\"submit\" type=\"primary\"  onClick={this.sendMailToPatient}>\n                                            Send\n                                        </Button>,\n                                    ]}\n                                >\n                                    <p>Send Report Manual To {this.state.patientName} ?</p>\n                                    <Input value={this.state.mail_to} placeholder={\"Email\"}\n                                           onChange={(e)=>that.updateFormValue('mail_to',e.target.value)}/>\n                                </Modal>\n                            </Tabs.TabPane>\n\n                        </Tabs>\n                    </Card>\n                </Route>\n            </Switch>\n        } else {\n            return <div>\n                <Card\n                    bodyStyle={{padding: 0}}\n                    title={this.state.currentPatient ? this.state.currentPatient.user.first_name + \" Report Manual\" : \"Patients Report Manual\"}\n                    extra={<Button.Group>\n                        <Button type={\"primary\"} onClick={() => that.props.togglePatientListModal(true)}>\n                            <Icon type=\"plus\"/>Add\n                        </Button>\n                    </Button.Group>}/>\n                {this.state.vitalsign.map(vitalsign => <div>\n                    <Card style={{marginTop: 10}}\n                          title={<small>{vitalsign.date ? moment(vitalsign.date).format('ll') : null}\n                              <Link to={\"/patient/\" + vitalsign.patient_data.id + \"/emr/vitalsigns\"}>\n                                  &nbsp;&nbsp; {vitalsign.patient_data.user ? vitalsign.patient_data.user.first_name : null} (ID: {vitalsign.patient_data.custom_id ? vitalsign.patient_data.custom_id : vitalsign.patient_data.id})&nbsp;\n                              </Link>\n                              <span>, {vitalsign.patient_data.gender}</span>\n                          </small>}\n                          bodyStyle={{padding: 0}}>\n                        <Table columns={columns}\n                               pagination={false}\n                               dataSource={[vitalsign]}\n                               footer={() => VitalSignFooter(vitalsign)}/>\n                    </Card>\n                </div>)}\n                <InfiniteFeedLoaderButton loaderFunction={() => this.loadVitalsigns(that.state.next)}\n                                          loading={this.state.loading}\n                                          hidden={!this.state.next}/>\n\n                <Modal\n                    title={null}\n                    visible={this.state.visibleMail}\n                    onOk={this.sendMailToPatient}\n                    onCancel={this.mailModalClose}\n                    footer={[\n                        <Button key=\"back\" onClick={this.mailModalClose}>\n                            Cancel\n                        </Button>,\n                        <Button key=\"submit\" type=\"primary\"  onClick={this.sendMailToPatient}>\n                            Send\n                        </Button>,\n                    ]}\n                >\n                    <p>Send Report Manual  To {this.state.patientName} ?</p>\n                    <Input value={this.state.mail_to} placeholder={\"Email\"}\n                           onChange={(e)=>that.updateFormValue('mail_to',e.target.value)}/>\n                </Modal>\n            </div>\n        }\n    }\n\n}\n\nexport default PatientVitalSign;\n\nfunction CustomizedTooltip(value, name, props) {\n    console.log(value, name, props);\n    return [\"formatted value\", \"formatted name\"]\n}\n\nfunction VitalSignFooter(presc) {\n    if (presc) {\n        console.log(presc)\n        return <div>\n            {presc.doctor ? <Tag color={presc.doctor ? presc.doctor.calendar_colour : null}>\n                <b>{\"prescribed by  \" + presc.doctor.user.first_name} </b>\n            </Tag> : null}\n\n            {presc.practice_data ? <Tag style={{float: 'right'}}>\n                <AntTooltip title=\"Practice Name\">\n                    <b>{presc.practice_data.name} </b>\n                </AntTooltip>\n            </Tag> : null}\n        </div>\n    }\n    return null\n}\n","import React from \"react\";\nimport {\n    Card,\n    Row,\n    Form,\n    Col,\n    List,\n    Button,\n    Table,\n    InputNumber,\n    Input,\n    Icon,\n    Affix,\n    Dropdown,\n    Menu,\n    DatePicker\n} from 'antd';\nimport {displayMessage, getAPI, interpolate, postAPI} from \"../../../utils/common\";\nimport {PRACTICESTAFF, PROCEDURE_CATEGORY, TREATMENTPLANS_API} from \"../../../constants/api\";\nimport {remove} from 'lodash';\nimport {Redirect} from 'react-router-dom';\nimport {DOCTORS_ROLE} from \"../../../constants/dataKeys\";\nimport moment from \"moment\";\nimport {loadDoctors} from \"../../../utils/clinicUtils\";\n\n\nclass AddorEditDynamicCompletedTreatmentPlans extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            loadingProcedures: true,\n            procedure_category: [],\n            tableFormValues: [],\n            addNotes: {},\n            practiceDoctors: [],\n            selectedDoctor: {},\n            selectedDate: moment()\n        }\n    }\n\n    componentDidMount() {\n        if (this.props.editId) {\n            this.setState(function (prevState) {\n                let tableValues = [];\n                this.props.editTreatmentPlan.treatment_plans.forEach(function (treatment) {\n                    let randId = Math.random().toFixed(7);\n                    tableValues.push({\n                        ...treatment,\n                        ...treatment.procedure,\n                        _id: randId,\n                    })\n                });\n                return {\n                    ...this.props.editTreatmentPlan,\n                    tableFormValues: tableValues,\n                    selectedDate: moment(this.props.editTreatmentPlan.date),\n                    selectedDoctor: this.props.editTreatmentPlan.doctor\n                }\n            })\n        }\n        this.loadProcedures();\n        loadDoctors(this);\n    }\n\n    calculateItem = (_id) => {\n        const {getFieldsValue} = this.props.form;\n        // console.log(getFieldsValue());\n        this.setState(function (prevState) {\n            let newtableFormValues = [...prevState.tableFormValues];\n            newtableFormValues.forEach(function (item) {\n\n            });\n        });\n    }\n    addNotes = (_id, option) => {\n        this.setState(function (prevState) {\n            return {addNotes: {...prevState.addNotes, [_id]: !!option}}\n        })\n    }\n    removeTreatment = (_id) => {\n        this.setState(function (prevState) {\n            return {\n                tableFormValues: [...remove(prevState.tableFormValues, function (item) {\n                    return item._id != _id;\n                })]\n            }\n        });\n    }\n    add = (item) => {\n        let that = this;\n        this.setState(function (prevState) {\n            let randId = Math.random().toFixed(7);\n            return {\n                addNotes: {...prevState.addNotes, [randId]: !!item.default_notes},\n                tableFormValues: [{\n                    ...item,\n                    _id: randId,\n                }, ...prevState.tableFormValues]\n            }\n        }, function () {\n            // if (that.bottomPoint)\n            //     that.bottomPoint.scrollIntoView({behavior: 'smooth'});\n        });\n    };\n\n    loadProcedures() {\n        var that = this;\n        let params = {};\n        if (this.state.searchString) {\n            params.name = this.state.searchString;\n        }\n        that.setState({\n            loadingProcedures: true\n        })\n        let successFn = function (data) {\n            if (!params.name || that.state.searchString == params.name)\n                that.setState({\n                    // procedure_category: data.results,\n                    loadingProcedures: false,\n                    filteredItems: data.results,\n                })\n        };\n        let errorFn = function () {\n            that.setState({\n                loadingProcedures: false\n            })\n        };\n\n        getAPI(interpolate(PROCEDURE_CATEGORY, [this.props.active_practiceId]), successFn, errorFn, params);\n    }\n\n    selectDoctor = (doctor) => {\n        this.setState({\n            selectedDoctor: doctor\n        })\n    }\n    selectedDate = (date) => {\n        this.setState({\n            selectedDate: date\n        })\n    }\n    handleSubmit = (e) => {\n        let that = this;\n        e.preventDefault();\n        this.props.form.validateFields((err, values) => {\n            if (!err) {\n                // console.log('Received values of form: ', values);\n                let reqData = {\n                    treatment_plans: [],\n                    patient: that.props.match.params.id,\n                    \"doctor\": that.state.selectedDoctor.id,\n                    \"date\": that.state.selectedDate && moment(that.state.selectedDate).isValid() ? that.state.selectedDate.format('YYYY-MM-DD') : null,\n                    \"practice\": that.props.active_practiceId,\n                };\n                if (that.props.editId) {\n                    reqData.id = that.props.editTreatmentPlan.id\n                }\n                that.state.tableFormValues.forEach(function (item) {\n                    // console.log(item);\n                    item.quantity = values.quantity[item._id];\n                    item.cost = values.cost[item._id];\n                    item.discount = values.discount[item._id];\n                    if (values.notes)\n                        item.notes = values.notes[item._id];\n                    let sendingItem = {\n                        \"procedure\": item.id,\n                        \"cost\": item.cost,\n                        \"quantity\": item.quantity,\n                        \"margin\": item.margin,\n                        \"default_notes\": item.notes,\n                        \"is_active\": true,\n                        \"is_completed\": true,\n                        \"discount\": item.discount,\n                        \"discount_type\": \"%\",\n\n                    };\n                    reqData.treatment_plans.push(sendingItem);\n                });\n\n                let successFn = function (data) {\n                    displayMessage(\"Inventory updated successfully\");\n                    if (that.props.loadData)\n                        that.props.loadData();\n                    let url = '/patient/' + that.props.match.params.id + '/emr/workdone';\n                    that.props.history.replace(url);\n                };\n                let errorFn = function () {\n\n                };\n                postAPI(interpolate(TREATMENTPLANS_API, [that.props.match.params.id]), reqData, successFn, errorFn);\n            }\n        });\n    };\n    searchValues = (value) => {\n        let that = this;\n        this.setState(function (prevState) {\n            return {searchString: value}\n        }, function () {\n            that.loadProcedures();\n        });\n        return false;\n    }\n\n    render() {\n        let that = this;\n        const {getFieldDecorator, getFieldValue, getFieldsValue} = this.props.form;\n        const formItemLayout = {\n            labelCol: {\n                xs: {span: 24},\n                sm: {span: 4},\n            },\n            wrapperCol: {\n                xs: {span: 24},\n                sm: {span: 20},\n            },\n        };\n        const formItemLayoutWithOutLabel = {\n            labelCol: {\n                xs: {span: 24},\n                sm: {span: 24},\n            },\n            wrapperCol: {\n                xs: {span: 24},\n                sm: {span: 24},\n            },\n        };\n        const consumeRow = [{\n            title: 'Treatments',\n            dataIndex: 'name',\n            key: 'name',\n            render: (name, record) => <span>\n                <b>{name}</b><br/>\n                {this.state.addNotes[record._id] || this.props.editId ?\n                    <Form.Item\n                        key={`default_notes[${record._id}]`}\n                        {...formItemLayout}>\n                        {getFieldDecorator(`notes[${record._id}]`, {\n                            validateTrigger: ['onChange', 'onBlur'],\n                            rules: [{\n                                message: \"This field is required.\",\n                            }],\n                            initialValue: record.default_notes\n                        })(\n                            <Input.TextArea min={0} placeholder={\"Notes...\"}/>\n                        )}\n                    </Form.Item>\n                    : <a onClick={() => this.addNotes(record._id, true)}>+ Add Note</a>}\n                </span>\n        }, {\n            title: 'Quantity',\n            dataIndex: 'quantity',\n            key: 'quantity',\n            render: (name, record) => <Form.Item\n                key={`quantity[${record._id}]`}\n                {...formItemLayout}>\n                {getFieldDecorator(`quantity[${record._id}]`, {\n                    validateTrigger: ['onChange', 'onBlur'],\n                    rules: [{\n                        required: true,\n                        message: \"This field is required.\",\n                    }],\n                    initialValue: record.quantity,\n                })(\n                    <InputNumber min={0} placeholder=\"Quantity\" size={'small'}\n                                 onChange={() => this.calculateItem(record._id)}/>\n                )}\n            </Form.Item>\n        }, {\n            title: 'Cost',\n            dataIndex: 'cost',\n            key: 'cost',\n            render: (name, record) => <Form.Item\n                key={`cost[${record._id}]`}\n                {...formItemLayout}>\n                {getFieldDecorator(`cost[${record._id}]`, {\n                    validateTrigger: ['onChange', 'onBlur'],\n                    rules: [{\n                        required: true,\n                        message: \"This field is required.\",\n                    }],\n                    initialValue: record.cost\n                })(\n                    <InputNumber min={0} placeholder=\"Cost\" size={'small'}\n                                 onChange={() => this.calculateItem(record._id)}/>\n                )}\n            </Form.Item>\n        }, {\n            title: 'Discount',\n            dataIndex: 'discount',\n            key: 'discount',\n            render: (name, record) => <Form.Item\n                key={`discount[${record._id}]`}\n                {...formItemLayout}>\n                {getFieldDecorator(`discount[${record._id}]`, {\n                    validateTrigger: ['onChange', 'onBlur'],\n                    rules: [{\n                        message: \"This field is required.\",\n                    }],\n                })(\n                    <InputNumber min={0} placeholder=\"Discount\" size={'small'}\n                                 onChange={() => this.calculateItem(record._id)}/>\n                )} %\n            </Form.Item>\n        }, {\n            title: 'Total',\n            dataIndex: 'total',\n            key: 'total',\n            render: (total, record) => <span>\n                {total}\n                <Button icon={\"close\"} onClick={() => this.removeTreatment(record._id)} type={\"danger\"}\n                        shape=\"circle\"\n                        size=\"small\"/>\n            </span>\n        }];\n        return <div>\n\n            <Card title={\"Completed Procedures\"}>\n                <Row>\n                    <Col span={17}>\n                        <Form onSubmit={this.handleSubmit}>\n                            <Table pagination={false}\n                                   bordered={true}\n                                   dataSource={this.state.tableFormValues}\n                                   columns={consumeRow}/>\n\n                            <Affix offsetBottom={0}>\n                                <Card>\n                                    <span>by &nbsp;&nbsp;</span>\n                                    <Dropdown placement=\"topCenter\" overlay={<Menu>\n                                        {this.state.practiceDoctors.map(doctor =>\n                                            <Menu.Item key=\"0\">\n                                                <a onClick={() => this.selectDoctor(doctor)}>{doctor.user.first_name}</a>\n                                            </Menu.Item>)}\n                                    </Menu>} trigger={['click']}>\n                                        <a className=\"ant-dropdown-link\" href=\"#\">\n                                            <b>\n                                                {this.state.selectedDoctor.user ? this.state.selectedDoctor.user.first_name : 'No DOCTORS Found'}\n                                            </b>\n                                        </a>\n                                    </Dropdown>\n                                    <span> &nbsp;&nbsp;on&nbsp;&nbsp;</span>\n                                    <DatePicker value={this.state.selectedDate}\n                                                onChange={(value) => this.selectedDate(value)} format={\"DD-MM-YYYY\"}\n                                                allowClear={false}/>\n                                    <Form.Item {...formItemLayoutWithOutLabel}\n                                               style={{marginBottom: 0, float: 'right'}}>\n                                        <Button type=\"primary\" htmlType=\"submit\" style={{margin: 5}}>Save Treatment\n                                            Plan</Button>\n                                        {that.props.history ?\n                                            <Button style={{margin: 5, float: 'right'}}\n                                                    onClick={() => that.props.history.goBack()}>\n                                                Cancel\n                                            </Button> : null}\n                                    </Form.Item>\n                                </Card>\n                            </Affix>\n                            <div ref={el => {\n                                that.bottomPoint = el;\n                            }}/>\n                        </Form>\n                    </Col>\n                    <Col span={7}>\n                        <Affix offsetTop={0}>\n                            <div style={{backgroundColor: '#ddd', padding: 8}}>\n                                <Input.Search placeholder={\"Search in plans ...\"}\n                                              onChange={e => this.searchValues(e.target.value)}/>\n                            </div>\n                            <List size={\"small\"}\n                                  loading={this.state.loadingProcedures}\n                                  style={{maxHeight: '100vh', overflowX: 'scroll'}}\n                                  itemLayout=\"horizontal\"\n                                  dataSource={this.state.filteredItems}\n                                  renderItem={item => (\n                                      <List.Item onClick={() => this.add(item)}>\n                                          <List.Item.Meta\n                                              title={item.name}/>\n                                      </List.Item>)}/>\n                        </Affix>\n                    </Col>\n                </Row>\n            </Card>\n\n        </div>\n    }\n}\n\nexport default Form.create()(AddorEditDynamicCompletedTreatmentPlans)\n","import React from \"react\";\nimport {Button, Card, Checkbox, Divider, Icon, Table, Popconfirm, Menu, Dropdown, Tag, Tooltip, Input,} from \"antd\";\nimport {getAPI, interpolate, putAPI, postAPI, displayMessage} from \"../../../utils/common\";\nimport {\n    PROCEDURE_CATEGORY,\n    PRODUCT_MARGIN,\n    TREATMENTPLANS_API,\n    SINGLE_REATMENTPLANS_API,\n    TREATMENTPLANS_PDF\n} from \"../../../constants/api\";\nimport moment from \"moment\";\nimport {Link, Redirect, Route, Switch} from \"react-router-dom\";\nimport {SELECT_FIELD, SUCCESS_MSG_TYPE} from \"../../../constants/dataKeys\";\nimport AddorEditDynamicCompletedTreatmentPlans from \"./AddorEditDynamicCompletedTreatmentPlans\";\nimport InfiniteFeedLoaderButton from \"../../common/InfiniteFeedLoaderButton\";\nimport {BACKEND_BASE_URL} from \"../../../config/connect\";\nimport {Modal} from \"antd\";\nimport * as _ from \"lodash\";\nimport {sendMail} from \"../../../utils/clinicUtils\";\n\nconst confirm = Modal.confirm;\n\nclass PatientCompletedProcedures extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            currentPatient: this.props.currentPatient,\n            active_practiceId: this.props.active_practiceId,\n            treatmentPlans: [],\n            procedure_category: null,\n            completedTreatmentPlans: [],\n            incompletedTreatmentPlans: [],\n            productMargin: [],\n            loading: true\n        }\n        this.loadTreatmentPlans = this.loadTreatmentPlans.bind(this);\n        this.editTreatmentPlanData = this.editTreatmentPlanData.bind(this);\n    }\n\n    componentDidMount() {\n        this.loadTreatmentPlans();\n        this.loadProductMargin();\n    }\n\n    loadProductMargin() {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                productMargin: data,\n                loading: false\n            })\n        }\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            })\n        }\n        getAPI(PRODUCT_MARGIN, successFn, errorFn);\n    }\n\n    loadTreatmentPlans(page = 1) {\n        let incompleted = [];\n        let that = this;\n        let successFn = function (data) {\n            that.setState(function (prevState) {\n                if (data.current == 1)\n                    return {\n                        treatmentPlans: [...data.results],\n                        next: data.next,\n                        loading: false\n                    }\n                return {\n                    treatmentPlans: [...prevState.treatmentPlans, ...data.results],\n                    next: data.next,\n                    loading: false\n                }\n            })\n            data.results.forEach(function (treatmentplan) {\n                if (!treatmentplan.is_completed) {\n                    incompleted.push(treatmentplan)\n                }\n            })\n            that.setState(function (prevState) {\n                return {\n                    incompletedTreatmentPlans: [...prevState.incompletedTreatmentPlans, ...incompleted],\n                    loading: false\n                }\n            })\n        }\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            })\n\n        }\n        let apiParams = {\n            page: page,\n            practice: this.props.active_practiceId,\n            complete: true\n        };\n        if (this.props.match.params.id) {\n            apiParams.patient = this.props.match.params.id;\n        }\n        if (this.props.showAllClinic && this.props.match.params.id) {\n            delete (apiParams.practice)\n        }\n        getAPI(TREATMENTPLANS_API, successFn, errorFn, apiParams)\n    }\n\n    editTreatmentPlanData(record) {\n        this.setState({\n            editTreatmentPlan: record,\n        });\n        // console.log(\"props history\",this.props);\n        let id = this.props.match.params.id;\n        this.props.history.push(\"/patient/\" + id + \"/emr/workdone/edit\");\n\n    }\n\n    deleteTreatmentPlans(record) {\n        let that = this;\n        confirm({\n            title: 'Are you sure to delete this item?',\n            okText: 'Yes',\n            okType: 'danger',\n            cancelText: 'No',\n            onOk() {\n                let obj = {\n                    id: record.id,\n                    patient: record.patient.id,\n                    is_active: false\n                }\n\n\n                let successFn = function (data) {\n                    displayMessage(SUCCESS_MSG_TYPE, \"Completed Procedure Deleted Successfully!\");\n                    that.loadTreatmentPlans();\n                }\n                let errorFn = function () {\n\n                };\n                postAPI(interpolate(TREATMENTPLANS_API, [that.props.match.params.id], null), obj, successFn, errorFn);\n            },\n            onCancel() {\n                console.log('Cancel');\n            },\n        });\n    }\n\n    loadPDF(id) {\n        let that = this;\n        let successFn = function (data) {\n            if (data.report)\n                window.open(BACKEND_BASE_URL + data.report);\n        }\n        let errorFn = function () {\n\n        }\n        getAPI(interpolate(TREATMENTPLANS_PDF, [id]), successFn, errorFn);\n    }\n    updateFormValue =(type,value)=>{\n        this.setState({\n            [type]: value\n        })\n    };\n    mailModalOpen =() =>{\n        this.setState({\n            visibleMail:true\n        })\n    };\n\n    mailModalClose =() =>{\n        this.setState({\n            visibleMail:false\n        })\n    };\n\n    sendPatientMail =(treatment)=>{\n        this.mailModalOpen()\n        this.setState({\n            patientName:_.get(treatment,'patient.user.first_name'),\n            treatmentId:_.get(treatment,'id'),\n            mail_to:_.get(treatment,'patient.user.email')\n        })\n\n    };\n\n    sendMailToPatient =()=>{\n        let {mail_to ,treatmentId } = this.state;\n        let apiParams ={\n            mail_to:mail_to,\n        }\n        sendMail(interpolate(TREATMENTPLANS_PDF,[treatmentId]),apiParams)\n        this.mailModalClose();\n    }\n\n    render() {\n        let that = this;\n\n        const columns = [{\n            title: '',\n            key: 'is_completed',\n            render: (text, record) => (record.is_completed ?\n                <Icon type=\"check-circle\" theme=\"twoTone\" style={{marginLeft: '8px', fontSize: '20px'}}/> :\n                null)\n        }, {\n            title: 'Procedure',\n            key: 'procedure.name',\n            dataIndex: 'procedure.name',\n\n        }, {\n            title: 'Quantity',\n            dataIndex: 'quantity',\n            initialValue: (this.state.editFields ? this.state.editFields.quantity : null),\n            key: 'quantity',\n        }, {\n            title: 'Discount',\n            dataIndex: 'discount',\n            key: 'discount',\n        }, {\n            title: 'Cost per  Unit',\n            dataIndex: 'cost',\n            key: 'cost',\n        }, {\n            title: 'Notes',\n            dataIndex: 'default_notes',\n            key: 'default_notes',\n        }];\n\n        if (this.props.match.params.id) {\n            return <div>\n                <Switch>\n                    <Route exact path='/patient/:id/emr/workdone/add'\n                           render={(route) => <AddorEditDynamicCompletedTreatmentPlans {...this.state} {...that.props} {...route} loadData={this.loadTreatmentPlans}/>}/>\n                    <Route exact path='/patient/:id/emr/workdone/edit'\n                           render={(route) => (this.state.editTreatmentPlan ?\n                               <AddorEditDynamicCompletedTreatmentPlans {...this.state} {...route} {...that.props}\n                                                                        editId={this.state.editTreatmentPlan.id} loadData={this.loadTreatmentPlans}/> :\n                               <Redirect to={\"/patient/\" + this.props.match.params.id + \"/emr/workdone\"}/>)}/>\n                    <Route>\n\n                        <div>\n                            <Card\n                                bodyStyle={{padding: 0}}\n                                title={this.state.currentPatient ? this.state.currentPatient.user.first_name + \" Completed Procedures\" : \"Completed Procedures \"}\n                                extra={<Button.Group>\n                                    <Link\n                                        to={\"/patient/\" + this.props.match.params.id + \"/emr/workdone/add\"}><Button><Icon\n                                        type=\"plus\"/>Add</Button></Link>\n                                </Button.Group>}/>\n\n                            {this.state.treatmentPlans.map((treatment) => <Card bodyStyle={{padding: 0}}\n                                                                                style={{marginTop: 15}}>\n                                    <div style={{padding: 16}}>\n                                        <h4>{treatment.date ? moment(treatment.date).format('ll') : null}\n                                            <Dropdown.Button\n                                                size={\"small\"}\n                                                style={{float: 'right'}}\n                                                overlay={<Menu>\n                                                    <Menu.Item key=\"1\" onClick={() => that.editTreatmentPlanData(treatment)}\n                                                               disabled={(treatment.practice && treatment.practice.id != this.props.active_practiceId)}>\n                                                        <Icon type=\"edit\"/>\n                                                        Edit\n                                                    </Menu.Item>\n                                                    <Menu.Item key=\"2\" onClick={() => that.deleteTreatmentPlans(treatment)}\n                                                               disabled={(treatment.practice && treatment.practice.id != this.props.active_practiceId)}>\n                                                        <Icon type=\"delete\"/>\n                                                        Delete\n                                                    </Menu.Item>\n                                                    <Menu.Divider/>\n                                                    <Menu.Item key=\"3\">\n                                                        <Link to={\"/patient/\" + treatment.patient + \"/emr/timeline\"}>\n                                                            <Icon type=\"clock-circle\"/>\n                                                            &nbsp;\n                                                            Patient Timeline\n                                                        </Link>\n                                                    </Menu.Item>\n\n                                                    <Menu.Divider/>\n                                                    <Menu.Item key={'4'}>\n                                                        <a onClick={() => this.sendPatientMail(treatment)}><Icon\n                                                            type=\"mail\"/> Send mail to patient\n                                                        </a>\n                                                    </Menu.Item>\n\n                                                </Menu>}>\n                                                <a onClick={() => this.loadPDF(treatment.id)}><Icon type=\"printer\"/></a>\n                                            </Dropdown.Button>\n                                        </h4>\n\n                                    </div>\n                                    <Table loading={this.state.loading} columns={columns}\n                                           dataSource={treatment.treatment_plans}\n                                           footer={() => treatmentFooter(treatment)}\n                                           pagination={false}\n                                           key={treatment.id}/>\n                                </Card>\n                            )}\n                            <InfiniteFeedLoaderButton loaderFunction={() => this.loadTreatmentPlans(that.state.next)}\n                                                      loading={this.state.loading}\n                                                      hidden={!this.state.next}/>\n                            <Modal\n                                title={null}\n                                visible={this.state.visibleMail}\n                                onOk={this.sendMailToPatient}\n                                onCancel={this.mailModalClose}\n                                footer={[\n                                    <Button key=\"back\" onClick={this.mailModalClose}>\n                                        Cancel\n                                    </Button>,\n                                    <Button key=\"submit\" type=\"primary\"  onClick={this.sendMailToPatient}>\n                                        Send\n                                    </Button>,\n                                ]}\n                            >\n                                <p>Send complete procedure To {this.state.patientName} ?</p>\n                                <Input value={this.state.mail_to} placeholder={\"Email\"}\n                                       onChange={(e)=>that.updateFormValue('mail_to',e.target.value)}/>\n                            </Modal>\n                        </div>\n                    </Route>\n                </Switch>\n            </div>\n        }\n        else {\n            return <div>\n                <Card\n                    bodyStyle={{padding: 0}}\n                    title={this.state.currentPatient ? this.state.currentPatient.user.first_name + \" Completed Procedures\" : \"Completed Procedures \"}\n                    extra={<Button.Group>\n                        <Button onClick={() => this.props.togglePatientListModal(true)}>\n                            <Icon\n                                type=\"plus\"/>Add\n                        </Button>\n                    </Button.Group>}/>\n                {this.state.treatmentPlans.map((treatment) => <Card bodyStyle={{padding: 0}}\n                                                                    key={treatment.id}\n                                                                    style={{marginTop: 15}}>\n                        <div style={{padding: 16}}>\n                            <h4>{treatment.date ? moment(treatment.date).format('ll') : null}\n                            <Link to={\"/patient/\" + treatment.patient.id + \"/emr/workdone\"}>\n                             &nbsp;&nbsp; {treatment.patient.user?treatment.patient.user.first_name:null} (ID: {treatment.patient.custom_id?treatment.patient.custom_id:treatment.patient.id})&nbsp;\n                            </Link>\n                            <span>, {treatment.patient.gender}</span>\n                                <Dropdown.Button\n                                    size={\"small\"}\n                                    style={{float: 'right'}}\n                                    overlay={<Menu>\n                                        <Menu.Item key=\"1\" disabled={(treatment.practice && treatment.practice.id != this.props.active_practiceId)}>\n                                            <Link to={\"/patient/\" + treatment.patient.id + \"/emr/workdone/edit\"}>\n                                                <Icon type=\"edit\"/>\n                                                &nbsp;\n                                                Edit\n                                            </Link>\n                                        </Menu.Item>\n                                        <Menu.Item key=\"2\" onClick={() => that.deleteTreatmentPlans(treatment)}\n                                                   disabled={(treatment.practice && treatment.practice.id != this.props.active_practiceId)}>\n                                            <Icon type=\"delete\"/>\n                                            Delete\n                                        </Menu.Item>\n                                        <Menu.Divider/>\n                                        <Menu.Item key=\"3\">\n                                            <Link to={\"/patient/\" + treatment.patient.id + \"/emr/timeline\"}>\n                                                <Icon type=\"clock-circle\"/>\n                                                &nbsp;\n                                                Patient Timeline\n                                            </Link>\n                                        </Menu.Item>\n\n                                        <Menu.Divider/>\n                                        <Menu.Item key={'4'}>\n                                            <a onClick={() => this.sendPatientMail(treatment)}><Icon\n                                                type=\"mail\"/> Send mail to patient\n                                            </a>\n                                        </Menu.Item>\n                                    </Menu>}>\n                                    <a onClick={() => this.loadPDF(treatment.id)}><Icon type=\"printer\"/></a>\n                                </Dropdown.Button>\n                            </h4>\n\n                        </div>\n                        <Table loading={this.state.loading} columns={columns}\n                               dataSource={treatment.treatment_plans}\n                               footer={() => treatmentFooter(treatment)}\n                               pagination={false}\n                               key={treatment.id}/>\n\n                    </Card>\n                )}\n                <InfiniteFeedLoaderButton loaderFunction={() => this.loadTreatmentPlans(that.state.next)}\n                                          loading={this.state.loading}\n                                          hidden={!this.state.next}/>\n\n                <Modal\n                    title={null}\n                    visible={this.state.visibleMail}\n                    onOk={this.sendMailToPatient}\n                    onCancel={this.mailModalClose}\n                    footer={[\n                        <Button key=\"back\" onClick={this.mailModalClose}>\n                            Cancel\n                        </Button>,\n                        <Button key=\"submit\" type=\"primary\"  onClick={this.sendMailToPatient}>\n                            Send\n                        </Button>,\n                    ]}\n                >\n                    <p>Send Treatment Notes To {this.state.patientName} ?</p>\n                    <Input value={this.state.mail_to} placeholder={\"Email\"}\n                           onChange={(e)=>that.updateFormValue('mail_to',e.target.value)}/>\n                </Modal>\n            </div>\n        }\n\n    }\n}\n\nexport default PatientCompletedProcedures;\n\nfunction treatmentFooter(presc) {\n    if (presc) {\n\n        return <div>\n            {presc.doctor ? <Tag color={presc.doctor ? presc.doctor.calendar_colour : null}>\n                <b>{\"Completed by  \" + presc.doctor.user.first_name} </b>\n            </Tag> : null}\n            {presc.practice ? <Tag style={{float: 'right'}}>\n                <Tooltip title=\"Practice Name\">\n                    <b>{presc.practice.name} </b>\n                </Tooltip>\n            </Tag> : null}\n        </div>\n    }\n    return null\n}\n","import React from \"react\";\nimport {\n    Card,\n    Row,\n    Col,\n    Form,\n    Table,\n    Divider,\n    Tabs,\n    List,\n    Button,\n    Input,\n    Select,\n    Radio,\n    InputNumber,\n    Icon,\n    Affix,\n    Popconfirm,\n    Tag\n} from 'antd';\nimport {DRUG_CATALOG, INVENTORY_ITEM_API, LABTEST_API} from \"../../../constants/api\";\nimport {displayMessage, getAPI, interpolate, postAPI, putAPI} from \"../../../utils/common\";\nimport {remove} from \"lodash\";\nimport {DURATIONS_UNIT, DOSE_REQUIRED, DRUG} from \"../../../constants/hardData\";\nimport {WARNING_MSG_TYPE} from \"../../../constants/dataKeys\";\nimport {PRESCRIPTIONS_API, PRESCRIPTION_TEMPLATE} from \"../../../constants/api\";\nimport {Link, Route, Switch} from \"react-router-dom\";\n\nconst TabPane = Tabs.TabPane;\nlet id = 0;\n\n\nclass PrescriptionTemplate extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            items: {},\n            filteredItems: {},\n            drugList: [],\n            labList: [],\n            formDrugList: [],\n            formLabList: [],\n            addInstructions: {},\n            changeDurationUnits: {},\n            addedDrugs: {},\n            addedLabs: {},\n            addTemplate: {},\n            formTemplateList: [],\n            searchStrings: {}\n\n        }\n        this.loadPrescriptionTemplate = this.loadPrescriptionTemplate.bind(this);\n        this.deletePrescriptionTemplate = this.deletePrescriptionTemplate.bind(this);\n    }\n\n    componentDidMount() {\n        this.loadDrugList();\n        this.loadLabList();\n        this.loadPrescriptionTemplate();\n    }\n\n    loadPrescriptionTemplate() {\n        var that = this;\n        let successFn = function (data) {\n            that.setState({\n                prescriptionTemplate: data.results,\n            })\n        };\n        let errorFn = function () {\n\n        };\n        console.log(\"template\", that.state.prescriptionTemplate);\n        getAPI(interpolate(PRESCRIPTION_TEMPLATE, [that.props.active_practiceId]), successFn, errorFn)\n    }\n\n    loadLabList() {\n        var that = this;\n        let successFn = function (data) {\n            that.setState({\n                labList: data.results,\n            })\n        };\n        let errorFn = function () {\n\n        };\n        getAPI(interpolate(LABTEST_API, [that.props.active_practiceId]), successFn, errorFn);\n    }\n\n    loadDrugList(page = 1) {\n        let that = this;\n        let successFn = function (data) {\n            that.setState(function (prevState) {\n                let items = {...prevState.items}\n                return {\n                    items: {...items, \"Drugs\": data.results},\n                    filteredItems: {...prevState.filteredItems, \"Drugs\": data.results}\n                }\n            })\n        }\n        let errorFn = function () {\n\n        }\n        let params = {\n            practice: this.props.active_practiceId,\n            item_type: DRUG,\n            page: page\n        };\n        if (that.state.searchStrings.Drugs) {\n            params.item_name = that.state.searchStrings.Drugs\n        }\n        getAPI(INVENTORY_ITEM_API, successFn, errorFn, params);\n    }\n\n    addDrug(item) {\n        this.setState(function (prevState) {\n            let randId = Math.random().toFixed(7);\n            if (prevState.addedDrugs[item.id]) {\n                displayMessage(WARNING_MSG_TYPE, \"Item Already Added\");\n                return false;\n            }\n            return {\n                addedDrugs: {...prevState.addedDrugs, [item.id]: true},\n                formDrugList: [...prevState.formDrugList, {\n                    ...item,\n                    _id: randId,\n                }]\n            }\n        });\n\n    }\n\n    addInstructions = (_id, option) => {\n        this.setState(function (prevState) {\n            return {addInstructions: {...prevState.addInstructions, [_id]: !!option}}\n        })\n    }\n    changeDurationUnits = (_id, option) => {\n        this.setState(function (prevState) {\n            return {changeDurationUnits: {...prevState.changeDurationUnits, [_id]: !!option}}\n        })\n    }\n    removeDrug = (_id) => {\n        this.setState(function (prevState) {\n            return {\n                formDrugList: [...remove(prevState.formDrugList, function (item) {\n                    return item._id != _id;\n                })]\n            }\n        });\n    }\n    removeLabs = (_id, item) => {\n        this.setState(function (prevState) {\n            return {\n                addedLabs: {...prevState.addedLabs, [item.id]: false},\n                formLabList: [...remove(prevState.formLabList, function (item) {\n                    return item._id != _id;\n                })]\n            }\n        });\n    }\n    addLabs = (item) => {\n        this.setState(function (prevState) {\n            let randId = Math.random().toFixed(7);\n            console.log(\"LAb state\", prevState);\n            if (prevState.addedLabs[item.id]) {\n                displayMessage(WARNING_MSG_TYPE, \"Item Already Added\");\n                return false;\n            }\n            return {\n                addedLabs: {...prevState.addedLabs, [item.id]: true},\n                formLabList: [...prevState.formLabList, {\n                    ...item,\n                    _id: randId,\n                }]\n            }\n            // console.log(\"ide\",this.state.tableFormValues);\n        });\n    };\n\n    addTemplate = (item) => {\n        this.setState(function (prevState) {\n            // console.log(\"templateData state\",prevState);\n            let randId = Math.random().toFixed(7);\n            if (prevState.addTemplate[item.id]) {\n                displayMessage(WARNING_MSG_TYPE, \"Item Already Added\");\n                return false;\n            }\n            let prevLabs = [...prevState.formLabList];\n            let prevAddedLabs = {...prevState.addedLabs};\n            if (item.labs)\n                item.labs.forEach(function (lab) {\n                    let randId = Math.random().toFixed(7);\n                    prevLabs.push({\n                        ...lab,\n                        _id: randId,\n                    });\n                    prevAddedLabs = {...prevAddedLabs, [lab.id]: true}\n                });\n\n            let prevDrugs = [...prevState.formDrugList];\n            let prevAddedDrugs = {...prevState.addedDrugs};\n            if (item.drugs)\n                item.drugs.forEach(function (drugs) {\n                    let randId = Math.random().toFixed(7);\n                    prevDrugs.push({\n                        ...drugs,\n                        _id: randId,\n                        advice_data: item.advice_data,\n                    });\n                    prevAddedDrugs = {...prevAddedDrugs, [drugs.id]: true}\n\n                })\n\n\n            return {\n                addedLabs: prevAddedLabs,\n                formLabList: prevLabs,\n                addedDrugs: prevAddedDrugs,\n                formDrugList: prevDrugs\n            }\n\n        });\n    };\n    removeTemplates = (_id, item) => {\n        this.setState(function (prevState) {\n            return {\n                addTemplate: {...prevState.addTemplate, [item.id]: false},\n                formTemplateList: [...remove(prevState.formTemplateList, function (item) {\n                    return item._id != _id;\n                })]\n            }\n        });\n    }\n    handleSubmit = (e) => {\n        let that = this;\n        e.preventDefault();\n        this.props.form.validateFields((err, values) => {\n            console.log(\"value form\", values);\n\n            if (!err) {\n\n                let reqData = {\n                    ...values,\n                    drug: [],\n                    labs: [],\n                    advice_data: [],\n                    patient: that.props.match.params.id,\n                    practice: that.props.active_practiceId,\n\n                };\n\n                that.state.formDrugList.forEach(function (item) {\n                    console.log(\"advice search\", item);\n                    item.dosage = values.does[item._id];\n                    item.duration_type = values.duration_unit[item._id];\n                    item.duration = values.duration[item._id];\n                    item.frequency = values.does_frequency[item._id];\n                    if (values.instruction) {\n                        item.instruction = values.instruction[item._id];\n                    }\n                    if (values.food_time[item._id]) {\n                        item.after_food = true;\n                        item.before_food = false;\n                    } else {\n                        item.before_food = true;\n                        item.after_food = false;\n                    }\n\n                    if (item.advice_data) {\n                        item.advice_data.map(function (advice) {\n                            reqData.advice_data.push(advice.id)\n                        })\n                    }\n                    const drugIitem = {\n                        \"inventory\": item.id,\n                        \"name\": item.name,\n                        \"dosage\": item.dosage,\n                        \"frequency\": item.frequency,\n                        \"duration\": item.duration,\n                        \"duration_type\": item.duration_type,\n                        \"instruction\": item.instruction,\n                        \"before_food\": item.before_food,\n                        \"after_food\": item.after_food,\n                        \"advice_data\": that.state.prescriptionTemplate.advice_data,\n                        \"is_active\": true,\n                    };\n                    reqData.drug.push(drugIitem);\n                });\n                that.state.formLabList.forEach(function (item) {\n                    reqData.labs.push(item.id);\n                });\n                let successFn = function (data) {\n                    // let url = '/patient/' + that.props.match.params.id + '/emr/prescriptions';\n                    that.props.history.goBack();\n                }\n                let errorFn = function () {\n\n                }\n                console.log(\"final\", reqData);\n                postAPI(interpolate(PRESCRIPTION_TEMPLATE, [that.props.active_practiceId]), reqData, successFn, errorFn);\n            }\n        });\n    }\n\n    deletePrescriptionTemplate(id) {\n        var that = this;\n        let reqData = {id: id, is_active: false};\n        let successFn = function (data) {\n            that.loadPrescriptionTemplate();\n        };\n        let errorFn = function () {\n        };\n        postAPI(interpolate(PRESCRIPTION_TEMPLATE, [that.props.active_practiceId]), reqData, successFn, errorFn);\n\n    }\n\n    handleAddFields = () => {\n        const {form} = this.props;\n        const keys = form.getFieldValue(\"keys\");\n        const nextKeys = keys.concat(id++);\n        form.setFieldsValue({\n            keys: nextKeys\n        });\n    };\n    remove = (k) => {\n        const {form} = this.props;\n        const keys = form.getFieldValue('keys');\n        if (keys.length === 1) {\n            return;\n        }\n        form.setFieldsValue({\n            keys: keys.filter(key => key !== k),\n        });\n    }\n    onChange = e => {\n        this.setState({});\n    };\n    searchValues = (type, value) => {\n        let that = this;\n        this.setState(function (prevState) {\n            let searchValues = {...prevState.searchStrings};\n            searchValues[type] = value;\n            return {searchStrings: searchValues}\n        }, function () {\n            if (type == 'Drugs')\n                that.loadDrugList();\n            else\n                that.filterValues(type);\n        });\n    }\n    filterValues = (type) => {\n        this.setState(function (prevState) {\n            let filteredItemOfGivenType = [];\n            if (prevState.items[type]) {\n                if (prevState.searchStrings[type]) {\n                    prevState.items[type].forEach(function (item) {\n                        if (item.name && item.name\n                            .toString()\n                            .toLowerCase()\n                            .includes(prevState.searchStrings[type].toLowerCase())) {\n                            filteredItemOfGivenType.push(item);\n                        }\n                    });\n                } else {\n                    filteredItemOfGivenType = prevState.items[type];\n                }\n            }\n            return {\n                filteredItems: {...prevState.filteredItems, [type]: filteredItemOfGivenType}\n            }\n        });\n    }\n\n    render() {\n        let that = this;\n        const formItemLayout = {\n            labelCol: {\n                xs: {span: 24},\n                sm: {span: 4}\n            },\n            wrapperCol: {\n                xs: {span: 24},\n                sm: {span: 12}\n            }\n        };\n        const formItemLayoutWithOutLabel = {\n            wrapperCol: {\n                xs: {span: 24, offset: 0},\n                sm: {span: 12, offset: 4}\n            }\n        };\n        const {getFieldDecorator, getFieldValue, getFieldsValue} = this.props.form;\n\n        getFieldDecorator('keys', {initialValue: []});\n        const keys = getFieldValue('keys');\n        const formItems = keys.map((k, index) => (\n            <Form.Item  {...(index === 0 ? formItemLayout : formItemLayoutWithOutLabel)}\n                        label={index === 0 ? 'Advice' : ''}\n                        required={false}\n                        key={k}\n            >\n                {getFieldDecorator(`advice_data[${k}]`, {\n                    validateTrigger: ['onChange', 'onBlur'],\n\n                })(\n                    <Input style={{width: '60%', marginRight: 8}}/>\n                )}\n                {keys.length > 1 ? (\n                    <Icon\n                        className=\"dynamic-delete-button\"\n                        type=\"minus-circle-o\"\n                        onClick={() => this.remove(k)}\n                    />\n                ) : null}\n            </Form.Item>\n        ));\n\n        const drugTableColumns = [{\n            title: 'Drug Name',\n            dataIndex: 'name',\n            key: 'name',\n            render: name => <h2>{name}</h2>\n        }, {\n            title: 'Dosage & Frequency',\n            dataIndex: 'dosage',\n            key: 'dosage',\n            render: (dosage, record) => <div><Form.Item\n                extra={<span>does(s)</span>}\n                key={`does[${record._id}]`}>\n                {getFieldDecorator(`does[${record._id}]`, {\n                        validateTrigger: ['onChange', 'onBlur'],\n\n                    },\n                    {\n                        rules: [{message: \"This field is required.\",}],\n                    })(\n                    <InputNumber min={0} size={\"small\"}/>\n                )}\n\n            </Form.Item>\n                <Form.Item\n                    key={`does_frequency[${record._id}]`}>\n                    {getFieldDecorator(`does_frequency[${record._id}]`, {\n                        validateTrigger: ['onChange', 'onBlur'],\n                        rules: [{\n                            message: \"This field is required.\",\n                        }],\n                        initialValue: 'twice daily'\n                    })(\n                        <Select size={\"small\"} onChange={() => this.changeDurationUnits(record._id, false)}>\n                            {DOSE_REQUIRED.map(item => <Select.Option\n                                value={item.value}>{item.label}</Select.Option>)}\n                        </Select>\n                    )}\n                </Form.Item>\n            </div>\n        }, {\n            title: 'Duration',\n            dataIndex: 'duration',\n            key: 'duration',\n            render: (duration, record) => <div>\n                <Form.Item\n                    key={`duration[${record._id}]`}>\n                    {getFieldDecorator(`duration[${record._id}]`, {\n                            validateTrigger: ['onChange', 'onBlur']\n                        },\n                        {\n                            rules: [{message: \"This field is required.\",}],\n                        })(\n                        <InputNumber min={0} size={\"small\"}/>\n                    )}\n                </Form.Item>\n                <Form.Item\n                    key={`duration_unit[${record._id}]`}>\n                    {getFieldDecorator(`duration_unit[${record._id}]`, {\n                        validateTrigger: ['onChange', 'onBlur'],\n                        rules: [{\n                            message: \"This field is required.\",\n                        }],\n                        initialValue: 'day(s)'\n                    })(\n                        <Select size={\"small\"} onChange={() => this.changeDurationUnits(record._id, false)}>\n                            {DURATIONS_UNIT.map(item => <Select.Option\n                                value={item.value}>{item.label}</Select.Option>)}\n                        </Select>\n                    )}\n                </Form.Item>\n            </div>\n        },\n            // {this.state.prescriptionTemplate.advice_data ? true:false},\n            {\n                title: 'Instructions',\n                dataIndex: 'instruction',\n                key: 'instruction',\n                render: (instruction, record) =>\n                    <div>\n                        {this.state.addInstructions[record._id] ?\n                            <Form.Item\n                                extra={<a onClick={() => this.addInstructions(record._id, false)}>Remove\n                                    Instructions</a>}\n                                key={`instruction[${record._id}]`}>\n                                {getFieldDecorator(`instruction[${record._id}]`, {\n                                    validateTrigger: ['onChange', 'onBlur'],\n                                    rules: [{\n                                        message: \"This field is required.\",\n                                    }],\n                                })(\n                                    <Input.TextArea min={0} placeholder={\"Instructions...\"} size={\"small\"}/>\n                                )}\n\n                            </Form.Item>\n                            : <a onClick={() => this.addInstructions(record._id, true)}>+ Add Instructions</a>}\n                    </div>\n            }, {\n                title: \"Timing\",\n                dataIndex: \"food_time\",\n                key: 'food_time',\n                render: (timing, record) => <div>\n                    <Form.Item key={`food_time[${record._id}]`}>\n                        {getFieldDecorator(`food_time[${record._id}]`)(\n                            <Radio.Group onChange={this.onChange}>\n                                <Radio value={1}>After Food</Radio>\n                                <Radio value={0}>Before Food</Radio>\n                            </Radio.Group>\n                        )}\n                    </Form.Item>\n\n                </div>\n\n            },\n\n            {\n                title: '',\n                dataIndex: 'action',\n                key: 'action',\n                render: (instructions, record) => <Form.Item>\n                    <Button icon={\"close\"} onClick={() => this.removeDrug(record._id)} type={\"danger\"} shape=\"circle\"\n                            size=\"small\"/>\n                </Form.Item>\n            }];\n        const labTablecolums = [{\n            title: 'Name',\n            dataIndex: 'name',\n            key: 'name',\n            render: (name, record) => <span>\n                <b>{name}</b>\n                </span>\n        }, {\n            title: 'Cost',\n            dataIndex: 'cost',\n            key: 'cost',\n            render: (name, record) => <span>{record.cost}</span>\n        }, {\n            title: 'Total',\n            dataIndex: 'total',\n            key: 'total',\n            render: (total, record) => <span>\n                {total}\n                <Button icon={\"close\"} onClick={() => this.removeLabs(record._id, record)} type={\"danger\"}\n                        shape=\"circle\"\n                        size=\"small\"/>\n            </span>\n        }];\n\n        return <Card title={\"Prescriptions Template\"}>\n            <Row>\n                <Col span={18}>\n                    <Form onSubmit={this.handleSubmit}>\n                        <Form.Item {...formItemLayout} label={\"Template Name\"}>\n                            {getFieldDecorator('name', {})(\n                                <Input/>\n                            )}\n                        </Form.Item>\n\n                        <Form.Item {...formItemLayout} label={\"Schedule\"}>\n                            {getFieldDecorator('schedule', {})(\n                                <InputNumber min={1}/>\n                            )}\n\n                        </Form.Item>\n                        <Table pagination={false} bordered={false} columns={drugTableColumns}\n                               dataSource={this.state.formDrugList}/>\n\n                        <Divider> Lab Test</Divider>\n                        <Table pagination={false} bordered={false} columns={labTablecolums}\n                               dataSource={this.state.formLabList}/>\n\n\n                        <Divider/>\n                        {formItems}\n                        <Form.Item {...formItemLayoutWithOutLabel}>\n                            <Button type=\"dashed\" onClick={this.handleAddFields} style={{width: '60%'}}>\n                                <Icon type=\"plus\"/> Add advice field\n                            </Button>\n                        </Form.Item>\n                        <Affix target={() => this.container}>\n                            <Button type=\"primary\" htmlType=\"submit\">\n                                Save\n                            </Button>\n                        </Affix>\n                    </Form>\n                </Col>\n                <Col span={6}>\n                    <Tabs type=\"card\">\n                        <TabPane tab=\"Drugs\" key=\"1\">\n                            <div style={{backgroundColor: '#ddd', padding: 8}}>\n                                <Input.Search key={\"Drugs\"}\n                                              placeholder={\"Search in Medicine...\"}\n                                              onChange={e => this.searchValues(\"Drugs\", e.target.value)}\n                                />\n                            </div>\n                            <List size={\"small\"}\n                                  itemLayout=\"horizontal\"\n                                  dataSource={this.state.filteredItems[\"Drugs\"]}\n                                  renderItem={item => (\n                                      <List.Item onClick={() => this.addDrug(item)}\n                                                 actions={(item.maintain_inventory ? null : [<Tag>Not Sold</Tag>])}>\n                                          <List.Item.Meta\n                                              title={item.name}\n                                          />\n                                      </List.Item>)}/>\n                        </TabPane>\n                        <TabPane tab=\"Labs\" key=\"2\">\n                            <List size={\"small\"}\n                                  itemLayout=\"horizontal\"\n                                  dataSource={this.state.labList}\n                                  renderItem={item => (\n                                      <List.Item onClick={() => this.addLabs(item)}>\n                                          <List.Item.Meta\n                                              title={item.name}/>\n                                      </List.Item>)}/>\n                        </TabPane>\n                        <TabPane tab=\"Template\" key=\"3\">\n\n                            <List size={\"small\"}\n                                  itemLayout=\"horizontal\"\n                                  dataSource={this.state.prescriptionTemplate}\n\n                                  renderItem={item => (\n                                      <List.Item onConfirm={() => that.deletePrescriptionTemplate(item.id)}>\n                                          <List.Item.Meta onClick={() => this.addTemplate(item)} title={item.name}/>\n                                          <Popconfirm title=\"Are you sure delete this item?\"\n                                                      onConfirm={() => that.deletePrescriptionTemplate(item.id)}\n                                                      okText=\"Yes\" cancelText=\"No\">\n                                              <a>Delete</a>\n                                          </Popconfirm>\n                                      </List.Item>)}/>\n                        </TabPane>\n                    </Tabs>\n                </Col>\n                <Switch>\n                    <Route exact path='/patient/:id/prescriptions/template/add'\n                           renderRoute={(route) => <PrescriptionTemplate {...this.state} {...route}/>}/>\n                </Switch>\n            </Row>\n        </Card>\n    }\n}\n\nexport default Form.create()(PrescriptionTemplate);\n","import React from \"react\";\nimport {\n    Card,\n    Row,\n    Col,\n    Form,\n    Table,\n    Divider,\n    Tabs,\n    List,\n    Button,\n    Input,\n    Select,\n    Radio,\n    InputNumber,\n    Icon,\n    Affix,\n    Popconfirm,\n    DatePicker,\n    Dropdown,\n    Menu, Tag\n} from 'antd';\nimport {DRUG_CATALOG, INVENTORY_ITEM_API, LABTEST_API, PRACTICESTAFF} from \"../../../constants/api\";\nimport {displayMessage, getAPI, interpolate, postAPI, putAPI} from \"../../../utils/common\";\nimport {remove} from \"lodash\";\nimport {DURATIONS_UNIT, DOSE_REQUIRED, DRUG} from \"../../../constants/hardData\";\nimport {DOCTORS_ROLE, WARNING_MSG_TYPE} from \"../../../constants/dataKeys\";\nimport {PRESCRIPTIONS_API, PRESCRIPTION_TEMPLATE} from \"../../../constants/api\";\nimport PrescriptionTemplate from \"./PrescriptionTemplate\";\nimport {Link, Route, Switch} from \"react-router-dom\";\nimport {loadDoctors} from \"../../../utils/clinicUtils\";\nimport moment from \"moment\";\n\nconst TabPane = Tabs.TabPane;\n\nclass AddorEditDynamicPatientPrescriptions extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            items: {},\n            filteredItems: {},\n            formDrugList: [],\n            formLabList: [],\n            addInstructions: {},\n            changeDurationUnits: {},\n            addedDrugs: {},\n            addedLabs: {},\n            addTemplate: {},\n            formTemplateList: [],\n            practiceDoctors: [],\n            selectedDoctor: {},\n            selectedDate: moment(),\n            searchStrings: {}\n        }\n        this.loadPrescriptionTemplate = this.loadPrescriptionTemplate.bind(this);\n        this.deletePrescriptionTemplate = this.deletePrescriptionTemplate.bind(this);\n    }\n\n    componentDidMount() {\n        let that = this;\n        this.loadDrugList();\n        this.loadLabList();\n        this.loadPrescriptionTemplate();\n        loadDoctors(this);\n        if (this.props.editId) {\n            this.setState(function (prevState) {\n                let drugList = [];\n                let addInstructions = {};\n                let addedLabs = {};\n                // let dosage = {};\n                // let frequency = {};\n                // let duration = {};\n                // let duration_type = {};\n                that.props.editPrescription.drugs.forEach(function (drug) {\n                    let _id = Math.random();\n                    drugList.push({...drug, _id: _id, food_time: (drug.after_food ? 1 : 0)});\n                    addInstructions[_id] = !!drug.instruction;\n                    // dosage[_id] = drug.dosage;\n                    // frequency[_id] = drug.frequency;\n                    // duration[_id] = drug.duration;\n                    // duration_type[_id] = drug.duration_type;\n                });\n                let labList = []\n                that.props.editPrescription.labs.forEach(lab => {\n                    labList.push({\n                        ...lab,\n                        _id: Math.random()\n                    });\n                    addedLabs[lab.id] = true\n                })\n\n                return {\n                    ...that.props.editPrescription,\n                    formDrugList: [...drugList],\n                    formLabList: [...labList],\n                    addInstructions: {...addInstructions},\n                    addedLabs: {...addedLabs},\n                    // dosage: {...dosage},\n                    // frequency: {...frequency},\n                    // duration: {...duration},\n                    // duration_type: {...duration_type},\n                    selectedDoctor: that.props.editPrescription.doctor,\n                    selectedDate: moment(that.props.editPrescription.date).isValid() ? moment(that.props.editPrescription.date) : moment()\n                }\n            })\n        }\n    }\n\n    selectDoctor = (doctor) => {\n        this.setState({\n            selectedDoctor: doctor\n        })\n    }\n\n    selectedDate = (date) => {\n        this.setState({\n            selectedDate: date\n        })\n    }\n\n    loadPrescriptionTemplate() {\n        var that = this;\n        let successFn = function (data) {\n            that.setState(function (prevState) {\n                let items = {...prevState.items}\n                return {\n                    items: {...items, \"Template\": data.results},\n                    filteredItems: {...prevState.filteredItems, \"Template\": data.results}\n                }\n            })\n\n        };\n        let errorFn = function () {\n\n        };\n        getAPI(interpolate(PRESCRIPTION_TEMPLATE, [that.props.active_practiceId]), successFn, errorFn)\n    }\n\n    loadLabList() {\n        var that = this;\n        let successFn = function (data) {\n            that.setState(function (prevState) {\n                let items = {...prevState.items}\n                return {\n                    items: {...items, \"Labs\": data.results},\n                    filteredItems: {...prevState.filteredItems, \"Labs\": data.results}\n                }\n            })\n        };\n        let errorFn = function () {\n\n        };\n        getAPI(interpolate(LABTEST_API, [that.props.active_practiceId]), successFn, errorFn);\n    }\n\n    loadDrugList(page = 1) {\n        let that = this;\n        let searchString = that.state.searchStrings.Drugs;\n        let successFn = function (data) {\n            if (searchString == that.state.searchStrings.Drugs)\n                that.setState(function (prevState) {\n                    let items = {...prevState.items}\n                    return {\n                        items: {...items, \"Drugs\": data.results},\n                        filteredItems: {...prevState.filteredItems, \"Drugs\": data.results}\n                    }\n                })\n        }\n        let errorFn = function () {\n\n        }\n        let params = {\n            practice: this.props.active_practiceId,\n            item_type: DRUG,\n            page: page\n        };\n        if (searchString) {\n            params.item_name = searchString\n        }\n        getAPI(INVENTORY_ITEM_API, successFn, errorFn, params);\n    }\n\n\n    addDrug(item) {\n        this.setState(function (prevState) {\n            let randId = Math.random().toFixed(7);\n            return {\n                addedDrugs: {...prevState.addedDrugs, [item.id]: true},\n                formDrugList: [{\n                    ...item,\n                    _id: randId,\n                }, ...prevState.formDrugList]\n            }\n        });\n\n    }\n\n    addInstructions = (_id, option) => {\n        this.setState(function (prevState) {\n            return {addInstructions: {...prevState.addInstructions, [_id]: !!option}}\n        })\n    }\n    changeDurationUnits = (_id, option) => {\n        this.setState(function (prevState) {\n            return {changeDurationUnits: {...prevState.changeDurationUnits, [_id]: !!option}}\n        })\n    }\n    removeDrug = (_id) => {\n        this.setState(function (prevState) {\n            return {\n                formDrugList: [...remove(prevState.formDrugList, function (item) {\n                    return item._id != _id;\n                })]\n            }\n        });\n    }\n    removeLabs = (_id, item) => {\n        this.setState(function (prevState) {\n            return {\n                addedLabs: {...prevState.addedLabs, [item.id]: false},\n                formLabList: [...remove(prevState.formLabList, function (item) {\n                    return item._id != _id;\n                })]\n            }\n        });\n    }\n    addLabs = (item) => {\n        this.setState(function (prevState) {\n            let randId = Math.random().toFixed(7);\n            if (prevState.addedLabs[item.id]) {\n                displayMessage(WARNING_MSG_TYPE, \"Item Already Added\");\n                return false;\n            }\n            return {\n                addedLabs: {...prevState.addedLabs, [item.id]: true},\n                formLabList: [...prevState.formLabList, {\n                    ...item,\n                    _id: randId,\n                }]\n            }\n        });\n    };\n\n    addTemplate = (item) => {\n        this.setState(function (prevState) {\n            if (prevState.addTemplate[item.id]) {\n                displayMessage(WARNING_MSG_TYPE, \"Item Already Added\");\n                return false;\n            }\n            let prevLabs = [...prevState.formLabList];\n            let prevAddedLabs = {...prevState.addedLabs};\n            item.labs.forEach(function (lab) {\n                let randId = Math.random().toFixed(7);\n                prevLabs.push({\n                    ...lab,\n                    _id: randId,\n                });\n                prevAddedLabs = {...prevAddedLabs, [lab.id]: true}\n            });\n\n            let prevDrugs = [...prevState.formDrugList];\n            let prevAddedDrugs = {...prevState.addedDrugs};\n            item.drugs.forEach(function (drugs) {\n                let randId = Math.random().toFixed(7);\n                prevDrugs.push({\n                    ...drugs,\n                    _id: randId,\n                    advice_data: item.advice_data,\n                });\n                prevAddedLabs = {...prevAddedDrugs, [drugs.id]: true}\n\n            })\n\n\n            return {\n                addedLabs: prevAddedLabs,\n                formLabList: prevLabs,\n                addedDrugs: prevAddedDrugs,\n                formDrugList: prevDrugs\n            }\n\n        });\n    };\n    removeTemplates = (_id, item) => {\n        this.setState(function (prevState) {\n            return {\n                addTemplate: {...prevState.addTemplate, [item.id]: false},\n                formTemplateList: [...remove(prevState.formTemplateList, function (item) {\n                    return item._id != _id;\n                })]\n            }\n        });\n    }\n    handleSubmit = (e) => {\n        let that = this;\n        e.preventDefault();\n        this.props.form.validateFields((err, values) => {\n            if (!err) {\n                let reqData = {\n                    drugs: [],\n                    labs: [],\n                    patient: parseInt(that.props.match.params.id),\n                    practice: that.props.active_practiceId,\n                    doctor: that.state.selectedDoctor ? that.state.selectedDoctor.id : null,\n                    date: that.state.selectedDate ? that.state.selectedDate.format('YYYY-MM-DD') : null,\n                    advice_data: []\n                };\n                if (that.props.editId) {\n                    reqData.id = that.props.editId;\n                }\n                that.state.formDrugList.forEach(function (item) {\n                    item.dosage = values.dosage[item._id];\n                    item.duration_type = values.duration_type[item._id];\n                    item.duration = values.duration[item._id];\n                    item.frequency = values.frequency[item._id];\n                    if (values.instruction) {\n                        item.instruction = values.instruction[item._id];\n                    }\n                    if (values.food_time[item._id]) {\n                        item.after_food = true;\n                        item.before_food = false;\n                    } else {\n                        item.before_food = true;\n                        item.after_food = false;\n                    }\n\n                    // if (item.advice_data) {\n                    //     item.advice_data.map(function (advice) {\n                    //         reqData.advice_data.push(advice.id)\n                    //     })\n                    // }\n                    const drugItem = {\n                        \"inventory\": item.id,\n                        \"name\": item.name,\n                        \"dosage\": item.dosage,\n                        \"frequency\": item.frequency,\n                        \"duration_type\": item.duration_type,\n                        \"duration\": item.duration,\n                        \"instruction\": item.instruction,\n                        \"before_food\": item.before_food,\n                        \"after_food\": item.after_food,\n                        \"is_active\": true,\n                    };\n                    reqData.drugs.push(drugItem);\n                    // console.log(\"item drug\", item);\n                });\n                that.state.formLabList.forEach(function (item) {\n                    reqData.labs.push(item.id);\n                });\n                let successFn = function (data) {\n                    if (that.props.loadData)\n                        that.props.loadData();\n                    let url = '/patient/' + that.props.match.params.id + '/emr/prescriptions';\n                    that.props.history.replace(url);\n                }\n                let errorFn = function () {\n\n                }\n                postAPI(interpolate(PRESCRIPTIONS_API, [that.props.match.params.id]), reqData, successFn, errorFn);\n            } else {\n                // console.log(err);\n            }\n        });\n    }\n\n    deletePrescriptionTemplate(id) {\n        var that = this;\n        let reqData = {id: id, is_active: false};\n        let successFn = function (data) {\n            that.loadPrescriptionTemplate();\n        };\n        let errorFn = function () {\n        };\n        postAPI(interpolate(PRESCRIPTION_TEMPLATE, [that.props.active_practiceId]), reqData, successFn, errorFn);\n\n    }\n\n    onChange = e => {\n        this.setState({});\n    };\n    searchValues = (type, value) => {\n        let that = this;\n        this.setState(function (prevState) {\n            let searchValues = {...prevState.searchStrings};\n            searchValues[type] = value;\n            return {searchStrings: searchValues}\n        }, function () {\n            if (type == 'Drugs')\n                that.loadDrugList();\n            else\n                that.filterValues(type);\n        });\n    }\n    filterValues = (type) => {\n        this.setState(function (prevState) {\n            let filteredItemOfGivenType = [];\n            if (prevState.items[type]) {\n                if (prevState.searchStrings[type]) {\n                    prevState.items[type].forEach(function (item) {\n                        if (item.name && item.name\n                            .toString()\n                            .toLowerCase()\n                            .includes(prevState.searchStrings[type].toLowerCase())) {\n                            filteredItemOfGivenType.push(item);\n                        }\n                    });\n                } else {\n                    filteredItemOfGivenType = prevState.items[type];\n                }\n            }\n            return {\n                filteredItems: {...prevState.filteredItems, [type]: filteredItemOfGivenType}\n            }\n        });\n    }\n\n    render() {\n        let that = this;\n        const {getFieldDecorator, getFieldValue, getFieldsValue} = this.props.form;\n        const drugTableColumns = [{\n            title: 'Medicine Name',\n            dataIndex: 'name',\n            key: 'name',\n            render: name => <h2>{name}</h2>\n        }, {\n            title: 'Dosage & Frequency',\n            dataIndex: 'dosage',\n            key: 'dosage',\n            render: (dosage, record) => <div>\n                <Form.Item\n                    extra={<span>does(s)</span>}\n                    key={`dosage[${record._id}]`}>\n                    {getFieldDecorator(`dosage[${record._id}]`, {\n                        validateTrigger: ['onChange', 'onBlur'],\n                        rules: [{message: \"This field is required.\",}],\n                        initialValue: record.dosage,\n                        min: 0\n                    })(\n                        <InputNumber size={\"small\"}/>\n                    )}\n                </Form.Item>\n                <Form.Item\n                    key={`frequency[${record._id}]`}>\n                    {getFieldDecorator(`frequency[${record._id}]`, {\n                        validateTrigger: ['onChange', 'onBlur'],\n                        rules: [{\n                            message: \"This field is required.\",\n                        }],\n                        initialValue: record.frequency || DOSE_REQUIRED[0].value\n                    })(\n                        <Select size={\"small\"} onChange={() => this.changeDurationUnits(record._id, false)}>\n                            {DOSE_REQUIRED.map(item => <Select.Option\n                                value={item.value}>{item.label}</Select.Option>)}\n                        </Select>\n                    )}\n                </Form.Item>\n            </div>\n        }, {\n            title: 'Duration',\n            dataIndex: 'duration',\n            key: 'duration',\n            render: (duration, record) => <div>\n                <Form.Item\n                    key={`duration[${record._id}]`}>\n                    {getFieldDecorator(`duration[${record._id}]`, {\n                        validateTrigger: ['onChange', 'onBlur'],\n                        rules: [{message: \"This field is required.\",}],\n                        initialValue: record.duration,\n                        min: 0\n                    })(\n                        <InputNumber size={\"small\"}/>\n                    )}\n                </Form.Item>\n                <Form.Item\n                    key={`duration_type[${record._id}]`}>\n                    {getFieldDecorator(`duration_type[${record._id}]`, {\n                        validateTrigger: ['onChange', 'onBlur'],\n                        rules: [{\n                            message: \"This field is required.\",\n                        }],\n                        initialValue: record.duration_type || DURATIONS_UNIT[0].value\n                    })(\n                        <Select size={\"small\"} onChange={() => this.changeDurationUnits(record._id, false)}>\n                            {DURATIONS_UNIT.map(item => <Select.Option\n                                value={item.value}>{item.label}</Select.Option>)}\n                        </Select>\n                    )}\n                </Form.Item>\n            </div>\n        }, {\n            title: 'Instructions',\n            dataIndex: 'instruction',\n            key: 'instruction',\n            render: (instruction, record) =>\n                <div>\n                    {this.state.addInstructions[record._id] ?\n                        <Form.Item\n                            extra={<a onClick={() => this.addInstructions(record._id, false)}>Remove\n                                Instructions</a>}\n                            key={`instruction[${record._id}]`}>\n                            {getFieldDecorator(`instruction[${record._id}]`, {\n                                validateTrigger: ['onChange', 'onBlur'],\n                                rules: [{\n                                    message: \"This field is required.\",\n                                }],\n                                initialValue: record.instruction\n                            })(\n                                <Input.TextArea placeholder={\"Instructions...\"} size={\"small\"}/>\n                            )}\n\n                        </Form.Item>\n                        : <a onClick={() => this.addInstructions(record._id, true)}>+ Add Instructions</a>}\n                </div>\n        }, {\n            title: \"Timing\",\n            dataIndex: \"food_time\",\n            key: 'food_time',\n            render: (timing, record) => <div>\n                <Form.Item key={`food_time[${record._id}]`}>\n                    {getFieldDecorator(`food_time[${record._id}]`, {\n                        initialValue: record.food_time || 0\n                    })(\n                        <Radio.Group onChange={this.onChange}>\n                            <Radio value={1}>after</Radio>\n                            <Radio value={0}>before</Radio>\n                        </Radio.Group>\n                    )}\n                </Form.Item>\n\n            </div>\n\n        }, {\n            title: '',\n            dataIndex: 'action',\n            key: 'action',\n            render: (instructions, record) => <Form.Item>\n                <Button icon={\"close\"} onClick={() => this.removeDrug(record._id)} type={\"danger\"} shape=\"circle\"\n                        size=\"small\"/>\n            </Form.Item>\n        }];\n        const labTablecolums = [{\n            title: 'Name',\n            dataIndex: 'name',\n            key: 'name',\n            render: (name, record) => <span>\n                <b>{name}</b>\n                </span>\n        }, {\n            title: 'Cost',\n            dataIndex: 'cost',\n            key: 'cost',\n            render: (name, record) => <span>{record.cost}</span>\n        }, {\n            title: 'Total',\n            dataIndex: 'total',\n            key: 'total',\n            render: (total, record) => <span>\n                {total}\n                <Button icon={\"close\"} onClick={() => this.removeLabs(record._id, record)} type={\"danger\"}\n                        shape=\"circle\"\n                        size=\"small\"/>\n            </span>\n        }];\n\n        return <Card title={\"Prescriptions\"}>\n            <Row>\n                <Col span={18}>\n                    <Form onSubmit={this.handleSubmit}>\n                        <Table pagination={false} bordered={false} columns={drugTableColumns}\n                               dataSource={this.state.formDrugList}/>\n\n                        <Divider> Lab Test</Divider>\n                        <Table pagination={false} bordered={false} columns={labTablecolums}\n                               dataSource={this.state.formLabList}/>\n\n                        <Affix offsetBottom={0}>\n                            <Card>\n                                <span>by &nbsp;&nbsp;</span>\n                                <Dropdown placement=\"topCenter\" overlay={<Menu>\n                                    {this.state.practiceDoctors.map(doctor =>\n                                        <Menu.Item key=\"0\">\n                                            <a onClick={() => this.selectDoctor(doctor)}>{doctor.user.first_name}</a>\n                                        </Menu.Item>)}\n                                </Menu>} trigger={['click']}>\n                                    <a className=\"ant-dropdown-link\" href=\"#\">\n                                        <b>\n                                            {this.state.selectedDoctor.user ? this.state.selectedDoctor.user.first_name : 'No DOCTORS Found'}\n                                        </b>\n                                    </a>\n                                </Dropdown>\n                                <span> &nbsp;&nbsp;on&nbsp;&nbsp;</span>\n                                <DatePicker value={this.state.selectedDate}\n                                            onChange={(value) => this.selectedDate(value)} format={\"DD-MM-YYYY\"} allowClear={false}/>\n\n                                <Button type=\"primary\" htmlType=\"submit\" style={{margin: 5, float: 'right'}}>\n                                    Save\n                                </Button>\n                                {that.props.history ?\n                                    <Button style={{margin: 5, float: 'right'}}\n                                            onClick={() => that.props.history.goBack()}>\n                                        Cancel\n                                    </Button> : null}\n                            </Card>\n                        </Affix>\n                    </Form>\n                </Col>\n                <Col span={6}>\n                    <Tabs type=\"card\">\n                        <TabPane tab=\"Medicine\" key=\"1\">\n                            <div style={{backgroundColor: '#ddd', padding: 8}}>\n                                <Input.Search key={\"Drugs\"}\n                                              placeholder={\"Search in Medicine...\"}\n                                              onChange={e => this.searchValues(\"Drugs\", e.target.value)}\n                                />\n                            </div>\n                            <List size={\"small\"}\n                                  itemLayout=\"horizontal\"\n                                  dataSource={this.state.filteredItems[\"Drugs\"]}\n                                  renderItem={item => (\n                                      <List.Item onClick={() => this.addDrug(item)}\n                                                 actions={(item.maintain_inventory ? null : [<Tag>Not Sold</Tag>])}>\n                                          <List.Item.Meta\n                                              title={item.name}\n                                          />\n                                      </List.Item>)}/>\n                        </TabPane>\n                        <TabPane tab=\"Labs\" key=\"2\">\n                            <div style={{backgroundColor: '#ddd', padding: 8}}>\n                                <Input.Search key={\"Labs\"}\n                                              placeholder={\"Search in Labs...\"}\n                                              onChange={e => this.searchValues(\"Labs\", e.target.value)}\n                                />\n                            </div>\n                            <List size={\"small\"}\n                                  itemLayout=\"horizontal\"\n                                  dataSource={this.state.filteredItems[\"Labs\"]}\n                                  renderItem={item => (\n                                      <List.Item onClick={() => this.addLabs(item)}>\n                                          <List.Item.Meta\n                                              title={item.name}/>\n                                      </List.Item>)}/>\n                        </TabPane>\n                        <TabPane tab=\"Template\" key=\"3\">\n                            <div>\n                                <Link to={\"/patient/\" + this.props.match.params.id + \"/prescriptions/template/add\"}>\n                                    <Button type=\"primary\" block size={'small'}>\n                                        <Icon type=\"plus\"/>&nbsp;Add Template\n                                    </Button>\n                                </Link>\n                            </div>\n                            <Divider style={{margin: 0}}/>\n                            <div style={{backgroundColor: '#ddd', padding: 8}}>\n                                <Input.Search key={\"Template\"}\n                                              placeholder={\"Search in Template...\"}\n                                              onChange={e => this.searchValues(\"Template\", e.target.value)}\n                                />\n                            </div>\n                            <List size={\"small\"}\n                                  itemLayout=\"horizontal\"\n                                  dataSource={this.state.filteredItems[\"Template\"]}\n                                  renderItem={item => (\n                                      <List.Item onConfirm={() => that.deletePrescriptionTemplate(item.id)}>\n                                          <List.Item.Meta onClick={() => this.addTemplate(item)} title={item.name}/>\n                                          <Popconfirm title=\"Are you sure delete this item?\"\n                                                      onConfirm={() => that.deletePrescriptionTemplate(item.id)}\n                                                      okText=\"Yes\" cancelText=\"No\">\n                                              <a>Delete</a>\n                                          </Popconfirm>\n                                      </List.Item>)}/>\n                        </TabPane>\n                    </Tabs>\n                </Col>\n                <Switch>\n                    <Route exact path='/patient/:id/prescriptions/template/add'\n                           render={(route) => <PrescriptionTemplate {...this.state} {...route}/>}/>\n                </Switch>\n            </Row>\n        </Card>\n    }\n}\n\nexport default Form.create()(AddorEditDynamicPatientPrescriptions);\n","import React from \"react\";\nimport {\n    Table,\n    Button,\n    Card,\n    Icon,\n    Tag, Menu,\n    Dropdown, Modal, Tooltip, Spin, Row, Input\n} from \"antd\";\nimport {Link} from \"react-router-dom\";\nimport {\n    PRESCRIPTIONS_API,\n    DRUG_CATALOG,\n    PATIENT_PROFILE,\n    PATIENTS_LIST,\n    PRESCRIPTION_PDF, TREATMENTPLANS_PDF\n} from \"../../../constants/api\";\nimport {getAPI, interpolate, displayMessage, postAPI, putAPI} from \"../../../utils/common\";\nimport moment from \"moment\";\nimport {Redirect, Switch, Route} from \"react-router\";\nimport AddorEditDynamicPatientPrescriptions from \"./AddorEditDynamicPatientPrescriptions\";\nimport InfiniteFeedLoaderButton from \"../../common/InfiniteFeedLoaderButton\";\nimport {BACKEND_BASE_URL} from \"../../../config/connect\";\nimport * as _ from \"lodash\";\nimport {sendMail} from \"../../../utils/clinicUtils\";\n\nconst confirm = Modal.confirm;\n\nclass PatientPrescriptions extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            currentPatient: this.props.currentPatient,\n            active_practiceId: this.props.active_practiceId,\n            prescription: [],\n            drug_catalog: null,\n            editPrescription: null,\n            loading: true\n        }\n        this.loadPrescriptions = this.loadPrescriptions.bind(this);\n        this.loadDrugCatalog = this.loadDrugCatalog.bind(this);\n        this.editPrescriptionData = this.editPrescriptionData.bind(this);\n        this.deletePrescriptions = this.deletePrescriptions.bind(this);\n\n    }\n\n    componentDidMount() {\n        // if (this.props.match.params.id) {\n        this.loadPrescriptions();\n        this.loadDrugCatalog();\n        // }\n\n    }\n\n    loadPrescriptions(page = 1) {\n        let that = this;\n        this.setState({\n            loading: true\n        })\n        let successFn = function (data) {\n            that.setState({\n                prescription: data.results,\n                nextPrescriptionPage: data.next,\n                loading: false\n            })\n        }\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            })\n\n        }\n        let apiParams = {\n            page: page,\n            practice: this.props.active_practiceId\n        };\n        if (this.props.match.params.id) {\n            apiParams.patient = this.props.match.params.id;\n        }\n        if (this.props.showAllClinic && this.props.match.params.id) {\n            delete (apiParams.practice)\n        }\n        getAPI(PRESCRIPTIONS_API, successFn, errorFn, apiParams)\n    }\n\n    loadPDF(id) {\n        let that = this;\n        let successFn = function (data) {\n            if (data.report)\n                window.open(BACKEND_BASE_URL + data.report);\n        }\n        let errorFn = function () {\n\n        }\n        getAPI(interpolate(PRESCRIPTION_PDF, [id]), successFn, errorFn);\n    }\n\n\n    loadDrugCatalog() {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                drug_catalog: data,\n            })\n\n        }\n        let errorFn = function () {\n            that.setState({})\n\n        }\n        getAPI(interpolate(DRUG_CATALOG, [this.props.active_practiceId]), successFn, errorFn)\n    }\n\n    editPrescriptionData(record) {\n        let that = this;\n        this.setState({\n            editPrescription: record,\n        }, function () {\n            that.props.history.push(\"/patient/\" + record.patient + \"/emr/prescriptions/edit\")\n        });\n\n\n    }\n\n    deletePrescriptions(record) {\n        let that = this;\n        confirm({\n            title: 'Are you sure to delete this item?',\n            okText: 'Yes',\n            okType: 'danger',\n            cancelText: 'No',\n            onOk() {\n                let reqData = {\"id\": record.id, patient: record.patient, is_active: false};\n                let successFn = function (data) {\n                    that.loadPrescriptions();\n                }\n                let errorFn = function () {\n                }\n                postAPI(interpolate(PRESCRIPTIONS_API, [that.props.match.params.id]), reqData, successFn, errorFn);\n            },\n            onCancel() {\n                console.log('Cancel');\n            },\n        });\n    }\n\n\n    updateFormValue =(type,value)=>{\n        this.setState({\n            [type]: value\n        })\n    };\n    mailModalOpen =() =>{\n        this.setState({\n            visibleMail:true\n        })\n    };\n\n    mailModalClose =() =>{\n        this.setState({\n            visibleMail:false\n        })\n    };\n\n    sendPatientMail =(presc)=>{\n        this.mailModalOpen()\n        this.setState({\n            patientName:_.get(presc,'patient.user.first_name'),\n            prescriptionId:_.get(presc,'id'),\n            mail_to:_.get(presc,'patient.user.email')\n        })\n\n    };\n\n    sendMailToPatient =()=>{\n        let {mail_to ,prescriptionId } = this.state;\n        let apiParams ={\n            mail_to:mail_to,\n        }\n        sendMail(interpolate(TREATMENTPLANS_PDF,[prescriptionId]),apiParams)\n        this.mailModalClose();\n    }\n\n\n\n    render() {\n        const drugs = {}\n        if (this.state.drug_catalog) {\n\n            this.state.drug_catalog.forEach(function (drug) {\n                drugs[drug.id] = (drug.name + \",\" + drug.strength)\n            })\n        }\n        let that = this;\n        const columns = [{\n            title: 'Drug',\n            key: 'name',\n            dataIndex: 'name',\n        }, {\n            title: 'Frequency',\n            dataIndex: 'frequency',\n            key: 'frequency',\n            render: (frequency, record) => <span>{record.dosage}&nbsp;{record.frequency}</span>\n        }, {\n            title: 'Duration',\n            dataIndex: 'duration',\n            key: 'duration',\n            render: (duration, record) => <span>{duration}&nbsp;{record.duration_type}</span>\n        }, {\n            title: 'Instruction',\n            dataIndex: 'instruction',\n            key: 'instruction',\n            render: (instruction, record) => <span>\n                    {record.before_food ? <Tag>before food </Tag> : null}\n                {record.after_food ? <Tag>after food</Tag> : null}\n                {instruction}\n                </span>\n        }];\n\n        if (this.props.match.params.id) {\n            return <div><Switch>\n                <Route exact path='/patient/:id/emr/prescriptions/add'\n                       render={(route) => <AddorEditDynamicPatientPrescriptions {...this.state} {...this.props}\n                                                                                loadData={this.loadPrescriptions}\n                                                                                {...route}/>}/>\n                <Route exact path='/patient/:id/emr/prescriptions/edit'\n                       render={(route) => (that.state.editPrescription ?\n                           <AddorEditDynamicPatientPrescriptions {...this.state} {...route} {...this.props}\n                                                                 loadData={this.loadPrescriptions}\n                                                                 editId={that.state.editPrescription.id}/> :\n                           <Redirect to={\"/patient/\" + that.props.match.params.id + \"/emr/prescriptions\"}/>)}/>\n                <Route>\n                    <div>\n                        <Card\n                            bodyStyle={{padding: 0}}\n                            title={this.state.currentPatient ? this.state.currentPatient.user.first_name + \" Prescriptions\" : \"Prescriptions\"}\n                            extra={<Button.Group style={{float: 'right'}}>\n                                <Link to={\"/patient/\" + this.props.match.params.id + \"/emr/prescriptions/add\"}>\n                                    <Button type={\"primary\"}><Icon type=\"plus\"/>Add</Button>\n                                </Link>\n                            </Button.Group>}/>\n\n                        {this.state.prescription.map((presc) => <div>\n                            <Card style={{marginTop: 10}}\n                                  bodyStyle={{padding: 0}}\n                                  title={<small>{presc.date ? moment(presc.date).format('ll') : null}</small>}\n                                  extra={<Dropdown.Button\n                                      size={\"small\"}\n                                      style={{float: 'right'}}\n                                      overlay={<Menu>\n                                          <Menu.Item key=\"1\" onClick={() => that.editPrescriptionData(presc)}\n                                                     disabled={(presc.practice && presc.practice.id != that.props.active_practiceId)}>\n                                              <Icon type=\"edit\"/>\n                                              Edit\n                                          </Menu.Item>\n                                          <Menu.Item key=\"2\" onClick={() => that.deletePrescriptions(presc)}\n                                                     disabled={(presc.practice && presc.practice.id != that.props.active_practiceId)}>\n                                              <Icon type=\"delete\"/>\n                                              Delete\n                                          </Menu.Item>\n\n\n\n                                          <Menu.Divider/>\n                                          <Menu.Item key=\"3\">\n                                              <Link to={\"/patient/\" + presc.patient + \"/emr/timeline\"}>\n                                                  <Icon type=\"clock-circle\"/>\n                                                  &nbsp;\n                                                  Patient Timeline\n                                              </Link>\n                                          </Menu.Item>\n\n                                          <Menu.Divider/>\n                                          <Menu.Item key={'4'}>\n                                              <a onClick={() => this.sendPatientMail(presc)}><Icon\n                                                  type=\"mail\"/> Send mail to patient\n                                              </a>\n                                          </Menu.Item>\n\n                                      </Menu>}>\n                                      <a onClick={() => this.loadPDF(presc.id)}><Icon type=\"printer\"/></a>\n                                  </Dropdown.Button>}>\n\n                                <Modal\n                                    title={null}\n                                    visible={this.state.visibleMail}\n                                    onOk={this.sendMailToPatient}\n                                    onCancel={this.mailModalClose}\n                                    footer={[\n                                        <Button key=\"back\" onClick={this.mailModalClose}>\n                                            Cancel\n                                        </Button>,\n                                        <Button key=\"submit\" type=\"primary\"  onClick={this.sendMailToPatient}>\n                                            Send\n                                        </Button>,\n                                    ]}\n                                >\n                                    <p>Send Prescription  To {this.state.patientName} ?</p>\n                                    <Input value={this.state.mail_to} placeholder={\"Email\"}\n                                           onChange={(e)=>that.updateFormValue('mail_to',e.target.value)}/>\n                                </Modal>\n\n\n                                <Table columns={columns} dataSource={presc.drugs} pagination={false}\n                                       footer={() => prescriptonFooter(presc)}\n                                       key={presc.id}/>\n                            </Card>\n                        </div>)}\n                        <Spin spinning={this.state.loading}>\n                            <Row>\n                            </Row>\n                        </Spin>\n                        <InfiniteFeedLoaderButton loading={this.state.loading}\n                                                  loaderFunction={() => this.loadPrescriptions(this.state.nextPrescriptionPage)}\n                                                  hidden={!this.state.nextPrescriptionPage}/>\n                    </div>\n                </Route>\n            </Switch>\n\n            </div>\n        }\n        else {\n            return <div>\n                <Card\n                    bodyStyle={{padding: 0}}\n                    title={this.state.currentPatient ? this.state.currentPatient.user.first_name + \" Prescriptions\" : \"Prescriptions\"}\n                    extra={<Button.Group style={{float: 'right'}}>\n                        <Button type={\"primary\"} onClick={() => this.props.togglePatientListModal(true)}>\n                            <Icon type=\"plus\"/>Add\n                        </Button>\n                    </Button.Group>}/>\n                {this.state.prescription.map((presc) => <div key={presc.id}>\n                    <Card style={{marginTop: 10,}}\n                          bodyStyle={{padding: 0}}\n                          title={<small>{presc.date ? moment(presc.date).format('ll') : null}\n                              <Link to={\"/patient/\" + presc.patient.id + \"/emr/prescriptions\"}>\n                                  &nbsp;&nbsp; {presc.patient.user ? presc.patient.user.first_name : null} (ID: {presc.patient.custom_id?presc.patient.custom_id:presc.patient.id})&nbsp;\n                              </Link>\n                              <span>, {presc.patient.gender}</span>\n                          </small>}\n                          extra={<Dropdown.Button\n                              size={\"small\"}\n                              style={{float: 'right'}}\n                              overlay={<Menu>\n                                  <Menu.Item key=\"1\" onClick={() => that.editPrescriptionData(presc)}\n                                             disabled={(presc.practice && presc.practice.id != that.props.active_practiceId)}>\n                                      <Icon type=\"edit\"/>\n                                      Edit\n                                  </Menu.Item>\n                                  <Menu.Item key=\"2\" onClick={() => that.deletePrescriptions(presc)}\n                                             disabled={(presc.practice && presc.practice.id != that.props.active_practiceId)}>\n                                      <Icon type=\"delete\"/>\n                                      Delete\n                                  </Menu.Item>\n                                  <Menu.Divider/>\n                                  <Menu.Item key=\"3\">\n                                      <Link to={\"/patient/\" + presc.patient + \"/emr/timeline\"}>\n                                          <Icon type=\"clock-circle\"/>\n                                          &nbsp;\n                                          Patient Timeline\n                                      </Link>\n                                  </Menu.Item>\n\n                                  <Menu.Divider/>\n                                  <Menu.Item key={'4'}>\n                                      <a onClick={() => this.sendPatientMail(presc)}><Icon\n                                          type=\"mail\"/> Send mail to patient\n                                      </a>\n                                  </Menu.Item>\n                              </Menu>}>\n                              <a onClick={() => this.loadPDF(presc.id)}><Icon type=\"printer\"/></a>\n                          </Dropdown.Button>}>\n                        <Table columns={columns} dataSource={presc.drugs} pagination={false}\n                               footer={() => prescriptonFooter(presc)}\n                               key={presc.id}/>\n                    </Card></div>)}\n                <Spin spinning={this.state.loading}>\n                    <Row>\n                    </Row>\n                </Spin>\n                <InfiniteFeedLoaderButton loading={this.state.loading}\n                                          loaderFunction={() => this.loadPrescriptions(this.state.nextPrescriptionPage)}\n                                          hidden={!this.state.nextPrescriptionPage}/>\n\n                <Modal\n                    title={null}\n                    visible={this.state.visibleMail}\n                    onOk={this.sendMailToPatient}\n                    onCancel={this.mailModalClose}\n                    footer={[\n                        <Button key=\"back\" onClick={this.mailModalClose}>\n                            Cancel\n                        </Button>,\n                        <Button key=\"submit\" type=\"primary\"  onClick={this.sendMailToPatient}>\n                            Send\n                        </Button>,\n                    ]}\n                >\n                    <p>Send Prescription To {this.state.patientName} ?</p>\n                    <Input value={this.state.mail_to} placeholder={\"Email\"}\n                           onChange={(e)=>that.updateFormValue('mail_to',e.target.value)}/>\n                </Modal>\n            </div>\n        }\n\n    }\n}\n\nexport default PatientPrescriptions;\n\nfunction prescriptonFooter(presc) {\n    if (presc) {\n\n        return <div>\n            {presc.doctor ? <Tooltip title=\"Doctor\"><Tag color={presc.doctor ? presc.doctor.calendar_colour : null}>\n                <b>{\"prescribed by  \" + presc.doctor.user.first_name} </b>\n            </Tag></Tooltip> : null}\n            {presc.practice ? <Tag style={{float: 'right'}}>\n                <Tooltip title=\"Practice Name\">\n                    <b>{presc.practice.name} </b>\n                </Tooltip>\n            </Tag> : null}\n            {presc.labs.length ? <div>\n                +{presc.labs.length}&nbsp;Lab Orders\n                {/*<Divider style={{margin:0}}/>*/}\n            </div> : null}\n        </div>\n    }\n    return null\n}\n\nfunction prescriptionHeader(presc) {\n    if (presc) {\n        return <span>{presc.date ? moment(presc.date).format('lll') : null}</span>\n    }\n    return null;\n}\n","import React from \"react\";\nimport {\n    Card,\n    Row,\n    Form,\n    Col,\n    List,\n    Button,\n    Table,\n    InputNumber,\n    Input,\n    Icon,\n    Affix,\n    Dropdown,\n    Menu,\n    DatePicker\n} from 'antd';\nimport {displayMessage, getAPI, interpolate, postAPI} from \"../../../utils/common\";\nimport {PRACTICESTAFF, PROCEDURE_CATEGORY, TREATMENTPLANS_API} from \"../../../constants/api\";\nimport {remove} from 'lodash';\nimport {Redirect} from 'react-router-dom';\nimport {DOCTORS_ROLE} from \"../../../constants/dataKeys\";\nimport moment from \"moment\";\nimport {loadDoctors} from \"../../../utils/clinicUtils\";\n\n\nclass AddorEditDynamicTreatmentPlans extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            loadingProcedures: true,\n            procedure_category: [],\n            tableFormValues: [],\n            addNotes: {},\n            practiceDoctors: [],\n            selectedDoctor: {},\n            selectedDate: moment()\n        }\n    }\n\n    componentDidMount() {\n        if (this.props.editId) {\n            this.setState(function (prevState) {\n                let tableValues = [];\n                this.props.editTreatmentPlan.treatment_plans.forEach(function (treatment) {\n                    let randId = Math.random().toFixed(7);\n                    tableValues.push({\n                        ...treatment,\n                        ...treatment.procedure,\n                        _id: randId,\n                    })\n                });\n                return {\n                    ...this.props.editTreatmentPlan,\n                    tableFormValues: tableValues,\n                    selectedDate: moment(this.props.editTreatmentPlan.date),\n                    selectedDoctor: this.props.editTreatmentPlan.doctor\n                }\n            })\n        }\n        this.loadProcedures();\n        loadDoctors(this);\n    }\n\n    calculateItem = (_id) => {\n        const {getFieldsValue} = this.props.form;\n        // console.log(getFieldsValue());\n        this.setState(function (prevState) {\n            let newtableFormValues = [...prevState.tableFormValues];\n            newtableFormValues.forEach(function (item) {\n\n            });\n        });\n    }\n    addNotes = (_id, option) => {\n        this.setState(function (prevState) {\n            return {addNotes: {...prevState.addNotes, [_id]: !!option}}\n        })\n    }\n    removeTreatment = (_id) => {\n        this.setState(function (prevState) {\n            return {\n                tableFormValues: [...remove(prevState.tableFormValues, function (item) {\n                    return item._id != _id;\n                })]\n            }\n        });\n    }\n    add = (item) => {\n        let that = this;\n        this.setState(function (prevState) {\n            let randId = Math.random().toFixed(7);\n            return {\n                addNotes: {...prevState.addNotes, [randId]: !!item.default_notes},\n                tableFormValues: [{\n                    ...item,\n                    _id: randId,\n                },...prevState.tableFormValues]\n            }\n        }, function () {\n            // if (that.bottomPoint)\n            //     that.bottomPoint.scrollIntoView({behavior: 'smooth'});\n        });\n    };\n\n    loadProcedures() {\n        var that = this;\n        let params = {};\n        if (this.state.searchString) {\n            params.name = this.state.searchString;\n        }\n        that.setState({\n            loadingProcedures: true\n        })\n        let successFn = function (data) {\n            if (!params.name || that.state.searchString == params.name)\n                that.setState({\n                    // procedure_category: data.results,\n                    loadingProcedures: false,\n                    filteredItems: data.results,\n                })\n        };\n        let errorFn = function () {\n            that.setState({\n                loadingProcedures: false\n            })\n        };\n\n        getAPI(interpolate(PROCEDURE_CATEGORY, [this.props.active_practiceId]), successFn, errorFn, params);\n    }\n\n    selectDoctor = (doctor) => {\n        this.setState({\n            selectedDoctor: doctor\n        })\n    }\n    selectedDate = (date) => {\n        this.setState({\n            selectedDate: date\n        })\n    }\n    handleSubmit = (e) => {\n        let that = this;\n        e.preventDefault();\n        this.props.form.validateFields((err, values) => {\n            if (!err) {\n                // console.log('Received values of form: ', values);\n                let reqData = {\n                    treatment_plans: [],\n                    patient: that.props.match.params.id,\n                    \"doctor\": that.state.selectedDoctor.id,\n                    \"date\": that.state.selectedDate && moment(that.state.selectedDate).isValid() ? that.state.selectedDate.format('YYYY-MM-DD') : null,\n                    \"practice\": that.props.active_practiceId,\n                };\n                if (that.props.editId) {\n                    reqData.id = that.props.editTreatmentPlan.id\n                }\n                that.state.tableFormValues.forEach(function (item) {\n                    // console.log(item);\n                    item.quantity = values.quantity[item._id];\n                    item.cost = values.cost[item._id];\n                    item.discount = values.discount[item._id];\n                    if (values.notes)\n                        item.notes = values.notes[item._id];\n                    let sendingItem = {\n                        \"procedure\": item.id,\n                        \"cost\": item.cost,\n                        \"quantity\": item.quantity,\n                        \"margin\": item.margin,\n                        \"default_notes\": item.default_notes,\n                        \"is_active\": true,\n                        \"is_completed\": item.is_completed || false,\n                        \"discount\": item.discount,\n                        \"discount_type\": \"%\",\n                    };\n                    reqData.treatment_plans.push(sendingItem);\n                });\n\n                let successFn = function (data) {\n                    displayMessage(\"Inventory updated successfully\");\n                    if(that.props.loadData)\n                        that.props.loadData();\n                    let url = '/patient/' + that.props.match.params.id + '/emr/plans';\n                    that.props.history.replace(url);\n                }\n                let errorFn = function () {\n\n                }\n                postAPI(interpolate(TREATMENTPLANS_API, [that.props.match.params.id]), reqData, successFn, errorFn);\n            }\n        });\n    }\n    searchValues = (value) => {\n        let that = this;\n        this.setState(function (prevState) {\n            return {searchString: value}\n        }, function () {\n            that.loadProcedures();\n        });\n        return false;\n    }\n\n    render() {\n        let that = this;\n        const {getFieldDecorator, getFieldValue, getFieldsValue} = this.props.form;\n        const formItemLayout = {\n            labelCol: {\n                xs: {span: 24},\n                sm: {span: 4},\n            },\n            wrapperCol: {\n                xs: {span: 24},\n                sm: {span: 20},\n            },\n        };\n        const formItemLayoutWithOutLabel = {\n            labelCol: {\n                xs: {span: 24},\n                sm: {span: 24},\n            },\n            wrapperCol: {\n                xs: {span: 24},\n                sm: {span: 24},\n            },\n        };\n        const consumeRow = [{\n            title: 'Treatments',\n            dataIndex: 'name',\n            key: 'name',\n            render: (name, record) => <span>\n                <b>{name}</b><br/>\n                {this.state.addNotes[record._id] ?\n                    <Form.Item\n                        key={`default_notes[${record._id}]`}\n                        {...formItemLayout}>\n                        {getFieldDecorator(`default_notes[${record._id}]`, {\n                            validateTrigger: ['onChange', 'onBlur'],\n                            rules: [{\n                                message: \"This field is required.\",\n                            }],\n                            initialValue: record.default_notes\n                        })(\n                            <Input.TextArea min={0} placeholder={\"Notes...\"}/>\n                        )}\n                    </Form.Item>\n                    : <a onClick={() => this.addNotes(record._id, true)}>+ Add Note</a>}\n                </span>\n        }, {\n            title: 'Quantity',\n            dataIndex: 'quantity',\n            key: 'quantity',\n            render: (name, record) => <Form.Item\n                key={`quantity[${record._id}]`}\n                {...formItemLayout}>\n                {getFieldDecorator(`quantity[${record._id}]`, {\n                    validateTrigger: ['onChange', 'onBlur'],\n                    rules: [{\n                        required: true,\n                        message: \"This field is required.\",\n                    }],\n                    initialValue: 1\n                })(\n                    <InputNumber min={0} placeholder=\"Quantity\" size={'small'}\n                                 onChange={() => this.calculateItem(record._id)}/>\n                )}\n            </Form.Item>\n        }, {\n            title: 'Cost',\n            dataIndex: 'cost',\n            key: 'cost',\n            render: (name, record) => <Form.Item\n                key={`cost[${record._id}]`}\n                {...formItemLayout}>\n                {getFieldDecorator(`cost[${record._id}]`, {\n                    validateTrigger: ['onChange', 'onBlur'],\n                    rules: [{\n                        required: true,\n                        message: \"This field is required.\",\n                    }],\n                    initialValue: record.cost\n                })(\n                    <InputNumber min={0} placeholder=\"Cost\" size={'small'}\n                                 onChange={() => this.calculateItem(record._id)}/>\n                )}\n            </Form.Item>\n        }, {\n            title: 'Discount',\n            dataIndex: 'discount',\n            key: 'discount',\n            render: (name, record) => <Form.Item\n                key={`discount[${record._id}]`}\n                {...formItemLayout}>\n                {getFieldDecorator(`discount[${record._id}]`, {\n                    validateTrigger: ['onChange', 'onBlur'],\n                    rules: [{\n                        message: \"This field is required.\",\n                    }],\n                })(\n                    <InputNumber min={0} placeholder=\"Discount\" size={'small'}\n                                 onChange={() => this.calculateItem(record._id)}/>\n                )} %\n            </Form.Item>\n        }, {\n            title: 'Total',\n            dataIndex: 'total',\n            key: 'total',\n            render: (total, record) => <span>\n                {total}\n                <Button icon={\"close\"} onClick={() => this.removeTreatment(record._id)} type={\"danger\"}\n                        shape=\"circle\"\n                        size=\"small\"/>\n            </span>\n        }];\n        return <div>\n\n            <Card title={\"Treatment Plans\"}>\n                <Row>\n\n                    <Col span={17}>\n                        <Form onSubmit={this.handleSubmit}>\n                            <Table pagination={false}\n                                   bordered={true}\n                                   dataSource={this.state.tableFormValues}\n                                   columns={consumeRow}/>\n\n                            <Affix offsetBottom={0}>\n                                <Card>\n                                    <span>by &nbsp;&nbsp;</span>\n                                    <Dropdown placement=\"topCenter\" overlay={<Menu>\n                                        {this.state.practiceDoctors.map(doctor =>\n                                            <Menu.Item key=\"0\">\n                                                <a onClick={() => this.selectDoctor(doctor)}>{doctor.user.first_name}</a>\n                                            </Menu.Item>)}\n                                    </Menu>} trigger={['click']}>\n                                        <a className=\"ant-dropdown-link\" href=\"#\">\n                                            <b>\n                                                {this.state.selectedDoctor.user ? this.state.selectedDoctor.user.first_name : 'No DOCTORS Found'}\n                                            </b>\n                                        </a>\n                                    </Dropdown>\n                                    <span> &nbsp;&nbsp;on&nbsp;&nbsp;</span>\n                                    <DatePicker value={this.state.selectedDate}\n                                                onChange={(value) => this.selectedDate(value)} format={\"DD-MM-YYYY\"}\n                                                allowClear={false}/>\n                                    <Form.Item {...formItemLayoutWithOutLabel}\n                                               style={{marginBottom: 0, float: 'right'}}>\n                                        <Button type=\"primary\" htmlType=\"submit\" style={{margin: 5}}>Save Treatment\n                                            Plan</Button>\n                                        {that.props.history ?\n                                            <Button style={{margin: 5, float: 'right'}}\n                                                    onClick={() => that.props.history.goBack()}>\n                                                Cancel\n                                            </Button> : null}\n                                    </Form.Item>\n                                </Card>\n                            </Affix>\n                            <div ref={el => {\n                                that.bottomPoint = el;\n                            }}/>\n                        </Form>\n                    </Col>\n                    <Col span={7}>\n                        <Affix offsetTop={0}>\n                            <div style={{backgroundColor: '#ddd', padding: 8}}>\n                                <Input.Search placeholder={\"Search in plans ...\"}\n                                              onChange={e => this.searchValues(e.target.value)}/>\n                            </div>\n                            <List size={\"small\"}\n                                  style={{maxHeight: '100vh', overflowX: 'scroll'}}\n                                  itemLayout=\"horizontal\"\n                                  dataSource={this.state.filteredItems}\n                                  loading={this.state.loadingProcedures}\n                                  renderItem={item => (\n                                      <List.Item onClick={() => this.add(item)}>\n                                          <List.Item.Meta\n                                              title={item.name}/>\n                                      </List.Item>)}/>\n                        </Affix>\n                    </Col>\n                </Row>\n            </Card>\n\n        </div>\n    }\n}\n\nexport default Form.create()(AddorEditDynamicTreatmentPlans)\n","import React from \"react\";\nimport {Checkbox, Table, Button, Card, Icon, Tag, Menu, Dropdown, Modal, Spin, Tooltip, Input} from \"antd\";\nimport {Link} from \"react-router-dom\";\nimport {\n    CLINIC_NOTES_PDF,\n    PROCEDURE_CATEGORY,\n    TREATMENTPLANS_API,\n    TREATMENTPLANS_MARK_COMPLETE_API,\n    TREATMENTPLANS_PDF\n} from \"../../../constants/api\";\nimport {getAPI, interpolate, displayMessage, postAPI} from \"../../../utils/common\";\nimport moment from \"moment\";\nimport {Redirect, Switch, Route} from \"react-router\";\nimport AddorEditDynamicTreatmentPlans from \"./AddorEditDynamicTreatmentPlans\";\nimport {SUCCESS_MSG_TYPE} from \"../../../constants/dataKeys\";\nimport {BACKEND_BASE_URL} from \"../../../config/connect\";\nimport InfiniteFeedLoaderButton from \"../../common/InfiniteFeedLoaderButton\";\nimport * as _ from \"lodash\";\nimport {sendMail} from \"../../../utils/clinicUtils\";\n\nconst confirm = Modal.confirm;\n\nclass PatientTreatmentPlans extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            currentPatient: this.props.currentPatient,\n            active_practiceId: this.props.active_practiceId,\n            treatmentPlans: [],\n            procedure_category: null,\n            incompletedTreatmentPlans: [],\n            loading: true,\n            selectedTreatments: {}\n        }\n        this.loadTreatmentPlans = this.loadTreatmentPlans.bind(this);\n        this.editTreatmentPlanData = this.editTreatmentPlanData.bind(this);\n        this.submitCompleteTreatment = this.submitCompleteTreatment.bind(this);\n    }\n\n    componentDidMount() {\n        this.loadTreatmentPlans();\n    }\n\n    loadTreatmentPlans(page = 1) {\n        let incompleted = [];\n        let that = this;\n        this.setState({\n            loading: true\n        })\n        let successFn = function (data) {\n            that.setState(function (prevState) {\n                if (data.current == 1) {\n                    return {\n                        treatmentPlans: [...data.results],\n                        next: data.next,\n                        loading: false\n                    }\n                }\n                return {\n                    treatmentPlans: [...prevState.treatmentPlans, ...data.results],\n                    next: data.next,\n                    loading: false\n                }\n            });\n            data.results.forEach(function (treatmentplan) {\n                if (!treatmentplan.is_completed) {\n                    incompleted.push(treatmentplan)\n                }\n            });\n            that.setState(function (prevState) {\n                if (data.current == 1) {\n                    return {\n                        incompletedTreatmentPlans: [...incompleted],\n                        loading: false\n                    }\n                }\n                return {\n                    incompletedTreatmentPlans: [...prevState.incompletedTreatmentPlans, ...incompleted],\n                    loading: false\n                }\n            })\n        }\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            })\n\n        };\n        let apiParams = {\n            page: page,\n            practice: this.props.active_practiceId\n        };\n        if (this.props.match.params.id) {\n            apiParams.patient = this.props.match.params.id;\n        }\n        if (this.props.showAllClinic && this.props.match.params.id) {\n            delete (apiParams.practice)\n        }\n        getAPI(TREATMENTPLANS_API, successFn, errorFn, apiParams)\n\n    }\n\n    editTreatmentPlanData(record) {\n        console.log(\"record\",record.id);\n        this.setState({\n            editTreatmentPlan: record,\n            loading: false\n        });\n        let id = record.patient;\n        this.props.history.push(\"/patient/\" + record.id + \"/emr/plans/edit\")\n\n    }\n\n\n    deleteTreatmentPlans(record) {\n        let that = this;\n        confirm({\n            title: 'Are you sure to delete this item?',\n            okText: 'Yes',\n            okType: 'danger',\n            cancelText: 'No',\n            onOk() {\n                let reqData = {\n                    id: record.id,\n                    patient: record.patient.id,\n                    is_active: false,\n                }\n                let successFn = function (data) {\n                    that.loadTreatmentPlans();\n                    displayMessage(SUCCESS_MSG_TYPE, \"Treatment Plan Deleted Successfully!\");\n\n                }\n                let errorFn = function () {\n\n                };\n                postAPI(interpolate(TREATMENTPLANS_API, [that.props.match.params.id], null), reqData, successFn, errorFn);\n            },\n            onCancel() {\n                console.log('Cancel');\n            },\n        });\n\n\n    }\n\n    treatmentCompleteToggle(id, option) {\n        this.setState(function (prevState) {\n            return {selectedTreatments: {...prevState.selectedTreatments, [id]: !!option}}\n        });\n    }\n\n    submitCompleteTreatment() {\n        let that = this;\n        let selectedTreatments = this.state.selectedTreatments;\n        let treatmentKeys = Object.keys(selectedTreatments);\n        // let reqTreatmentsArray = [];\n        let reqData = {\n            treatment: [],\n            patient: that.props.match.params.id\n        };\n        treatmentKeys.forEach(function (item) {\n            let treatmentObj = {id: item, is_completed: selectedTreatments[item]};\n            reqData.treatment.push(treatmentObj);\n        });\n        let successFn = function (data) {\n            that.loadTreatmentPlans();\n            that.setState({\n                selectedTreatments: {}\n            })\n        }\n        let errorFn = function () {\n\n        }\n        postAPI(interpolate(TREATMENTPLANS_MARK_COMPLETE_API, [this.props.match.params.id]), reqData, successFn, errorFn)\n    }\n\n    loadPDF(id) {\n        let that = this;\n        let successFn = function (data) {\n            if (data.report)\n                window.open(BACKEND_BASE_URL + data.report);\n        }\n        let errorFn = function () {\n\n        }\n        getAPI(interpolate(TREATMENTPLANS_PDF, [id]), successFn, errorFn);\n    }\n\n    updateFormValue =(type,value)=>{\n        this.setState({\n            [type]: value\n        })\n    };\n    mailModalOpen =() =>{\n        this.setState({\n            visibleMail:true\n        })\n    };\n\n    mailModalClose =() =>{\n        this.setState({\n            visibleMail:false\n        })\n    };\n\n    sendPatientMail =(treatment)=>{\n        this.mailModalOpen()\n        this.setState({\n            patientName:_.get(treatment,'patient.user.first_name'),\n            treatmentId:_.get(treatment,'id'),\n            mail_to:_.get(treatment,'patient.user.email')\n        })\n\n    };\n\n    sendMailToPatient =()=>{\n        let {mail_to ,treatmentId } = this.state;\n        let apiParams ={\n            mail_to:mail_to,\n        }\n        sendMail(interpolate(TREATMENTPLANS_PDF,[treatmentId]),apiParams)\n        this.mailModalClose();\n    }\n\n    render() {\n        let that = this;\n\n        const columns = [{\n            title: '',\n            key: 'is_completed',\n            render: (text, record) => (record.is_completed ?\n                <Icon type=\"check-circle\" theme=\"twoTone\" style={{marginLeft: '8px', fontSize: '20px'}}/> :\n                <Checkbox key={record.id}\n                          onChange={(e) => this.treatmentCompleteToggle(record.id, e.target.checked)}\n                          value={this.state.selectedTreatments[record.id]}/>)\n        }, {\n            title: 'Procedure',\n            dataIndex: 'procedure',\n            key: 'procedure',\n            render: (text, record) => (\n                <span> {text.name}</span>\n            )\n        }, {\n            title: 'Quantity',\n            dataIndex: 'quantity',\n            key: 'quantity',\n        }, {\n            title: 'Discount',\n            dataIndex: 'discount',\n            key: 'discount',\n        }, {\n            title: 'Cost per  Unit',\n            dataIndex: 'cost',\n            key: 'cost',\n        }, {\n            title: 'Notes',\n            dataIndex: 'default_notes',\n            key: 'default_notes',\n        }];\n\n        if (this.props.match.params.id) {\n            return <div><Switch>\n                <Route exact path='/patient/:id/emr/plans/add'\n                       render={(route) => <AddorEditDynamicTreatmentPlans {...this.state} {...route} {...that.props}\n                                                                          loadData={this.loadTreatmentPlans}/>}/>\n                <Route exact path='/patient/:id/emr/plans/edit'\n                       render={(route) => (this.state.editTreatmentPlan ?\n                           <AddorEditDynamicTreatmentPlans {...this.state} {...route} {...that.props}\n                                                           loadData={this.loadTreatmentPlans}\n                                                           editId={this.state.editTreatmentPlan.id}/> :\n                           <Redirect to={\"/patient/\" + this.props.match.params.id + \"/emr/plans\"}/>)}/>\n                <div>\n                    <Card\n                        bodyStyle={{padding: 0}}\n                        title={this.state.currentPatient ? this.state.currentPatient.user.first_name + \" TreatmentPlans\" : \"TreatmentPlans\"}\n                        extra={<Button.Group>\n                            <Button onClick={this.submitCompleteTreatment}>\n                                <Icon type=\"save\"/>Save\n                            </Button>\n                            <Link to={\"/patient/\" + this.props.match.params.id + \"/emr/plans/add\"}>\n                                <Button type={\"primary\"}>\n                                    <Icon type=\"plus\"/>Add\n                                </Button>\n                            </Link>\n                        </Button.Group>\n                        }/>\n                    <Spin spinning={this.state.loading}>\n                        {this.state.treatmentPlans.map((treatment) => <Card bodyStyle={{padding: 0}}\n                                                                            style={{marginTop: 15}}>\n                                <div style={{padding: 16}}>\n                                    <h4>{treatment.date ? moment(treatment.date).format('ll') : null}\n                                        <Dropdown.Button\n                                            size={\"small\"}\n                                            style={{float: 'right'}}\n                                            overlay={<Menu>\n                                                <Menu.Item key=\"1\" onClick={() => that.editTreatmentPlanData(treatment)}\n                                                           disabled={(treatment.practice && treatment.practice.id != this.props.active_practiceId)}>\n                                                    <Icon type=\"edit\"/>\n                                                    Edit\n                                                </Menu.Item>\n                                                <Menu.Item key=\"2\" onClick={() => that.deleteTreatmentPlans(treatment)}\n                                                           disabled={(treatment.practice && treatment.practice.id != this.props.active_practiceId)}>\n                                                    <Icon type=\"delete\"/>\n                                                    Delete\n                                                </Menu.Item>\n                                                <Menu.Divider/>\n                                                <Menu.Item key=\"3\">\n                                                    <Link to={\"/patient/\" + treatment.patient + \"/emr/timeline\"}>\n                                                        <Icon type=\"clock-circle\"/>\n                                                        &nbsp;\n                                                        Patient Timeline\n                                                    </Link>\n                                                </Menu.Item>\n\n                                                <Menu.Divider/>\n                                                <Menu.Item key={'4'}>\n                                                    <a onClick={() => this.sendPatientMail(treatment)}><Icon\n                                                        type=\"mail\"/> Send mail to patient\n                                                    </a>\n                                                </Menu.Item>\n                                            </Menu>}>\n                                            <a onClick={() => this.loadPDF(treatment.id)}><Icon type=\"printer\"/></a>\n                                        </Dropdown.Button>\n\n                                    </h4>\n\n                                </div>\n                                <Table loading={this.state.loading} columns={columns}\n                                       dataSource={treatment.treatment_plans}\n                                       footer={() => treatmentFooter(treatment)}\n                                       pagination={false}\n                                       key={treatment.id}/>\n\n                            </Card>\n                        )}</Spin>\n                    <InfiniteFeedLoaderButton loaderFunction={() => this.loadTreatmentPlans(that.state.next)}\n                                              loading={this.state.loading}\n                                              hidden={!this.state.next}/>\n                    <Modal\n                        title={null}\n                        visible={this.state.visibleMail}\n                        onOk={this.sendMailToPatient}\n                        onCancel={this.mailModalClose}\n                        footer={[\n                            <Button key=\"back\" onClick={this.mailModalClose}>\n                                Cancel\n                            </Button>,\n                            <Button key=\"submit\" type=\"primary\"  onClick={this.sendMailToPatient}>\n                                Send\n                            </Button>,\n                        ]}\n                    >\n                        <p>Send Treatment  To {this.state.patientName} ?</p>\n                        <Input value={this.state.mail_to} placeholder={\"Email\"}\n                               onChange={(e)=>that.updateFormValue('mail_to',e.target.value)}/>\n                    </Modal>\n                </div>\n            </Switch>\n\n            </div>\n        } else {\n            return <div>\n                <Card\n                    bodyStyle={{padding: 0}}\n                    title={this.state.currentPatient ? this.state.currentPatient.user.first_name + \" TreatmentPlans\" : \"TreatmentPlans\"}\n                    extra={<Button.Group>\n                        <Button onClick={this.submitCompleteTreatment}>\n                            <Icon type=\"save\"/>Save\n                        </Button>\n                        <Button type={\"primary\"} onClick={() => this.props.togglePatientListModal(true)}>\n                            <Icon type=\"plus\"/>Add\n                        </Button>\n                    </Button.Group>\n                    }/>\n                <Spin spinning={this.state.loading}>\n                    {this.state.treatmentPlans.map((treatment) => <Card bodyStyle={{padding: 0}}\n                                                                        key={treatment.id}\n                                                                        style={{marginTop: 15}}>\n                            <div style={{padding: 16}}>\n                                <h4>{treatment.date ? moment(treatment.date).format('ll') : null}\n                                <Link to={\"/patient/\" + treatment.patient.id + \"/emr/plans\"}>\n                                    &nbsp;&nbsp; {treatment.patient.user?treatment.patient.user.first_name:null} (ID: {treatment.patient.custom_id?treatment.patient.custom_id:treatment.patient.id})&nbsp;\n                                </Link>\n                                <span>, {treatment.patient.gender}</span>\n\n                                    <Dropdown.Button\n                                        size={\"small\"}\n                                        style={{float: 'right'}}\n                                        overlay={<Menu>\n                                            <Menu.Item key=\"1\" disabled={(treatment.practice && treatment.practice.id != this.props.active_practiceId)}>\n                                                <Link to={\"/patient/\" + treatment.patient.id + \"/emr/plans/edit\"}>\n                                                    <Icon type=\"edit\"/>\n                                                    &nbsp;\n                                                    Edit\n                                                </Link>\n                                            </Menu.Item>\n                                            <Menu.Item key=\"2\" onClick={() => that.deleteTreatmentPlans(treatment)}\n                                                       disabled={(treatment.practice && treatment.practice.id != this.props.active_practiceId)}>\n                                                <Icon type=\"delete\"/>\n                                                Delete\n                                            </Menu.Item>\n                                            <Menu.Divider/>\n                                            <Menu.Item key=\"3\">\n                                                <Link to={\"/patient/\" + treatment.patient + \"/emr/timeline\"}>\n                                                    <Icon type=\"clock-circle\"/>\n                                                    &nbsp;\n                                                    Patient Timeline\n                                                </Link>\n                                            </Menu.Item>\n\n                                            <Menu.Divider/>\n                                            <Menu.Item key={'4'}>\n                                                <a onClick={() => this.sendPatientMail(treatment)}><Icon\n                                                    type=\"mail\"/> Send mail to patient\n                                                </a>\n                                            </Menu.Item>\n\n                                        </Menu>}>\n                                        <a onClick={() => this.loadPDF(treatment.id)}><Icon type=\"printer\"/></a>\n                                    </Dropdown.Button>\n                                </h4>\n\n                            </div>\n                            <Table loading={this.state.loading} columns={columns}\n                                   dataSource={treatment.treatment_plans}\n                                   footer={() => treatmentFooter(treatment)}\n                                   pagination={false}\n                                   key={treatment.id}/>\n\n                        </Card>\n                    )}\n                </Spin>\n                <InfiniteFeedLoaderButton loaderFunction={() => this.loadTreatmentPlans(that.state.next)}\n                                          loading={this.state.loading}\n                                          hidden={!this.state.next}/>\n                <Modal\n                    title={null}\n                    visible={this.state.visibleMail}\n                    onOk={this.sendMailToPatient}\n                    onCancel={this.mailModalClose}\n                    footer={[\n                        <Button key=\"back\" onClick={this.mailModalClose}>\n                            Cancel\n                        </Button>,\n                        <Button key=\"submit\" type=\"primary\"  onClick={this.sendMailToPatient}>\n                            Send\n                        </Button>,\n                    ]}\n                >\n                    <p>Send Treatment To {this.state.patientName} ?</p>\n                    <Input value={this.state.mail_to} placeholder={\"Email\"}\n                           onChange={(e)=>that.updateFormValue('mail_to',e.target.value)}/>\n                </Modal>\n            </div>\n        }\n\n    }\n}\n\nexport default PatientTreatmentPlans;\n\n\nfunction treatmentFooter(presc) {\n    if (presc) {\n\n        return <div>\n            {presc.doctor ? <Tag color={presc.doctor ? presc.doctor.calendar_colour : null}>\n                <b>{\"prescribed by  \" + presc.doctor.user.first_name} </b>\n            </Tag> : null}\n            {presc.practice ? <Tag style={{float: 'right'}}>\n                <Tooltip title=\"Practice Name\">\n                    <b>{presc.practice.name} </b>\n                </Tooltip>\n            </Tag> : null}\n        </div>\n    }\n    return null\n}\n","import React from \"react\";\nimport {Card, Row, Form, Col, List, Button, Table, InputNumber, Input, Icon} from 'antd';\nimport {displayMessage, getAPI, interpolate, postAPI} from \"../../../utils/common\";\nimport {LABTEST_API} from \"../../../constants/api\";\nimport {WARNING_MSG_TYPE} from \"../../../constants/dataKeys\";\nimport {remove} from 'lodash';\n\nclass AddPatientLabOrders extends React.Component{\n    constructor(props){\n        super(props);\n        this.state={\n        \tlab_test:[],\n        \ttableFormValues: [],\n        \taddedLabs : {}\n        }\n        console.log(\"urgent\",this.props.active_practiceId);\n    }\n\n    componentDidMount() {\n        this.loadLabs();\n    }\n\n    loadLabs(){\n    \tvar that =this;\n    \tlet successFn = function(data){\n    \t\tthat.setState({\n    \t\t\tlab_test: data,\n    \t\t})\n    \t};\n    \tlet errorFn = function(){\n\n    \t};\n    \tgetAPI(interpolate(LABTEST_API, [that.props.active_practiceId]), successFn, errorFn);\n    }\n\n    calculateItem = (_id) => {\n        const {getFieldsValue} = this.props.form;\n        console.log(getFieldsValue());\n        this.setState(function (prevState) {\n            let newtableFormValues = [...prevState.tableFormValues];\n            newtableFormValues.forEach(function (item) {\n\n            });\n        });\n    }\n\n    removeTests = (_id,item) => {\n        this.setState(function (prevState) {\n            return {\n            \taddedLabs:{...prevState.addedLabs,[item.id]:false},\n                tableFormValues: [...remove(prevState.tableFormValues, function (item) {\n                    return item._id != _id;\n                })]\n            }\n        });\n    }\n    add = (item) => {\n    \tconsole.log(\"item\",item);\n        this.setState(function (prevState) {\n        \tconsole.log(\"preview\",prevState);\n            let randId = Math.random().toFixed(7);\n            if(prevState.addedLabs[item.id]){\n            \tdisplayMessage(WARNING_MSG_TYPE,\"Item Already Added\");\n            \treturn false;\n            }\n            return {\n            \taddedLabs:{...prevState.addedLabs,[item.id]:true},\n                tableFormValues: [...prevState.tableFormValues, {\n                    ...item,\n                    _id: randId,\n                }]\n            }\n        });\n    };\n\n     handleSubmit = (e) => {\n        let that = this;\n        e.preventDefault();\n        this.props.form.validateFields((err, values) => {\n            if (!err) {\n                let reqData = {\n                    treatment: [],\n                    patient: that.props.match.params.id\n                };\n                that.state.tableFormValues.forEach(function (item) {\n                    item.cost = values.cost[item._id];\n                    let sendingItem = {\n                        \"name\": item.id,\n                        \"cost\": item.cost,\n                        \"instruction\":item.instruction,\n                        \"is_active\":true,\n                        \"practice\":item.practice,\n                        \"margin\":item.margin,\n\n                    };\n                    reqData.treatment.push(sendingItem);\n                });\n                let successFn = function (data) {\n                    displayMessage(\"Inventory updated successfully\");\n\n                }\n                let errorFn = function () {\n\n                }\n                console.log(\"DataSet\",reqData);\n                // postAPI(interpolate(\"API name\" [that.props.match.params.id]), reqData, successFn, errorFn);\n            }\n        });\n    }\n\n\n    render(){\n    \tlet that = this;\n        const {getFieldDecorator, getFieldValue, getFieldsValue} = this.props.form;\n        const formItemLayout = {\n            labelCol: {\n                xs: {span: 24},\n                sm: {span: 4},\n            },\n            wrapperCol: {\n                xs: {span: 24},\n                sm: {span: 20},\n            },\n        };\n        const formItemLayoutWithOutLabel = {\n            labelCol: {\n                xs: {span: 24},\n                sm: {span: 24},\n            },\n            wrapperCol: {\n                xs: {span: 24},\n                sm: {span: 24},\n            },\n        };\n        const coloums = [{\n            title: 'Name',\n            dataIndex: 'name',\n            key: 'name',\n            render: (name, record) => <span>\n                <b>{name}</b>\n                </span>\n        }, {\n            title: 'Cost',\n            dataIndex: 'cost',\n            key: 'cost',\n            render: (name, record) => <span><Form.Item\n                key={`cost[${record._id}]`}\n                {...formItemLayout}>\n                {getFieldDecorator(`cost[${record._id}]`, {\n                    validateTrigger: ['onChange', 'onBlur'],\n                    rules: [{\n                        required: true,\n                        message: \"This field is required.\",\n                    }],\n                    initialValue: record.cost\n                })}\n            </Form.Item>\n            </span>\n        },  {\n            title: 'Total',\n            dataIndex: 'total',\n            key: 'total',\n            render: (total, record) => <span>\n                {total}\n                <a onClick={() => this.removeTests(record._id,record)}>\n                    <Icon type=\"close-circle\" theme=\"twoTone\" twoToneColor={\"#f00\"}/>\n                </a>\n            </span>\n        }];\n        return <div>\n            <Form onSubmit={this.handleSubmit}>\n                <Card title={\"Patient Lab Orders\"} bodyStyle={{padding: 0}}\n                      extra={<Form.Item {...formItemLayoutWithOutLabel} style={{marginBottom: 0}}>\n                          <Button type=\"primary\" htmlType=\"submit\">Save Lab Orders</Button>\n                      </Form.Item>}>\n                    <Row gutter={16}>\n                        <Col span={7}>\n                            <List size={\"small\"}\n                                  itemLayout=\"horizontal\"\n                                  dataSource={this.state.lab_test}\n                                  renderItem={item => (\n                                      <List.Item>\n                                          <List.Item.Meta\n                                              title={item.name}/>\n                                          <Button type=\"primary\" size=\"small\" shape=\"circle\"\n                                                  onClick={() => this.add(item)}\n                                                  icon={\"arrow-right\"}/>\n                                      </List.Item>)}/>\n                        </Col>\n                        <Col span={17}>\n\n                            <Table pagination={false}\n                                   bordered={true}\n                                   dataSource={this.state.tableFormValues}\n                                   columns={coloums}/>\n\n\n                        </Col>\n                    </Row>\n                </Card>\n            </Form>\n        </div>\n    }\n}\nexport default Form.create()(AddPatientLabOrders);\n","import React from \"react\";\nimport {Card, Button, Icon, Table, Divider, Checkbox} from \"antd\";\nimport {Link} from \"react-router-dom\";\nimport moment from \"moment\";\nimport {Route, Switch} from \"react-router\";\nimport  AddPatientLabOrders from \"./AddPatientLabOrders\";\n\nclass PatientLabOrders extends React.Component{\n\tconstructor(props){\n        super(props);\n        this.state={\n            currentPatient: this.props.currentPatient,\n            active_practiceId: this.props.active_practiceId,\n        \tloading:false,\n        }\n    }\n\n    render(){\n    \tconst columns = [{\n            title: 'Time',\n            dataIndex: 'created_at',\n            key: 'name',\n            render: created_at => <span>{moment(created_at).format('LLL')}</span>,\n        }, {\n            title: 'Drug',\n            key: 'drug',\n\n        }, {\n            title: 'Quantity',\n            dataIndex: 'qunatity',\n            key: 'quantity',\n        }, {\n            title: 'Cost Per  Unit',\n            dataIndex: 'cost',\n            key: 'cost',\n        }, {\n            title: 'Completed',\n            key: 'is_completed',\n            render: (text, record) => (\n                <Checkbox checked={record.is_completed}/>\n            )\n        }, {\n            title: 'Action',\n            key: 'action',\n            render: (text, record) => (\n                <span>\n                <a onClick={() => this.editPrescriptionData(record)}>Edit</a>\n                <Divider type=\"vertical\"/>\n                <a href=\"javascript:;\">Delete</a>\n              </span>\n            ),\n        }];\n\n    \treturn <div><Switch>\n              <Route exact path='/patient/:id/emr/labtrackings/add'\n                     render={(route) => <AddPatientLabOrders{...this.state} {...route} />}/>\n              <Card title={ this.state.currentPatient?this.state.currentPatient.user.first_name + \" Lab Order\":\"Patients Lab Order\"}  extra={<Button.Group>\n                    <Link to={\"/patient/\"+this.props.match.params.id+\"/emr/labtrackings/add\"}><Button><Icon type=\"plus\"/>Add</Button></Link>\n              </Button.Group>}>\n\n                  <Table loading={this.state.loading} columns={columns}  dataSource={this.state.payments} />\n\n              </Card>\n            </Switch>\n\n        </div>\n    }\n\n}\n\nexport default PatientLabOrders;\n","import React from \"react\";\nimport {\n    Affix,\n    Button,\n    Card,\n    Col,\n    DatePicker, Divider,\n    Dropdown,\n    Form, Icon,\n    Input,\n    InputNumber,\n    List,\n    Menu,\n    Row,\n    Select,\n    Spin,\n    Table,\n    Tabs,\n    Tag, Typography\n} from \"antd\";\nimport {displayMessage, getAPI, interpolate, postAPI, putAPI} from \"../../../utils/common\";\nimport {CURRENCY_TYPE, DRUG, INVENTORY, PRESCRIPTIONS, PROCEDURES} from \"../../../constants/hardData\";\nimport {\n    CHECK_PROMO_CODE,\n    CREATE_OR_EDIT_INVOICES,\n    INVENTORY_ITEM_API, OFFERS,\n    PROCEDURE_CATEGORY,\n    SEARCH_THROUGH_QR,\n    SINGLE_INVOICE_API,\n    TAXES,\n    UNPAID_PRESCRIPTIONS\n} from \"../../../constants/api\";\nimport moment from \"moment\";\nimport {loadDoctors} from \"../../../utils/clinicUtils\";\nimport {initialize} from \"react-ga\";\n\nconst {Search} = Input;\nconst TabPane = Tabs.TabPane;\nconst {Text} = Typography;\nlet tableFormFields = {\n    _id: null,\n    quantity: 0,\n    batch: null\n};\n\nclass Addinvoicedynamic extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            classType: props.type,\n            tableFormValues: [],\n            maxQuantityforConsume: {},\n            items: {},\n            practiceDoctors: [],\n            selectedPrescriptions: [],\n            selectedDate: moment(),\n            stocks: {},\n            itemBatches: {},\n            saveLoading: false,\n            qrValue: '',\n            searchItem: '',\n            selectedDoctor: {},\n            tempValues: {},\n            offers: [],\n            loading: false,\n            taxes_list: [],\n            promoCode: '',\n            appliedPromoCodeDiscount: null,\n            promoCodeCheckLoading: false\n        }\n\n    }\n\n    componentDidMount() {\n        let that = this;\n        loadDoctors(this);\n        this.loadInventoryItemList();\n        this.loadProcedures();\n        this.loadPrescriptions();\n        this.loadTaxes();\n        this.loadLoyaltyDiscount();\n        if (this.props.editId) {\n            setTimeout(function () {\n                that.setState({\n                    loading: false,\n                })\n                that.loadEditInvoiceData();\n            }.bind(this), 2000);\n\n\n        }\n    }\n\n    selectedDefaultDate = (date) => {\n        this.setState({\n            selectedDate: date\n        })\n    }\n    loadEditInvoiceData = () => {\n        let that = this;\n        let successFn = function (data) {\n            let invoice = data;\n            that.setState(function (prevState) {\n                let tableValues = [];\n                invoice.procedure.forEach(function (proc) {\n                    let id = Math.random().toFixed(7);\n                    tableValues.push({\n                        ...proc.procedure_data,\n                        ...proc,\n                        selectedDoctor: proc.doctor_data,\n                        selectedDate: moment(proc.date).isValid() ? moment(proc.date) : null,\n                        _id: id,\n                        item_type: PROCEDURES\n                    });\n                    that.changeNetPrice(id, proc.discount)\n                });\n                let stocks = {...prevState.stocks};\n                invoice.inventory.forEach(function (proc) {\n                    let id = Math.random().toFixed(7);\n                    if (prevState.itemBatches[proc.inventory]) {\n                        if (stocks[proc.inventory]) {\n                            let stock_quantity = stocks[proc.inventory];\n                            if (stock_quantity[proc.batch_number])\n                                stock_quantity[proc.batch_number] += proc.unit;\n                            else\n                                stock_quantity[proc.batch_number] += proc.unit;\n                        } else {\n                            let stock_quantity = {};\n                            stock_quantity[proc.batch_number] = proc.unit;\n                            stocks[proc.inventory] = stock_quantity;\n                        }\n                        prevState.itemBatches[proc.inventory].forEach(function (batchObj) {\n                            if (batchObj.batch_number == proc.batch_number)\n                                proc.selectedBatch = batchObj;\n                        });\n                    }\n                    tableValues.push({\n                        ...proc.inventory_item_data,\n                        ...proc,\n                        selectedDoctor: proc.doctor_data,\n                        _id: id,\n                        item_type: INVENTORY,\n                        selectOption: !!proc.offers\n                    });\n                    that.changeNetPrice(id, proc.discount)\n                });\n\n                return {\n                    tableFormValues: tableValues,\n                    selectedDate: moment(invoice.date).isValid() ? moment(invoice.date) : null,\n                    stocks: stocks,\n                    notes: invoice.notes\n                }\n            })\n        }\n        let errorFn = function () {\n\n        }\n        getAPI(interpolate(SINGLE_INVOICE_API, [this.props.editId]), successFn, errorFn);\n    };\n\n    loadInventoryItemList(page = 1) {\n        let that = this;\n        let searchString = this.state.searchItem;\n        that.setState({\n            loadingInventory: true\n        })\n        let successFn = function (reqData) {\n            let data = reqData.results;\n            let drugItems = [];\n            if (that.state.searchItem == searchString)\n                that.setState(function (prevState) {\n                        let stocks = {...prevState.stocks};\n                        let itemBatches = {};\n                        data.forEach(function (item) {\n                            // if (item.item_type == DRUG) {\n                            drugItems.push(item);\n                            if (stocks[item.id]) {\n                                let stock_quantity = stocks[item.id]\n                                if (item.item_type_stock && item.item_type_stock.item_stock)\n                                    item.item_type_stock.item_stock.forEach(function (stock) {\n                                        if (stock_quantity[stock.batch_number])\n                                            stock_quantity[stock.batch_number] += stock.quantity;\n                                        else\n                                            stock_quantity[stock.batch_number] += stock.quantity;\n                                    });\n                            } else {\n                                let stock_quantity = {}\n                                if (item.item_type_stock && item.item_type_stock.item_stock)\n                                    item.item_type_stock.item_stock.forEach(function (stock) {\n                                        stock_quantity[stock.batch_number] = stock.quantity\n                                    });\n                                stocks[item.id] = stock_quantity;\n                            }\n                            itemBatches[item.id] = item.item_type_stock.item_stock;\n                            // }\n\n                        });\n                        let items = prevState.items;\n                        items[INVENTORY] = {...reqData, results: drugItems};\n                        return {\n                            items: items,\n                            stocks: {...prevState.stocks, ...stocks},\n                            itemBatches: {...prevState.itemBatches, ...itemBatches},\n                            loadingInventory: false,\n                        }\n                    }, function () {\n                        if (that.props.editId) {\n                            that.loadEditInvoiceData();\n                        }\n                    }\n                )\n\n        }\n        let errorFn = function () {\n            that.setState({\n                loadingInventory: false\n            })\n        }\n        let paramsApi = {\n            practice: this.props.active_practiceId,\n            maintain_inventory: true,\n            page\n        }\n        if (this.state.searchItem) {\n            paramsApi.item_name = searchString;\n        }\n\n        getAPI(INVENTORY_ITEM_API, successFn, errorFn, paramsApi);\n    }\n\n    loadProcedures(page = 1) {\n        var that = this;\n        let searchString = this.state.searchItem;\n        let successFn = function (data) {\n            let items = that.state.items;\n            items[PROCEDURES] = data;\n            if (that.state.searchItem == searchString)\n                that.setState({\n                    items: items,\n                })\n        };\n        let errorFn = function () {\n        };\n        let paramsApi = {\n            practice: this.props.active_practiceId,\n            page\n        }\n        if (this.state.searchItem) {\n            paramsApi.name = searchString;\n        }\n        getAPI(interpolate(PROCEDURE_CATEGORY, [this.props.active_practiceId]), successFn, errorFn, paramsApi);\n    }\n\n    loadPrescriptions() {\n        let that = this;\n        let searchString = this.state.searchItem;\n        let successFn = function (data) {\n            if (that.state.searchItem == searchString)\n                that.setState(function (prevState) {\n                    return {\n                        items: {...prevState.items, [PRESCRIPTIONS]: data}\n                    }\n                })\n        };\n        let errorFn = function () {\n        };\n        let paramsApi = {\n            practice: this.props.active_practiceId,\n        }\n        if (this.state.searchItem) {\n            paramsApi.item_name = searchString;\n        }\n        getAPI(interpolate(UNPAID_PRESCRIPTIONS, [that.props.match.params.id]), successFn, errorFn, paramsApi);\n    }\n\n    loadTaxes() {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                taxes_list: data,\n            })\n        };\n        let errorFn = function () {\n        };\n        getAPI(interpolate(TAXES, [this.props.active_practiceId]), successFn, errorFn);\n\n    }\n\n    remove = (k) => {\n        this.setState(function (prevState) {\n            let newTableFormValues = [];\n            prevState.tableFormValues.forEach(function (formValue) {\n                if (formValue._id != k)\n                    newTableFormValues.push(formValue);\n            });\n            return {\n                tableFormValues: newTableFormValues\n            }\n        });\n    }\n\n\n    add = (item, randId = Math.random().toFixed(7)) => {\n        this.setState(function (prevState) {\n            if (item.item_type == PROCEDURES) {\n                item = {\n                    ...item,\n                    id: undefined,\n                    unit: 1,\n                    unit_cost: item.cost,\n                    procedure: item.id,\n                    selectedDoctor: prevState.selectedDoctor ? prevState.selectedDoctor : null,\n                    selectedDate: moment(),\n                    taxes: item.taxes.map(tax => tax.id)\n                }\n            } else if (item.item_type == INVENTORY) {\n                item = {\n                    ...item,\n                    id: undefined,\n                    inventory: item.id,\n                    unit_cost: item.retail_without_tax,\n                    selectedDoctor: prevState.selectedDoctor ? prevState.selectedDoctor : null,\n                }\n            }\n            let membershipDiscount = 0;\n            if (this.props.MedicalMembership) {\n                membershipDiscount = this.props.MedicalMembership.medical_membership.benefit;\n            }\n            return {\n                tableFormValues: [{\n                    ...tableFormFields,\n                    ...item,\n                    id: undefined,\n                    _id: randId,\n                    discount: membershipDiscount\n                }, ...prevState.tableFormValues]\n            }\n        });\n    };\n    selectDoctor = (doctor, id, type) => {\n        this.setState(function (prevState) {\n            let finalTableFormValues = [];\n            prevState.tableFormValues.forEach(function (formValue) {\n                if (formValue._id == id && formValue.item_type == type) {\n                    finalTableFormValues.push({...formValue, selectedDoctor: doctor});\n\n                } else {\n                    finalTableFormValues.push(formValue);\n\n                }\n            });\n            return {\n                tableFormValues: finalTableFormValues,\n            }\n        })\n    }\n\n    selectedDate = (dateValue, id, type) => {\n        this.setState(function (prevState) {\n            let finalTableFormValues = [];\n            prevState.tableFormValues.forEach(function (formValue) {\n                if (formValue._id == id && formValue.item_type == type) {\n                    finalTableFormValues.push({...formValue, selectedDate: dateValue})\n                } else {\n                    finalTableFormValues.push(formValue)\n                }\n            });\n            return {\n                tableFormValues: finalTableFormValues\n            }\n        })\n    }\n\n    selectBatch = (batch, id, type) => {\n        this.setState(function (prevState) {\n            let finalTableFormValues = [];\n            prevState.tableFormValues.forEach(function (formValue) {\n                if (formValue._id == id && formValue.item_type == type) {\n                    finalTableFormValues.push({...formValue, selectedBatch: batch})\n                } else {\n                    finalTableFormValues.push(formValue)\n                }\n            });\n            return {\n                tableFormValues: finalTableFormValues\n            }\n        })\n    }\n    addPrescription = (item) => {\n        let that = this;\n        item.drugs.forEach(function (drug_item) {\n            if (drug_item.inventory.maintain_inventory)\n                that.add({...drug_item.inventory, item_type: INVENTORY, inventory: item.inventory.id, id: undefined})\n        });\n        that.setState(function (prevState) {\n            return {selectedPrescriptions: [...prevState.selectedPrescriptions, item.id]}\n        })\n    }\n    handleSubmit = (goBack) => {\n        let that = this;\n        this.props.form.validateFields((err, values) => {\n            if (!err) {\n                that.setState({\n                    // saveLoading: true\n                });\n                let reqData = {\n                    promo_code: that.state.promoCode,\n                    practice: that.props.active_practiceId,\n                    patient: that.props.match.params.id,\n                    unit: null,\n                    cost: null,\n                    discount: null,\n                    taxes: 0,\n                    total: null,\n                    procedure: [],\n                    inventory: [],\n                    prescription: that.state.selectedPrescriptions,\n                    notes: values.notes,\n                    date: that.state.selectedDate && moment(that.state.selectedDate).isValid() ? that.state.selectedDate.format('YYYY-MM-DD') : null,\n                };\n                that.state.tableFormValues.forEach(function (item) {\n                    item.unit = values.unit[item._id];\n                    item.taxes = values.taxes[item._id];\n                    // item.unit_cost = values.unit_cost[item._id];\n                    // item.discount = values.discount[item._id];\n                    // item.discount_type = values.discount_type[item._id];\n                    // item.offers = values.offers;\n                    switch (item.item_type) {\n                        case PROCEDURES:\n                            reqData.procedure.push({\n                                \"name\": item.name,\n                                \"unit\": item.unit,\n                                \"procedure\": item.procedure,\n                                \"default_notes\": null,\n                                \"is_active\": true,\n                                \"margin\": item.margin,\n                                \"taxes\": item.taxes,\n                                \"unit_cost\": item.unit_cost,\n                                // \"unit_cost\": item.total_unit_cost?item.total_unit_cost:item.unit_cost,\n                                \"discount\": item.discount,\n                                \"discount_type\": item.discount_type,\n                                \"offers\": item.offers,\n                                \"doctor\": item.selectedDoctor ? item.selectedDoctor.id : null,\n                                id: that.props.editId ? item.id : undefined\n                            });\n                            break;\n                        case INVENTORY:\n                            reqData.inventory.push({\n                                \"inventory\": item.inventory,\n                                \"name\": item.name,\n                                \"unit\": item.unit,\n                                \"taxes\": item.taxes,\n                                \"unit_cost\": item.unit_cost,\n                                // \"unit_cost\": item.total_unit_cost?item.total_unit_cost:item.unit_cost,\n                                \"discount\": item.discount,\n                                \"discount_type\": item.discount_type,\n                                \"offers\": item.offers,\n                                \"doctor\": item.selectedDoctor ? item.selectedDoctor.id : null,\n                                \"instruction\": item.instruction,\n                                \"is_active\": true,\n                                batch_number: item.selectedBatch ? item.selectedBatch.batch_number : null,\n                                id: that.props.editId ? item.id : undefined\n                            });\n                            break;\n                        default:\n                            return null;\n                    }\n                });\n                let successFn = function (data) {\n                    that.setState({\n                        saveLoading: false\n                    });\n                    displayMessage(\"Inventory updated successfully\");\n                    that.props.loadData();\n                    if (goBack) {\n                        that.props.history.goBack()\n                    } else {\n                        let url = '/patient/' + that.props.match.params.id + '/billing/payments/add?invoices=' + data.id;\n                        that.props.history.replace(url);\n                    }\n                };\n                let errorFn = function () {\n                    that.setState({\n                        saveLoading: false\n                    });\n                };\n                if (that.props.editId) {\n                    putAPI(interpolate(SINGLE_INVOICE_API, [that.props.editId]), reqData, successFn, errorFn);\n                } else {\n                    postAPI(CREATE_OR_EDIT_INVOICES, reqData, successFn, errorFn);\n                }\n\n            }\n        });\n    }\n    addItemThroughQR = (value) => {\n        let that = this;\n        that.setState({\n            loadingQr: true,\n        })\n        let qrSplitted = value.split('*');\n        let successFn = function (data) {\n\n            let item = data;\n            let {setFieldsValue, getFieldsValue, getFieldValue} = that.props.form;\n            let randomId = Math.random().toFixed(7);\n            let flag = true\n            that.state.tableFormValues.forEach(function (row) {\n                if (row.name == qrSplitted[0]) {\n                    let _id = row._id;\n                    let batch = row.selectedBatch.batch_number;\n                    let quantity = getFieldValue(`unit[${_id}]`);\n                    if (batch == qrSplitted[1]) {\n                        flag = false;\n                        setFieldsValue({\n                            [`unit[${_id}]`]: quantity + 1\n                        })\n                    }\n                }\n            });\n            if (flag) {\n                let unit_cost = null;\n                if (data.item_type_stock && data.item_type_stock.item_stock)\n                    data.item_type_stock.item_stock.forEach(function (stock) {\n                        if (stock.batch_number == qrSplitted[1]) {\n                            data.selectedBatch = stock;\n                            unit_cost = stock.unit_cost\n                        }\n                    })\n                that.add({...data, item_type: INVENTORY}, randomId);\n\n                setFieldsValue({\n                    [`unit_cost[${randomId}]`]: unit_cost,\n                })\n            }\n            that.setState(function (prevState) {\n                // if (prevState.items && prevState.items[INVENTORY]) {\n                //     prevState.items[INVENTORY].forEach(function (inventItem) {\n                //         console.log(item.inventory_item)\n                //         if (inventItem.id == item.inventory_item) {\n                //             console.log(inventItem);\n                //             that.add({...inventItem, item_type: INVENTORY});\n                //\n                //         }\n                //     })\n                // }\n                return {\n                    loadingQr: false,\n                    qrValue: ''\n                }\n            });\n        }\n        let errorFn = function () {\n\n        }\n        getAPI(SEARCH_THROUGH_QR, successFn, errorFn, {qr: value, form: 'Invoice'})\n    }\n    setQrValue = (e) => {\n        let value = e.target.value;\n        this.setState({\n            qrValue: value\n        })\n    }\n    searchValues = (e, type) => {\n        let that = this;\n        let value = e.target.value;\n        this.setState({\n            searchItem: value,\n        }, function () {\n            if (type == INVENTORY)\n                that.loadInventoryItemList();\n            else if (type == PRESCRIPTIONS)\n                that.loadPrescriptions();\n            else if (type == PROCEDURES)\n                that.loadProcedures();\n        })\n\n    }\n    changeNetPrice = (id, value) => {\n        let that = this;\n        const {getFieldsValue, setFields} = this.props.form;\n        setTimeout(function () {\n            let values = getFieldsValue();\n            if (values.unit_cost[id] || values.unit[id] || values.discount[id] || values.discount_type[id]) {\n                that.setState(function (prevState) {\n                    let newTableValues = []\n                    prevState.tableFormValues.forEach(function (tableObj) {\n                        if (tableObj._id == id) {\n                            let totalTaxAmount = 0;\n                            let initialDiscount = 0;\n                            let initialDiscountType = '%';\n                            let offer = null;\n                            let selectOption = tableObj.selectOption || tableObj.selectOption == false ? tableObj.selectOption : false;\n                            values.taxes[id].forEach(function (taxid) {\n                                prevState.taxes_list.forEach(function (taxObj) {\n                                    if (taxObj.id == taxid)\n                                        totalTaxAmount += taxObj.tax_value;\n                                })\n                            });\n                            if (value && value == '0') {\n                                selectOption = false\n                            }\n                            if (values.discount_type && values.discount_type[id]) {\n                                initialDiscount = values.discount[id];\n                                initialDiscountType = values.discount_type[id];\n                                offer = null;\n                            } else {\n                                initialDiscount = values.discount[id] ? values.discount[id].toString().split('#')[0] : '';\n                                initialDiscountType = values.discount[id] ? values.discount[id].toString().split('#')[1] : '';\n                                offer = values.discount[id] ? values.discount[id].toString().split('#')[2] : null;\n                            }\n\n                            let total = values.unit[id] * (values.unit_cost[id] ? values.unit_cost[id] : 0);\n\n                            if (initialDiscountType == '%' && initialDiscount) {\n                                if (initialDiscount > 100) {\n                                    initialDiscount = 100\n                                }\n                                total *= (1 - (initialDiscount * 0.01));\n                            } else if (initialDiscountType == 'INR' && initialDiscount) {\n                                if (total > initialDiscount) {\n                                    total -= initialDiscount;\n                                } else {\n                                    total = 0;\n                                }\n                            }\n\n                            total *= (1 + totalTaxAmount * 0.01);\n                            let totalWithoutTaxWithDiscount = total / values.unit[id];\n\n                            newTableValues.push({\n                                ...tableObj,\n                                total_unit_cost: totalWithoutTaxWithDiscount,\n                                total: total,\n                                selectOption: selectOption,\n                                discount: initialDiscount,\n                                discount_type: initialDiscountType,\n                                offers: offer\n                            })\n                        } else {\n                            newTableValues.push(tableObj);\n                        }\n                    })\n                    return {tableFormValues: newTableValues}\n                })\n            } else {\n                that.setState({\n                    retail_price: 0\n                })\n            }\n            that.checkPromoCode();\n        }, 1000);\n\n    };\n    applyPromoCodeDiscounts = (discountValue) => {\n        let that = this;\n        const {setFieldsValue, getFieldsValue} = that.props.form;\n        let newTableValues = [];\n        let values = getFieldsValue();\n        let initialDiscount = discountValue;\n        let valueToSet = {};\n        that.state.tableFormValues.forEach(function (tableObj) {\n            let totalTaxAmount = 0;\n            let initialDiscountType = 'INR';\n            let discountApplied = 0;\n            let offer = null;\n            let selectOption = tableObj.selectOption || tableObj.selectOption == false ? tableObj.selectOption : false;\n            values.taxes[tableObj._id].forEach(function (taxid) {\n                that.state.taxes_list.forEach(function (taxObj) {\n                    if (taxObj.id == taxid)\n                        totalTaxAmount += taxObj.tax_value;\n                })\n            });\n\n            let total = values.unit[tableObj._id] * (values.unit_cost[tableObj._id] ? values.unit_cost[tableObj._id] : 0);\n            let discountAppliedOnProduct = 0;\n            if (initialDiscountType == 'INR' && initialDiscount) {\n                if (total > initialDiscount) {\n                    total -= initialDiscount;\n                    discountAppliedOnProduct = initialDiscount;\n                    discountApplied = initialDiscount;\n                    initialDiscount = 0;\n\n                } else {\n                    initialDiscount -= total;\n                    discountAppliedOnProduct = total;\n                    discountApplied = total;\n                    total = 0;\n                }\n            }\n\n            total *= (1 + totalTaxAmount * 0.01);\n            let totalWithoutTaxWithDiscount = total / values.unit[tableObj._id];\n\n            newTableValues.push({\n                ...tableObj,\n                total_unit_cost: totalWithoutTaxWithDiscount,\n                total: total,\n                selectOption: selectOption,\n                discount: discountAppliedOnProduct,\n                discount_type: initialDiscountType,\n                offers: offer\n            })\n            valueToSet[`discount[${tableObj._id}]`] = discountApplied.toFixed(2);\n            valueToSet[`discount_type[${tableObj._id}]`] = initialDiscountType;\n        });\n        that.setState({\n            tableFormValues: newTableValues\n        });\n        setFieldsValue(valueToSet);\n    }\n    loadLoyaltyDiscount = () => {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                offers: data,\n                // loading: false\n            })\n        };\n        let errorFn = function () {\n            that.setState({\n                // loading: true\n            })\n        };\n        getAPI(interpolate(OFFERS, [this.props.active_practiceId]), successFn, errorFn);\n    };\n    onChangeOption = (type, id) => {\n        let that = this;\n        that.setState(function (prevState) {\n            let tempArr = [];\n\n            prevState.tableFormValues.forEach(function (formValue) {\n\n                if (formValue._id == id) {\n                    tempArr.push({...formValue, selectOption: true})\n                } else {\n                    tempArr.push(formValue)\n                }\n            });\n            return {tableFormValues: tempArr}\n        });\n    };\n    onChangeOffer = (value, id) => {\n        let that = this;\n        that.setState(function (prevState) {\n            let selectedOffer = [];\n            prevState.tableFormValues.forEach(function (formValue) {\n                if (formValue._id == id) {\n\n                    if (value == 'none') {\n                        selectedOffer.push({...formValue, loyaltyDiscount: null})\n                    }\n                    if (value == '0') {\n                        selectedOffer.push({...formValue, selectOption: false})\n                    } else {\n                        prevState.offers.forEach(function (item) {\n\n                            if (item.id == value) {\n                                selectedOffer.push({...formValue, loyaltyDiscount: item.discount})\n                            }\n                        });\n                    }\n                } else {\n                    selectedOffer.push(formValue);\n                }\n            });\n            return {tableFormValues: selectedOffer}\n\n        });\n\n    };\n\n\n    onchangeDiscountSimple = (value, id) => {\n        console.log(value, id);\n        let that = this;\n        that.setState(function (prevState) {\n            let selectedOffer = [];\n            prevState.tableFormValues.forEach(function (formValue) {\n                if (formValue._id == id) {\n\n                    let retailPrice = formValue.unit_cost / (1 + value * 0.01);\n                    console.log(retailPrice);\n                    selectedOffer.push({...formValue, loyaltyDiscount: value})\n\n                } else {\n                    selectedOffer.push(formValue);\n                }\n            });\n            return {tableFormValues: selectedOffer}\n\n        });\n\n    }\n    enterPromoCode = (e) => {\n        this.setState({\n            promoCode: e.target.value\n        })\n    }\n    calculateGrandTotalWithoutDiscount = () => {\n        let grandTotal = 0;\n        let that = this;\n        const {getFieldsValue} = this.props.form;\n        let values = getFieldsValue();\n        this.state.tableFormValues.forEach(function (tableObj) {\n            let totalTaxAmount = 0;\n            values.taxes[tableObj._id].forEach(function (taxid) {\n                that.state.taxes_list.forEach(function (taxObj) {\n                    if (taxObj.id == taxid)\n                        totalTaxAmount += taxObj.tax_value;\n                })\n            });\n            let total = values.unit[tableObj._id] * (values.unit_cost[tableObj._id] ? values.unit_cost[tableObj._id] : 0);\n            total *= (1 + totalTaxAmount * 0.01);\n            grandTotal += total\n        });\n        return grandTotal;\n    };\n    checkPromoCode = (e) => {\n        let that = this;\n        that.setState({\n            promoCodeCheckLoading: true\n        })\n        let successFn = function (data) {\n            that.setState({\n                appliedPromoCodeDiscount: data.discount,\n                promoCodeCheckLoading: false\n            });\n            that.applyPromoCodeDiscounts(data.discount)\n        };\n        let errorFn = function () {\n\n            that.setState({\n                promoCodeCheckLoading: false, appliedPromoCodeDiscount: null, promoCode: ''\n            })\n        };\n        let params = {\n            promo_code: this.state.promoCode,\n            practice: this.props.active_practiceId,\n            patient: that.props.match.params.id,\n            amount: this.calculateGrandTotalWithoutDiscount()\n        };\n        if (params.promo_code)\n            getAPI(CHECK_PROMO_CODE, successFn, errorFn, params);\n        else\n            that.setState({\n                promoCodeCheckLoading: false\n            })\n    }\n    removePromoCode = () => {\n        this.setState({\n            appliedPromoCodeDiscount: 0,\n            promoCodeCheckLoading: false,\n            promoCode: ''\n        });\n        this.applyPromoCodeDiscounts(0)\n    }\n\n    render() {\n        let that = this;\n        const {getFieldDecorator} = this.props.form;\n        const formItemLayout = {\n            labelCol: {\n                xs: {span: 24},\n                sm: {span: 4},\n            },\n            wrapperCol: {\n                xs: {span: 24},\n                sm: {span: 24},\n                md: {span: 24},\n                lg: {span: 24},\n                xl: {span: 24},\n            },\n        };\n        const formItemLayoutWithOutLabel = {\n            labelCol: {\n                xs: {span: 24},\n                sm: {span: 24},\n            },\n            wrapperCol: {\n                xs: {span: 24},\n                sm: {span: 24},\n            },\n        };\n        getFieldDecorator('keys', {initialValue: []});\n        let consumeRow = [{\n            title: 'Item Name',\n            key: 'item_name',\n            dataIndex: 'name',\n            width: 180,\n            render: function (name, record) {\n                switch (record.item_type) {\n                    case PROCEDURES:\n                        return <Form.Item\n                            key={`name[${record._id}]`}\n                            {...formItemLayout}>\n                            {getFieldDecorator(`name[${record._id}]`, {\n                                validateTrigger: ['onChange', 'onBlur'],\n                                initialValue: name,\n                                rules: [{\n                                    required: true,\n                                    message: \"This field is required.\",\n                                }],\n                            })(\n                                <Input min={0} placeholder=\"Item name\" size={'small'}/>\n                            )}\n                            <span>by &nbsp;&nbsp;</span>\n                            <Dropdown placement=\"topCenter\" overlay={<Menu>\n                                {that.state.practiceDoctors.map(doctor =>\n                                    <Menu.Item key=\"0\">\n                                        <a onClick={() => that.selectDoctor(doctor, record._id, PROCEDURES)}>{doctor.user.first_name}</a>\n                                    </Menu.Item>)}\n                            </Menu>} trigger={['click']}>\n                                <a className=\"ant-dropdown-link\" href=\"#\">\n                                    <b>\n                                        {record.selectedDoctor.user ? record.selectedDoctor.user.first_name : 'No DOCTORS Found'}\n                                    </b>\n                                </a>\n                            </Dropdown>\n                            <span> &nbsp;&nbsp;on&nbsp;&nbsp;</span>\n                            <DatePicker value={record.selectedDate}\n                                        size={'small'}\n                                        onChange={(value) => that.selectedDate(value, record._id, PROCEDURES)}\n                                        format={\"DD-MM-YYYY\"}/>\n                        </Form.Item>;\n                    case PRESCRIPTIONS:\n                        return <b>{record.name}</b>;\n                    case INVENTORY:\n                        return <div>\n                            <span>{record.name}</span>\n\n                            <span><br/>by &nbsp;&nbsp;</span>\n                            <Dropdown placement=\"topCenter\" overlay={<Menu>\n                                {that.state.practiceDoctors.map(doctor =>\n                                    <Menu.Item key={doctor.id}>\n                                        <a onClick={() => that.selectDoctor(doctor, record._id, INVENTORY)}>{doctor.user.first_name}</a>\n                                    </Menu.Item>)}\n                            </Menu>} trigger={['click']}>\n                                <a className=\"ant-dropdown-link\" href=\"#\">\n                                    <b>\n                                        {record.selectedDoctor.user ? record.selectedDoctor.user.first_name : 'No DOCTORS Found'}\n                                    </b>\n                                </a>\n                            </Dropdown>\n                            <span><br/>from batch &nbsp;&nbsp;</span>\n                            <Dropdown placement=\"topCenter\" overlay={<Menu>\n                                {that.state.itemBatches[record.inventory] && that.state.itemBatches[record.inventory].map((batch, index) =>\n                                    (moment() >= moment(batch.expiry_date) ? <Menu.Item key={index} disabled={true}>\n                                        {batch.batch_number}&nbsp;({batch.quantity}) &nbsp;&nbsp;{batch.expiry_date}\n                                    </Menu.Item> : <Menu.Item key={index}>\n                                        <a onClick={() => that.selectBatch(batch, record._id, INVENTORY)}>{batch.batch_number}&nbsp;({batch.quantity}) &nbsp;&nbsp;{batch.expiry_date}</a>\n                                    </Menu.Item>))}\n                            </Menu>} trigger={['click']}>\n                                <a className=\"ant-dropdown-link\" href=\"#\">\n                                    <b>\n                                        {record.selectedBatch ? record.selectedBatch.batch_number : 'Select Batch'}\n                                    </b>\n                                </a>\n                            </Dropdown>\n                        </div>\n                    default:\n                        return null;\n                }\n            }\n        }];\n        consumeRow = consumeRow.concat([{\n            title: 'Unit',\n            key: 'unit',\n            width: 100,\n            dataIndex: 'unit',\n            render: (item, record) => (record.item_type == INVENTORY ?\n                    <Form.Item\n                        key={`unit[${record._id}]`}\n                        {...formItemLayout}>\n                        {getFieldDecorator(`unit[${record._id}]`, {\n                            validateTrigger: ['onChange', 'onBlur'],\n                            initialValue: record.unit || 0,\n                            rules: [{\n                                required: true,\n                                message: \"This field is required.\",\n                            }],\n                        })(\n                            <InputNumber min={1}\n                                         max={(record.selectedBatch && that.state.stocks[record.inventory] && that.state.stocks[record.inventory][record.selectedBatch.batch_number] ? that.state.stocks[record.inventory][record.selectedBatch.batch_number] : 0)}\n                                         placeholder=\"units\" size={'small'}\n                                         onChange={(value) => this.changeNetPrice(record._id, record.discount)}\n                                         disabled={!(record.selectedBatch && that.state.stocks[record.inventory] && that.state.stocks[record.inventory][record.selectedBatch.batch_number])}/>\n                        )}\n                    </Form.Item>\n                    : <Form.Item\n                        key={`unit[${record._id}]`}\n                        {...formItemLayout}>\n                        {getFieldDecorator(`unit[${record._id}]`, {\n                            initialValue: record.unit || 0,\n                            validateTrigger: ['onChange', 'onBlur'],\n                            rules: [{\n                                required: true,\n                                message: \"This field is required.\",\n                            }],\n                        })(\n                            <InputNumber min={1} max={100} placeholder=\"unit\" size={'small'}\n                                         onChange={(value) => this.changeNetPrice(record._id, record.discount)}/>\n                        )}\n                    </Form.Item>\n            )\n        }, {\n            title: 'Unit Cost',\n            key: 'unit_cost',\n            width: 100,\n            dataIndex: 'unit_cost',\n\n            render: (item, record) => <Form.Item\n                key={`unit_cost[${record._id}]`}\n                {...formItemLayout}>\n                {getFieldDecorator(`unit_cost[${record._id}]`, {\n                    validateTrigger: ['onChange', 'onBlur'],\n                    initialValue: record.item_type == INVENTORY ? record.retail_without_tax : record.cost,\n                    rules: [{\n                        required: true,\n                        message: \"This field is required.\",\n                    }],\n                })(\n                    <InputNumber min={1} placeholder=\"Unit Cost\" size={'small'}\n                                 onChange={() => that.changeNetPrice(record._id, record.discount)}/>\n                )}\n            </Form.Item>\n            // render: (item, record) => item ? item.toFixed(2) : null\n        }, {\n            title: 'Discount',\n            key: 'discount',\n            dataIndex: 'discount',\n            render: (item, record) => (record.selectOption ?\n                <Form.Item key={`discount[${record._id}]`}\n                           extra={\n                               <span>{record && record.discount ? record.discount + ' ' + record.discount_type + ' Discount' : null} </span>}>\n                    {getFieldDecorator(`discount[${record._id}]`, {\n                        initialValue: record.offers,\n                        validateTrigger: ['onChange', 'onBlur'],\n                    })\n                    (<Select style={{width: 150}} onChange={(value) => that.changeNetPrice(record._id, value)}\n                             size={\"small\"} disabled={this.state.appliedPromoCodeDiscount}>\n                        <Select.Option value={'0'}>Custom Offer</Select.Option>\n                        {that.state.offers.map(option => <Select.Option\n                            value={option.discount + '#' + option.unit + '#' + option.id}>{option.code}</Select.Option>)}\n                    </Select>)\n                    }\n                </Form.Item> : <Form.Item\n                    extra={<a onClick={() => that.onChangeOption('selectOption', record._id)}\n                              disabled={this.state.appliedPromoCodeDiscount}>Choose Offer</a>}\n                    key={`discount[${record._id}]`}\n                    {...formItemLayout}>\n                    {getFieldDecorator(`discount[${record._id}]`, {\n                        initialValue: record.discount ? record.discount : 0,\n                        validateTrigger: ['onChange', 'onBlur'],\n                    })(\n                        <Input placeholder=\"discount\"\n                               disabled={this.state.appliedPromoCodeDiscount}\n                               addonAfter={getFieldDecorator(`discount_type[${record._id}]`, {\n                                   initialValue: record.discount_type || '%',\n                               })(\n                                   <Select onChange={(value) => that.changeNetPrice(record._id, value)}\n                                           disabled={this.state.appliedPromoCodeDiscount}>\n                                       {CURRENCY_TYPE.map(option => <Select.Option\n                                           value={option.value}> {option.value}</Select.Option>)}\n                                   </Select>\n                               )}\n                               size={\"small\"}\n                               style={{width: 150}} onChange={(e) => this.changeNetPrice(record._id, e.target.value)}/>\n                    )}\n                </Form.Item>)\n        }, {\n            title: 'Taxes',\n            key: 'taxes',\n            dataIndex: 'taxes',\n            render: (item, record) => <Form.Item\n                key={`taxes[${record._id}]`}\n                {...formItemLayout}>\n                {getFieldDecorator(`taxes[${record._id}]`, {\n                    initialValue: record.taxes || [],\n                    validateTrigger: ['onChange', 'onBlur'],\n                })(\n                    <Select placeholder=\"Taxes\" size={'small'} mode={\"multiple\"}\n                            style={{width: 150}}\n                            onChange={() => that.changeNetPrice(record._id, record.discount)}>\n                        {this.state.taxes_list && this.state.taxes_list.map((tax) => <Select.Option\n                            value={tax.id}>{tax.name}@{tax.tax_value}%</Select.Option>)}\n                    </Select>\n                )}\n            </Form.Item>\n        }, {\n            title: 'Total Unit Cost',\n            key: 'total_unit_cost',\n            width: 80,\n            align: 'right',\n            dataIndex: 'total_unit_cost',\n            render: (item, record) =>\n                <span>{item ? item.toFixed(2) : '0.00'}</span>,\n        }, {\n            title: 'Total',\n            key: 'total',\n            width: 80,\n            align: 'right',\n            dataIndex: 'total',\n            render: (item, record) => item ? item.toFixed(2) : '0.00'\n\n        }]);\n\n        consumeRow = consumeRow.concat([{\n            key: '_id',\n            dataIndex: '_id',\n            render: (value, record) => <Button icon={\"close\"} onClick={() => that.remove(record._id)}\n                                               type={\"danger\"} shape=\"circle\"\n                                               size=\"small\"/>\n        }]);\n\n        return <div>\n            <Spin spinning={this.state.saveLoading} tip=\"Saving Invoice...\">\n                <Spin spinning={this.state.promoCodeCheckLoading} tip=\"Checking Promo Code and Discounts...\">\n                    <Card\n                        title={this.props.editId ? \"Edit Invoice (INV \" + this.props.editId + \")\" : \"Add Invoice\"}\n                        extra={<Search\n                            loading={this.state.loadingQr}\n                            value={this.state.qrValue}\n                            onChange={this.setQrValue}\n                            placeholder=\"Search QR Code\"\n                            onSearch={this.addItemThroughQR}\n                            style={{width: 200}}\n                        />}\n                        bodyStyle={{padding: 0}}>\n                        <Row>\n                            <Col span={6}>\n                                <Tabs size=\"small\" type=\"card\">\n                                    <TabPane tab={INVENTORY} key={INVENTORY}>\n                                        <div style={{backgroundColor: '#ddd', padding: 8}}>\n                                            <Input.Search placeholder={\"Search in \" + INVENTORY}\n                                                          onChange={(value) => this.searchValues(value, INVENTORY)}/>\n                                        </div>\n                                        <List size={\"small\"}\n                                              itemLayout=\"horizontal\"\n                                              loading={this.state.loadingInventory}\n                                              dataSource={this.state.items && this.state.items[INVENTORY] ? this.state.items[INVENTORY].results : []}\n                                              renderItem={item => (\n                                                  <List.Item>\n                                                      <List.Item.Meta\n                                                          title={item.name + ' (' + item.total_quantity + ')'}\n                                                      />\n                                                      <Button type=\"primary\" size=\"small\" shape=\"circle\"\n                                                              onClick={() => this.add({\n                                                                  ...item,\n                                                                  item_type: INVENTORY\n                                                              })}\n                                                              icon={\"arrow-right\"}/>\n                                                  </List.Item>)}/>\n                                        {this.state.items && this.state.items[INVENTORY] ?\n                                            <div style={{textAlign: 'center'}}>\n                                                <a style={{margin: 5}}\n                                                   disabled={!this.state.items[INVENTORY].previous}\n                                                   onClick={() => this.loadInventoryItemList(this.state.items[INVENTORY].previous)}>\n                                                    <Icon type=\"left\"/>Previous\n                                                </a>\n                                                <Divider type={\"vertical\"}/>\n                                                <a style={{margin: 5}} disabled={!this.state.items[INVENTORY].next}\n                                                   onClick={() => this.loadInventoryItemList(this.state.items[INVENTORY].next)}>\n                                                    Next<Icon type=\"right\"/>\n                                                </a>\n                                            </div> : null}\n                                    </TabPane>\n                                    <TabPane tab={PRESCRIPTIONS} key={PRESCRIPTIONS}>\n                                        <List size={\"small\"}\n                                              itemLayout=\"horizontal\"\n                                              dataSource={this.state.items ? this.state.items[PRESCRIPTIONS] : []}\n                                              renderItem={item => (\n                                                  <List.Item>\n                                                      <List.Item.Meta\n                                                          title={item.drugs.map(drug_item => <div>\n                                                              <span>{drug_item.name}</span> {drug_item.inventory.maintain_inventory ? null :\n                                                              <Tag color=\"red\" style={{\n                                                                  float: 'right',\n                                                                  lineHeight: '18px'\n                                                              }}>Not Sold</Tag>}<br/></div>)}\n                                                          description={item.doctor ?\n                                                              <Tag\n                                                                  color={item.doctor ? item.doctor.calendar_colour : null}>\n                                                                  <b>{\"prescribed by  \" + item.doctor.user.first_name} </b>\n                                                              </Tag> : null}\n                                                      />\n                                                      <Button type=\"primary\" size=\"small\" shape=\"circle\"\n                                                              onClick={() => this.addPrescription({...item})}\n                                                              icon={\"arrow-right\"}/>\n                                                  </List.Item>)}/>\n                                    </TabPane>\n                                    <TabPane tab={PROCEDURES} key={PROCEDURES}>\n                                        <div style={{backgroundColor: '#ddd', padding: 8}}>\n                                            <Input.Search placeholder={\"Search in \" + PROCEDURES}\n                                                          onChange={(value) => this.searchValues(value, PROCEDURES)}/>\n                                        </div>\n                                        <List size={\"small\"}\n                                              itemLayout=\"horizontal\"\n                                              dataSource={this.state.items && this.state.items[PROCEDURES] ? this.state.items[PROCEDURES].results : []}\n                                              renderItem={item => (\n                                                  <List.Item>\n                                                      <List.Item.Meta\n                                                          title={item.name}\n                                                      />\n                                                      <Button type=\"primary\" size=\"small\" shape=\"circle\"\n                                                              onClick={() => this.add({\n                                                                  ...item,\n                                                                  item_type: PROCEDURES\n                                                              })}\n                                                              icon={\"arrow-right\"}/>\n                                                  </List.Item>)}/>\n                                        {this.state.items && this.state.items[PROCEDURES] ?\n                                            <div style={{textAlign: 'center'}}>\n                                                <a style={{margin: 5}}\n                                                   disabled={!this.state.items[PROCEDURES].previous}\n                                                   onClick={() => this.loadProcedures(this.state.items[PROCEDURES].previous)}>\n                                                    <Icon type=\"left\"/>Previous\n                                                </a>\n                                                <Divider type={\"vertical\"}/>\n                                                <a style={{margin: 5}} disabled={!this.state.items[PROCEDURES].next}\n                                                   onClick={() => this.loadProcedures(this.state.items[PROCEDURES].next)}>\n                                                    Next<Icon type=\"right\"/>\n                                                </a>\n                                            </div> : null}\n                                    </TabPane>\n\n                                </Tabs>\n                            </Col>\n                            <Col span={18}>\n                                <Form>\n                                    <Table pagination={false} loading={that.state.loading}\n                                           bordered={true}\n                                           dataSource={this.state.tableFormValues}\n                                           columns={consumeRow}/>\n                                    <Affix offsetBottom={0}>\n                                        <Card>\n                                            <Col span={8}>\n                                                <Form.Item\n                                                    label={\"Notes\"}\n                                                    key={`notes`}\n                                                    {...formItemLayout}>\n                                                    {getFieldDecorator(`notes`, {\n                                                        initialValue: this.state.notes,\n                                                        validateTrigger: ['onChange', 'onBlur'],\n                                                    })(\n                                                        <Input.TextArea row={2} placeholder=\"unit\" size={'small'}/>\n                                                    )}\n                                                </Form.Item>\n                                                <h3>Grand\n                                                    Total: <b>{this.state.tableFormValues.reduce(function (total, item) {\n                                                        return (parseFloat(total) + (item && item.total ? item.total : 0)).toFixed(2);\n                                                    }, 0)}</b>\n                                                </h3>\n                                            </Col>\n                                            <span> &nbsp;&nbsp;on&nbsp;&nbsp;</span>\n                                            <DatePicker value={this.state.selectedDate}\n                                                        onChange={(value) => this.selectedDefaultDate(value)}\n                                                        format={\"DD-MM-YYYY\"}\n                                                        allowClear={false}/>\n\n                                            <Form.Item {...formItemLayoutWithOutLabel}\n                                                       style={{marginBottom: 0, float: 'right'}}>\n\n                                                <Button type=\"primary\" htmlType=\"submit\"\n                                                        onClick={() => this.handleSubmit(true)}\n                                                        style={{margin: 5}}>Save Invoice</Button>\n                                                <Button type=\"primary\" htmlType=\"submit\"\n                                                        onClick={() => this.handleSubmit(false)}\n                                                        style={{margin: 5}}>Save & Create Payment</Button>\n                                                {that.props.history ?\n                                                    <Button style={{margin: 5, float: 'right'}}\n                                                            onClick={() => that.props.history.goBack()}>\n                                                        Cancel\n                                                    </Button> : null}\n                                            </Form.Item>\n                                        </Card>\n                                    </Affix>\n                                </Form>\n                                <Row>\n                                    <Col span={12} style={{padding: 10}}>\n\n                                        <div>\n                                            {this.state.appliedPromoCodeDiscount ? <div>\n                                                <Tag>'{this.state.promoCode}' Applied <Icon\n                                                    onClick={() => this.removePromoCode()}\n                                                    theme=\"twoTone\" twoToneColor=\"#f00\"\n                                                    type={\"close-circle\"}/></Tag>\n                                                <Text type={\"success\"}><br/>Discount\n                                                    INR {this.state.appliedPromoCodeDiscount}</Text>\n                                            </div> : <div>\n                                                <Search\n                                                    enterButton=\"Apply\"\n                                                    value={this.state.promoCode}\n                                                    placeholder=\"Promo Code\"\n                                                    onChange={this.enterPromoCode}\n                                                    onSearch={this.checkPromoCode}\n                                                    style={{width: 200}}\n                                                />\n                                            </div>}\n                                        </div>\n                                    </Col>\n                                </Row>\n                            </Col>\n                        </Row>\n                    </Card>\n                </Spin>\n            </Spin>\n        </div>\n\n    }\n}\n\nexport default Form.create()(Addinvoicedynamic);\n","import React from \"react\";\nimport {\n    Affix,\n    Button,\n    Card,\n    Col,\n    DatePicker,\n    Dropdown,\n    Form,\n    Input,\n    InputNumber,\n    List,\n    Menu,\n    Row,\n    Select,\n    Spin,\n    Table,\n    Tabs,\n    Tag,\n    Checkbox, Divider\n} from \"antd\";\nimport {displayMessage, getAPI, interpolate, postAPI, putAPI} from \"../../../utils/common\";\nimport {DRUG, INVENTORY, PRESCRIPTIONS, PROCEDURES} from \"../../../constants/hardData\";\nimport {\n    INVENTORY_ITEM_API,\n    PROCEDURE_CATEGORY,\n    SEARCH_THROUGH_QR,\n    TAXES,\n    UNPAID_PRESCRIPTIONS,\n    INVOICE_RETURN_API, SINGLE_INVOICE_API\n} from \"../../../constants/api\";\nimport moment from \"moment\";\nimport {loadDoctors} from \"../../../utils/clinicUtils\";\n\nconst {Search} = Input;\nconst {MonthPicker} = DatePicker;\nconst TabPane = Tabs.TabPane;\n\nlet tableFormFields = {\n    _id: null,\n    quantity: 0,\n    batch: null\n};\n\nclass AddReturnInvoice extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            editInvoice: this.props.editInvoice,\n            classType: props.type,\n            tableFormValues: [],\n            maxQuantityforConsume: {},\n            items: {},\n            practiceDoctors: [],\n            selectedPrescriptions: [],\n            selectedDate: moment(),\n            stocks: {},\n            itemBatches: {},\n            saveLoading: false,\n            qrValue: '',\n            searchItem: '',\n            return_with_tax: false,\n            returnCashAvailable: 0\n        }\n\n    }\n\n    componentDidMount() {\n        loadDoctors(this);\n        this.loadInventoryItemList();\n        this.loadProcedures();\n        this.loadPrescriptions();\n        this.loadTaxes();\n        if (this.props.editId) {\n            this.loadEditInvoiceData();\n        }\n    }\n\n    selectedDefaultDate = (date) => {\n        this.setState({\n            selectedDate: date\n        })\n    }\n    loadEditInvoiceData = () => {\n        let that = this;\n        let successFn = function (data) {\n            let invoice = data;\n            that.setState(function (prevState) {\n                let tableValues = [];\n                invoice.procedure.forEach(function (proc) {\n                    tableValues.push({\n                        ...proc.procedure_data,\n                        ...proc,\n                        selectedDoctor: proc.doctor_data,\n                        selectedDate: moment(proc.date).isValid() ? moment(proc.date) : null,\n                        _id: Math.random().toFixed(7),\n                        item_type: PROCEDURES\n                    })\n                });\n                let stocks = {...prevState.stocks};\n                invoice.inventory.forEach(function (proc) {\n\n                    if (prevState.itemBatches[proc.inventory]) {\n                        if (stocks[proc.inventory]) {\n                            let stock_quantity = stocks[proc.inventory];\n                            if (stock_quantity[proc.batch_number])\n                                stock_quantity[proc.batch_number] += proc.unit;\n                            else\n                                stock_quantity[proc.batch_number] += proc.unit;\n                        } else {\n                            let stock_quantity = {};\n                            stock_quantity[proc.batch_number] = proc.unit;\n                            stocks[proc.inventory] = stock_quantity;\n                        }\n                        prevState.itemBatches[proc.inventory].forEach(function (batchObj) {\n                            if (batchObj.batch_number == proc.batch_number)\n                                proc.selectedBatch = batchObj;\n                        });\n                    }\n                    tableValues.push({\n                        ...proc.inventory_item_data,\n                        ...proc,\n                        selectedDoctor: proc.doctor_data,\n                        _id: Math.random().toFixed(7),\n                        item_type: INVENTORY,\n\n                    });\n                });\n\n                return {\n                    tableFormValues: tableValues,\n                    selectedDate: moment(invoice.date).isValid() ? moment(invoice.date) : null,\n                    stocks: stocks\n                }\n            })\n        }\n        let errorFn = function (){\n\n        }\n        getAPI(interpolate(SINGLE_INVOICE_API,[this.props.editId]),successFn,errorFn);\n    }\n\n    loadInventoryItemList() {\n        let that = this;\n        let successFn = function (reqData) {\n            let data = reqData.results;\n            let drugItems = [];\n            let equipmentItems = [];\n            let supplesItems = [];\n\n            that.setState(function (prevState) {\n                    let stocks = {...prevState.stocks};\n                    let itemBatches = {};\n                    data.forEach(function (item) {\n                        if (item.item_type == DRUG) {\n                            drugItems.push(item);\n                            if (stocks[item.id]) {\n                                let stock_quantity = stocks[item.id]\n                                if (item.item_type_stock && item.item_type_stock.item_stock)\n                                    item.item_type_stock.item_stock.forEach(function (stock) {\n                                        if (stock_quantity[stock.batch_number])\n                                            stock_quantity[stock.batch_number] += stock.quantity;\n                                        else\n                                            stock_quantity[stock.batch_number] += stock.quantity;\n                                    });\n                            } else {\n                                let stock_quantity = {}\n                                if (item.item_type_stock && item.item_type_stock.item_stock)\n                                    item.item_type_stock.item_stock.forEach(function (stock) {\n                                        stock_quantity[stock.batch_number] = stock.quantity\n                                    });\n                                stocks[item.id] = stock_quantity;\n                            }\n                            itemBatches[item.id] = item.item_type_stock.item_stock;\n                        }\n\n                    });\n                    let items = that.state.items;\n                    items[INVENTORY] = drugItems;\n                    return {\n                        items: items,\n                        stocks: {...prevState.stocks, ...stocks},\n                        itemBatches: {...prevState.itemBatches, ...itemBatches}\n                    }\n                }, function () {\n                    if (that.props.editId) {\n                        that.loadEditInvoiceData();\n                    }\n                }\n            )\n\n        }\n        let errorFn = function () {\n        }\n        let paramsApi = {\n            page_size:1000,\n            practice: this.props.active_practiceId,\n            maintain_inventory: true,\n        }\n        if (this.state.searchItem) {\n            paramsApi.item_name = this.state.searchItem;\n        }\n\n        getAPI(INVENTORY_ITEM_API, successFn, errorFn, paramsApi);\n    }\n\n    loadProcedures() {\n        var that = this;\n        let successFn = function (data) {\n            let items = that.state.items;\n            items[PROCEDURES] = data;\n            that.setState({\n                items: items,\n            })\n        };\n        let errorFn = function () {\n        };\n\n        getAPI(interpolate(PROCEDURE_CATEGORY, [this.props.active_practiceId]), successFn, errorFn);\n    }\n\n    loadPrescriptions() {\n        var that = this;\n        let successFn = function (data) {\n\n            that.setState(function (prevState) {\n                return {\n                    items: {...prevState.items, [PRESCRIPTIONS]: data}\n                }\n            })\n        };\n        let errorFn = function () {\n        };\n        getAPI(interpolate(UNPAID_PRESCRIPTIONS, [that.props.match.params.id]), successFn, errorFn);\n    }\n\n    loadTaxes() {\n        var that = this;\n        let successFn = function (data) {\n            that.setState({\n                taxes_list: data,\n            })\n        };\n        let errorFn = function () {\n        };\n        getAPI(interpolate(TAXES, [this.props.active_practiceId]), successFn, errorFn);\n\n    }\n\n    remove = (k) => {\n        this.setState(function (prevState) {\n            let newTableFormValues = [];\n            prevState.tableFormValues.forEach(function (formValue) {\n                if (formValue._id != k)\n                    newTableFormValues.push(formValue);\n            });\n            return {\n                tableFormValues: newTableFormValues\n            }\n        });\n    }\n\n\n    add = (item, randId = Math.random().toFixed(7)) => {\n        this.setState(function (prevState) {\n            if (item.item_type == PROCEDURES) {\n                item = {\n                    ...item,\n                    id: undefined,\n                    unit_cost: item.cost,\n                    procedure: item.id,\n                    selectedDoctor: prevState.selectedDoctor ? prevState.selectedDoctor : null,\n                    selectedDate: moment(),\n                    taxes: item.taxes.map(tax => tax.id)\n                }\n            } else if (item.item_type == INVENTORY) {\n                item = {\n                    ...item,\n                    id: undefined,\n                    inventory: item.id,\n                    unit_cost: item.retail_without_tax,\n                    selectedDoctor: prevState.selectedDoctor ? prevState.selectedDoctor : null,\n                }\n            }\n            return {\n                tableFormValues: [...prevState.tableFormValues, {\n                    ...tableFormFields,\n                    ...item,\n                    id: undefined,\n                    _id: randId,\n                }]\n            }\n        });\n    };\n    selectDoctor = (doctor, id, type) => {\n        this.setState(function (prevState) {\n            let finalTableFormValues = [];\n            prevState.tableFormValues.forEach(function (formValue) {\n                if (formValue._id == id && formValue.item_type == type) {\n                    finalTableFormValues.push({...formValue, selectedDoctor: doctor})\n                } else {\n                    finalTableFormValues.push(formValue)\n                }\n            });\n            return {\n                tableFormValues: finalTableFormValues\n            }\n        })\n    }\n    selectedDate = (dateValue, id, type) => {\n        this.setState(function (prevState) {\n            let finalTableFormValues = [];\n            prevState.tableFormValues.forEach(function (formValue) {\n                if (formValue._id == id && formValue.item_type == type) {\n                    finalTableFormValues.push({...formValue, selectedDate: dateValue})\n                } else {\n                    finalTableFormValues.push(formValue)\n                }\n            });\n            return {\n                tableFormValues: finalTableFormValues\n            }\n        })\n    }\n    selectBatch = (batch, id, type) => {\n        this.setState(function (prevState) {\n            let finalTableFormValues = [];\n            prevState.tableFormValues.forEach(function (formValue) {\n                if (formValue._id == id && formValue.item_type == type) {\n                    finalTableFormValues.push({...formValue, selectedBatch: batch})\n                } else {\n                    finalTableFormValues.push(formValue)\n                }\n            });\n            return {\n                tableFormValues: finalTableFormValues\n            }\n        })\n    }\n    addPrescription = (item) => {\n        let that = this;\n        item.drugs.forEach(function (drug_item) {\n            if (drug_item.inventory.maintain_inventory)\n                that.add({...drug_item.inventory, item_type: INVENTORY, inventory: item.inventory.id, id: undefined})\n        });\n        that.setState(function (prevState) {\n            return {selectedPrescriptions: [...prevState.selectedPrescriptions, item.id]}\n        })\n    }\n    handleSubmit = (e) => {\n        let that = this;\n        e.preventDefault();\n        this.props.form.validateFields((err, values) => {\n            if (!err) {\n                that.setState({\n                    saveLoading: true\n                });\n                let reqData = {\n                    bank: '',\n                    number: '',\n                    practice: that.props.active_practiceId,\n                    return_mode: null,\n                    invoice: this.props.editInvoice.id,\n                    procedure: [],\n                    inventory: [],\n                    notes: values.notes,\n                    patient: that.props.match.params.id,\n                    staff: this.props.editInvoice.staff_data ? this.props.editInvoice.staff_data.id : null,\n                    prescription: that.state.selectedPrescriptions,\n                    date: that.state.selectedDate && moment(that.state.selectedDate).isValid() ? that.state.selectedDate.format('YYYY-MM-DD') : null,\n                    with_tax: this.state.return_with_tax ? true : false,\n                    cash_return: values.cash_return,\n                    advance_value : this.state.returnCashAvailable - values.cash_return || 0,\n                };\n                that.state.tableFormValues.forEach(function (item) {\n                    item.unit = values.unit[item._id];\n                    var id = item.id;\n                    delete (item.id);\n                    // item.taxes = values.taxes[item._id];\n                    // item.unit_cost = values.unit_cost[item._id];\n                    // item.discount = values.discount[item._id];\n                    // item.discount_type = '%';\n                    if (item.unit)\n                        switch (item.item_type) {\n                            case PROCEDURES:\n                                reqData.procedure.push({\n                                    ...item,\n                                    // \"name\": item.name,\n                                    \"unit\": item.unit,\n                                    // \"procedure\": item.procedure,\n                                    // \"default_notes\": null,\n                                    // \"is_active\": true,\n                                    // \"margin\": item.margin,\n                                    // \"taxes\": item.taxes,\n                                    // \"unit_cost\": item.unit_cost,\n                                    // \"discount\": item.discount,\n                                    // \"discount_type\": \"%\",\n                                    // \"offers\": 1,\n                                    procedure_inv: id,\n                                    // \"doctor\": item.selectedDoctor ? item.selectedDoctor.id : null,\n                                    // id:item.id\n                                });\n                                break;\n                            case INVENTORY:\n                                reqData.inventory.push({\n                                    ...item,\n                                    // \"inventory\": item.inventory,\n                                    // \"name\": item.name,\n                                    \"unit\": item.unit,\n                                    // \"taxes\": item.taxes,\n                                    // \"unit_cost\": item.unit_cost,\n                                    // \"discount\": item.discount,\n                                    // \"discount_type\": \"%\",\n                                    // \"offers\": null,\n                                    inventory_inv: id,\n                                    // \"doctor\": item.selectedDoctor ? item.selectedDoctor.id : null,\n                                    // \"instruction\": item.instruction,\n                                    // \"is_active\": true,\n                                    // batch_number: item.selectedBatch ? item.selectedBatch.batch_number : null,\n                                    // id: item.id\n                                });\n                                break;\n                            default:\n                                return null;\n                        }\n                });\n                let successFn = function (data) {\n                    that.setState({\n                        saveLoading: false\n                    });\n                    displayMessage(\"Inventory updated successfully\");\n                    that.props.loadData();\n                    let url = '/patient/' + that.props.match.params.id + '/billing/invoices';\n                    that.props.history.replace(url);\n                }\n                let errorFn = function () {\n                    that.setState({\n                        saveLoading: false\n                    });\n                }\n\n                postAPI(INVOICE_RETURN_API, reqData, successFn, errorFn);\n\n            }\n        });\n    }\n    addItemThroughQR = (value) => {\n        let that = this;\n        that.setState({\n            loadingQr: true,\n        })\n        let qrSplitted = value.split('*');\n        let successFn = function (data) {\n\n            let item = data;\n            let {setFieldsValue, getFieldsValue, getFieldValue} = that.props.form;\n            let randomId = Math.random().toFixed(7);\n            let flag = true\n            that.state.tableFormValues.forEach(function (row) {\n                if (row.name == qrSplitted[0]) {\n                    let _id = row._id;\n                    let batch = row.selectedBatch.batch_number;\n                    let quantity = getFieldValue(`unit[${_id}]`);\n                    if (batch == qrSplitted[1]) {\n                        flag = false;\n                        setFieldsValue({\n                            [`unit[${_id}]`]: quantity + 1\n                        })\n                    }\n                }\n            });\n            if (flag) {\n                let unit_cost = null;\n                if (data.item_type_stock && data.item_type_stock.item_stock)\n                    data.item_type_stock.item_stock.forEach(function (stock) {\n                        if (stock.batch_number == qrSplitted[1]) {\n                            data.selectedBatch = stock;\n                            unit_cost = stock.unit_cost\n                        }\n                    })\n                that.add({...data, item_type: INVENTORY}, randomId);\n\n                setFieldsValue({\n                    [`unit_cost[${randomId}]`]: unit_cost,\n                })\n            }\n            that.setState(function (prevState) {\n\n                return {\n                    loadingQr: false,\n                    qrValue: ''\n                }\n            });\n        }\n        let errorFn = function () {\n\n        }\n        getAPI(SEARCH_THROUGH_QR, successFn, errorFn, {qr: value, form: 'Invoice'})\n    }\n    setQrValue = (e) => {\n        let value = e.target.value;\n        this.setState({\n            qrValue: value\n        })\n    }\n    searchValues = (e) => {\n        let value = e.target.value;\n        this.setState({\n            searchItem: value,\n        }, function () {\n            this.loadInventoryItemList();\n        })\n\n    }\n    changeNetPrice = (id) => {\n        let that = this;\n        const {getFieldsValue, setFields} = this.props.form;\n        setTimeout(function () {\n            let values = getFieldsValue();\n            if (values.total_unit_cost[id]) {\n\n                that.setState(function (prevState) {\n                    let newTableValues = []\n                    prevState.tableFormValues.forEach(function (tableObj) {\n                        if (tableObj._id == id) {\n                            let totalTaxAmount = 0;\n                            values.taxes[id].forEach(function (taxid) {\n                                prevState.taxes_list.forEach(function (taxObj) {\n                                    if (taxObj.id == taxid)\n                                        totalTaxAmount += taxObj.tax_value;\n                                })\n                            });\n                            let retailPrice = values.total_unit_cost[id] / (1 + totalTaxAmount * 0.01);\n                            newTableValues.push({...tableObj, unit_cost: retailPrice})\n                        } else {\n                            newTableValues.push(tableObj);\n                        }\n                    })\n                    return {tableFormValues: newTableValues}\n                })\n            } else {\n                that.setState({\n                    retail_price: 0\n                })\n            }\n        }, 1000);\n\n    }\n\n    onChangeHandle = (e) => {\n        let that = this;\n        this.setState({\n            return_with_tax: e.target.checked\n        },function(){\n            that.calculateReturnCashAvailable();\n        })\n    }\n\n    calculateReturnCashAvailable = () => {\n        let that = this;\n        let totalAmountPaid = this.state.editInvoice.payments.reduce((a, b) => a + b.pay_amount, 0);\n        let totalInvoiceAmount = this.state.editInvoice.total;\n        let pendingPayment = totalInvoiceAmount - totalAmountPaid;\n        let worthOfReturningItems = 0;\n        const {getFieldsValue} = this.props.form;\n        setTimeout(function () {\n            let values = getFieldsValue();\n            let taxAllowed = that.state.return_with_tax;\n            that.state.tableFormValues.forEach(function (item) {\n                let units = values.unit[item._id];\n                if (item.item_type == INVENTORY) {\n                    worthOfReturningItems += units * item.unit_cost;\n                    worthOfReturningItems += (taxAllowed ? (item.tax_value / item.unit) * units : null);\n                } else if (item.item_type == PRESCRIPTIONS) {\n                    worthOfReturningItems += units * item.unit_cost;\n                    worthOfReturningItems += (taxAllowed ? (item.tax_value / item.unit) * units : null);\n                } else if (item.item_type == PROCEDURES) {\n                    worthOfReturningItems += units * item.unit_cost;\n                    worthOfReturningItems += (taxAllowed ? (item.tax_value / item.unit) * units : null);\n                }\n            });\n            that.setState({\n                returnCashAvailable: (worthOfReturningItems > pendingPayment ? worthOfReturningItems - pendingPayment : 0).toFixed(2)\n            });\n        }, 500);\n\n\n    }\n\n    render() {\n        let that = this;\n        const {getFieldDecorator, getFieldValue, getFieldsValue} = this.props.form;\n        const formItemLayout = {\n            labelCol: {\n                xs: {span: 24},\n                sm: {span: 4},\n            },\n            wrapperCol: {\n                xs: {span: 24},\n                sm: {span: 24},\n                md: {span: 24},\n                lg: {span: 24},\n                xl: {span: 24},\n            },\n        };\n\n        const formItemLayoutWithOutLabel = {\n            labelCol: {\n                xs: {span: 24},\n                sm: {span: 24},\n            },\n            wrapperCol: {\n                xs: {span: 24},\n                sm: {span: 24},\n            },\n        };\n        getFieldDecorator('keys', {initialValue: []});\n        let consumeRow = [{\n            title: 'Item Name',\n            key: 'item_name',\n            dataIndex: 'name',\n            render: function (name, record) {\n                switch (record.item_type) {\n                    case PROCEDURES:\n                        return <Form.Item\n                            key={`name[${record._id}]`}\n                            {...formItemLayout}>\n                            {getFieldDecorator(`name[${record._id}]`, {\n                                validateTrigger: ['onChange', 'onBlur'],\n                                initialValue: name,\n                                rules: [{\n                                    required: true,\n                                    message: \"This field is required.\",\n                                }],\n                            })(\n                                <Input min={0} placeholder=\"Item name\" size={'small'} disabled/>\n                            )}\n                            <span>by &nbsp;&nbsp;</span>\n                            <Dropdown placement=\"topCenter\" disabled overlay={<Menu>\n                                {that.state.practiceDoctors.map(doctor =>\n                                    <Menu.Item key=\"0\">\n                                        <a onClick={() => that.selectDoctor(doctor, record._id, PROCEDURES)}>{doctor.user.first_name}</a>\n                                    </Menu.Item>)}\n                            </Menu>} trigger={['click']}>\n                                <a className=\"ant-dropdown-link\" href=\"#\">\n                                    <b>\n                                        {record.selectedDoctor.user ? record.selectedDoctor.user.first_name : 'No DOCTORS Found'}\n                                    </b>\n                                </a>\n                            </Dropdown>\n                            <span> &nbsp;&nbsp;on&nbsp;&nbsp;</span>\n                            <DatePicker value={record.selectedDate}\n                                        disabled\n                                        size={'small'}\n                                        onChange={(value) => that.selectedDate(value, record._id, PROCEDURES)}\n                                        format={\"DD-MM-YYYY\"}/>\n                        </Form.Item>;\n                    case PRESCRIPTIONS:\n                        return <b>{record.name}</b>;\n                    case INVENTORY:\n                        return <div>\n                            {record.name}\n                            <span><br/>by &nbsp;&nbsp;</span>\n                            <Dropdown placement=\"topCenter\" disabled overlay={<Menu>\n                                {that.state.practiceDoctors.map(doctor =>\n                                    <Menu.Item key={doctor.id}>\n                                        <a onClick={() => that.selectDoctor(doctor, record._id, PROCEDURES)}>{doctor.user.first_name}</a>\n                                    </Menu.Item>)}\n                            </Menu>} trigger={['click']}>\n                                <a className=\"ant-dropdown-link\" href=\"#\">\n                                    <b>\n                                        {record.selectedDoctor && record.selectedDoctor.user ? record.selectedDoctor.user.first_name : '+Add Doctor'}\n                                    </b>\n                                </a>\n                            </Dropdown>\n                            <span><br/>from batch &nbsp;&nbsp;</span>\n                            <Dropdown placement=\"topCenter\" disabled overlay={<Menu>\n                                {that.state.itemBatches[record.inventory] && that.state.itemBatches[record.inventory].map((batch, index) =>\n                                    (moment() >= moment(batch.expiry_date) ? <Menu.Item key={index} disabled={true}>\n                                        {batch.batch_number}&nbsp;({batch.quantity}) &nbsp;&nbsp;{batch.expiry_date}\n                                    </Menu.Item> : <Menu.Item key={index}>\n                                        <a onClick={() => that.selectBatch(batch, record._id, INVENTORY)}>{batch.batch_number}&nbsp;({batch.quantity}) &nbsp;&nbsp;{batch.expiry_date}</a>\n                                    </Menu.Item>))}\n                            </Menu>} trigger={['click']}>\n                                <a className=\"ant-dropdown-link\" href=\"#\">\n                                    <b>\n                                        {record.selectedBatch ? record.selectedBatch.batch_number : 'Select Batch'}\n                                    </b>\n                                </a>\n                            </Dropdown>\n                        </div>\n                    default:\n                        return null;\n                }\n            }\n        }];\n        consumeRow = consumeRow.concat([{\n            title: 'Returning Unit',\n            key: 'unit',\n            width: 100,\n            dataIndex: 'unit',\n            render: (item, record) => (record.item_type == INVENTORY ?\n                    <Form.Item\n                        key={`unit[${record._id}]`}\n                        {...formItemLayout}>\n                        {getFieldDecorator(`unit[${record._id}]`, {\n                            validateTrigger: ['onChange', 'onBlur'],\n                            initialValue: 0,\n                        })(\n                            <InputNumber max={(record.unit)}\n                                         onChange={this.calculateReturnCashAvailable}\n                                         min={0}\n                                         placeholder=\"units\" size={'small'}\n                                         disabled={!(record.selectedBatch && that.state.stocks[record.inventory] && that.state.stocks[record.inventory][record.selectedBatch.batch_number])}/>\n                        )}\n                        <span className=\"ant-form-text\">Items: {record.unit}</span>\n                    </Form.Item>\n\n                    : <Form.Item\n                        key={`unit[${record._id}]`}\n                        {...formItemLayout}>\n                        {getFieldDecorator(`unit[${record._id}]`, {\n                            initialValue: 0,\n                            validateTrigger: ['onChange', 'onBlur'],\n                        })(\n                            <InputNumber min={0} max={record.unit} placeholder=\"unit\" size={'small'}\n                                         onChange={this.calculateReturnCashAvailable}/>\n                        )}\n                        <span className=\"ant-form-text\">Items: {record.unit}</span>\n                    </Form.Item>\n            )\n        }, {\n            title: 'Unit Cost',\n            key: 'unit_cost',\n            width: 100,\n            dataIndex: 'unit_cost',\n            render: (item, record) => item ? item.toFixed(2) : null\n        }, {\n            title: 'discount %',\n            key: 'discount',\n            width: 100,\n            dataIndex: 'discount',\n            render: (item, record) => <Form.Item\n                key={`discount[${record._id}]`}\n                {...formItemLayout}>\n                {getFieldDecorator(`discount[${record._id}]`, {\n                    initialValue: record.discount,\n                    validateTrigger: ['onChange', 'onBlur'],\n\n                })(\n                    <InputNumber min={0} max={100} placeholder=\"discount\" size={'small'} disabled={true}/>\n                )}\n            </Form.Item>\n        }, {\n            title: 'Taxes',\n            key: 'taxes',\n            dataIndex: 'taxes',\n            render: (item, record) => <Form.Item\n                key={`taxes[${record._id}]`}\n                {...formItemLayout}>\n                {getFieldDecorator(`taxes[${record._id}]`, {\n                    initialValue: record.taxes || [],\n                    validateTrigger: ['onChange', 'onBlur'],\n                })(\n                    <Select placeholder=\"Taxes\" size={'small'} mode={\"multiple\"}\n                            disabled={true}\n                            style={{width: 150}}\n                            onChange={() => that.changeNetPrice(record._id)}>\n                        {this.state.taxes_list && this.state.taxes_list.map((tax) => <Select.Option\n                            value={tax.id}>{tax.name}@{tax.tax_value}%</Select.Option>)}\n                    </Select>\n                )}\n            </Form.Item>\n        }, {\n            title: 'Total Unit Cost',\n            key: 'total',\n            width: 100,\n            dataIndex: 'total',\n            render: (item, record) => (record.unit ? (record.total/record.unit).toFixed(2) : record.total.toFixed(2))\n        }]);\n\n        return <div>\n            <Spin spinning={this.state.saveLoading} tip=\"Saving Invoice...\">\n                <Row gutter={16}>\n                    <Col span={20}>\n                        <Card\n                            title={this.props.editId ? \"Return Invoice (INV \" + this.props.editId + \")\" : \"Add Invoice\"}\n                            bodyStyle={{padding: 0}}>\n                            <Row gutter={16}>\n                                <Col span={24}>\n                                    <Form onSubmit={this.handleSubmit} layout=\"inline\">\n                                        <Table pagination={false}\n                                               bordered={true}\n                                               dataSource={this.state.tableFormValues}\n                                               columns={consumeRow}/>\n                                        <Affix offsetBottom={0}>\n                                            <Card>\n                                                <Row gutter={16}>\n                                                    <Col span={6}>\n\n                                                        <span> &nbsp;&nbsp;on&nbsp;&nbsp;</span>\n                                                        <DatePicker value={this.state.selectedDate}\n                                                                    disabled\n                                                                    onChange={(value) => this.selectedDefaultDate(value)}\n                                                                    format={\"DD-MM-YYYY\"}\n                                                                    allowClear={false}/>\n                                                        <br/>\n                                                        <br/>\n                                                        <Checkbox onChange={this.onChangeHandle}\n                                                                  defaultChecked={this.state.return_with_tax}>\n                                                            Return With Tax\n                                                        </Checkbox>\n                                                    </Col>\n                                                    <Col span={8}>\n                                                        <Form.Item label={\"Returned Cash \"} >\n                                                            {getFieldDecorator('cash_return',\n                                                            )\n                                                            (<InputNumber min={0} max={this.state.returnCashAvailable}\n                                                                          placeholder={\"Cash Returned\"}/>)\n                                                            }\n                                                            <span><br/>Max Cash Return Allowed (INR) {this.state.returnCashAvailable}</span>\n                                                        </Form.Item>\n                                                    </Col>\n                                                    <Col span={10}>\n                                                        <Form.Item\n                                                            label={\"Notes\"}\n                                                            key={`notes`}\n                                                            >\n                                                            {getFieldDecorator(`notes`, {\n                                                                initialValue: this.state.tableFormValues.notes,\n                                                                validateTrigger: ['onChange', 'onBlur'],\n                                                            })(\n                                                                <Input.TextArea row={2} placeholder=\"Notes...\" size={'small'} style={{width:'100%'}}/>\n                                                            )}\n                                                        </Form.Item>\n                                                        <Form.Item {...formItemLayoutWithOutLabel}\n                                                                   style={{marginBottom: 0, float: 'right'}}>\n                                                            <Button type=\"primary\" htmlType=\"submit\"\n                                                                    style={{margin: 5}}>Save Return Invoice</Button>\n                                                            {that.props.history ?\n                                                                <Button style={{margin: 5, float: 'right'}}\n                                                                        onClick={() => that.props.history.goBack()}>\n                                                                    Cancel\n                                                                </Button> : null}\n                                                        </Form.Item>\n\n                                                    </Col>\n                                                </Row>\n\n\n                                            </Card>\n                                        </Affix>\n                                    </Form>\n                                </Col>\n                            </Row>\n                        </Card>\n                    </Col>\n                    <Col span={4}>\n                        <Divider>Payments Done</Divider>\n                        <List dataSource={this.state.editInvoice.payments}\n                              renderItem={payment => <Card title={payment.payment_id} style={{marginBottom: 10}}\n                                                           bodyStyle={{padding: 5}}>\n                                  <p>Paid (INR)<span\n                                      style={{float: 'right', fontWeight: 600}}> {payment.pay_amount.toFixed(2)}</span>\n                                  </p>\n                              </Card>}/>\n                    </Col>\n                </Row>\n            </Spin>\n        </div>\n\n    }\n}\n\nexport default Form.create()(AddReturnInvoice);\n","import React from \"react\";\nimport {Button, Card, Form, Icon, Input, Modal} from \"antd\";\nimport {CANCELINVOICE_RESENT_OTP, CANCELINVOICE_VERIFY_OTP} from \"../../../constants/api\";\nimport {getAPI, postAPI} from \"../../../utils/common\";\nclass InvoiceReturnModal extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            returnIncoiceVisible: this.props.returnIncoiceVisible,\n            otpSent:this.props.otpSent,\n\n        };\n    }\n\n    handleSubmitReturnInvoice = (e) => {\n        let that = this;\n        e.preventDefault();\n        this.props.form.validateFields((err, values) => {\n            if (!err) {\n                let reqData = {\n                    ...values,\n                    practice: this.props.active_practiceId,\n                }\n                let successFn = function (data) {\n                    that.setState({\n                        returnIncoiceVisible: false,\n                    });\n                    that.returnInvoiceData(that.props.editInvoice)\n                    that.props.returnInvoiceClose();\n                };\n                let errorFn = function () {\n\n                };\n                postAPI(CANCELINVOICE_VERIFY_OTP, reqData, successFn, errorFn);\n            }\n        });\n    };\n\n    returnInvoiceData = (record) => {\n        let that = this;\n        // let id = this.props.match.params.id;\n        this.setState({\n            editInvoice: record,\n        }, function () {\n            that.props.history.push(\"/patient/\" + record.patient_data.id + \"/billing/invoices/return/\")\n        });\n    }\n\n\n\n    sendOTP() {\n        let that = this;\n        let successFn = function (data) {\n\n        };\n        let errorFn = function () {\n\n        };\n        getAPI(CANCELINVOICE_RESENT_OTP, successFn, errorFn);\n    }\n\n    render() {\n        let that = this;\n        const {getFieldDecorator} = that.props.form;\n        return(\n            <Modal\n                visible={(this.state.returnIncoiceVisible && that.props.editInvoice && that.props.editInvoice.id == that.props.invoice.id)}\n                title=\"Return Invoice\"\n                footer={null}\n                onOk={that.props.handleSubmitReturnInvoice}\n                onCancel={that.props.returnInvoiceClose}\n            >\n                <Form>\n                    <Form.Item>\n                        {getFieldDecorator('otp', {\n                            rules: [{required: true, message: 'Please input Otp!'}],\n                        })(\n                            <Input prefix={<Icon type=\"user\" style={{color: 'rgba(0,0,0,.25)'}}/>}\n                                   placeholder=\"Otp\"\n                            />,\n                        )}\n                    </Form.Item>\n                    <Form.Item>\n                        {that.props.otpSent ? <a style={{float: 'right'}} type=\"primary\" onClick={that.sendOTP}>\n                            Resend Otp ?\n                        </a> : null}\n                        <Button size=\"small\" type=\"primary\" htmlType=\"submit\" onClick={that.handleSubmitReturnInvoice}>\n                            Submit\n                        </Button>&nbsp;\n                        <Button size=\"small\" onClick={that.props.returnInvoiceClose}>\n                            Close\n                        </Button>\n                    </Form.Item>\n                </Form>\n            </Modal>\n        )\n    }\n\n\n}\nexport default Form.create()(InvoiceReturnModal);\n","import React from \"react\";\nimport {Button, Card, Form, Icon, Input, Modal} from \"antd\";\nimport moment from \"moment\";\nimport {CANCELINVOICE_GENERATE_OTP, CANCELINVOICE_RESENT_OTP, CANCELINVOICE_VERIFY_OTP} from \"../../../constants/api\";\nimport {getAPI, postAPI} from \"../../../utils/common\";\nimport {OTP_DELAY_TIME} from \"../../../constants/dataKeys\";\nclass EditReturnModal extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            otpSent:this.props.otpSent,\n            returnIncoiceVisible: this.props.returnIncoiceVisible,\n            editIncoiceVisible: this.props.editIncoiceVisible,\n\n\n        };\n    }\n\n    handleSubmitEditInvoice = (e) => {\n        let that = this;\n        e.preventDefault();\n        this.props.form.validateFields((err, values) => {\n            if (!err) {\n                let reqData = {\n                    ...values,\n                    practice: this.props.active_practiceId,\n                }\n                let successFn = function (data) {\n                    that.setState({\n                        editIncoiceVisible: false,\n                    });\n                    that.editInvoiceData(that.props.editInvoice);\n                    that.props.editInvoiceClose();\n                };\n                let errorFn = function () {\n\n                };\n                postAPI(CANCELINVOICE_VERIFY_OTP, reqData, successFn, errorFn);\n            }\n        });\n    };\n\n    editInvoiceData = (record) => {\n        let that = this;\n        // let id = this.props.match.params.id;\n        this.setState({\n            editInvoice: record,\n        }, function () {\n            that.props.history.push(\"/patient/\" + record.patient_data.id + \"/billing/invoices/edit/\")\n        });\n    };\n\n\n    sendOTP() {\n        let that = this;\n        let successFn = function (data) {\n\n        };\n        let errorFn = function () {\n\n        };\n        getAPI(CANCELINVOICE_RESENT_OTP, successFn, errorFn);\n    }\n\n    render() {\n        let that = this;\n        const {getFieldDecorator} = that.props.form;\n        return(\n            <Modal\n                visible={(that.state.editIncoiceVisible && that.props.editInvoice && that.props.editInvoice.id == that.props.invoice.id)}\n                title=\"Edit Invoice\"\n                footer={null}\n                onOk={that.handleSubmitEditInvoice}\n                onCancel={that.props.editInvoiceClose}\n                \n            >\n                <Form>\n                    <Form.Item>\n                        {getFieldDecorator('otp', {\n                            rules: [{required: true, message: 'Please input Otp!'}],\n                        })(\n                            <Input prefix={<Icon type=\"user\" style={{color: 'rgba(0,0,0,.25)'}}/>}\n                                   placeholder=\"Otp\"\n                            />,\n                        )}\n                    </Form.Item>\n                    <Form.Item>\n                        {that.props.otpSent ? <a style={{float: 'right'}} type=\"primary\" onClick={that.sendOTP}>\n                            Resend Otp ?\n                        </a> : null}\n                        <Button size=\"small\" type=\"primary\" htmlType=\"submit\" onClick={that.handleSubmitEditInvoice}>\n                            Submit\n                        </Button>&nbsp;\n                        <Button size=\"small\" onClick={that.props.editInvoiceClose}>\n                            Close\n                        </Button>\n                    </Form.Item>\n                </Form>\n            </Modal>\n        )\n    }\n\n\n}\nexport default Form.create()(EditReturnModal);\n","import React from \"react\";\nimport {Button, Card, Form, Icon, Input, Modal} from \"antd\";\nimport {\n    CANCELINVOICE_RESENT_OTP,\n    CANCELINVOICE_VERIFY_OTP,\n    SINGLE_INVOICES_API\n} from \"../../../constants/api\";\nimport {displayMessage, getAPI, interpolate, postAPI, putAPI} from \"../../../utils/common\";\nimport {SUCCESS_MSG_TYPE, OTP_DELAY_TIME} from \"../../../constants/dataKeys\";\nimport moment from \"moment\";\nimport { REQUIRED_FIELD_MESSAGE } from \"../../../constants/messages\";\n\nconst { TextArea } = Input;\nclass CancelReturnModal extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            cancelIncoiceVisible: this.props.cancelIncoiceVisible,\n            otpSent:this.props.otpSent,\n            otpField:false\n\n        };\n    }\n    componentDidMount(){\n        let that =this;\n        let created_time = moment().diff(that.props.editInvoice.created_at, 'minutes');\n        if(created_time>OTP_DELAY_TIME){\n            that.setState({\n                otpField:true\n            })\n        }\n       \n    }\n\n    handleSubmitCancelInvoice = (e) => {\n        let that = this;\n        let {otpField} =that.state;\n        e.preventDefault();\n        this.props.form.validateFields((err, values) => {\n            if (!err) {\n                let reqData = {\n                    ...values,\n                    practice: this.props.active_practiceId,\n                }\n                let successFn = function (data) {\n                    that.setState({\n                        cancelIncoiceVisible: false,\n                    });\n                    that.deleteInvoice(that.props.editInvoice.patient, that.props.editInvoice.id, values.cancel_note)\n                };\n                let errorFn = function () {\n\n                };\n                if(otpField){\n                    postAPI(CANCELINVOICE_VERIFY_OTP, reqData, successFn, errorFn);\n                }else{\n                    that.deleteInvoice(that.props.editInvoice.patient, that.props.editInvoice.id, values.cancel_note)\n                }\n               \n            }\n        });\n    }\n\n\n    deleteInvoice(patient, invoice, cancel_note) {\n        let that = this;\n        let reqData = {\n            patient: patient, \n            is_cancelled: true,\n            cancel_note:cancel_note\n        };\n        let successFn = function (data) {\n            that.props.cancelInvoiceClose();\n            displayMessage(SUCCESS_MSG_TYPE, \"Invoice cancelled successfully\")\n            that.props.loadInvoices();\n        }\n        let errorFn = function () {\n        }\n        putAPI(interpolate(SINGLE_INVOICES_API, [invoice]), reqData, successFn, errorFn);\n    }\n\n   \n\n    sendOTP() {\n        let that = this;\n        let successFn = function (data) {\n\n        };\n        let errorFn = function () {\n\n        };\n        getAPI(CANCELINVOICE_RESENT_OTP, successFn, errorFn);\n    }\n\n    render() {\n        let that = this;\n        let {otpField} =this.state;\n        \n        const {getFieldDecorator} = that.props.form;\n        return(\n            <Modal\n                visible={that.state.cancelIncoiceVisible}\n                title=\"Cancel Invoice\"\n                footer={null}\n                onOk={that.handleSubmitCancelInvoice}\n                onCancel={that.props.cancelInvoiceClose}\n            >\n                <Form>\n                    <Form.Item key=\"cancel_notes\">\n                        {getFieldDecorator('cancel_note',{\n                            rules:[{required:true, message:REQUIRED_FIELD_MESSAGE}],\n                        })(\n                            <TextArea placeholder=\"cancel notes\"/>\n                        )}\n                    </Form.Item>\n                    { otpField &&\n                        <Form.Item key=\"cancelOtp\">\n                            {getFieldDecorator('otp', {\n                                rules: [{required: true, message: 'Please input Otp!'}],\n                            })(\n                                <Input prefix={<Icon type=\"user\" style={{color: 'rgba(0,0,0,.25)'}}/>}\n                                    placeholder=\"Otp\"\n                                />\n                            )}\n                        </Form.Item>\n                    }\n                    <Form.Item>\n                        {that.props.otpSent ? <a style={{float: 'right'}} type=\"primary\" onClick={that.sendOTP}>\n                            Resend Otp ?\n                        </a> : null}\n                        <Button size=\"small\" type=\"primary\" htmlType=\"submit\" onClick={that.handleSubmitCancelInvoice}>\n                            Submit\n                        </Button>&nbsp;\n                        <Button size=\"small\" onClick={that.cancelInvoiceClose}>\n                            Close\n                        </Button>\n                    </Form.Item>\n                </Form>\n            </Modal>\n        )\n    }\n\n\n}\nexport default Form.create()(CancelReturnModal);\n","import React from \"react\";\nimport {\n    Affix,\n    Alert,\n    Button,\n    Card,\n    Col,\n    Divider,\n    Dropdown,\n    Icon,\n    Menu,\n    Modal,\n    Row,\n    Spin,\n    Statistic,\n    Table,\n    Tag,\n    Tooltip,\n    Form, Input\n} from \"antd\";\nimport {displayMessage, getAPI, interpolate, putAPI, postAPI} from \"../../../utils/common\";\nimport {\n    DRUG_CATALOG,\n    INVOICE_PDF_API,\n    INVOICES_API,\n    PROCEDURE_CATEGORY,\n    SINGLE_INVOICES_API,\n    TAXES,\n    CANCELINVOICE_GENERATE_OTP,\n    CANCELINVOICE_VERIFY_OTP,\n    CANCELINVOICE_RESENT_OTP, PAYMENT_PDF,\n} from \"../../../constants/api\";\nimport moment from \"moment\";\nimport {Route, Switch} from \"react-router\";\nimport AddInvoicedynamic from \"./AddInvoicedynamic\";\nimport InfiniteFeedLoaderButton from \"../../common/InfiniteFeedLoaderButton\";\nimport {Link, Redirect} from \"react-router-dom\";\nimport {BACKEND_BASE_URL} from \"../../../config/connect\";\nimport {SUCCESS_MSG_TYPE, OTP_DELAY_TIME} from \"../../../constants/dataKeys\";\nimport AddReturnInvoice from \"./AddReturnInvoice\";\nimport InvoiceReturnModal from \"./InvoiceReturnModal\";\nimport EditReturnModal from \"./EditReturnModal\";\nimport CancelReturnModal from \"./CancelReturnModal\";\nimport * as _ from \"lodash\";\nimport {sendMail} from \"../../../utils/clinicUtils\";\n\nconst confirm = Modal.confirm;\n\nclass PatientInvoices extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            currentPatient: this.props.currentPatient,\n            active_practiceId: this.props.active_practiceId,\n            invoices: [],\n            drug_catalog: null,\n            procedure_category: null,\n            taxes_list: null,\n            editInvoice: null,\n            loading: true,\n            returnIncoiceVisible: false,\n            editIncoiceVisible: false,\n            cancelIncoiceVisible: false,\n        }\n        this.loadInvoices = this.loadInvoices.bind(this);\n        this.loadDrugCatalog = this.loadDrugCatalog.bind(this);\n        this.loadProcedureCategory = this.loadProcedureCategory.bind(this);\n        this.loadTaxes = this.loadTaxes.bind(this);\n    }\n\n    componentDidMount() {\n        this.loadInvoices();\n    }\n\n    loadInvoices(page = 1) {\n        let that = this;\n        if (that.props.refreshWallet && page == 1) {\n            that.props.refreshWallet();\n        }\n        that.setState({\n            loading: true\n        });\n        let successFn = function (data) {\n            if (data.current == 1) {\n                that.setState({\n                    total: data.count,\n                    invoices: data.results,\n                    loading: false,\n                    loadMoreInvoice: data.next\n                })\n            } else {\n                that.setState(function (prevState) {\n                    return {\n                        total: data.count,\n                        invoices: [...prevState.invoices, ...data.results],\n                        loading: false,\n                        loadMoreInvoice: data.next\n                    }\n                })\n            }\n        }\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            })\n\n        }\n        let apiParams = {\n            page: page,\n            practice: this.props.active_practiceId,\n            summary: true\n        };\n        if (this.props.match.params.id) {\n            apiParams.patient = this.props.match.params.id;\n        }\n        // if (this.props.showAllClinic && this.props.match.params.id) {\n        //     delete (apiParams.practice)\n        // }\n        getAPI(INVOICES_API, successFn, errorFn, apiParams);\n    }\n\n    loadDrugCatalog() {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                drug_catalog: data,\n            })\n        }\n        let errorFn = function () {\n\n        }\n        getAPI(interpolate(DRUG_CATALOG, [this.props.active_practiceId]), successFn, errorFn)\n    }\n\n    loadProcedureCategory() {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                procedure_category: data,\n            })\n        }\n        let errorFn = function () {\n\n\n        }\n        getAPI(interpolate(PROCEDURE_CATEGORY, [this.props.active_practiceId]), successFn, errorFn);\n    }\n\n    loadTaxes() {\n        var that = this;\n        let successFn = function (data) {\n            that.setState({\n                taxes_list: data,\n            })\n        };\n        let errorFn = function () {\n        };\n        getAPI(interpolate(TAXES, [this.props.active_practiceId]), successFn, errorFn);\n\n    }\n\n\n    loadPDF = (id) => {\n        let that = this;\n        let successFn = function (data) {\n            if (data.report)\n                window.open(BACKEND_BASE_URL + data.report);\n        }\n        let errorFn = function () {\n\n        }\n        getAPI(interpolate(INVOICE_PDF_API, [id]), successFn, errorFn);\n    }\n\n\n    returnModelOpen = (record) => {\n        let that = this;\n        // let created_time = moment().diff(record.created_at, 'minutes');\n        // if (created_time > OTP_DELAY_TIME) {\n            that.setState({\n                returnIncoiceVisible: true,\n                editIncoiceVisible: false,\n                cancelIncoiceVisible: false,\n                editInvoice: record,\n            });\n\n            let reqData = {\n                practice: this.props.active_practiceId,\n                type: 'Invoice' + ':' + record.invoice_id + ' ' + 'Return'\n            };\n            let successFn = function (data) {\n                that.setState({\n                    otpSent: true,\n                    patientId: record.patient,\n                    invoiceId: record.id\n                })\n            };\n            let errorFn = function () {\n\n            };\n            postAPI(CANCELINVOICE_GENERATE_OTP, reqData, successFn, errorFn);\n        // } else {\n        //     this.setState({\n        //         editInvoice: record,\n        //     }, function () {\n        //         that.props.history.push(\"/patient/\" + record.patient_data.id + \"/billing/invoices/return/\")\n        //     });\n        // }\n    };\n\n\n    editModelOpen(record) {\n        let that = this;\n        let created_time = moment().diff(record.created_at, 'minutes');\n\n        \n            that.setState({\n                editIncoiceVisible: true,\n                cancelIncoiceVisible: false,\n                returnIncoiceVisible: false,\n                editInvoice: record,\n            });\n\n            let reqData = {\n                practice: this.props.active_practiceId,\n                type: 'Invoice' + ':' + record.invoice_id + ' ' + 'Edit'\n            }\n            let successFn = function (data) {\n                that.setState({\n                    otpSent: true,\n                    patientId: record.patient,\n                    invoiceId: record.id\n                })\n            }\n            let errorFn = function () {\n\n            };\n            if (created_time > OTP_DELAY_TIME) {\n                postAPI(CANCELINVOICE_GENERATE_OTP, reqData, successFn, errorFn);\n\n            } \n\n    };\n\n\n    cancelModalOpen = (record) => {\n        let that = this;\n        let created_time = moment().diff(record.created_at, 'minutes');\n\n        \n\n            that.setState({\n                cancelIncoiceVisible: true,\n                editIncoiceVisible: false,\n                returnIncoiceVisible: false,\n                editInvoice: record\n            });\n\n            let reqData = {\n                practice: this.props.active_practiceId,\n                type: 'Invoice' + ':' + record.invoice_id + ' ' + ' Cancellation'\n            }\n            let successFn = function (data) {\n                that.setState({\n                    otpSent: true,\n                    patientId: record.patient,\n                    invoiceId: record.id\n                })\n            }\n            let errorFn = function () {\n\n            };\n            if (created_time > OTP_DELAY_TIME) {\n                postAPI(CANCELINVOICE_GENERATE_OTP, reqData, successFn, errorFn);\n\n            } \n    };\n\n    deleteInvoice(patient, invoice) {\n        let that = this;\n        let reqData = {patient: patient, is_cancelled: true};\n        let successFn = function (data) {\n            displayMessage(SUCCESS_MSG_TYPE, \"Invoice cancelled successfully\")\n            that.loadInvoices();\n        }\n        let errorFn = function () {\n        }\n        putAPI(interpolate(SINGLE_INVOICES_API, [invoice]), reqData, successFn, errorFn);\n    }\n\n    editInvoiceClose = () => {\n        this.setState({\n            editIncoiceVisible: false\n        })\n    };\n    returnInvoiceClose = () => {\n        this.setState({\n            returnIncoiceVisible: false\n        })\n    };\n    cancelInvoiceClose = () => {\n        this.setState({\n            cancelIncoiceVisible: false\n        })\n    };\n\n\n    updateFormValue =(type,value)=>{\n        this.setState({\n            [type]: value\n        })\n    };\n\n    mailModalOpen =() =>{\n        this.setState({\n            visibleMail:true\n        })\n    };\n\n    mailModalClose =() =>{\n        this.setState({\n            visibleMail:false\n        })\n    };\n\n    sendPatientMail =(invoice)=>{\n        this.mailModalOpen()\n        this.setState({\n            patientName:_.get(invoice,'patient_data.user.first_name'),\n            paymentId:_.get(invoice,'id'),\n            mail_to:_.get(invoice,'patient_data.user.email')\n        })\n\n    };\n\n    sendMailToPatient =()=>{\n        let {mail_to ,paymentId } = this.state;\n        let apiParams ={\n            mail_to:mail_to,\n        }\n        sendMail(interpolate(INVOICE_PDF_API,[paymentId]),apiParams)\n        this.mailModalClose();\n    }\n\n\n\n    render() {\n        let that = this;\n        const drugs = {}\n        if (this.state.drug_catalog) {\n\n            this.state.drug_catalog.forEach(function (drug) {\n                drugs[drug.id] = (drug.name + \",\" + drug.strength)\n            })\n        }\n        const procedures = {}\n        if (this.state.procedure_category) {\n            this.state.procedure_category.forEach(function (procedure) {\n                procedures[procedure.id] = procedure.name;\n            })\n        }\n\n        const taxesdata = {}\n        if (this.state.taxes_list) {\n            this.state.taxes_list.forEach(function (tax) {\n                taxesdata[tax.id] = tax.name;\n            })\n        }\n\n        if (this.props.match.params.id) {\n            return <div>\n                <Switch>\n                    <Route path='/patient/:id/billing/invoices/add'\n                           render={(route) => <AddInvoicedynamic  {...route} {...this.props}\n                                                                  loadData={this.loadInvoices}/>}/>\n                    <Route path='/patient/:id/billing/invoices/edit'\n                           render={(route) => (\n                               this.state.editInvoice ?\n                                   <AddInvoicedynamic {...this.state} {...route} {...this.props}\n                                                      editId={this.state.editInvoice.id}\n                                                      loadData={this.loadInvoices}/> :\n                                   <Redirect to={\"/patient/\" + this.props.match.params.id + \"/billing/invoices\"}/>\n                           )}/>\n                    <Route path='/patient/:id/billing/invoices/return'\n                           render={(route) => (\n                               this.state.editInvoice ?\n                                   <AddReturnInvoice {...this.state} {...route}\n                                                     editId={this.state.editInvoice.id}\n                                                     loadData={this.loadInvoices}/> :\n                                   <Redirect to={\"/patient/\" + this.props.match.params.id + \"/billing/invoices\"}/>\n                           )}/>\n                    <Route>\n                        <div>\n                            <Alert banner showIcon type={\"info\"}\n                                   message={\"The invoices shown are only for the current selected practice!\"}/>\n                            <Affix offsetTop={0}>\n                                <Card bodyStyle={{padding: 0}}\n                                      style={{boxShadow: '0 5px 8px rgba(0, 0, 0, 0.09)'}}\n                                      title={(this.state.currentPatient ? this.state.currentPatient.user.first_name + \" Invoice \" : \"Invoices \") + (this.state.total ? `(Total:${this.state.total})` : '')}\n                                      extra={<Button.Group>\n                                          <Link to={\"/patient/\" + this.props.match.params.id + \"/billing/invoices/add\"}>\n                                              <Button type={\"primary\"}>\n                                                  <Icon type=\"plus\"/>Add\n                                              </Button>\n                                          </Link>\n                                      </Button.Group>}>\n                                </Card>\n                            </Affix>\n                            {this.state.invoices.map(invoice => InvoiceCard(invoice, that))}\n                            <Spin spinning={this.state.loading}>\n                                <Row/>\n                            </Spin>\n                            <InfiniteFeedLoaderButton\n                                loaderFunction={() => this.loadInvoices(this.state.loadMoreInvoice)}\n                                loading={this.state.loading}\n                                hidden={!this.state.loadMoreInvoice}/>\n\n                        </div>\n                    </Route>\n                </Switch>\n                <Modal\n                    title={null}\n                    visible={this.state.visibleMail}\n                    onOk={this.sendMailToPatient}\n                    onCancel={this.mailModalClose}\n                    footer={[\n                        <Button key=\"back\" onClick={this.mailModalClose}>\n                            Cancel\n                        </Button>,\n                        <Button key=\"submit\" type=\"primary\"  onClick={this.sendMailToPatient}>\n                            Send\n                        </Button>,\n                    ]}\n                >\n                    <p>Send Invoice To {this.state.patientName} ?</p>\n                    <Input value={that.state.mail_to} placeholder={\"Email\"}\n                           onChange={(e)=>that.updateFormValue('mail_to',e.target.value)}/>\n                </Modal>\n\n                {that.state.cancelIncoiceVisible ?\n                            <CancelReturnModal key=\"cancelInvoice1\" {...that.state} cancelInvoiceClose={that.cancelInvoiceClose}\n                           loadInvoices={that.loadInvoices}/>\n                           :null\n                }\n\n\n            </div>\n        } else {\n            return <div>\n                <Affix offsetTop={0}>\n                    <Card bodyStyle={{padding: 0}}\n                          style={{boxShadow: '0 5px 8px rgba(0, 0, 0, 0.09)'}}\n                          title={(this.state.currentPatient ? this.state.currentPatient.user.first_name + \" Invoice \" : \"Invoice \") + (this.state.total ? `(Total:${this.state.total})` : '')}\n                          extra={<Button.Group>\n                              <Button type={\"primary\"} onClick={() => this.props.togglePatientListModal(true)}>\n                                  <Icon type=\"plus\"/>Add\n                              </Button>\n                          </Button.Group>}>\n                    </Card>\n                </Affix>\n                {this.state.invoices.map(invoice => InvoiceCard(invoice, that))}\n                <Spin spinning={this.state.loading}>\n                    <Row/>\n                </Spin>\n                <InfiniteFeedLoaderButton loaderFunction={() => this.loadInvoices(this.state.loadMoreInvoice)}\n                                          loading={this.state.loading}\n                                          hidden={!this.state.loadMoreInvoice}/>\n\n                <Modal\n                    title={null}\n                    visible={this.state.visibleMail}\n                    onOk={this.sendMailToPatient}\n                    onCancel={this.mailModalClose}\n                    footer={[\n                        <Button key=\"back\" onClick={this.mailModalClose}>\n                            Cancel\n                        </Button>,\n                        <Button key=\"submit\" type=\"primary\"  onClick={this.sendMailToPatient}>\n                            Send\n                        </Button>,\n                    ]}\n                >\n                    <p>Send invoice To {this.state.patientName} ?</p>\n                    <Input value={that.state.mail_to} placeholder={\"Email\"}\n                           onChange={(e)=>that.updateFormValue('mail_to',e.target.value)}/>\n                </Modal>\n\n                {that.state.cancelIncoiceVisible ?\n                            <CancelReturnModal key=\"cancelInvoice2\" {...that.state} cancelInvoiceClose={that.cancelInvoiceClose}\n                           loadInvoices={that.loadInvoices}/>\n                           :null\n                }\n            </div>\n        }\n\n    }\n}\n\nexport default Form.create()(PatientInvoices);\n\nfunction invoiceFooter(presc) {\n    if (presc) {\n        return <p>\n            {presc.doctor ? <Tooltip title=\"Doctor\"><Tag color={presc.doctor ? presc.doctor.calendar_colour : null}>\n                <b>{\"prescribed by  \" + presc.doctor.user.first_name} </b>\n            </Tag></Tooltip> : null}\n            {presc.practice ? <Tag style={{float: 'right'}}>\n                <Tooltip title=\"Practice Name\">\n                    <b>{presc.practice.name} </b>\n                </Tooltip>\n            </Tag> : null}\n            {presc.notes ? <p>Notes: {presc.notes}</p> : null}\n            {presc.cancel_note ? <p>Cancel Notes: {presc.cancel_note}</p> : null}\n        </p>\n\n\n    }\n    return null\n}\n\nfunction InvoiceCard(invoice, that) {\n    let tableObjects = [];\n    const {getFieldDecorator} = that.props.form;\n    if (invoice.reservation) {\n        let medicinesPackages = invoice.reservation_data.medicines.map(item => Object.create({\n            ...item,\n            unit: 1,\n            total: item.final_price,\n            unit_cost: item.price,\n            discount: 0\n        }));\n        let mapper = {\n            \"NORMAL\": {total: 'final_normal_price', tax: \"normal_tax_value\", unit_cost: \"normal_price\"},\n            \"TATKAL\": {total: 'final_tatkal_price', tax: \"tatkal_tax_value\", unit_cost: \"tatkal_price\"}\n        }\n        tableObjects = [...tableObjects, {\n            ...invoice.reservation_data.bed_package,\n            unit: 1,\n            total: invoice.reservation_data.bed_package ? invoice.reservation_data.bed_package[mapper[invoice.reservation_data.seat_type].total] : null,\n            tax_value: invoice.reservation_data.bed_package ? invoice.reservation_data.bed_package[mapper[invoice.reservation_data.seat_type].tax] : null,\n            unit_cost: invoice.reservation_data.bed_package ? invoice.reservation_data.bed_package[mapper[invoice.reservation_data.seat_type].unit_cost] : null\n        }, ...medicinesPackages]\n    }\n    return <Card\n        key={invoice.id}\n        style={{marginTop: 10}}\n        bodyStyle={{padding: 0}}\n        title={<small>{invoice.date ? moment(invoice.date).format('ll') : null}\n            {that.state.currentPatient ? null : <span>\n            <Link to={\"/patient/\" + (invoice.patient_data ? invoice.patient_data.id : null) + \"/billing/invoices\"}>\n                &nbsp;&nbsp; {invoice.patient_data ? invoice.patient_data.user.first_name : null} (ID: {invoice.patient_data && invoice.patient_data.custom_id ? invoice.patient_data.custom_id : invoice.patient_data.id})&nbsp;\n            </Link>, {invoice.patient_data ? invoice.patient_data.gender : null}</span>}\n        </small>}\n        extra={<Dropdown.Button\n            size={\"small\"}\n            style={{float: 'right'}}\n            overlay={<Menu>\n                <Menu.Item key=\"1\">\n                    {/* onClick={() => that.editInvoiceData(invoice)} disabled={!that.props.match.params.id}> */}\n                    <Link\n                        to={\"/patient/\" + (invoice.patient_data ? invoice.patient_data.id : null) + \"/billing/payments/add?invoices=\" + invoice.id}>\n                        <Icon type=\"dollar\"/>\n                        &nbsp;\n                        Pay\n                    </Link>\n                </Menu.Item>\n                <Menu.Divider/>\n                <Menu.Item key=\"2\" onClick={() => that.editModelOpen(invoice)}\n                           disabled={(invoice.practice != that.props.active_practiceId) || invoice.payments_data || invoice.is_cancelled}>\n                    <Icon type=\"edit\"/>\n                    Edit\n                </Menu.Item>\n                <Menu.Item key=\"5\" onClick={() => that.returnModelOpen(invoice)}\n                           disabled={(invoice.practice != that.props.active_practiceId) || invoice.is_cancelled}>\n                    <Icon type=\"redo\"/>\n                    Return\n                </Menu.Item>\n                <Menu.Item key=\"3\" onClick={() => that.cancelModalOpen(invoice)}\n                           disabled={(invoice.practice != that.props.active_practiceId) || invoice.payments_data || invoice.is_cancelled}>\n                    <Icon type=\"delete\"/>\n                    Cancel\n                </Menu.Item>\n                <Menu.Divider/>\n                <Menu.Item key=\"4\">\n                    <Link to={\"/patient/\" + invoice.patient + \"/emr/timeline\"}>\n                        <Icon type=\"clock-circle\"/>\n                        Patient Timeline\n                    </Link>\n                </Menu.Item>\n\n                <Menu.Divider/>\n                <Menu.Item key={'5'}>\n                    <a onClick={() => that.sendPatientMail(invoice)}><Icon\n                        type=\"mail\"/> Send mail to patient\n                    </a>\n                </Menu.Item>\n            </Menu>}>\n            <a onClick={() => that.loadPDF(invoice.id)}><Icon\n                type=\"printer\"/></a>\n        </Dropdown.Button>}>\n        <Row gutter={8}>\n            <Col xs={24} sm={24} md={6} lg={4} xl={4} xxl={4} style={{padding: 10}}>\n                {invoice.is_cancelled ?\n                    <Alert message=\"Cancelled\" type=\"error\" showIcon/> : null}\n                <Divider style={{marginBottom: 0}}>{invoice.invoice_id}</Divider>\n                <Statistic title=\"Paid / Total \"\n                           value={(invoice.payments_data ? invoice.payments_data.toFixed(2) : 0)}\n                           suffix={\"/ \" + invoice.total.toFixed(2)}/>\n            </Col>\n            <Col xs={24} sm={24} md={18} lg={20} xl={20} xxl={20}>\n                {invoice.type == \"Membership Amount.\" ?\n                    <Table\n                        bordered={true}\n                        pagination={false}\n                        columns={columns}\n                        dataSource={[{\n                            inventory: true,\n                            name: \"Membership\",\n                            unit_cost: invoice.total,\n                            unit: 1,\n                            discount_value: 0,\n                            tax_value: 0,\n                            total: invoice.total\n                        }]}\n                        footer={() => invoiceFooter({practice: invoice.practice_data, notes: invoice.notes, cancel_note : invoice.cancel_note})}/> :\n                    <Table\n                        bordered={true}\n                        pagination={false}\n                        columns={columns}\n                        dataSource={[...tableObjects, ...invoice.inventory, ...invoice.procedure]}\n                        footer={() => invoiceFooter({practice: invoice.practice_data, notes: invoice.notes, cancel_note : invoice.cancel_note})}/>}\n\n            </Col>\n        </Row>\n\n\n        \n\n        {that.state.editIncoiceVisible && that.state.otpSent &&\n        <EditReturnModal key=\"editInvoice\" {...that.state} invoice={invoice} editInvoiceClose={that.editInvoiceClose} {...that.props} />}\n\n        {that.state.returnIncoiceVisible && that.state.otpSent && <InvoiceReturnModal key=\"returnInvoice\" {...that.state} invoice={invoice}\n                                                                                      returnInvoiceClose={that.returnInvoiceClose} {...that.props} />}\n\n    </Card>\n}\n\nconst columns = [{\n    title: 'Treatment & Products',\n    dataIndex: 'drug',\n    key: 'drug',\n    render: (text, record) => (\n        <span> <b>{record.name ? record.name : null}</b>\n                    <br/> {record.doctor_data ?\n                <Tag color={record.doctor_data ? record.doctor_data.calendar_colour : null}>\n                    <b>{\"prescribed by  \" + record.doctor_data.user.first_name} </b>\n                </Tag> : null}\n                </span>)\n}, {\n    title: 'Cost',\n    dataIndex: 'unit_cost',\n    key: 'unit_cost',\n    render: (item, record) => <span>{record.unit_cost ? record.unit_cost.toFixed(2) : null}</span>\n}, {\n    title: 'Unit',\n    dataIndex: 'unit',\n    key: 'unit',\n}, {\n    title: 'Discount',\n    dataIndex: 'discount_value',\n    key: 'discount_value',\n    render: (item, record) => <span>{record.discount_value ? record.discount_value.toFixed(2) : null}</span>\n}, {\n    title: 'Tax',\n    dataIndex: 'tax_value',\n    key: 'tax_value',\n    render: (item, record) => <span>{record.tax_value ? record.tax_value.toFixed(2) : null}</span>\n}, {\n    title: 'Total',\n    dataIndex: 'total',\n    key: 'total',\n    render: item => item ? item.toFixed(2) : null\n}];\n","import React from \"react\";\nimport {\n    Button,\n    Card,\n    Col,\n    Divider,\n    InputNumber,\n    List,\n    Popconfirm,\n    Row,\n    Select,\n    DatePicker,\n    Spin,\n    Input,\n    Form\n} from 'antd';\nimport {displayMessage, getAPI, interpolate, postAPI, putAPI} from \"../../../utils/common\";\nimport {\n    ACCEPT_PAYMENT,\n    AVAILABLE_ADVANCE, BULK_PAYMENT_API,\n    INVOICES_API,\n    PATIENT_PAYMENTS_API,\n    PAYMENT_MODES,\n    SINGLE_PAYMENT_API\n} from \"../../../constants/api\";\nimport {SUCCESS_MSG_TYPE, WARNING_MSG_TYPE} from \"../../../constants/dataKeys\";\nimport moment from \"moment\";\nimport {PAYMENT_OFFLINE_MODE, PROCEDURES} from \"../../../constants/hardData\";\nimport {RAZORPAY_KEY} from \"../../../config/connect\";\n\nclass AddPaymentForm extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            invoicesList: [],\n            invoiceLoading: true,\n            addedInvoiceId: {},\n            addedInvoice: [],\n            paymentModes: [],\n            totalPayableAmount: 0,\n            invoicePayments: {},\n            totalPayingAmount: 0,\n            totalPayingFromAdvanceAmount: 0,\n            selectedPaymentMode: null,\n            availableAdvance: null,\n            advanceToBeSent: 0,\n            selectDate: moment(),\n            loading: false,\n            paymentModeOffline:false\n        }\n        this.loadEditPyament = this.loadEditPyament.bind(this);\n    }\n\n    componentWillMount() {\n        let that = this;\n        if (that.props.editPayment && that.props.editPayment.invoices) {\n            that.loadEditPyament(that.props.editPayment.invoices);\n            // let addedInvoicesId = {};\n            // let addedInvoice = [];\n            // let totalPayingAmount = 0;\n            // this.props.editPayment.invoices.forEach(function (inv) {\n            //     console.log(\"Item\",inv);\n            //     addedInvoicesId[inv.invoice] = true;\n            //     addedInvoice.push({...inv, ...inv.invoice_data});\n            //     totalPayingAmount += inv.pay_amount + inv.pay_amount_wallet\n            // })\n            // that.setState({\n            //     addedInvoiceId: addedInvoicesId,\n            //     addedInvoice: addedInvoice,\n            //     // totalPayingAmount : totalPayingAmount\n            // }, function () {\n            //     console.log(\"Infinity Loop\");\n            //     that.calculateInvoicePayments();\n            //     that.setPaymentAmount(totalPayingAmount);\n            // })\n\n\n        }\n        let invoiceArray = [];\n        if (this.props.history && this.props.history.location.search) {\n            let pairValueArray = this.props.history.location.search.substr(1).split('&');\n            if (pairValueArray.length) {\n                pairValueArray.forEach(function (item) {\n                    if ((item.split('='))[0] == 'invoices') {\n                        invoiceArray = ((item.split('='))[1]).split(',');\n                    }\n                })\n            }\n        }\n        this.loadInvoices(invoiceArray);\n        this.loadPaymentModes();\n        this.loadAvailableAdvance();\n    }\n\n    loadEditPyament = (editPayment) => {\n        let that = this;\n        let addedInvoicesId = {};\n        let addedInvoice = [];\n        let totalPayingAmount = 0;\n        this.setState(function (prevState) {\n            editPayment.forEach(function (inv) {\n                addedInvoicesId[inv.invoice] = true;\n                addedInvoice.push({...inv, ...inv.invoice_data});\n                totalPayingAmount += inv.pay_amount + inv.pay_amount_wallet;\n            }, function () {\n                that.calculateInvoicePayments();\n                that.setPaymentAmount(totalPayingAmount);\n            });\n            return {\n                addedInvoice: addedInvoice,\n                addedInvoiceId: addedInvoicesId,\n            }\n        });\n    };\n    loadAvailableAdvance = () => {\n        let that = this;\n        let sucessFn = function (data) {\n            that.setState({\n                availableAdvance: data\n            });\n        }\n        let errorFn = function () {\n\n        }\n        getAPI(interpolate(AVAILABLE_ADVANCE, [that.props.match.params.id]), sucessFn, errorFn, {\n            practice_id: this.props.active_practiceId\n        })\n    }\n    loadPaymentModes = () => {\n        var that = this;\n        let successFn = function (data) {\n            if (data.length) {\n                if (data[0].mode ==PAYMENT_OFFLINE_MODE ){\n                    that.setState({\n                        paymentModeOffline:true\n                    })\n                }\n                that.setState({\n                    paymentModes: data,\n                    selectedPaymentMode: data[0].id\n                })\n            }\n        };\n        let errorFn = function () {\n        };\n        getAPI(interpolate(PAYMENT_MODES, [this.props.active_practiceId]), successFn, errorFn);\n    }\n    loadInvoices = (invoicesToLoad) => {\n        let that = this;\n        that.setState({\n            invoiceLoading: true\n        });\n        let successFn = function (data) {\n            that.setState(function (prevState) {\n                return {\n                    invoicesList: [...data.results, ...prevState.addedInvoice],\n                    invoiceLoading: false,\n                    loadMoreInvoice: data.next\n                }\n            }, function () {\n                if (invoicesToLoad) {\n                    invoicesToLoad.forEach(function (id) {\n                        that.addInvoiceToPayments(id)\n                    })\n                }\n                that.calculateInvoicePayments();\n            })\n        }\n        let errorFn = function () {\n            that.setState({\n                invoiceLoading: false\n            })\n\n        }\n        getAPI(INVOICES_API, successFn, errorFn, {\n            page: that.state.loadMoreInvoice || 1,\n            is_cancelled: false,\n            is_pending: true,\n            patient: this.props.match.params.id,\n            practice: this.props.active_practiceId\n        });\n    }\n    addInvoiceToPayments = (id) => {\n        let that = this;\n        this.setState(function (prevState) {\n            let foundInvoice = null;\n            prevState.invoicesList.forEach(function (invoice) {\n                if (invoice.id == id)\n                    foundInvoice = invoice\n            })\n            if (foundInvoice)\n                return {\n                    addedInvoice: [...prevState.addedInvoice, foundInvoice],\n                    addedInvoiceId: {...prevState.addedInvoiceId, [id]: true},\n                    invoicePayments: {...prevState.addedInvoiceId, [id]: 0}\n                }\n            return null;\n        }, function () {\n            that.calculateInvoicePayments()\n        })\n    }\n\n    removeInvoiceToPayments = (id) => {\n        let that = this;\n        this.setState(function (prevState) {\n            let foundInvoice = [];\n            prevState.addedInvoice.forEach(function (invoice) {\n                if (invoice.id != id)\n                    foundInvoice.push(invoice)\n            })\n            if (foundInvoice)\n                return {\n                    addedInvoice: foundInvoice,\n                    addedInvoiceId: {...prevState.addedInvoiceId, [id]: false},\n                }\n            return null\n        }, function () {\n            that.calculateInvoicePayments();\n        })\n    }\n    calculateInvoicePayments = () => {\n        this.setState(function (prevState) {\n            let payable = 0;\n            let totalPayingAmount = prevState.totalPayingAmount + prevState.totalPayingFromAdvanceAmount;\n            let invoicePayments = {};\n            prevState.addedInvoice.forEach(function (invoice) {\n                // invoice.inventory.forEach(function (invent) {\n                //     payable += invent.total\n                // });\n                // invoice.procedure.forEach(function (proc) {\n                //     payable += proc.unit * proc.total\n                // });\n                let invoicePayableAmount = invoice.total - invoice.payments_data;\n                if (invoice.pay_amount)\n                    invoicePayableAmount += invoice.pay_amount;\n                if (invoice.pay_amount_wallet)\n                    invoicePayableAmount += invoice.pay_amount_wallet;\n                payable += invoicePayableAmount;\n                if (totalPayingAmount >= invoicePayableAmount) {\n                    totalPayingAmount -= invoicePayableAmount;\n                    invoicePayments[invoice.id] = invoicePayableAmount;\n                } else {\n                    invoicePayments[invoice.id] = totalPayingAmount;\n                    totalPayingAmount = 0;\n                }\n\n            });\n\n            return {\n                advanceToBeSent: totalPayingAmount,\n                totalPayableAmount: payable.toFixed(2),\n                invoicePayments: invoicePayments\n            }\n        });\n    }\n    setPaymentAmount = (value) => {\n        let that = this;\n        this.setState({\n            totalPayingAmount: value\n        }, function () {\n            that.calculateInvoicePayments();\n        })\n    }\n    setPaymentFromAdvanceAmount = (value) => {\n        let that = this;\n        this.setState({\n            totalPayingFromAdvanceAmount: value\n        }, function () {\n            that.calculateInvoicePayments();\n        })\n    }\n    changeSelectedPaymentMode = (e) => {\n        let {paymentModes} =this.state;\n        paymentModes.forEach((item)=>{\n           if (item.id == e){\n               if (item.mode == PAYMENT_OFFLINE_MODE){\n                   this.setState({\n                       paymentModeOffline:true,\n                   })\n               }else {\n                   this.setState({\n                       paymentModeOffline:false,\n                   })\n               }\n           }\n        });\n        this.setState({\n            selectedPaymentMode: e\n        })\n    };\n    changeNotes = (e) => {\n        this.setState({\n            notes: e\n        })\n    };\n    selectedDate = (value) => {\n        let that = this;\n        that.setState({\n            selectDate: value,\n        })\n    };\n    handleSubmit = (e) => {\n        if (!this.state.totalPayingAmount) {\n            displayMessage(WARNING_MSG_TYPE, \"Payment Amount of O INR is not allowed.\");\n            return false\n        }\n        this.setState({\n            loading: true\n        })\n        let that = this;\n        let newPayment = {\n            \"invoices\": [],\n            \"bank\": \"\",\n            \"number\": 0,\n            \"is_active\": true,\n            notes: that.state.notes,\n            \"is_cancelled\": false,\n            \"practice\": that.props.active_practiceId,\n            \"patient\": that.props.match.params.id,\n            \"payment_mode\": that.state.selectedPaymentMode,\n            advance_value: that.state.advanceToBeSent,\n            \"is_advance\": !!that.state.advanceToBeSent,\n            \"date\": moment(that.state.selectDate).format(\"YYYY-MM-DD\"),\n        }\n        let reqData = []\n        if (that.state.totalPayingAmount - that.state.totalPayableAmount > 1) {\n            reqData.advance_value = that.state.totalPayingAmount - that.state.totalPayableAmount;\n            reqData.is_advance = true;\n        }\n        let invoices = Object.keys(that.state.invoicePayments);\n        let invoicePayments = {...that.state.invoicePayments};\n        let totalAmountPayingFromAdvance = that.state.totalPayingFromAdvanceAmount;\n        let consumedInvoices = 0;\n        if (totalAmountPayingFromAdvance) {\n            that.state.availableAdvance.data.forEach(function (availableAdvancePayments) {\n                let maxConsumeAmount = totalAmountPayingFromAdvance;\n                if (availableAdvancePayments.advance_value < maxConsumeAmount) {\n                    maxConsumeAmount = availableAdvancePayments.advance_value;\n                }\n                if(maxConsumeAmount<0){\n                    maxConsumeAmount = 0;\n                }\n                let i = 0;\n                while (totalAmountPayingFromAdvance && invoices.length > consumedInvoices) {\n                    if (invoicePayments[invoices[consumedInvoices]] && maxConsumeAmount > invoicePayments[invoices[consumedInvoices]]) {\n                        availableAdvancePayments.advance_value -= invoicePayments[invoices[consumedInvoices]];\n                        availableAdvancePayments.invoices.push({\n                            \"pay_amount_advance\": invoicePayments[invoices[consumedInvoices]],\n                            \"pay_amount\": invoicePayments[invoices[consumedInvoices]],\n                            \"is_active\": true,\n                            \"invoice\": invoices[consumedInvoices],\n                        });\n                        consumedInvoices++;\n                        totalAmountPayingFromAdvance -= invoicePayments[invoices[consumedInvoices]];\n                        invoicePayments[invoices[consumedInvoices]] -= invoicePayments[invoices[consumedInvoices]];\n                    } else if (invoicePayments[invoices[consumedInvoices]]) {\n                        availableAdvancePayments.invoices.push({\n                            \"pay_amount_advance\": maxConsumeAmount,\n                            \"pay_amount\": maxConsumeAmount,\n                            \"is_active\": true,\n                            \"invoice\": invoices[consumedInvoices],\n                        });\n\n                        invoicePayments[invoices[consumedInvoices]] -= maxConsumeAmount;\n                        totalAmountPayingFromAdvance -= maxConsumeAmount;\n                        availableAdvancePayments.advance_value -= maxConsumeAmount;\n                    }\n                    if (!availableAdvancePayments.advance_value) {\n                        availableAdvancePayments.is_advance = false;\n                    }\n                    console.log(i++);\n                }\n                reqData.push(availableAdvancePayments);\n            });\n        }\n\n        for (; invoices.length > consumedInvoices; consumedInvoices++) {\n            newPayment.invoices.push({\n                \"pay_amount\": invoicePayments[invoices[consumedInvoices]],\n                \"type\": \"Invoice\",\n                \"is_active\": true,\n                \"invoice\": invoices[consumedInvoices],\n            });\n        }\n        if (this.props.editPayment && this.props.editPayment.id)\n            newPayment.id = this.props.editPayment.id;\n        if (newPayment.invoices.length || newPayment.id || newPayment.is_advance) {\n            reqData.push(newPayment);\n        }\n        if (that.state.receivedPayIdFromRazorPay) {\n            newPayment.bank = \"RazorPay\";\n            newPayment.number = that.state.receivedPayIdFromRazorPay;\n        }\n        console.log(reqData);\n        let successFn = function (data) {\n            that.setState({\n                loading: false\n            });\n            // if (that.props.loadData)\n            that.props.loadData();\n            that.props.history.replace(\"/patient/\" + that.props.match.params.id + \"/billing/payments\")\n        };\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            });\n        };\n         postAPI(BULK_PAYMENT_API, reqData, successFn, errorFn)\n    };\n\n    paymentHandler(inv, patientObj, cost,) {\n        if (!cost) {\n            displayMessage(WARNING_MSG_TYPE, \"Payment Amount of O INR is not allowed.\");\n            return false\n        }\n        const that = this;\n        const options = {\n            key: RAZORPAY_KEY,\n            amount: cost.toFixed(2) * 100,\n            name: patientObj.custom_id,\n\n            description: 'Payment for ' + inv,\n            \"prefill\": {\n                \"name\": patientObj.user.first_name,\n                \"email\": patientObj.user.email,\n                \"contact\": patientObj.user.mobile\n            },\n            handler(response) {\n                const paymentId = response.razorpay_payment_id;\n                let reqData = {\n                    \"payment_id\": paymentId,\n                    \"amount\": cost\n                };\n                that.setState({\n                    loading: true\n                });\n                const successFn = function (data) {\n                    displayMessage(SUCCESS_MSG_TYPE, data.detail);\n                    that.setState({\n                        loading: false,\n                        receivedPayIdFromRazorPay: paymentId\n                    }, function () {\n                        that.handleSubmit();\n                    });\n\n                };\n                const errorFn = function () {\n                    that.setState({\n                        loading: false\n                    });\n                    console.log('Request failed');\n                };\n                //Using my server endpoints to capture the payment\n                postAPI(ACCEPT_PAYMENT, reqData, successFn, errorFn);\n            },\n        };\n        const rzp1 = new window.Razorpay(options);\n        rzp1.open();\n    }\n\n    render() {\n        let that = this;\n        return <div>\n            <Spin spinning={this.state.loading} size={\"large\"}>\n                <Row gutter={8}>\n                    <Col xs={24} sm={24} md={16} lg={16} xl={18} xxl={18}>\n                        <Card>\n                            <Row>\n                                <Col span={24}>\n                                    {/*<Statistic title=\"Paid / Total \" value={93} suffix={\"/ \" + invoice.total}/>*/}\n                                    {/*</Col>*/}\n                                    {/*<Col xs={24} sm={24} md={16} lg={16} xl={18} xxl={18}>*/}\n\n                                    <table style={{width: '100%'}}>\n                                        <tbody>\n                                        <tr style={{borderBottom: '2px solid #ccc'}}>\n                                            <td style={{width: '20%'}}>\n                                                <small>INVOICE NO</small>\n                                            </td>\n                                            <td style={{width: '20%'}}>\n                                                <small>PROCEDURE</small>\n                                            </td>\n                                            <td style={{width: '20%', textAlign: 'right'}}>\n                                                <small>DUE(INR)</small>\n                                            </td>\n                                            <td style={{width: '20%', textAlign: 'right'}}>\n                                                <small>PAY NOW(INR)</small>\n                                            </td>\n                                            <td style={{width: '20%', textAlign: 'right'}}>\n                                                <small>DUE AFTER PAYMENT(INR)</small>\n                                            </td>\n                                        </tr>\n\n                                        {this.state.addedInvoice.map(invoice =>\n                                            <tr style={{borderBottom: '2px solid #ccc'}}>\n                                                <td>\n                                                    <Button size={'small'} type={'danger'} shape={'circle'}\n                                                            icon={'close'}\n                                                            style={{position: 'absolute', right: '-35px'}}\n                                                            onClick={() => this.removeInvoiceToPayments(invoice.id)}/>\n                                                    <h3>{invoice.invoice_id}</h3>\n                                                    {invoice.date}\n                                                </td>\n                                                <td>\n                                                    {invoice.procedure.map(proc => proc.procedure_data.name + \", \")}\n                                                    {invoice.inventory.map(proc => proc.inventory_item_data.name + \", \")}\n                                                    {invoice.reservation ? invoice.type + \",\" : null}\n                                                    {invoice.reservation_data && invoice.reservation_data.medicines ? invoice.reservation_data.medicines.map(item => item.name + ',') : null}\n                                                </td>\n                                                <td style={{textAlign: 'right'}}>\n                                                    <b>{(invoice.total - invoice.payments_data + (invoice.pay_amount || 0) + (invoice.pay_amount_wallet || 0)).toFixed(2)}</b>\n                                                </td>\n                                                <td style={{textAlign: 'right'}}>\n                                                    <b>{that.state.invoicePayments[invoice.id]}</b></td>\n                                                <td style={{textAlign: 'right'}}>\n                                                    <b>{(invoice.total - invoice.payments_data + (invoice.pay_amount || 0) + (invoice.pay_amount_wallet || 0) - that.state.invoicePayments[invoice.id]).toFixed(2)}</b>\n                                                </td>\n                                            </tr>\n                                        )}\n                                        </tbody>\n                                    </table>\n                                </Col>\n                            </Row>\n                            <Row style={{borderBottom: '2px dashed #ccc', marginTop: '20px'}}>\n                                <Col span={6}><h3>Total Payable :</h3></Col>\n                                <Col span={6}><h2>{this.state.totalPayableAmount}</h2></Col>\n                            </Row>\n                            <Row gutter={16} style={{marginTop: '20px'}}>\n                                <Col span={12}>\n                                    <Row>\n\n                                        <Col span={12}>\n                                            <h3>Amount From Advance :<br/>\n                                                <small>Available: {this.state.availableAdvance ? this.state.availableAdvance.max_allowed : 0} INR</small>\n                                            </h3>\n                                        </Col>\n                                        <Col span={12}>\n                                            <InputNumber min={0} step={1}\n                                                         max={this.state.availableAdvance ? this.state.availableAdvance.max_allowed : 0}\n                                                         disabled={!this.state.availableAdvance || !this.state.availableAdvance.max_allowed}\n                                                         value={this.state.totalPayingFromAdvanceAmount}\n                                                         onChange={this.setPaymentFromAdvanceAmount}/>\n                                        </Col>\n                                    </Row>\n                                    <Row>\n                                        <Col span={12}>\n                                            <h3>Pay Now:</h3></Col>\n                                        <Col span={12}>\n                                            <InputNumber min={0} step={1}\n                                                         value={this.state.totalPayingAmount}\n                                                         onChange={this.setPaymentAmount}/>\n                                        </Col>\n                                    </Row>\n\n                                </Col>\n                                <Col span={12}>\n                                    <Row>\n                                        <Col span={10}>\n                                            <h3>Payment Mode :</h3>\n\n                                        </Col>\n                                        <Col span={12}>\n                                            <Select style={{width: '100%'}} value={this.state.selectedPaymentMode}\n                                                    onChange={this.changeSelectedPaymentMode}>\n                                                {this.state.paymentModes.map(mode => <Select.Option value={mode.id}\n                                                                                                    key={mode.id}>\n                                                    {mode.mode}\n\n                                                </Select.Option>)}\n                                            </Select>\n                                            <br/>\n                                            <br/>\n                                        </Col>\n                                    </Row>\n                                    <Row>\n                                        <Col span={24}>\n                                            <Input.TextArea row={2} placeholder=\"Notes...\" size={'small'} onChange={(e)=>this.changeNotes(e.target.value)}>\n                                                {this.state.notes}\n                                            </Input.TextArea>\n                                        </Col>\n                                    </Row>\n\n                                    <Row>\n                                        <Col span={6}>\n                                            <br/>\n                                            <span> &nbsp;&nbsp;on&nbsp;&nbsp;</span>\n                                            <DatePicker style={{width: 150}} defaultValue={moment()}\n                                                        onChange={(value) => that.selectedDate(value)} allowClear={false}/>\n                                        </Col>\n                                    </Row>\n                                </Col>\n\n                            </Row>\n                            <Row>\n                                <Col span={24} style={{align: 'center'}}>\n\n                                    <Popconfirm\n                                        title={\"Are you sure to take payment of INR \" + this.state.totalPayingAmount + \"?\"}\n                                        onConfirm={() => this.paymentHandler(this.state.addedInvoice.map(inv => inv.invoice_id).join(', '), this.props.currentPatient, this.state.totalPayingAmount)}>\n                                        <Button type={'primary'} style={{margin: 5}} disabled={that.props.editPayment && that.props.editPayment.invoices || that.state.paymentModeOffline}>Pay Online & Save Payments</Button>\n                                    </Popconfirm>\n\n                                    <Popconfirm\n                                        title={\"Are you sure to take payment of INR \" + this.state.totalPayingAmount + \"?\"}\n                                        onConfirm={this.handleSubmit}>\n                                        <Button type={'primary'} style={{margin: 5}}>Only Save Payments</Button>\n                                    </Popconfirm>\n                                </Col>\n                            </Row>\n                        </Card>\n                    </Col>\n                    <Col xs={24} sm={24} md={6} lg={8} xl={6} xxl={6}>\n                        <List loading={this.state.invoiceLoading} dataSource={this.state.invoicesList}\n                              renderItem={invoice => (that.state.addedInvoiceId[invoice.id] ?\n                                  <div/> :\n                                  <Card hoverable\n                                        onClick={() => this.addInvoiceToPayments(invoice.id)}\n                                        style={{marginBottom: '10px'}}>\n                                      <table style={{width: '100%'}}>\n                                          <tbody>\n                                          <tr>\n                                              <td style={{maxWidth: 'calc(100% - 60px)'}}><h4>{invoice.invoice_id}</h4>\n                                              </td>\n                                              <td style={{textAlign: 'right'}}><b>{invoice.date}</b></td>\n                                          </tr>\n                                          </tbody>\n                                      </table>\n                                      <Divider style={{margin: 0}}/>\n                                      <table style={{width: '100%'}}>\n                                          <tbody>\n                                          {invoice.procedure.map(proc => <tr>\n                                              <td style={{maxWidth: 'calc(100% - 60px)'}}>{proc.procedure_data.name}</td>\n                                              <td style={{textAlign: 'right'}}>\n                                                  <b>{(proc.unit * proc.unit_cost).toFixed(2)}</b></td>\n                                          </tr>)}\n                                          {invoice.inventory.map(proc => <tr>\n                                              <td style={{maxWidth: 'calc(100% - 60px)'}}>{proc.inventory_item_data.name}</td>\n                                              <td style={{textAlign: 'right'}}>\n                                                  <b>{(proc.unit * proc.unit_cost).toFixed(2)}</b></td>\n                                          </tr>)}\n                                          {invoice.reservation ?\n                                              <tr>\n                                                  <td style={{maxWidth: 'calc(100% - 60px)'}}>{invoice.type}</td>\n                                                  <td style={{textAlign: 'right'}}>\n                                                      <b>{invoice.reservation_data.bed_package_price ? invoice.reservation_data.bed_package_price.toFixed(2) : null}</b>\n                                                  </td>\n                                              </tr> : null}\n\n                                          {invoice.reservation_data && invoice.reservation_data.medicines ? <>\n                                                  {invoice.reservation_data.medicines.map(item => <tr>\n                                                      <td style={{maxWidth: 'calc(100% - 60px)'}}>{item.name}</td>\n                                                      <td style={{textAlign: 'right'}}><b>{item.final_price.toFixed(2)}</b>\n                                                      </td>\n                                                  </tr>)}\n                                              </>\n                                              : null}\n                                          </tbody>\n                                      </table>\n                                      <Divider style={{margin: 0}}/>\n                                      <table style={{width: '100%'}}>\n                                          <tbody>\n                                          <tr>\n                                              <td style={{maxWidth: 'calc(100% - 60px)'}}>Invoice Amount</td>\n                                              <td style={{textAlign: 'right'}}><b>{invoice.total.toFixed(2)}</b></td>\n                                          </tr>\n                                          <tr>\n                                              <td style={{maxWidth: 'calc(100% - 60px)'}}>Paid Amount</td>\n                                              <td style={{textAlign: 'right'}}>\n                                                  <b>{invoice.payments_data ? invoice.payments_data.toFixed(2) : 0}</b>\n                                              </td>\n                                          </tr>\n                                          <tr>\n                                              <td style={{maxWidth: 'calc(100% - 60px)'}}><b>Amount Due</b></td>\n                                              <td style={{textAlign: 'right'}}>\n                                                  <b>{(invoice.total - invoice.payments_data).toFixed(2)}</b></td>\n                                          </tr>\n                                          </tbody>\n                                      </table>\n\n                                  </Card>)}/>\n                    </Col>\n                </Row>\n            </Spin>\n        </div>\n    }\n}\n\nexport default AddPaymentForm;\n","import React from \"react\";\nimport {Button, Card, Form, Icon, Input, Modal} from \"antd\";\nimport {CANCELINVOICE_RESENT_OTP, CANCELINVOICE_VERIFY_OTP} from \"../../../constants/api\";\nimport {getAPI, postAPI} from \"../../../utils/common\";\nclass EditPaymentModal extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            otpSent:this.props.otpSent,\n            editPaymentVisible: this.props.editPaymentVisible,\n            cancelPaymentVisible:this.props.cancelPaymentVisible,\n\n\n        };\n        this.editPaymentData = this.editPaymentData.bind(this);\n    }\n\n    handleSubmitEditPayment = (e) => {\n        let that = this;\n        e.preventDefault();\n        this.props.form.validateFields((err, values) => {\n            if (!err) {\n                let reqData = {\n                    ...values,\n                    practice: this.props.active_practiceId,\n                }\n                let successFn = function (data) {\n                    that.setState({\n                        editPaymentVisible: false,\n                    });\n                    that.editPaymentData(that.props.editPayment);\n                    that.props.editPaymentClose();\n                };\n                let errorFn = function () {\n\n                };\n                postAPI(CANCELINVOICE_VERIFY_OTP, reqData, successFn, errorFn);\n            }\n        });\n    };\n\n    editPaymentData = (record) => {\n        let that = this;\n        that.props.history.push(\"/patient/\" + record.patient + \"/billing/payments/edit/\");\n    };\n\n\n    sendOTP() {\n        let that = this;\n        let successFn = function (data) {\n\n        };\n        let errorFn = function () {\n\n        };\n        getAPI(CANCELINVOICE_RESENT_OTP, successFn, errorFn);\n    }\n\n    render() {\n        let that = this;\n        const {getFieldDecorator} = that.props.form;\n        return(\n            <Modal\n                visible={(that.state.editPaymentVisible && that.props.editPayment && that.props.editPayment.id == that.props.payment.id)}\n                title=\"Edit Invoice\"\n                footer={null}\n                onOk={that.handleSubmitEditPayment}\n                onCancel={that.props.editPaymentClose}\n            >\n                <Form>\n                    <Form.Item>\n                        {getFieldDecorator('otp', {\n                            rules: [{required: true, message: 'Please input Otp!'}],\n                        })(\n                            <Input prefix={<Icon type=\"user\" style={{color: 'rgba(0,0,0,.25)'}}/>}\n                                   placeholder=\"Otp\"\n                            />,\n                        )}\n                    </Form.Item>\n                    <Form.Item>\n                        {that.props.otpSent ? <a style={{float: 'right'}} type=\"primary\" onClick={that.sendOTP}>\n                            Resend Otp ?\n                        </a> : null}\n                        <Button size=\"small\" type=\"primary\" htmlType=\"submit\" onClick={that.handleSubmitEditPayment}>\n                            Submit\n                        </Button>&nbsp;\n                        <Button size=\"small\" onClick={that.props.editPaymentClose}>\n                            Close\n                        </Button>\n                    </Form.Item>\n                </Form>\n            </Modal>\n        )\n    }\n\n\n}\nexport default Form.create()(EditPaymentModal);\n","import React from \"react\";\nimport {Button, Card, Form, Icon, Input, Modal} from \"antd\";\nimport {\n    CANCELINVOICE_RESENT_OTP,\n    CANCELINVOICE_VERIFY_OTP,\n    SINGLE_INVOICES_API, SINGLE_PAYMENT_API\n} from \"../../../constants/api\";\nimport {displayMessage, getAPI, interpolate, postAPI, putAPI} from \"../../../utils/common\";\nimport {SUCCESS_MSG_TYPE, OTP_DELAY_TIME} from \"../../../constants/dataKeys\";\nimport { REQUIRED_FIELD_MESSAGE } from \"../../../constants/messages\";\nimport moment from \"moment\";\n\nconst TextArea =Input;\nclass CancelPaymentModal extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            cancelPaymentVisible: this.props.cancelPaymentVisible,\n            otpSent:this.props.otpSent,\n            otpField:false,\n\n        };\n    }\n\n    componentDidMount(){\n        let that =this;\n        let created_time = moment().diff(that.props.editPayment.created_at, 'minutes');\n        if (created_time > OTP_DELAY_TIME) {\n            that.setState({\n                otpField:true,\n            })\n        }\n\n    }\n\n\n    handleSubmitCancelPayment = (e) => {\n        let that = this;\n        e.preventDefault();\n        this.props.form.validateFields((err, values) => {\n            if (!err) {\n                let reqData = {\n                    ...values,\n                    practice: this.props.active_practiceId,\n                }\n                let successFn = function (data) {\n                    that.setState({\n                        cancelPaymentVisible: false,\n                    });\n                    that.deletePayment(that.props.editPayment.patient_data , that.props.editPayment.id, values.cancel_note);\n        \n                };\n                let errorFn = function () {\n\n                };\n                if(that.state.otpField){\n                    postAPI(CANCELINVOICE_VERIFY_OTP, reqData, successFn, errorFn);\n                }else{\n                    that.deletePayment(that.props.editPayment.patient_data, that.props.editPayment.id, values.cancel_note);\n                }\n                \n            }\n        });\n    }\n\n\n\n    deletePayment(patient, payment , cancel_note) {\n        let that = this;\n        console.log(\"log\",patient ,payment, cancel_note)\n        let reqData = {\n            patient: patient.id, \n            is_cancelled: true,\n            cancel_note:cancel_note,\n        };\n        let successFn = function (data) {\n            that.props.cancelPaymentClose();\n            displayMessage(SUCCESS_MSG_TYPE, \"Payment cancelled successfully\")\n            that.props.loadPayments();\n        };\n        let errorFn = function () {\n        };\n        putAPI(interpolate(SINGLE_PAYMENT_API, [payment]), reqData, successFn, errorFn);\n\n    }\n\n\n    sendOTP() {\n        let that = this;\n        let successFn = function (data) {\n\n        };\n        let errorFn = function () {\n\n        };\n        getAPI(CANCELINVOICE_RESENT_OTP, successFn, errorFn);\n    }\n\n    render() {\n        let that = this;\n        let {otpField} = this.state;\n        const {getFieldDecorator} = that.props.form;\n        return(\n            <Modal\n                visible={that.state.cancelPaymentVisible}\n                title=\"Cancel Payment\"\n                footer={null}\n                onOk={that.handleSubmitCancelPayment}\n                onCancel={that.props.cancelPaymentClose}\n\n            >\n                <Form>\n                    <Form.Item key=\"text-area-note\"> \n                        {getFieldDecorator('cancel_note',{\n                            rules:[{required:true, message:REQUIRED_FIELD_MESSAGE}],\n                        })(\n                            <TextArea placeholder=\"cancel notes\"/>\n                        )}\n                    </Form.Item>\n\n                    {otpField ?\n                        <Form.Item key=\"otp\">\n                            {getFieldDecorator('otp', {\n                                rules: [{required: otpField, message: 'Please input Otp!'}],\n                            })(\n                                <Input prefix={<Icon type=\"user\" style={{color: 'rgba(0,0,0,.25)'}}/>}\n                                    placeholder=\"Otp\"\n                                />,\n                            )}\n                        </Form.Item> :null\n                    }\n\n                    <Form.Item key=\"btn\">\n                        {that.state.otpSent ? <a style={{float: 'right'}} type=\"primary\" onClick={that.sendOTP}>\n                            Resend Otp ?\n                        </a> : null}\n                        <Button size=\"small\" type=\"primary\" htmlType=\"submit\" onClick={that.handleSubmitCancelPayment}>\n                            Submit\n                        </Button>&nbsp;\n                        <Button size=\"small\" onClick={that.props.cancelPaymentClose}>\n                            Close\n                        </Button>\n                    </Form.Item>\n                </Form>\n            </Modal>\n        )\n    }\n\n\n}\nexport default Form.create()(CancelPaymentModal);\n","import React from \"react\";\n\nimport {\n    Alert,\n    Button,\n    Card,\n    Col,\n    Divider,\n    Dropdown,\n    Icon,\n    Menu,\n    Row,\n    Spin,\n    Table,\n    Tag,\n    Tooltip,\n    Form,\n    Input, Statistic\n} from \"antd\";\nimport {displayMessage, getAPI, interpolate, putAPI, postAPI} from \"../../../utils/common\";\nimport {\n    PATIENT_PAYMENTS_API,\n    PAYMENT_PDF,\n    SINGLE_PAYMENT_API,\n    CANCELINVOICE_VERIFY_OTP,\n    CANCELINVOICE_GENERATE_OTP,\n    CANCELINVOICE_RESENT_OTP, TREATMENTPLANS_PDF\n} from \"../../../constants/api\";\nimport moment from \"moment\";\nimport {Link, Redirect} from \"react-router-dom\";\nimport {Route, Switch} from \"react-router\";\nimport AddPaymentForm from \"./AddPaymentForm\";\nimport InfiniteFeedLoaderButton from \"../../common/InfiniteFeedLoaderButton\";\nimport {BACKEND_BASE_URL} from \"../../../config/connect\";\nimport {OTP_DELAY_TIME, SUCCESS_MSG_TYPE} from \"../../../constants/dataKeys\";\nimport {Modal} from \"antd/lib/index\";\nimport EditPaymentModal from \"../payments/EditPaymentModal\";\nimport InvoiceReturnModal from \"../invoices/InvoiceReturnModal\";\nimport CancelPaymentModal from \"./CancelPaymentModal\";\nimport * as _ from \"lodash\";\nimport {sendMail} from \"../../../utils/clinicUtils\";\n\nconst confirm = Modal.confirm;\n\nclass PatientPayments extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            payments: [],\n            active_practiceId: this.props.active_practiceId,\n            loading: true,\n            otpSent: false,\n            editPaymentVisible: false,\n            editPayment: null,\n        }\n\n    }\n\n    componentDidMount() {\n        let that = this;\n        this.loadPayments();\n\n    }\n\n\n    loadPayments = (page = 1) => {\n        let that = this;\n        if (that.props.refreshWallet && page == 1) {\n            that.props.refreshWallet();\n        }\n        this.setState({\n            loading: true\n        });\n        let successFn = function (data) {\n            that.setState(function (prevState) {\n                if (data.current == 1)\n                    return {\n                        payments: [...data.results],\n                        next: data.next,\n                        loading: false\n                    }\n                return {\n                    payments: [...prevState.payments, ...data.results],\n                    next: data.next,\n                    loading: false\n                }\n            })\n        }\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            })\n\n        }\n        let apiParams = {\n            page: page,\n            practice: this.props.active_practiceId,\n        };\n        if (this.props.match.params.id) {\n            apiParams.patient = this.props.match.params.id;\n        }\n        // if (this.props.showAllClinic && this.props.match.params.id) {\n        //     delete (apiParams.practice)\n        // }\n        getAPI(PATIENT_PAYMENTS_API, successFn, errorFn, apiParams);\n    };\n\n\n    loadPDF = (id) => {\n        let that = this;\n        let successFn = function (data) {\n            if (data.report)\n                window.open(BACKEND_BASE_URL + data.report);\n        };\n        let errorFn = function () {\n\n        };\n        getAPI(interpolate(PAYMENT_PDF, [id]), successFn, errorFn);\n    };\n\n    updateFormValue = (type, value) => {\n        this.setState({\n            [type]: value\n        })\n    };\n\n    mailModalOpen = () => {\n        this.setState({\n            visibleMail: true\n        })\n    };\n\n    mailModalClose = () => {\n        this.setState({\n            visibleMail: false\n        })\n    };\n\n    sendPatientMail = (payment) => {\n        this.mailModalOpen()\n        this.setState({\n            patientName: _.get(payment, 'patient_data.user.first_name'),\n            paymentId: _.get(payment, 'id'),\n            mail_to: _.get(payment, 'patient_data.user.email')\n        })\n\n    };\n\n    sendMailToPatient = () => {\n        let {mail_to, paymentId} = this.state;\n        let apiParams = {\n            mail_to: mail_to,\n        }\n        sendMail(interpolate(PAYMENT_PDF, [paymentId]), apiParams)\n        this.mailModalClose();\n    }\n\n\n    editModelOpen = (record) => {\n        let that = this;\n\n        let created_time = moment().diff(record.created_at, 'minutes');\n        console.log(\"otp\",created_time);\n        if (created_time > OTP_DELAY_TIME) {\n            that.setState({\n                editPaymentVisible: true,\n                cancelPaymentVisible: false,\n                editPayment: record,\n            });\n            let reqData = {\n                practice: this.props.active_practiceId,\n                type: 'Payment' + ':' + record.payment_id + ' ' + 'Edit'\n            }\n            let successFn = function (data) {\n                that.setState({\n                    otpSent: true,\n                    patientId: record.patient,\n                    paymentId: record.payment_id\n                })\n            };\n            let errorFn = function () {\n\n            };\n\n            postAPI(CANCELINVOICE_GENERATE_OTP, reqData, successFn, errorFn);\n        } else {\n            that.setState({\n                editPayment: record,\n            }, function () {\n                that.props.history.push(\"/patient/\" + record.patient + \"/billing/payments/edit\")\n            });\n        }\n    };\n\n\n    editPaymentData = (record) => {\n        let that = this;\n        // let id = this.props.match.params.id;\n        that.setState({\n            editPayment: record,\n        }, function () {\n            that.props.history.push(\"/patient/\" + record.patient + \"/billing/payments/edit/\")\n        });\n    };\n    // editPaymentClose = () => {\n    //     this.setState({\n    //         editPaymentVisible: false\n    //     })\n    // };\n    //\n    // handleSubmitEditPayment = (e) => {\n    //     let that = this;\n    //     e.preventDefault();\n    //     this.props.form.validateFields((err, values) => {\n    //         if (!err) {\n    //             let reqData = {\n    //                 ...values,\n    //                 practice: this.props.active_practiceId,\n    //             };\n    //             let successFn = function (data) {\n    //                 that.setState({\n    //                     editPaymentVisible: false,\n    //                 });\n    //                 that.editPaymentData(that.state.editPayment);\n    //\n    //             };\n    //             let errorFn = function () {\n    //\n    //             };\n    //             postAPI(CANCELINVOICE_VERIFY_OTP, reqData, successFn, errorFn);\n    //         }\n    //     });\n    // };\n    // editPaymentData=(record)=>{\n    //     let that =this;\n    //     console.log('\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\">',record);\n    //     that.setState({\n    //         editPayment:record,\n    //     },function () {\n    //         that.props.history.push(\"/patient/\" + record.patient + \"/billing/payments/edit\")\n    //     });\n    //\n    // };\n\n    cancelModalOpen = (record) => {\n        let that = this;\n        let created_time = moment().diff(record.created_at, 'minutes');\n        console.log(\"otp\",created_time,OTP_DELAY_TIME, record);\n        console.log(created_time>OTP_DELAY_TIME)\n            that.setState({\n                editPaymentVisible: false,\n                cancelPaymentVisible: true,\n                editPayment: record,\n            });\n            let reqData = {\n                practice: this.props.active_practiceId,\n                type: 'Payment' + ':' + record.payment_id + ' ' + ' Cancellation'\n            }\n            let successFn = function (data) {\n                that.setState({\n                    otpSent: true,\n                    patientId: record.patient,\n                    paymentId: record.id\n                })\n            }\n            let errorFn = function () {\n\n            };\n            if (created_time > OTP_DELAY_TIME) {\n                postAPI(CANCELINVOICE_GENERATE_OTP, reqData, successFn, errorFn);\n            } \n    };\n\n    deletePayment(patient, payment) {\n        let that = this;\n        let reqData = {patient: patient, is_cancelled: true};\n        let successFn = function (data) {\n            displayMessage(SUCCESS_MSG_TYPE, \"Payment cancelled successfully\")\n            that.loadPayments();\n        };\n        let errorFn = function () {\n        };\n        putAPI(interpolate(SINGLE_PAYMENT_API, [payment]), reqData, successFn, errorFn);\n\n    }\n\n\n    editPaymentClose = () => {\n        this.setState({\n            editPaymentVisible: false\n        })\n    };\n    cancelPaymentClose = () => {\n        this.setState({\n            cancelPaymentVisible: false\n        })\n    }\n\n\n    render() {\n        let that = this;\n        const paymentmodes = {}\n        if (this.state.paymentModes) {\n            this.state.paymentModes.forEach(function (mode) {\n                paymentmodes[mode.id] = mode.mode;\n            })\n        }\n\n\n        if (this.props.match.params.id) {\n            return <div>\n                <Switch>\n                    <Route exact path='/patient/:id/billing/payments/add'\n                           render={(route) => <AddPaymentForm {...this.state} {...route} {...this.props}\n                                                              loadData={this.loadPayments}/>}/>\n                    <Route exact path='/patient/:id/billing/payments/edit'\n                           render={(route) => (that.state.editPayment ?\n                               <AddPaymentForm {...this.state} {...route} {...this.props}\n                                               paymentId={this.state.paymentId}\n                                               loadData={this.loadPayments}/> :\n                               <Redirect to={\"/patient/\" + route.match.params.id + \"/billing/payments\"}/>)\n                           }/>\n                    <Route>\n                        <div>\n                            <Alert banner showIcon type={\"info\"}\n                                   message={\"The payments shown are only for the current selected practice!\"}/>\n                            <Card\n                                bodyStyle={{padding: 0}}\n                                title={this.state.currentPatient ? this.state.currentPatient.name + \" Payments\" : \"Payments\"}\n                                extra={<Button.Group>\n                                    <Link\n                                        to={\"/patient/\" + this.props.match.params.id + \"/billing/payments/add\"}><Button><Icon\n                                        type=\"plus\"/>Add</Button></Link>\n                                </Button.Group>}>\n                            </Card>\n                            {this.state.payments.map(payment => PaymentCard(payment, this))}\n                            <Spin spinning={this.state.loading}>\n                                <Row/>\n                            </Spin>\n                            <InfiniteFeedLoaderButton loaderFunction={() => this.loadPayments(that.state.next)}\n                                                      loading={this.state.loading}\n                                                      hidden={!this.state.next}/>\n                        </div>\n                    </Route>\n                </Switch>\n                <Modal\n                    title={null}\n                    visible={this.state.visibleMail}\n                    onOk={this.sendMailToPatient}\n                    onCancel={this.mailModalClose}\n                    footer={[\n                        <Button key=\"back\" onClick={this.mailModalClose}>\n                            Cancel\n                        </Button>,\n                        <Button key=\"submit\" type=\"primary\" onClick={this.sendMailToPatient}>\n                            Send\n                        </Button>,\n                    ]}\n                >\n                    <p>Send Payment To {this.state.patientName} ?</p>\n                    <Input value={that.state.mail_to} placeholder={\"Email\"}\n                           onChange={(e) => that.updateFormValue('mail_to', e.target.value)}/>\n                </Modal>\n\n                {that.state.cancelPaymentVisible ? \n                    <CancelPaymentModal {...that.state} key={\"cancel_payment\"}\n                                        cancelPaymentClose={that.cancelPaymentClose}\n                                        loadPayments={that.loadPayments}/>:null}\n\n            </div>\n        } else {\n            return <div>\n                <Card\n                    bodyStyle={{padding: 0}}\n                    title={this.state.currentPatient ? this.state.currentPatient.name + \" Payments\" : \"Payments\"}\n                    extra={<Button.Group>\n                        {/* onClick={() => this.props.togglePatientListModal(true)} */}\n                        <Button type={\"primary\"} onClick={() => this.props.togglePatientListModal(true)}>\n                            <Icon type=\"plus\"/>Add\n                        </Button>\n                    </Button.Group>}>\n                </Card>\n                {this.state.payments.map(payment => PaymentCard(payment, this))}\n                <Spin spinning={this.state.loading}>\n                    <Row/>\n                </Spin>\n                <InfiniteFeedLoaderButton loaderFunction={() => this.loadPayments(that.state.next)}\n                                          loading={this.state.loading}\n                                          hidden={!this.state.next}/>\n                <Modal\n                    title={null}\n                    visible={this.state.visibleMail}\n                    onOk={this.sendMailToPatient}\n                    onCancel={this.mailModalClose}\n                    footer={[\n                        <Button key=\"back\" onClick={this.mailModalClose}>\n                            Cancel\n                        </Button>,\n                        <Button key=\"submit\" type=\"primary\" onClick={this.sendMailToPatient}>\n                            Send\n                        </Button>,\n                    ]}\n                >\n                    <p>Send Payment To {this.state.patientName} ?</p>\n                    <Input value={that.state.mail_to} placeholder={\"Email\"}\n                           onChange={(e) => that.updateFormValue('mail_to', e.target.value)}/>\n                </Modal>\n\n                {that.state.cancelPaymentVisible ? \n                    <CancelPaymentModal {...that.state} key={'cancel_payment'}\n                                        cancelPaymentClose={that.cancelPaymentClose}\n                                        loadPayments={that.loadPayments}/>:null}\n\n            </div>\n        }\n\n    }\n}\n\nexport default Form.create()(PatientPayments);\n\nconst columns = [{\n    title: 'INVOICE',\n    dataIndex: 'invoice_id',\n    key: 'invoice',\n    render: invoice => <span>{invoice}</span>,\n}, {\n    title: 'Amount Paid',\n    key: 'pay_amount',\n    dataIndex: 'pay_amount',\n    render: value => value ? value.toFixed(2) : 0,\n}];\n\nfunction PaymentCard(payment, that) {\n    const {getFieldDecorator} = that.props.form;\n    let advancePay = [];\n    if (payment.is_advance) {\n        advancePay.push({\n            invoice_id: \"Advance Payment\",\n            pay_amount: payment.advance_value\n        })\n    }\n    return <Card style={{marginTop: 10}} \n                 key={payment.id}\n                 bodyStyle={{padding: 0}}\n                 title={(payment.patient_data && !that.props.currentPatient ?\n                     <small>{payment.date ? moment(payment.date).format('lll') : null}\n                         <Link to={\"/patient/\" + payment.patient_data.id + \"/billing/payments\"}>\n                             &nbsp;&nbsp; {payment.patient_data.user.first_name} (ID: {payment.patient_data.custom_id ? payment.patient_data.custom_id : payment.patient_data.id})&nbsp;\n                         </Link>\n                         <span>, {payment.patient_data.gender}</span></small>\n                     : <small>{payment.created_at ? moment(payment.created_at).format('lll') : null}</small>)}\n                 extra={<Dropdown.Button\n                     size={\"small\"}\n                     style={{float: 'right'}}\n                     overlay={<Menu>\n                         <Menu.Item key=\"2\" onClick={() => that.editModelOpen(payment)}\n                                    disabled={(payment.practice != that.props.active_practiceId)}>\n                             <Icon type=\"edit\"/>\n                             Edit\n                         </Menu.Item>\n                         <Menu.Item key=\"3\" onClick={() => that.cancelModalOpen(payment)}\n                                    disabled={(payment.practice != that.props.active_practiceId) || payment.is_cancelled}>\n                             <Icon type=\"delete\"/>\n                             Cancel\n                         </Menu.Item>\n                         <Menu.Divider/>\n                         <Menu.Item key=\"4\">\n                             <Link to={\"/patient/\" + payment.patient + \"/emr/timeline\"}>\n                                 <Icon type=\"clock-circle\"/>\n                                 Patient Timeline\n                             </Link>\n                         </Menu.Item>\n\n                         <Menu.Divider/>\n                         <Menu.Item key={'4'}>\n                             <a onClick={() => that.sendPatientMail(payment)}><Icon\n                                 type=\"mail\"/> Send mail to patient\n                             </a>\n                         </Menu.Item>\n\n                     </Menu>}>\n                     <a onClick={() => that.loadPDF(payment.id)}><Icon\n                         type=\"printer\"/></a>\n                 </Dropdown.Button>}>\n\n\n        <Row gutter={8}>\n            <Col xs={24} sm={24} md={6} lg={4} xl={4} xxl={4} style={{padding: 10}}>\n                {payment.is_cancelled ?\n                    <Alert message=\"Cancelled\" type=\"error\" showIcon/> : null}\n                <Divider style={{marginBottom: 0}}>{payment.payment_id}</Divider>\n\n            </Col>\n            <Col xs={24} sm={24} md={18} lg={20} xl={20} xxl={20}>\n\n                <Table columns={columns}\n                       pagination={false}\n                       footer={() => PaymentFooter({practice: payment.practice_data, notes: payment.notes, cancel_note : payment.cancel_note})}\n                       dataSource={[...payment.invoices, ...advancePay]} rowKey={payment.id}/>\n            </Col>\n        </Row>\n\n        {that.state.editPaymentVisible && that.state.otpSent &&\n        <EditPaymentModal {...that.state} payment={payment} editPaymentClose={that.editPaymentClose}\n        key={payment.id}\n                          editPaymentData={that.editPaymentData} {...that.props} />}\n\n        \n\n    </Card>\n}\n\nfunction PaymentFooter(presc) {\n    if (presc) {\n        return <p>\n            {presc.doctor ? <Tooltip title=\"Doctor\"><Tag color={presc.doctor ? presc.doctor.calendar_colour : null}>\n                <b>{\"prescribed by  \" + presc.doctor.user.first_name} </b>\n            </Tag></Tooltip> : null}\n            {presc.practice ? <Tag style={{float: 'right'}}>\n                <Tooltip title=\"Practice Name\">\n                    <b>{presc.practice.name} </b>\n                </Tooltip>\n            </Tag> : null}\n            {presc.notes ? <p>Notes: {presc.notes}</p> : null}\n            {presc.cancel_note ? <p>Cancel Notes: {presc.cancel_note}</p> : null}\n        </p>\n    }\n    return null\n}\n","import React from \"react\";\nimport {\n    Affix,\n    Alert,\n    Card,\n    Col,\n    Divider,\n    Modal,\n    Row,\n    Spin,\n    Statistic,\n    Table,\n    Tag,\n    Tooltip,\n    Form,\n    Menu,\n    Icon,\n    Button,\n    Dropdown,\n    Input,\n} from \"antd\";\nimport {displayMessage, getAPI, interpolate, putAPI, postAPI} from \"../../../utils/common\";\nimport {\n    INVOICE_RETURN_API,\n    DRUG_CATALOG,\n    PROCEDURE_CATEGORY,\n    TAXES,\n    RETURN_INVOICE_PDF_API,\n    SINGLE_RETURN_API,\n    CANCELINVOICE_GENERATE_OTP,\n    CANCELINVOICE_RESENT_OTP,\n    CANCELINVOICE_VERIFY_OTP, INVOICE_PDF_API\n} from \"../../../constants/api\";\nimport moment from \"moment\";\nimport {Route, Switch} from \"react-router\";\nimport InfiniteFeedLoaderButton from \"../../common/InfiniteFeedLoaderButton\";\nimport {Link, Redirect} from \"react-router-dom\";\nimport {BACKEND_BASE_URL} from \"../../../config/connect\";\nimport {SUCCESS_MSG_TYPE, OTP_DELAY_TIME} from \"../../../constants/dataKeys\";\nimport * as _ from \"lodash\";\nimport {sendMail} from \"../../../utils/clinicUtils\";\nimport { REQUIRED_FIELD_MESSAGE } from \"../../../constants/messages\";\n\n\nconst { TextArea } = Input;\nclass ReturnInvoices extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            currentPatient: this.props.currentPatient,\n            active_practiceId: this.props.active_practiceId,\n            returnInvoices: [],\n            drug_catalog: null,\n            procedure_category: null,\n            taxes_list: null,\n            loading: true,\n            cancelReturnIncoiceVisible:false,\n            otpField:false,\n        }\n        this.loadReturnInvoices = this.loadReturnInvoices.bind(this);\n        this.loadDrugCatalog = this.loadDrugCatalog.bind(this);\n        this.loadProcedureCategory = this.loadProcedureCategory.bind(this);\n        this.loadTaxes = this.loadTaxes.bind(this);\n\n    }\n\n    componentDidMount() {\n        let that =this\n        that.loadReturnInvoices();\n       \n    }\n\n    loadReturnInvoices(page = 1) {\n        let that = this;\n        if (that.props.refreshWallet && page==1){\n            that.props.refreshWallet();\n        }\n        that.setState({\n            loading: true\n        });\n        let successFn = function (data) {\n            if (data.current == 1) {\n                that.setState({\n                    total: data.count,\n                    returnInvoices: data.results,\n                    loading: false,\n                    loadMoreReturnInvoice: data.next\n                })\n            } else {\n                that.setState(function (prevState) {\n                    return {\n                        total: data.count,\n                        returnInvoices: [...prevState.returnInvoices, ...data.results],\n                        loading: false,\n                        loadMoreReturnInvoice: data.next\n                    }\n                })\n            }\n        }\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            })\n\n        }\n        let apiParams = {\n            page: page,\n            practice: this.props.active_practiceId,\n        };\n        if (this.props.match.params.id) {\n            apiParams.patient = this.props.match.params.id;\n        }\n        // if (this.props.showAllClinic && this.props.match.params.id) {\n        //     delete (apiParams.practice)\n        // }\n        getAPI(INVOICE_RETURN_API, successFn, errorFn, apiParams);\n    }\n\n    loadDrugCatalog() {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                drug_catalog: data,\n            })\n        }\n        let errorFn = function () {\n\n        }\n        getAPI(interpolate(DRUG_CATALOG, [this.props.active_practiceId]), successFn, errorFn)\n    }\n\n    loadProcedureCategory() {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                procedure_category: data,\n            })\n        }\n        let errorFn = function () {\n\n\n        }\n        getAPI(interpolate(PROCEDURE_CATEGORY, [this.props.active_practiceId]), successFn, errorFn);\n    }\n\n    loadTaxes() {\n        var that = this;\n        let successFn = function (data) {\n            that.setState({\n                taxes_list: data,\n            })\n        };\n        let errorFn = function () {\n        };\n        getAPI(interpolate(TAXES, [this.props.active_practiceId]), successFn, errorFn);\n\n    }\n\n\n\n    loadPDF = (id) => {\n        let that = this;\n        let successFn = function (data) {\n            if (data.report)\n                window.open(BACKEND_BASE_URL + data.report);\n        }\n        let errorFn = function () {\n\n        }\n        getAPI(interpolate(RETURN_INVOICE_PDF_API, [id]), successFn, errorFn);\n    }\n\n\n    updateFormValue =(type,value)=>{\n        this.setState({\n            [type]: value\n        })\n    };\n\n    mailModalOpen =() =>{\n        this.setState({\n            visibleMail:true\n        })\n    };\n\n    mailModalClose =() =>{\n        this.setState({\n            visibleMail:false\n        })\n    };\n\n    sendPatientMail =(invoice)=>{\n        this.mailModalOpen()\n        this.setState({\n            patientName:_.get(invoice,'patient_data.user.first_name'),\n            paymentId:_.get(invoice,'id'),\n            mail_to:_.get(invoice,'patient_data.user.email')\n        })\n\n    };\n\n    sendMailToPatient =()=>{\n        let {mail_to ,paymentId } = this.state;\n        let apiParams ={\n            mail_to:mail_to,\n        }\n        sendMail(interpolate(RETURN_INVOICE_PDF_API,[paymentId]),apiParams)\n        this.mailModalClose();\n    }\n\n    cancelModalOpen = (record) => {\n        let that = this;\n        let created_time=moment().diff(record.created_at,'minutes');\n            if(created_time>OTP_DELAY_TIME){\n                that.setState({\n                    otpField:true\n                })\n            }\n            that.setState({\n                cancelReturnIncoiceVisible: true,\n                editReturnInvoice: record,\n                patientId:record.patient\n            });\n            let reqData = {\n                practice: this.props.active_practiceId,\n                type: 'Return Invoice' + ':' + record.return_id + ' ' + ' Cancellation'\n            }\n            let successFn = function (data) {\n                that.setState({\n                    otpSent: true,\n                    patientId: record.patient,\n                    returnInvoiceId: record.id\n                })\n            }\n            let errorFn = function () {\n\n            };\n            if(created_time >OTP_DELAY_TIME){\n                postAPI(CANCELINVOICE_GENERATE_OTP, reqData, successFn, errorFn);\n            }\n    };\n\n\n    sendOTP() {\n        let that = this;\n        let successFn = function (data) {\n\n        }\n        let errorFn = function () {\n\n        }\n        getAPI(CANCELINVOICE_RESENT_OTP, successFn, errorFn);\n    }\n\n    cancelReturnInvoiceClose = () => {\n        this.setState({\n            cancelReturnIncoiceVisible: false\n        })\n    }\n    handleSubmitCancelReturnInvoice = (e) => {\n        let that = this;\n        let created_time=moment().diff(that.state.editReturnInvoice.created_at,'minutes');\n        e.preventDefault();\n        this.props.form.validateFields((err, values) => {\n            if (!err) {\n                let reqData = {\n                    ...values,\n                    practice: this.props.active_practiceId,\n                }\n\n                let successFn = function (data) {\n                    that.setState({\n                        cancelReturnIncoiceVisible: false,\n                        otpField:false,\n                    });\n                    that.deleteReturnInvoice(that.state.patientId, that.state.returnInvoiceId, values.cancel_note)\n                };\n                let errorFn = function () {\n\n                };\n                if(created_time >OTP_DELAY_TIME){\n                    postAPI(CANCELINVOICE_VERIFY_OTP, reqData, successFn, errorFn);\n                }else{\n                    that.deleteReturnInvoice(that.state.patientId, that.state.editReturnInvoice.id, values.cancel_note)\n                }\n            }\n        });\n    }\n    // deleteReturnInvoice(patient ,returnInvoiceId)\n    deleteReturnInvoice(patient ,returnInvoiceId ,cancel_note) {\n        let that = this;\n        let reqData = {patient: patient, \n            is_cancelled: true,\n            cancel_note:cancel_note\n        };\n        let successFn = function (data) {\n            displayMessage(SUCCESS_MSG_TYPE, \"Return Invoice cancelled successfully\")\n            that.loadReturnInvoices();\n            that.cancelReturnInvoiceClose();\n        }\n        let errorFn = function () {\n        }\n        putAPI(interpolate(SINGLE_RETURN_API, [returnInvoiceId]), reqData, successFn, errorFn);\n     }\n\n    render() {\n        let that = this;\n        const drugs = {}\n        if (this.state.drug_catalog) {\n\n            this.state.drug_catalog.forEach(function (drug) {\n                drugs[drug.id] = (drug.name + \",\" + drug.strength)\n            })\n        }\n        const procedures = {}\n        if (this.state.procedure_category) {\n            this.state.procedure_category.forEach(function (procedure) {\n                procedures[procedure.id] = procedure.name;\n            })\n        }\n\n        const taxesdata = {}\n        if (this.state.taxes_list) {\n            this.state.taxes_list.forEach(function (tax) {\n                taxesdata[tax.id] = tax.name;\n            })\n        }\n        const {getFieldDecorator} = that.props.form;\n\n        if (this.props.match.params.id) {\n            return <div>\n                <Switch>\n                    <Route>\n                        <div>\n                            <Alert banner showIcon type={\"info\"}\n                                   message={\"The invoices return shown are only for the current selected practice!\"}/>\n                            <Affix offsetTop={0}>\n                                <Card bodyStyle={{padding: 0}}\n                                      style={{boxShadow: '0 5px 8px rgba(0, 0, 0, 0.09)'}}\n                                      title={(this.state.currentPatient ? this.state.currentPatient.user.first_name + \" Invoice Return\" : \"Invoices Return \") + (this.state.total ? `(Total:${this.state.total})` : '')}\n                                    //   extra={<Button.Group>\n                                    //       <Link to={\"/patient/\" + this.props.match.params.id + \"/billing/invoices/add\"}>\n                                    //           <Button type={\"primary\"}>\n                                    //               <Icon type=\"plus\"/>Add\n                                    //           </Button>\n                                    //       </Link>\n                                    //   </Button.Group>}>\n                                    >\n                                </Card>\n                            </Affix>\n                            {this.state.returnInvoices.map(invoice => InvoiceCard(invoice, that))}\n                            <Spin spinning={this.state.loading}>\n                                <Row/>\n                            </Spin>\n                            <InfiniteFeedLoaderButton\n                                loaderFunction={() => this.loadInvoices(this.state.loadMoreInvoice)}\n                                loading={this.state.loading}\n                                hidden={!this.state.loadMoreInvoice}/>\n\n                        </div>\n                    </Route>\n                </Switch>\n\n                <Modal\n                    title={null}\n                    visible={this.state.visibleMail}\n                    onOk={this.sendMailToPatient}\n                    onCancel={this.mailModalClose}\n                    footer={[\n                        <Button key=\"back\" onClick={this.mailModalClose}>\n                            Cancel\n                        </Button>,\n                        <Button key=\"submit\" type=\"primary\"  onClick={this.sendMailToPatient}>\n                            Send\n                        </Button>,\n                    ]}\n                >\n                    <p>Send invoice To {this.state.patientName} ?</p>\n                    <Input value={that.state.mail_to} placeholder={\"Email\"}\n                           onChange={(e)=>that.updateFormValue('mail_to',e.target.value)}/>\n                </Modal>\n\n                <Modal\n                    visible={that.state.cancelReturnIncoiceVisible}\n                    title=\"Cancel Return Invoice\"\n                    footer={null}\n                    onOk={that.handleSubmitCancelReturnInvoice}\n                    onCancel={that.cancelReturnInvoiceClose}>\n                    <Form>\n                        <Form.Item key=\"cancel_notes\">\n                            {getFieldDecorator('cancel_note',{\n                                rules:[{required:true, message:REQUIRED_FIELD_MESSAGE}],\n                            })(\n                                <TextArea placeholder=\"cancel notes\"/>\n                            )}\n                        </Form.Item>\n                        {that.state.otpField &&\n                            <Form.Item>\n                                {getFieldDecorator('otp', {\n                                    rules: [{required: true, message: 'Please input Otp!'}],\n                                })(\n                                    <Input prefix={<Icon type=\"user\" style={{color: 'rgba(0,0,0,.25)'}}/>}\n                                        placeholder=\"Otp\"\n                                    />,\n                                )}\n                            </Form.Item>\n                        }\n                        <Form.Item>\n                            {that.state.otpSent ? <a style={{float: 'right'}} type=\"primary\" onClick={that.sendOTP}>\n                                Resend Otp ?\n                            </a> : null}\n                            <Button size=\"small\" type=\"primary\" htmlType=\"submit\" onClick={that.handleSubmitCancelReturnInvoice}>\n                                Submit\n                            </Button>&nbsp;\n                            <Button size=\"small\" onClick={that.cancelReturnInvoiceClose}>\n                                Close\n                            </Button>\n                        </Form.Item>\n                    </Form>\n                </Modal>\n\n            </div>\n        } else {\n            return <div>\n                <Affix offsetTop={0}>\n                    <Card bodyStyle={{padding: 0}}\n                          style={{boxShadow: '0 5px 8px rgba(0, 0, 0, 0.09)'}}\n                          title={(this.state.currentPatient ? this.state.currentPatient.user.first_name + \" Invoice Return\" : \"Invoice Return \") + (this.state.total ? `(Total:${this.state.total})` : '')}\n                        //   extra={<Button.Group>\n                        //       <Button type={\"primary\"} onClick={() => this.props.togglePatientListModal(true)}>\n                        //           <Icon type=\"plus\"/>Add\n                        //       </Button>\n                        //   </Button.Group>}>\n                        >\n                    </Card>\n                </Affix>\n                {this.state.returnInvoices.map(invoice => InvoiceCard(invoice, that))}\n                <Spin spinning={this.state.loading}>\n                    <Row/>\n                </Spin>\n                <InfiniteFeedLoaderButton loaderFunction={() => this.loadInvoices(this.state.loadMoreInvoice)}\n                                          loading={this.state.loading}\n                                          hidden={!this.state.loadMoreInvoice}/>\n\n                <Modal\n                    title={null}\n                    visible={this.state.visibleMail}\n                    onOk={this.sendMailToPatient}\n                    onCancel={this.mailModalClose}\n                    footer={[\n                        <Button key=\"back\" onClick={this.mailModalClose}>\n                            Cancel\n                        </Button>,\n                        <Button key=\"submit\" type=\"primary\"  onClick={this.sendMailToPatient}>\n                            Send\n                        </Button>,\n                    ]}\n                >\n                    <p>Send invoice To {this.state.patientName} ?</p>\n                    <Input value={that.state.mail_to} placeholder={\"Email\"}\n                           onChange={(e)=>that.updateFormValue('mail_to',e.target.value)}/>\n                </Modal>\n\n                <Modal\n                    visible={that.state.cancelReturnIncoiceVisible}\n                    title=\"Cancel Return Invoice\"\n                    footer={null}\n                    onOk={that.handleSubmitCancelReturnInvoice}\n                    onCancel={that.cancelReturnInvoiceClose}>\n                    <Form>\n                        <Form.Item key=\"cancel_notes\">\n                            {getFieldDecorator('cancel_note',{\n                                rules:[{required:true, message:REQUIRED_FIELD_MESSAGE}],\n                            })(\n                                <TextArea placeholder=\"cancel notes\"/>\n                            )}\n                        </Form.Item>\n                        {that.state.otpField &&\n                            <Form.Item>\n                                {getFieldDecorator('otp', {\n                                    rules: [{required: true, message: 'Please input Otp!'}],\n                                })(\n                                    <Input prefix={<Icon type=\"user\" style={{color: 'rgba(0,0,0,.25)'}}/>}\n                                        placeholder=\"Otp\"\n                                    />,\n                                )}\n                            </Form.Item>\n                        }\n                        <Form.Item>\n                            {that.state.otpSent ? <a style={{float: 'right'}} type=\"primary\" onClick={that.sendOTP}>\n                                Resend Otp ?\n                            </a> : null}\n                            <Button size=\"small\" type=\"primary\" htmlType=\"submit\" onClick={that.handleSubmitCancelReturnInvoice}>\n                                Submit\n                            </Button>&nbsp;\n                            <Button size=\"small\" onClick={that.cancelReturnInvoiceClose}>\n                                Close\n                            </Button>\n                        </Form.Item>\n                    </Form>\n                </Modal>\n\n            </div>\n        }\n\n    }\n}\n\nexport default Form.create()(ReturnInvoices);\n\nfunction invoiceFooter(presc) {\n    if (presc) {\n        return <p>\n            {presc.staff ? <Tooltip title=\"Staff\"><Tag color={presc.staff ? presc.staff_data.calendar_colour : null}>\n                <b>{\"Return by  \" + presc.staff_data.user.first_name} </b>\n            </Tag></Tooltip> : null}\n            {presc.practice ? <Tag style={{float: 'right'}}>\n                <Tooltip title=\"Practice Name\">\n                    <b>{presc.practice_data.name} </b>\n                </Tooltip>\n            </Tag> : null}\n            {presc.notes ? <p>Notes: {presc.notes}</p> : null}\n            {presc.cancel_note ? <p>Cancel Notes: {presc.cancel_note}</p> : null}\n        </p>\n    }\n    return null\n}\n\nfunction InvoiceCard(invoice, that) {\n    \n\n    return <Card\n        key={invoice.id}\n        style={{marginTop: 10}}\n        bodyStyle={{padding: 0}}\n        title={<small>{invoice.date ? moment(invoice.date).format('ll') : null}\n            {that.state.currentPatient ? null : <span>\n            <Link to={\"/patient/\" + (invoice.patient_data ? invoice.patient_data.id : null) + \"/billing/return/invoices\"}>\n                &nbsp;&nbsp; {invoice.patient_data ? invoice.patient_data.user.first_name : null} (ID: {invoice.patient_data.custom_id? invoice.patient_data.custom_id :invoice.patient_data.id })&nbsp;\n            </Link>, {invoice.patient_data ? invoice.patient_data.gender : null}</span>}\n        </small>}\n          extra={<Dropdown.Button\n            size={\"small\"}\n            style={{float: 'right'}}\n            overlay={<Menu>\n                {/* <Menu.Item key=\"1\" onClick={() => that.deleteReturnInvoice(invoice)} */}\n                <Menu.Item key=\"1\" onClick={() =>that.cancelModalOpen(invoice)}\n                           disabled={(invoice.practice != that.props.active_practiceId) || invoice.payments_data || invoice.is_cancelled}>\n                    <Icon type=\"delete\"/>\n                    Cancel\n                </Menu.Item>\n                <Menu.Divider/>\n                <Menu.Item key={'2'}>\n                    <a onClick={() => that.sendPatientMail(invoice)}><Icon\n                        type=\"mail\"/> Send mail to patient\n                    </a>\n                </Menu.Item>\n            </Menu>}>\n            <a onClick={() => that.loadPDF(invoice.id)}><Icon\n                type=\"printer\"/></a>\n        </Dropdown.Button>}>\n        <Row gutter={8}>\n            <Col xs={24} sm={24} md={6} lg={4} xl={4} xxl={4} style={{padding: 10}}>\n                {invoice.is_cancelled ?\n                    <Alert message=\"Cancelled\" type=\"error\" showIcon/> : null}\n                <Divider style={{marginBottom: 0}}>{invoice.return_id}</Divider>\n                <Statistic title=\"Cash / Return \"\n                           value={(invoice.cash_return ? invoice.cash_return.toFixed(2) : 0)}\n                           suffix={\"/ \" + (invoice.return_value ? invoice.return_value.toFixed(2):0)}/>\n            </Col>\n            <Col xs={24} sm={24} md={18} lg={20} xl={20} xxl={20}>\n\n                    <Table\n                        bordered={true}\n                        pagination={false}\n                        columns={columns}\n                        dataSource={[...invoice.inventory, ...invoice.procedure]}\n                        footer={() => invoiceFooter({...invoice})}/>\n            </Col>\n        </Row>\n\n        \n\n\n    </Card>\n}\n\nconst columns = [{\n    title: 'Treatment & Products',\n    dataIndex: 'drug',\n    key: 'drug',\n    render: (text, record) => (\n        <span> <b>{record.name ? record.name : null}</b>\n                    {/* <br/> {record.staff_data ?\n                <Tag color={record.staff_data ? record.staff_data.calendar_colour : null}>\n                    <b>{\"return by  \" + record.staff_data.user.first_name} </b>\n                </Tag> : null} */}\n                </span>)\n}, {\n    title: 'Cost',\n    dataIndex: 'unit_cost',\n    key: 'unit_cost',\n    render: (item, record) => <span>{record.unit_cost ? record.unit_cost.toFixed(2) : null}</span>\n}, {\n    title: 'Unit',\n    dataIndex: 'unit',\n    key: 'unit',\n}, {\n    title: 'Discount',\n    dataIndex: 'discount_value',\n    key: 'discount_value',\n    render: (item, record) => <span>{record.discount_value ? record.discount_value.toFixed(2) : null}</span>\n}, {\n    title: 'Tax',\n    dataIndex: 'tax_value',\n    key: 'tax_value',\n    render: (item, record) => <span>{record.tax_value ? record.tax_value.toFixed(2) : null}</span>\n}, {\n    title: 'Total',\n    dataIndex: 'total',\n    key: 'total',\n    render: item => item ? item.toFixed(2) : null\n}];\n","import React from \"react\";\n\nexport const patientInvoiceDetailsInString = function (invoiceObj) {\n    let invoiceDetailsString = '';\n    if (invoiceObj.type != \"Invoice\")\n        invoiceDetailsString += invoiceObj.type + \", \";\n    if (invoiceObj.procedure)\n        invoiceObj.procedure.forEach(function (proc) {\n            if (proc.procedure_data)\n                invoiceDetailsString += proc.procedure_data.name + \", \"\n        });\n    if (invoiceObj.inventory)\n        invoiceObj.inventory.forEach(function (proc) {\n            if (proc.inventory_item_data)\n                invoiceDetailsString += proc.inventory_item_data.name + \", \"\n        });\n    if (invoiceObj.reservation)\n        invoiceDetailsString += invoiceObj.type + \",\";\n    if (invoiceObj.reservation_data && invoiceObj.reservation_data.medicines)\n        invoiceObj.reservation_data.medicines.forEach(function (proc) {\n            invoiceDetailsString += proc.name + ','\n        });\n\n    return invoiceDetailsString.trim(',');\n\n}\n\nexport const patientPaymentDetailsInString = function (paymentObj) {\n    let paymentDetailsString = '';\n    if (paymentObj.invoices)\n        paymentObj.invoices.forEach(function (inv) {\n            if (inv.invoice)\n                paymentDetailsString += inv.invoice.invoice_id + \", \"\n        })\n    return paymentDetailsString;\n}\n\nexport const patientReturnInvoiceDetailsInString = function (payObj) {\n    let paymentDetailsString = '';\n    if (payObj.procedure)\n        payObj.procedure.forEach(function (proc) {\n            if (proc.procedure_data)\n                paymentDetailsString += proc.procedure_data.name + \", \"\n        });\n    if (payObj.inventory)\n        payObj.inventory.forEach(function (proc) {\n            paymentDetailsString += proc.name + \", \"\n        });\n    if (payObj.reservation)\n        paymentDetailsString += payObj.type + \",\";\n    if (payObj.reservation_data && payObj.reservation_data.medicines)\n        payObj.reservation_data.medicines.forEach(function (proc) {\n            paymentDetailsString += proc.name + ','\n        });\n\n    return paymentDetailsString.trim(',');\n\n}","import React from \"react\";\nimport {Card, Table, Row, Button, Icon, Checkbox, Col} from \"antd\";\nimport {Link} from \"react-router-dom\";\nimport {BACKEND_BASE_URL} from \"../../../config/connect\";\nimport {getAPI, interpolate} from \"../../../utils/common\";\nimport {PATIENT_LEDGER} from \"../../../constants/api\";\nimport {\n    patientInvoiceDetailsInString,\n    patientPaymentDetailsInString,\n    patientReturnInvoiceDetailsInString\n} from \"../../../utils/patientUtils\";\n\nclass PatientLedgers extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            loading: false,\n            ledger: [],\n            loadingLedger: false,\n            selectedList: {},\n            credit: 0,\n            debit: 0,\n            balance: 0,\n        }\n    }\n\n    componentDidMount() {\n        this.loadPatientLedger();\n    }\n\n    loadPatientLedger = () => {\n        let that = this;\n        if (that.props.refreshWallet){\n            that.props.refreshWallet();\n        }\n        this.setState({\n            loadingLedger: true\n        })\n        let successFn = function (data) {\n            let ledgerData = [];\n            let balance = 0;\n            let totalCredit = 0;\n            let totalDebit = 0;\n            data.forEach(function (dataRow) {\n                let ledgerEntry = {\n                    date: dataRow.date,\n                    type: dataRow.ledger_type\n                };\n                if (dataRow.ledger_type == 'Invoice') {\n                    ledgerEntry.type_id = dataRow.invoice_id;\n                    ledgerEntry.details = patientInvoiceDetailsInString(dataRow);\n                    ledgerEntry.credit = dataRow.total;\n                    ledgerEntry.debit = 0;\n                    ledgerEntry.return = 0;\n                    ledgerEntry.cash_return = 0;\n\n                } else if (dataRow.ledger_type == 'Payment') {\n                    ledgerEntry.type_id = dataRow.payment_id;\n                    ledgerEntry.details = patientPaymentDetailsInString(dataRow);\n                    if (dataRow.return_pay) {\n                        ledgerEntry.credit = 0;\n                        ledgerEntry.debit = 0;\n                        ledgerEntry.return = -1 * (dataRow.total + dataRow.advance_value);\n                    } else {\n                        ledgerEntry.credit = 0;\n                        ledgerEntry.debit = dataRow.total + dataRow.advance_value;\n                        ledgerEntry.return = 0;\n                    }\n                    ledgerEntry.cash_return = 0;\n\n                } else if (dataRow.ledger_type == 'Return') {\n                    ledgerEntry.type_id = dataRow.return_id;\n                    ledgerEntry.details = patientReturnInvoiceDetailsInString(dataRow);\n                    ledgerEntry.credit = dataRow.cash_return;\n                    ledgerEntry.debit = 0;\n                    ledgerEntry.return = dataRow.return_value;\n                    if(dataRow.with_tax == false){\n                        ledgerEntry.credit += dataRow.taxes;\n                    }\n                    ledgerEntry.cash_return = dataRow.cash_return;\n                }\n                balance += ledgerEntry.credit;\n                balance -= ledgerEntry.debit;\n                totalDebit += ledgerEntry.debit;\n                totalCredit += ledgerEntry.credit;\n                ledgerEntry.balance = balance;\n                ledgerData.push(ledgerEntry);\n            });\n            that.setState({\n                loadingLedger: false,\n                credit: totalCredit,\n                debit: totalDebit,\n                balance: balance,\n                ledger: ledgerData\n            })\n        }\n        let errorFn = function () {\n            that.setState({\n                loadingLedger: false\n            })\n        }\n        let apiParams = {\n            practice_id: this.props.active_practiceId\n        };\n        if (this.props.showAllClinic && this.props.match.params.id) {\n            delete (apiParams.practice)\n        }\n        getAPI(interpolate(PATIENT_LEDGER, [that.props.currentPatient.id]), successFn, errorFn, apiParams);\n    }\n\n    ledgerCompleteToggle(id, option) {\n        this.setState(function (prevState) {\n            return {selectedList: {...prevState.selectedList, [id]: !!option}}\n        });\n    }\n\n    loadPDF = (id) => {\n        let that = this;\n        let successFn = function (data) {\n            if (data.report)\n                window.open(BACKEND_BASE_URL + data.report);\n        }\n        let errorFn = function () {\n\n        }\n        // getAPI(interpolate(INVOICE_PDF_API, [id]), successFn, errorFn);\n    }\n\n    render() {\n        const columns = [\n            //     {\n            //     title: '',\n            //     key: 'is_completed',\n            //     render: (text, record) => (record.is_completed ?\n            //         <Icon type=\"check-circle\" theme=\"twoTone\" style={{marginLeft: '8px', fontSize: '20px'}}/> :\n            //         <Checkbox key={record.id}\n            //                   onChange={(e) => this.ledgerCompleteToggle(record.id, e.target.checked)}\n            //                   value={this.state.selectedList[record.id]}/>)\n            // },\n            {\n                title: 'Date',\n                key: 'date',\n                dataIndex: \"date\",\n                width:120\n            }, {\n                title: 'Invoice/ Receipt/ Return No',\n                key: 'type_id',\n                dataIndex: \"type_id\",\n            }, {\n                title: 'Details',\n                key: 'details',\n                dataIndex: \"details\",\n            }, {\n                title: 'Type',\n                key: 'type',\n                dataIndex: \"type\",\n            }, {\n                title: 'Return(INR)',\n                key: 'return',\n                dataIndex: \"return\",\n                align: \"right\",\n                render: value => value.toFixed(2)\n            }, {\n                title: 'Cash Return(INR)',\n                key: 'cash_return',\n                dataIndex: \"cash_return\",\n                align: \"right\",\n                render: value => value.toFixed(2)\n            }, {\n                title: 'Credit(INR)',\n                key: 'credit',\n                dataIndex: \"credit\",\n                align: \"right\",\n                render: value => value.toFixed(2)\n            }, {\n                title: 'Debit(INR)',\n                key: 'debit',\n                dataIndex: \"debit\",\n                align: \"right\",\n                render: value => value.toFixed(2)\n            }, {\n                title: 'Balance(INR)',\n                key: 'balance',\n                dataIndex: \"balance\",\n                align: \"right\",\n                render: value => value.toFixed(2)\n            }];\n        return <Row>\n            <Card\n                title={this.state.currentPatient ? this.state.currentPatient.name + \" Payment Ledger\" : \"Patient Ledgers\"}\n                extra={<Button.Group>\n                    {/*<Button type=\"primary\">*/}\n                    {/*    <Icon type=\"printer\"/>Print billing summary*/}\n                    {/*</Button>*/}\n                    <Link to={\"/patient/\" + this.props.match.params.id + \"/billing/payments\"}> <Button\n                        type=\"primary\">\n                        <Icon type=\"plus\"/>&nbsp;Add Payment</Button>\n                    </Link>\n\n                    <Link to={\"/patient/\" + this.props.match.params.id + \"/billing/invoices\"}> <Button\n                        type=\"primary\">\n                        <Icon type=\"plus\"/>&nbsp;Add Invoice</Button>\n                    </Link>&nbsp;\n\n                    {/*<Button type=\"primary\" onClick={() => this.loadPDF()}>*/}\n                    {/*    <Icon type=\"printer\"/>&nbsp;Print*/}\n                    {/*</Button>&nbsp;*/}\n\n                    {/*<Button type=\"primary\" onClick={this.submitLedgers}>*/}\n                    {/*    <Icon type=\"save\"/>Send Payment Reminder*/}\n                    {/*</Button>*/}\n                </Button.Group>}>\n                <Table loading={this.state.loadingLedger} columns={columns}\n                       dataSource={this.state.ledger} pagination={false}/>\n                <Row style={{marginTop: 20, textAlign: 'center'}}>\n                    <Col span={8}>\n                        <h3>Total Credit: {this.state.credit.toFixed(2)}</h3>\n                    </Col>\n                    <Col span={8}>\n                        <h3>Total Debit: {this.state.debit.toFixed(2)}</h3>\n                    </Col>\n                    <Col span={8}>\n                        <h3>Total\n                            Balance: {this.state.balance < 0 ? (this.state.balance * -1).toFixed(2) + \" (Advance)\" : this.state.balance.toFixed(2)}</h3>\n                    </Col>\n                </Row>\n            </Card>\n        </Row>\n    }\n}\n\nexport default PatientLedgers;\n","import React from \"react\";\nimport {Row, Alert, Card, Col, AutoComplete, List, Avatar, Button, Icon, Spin} from 'antd';\nimport {displayMessage, getAPI, interpolate, makeFileURL, postAPI} from \"../../../utils/common\";\nimport {MERGE_PATIENTS, PATIENT_PROFILE, SEARCH_PATIENT} from \"../../../constants/api\";\nimport {ERROR_MSG_TYPE, SUCCESS_MSG_TYPE} from \"../../../constants/dataKeys\";\n\nexport default class PatientMerge extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            patient_from: null,\n            patient_to: null,\n            loading: false,\n            patientListData: [],\n        }\n\n    }\n\n    searchPatient = (value) => {\n        this.setState({\n            searchPatientString: value\n        })\n        // console.log(e.target.value);\n        let that = this;\n        let successFn = function (data) {\n            if (data) {\n                that.setState({\n                    patientListData: data.results,\n\n                })\n                // console.log(\"list\",that.state.patientListData);\n            }\n        };\n        let errorFn = function () {\n        };\n        if (value){\n            getAPI(interpolate(SEARCH_PATIENT, [value]), successFn, errorFn);\n        }\n\n    };\n    removePatient = (type) => {\n        this.setState({\n            [type]: null\n        })\n    };\n    handlePatientSelect = (event, type) => {\n        console.log(event);\n        if (event) {\n            let that = this;\n            let successFn = function (data) {\n                that.setState({\n                    [type]: data\n\n                });\n                // console.log(\"event\",that.state.patientDetails);\n            };\n            let errorFn = function () {\n            };\n            getAPI(interpolate(PATIENT_PROFILE, [event]), successFn, errorFn);\n        }\n    }\n\n    mergePatient = () => {\n        this.setState({\n            loading: true\n        })\n        let that = this;\n        let reqData = {\n            patient_from: this.state.patient_from.id,\n            patient_to: this.state.patient_to.id\n        }\n        let successFn = function (data) {\n            displayMessage(SUCCESS_MSG_TYPE, \"Patients Merged Successfully!!\");\n            that.setState({\n                loading: false,\n                patient_from: null,\n                patient_to: null\n            });\n        }\n        let errorFn = function () {\n            displayMessage(ERROR_MSG_TYPE, \"Patients Merging Failed!!\");\n            that.setState({\n                loading: false,\n            })\n        }\n        postAPI(MERGE_PATIENTS, reqData, successFn, errorFn);\n    }\n\n    render() {\n        let that = this;\n        return <div>\n\n            <h2>Merge Patients</h2>\n            <Card>\n                <Alert\n                    message={\"Profile details and records of Patient 1 will be moved to Patient 2. You cannot undo this action once done.\"}\n                    type=\"warning\"/>\n                <Spin spinning={this.state.loading}>\n\n                    <Row gutter={16} style={{marginTop: 10}}>\n                        <Col span={12} style={{textAlign: 'center'}}>\n                            <h3>Patient 1</h3>\n                            {this.state.patient_from ?\n                                <Card bordered={false} style={{background: '#ECECEC', textAlign: 'left'}}>\n                                    <Card.Meta\n                                        avatar={(this.state.patient_from.image ? <Avatar src={makeFileURL(this.state.patient_from.image)}/> :\n                                            <Avatar style={{backgroundColor: '#87d068'}}>\n                                                {this.state.patient_from.user.first_name ? this.state.patient_from.user.first_name.charAt(0) :\n                                                    <Icon type=\"user\"/>}\n                                            </Avatar>)}\n\n                                        title={this.state.patient_from.user.first_name}\n                                        description={this.state.patient_from.user.mobile}\n\n                                    />\n\n                                    <Button type=\"primary\" style={{float: 'right'}}\n                                            onClick={() => this.removePatient('patient_from')}>Select Different\n                                        Patient</Button>\n                                </Card> :\n                                <AutoComplete placeholder=\"Patient Name\"\n                                              showSearch\n                                              onSearch={this.searchPatient}\n                                              defaultActiveFirstOption={false}\n                                              showArrow={false}\n                                    // value={this.state.patient_from}\n                                              filterOption={false}\n                                              onChange={this.handleChange}\n                                              onSelect={(e) => this.handlePatientSelect(e, 'patient_from')}>\n                                    {this.state.patientListData.map((option) => <AutoComplete.Option\n                                        value={option.id.toString()}>\n                                        <List.Item style={{padding: 0}}>\n                                            <List.Item.Meta\n                                                avatar={(option.image ? <Avatar src={makeFileURL(option.image)}/> :\n                                                    <Avatar style={{backgroundColor: '#87d068'}}>\n                                                        {option.user.first_name ? option.user.first_name.charAt(0) :\n                                                            <Icon type=\"user\"/>}\n                                                    </Avatar>)}\n                                                title={option.user.first_name + \" (\" + option.user.id + \")\"}\n                                                description={<small>{option.user.mobile}</small>}\n                                            />\n\n                                        </List.Item>\n                                    </AutoComplete.Option>)}\n                                </AutoComplete>}\n                            {/*{this.state.patient_from ? <List.Item style={{padding: 0}}>*/}\n                            {/*<List.Item.Meta*/}\n                            {/*avatar={<Avatar*/}\n                            {/*src=\"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png\"/>}*/}\n                            {/*title={that.state.patient_from.user.first_name + \" (\" + that.state.patient_from.user.id + \")\"}*/}\n                            {/*description={<small>{that.state.patient_from.user.mobile}</small>}*/}\n                            {/*/>*/}\n\n                            {/*</List.Item>:null}*/}\n                        </Col>\n                        <Col span={12} style={{textAlign: 'center'}}>\n                            <h3>Patient 2</h3>\n                            {this.state.patient_to ?\n                                <Card bordered={false} style={{background: '#ECECEC', textAlign: 'left'}}>\n                                    <Card.Meta\n                                        avatar={(this.state.patient_to.image ? <Avatar src={makeFileURL(this.state.patient_to.image)}/> :\n                                            <Avatar style={{backgroundColor: '#87d068'}}>\n                                                {this.state.patient_to.user.first_name ? this.state.patient_to.user.first_name.charAt(0) :\n                                                    <Icon type=\"user\"/>}\n                                            </Avatar>)}\n                                        title={this.state.patient_to.user.first_name}\n                                        description={this.state.patient_to.user.mobile}\n\n                                    />\n\n                                    <Button type=\"primary\" style={{float: 'right'}}\n                                            onClick={() => this.removePatient('patient_to')}>Select Different\n                                        Patient</Button>\n                                </Card> :\n                                <AutoComplete placeholder=\"Patient Name\"\n                                              showSearch\n                                              onSearch={this.searchPatient}\n                                              defaultActiveFirstOption={false}\n                                              showArrow={false}\n                                    // value={this.state.patient_from}\n                                              filterOption={false}\n                                              onChange={this.handleChange}\n                                              onSelect={(e) => this.handlePatientSelect(e, 'patient_to')}>\n                                    {this.state.patientListData.map((option) => <AutoComplete.Option\n                                        value={option.id.toString()}>\n                                        <List.Item style={{padding: 0}}>\n                                            <List.Item.Meta\n                                                avatar={(option.image ? <Avatar src={makeFileURL(option.image)}/> :\n                                                    <Avatar style={{backgroundColor: '#87d068'}}>\n                                                        {option.user.first_name ? option.user.first_name.charAt(0) :\n                                                            <Icon type=\"user\"/>}\n                                                    </Avatar>)}\n                                                title={option.user.first_name + \" (\" + option.user.id + \")\"}\n                                                description={<small>{option.user.mobile}</small>}\n                                            />\n\n                                        </List.Item>\n                                    </AutoComplete.Option>)}\n                                </AutoComplete>}\n                            {/*{this.state.patient_to ? <List.Item style={{padding: 0}}>*/}\n                            {/*<List.Item.Meta*/}\n                            {/*avatar={<Avatar*/}\n                            {/*src=\"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png\"/>}*/}\n                            {/*title={that.state.patient_to.user.first_name + \" (\" + that.state.patient_to.user.id + \")\"}*/}\n                            {/*description={<small>{that.state.patient_to.user.mobile}</small>}*/}\n                            {/*/>*/}\n\n                            {/*</List.Item>:null}*/}\n                        </Col>\n                        <Col span={24} style={{textAlign: 'center', marginTop: 30}}>\n                            <Button disabled={this.state.loading || !this.state.patient_from || !this.state.patient_to}\n                                    type={\"primary\"} onClick={this.mergePatient}>\n                                <Icon type={\"plus\"}/>Merge Patients\n                            </Button>\n                        </Col>\n                    </Row>\n\n                </Spin>\n            </Card>\n        </div>\n    }\n}\n","import React from \"react\";\nimport {Button, Card, Icon} from 'antd';\n\nexport default class PatientRequiredNoticeCard extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n\n    render() {\n        let that = this;\n        return <Card style={{textAlign: 'center'}}>\n            <h2> Please select patient to further continue !!</h2>\n            {this.props.togglePatientListModal ?\n                <Button type={\"primary\"} onClick={() => that.props.togglePatientListModal(true)}><Icon\n                    type={\"user\"}/> Select Patient</Button> : null}\n        </Card>\n    }\n}\n","import React from \"react\";\nimport {Route} from \"react-router\";\nimport {\n    Form,\n    Icon,\n    Input,\n    Button,\n    Checkbox,\n    Card,\n    DatePicker,\n    Radio,\n    Row,\n    Col,\n    Select,\n    TimePicker,\n    Affix,\n    Dropdown,\n    Menu\n} from 'antd';\nimport {Redirect, Link} from 'react-router-dom'\nimport {postAPI, interpolate, displayMessage} from \"../../../utils/common\";\nimport {NOTES} from \"../../../constants/hardData\";\nimport {MEDICAL_CERTIFICATE_API} from \"../../../constants/api\";\nimport {SUCCESS_MSG_TYPE ,ERROR_MSG_TYPE} from \"../../../constants/dataKeys\";\nimport moment from 'moment';\nimport {loadDoctors} from \"../../../utils/clinicUtils\";\n\n\nconst {TextArea} = Input;\nconst {Option} = Select;\n\nclass PatientMedicalCertificate extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            redirect: false,\n            excused_duty_checked: false,\n            fit_light_duty_checked: false,\n            attendance_checked: false,\n            startDate: this.props.value,\n            endDate: new Date(),\n            proof_attendance_from: null,\n            days: 0,\n            practiceDoctors: [],\n            selectedDoctor: {},\n            selectedDate: moment(),\n            value: ''\n        }\n        this.handleChangeStart = this.handleChangeStart.bind(this);\n        this.handleChangeEnd = this.handleChangeEnd.bind(this);\n    }\n\n    componentDidMount() {\n        loadDoctors(this);\n    }\n\n    changeRedirect() {\n        var redirectVar = this.state.redirect;\n        this.setState({\n            redirect: !redirectVar,\n        });\n    }\n\n    handleCheck = (e) => {\n        this.setState({\n            excused_duty_checked: !this.state.excused_duty_checked\n        });\n    }\n    handleLighDutyCheck = (e) => {\n        this.setState({\n            fit_light_duty_checked: !this.state.fit_light_duty_checked\n        });\n    }\n    onChangeHandle = (e) => {\n        this.setState({\n            value: e.target.value,\n        });\n    }\n    handleAttendanceCheck = (e) => {\n        this.setState({\n            attendance_checked: !this.state.attendance_checked\n        });\n    }\n    handleChangeStart = (date) => {\n        this.setState({\n            startDate: date\n        });\n\n    }\n\n    handleChangeEnd(date) {\n        this.setState({\n            endDate: date\n        });\n    }\n\n    // totalDays(){\n    //     let {startDate, endDate} = this.state;\n    //     let amount = endDate.diff(startDate ,\"days\");\n    //     this.setState({\n    //     days: amount\n    //     });\n    // }\n\n    onChange = (timeString) => {\n        this.setState({\n            proof_attendance_from: timeString\n        });\n    }\n    selectedDate = (date) => {\n        this.setState({\n            selectedDate: date\n        })\n    }\n    selectDoctor = (doctor) => {\n        this.setState({\n            selectedDoctor: doctor\n        })\n    }\n    handleSubmit = (e) => {\n        let that = this;\n        e.preventDefault();\n        this.props.form.validateFields((err, values) => {\n\n            if(values.excused_duty || values.fit_light_duty || values.proof_attendance){\n                if (!err) {\n                    let reqData = {\n                        ...values,\n                        doctor: that.state.selectedDoctor.id,\n                        practice: that.props.active_practiceId,\n                        date: that.state.selectedDate && moment(that.state.selectedDate).isValid() ? that.state.selectedDate.format('YYYY-MM-DD') : null,\n                        excused_duty_from: moment(values.excused_duty_from).format(\"YYYY-MM-DD\"),\n                        excused_duty_to: moment(values.excused_duty_to).format(\"YYYY-MM-DD\"),\n                        fit_light_duty_from: moment(values.fit_light_duty_from).format(\"YYYY-MM-DD\"),\n                        fit_light_duty_to: moment(values.fit_light_duty_to).format(\"YYYY-MM-DD\"),\n                        proof_attendance_date: moment(values.proof_attendance_date).format(\"YYYY-MM-DD\"),\n                        proof_attendance_from: moment(values.proof_attendance_from).format('LT'),\n                        proof_attendance_to: moment(values.proof_attendance_to).format('LT'),\n                        patient: that.props.match.params.id,\n                        is_active: true,\n                        valid_court:false,\n                        invalid_court:false,\n                        no_mention:false\n                    };\n                    if(values.group)\n                        reqData[values.group] = true\n                    delete reqData.group;\n                    let successFn = function (data) {\n                        displayMessage(SUCCESS_MSG_TYPE, \"Medical Certificate Generated.\");\n                        that.props.history.replace('/patient/' + that.props.match.params.id + '/emr/files');\n                    }\n                    let errorFn = function () {\n                        that.setState({});\n                    }\n                    postAPI(interpolate(MEDICAL_CERTIFICATE_API, [this.props.currentPatient.id]), reqData, successFn, errorFn);\n                }\n            }else{\n               displayMessage(ERROR_MSG_TYPE,\"Please select at least one of the above options\");\n            }\n\n        });\n    }\n\n    render() {\n        const {getFieldDecorator} = this.props.form;\n        const formItemLayout = {\n            labelCol: {\n                xs: {span: 24},\n                sm: {span: 8},\n                md: {span: 8},\n                lg: {span: 8},\n            },\n            wrapperCol: {\n                xs: {span: 24},\n                sm: {span: 16},\n                md: {span: 16},\n                lg: {span: 16},\n            },\n        };\n        let that = this;\n        const radioOption = NOTES.map((option) => <Radio value={option.value}>{option.label}</Radio>)\n        return (<Form onSubmit={this.handleSubmit} {...formItemLayout}>\n                <Card title=\"ADD MEDICAL LEAVE CERTIFICATE\"\n                      extra={<Button.Group>\n                          <Button type=\"primary\" htmlType=\"submit\">Save Certificate</Button>\n                      </Button.Group>}>\n\n\n                    <Form.Item>\n                        {getFieldDecorator('excused_duty', {})(\n                            (<Checkbox onClick={this.handleCheck} defaultChecked={this.state.excused_duty_checked}>Excused\n                                from duty</Checkbox>),\n                        )}\n                    </Form.Item>\n                    {this.state.excused_duty_checked ?\n                        <Row>\n                            <Col span={6} offset={6}>\n                                <Form.Item label=\"From\">\n                                    {getFieldDecorator('excused_duty_from', {})\n                                    (\n                                        <DatePicker/>\n                                    )\n                                    }\n                                </Form.Item>\n\n                                <Form.Item label=\"till\">\n                                    {getFieldDecorator('excused_duty_to', {})\n                                    (\n                                        <DatePicker/>\n                                    )\n                                    }\n                                </Form.Item>\n\n                            </Col>\n                            <Col span={6}>\n                                <Form.Item>\n                                    {getFieldDecorator('excused_duty_from_session', {\n                                        initialValue: \"Morning\"\n                                    })\n                                    (\n                                        <Select>\n                                            <Option value=\"Morning\">Morning Session</Option>\n                                            <Option value=\"Morning\">Evening Session</Option>\n                                        </Select>\n                                    )}\n\n                                </Form.Item>\n\n                                <Form.Item>\n                                    {getFieldDecorator('excused_duty_to_session', {\n                                        initialValue: \"Morning\"\n                                    })\n                                    (\n                                        <Select>\n                                            <Option value=\"Morning\">Morning Session</Option>\n                                            <Option value=\"Morning\">Evening Session</Option>\n                                        </Select>\n                                    )}\n                                </Form.Item>\n\n                            </Col>\n\n                        </Row>\n\n                        : null}\n\n\n                    <Form.Item>\n                        {getFieldDecorator('fit_light_duty', {})(\n                            (<Checkbox onClick={this.handleLighDutyCheck}\n                                       defaultChecked={this.state.fit_light_duty_checked}>Fit for light\n                                duty</Checkbox>),\n                        )}\n                    </Form.Item>\n\n                    {this.state.fit_light_duty_checked ?\n                        <Row>\n                            <Col>\n                                <Form.Item label=\"From\">\n                                    {getFieldDecorator('fit_light_duty_from', {})\n                                    (\n                                        <DatePicker/>\n                                    )\n                                    }\n\n                                </Form.Item>\n\n                                <Form.Item label=\"till\">\n                                    {getFieldDecorator('fit_light_duty_to', {})\n                                    (\n                                        <DatePicker/>\n                                    )\n                                    }\n\n                                </Form.Item>\n                            </Col>\n\n                        </Row>\n                        : null\n                    }\n\n                    <Form.Item>\n                        {getFieldDecorator('proof_attendance', {})(\n                            (<Checkbox onClick={this.handleAttendanceCheck}\n                                       defaultChecked={this.state.attendance_checked}>Proof of attendance at\n                                practice</Checkbox>),\n                        )}\n                    </Form.Item>\n                    {this.state.attendance_checked ?\n                        <Row>\n                            <Form.Item label=\"on\">\n                                {getFieldDecorator('proof_attendance_date', {})\n                                (<DatePicker/>)\n                                }\n                            </Form.Item>\n                            <Col span={6} offset={6}>\n                                <Form.Item label=\"From\">\n                                    {getFieldDecorator('proof_attendance_from', {})\n                                    (\n                                        <TimePicker use12Hours format=\"h:mm A\"/>\n                                    )\n                                    }\n\n                                </Form.Item>\n                                <Form.Item label=\"till\">\n                                    {getFieldDecorator('proof_attendance_to', {})\n                                    (\n                                        <TimePicker use12Hours format=\"h:mm A\"/>\n                                    )\n                                    }\n                                </Form.Item>\n                            </Col>\n                        </Row>\n\n\n                        : null}\n\n\n                    <Form.Item label=\"Notes\">\n                        {getFieldDecorator('notes', {})(\n                            (<TextArea/>),\n                        )}\n                    </Form.Item>\n\n\n                    <Form.Item>\n                        {getFieldDecorator('group', {initialValue:'no_mention'})(\n                            <Radio.Group>\n                                {radioOption}\n                            </Radio.Group>\n                        )}\n\n                    </Form.Item>\n                    <Affix offsetBottom={0}>\n                        <Card>\n                            <span>Issued by &nbsp;&nbsp;</span>\n                            <Dropdown placement=\"topCenter\" overlay={<Menu>\n                                {this.state.practiceDoctors.map(doctor =>\n                                    <Menu.Item key=\"0\">\n                                        <a onClick={() => this.selectDoctor(doctor)}>{doctor.user.first_name}</a>\n                                    </Menu.Item>)}\n                            </Menu>} trigger={['click']}>\n                                <a className=\"ant-dropdown-link\" href=\"#\">\n                                    <b>\n                                        {this.state.selectedDoctor.user ? this.state.selectedDoctor.user.first_name : 'No DOCTORS Found'}\n                                    </b>\n                                </a>\n                            </Dropdown>\n                            <span> &nbsp;&nbsp;on&nbsp;&nbsp;</span>\n                            <DatePicker value={this.state.selectedDate}\n                                        onChange={(value) => this.selectedDate(value)} format={\"DD-MM-YYYY\"}\n                                        allowClear={false}/>\n                        </Card>\n                    </Affix>\n\n                </Card>\n            </Form>\n\n        );\n    }\n}\n\nexport default Form.create()(PatientMedicalCertificate);\n","import React from \"react\";\nimport {\n    Alert,\n    AutoComplete,\n    Avatar,\n    Button,\n    Card,\n    Col,\n    DatePicker,\n    Divider,\n    Form,\n    Icon,\n    Input,\n    InputNumber,\n    List,\n    message,\n    Popconfirm,\n    Radio,\n    Row,\n    Select,\n    Table,\n    Upload\n} from \"antd\";\nimport {displayMessage, getAPI, interpolate, makeFileURL, makeURL, postAPI} from \"../../../utils/common\";\nimport {\n    BED_PACKAGES,\n    BOOK_SEAT,\n    CHECK_SEAT_AVAILABILITY,\n    DISEASE_LIST,\n    FILE_UPLOAD_API,\n    MEDICINE_PACKAGES,\n    PATIENT_PROFILE,\n    PAYMENT_MODES,\n    SEARCH_PATIENT\n} from \"../../../constants/api\";\nimport moment from \"moment\";\n// import {Booking_Type} from \"../../constants/hardData\";\nimport {SUCCESS_MSG_TYPE} from \"../../../constants/dataKeys\";\n\nconst {Meta} = Card;\nconst InputGroup = Input.Group;\nlet id = 1;\nclass BedBookingForm extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            packages: [],\n            totalPayableAmount: 0,\n            totalPayingAmount: 0,\n            patientList: [],\n            paymentModes: [],\n            medicinePackage: [],\n            medicineItem: [],\n            diseases: []\n            //choosePkg:{},\n\n\n        }\n    }\n\n    componentDidMount() {\n        if (this.props.currentPatient)\n            this.handlePatientSelect(this.props.currentPatient.id);\n        this.loadPackages();\n        this.loadPaymentModes();\n        this.loadMedicinePackages();\n        this.loadDiseases();\n    }\n\n    loadPackages = () => {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                packages: data\n            })\n        }\n        let errorFn = function () {\n        }\n        getAPI(interpolate(BED_PACKAGES, [this.props.active_practiceId]), successFn, errorFn);\n\n    }\n    loadDiseases = () => {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                diseases: data\n            })\n        }\n        let errorFn = function () {\n        }\n        getAPI(interpolate(DISEASE_LIST, [this.props.active_practiceId]), successFn, errorFn);\n\n    }\n\n    loadMedicinePackages() {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                medicinePackage: data,\n            })\n        }\n        let errorFn = function () {\n\n        }\n        getAPI(interpolate(MEDICINE_PACKAGES, [this.props.active_practiceId]), successFn, errorFn);\n    }\n\n    searchPatient = (value) => {\n        let that = this;\n        let successFn = function (data) {\n            if (data) {\n                that.setState({\n                    patientList: data,\n                    ptr: data,\n\n                })\n            }\n        };\n        let errorFn = function () {\n        };\n        getAPI(interpolate(SEARCH_PATIENT, [value]), successFn, errorFn);\n    }\n\n    handlePatientSelect = (event) => {\n        if (event) {\n            let that = this;\n            let successFn = function (data) {\n                that.setState({\n                    patientDetails: data\n                });\n            };\n            let errorFn = function () {\n            };\n            getAPI(interpolate(PATIENT_PROFILE, [event]), successFn, errorFn);\n        }\n    }\n\n    loadPaymentModes() {\n        var that = this;\n        let successFn = function (data) {\n            that.setState({\n                paymentModes: data,\n            })\n        };\n        let errorFn = function () {\n        };\n        getAPI(interpolate(PAYMENT_MODES, [this.props.active_practiceId]), successFn, errorFn);\n    }\n\n    checkBedStatus = (type, value) => {\n        let that = this;\n        that.handleRoomType();\n        this.setState({\n            [type]: value\n        }, function () {\n\n            let successFn = function (data) {\n                that.setState({\n                    availabilitySeatTatkal: data.TATKAL,\n                    availabilitySeatNormal: data.NORMAL,\n                });\n                let currentSelected = that.props.form.getFieldValue('seat_type');\n                if (!data[currentSelected]) {\n                    that.props.form.setFieldsValue({\n                        seat_type: null\n                    })\n                    that.calculateTotalAmount();\n                }\n            }\n            that.calculateTotalAmount();\n            let errorFn = function () {\n\n            }\n            let {from_date, bed_package} = that.state;\n            if (from_date && bed_package) {\n                let to_date = null;\n                that.state.packages.forEach(function (pkgObj) {\n                    if (bed_package == pkgObj.id) {\n                        to_date = moment(from_date).add(pkgObj.no_of_days - 1, 'day')\n                    }\n                });\n                if (from_date && to_date && bed_package) {\n                    let {setFieldsValue} = that.props.form;\n                    setFieldsValue({\n                        to_date: to_date\n                    })\n                    getAPI(interpolate(CHECK_SEAT_AVAILABILITY, [that.props.active_practiceId]), successFn, errorFn, {\n                        start: moment(from_date).format('YYYY-MM-DD'),\n                        end: moment(to_date).format('YYYY-MM-DD'),\n                        bed_package: bed_package\n                    })\n                }\n            }\n        });\n    }\n\n\n    handleSubmit = (e) => {\n        this.setState({\n            loading: true\n        })\n        let that = this;\n        let details=[];\n        e.preventDefault();\n        this.props.form.validateFields((err, values) => {\n            if (!err) {\n                const { label, value } = values;\n\n                label.map((key,i)=>\n                    details.push({'key':key, 'value': value[i]})\n                );\n                let reqData = {\n                    ...values,\n                    to_date: moment(values.to_date).format('YYYY-MM-DD'),\n                    from_date: moment(values.from_date).format('YYYY-MM-DD'),\n                    paid: false,\n                    total_price: this.state.totalPayableAmount,\n                    date: moment().format('YYYY-MM-DD'),\n                    total_tax: this.state.tax,\n                    patient: this.state.patientDetails.id,\n                    rest_diseases: values.rest_diseases ? values.rest_diseases.join(',') : null,\n                    report_upload: values.file && values.file.file.response ? values.file.file.response.image_path : null,\n                    details:details\n                };\n                delete reqData.label;\n                delete reqData.value;\n                delete reqData.keys;\n\n                let successFn = function (data) {\n                    displayMessage(SUCCESS_MSG_TYPE, \"Saved Successfully!!\");\n                    if (that.props.history){\n                        that.props.history.goBack();\n                        that.props.history.replace('/patient/'+ that.props.match.params.id +'/booking')\n                    }\n                    if (that.props.loadData) {\n                        that.props.loadData();\n                    }\n                };\n                let errorFn = function () {\n\n                };\n\n                postAPI(interpolate(BOOK_SEAT, [this.props.active_practiceId]), reqData, successFn, errorFn);\n            }\n        })\n\n\n    };\n    handleClick = (e) => {\n        this.setState({\n            patientDetails: null\n        })\n\n    };\n    handleRoomType = (name, value) => {\n        let that = this;\n        this.setState({\n            [name]: value,\n        }, function () {\n            that.calculateTotalAmount();\n        });\n\n    }\n    calculateTotalAmount = () => {\n        let that = this;\n        that.setState(function (prevSate) {\n            let payAmount = 0;\n            let total_tax = 0;\n            let bedPkg = {};\n            let medicinePkg = [];\n            let total_medicine_price = 0;\n            prevSate.packages.forEach(function (item) {\n                if (prevSate.bed_package == item.id) {\n                    if (prevSate.seat_type == 'NORMAL') {\n                        payAmount = item.normal_price + item.normal_tax_value;\n                        total_tax += item.normal_tax_value\n                        bedPkg = {\n                            ...item,\n                            type: \"BED\",\n                            price_with_tax: payAmount,\n                            tax: item.normal_tax_value,\n                            price: item.normal_price,\n                            _id:Math.random().toFixed(7),\n                        };\n                        medicinePkg = [bedPkg];\n                    }\n                    if (prevSate.seat_type == 'TATKAL') {\n                        payAmount = item.tatkal_price + item.tatkal_tax_value;\n                        total_tax += item.tatkal_tax_value\n                        bedPkg = {\n                            ...item,\n                            type: \"BED\",\n                            price_with_tax: payAmount,\n                            tax: item.tatkal_tax_value,\n                            price: item.tatkal_price,\n                            _id:Math.random().toFixed(7),\n                        };\n                        medicinePkg = [bedPkg];\n                    }\n                }\n            });\n\n            prevSate.medicinePackage.forEach(function (item) {\n                prevSate.medicineItem.forEach(function (ele) {\n                    if (item.id == ele) {\n                        total_medicine_price += item.final_price;\n                        total_tax += item.tax_value;\n                        medicinePkg = [...medicinePkg, {\n                            ...item,\n                            type: \"MEDICINE\",\n                            price_with_tax: item.final_price,\n                            tax: item.tax_value,\n                            _id:Math.random().toFixed(7),\n                        }]\n\n                    }\n                });\n            });\n            return {\n                totalPayableAmount: payAmount + total_medicine_price,\n                tax: total_tax,\n                choosePkg: [...medicinePkg]\n            }\n        })\n    }\n    setPaymentAmount = (value) => {\n        let that = this;\n        this.setState({\n            totalPayingAmount: value\n        }, function () {\n            that.calculateTotalAmount();\n        })\n    }\n    handleMedicineSelect = (e) => {\n        let value = e;\n        this.setState({\n            medicineItem: value,\n        }, function () {\n            this.calculateTotalAmount()\n        })\n    }\n    changeDiscount=(id, value)=>{\n        let that=this;\n        that.setState(function (prevState) {\n            let newTableValue = [];\n            prevState.choosePkg.forEach(function (tableObj) {\n                if (tableObj._id == id) {\n\n                    newTableValue.push({...tableObj, discount: value})\n                }else {\n                    newTableValue.push(tableObj);\n                }\n            });\n            return {choosePkg:newTableValue}\n        });\n    }\n\n    addNewFields =()=>{\n        const { form } = this.props;\n        const keys = form.getFieldValue('keys');\n        const nextKeys = keys.concat(id++);\n        form.setFieldsValue({\n            keys: nextKeys,\n        });\n    };\n\n    removeNewOptionField = (k) => {\n        const {form} = this.props;\n        const keys = form.getFieldValue('keys');\n        if (keys.length === 1) {\n            return;\n        }\n\n        form.setFieldsValue({\n            keys: keys.filter(key => key !== k),\n        });\n    };\n\n    render() {\n\n\n        const BOOKING_TYPE = [\n            {\n                value: 'NORMAL',\n                is_or_not: this.state.availabilitySeatNormal && this.state.availabilitySeatNormal.available ? true : false\n            },\n            {\n                value: 'TATKAL',\n                is_or_not: this.state.availabilitySeatTatkal && this.state.availabilitySeatTatkal.available ? true : false\n            },\n\n        ];\n\n        let that = this;\n        const {getFieldDecorator, getFieldValue} = this.props.form;\n        const formItemLayout = ({\n            labelCol: {\n                xs: {span: 24},\n                sm: {span: 6},\n            },\n            wrapperCol: {\n                xs: {span: 24},\n                sm: {span: 14},\n            },\n        });\n        const formPatients = ({\n            wrapperCol: {\n                xs: {offset: 6, span: 24},\n                sm: {offset: 6, span: 14},\n            },\n        });\n\n        const columns = [{\n            title: 'Item',\n            key: 'name',\n            dataIndex: 'name'\n        },\n                {\n                title: 'Normal Price',\n                key: 'normal_price',\n                dataIndex: 'normal_price',\n                // render:(value,record)=>(<p>{value.toFixed()}</p>)\n            }, {\n                title: 'Tatkal Price',\n                key: 'tatkal_price',\n                dataIndex: 'tatkal_price',\n                // render:(value,record)=>(<p>{record?(record.tatkal_price).toFixed():null}</p>)\n            },\n\n            {\n                title: 'discount %',\n                key: 'discount',\n                width: 100,\n                dataIndex: 'discount',\n                render: (item, record) => <Form.Item\n                    key={`discount[${record._id}]`}\n                    {...formItemLayout}>\n                    {getFieldDecorator(`discount[${record._id}]`, {\n                        initialValue: record.discount,\n                        validateTrigger: ['onChange', 'onBlur'],\n\n                    })(\n                        <InputNumber min={0} max={100} placeholder=\"discount\" size={'small'} value={record.discount} onChange={(value) => that.changeDiscount(record._id ,value)}/>\n                    )}\n                </Form.Item>\n            },\n            {\n                title: 'Price',\n                key: 'price',\n                dataIndex: 'price',\n                render: (value, record) => (<p>{value ? (value).toFixed(2) : null}</p>)\n\n            }, {\n                title: 'Tax',\n                key: 'tax',\n                dataIndex: 'tax',\n                render: (value, record) => (<p>{value ? (value).toFixed(2) : null}</p>)\n            }, {\n                title: 'Total Amount',\n                key: 'price_with_tax',\n                dataIndex: 'price_with_tax',\n                render: (value, record) => (<p>{value ? (value).toFixed(2) : null}</p>)\n            }];\n        const singleUploadprops = {\n            name: 'image',\n            data: {\n                name: 'hello'\n            },\n            action: makeURL(FILE_UPLOAD_API),\n            headers: {\n                authorization: 'authorization-text',\n            },\n            onChange(info) {\n                if (info.file.status !== 'uploading') {\n\n                }\n                if (info.file.status === 'done') {\n                    message.success(`${info.file.name} file uploaded successfully`);\n                } else if (info.file.status === 'error') {\n                    message.error(`${info.file.name} file upload failed.`);\n                }\n            },\n        };\n\n\n\n        getFieldDecorator('keys', {initialValue: [0]});\n        const keys = getFieldValue('keys');\n\n        const chooseOption = keys.map((k, index) =>(\n            <Row key={k}>\n                <Col span={8}>\n                    <Form.Item label=\"\">\n                        {getFieldDecorator(`label[${k}]`)\n                        (<Input  placeholder={\"name\"}/>)\n                        }\n                    </Form.Item>\n\n                </Col>\n\n                <Col span={8}>\n                    <Form.Item label=\"\">\n                        {getFieldDecorator(`value[${k}]`)\n                        (<Input  placeholder={\"value\"}/>)\n                        }\n                    </Form.Item>\n\n                </Col>\n                <Col span={8}>\n                    {index ? (\n                        <Button onClick={() => this.removeNewOptionField(k)} size={\"small\"} type={\"danger\"}\n                                style={{margin: 5}} icon={'close'} shape={'circle'}/>\n                    ):null}\n\n                    {index == keys.length - 1 ?\n                        <Button type=\"dashed\" style={{marginTop: '3px'}} onClick={this.addNewFields}>\n                            <Icon type=\"plus\" /> Add field\n                        </Button>\n                        : null\n                    }\n                </Col>\n\n            </Row>\n        ));\n        return <div>\n            <Card title={\"Book a Seat/Bed\"}>\n                <Form>\n                    <Row>\n                        <Col xs={24} sm={24} md={12} lg={12} xl={12}>\n                            <div style={{paddingRight:'10px'}}>\n\n                                {this.state.patientDetails ? <Form.Item key=\"id\"\n                                                                        value={this.state.patientDetails ? this.state.patientDetails.id : ''} {...formPatients}>\n                                        <Card bordered={false} style={{background: '#ECECEC'}}>\n                                            <Meta\n                                                avatar={(this.state.patientDetails.image ? <Avatar src={makeFileURL(this.state.patientDetails.image)}/> :\n                                                    <Avatar style={{backgroundColor: '#87d068'}}>\n                                                        {this.state.patientDetails.user.first_name ? this.state.patientDetails.user.first_name.charAt(0) :\n                                                            <Icon type=\"user\"/>}\n                                                    </Avatar>)}\n                                                title={this.state.patientDetails.user.first_name}\n                                                description={this.state.patientDetails.user.mobile}\n                                            />\n                                            {/*<Button onClick={this.handleClick} icon=\"close-circle\"*/}\n                                            {/*        type={\"danger\"}/>*/}\n                                            {/* <Button type=\"primary\" style={{float: 'right'}} onClick={this.handleClick}>Add New\n                                                Patient</Button> */}\n                                        </Card>\n                                    </Form.Item>\n                                    : <div>\n                                        <Form.Item label=\"Patient\" {...formItemLayout}>\n                                            {getFieldDecorator('patient', {\n                                                rules: [{required: true, message: 'this field required'}],\n                                            })\n                                            (<AutoComplete placeholder=\"Patient Name\"\n                                                           showSearch\n                                                           onSearch={this.searchPatient}\n                                                           defaultActiveFirstOption={false}\n                                                           showArrow={false}\n                                                           filterOption={false}\n                                                           onSelect={this.handlePatientSelect}>\n                                                {this.state.patientList.map((option) => <AutoComplete.Option\n                                                    value={option ? option.id.toString() : ''}>\n                                                    <List.Item style={{padding: 0}}>\n                                                        <List.Item.Meta\n                                                            avatar={option.image ?\n                                                                <Avatar style={{backgroundColor: '#ffff'}}\n                                                                        src={makeFileURL(option.image)}/> :\n                                                                <Icon type=\"user\"/>}\n                                                            title={option.user.first_name + \" (\" + option.user.id + \")\"}\n                                                            description={<small>{option.user.mobile}</small>}\n                                                        />\n\n                                                    </List.Item>\n                                                </AutoComplete.Option>)}\n                                            </AutoComplete>)\n                                            }\n\n                                            {this.state.ptr ? <Alert message=\"Patient Not Found !!\"\n                                                                     description=\"Please Search another patient or create new patient.\"\n                                                                     type=\"error\"/> : null}\n                                        </Form.Item>\n                                    </div>}\n\n                                <Form.Item label=\"Bed Package\" {...formItemLayout}>\n                                    {getFieldDecorator('bed_package', {\n                                        rules: [{required: true, message: 'this field required!'}],\n                                    })\n                                    (<Select onChange={(value) => that.checkBedStatus('bed_package', value)}>\n                                        {that.state.packages.map(room => <Select.Option\n                                            value={room.id}>{room.name}</Select.Option>)}\n                                    </Select>)\n                                    }\n                                </Form.Item>\n                                <Form.Item label=\"Book From\" {...formItemLayout}>\n                                    {getFieldDecorator('from_date', {\n                                        rules: [{required: true, message: 'Input From Date!'}],\n                                    })\n                                    (<DatePicker onChange={(value) => that.checkBedStatus('from_date', value)}\n                                                 format={'DD-MM-YYYY'} allowClear={false}/>)\n                                    }\n                                </Form.Item>\n                                <Form.Item label=\"Book To\" {...formItemLayout}>\n                                    {getFieldDecorator('to_date', {\n                                        rules: [{required: true, message: 'Input To Date!'}],\n                                    })\n                                    (<DatePicker disabled format={'DD-MM-YYYY'}/>)\n                                    }\n                                </Form.Item>\n\n                                <Form.Item label={\"Booking Type\"} {...formItemLayout} >\n                                    {getFieldDecorator('seat_type', {\n                                        rules: [{\n                                            required: true, message: 'this field required'\n                                        }]\n                                    })(<Radio.Group\n                                            onChange={(e) => this.handleRoomType('seat_type', e.target.value)}>\n                                            {BOOKING_TYPE.map((seat_type) => <Radio\n                                                value={seat_type.is_or_not ? seat_type.value : ''}\n                                                disabled={seat_type.is_or_not ? false : true}>{seat_type.value}</Radio>)}\n                                        </Radio.Group>\n                                    )}\n                                </Form.Item>\n                                <Form.Item label=\"Medicine  Package\" {...formItemLayout}>\n                                    {getFieldDecorator('medicines', {})\n                                    (<Select mode=\"multiple\" onChange={this.handleMedicineSelect}>\n                                        {that.state.medicinePackage.map(item => <Select.Option\n                                            value={item.id}>{item.name}</Select.Option>)}\n                                    </Select>)\n                                    }\n                                </Form.Item>\n\n                                <Form.Item label=\"Pay Now : \" {...formItemLayout}>\n                                    {getFieldDecorator('pay_value', {\n                                        rules: [{\n                                            required: true,\n                                            message: 'this field is required'\n                                        }],\n                                        initialValue: this.state.totalPayingAmount ? this.state.totalPayingAmount : null\n                                    })\n                                    (\n                                        <InputNumber min={0} step={1} max={this.state.totalPayableAmount}\n                                                     onChange={this.setPaymentAmount}/>\n                                    )\n                                    }\n                                </Form.Item>\n                                <Form.Item label=\"Payment Mode\" {...formItemLayout}>\n                                    {getFieldDecorator('payment_mode', {\n                                        rules: [{required: true, message: 'this field required'}],\n                                    })\n                                    (<Select showSearch\n                                             filterOption={(input, option) =>\n                                                 option.props.children.toLowerCase().indexOf(input.toLowerCase()) >= 0\n                                             }\n                                    >\n                                        {this.state.paymentModes.map(type => <Select.Option\n                                            value={type.id}>{type.mode}</Select.Option>)}\n                                    </Select>)\n                                    }\n                                </Form.Item>\n\n                                {/* <Col span={7} style={{float:\"right\"}}>\n                                    <Form.Item>\n                                        <Popconfirm\n                                            title={\"Are you sure to take payment of INR \" + this.state.totalPayingAmount + \"?\"}  onConfirm={this.handleSubmit}>\n                                            <Button type={'primary'}>Submit</Button>\n                                        </Popconfirm>\n                                        {that.props.history ?\n                                            <Button style={{margin: 5}}\n                                                    onClick={() => that.props.history.goBack()}>\n                                                Cancel\n                                            </Button> : null}\n                                    </Form.Item>\n                                </Col>  */}\n\n\n                                <Divider>Patient Details</Divider>\n                                <Form.Item label=\"Creatinine Level\" {...formItemLayout}>\n                                    {getFieldDecorator('creatinine', {\n                                        // rules: [{required: true, message: 'this field required'}],\n                                    })\n                                    (<Input/>)\n                                    }\n                                </Form.Item>\n                                <Form.Item label=\"Urea Level\" {...formItemLayout}>\n                                    {getFieldDecorator('urea_level', {\n                                        // rules: [{required: true, message: 'this field required'}],\n                                    })\n                                    (<Input/>)\n                                    }\n                                </Form.Item>\n                                <Form.Item label=\"Currently on Dialysis?\" {...formItemLayout}>\n                                    {getFieldDecorator('dialysis', {\n                                        // rules: [{required: true, message: 'this field required'}],\n                                    })\n                                    (<Select showSearch\n                                             filterOption={(input, option) =>\n                                                 option.props.children.toLowerCase().indexOf(input.toLowerCase()) >= 0\n                                             }>\n                                        <Select.Option\n                                            value={true}>YES</Select.Option>\n                                        <Select.Option\n                                            value={false}>NO</Select.Option>\n                                    </Select>)\n                                    }\n                                </Form.Item>\n                                <Form.Item label=\"Diseases\" {...formItemLayout}>\n                                    {getFieldDecorator('other_diseases', {\n                                        // rules: [{required: true, message: 'this field required'}],\n                                    })\n                                    (<Select showSearch mode={\"multiple\"}\n                                             filterOption={(input, option) =>\n                                                 option.props.children.toLowerCase().indexOf(input.toLowerCase()) >= 0\n                                             }>\n                                        {this.state.diseases.map(item => <Select.Option\n                                            value={item.id}>{item.name}</Select.Option>)}\n                                    </Select>)\n                                    }\n                                </Form.Item>\n                                <Form.Item label=\"Other Diseases\" {...formItemLayout}>\n                                    {getFieldDecorator('rest_diseases', {\n                                        // rules: [{required: true, message: 'this field required'}],\n                                    })\n                                    (<Select mode={\"tags\"}>\n\n                                    </Select>)\n                                    }\n                                </Form.Item>\n                                <Form.Item label=\"Upload Report\" {...formItemLayout}>\n                                    {getFieldDecorator('file', {\n                                        // rules: [{required: true, message: 'this field required'}],\n                                    })\n                                    (<Upload {...singleUploadprops}>\n                                        <Button>\n                                            <Icon type=\"upload\"/> Select File\n                                        </Button>\n\n                                    </Upload>)\n                                    }\n                                </Form.Item>\n                            </div>\n\n                        </Col>\n                        <Col xs={24} sm={24} md={12} lg={12} xl={12}>\n                            <Divider>Item Details</Divider>\n                            <Table pagination={false} columns={columns} size={'small'}\n                                   dataSource={this.state.choosePkg}/>\n\n                            <Divider>Extra Details</Divider>\n                            <Card>\n\n                                {chooseOption}\n                                {/*<Col span={8}>*/}\n                                {/*    <Button type=\"dashed\" style={{marginTop:'3px'}} onClick={this.addNewFields}>*/}\n                                {/*        <Icon type=\"plus\" /> Add field*/}\n                                {/*    </Button>*/}\n\n                                {/*</Col>*/}\n                            </Card>\n\n\n                        </Col>\n                        <Col span={24}>\n                            <h3>Grand Total: <b>{this.state.totalPayableAmount.toFixed(2)}</b></h3>\n                            <Form.Item>\n                                <Popconfirm\n                                    title={\"Are you sure to take payment of INR \" + this.state.totalPayingAmount + \"?\"}\n                                    onConfirm={this.handleSubmit}>\n                                    <Button type={'primary'}>Submit</Button>\n                                </Popconfirm>\n                                {that.props.history ?\n                                    <Button style={{margin: 5}}\n                                            onClick={() => that.props.history.goBack()}>\n                                        Cancel\n                                    </Button> : null}\n                            </Form.Item>\n                        </Col>\n                    </Row>\n                </Form>\n            </Card>\n        </div>\n    }\n}\n\nexport default Form.create()(BedBookingForm)\n","import React from \"react\";\nimport {Button, Card, Icon, Layout, Tag} from \"antd\";\nimport {Route, Switch} from \"react-router\";\nimport {Link} from \"react-router-dom\";\nimport BedBookingForm from \"./BedBookingForm\";\nimport {BED_BOOKING_REPORTS} from \"../../../constants/api\";\nimport {getAPI, interpolate} from \"../../../utils/common\";\nimport CustomizedTable from \"../../common/CustomizedTable\";\nimport moment from \"moment\";\nimport InfiniteFeedLoaderButton from \"../../common/InfiniteFeedLoaderButton\";\nimport PermissionDenied from \"../../common/errors/PermissionDenied\";\n\nconst {Content} = Layout;\n\nexport default class BookingHome extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            loading: true,\n            bedBookingReports: [],\n            patient: this.props.currentPatient || {}\n        };\n        this.loadBedBookingReport = this.loadBedBookingReport.bind(this);\n    }\n\n    componentDidMount() {\n        this.loadBedBookingReport();\n    }\n\n    loadBedBookingReport = (page = 1) => {\n        let that = this;\n        this.setState({\n            loading: true\n        })\n        let successFn = function (data) {\n            if (data.current == 1)\n                that.setState({\n                    bedBookingReports: data.results,\n                    loading: false,\n                    nextReport: data.next\n                });\n            else\n                that.setState(function (prevState) {\n                        return {\n                            bedBookingReports: [...prevState.bedBookingReports, ...data.results],\n                            loading: false,\n                            nextReport: data.next\n                        }\n                    }\n                );\n        };\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            })\n        };\n        getAPI(interpolate(BED_BOOKING_REPORTS, [this.props.active_practiceId]), successFn, errorFn, {\n            patients: this.state.patient.id,\n            page: page\n        });\n    }\n\n    render() {\n        let that=this;\n        const columns = [{\n            title: 'Bed Package',\n            key: 'name',\n            dataIndex: 'bed_package.name'\n        }, {\n            title: 'Medicine Package',\n            key: 'medicine',\n            dataIndex: 'medicines',\n            render: (text, record) => <span>{text.map((item) =>\n                <Tag>{item.name}</Tag>\n            )}</span>\n        }, {\n            title: 'From ',\n            key: 'from_date',\n            render: (text, record) => (\n                <span>\n                {moment(record.from_date).format('LL')}\n                  </span>\n            ),\n        }, {\n            title: 'To ',\n            key: 'to_date',\n            render: (text, record) => (\n                <span>\n                {moment(record.to_date).format('LL')}\n                  </span>\n            ),\n        }, {\n            title: 'Seat/Bed Type',\n            key: 'seat_type',\n            dataIndex: 'seat_type'\n\n        }, {\n            title: 'Seat Number',\n            key: 'seat_no',\n            dataIndex: 'seat_no'\n\n        }, {\n            title: 'Total price',\n            key: 'total_price',\n            dataIndex: 'total_price',\n            render: (value) => (<p>{value.toFixed(2)}</p>)\n\n        }, {\n            title: 'Payment Status',\n            key: 'payment_status',\n            dataIndex: 'payment_status'\n\n        }];\n\n        return <Content className=\"main-container\" style={{minHeight: 280,}}>\n            <Layout>\n                <Switch>\n                    <Route path={\"/patient/:patient/booking/bed-booking\"}\n                           render={() =>(that.props.activePracticePermissions.PatientBookings || that.props.allowAllPermissions ?<BedBookingForm {...this.props} bedBooking={true}\n                           loadData={this.loadBedBookingReport}/>:<PermissionDenied/>)}/>\n\n                    <Route>\n                        <div>\n                            <h2>Bed Booking Management\n                                <Link to={\"/patient/\" + this.state.patient.id + \"/booking/bed-booking\"}>\n                                    <Button type=\"primary\" style={{float: 'right'}}>\n                                        <Icon type=\"plus\"/>&nbsp;Book A Seat\n                                    </Button>\n                                </Link>\n                            </h2>\n                            <Card>\n                                <CustomizedTable pagination={false} hideReport={true}\n                                                 loading={this.state.loading}\n                                                 columns={columns} size={'small'}\n                                                 dataSource={this.state.bedBookingReports}/>\n                                <InfiniteFeedLoaderButton\n                                    loaderFunction={() => this.loadBedBookingReport(this.state.nextReport)}\n                                    loading={this.state.loading}\n                                    hidden={!this.state.nextReport}/>\n                            </Card>\n                        </div>\n                    </Route>\n                </Switch>\n            </Layout>\n        </Content>\n\n    }\n}\n","import React from \"react\";\n\nimport {Layout, Spin} from \"antd\";\nimport {Redirect, Route, matchPath} from \"react-router\";\nimport PatientProfile from \"./patient/PatientProfile\";\nimport EditPatientDetails from \"./patient/EditPatientDetails\";\nimport Appointment from \"./appointment/Appointment\"\nimport PatientSider from \"./PatientSider\";\nimport PatientTimeline from \"./timeline/PatientTimeline\";\nimport PatientFiles from \"./files/PatientFiles\";\nimport PatientClinicNotes from \"./clinicNotes/PatientClinicNotes\";\nimport PatientHeader from \"./PatientHeader\";\nimport PatientCommunication from \"./communication/PatientCommunication\";\nimport PatientVitalSign from \"./vitalSign/PatientVitalSign\";\nimport AddorEditPatientVitalSigns from \"./vitalSign/AddorEditPatientVitalSigns\";\nimport PatientCompletedProcedures from \"./completedProcedures/PatientCompletedProcedures\";\nimport PatientPrescriptions from \"./prescriptions/PatientPrescriptions\";\nimport PatientTreatmentPlans from \"./treatmentPlans/PatientTreatmentPlans\";\nimport PatientLabOrders from \"./labOrders/PatientLabOrders\";\nimport PatientInvoices from \"./invoices/PatientInvoices\";\nimport PatientPayments from \"./payments/PatientPayments\";\nimport PatientInvoicesReturn from \"./invoices/ReturnInvoices\";\nimport PatientLedgers from \"./ledgers/PatientLedgers\";\nimport {Switch} from \"react-router-dom\";\nimport PrescriptionTemplate from \"./prescriptions/PrescriptionTemplate\";\nimport {displayMessage, getAPI, getCommonSettings, interpolate, saveCommonSettings} from \"../../utils/common\";\nimport {AGENT_WALLET, PATIENT_PENDING_AMOUNT, PATIENT_PROFILE, PATIENTS_MEMBERSHIP_API} from \"../../constants/api\";\nimport {ERROR_MSG_TYPE} from \"../../constants/dataKeys\";\nimport PatientMerge from \"./merge/PatientMerge\";\nimport PatientRequiredNoticeCard from \"./PatientRequiredNoticeCard\";\nimport PatientMedicalCertificate from \"./files/PatientMedicalCertificate\";\nimport PermissionDenied from \"../common/errors/PermissionDenied\";\nimport BookingHome from \"./booking/BookingHome\";\nimport PatientWalletLedger from \"./wallet-ledger/PatientWalletLedger\";\nimport {ROUTES_TO_HIDE_PATIENT_SIDE_PANEL} from \"../../constants/hardData\";\n\nconst {Content} = Layout;\n\nclass PatientHome extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            currentPatient: null,\n            active_practiceId: this.props.active_practiceId,\n            medicalHistory: [],\n            listModalVisible: false,\n            loading: false,\n            showAllClinic: getCommonSettings('showAllClinic'),\n            pendingAmount: null,\n            walletAmount: null,\n            hideSidePanel: false\n        };\n        this.setCurrentPatient = this.setCurrentPatient.bind(this);\n        this.togglePatientListModal = this.togglePatientListModal.bind(this);\n        this.toggleShowAllClinic = this.toggleShowAllClinic.bind(this);\n        this.loadPatientPendingAmount = this.loadPatientPendingAmount.bind(this);\n        this.loadPatientWallet = this.loadPatientWallet.bind(this);\n    }\n\n    componentDidMount() {\n        if (this.props.match.params.id && (!this.state.currentPatient || this.props.match.params.id != this.state.currentPatient.id)) {\n            this.getPatientListData(this.props.match.params.id);\n        }\n        this.loadPatientPendingAmount();\n        this.loadPatientWallet();\n        this.loadMembership();\n    }\n\n    componentWillReceiveProps(nextProps, nextContext) {\n        let that = this;\n        if (this.state.currentPathLocation != nextProps.location)\n            this.setState({\n                currentPathLocation: nextProps.location\n            }, function () {\n                let foundFlag = false;\n                for (var i = 0; i < ROUTES_TO_HIDE_PATIENT_SIDE_PANEL.length; i++) {\n                    if (matchPath(that.state.currentPathLocation.pathname, {\n                        path: ROUTES_TO_HIDE_PATIENT_SIDE_PANEL[i],\n                        exact: false,\n                        strict: false\n                    })) {\n                        foundFlag = true;\n                        that.setState({\n                            hideSidePanel: true\n                        })\n                    }\n                }\n                if (!foundFlag)\n                    that.setState({\n                        hideSidePanel: false\n                    })\n            })\n    }\n\n    getPatientListData(id) {\n        let that = this;\n        that.setState({\n            loading: true\n        });\n        let successFn = function (data) {\n            that.setCurrentPatient(data)\n            // that.setState({\n            //     patientListData: data.results,\n            //     morePatients: data.next,\n            //     currentPage: data.current,\n            //     loading: false\n            // })\n        };\n        let errorFn = function () {\n            displayMessage(ERROR_MSG_TYPE, \"Patient Loading Failed\");\n            that.setState({\n                loading: false\n            })\n\n        };\n        getAPI(interpolate(PATIENT_PROFILE, [id]), successFn, errorFn);\n    }\n\n    setCurrentPatient(patientObj, redirectUrl = null) {\n        let that = this;\n        let urlArray = this.props.location.pathname.split(\"/\");\n        if (!isNaN(parseInt(urlArray[2]))) {\n            if (patientObj) {\n                urlArray[1] = \"patient\";\n                urlArray[2] = patientObj.id;\n            } else {\n                urlArray[1] = \"patients\";\n                urlArray.splice(2, 1);\n            }\n        } else {\n            if (patientObj) {\n                urlArray[1] = \"patient\";\n                urlArray.splice(2, 0, patientObj.id);\n            }\n        }\n        this.props.history.push(urlArray.join(\"/\"));\n        this.setState({\n            currentPatient: patientObj,\n            loading: false,\n            listModalVisible: false\n        }, function () {\n            if (redirectUrl)\n                that.props.history.push(interpolate(redirectUrl, [patientObj.id]))\n        });\n    }\n\n    togglePatientListModal(option) {\n        this.setState({\n            listModalVisible: !!option\n        });\n    }\n\n    toggleShowAllClinic(option) {\n        this.setState({\n            showAllClinic: !!option\n        }, function () {\n            saveCommonSettings('showAllClinic', !!option)\n        });\n    }\n\n    loadPatientPendingAmount = () => {\n        let that = this;\n        if (this.state.currentPatient && this.state.currentPatient.id) {\n            let successFn = function (data) {\n                that.setState({\n                    pendingAmount: data\n                })\n            }\n            let errorFn = function () {\n\n            }\n            getAPI(interpolate(PATIENT_PENDING_AMOUNT, [this.state.currentPatient.id]), successFn, errorFn);\n        } else {\n            this.setState({\n                pendingAmount: null\n            })\n        }\n    };\n    loadPatientWallet = () => {\n        let that = this;\n        if (this.state.currentPatient && this.state.currentPatient.id) {\n            let successFn = function (data) {\n                that.setState({\n                    walletAmount: data\n                })\n            }\n            let errorFn = function () {\n\n            }\n            getAPI(interpolate(AGENT_WALLET, [this.state.currentPatient.id]), successFn, errorFn);\n        } else {\n            this.setState({\n                pendingAmount: null\n            })\n        }\n    };\n\n    loadMembership = () => {\n        let that = this;\n        if (this.state.currentPatient && this.state.currentPatient.id) {\n            let successFn = function (data) {\n                that.setState({\n                    MedicalMembership: data.length ? data[data.length - 1] : null,\n                })\n            };\n            let errorFn = function () {\n            };\n            getAPI(interpolate(PATIENTS_MEMBERSHIP_API, [that.state.currentPatient.id]), successFn, errorFn);\n        }\n    };\n\n    refreshWallet = () => {\n        this.loadPatientWallet();\n        this.loadPatientPendingAmount();\n        this.loadMembership();\n    };\n\n    render() {\n        let that = this;\n        return <Content>\n            <Spin spinning={this.state.loading} size={\"large\"}>\n                <PatientHeader {...this.state} {...this.props} togglePatientListModal={this.togglePatientListModal}\n                               key={this.state.currentPatient}\n                               setCurrentPatient={this.setCurrentPatient}\n                               toggleShowAllClinic={this.toggleShowAllClinic} refreshWallet={this.refreshWallet}/>\n\n                <Layout>\n                    <PatientSider {...this.state} {...this.props}/>\n                    <Layout>\n                        <Content className=\"main-container\"\n                                 key={this.state.showAllClinic.toString()}\n                                 style={{\n                                     // margin: '24px 16px',\n                                     padding: '0px 5px',\n                                     minHeight: 280,\n                                     // marginLeft: '200px'\n                                 }}>\n                            <Switch>\n                                {/*** Patient Profile Routes*/}\n                                <Route exact path={\"/patients/merge\"}\n                                       render={(route) => (that.props.activePracticePermissions.MergePatients || that.props.allowAllPermissions ?\n                                           <PatientMerge {...this.state}/> : <PermissionDenied/>)}/>\n\n                                {that.props.activePracticePermissions.WebAdmin || that.allowAllPermissions ?\n                                    <Route exact path='/patients/profile'\n                                           render={(route) =>\n                                               (this.state.currentPatient ?\n                                                   <Redirect\n                                                       to={\"/patient/\" + this.state.currentPatient.id + \"/profile\"}/> :\n                                                   <PatientProfile {...this.state}\n                                                                   key={this.state.currentPatient}\n                                                                   setCurrentPatient={this.setCurrentPatient}\n                                                                   refreshWallet={this.refreshWallet}\n                                                                   {...this.props}/>)}/>\n                                    : null}\n\n                                <Route exact path='/patients/profile/add'\n                                       render={(route) => (that.props.activePracticePermissions.AddPatient || that.props.allowAllPermissions ?\n                                           <EditPatientDetails\n                                               key={this.state.currentPatient} {...this.props} {...route}/> :\n                                           <PermissionDenied/>)}/>\n                                <Route exact path='/patient/:id/profile'\n                                       render={(route) => (that.props.activePracticePermissions.ViewPatient || that.props.allowAllPermissions ?\n                                           <PatientProfile {...this.state}\n                                                           key={this.state.currentPatient}\n                                                           refreshWallet={this.refreshWallet}\n                                                           setCurrentPatient={this.setCurrentPatient} {...this.props} {...route}/> :\n                                           <PermissionDenied/>)}/>\n                                <Route exact path='/patient/:id/profile/edit'\n                                       render={(route) => (that.props.activePracticePermissions.EditPatient || that.props.allowAllPermissions ?\n                                           <EditPatientDetails\n                                               key={this.state.currentPatient}{...this.state}{...this.props} {...route}/> :\n                                           <PermissionDenied/>)}/>\n\n                                {/*** Patient Appointment Routes*/}\n                                {that.props.activePracticePermissions.PatientAppointments || that.allowAllPermissions ?\n                                    <Route exact path='/patients/appointments'\n                                           render={(route) => (this.state.currentPatient ?\n                                               <Redirect\n                                                   to={\"/patient/\" + this.state.currentPatient.id + \"/appointments\"}/> :\n                                               <Appointment\n                                                   key={this.state.currentPatient} {...this.state} {...route} {...this.props}/>)}/>\n                                    : null}\n                                {that.props.activePracticePermissions.PatientAppointments || that.allowAllPermissions ?\n                                    <Route exact path='/patient/:id/appointments'\n                                           render={(route) => <Appointment\n                                               key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.state} {...route} {...this.props}/>}/>\n                                    : null}\n                                {that.props.activePracticePermissions.PatientAppointments || that.allowAllPermissions ?\n                                    <Route exact path='/patients/appointments/:appointmentid'\n                                           render={(route) => <Appointment\n                                               key={this.state.currentPatient} {...this.state} {...route} {...this.props}/>}/>\n                                    : null}\n                                {/*      <Route exact path='/patients/appointments/create'\n                           render={() => <CreateAppointment {...this.props} />}/>*/}\n\n                                {/*** Patient Communication Routes*/}\n                                {that.props.activePracticePermissions.PatientCommunications || that.allowAllPermissions ?\n                                    <Route exact path='/patients/communications'\n                                           render={() => (this.state.currentPatient ?\n                                               <Redirect\n                                                   to={\"/patient/\" + this.state.currentPatient.id + \"/communications\"}/> :\n                                               <PatientRequiredNoticeCard\n                                                   togglePatientListModal={this.togglePatientListModal}/>)}/>\n                                    : null}\n                                {that.props.activePracticePermissions.PatientCommunications || that.allowAllPermissions ?\n                                    <Route exact path='/patient/:id/communications'\n                                           render={(route) => <PatientCommunication\n                                               key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.state} {...route}/>}/>\n                                    : null}\n\n                                {/*** Patient Vital Sign Routes*/}\n                                {that.props.activePracticePermissions.PatientVitalSigns || that.allowAllPermissions ?\n                                    <Route exact path='/patients/emr/vitalsigns'\n                                           render={(route) => (this.state.currentPatient ?\n                                               <Redirect\n                                                   to={\"/patient/\" + this.state.currentPatient.id + \"/emr/vitalsigns\"}/> :\n                                               <PatientVitalSign\n                                                   togglePatientListModal={this.togglePatientListModal}\n                                                   key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.state} {...route} />)}/>\n                                    : null}\n\n                                <Route path='/patient/:id/emr/vitalsigns'\n                                       render={(route) => (that.props.activePracticePermissions.PatientVitalSigns || that.allowAllPermissions ?\n                                           <PatientVitalSign\n                                               key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.state} {...route} /> :\n                                           <PermissionDenied/>)}/>\n\n\n                                <Route exact path='/patient/:id/emr/vitalsigns/edit'\n                                       render={(route) => (that.props.activePracticePermissions.PatientVitalSigns || that.allowAllPermissions ?\n                                           <AddorEditPatientVitalSigns\n                                               key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.state} {...route}/> :\n                                           <PermissionDenied/>)}/>\n\n                                {/*** Patient Clinic Notes Routes*/}\n\n                                <Route path={\"/patients/emr/clinicnotes\"}\n                                       render={(route) =>\n                                           <PatientClinicNotes\n                                               togglePatientListModal={this.togglePatientListModal}\n                                               key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.props} {...this.state} {...route}/>}/>}/>\n                                <Route path={\"/patient/:id/emr/clinicnotes\"}\n                                       render={(route) =>\n                                           <PatientClinicNotes\n                                               key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.props} {...this.state} {...route}/>}/>\n\n                                {/*** Patient Completed Procedures Routes*/}\n                                {that.props.activePracticePermissions.PatientCompletedProcedure || that.allowAllPermissions ?\n                                    <Route exact path='/patients/emr/workdone'\n                                           render={(route) => (this.state.currentPatient ?\n                                               <Redirect\n                                                   to={\"/patient/\" + this.state.currentPatient.id + \"/emr/workdone\"}/> :\n                                               <PatientCompletedProcedures\n                                                   togglePatientListModal={this.togglePatientListModal}\n                                                   key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.props} {...this.state} {...route}/>)}/>\n                                    : null}\n                                {that.props.activePracticePermissions.PatientCompletedProcedure || that.allowAllPermissions ?\n                                    <Route path='/patient/:id/emr/workdone'\n                                           render={(route) => <PatientCompletedProcedures {...that.props}\n                                                                                          key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.state} {...route}/>}/>\n                                    : null}\n                                {/*** Patient Files Routes*/}\n                                {that.props.activePracticePermissions.PatientFiles || that.allowAllPermissions ?\n                                    <Route exact path='/patients/emr/files'\n                                           render={(route) => (this.state.currentPatient ?\n                                               <Redirect\n                                                   to={\"/patient/\" + this.state.currentPatient.id + \"/emr/files\"}/> :\n                                               <PatientFiles\n                                                   togglePatientListModal={this.togglePatientListModal}\n                                                   key={this.state.currentPatient ? this.state.currentPatient.id : null} {...route} {...this.state}/>)}/>\n                                    : null}\n                                {that.props.activePracticePermissions.PatientFiles || that.allowAllPermissions ?\n                                    <Route path={\"/patient/:id/emr/files\"}\n                                           render={(route) => <PatientFiles\n                                               key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.props} {...route} {...this.state}/>}/>\n                                    : null}\n                                {that.props.activePracticePermissions.PatientFiles || that.allowAllPermissions ?\n                                    <Route path={\"/patient/:id/emr/create-medicalCertificate\"}\n                                           render={(route) => <PatientMedicalCertificate\n\n                                               key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.props} {...route} {...this.state}/>}/>\n                                    : null}\n                                {/*** Patient Prescriptions Routes*/}\n                                {that.props.activePracticePermissions.PatientPrescriptions || that.allowAllPermissions ?\n                                    <Route exact path='/patients/emr/prescriptions'\n                                           render={(route) => (this.state.currentPatient ?\n                                               <Redirect\n                                                   to={\"/patient/\" + this.state.currentPatient.id + \"/emr/prescriptions\"}/> :\n                                               <PatientPrescriptions\n                                                   togglePatientListModal={this.togglePatientListModal}\n                                                   key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.props} {...this.state} {...route} />)}/>\n                                    : null}\n                                {that.props.activePracticePermissions.PatientPrescriptions || that.allowAllPermissions ?\n                                    <Route path='/patient/:id/emr/prescriptions'\n                                           render={(route) => <PatientPrescriptions\n                                               key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.props} {...this.state} {...route} />}/>\n                                    : null}\n                                {/*** Patient Treatment Plan Routes*/}\n                                {that.props.activePracticePermissions.PatientTreatmentPlans || that.allowAllPermissions ?\n                                    <Route exact path='/patients/emr/plans'\n                                           render={(route) => (this.state.currentPatient ?\n                                               <Redirect\n                                                   to={\"/patient/\" + this.state.currentPatient.id + \"/emr/plans\"}/> :\n                                               <PatientTreatmentPlans\n                                                   togglePatientListModal={this.togglePatientListModal}\n                                                   key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.state} {...this.props} {...route} />)}/>\n                                    : null}\n                                {that.props.activePracticePermissions.PatientTreatmentPlans || that.allowAllPermissions ?\n                                    <Route path='/patient/:id/emr/plans'\n                                           render={(route) => <PatientTreatmentPlans\n                                               key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.state} {...that.props} {...route} />}/>\n                                    : null}\n                                {/*** Patient Timeline Routes*/}\n\n                                <Route path={\"/patient/:id/emr/timeline\"}\n                                       render={(route) => (that.props.activePracticePermissions.PatientTimeline || that.allowAllPermissions ?\n                                           <PatientTimeline\n                                               key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.state} {...route}/> :\n                                           <PermissionDenied/>)}/>\n                                {/*** Patient Lab Order Routes*/}\n                                {that.props.activePracticePermissions.PatientLabOrders || that.allowAllPermissions ?\n                                    <Route exact path='/patient/emr/labtrackings'\n                                           render={(route) => (this.state.currentPatient ?\n                                                   <Redirect\n                                                       to={\"/patient/\" + this.state.currentPatient.id + \"/emr/labtrackings\"}/> :\n                                                   <PatientLabOrders\n                                                       key={this.state.currentPatient} {...this.state} {...route}/>\n                                           )}/>\n                                    : null}\n\n                                <Route path='/patient/:id/emr/labtrackings'\n                                       render={(route) => (that.props.activePracticePermissions.PatientLabOrders || that.allowAllPermissions ?\n                                           <PatientLabOrders\n                                               key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.state} {...route} /> :\n                                           <PermissionDenied/>)}/>\n\n                                {/*** Patient Invoices Routes*/}\n                                {that.props.activePracticePermissions.PatientInvoices || that.allowAllPermissions ?\n                                    <Route exact path='/patients/billing/invoices'\n                                           render={(route) => (this.state.currentPatient ?\n                                               <Redirect\n                                                   to={\"/patient/\" + this.state.currentPatient.id + \"/billing/invoices\"}/> :\n                                               <PatientInvoices\n                                                   togglePatientListModal={this.togglePatientListModal}\n                                                   key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.props} {...this.state} {...route} />)}/>\n                                    : null}\n                                <Route path='/patient/:id/billing/invoices'\n                                       render={(route) => (that.props.activePracticePermissions.PatientInvoices || that.allowAllPermissions ?\n                                           <PatientInvoices {...that.state} refreshWallet={this.refreshWallet}\n                                                            key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.props} {...this.state} {...route}/> :\n                                           <PermissionDenied/>)}/>\n\n\n                                {that.props.activePracticePermissions.PatientReturns || that.allowAllPermissions ?\n                                    <Route exact path='/patients/billing/return/invoices'\n                                           render={(route) => (this.state.currentPatient ?\n                                               <Redirect\n                                                   to={\"/patient/\" + this.state.currentPatient.id + \"/billing/return/invoices\"}/> :\n                                               <PatientInvoicesReturn\n                                                   togglePatientListModal={this.togglePatientListModal}\n                                                   key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.state} {...route}/>)}/>\n                                    : null}\n\n\n                                <Route exact path='/patient/:id/billing/return/invoices'\n                                       render={(route) => (that.props.activePracticePermissions.PatientReturns || that.allowAllPermissions ?\n                                           <PatientInvoicesReturn refreshWallet={this.refreshWallet}\n                                                                  key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.state} {...route}/> :\n                                           <PermissionDenied/>)}/>\n\n\n                                {/*** Patient Payments Routes*/}\n                                {that.props.activePracticePermissions.PatientPayments || that.allowAllPermissions ?\n                                    <Route path='/patients/billing/payments'\n                                           render={(route) => (this.state.currentPatient ?\n                                               <Redirect\n                                                   to={\"/patient/\" + this.state.currentPatient.id + \"/billing/payments\"}/> :\n                                               <PatientPayments\n                                                   togglePatientListModal={this.togglePatientListModal}\n                                                   key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.state} {...this.props} {...route}/>)}/>\n                                    : null}\n                                <Route path='/patient/:id/billing/payments'\n                                       render={(route) => (that.props.activePracticePermissions.PatientPayments || that.allowAllPermissions ?\n                                           <PatientPayments refreshWallet={this.refreshWallet}\n                                                            key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.state} {...route}/> :\n                                           <PermissionDenied/>)}/>\n\n                                {/*** Patient Ledger Routes*/}\n                                {this.state.currentPatient ?\n                                    <Route exact path='/patient/:id/billing/ledger'\n                                           render={(route) => (that.props.activePracticePermissions.PatientLedger || that.allowAllPermissions ?\n                                               <PatientLedgers\n                                                   refreshWallet={this.refreshWallet}\n                                                   key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.state} {...route}/> :\n                                               <PermissionDenied/>)}/> : null}\n\n                                <Route exact path='/patient/:id/prescriptions/template/add'\n                                       render={(route) => (that.props.activePracticePermissions.PatientPrescriptions || that.allowAllPermissions ?\n                                           <PrescriptionTemplate\n                                               key={this.state.currentPatient ? this.state.currentPatient.id : null} {...this.state} {...route}/> :\n                                           <PermissionDenied/>)}/>\n\n                                <Route path=\"/patient/:id/booking\"\n                                       render={(route) => (that.props.activePracticePermissions.PatientBookings || that.props.allowAllPermissions ?\n                                           <BookingHome {...this.state}{...this.props} {...route}\n                                                        key={this.state.currentPatient ? this.state.currentPatient.id : null}/> :\n                                           <PermissionDenied/>)}/>\n                                {this.state.currentPatient && this.state.currentPatient.is_agent ?\n                                    <Route exact path=\"/patient/:id/billing/wallet\"\n                                           render={(route) => (that.props.activePracticePermissions.PatientBookings || that.props.allowAllPermissions ?\n                                               <PatientWalletLedger {...this.state} {...this.props} {...route}\n                                                                    key={this.state.currentPatient ? this.state.currentPatient.id : null}/> :\n                                               <PermissionDenied/>)}/> : null}\n\n                                <Route render={(route) =>\n                                    (this.state.currentPatient ?\n                                        <Redirect\n                                            to={\"/patient/\" + this.state.currentPatient.id + \"/profile\"}/> :\n                                        <PatientProfile {...this.state}\n                                                        key={this.state.currentPatient}\n                                                        setCurrentPatient={this.setCurrentPatient} {...this.props}/>)}/>\n\n\n                            </Switch>\n                        </Content>\n                    </Layout>\n                </Layout>\n            </Spin>\n        </Content>\n    }\n}\n\nexport default PatientHome;\n","import jsPDF from 'jspdf';\nimport \"jspdf-autotable\";\nimport moment from \"moment\";\n\nexport const exportToExcel = function (columns, dataArray, fileName = \"download\") {\n    var str = makeCSVString(columns, dataArray);\n    downloadCSV(str, fileName)\n}\n\nexport const makeCSVString = function (columns, dataArray, printColumn = true) {\n    var str = '';\n    var line = [];\n    if (printColumn) {\n        columns.forEach(function (column) {\n            line.push(column);\n        });\n        str += line.join(',');\n        str += '\\r\\n';\n    }\n    dataArray.forEach(function (dataRow) {\n        line = [];\n        columns.forEach(function (column) {\n            if (dataRow[column])\n                line.push(dataRow[column]);\n            else\n                line.push('--');\n        });\n\n        str += line.join(',');\n        str += '\\r\\n';\n    });\n    return str;\n}\n\nexport const downloadCSV = function (str, fileName) {\n    var fName = fileName + '.csv';\n    var cCode, bArr = [];\n    bArr.push(255, 254);\n    for (var i = 0; i < str.length; ++i) {\n        cCode = str.charCodeAt(i);\n        bArr.push(cCode & 0xff);\n        bArr.push(cCode / 256 >>> 0);\n    }\n\n    var blob = new Blob([new Uint8Array(bArr)], {type: 'text/csv;charset=UTF-16LE;'});\n    if (navigator.msSaveBlob) {\n        navigator.msSaveBlob(blob, fName);\n    } else {\n        var link = document.createElement(\"a\");\n        if (link.download !== undefined) {\n            var url = window.URL.createObjectURL(blob);\n            link.setAttribute(\"href\", url);\n            link.setAttribute(\"download\", fName);\n            link.style.visibility = 'hidden';\n            document.body.appendChild(link);\n            link.click();\n            document.body.removeChild(link);\n            window.URL.revokeObjectURL(url);\n        }\n    }\n    // window.open(\"data:text/csv;charset=utf-8,\" + encodeURI(str));\n}\n\nexport const exportToPDF = function (columns, dataArray, fileName, printColumn = true) {\n    let summary = [];\n    var pdf = new jsPDF('p', 'mm', 'a4');\n    addPDFHeader(pdf);\n    // var rowArray = dataArray;\n    // var summaryColoumns = [\n    //     {title: \"Section\", dataKey: \"section\"},\n    // ];\n    // summaryColoumns.push({title: \"TOTAL\", dataKey: \"total\"});\n    // var finalSummRow = {};\n    // finalSummRow.section = 'TOTAL';\n    // finalSummRow.total = 0;\n    //\n    // summary.push(finalSummRow);\n\n\n    var rows = Object.create(dataArray);\n    pdf.autoTable(columns, rows, {\n        margin: {top: 35},\n        startY: pdf.autoTableEndPosY() + 20,\n        headerStyle: {\n            overflow: 'linebreak'\n        },\n        bodyStyles: {\n            overflow: 'linebreak'\n        }\n    });\n    addPDFFooter(pdf);\n    pdf.save(fileName+'.pdf')\n}\n\nfunction addPDFHeader(pdf) {\n    var locationLogo = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABAAAAAEhCAYAAAGW0uIhAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QzRDOTJGNzhGNTNBMTFFN0IzMkQ4NzVGMjlDQzg4OTQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QzRDOTJGNzlGNTNBMTFFN0IzMkQ4NzVGMjlDQzg4OTQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpDNEM5MkY3NkY1M0ExMUU3QjMyRDg3NUYyOUNDODg5NCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpDNEM5MkY3N0Y1M0ExMUU3QjMyRDg3NUYyOUNDODg5NCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PhLpaeAAAKXoSURBVHja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\";\n    // pdf.addImage(locationLogo, 'PNG', 15, 5, 36, 11);\n    pdf.line(10, 20, 200, 20);\n}\n\n\nfunction addPDFFooter(pdf) {\n    pdf.line(10, 270, 200, 270);\n    pdf.setFontSize(8);\n    pdf.text(10, 275, 'This is a computer generated report.');\n}\n","import React from \"react\";\nimport {Button, Col, Icon, Input, Modal, Row, Table, Tag} from \"antd\";\nimport {exportToExcel, exportToPDF} from \"../../utils/export\";\nimport moment from \"moment\";\nimport Highlighter from 'react-highlight-words';\nimport * as _ from \"lodash\";\nimport {interpolate} from \"../../utils/common\";\nimport {CLINIC_NOTES_PDF} from \"../../constants/api\";\nimport {sendMail} from \"../../utils/clinicUtils\";\n\nexport default class CustomizedTable extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...props,\n            searchText: '',\n        };\n        this.excelExport = this.excelExport.bind(this);\n        this.pdfExport = this.pdfExport.bind(this);\n    }\n\n    componentWillReceiveProps(newProps) {\n        if (newProps.columns != this.state.columns || newProps.dataSource != this.state.dataSource || newProps.loading != this.state.loading) {\n            this.setState({...newProps});\n        }\n    }\n\n    pdfExport() {\n        let that = this;\n        let excelColumns = [];\n            that.state.columns.forEach(function(item) {\n                if(!item.hideExport)\n                    excelColumns.push({title: item.title, dataKey: item.title})\n            });\n        let dataArrayForExcel = [];\n        that.state.dataSource.forEach(function (dataRow,index) {\n            let dataObjectToPush = {};\n            that.state.columns.forEach(function (column) {\n                if (column.export) {\n                    dataObjectToPush[column.title] = column.export(dataRow[column.dataIndex], dataRow,index);\n                } else {\n                    dataObjectToPush[column.title] = dataRow[column.dataIndex];\n                }\n            });\n            dataArrayForExcel.push(dataObjectToPush);\n        });\n        exportToPDF(excelColumns, dataArrayForExcel, \"Export\" + moment(), true);\n    }\n\n    excelExport() {\n        let that = this;\n        let excelColumns = [];\n        that.state.columns.forEach(function(item) {\n            if(!item.hideExport)\n                excelColumns.push(item.title)\n        });\n        let dataArrayForExcel = [];\n        that.state.dataSource.forEach(function (dataRow,index) {\n            let dataObjectToPush = {};\n            that.state.columns.forEach(function (column) {\n                if (column.export) {\n                    dataObjectToPush[column.title] = column.export(dataRow[column.dataIndex], dataRow,index);\n                } else {\n                    dataObjectToPush[column.title] = dataRow[column.dataIndex];\n                }\n            });\n            dataArrayForExcel.push(dataObjectToPush);\n        });\n        exportToExcel(excelColumns, dataArrayForExcel, \"Export\" + moment());\n    }\n\n\n    getColumnSearchProps = dataIndex => ({\n        filterDropdown: ({setSelectedKeys, selectedKeys, confirm, clearFilters}) => (\n            <div style={{padding: 8}}>\n                <Input\n                    ref={node => {\n                        this.searchInput = node;\n                    }}\n                    placeholder={`Search ${dataIndex}`}\n                    value={selectedKeys[0]}\n                    onChange={e => setSelectedKeys(e.target.value ? [e.target.value] : [])}\n                    onPressEnter={() => this.handleSearch(selectedKeys, confirm)}\n                    style={{width: 188, marginBottom: 8, display: 'block'}}\n                />\n                <Button\n                    type=\"primary\"\n                    onClick={() => this.handleSearch(selectedKeys, confirm)}\n                    icon=\"search\"\n                    size=\"small\"\n                    style={{width: 90, marginRight: 8}}\n                >\n                    Search\n                </Button>\n                <Button onClick={() => this.handleReset(clearFilters)} size=\"small\" style={{width: 90}}>\n                    Reset\n                </Button>\n            </div>\n        ),\n        filterIcon: filtered => (<Icon type=\"search\" style={{color: filtered ? '#1890ff' : undefined}}/>),\n        onFilter: (value, record) =>\n            record[dataIndex] != null ? record[dataIndex]\n                .toString()\n                .toLowerCase()\n                .includes(value.toLowerCase()) : '',\n        onFilterDropdownVisibleChange: visible => {\n            if (visible) {\n                setTimeout(() => this.searchInput.select());\n            }\n        },\n        render: text => (\n            <Highlighter\n                highlightStyle={{backgroundColor: '#ffc069', padding: 0}}\n                searchWords={[this.state.searchText]}\n                autoEscape\n                textToHighlight={text ? text.toString() : ''}\n            />\n        ),\n    });\n    handleSearch = (selectedKeys, confirm) => {\n        confirm();\n        this.setState({searchText: selectedKeys[0]});\n    };\n\n    handleReset = clearFilters => {\n        clearFilters();\n        this.setState({searchText: ''});\n    };\n\n    render() {\n        let that = this;\n        const columns = this.state.columns.map(item => {\n                if (!item.render)\n                    return {...item, ...that.getColumnSearchProps(item.dataIndex)}\n                return {...item};\n            }\n        )\n        return <div>\n            {this.props.hideReport ? null :\n                <Row>\n                    <Col>\n                        <Button.Group size=\"small\">\n                            <Button disabled={this.state.loading} type=\"primary\" onClick={this.excelExport}><Icon\n                                type=\"file-excel\"/> Excel</Button>\n                            <Button disabled={this.state.loading} type=\"primary\" onClick={this.pdfExport}><Icon\n                                type=\"file-pdf\"/> PDF</Button>\n\n                        </Button.Group>\n                    </Col>\n                </Row>}\n            <Row>\n                <Table pagination={{\n                    position: 'both',\n                    pageSizeOptions: ['10', '20', '30', '40', '50', '100'],\n                    showSizeChanger: true,\n                    showQuickJumper: true,\n                    size: \"small\",\n                    showTotal: function (total, range) {\n                        return <Tag>Showing <b>{range[0]}</b> to <b>{range[1]}</b> of <b>{total}</b> items</Tag>\n                    }\n                }} {...this.state} columns={columns}/>\n\n\n            </Row>\n        </div>\n    }\n\n}\n","import {Button, Row, Spin} from \"antd\";\nimport React from \"react\";\n\nexport default class InfiniteFeedLoaderButton extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            extraLoadingLabel: '',\n        }\n    }\n\n    startLoading = () => {\n        if (this.props.loaderFunction) {\n            this.props.loaderFunction();\n            this.startMakingExtraLabels();\n        }\n    }\n    startMakingExtraLabels = () => {\n        let that = this;\n        this.setState(function (prevState) {\n            if (prevState.extraLoadingLabel.length > 2) {\n                return {extraLoadingLabel: ''}\n            } else {\n                return {extraLoadingLabel: prevState.extraLoadingLabel + '.'}\n            }\n        }, function () {\n            if (that.props.loading)\n                setTimeout(function () {\n                    that.startMakingExtraLabels();\n                }, 500)\n        })\n    }\n\n    render() {\n        if (this.props.loading) {\n            return <Spin spinning={this.props.loading}>\n                <Row style={{minHeight: 200}}/>\n            </Spin>\n        }\n        if (this.props.hidden) {\n            return <Row>\n                <div style={{textAlign: 'center', margin: '15px 0px'}}>\n                    <small>No More Data Found</small>\n                </div>\n            </Row>\n        }\n        return <Row>\n            <div style={{textAlign: 'center', margin: '15px 0px'}}>\n                <Button type={'primary'} onClick={this.startLoading} loading={this.props.loading}>\n                    {this.props.loading ? 'Loading' + this.state.extraLoadingLabel : 'Load More'}\n                </Button>\n            </div>\n        </Row>\n    }\n}\n","import '../../style/index.less';\nimport './index.less';","function _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nimport * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport RcSwitch from 'rc-switch';\nimport classNames from 'classnames';\nimport omit from 'omit.js';\nimport Wave from '../_util/wave';\nimport Icon from '../icon';\nimport { ConfigConsumer } from '../config-provider';\nimport warning from '../_util/warning';\n\nvar Switch =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Switch, _React$Component);\n\n  function Switch(props) {\n    var _this;\n\n    _classCallCheck(this, Switch);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Switch).call(this, props));\n\n    _this.saveSwitch = function (node) {\n      _this.rcSwitch = node;\n    };\n\n    _this.renderSwitch = function (_ref) {\n      var _classNames;\n\n      var getPrefixCls = _ref.getPrefixCls;\n      var _this$props = _this.props,\n          customizePrefixCls = _this$props.prefixCls,\n          size = _this$props.size,\n          loading = _this$props.loading,\n          _this$props$className = _this$props.className,\n          className = _this$props$className === void 0 ? '' : _this$props$className,\n          disabled = _this$props.disabled;\n      var prefixCls = getPrefixCls('switch', customizePrefixCls);\n      var classes = classNames(className, (_classNames = {}, _defineProperty(_classNames, \"\".concat(prefixCls, \"-small\"), size === 'small'), _defineProperty(_classNames, \"\".concat(prefixCls, \"-loading\"), loading), _classNames));\n      var loadingIcon = loading ? React.createElement(Icon, {\n        type: \"loading\",\n        className: \"\".concat(prefixCls, \"-loading-icon\")\n      }) : null;\n      return React.createElement(Wave, {\n        insertExtraNode: true\n      }, React.createElement(RcSwitch, _extends({}, omit(_this.props, ['loading']), {\n        prefixCls: prefixCls,\n        className: classes,\n        disabled: disabled || loading,\n        ref: _this.saveSwitch,\n        loadingIcon: loadingIcon\n      })));\n    };\n\n    warning('checked' in props || !('value' in props), 'Switch', '`value` is not validate prop, do you mean `checked`?');\n    return _this;\n  }\n\n  _createClass(Switch, [{\n    key: \"focus\",\n    value: function focus() {\n      this.rcSwitch.focus();\n    }\n  }, {\n    key: \"blur\",\n    value: function blur() {\n      this.rcSwitch.blur();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(ConfigConsumer, null, this.renderSwitch);\n    }\n  }]);\n\n  return Switch;\n}(React.Component);\n\nexport { Switch as default };\nSwitch.__ANT_SWITCH = true;\nSwitch.propTypes = {\n  prefixCls: PropTypes.string,\n  // HACK: https://github.com/ant-design/ant-design/issues/5368\n  // size=default and size=large are the same\n  size: PropTypes.oneOf(['small', 'default', 'large']),\n  className: PropTypes.string\n};","import React from \"react\";\nimport CustomizedTable from \"../../common/CustomizedTable\";\nimport {getAPI, interpolate} from \"../../../utils/common\";\nimport {AGENT_WALLET, MY_AGENTS, WALLET_LEDGER, WALLET_LEDGER_SUM} from \"../../../constants/api\";\nimport {Card, Col, DatePicker, Icon, Row, Select, Statistic, Typography} from \"antd\";\nimport moment from \"moment\";\nimport InfiniteFeedLoaderButton from \"../../common/InfiniteFeedLoaderButton\";\n\nconst {Text} = Typography;\nexport default class PatientWalletLedger extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ledger: [],\n            ledgerDetails:{},\n            loading: false,\n            walletAmount: null,\n            selectedStartDate: moment().subtract(1, 'month'),\n            selectedEndDate: moment(),\n            agents: [],\n            selectedAgents: []\n        }\n    }\n\n    componentDidMount() {\n        this.loadData();\n        this.loadPatientWallet();\n        this.loadAgents();\n        this.loadSumData();\n    }\n\n    loadPatientWallet = () => {\n        let that = this;\n        if (this.props.currentPatient && this.props.currentPatient.id) {\n            let successFn = function (data) {\n                if (data.length)\n                    that.setState({\n                        walletAmount: data[0]\n                    })\n            }\n            let errorFn = function () {\n\n            }\n            getAPI(interpolate(AGENT_WALLET, [this.props.currentPatient.id]), successFn, errorFn);\n        } else {\n            this.setState({\n                pendingAmount: null\n            })\n        }\n    }\n    loadData = (page = 1) => {\n        let that = this;\n        this.setState({\n            loading: true\n        })\n        let successFn = function (data) {\n            if (data.current == 1) {\n                that.setState({\n                    ledger: data.results,\n                    loading: false,\n                    nextPage: data.next\n                })\n            } else {\n                that.setState(function (prevState) {\n                    return {\n                        ledger: [...prevState.ledger, ...data.results],\n                        loading: false,\n                        nextPage: data.next\n                    }\n                })\n            }\n        }\n        let errorFn = function () {\n            that.setState({\n                loading: false\n            })\n        }\n        let params = {\n            page,\n            start: this.state.selectedStartDate.startOf('day').format(),\n            end: this.state.selectedEndDate.endOf('day').format(),\n            agents: this.state.selectedAgents.join(',')\n        }\n        if (this.state.selectedAgents)\n            params.agents = this.state.selectedAgents.join(',');\n        getAPI(interpolate(WALLET_LEDGER, [this.props.currentPatient.id]), successFn, errorFn, params);\n    }\n    loadSumData = (page = 1) => {\n        let that = this;\n\n        let successFn = function (data) {\n                that.setState({\n                    ledgerDetails: data,\n                    nextPage: data.next\n                })\n\n        }\n        let errorFn = function () {\n        }\n        let params = {\n            page,\n            start: this.state.selectedStartDate.format(),\n            end: this.state.selectedEndDate.format(),\n            agents: this.state.selectedAgents.join(',')\n        }\n        if (this.state.selectedAgents)\n            params.agents = this.state.selectedAgents.join(',');\n        getAPI(interpolate(WALLET_LEDGER_SUM, [this.props.currentPatient.id]), successFn, errorFn, params);\n    }\n    loadAgents() {\n        var that = this;\n        let successFn = function (data) {\n            that.setState({\n                agents: data,\n            })\n        };\n        let errorFn = function () {\n        };\n        let apiParams = {\n            agent: true,\n            pagination: false\n        }\n        getAPI(interpolate(MY_AGENTS, [this.props.currentPatient.id]), successFn, errorFn, apiParams);\n    }\n\n    changeExpenseFilters = (type, value) => {\n        let that = this;\n        this.setState({\n            [type]: value\n        }, function () {\n            that.loadData(1);\n        })\n    }\n\n    render() {\n        let columns = [{\n            title: 'Date',\n            dataIndex: 'created_at',\n            key: 'created_at',\n            render: (value) => moment(value).format('LLL')\n        }, {\n            title: 'Patient',\n            dataIndex: 'received_from',\n            key: 'received_from',\n            render: (value, record) => value ? <Text>{value.user.first_name} ({value.custom_id})</Text> : '--'\n        }, , {\n            title: 'Refered By',\n            dataIndex: 'received_from.user.referer_data',\n            key: 'received_from.user.referer_data',\n            render: (value, record) => value && value.referer ? <Text>{value.referer.first_name} ({value.custom_id})</Text> : '--'\n        }, {\n            title: 'Ledger Comment',\n            dataIndex: 'comments',\n            key: 'comments',\n            render: (value, record) => record.is_cancelled ? <Text delete>{value}</Text> : value\n        },\n            //     {\n            //     title: 'Amount Type',\n            //     dataIndex: 'amount_type',\n            //     key: 'amount_type',\n            //     render: (value, record) => record.is_cancelled ? <Text delete>{value}</Text> : value\n            // },\n            {\n                title: 'Cr/Dr',\n                dataIndex: 'ledger_type',\n                key: 'ledger_type',\n                render: (value, record) => record.is_cancelled ? <Text delete>{value}</Text> : value\n            }, {\n                title: 'Amount',\n                dataIndex: 'amount',\n                key: 'amount',\n                render: (value, record) => record.is_cancelled ?\n                    <Text delete>{value.toFixed(2)}</Text> : value.toFixed(2)\n            }];\n        return <div>\n            <Card title={\"Wallet Ledger\"}>\n                <Row gutter={16} style={{marginBottom: 10}}>\n                    <Col span={2} style={{textAlign: \"right\"}}>\n                        <b> Agents</b>\n                    </Col>\n                    <Col span={4}>\n                        <Select style={{width: '100%'}} value={this.state.selectedAgents}\n                                mode=\"multiple\"\n                                disabled={this.state.loading}\n                                onChange={(value) => this.changeExpenseFilters('selectedAgents', value)}>\n                            {this.state.agents.map(item => <Select.Option\n                                value={item.id}>{item.user.first_name}</Select.Option>)}\n                        </Select>\n                    </Col>\n                    {/*<Col span={2} style={{textAlign: \"right\"}}>*/}\n                    {/*    <b> Payment Modes</b>*/}\n                    {/*</Col>*/}\n                    {/*<Col span={4}>*/}\n                    {/*    <Select style={{width: '100%'}} value={this.state.selectedPaymentMode}*/}\n                    {/*            disabled={this.state.loading}*/}\n                    {/*            onChange={(value) => this.changeExpenseFilters('selectedPaymentMode', value)}>*/}\n                    {/*        <Select.Option value={null}>--ALL PAYMENT MODE--</Select.Option>*/}\n                    {/*        {this.state.paymentModes.map(item => <Select.Option*/}\n                    {/*            value={item.id}>{item.mode}</Select.Option>)}*/}\n                    {/*    </Select>*/}\n                    {/*</Col>*/}\n\n                    <Col span={2} style={{textAlign: \"right\"}}>\n                        <b> From</b>\n                    </Col>\n                    <Col span={4}>\n                        <DatePicker value={this.state.selectedStartDate}\n                                    disabled={this.state.loading} allowClear={false}\n                                    onChange={(value) => this.changeExpenseFilters('selectedStartDate', value)}/>\n                    </Col>\n                    <Col span={2} style={{textAlign: \"right\"}}>\n                        <b> To</b>\n                    </Col>\n                    <Col span={4}>\n                        <DatePicker value={this.state.selectedEndDate}\n                                    disabled={this.state.loading}\n                                    allowClear={false}\n                                    onChange={(value) => this.changeExpenseFilters('selectedEndDate', value)}/>\n                    </Col>\n                </Row>\n                {this.state.walletAmount ?\n                    <Row style={{textAlign: 'center', marginBottom: 10}}>\n                        {/*<Col span={12}>*/}\n                        {/*    <Statistic title={\"\"} prefix={<Icon type={\"wallet\"}/>}*/}\n                        {/*               value={this.state.walletAmount.refundable_amount}/>*/}\n                        {/*</Col>*/}\n                        <Col span={24}>\n                            <Statistic title={\"Wallet Total\"} prefix={<Icon type={\"wallet\"}/>}\n                                       value={this.state.walletAmount.non_refundable} precision={2}/>\n                        </Col>\n                    </Row> : null}\n                <CustomizedTable dataSource={this.state.ledger} loading={this.state.loading} columns={columns}\n                                 hideReport\n                                 pagination={false}/>\n                <InfiniteFeedLoaderButton loading={this.state.loading}\n                                          hidden={!this.state.nextPage}\n                                          loaderFunction={() => this.loadData(this.state.nextPage)}/>\n                <Row style={{textAlign: 'center', marginBottom: 10}}>\n                    <Col span={8}>\n                        <Statistic title={\"Credit\"} value={this.state.ledgerDetails.credit} precision={2}/>\n                    </Col>\n                    <Col span={8}>\n                        <Statistic title={\"Debit\"} value={this.state.ledgerDetails.debit} precision={2}/>\n                    </Col>\n                    <Col span={8}>\n                        <Statistic title={\"Profit\"} value={this.state.ledgerDetails.credit-this.state.ledgerDetails.debit} precision={2}/>\n                    </Col>\n                </Row>\n            </Card>\n        </div>\n    }\n}\n"],"sourceRoot":""}