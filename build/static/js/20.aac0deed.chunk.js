(this["webpackJsonpbk-erp-front"]=this["webpackJsonpbk-erp-front"]||[]).push([[20],{1257:function(e,t,a){"use strict";a.r(t);var n=a(95),i=a(94),r=a(97),l=a(96),s=a(98),c=(a(135),a(99)),o=a(0),u=a.n(o),d=a(25),m=(a(231),a(232)),p=(a(229),a(228)),h=(a(242),a(19)),f=(a(256),a(257)),y=(a(238),a(239)),b=a(31),v=a(24),E=a(64),g=a(23),_=a(34),I=(a(226),a(227)),O=(a(240),a(241)),j=a(2),x=a(246),k=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(l.a)(t).call(this,e))).changeRedirect=function(){var e=a.state.redirect;a.setState({redirect:!e})},a.state={editData:a.props.editData?a.props.editData:null},a}return Object(s.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.match.params.id&&(this.state.editData||this.loadData())}},{key:"loadData",value:function(){var e=this;Object(g.c)(Object(g.f)(_.xd,[this.props.match.params.id]),(function(t){e.setState({editData:t})}),(function(){}))}},{key:"render",value:function(){var e,t=this,a=this,n=[{label:"Name",key:"name",initialValue:this.state.editData?this.state.editData.name:null,type:j.W,required:!0},{label:"Description",key:"description",initialValue:this.state.editData?this.state.editData.description:null,type:j.W}];this.state.editData&&(e={successFn:function(e){Object(g.a)(j.Sb,"success"),a.props.loadData()},errorFn:function(){},action:Object(g.f)(_.xd,[this.props.match.params.id]),method:"put"});var i=O.a.create()(x.a),r={successFn:function(e){Object(g.a)(j.Sb,"success"),a.props.loadData(),a.props.history&&a.props.history.replace("/inventory/vendor")},errorFn:function(){},action:Object(g.f)(_.Nd,[a.props.active_practiceId]),method:"post"},l=[{key:"practice",value:this.props.active_practiceId}];return u.a.createElement(I.a,null,u.a.createElement(m.a,null,u.a.createElement(d.b,{exact:!0,path:"/inventory/vendor/edit/:id",render:function(a){return t.props.match.params.id?u.a.createElement(i,Object.assign({defaultValues:l,title:"Edit Vendor",changeRedirect:t.changeRedirect,formProp:e},a,{fields:n})):u.a.createElement(d.a,{to:"/inventory/vendor"})}}),u.a.createElement(d.b,{exact:!0,path:"/inventory/vendor/add",render:function(e){return u.a.createElement(i,Object.assign({title:"Add Vendor",changeRedirect:t.changeRedirect},e,{formProp:r,fields:n}))}})),this.state.redirect&&u.a.createElement(d.a,{to:"/inventory/vendor"}))}}]),t}(u.a.Component),D=a(243),S=a(295),C=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(l.a)(t).call(this,e))).state={active_practiceId:a.props.active_practiceId,vendors:null},a.loadData=a.loadData.bind(Object(v.a)(a)),a}return Object(s.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){var e=this;Object(g.c)(Object(g.f)(_.Nd,[this.props.active_practiceId]),(function(t){e.setState({vendors:t})}),(function(){}))}},{key:"deleteVendor",value:function(e){var t=this,a=Object(b.a)({},e,{is_active:!1});console.log("is_active",a);Object(g.l)(Object(g.f)(_.xd,[e]),a,(function(e){t.loadData(),console.log("Deleted")}),(function(){}))}},{key:"render",value:function(){var e=this,t=this,a=[{title:"Name",key:"name",dataIndex:"name"},{title:"Details",key:"details",dataIndex:"description"},{title:"Action",render:function(e){return u.a.createElement("div",null,u.a.createElement(E.b,{to:"/inventory/vendor/edit/".concat(e.id)},"Edit"),u.a.createElement(y.a,{type:"vertical"}),u.a.createElement(f.a,{title:"Are you sure delete this item?",onConfirm:function(){return t.deleteVendor(e.id)},okText:"Yes",cancelText:"No"},u.a.createElement("a",{disabled:!t.props.activePracticePermissions.DeleteVendor},"Delete")))}}];return u.a.createElement("div",null,u.a.createElement(d.d,null,u.a.createElement(d.b,{exact:!0,path:"/inventory/vendor/add",render:function(a){return t.props.activePracticePermissions.EditVendor||t.props.allowAllPermissions?u.a.createElement(k,Object.assign({},e.state,a,{loadData:t.loadData})):u.a.createElement(S.a,null)}}),u.a.createElement(d.b,{exact:!0,path:"/inventory/vendor/edit/:id",render:function(a){return t.props.activePracticePermissions.EditVendor||t.props.allowAllPermissions?u.a.createElement(k,Object.assign({},e.state,a,{loadData:t.loadData})):u.a.createElement(S.a,null)}}),u.a.createElement(m.a,{title:"Vendors",extra:t.props.activePracticePermissions.EditVendor?u.a.createElement(E.b,{to:"/inventory/vendor/add"}," ",u.a.createElement(p.a,{type:"primary"},u.a.createElement(h.a,{type:"plus"})," Add")):null},u.a.createElement(D.a,{columns:a,dataSource:this.state.vendors,hideReport:!t.props.activePracticePermissions.ExportVendor}))))}}]),t}(u.a.Component),P=(a(247),a(248)),M=(a(278),a(279)),V=(a(234),a(233)),L=(a(236),a(237)),T=a(47),w=a(230),A=a.n(w),F=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(l.a)(t).call(this,e))).state={editData:a.props.editData?a.props.editData:null},a}return Object(s.a)(t,e),Object(i.a)(t,[{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"componentDidMount",value:function(){this.props.match.params.id&&(this.state.editData||this.loadData()),this.loadExpensetypes(),this.loadPaymentModes(),this.loadVendors()}},{key:"loadPaymentModes",value:function(){var e=this;Object(g.c)(Object(g.f)(_.Ac,[this.props.active_practiceId]),(function(t){e.setState({paymentModes:t})}),(function(){}))}},{key:"loadData",value:function(){var e=this;Object(g.c)(Object(g.f)(_.fd,[this.props.match.params.id]),(function(t){e.setState({editData:t})}),(function(){}))}},{key:"loadExpensetypes",value:function(){var e=this;Object(g.c)(Object(g.f)(_.qb,[this.props.active_practiceId]),(function(t){e.setState({expense_types:t})}),(function(){}))}},{key:"loadVendors",value:function(){var e=this;Object(g.c)(Object(g.f)(_.Nd,[this.props.active_practiceId]),(function(t){e.setState({vendors:t})}),(function(){}))}},{key:"render",value:function(){var e=this,t=[];this.state.paymentModes&&this.state.paymentModes.forEach((function(e){t.push({label:e.mode,value:e.id})}));var a=[];this.state.expense_types&&this.state.expense_types.forEach((function(e){a.push({label:e.name,value:e.id})}));var n=[];this.state.vendors&&this.state.vendors.forEach((function(e){n.push({label:e.name,value:e.id})}));var i,r=[{label:"Expense Date",key:"expense_date",required:!0,initialValue:this.state.editData?this.state.editData.expense_date:A()(),type:j.K,format:"YYYY-MM-DD"},{label:"Amount",key:"amount",required:!0,initialValue:this.state.editData?this.state.editData.amount:null,type:j.pb,follow:"INR"},{label:"Vendor",key:"vendor",type:j.Nb,initialValue:this.state.editData?this.state.editData.vendors:null,options:n},{label:"Expense type",key:"expense_type",type:j.Nb,initialValue:this.state.editData&&this.state.editData.expense_type?this.state.editData.expense_type.id:null,options:a},{label:"Payment Mode",key:"payment_mode",type:j.Nb,required:!0,initialValue:this.state.editData&&this.state.editData.payment_mode?this.state.editData.payment_mode.id:null,options:t},{label:"Bank Name",key:"bank_name",type:j.W,initialValue:this.state.editData?this.state.editData.bank_name:null},{label:"Remark",key:"remark",type:j.Ub,minRows:2,maxRows:6,initialValue:this.state.editData?this.state.editData.remark:null}],l=this;this.state.editData&&(i={successFn:function(e){Object(g.a)(j.Sb,"success"),l.props.loadData(),l.changeRedirect(),l.props.history&&l.props.history.replace("/inventory/expenses")},errorFn:function(){},action:Object(g.f)(_.fd,[this.props.match.params.id]),method:"put"});var s=O.a.create()(x.a),c={successFn:function(e){Object(g.a)(j.Sb,"success"),l.props.loadData(),l.changeRedirect(),l.props.history&&l.props.history.replace("/inventory/expenses")},errorFn:function(){},action:_.nb,method:"post"},o=[{key:"practice",value:this.props.active_practiceId}];return u.a.createElement(I.a,null,u.a.createElement(m.a,null,u.a.createElement(d.b,{exact:!0,path:"/inventory/expenses/edit/:id",render:function(){return e.props.match.params.id?u.a.createElement(s,{defaultValues:o,title:"Edit Expense",changeRedirect:e.changeRedirect,formProp:i,fields:r}):u.a.createElement(d.a,{to:"/inventory/expenses"})}}),u.a.createElement(d.b,{exact:!0,path:"/inventory/expenses/add",render:function(){return u.a.createElement(s,{title:"Add Expenses",changeRedirect:e.changeRedirect,formProp:c,fields:r,defaultValues:o})}})),this.state.redirect&&u.a.createElement(d.a,{to:"/inventory/expenses"}))}}]),t}(u.a.Component),q=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(l.a)(t).call(this,e))).changeExpenseFilters=function(e,t){var n=Object(v.a)(a);a.setState(Object(T.a)({},e,t),(function(){n.loadData()}))},a.loadData=function(){var e=Object(v.a)(a);e.setState({loading:!0});Object(g.c)(_.nb,(function(t){e.setState({expenses:t,loading:!1}),console.log("log data",e.state.expenses)}),(function(){e.setState({loading:!1})}),{practice:e.props.active_practiceId,payment_mode:e.state.selectedPaymentMode,expense_type:e.state.selectedExpenseType,start:e.state.selectedStartDate.format(),end:e.state.selectedEndDate.format()})},a.state={active_practiceId:a.props.active_practiceId,expenses:null,expenseTypes:[],loading:!0,paymentModes:[],selectedExpenseType:null,selectedPaymentMode:null,selectedStartDate:A()().subtract(1,"month"),selectedEndDate:A()()},a.loadData=a.loadData.bind(Object(v.a)(a)),a}return Object(s.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.loadExpenseTypes(),this.loadPaymentModes(),this.loadData()}},{key:"loadExpenseTypes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this,a=function(a){console.log("get table"),e?t.setState({deletedExpenses:a,deletedLoading:!1}):t.setState({expenseTypes:a})},n=function(){};e?Object(g.c)(Object(g.f)(_.qb,[this.props.active_practiceId]),a,n,{deleted:!0}):Object(g.c)(Object(g.f)(_.qb,[this.props.active_practiceId]),a,n)}},{key:"loadPaymentModes",value:function(){var e=this;Object(g.c)(Object(g.f)(_.Ac,[this.props.active_practiceId]),(function(t){console.log("get table"),e.setState({paymentModes:t})}),(function(){}))}},{key:"deleteObject",value:function(e,t){var a=this,n={};n.id=e.id,n.is_active=t;Object(g.l)(Object(g.f)(_.fd,[e.id]),n,(function(e){a.loadData(),a.state.showDeleted&&a.loadData(!0)}),(function(){}))}},{key:"render",value:function(){var e=this,t=this,a=[{title:"Expense Date",key:"expense_date",dataIndex:"expense_date",export:function(e){return A()(e).format("lll")},render:function(e){return A()(e).format("lll")}},{title:"Expense Type",key:"expense_type",dataIndex:"expense_type.name"},{title:"Vendor",key:"vendor",dataIndex:"vendor.name"},{title:"Payment Mode",key:"payment_mode",dataIndex:"payment_mode.mode"},{title:"Amount",key:"amount",dataIndex:"amount"},{title:"Bank Name",key:"bank_name",dataIndex:"bank_name"},{title:"Remark",key:"remark",dataIndex:"remark"},{title:"Action",render:function(e){return u.a.createElement("div",null,t.props.activePracticePermissions.EditExpenses||t.props.allowAllPermissions?u.a.createElement(E.b,{to:"/inventory/expenses/edit/".concat(e.id)},"Edit"):null,u.a.createElement(y.a,{type:"vertical"}),t.props.activePracticePermissions.DeleteExpenses||t.props.allowAllPermissions?u.a.createElement(f.a,{title:"Are you sure to delete this?",onConfirm:function(){return t.deleteObject(e,!1)},okText:"Yes",cancelText:"No"},u.a.createElement("a",null,"Delete")):null)}}];return u.a.createElement("div",null,u.a.createElement(d.d,null,u.a.createElement(d.b,{exact:!0,path:"/inventory/expenses/add",render:function(a){return t.props.activePracticePermissions.EditExpenses||t.props.allowAllPermissions?u.a.createElement(F,Object.assign({},e.state,a,{loadData:e.loadData})):u.a.createElement(S.a,null)}}),u.a.createElement(d.b,{exact:!0,path:"/inventory/expenses/edit/:id",render:function(a){return t.props.activePracticePermissions.EditExpenses||t.props.allowAllPermissions?u.a.createElement(F,Object.assign({},e.state,a,{loadData:e.loadData})):u.a.createElement(S.a,null)}}),u.a.createElement(m.a,{title:"Expenses",extra:t.props.activePracticePermissions.EditExpenses||t.props.allowAllPermissions?u.a.createElement(E.b,{to:"/inventory/expenses/add"}," ",u.a.createElement(p.a,{type:"primary"},u.a.createElement(h.a,{type:"plus"})," Add")):u.a.createElement(S.a,null)},u.a.createElement(I.a,{gutter:16,style:{marginBottom:10}},u.a.createElement(L.a,{span:2,style:{textAlign:"right"}},u.a.createElement("b",null," Expense Types")),u.a.createElement(L.a,{span:4},u.a.createElement(V.a,{style:{width:"100%"},value:this.state.selectedExpenseType,disabled:this.state.loading,onChange:function(t){return e.changeExpenseFilters("selectedExpenseType",t)}},u.a.createElement(V.a.Option,{value:null},"--ALL EXPENSES--"),this.state.expenseTypes.map((function(e){return u.a.createElement(V.a.Option,{value:e.id},e.name)})))),u.a.createElement(L.a,{span:2,style:{textAlign:"right"}},u.a.createElement("b",null," Payment Modes")),u.a.createElement(L.a,{span:4},u.a.createElement(V.a,{style:{width:"100%"},value:this.state.selectedPaymentMode,disabled:this.state.loading,onChange:function(t){return e.changeExpenseFilters("selectedPaymentMode",t)}},u.a.createElement(V.a.Option,{value:null},"--ALL PAYMENT MODE--"),this.state.paymentModes.map((function(e){return u.a.createElement(V.a.Option,{value:e.id},e.mode)})))),u.a.createElement(L.a,{span:2,style:{textAlign:"right"}},u.a.createElement("b",null," From")),u.a.createElement(L.a,{span:4},u.a.createElement(M.a,{value:this.state.selectedStartDate,disabled:this.state.loading,allowClear:!1,onChange:function(t){return e.changeExpenseFilters("selectedStartDate",t)}})),u.a.createElement(L.a,{span:2,style:{textAlign:"right"}},u.a.createElement("b",null," To")),u.a.createElement(L.a,{span:4},u.a.createElement(M.a,{value:this.state.selectedEndDate,disabled:this.state.loading,allowClear:!1,onChange:function(t){return e.changeExpenseFilters("selectedEndDate",t)}}))),u.a.createElement(P.a,{loading:this.state.loading,dataSource:this.state.expenses,columns:a}))))}}]),t}(u.a.Component),N=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(l.a)(t).call(this,e))).changeRedirect=function(){var e=a.state.redirect;a.setState({redirect:!e})},a.state={editData:a.props.editData?a.props.editData:null},a}return Object(s.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.match.params.id&&(this.state.editData||this.loadData())}},{key:"loadData",value:function(){var e=this;Object(g.c)(Object(g.f)(_.nd,[this.props.match.params.id]),(function(t){e.setState({editData:t})}),(function(){}))}},{key:"render",value:function(){var e,t=this,a=this,n=[{label:"Name",key:"name",initialValue:this.state.editData?this.state.editData.name:null,type:j.W},{label:"Details",key:"description",initialValue:this.state.editData?this.state.editData.description:null,type:j.Ub}];this.state.editData&&(e={successFn:function(e){Object(g.a)(j.Sb,"success"),a.props.loadData(),a.props.history&&a.props.history.replace("/inventory/manufacture")},errorFn:function(){},action:Object(g.f)(_.nd,[this.props.match.params.id]),method:"put"});var i=O.a.create()(x.a),r={successFn:function(e){Object(g.a)(j.Sb,"success"),a.props.loadData(),a.props.history&&a.props.history.replace("/inventory/manufacture")},errorFn:function(){},action:_.Sb,method:"post"},l=[{key:"practice",value:this.props.active_practiceId}];return u.a.createElement(I.a,null,u.a.createElement(m.a,null,u.a.createElement(d.b,{path:"/inventory/manufacture/edit/:id",render:function(a){return t.props.match.params.id?u.a.createElement(i,Object.assign({defaultValues:l,title:"Edit Manufacturer",changeRedirect:t.changeRedirect,formProp:e},a,{fields:n})):u.a.createElement(d.a,{to:"/inventory/manufacture"})}}),u.a.createElement(d.b,{exact:!0,path:"/inventory/manufacture/add",render:function(e){return a.props.activePracticePermissions.EditManufacturer||a.props.allowAllPermissions?u.a.createElement(i,Object.assign({title:"Add Manufacturer",changeRedirect:t.changeRedirect},e,{formProp:r,fields:n})):u.a.createElement(S.a,null)}})),this.state.redirect&&u.a.createElement(d.a,{to:"/inventory/manufacture"}))}}]),t}(u.a.Component),R=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(l.a)(t).call(this,e))).state={active_practiceId:a.props.active_practiceId,manufactures:null,loading:!0},a.loadData=a.loadData.bind(Object(v.a)(a)),a.deleteManufacture=a.deleteManufacture.bind(Object(v.a)(a)),a}return Object(s.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){var e=this;Object(g.c)(_.Sb,(function(t){e.setState({manufactures:t,loading:!1})}),(function(){e.setState({loading:!1})}))}},{key:"deleteManufacture",value:function(e){var t=this,a=Object(b.a)({},e,{is_active:!1});Object(g.l)(Object(g.f)(_.nd,[e]),a,(function(e){t.setState({loading:!1}),t.loadData()}),(function(){}))}},{key:"render",value:function(){var e=this,t=this,a=[{title:"Name",key:"name",dataIndex:"name"},{title:"Details",key:"details",dataIndex:"description"},{title:"Action",render:function(e){return u.a.createElement("div",null,t.props.activePracticePermissions.EditManufacturer||t.props.allowAllPermissions?u.a.createElement(E.b,{to:"/inventory/manufacture/edit/".concat(e.id)},"Edit"):null,u.a.createElement(y.a,{type:"vertical"}),t.props.activePracticePermissions.DeleteManufacturer||t.props.allowAllPermissions?u.a.createElement(f.a,{title:"Are you sure delete this item?",onConfirm:function(){return t.deleteManufacture(e.id)},okText:"Yes",cancelText:"No"},u.a.createElement("a",null,"Delete")):null)}}];return u.a.createElement("div",null,u.a.createElement(d.d,null,u.a.createElement(d.b,{exact:!0,path:"/inventory/manufacture/add",render:function(a){return t.props.activePracticePermissions.EditManufacturer||t.props.allowAllPermissions?u.a.createElement(N,Object.assign({},e.state,a,e.props,{loadData:t.loadData})):u.a.createElement(S.a,null)}}),u.a.createElement(d.b,{path:"/inventory/manufacture/edit/:id",render:function(a){return t.props.activePracticePermissions.EditManufacturer||t.props.allowAllPermissions?u.a.createElement(N,Object.assign({},e.state,e.props,a,{loadData:t.loadData})):u.a.createElement(S.a,null)}}),u.a.createElement(m.a,{title:"Manufacturers",extra:u.a.createElement(E.b,{to:"/inventory/manufacture/add"}," ",u.a.createElement(p.a,{type:"primary",disabled:!t.props.activePracticePermissions.EditManufacturer},u.a.createElement(h.a,{type:"plus"})," Add"))},u.a.createElement(D.a,{loading:this.state.loading,dataSource:this.state.manufactures,columns:a,hideReport:!t.props.activePracticePermissions.ExportManufacturer}))))}}]),t}(u.a.Component),Y=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(l.a)(t).call(this,e))).state={editData:a.props.editData?a.props.editData:null},a}return Object(s.a)(t,e),Object(i.a)(t,[{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"componentDidMount",value:function(){this.props.match.params.id&&(this.state.editData||this.loadData()),this.getPatientListData()}},{key:"loadData",value:function(){var e=this;Object(g.c)(Object(g.f)(_.fd,[this.props.match.params.id]),(function(t){e.setState({editData:t})}),(function(){}))}},{key:"getPatientListData",value:function(){var e=this;Object(g.c)(_.jc,(function(t){e.setState({patientListData:t})}),(function(){}))}},{key:"render",value:function(){var e=this,t=[];this.state.patientListData&&this.state.patientListData.length&&this.state.patientListData.forEach((function(e){t.push({label:e.name,value:e.id})}));var a,n=[{label:"Job number ",key:"job_no",initialValue:this.state.editData?this.state.editData.job_no:null,type:j.W},{label:"Doctor Name ",key:"job_no",initialValue:this.state.editData?this.state.editData.doctor_name:null,type:j.W},{label:"Name ",key:"name",initialValue:this.state.editData?this.state.editData.name:null,type:j.W},{label:"Status ",key:"status",initialValue:this.state.editData?this.state.editData.status:null,type:j.W},{label:"Due Date",key:"due_date",type:j.K,initialValue:this.state.editData?this.state.editData.due_date:null,format:"YYYY/MM/DD HH:mm"},{label:"patient",key:"patient",type:j.Nb,initialValue:this.state.editData?this.state.editData.patient:null,options:t}];this.state.editBlogData&&(a={successFn:function(e){Object(g.a)(j.Sb,"success"),console.log(e)},errorFn:function(){},action:Object(g.f)(_.kd,[this.props.match.params.id]),method:"put"});var i=O.a.create()(x.a),r={successFn:function(e){Object(g.a)(j.Sb,"success"),console.log(e)},errorFn:function(){},action:_.Hb,method:"post"},l=[{key:"practice",value:this.props.active_practiceId}];return u.a.createElement(I.a,null,u.a.createElement(m.a,null,u.a.createElement(d.b,{exact:!0,path:"/inventory/lab/edit/:id",render:function(){return e.props.match.params.id?u.a.createElement(i,{defaultValues:l,title:"Edit Lab",changeRedirect:e.changeRedirect,formProp:a,fields:n}):u.a.createElement(d.a,{to:"/inventory/lab"})}}),u.a.createElement(d.b,{exact:!0,path:"/inventory/lab/add",render:function(){return u.a.createElement(i,{title:"Add lab",changeRedirect:e.changeRedirect,formProp:r,fields:n})}})),this.state.redirect&&u.a.createElement(d.a,{to:"/inventory/lab"}))}}]),t}(u.a.Component),B=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(l.a)(t).call(this,e))).state={active_practiceId:a.props.active_practiceId,lab:null,loading:!0},a.loadData=a.loadData.bind(Object(v.a)(a)),a}return Object(s.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){var e=this;Object(g.c)(_.Hb,(function(t){e.setState({lab:t,loading:!1})}),(function(){e.setState({loading:!1})}))}},{key:"render",value:function(){var e=this;return u.a.createElement("div",null,u.a.createElement(d.d,null,u.a.createElement(d.b,{exact:!0,path:"/inventory/lab/add",render:function(t){return u.a.createElement(Y,Object.assign({},e.state,t))}}),u.a.createElement(d.b,{exact:!0,path:"/inventory/expenses/lab/:id",render:function(t){return u.a.createElement(Y,Object.assign({},e.state,t))}}),u.a.createElement(m.a,{loading:this.state.loading,title:"Lab",extra:u.a.createElement(E.b,{to:"/inventory/lab/add"}," ",u.a.createElement(p.a,{type:"primary"},u.a.createElement(h.a,{type:"plus"})," Add"))})))}}]),t}(u.a.Component),U=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(l.a)(t).call(this,e))).state={activity:null,loading:!0},a.loadActivityLog=a.loadActivityLog.bind(Object(v.a)(a)),a}return Object(s.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){this.loadActivityLog()}},{key:"loadActivityLog",value:function(){var e=this;Object(g.c)(_.c,(function(t){e.setState({activity:t,loading:!1})}),(function(){e.setState({loading:!1})}))}},{key:"render",value:function(){return u.a.createElement(m.a,{title:"Activity Log"},u.a.createElement(P.a,{loading:this.state.loading,dataSource:this.state.activity}))}}]),t}(u.a.Component),Q=(a(259),a(260)),W=(a(244),a(245)),z=(a(251),a(254)),G=(a(252),a(253)),H=(a(270),a(268)),K=(a(262),a(263)),J=a(250),X=(a(281),a(283)),Z=(a(275),a(272)),$=a(1236),ee=a.n($),te=a(249),ae=a(26),ne=Z.a.Group,ie=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(l.a)(t).call(this,e))).loadDrugType=function(){var e=Object(v.a)(a);Object(g.c)(Object(g.f)(_.ab,[a.props.active_practiceId]),(function(t){e.setState({drugTypeList:t})}),(function(){}))},a.onChangeHandeler=function(e){Object(v.a)(a).setState({type:e})},a.setFormParams=function(e,t){a.setState(Object(T.a)({},e,t))},a.handleSubmit=function(e){e.preventDefault();var t=Object(v.a)(a);a.props.form.validateFields((function(e,n){if(!e){var i=Object(b.a)({},n,{retail_without_tax:t.state.retail_price,net_price:void 0,practice:a.props.active_practiceId});a.state.editInventoryItem&&(i.id=a.state.editInventoryItem.id);var r=function(e){t.setState({redirect:!0}),t.props.loadData(),t.props.history.replace("/inventory")},l=function(){};a.state.editInventoryItem?Object(g.l)(Object(g.f)(_.hd,[a.props.match.params.id]),i,r,l):Object(g.j)(Object(g.f)(_.xb,[a.props.match.params.id]),i,r,l)}}))},a.changeNetPrice=function(e){var t=Object(v.a)(a),n=a.props.form,i=n.getFieldsValue;n.setFields;setTimeout((function(){var e=i();if(e.retail_with_tax){var a=0;e.taxes.forEach((function(e){t.state.taxes_list.forEach((function(t){t.id==e&&(a+=t.tax_value)}))}));var n=e.retail_with_tax/(1+.01*a);t.setState({retail_price:n.toFixed(2)})}else t.setState({retail_price:0})}),1e3)},a.state={taxes_list:a.props.taxes_list?a.props.taxes_list:null,manufacture_list:a.props.manufacture_list?a.props.manufacture_list:null,vendor_list:a.props.vendor_list?a.props.vendor_list:null,redirect:!1,type:a.props.editInventoryItem?a.props.editInventoryItem:null,drugUnitList:[],drugTypeList:[],retail_price:0,productMargin:[],loading:!1},a.changeRedirect=a.changeRedirect.bind(Object(v.a)(a)),a}return Object(s.a)(t,e),Object(i.a)(t,[{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"componentDidMount",value:function(){this.props.match.params.id&&(this.state.editInventoryItem||this.loadData()),null==this.props.taxes_list&&this.loadTaxes(),null==this.props.manufacture_list&&this.loadManufactureList(),null==this.props.vendor_list&&this.loadVendorList(),this.loadDrugType(),this.loadDrugUnit(),this.loadProductMargin()}},{key:"loadProductMargin",value:function(){var e=this;Object(g.c)(_.Nc,(function(t){e.setState({productMargin:t})}),(function(){}))}},{key:"loadTaxes",value:function(){var e=this;Object(g.c)(Object(g.f)(_.Fd,[this.props.active_practiceId]),(function(t){e.setState({taxes_list:t})}),(function(){}))}},{key:"loadManufactureList",value:function(){var e=this;Object(g.c)(_.Sb,(function(t){e.setState({manufacture_list:t})}),(function(){}))}},{key:"loadVendorList",value:function(){var e=this;Object(g.c)(Object(g.f)(_.Nd,[this.props.active_practiceId]),(function(t){e.setState({vendor_list:t})}),(function(){}))}},{key:"loadData",value:function(){var e=this;this.props.match.params.id&&Object(g.c)(Object(g.f)(_.hd,[this.props.match.params.id]),(function(t){e.setState((function(e){var a=0;t.taxes_data.forEach((function(e){a+=e.tax_value}));var n=(t.retail_price*(1+.01*a)).toFixed(2);return{editInventoryItem:Object(b.a)({},t,{net_price:n}),type:t.item_type,retail_price:t.retail_price}}))}),(function(){}))}},{key:"loadDrugUnit",value:function(){var e=this;Object(g.c)(Object(g.f)(_.bb,[this.props.active_practiceId]),(function(t){e.setState({drugUnitList:t})}),(function(){}))}},{key:"render",value:function(){var e=this,t=[];this.state.taxes_list&&this.state.taxes_list.forEach((function(e){t.push({label:"".concat(e.name,"(").concat(e.tax_value,"%)"),value:e.id})}));var a=[];this.state.manufacture_list&&this.state.manufacture_list.forEach((function(e){a.push({label:e.name,value:e.id})}));var n=[];this.state.vendor_list&&this.state.vendor_list.forEach((function(e){n.push({label:e.name,value:e.id})}));var i=this.props.form.getFieldDecorator,r={labelCol:{span:10},wrapperCol:{span:14}};return u.a.createElement(m.a,{title:this.state.editInventoryItem?"Edit Inventory Item":"Add Inventory Item",loading:this.state.loading},u.a.createElement(I.a,null,u.a.createElement(L.a,{span:18},u.a.createElement(O.a,{onSubmit:this.handleSubmit},u.a.createElement(O.a.Item,Object.assign({label:"Item Name"},r),i("name",{initialValue:this.state.editInventoryItem?this.state.editInventoryItem.name:null,rules:[{required:!0,message:ae.j}]})(u.a.createElement(z.a,{placeholder:"Item Name"}))),u.a.createElement(O.a.Item,Object.assign({label:"HSN"},r),i("code",{initialValue:this.state.editInventoryItem?this.state.editInventoryItem.code:null})(u.a.createElement(z.a,{placeholder:"HSN Number"}))),this.state.manufacturerType&&this.state.manufacturerType==j.W?u.a.createElement(O.a.Item,Object.assign({key:"manufacturer_extra",label:"Manufacturer"},r),i("manufacturer_extra",{initialValue:e.state.editPrescreption?e.state.editPrescreption.manufacturer_extra:null,rules:[{required:!0,message:ae.j}]})(u.a.createElement(z.a,null)),u.a.createElement("a",{onClick:function(){return e.setFormParams("manufacturerType",j.Nb)}},"Choose Manufacturer")):u.a.createElement(O.a.Item,Object.assign({key:"manufacturer"},r,{label:"Manufacturer"}),i("manufacturer",{initialValue:this.state.editInventoryItem?this.state.editInventoryItem.manufacturer:null})(u.a.createElement(V.a,null,a.map((function(e){return u.a.createElement(V.a.Option,{value:e.value},e.label)})))),u.a.createElement("a",{onClick:function(){return e.setFormParams("manufacturerType",j.W)}},"Add New Manufacturer")),u.a.createElement(O.a.Item,Object.assign({label:"Stocking Unit"},r),i("stocking_unit",{initialValue:this.state.editInventoryItem?this.state.editInventoryItem.stocking_unit:null,rules:[{required:!0,message:ae.j}]})(u.a.createElement(z.a,{placeholder:"Example: Bottles, Strips etc."})),u.a.createElement("p",null,"(Make sure this is the same as the unit in which you dispense this item.)")),u.a.createElement(O.a.Item,Object.assign({label:"Re-Order Level"},r),i("re_order_level",{initialValue:this.state.editInventoryItem?this.state.editInventoryItem.re_order_level:null})(u.a.createElement(X.a,{placeholder:"Re-Order Level"}))),u.a.createElement(O.a.Item,Object.assign({label:"Net Price"},r),i("retail_with_tax",{initialValue:this.state.editInventoryItem?this.state.editInventoryItem.retail_with_tax:null,rules:[{required:!0,message:ae.j}]})(u.a.createElement(X.a,{onChange:this.changeNetPrice})),u.a.createElement("span",{className:"ant-form-text"},"INR")),u.a.createElement(O.a.Item,Object.assign({label:"Tax"},r),i("taxes",{initialValue:this.state.editInventoryItem?this.state.editInventoryItem.taxes:[]})(u.a.createElement(ne,{onChange:this.changeNetPrice},t.map((function(e){return u.a.createElement(Z.a,{value:e.value},e.label)}))))),u.a.createElement(O.a.Item,Object.assign({label:"Retail Price"},r),u.a.createElement("span",{className:"ant-form-text"},u.a.createElement("b",null,e.state.retail_price),"\xa0INR")),u.a.createElement(O.a.Item,Object.assign({key:"margin"},r,{label:"MLM Margin"}),i("margin",{initialValue:this.state.editInventoryItem?this.state.editInventoryItem.margin:null})(u.a.createElement(V.a,null,this.state.productMargin.map((function(e){return u.a.createElement(V.a.Option,{value:e.id},e.name)}))))),u.a.createElement(O.a.Item,Object.assign({label:"Item Type"},r),i("item_type",{initialValue:this.state.editInventoryItem?this.state.editInventoryItem.item_type:null,rules:[{required:!0,message:ae.j}]})(u.a.createElement(V.a,{placeholder:"Item Type",onChange:this.onChangeHandeler},te.Y.map((function(e){return u.a.createElement(V.a.Option,{value:e.value},e.label)}))))),this.state.type==te.z?u.a.createElement("div",null,u.a.createElement(O.a.Item,Object.assign({label:"I prescribe this"},r),i("perscribe_this",{valuePropName:"checked",initialValue:!!this.state.editInventoryItem&&this.state.editInventoryItem.perscribe_this})(u.a.createElement(Z.a,null))),this.state.drugType&&this.state.drugType==j.W?u.a.createElement(O.a.Item,Object.assign({key:"drug_type_extra",label:"Medicine Type"},r),i("drug_type_extra",{initialValue:e.state.editInventoryItem?e.state.editInventoryItem.drug_type_extra:null,rules:[{required:!0,message:ae.j}]})(u.a.createElement(z.a,null)),u.a.createElement("a",{onClick:function(){return e.setFormParams("drugType",j.Nb)}},"Choose Medicine Type")):u.a.createElement(O.a.Item,Object.assign({key:"drug_type"},r,{label:"Medicine Type"}),i("drug_type",{initialValue:this.state.editInventoryItem?this.state.editInventoryItem.drug_type:null,rules:[{required:!0,message:ae.j}]})(u.a.createElement(V.a,null,e.state.drugTypeList.map((function(e){return u.a.createElement(V.a.Option,{value:e.id},e.name)})))),u.a.createElement("a",{onClick:function(){return e.setFormParams("drugType",j.W)}},"Add New Medicine Type")),u.a.createElement(O.a.Item,Object.assign({label:"Strength"},r),i("strength",{initialValue:this.state.editInventoryItem?this.state.editInventoryItem.strength:null})(u.a.createElement(X.a,null))),this.state.drugUnit&&this.state.drugUnit==j.W?u.a.createElement(O.a.Item,Object.assign({key:"unit_type_extra",label:"Strength Unit"},r),i("unit_type_extra",{initialValue:e.state.editInventoryItem?e.state.editInventoryItem.unit_type_extra:null,rules:[{required:!0,message:ae.j}]})(u.a.createElement(z.a,null)),u.a.createElement("a",{onClick:function(){return e.setFormParams("drugUnit",j.Nb)}},"Choose Strength Unit")):u.a.createElement(O.a.Item,Object.assign({key:"stength_unit"},r,{label:"Strength Unit"}),i("stength_unit",{initialValue:this.state.editInventoryItem?this.state.editInventoryItem.stength_unit:null,rules:[{required:!0,message:ae.j}]})(u.a.createElement(V.a,null,e.state.drugUnitList.map((function(e){return u.a.createElement(V.a.Option,{value:e.id},e.name)})))),u.a.createElement("a",{onClick:function(){return e.setFormParams("drugUnit",j.W)}},"Add New Strength Unit")),u.a.createElement(O.a.Item,Object.assign({label:"Instructions"},r),i("instructions",{initialValue:this.state.editInventoryItem?this.state.editInventoryItem.instructions:null})(u.a.createElement(ee.a,null)))):null,this.state.type==te.Gb?u.a.createElement("div",null,u.a.createElement(O.a.Item,Object.assign({label:"I prescribe this"},r),i("perscribe_this",{valuePropName:"checked",initialValue:!!this.state.editInventoryItem&&this.state.editInventoryItem.perscribe_this})(u.a.createElement(Z.a,null))),u.a.createElement(O.a.Item,Object.assign({label:"Strength Unit"},r),i("strength",{initialValue:this.state.editInventoryItem?this.state.editInventoryItem.strength:null})(u.a.createElement(z.a,null))),this.state.drugUnit&&this.state.drugUnit==j.W?u.a.createElement(O.a.Item,Object.assign({key:"unit_type_extra",label:"Strength Unit"},r),i("unit_type_extra",{initialValue:e.state.editInventoryItem?e.state.editInventoryItem.unit_type_extra:null,rules:[{required:!0,message:ae.j}]})(u.a.createElement(z.a,null)),u.a.createElement("a",{onClick:function(){return e.setFormParams("drugUnit",j.Nb)}},"Choose Strength Unit")):u.a.createElement(O.a.Item,Object.assign({key:"stength_unit"},r,{label:"Strength Unit"}),i("stength_unit",{initialValue:this.state.editInventoryItem?this.state.editInventoryItem.stength_unit:null,rules:[{required:!0,message:ae.j}]})(u.a.createElement(V.a,null,e.state.drugUnitList.map((function(e){return u.a.createElement(V.a.Option,{value:e.id},e.name)})))),u.a.createElement("a",{onClick:function(){return e.setFormParams("drugUnit",j.W)}},"Add New Strength Unit")),u.a.createElement(O.a.Item,Object.assign({label:"Instructions"},r),i("instructions",{initialValue:this.state.editInventoryItem?this.state.editInventoryItem.instructions:null})(u.a.createElement(ee.a,null)))):null,this.state.type==te.G?u.a.createElement("div",null,u.a.createElement(O.a.Item,Object.assign({label:"I prescribe this"},r),i("perscribe_this",{valuePropName:"checked",initialValue:this.state.editInventoryItem?this.state.editInventoryItem.perscribe_this:null})(u.a.createElement(Z.a,null))),u.a.createElement(O.a.Item,Object.assign({label:"Instructions"},r),i("instructions",{initialValue:this.state.editInventoryItem?this.state.editInventoryItem.instructions:null})(u.a.createElement(ee.a,null)))):null,u.a.createElement(O.a.Item,null,u.a.createElement(p.a,{style:{margin:5},type:"primary",htmlType:"submit"},"Submit"),e.props.history?u.a.createElement(p.a,{style:{margin:5},onClick:function(){return e.props.history.goBack()}},"Cancel"):null)))),this.state.redirect&&u.a.createElement(d.a,{to:"/inventory"}))}}]),t}(u.a.Component),re=O.a.create()(ie),le=(a(136),a(100)),se=(a(342),a(341)),ce=(a(266),a(269)),oe=(a(349),a(359)),ue=(a(137),a(15)),de=(a(287),a(288)),me=z.a.Search,pe=M.a.MonthPicker,he=de.a.TabPane,fe={_id:null,quantity:0,batch:null},ye=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(l.a)(t).call(this,e))).changeSupplierType=function(e){a.setState({customSupplier:!!e})},a.loadItemsList=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=Object(v.a)(a),i=function(t){var a=t;n.setState((function(t){return{items:Object(b.a)({},t.items,Object(T.a)({},e,Object(b.a)({},t.items[e],{},a))),loading:!1}}))},r=function(){},l={maintain_inventory:!0,practice:a.props.active_practiceId,item_type:e,page:t};n.state.searchStrings[e]&&(l.item_name=n.state.searchStrings[e]),Object(g.c)(_.xb,i,r,l)},a.remove=function(e){a.setState((function(t){var a=[];return t.tableFormValues.forEach((function(t){t._id!=e&&a.push(t)})),{tableFormValues:a}}))},a.add=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.random().toFixed(7);a.setState((function(a){return{tableFormValues:[Object(b.a)({},fe,{},e,{_id:t})].concat(Object(J.a)(a.tableFormValues))}}))},a.handleSubmit=function(e){var t=Object(v.a)(a);if(a.setState({loading:!0}),13==e.keyCode)return!1;e.preventDefault(),a.props.form.validateFields((function(e,a){if(!e){var n=[];t.state.tableFormValues.forEach((function(e){var i={item_add_type:t.state.classType,inventory_item:e.id,remarks:a.remarks,quantity:a.quantity[e._id],batch_number:a.batch[e._id],date:A()(a.date).format("YYYY-MM-DD"),bill_number:a.bill_number,bill_file:a.file&&a.file.file.response?a.file.file.response.image_path:null};t.state.classType==te.a?(i=Object(b.a)({},i,{expiry_date:A()(a.expiry_date[e._id]).format("YYYY-MM-DD"),unit_cost:a.unit_cost[e._id],total_cost:a.unit_cost[e._id]*a.quantity[e._id]}),a.supplier?i.supplier=a.supplier:a.supplier_name&&(i.supplier_name=a.supplier_name)):t.state.classType==te.o&&(i.type_of_consumption=a.type_of_consumption),n.push(i)})),n.date=A()(a.date).isValid()?A()(a.date).format():null,t.state.customSupplier?n.supplier_name=a.supplier_name:n.supplier=a.supplier;Object(g.j)(_.I,n,(function(e){Object(g.a)("Inventory updated successfully"),t.props.loadData(),t.props.history.replace("/inventory")}),(function(){t.setState({loading:!1})}))}}))},a.searchValues=function(e,t){var n=Object(v.a)(a);a.setState((function(a){var n=Object(b.a)({},a.searchStrings);return n[e]=t,{searchStrings:n}}),(function(){n.loadItemsList(e)}))},a.filterValues=function(e){a.setState((function(t){var a=[];return t.items[e]&&(t.searchStrings[e]?t.items[e].forEach((function(n){n.name.toString().toLowerCase().includes(t.searchStrings[e].toLowerCase())&&a.push(n)})):a=t.items[e]),{filteredItems:Object(b.a)({},t.filteredItems,Object(T.a)({},e,a))}}))},a.storeValue=function(e,t,n){var i=Object(v.a)(a);if(a.setState((function(a){return{tempValues:Object(b.a)({},a.tempValues,Object(T.a)({},e.toString()+t.toString(),n))}})),"batch"==e){var r=i.props.form.setFieldsValue;i.state.tableFormValues.forEach((function(e){e._id==t&&e.item_type_stock.batch_number&&e.item_type_stock.batch_number.forEach((function(e){r(Object(T.a)({},"expiry_date[".concat(t,"]"),e.expiry_date&&A()(e.expiry_date).isValid()?A()(e.expiry_date):null))}))}))}},a.addItemThroughQR=function(e){var t=Object(v.a)(a);t.setState({loadingQr:!0});var n=e.split("*");Object(g.c)(_.Xc,(function(a){var i=t.props.form,r=i.setFieldsValue,l=i.getFieldsValue,s=(i.getFieldValue,Math.random().toFixed(7)),c=!0;if(t.state.tableFormValues.forEach((function(a){if(a.item_name==n[0]){var i=a._id;if(l("batch[".concat(i,"]"))==n[3]){var s=l("quantity[".concat(i,"]"));c=!1,r(Object(T.a)({},"quantity[".concat(i,"]"),s+1)),t.storeValue("quantity",i,e)}}})),c){var o;t.add(a,s),t.storeValue("batch",s,n[1]),t.storeValue("unit_cost",s,n[3]);var u=(o={},Object(T.a)(o,"batch[".concat(s,"]"),n[1]),Object(T.a)(o,"expiry_date[".concat(s,"]"),A()(n[2],"MM/YY")),o);t.state.classType==te.o&&(u["unit_cost[".concat(s,"]")]=n[3]),r(u)}console.log(l(),Object(T.a)({},"batch[".concat(s,"]"),n[0])),t.setState((function(e){return{loadingQr:!1,qrValue:""}}))}),(function(){}),{qr:e,form:"Inventory"})},a.setQrValue=function(e){var t=e.target.value;a.setState({qrValue:t})},a.state={items:{},classType:e.type,tableFormValues:[],maxQuantityforConsume:{},searchStrings:{},tempValues:{},supplierList:[],customSupplier:!1,qrValue:"",loading:!0},a.loadSupplierList=a.loadSupplierList.bind(Object(v.a)(a)),a}return Object(s.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.loadInventoryItemList(),this.loadSupplierList()}},{key:"loadSupplierList",value:function(){var e=this,t={practice:this.props.active_practiceId};Object(g.c)(Object(g.f)(_.Ed,[this.props.active_practiceId]),(function(t){e.setState({supplierList:t})}),(function(){}),t)}},{key:"loadInventoryItemList",value:function(){var e=this;te.Y.forEach((function(t){e.loadItemsList(t.value)}))}},{key:"changeMaxQuantityforConsume",value:function(e,t){this.setState((function(a){var n=Object(b.a)({},a.maxQuantityforConsume);return a.tableFormValues.forEach((function(a){a._id==e&&a.item_type_stock.item_stock.forEach((function(a){a.batch_number==t&&(n[e]=a.quantity||0)}))})),{maxQuantityforConsume:n}}))}},{key:"render",value:function(){var e=this,t=this,a=this.props.form.getFieldDecorator,n={labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}},i={name:"image",data:{name:"hello"},action:Object(g.h)(_.sb),headers:{authorization:"authorization-text"},onChange:function(e){e.file.status,"done"===e.file.status?ue.a.success("".concat(e.file.name," file uploaded successfully")):"error"===e.file.status&&ue.a.error("".concat(e.file.name," file upload failed."))}};a("keys",{initialValue:[]});var r=[{title:"Item Name",key:"item_name",dataIndex:"name"}];return this.state.classType==te.a?r=r.concat([{title:"Quantity",key:"quantity",dataIndex:"quantity",render:function(t,i){return u.a.createElement(O.a.Item,Object.assign({key:"quantity[".concat(i._id,"]")},n),a("quantity[".concat(i._id,"]"),{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"This field is required."}]})(u.a.createElement(X.a,{min:0,placeholder:"quantity",onChange:function(t){return e.storeValue("quantity",i._id,t)}})))}},{title:"Batch",key:"batch",dataIndex:"batch",render:function(t,i){return u.a.createElement(O.a.Item,Object.assign({key:"batch[".concat(i._id,"]")},n),a("batch[".concat(i._id,"]"),{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"This field is required."}]})(u.a.createElement(oe.a,{placeholder:"Batch Number",onChange:function(t){return e.storeValue("batch",i._id,t)},dataSource:i.item_type_stock&&i.item_type_stock.item_stock?i.item_type_stock.item_stock.map((function(e){return e.batch_number?e.batch_number:"--"})):[]})))}},{title:"Expiry Date",key:"expiry",dataIndex:"expiry",render:function(e,t){return u.a.createElement(O.a.Item,Object.assign({key:"expiry_date[".concat(t._id,"]")},n),a("expiry_date[".concat(t._id,"]"),{rules:[{required:!0,message:"This field is required."}],initialValue:A()(new Date)})(u.a.createElement(pe,{allowClear:!1})))}},{title:"Unit Cost",key:"unit_cost",dataIndex:"unit_cost",render:function(t,i){return u.a.createElement(O.a.Item,Object.assign({key:"unit_cost[".concat(i._id,"]")},n),a("unit_cost[".concat(i._id,"]"),{rules:[{required:!0,message:"This field is required."}]})(u.a.createElement(X.a,{placeholder:"Unit Cost",onChange:function(t){return e.storeValue("unit_cost",i._id,t)}})))}},{title:"Total Cost",key:"total_cost",dataIndex:"total_cost",render:function(t,a){return u.a.createElement("span",null,e.state.tempValues["unit_cost".concat(a._id)]&&e.state.tempValues["quantity".concat(a._id)]?e.state.tempValues["unit_cost".concat(a._id)]*e.state.tempValues["quantity".concat(a._id)]:"--")}}]):this.state.classType==te.o&&(r=r.concat([{title:"Batch",key:"batch",dataIndex:"batch",render:function(e,i){return u.a.createElement(O.a.Item,Object.assign({key:"batch[".concat(i._id,"]")},n),a("batch[".concat(i._id,"]"),{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"This field is required."}]})(u.a.createElement(V.a,{placeholder:"Batch Number",onChange:function(e){return t.changeMaxQuantityforConsume(i._id,e)}},i.item_type_stock&&i.item_type_stock.item_stock&&i.item_type_stock.item_stock.map((function(e){return u.a.createElement(V.a.Option,{value:e.batch_number},"#",e.batch_number," (",e.quantity,")")})))))}},{title:"Quantity",key:"quantity",dataIndex:"quantity",render:function(t,i){return u.a.createElement(O.a.Item,Object.assign({key:"quantity[".concat(i._id,"]")},n),a("quantity[".concat(i._id,"]"),{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"This field is required."}]})(u.a.createElement(X.a,{min:0,max:e.state.maxQuantityforConsume[i._id],placeholder:"quantity"})))}}])),r=r.concat([{title:"Action",key:"_id",dataIndex:"_id",render:function(e,a){return u.a.createElement("a",{onClick:function(){return t.remove(a._id)}},"Delete")}}]),u.a.createElement("div",null,u.a.createElement(W.a,{spinning:this.state.loading},u.a.createElement(m.a,{title:"".concat(this.state.classType," Stock"),extra:u.a.createElement(me,{loading:this.state.loadingQr,value:this.state.qrValue,onChange:this.setQrValue,placeholder:"Search QR Code",onSearch:this.addItemThroughQR,style:{width:200}})},u.a.createElement(I.a,{gutter:16},u.a.createElement(L.a,{span:7},u.a.createElement(de.a,{size:"small",type:"card"},te.Y.map((function(t){return u.a.createElement(he,{tab:t.label,key:t.value},u.a.createElement("div",{style:{backgroundColor:"#ddd",padding:8}},u.a.createElement(z.a.Search,{key:t.label,placeholder:"Search in ".concat(t.label,"..."),onSearch:function(a){return e.searchValues(t.label,a)}})),u.a.createElement(ce.a,{size:"small",itemLayout:"horizontal",dataSource:e.state.items&&e.state.items[t.value]?e.state.items[t.value].results:[],renderItem:function(t){return u.a.createElement(ce.a.Item,null,u.a.createElement(ce.a.Item.Meta,{title:"".concat(t.name," (").concat(t.total_quantity,")"),description:t.item_type_stock.item_stock&&t.item_type_stock.item_stock.map((function(e){return u.a.createElement("span",null,"#",e.batch_number,u.a.createElement("br",null))}))}),u.a.createElement(p.a,{type:"primary",size:"small",shape:"circle",onClick:function(){return e.add(t)},icon:"arrow-right"}))}}),e.state.items&&e.state.items[t.value]?u.a.createElement("div",{style:{textAlign:"center"}},u.a.createElement("a",{style:{margin:5},disabled:!e.state.items[t.value].previous,onClick:function(){return e.loadItemsList(t.value,e.state.items[t.value].previous)}},u.a.createElement(h.a,{type:"left"}),"Previous"),u.a.createElement(y.a,{type:"vertical"}),u.a.createElement("a",{style:{margin:5},disabled:!e.state.items[t.value].next,onClick:function(){return e.loadItemsList(t.value,e.state.items[t.value].next)}},"Next",u.a.createElement(h.a,{type:"right"}))):null)})))),u.a.createElement(L.a,{span:17},u.a.createElement(O.a,{onSubmit:this.handleSubmit},this.state.classType==te.o?u.a.createElement(I.a,null,u.a.createElement(L.a,{span:16},u.a.createElement(O.a.Item,Object.assign({key:"type_of_consumption",label:"Type of Consumption"},{labelCol:{span:6},wrapperCol:{span:14}}),a("type_of_consumption",{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"This field is required."}]})(u.a.createElement(V.a,null,te.Hb.map((function(e){return u.a.createElement(V.a.Option,{value:e.value},e.label)}))))))):null,u.a.createElement(P.a,{pagination:!1,bordered:!0,rowKey:function(e){return e._id},dataSource:this.state.tableFormValues,columns:r}),u.a.createElement(le.a,{offsetBottom:0},u.a.createElement(m.a,null,u.a.createElement(I.a,null,u.a.createElement(L.a,{span:8},u.a.createElement(O.a.Item,Object.assign({key:"remarks",label:"Notes"},{labelCol:{span:24},wrapperCol:{span:24}}),a("remarks",{})(u.a.createElement(z.a.TextArea,null))),u.a.createElement(O.a.Item,{labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}},u.a.createElement(p.a,{type:"primary",htmlType:"submit"},"Submit"),t.props.history?u.a.createElement(p.a,{style:{margin:5},onClick:function(){return t.props.history.goBack()}},"Cancel"):null)),u.a.createElement(L.a,{span:8},u.a.createElement(O.a.Item,Object.assign({key:"date",label:this.state.classType==te.a?"Added On":"Consumed On"},{labelCol:{span:10},wrapperCol:{span:14}}),a("date",{rules:[{required:!0,message:"This field is required."}],initialValue:A()()})(u.a.createElement(M.a,{allowClear:!1}))),u.a.createElement(O.a.Item,Object.assign({key:"bill_number",label:"Bill Number"},{labelCol:{span:10},wrapperCol:{span:14}}),a("bill_number",{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"This field is required."}]})(u.a.createElement(z.a,null))),this.state.classType==te.a?u.a.createElement("div",null,this.state.customSupplier?u.a.createElement(O.a.Item,Object.assign({key:"supplier_name",label:"Supplier"},{labelCol:{span:10},wrapperCol:{span:14}}),a("supplier_name",{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"This field is required."}]})(u.a.createElement(z.a,null)),this.state.customSupplier?u.a.createElement("a",{onClick:function(){return e.changeSupplierType(!1)}},"Cancel"):null):u.a.createElement(O.a.Item,Object.assign({key:"supplier",label:"Supplier"},{labelCol:{span:10},wrapperCol:{span:14}}),a("supplier",{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"This field is required."}]})(u.a.createElement(V.a,null,this.state.supplierList.map((function(e){return u.a.createElement(V.a.Option,{value:e.id},e.name)})))),this.state.customSupplier?null:u.a.createElement("a",{onClick:function(){return e.changeSupplierType(!0)}},"Add New"))):null),u.a.createElement(L.a,{span:6,offset:2},u.a.createElement(O.a.Item,Object.assign({key:"file"},n),a("file",{})(u.a.createElement(se.a,i,u.a.createElement(p.a,null,u.a.createElement(h.a,{type:"upload"})," Select File"))))),this.state.classType==te.a?u.a.createElement(L.a,{style:{textAlign:"center"},span:8},u.a.createElement("h3",null,"Grand Total: ",u.a.createElement("b",null,this.state.tableFormValues.reduce((function(e,a){return t.state.tempValues["quantity".concat(a._id)]&&t.state.tempValues["unit_cost".concat(a._id)]?e+t.state.tempValues["quantity".concat(a._id)]*t.state.tempValues["unit_cost".concat(a._id)]:e}),0)))):null)))))))))}}]),t}(u.a.Component),be=O.a.create()(ye),ve=a(261),Ee=a(51),ge=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(l.a)(t).call(this,e))).loadProductMargin=function(){var e=Object(v.a)(a);Object(g.c)(_.Nc,(function(t){e.setState({productMargin:t})}),(function(){}))},a.loadInventoryTotal=function(){var e=Object(v.a)(a);Object(g.c)(_.Bb,(function(t){e.setState({inventoryTotal:t.total_price})}),(function(){}),{practice:a.props.active_practiceId})},a.changeFilter=function(e){var t=Object(v.a)(a);a.setState(Object(T.a)({},e.target.name,e.target.value),(function(){t.loadData()}))},a.changeInventoryFilters=function(e,t){var n=Object(v.a)(a);n.setState(Object(T.a)({},e,t),(function(){n.loadData()}))},a.inventoryItemModalOpen=function(e){a.setState({inventoryModal:!0,inventoryItemObj:e})},a.inventoryItemModalClose=function(){a.setState({inventoryModal:!1})},a.state={inventoryItems:[],inventoryItemList:[],stockModalVisibility:!1,itemTypeFilter:"ALL",itemStockFilter:"ALL",loading:!0,nextItemPage:null,productMargin:[],inventoryModal:!1,inventoryItemObj:null,inventoryTotal:null},a.loadData=a.loadData.bind(Object(v.a)(a)),a.showAddOrConsumeModal=a.showAddOrConsumeModal.bind(Object(v.a)(a)),a.setActionType=a.setActionType.bind(Object(v.a)(a)),a.changeFilter=a.changeFilter.bind(Object(v.a)(a)),a.deleteObject=a.deleteObject.bind(Object(v.a)(a)),a.excelExport=a.excelExport.bind(Object(v.a)(a)),a.pdfExport=a.pdfExport.bind(Object(v.a)(a)),a}return Object(s.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.loadData(),this.loadProductMargin()}},{key:"loadData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this;t.setState({loading:!0}),t.loadInventoryTotal();var a=function(e){var a=e.results;t.setState((function(t){return 1===e.current?{inventoryItems:a,loading:!1,nextItemPage:e.next}:{inventoryItems:[].concat(Object(J.a)(t.inventoryItems),Object(J.a)(a)),loading:!1,nextItemPage:e.next}}))},n=function(){t.setState({loading:!1})},i={maintain_inventory:!0,practice:this.props.active_practiceId,page:e,sort:j.q,on:"total_quantity"};"ALL"!==t.state.itemTypeFilter&&(i.item_type=t.state.itemTypeFilter),"ALL"!==t.state.itemStockFilter&&(i.filter_type=t.state.itemStockFilter),t.state.filterItemName&&(i.item_name=t.state.filterItemName),t.state.filterItemCode&&(i.code=t.state.filterItemCode),t.state.filterMLM&&(i.margin=t.state.filterMLM),Object(g.c)(_.xb,a,n,i)}},{key:"deleteObject",value:function(e){var t=this;Object(g.l)(Object(g.f)(_.hd,[e]),{is_active:!1},(function(){t.loadData()}),(function(){}))}},{key:"setActionType",value:function(e,t){this.setState({itemId:t,actionType:e}),this.showAddOrConsumeModal(!0)}},{key:"showAddOrConsumeModal",value:function(e){this.setState({stockModalVisibility:e})}},{key:"excelExport",value:function(){var e=Object(g.o)("Generating Report..."),t={maintain_inventory:!0,practice:this.props.active_practiceId,sort:j.q,on:"total_quantity"};"ALL"!==this.state.itemTypeFilter&&(t.item_type=this.state.itemTypeFilter),"ALL"!==this.state.itemStockFilter&&(t.filter_type=this.state.itemStockFilter),this.state.filterItemName&&(t.item_name=this.state.filterItemName),this.state.filterItemCode&&(t.code=this.state.filterItemCode),this.state.filterMLM&&(t.margin=this.state.filterMLM),Object(g.c)(_.yb,(function(t){Object(g.p)(e,j.Sb,"Report Generated Successfully!!"),t.report_csv&&window.open(Ee.a+t.report_csv)}),(function(){Object(g.p)(e,j.Q,"Report Generation Failed!!")}),t)}},{key:"pdfExport",value:function(){var e=Object(g.o)("Generating Report..."),t={maintain_inventory:!0,practice:this.props.active_practiceId,sort:j.q,on:"total_quantity"};"ALL"!==this.state.itemTypeFilter&&(t.item_type=this.state.itemTypeFilter),"ALL"!==this.state.itemStockFilter&&(t.filter_type=this.state.itemStockFilter),this.state.filterItemName&&(t.item_name=this.state.filterItemName),this.state.filterItemCode&&(t.code=this.state.filterItemCode),this.state.filterMLM&&(t.margin=this.state.filterMLM),Object(g.c)(_.yb,(function(t){Object(g.p)(e,j.Sb,"Report Generated Successfully!!"),t.report_pdf&&window.open(Ee.a+t.report_pdf)}),(function(){Object(g.p)(e,j.Q,"Report Generation Failed!!")}),t)}},{key:"render",value:function(){var e=this,t={};this.state.taxes_list&&this.state.taxes_list.forEach((function(e){t[e.id]=e}));var a={};this.state.manufacture_list&&this.state.manufacture_list.forEach((function(e){a[e.id]=e.name}));var n={};this.state.vendor_list&&this.state.vendor_list.forEach((function(e){n[e.id]=e.name}));var i=this,r=[{title:"Name",dataIndex:"name",key:"name",render:function(t,a){return u.a.createElement("a",{onClick:function(){return e.inventoryItemModalOpen(a)}},u.a.createElement("span",null,a.name))}},{title:"HSN",dataIndex:"code",key:"code"},{title:"Inventory Stock",dataIndex:"total_quantity",key:"total_quantity",render:function(e,t){return u.a.createElement("span",null,e," ",e<=t.re_order_level?u.a.createElement(K.a,{color:"#f50"},"Low"):null)}},{title:"Expired Stock",dataIndex:"item_type_stock",key:"expired_stock",export:function(e){var t=0,a=A()();return e.item_stock&&e.item_stock.forEach((function(e){a>=A()(e.expiry_date,"YYYY-MM-DD")&&(t+=Number.isInteger(e.quantity)?e.quantity:0)})),t},render:function(e){var t=0,a=A()();return e.item_stock&&e.item_stock.forEach((function(e){a>=A()(e.expiry_date,"YYYY-MM-DD")&&(t+=Number.isInteger(e.quantity)?e.quantity:0)})),u.a.createElement("span",null,t)}},{title:"Retail Price (INR)",dataIndex:"retail_without_tax",key:"retail_without_tax",render:function(e,t){return u.a.createElement("span",null,t.retail_without_tax)}},{title:"Tax",dataIndex:"taxes",key:"taxes",render:function(e,t){return u.a.createElement("span",null,t.taxes_data&&t.taxes_data.map((function(e){return u.a.createElement(K.a,null,u.a.createElement("small",null," ",e?"".concat(e.name,"@").concat(e.tax_value,"%"):null))})))}},{title:"MLM Margin",dataIndex:"margin_data",key:"margin",render:function(e){return u.a.createElement("span",null,e?e.name:null)}},{title:"Item type",dataIndex:"item_type",key:"item_type"},{title:"Reorder Level",dataIndex:"re_order_level",key:"re_order_level"},{title:"Manufacturer",key:"manufacturer",export:function(e,t){return t.manufacturer_data?t.manufacturer_data.name:""},render:function(e,t){return u.a.createElement("span",null," ",t.manufacturer_data?t.manufacturer_data.name:"")}},{title:"Stock Cost (INR)",key:"stock_cost",render:function(e,t){return u.a.createElement("span",null," ",t.item_type_stock&&t.item_type_stock.item_stock?t.item_type_stock.item_stock.reduce((function(e,t){return e+t.unit_cost*t.quantity}),0):"")}},{title:"Actions",render:function(e){return u.a.createElement("div",null,u.a.createElement(E.b,{to:"/inventory/edit/".concat(e.id)},"Edit"),u.a.createElement(y.a,{type:"vertical"}),0===e.total_quantity?u.a.createElement(f.a,{title:"Are you sure delete this item?",onConfirm:function(){return i.deleteObject(e.id)},okText:"Yes",cancelText:"No"},u.a.createElement("a",null,"Delete")):u.a.createElement(K.a,{color:"red"},"Can Not Delete"))}}],l=[{title:"S.No",key:"s_no",render:function(e,t,a){return u.a.createElement("span",null,a+1)}},{title:"Batch Number",dataIndex:"batch_number",key:"batch_number"},{title:"Quantity",dataIndex:"quantity",key:"quantity"},{title:"Stock Cost(INR)",key:"stock_cost",render:function(e,t){return u.a.createElement("span",null,(t.quantity*t.unit_cost).toFixed(2))}},{title:"Expiry Date",key:"expiry_date",render:function(e,t){return u.a.createElement("span",null,A()(t.expiry_date).format("DD-MM-YYYY"))}}];return u.a.createElement("div",null,u.a.createElement(d.d,null,u.a.createElement(d.b,{path:"/inventory/add",render:function(t){return i.props.activePracticePermissions.AddInventoryItem||i.props.allowAllPermissions?u.a.createElement(re,Object.assign({},t,e.props,e.state,{loadData:e.loadData})):u.a.createElement(S.a,null)}}),u.a.createElement(d.b,{exact:!0,path:"/inventory/edit/:id",render:function(t){return i.props.activePracticePermissions.AddInventoryItem||i.props.allowAllPermissions?u.a.createElement(re,Object.assign({},e.state,e.props,t,{loadData:e.loadData})):u.a.createElement(S.a,null)}}),u.a.createElement(d.b,{exact:!0,path:"/inventory/consume-stock",render:function(t){return i.props.activePracticePermissions.AddInventoryStock||i.props.allowAllPermissions?u.a.createElement(be,Object.assign({key:te.o,type:te.o,loadData:e.loadData},e.state,t,e.props)):u.a.createElement(S.a,null)}}),u.a.createElement(d.b,{exact:!0,path:"/inventory/add-stock",render:function(t){return i.props.activePracticePermissions.ConsumeInventoryStock||i.props.allowAllPermissions?u.a.createElement(be,Object.assign({key:te.a,type:te.a,loadData:e.loadData},e.state,t,e.props)):u.a.createElement(S.a,null)}}),u.a.createElement(d.b,null,u.a.createElement(m.a,{title:"Inventory List",extra:u.a.createElement(p.a.Group,null,u.a.createElement(E.b,{to:"/inventory/add"},u.a.createElement(p.a,{type:"primary",disabled:!i.props.activePracticePermissions.AddInventoryItem&&!i.props.allowAllPermissions},u.a.createElement(h.a,{type:"plus"})," Add Item")),u.a.createElement(E.b,{to:"/inventory/add-stock"},u.a.createElement(p.a,{disabled:!i.props.activePracticePermissions.AddInventoryStock&&!i.props.allowAllPermissions,type:"primary"},"Add Stock")),u.a.createElement(E.b,{to:"/inventory/consume-stock"},u.a.createElement(p.a,{disabled:!i.props.activePracticePermissions.ConsumeInventoryStock&&!i.props.allowAllPermissions,type:"primary"},"Consume Stock")))},u.a.createElement(I.a,{style:{marginBottom:10}},u.a.createElement(L.a,{span:8},u.a.createElement(H.a.Group,{name:"itemTypeFilter",size:"small",defaultValue:"ALL",buttonStyle:"solid",onChange:this.changeFilter,style:{margin:"10px"}},u.a.createElement(H.a.Button,{value:"ALL"},"ALL"),te.Y.map((function(e){return u.a.createElement(H.a.Button,{value:e.value},e.label)})))),u.a.createElement(L.a,{span:8,style:{textAlign:"center"}},u.a.createElement(G.a,{title:"Inventory Total Cost",value:this.state.inventoryTotal,prefix:"Rs."})),u.a.createElement(L.a,{span:8},u.a.createElement(H.a.Group,{name:"itemStockFilter",size:"small",defaultValue:"ALL",buttonStyle:"solid",style:{margin:"10px",float:"right"},onChange:this.changeFilter},u.a.createElement(H.a.Button,{value:"ALL"},"ALL"),u.a.createElement(H.a.Button,{value:"Low"},"Low"),u.a.createElement(H.a.Button,{value:"Expired"},"Expired")))),u.a.createElement(I.a,{gutter:16,style:{marginBottom:10}},u.a.createElement(L.a,{span:4},u.a.createElement(p.a.Group,{size:"small"},u.a.createElement(p.a,{disabled:this.state.loading,type:"primary",onClick:this.excelExport},u.a.createElement(h.a,{type:"file-excel"})," Excel"),u.a.createElement(p.a,{disabled:this.state.loading,type:"primary",onClick:this.pdfExport},u.a.createElement(h.a,{type:"file-pdf"})," PDF"))),u.a.createElement(L.a,{span:2,style:{textAlign:"right"}},u.a.createElement("b",null," Item Name")),u.a.createElement(L.a,{span:4},u.a.createElement(z.a,{style:{width:"100%"},value:this.state.filterItemName,allowClear:!0,placeholder:"Item Name",onChange:function(t){return e.changeInventoryFilters("filterItemName",t.target.value)}})),u.a.createElement(L.a,{span:2,style:{textAlign:"right"}},u.a.createElement("b",null," HSN")),u.a.createElement(L.a,{span:4},u.a.createElement(z.a,{style:{width:"100%"},value:this.state.filterItemCode,allowClear:!0,placeholder:"HSN Number",onChange:function(t){return e.changeInventoryFilters("filterItemCode",t.target.value)}})),u.a.createElement(L.a,{span:2,style:{textAlign:"right"}},u.a.createElement("b",null," MLM")),u.a.createElement(L.a,{span:4},u.a.createElement(V.a,{style:{width:"100%"},value:this.state.filterMLM,allowClear:!0,placeholder:"MLM Margin",onChange:function(t){return e.changeInventoryFilters("filterMLM",t)}},this.state.productMargin.map((function(e){return u.a.createElement(V.a.Option,{value:e.id},e.name)}))))),u.a.createElement(I.a,null,u.a.createElement(P.a,{bordered:!0,pagination:!1,hideReport:!0,dataSource:this.state.inventoryItems.sort((function(e,t){return parseInt(t.total_quantity)-parseInt(e.total_quantity)})),columns:r}),u.a.createElement(W.a,{spinning:this.state.loading},u.a.createElement(I.a,null)),u.a.createElement(ve.a,{loaderFunction:function(){return e.loadData(e.state.nextItemPage)},loading:this.state.loading,hidden:!this.state.nextItemPage})),u.a.createElement(Q.a,{visible:this.state.stockModalVisibility,title:"Stock".concat(this.state.actionType),onOk:function(){return e.showAddOrConsumeModal(!1)},onCancel:function(){return e.showAddOrConsumeModal(!1)},footer:null},u.a.createElement(be,{showAddOrConsumeModal:this.showAddOrConsumeModal,itemId:this.state.itemId,actionType:this.state.actionType})),u.a.createElement(Q.a,{title:this.state.inventoryItemObj?"".concat(this.state.inventoryItemObj.name," Details"):"",visible:this.state.inventoryModal,onCancel:this.inventoryItemModalClose,footer:null},u.a.createElement(P.a,{dataSource:this.state.inventoryItemObj?this.state.inventoryItemObj.item_type_stock.item_stock:[],columns:l,pagination:!1}))))))}}]),t}(u.a.Component);a.d(t,"default",(function(){return Ie}));var _e=c.a.Content,Ie=function(e){function t(e){return Object(n.a)(this,t),Object(r.a)(this,Object(l.a)(t).call(this,e))}return Object(s.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this;return u.a.createElement(_e,{className:"main-container",style:{margin:"24px 16px",minHeight:280}},u.a.createElement(d.d,null,u.a.createElement(d.b,{path:"/inventory/vendor",render:function(a){return t.props.activePracticePermissions.ViewVendor||t.props.allowAllPermissions?u.a.createElement(C,Object.assign({},e.props,a)):u.a.createElement(S.a,null)}}),u.a.createElement(d.b,{path:"/inventory/expenses",render:function(a){return t.props.activePracticePermissions.ViewExpenses||t.props.allowAllPermissions?u.a.createElement(q,Object.assign({},e.props,a)):u.a.createElement(S.a,null)}}),u.a.createElement(d.b,{path:"/inventory/manufacture",render:function(a){return t.props.activePracticePermissions.ViewManufacturer||t.props.allowAllPermissions?u.a.createElement(R,Object.assign({},t.props,e.state,a)):u.a.createElement(S.a,null)}}),u.a.createElement(d.b,{path:"/inventory/lab",render:function(a){return t.props.activePracticePermissions.Labs||t.props.allowAllPermissions?u.a.createElement(B,e.props):u.a.createElement(S.a,null)}}),u.a.createElement(d.b,{path:"/inventory/activity",render:function(a){return t.props.activePracticePermissions.ViewActivities||t.props.allowAllPermissions?u.a.createElement(U,Object.assign({},e.props,a)):u.a.createElement(S.a,null)}}),u.a.createElement(d.b,{path:"/inventory",render:function(a){return t.props.activePracticePermissions.ViewInventory||t.props.allowAllPermissions?u.a.createElement(ge,Object.assign({},a,e.props)):u.a.createElement(S.a,null)}})))}}]),t}(u.a.Component)},243:function(e,t,a){"use strict";a(247);var n=a(248),i=(a(262),a(263)),r=(a(226),a(227)),l=(a(236),a(237)),s=a(31),c=(a(242),a(19)),o=(a(229),a(228)),u=(a(251),a(254)),d=a(95),m=a(94),p=a(97),h=a(96),f=a(24),y=a(98),b=a(0),v=a.n(b),E=a(230),g=a.n(E),_=a(430),I=a.n(_),O=(a(273),a(373)),j=a.n(O),x=(a(431),function(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n="",i=[];return a&&(e.forEach((function(e){i.push(e)})),n+=i.join(","),n+="\r\n"),t.forEach((function(t){i=[],e.forEach((function(e){t[e]?i.push(t[e]):i.push("--")})),n+=i.join(","),n+="\r\n"})),n}),k=function(e,t){var a,n="".concat(t,".csv"),i=[];i.push(255,254);for(var r=0;r<e.length;++r)a=e.charCodeAt(r),i.push(255&a),i.push(a/256>>>0);var l=new Blob([new Uint8Array(i)],{type:"text/csv;charset=UTF-16LE;"});if(navigator.msSaveBlob)navigator.msSaveBlob(l,n);else{var s=document.createElement("a");if(void 0!==s.download){var c=window.URL.createObjectURL(l);s.setAttribute("href",c),s.setAttribute("download",n),s.style.visibility="hidden",document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(c)}}};a(23),a(34),a(235);a.d(t,"a",(function(){return D}));var D=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).getColumnSearchProps=function(e){return{filterDropdown:function(t){var n=t.setSelectedKeys,i=t.selectedKeys,r=t.confirm,l=t.clearFilters;return v.a.createElement("div",{style:{padding:8}},v.a.createElement(u.a,{ref:function(e){a.searchInput=e},placeholder:"Search ".concat(e),value:i[0],onChange:function(e){return n(e.target.value?[e.target.value]:[])},onPressEnter:function(){return a.handleSearch(i,r)},style:{width:188,marginBottom:8,display:"block"}}),v.a.createElement(o.a,{type:"primary",onClick:function(){return a.handleSearch(i,r)},icon:"search",size:"small",style:{width:90,marginRight:8}},"Search"),v.a.createElement(o.a,{onClick:function(){return a.handleReset(l)},size:"small",style:{width:90}},"Reset"))},filterIcon:function(e){return v.a.createElement(c.a,{type:"search",style:{color:e?"#1890ff":void 0}})},onFilter:function(t,a){return null!=a[e]?a[e].toString().toLowerCase().includes(t.toLowerCase()):""},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){return a.searchInput.select()}))},render:function(e){return v.a.createElement(I.a,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[a.state.searchText],autoEscape:!0,textToHighlight:e?e.toString():""})}}},a.handleSearch=function(e,t){t(),a.setState({searchText:e[0]})},a.handleReset=function(e){e(),a.setState({searchText:""})},a.state=Object(s.a)({},e,{searchText:""}),a.excelExport=a.excelExport.bind(Object(f.a)(a)),a.pdfExport=a.pdfExport.bind(Object(f.a)(a)),a}return Object(y.a)(t,e),Object(m.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.columns==this.state.columns&&e.dataSource==this.state.dataSource&&e.loading==this.state.loading||this.setState(Object(s.a)({},e))}},{key:"pdfExport",value:function(){var e=this,t=[];e.state.columns.forEach((function(e){e.hideExport||t.push({title:e.title,dataKey:e.title})}));var a=[];e.state.dataSource.forEach((function(t,n){var i={};e.state.columns.forEach((function(e){e.export?i[e.title]=e.export(t[e.dataIndex],t,n):i[e.title]=t[e.dataIndex]})),a.push(i)})),function(e,t,a){var n=new j.a("p","mm","a4");!function(e){e.line(10,20,200,20)}(n);var i=Object.create(t);n.autoTable(e,i,{margin:{top:35},startY:n.autoTableEndPosY()+20,headerStyle:{overflow:"linebreak"},bodyStyles:{overflow:"linebreak"}}),function(e){e.line(10,270,200,270),e.setFontSize(8),e.text(10,275,"This is a computer generated report.")}(n),n.save("".concat(a,".pdf"))}(t,a,"Export".concat(g()()))}},{key:"excelExport",value:function(){var e=this,t=[];e.state.columns.forEach((function(e){e.hideExport||t.push(e.title)}));var a=[];e.state.dataSource.forEach((function(t,n){var i={};e.state.columns.forEach((function(e){e.export?i[e.title]=e.export(t[e.dataIndex],t,n):i[e.title]=t[e.dataIndex]})),a.push(i)})),function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"download",n=x(e,t);k(n,a)}(t,a,"Export".concat(g()()))}},{key:"render",value:function(){var e=this,t=this.state.columns.map((function(t){return t.render?Object(s.a)({},t):Object(s.a)({},t,{},e.getColumnSearchProps(t.dataIndex))}));return v.a.createElement("div",null,this.props.hideReport?null:v.a.createElement(r.a,null,v.a.createElement(l.a,null,v.a.createElement(o.a.Group,{size:"small"},v.a.createElement(o.a,{disabled:this.state.loading,type:"primary",onClick:this.excelExport},v.a.createElement(c.a,{type:"file-excel"})," Excel"),v.a.createElement(o.a,{disabled:this.state.loading,type:"primary",onClick:this.pdfExport},v.a.createElement(c.a,{type:"file-pdf"})," PDF")))),v.a.createElement(r.a,null,v.a.createElement(n.a,Object.assign({pagination:{position:"both",pageSizeOptions:["10","20","30","40","50","100"],showSizeChanger:!0,showQuickJumper:!0,size:"small",showTotal:function(e,t){return v.a.createElement(i.a,null,"Showing ",v.a.createElement("b",null,t[0])," to ",v.a.createElement("b",null,t[1])," of ",v.a.createElement("b",null,e)," items")}}},this.state,{columns:t}))))}}]),t}(v.a.Component)},261:function(e,t,a){"use strict";a.d(t,"a",(function(){return h}));a(229);var n=a(228),i=(a(244),a(245)),r=(a(226),a(227)),l=a(95),s=a(94),c=a(97),o=a(96),u=a(24),d=a(98),m=a(0),p=a.n(m),h=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(o.a)(t).call(this,e))).startLoading=function(){a.props.loaderFunction&&(a.props.loaderFunction(),a.startMakingExtraLabels())},a.startMakingExtraLabels=function(){var e=Object(u.a)(a);a.setState((function(e){return e.extraLoadingLabel.length>2?{extraLoadingLabel:""}:{extraLoadingLabel:"".concat(e.extraLoadingLabel,".")}}),(function(){e.props.loading&&setTimeout((function(){e.startMakingExtraLabels()}),500)}))},a.state={extraLoadingLabel:""},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return this.props.loading?p.a.createElement(i.a,{spinning:this.props.loading},p.a.createElement(r.a,{style:{minHeight:200}})):this.props.hidden?p.a.createElement(r.a,null,p.a.createElement("div",{style:{textAlign:"center",margin:"15px 0px"}},p.a.createElement("small",null,"No More Data Found"))):p.a.createElement(r.a,null,p.a.createElement("div",{style:{textAlign:"center",margin:"15px 0px"}},p.a.createElement(n.a,{type:"primary",onClick:this.startLoading,loading:this.props.loading},this.props.loading?"Loading".concat(this.state.extraLoadingLabel):"Load More")))}}]),t}(p.a.Component)}}]);
//# sourceMappingURL=20.aac0deed.chunk.js.map