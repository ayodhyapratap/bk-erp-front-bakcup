(window["webpackJsonpbk-erp-front"]=window["webpackJsonpbk-erp-front"]||[]).push([[0],{1603:function(e,t,a){},1694:function(e,t,a){},1714:function(e,t,a){},1715:function(e,t,a){},1716:function(e,t,a){},1717:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(27),l=a.n(i),o=(a(871),a(135),a(78)),s=(a(147),a(89)),c=(a(207),a(112)),u=a(16),d=a(5),p=a(6),m=a(9),h=a(7),f=a(2),g=a(8),y=a(22),E=a(84),b=a.n(E),v=a(173),_=a.n(v),O="success",D="warning",k="error",P="role",S="input",x="select",j="multiselect",I="number",C="datepicker",w="datetimepicker",M="timepicker",A="quilltextfield",T="singleimageupload",R="multiimageupload",L="ALL",F=130,N=(a(228),a(94)),Y={backendBaseUrl:"",imageBaseUrl:"/media",prodDomain:["clinic.bkarogyam.com","bk-erp.plutonic.co.in"],crashHandling:{slack:{sendOnProduction:!0,sendOnDevelopment:!1,webHookUrl:"https://hooks.slack.com/services/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"}}},V=Y.backendBaseUrl,B=Y.imageBaseUrl,H=V+"/erp-api",q="blogImage/create_with_base64/",z="staff_login/send_otp/",G="staff_login/resend_otp/",U="users/passwordchange/",W="users/staff_reset_mail/",K="clinics/%s/practice_staff/",Q="staff/%s/practice_list/",Z="clinics/%s/doctor_timing/",X="users/all_permissions/",J="user_permissions/bulk/",$="clinics/%s/taxes/",ee="clinics/%s/offers/",te="clinics/%s/payment_modes/",ae="clinics/%s/procedure_category/",ne="promocode/",re="promocode/%s/",ie="promocode/promo_value/",le="clinics/%s/treatmentnotes/",oe="clinics/%s/appointment_category/",se="patients/",ce="patients/%s/",ue="patients/merge_patients/",de="patients/history/?id=%s",pe="patients/%s/ledger/",me="clinics/%s/expense_type/",he="clinics/%s/drugcatalog/",fe="clinics/%s/labtest/",ge="clinics/%s/calender_settings/",ye="appointment/",Ee="appointment/%s/",be="appointment/?id=%s",ve="patients/group/?id=%s",_e="patients/vital_sign/",Oe="patients/prescriptions/",De="appointment/block_calendar/",ke="patients/patient_notes/?patient=%s&practice=%s",Pe="clinics/%s/labpanel/",Se="patients/%s/combine_patient_report/",xe="patients/%s/timeline_pdf/",je="patients/medical_certificate/?practice=%s&page=%s",Ie="patients/medical_certificate/?practice=%s&patient=%s",Ce="patients/files/",we="patients/procedure/",Me="invoice/",Ae="invoice/%s/get_pdf",Te="invoice/",Re="invoice/%s/",Le="patients/clinic_notes/",Fe="payment/",Ne="payment/bulk_payments/",Ye="clinics/%s/practice_print_settings/?type=%s&sub_type=%s",Ve="clinics/%s/all_print_settings/",Be="clinics/%s/prescription_template/",He="patients/generate_otp/",qe="patients/verify_otp/",ze="return/",Ge="return/%s/get_pdf",Ue="patients/advance_search/",We="patients/search/?name=%s",Ke="patients/%s/pending_amount/",Qe="patients/%s/advance_payment/",Ze="patients/new_patients",Xe="patients/active_patients",Je="patients/membership_report",$e="patients/first_appointment",et="appointment/appointment_report",tt="clinics/%s/emr_report",at="inventory_item/products/",nt="inventory_item/inventory_retail",rt="xyz",it="invoice/invoice_reports",lt="return/return_reports/",ot="invoice/amount_due/",st="clinics/%s/appointment_report/",ct="clinics/%s/drugtype/",ut="clinics/%s/membership/",dt="clinics/seat_booking_report",pt="expenses/",mt="clinics/%s/vendor/",ht="inventory_item/",ft="inventory_item/%s/",gt="stock_entry/bulk/",yt="stock_entry/practice_supplier",Et="item_type_stock/find_item",bt="product_margin/generate_mlm/",vt="role_commission/agent_roles/",_t="patient_wallet/?patient=%s",Ot="wallet_ledger/?patient=%s",Dt="wallet_ledger/ledger_sum/?patient=%s",kt="payment/%s/get_pdf/",Pt="clinics/%s/room_types/",St="clinics/%s/bed_packages/",xt="clinics/%s/medicine_packages/",jt="clinics/%s/seat_booking/",It="clinics/%s/seat_availability/",Ct="clinics/%s/other_diseases/",wt="suggestions/",Mt="users/%s/task_login/",At="meetings/zoom_user/",Tt="meetings/",Rt="meetings/details",Lt="meetings/%s/",Ft="This field is required!";function Nt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Yt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Nt(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Nt(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Vt=function(e){return H+"/"+e},Bt=function(e){return B+"/"+e},Ht=function(e,t,a,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};_()({method:"put",url:Vt(e),data:t,headers:Yt({Authorization:"Token "+ca()},r)}).then((function(e){var t=e.data;a(t),t.detail&&Qt(O,t.detail)})).catch((function(e){Wt(e),n(t)}))},qt=function(e,t,a,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};_()({method:"post",url:Vt(e),data:t,headers:Yt({Authorization:"Token "+ca()},r)}).then((function(e){var t=e.data;a(t),t.detail&&Qt(O,t.detail)})).catch((function(e){console.log(e),Wt(e),n()}))},zt=function(e,t,a,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};_()({method:"post",url:e,data:t,headers:Yt({},r)}).then((function(e){var t=e.data;a(t),t.detail&&Qt(O,t.detail)})).catch((function(e){console.log(e),Wt(e),n()}))},Gt=function(e,t,a,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};_()({method:"patch",url:Vt(e),data:t,headers:Yt({Authorization:"Token "+ca()},r)}).then((function(e){var t=e.data;a(t)})).catch((function(e){console.log(e),Wt(e),n()}))},Ut=function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};_()({method:"get",url:Vt(e),headers:{Authorization:"Token "+ca()},params:n}).then((function(e){var a=e.data;t(a),a.detail&&Qt(O,a.detail)})).catch((function(e){console.log("Error aa rhi ",e),Wt(e),a()}))},Wt=function(e){var t=e.response;if(t){console.info("Error Response Received",t);var a=t.status;400==a?t.data.detail&&N.a.error(t.data.detail):401==a?t.data.detail&&N.a.error(t.data.detail):403==a?t.data.detail&&N.a.error(t.data.detail):404==a?t.data.detail?N.a.error(t.data.detail):N.a.error("Not Found"):500==a&&N.a.error("Internal Server Error")}else console.error(t)},Kt=function(e,t){var a=/%s/;return t.reduce((function(e,t){return e.replace(a,t)}),e)},Qt=function(e,t){e==O?N.a.success(t):"info"==e?N.a.info(t):e==D?N.a.warning(t):e==k&&N.a.error(t)},Zt=function(e){return N.a.loading(e,0)},Xt=function(e,t,a){return e(),t&&Qt(t,a),!0},Jt=function(e,t,a){return t.length<6&&0!=t.length?"Password should be atleast 6 character long":t==t.toLowerCase()&&0!=t.length?"Password must have atleast 1 uppercase letter":t==t.toUpperCase()&&0!=t.length?"Password must have atleast 1 lowercase letter":t.search(/[0-9]/)<0&&0!=t.length?"Password must contain atleast 1 digit":1==/^[a-zA-Z0-9 ]*$/.test(t)&&0!=t.length?"Password must have atleast 1 special character":void 0},$t=function(e){var t=E.get(e);return t||!1},ea=function e(t){return Object.keys(t).forEach((function(a){return t[a]&&"object"===typeof t[a]&&e(t[a])||!t[a]&&void 0!==t[a]&&delete t[a]})),t},ta="old_password",aa="new_password",na=function(){var e=b.a.get(P),t=b.a.get("token");return e&&t?e:null},ra=function(e){b.a.set("current_practice",e)},ia=function(){var e=b.a.get(P),t=b.a.get("token"),a=b.a.get("practice");return e&&t&&a?a:[]},la=function e(){var t=b.a.get("current_practice");if(t&&t!={})return t;var a=b.a.get("practice");return a&&a.length?(console.log(a),ra(a[0].practice.id),e()):null},oa=function(e,t,a){console.log("workign");var n=Object(u.a)({mobile:e.email},"password",e.password);_.a.post(Vt("users/login/"),n).then((function(e){var a=e.data;b.a.set(P,a.user),b.a.set("token",a.token),b.a.set("practice",a.practice_list),t()})).catch((function(e){console.log(e),Wt(e),a()}))},sa=function(e,t,a){var n={phone_no:e.phone_no,otp:e.otp};_.a.post(Vt("staff_login/verify_otp/"),n).then((function(e){var a=e.data;b.a.set(P,a.user),b.a.set("token",a.token),b.a.set("practice",a.practice_list),t()})).catch((function(e){console.log(e),Wt(e),a()}))},ca=function(){return b.a.get("token")},ua=function(e,t,a,n){var r={phone_no:t};_.a.post(e,r).then((function(e){a(e)})).catch((function(e){console.log(e),Wt(e),n()}))},da=(a(38),a(13)),pa=(a(58),a(32)),ma=(a(81),a(30)),ha=(a(124),a(68)),fa=(a(95),a(46)),ga=(a(61),a(15)),ya=(a(253),a(134)),Ea=(a(101),a(40)),ba=(a(139),a(67)),va=(a(51),a(11)),_a=(a(114),a(23)),Oa=a(29),Da=a(19),ka=function(e){return e&&e.length>8?e.substring(0,3)+"*".repeat(e.length-5)+e.substring(e.length-2):e},Pa=function(e){return e&&e.length>8?e.substring(0,3)+"*".repeat(e.length-e.indexOf("@")-4)+e.substring(e.length-e.indexOf("@")-4):e},Sa=[{label:"cash",value:"cash"},{label:"cheque",value:"cheque"},{label:"card",value:"card"},{label:"netbanking",value:"netbanking"},{label:"unknown",value:"unknown"}],xa=[{label:"Kidney Disease",value:"Kidney Disease"},{label:"Cancer Disease",value:"Cancer Disease"},{label:"Other Disease",value:"Other Disease"}],ja="Medicine",Ia="Procedure",Ca="Prescriptions",wa="Inventory",Ma=[{label:ja,value:ja},{label:"Equipment",value:"Equipment"},{label:"Supplies",value:"Supplies"}],Aa="ADD",Ta="CONSUME",Ra=[{label:"PATIENT ID",value:"{{PATIENT_ID}}"},{label:"CLINIC CONTACT",value:"{{CLINICCONTACTNUMBER}}"},{label:"CLINIC NAME",value:"{{CLINIC}}"},{label:"PATIENT NAME",value:"{{PATIENT}}"},{label:"APPOINTMENT CATEGORY",value:"{{CATEGORY}}"},{label:"DATE",value:"{{DATE}}"},{label:"TIME",value:"{{TIME}}"}],La=[{title:"PRESCRIPTION"},{title:"TREATMENT PLAN"},{title:"CASE SHEET"},{title:"MEDICAL LEAVE"},{title:"REPORT MANUAL"},{title:"LAB ORDER"},{title:"CLINICAL NOTES"}],Fa=[{title:"INVOICE"},{title:"RECEIPTS"},{title:"RETURN"}],Na=["A2","A3","A4","A5"],Ya=[{value:"PORTRAIT"},{value:"LANDSCAPE"}],Va=[{value:"COLOR"},{value:"BLACK"}],Ba=[{title:"Yes",value:!0},{title:"No , I already have a letter head.",value:!1}],Ha=[{value:"Square"},{value:"Narrow"},{value:"Wide"}],qa=[{value:"RIGHT"},{value:"LEFT"},{value:"CENTRE"}],za=[{title:"Yes",value:!0},{title:"No",value:!1}],Ga=[{value:"Exclude Medical History"},{value:"Exclude Patient Number"},{value:"Exclude address"},{value:"Exclude Blood Group"}],Ua=[{title:"Yes",value:!0},{title:"No",value:!1}],Wa=[{title:"Yes",value:!0},{title:"No",value:!1}],Ka=[{title:"Yes",value:!0},{title:"No",value:!1}],Qa=[{label:"day(s)",value:"day(s)"},{label:"week(s)",value:"week(s)"},{label:"month(s)",value:"month(s)"},{label:"year(s)",value:"year(s)"}],Za=[{label:"twice daily",value:"twice daily"},{label:"three times a day",value:"three times a day"},{label:"four times a day",value:"four times a day"},{label:"every four hours",value:"every four hours"},{label:"as needed",value:"as needed"},{label:"every 2 hour(s)",value:"every 2 hour(s)"},{label:"every other hour",value:"every other hour"},{label:"every day",value:"every day"},{label:"every other day",value:"every other day"}],Xa="Scheduled",Ja="Waiting",$a="Engaged",en="CheckOut",tn="Cancelled",an=[{label:"Sales",value:"SALES"},{label:"Services",value:"SERVICES"},{label:"Damaged",value:"DAMAGED"},{label:"Returned",value:"RETURNED"},{label:"Adjustment",value:"ADJUSTMENT"}],nn="$_$",rn=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],ln=[{label:"Valid for absence from court attendance",value:"valid_court"},{label:"Invalid for absence from court attendance",value:"invalid_court"},{label:"Dont mention",value:"no_mention"}],on=[{label:"Degree Fahrenheit",value:"Degree Fahrenheit"},{label:"Degree Celsius",value:"Degree Celsius"}],sn=[{label:"Armpit",value:"Armpit"},{label:"Forehead",value:"Forehead"},{label:"Anus",value:"Anus"},{label:"Mouth",value:"Mouth"},{label:"Ear",value:"Ear"}],cn=[{label:"Sitting",value:"Sitting"},{label:"Standing",value:"Standing"}],un=[{label:"Scheduled",value:Xa},{label:"Cancelled",value:tn},{label:"Engaged",value:$a}],dn=[{label:"Success",value:"SUCCESSFUL"},{label:"Failed",value:"FAILED"},{label:"Pending",value:"PENDING"}],pn=[{label:"OPD",value:"OPD"},{label:"IPD",value:"IPD"}],mn=[{label:"ADMIN",value:"1"},{label:"CLINIC_ADMIN",value:"2"}],hn=[{name:"Daily New Patients",value:"DAILY"},{name:"Expiring Membership",value:"EXPIRED"},{name:"Patients First Appointment",value:"patientsfirstappointment"},{name:"Monthly New Patients",value:"MONTHLY"},{name:"New Membership",value:"NEW"},{name:"Active Patients",value:"ACTIVE"},{name:"Follow Up Report",value:"FOLLOW_UP"},{name:"Medicine Report",value:"MEDICINE"}],fn=[{name:"Appointments For Each Category",value:"CATEGORY"},{name:"Cancellation Numbers",value:"CANCEL_NUMBERS"},{name:"Average Waiting/engaged Time Day Wise",value:"DAILY_WAIT"},{name:"Average Waiting/engaged Time Month Wise",value:"MONTHLY_WAIT"},{name:"Daily Appointment Count",value:"DAILY"},{name:"Appointments For Each Doctor",value:"DOCTOR"},{name:"Monthly Appointment Count",value:"MONTHLY"},{name:"Appointment For Each Patient Group",value:"PATIENT_GROUPS"},{name:"Patient Conversion",value:"CONVERSION_REPORT"}],gn=[{name:"Daily Treatments Count",value:"DAILY"},{name:"Treatments For Each Doctor",value:"DOCTOR"},{name:"Monthly Treatments Count",value:"MONTHLY"},{name:"Treatments For Each Category",value:"CATEGORY"}],yn=[{name:"Ageing Amount Due",value:"AGEING"},{name:"Amount Due Per Doctor",value:"DOCTOR"}],En=[{name:"A+",value:"A+"},{name:"A-",value:"A-"},{name:"B+",value:"B+"},{name:"B-",value:"B-"},{name:"AB+",value:"AB+"},{name:"AB-",value:"AB-"},{name:"O+",value:"O+"},{name:"O-",value:"O-"}],bn=[{name:"Daily Expenses",value:"DAILY"},{name:"Expenses For Each Type",value:"EXPENSE_TYPE"},{name:"Monthly Expenses",value:"MONTHLY"}],vn=[{name:"Daily Stock Consumption Item Wise",value:"DAILY"},{name:"Monthly Stock Consumption Item Wise",value:"MONTHLY"},{name:"Top 10 Consumed Items",value:"TOP"}],_n=[{name:"Daily Booking Count",value:"DAILY"},{name:"Monthly Booking Count",value:"MONTHLY"},{name:"Medicine Usage Count",value:"MEDICINE_COUNT"},{name:"Bed Booking Package Count",value:"BED_PACKAGE_COUNT"}],On=[{name:"Margin Type wise",value:"MARGIN"},{name:"Wallet Balance Amount",value:"WALLET"},{name:"Agent Tree View",value:"AGENTVIEW"}],Dn=[{name:"Refund Payments",value:"REFUND"},{name:"Payment Received From Each Patient Group",value:"ADVANCE"},{name:"Patients With Unsettled Advance, As Of Today",value:"GROUP"},{name:"Modes Of Payment",value:"MODE"},{name:"Payment Received Per Day",value:"DAY"},{name:"Payment Received Per Doctor",value:"PER_DOCTOR"},{name:"Payment Received Per Month",value:"MONTH"},{name:"Payment Settlement",value:"SETTLEMENT"},{name:"Payment Settlement Per Doctor",value:"SETTLEMENT_DOCTOR"},{name:"Credit Notes",value:"NOTES"},{name:"Credit Amount Per Doctor",value:"DOCTOR"}],kn=[{name:"Daily Invoiced Income",value:"DAILY"},{name:"Monthly Invoiced Income",value:"MONTHLY"},{name:"Taxed Invoiced Income",value:"TAX"},{name:"Invoiced Income For Each Doctor",value:"DOCTOR"},{name:"Invoiced Income For Each Procedure",value:"PROCEDURE"},{name:"Invoiced Income For Each Patient Group",value:"PATIENT_GROUPS"},{name:"Invoiced Income For Each Product",value:"PRODUCT"}],Pn=[{name:"Day wise Return Invoice",value:"DAILY"},{name:"Monthly wise Return Invoice",value:"MONTHLY"},{name:"Return Invoice For Each Tax",value:"TAX"},{name:"Return Invoice For Each Procedure",value:"PROCEDURE"},{name:"Return Invoice For Each Product",value:"PRODUCT"},{name:"Return Invoice For Each Doctor",value:"DOCTOR"},{name:"Return Invoice For Each Patient Groups",value:"PATIENT_GROUPS"}],Sn=[{label:"all ",value:""},{label:"Services",value:"SERVICES"},{label:"Products",value:"PRODUCTS"},{label:"Lab orders",value:"RESERVATION"}],xn=[{label:"Zero",value:"ZERO"},{label:"Non Zero",value:"NON_ZERO"}],jn=[{label:"all payments",value:"SALES"},{label:"Only advance payments",value:"SERVICES"},{label:"Payment for services",value:"DAMAGED"},{label:"Payment for products",value:"RETURNED"}],In=[{label:"DOB",value:"DOB"},{label:"Age",value:"AGE"}],Cn=[{label:"Patient Name",value:"name"},{label:"Contact No",value:"phone"},{label:"Age is ",value:"age"},{label:"Age more than ",value:"age_gte"},{label:"Age Less Than",value:"age_lte"},{label:"Has Age ",value:"has_age"},{label:"Date of Birth is ",value:"dob"},{label:"Date of Birth is more than ",value:"dob_gte"},{label:"Date of Birth is less than",value:"dob_lte"},{label:"Birthday is in",value:"dob_month"},{label:"Has Date of Birth",value:"has_dob"},{label:"Patient Id",value:"patient_id"},{label:"Has Aadhar Id",value:"has_aadhar"},{label:"Aadhar Id",value:"aadhar"},{label:"Email",value:"email"},{label:"Has Email",value:"has_email"},{label:"Gender is",value:"gender"},{label:"Has Gender",value:"has_gender"},{label:"Pincode",value:"pincode"},{label:"Has Pincode",value:"has_pincode"},{label:"Has Street Address",value:"has_street"},{label:"Street Address ",value:"street"},{label:"Blood Group",value:"blood_group"},{label:"Referal Source",value:"source"},{label:"Refered by Agent",value:"agent_referal"}],wn=[{label:"Yes",value:"Y"},{label:"No",value:"N"}],Mn=[{label:"Yes",value:"Y"},{label:"No",value:"N"}],An=[{label:"Yes",value:"Y"},{label:"No",value:"N"}],Tn=[{label:"Yes",value:"Y"},{label:"No",value:"N"}],Rn=[{label:"Yes",value:"Y"},{label:"No",value:"N"}],Ln=[{label:"Yes",value:"Y"},{label:"No",value:"N"}],Fn=[{label:"Yes",value:"Y"},{label:"No",value:"N"}],Nn=[{label:"Yes",value:"Y"},{label:"No",value:"N"}],Yn=[{label:"Female",value:"female"},{label:"Male",value:"male"},{label:"Other",value:"other"}],Vn=[{label:"Percent",value:"%"},{label:"Rupees",value:"INR"}],Bn=["/patients/profile/add","/patient/:id/emr/vitalsigns/add","/patient/:id/emr/vitalsigns/edit","/patient/:id/emr/clinicnotes/add","/patient/:id/emr/clinicnotes/edit","/patient/:id/emr/plans/add","/patient/:id/emr/plans/edit","/patient/:id/emr/workdone/add","/patient/:id/emr/workdone/edit","/patient/:id/emr/prescriptions/add","/patient/:id/emr/prescriptions/edit","/patient/:id/prescriptions/template/add","/patient/:id/billing/invoices/add","/patient/:id/billing/invoices/edit","/patient/:id/billing/payments/add","/patient/:id/billing/payments/edit"],Hn=[{label:"PATIENT NAME",value:"{{PATIENT}}"},{label:"CLINIC NAME",value:"{{CLINIC}}"},{label:"CLINIC NAME",value:"{{EXPIRY}}"},{label:"VALUE",value:"{{VALUE}}"},{label:"MAX VALUE",value:"{{MAX_VALUE}}"},{label:"MIN PURCHASE",value:"{{MIN_PURCHASE}}"}],qn="config_blood_group",zn="config_source",Gn="config_sms_language",Un="config_family_relation",Wn="config_gender",Kn=[{label:"Services",value:"SERVICES"},{label:"Products",value:"PRODUCTS"}],Qn=o.a.Header,Zn=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).searchPatient=function(e){var t=Object(f.a)(a);a.setState((function(t){return{searchPatientString:e}}));e&&Ut(Kt(We,[e]),(function(a){t.setState((function(t){return t.searchPatientString==e?{patientListData:Object(Oa.a)(a.results)}:{}}))}),(function(e){t.setState({searchPatientString:null})}))},a.switchPortal=function(){var e=Object(f.a)(a);Ut(Kt(Mt,[e.props.user.id]),(function(t){t&&e.setUserCredentials(t.login,t.password)}),(function(){Qt(k,"Something went wrong.")}))},a.handlePatientSelect=function(e){e&&(a.props.history.push("/patient/"+e.replace(nn,"")+"/profile"),a.setState({searchPatientString:null}))},a.state={patientListData:[]},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"setUserCredentials",value:function(e,t){var a=Zt("Waiting for authentication from server...");sessionStorage.removeItem("token");var n={email:e,password:t};null==sessionStorage.getItem("token")&&zt("https://www.bkarogyam.com/api/authenticate",n,(function(e){e.success&&(Xt(a,O," Authentication Successfully!!"),sessionStorage.setItem("token",e.token)),sessionStorage.getItem("token")?window.open("/task/"):Xt(a,k,"Authentication failed. User not found.")}),(function(){}))}},{key:"render",value:function(){var e=this,t=this,a=r.a.createElement(_a.a,null,r.a.createElement(_a.a.Item,{key:"profile"},r.a.createElement(Da.b,{to:"/profile"},"Profile")),r.a.createElement(_a.a.Divider,null),r.a.createElement(_a.a.Item,{key:"website",onClick:this.switchPortal},r.a.createElement("small",null,"Switch to Tasks >")),r.a.createElement(_a.a.Divider,null),r.a.createElement(_a.a.Item,{key:"logout"},r.a.createElement("a",{onClick:this.props.logout},"Log out")));return r.a.createElement(Qn,{style:{background:"#fff",padding:0,boxShadow:"0 2px 4px 0 rgba(38,50,69,.2)",zIndex:1}},r.a.createElement("div",{style:{float:"left",margin:"0px 20px"}},r.a.createElement(va.a,{className:"trigger",type:this.props.collapsed?"menu-unfold":"menu-fold",onClick:function(){return e.props.toggleSider(!e.props.collapsed)}})),r.a.createElement(_a.a,{mode:"horizontal",style:{lineHeight:"64px"}},r.a.createElement(_a.a.Item,{key:"5"},r.a.createElement(ya.a,{placeholder:"Patient Name",showSearch:!0,onSearch:this.searchPatient,defaultActiveFirstOption:!1,showArrow:!1,value:this.state.searchPatientString,filterOption:!1,onSelect:this.handlePatientSelect},this.state.patientListData.map((function(e){return r.a.createElement(ya.a.Option,{value:e.id.toString()+nn},r.a.createElement(Ea.a.Item,{style:{padding:0}},r.a.createElement(Ea.a.Item.Meta,{avatar:e.image?r.a.createElement(ba.a,{src:Bt(e.image)}):r.a.createElement(ba.a,{style:{backgroundColor:"#87d068"}},e.user.first_name?e.user.first_name.charAt(0):r.a.createElement(va.a,{type:"user"})),title:e.user.first_name+" ("+(e.custom_id?e.custom_id:e.user.id)+")",description:t.props.activePracticePermissions.PatientPhoneNumber?e.user.mobile:ka(e.user.mobile)})))})))),r.a.createElement(_a.a.Item,{key:"4"},r.a.createElement(da.a.Group,null,t.props.activePracticePermissions.AddPatient||t.props.allowAllPermissions?r.a.createElement(Da.b,{to:"/patients/profile/add"},r.a.createElement(da.a,{type:"primary"},r.a.createElement(va.a,{type:"plus"}),"Add Patient")):null,t.props.activePracticePermissions.MergePatients||t.props.allowAllPermissions?r.a.createElement(Da.b,{to:"/patients/merge"},r.a.createElement(da.a,{type:"primary"},r.a.createElement(va.a,{type:"user-add"}),"Merge Patients")):null)),r.a.createElement(_a.a.Item,{key:"3"},r.a.createElement(ga.a,{onChange:this.props.switchPractice,defaultValue:this.props.active_practiceId,value:this.props.active_practiceId,style:{width:"300px",maxWidth:"70vw"}},this.props.practiceList&&this.props.practiceList.map((function(e){return r.a.createElement(ga.a.Option,{key:e.practice.id,value:e.practice.id},e.practice.name)})))),r.a.createElement("div",{style:{float:"right",margin:"0px 20px"}},this.props.user&&this.props.user.is_superuser?r.a.createElement(fa.a,{color:"red"},"SuperUser"):null,r.a.createElement(ha.a,{overlay:a,placement:"bottomRight"},r.a.createElement(ba.a,{style:{backgroundColor:"#87d068"},icon:"user"})))))}}]),t}(r.a.Component),Xn=a(327),Jn=a.n(Xn),$n=a(422),er=o.a.Sider,tr=_a.a.SubMenu,ar=(_a.a.ItemGroup,function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).onOpenChange=function(e){var t=e.find((function(e){return-1===a.state.openKeys.indexOf(e)}));-1===["sub1","sub2"].indexOf(t)?a.setState({openKeys:e}):a.setState({openKeys:t?[t]:[]})},a.state={openKeys:[]},a.onHotKeyDown=a.onHotKeyDown.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"onHotKeyDown",value:function(e){console.log(e);switch(e){case"alt+c":this.props.history.push("/calendar");break;case"alt+p":this.props.history.push("/patients/profile");break;case"alt+r":this.props.history.push("/reports/appointments");break;case"alt+s":this.props.history.push("/settings/clinics");break;case"alt+b":this.props.history.push("/inventory");break;case"alt+w":this.props.history.push("/web/videos")}}},{key:"render",value:function(){var e=this,t=this;return r.a.createElement($n.a,{keyName:"alt+c ,alt+p, alt+r, alt+s, alt+b ,alt+w",onKeyDown:function(t){return e.onHotKeyDown(t)}},r.a.createElement(er,{trigger:null,collapsible:!0,collapsed:this.props.collapsed,style:{zIndex:1},breakpoint:"xxl",onBreakpoint:function(e){t.props.toggleSider(e)},onCollapse:function(e,t){}},r.a.createElement("img",{src:Jn.a,alt:"",style:{width:"100%",padding:"20px"}}),r.a.createElement(_a.a,{mode:"inline",defaultSelectedKeys:["1"],openKeys:this.state.openKeys,onOpenChange:this.onOpenChange,theme:"dark"},this.props.activePracticePermissions.ViewCalendar?r.a.createElement(_a.a.Item,{key:"1"},r.a.createElement(Da.b,{to:"/calendar"},r.a.createElement(va.a,{type:"schedule"}),r.a.createElement("span",{className:"nav-text"},r.a.createElement("span",{className:"shortcutLetterHighlight"},"C"),"alendar"))):null,r.a.createElement(_a.a.Item,{key:"26"},r.a.createElement(Da.b,{to:this.props.currentPatient?"/patient/"+this.props.currentPatient.id+"/profile":"/patients/profile"},r.a.createElement(va.a,{type:"user"}),r.a.createElement("span",{className:"nav-text"},r.a.createElement("span",{className:"shortcutLetterHighlight"},"P"),"atients"))),r.a.createElement(_a.a.Item,{key:"27"},r.a.createElement(Da.b,{to:"/reports/appointments"},r.a.createElement(va.a,{type:"bar-chart"}),r.a.createElement("span",{className:"nav-text"},r.a.createElement("span",{className:"shortcutLetterHighlight"},"R"),"eports"))),r.a.createElement(_a.a.Item,{key:"5"},r.a.createElement(Da.b,{to:"/settings/clinics"},r.a.createElement(va.a,{type:"setting"}),r.a.createElement("span",{className:"nav-text"},r.a.createElement("span",{className:"shortcutLetterHighlight"},"S"),"ettings"))),r.a.createElement(tr,{key:"sub1",title:r.a.createElement("span",null,r.a.createElement(va.a,{type:"gold"}),r.a.createElement("span",null,r.a.createElement("span",{className:"shortcutLetterHighlight"},"B"),"ack Office"))},r.a.createElement(_a.a.Item,{key:"6"},r.a.createElement(Da.b,{to:"/inventory/expenses"},r.a.createElement(va.a,{type:"credit-card"}),r.a.createElement("span",{className:"nav-text"},"Expenses"))),r.a.createElement(_a.a.Item,{key:"7"},r.a.createElement(Da.b,{to:"/inventory/activity"},r.a.createElement(va.a,{type:"bell"}),r.a.createElement("span",{className:"nav-text"},"Activities"))),r.a.createElement(_a.a.Item,{key:"8"},r.a.createElement(Da.b,{to:"/inventory/manufacture"},r.a.createElement(va.a,{type:"database"}),r.a.createElement("span",{className:"nav-text"},"Manufacturers"))),r.a.createElement(_a.a.Item,{key:"42"},r.a.createElement(Da.b,{to:"/inventory/vendor"},r.a.createElement(va.a,{type:"database"}),r.a.createElement("span",{className:"nav-text"},"Vendor"))),r.a.createElement(_a.a.Item,{key:"9"},r.a.createElement(Da.b,{to:"/inventory/lab"},r.a.createElement(va.a,{type:"experiment"}),r.a.createElement("span",{className:"nav-text"},"Labs"))),r.a.createElement(_a.a.Item,{key:"10"},r.a.createElement(Da.b,{to:"/inventory"},r.a.createElement(va.a,{type:"gold"}),r.a.createElement("span",{className:"nav-text"},"Inventory")))),this.props.activePracticePermissions.WebAdmin?r.a.createElement(_a.a.Item,{key:"web-1"},r.a.createElement(Da.b,{to:"/web/videos"},r.a.createElement(va.a,{type:"google"}),r.a.createElement("span",{className:"nav-text"},r.a.createElement("span",{className:"shortcutLetterHighlight"},"W"),"eb Admin"))):null,r.a.createElement(_a.a.Item,{key:"11"},r.a.createElement(Da.b,{to:"/meeting-booking"},r.a.createElement(va.a,{type:"reconciliation"}),r.a.createElement("span",{className:"nav-text"},"Meeting Booking"))))))}}]),t}(r.a.Component)),nr=(a(73),a(47)),rr=(a(31),a(14)),ir=(a(42),a(12)),lr=(a(72),a(41)),or=(a(74),a(45)),sr=(a(49),a(21)),cr=(a(34),a(17)),ur=(cr.a.Meta,function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).showModal=function(e){a.setState((function(){return{visible:!0,practice:e}}))},a.handleCancel=function(){a.setState({visible:!1})},a.state={practiceList:[],specialisations:null,loading:!0,visible:!1,practice:{}},a.deletePractice=a.deletePractice.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.admin_practiceData()}},{key:"admin_practiceData",value:function(){var e=this;Ut("clinics/",(function(t){var a={};t[0].specialisations.forEach((function(e){a[e.id]=e})),console.log(a),e.setState({practiceList:t,specialisations:a,loading:!1})}),(function(){e.setState({loading:!1})}))}},{key:"deletePractice",value:function(e){var t=this;qt(Kt("clinics/%s/delete_clinic/",[e]),{},(function(e){console.log("data"),t.admin_practiceData(),t.props.refreshClinicData&&t.props.refreshClinicData()}),(function(){}))}},{key:"render",value:function(){var e=this,t=this,a=[{title:"Name",dataIndex:"name",key:"name",render:function(t,a){return r.a.createElement("a",{href:"#",onClick:function(){return e.showModal(a)}},t)}},{title:"Tagline",dataIndex:"tagline",key:"tagline"},{title:"Address",dataIndex:"address",key:"address"},{title:"Specialisation",key:"specialisation",dataIndex:"specialisation"},{title:"SMS Language",dataIndex:"language",key:"language"},{title:"Action",key:"action",render:function(a,n){return r.a.createElement("span",null,r.a.createElement(Da.b,{to:"/settings/clinics/"+n.id+"/edit"},"Edit"),r.a.createElement(sr.a,{type:"vertical"}),t.props.practiceList.length>1?r.a.createElement(or.a,{title:"Are you sure delete this Practice?",onConfirm:function(){return e.deletePractice(n.id)},okText:"Yes",cancelText:"No"},r.a.createElement("a",null,"Delete")):null)}}];return r.a.createElement(rr.a,null,r.a.createElement("h2",null,"Practice Details",r.a.createElement(Da.b,{to:"/settings/clinics/add"},r.a.createElement(da.a,{type:"primary",style:{float:"right"}},r.a.createElement(va.a,{type:"plus"}),"\xa0Add"))),r.a.createElement(cr.a,{loading:this.state.loading},r.a.createElement(lr.a,{pagination:!1,columns:a,dataSource:this.state.practiceList})),r.a.createElement(nr.a,{visible:this.state.visible,closable:!1,width:600,onCancel:this.handleCancel,footer:null},r.a.createElement(da.a,{icon:"close",type:"danger",shape:"circle",style:{position:"absolute",top:"-50px",right:0},onClick:this.handleCancel}),r.a.createElement(rr.a,{style:{paddingBottom:"25px"}},r.a.createElement(ir.a,{span:12,offset:10},this.state.practice.logo?r.a.createElement(ba.a,{shape:"square",size:"large",src:Bt(this.state.practice.logo)}):null)),r.a.createElement(dr,{label:"Practice Name : ",value:this.state.practice.name}),r.a.createElement(dr,{label:"Tagline : ",value:this.state.practice.tagline}),r.a.createElement(dr,{label:"Email Id: ",value:this.state.practice.email}),r.a.createElement(dr,{label:"Contact Number : ",value:this.state.practice.contact}),r.a.createElement(dr,{label:"Website : ",value:this.state.practice.website}),r.a.createElement(dr,{label:"GSTIN : ",value:this.state.practice.gstin}),r.a.createElement(dr,{label:"Specialisation",value:this.state.practice.specialisation}),dr({label:"Address",value:this.state.practice.address?this.state.practice.address:this.state.practice.locality})))}}]),t}(r.a.Component));function dr(e){return r.a.createElement(rr.a,{gutter:16},r.a.createElement(ir.a,{span:8},r.a.createElement("p",null,r.a.createElement("b",null,e.label))),r.a.createElement(ir.a,{span:16},e.value))}a(111);var pr=a(44),mr=(a(611),a(330)),hr=(a(130),a(64)),fr=(a(268),a(163)),gr=(a(302),a(110)),yr=(a(117),a(63)),Er=(a(118),a(57)),br=(a(107),a(33)),vr=(a(50),a(4)),_r=a(3),Or=a.n(_r),Dr=a(825),kr=a.n(Dr),Pr=a(826),Sr=a.n(Pr),xr=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).setRef=function(e){a.webcam=e},a.capture=function(){var e=a.webcam.getScreenshot();a.props.getScreenShot&&a.props.getScreenShot(e)},a.state={},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:{width:680}},r.a.createElement(Sr.a,{audio:!1,height:480,width:640,ref:this.setRef,videoConstraints:{width:1280,height:720,facingMode:"user"},screenshotFormat:"image/jpeg"}),r.a.createElement(da.a,{onClick:this.capture},"Capture photo"))}}]),t}(r.a.Component),jr=a(559),Ir=(a(1184),a(146)),Cr=a(333),wr=a.n(Cr),Mr=a(430),Ar=a.n(Mr);function Tr(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Rr(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Tr(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Tr(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Lr=ma.a.TextArea,Fr=vr.a.Item,Nr=br.a.Group,Yr=pr.a.Group,Vr=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).fieldDecorators=function(e,t){var n=a.state.urlInitialValues;return e.type==j?{initialValue:t[e.key]?t[e.key]:n[e.key]?n[e.key]:t[e.key],rules:[{required:e.required,message:Ft,type:"array"}]}:{initialValue:t[e.key]?t[e.key]:n[e.key]?n[e.key]:t[e.key],rules:[{required:e.required,message:Ft}]}},a.handleSubmit=function(e){var t=Object(f.a)(a);e.preventDefault(),a.props.form.validateFieldsAndScroll((function(e,n){e||(a.props.defaultValues&&a.props.defaultValues.forEach((function(e){n=Rr(Object(u.a)({},e.key,e.value),n)})),a.state.colorPickerKey&&(n[a.state.colorPickerKey]=a.state.colorPickerColor),t.props.fields.forEach((function(e){if(e.type==T){var a=e.key;n[a]&&n[a].file&&n[a].file.response?n[a]=n[a].file.response.image_path:n[a]=e.initialValue}else if(e.type==R){var r=e.key;n[r]&&n[r].file&&n[r].file.response?n[r]=n[r].fileList.map((function(e){return e.response.id})):n[r]=e.initialValue}else if(e.type==M||e.type==C||e.type==w){var i=e.key;e.format&&(n[i]=Or()(n[i]).isValid()?Or()(n[i]).format(e.format):null)}else if(e.type==A){var l=e.key;n[l]=t.state.editorState[l]?wr()(Object(Ir.convertToRaw)(t.state.editorState[l].getCurrentContent())):e.initialValue}})),t.state.formProp.beforeSend&&(n=t.state.formProp.beforeSend(n)),t.state.formProp.confirm?nr.a.confirm({title:t.state.formProp.confirmText||"Are you sure to submit?",onOk:function(){t.submitForm(n)},onCancel:function(){}}):t.submitForm(n))}))},a.addMailTemplateTag=function(e,t){Object(f.a)(a);a.setState((function(a){var n=a.editorState[e]?wr()(Object(Ir.convertToRaw)(a.editorState[e].getCurrentContent())):"";return n+=t,{editorState:Rr({},a.editorState,Object(u.a)({},e,Ir.EditorState.createWithContent(Ir.ContentState.createFromBlockArray(Ar()(n)))))}}))},a.toggleWebCam=function(e,t){a.setState((function(a){return{webCamState:Rr({},a.webCamState,Object(u.a)({},e,t))}}))},a.getImageandUpload=function(e,t){var n=Object(f.a)(a),r=new FormData;r.append("image",t),r.append("name","file");qt(q,r,(function(t){n.props.form.setFieldsValue(Object(u.a)({},e,{file:{response:t}})),Qt(O,"Image Captured and processed."),n.setState((function(t){return{webCamState:Rr({},t.webCamState,Object(u.a)({},e,!1))}}))}),(function(){}),{"content-type":"multipart/form-data"})},a.onEditorStateChange=function(e,t){a.setState((function(a){return{editorState:Rr({},a.editorState,Object(u.a)({},e,t))}}))},a.state={fields:a.props.fields,formData:{},formProp:a.props.formProp,disabled:!1,loading:!1,countryOptions:[],stateOptions:[],cityOptions:[],smsFields:{},urlInitialValues:{},webCamState:{},editorState:{}},a.resetFormData=a.resetFormData.bind(Object(f.a)(a)),a.submitForm=a.submitForm.bind(Object(f.a)(a)),a.colorChange=a.colorChange.bind(Object(f.a)(a)),a.loadCountryData=a.loadCountryData.bind(Object(f.a)(a)),a.addSMSTag=a.addSMSTag.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentWillReceiveProps",value:function(e){}},{key:"componentDidMount",value:function(){var e=this;if(this.resetFormData(),this.props.fields.forEach((function(t){"country"==t.type&&e.loadCountryData()})),this.props.history&&this.props.history.location.search){var t=this.props.history.location.search.substr(1).split("&");if(t.length){var a={};t.forEach((function(e){var t=e.split("=");t&&2==t.length&&(isNaN(t[1])||-1==t[1].toString().indexOf(".")?isNaN(t[1])?a[t[0]]=t[1]:a[t[0]]=parseInt(t[1]):a[t[0]]=parseFloat(t[1]))})),this.setState({urlInitialValues:a})}}}},{key:"resetFormData",value:function(){var e={};this.state.fields.forEach((function(t){e[t.key]=t.initialValue})),this.setState({formData:e})}},{key:"submitForm",value:function(e){var t=this;this.setState({disabled:!0,loading:!0});var a=function(e){t.state.formProp.successFn(e),t.setState({disabled:!1,loading:!1}),t.props.changeRedirect&&t.props.changeRedirect()},n=function(){t.state.formProp.errorFn(),t.setState({disabled:!1,loading:!1})};"post"==this.props.formProp.method?qt(this.props.formProp.action,e,a,n):"put"==this.props.formProp.method&&Ht(this.props.formProp.action,e,a,n)}},{key:"colorChange",value:function(e,t){var a=this;this.setState({colorPickerKey:t,colorPickerColor:e.hex},(function(){a.props.form.setFieldsValue(Object(u.a)({},t,e.hex))}))}},{key:"setAddressField",value:function(e,t){"country"==e?this.setState((function(e){var a=[];return e.countryOptions.forEach((function(e){e.id==t&&(a=e.states)})),{stateOptions:a}})):this.setState((function(e){var a=[];return e.stateOptions.forEach((function(e){e.id==t&&(a=e.cities)})),{cityOptions:a}}))}},{key:"loadCountryData",value:function(){var e=this;Ut("clinics/extra_data/",(function(t){e.setState({countryOptions:t.country})}),(function(){}))}},{key:"addSMSTag",value:function(e,t){var a=this.props.form.getFieldValue(e)||"";this.props.form.setFieldsValue(Object(u.a)({},e,a+t))}},{key:"render",value:function(){var e=this,t=this.props.formLayout?this.props.formLayout:{labelCol:{span:8},wrapperCol:{span:14}},a=this.props.form.getFieldDecorator;return r.a.createElement("div",null,r.a.createElement(vr.a,{onSubmit:this.handleSubmit},this.props.title?r.a.createElement("h2",null,this.props.title):null,this.state.fields?this.state.fields.map((function(n){switch(n.type){case"password":return r.a.createElement(vr.a.Item,Object.assign({key:n.key,label:n.label},t,{extra:n.extra}),a(n.key,e.fieldDecorators(n,e.state.formData))(r.a.createElement(ma.a,{prefix:r.a.createElement(va.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:n.placeholder,onChange:function(e){return function(){n.onChange&&n.onChange(e)}},disabled:n.disabled?n.disabled:e.state.disabled})));case S:return r.a.createElement(Fr,Object.assign({key:n.key,label:n.label},t,{extra:n.extra}),a(n.key,e.fieldDecorators(n,e.state.formData))(r.a.createElement(ma.a,{placeholder:n.placeholder,onChange:function(e){return function(){n.onChange&&n.onChange(e)}},disabled:n.disabled?n.disabled:e.state.disabled})),n.follow?r.a.createElement("span",{className:"ant-form-text"},n.follow):null);case x:return r.a.createElement(Fr,Object.assign({key:n.key},t,{label:n.label,extra:n.extra}),a(n.key,e.fieldDecorators(n,e.state.formData))(r.a.createElement(ga.a,{placeholder:n.placeholder,disabled:n.disabled?n.disabled:e.state.disabled,mode:n.mode?n.mode:"default"},n.options.map((function(e){return r.a.createElement(ga.a.Option,{value:e.value},e.label)})))),n.follow?r.a.createElement("span",{className:"ant-form-text"},n.follow):null);case j:return r.a.createElement(Fr,Object.assign({key:n.key},t,{label:n.label,extra:n.extra}),a(n.key,Rr({},e.fieldDecorators(n,e.state.formData)))(r.a.createElement(ga.a,{mode:"multiple",placeholder:n.placeholder,showSearch:n.showSearch?n.showSearch:null,disabled:n.disabled?n.disabled:e.state.disabled},n.options.map((function(e){return r.a.createElement(ga.a.Option,{value:e.value},e.label)})))),n.follow?r.a.createElement("span",{className:"ant-form-text"},n.follow):null);case"radio":return r.a.createElement(Fr,Object.assign({key:n.key,label:n.label},t,{extra:n.extra}),a(n.key,e.fieldDecorators(n,e.state.formData))(r.a.createElement(Nr,{disabled:n.disabled?n.disabled:e.state.disabled},n.options.map((function(e){return r.a.createElement(br.a,{value:e.value},e.label)})))));case"checkbox":return r.a.createElement(Fr,Object.assign({key:n.key,label:n.label},t,{extra:n.extra}),a(n.key,e.fieldDecorators(n,e.state.formData))(r.a.createElement(Yr,{options:n.options,disabled:n.disabled?n.disabled:e.state.disabled})));case"singlecheckbox":return r.a.createElement(Fr,Object.assign({key:n.key,label:n.label},t,{extra:n.extra}),a(n.key,{valuePropName:"checked",initialValue:n.initialValue},{rules:[{required:n.required,message:Ft}]})(r.a.createElement(pr.a,{disabled:n.disabled?n.disabled:e.state.disabled},n.follow)));case I:return r.a.createElement(Fr,Object.assign({key:n.key},t,{label:n.label,extra:n.extra}),a(n.key,e.fieldDecorators(n,e.state.formData))(r.a.createElement(Er.a,{min:n.min,max:n.max,disabled:n.disabled?n.disabled:e.state.disabled})),r.a.createElement("span",{className:"ant-form-text"},n.follow));case C:return r.a.createElement(Fr,Object.assign({key:n.key,label:n.label},t,{extra:n.extra}),a(n.key,{initialValue:n.initialValue?Or()(n.initialValue):null,rules:[{required:n.required,message:Ft}]})(r.a.createElement(yr.a,{format:n.format})));case w:return r.a.createElement(Fr,Object.assign({key:n.key,label:n.label},t,{extra:n.extra}),a(n.key,{initialValue:n.initialValue?Or()(n.initialValue):null},{rules:[{required:n.required,message:Ft}]})(r.a.createElement(yr.a,{format:n.format,showTime:!0,onChange:function(e){return n.onChange?n.onChange(e):function(){}}})));case"textfield":return r.a.createElement("div",{key:n.key},r.a.createElement(Fr,Object.assign({key:n.key,label:n.label},t,{extra:n.extra}),a(n.key,e.fieldDecorators(n,e.state.formData))(r.a.createElement(Lr,{autosize:{minRows:n.minRows,maxRows:n.maxRows},placeholder:n.placeholder,disabled:n.disabled?n.disabled:e.state.disabled,onChange:e.inputChange}))));case"sms_field":return r.a.createElement("div",null,r.a.createElement(Fr,Object.assign({key:n.key,label:n.label},t,{extra:n.extra}),a(n.key,e.fieldDecorators(n,e.state.formData))(r.a.createElement(Lr,{autosize:{minRows:n.minRows,maxRows:n.maxRows},placeholder:n.placeholder,disabled:n.disabled?n.disabled:e.state.disabled})),n.options&&n.options.map((function(t){return r.a.createElement(fa.a,{color:"#108ee9",onClick:function(){return e.addSMSTag(n.key,t.value)}},t.label)}))));case"mail_field":return r.a.createElement("div",null,r.a.createElement(Fr,Object.assign({key:n.key,label:n.label},t,{extra:n.extra}),a(n.key,{initialValue:n.initialValue&&n.initialValue.length?n.initialValue:"",rules:[{required:n.required,message:Ft}]})(r.a.createElement("div",{style:{border:"1px solid #eee"}},r.a.createElement(jr.Editor,{editorState:e.state.editorState[n.key]?e.state.editorState[n.key]:n.initialValue?Ir.EditorState.createWithContent(Ir.ContentState.createFromBlockArray(Ar()(n.initialValue))):Ir.EditorState.createEmpty(),onEditorStateChange:function(t){return e.onEditorStateChange(n.key,t)}}))),n.options&&n.options.map((function(t){return r.a.createElement(fa.a,{color:"#108ee9",onClick:function(){return e.addMailTemplateTag(n.key,t.value)}},t.label)})),n.preview?r.a.createElement("div",null,r.a.createElement(sr.a,null,"Preview"),r.a.createElement("div",{style:{maxHeight:200,overflowY:"scroll"},dangerouslySetInnerHTML:{__html:"".concat(e.state.editorState[n.key]?wr()(Object(Ir.convertToRaw)(e.state.editorState[n.key].getCurrentContent())):n.initialValue)||""}}),r.a.createElement(sr.a,null)):null));case A:return r.a.createElement("div",null,r.a.createElement(Fr,Object.assign({key:n.key,label:n.label},t,{extra:n.extra}),a(n.key,{initialValue:n.initialValue&&n.initialValue.length?n.initialValue:"",rules:[]})(r.a.createElement("div",{style:{border:"1px solid #eee"}},r.a.createElement(jr.Editor,{editorState:e.state.editorState[n.key]?e.state.editorState[n.key]:n.initialValue?Ir.EditorState.createWithContent(Ir.ContentState.createFromBlockArray(Ar()(n.initialValue))):Ir.EditorState.createEmpty(),onEditorStateChange:function(t){return e.onEditorStateChange(n.key,t)}}))),n.preview?r.a.createElement("div",null,r.a.createElement(sr.a,null,"Preview"),r.a.createElement("div",{style:{maxHeight:200,overflowY:"scroll"},dangerouslySetInnerHTML:{__html:"".concat(e.state.editorState[n.key]?wr()(Object(Ir.convertToRaw)(e.state.editorState[n.key].getCurrentContent())):n.initialValue)||""}}),r.a.createElement(sr.a,null)):null));case M:return r.a.createElement(Fr,Object.assign({key:n.key,label:n.label},t,{extra:n.extra}),a(n.key,{initialValue:n.initialValue?Or()(n.initialValue,n.format):null,rules:[{required:n.required,message:Ft}]})(r.a.createElement(gr.a,{format:n.format})));case"colorpicker":return r.a.createElement(Fr,Object.assign({key:n.key,label:n.label},t,{extra:n.extra}),a(n.key,e.fieldDecorators(n,e.state.formData))(r.a.createElement("div",null,r.a.createElement(kr.a,{style:{width:"100%"},onChange:function(t){return e.colorChange(t,n.key)}}),e.state.colorPickerKey?r.a.createElement("div",{style:{margin:"10px",backgroundColor:e.state.colorPickerColor,height:"40px",width:"40px"}}):e.state.formData[n.key]?r.a.createElement("div",{style:{margin:"10px",backgroundColor:e.state.formData[n.key],height:"40px",width:"40px"}}):null)));case T:var i={name:"image",data:{name:"hello"},action:Vt("blogImage/"),headers:{authorization:"authorization-text"},onChange:function(e){"uploading"!==e.file.status&&console.log(e.file,e.fileList),"done"===e.file.status?N.a.success("".concat(e.file.name," file uploaded successfully")):"error"===e.file.status&&N.a.error("".concat(e.file.name," file upload failed."))}};return r.a.createElement(vr.a.Item,Object.assign({key:n.key},t,{label:n.label}),a(n.key,e.fieldDecorators(n,e.state.formData),{valuePropName:n.key})(r.a.createElement(fr.a,i,r.a.createElement(da.a,null,r.a.createElement(va.a,{type:"upload"})," Select File"),n.initialValue?r.a.createElement("img",{src:Bt(n.initialValue),style:{maxWidth:"100%"}}):null)),n.allowWebcam?r.a.createElement("span",{className:"ant-form-text"},r.a.createElement("a",{onClick:function(){return e.toggleWebCam(n.key,Math.random())}},"Open Webcam")):null,r.a.createElement(nr.a,{footer:null,onCancel:function(){return e.toggleWebCam(n.key,!1)},visible:!!e.state.webCamState[n.key],width:680,key:e.state.webCamState[n.key]},r.a.createElement(xr,{getScreenShot:function(t){return e.getImageandUpload(n.key,t)}})));case R:var l={name:"image",data:{name:"hello"},action:Vt("blogImage/"),headers:{authorization:"authorization-text"},onChange:function(e){"uploading"!==e.file.status&&console.log(e.file,e.fileList),"done"===e.file.status?N.a.success("".concat(e.file.name," file uploaded successfully")):"error"===e.file.status&&N.a.error("".concat(e.file.name," file upload failed."))}};return r.a.createElement(vr.a.Item,Object.assign({key:n.key},t,{label:n.label}),a(n.key,{valuePropName:n.key})(r.a.createElement(fr.a,l,r.a.createElement(da.a,null,r.a.createElement(va.a,{type:"upload"})," Select File"),n.initialValue&&n.initialValue.length?n.initialValue.map((function(e){return r.a.createElement("img",{src:e,style:{maxWidth:"100%"}})})):null)));case"country":return r.a.createElement(Fr,Object.assign({key:n.key},t,{label:n.label,extra:n.extra}),a(n.key,e.fieldDecorators(n,e.state.formData))(r.a.createElement(ga.a,{placeholder:n.placeholder,disabled:n.disabled?n.disabled:e.state.disabled,mode:n.mode?n.mode:"default",onChange:function(t){return e.setAddressField("country",t)}},e.state.countryOptions.map((function(e){return r.a.createElement(ga.a.Option,{value:e.id},e.name)})))));case"state":return r.a.createElement(Fr,Object.assign({key:n.key},t,{label:n.label,extra:n.extra}),a(n.key,e.fieldDecorators(n,e.state.formData))(r.a.createElement(ga.a,{placeholder:n.placeholder,disabled:n.disabled?n.disabled:e.state.disabled,mode:n.mode?n.mode:"default",onChange:function(t){return e.setAddressField("state",t)}},e.state.stateOptions.map((function(e){return r.a.createElement(ga.a.Option,{value:e.id},e.name)})))));case"email":return r.a.createElement(vr.a.Item,Object.assign({key:n.key},t,{label:n.label,extra:n.extra}),a(n.key,{initialValue:e.state.formData[n.key],rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:"Please input your E-mail!"}]})(r.a.createElement(ma.a,{placeholder:n.placeholder,disabled:n.disabled?n.disabled:e.state.disabled,onChange:e.inputChange})));case"city":return r.a.createElement(Fr,Object.assign({key:n.key},t,{label:n.label,extra:n.extra}),a(n.key,e.fieldDecorators(n,e.state.formData))(r.a.createElement(ga.a,{placeholder:n.placeholder,disabled:n.disabled?n.disabled:e.state.disabled,mode:n.mode?n.mode:"default"},e.state.cityOptions.map((function(e){return r.a.createElement(ga.a.Option,{value:e.id},e.name)})))));case"divider_field":return r.a.createElement(sr.a,{style:{margin:4}});case"label_field":return r.a.createElement(Fr,Object.assign({key:n.key},t,{label:n.label,extra:n.extra}),n.follow?r.a.createElement("span",{className:"ant-form-text"},n.follow):null);default:return null}})):null,r.a.createElement(Fr,t,r.a.createElement(da.a,{loading:e.state.loading,type:"primary",htmlType:"submit",style:{margin:5}},"Submit"),e.props.history?r.a.createElement(da.a,{style:{margin:5},onClick:function(){return e.props.history.goBack()}},"Cancel"):null)))}}]),t}(r.a.Component);function Br(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Hr(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Br(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Br(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var qr=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).loadData=function(){var e=Object(f.a)(a);Ut(Kt(Z,[a.props.active_practiceId]),(function(t){var a=!0,n={},r={};if(t.length&&t[0]){var i=t[0];rn.forEach((function(e){n[e]=i[e],r["is_two_sessions_".concat(e)]=i["is_two_sessions_".concat(e)]})),a=i.visting_hour_same_week,r.is_two_sessions=i.is_two_sessions}t.length?e.setState({timings:t[0],visting_hour_same_week:a,openPracticeDays:n,twoSessions:r,loading:!1}):(e.setState({timings:{},visting_hour_same_week:a,openPracticeDays:n,twoSessions:r,loading:!1}),Qt(D,"Doctors visit timing is empty"))}),(function(){}),{doctor:a.state.doctorId})},a.handleSubmit=function(e){var t=Object(f.a)(a);e.preventDefault(),a.props.form.validateFieldsAndScroll((function(e,n){if(!e){console.log(n);var r=Hr({},n);r.first_start_time&&(r.first_start_time=Or()(r.first_start_time).format("HH:mm")),r.first_end_time&&(r.first_end_time=Or()(r.first_end_time).format("HH:mm")),r.second_start_time&&(r.second_start_time=Or()(r.second_start_time).format("HH:mm")),r.second_end_time&&(r.second_end_time=Or()(r.second_end_time).format("HH:mm")),r.doctor=t.state.doctorId,rn.forEach((function(e){r["first_start_time_".concat(e)]&&(r["first_start_time_".concat(e)]=Or()(r["first_start_time_".concat(e)]).format("HH:mm")),r["first_end_time_".concat(e)]&&(r["first_end_time_".concat(e)]=Or()(r["first_end_time_".concat(e)]).format("HH:mm")),r["second_start_time_".concat(e)]&&(r["second_start_time_".concat(e)]=Or()(r["second_start_time_".concat(e)]).format("HH:mm")),r["second_end_time_".concat(e)]&&(r["second_end_time_".concat(e)]=Or()(r["second_end_time_".concat(e)]).format("HH:mm"))})),t.state.timings&&(r.id=t.state.timings.id);qt(Kt(Z,[a.props.active_practiceId]),r,(function(e){t.setState({loading:!0}),t.props.history.goBack(),t.props.loadData&&t.props.loadData(),Qt(O,"Doctor Timings Saved successfully!!")}),(function(){}))}}))},a.changeVistingHourSameWeek=function(e){console.log(e.target),a.setState(Object(u.a)({},e.target.id,e.target.checked))},a.changeOpenPracticeDays=function(e,t){a.setState((function(a){return{openPracticeDays:Hr({},a.openPracticeDays,Object(u.a)({},e,t))}}))},a.changePracticeTwoSessions=function(e,t){a.setState((function(a){return{twoSessions:Hr({},a.twoSessions,Object(u.a)({},e,t))}}))},a.state={doctorId:a.props.match.params.docId,timings:null,openPracticeDays:{},visting_hour_same_week:!0,twoSessions:{},loading:!0},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.state.doctorId&&this.loadData()}},{key:"render",value:function(){var e=this;if(this.state.doctorId){if(this.state.timings){var t=this,a=this.props.formLayout?this.props.formLayout:{labelCol:{span:12},wrapperCol:{span:12}},n=this.props.form.getFieldDecorator;return r.a.createElement("div",null,r.a.createElement(cr.a,{loading:this.state.loading},r.a.createElement(vr.a,{onSubmit:this.handleSubmit},r.a.createElement(vr.a.Item,Object.assign({key:"visting_hour_same_week"},a),n("visting_hour_same_week",{valuePropName:"checked",initialValue:!!t.state.timings&&t.state.visting_hour_same_week},{rules:[{message:Ft}]})(r.a.createElement(pr.a,{onChange:this.changeVistingHourSameWeek},"Visiting hours are  same for all working days in a week"))),r.a.createElement(sr.a,{style:{margin:4}}),this.state.visting_hour_same_week?r.a.createElement("div",null,r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:4}),r.a.createElement(ir.a,{span:18},r.a.createElement(vr.a.Item,Object.assign({key:"is_two_sessions"},a),n("is_two_sessions",{valuePropName:"checked",initialValue:!!t.state.timings&&(t.state.timings.is_two_sessions||t.state.twoSessions.is_two_sessions)},{rules:[{message:Ft}]})(r.a.createElement(pr.a,{onChange:function(t){return e.changePracticeTwoSessions("is_two_sessions",t.target.checked)}},"Practice operates in two sessions."))),r.a.createElement(rr.a,{gutter:16},r.a.createElement(ir.a,{span:12},r.a.createElement(vr.a.Item,Object.assign({key:"first_start_time",label:"Practice Starts At"},a),n("first_start_time",{initialValue:t.state.timings&&t.state.timings.first_start_time?Or()(t.state.timings.first_start_time,"HH:mm"):null,rules:[{required:!0,message:Ft}]})(r.a.createElement(gr.a,{format:"HH:mm"})))),t.state.twoSessions.is_two_sessions?r.a.createElement("div",null,r.a.createElement(ir.a,{span:12},r.a.createElement(vr.a.Item,Object.assign({key:"first_end_time",label:"Lunch At"},a),n("first_end_time",{initialValue:t.state.timings&&t.state.timings.first_end_time?Or()(t.state.timings.first_end_time,"HH:mm"):null,rules:[{required:!0,message:Ft}]})(r.a.createElement(gr.a,{format:"HH:mm"})))),r.a.createElement(ir.a,{span:12},r.a.createElement(vr.a.Item,Object.assign({key:"second_start_time",label:"Resume At"},a),n("second_start_time",{initialValue:t.state.timings&&t.state.timings.second_start_time?Or()(t.state.timings.second_start_time,"HH:mm"):null,rules:[{required:!0,message:Ft}]})(r.a.createElement(gr.a,{format:"HH:mm"}))))):null,r.a.createElement(ir.a,{span:12},r.a.createElement(vr.a.Item,Object.assign({key:"second_end_time",label:"Practice Ends At"},a),n("second_end_time",{initialValue:t.state.timings&&t.state.timings.second_end_time?Or()(t.state.timings.second_end_time,"HH:mm"):null,rules:[{required:!0,message:Ft}]})(r.a.createElement(gr.a,{format:"HH:mm"}))))))),r.a.createElement(sr.a,{style:{margin:4}})):rn.map((function(i){return r.a.createElement("div",{key:i},r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:4},r.a.createElement("h4",null,i.replace(/^\w/,(function(e){return e.toUpperCase()})))),r.a.createElement(ir.a,{span:18},r.a.createElement(vr.a.Item,Object.assign({key:"".concat(i)},a),n("".concat(i),{valuePropName:"checked",initialValue:!!t.state.timings&&(t.state.timings["".concat(i)]||t.state.openPracticeDays[i])},{rules:[{message:Ft}]})(r.a.createElement(pr.a,{onChange:function(e){return t.changeOpenPracticeDays(i,e.target.checked)}},"Practice is open on ".concat(i.replace(/^\w/,(function(e){return e.toUpperCase()})))))),t.state.openPracticeDays[i]?r.a.createElement("div",null,r.a.createElement(vr.a.Item,Object.assign({key:"is_two_sessions_".concat(i)},a),n("is_two_sessions_".concat(i),{valuePropName:"checked",initialValue:!!t.state.timings&&(t.state.timings["is_two_sessions_".concat(i)]||t.state.twoSessions["is_two_sessions_".concat(i)])},{rules:[{message:Ft}]})(r.a.createElement(pr.a,{onChange:function(t){return e.changePracticeTwoSessions("is_two_sessions_".concat(i),t.target.checked)}},"Practice operates in two sessions."))),r.a.createElement(rr.a,{gutter:16},r.a.createElement(ir.a,{span:12},r.a.createElement(vr.a.Item,Object.assign({key:"first_start_time_".concat(i),label:"Practice Starts At"},a),n("first_start_time_".concat(i),{initialValue:t.state.timings&&t.state.timings["first_start_time_".concat(i)]?Or()(t.state.timings["first_start_time_".concat(i)],"HH:mm"):null,rules:[{required:!0,message:Ft}]})(r.a.createElement(gr.a,{format:"HH:mm"})))),t.state.twoSessions["is_two_sessions_".concat(i)]?r.a.createElement("div",null,r.a.createElement(ir.a,{span:12},r.a.createElement(vr.a.Item,Object.assign({key:"first_end_time_".concat(i),label:"Lunch At"},a),n("first_end_time_".concat(i),{initialValue:t.state.timings&&t.state.timings["first_end_time_".concat(i)]?Or()(t.state.timings["first_end_time_".concat(i)],"HH:mm"):null,rules:[{required:!0,message:Ft}]})(r.a.createElement(gr.a,{format:"HH:mm"})))),r.a.createElement(ir.a,{span:12},r.a.createElement(vr.a.Item,Object.assign({key:"second_start_time_".concat(i),label:"Resume At"},a),n("second_start_time_".concat(i),{initialValue:t.state.timings&&t.state.timings["second_start_time_".concat(i)]?Or()(t.state.timings["second_start_time_".concat(i)],"HH:mm"):null,rules:[{required:!0,message:Ft}]})(r.a.createElement(gr.a,{format:"HH:mm"}))))):null,r.a.createElement(ir.a,{span:12},r.a.createElement(vr.a.Item,Object.assign({key:"second_end_time_".concat(i),label:"Practice Ends At"},a),n("second_end_time_".concat(i),{initialValue:t.state.timings&&t.state.timings["second_end_time_".concat(i)]?Or()(t.state.timings["second_end_time_".concat(i)],"HH:mm"):null,rules:[{required:!0,message:Ft}]})(r.a.createElement(gr.a,{format:"HH:mm"})))))):null)),r.a.createElement(sr.a,{style:{margin:4}}))})),r.a.createElement(vr.a.Item,a,r.a.createElement(da.a,{loading:t.state.loading,type:"primary",htmlType:"submit",style:{margin:5}},"Submit"),t.props.history?r.a.createElement(da.a,{style:{margin:5},onClick:function(){return t.props.history.goBack()}},"Cancel"):null))))}return r.a.createElement(cr.a,{loading:!0})}return r.a.createElement(y.a,{to:"/settings/clinics-staff"})}}]),t}(r.a.Component),zr=vr.a.create()(qr),Gr=a(544),Ur=a.n(Gr),Wr=(a(1216),function(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n="",r=[];return a&&(e.forEach((function(e){r.push(e)})),n+=r.join(","),n+="\r\n"),t.forEach((function(t){r=[],e.forEach((function(e){t[e]?r.push(t[e]):r.push("--")})),n+=r.join(","),n+="\r\n"})),n}),Kr=function(e,t){var a,n=t+".csv",r=[];r.push(255,254);for(var i=0;i<e.length;++i)a=e.charCodeAt(i),r.push(255&a),r.push(a/256>>>0);var l=new Blob([new Uint8Array(r)],{type:"text/csv;charset=UTF-16LE;"});if(navigator.msSaveBlob)navigator.msSaveBlob(l,n);else{var o=document.createElement("a");if(void 0!==o.download){var s=window.URL.createObjectURL(l);o.setAttribute("href",s),o.setAttribute("download",n),o.style.visibility="hidden",document.body.appendChild(o),o.click(),document.body.removeChild(o),window.URL.revokeObjectURL(s)}}};function Qr(e){e.line(10,20,200,20)}function Zr(e){e.line(10,270,200,270),e.setFontSize(8),e.text(10,275,"This is a computer generated report.")}var Xr=a(827),Jr=a.n(Xr);function $r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ei(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?$r(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):$r(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ti=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).getColumnSearchProps=function(e){return{filterDropdown:function(t){var n=t.setSelectedKeys,i=t.selectedKeys,l=t.confirm,o=t.clearFilters;return r.a.createElement("div",{style:{padding:8}},r.a.createElement(ma.a,{ref:function(e){a.searchInput=e},placeholder:"Search ".concat(e),value:i[0],onChange:function(e){return n(e.target.value?[e.target.value]:[])},onPressEnter:function(){return a.handleSearch(i,l)},style:{width:188,marginBottom:8,display:"block"}}),r.a.createElement(da.a,{type:"primary",onClick:function(){return a.handleSearch(i,l)},icon:"search",size:"small",style:{width:90,marginRight:8}},"Search"),r.a.createElement(da.a,{onClick:function(){return a.handleReset(o)},size:"small",style:{width:90}},"Reset"))},filterIcon:function(e){return r.a.createElement(va.a,{type:"search",style:{color:e?"#1890ff":void 0}})},onFilter:function(t,a){return null!=a[e]?a[e].toString().toLowerCase().includes(t.toLowerCase()):""},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){return a.searchInput.select()}))},render:function(e){return r.a.createElement(Jr.a,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[a.state.searchText],autoEscape:!0,textToHighlight:e?e.toString():""})}}},a.handleSearch=function(e,t){t(),a.setState({searchText:e[0]})},a.handleReset=function(e){e(),a.setState({searchText:""})},a.state=ei({},e,{searchText:""}),a.excelExport=a.excelExport.bind(Object(f.a)(a)),a.pdfExport=a.pdfExport.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.columns==this.state.columns&&e.dataSource==this.state.dataSource&&e.loading==this.state.loading||this.setState(ei({},e))}},{key:"pdfExport",value:function(){var e=this,t=[];e.state.columns.forEach((function(e){e.hideExport||t.push({title:e.title,dataKey:e.title})}));var a=[];e.state.dataSource.forEach((function(t,n){var r={};e.state.columns.forEach((function(e){e.export?r[e.title]=e.export(t[e.dataIndex],t,n):r[e.title]=t[e.dataIndex]})),a.push(r)})),function(e,t,a){!(arguments.length>3&&void 0!==arguments[3])||arguments[3];var n=new Ur.a("p","mm","a4");Qr(n);var r=Object.create(t);n.autoTable(e,r,{margin:{top:35},startY:n.autoTableEndPosY()+20,headerStyle:{overflow:"linebreak"},bodyStyles:{overflow:"linebreak"}}),Zr(n),n.save(a+".pdf")}(t,a,"Export"+Or()(),!0)}},{key:"excelExport",value:function(){var e=this,t=[];e.state.columns.forEach((function(e){e.hideExport||t.push(e.title)}));var a=[];e.state.dataSource.forEach((function(t,n){var r={};e.state.columns.forEach((function(e){e.export?r[e.title]=e.export(t[e.dataIndex],t,n):r[e.title]=t[e.dataIndex]})),a.push(r)})),function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"download",n=Wr(e,t);Kr(n,a)}(t,a,"Export"+Or()())}},{key:"render",value:function(){var e=this,t=this.state.columns.map((function(t){return t.render?ei({},t):ei({},t,{},e.getColumnSearchProps(t.dataIndex))}));return r.a.createElement("div",null,this.props.hideReport?null:r.a.createElement(rr.a,null,r.a.createElement(ir.a,null,r.a.createElement(da.a.Group,{size:"small"},r.a.createElement(da.a,{disabled:this.state.loading,type:"primary",onClick:this.excelExport},r.a.createElement(va.a,{type:"file-excel"})," Excel"),r.a.createElement(da.a,{disabled:this.state.loading,type:"primary",onClick:this.pdfExport},r.a.createElement(va.a,{type:"file-pdf"})," PDF")))),r.a.createElement(rr.a,null,r.a.createElement(lr.a,Object.assign({pagination:{position:"both",pageSizeOptions:["10","20","30","40","50","100"],showSizeChanger:!0,showQuickJumper:!0,size:"small",showTotal:function(e,t){return r.a.createElement(fa.a,null,"Showing ",r.a.createElement("b",null,t[0])," to ",r.a.createElement("b",null,t[1])," of ",r.a.createElement("b",null,e)," items")}}},this.state,{columns:t}))))}}]),t}(r.a.Component);function ai(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ni(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ai(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ai(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ri=lr.a.Column,ii=(lr.a.ColumnGroup,hr.a.TabPane),li=nr.a.confirm;function oi(e){return Or()(e,"HH:mm").format("HH:mm")}var si=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).getAllPermissions=function(){var e=Object(f.a)(a);Ut(X,(function(t){e.setState({allPermissions:t.practice_permissions,allGlobalPermissions:t.global_permissions})}),(function(){}))},a.handleClick=function(e){a.setState({current:e.key})},a.loadDoctorsTiming=function(){var e=Object(f.a)(a),t=e.state.practice_doctors.map((function(e){return e.id}));Ut(Kt(Z,[a.props.active_practiceId]),(function(t){e.setState((function(e){var a={};return t.forEach((function(e){a[e.doctor.id]=e})),{doctorsTiming:a}}))}),(function(){}),{doctor:t.join(",")})},a.changeTab=function(e){a.setState({defaultActiveTab:e}),a.props.history.push("/settings/clinics-staff"+e)},a.toggleEnableStaffPractice=function(e,t){var n=Object(f.a)(a);qt(Kt(Q,[e]),{practice:n.props.active_practiceId,is_active:!!t},(function(e){Qt(O,t?"Staff enabled for this practice successfully!!":"Staff disabled for this practice successfully!!"),n.admin_StaffData()}),(function(){}))},a.toggleAllPermissions=function(e,t){var n=Object(f.a)(a),r=[];"LOCAL"==e&&n.state.allPermissions.forEach((function(e){var a={name:e.name,codename:e.codename,is_active:!!t,practice:n.props.active_practiceId,staff:n.state.currentUser};n.state.editPermissions[e.codename]&&(a.id=n.state.editPermissions[e.codename].id),r.push(a)})),"GLOBAL"==e&&n.state.allGlobalPermissions.forEach((function(e){var a={name:e.name,codename:e.codename,is_active:!!t,practice:n.props.active_practiceId,staff:n.state.currentUser};n.state.editPermissions[e.codename]&&(a.id=n.state.editPermissions[e.codename].id),r.push(a)}));var i=function(e){n.editPermissions(n.state.currentUser),n.setState({bulkEditLoading:!1})},l=function(){n.setState({bulkEditLoading:!1})};li({title:"Are you sure to select all permissions for this user?",onOk:function(){n.setState({bulkEditLoading:e}),qt(J,{permissions:r},i,l)},onCancel:function(){return!1}})},a.state={current:"staff",practice_staff:[],practice_doctors:[],roles:null,permissionEditModal:!1,editPermissions:{},allPermissions:[],allGlobalPermissions:[],loading:!0,defaultActiveTab:a.props.location.hash,doctorsTiming:{},bulkEditLoading:!1},a.setPermission=a.setPermission.bind(Object(f.a)(a)),a.staffRoles(),a.loadData=a.loadData.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.getAllPermissions(),this.loadData()}},{key:"setPermission",value:function(e,t,a,n){var r=this,i=a.target.checked;if(this.setState((function(t){var a=ni({},t.editPermissions[e]);return a.loading=!0,{editPermissions:ni({},t.editPermissions,Object(u.a)({},e,a))}})),i){var l={name:t,codename:e,is_active:!0,practice:n?r.props.active_practiceId:null,staff:r.state.currentUser};qt("user_permissions/",l,(function(t){r.setState((function(a){return{editPermissions:ni({},a.editPermissions,Object(u.a)({},e,t))}}))}),(function(){}))}else if(r.state.editPermissions[e].id){Gt(Kt("user_permissions/%s/",[r.state.editPermissions[e].id]),{is_active:!1},(function(e){r.setState((function(t){return{editPermissions:ni({},t.editPermissions,Object(u.a)({},e.codename,void 0))}}))}),(function(){}))}}},{key:"editPermissions",value:function(e){var t=this;if(!e)return t.setState({permissionEditModal:!1}),!0;t.setState({permissionEditModal:!0,editPermissions:[],currentUser:e});Ut(Kt("user_permissions/?staff=%s&practice=%s",[e,t.props.active_practiceId]),(function(e){var a={};e.forEach((function(e){a[e.codename]=e})),t.setState({editPermissions:a})}),(function(){}))}},{key:"loadData",value:function(){this.admin_StaffData()}},{key:"deleteStaff",value:function(e){var t=this;Ht(Kt("staff/%s/",[e]),{is_active:!1},(function(e){t.loadData()}),(function(){}))}},{key:"staffRoles",value:function(){var e=this;Ut("staff/roles/",(function(t){e.setState({roles:t})}),(function(){}))}},{key:"admin_StaffData",value:function(){var e=this;Ut(Kt(K,[this.props.active_practiceId]),(function(t){var a=[],n=[];t.staff.forEach((function(e){"3"==e.role?a.push(ni({},e.user,{},e)):n.push(ni({},e.user,{},e))})),e.setState({practice_doctors:a,practice_staff:n,loading:!1},(function(){e.loadDoctorsTiming()}))}),(function(){e.setState({loading:!1})}),{all:!0})}},{key:"clinicData",value:function(){var e=ia(),t=(Object.keys(e),this);Ut(Kt(K,[this.props.active_practiceId]),(function(e){var a=[],n=[];e.staff.forEach((function(e){"3"==e.role?a.push(ni({},e.user,{},e)):n.push(ni({},e.user,{},e))})),t.setState({practice_doctors:a,practice_staff:n},(function(){t.loadDoctorsTiming()}))}),(function(){}))}},{key:"render",value:function(){var e=this,t=this,a=[{title:"Name",dataIndex:"first_name",key:"first_name"},{title:"Email",dataIndex:"email",key:"email",render:function(e,t){return t.user&&t.user.is_active?t.user.email:e}},{title:"Mobile",dataIndex:"mobile",key:"mobile"},{title:"Registration Number",dataIndex:"registration_number",key:"registration_number"},{title:"Enable Staff",dataIndex:"in_practice",key:"enable_staff",render:function(e,a){return a.user&&a.user.is_superuser?r.a.createElement(fa.a,{color:"red"},"Not Allowed"):r.a.createElement(mr.a,{defaultChecked:!!e,onChange:function(e){return t.toggleEnableStaffPractice(a.id,e)}})}},{title:"Last Login",key:"user",render:function(e,t){return t.user&&t.user.is_active?t.user.last_login?Or()(t.user.last_login).fromNow():"--":r.a.createElement(fa.a,{color:"#f50"},"Activation Pending")}},{title:"Action",key:"action",render:function(e,a){return r.a.createElement("span",null,r.a.createElement(Da.b,{to:"/settings/clinics-staff/"+a.id+"/edit"},r.a.createElement("a",null,"Edit")),r.a.createElement(sr.a,{type:"vertical"}),a.user&&a.user.is_superuser?r.a.createElement(fa.a,{color:"red"},"SuperUser"):r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{onClick:function(){return t.editPermissions(a.id)},disabled:!a.in_practice},"Permissions"),r.a.createElement(sr.a,{type:"vertical"}),r.a.createElement(or.a,{title:"Are you sure delete this staff?",onConfirm:function(){return t.deleteStaff(a.id)},okText:"Yes",cancelText:"No"},r.a.createElement("a",null,"Delete"))))}}],n=[{title:"Name",dataIndex:"first_name",key:"name"},{title:"Email",dataIndex:"email",key:"email",render:function(e,t){return t.user&&t.user.is_active?t.user.email:e}},{title:"Mobile",dataIndex:"mobile",key:"mobile"},{title:"Enable Staff",dataIndex:"in_practice",key:"enable_staff",render:function(e,a){return a.user&&a.user.is_superuser?r.a.createElement(fa.a,{color:"red"},"Not Allowed"):r.a.createElement(mr.a,{defaultChecked:!!e,onChange:function(e){return t.toggleEnableStaffPractice(a.id,e)}})}},{title:"Last Login",key:"user",render:function(e,t){return t.user&&t.user.is_active?t.user.last_login?Or()(t.user.last_login).fromNow():"--":r.a.createElement(fa.a,{color:"#f50"},"Activation Pending")}},{title:"Action",key:"action",render:function(e,a){return r.a.createElement("span",null,r.a.createElement(Da.b,{to:"/settings/clinics-staff/staff/"+a.id+"/edit"},r.a.createElement("a",null,"Edit")),r.a.createElement(sr.a,{type:"vertical"}),a.user&&a.user.is_superuser?r.a.createElement(fa.a,{color:"red"},"SuperUser"):r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{onClick:function(){return t.editPermissions(a.id)},disabled:!a.in_practice},"Permissions"),r.a.createElement(sr.a,{type:"vertical"}),r.a.createElement(or.a,{title:"Are you sure delete this staff?",onConfirm:function(){return t.deleteStaff(a.id)},okText:"Yes",cancelText:"No"},r.a.createElement("a",null,"Delete"))))}}],i=[{title:"Name",dataIndex:"user.first_name",key:"name"},{title:"Confirmation SMS",dataIndex:"confirmation_sms",key:"confirmation_sms",render:function(e){return r.a.createElement("span",null,r.a.createElement(pr.a,{checked:e}))}},{title:"Schedule SMS",dataIndex:"schedule_sms",key:"schedule_sms",render:function(e){return r.a.createElement("span",null,r.a.createElement(pr.a,{checked:e}))}},{title:"Confirmation EMAIL",dataIndex:"confirmation_email",key:"confirmation_email",render:function(e){return r.a.createElement("span",null,r.a.createElement(pr.a,{checked:e}))}},{title:"Online Appointment SMS",dataIndex:"online_appointment_sms",key:"online_appointment_sms",render:function(e){return r.a.createElement(pr.a,{checked:e})}},{title:"Action",key:"action",render:function(e,t){return r.a.createElement("span",null,r.a.createElement(Da.b,{to:"/settings/clinics-staff/"+t.id+"/edit"},r.a.createElement("a",null,"Edit")))}}],l=[{title:"Name",dataIndex:"user.first_name",key:"name"},{title:"Confirmation SMS",dataIndex:"confirmation_sms",key:"confirmation_sms",render:function(e){return r.a.createElement("span",null,r.a.createElement(pr.a,{checked:e}))}},{title:"Schedule SMS",dataIndex:"schedule_sms",key:"schedule_sms",render:function(e){return r.a.createElement("span",null,r.a.createElement(pr.a,{checked:e}))}},{title:"Confirmation EMAIL",dataIndex:"confirmation_email",key:"confirmation_email",render:function(e){return r.a.createElement("span",null,r.a.createElement(pr.a,{checked:e}))}},{title:"Online Appointment SMS",dataIndex:"online_appointment_sms",key:"online_appointment_sms",render:function(e){return r.a.createElement(pr.a,{checked:e})}},{title:"Action",key:"action",render:function(e,t){return t.user&&t.is_superuser?r.a.createElement(fa.a,null," Not Allowed"):r.a.createElement("span",null,r.a.createElement(Da.b,{to:"/settings/clinics-staff/staff/"+t.id+"/edit"},r.a.createElement("a",null,"Edit")))}}];return r.a.createElement(rr.a,null,r.a.createElement("h2",null,"Practice Staff"),r.a.createElement(y.d,null,r.a.createElement(y.b,{path:"/settings/clinics-staff/:docId/edit-timing",render:function(a){return r.a.createElement(zr,Object.assign({},e.props,a,{loadData:t.loadData}))}}),r.a.createElement(y.b,null,r.a.createElement(cr.a,null,r.a.createElement(hr.a,{defaultActiveKey:this.state.defaultActiveTab,onChange:this.changeTab},r.a.createElement(ii,{tab:r.a.createElement("span",null,r.a.createElement(va.a,{type:"user-add"}),"Manage Staff"),key:"#staff"},r.a.createElement("h2",null,"Doctors",r.a.createElement(Da.b,{to:"/settings/clinics-staff/adddoctor"},r.a.createElement(da.a,{type:"primary",style:{float:"right"}},r.a.createElement(va.a,{type:"plus"}),"\xa0Add Doctor")),r.a.createElement(Da.b,{to:"/settings/clinics-staff/addstaff"},r.a.createElement(da.a,{type:"primary",style:{float:"right",marginRight:"5px"}},r.a.createElement(va.a,{type:"plus"}),"\xa0Add Staff"))),r.a.createElement(ti,{loading:this.state.loading,pagination:!1,columns:a,dataSource:this.state.practice_doctors}),r.a.createElement(sr.a,null),r.a.createElement("h2",null,"Staff "),r.a.createElement(ti,{loading:this.state.loading,pagination:!1,columns:n,dataSource:this.state.practice_staff})),r.a.createElement(ii,{tab:r.a.createElement("span",null,r.a.createElement(va.a,{type:"team"}),"Staff Notification"),key:"#notification"},r.a.createElement("h2",null,"Doctors"),r.a.createElement(lr.a,{loading:this.state.loading,pagination:!1,columns:i,dataSource:this.state.practice_doctors}),r.a.createElement(sr.a,null),r.a.createElement("h2",null,"Staff"),r.a.createElement(lr.a,{loading:this.state.loading,pagination:!1,columns:l,dataSource:this.state.practice_staff})),r.a.createElement(ii,{tab:r.a.createElement("span",null,r.a.createElement(va.a,{type:"schedule"}),"Doctors visit Timing"),key:"#timing"},r.a.createElement(lr.a,{loading:this.state.loading,dataSource:this.state.practice_doctors},r.a.createElement(ri,{title:"Name",dataIndex:"user.first_name",key:"name"}),r.a.createElement(ri,{title:"Visit Timing",dataIndex:"loginstatus",key:"VisitTiming",render:function(e,a){return function(e){if(e)return e.visting_hour_same_week?r.a.createElement("span",null,r.a.createElement("b",null,"Mon-Sun : "),oi(e.first_start_time),e.is_two_sessions?"-"+oi(e.first_end_time)+" ||LUNCH|| "+oi(e.second_start_time):null,"-",oi(e.second_end_time)):rn.map((function(t){return e[t]?r.a.createElement("span",null,r.a.createElement("b",null,t," : "),oi(e["first_start_time_".concat(t)]),e["is_two_sessions_".concat(t)]?"-"+oi(e["first_end_time_".concat(t)])+"||LUNCH||"+oi(e["second_start_time_".concat(t)]):null,"-",oi(e["second_end_time_".concat(t)]),r.a.createElement("br",null)):null}));return null}(t.state.doctorsTiming[a.id])}}),r.a.createElement(ri,{title:"Action",key:"action",render:function(e,t){return r.a.createElement(Da.b,{to:"/settings/clinics-staff/"+t.id+"/edit-timing"},r.a.createElement("a",null,"Edit Timing"))}})))),r.a.createElement(nr.a,{title:"Edit Permissions",visible:this.state.permissionEditModal,onCancel:function(){return e.editPermissions()},footer:null},r.a.createElement(pa.a,{spinning:"LOCAL"==this.state.bulkEditLoading},r.a.createElement(rr.a,null,r.a.createElement("h3",null,r.a.createElement(pr.a,{checked:t.state.allPermissions.length&&t.state.allPermissions.reduce((function(e,a){return e&&a&&t.state.editPermissions[e.codename]&&t.state.editPermissions[a.codename]})),onClick:function(t){return e.toggleAllPermissions("LOCAL",t.target.checked)}},"Select All Permissions"))),t.state.allPermissions.map((function(a){return r.a.createElement(rr.a,null,r.a.createElement(pr.a,{value:a.codename,checked:t.state.editPermissions[a.codename],disabled:t.state.editPermissions[a.codename]&&t.state.editPermissions[a.codename].loading,onClick:function(t){return e.setPermission(a.codename,a.name,t,!0)}},a.id," ",a.name))}))),r.a.createElement(sr.a,null,"Global Permissions"),r.a.createElement(pa.a,{spinning:"GLOBAL"==this.state.bulkEditLoading},r.a.createElement(rr.a,null,r.a.createElement("h3",null,r.a.createElement(pr.a,{checked:t.state.allGlobalPermissions.length&&t.state.allGlobalPermissions.reduce((function(e,a){return e&&a&&t.state.editPermissions[e.codename]&&t.state.editPermissions[a.codename]})),onClick:function(t){return e.toggleAllPermissions("GLOBAL",t.target.checked)}},"Select All Permissions"))),t.state.allGlobalPermissions.map((function(a){return r.a.createElement(rr.a,null,r.a.createElement(pr.a,{value:a.codename,checked:t.state.editPermissions[a.codename],disabled:t.state.editPermissions[a.codename]&&t.state.editPermissions[a.codename].loading,onClick:function(t){return e.setPermission(a.codename,a.name,t,!1)},style:{display:"list-item"}},a.id," ",a.name))}))))))))}}]),t}(r.a.Component),ci=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={redirect:!1,editStaff:null,roles:[]},a.changeRedirect=a.changeRedirect.bind(Object(f.a)(a)),a.loadEditPracticeStaff=a.loadEditPracticeStaff.bind(Object(f.a)(a)),a.props.match.params.doctorid&&a.loadEditPracticeStaff(),a.staffRoles(),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"staffRoles",value:function(){var e=this;Ut("staff/roles/",(function(t){e.setState({roles:t})}),(function(){}))}},{key:"loadEditPracticeStaff",value:function(){var e=this.props.match.params.doctorid;console.log(e);var t=this;Ut(Kt("staff/%s/",[e]),(function(e){t.setState({editStaff:e})}),(function(){t.setState({})}))}},{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"render",value:function(){var e=this,t=this;console.log("props",t.props);var a,n=[{label:"Doctor",key:"user.first_name",required:!0,placeholder:"Doctor Name",initialValue:this.state.editStaff?this.state.editStaff.user.first_name:null,type:S},{label:"Mobile Number",key:"user.mobile",placeholder:"Mobile Number",required:!0,initialValue:this.state.editStaff?this.state.editStaff.user.mobile:null,type:S,disabled:!!this.state.editStaff},{label:"Email Id",key:"user.email",placeholder:"Email Id",required:!0,disabled:!!this.state.editStaff,initialValue:this.state.editStaff?this.state.editStaff.user.email:null,type:"email"},{label:"Registration Number",key:"registration_number",placeholder:"Registration Number",initialValue:this.state.editStaff?this.state.editStaff.registration_number:null,type:S},{label:"Calendar Colour",key:"calendar_colour",initialValue:this.state.editStaff?this.state.editStaff.calendar_colour:null,type:"colorpicker",required:!0},{label:"Schedule SMS",key:"schedule_sms",initialValue:!!this.state.editStaff&&this.state.editStaff.schedule_sms,type:"singlecheckbox"},{label:"Confirmation SMS",key:"confirmation_sms",initialValue:!!this.state.editStaff&&this.state.editStaff.confirmation_sms,type:"singlecheckbox"},{label:"Confirmation Email",key:"confirmation_email",initialValue:!!this.state.editStaff&&this.state.editStaff.confirmation_email,type:"singlecheckbox"},{label:"Online Appointment SMS",key:"online_appointment_sms",initialValue:!!this.state.editStaff&&this.state.editStaff.online_appointment_sms,type:"singlecheckbox"}],i={successFn:function(e){Qt(O,"success"),console.log("all data",e),t.setState({redirect:!0}),t.props.loadData()},errorFn:function(){},action:"staff/",method:"post"};this.state.editStaff&&(a={successFn:function(e){Qt(O,"success"),t.setState({redirect:!0}),t.props.loadData()},errorFn:function(){},action:Kt("staff/%s/",[t.props.match.params.doctorid]),method:"put"});var l=[{key:"role",value:[3]}],o=vr.a.create()(Vr);return r.a.createElement(rr.a,null,r.a.createElement(cr.a,null,r.a.createElement(y.b,{exact:!0,path:"/settings/clinics-staff/:doctorid/edit",render:function(t){return e.props.match.params.doctorid?r.a.createElement(o,Object.assign({defaultValues:l,title:"Edit Doctor",changeRedirect:e.changeRedirect,formProp:a,fields:n},t)):r.a.createElement(y.a,{to:"/settings/clinics-staff"})}}),r.a.createElement(y.b,{exact:!0,path:"/settings/clinics-staff/adddoctor",render:function(t){return r.a.createElement(o,Object.assign({defaultValues:l,changeRedirect:e.changeRedirect,title:"Add Doctor ",formProp:i,fields:n},t))}})),this.state.redirect&&r.a.createElement(y.a,{to:"/settings/clinics-staff"}))}}]),t}(r.a.Component),ui=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={redirect:!1,editStaff:null},a.changeRedirect=a.changeRedirect.bind(Object(f.a)(a)),a.loadEditPracticeStaff=a.loadEditPracticeStaff.bind(Object(f.a)(a)),a.props.match.params.staffid&&a.loadEditPracticeStaff(),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"loadEditPracticeStaff",value:function(){var e=this.props.match.params.staffid;console.log(e);var t=this;Ut(Kt("staff/%s/",[e]),(function(e){t.setState({editStaff:e})}),(function(){t.setState({})}))}},{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"render",value:function(){var e,t=this,a=this,n=[{label:"Staff Name",key:"user.first_name",required:!0,placeholder:"Staff Name",initialValue:this.state.editStaff?this.state.editStaff.user.first_name:null,type:S},{label:"Mobile Number",key:"user.mobile",placeholder:"Mobile Number",required:!0,initialValue:this.state.editStaff?this.state.editStaff.user.mobile:null,type:S,disabled:!!this.state.editStaff},{label:"Email Id",key:"user.email",placeholder:"Email Id",required:!0,disabled:!!this.state.editStaff,initialValue:this.state.editStaff?this.state.editStaff.user.email:null,type:"email"},{label:"Role",key:"role",required:!0,initialValue:this.state.editStaff?this.state.editStaff.role:null,type:x,options:mn.map((function(e){return{label:e.label,value:[e.value]}}))},{label:"Schedule SMS",key:"schedule_sms",initialValue:!!this.state.editStaff&&this.state.editStaff.schedule_sms,type:"singlecheckbox"},{label:"Confirmation SMS",key:"confirmation_sms",initialValue:!!this.state.editStaff&&this.state.editStaff.confirmation_sms,type:"singlecheckbox"},{label:"Confirmation Email",key:"confirmation_email",initialValue:!!this.state.editStaff&&this.state.editStaff.confirmation_email,type:"singlecheckbox"},{label:"Online Appointment SMS",key:"online_appointment_sms",initialValue:!!this.state.editStaff&&this.state.editStaff.online_appointment_sms,type:"singlecheckbox"}],i={successFn:function(e){Qt(O,"success"),console.log("all data",e),a.setState({redirect:!0}),a.props.loadData()},errorFn:function(){},action:"staff/",method:"post"};this.state.editStaff&&(e={successFn:function(e){Qt(O,"success"),a.setState({redirect:!0}),a.props.loadData()},errorFn:function(){},action:Kt("staff/%s/",[a.props.match.params.staffid]),method:"put"});var l=[],o=vr.a.create()(Vr);return r.a.createElement(rr.a,null,r.a.createElement(cr.a,null,r.a.createElement(y.b,{exact:!0,path:"/settings/clinics-staff/staff/:staffid/edit",render:function(a){return t.props.match.params.staffid?r.a.createElement(o,Object.assign({defaultValues:l,title:"Edit Staff",changeRedirect:t.changeRedirect,formProp:e,fields:n},a)):r.a.createElement(y.a,{to:"/settings/clinics-staff"})}}),r.a.createElement(y.b,{exact:!0,path:"/settings/clinics-staff/addstaff",render:function(e){return r.a.createElement(o,Object.assign({defaultValues:l,changeRedirect:t.changeRedirect,title:"Add Staff ",formProp:i,fields:n},e))}})),this.state.redirect&&r.a.createElement(y.a,{to:"/settings/clinics-staff"}))}}]),t}(r.a.Component);function di(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function pi(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?di(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):di(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var mi=function(e){Ut(Kt(K,[e.props.active_practiceId]),(function(t){var a=[],n={};t.staff.forEach((function(t){(t.role.indexOf(parseInt("3"))>-1||t.role.indexOf("3")>-1)&&(a.push(t),e.props.user.id==t.user.id&&(n=t))})),e.setState({practiceDoctors:a,selectedDoctor:a.length&&!n.id?a[0]:n})}),(function(){}))},hi=r.a.createElement(_a.a,null,r.a.createElement(_a.a.Item,{key:"1"},r.a.createElement(Da.b,{to:"/settings/prescriptions"},"Add/Edit Drugs")),r.a.createElement(_a.a.Item,{key:"2"},r.a.createElement(Da.b,{to:"/settings/procedures"},"Add/Edit Procedures")),r.a.createElement(_a.a.Item,{key:"3"},r.a.createElement(Da.b,{to:"/settings/emr#treatmentnotes"},"Add/Edit Clinical Notes")),r.a.createElement(_a.a.Item,{key:"4"},r.a.createElement(Da.b,{to:"/settings/printout"},"Modify EMR/Billing Printout")),r.a.createElement(_a.a.Item,{key:"5"},r.a.createElement(Da.b,{to:"/settings/billing#taxcatalog"},"Add/Edit taxes")),r.a.createElement(_a.a.Item,{key:"6"},r.a.createElement(Da.b,{to:"/settings/billing#paymentmodes"},"Add/Edit Payment Modes"))),fi=function(e){for(var t=0,a=0;a<e.length;a++)t=((t=e.charCodeAt(a)+((t<<6)-t))>>6)+t;return t},gi=function(e){var t=(16777215&e).toString(16).toUpperCase();return"00000".substring(0,6-t.length)+t},yi=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=function(t){e.setState(pi({},t))},n=function(){},r=t.join(",");Ut("users/config/",a,n,{parameters:r})},Ei=function(e){Ut("/users/reports_mail/",(function(t){e.setState({mailingUsersList:t})}),(function(){}))},bi=function(e,t){Ut(e,(function(e){}),(function(){}),t)},vi=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state=Object(u.a)({redirect:!1,specialisations:null,countries:null},Gn,[]),a.changeRedirect=a.changeRedirect.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this;Ut("clinics/extra_data/",(function(t){var a={};t.specialisation.forEach((function(e){a[e.id]=e})),console.log(a),e.setState({specialisations:t.specialisation,countries:t.country})}),(function(){})),yi(this,[Gn])}},{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"render",value:function(){var e=[];this.state.specialisations&&this.state.specialisations.forEach((function(t){e.push({label:t.name,value:t.id})}));var t=[{label:"Practice Logo",key:"logo",type:T,allowWebcam:!1},{label:"Practice Name",key:"name",placeholder:"Practice Name",required:!0,type:S},{label:"Practice Tagline",key:"tagline",placeholder:"Practice Tagline",required:!0,type:S},{label:"Practice Specialisation",key:"specialisation",placeholder:"Practice Specialisation",type:S},{label:"Practice Street Address",key:"address",placeholder:"Practice Street Address",type:S},{label:"Practice Locality",key:"locality",placeholder:"Practice Locality",type:S},{label:"Practice Country",key:"country",placeholder:"Practice Country",type:S},{label:"Practice State",key:"state",placeholder:"Practice State",type:S},{label:"Practice City",key:"city",placeholder:"Practice City",type:S},{label:"Practice PINCODE",key:"pincode",placeholder:"Practice PINCODE",type:S},{label:"Practice Contact Number",key:"contact",placeholder:"Practice Contact Number",type:S},{label:"Practice Email",key:"email",placeholder:"Practice Email",type:"email"},{label:"SMS Language",key:"language",placeholder:"SMS Language",initialValue:this.props.activePracticeData.language?this.props.activePracticeData.language:[],type:x,options:this.state[Gn].map((function(e){return{label:e,value:e}}))},{label:"Practice Website",key:"website",placeholder:"Practice Website",type:S},{label:"GSTIN",key:"gstin",placeholder:"GSTIN",type:S},{label:"Invoice Prefix",placeholder:"DEL/INV/",key:"invoice_prefix",type:S,required:!0},{label:"Payment Prefix",placeholder:"DEL/RCPT/",key:"payment_prefix",type:S,required:!0},{label:"Return Prefix",placeholder:"DEL/RET/",key:"return_prefix",type:S,required:!0}],a={successFn:function(e){Qt(O,"success"),console.log(e)},errorFn:function(){},action:"clinics/",method:"post"},n=vr.a.create()(Vr);return r.a.createElement(rr.a,null,r.a.createElement(cr.a,null,r.a.createElement(n,Object.assign({title:"Practice Details",changeRedirect:this.changeRedirect,formProp:a,fields:t},this.props))),this.state.redirect&&r.a.createElement(y.a,{to:"/settings/clinics"}))}}]),t}(r.a.Component),_i=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={},a.loadWishSMS=a.loadWishSMS.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadWishSMS()}},{key:"loadWishSMS",value:function(){var e=this;Ut(Kt("clinics/%s/communications/",[this.props.active_practiceId]),(function(t){e.setState({wishsmsData:t[t.length-1]})}),(function(){}))}},{key:"render",value:function(){console.log("wishSMS",this.state.wishsmsData);var e=[{key:"birthday_wish_sms",initialValue:!!this.state.wishsmsData&&this.state.wishsmsData.birthday_wish_sms,type:"singlecheckbox",extra:"This SMS is sent to the Patient on the morning of their birthday",follow:r.a.createElement("b",null,"BIRTHDAY WISH SMS")},{key:"birthday_wish_text",placeholder:"{clinic}{patient}}",initialValue:this.state.wishsmsData?this.state.wishsmsData.birthday_wish_text:" ",minRows:4,type:"sms_field",options:Ra},{key:"anniversary_wish_sms",initialValue:!!this.state.wishsmsData&&this.state.wishsmsData.anniversary_wish_sms,type:"singlecheckbox",extra:"This SMS is sent to the Patient on the morning of their anniversary",follow:r.a.createElement("b",null,"ANNIVERSARY WISH SMS")},{key:"anniversary_wish_text",placeholder:"{anniversary}",initialValue:this.state.wishsmsData?this.state.wishsmsData.anniversary_wish_text:" ",minRows:4,type:"sms_field",options:Ra},{key:"online_appointment_sms",type:"singlecheckbox",initialValue:!!this.state.wishsmsData&&this.state.wishsmsData.online_appointment_sms,extra:"This SMS is sent to the Patient when they request an appointment on your practice marketing page",follow:r.a.createElement("b",null,"ONLINE APPOINTMENT SMS")},{key:"online_appointment_text",placeholder:"{online appointment}",initialValue:this.state.wishsmsData?this.state.wishsmsData.online_appointment_text:" ",minRows:4,type:"sms_field",options:Ra}],t={successFn:function(e){Qt(O,"success")},errorFn:function(){},action:Kt("clinics/%s/communications/",[this.props.active_practiceId]),method:"post"},a=[{key:"practice",value:this.props.active_practiceId},{key:"id",value:this.state.wishsmsData?this.state.wishsmsData.id:null}],n=vr.a.create()(Vr);return r.a.createElement("div",null,r.a.createElement(n,{formProp:t,defaultValues:a,fields:e}))}}]),t}(r.a.Component),Oi=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).handleChangeLanguage=function(e,t){var n=Object(f.a)(a);n.setState(Object(u.a)({},e,t),(function(){n.loadData()}))},a.state=Object(u.a)({redirect:!1,data:null,language:a.props.activePracticeData&&a.props.activePracticeData.language?a.props.activePracticeData.language:""},Gn,[]),a.loadData=a.loadData.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadData(),yi(this,[Gn])}},{key:"loadData",value:function(){var e=this,t={};e.state.language&&(t.language=e.state.language),Ut(Kt("clinics/%s/communications/",[this.props.active_practiceId]),(function(t){console.log("length",t.length-1),e.setState({data:t[t.length-1]})}),(function(){}),t)}},{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"render",value:function(){var e=this,t=this,a=[{label:"Contact Number",key:"contact_number",placeholder:"Contact Number",initialValue:this.state.data?this.state.data.contact_number:" ",extra:"Maximum 15 characters & represented as {{CLINICCONTACTNUMBER}}",type:S},{label:"Email",key:"email",placeholder:"Email Address",initialValue:this.state.data?this.state.data.email:" ",extra:"All replies by Patients for emails will be sent to this address",type:S},{label:"SMS clinic Name",key:"sms_clinic_name",placeholder:"Clinic Name",initialValue:this.state.data?this.state.data.sms_clinic_name:" ",extra:"{{CLINIC}} will use this name.",type:S},{key:"appointment_confirmation_sms",placeholder:"Appointment Confirmation SMS Text",initialValue:!!this.state.data&&this.state.data.appointment_confirmation_sms,type:"singlecheckbox",extra:"SMS is sent to the Patient on successfully adding an appointment",follow:r.a.createElement("b",null,"APPOINTMENT CONFIRMATION SMS")},{key:"appointment_confirmation_text",placeholder:"Appointment Cancellation SMS Text",initialValue:this.state.data?this.state.data.appointment_confirmation_text:null,minRows:4,type:"sms_field",options:Ra},{key:"appointment_cancellation_sms",initialValue:!!this.state.data&&this.state.data.appointment_cancellation_sms,type:"singlecheckbox",extra:"SMS is sent to the Patient when the appointment is cancelled",follow:r.a.createElement("b",null,"APPOINTMENT CANCELLATION SMS")},{key:"appointment_cancellation_text",placeholder:"Appointment Cancellation SMS Text",initialValue:this.state.data?this.state.data.appointment_cancellation_text:null,minRows:4,type:"sms_field",options:Ra},{key:"appointment_reminder_sms",placeholder:"Appointment Reminder SMS Text",initialValue:!!this.state.data&&this.state.data.appointment_reminder_sms,type:"singlecheckbox",extra:"This SMS is automatically sent to the Patient at selected time & date before the appointment.",follow:r.a.createElement("b",null,"APPOINTMENT REMINDER SMS")},{key:"appointment_reminder_text",placeholder:"Appointment Reminder SMS Text",initialValue:this.state.data?this.state.data.appointment_reminder_text:null,minRows:4,type:"sms_field",options:Ra},{key:"send_on_day_of_appointment",initialValue:!!this.state.data&&this.state.data.send_on_day_of_appointment,type:"singlecheckbox",follow:"Send reminder SMS on the day of appointment at 7:30 AM"},{key:"send_on_day_of_appointment",initialValue:!!this.state.data&&this.state.data.send_on_day_of_appointment,follow:"Send reminder SMS on the day before the appointment at",type:"singlecheckbox"},{key:"send_on_day_of_appointment_time",initialValue:this.state.data&&Or()(this.state.data.send_on_day_of_appointment_time).isValid()?Or()(this.state.data.send_on_day_of_appointment_time):null,type:M},{key:"follow_up_reminder_sms",initialValue:!!this.state.data&&this.state.data.follow_up_reminder_sms,type:"singlecheckbox",extra:"This SMS is sent to the Patient on the morning of the followup sms.",follow:r.a.createElement("b",null,"FOLLOW UP REMINDER SMS")},{key:"follow_up_reminder_sms_text",placeholder:"Follow-up Reminder SMS Text",initialValue:this.state.data?this.state.data.follow_up_reminder_sms_text:null,minRows:4,type:"sms_field",options:Ra},{key:"send_follow_up_reminder_time",initialValue:this.state.data?this.state.data.send_follow_up_reminder_time:null,extra:"Time to Send follow-up SMS after the last appointment.",type:x,options:[{label:"1 Month",value:1},{label:"3 Month",value:3},{label:"6 Month",value:6}]},{key:"payment_sms",initialValue:!!this.state.data&&this.state.data.payment_sms,type:"singlecheckbox",extra:"This SMS is sent to the Patient when payment is received.",follow:r.a.createElement("b",null,"PAYMENT SMS")},{key:"payment_sms_text",placeholder:"Payment SMS Text",initialValue:this.state.data?this.state.data.payment_sms_text:null,minRows:4,type:"sms_field",options:Ra},{key:"promo_code_text",initialValue:!!this.state.data&&this.state.data.promo_code_text,type:"label_field",extra:"This SMS is sent to the Patient when payment is received.",follow:r.a.createElement("b",null,"PROMO CODE SMS TEXT")},{key:"promo_code_text",placeholder:"Promo Code  SMS Text",initialValue:this.state.data?this.state.data.payment_sms_text:null,minRows:4,type:"sms_field",options:Hn},{key:"lab_order_confirmation_sms",initialValue:!!this.state.data&&this.state.data.lab_order_confirmation_sms,type:"singlecheckbox",extra:"This SMS is sent to the Patient when he is prescribed a lab order.",follow:r.a.createElement("b",null,"LAB ORDER CONFIRMATION SMS")},{key:"lab_order_confirmation_text",placeholder:"Lab Order Confirmation SMS Text",initialValue:this.state.data?this.state.data.lab_order_confirmation_text:null,minRows:4,type:"sms_field",options:Ra},{key:"lab_order_due_on_sms",placeholder:"Lab Order Due On SMS Text",initialValue:!!this.state.data&&this.state.data.lab_order_due_on_sms,extra:"This SMS is sent to the Patient informing lab order due date",type:"singlecheckbox",follow:r.a.createElement("b",null,"LAB ORDER DUE ON SMS")},{key:"lab_order_result_sms",initialValue:!!this.state.data&&this.state.data.lab_order_result_sms,extra:"This SMS is sent to the Patient when lab order results are ready",type:"singlecheckbox",follow:r.a.createElement("b",null,"LAB ORDER RESULT SMS")},{key:"lab_order_reminder_sms",initialValue:!!this.state.data&&this.state.data.lab_order_reminder_sms,type:"singlecheckbox",extra:"This reminder SMS is sent to the Patient",follow:r.a.createElement("b",null,"LAB ORDER REMINDER SMS")}],n={successFn:function(e){Qt(O,"success"),t.loadData()},errorFn:function(){},action:Kt("clinics/%s/communications/",[t.props.active_practiceId]),method:"post"},i=[{key:"practice",value:this.props.active_practiceId},{key:"id",value:this.state.data?this.state.data.id:null},{key:"sms_language",value:this.state.language}],l=vr.a.create()(Vr);return r.a.createElement("div",null,r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:8},r.a.createElement("span",{style:{float:"right",color:"rgba(0, 0, 0, 0.85)"}},"SMS Language : \xa0")),r.a.createElement(ir.a,{span:8},r.a.createElement(ga.a,{defaultValue:this.data&&this.data.sms_language?this.data.sms_language:t.state.language,style:{width:220},onChange:function(t){return e.handleChangeLanguage("language",t)}},this.state[Gn].map((function(e){return r.a.createElement(ga.a.Option,{value:e},e)}))),r.a.createElement("br",null),r.a.createElement("span",null,"SMS to Patients will be sent in this language"))),r.a.createElement(l,Object.assign({formProp:n,defaultValues:i,fields:a},this.props)))}}]),t}(r.a.Component),Di=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={},a.loadData=a.loadData.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){var e=this;Ut(Kt("clinics/%s/email_communications/",[this.props.active_practiceId]),(function(t){e.setState({data:t[0]})}),(function(){}))}},{key:"render",value:function(){var e=[{label:"Contact Number",key:"contact_number",placeholder:"Contact Number",initialValue:this.state.data?this.state.data.contact_number:" ",extra:"Maximum 15 characters & represented as {{CLINICCONTACTNUMBER}}",type:S},{label:"Email",key:"email",placeholder:"Email Address",initialValue:this.state.data?this.state.data.email:" ",extra:"All replies by Patients for emails will be sent to this address",type:S},{label:"SMS clinic Name",key:"email_clinic_name",placeholder:"Clinic Name",initialValue:this.state.data?this.state.data.email_clinic_name:" ",extra:"{{CLINIC}} will use this name.",type:S},{label:"Clinic Logo",key:"clinic_logo",type:T},{key:"appointment_confirmation_email",initialValue:!!this.state.data&&this.state.data.appointment_confirmation_email,type:"singlecheckbox",follow:r.a.createElement("b",null,"APPOINTMENT CONFIRMATION EMAIL"),options:[],extra:"Email is sent to the Patient on successfully adding an appointment"},{key:"appointment_confirmation_email_text",initialValue:this.state.data?this.state.data.appointment_confirmation_email_text:"",type:"mail_field",options:Ra},{type:"divider_field"},{key:"appointment_cancellation_email",initialValue:!!this.state.data&&this.state.data.appointment_cancellation_email,type:"singlecheckbox",follow:r.a.createElement("b",null,"APPOINTMENT CANCELLATION EMAIL"),extra:"Email is sent to the Patient when the appointment is cancelled"},{key:"appointment_cancellation_email_text",initialValue:this.state.data?this.state.data.appointment_cancellation_email_text:"",type:"mail_field",options:Ra},{type:"divider_field"},{key:"appointment_reminder_email",initialValue:!!this.state.data&&this.state.data.appointment_reminder_email,type:"singlecheckbox",follow:r.a.createElement("b",null,"APPOINTMENT REMINDER EMAIL"),extra:"Email is sent to the Patient on the morning of the appointment date"},{key:"send_on_day_of_appointment",initialValue:!!this.state.data&&this.state.data.send_on_day_of_appointment,type:"singlecheckbox",follow:"Send reminder SMS on the day of appointment at 7:30 AM"},{key:"send_before_day_of_appointment",initialValue:!!this.state.data&&this.state.data.send_before_day_of_appointment,follow:"Send reminder SMS on the day before the appointment at",type:"singlecheckbox"},{key:"send_on_day_of_appointment_time",initialValue:this.state.data&&Or()(this.state.data.send_on_day_of_appointment_time).isValid()?Or()(this.state.data.send_on_day_of_appointment_time):null,type:M},{key:"appointment_cancellation_email_text",initialValue:this.state.data?this.state.data.appointment_cancellation_email_text:"",type:"mail_field",options:Ra},{type:"divider_field"},{key:"followup_reminder_email",initialValue:!!this.state.data&&this.state.data.followup_reminder_email,type:"singlecheckbox",follow:r.a.createElement("b",null,"FOLLOW-UP REMINDER EMAIL"),extra:"Email is sent to the Patient on the morning of their planned follow-up date"},{key:"appointment_reminder_email_text",initialValue:this.state.data?this.state.data.appointment_reminder_email_text:"",type:"mail_field",options:Ra},{type:"divider_field"},{key:"birthday_wish_email",initialValue:!!this.state.data&&this.state.data.birthday_wish_email,type:"singlecheckbox",follow:r.a.createElement("b",null,"BIRTHDAY WISH EMAIL"),extra:"Email is sent to the Patient on the morning of their birthday"},{key:"birthday_wish_email_text",initialValue:this.state.data?this.state.data.birthday_wish_email_text:"",type:"mail_field",options:Ra},{type:"divider_field"},{key:"lab_order_confirmation_email",initialValue:!!this.state.data&&this.state.data.lab_order_confirmation_email,type:"singlecheckbox",follow:r.a.createElement("b",null,"LAB ORDER CONFIRMATION EMAIL"),extra:"Email is sent to the Patient when he is prescribed a Lab Order"},{key:"lab_order_confirmation_email_text",initialValue:this.state.data?this.state.data.lab_order_confirmation_email_text:"",type:"mail_field",options:Ra},{type:"divider_field"},{key:"lab_order_due_date_email",initialValue:!!this.state.data&&this.state.data.lab_order_due_date_email,type:"singlecheckbox",follow:r.a.createElement("b",null,"LAB ORDER DUE DATE EMAIL"),extra:"Email is sent to the Patient when due date is entered for a Lab Order"},{key:"lab_order_due_date_email_text",initialValue:this.state.data?this.state.data.lab_order_due_date_email_text:"",type:"mail_field",options:Ra},{type:"divider_field"},{key:"lab_order_result_email",initialValue:!!this.state.data&&this.state.data.lab_order_result_email,type:"singlecheckbox",follow:r.a.createElement("b",null,"LAB ORDER RESULT EMAIL"),extra:"Email is sent to the Patient when result for a Lab Order is ready"},{key:"alab_order_result_email_text",initialValue:this.state.data?this.state.data.alab_order_result_email_text:"",type:"mail_field",options:Ra},{type:"divider_field"},{key:"anniversary_wish_email",initialValue:!!this.state.data&&this.state.data.anniversary_wish_email,type:"singlecheckbox",follow:r.a.createElement("b",null,"ANNIVERSARY WISH EMAIL"),extra:"Email is sent to the Patient on the morning of their anniversary"},{key:"anniversary_wish_email_text",initialValue:this.state.data?this.state.data.anniversary_wish_email_text:"",type:"mail_field",options:Ra}],t={successFn:function(e){Qt(O,"Communication Settings Saved Successfully!!"),console.log("form",e)},errorFn:function(){},action:Kt("clinics/%s/email_communications/",[this.props.active_practiceId]),method:"post"},a=[{key:"practice",value:this.props.active_practiceId,is_active:!1},{key:"id",value:this.state.data?this.state.data.id:null}],n=vr.a.create()(Vr);return r.a.createElement("div",null,r.a.createElement(n,Object.assign({formProp:t,defaultValues:a,fields:e},this.props)))}}]),t}(r.a.Component),ki=hr.a.TabPane,Pi=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(rr.a,null,r.a.createElement("h2",null,"Communication Settings"),r.a.createElement(cr.a,null,r.a.createElement(hr.a,{defaultActiveKey:"appointmentsms"},r.a.createElement(ki,{tab:r.a.createElement("span",null,r.a.createElement(va.a,{type:"schedule"}),"Appointment & FollowUp SMS"),key:"appointmentsms"},r.a.createElement(Oi,this.props)),r.a.createElement(ki,{tab:r.a.createElement("span",null,r.a.createElement(va.a,{type:"mail"}),"Emails"),key:"emails"},r.a.createElement(Di,this.props)),r.a.createElement(ki,{tab:r.a.createElement("span",null,r.a.createElement(va.a,{type:"android"}),"Wish SMS"),key:"wishsms"},r.a.createElement(_i,this.props))))))}}]),t}(r.a.Component),Si=(r.a.Component,a(363),a(223)),xi=function(e){function t(){return Object(d.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement(rr.a,{style:{marginTop:"20px"}},r.a.createElement(Si.a,{status:"403",title:r.a.createElement("span",null,r.a.createElement("h1",null,r.a.createElement("b",null,"403")),r.a.createElement("h2",null,"Permission Denied")),subTitle:"You don't have permission to view this page.",extra:r.a.createElement(Da.b,{to:"/"},r.a.createElement(da.a,{type:"primary"},"Go to Home"))}))}}]),t}(r.a.Component);r.a.Component;function ji(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var Ii=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).changeNetPrice=function(e){var t=Object(f.a)(a),n=a.props.form,r=n.getFieldsValue;n.setFields;setTimeout((function(){var e=r();if(e.cost_with_tax){var a=0;e.taxes.forEach((function(e){t.state.taxes.forEach((function(t){t.id==e&&(a+=t.tax_value)}))}));var n=e.cost_with_tax/(1+.01*a);t.setState({retail_price:n.toFixed(2)})}else t.setState({retail_price:0})}),1e3)},a.handleSubmit=function(e){var t=Object(f.a)(a);e.preventDefault(),a.props.form.validateFields((function(e,n){if(!e){var r=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ji(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ji(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},n,{cost:t.state.retail_price});a.state.editingProcedureData&&(r.id=a.state.editingProcedureData.id),qt(Kt(ae,[a.props.active_practiceId]),r,(function(e){Qt(O,"Procedure Updated Successfully!!"),t.props.loadData&&t.props.loadData(),t.props.history.push("settings/procedures")}),(function(){}))}}))},a.state={editingProcedureData:a.props.editingProcedureData?a.props.editingProcedureData:null,taxes:[],procedure_category:[],redirect:!1,productMargin:[],retail_price:0},a.loadTaxes=a.loadTaxes.bind(Object(f.a)(a)),a.loadProcedures=a.loadProcedures.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){if(this.loadTaxes(),this.loadProcedures(),this.loadProductMargin(),this.props.editingProcedureData&&this.setState({retail_price:this.props.editingProcedureData.cost}),this.props.history&&this.props.history.location.search){var e=this.props.history.location.search.substr(1).split("&");if(e.length){var t={},a=this.props.form.setFieldsValue;e.forEach((function(e){var n=e.split("=");n&&2==n.length&&(isNaN(n[1])||-1==n[1].toString().indexOf(".")?isNaN(n[1])?(t[n[0]]=n[1],a(Object(u.a)({},n[0],n[1]))):(t[n[0]]=parseInt(n[1]),a(Object(u.a)({},n[0],parseInt(n[1])))):(t[n[0]]=parseFloat(n[1]),a(Object(u.a)({},n[0],parseFloat(n[1])))))}))}}}},{key:"loadProductMargin",value:function(){var e=this;Ut("product_margin/",(function(t){e.setState({productMargin:t})}),(function(){}))}},{key:"loadProcedures",value:function(){var e=this;Ut(Kt(ae,[this.props.active_practiceId]),(function(t){e.setState({procedure_category:t})}),(function(){}),{pagination:!1})}},{key:"loadTaxes",value:function(){var e=this;Ut(Kt($,[this.props.active_practiceId]),(function(t){e.setState({taxes:t})}),(function(){}))}},{key:"render",value:function(){var e=this,t={labelCol:{span:8},wrapperCol:{span:14}},a=this.props.form.getFieldDecorator;return r.a.createElement("div",null,r.a.createElement(cr.a,null,r.a.createElement(vr.a,{onSubmit:this.handleSubmit},r.a.createElement("h2",null,this.state.editingProcedureData?"Edit Procedures":"Add Procedures"),r.a.createElement(vr.a.Item,Object.assign({label:"Procedure Name"},t),a("name",{initialValue:this.state.editingProcedureData?this.state.editingProcedureData.name:null,rules:[{required:!0,message:Ft}]})(r.a.createElement(ma.a,{placeholder:"Procedure Name"}))),r.a.createElement(vr.a.Item,Object.assign({label:"Procedure Net Price"},t),a("cost_with_tax",{initialValue:this.state.editingProcedureData?this.state.editingProcedureData.cost_with_tax:null,rules:[{required:!0,message:Ft}]})(r.a.createElement(Er.a,{onChange:this.changeNetPrice})),r.a.createElement("span",{className:"ant-form-text"},"INR")),r.a.createElement(vr.a.Item,Object.assign({label:"Tax"},t),a("taxes",{initialValue:this.state.editingProcedureData&&this.state.editingProcedureData.taxes?this.state.editingProcedureData.taxes.map((function(e){return e.id})):[]})(r.a.createElement(pr.a.Group,{onChange:this.changeNetPrice},this.state.taxes.map((function(e){return r.a.createElement(pr.a,{value:e.id},e.name+(e.tax_value?"("+e.tax_value+"%)":""))}))))),r.a.createElement(vr.a.Item,Object.assign({label:"Procedure Retail Price"},t),r.a.createElement("span",{className:"ant-form-text"},r.a.createElement("b",null,e.state.retail_price),"\xa0INR")),r.a.createElement(vr.a.Item,Object.assign({key:"margin"},t,{label:"MLM Margin"}),a("margin",{initialValue:this.state.editingProcedureData&&this.state.editingProcedureData.margin?this.state.editingProcedureData.margin.id:null})(r.a.createElement(ga.a,null,this.state.productMargin.map((function(e){return r.a.createElement(ga.a.Option,{value:e.id},e.name)}))))),r.a.createElement(vr.a.Item,Object.assign({key:"under"},t,{label:"Add Under"}),a("under",{initialValue:this.state.editingProcedureData?this.state.editingProcedureData.under:null})(r.a.createElement(ga.a,null,this.state.procedure_category.map((function(e){return r.a.createElement(ga.a.Option,{value:e.id},e.name)}))))),r.a.createElement(vr.a.Item,Object.assign({label:"Default Note"},t),a("default_notes",{initialValue:this.state.editingProcedureData?this.state.editingProcedureData.default_notes:null,rules:[{required:!0,message:Ft}]})(r.a.createElement(ma.a,{placeholder:"Default Note"}))),r.a.createElement(vr.a.Item,null,r.a.createElement(da.a,{style:{margin:5},type:"primary",htmlType:"submit"},"Submit"),e.props.history?r.a.createElement(da.a,{style:{margin:5},onClick:function(){return e.props.history.goBack()}},"Cancel"):null))))}}]),t}(r.a.Component),Ci=vr.a.create()(Ii),wi=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).startLoading=function(){a.props.loaderFunction&&(a.props.loaderFunction(),a.startMakingExtraLabels())},a.startMakingExtraLabels=function(){var e=Object(f.a)(a);a.setState((function(e){return e.extraLoadingLabel.length>2?{extraLoadingLabel:""}:{extraLoadingLabel:e.extraLoadingLabel+"."}}),(function(){e.props.loading&&setTimeout((function(){e.startMakingExtraLabels()}),500)}))},a.state={extraLoadingLabel:""},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return this.props.loading?r.a.createElement(pa.a,{spinning:this.props.loading},r.a.createElement(rr.a,{style:{minHeight:200}})):this.props.hidden?r.a.createElement(rr.a,null,r.a.createElement("div",{style:{textAlign:"center",margin:"15px 0px"}},r.a.createElement("small",null,"No More Data Found"))):r.a.createElement(rr.a,null,r.a.createElement("div",{style:{textAlign:"center",margin:"15px 0px"}},r.a.createElement(da.a,{type:"primary",onClick:this.startLoading,loading:this.props.loading},this.props.loading?"Loading"+this.state.extraLoadingLabel:"Load More")))}}]),t}(r.a.Component),Mi=(lr.a.Column,lr.a.ColumnGroup,hr.a.TabPane,function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).handleClick=function(e){a.setState({current:e.key})},a.changeSearchValue=function(e){a.setState({searchString:e},(function(){this.loadProcedures()}))},a.state={current:"staff",procedure_category:null,editingProcedureData:null,loading:!0},a.loadProcedures=a.loadProcedures.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadProcedures()}},{key:"loadProcedures",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this,a={page:e};this.state.searchString&&(a.name=this.state.searchString);var n=function(e){1==e.current&&t.state.searchString==a.name?t.setState({procedure_category:e.results,next:e.next,loading:!1}):t.setState((function(t){return{procedure_category:[].concat(Object(Oa.a)(t.procedure_category),Object(Oa.a)(e.results)),next:e.next,loading:!1}}))},r=function(){};Ut(Kt(ae,[this.props.active_practiceId]),n,r,a)}},{key:"deleteObject",value:function(e){var t=this,a={id:e.id,is_active:!1};a.is_active=!1;qt(Kt(ae,[this.props.active_practiceId]),a,(function(e){t.loadProcedures()}),(function(){}))}},{key:"editProcedure",value:function(e){this.setState({editingProcedureData:e,loading:!1});var t="/settings/procedures/"+e.id+"/editprocedure";this.props.history.push(t)}},{key:"render",value:function(){var e=this,t=this,a=[{title:"Procedure Name",dataIndex:"name",key:"name"},{title:"Procedure Unit Cost",dataIndex:"cost_with_tax",key:"cost"},{title:"MLM Margin",dataIndex:"margin",key:"margin",render:function(e){return r.a.createElement("span",null,e?e.name:null)}},{title:"Applicable Taxes",dataIndex:"taxes",key:"taxes",render:function(e){return r.a.createElement("span",null,e&&e.length?e.map((function(e){return r.a.createElement(fa.a,null," ",e.name,"|",r.a.createElement("b",null,e.tax_value,"%"))})):null)}},{title:"Standard Notes",dataIndex:"default_notes",key:"default_notes"},{title:"Action",key:"action",render:function(a,n){return r.a.createElement("span",null,r.a.createElement(Da.b,{to:"/settings/procedures/addprocedure?under="+n.id},"Add SubCategory"),r.a.createElement(sr.a,{type:"vertical"}),r.a.createElement("a",{onClick:function(){return e.editProcedure(n)}},"Edit"),r.a.createElement(sr.a,{type:"vertical"}),r.a.createElement(or.a,{title:"Are you sure delete this?",onConfirm:function(){return t.deleteObject(n)},okText:"Yes",cancelText:"No"},r.a.createElement("a",null,"Delete")))}}];return r.a.createElement(y.d,null,r.a.createElement(y.b,{path:"/settings/procedures/addprocedure",render:function(t){return e.props.activePracticePermissions.SettingsProcedureCatalog||e.props.allowAllPermissions?r.a.createElement(Ci,Object.assign({},e.props,t,{loadData:e.loadProcedures})):r.a.createElement(xi,null)}}),r.a.createElement(y.b,{exact:!0,path:"/settings/procedures/:id/editprocedure",render:function(a){return t.props.activePracticePermissions.SettingsProcedureCatalog||t.props.allowAllPermissions?t.state.editingProcedureData?r.a.createElement(Ci,Object.assign({},e.state,e.props,a,{loadData:e.loadProcedures})):r.a.createElement(y.a,{to:"/settings/procedures"}):r.a.createElement(xi,null)}}),r.a.createElement(y.b,null,r.a.createElement(rr.a,null,r.a.createElement("h2",null,"Procedures Catalog",r.a.createElement(Da.b,{to:"/settings/procedures/addprocedure"},r.a.createElement(da.a,{type:"primary",style:{float:"right"}},r.a.createElement(va.a,{type:"plus"}),"\xa0Add Procedure"))),r.a.createElement(cr.a,null,r.a.createElement("div",{className:"row mar-b-10"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement(ma.a,{onChange:function(t){return e.changeSearchValue(t.target.value)},value:this.state.searchString,style:{width:200},placeholder:"Search Procedure..."}))),r.a.createElement(lr.a,{columns:a,pagination:!1,dataSource:this.state.procedure_category}),r.a.createElement(wi,{loading:this.state.loading,hidden:!this.state.next,loaderFunction:function(){return e.loadProcedures(e.state.next)}})))))}}]),t}(r.a.Component)),Ai=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).handleCancel=function(){a.setState({visible:!1})},a.state={redirect:!1,visible:!1,modes:null},a.loadData=a.loadData.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){var e=this;Ut(Kt(te,[this.props.active_practiceId]),(function(t){console.log("get table"),e.setState({modes:t})}),(function(){}))}},{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"editPayment",value:function(e){this.setState({editingId:e.id,editingmode:e.mode,editingType:e.payment_type,editingFee:e.fee,visible:!0})}},{key:"deleteObject",value:function(e){var t=this,a=e;a.is_active=!1;qt(Kt(te,[this.props.active_practiceId]),a,(function(e){t.loadData()}),(function(){}))}},{key:"render",value:function(){var e=this,t=this,a=[{title:"Mode of Payment",placeholder:"",dataIndex:"mode",key:"mode"},{title:"Payment Type",dataIndex:"payment_type",key:"payment_type"},{title:"Fees",dataIndex:"fee",key:"fee",render:function(e,t){return r.a.createElement("span",null,e," %")}},{title:"Action",key:"action",render:function(a,n){return r.a.createElement("span",null,r.a.createElement("a",{onClick:function(){return e.editPayment(n)}},"Edit"),r.a.createElement(sr.a,{type:"vertical"}),r.a.createElement(or.a,{title:"Are you sure delete this payment mode?",onConfirm:function(){return t.deleteObject(n)},okText:"Yes",cancelText:"No"},r.a.createElement("a",null,"Delete")))}}],n=[{label:"Mode of payment",key:"mode",required:!0,type:S},{label:"Payment Type",key:"payment_type",required:!0,type:x,options:Sa},{label:"Vendor Fee",key:"fee",required:!0,type:I,min:0,follow:"%"}],i=[{label:"Mode of payment",key:"mode",required:!0,initialValue:this.state.editingmode,type:S},{label:"Payment Type",key:"payment_type",required:!0,initialValue:this.state.editingType,type:x,options:Sa},{label:"Vendor Fee",key:"fee",required:!0,initialValue:this.state.editingFee,type:I,min:0,follow:"%"}],l={successFn:function(e){t.handleCancel(),t.loadData(),console.log(e),console.log("sucess"),Qt(O,"sucess")},errorFn:function(){},action:Kt(te,[this.props.active_practiceId]),method:"post"},o=[{key:"practice",value:this.props.active_practiceId}],s=[{key:"practice",value:this.props.active_practiceId},{key:"id",value:this.state.editingId}],c=vr.a.create()(Vr);return r.a.createElement("div",null,r.a.createElement(c,Object.assign({defaultValues:o,formProp:l,fields:n},this.props)),r.a.createElement(sr.a,null),r.a.createElement(ti,{columns:a,dataSource:this.state.modes}),r.a.createElement(nr.a,{title:"Edit Payment Mode",visible:this.state.visible,footer:null,onCancel:this.handleCancel},r.a.createElement(c,{defaultValues:s,formProp:l,fields:i}),r.a.createElement(da.a,{key:"back",onClick:this.handleCancel},"Return")))}}]),t}(r.a.Component),Ti=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).handleCancel=function(){a.setState({visible:!1})},a.state={redirect:!1,visible:!1,taxes:null,loading:!0},a.loadData=a.loadData.bind(Object(f.a)(a)),a.deleteObject=a.deleteObject.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){var e=this;Ut(Kt($,[this.props.active_practiceId]),(function(t){console.log("get table"),e.setState({taxes:t,loading:!1})}),(function(){e.setState({loading:!1})}))}},{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"editTax",value:function(e){this.setState({editingId:e.id,editingName:e.name,editingValue:e.tax_value,visible:!0})}},{key:"deleteObject",value:function(e){var t=this,a=e;a.is_active=!1;qt(Kt($,[this.props.active_practiceId]),a,(function(e){t.loadData()}),(function(){}))}},{key:"render",value:function(){var e=this,t=[{title:"Name",dataIndex:"name",key:"name"},{title:"Tax Value",dataIndex:"tax_value",key:"tax_value",render:function(e,t){return r.a.createElement("span",null,e," %")}},{title:"Actions",key:"action",render:function(t,a){return r.a.createElement("span",null,r.a.createElement(or.a,{title:"Are you sure delete this?",onConfirm:function(){return e.deleteObject(a)},okText:"Yes",cancelText:"No"},r.a.createElement("a",null,"Delete")))}}],a=[{label:"Tax name",key:"name",placeholder:"Tax Name",required:!0,type:S},{label:"Tax Value",key:"tax_value",follow:"%",max:100,min:0,required:!0,type:I}],n=[{label:"Tax name",key:"name",required:!0,initialValue:this.state.editingName,type:S},{label:"Tax Value",key:"tax_value",follow:"%",max:100,min:0,required:!0,initialValue:this.state.editingValue,type:I}],i={successFn:function(t){e.handleCancel(),e.loadData(),console.log(t),console.log("sucess"),Qt(O,"success")},errorFn:function(){},action:Kt($,[this.props.active_practiceId]),method:"post"},l=[{key:"practice",value:this.props.active_practiceId}],o=[{key:"practice",value:this.props.active_practiceId},{key:"id",value:this.state.editingId}],s=vr.a.create()(Vr);return r.a.createElement("div",null,r.a.createElement(s,Object.assign({defaultValues:l,formProp:i,fields:a},this.props)),r.a.createElement(sr.a,null),r.a.createElement(ti,{loading:this.state.loading,columns:t,dataSource:this.state.taxes}),r.a.createElement(nr.a,{title:"Edit Tax",visible:this.state.visible,footer:null,onCancel:this.handleCancel},r.a.createElement(s,{defaultValues:o,formProp:i,fields:n}),r.a.createElement(da.a,{key:"back",onClick:this.handleCancel},"Return"),","))}}]),t}(r.a.Component),Ri=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={practiceDetail:{}},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this;Ut(Kt("clinics/%s/",[this.props.active_practiceId]),(function(t){var a=t.countries;e.setState({countries:a,practiceDetail:t})}),(function(){}))}},{key:"render",value:function(){var e=[{key:"hide_cancelled_invoice",type:"singlecheckbox",follow:r.a.createElement("b",null,"Hide Cancelled Invoice"),initialValue:!!this.state.practiceDetail&&this.state.practiceDetail.hide_cancelled_invoice},{key:"hide_cancelled_return",type:"singlecheckbox",follow:r.a.createElement("b",null,"Hide Cancelled Return Invoice"),initialValue:!!this.state.practiceDetail&&this.state.practiceDetail.hide_cancelled_return},{key:"hide_cancelled_payment",type:"singlecheckbox",follow:r.a.createElement("b",null,"Hide Cancelled Payments"),initialValue:!!this.state.practiceDetail&&this.state.practiceDetail.hide_cancelled_payment}],t={successFn:function(e){Qt(O,"Settings Saved Successfuly!!")},errorFn:function(){},action:Kt("clinics/%s/",[this.props.active_practiceId]),method:"put"},a=vr.a.create()(Vr),n=[{key:"id",value:this.props.active_practiceId}];return r.a.createElement("div",null,r.a.createElement(a,Object.assign({formProp:t,fields:e},this.props,{defaultValues:n})))}}]),t}(r.a.Component),Li=hr.a.TabPane,Fi=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={defaultActiveKey:a.props.location.hash},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(rr.a,null,r.a.createElement("h2",null,"Billing"),r.a.createElement(cr.a,null,r.a.createElement(hr.a,{defaultActiveKey:this.state.defaultActiveKey},r.a.createElement(Li,{tab:r.a.createElement("span",null,r.a.createElement(va.a,{type:"cluster"}),"Tax Catalog"),key:"#taxcatalog"},r.a.createElement(Ti,Object.assign({},this.state,this.props))),r.a.createElement(Li,{tab:r.a.createElement("span",null,r.a.createElement(va.a,{type:"dollar"}),"Accepted Modes of payment "),key:"#paymentmodes"},r.a.createElement(Ai,this.props)),r.a.createElement(Li,{tab:r.a.createElement("span",null,r.a.createElement(va.a,{type:"block"}),"Cancelled Invoice"),key:"cancelledinvoice"},r.a.createElement(Ri,Object.assign({},this.state,this.props)))))))}}]),t}(r.a.Component),Ni=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).handleCancel=function(){a.setState({visible:!1})},a.state={redirect:!1,visible:!1,data:null,loading:!0},a.loadData=a.loadData.bind(Object(f.a)(a)),a.deleteObject=a.deleteObject.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){var e=this;Ut(Kt(this.props.id,[this.props.active_practiceId]),(function(t){e.setState({data:t,loading:!1})}),(function(){e.setState({loading:!1})}))}},{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"editFunction",value:function(e){this.setState({editingId:e.id,editingName:e.name,visible:!0,loading:!1})}},{key:"deleteObject",value:function(e){var t=this,a=e;a.is_active=!1;qt(Kt(this.props.id,[this.props.active_practiceId]),a,(function(e){t.loadData()}),(function(){}))}},{key:"render",value:function(){var e=this,t=this,a=[{title:"Name",dataIndex:"name",key:"name"},{title:"Action",key:"action",render:function(a,n){return r.a.createElement("span",null,r.a.createElement("a",{onClick:function(){return e.editFunction(n)}},"  Edit"),r.a.createElement(sr.a,{type:"vertical"}),r.a.createElement(or.a,{title:"Are you sure delete this item?",onConfirm:function(){return t.deleteObject(n)},okText:"Yes",cancelText:"No"},r.a.createElement("a",null,"Delete")))}}],n=[{label:this.props.name,key:"name",required:!0,type:S}],i=[{label:this.props.name,key:"name",required:!0,initialValue:this.state.editingName,type:S}],l={successFn:function(e){t.handleCancel(),t.loadData(),console.log(e),console.log("sucess"),Qt(O,"success")},errorFn:function(){},action:Kt(this.props.id,[this.props.active_practiceId]),method:"post"},o=[{key:"practice",value:this.props.active_practiceId}],s=[{key:"practice",value:this.props.active_practiceId},{key:"id",value:this.state.editingId}],c=vr.a.create()(Vr);return r.a.createElement("div",null,r.a.createElement(c,{defaultValues:o,formProp:l,fields:n}),r.a.createElement(sr.a,null),r.a.createElement(ti,{loading:this.state.loading,columns:a,dataSource:this.state.data}),r.a.createElement(nr.a,{title:"Edit "+this.props.name,visible:this.state.visible,footer:null,onCancel:this.handleCancel},r.a.createElement(c,{defaultValues:s,formProp:l,fields:i}),r.a.createElement(da.a,{key:"back",onClick:this.handleCancel},"Return"),","))}}]),t}(r.a.Component),Yi=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={redirect:!1,vitalSign:null},a.changeRedirect=a.changeRedirect.bind(Object(f.a)(a)),a.loadVitalSign=a.loadVitalSign.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadVitalSign()}},{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"loadVitalSign",value:function(){var e=this;Ut(Kt("clinics/%s/vital_sign/",[e.props.active_practiceId]),(function(t){e.setState({vitalSign:t[t.length-1]})}),(function(){e.setState({})}))}},{key:"render",value:function(){var e=[{label:"Default temperature measurement in",key:"temperature_unit",type:x,initialValue:this.state.vitalSign?this.state.vitalSign.temperature_unit:null,options:on.map((function(e){return{label:e.label,value:e.value}}))},{label:"Default temperature measurement method",key:"temperature_method",type:x,initialValue:this.state.vitalSign?this.state.vitalSign.temperature_method:null,options:sn.map((function(e){return{label:e.label,value:e.value}}))},{label:"Default blood pressure measurement method",key:"blood_pressure_method",initialValue:this.state.vitalSign?this.state.vitalSign.blood_pressure_method:null,type:x,options:cn.map((function(e){return{label:e.label,value:e.value}}))}],t=[{key:"practice",value:this.props.active_practiceId},{key:"id",value:this.state.vitalSign?this.state.vitalSign.id:null}],a=vr.a.create()(Vr),n={successFn:function(e){Qt(O,"success")},errorFn:function(){},action:Kt("clinics/%s/vital_sign/",[this.props.active_practiceId]),method:"post"};return r.a.createElement(rr.a,null,r.a.createElement(a,{defaultValues:t,formProp:n,fields:e}))}}]),t}(r.a.Component),Vi=hr.a.TabPane,Bi=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={defaultActiveKey:a.props.location.hash},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return console.log("propss",this.props),r.a.createElement("div",null,r.a.createElement(rr.a,null,r.a.createElement("h2",null,"EMR Settings"),r.a.createElement(cr.a,null,r.a.createElement(hr.a,{defaultActiveKey:this.state.defaultActiveKey},r.a.createElement(Vi,{tab:r.a.createElement("span",null,r.a.createElement(va.a,{type:"sound"}),"Complaints"),key:"#complaints"},r.a.createElement(Ni,Object.assign({},this.props,{id:"clinics/%s/complaints/",name:"Complaints"}))),r.a.createElement(Vi,{tab:r.a.createElement("span",null,r.a.createElement(va.a,{type:"eye"}),"Observations"),key:"#observations"},r.a.createElement(Ni,Object.assign({},this.props,{id:"clinics/%s/observations/",name:"Observations"}))),r.a.createElement(Vi,{tab:r.a.createElement("span",null,r.a.createElement(va.a,{type:"plus-square"}),"Diagnoses"),key:"#diagnoses"},r.a.createElement(Ni,Object.assign({},this.props,{id:"clinics/%s/diagnoses/",name:"Diagnoses"}))),r.a.createElement(Vi,{tab:r.a.createElement("span",null,r.a.createElement(va.a,{type:"laptop"}),"Investigations"),key:"#investigations"},r.a.createElement(Ni,Object.assign({},this.props,{id:"clinics/%s/investigations/",name:"Investigations"}))),r.a.createElement(Vi,{tab:r.a.createElement("span",null,r.a.createElement(va.a,{type:"solution"}),"Notes"),key:"#treatmentnotes"},r.a.createElement(Ni,Object.assign({},this.props,{id:le,name:"Treatment Notes"}))),r.a.createElement(Vi,{tab:r.a.createElement("span",null,r.a.createElement(va.a,{type:"medicine-box"}),"Medication"),key:"#medication"},r.a.createElement(Ni,Object.assign({},this.props,{id:"clinics/%s/medication/",name:"Medication"}))),r.a.createElement(Vi,{tab:r.a.createElement("span",null,r.a.createElement(va.a,{type:"file"}),"File Labels"),key:"#filetags"},r.a.createElement(Ni,Object.assign({},this.props,{id:"clinics/%s/filetags/",name:"File Labels"}))),r.a.createElement(Vi,{tab:r.a.createElement("span",null,r.a.createElement(va.a,{type:"heart"}),"Vital Signs"),key:"#vitalsigns"},r.a.createElement(Yi,this.props))))))}}]),t}(r.a.Component),Hi=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state=Object(u.a)({practiceDetail:null,countries:null},Gn,[]),a.changeRedirect=a.changeRedirect.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"componentDidMount",value:function(){var e=this;Ut(Kt("clinics/%s/",[this.props.practiceId]),(function(t){var a=t.countries;e.setState({countries:a,practiceDetail:t})}),(function(){})),yi(this,[Gn])}},{key:"render",value:function(){var e=[];if(this.state.practiceDetail&&this.state.practiceDetail.specialisations.forEach((function(t){e.push({label:t.name,value:t.id})})),this.state.practiceDetail){var t=[{label:"Practice Logo",key:"logo",type:T,initialValue:this.state.practiceDetail.logo,allowWebcam:!1},{label:"Practice Name",key:"name",required:!0,placeholder:"Practice Name",initialValue:this.state.practiceDetail.name,type:S},{label:"Practice Tagline",key:"tagline",placeholder:"Practice Tagline",required:!0,initialValue:this.state.practiceDetail.tagline,type:S},{label:"Practice Specialisation",key:"specialisation",placeholder:"Practice Specialisation",initialValue:this.state.practiceDetail.specialisation,type:S},{label:"Practice Street Address",key:"address",placeholder:"Practice Street Address",initialValue:this.state.practiceDetail.address,type:S},{label:"Practice locality",initialValue:this.state.practiceDetail.locality,key:"locality",placeholder:"Practice Locality",type:S},{label:"Practice City",initialValue:this.state.practiceDetail.City,placeholder:"Practice City",key:"city",type:S},{label:"Practice state",key:"state",placeholder:"Practice State",initialValue:this.state.practiceDetail.state,type:S},{label:"Practice Country",key:"country",placeholder:"Practice Country",initialValue:this.state.practiceDetail.country,type:S},{label:"Practice PINCODE",key:"pincode",placeholder:"Practice PINCODE",initialValue:this.state.practiceDetail.pincode,type:S},{label:"Practice Contact Number",key:"contact",placeholder:"Practice Contact Number",initialValue:this.state.practiceDetail.contact,type:S},{label:"Practice Email",key:"email",placeholder:"Practice Email",initialValue:this.state.practiceDetail.email,type:"email"},{label:"SMS Language",key:"language",placeholder:"SMS Language",initialValue:this.state.practiceDetail&&this.state.practiceDetail.language?this.state.practiceDetail.language:this.props.activePracticeData.language,type:x,options:this.state[Gn].map((function(e){return{label:e,value:e}}))},{label:"Practice website",key:"website",placeholder:"Practice Website",initialValue:this.state.practiceDetail.website,type:S},{label:"GSTIN",initialValue:this.state.practiceDetail.gstin,placeholder:"GSTIN",key:"gstin",type:S},{label:"Invoice Prefix",initialValue:this.state.practiceDetail.invoice_prefix,placeholder:"DEL/INV/",key:"invoice_prefix",type:S,required:!0},{label:"Payment Prefix",initialValue:this.state.practiceDetail.payment_prefix,placeholder:"DEL/RCPT/",key:"payment_prefix",type:S,required:!0},{label:"Return Prefix",placeholder:"DEL/RET/",initialValue:this.state.practiceDetail.return_prefix,key:"return_prefix",type:S,required:!0}],a=vr.a.create()(Vr),n={successFn:function(e){Qt(O,"success"),console.log(e)},errorFn:function(){},action:Kt("clinics/%s/",[this.props.practiceId]),method:"put"};return r.a.createElement(rr.a,null,r.a.createElement(cr.a,null,r.a.createElement(a,Object.assign({title:"Edit Practice Details",changeRedirect:this.changeRedirect,formProp:n,fields:t},this.props)),this.state.redirect&&r.a.createElement(y.a,{to:"/settings/clinics"})))}return r.a.createElement(cr.a,{loading:!0})}}]),t}(r.a.Component);function qi(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var zi=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).setFormParams=function(e,t){a.setState(Object(u.a)({},e,t))},a.handleSubmit=function(e){var t=Object(f.a)(a);a.props.form.validateFieldsAndScroll((function(a,n){a||console.log(n);var r=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?qi(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):qi(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},n,{practice:t.props.active_practiceId,maintain_inventory:e,item_type:ja});t.state.editPrescreption&&(r.id=t.state.editPrescreption.id);qt(ht,r,(function(e){Qt(O,"success"),t.props.loadData();t.props.history.push("/settings/prescriptions")}),(function(){}))}))},a.state={drugTypeList:[],drugUnitList:[],editPrescreption:a.props.editCatalog?a.props.editCatalog:null},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentWillMount",value:function(){this.loadDrugType(),this.loadDrugUnit()}},{key:"loadDrugType",value:function(){var e=this;Ut(Kt(ct,[this.props.active_practiceId]),(function(t){e.setState({drugTypeList:t})}),(function(){}))}},{key:"loadDrugUnit",value:function(){var e=this;Ut(Kt("clinics/%s/drugunit/",[this.props.active_practiceId]),(function(t){e.setState({drugUnitList:t})}),(function(){}))}},{key:"render",value:function(){var e=this,t=this,a=this.props.formLayout?this.props.formLayout:{labelCol:{span:6},wrapperCol:{span:14}},n=this.props.form.getFieldDecorator;return r.a.createElement(cr.a,null,r.a.createElement(vr.a,null,r.a.createElement("h2",null,this.props.title),r.a.createElement(vr.a.Item,Object.assign({key:"name",label:"Name"},a),n("name",{initialValue:t.state.editPrescreption?t.state.editPrescreption.name:null,rules:[{required:!0,message:Ft}]})(r.a.createElement(ma.a,{placeholder:"Medicine Name"}))),this.state.drugType&&this.state.drugType==S?r.a.createElement(vr.a.Item,Object.assign({key:"drug_type_extra",label:"Medicine Type"},a),n("drug_type_extra",{initialValue:t.state.editPrescreption?t.state.editPrescreption.drug_type_extra:null,rules:[{required:!0,message:Ft}]})(r.a.createElement(ma.a,null)),r.a.createElement("a",{onClick:function(){return t.setFormParams("drugType",x)}},"Choose Medicine Type")):r.a.createElement(vr.a.Item,Object.assign({key:"drug_type"},a,{label:"Medicine Type"}),n("drug_type",{initialValue:this.state.editPrescreption?this.state.editPrescreption.drug_type:null,rules:[{required:!0,message:Ft}]})(r.a.createElement(ga.a,null,t.state.drugTypeList.map((function(e){return r.a.createElement(ga.a.Option,{value:e.id},e.name)})))),r.a.createElement("a",{onClick:function(){return t.setFormParams("drugType",S)}},"Add New Medicine Type")),r.a.createElement(vr.a.Item,Object.assign({key:"strength"},a,{label:"Dosage"}),n("strength",{initialValue:t.state.editPrescreption?t.state.editPrescreption.strength:null,rules:[{required:!0,message:Ft}]})(r.a.createElement(Er.a,{min:0}))),this.state.drugUnit&&this.state.drugUnit==S?r.a.createElement(vr.a.Item,Object.assign({key:"unit_type_extra",label:"Medicine Unit"},a),n("unit_type_extra",{initialValue:t.state.editPrescreption?t.state.editPrescreption.unit_type_extra:null,rules:[{required:!0,message:Ft}]})(r.a.createElement(ma.a,null)),r.a.createElement("a",{onClick:function(){return t.setFormParams("drugUnit",x)}},"Choose Medicine Unit")):r.a.createElement(vr.a.Item,Object.assign({key:"stength_unit"},a,{label:"Medicine Unit"}),n("stength_unit",{initialValue:this.state.editPrescreption?this.state.editPrescreption.stength_unit:null,rules:[{required:!0,message:Ft}]})(r.a.createElement(ga.a,null,t.state.drugUnitList.map((function(e){return r.a.createElement(ga.a.Option,{value:e.id},e.name)})))),r.a.createElement("a",{onClick:function(){return t.setFormParams("drugUnit",S)}},"Add New Medicine Unit")),r.a.createElement(vr.a.Item,Object.assign({key:"instructions"},a,{label:"Instructions"}),n("instructions",{initialValue:t.state.editPrescreption?t.state.editPrescreption.instructions:null})(r.a.createElement(ma.a,null))),r.a.createElement(vr.a.Item,a,r.a.createElement(da.a,{onClick:function(){return e.handleSubmit(!1)}},"Save Medicine"),"\xa0\xa0\xa0",r.a.createElement(da.a,{onClick:function(){return e.handleSubmit(!0)},type:"primary"},"Save & Add to Inventory"),"\xa0\xa0\xa0",t.props.history?r.a.createElement(da.a,{onClick:function(){return t.props.history.goBack()}},"Cancel"):null)))}}]),t}(r.a.Component),Gi=vr.a.create()(zi);function Ui(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Wi(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ui(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ui(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}r.a.Component;var Ki=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={catalog:null,editCatalog:{},loading:!0,loadMorePrescriptions:null},a.loadData=a.loadData.bind(Object(f.a)(a)),a.deleteObject=a.deleteObject.bind(Object(f.a)(a)),a.loadInitialData=a.loadInitialData.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){var e=this;Ut(ht,(function(t){console.log("get table"),e.setState({catalog:t.results,loadMorePrescriptions:t.next,loading:!1})}),(function(){e.setState({loading:!1})}),{practice:this.props.active_practiceId,item_type:ja,maintain_inventory:!1,page:e.state.loadMorePrescriptions||1})}},{key:"loadInitialData",value:function(){var e=this;this.setState({loadMorePrescriptions:null},(function(){e.loadData()}))}},{key:"deleteObject",value:function(e){var t=this,a=e;a.is_active=!1;qt(ht,a,(function(e){t.loadData()}),(function(){}))}},{key:"editCatalog",value:function(e){this.setState({editCatalog:e,loading:!1}),this.props.history.push("/settings/prescriptions/edit")}},{key:"render",value:function(){var e=this,t=this,a=[{title:"Name",dataIndex:"name",key:"code"},{title:"Dosage",dataIndex:"strength",key:"strength",render:function(e,t){return r.a.createElement("span",null,e,"\xa0",t.stength_unit)}},{title:"Medicine Instructions",dataIndex:"instructions",key:"instructions"},{title:"Action",key:"action",render:function(a,n){return r.a.createElement("span",null,r.a.createElement("a",{onClick:function(){return e.editCatalog(n)}},"Edit"),r.a.createElement(sr.a,{type:"vertical"}),r.a.createElement(or.a,{title:"Are you sure delete this prescription?",onConfirm:function(){return t.deleteObject(n)},okText:"Yes",cancelText:"No"},r.a.createElement("a",null,"Delete")))}}];return r.a.createElement(rr.a,null,r.a.createElement(y.d,null,r.a.createElement(y.b,{exact:!0,path:"/settings/prescriptions/add",render:function(){return r.a.createElement(Gi,Object.assign({},e.props,{loadData:e.loadInitialData,title:"Add Prescription"}))}}),r.a.createElement(y.b,{exact:!0,path:"/settings/prescriptions/edit",render:function(t){return e.state.editCatalog.id?r.a.createElement(Gi,Object.assign({},e.state,{title:"Edit Prescription",loadData:e.loadInitialData},e.props,t)):r.a.createElement(y.a,{to:"/settings/prescriptions/"})}}),r.a.createElement(y.b,null,r.a.createElement("div",null,r.a.createElement("h2",null,"All presciptions",r.a.createElement(Da.b,{to:"/settings/prescriptions/add"},r.a.createElement(da.a,{type:"primary",style:{float:"right"}},r.a.createElement(va.a,{type:"plus"}),"\xa0Add"))),r.a.createElement(cr.a,null,r.a.createElement(ti,{loading:this.state.loading,columns:a,dataSource:this.state.catalog,pagination:!1})),r.a.createElement(wi,{loaderFunction:this.loadData,loading:this.state.loading,hidden:!this.state.loadMorePrescriptions})))))}}]),t}(r.a.Component),Qi=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).handleCancel=function(){a.setState({visible:!1})},a.showDeletedExpenses=function(){a.setState({showDeleted:!0,deletedLoading:!0}),a.loadData(!0)},a.state={redirect:!1,visible:!1,expenses:null,loading:!0,showDeleted:!1,deletedLoading:!1,deletedExpenses:[]},a.loadData=a.loadData.bind(Object(f.a)(a)),a.deleteObject=a.deleteObject.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this,a=function(a){console.log("get table"),e?t.setState({deletedExpenses:a,deletedLoading:!1}):t.setState({expenses:a,loading:!1})},n=function(){};e?Ut(Kt(me,[this.props.active_practiceId]),a,n,{deleted:!0}):Ut(Kt(me,[this.props.active_practiceId]),a,n)}},{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"editTax",value:function(e){this.setState({editingId:e.id,editingName:e.name,editingValue:e.tax_value,loading:!1,visible:!0})}},{key:"deleteObject",value:function(e,t){var a=this,n=e;n.is_active=t;qt(Kt(me,[this.props.active_practiceId]),n,(function(e){a.loadData(),a.state.showDeleted&&a.loadData(!0)}),(function(){}))}},{key:"render",value:function(){var e=this,t=this,a=[{title:"Expense Type",dataIndex:"name",key:"name"},{title:"Action",key:"action",render:function(a,n){return n.is_active?r.a.createElement("span",null,r.a.createElement("a",{onClick:function(){return e.editTax(n)}},"  Edit"),r.a.createElement(sr.a,{type:"vertical"}),r.a.createElement(or.a,{title:"Are you sure to delete this?",onConfirm:function(){return t.deleteObject(n,!1)},okText:"Yes",cancelText:"No"},r.a.createElement("a",null,"Delete"))):r.a.createElement("span",null,r.a.createElement(or.a,{title:"Are you sure to show this?",onConfirm:function(){return t.deleteObject(n,!0)},okText:"Yes",cancelText:"No"},r.a.createElement("a",null,"Show")))}}],n=[{label:"Expense Type",key:"name",placeholder:"Expense Type",required:!0,type:S}],i=[{label:"Expense Type",key:"name",required:!0,initialValue:this.state.editingName,type:S}],l={successFn:function(e){t.handleCancel(),t.loadData(),Qt(O,"success")},errorFn:function(){},action:Kt(me,[this.props.active_practiceId]),method:"post"},o=[{key:"practice",value:this.props.active_practiceId}],s=[{key:"practice",value:this.props.active_practiceId},{key:"id",value:this.state.editingId}],c=vr.a.create()(Vr);return r.a.createElement("div",null,r.a.createElement("h2",null,"Expense Types"),r.a.createElement(cr.a,null,r.a.createElement(c,{defaultValues:o,formProp:l,fields:n}),r.a.createElement(sr.a,null),r.a.createElement(ti,{loading:this.state.loading,columns:a,dataSource:this.state.expenses}),this.state.showDeleted?r.a.createElement("div",null,r.a.createElement(ti,{loading:this.state.deletedLoading,columns:a,dataSource:this.state.deletedExpenses})):r.a.createElement("h4",null,r.a.createElement("a",{onClick:function(){return e.showDeletedExpenses()}},"Show Deleted Expense Types"))),r.a.createElement(nr.a,{title:"Edit Expense Type",visible:this.state.visible,footer:null,onCancel:this.handleCancel},r.a.createElement(c,{defaultValues:s,formProp:l,fields:i}),r.a.createElement(da.a,{key:"back",onClick:this.handleCancel},"Return")))}}]),t}(r.a.Component),Zi=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).handleCancel=function(){a.setState({visible:!1})},a.showDeletedMedicalHistory=function(){a.setState({showDeleted:!0,deletedLoading:!0}),a.loadData(!0)},a.state={redirect:!1,visible:!1,history:null,loading:!0,deletedHistory:[],showDeleted:!1,deletedLoading:!1},a.loadData=a.loadData.bind(Object(f.a)(a)),a.deleteObject=a.deleteObject.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this,a=function(a){console.log("get table"),e?t.setState({deletedHistory:a,deletedLoading:!1}):t.setState({history:a,loading:!1})},n=function(){t.setState({loading:!1})};e?Ut(Kt(de,[this.props.active_practiceId]),a,n,{deleted:!0}):Ut(Kt(de,[this.props.active_practiceId]),a,n)}},{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"editTax",value:function(e){this.setState({editingId:e.id,editingName:e.name,visible:!0,loading:!1})}},{key:"deleteObject",value:function(e,t){var a=this,n=e;n.is_active=t;qt(Kt(de,[this.props.active_practiceId]),n,(function(e){a.loadData(),a.state.showDeleted&&a.loadData(!0)}),(function(){}))}},{key:"render",value:function(){var e=this,t=this,a=[{title:"Medical History",dataIndex:"name",key:"name"},{title:"Action",key:"action",render:function(a,n){return n.is_active?r.a.createElement("span",null,r.a.createElement("a",{onClick:function(){return e.editTax(n)}},"  Edit"),r.a.createElement(sr.a,{type:"vertical"}),r.a.createElement(or.a,{title:"Are you sure to delete this?",onConfirm:function(){return t.deleteObject(n,!1)},okText:"Yes",cancelText:"No"},r.a.createElement("a",null,"Delete"))):r.a.createElement("span",null,r.a.createElement(or.a,{title:"Are you sure to show this?",onConfirm:function(){return t.deleteObject(n,!0)},okText:"Yes",cancelText:"No"},r.a.createElement("a",null,"Show")))}}],n=[{label:"Medical History",key:"name",required:!0,type:S}],i=[{label:"Medical history ",key:"name",required:!0,initialValue:this.state.editingName,type:S}],l={successFn:function(e){t.handleCancel(),t.loadData(),console.log(e),console.log("sucess"),Qt(O,"success")},errorFn:function(){},action:Kt(de,[this.props.active_practiceId]),method:"post"},o=[{key:"id",value:this.state.editingId}],s=vr.a.create()(Vr);return r.a.createElement("div",null,r.a.createElement("h2",null,"Medical History"),r.a.createElement(cr.a,null,r.a.createElement(s,{defaultValues:[],formProp:l,fields:n}),r.a.createElement(sr.a,null),r.a.createElement(ti,{loading:this.state.loading,columns:a,dataSource:this.state.history}),this.state.showDeleted?r.a.createElement("div",null,r.a.createElement(ti,{loading:this.state.deletedLoading,columns:a,dataSource:this.state.deletedHistory})):r.a.createElement("h4",null,r.a.createElement("a",{onClick:function(){return e.showDeletedMedicalHistory()}},"Show Deleted Medical History"))),r.a.createElement(nr.a,{title:"Basic Modal",visible:this.state.visible,footer:null},r.a.createElement(s,{title:"Change history",defaultValues:o,formProp:l,fields:i}),r.a.createElement(da.a,{key:"back",onClick:this.handleCancel},"Return"),","))}}]),t}(r.a.Component),Xi=function(e){function t(){return Object(d.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement(rr.a,{style:{marginTop:"20px"},gutter:24},r.a.createElement(Si.a,{status:"404",title:r.a.createElement("span",null,r.a.createElement("h1",null,r.a.createElement("b",null,"404")),r.a.createElement("h2",null,"Page Not Found")),subTitle:"The page you are looking for has been temporarily moved or did not exist.",extra:r.a.createElement(Da.b,{to:"/"},r.a.createElement(da.a,{type:"primary"},"Go to Home"))}))}}]),t}(r.a.Component);function Ji(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function $i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ji(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ji(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var el=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],tl=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).changeVistingHourSameWeek=function(e){console.log(e.target),a.setState(Object(u.a)({},e.target.id,e.target.checked))},a.changeOpenPracticeDays=function(e,t){a.setState((function(a){return{openPracticeDays:$i({},a.openPracticeDays,Object(u.a)({},e,t))}}))},a.changePracticeTwoSessions=function(e,t){a.setState((function(a){return{twoSessions:$i({},a.twoSessions,Object(u.a)({},e,t))}}))},a.handleSubmit=function(e){var t=Object(f.a)(a);e.preventDefault(),a.props.form.validateFieldsAndScroll((function(e,n){if(!e){console.log(n);var r=$i({},n);r.first_start_time&&(r.first_start_time=Or()(r.first_start_time).format("HH:mm")),r.first_end_time&&(r.first_end_time=Or()(r.first_end_time).format("HH:mm")),r.second_start_time&&(r.second_start_time=Or()(r.second_start_time).format("HH:mm")),r.second_end_time&&(r.second_end_time=Or()(r.second_end_time).format("HH:mm")),el.forEach((function(e){r["first_start_time_".concat(e)]&&(r["first_start_time_".concat(e)]=Or()(r["first_start_time_".concat(e)]).format("HH:mm")),r["first_end_time_".concat(e)]&&(r["first_end_time_".concat(e)]=Or()(r["first_end_time_".concat(e)]).format("HH:mm")),r["second_start_time_".concat(e)]&&(r["second_start_time_".concat(e)]=Or()(r["second_start_time_".concat(e)]).format("HH:mm")),r["second_end_time_".concat(e)]&&(r["second_end_time_".concat(e)]=Or()(r["second_end_time_".concat(e)]).format("HH:mm"))})),t.state.timings&&(r.id=t.state.timings.id);qt(Kt(ge,[a.props.active_practiceId]),r,(function(e){t.loadData(),Qt(O,"Calendar Timings Saved successfully!!")}),(function(){}))}}))},a.state={redirect:!1,visible:!1,timings:null,loading:!0,visting_hour_same_week:!0,openPracticeDays:{},twoSessions:{}},a.loadData=a.loadData.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){var e=this;Ut(Kt(ge,[this.props.active_practiceId]),(function(t){var a=!0,n={},r={};if(t.length&&t[0]){var i=t[0];el.forEach((function(e){n[e]=i[e],r["is_two_sessions_".concat(e)]=i["is_two_sessions_".concat(e)]})),a=i.visting_hour_same_week,r.is_two_sessions=i.is_two_sessions}e.setState({timings:t[0],visting_hour_same_week:a,openPracticeDays:n,twoSessions:r,loading:!1})}),(function(){e.setState({timings:{},loading:!1})}))}},{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"render",value:function(){var e=this,t=this,a=this.props.formLayout?this.props.formLayout:{labelCol:{span:12},wrapperCol:{span:12}},n=this.props.form.getFieldDecorator;return r.a.createElement("div",null,r.a.createElement(vr.a,{onSubmit:this.handleSubmit},r.a.createElement(vr.a.Item,Object.assign({key:"today_first_day"},a),n("today_first_day",{valuePropName:"checked",initialValue:!!t.state.timings&&t.state.timings.today_first_day},{rules:[{message:Ft}]})(r.a.createElement(pr.a,null,"Always show today as first day on my calendar"))),r.a.createElement(vr.a.Item,Object.assign({key:"calendar_slot"},a,{label:"Show Calendar Slots of"}),n("calendar_slot",{initialValue:t.state.timings?t.state.timings.calendar_slot:null,rules:[{required:!0,message:Ft}]})(r.a.createElement(Er.a,{min:5})),r.a.createElement("span",{className:"ant-form-text"},"mins.")),r.a.createElement(vr.a.Item,Object.assign({key:"visting_hour_same_week"},a),n("visting_hour_same_week",{valuePropName:"checked",initialValue:!!t.state.timings&&t.state.timings.visting_hour_same_week},{rules:[{message:Ft}]})(r.a.createElement(pr.a,{onChange:this.changeVistingHourSameWeek},"Visiting hours are  same for all working days in a week"))),r.a.createElement(sr.a,{style:{margin:4}}),this.state.visting_hour_same_week?r.a.createElement("div",null,r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:4}),r.a.createElement(ir.a,{span:18},r.a.createElement(vr.a.Item,Object.assign({key:"is_two_sessions"},a),n("is_two_sessions",{valuePropName:"checked",initialValue:!!t.state.timings&&(t.state.timings.is_two_sessions||t.state.twoSessions.is_two_sessions)},{rules:[{message:Ft}]})(r.a.createElement(pr.a,{onChange:function(t){return e.changePracticeTwoSessions("is_two_sessions",t.target.checked)}},"Practice operates in two sessions."))),r.a.createElement(rr.a,{gutter:16},r.a.createElement(ir.a,{span:12},r.a.createElement(vr.a.Item,Object.assign({key:"first_start_time",label:"Practice Starts At"},a),n("first_start_time",{initialValue:t.state.timings&&t.state.timings.first_start_time?Or()(t.state.timings.first_start_time,"HH:mm"):null,rules:[{required:!0,message:Ft}]})(r.a.createElement(gr.a,{format:"HH:mm"})))),t.state.twoSessions.is_two_sessions?r.a.createElement("div",null,r.a.createElement(ir.a,{span:12},r.a.createElement(vr.a.Item,Object.assign({key:"first_end_time",label:"Lunch At"},a),n("first_end_time",{initialValue:t.state.timings&&t.state.timings.first_end_time?Or()(t.state.timings.first_end_time,"HH:mm"):null,rules:[{required:!0,message:Ft}]})(r.a.createElement(gr.a,{format:"HH:mm"})))),r.a.createElement(ir.a,{span:12},r.a.createElement(vr.a.Item,Object.assign({key:"second_start_time",label:"Resume At"},a),n("second_start_time",{initialValue:t.state.timings&&t.state.timings.second_start_time?Or()(t.state.timings.second_start_time,"HH:mm"):null,rules:[{required:!0,message:Ft}]})(r.a.createElement(gr.a,{format:"HH:mm"}))))):null,r.a.createElement(ir.a,{span:12},r.a.createElement(vr.a.Item,Object.assign({key:"second_end_time",label:"Practice Ends At"},a),n("second_end_time",{initialValue:t.state.timings&&t.state.timings.second_end_time?Or()(t.state.timings.second_end_time,"HH:mm"):null,rules:[{required:!0,message:Ft}]})(r.a.createElement(gr.a,{format:"HH:mm"}))))))),r.a.createElement(sr.a,{style:{margin:4}})):el.map((function(i){return r.a.createElement("div",{key:i},r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:4},r.a.createElement("h4",null,i.replace(/^\w/,(function(e){return e.toUpperCase()})))),r.a.createElement(ir.a,{span:18},r.a.createElement(vr.a.Item,Object.assign({key:"".concat(i)},a),n("".concat(i),{valuePropName:"checked",initialValue:!!t.state.timings&&(t.state.timings["".concat(i)]||t.state.openPracticeDays[i])},{rules:[{message:Ft}]})(r.a.createElement(pr.a,{onChange:function(e){return t.changeOpenPracticeDays(i,e.target.checked)}},"Practice is open on ".concat(i.replace(/^\w/,(function(e){return e.toUpperCase()})))))),t.state.openPracticeDays[i]?r.a.createElement("div",null,r.a.createElement(vr.a.Item,Object.assign({key:"is_two_sessions_".concat(i)},a),n("is_two_sessions_".concat(i),{valuePropName:"checked",initialValue:!!t.state.timings&&(t.state.timings["is_two_sessions_".concat(i)]||t.state.twoSessions["is_two_sessions_".concat(i)])},{rules:[{message:Ft}]})(r.a.createElement(pr.a,{onChange:function(t){return e.changePracticeTwoSessions("is_two_sessions_".concat(i),t.target.checked)}},"Practice operates in two sessions."))),r.a.createElement(rr.a,{gutter:16},r.a.createElement(ir.a,{span:12},r.a.createElement(vr.a.Item,Object.assign({key:"first_start_time_".concat(i),label:"Practice Starts At"},a),n("first_start_time_".concat(i),{initialValue:t.state.timings&&t.state.timings["first_start_time_".concat(i)]?Or()(t.state.timings["first_start_time_".concat(i)],"HH:mm"):null,rules:[{required:!0,message:Ft}]})(r.a.createElement(gr.a,{format:"HH:mm"})))),t.state.twoSessions["is_two_sessions_".concat(i)]?r.a.createElement("div",null,r.a.createElement(ir.a,{span:12},r.a.createElement(vr.a.Item,Object.assign({key:"first_end_time_".concat(i),label:"Lunch At"},a),n("first_end_time_".concat(i),{initialValue:t.state.timings&&t.state.timings["first_end_time_".concat(i)]?Or()(t.state.timings["first_end_time_".concat(i)],"HH:mm"):null,rules:[{required:!0,message:Ft}]})(r.a.createElement(gr.a,{format:"HH:mm"})))),r.a.createElement(ir.a,{span:12},r.a.createElement(vr.a.Item,Object.assign({key:"second_start_time_".concat(i),label:"Resume At"},a),n("second_start_time_".concat(i),{initialValue:t.state.timings&&t.state.timings["second_start_time_".concat(i)]?Or()(t.state.timings["second_start_time_".concat(i)],"HH:mm"):null,rules:[{required:!0,message:Ft}]})(r.a.createElement(gr.a,{format:"HH:mm"}))))):null,r.a.createElement(ir.a,{span:12},r.a.createElement(vr.a.Item,Object.assign({key:"second_end_time_".concat(i),label:"Practice Ends At"},a),n("second_end_time_".concat(i),{initialValue:t.state.timings&&t.state.timings["second_end_time_".concat(i)]?Or()(t.state.timings["second_end_time_".concat(i)],"HH:mm"):null,rules:[{required:!0,message:Ft}]})(r.a.createElement(gr.a,{format:"HH:mm"})))))):null)),r.a.createElement(sr.a,{style:{margin:4}}))})),r.a.createElement(vr.a.Item,a,r.a.createElement(da.a,{loading:t.state.loading,type:"primary",htmlType:"submit",style:{margin:5}},"Submit"),t.props.history?r.a.createElement(da.a,{style:{margin:5},onClick:function(){return t.props.history.goBack()}},"Cancel"):null)))}}]),t}(r.a.Component),al=vr.a.create()(tl),nl=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).handleCancel=function(){a.setState({visible:!1})},a.state={redirect:!1,visible:!1,appointmentCategories:null,loading:!0},a.loadAppointmentCategories=a.loadAppointmentCategories.bind(Object(f.a)(a)),a.deleteObject=a.deleteObject.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadAppointmentCategories()}},{key:"loadAppointmentCategories",value:function(){var e=this;Ut(Kt(oe,[this.props.active_practiceId]),(function(t){e.setState((function(e){return t.forEach((function(e){e.color=gi(fi(e.name))})),{appointmentCategories:t,loading:!1}}))}),(function(){}))}},{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"editCategory",value:function(e){this.setState({editingId:e.id,editingName:e.name,visible:!0,loading:!1})}},{key:"deleteObject",value:function(e){var t=this,a=e;a.is_active=!1;qt(Kt(oe,[this.props.active_practiceId]),a,(function(e){t.loadAppointmentCategories()}),(function(){}))}},{key:"render",value:function(){var e=this,t=this,a=[{dataIndex:"color",key:"color",render:function(e){return r.a.createElement(fa.a,{color:"#"+e},"#")}},{title:"Name",dataIndex:"name",key:"name"},{title:"Action",key:"action",render:function(a,n){return r.a.createElement("span",null,r.a.createElement("a",{onClick:function(){return e.editCategory(n)}},"  Edit"),r.a.createElement(sr.a,{type:"vertical"}),r.a.createElement(or.a,{title:"Are you sure delete this?",onConfirm:function(){return t.deleteObject(n)},okText:"Yes",cancelText:"No"},r.a.createElement("a",null,"Delete")))}}],n=[{label:"Category name",key:"name",placeholder:"Category Name",required:!0,type:S}],i=[{label:"Category name",key:"name",required:!0,initialValue:this.state.editingName,type:S}],l={successFn:function(e){t.handleCancel(),t.loadAppointmentCategories(),console.log(e),console.log("sucess"),Qt(O,"success")},errorFn:function(){},action:Kt(oe,[this.props.active_practiceId]),method:"post"},o=[{key:"id",value:this.state.editingId}],s=vr.a.create()(Vr);return r.a.createElement("div",null,r.a.createElement(s,Object.assign({defaultValues:[],formProp:l,fields:n},this.props)),r.a.createElement(sr.a,null),r.a.createElement(ti,{loading:this.state.loading,columns:a,dataSource:this.state.appointmentCategories}),r.a.createElement(nr.a,{title:"Edit Appointment Category",visible:this.state.visible,footer:null,onCancel:this.handleCancel},r.a.createElement(s,{defaultValues:o,formProp:l,fields:i}),r.a.createElement(da.a,{key:"back",onClick:this.handleCancel},"Return"),","))}}]),t}(r.a.Component),rl=hr.a.TabPane,il=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={loading:!0,defaultActiveKey:a.props.location.hash},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"Calendar Settings"),r.a.createElement(rr.a,null,r.a.createElement(cr.a,null,r.a.createElement(hr.a,{defaultActiveKey:this.state.defaultActiveKey},r.a.createElement(rl,{tab:r.a.createElement("span",null,r.a.createElement(va.a,{type:"schedule"}),"Calender Timings Settings"),key:"#timings"},r.a.createElement(al,Object.assign({},this.state,this.props))),r.a.createElement(rl,{tab:r.a.createElement("span",null,r.a.createElement(va.a,{type:"reconciliation"}),"Appointment Categories"),key:"#categories"},r.a.createElement(nl,this.props))))))}}]),t}(r.a.Component),ll=o.a.Sider,ol=function(e){function t(){return Object(d.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement(ll,{trigger:null,collapsible:!0,style:{overflow:"auto",minHeight:"100vh",background:"#fff"}},r.a.createElement(_a.a,{mode:"inline",defaultSelectedKeys:["5"]},r.a.createElement(_a.a.ItemGroup,{key:"g1",title:r.a.createElement(sr.a,{style:{margin:"0px"}},"Practice Settings")},this.props.activePracticePermissions.SettingsPracticeDetail?r.a.createElement(_a.a.Item,{key:"5"},r.a.createElement(Da.b,{to:"/settings/clinics"},r.a.createElement(va.a,{type:"shop"}),"Practice Details")):null,this.props.activePracticePermissions.SettingsCommunincations?r.a.createElement(_a.a.Item,{key:"7"},r.a.createElement(Da.b,{to:"/settings/communication-settings"},r.a.createElement(va.a,{type:"message"}),"Communication")):null,this.props.activePracticePermissions.SettingsCalendar?r.a.createElement(_a.a.Item,{key:"17"},r.a.createElement(Da.b,{to:"/settings/calendarsettings#timings"},r.a.createElement(va.a,{type:"schedule"}),"Calendar")):null,this.props.activePracticePermissions.SettingsPracticeStaff?r.a.createElement(_a.a.Item,{key:"6"},r.a.createElement(Da.b,{to:"/settings/clinics-staff"},r.a.createElement(va.a,{type:"team"}),"Practice Staff")):null,this.props.activePracticePermissions.ZoomUser?r.a.createElement(_a.a.Item,{key:"35"},r.a.createElement(Da.b,{to:"/settings/zoom-user"},r.a.createElement(va.a,{type:"user"}),r.a.createElement("span",{className:"nav-text"},"Zoom User"))):null,this.props.activePracticePermissions.SettingsAgents||this.props.allowAllPermissions?r.a.createElement(_a.a.Item,{key:"32"},r.a.createElement(Da.b,{to:"/settings/agents"},r.a.createElement(va.a,{type:"usergroup-add"}),r.a.createElement("span",{className:"nav-text"},"Advisor"))):null,this.props.activePracticePermissions.SettingsAgentRoles||this.props.allowAllPermissions?r.a.createElement(_a.a.Item,{key:"33"},r.a.createElement(Da.b,{to:"/settings/agent-roles"},r.a.createElement(va.a,{type:"apartment"}),r.a.createElement("span",{className:"nav-text"},"Advisor Roles"))):null,this.props.activePracticePermissions.SettingsProcedureCatalog?r.a.createElement(_a.a.Item,{key:"8"},r.a.createElement(Da.b,{to:"/settings/procedures"},r.a.createElement(va.a,{type:"folder-open"}),"Procedure Catalog")):null,this.props.activePracticePermissions.SettingsBilling?r.a.createElement(_a.a.Item,{key:"9"},r.a.createElement(Da.b,{to:"/settings/billing#taxcatalog"},r.a.createElement(va.a,{type:"audit"}),"Billing")):null,this.props.activePracticePermissions.SettingsLoyalty?r.a.createElement(_a.a.Item,{key:"10"},r.a.createElement(Da.b,{to:"/settings/loyalty"},r.a.createElement(va.a,{type:"trophy"}),"Loyalty")):null,this.props.activePracticePermissions.SettingsMLMSettings?r.a.createElement(_a.a.Item,{key:"30"},r.a.createElement(Da.b,{to:"/settings/mlm"},r.a.createElement(va.a,{type:"wallet"}),r.a.createElement("span",{className:"nav-text"},"MLM"))):null,this.props.activePracticePermissions.SettingsEMR?r.a.createElement(_a.a.Item,{key:"12"},r.a.createElement(Da.b,{to:"/settings/emr#complaints"},r.a.createElement(va.a,{type:"file-text"})," EMR")):null,this.props.activePracticePermissions.SettingsPrescriptions?r.a.createElement(_a.a.Item,{key:"13"},r.a.createElement(Da.b,{to:"/settings/prescriptions"},r.a.createElement(va.a,{type:"file-text"})," Prescriptions")):null,this.props.activePracticePermissions.SettingsLabs?r.a.createElement(_a.a.Item,{key:"14"},r.a.createElement(Da.b,{to:"/settings/labs"},r.a.createElement(va.a,{type:"experiment"}),"Labs")):null,this.props.activePracticePermissions.SettingsPrintouts?r.a.createElement(_a.a.Item,{key:"18"},r.a.createElement(Da.b,{to:"/settings/printout"},r.a.createElement(va.a,{type:"printer"})," Printout")):null,this.props.activePracticePermissions.SettingsMedicalHistory?r.a.createElement(_a.a.Item,{key:"15"},r.a.createElement(Da.b,{to:"/settings/medical-history"},r.a.createElement(va.a,{type:"medicine-box"})," Medical History")):null,this.props.activePracticePermissions.SettingsExpenseTypes?r.a.createElement(_a.a.Item,{key:"16"},r.a.createElement(Da.b,{to:"/settings/expense-types"},r.a.createElement(va.a,{type:"dollar"})," Expense Types")):null,r.a.createElement(_a.a.Item,{key:"20"},r.a.createElement(Da.b,{to:"/settings/integration"},r.a.createElement(va.a,{type:"link"})," My Integrations"))),r.a.createElement(_a.a.ItemGroup,{key:"g2",title:r.a.createElement(sr.a,{style:{margin:"0px"}},"Bed & Medicine")},this.props.activePracticePermissions.SettingsRoomTypes?r.a.createElement(_a.a.Item,{key:"22"},r.a.createElement(Da.b,{to:"/settings/roomtypes"},r.a.createElement(va.a,{type:"apartment"})," Room Types")):null,this.props.activePracticePermissions.SettingsBedPackages?r.a.createElement(_a.a.Item,{key:"23"},r.a.createElement(Da.b,{to:"/settings/bed-packages"},r.a.createElement(va.a,{type:"box-plot"})," Bed Packages")):null,this.props.activePracticePermissions.SettingsMedicinePackages?r.a.createElement(_a.a.Item,{key:"24"},r.a.createElement(Da.b,{to:"/settings/medicine-packages"},r.a.createElement(va.a,{type:"medicine-box"})," Medicine Packages")):null,this.props.activePracticePermissions.SettingsDiseaseList?r.a.createElement(_a.a.Item,{key:"25"},r.a.createElement(Da.b,{to:"/settings/diseases"},r.a.createElement(va.a,{type:"apartment"})," Disease List")):null)))}}]),t}(r.a.Component),sl=(a(1219),a(566)),cl=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault();var t=Object(f.a)(a);a.props.form.validateFieldsAndScroll((function(e,n){var r={};r={comissions:[],name:n.margin_name,level_count:n.level_count};for(var i=function(e){a.state.staffRoles.forEach((function(t){r.comissions.push({level:e,role:t.id,commision_percent:n[e][t.id]})}))},l=1;l<=t.state.level_count;l++)i(l);if(t.state.editId&&(r.id=t.state.editId),!e){t.setState({changePassLoading:!0,redirect:!0});qt(bt,r,(function(e){Qt(O,e.details),t.props.loadData(),t.props.history.goBack()}),(function(){}))}}))},a.add=function(e){var t=a.props.form,n=t.getFieldValue("keys").concat(e);t.setFieldsValue({keys:n})},a.setLevelCount=function(e){Object(f.a)(a).setState({level_count:e<5?e:5})},a.state={redirect:!1,level_count:3,margin:null,editRecord:a.props.editRecord?a.props.editRecord:null,editId:a.props.editId?a.props.editId:null,loading:!0,editRecordMargins:{}},a.changeRedirect=a.changeRedirect.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){if(this.loadRoles(),this.state.editRecord&&this.state.editId){var e={};this.state.editRecord.forEach((function(t){e[t.roleId]=t})),this.setState({editRecordMargins:e}),this.loadMlmData()}}},{key:"loadMlmData",value:function(){var e=this;Ut(bt,(function(t){t.map((function(t){t.id==e.props.editId&&e.setState({margin:t,loading:!1},(function(){e.setLevelCount(t.level_count)}))}))}),(function(){e.setState({loading:!0})}))}},{key:"loadRoles",value:function(){var e=this;Ut(vt,(function(t){e.setState({staffRoles:t,loading:!1})}),(function(){e.setState({loading:!1})}))}},{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"render",value:function(){var e=this,t=this.props.form,a=t.getFieldDecorator,n=(t.getFieldValue,{labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}});a("keys",{initialValue:[]});var i=[{title:"Roles",dataIndex:"name",key:"name"}];if(this.state.level_count)for(var l=function(t){i.push({title:"Level "+t,dataIndex:"Level "+t,key:"Level "+t,render:function(i,l){return r.a.createElement(vr.a.Item,Object.assign({},n,{required:!0,key:"".concat(t,"[").concat(l.id,"]")}),a("".concat(t,"[").concat(l.id,"]"),{validateTrigger:["onChange","onBlur"],initialValue:e.state.editRecordMargins&&e.state.editRecordMargins[l.id]?e.state.editRecordMargins[l.id][t]:null})(r.a.createElement(Er.a,{min:0,placeholder:"Percent Commission"})))}})},o=1;o<=this.state.level_count;o++)l(o);return r.a.createElement(cr.a,{title:"Manage MLM Commission"},r.a.createElement(vr.a,{onSubmit:this.handleSubmit,className:"login-form"},r.a.createElement(vr.a.Item,Object.assign({},n,{label:"Margin Name",required:!0,key:"margin_name"}),a("margin_name",{validateTrigger:["onChange","onBlur"],initialValue:this.state.margin?this.state.margin.name:null})(r.a.createElement(ma.a,{placeholder:"Margin Type Name"}))),r.a.createElement(vr.a.Item,Object.assign({},n,{label:"No of Levels",required:!1,key:"level_count"}),a("level_count",{validateTrigger:["onChange","onBlur"],initialValue:this.state.level_count})(r.a.createElement(Er.a,{min:1,max:5,placeholder:"Level Count",onChange:this.setLevelCount}))),r.a.createElement(lr.a,{loading:this.state.loading,bordered:!0,pagination:!1,columns:i,dataSource:this.state.staffRoles}),r.a.createElement(vr.a.Item,null,r.a.createElement("br",null),r.a.createElement(da.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"Set MLM Commissions"))),this.state.redirect&&r.a.createElement(y.a,{to:"/settings/mlm"}))}}]),t}(r.a.Component),ul=vr.a.create()(cl);function dl(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}hr.a.TabPane;var pl=sl.a.Panel,ml=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={mlmItems:[],productMargin:[],active_practiceId:a.props.active_practiceId,loading:!0},a.loadMlmData=a.loadMlmData.bind(Object(f.a)(a)),a.deleteObject=a.deleteObject.bind(Object(f.a)(a)),a.loadRoles=a.loadRoles.bind(Object(f.a)(a)),a.loadData=a.loadData.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){this.loadMlmData(),this.loadRoles(),this.loadProductMargin()}},{key:"loadMlmData",value:function(){var e=this;Ut(bt,(function(t){e.setState({mlmItems:t,loading:!1})}),(function(){e.setState({loading:!1})}))}},{key:"loadRoles",value:function(){var e=this;Ut(vt,(function(t){e.setState({staffRoles:t,loading:!1})}),(function(){e.setState({loading:!1})}))}},{key:"loadProductMargin",value:function(){var e=this;Ut("product_margin/",(function(t){e.setState({productMargin:t})}),(function(){}))}},{key:"editObject",value:function(e,t){this.setState({editId:e,editRecord:t,loading:!1},(function(){this.props.history.push("/settings/mlm/edit")}))}},{key:"deleteObject",value:function(e){var t=this,a=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?dl(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):dl(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,{is_active:!1});a.is_active=!1;Ht(Kt("product_margin/%s/",[e.id]),a,(function(e){t.loadData()}),(function(){}))}},{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"render",value:function(){var e=this,t=this,a={};this.state.staffRoles&&this.state.staffRoles.forEach((function(e){a[e.id]=e.name}));var n={};t.state.productMargin.forEach((function(e){n[e.id]=[{title:"Role",key:"role",dataIndex:"role"}];for(var t=1;t<=e.level_count;t++)n[e.id].push({title:"Level "+t,key:t,dataIndex:t,render:function(e){return r.a.createElement("span",null,e,"%")}})}));var i={};return t.state.mlmItems.forEach((function(e){i[e.id]=[],t.state.staffRoles&&t.state.staffRoles.forEach((function(t){var a={role:t.name,roleId:t.id};if(e.level_count)for(var n=1;n<=e.level_count;n++)if(e.comissions)for(var r=0;r<e.comissions.length;r++){var l=e.comissions[r];if(l.margin==e.id&&l.level==n&&t.id==l.role){a[n]=l.commision_percent;break}}i[e.id].push(a)}))})),r.a.createElement("div",null,r.a.createElement(y.d,null,r.a.createElement(y.b,{exact:!0,path:"/settings/mlm/generate",render:function(t){return r.a.createElement(ul,Object.assign({},t,{loadData:e.loadData}))}}),this.state.editId&&this.state.editRecord?r.a.createElement(y.b,{exact:!0,path:"/settings/mlm/edit",render:function(t){return r.a.createElement(ul,Object.assign({},t,{key:e.state.editId,loadData:e.loadData},e.state))}}):null,r.a.createElement(y.b,null,r.a.createElement("div",null,r.a.createElement("h2",null,"MLM Commissions",r.a.createElement(Da.b,{to:"/settings/mlm/generate"},r.a.createElement(da.a,{type:"primary",style:{float:"right"}},r.a.createElement(va.a,{type:"plus"}),"\xa0Add"))),r.a.createElement(cr.a,null,this.state.productMargin?r.a.createElement(sl.a,{defaultActiveKey:["0"],accordion:!0},this.state.productMargin.map((function(a,l){return r.a.createElement(pl,{header:a.name,key:l,extra:[r.a.createElement(da.a.Group,{size:"small"},r.a.createElement(da.a,{type:"primary",onClick:function(){return e.editObject(a.id,i[a.id])}},r.a.createElement(va.a,{type:"edit"})," Edit"),r.a.createElement(or.a,{title:"Are you sure delete this item?",onConfirm:function(){return t.deleteObject(a)},okText:"Yes",cancelText:"No"},r.a.createElement(da.a,{type:"danger"},r.a.createElement(va.a,{type:"delete"})," Delete")))]},r.a.createElement(lr.a,{loading:e.state.loading,pagination:!1,style:{marginTop:10},dataSource:i[a.id],rowKey:"role",columns:n[a.id],bordered:!0}))}))):r.a.createElement("h4",null,"No MLM Data"))))))}}]),t}(r.a.Component),hl=a(102);function fl(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function gl(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?fl(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):fl(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var yl=ma.a.TextArea,El=["PAGE","HEADER","PATIENT","FOOTER"].map((function(e){return r.a.createElement(br.a.Button,{value:e},e)})),bl=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).changeFormType=function(e){a.setState({selectedFormType:e.target.value})},a.handleSubmit=function(e){console.log(e),e.preventDefault();var t=Object(f.a)(a);a.props.form.validateFields((function(e,n){if(console.log(n),!e){var r=gl({type:t.state.type},n),i="logo_path";r[i]&&n[i].file&&n[i].file.response?r[i]=n[i].file.response.image_path:r[i]=t.state.print_setting.logo_path,r.save_for_all||(r=gl({},r,{sub_type:t.state.sub_type,id:t.state.print_setting.id})),delete r.save_for_all;var l=function(e){Qt(O,"Settings Saved Successfully!!")},o=function(){};n.save_for_all?qt(Kt(Ve,[a.props.active_practiceId]),r,l,o):qt(Kt(Ye,[a.props.active_practiceId,t.state.type,t.state.sub_type]),r,l,o)}}))},a.handleFormEditSettings=function(e,t){a.setState((function(a){return{editedPrintSettings:gl({},a.editedPrintSettings,Object(u.a)({},e,t))}}))},a.loadPDF=function(e){Object(f.a)(a);Ut(e,(function(e){e.report&&window.open(V+e.report)}),(function(){}))},a.onchangeHandle=function(e,t){Object(f.a)(a);a.setState(Object(u.a)({},e,t),(function(){this.state.is_patient_not&&this.props.form.resetFields()}))},a.state={type:a.props.type,sub_type:a.props.sub_type,selectedFormType:"PAGE",print_setting:{},editedPrintSettings:{}},a.loadData=a.loadData.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){var e=this;Ut(Kt(Ye,[this.props.active_practiceId,e.state.type,e.state.sub_type]),(function(t){t.length&&e.setState({print_setting:t[0]})}),(function(){}))}},{key:"render",value:function(){var e=this;console.log(this.state);var t={labelCol:{xs:{span:8},sm:{span:8},md:{span:8},lg:{span:8}},wrapperCol:{xs:{span:16},sm:{span:16},md:{span:16},lg:{span:16}}},a=Na.map((function(e){return r.a.createElement(ga.a.Option,{value:e},e)})),n=Ba.map((function(e){return r.a.createElement(br.a,{value:e.value},e.title)})),i=Ha.map((function(e){return r.a.createElement(br.a,{value:e.value},e.value)})),l=qa.map((function(e){return r.a.createElement(br.a,{value:e.value},e.value)})),o=za.map((function(e){return r.a.createElement(br.a,{value:e.value},e.title)})),s={name:"image",data:{name:"hello"},action:Vt("blogImage/"),headers:{authorization:"authorization-text"},onChange:function(e){"uploading"!==e.file.status&&console.log(e.file,e.fileList),"done"===e.file.status?hl.message.success("".concat(e.file.name," file uploaded successfully")):"error"===e.file.status&&hl.message.error("".concat(e.file.name," file upload failed."))}},c=(Ga.map((function(e){return r.a.createElement("li",null,r.a.createElement(pr.a,{value:e.value},e.value))})),Ya.map((function(e){return r.a.createElement(br.a,{value:e.value},e.value)}))),u=Va.map((function(e){return r.a.createElement(br.a,{value:e.value},e.value)})),d="?preview=true&type="+this.props.type+"&sub_type="+this.props.sub_type;if(this.state.print_setting){var p=gl({},this.state.print_setting,{},this.state.editedPrintSettings);Object.keys(p).forEach((function(e){p[e]&&(d+="&"+e+"="+encodeURIComponent(p[e]))}))}var m=this.props.form.getFieldDecorator;return r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:24},r.a.createElement(vr.a,{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"div_padding_top"},r.a.createElement(rr.a,{gutter:16},r.a.createElement(ir.a,{span:12},r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(br.a.Group,{buttonStyle:"solid",size:"small",onChange:this.changeFormType,defaultValue:this.state.selectedFormType},El),r.a.createElement("br",null)),r.a.createElement("div",{hidden:"PAGE"!=this.state.selectedFormType},r.a.createElement("h2",null,"Page Setup"),r.a.createElement(vr.a.Item,Object.assign({key:"page_size"},t,{label:"Paper Size"}),m("page_size",{initialValue:this.state.print_setting.page_size})(r.a.createElement(ga.a,{style:{width:"100%"},onChange:function(t){return e.handleFormEditSettings("page_size",t)}},a))),r.a.createElement(vr.a.Item,Object.assign({label:"Orientation"},t),m("page_orientation",{initialValue:this.state.print_setting.page_orientation})(r.a.createElement(br.a.Group,{onChange:function(t){return e.handleFormEditSettings("orientation",t.target.value)}},c))),r.a.createElement(vr.a.Item,Object.assign({label:r.a.createElement("span",null,"Printer Type\xa0")},t),m("page_print_type",{initialValue:this.state.print_setting.page_print_type})(r.a.createElement(br.a.Group,{onChange:function(t){return e.handleFormEditSettings("printerType",t.target.value)}},u))),r.a.createElement(vr.a.Item,Object.assign({key:"page_margin_top",label:r.a.createElement("span",null,"Top Margin")},t),m("page_margin_top",{initialValue:this.state.print_setting.page_margin_top})(r.a.createElement(Er.a,{min:0,max:10,onChange:function(t){return e.handleFormEditSettings("page_margin_top",t)}})),r.a.createElement("span",{className:"ant-form-text"},"Inches")),r.a.createElement(vr.a.Item,Object.assign({key:"page_margin_left",label:r.a.createElement("span",null,"Left Margin")},t),m("page_margin_left",{initialValue:this.state.print_setting.page_margin_left})(r.a.createElement(Er.a,{min:0,max:10,onChange:function(t){return e.handleFormEditSettings("page_margin_left",t)}})),r.a.createElement("span",{className:"ant-form-text"},"Inches")),r.a.createElement(vr.a.Item,Object.assign({key:"page_margin_bottom",label:r.a.createElement("span",null,"Bottom Margin")},t),m("page_margin_bottom",{initialValue:this.state.print_setting.page_margin_bottom})(r.a.createElement(Er.a,{min:0,max:10,onChange:function(t){return e.handleFormEditSettings("page_margin_bottom",t)}})),r.a.createElement("span",{className:"ant-form-text"},"Inches")),r.a.createElement(vr.a.Item,Object.assign({key:"page_margin_right",label:r.a.createElement("span",null,"Right Margin")},t),m("page_margin_right",{initialValue:this.state.print_setting.page_margin_right})(r.a.createElement(Er.a,{min:0,max:10,onChange:function(t){return e.handleFormEditSettings("page_margin_right",t)}})),r.a.createElement("span",{className:"ant-form-text"},"Inches"))),r.a.createElement("div",{hidden:"HEADER"!=this.state.selectedFormType},r.a.createElement("h2",null,"Customize Header"),r.a.createElement(vr.a.Item,Object.assign({key:"header_include"},t,{label:r.a.createElement("span",null,"Include Header\xa0")}),m("header_include",{initialValue:this.state.print_setting.header_include})(r.a.createElement(br.a.Group,{onChange:function(t){return e.handleFormEditSettings("header_include",t.target.value)}},n))),r.a.createElement(vr.a.Item,Object.assign({key:"header_text"},t,{label:r.a.createElement("span",null,"Header\xa0")}),m("header_text",{initialValue:this.state.print_setting.header_text})(r.a.createElement(ma.a,{onChange:function(t){return e.handleFormEditSettings("header_text",t.target.value)}}))),r.a.createElement(vr.a.Item,Object.assign({key:"header_left_text"},t,{label:r.a.createElement("span",null,"Left Text\xa0")}),m("header_left_text",{initialValue:this.state.print_setting.header_left_text})(r.a.createElement(yl,{onChange:function(t){return e.handleFormEditSettings("header_left_text",t.target.value)}}))),r.a.createElement(vr.a.Item,Object.assign({key:"header_right_text"},t,{label:r.a.createElement("span",null,"Right Text\xa0")}),m("header_right_text",{initialValue:this.state.print_setting.header_right_text})(r.a.createElement(yl,{onChange:function(t){return e.handleFormEditSettings("header_right_text",t.target.value)}}))),r.a.createElement(vr.a.Item,Object.assign({key:"logo_include"},t,{label:r.a.createElement("span",null,"Include Logo\xa0")}),m("logo_include",{initialValue:this.state.print_setting.logo_include})(r.a.createElement(br.a.Group,{onChange:function(t){return e.handleFormEditSettings("logo_include",t.target.value)}},o))),r.a.createElement(vr.a.Item,Object.assign({key:"logo_path"},t,{label:r.a.createElement("span",null,"Logo\xa0")}),m("logo_path")(r.a.createElement(fr.a,s,r.a.createElement(da.a,null,r.a.createElement(va.a,{type:"upload"})," Click to Upload")))),r.a.createElement(vr.a.Item,Object.assign({key:"logo_type"},t,{label:r.a.createElement("span",null,"Type\xa0")}),m("logo_type",{initialValue:this.state.print_setting.logo_type})(r.a.createElement(br.a.Group,{onChange:function(t){return e.handleFormEditSettings("logo_type",t.target.value)}},i))),r.a.createElement(vr.a.Item,Object.assign({key:"logo_alignment"},t,{label:r.a.createElement("span",null,"Alignment\xa0")}),m("logo_alignment",{initialValue:this.state.print_setting.logo_alignment})(r.a.createElement(br.a.Group,{onChange:function(t){return e.handleFormEditSettings("logo_alignment",t.target.value)}},l)))),r.a.createElement("div",{hidden:"PATIENT"!=this.state.selectedFormType},r.a.createElement("h2",null,"Customize Patient Details"),r.a.createElement(vr.a.Item,null,m("patient_details",{})(r.a.createElement(pr.a,{onChange:function(t){return e.onchangeHandle("is_patient_not",t.target.checked)}},"Show Patient Details"))),r.a.createElement("ul",{className:"subLists"},r.a.createElement(vr.a.Item,null,m("exclude_history",{})(r.a.createElement(pr.a,null,"Exclude Mediacal History"))),r.a.createElement(vr.a.Item,null,m("exclude_phone",{})(r.a.createElement(pr.a,null,"Exclude Patient Number"))),r.a.createElement(vr.a.Item,null,m("exclude_email",{})(r.a.createElement(pr.a,null,"Exclude Patient Email Id"))),r.a.createElement(vr.a.Item,null,m("exclude_address",{})(r.a.createElement(pr.a,null,"Exclude address"))),r.a.createElement(vr.a.Item,null,m("exclude_blood_group",{})(r.a.createElement(pr.a,null,"Exclude Blood Group"))),r.a.createElement(vr.a.Item,null,m("exclude_gender_dob",{})(r.a.createElement(pr.a,null,"Exclude Patient Gender & DOB"))))),r.a.createElement("div",{hidden:"FOOTER"!=this.state.selectedFormType},r.a.createElement("h2",null,"Footer Setup"),r.a.createElement(vr.a.Item,Object.assign({key:"footer_margin_top"},t,{label:r.a.createElement("span",null,"Top Margin\xa0")}),m("footer_margin_top",{initialValue:this.state.print_setting.footer_margin_top})(r.a.createElement(Er.a,{min:0,max:10,onChange:function(t){return e.handleFormEditSettings("footer_margin_top",t)}})),r.a.createElement("span",{className:"ant-form-text"},"Inches")),r.a.createElement(vr.a.Item,Object.assign({key:"footer_text"},t,{label:r.a.createElement("span",null,"Full Width Content\xa0")}),m("footer_text",{initialValue:this.state.print_setting.footer_text})(r.a.createElement(yl,{rows:3,onChange:function(t){return e.handleFormEditSettings("footer_text",t.target.value)}}))),r.a.createElement(vr.a.Item,Object.assign({key:"footer_left_text"},t,{label:r.a.createElement("span",null,"Left Signature\xa0")}),m("footer_left_text",{initialValue:this.state.print_setting.footer_left_text})(r.a.createElement(yl,{onChange:function(t){return e.handleFormEditSettings("footer_left_text",t.target.value)}}))),r.a.createElement(vr.a.Item,Object.assign({key:"footer_right_text"},t,{label:r.a.createElement("span",null,"Right Signature\xa0")}),m("footer_right_text",{initialValue:this.state.print_setting.footer_right_text})(r.a.createElement(yl,{onChange:function(t){return e.handleFormEditSettings("footer_right_text",t.target.value)}})))),r.a.createElement(rr.a,null,r.a.createElement(sr.a,null),r.a.createElement(vr.a.Item,Object.assign({},t,{key:"save_for_all"}),m("save_for_all",{})(r.a.createElement(pr.a,null,r.a.createElement("b",null," Save for all")))),r.a.createElement(vr.a.Item,null,r.a.createElement(da.a,{style:{margin:5},type:"primary",htmlType:"submit",value:"ALL"},"Save"),r.a.createElement(da.a,{style:{margin:5},onClick:function(){return e.loadPDF("patients/print/"+d+"&pdf=1")}},"Show Print Preview")))),r.a.createElement(ir.a,{span:12,style:{textAlign:"center"}},r.a.createElement("div",{style:{position:"absolute",backgroundColor:"black",color:"white",padding:10,right:20,top:50}},r.a.createElement("b",null,"PREVIEW")),r.a.createElement("iframe",{src:Vt("patients/print/"+d),style:{width:"100%",height:"100%",minHeight:"600px",boxShadow:"-2px 0px 4px #B8B8B8"}})))))))}}]),t}(r.a.Component),vl=vr.a.create()(bl),_l=hr.a.TabPane,Ol=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).setRandomKey=function(e){console.log(e),a.setState({randomKey:Math.random(),activeKey:e})},a.state={randomKey:Math.random(),activeKey:"a"},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this;return r.a.createElement("div",null,r.a.createElement("h2",null,"Print Settings"),r.a.createElement(hr.a,{defaultActiveKey:"EMR",size:"small",type:"card"},r.a.createElement(_l,{tab:r.a.createElement("span",null,r.a.createElement(va.a,{type:"calculator"}),"EMR"),key:"EMR"},r.a.createElement(cr.a,null,r.a.createElement("h4",null,r.a.createElement("div",null,r.a.createElement(hr.a,{size:"small",onChange:this.setRandomKey},La.map((function(a,n){return r.a.createElement(_l,{tab:a.title,key:n},r.a.createElement(vl,{key:n.toString()==t.state.activeKey.toString()?a.title+t.state.randomKey:a.title,sub_type:a.title,active_practiceId:e.props.active_practiceId,type:"EMR"}))}))))))),r.a.createElement(_l,{tab:r.a.createElement("span",null,r.a.createElement(va.a,{type:"audit"}),"BILLING"),key:"BILLING"},r.a.createElement(cr.a,null,r.a.createElement("h4",null,r.a.createElement("div",null,r.a.createElement(hr.a,{size:"small",onChange:this.setRandomKey},Fa.map((function(a,n){return r.a.createElement(_l,{tab:a.title,key:n},r.a.createElement(vl,{key:n.toString()==t.state.activeKey.toString()?a.title+t.state.randomKey:a.title,sub_type:a.title,active_practiceId:e.props.active_practiceId,type:"BILLING"}))})))))))))}}]),t}(r.a.Component),Dl=hr.a.TabPane,kl=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={integrateData:[],loading:!0},a.loadData=a.loadData.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentWillMount",value:function(){this.props&&this.loadData()}},{key:"loadData",value:function(){var e=this;Ut(Kt(Mt,[e.props.user.id]),(function(t){e.setState({integrateData:t,loading:!1})}),(function(){e.setState({loading:!1})}))}},{key:"render",value:function(){var e=this,t=[{key:"login",type:S,initialValue:this.state.integrateData.login,required:!0,label:"Email Id"},{key:"password",type:"password",initialValue:this.state.integrateData.password,required:!0,label:"Password"}],a={method:"post",successFn:function(t){e.loadData()},errorFn:function(){},action:Kt(Mt,[this.props.user.id])},n=hl.Form.create()(Vr);return r.a.createElement(rr.a,null,r.a.createElement(cr.a,null,r.a.createElement("h2",null,"My Integrations"),r.a.createElement(hr.a,null,r.a.createElement(Dl,{tab:r.a.createElement("span",null,r.a.createElement(va.a,{type:"check-circle"}),"Task Tracker"),key:"Complaints"},r.a.createElement(n,{fields:t,formProp:a})))))}}]),t}(r.a.Component),Pl=function(e){function t(e){return Object(d.a)(this,t),Object(m.a)(this,Object(h.a)(t).call(this,e))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"Email PDF Settings"),r.a.createElement(cr.a,null,r.a.createElement(vl,{sub_type:"INVOICE",active_practiceId:this.props.active_practiceId,type:"MAIL"})))}}]),t}(r.a.Component),Sl=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).loadRequiredData=function(){var e=Object(f.a)(a);Ut(Kt(Pt,[a.props.active_practiceId]),(function(t){e.setState({roomTypes:t})}),(function(){}))},a.state={editPackage:a.props.editPackage?a.props.editPackage:null,roomTypes:[],taxes:[]},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadRequiredData(),this.loadTaxes()}},{key:"loadTaxes",value:function(){var e=this;Ut(Kt($,[this.props.active_practiceId]),(function(t){e.setState({taxes:t})}),(function(){}))}},{key:"render",value:function(){var e=this,t=vr.a.create()(Vr),a=[{label:"Package Name",key:"name",required:!0,initialValue:this.props.editPackage?this.props.editPackage.name:null,type:S},{label:"Days of Booking",key:"no_of_days",required:!0,initialValue:this.props.editPackage?this.props.editPackage.no_of_days:null,type:I,follow:"INR"},{label:"Normal Price",key:"normal_price",required:!0,initialValue:this.props.editPackage?(this.props.editPackage.normal_price+this.props.editPackage.normal_tax_value).toFixed(2):null,type:I,follow:"INR"},{label:"Tatkal Price",key:"tatkal_price",required:!0,initialValue:this.props.editPackage?(this.props.editPackage.tatkal_price+this.props.editPackage.tatkal_tax_value).toFixed(2):null,type:I,follow:"INR"},{label:"Image",key:"image",initialValue:this.props.editPackage?this.props.editPackage.image:null,type:T},{label:"Room Type",key:"room",required:!0,initialValue:this.props.editPackage?this.props.editPackage.room:null,type:x,options:this.state.roomTypes.map((function(e){return Object.create({label:e.name,value:e.id})}))},{label:"Taxes",key:"taxes",initialValue:this.props.editPackage&&this.props.editPackage.taxes?this.props.editPackage.taxes.map((function(e){return e.id})):[],type:j,options:this.state.taxes.map((function(e){return Object.create({label:e.name+"("+e.tax_value+"%)",value:e.id})}))}],n={method:"post",action:Kt(St,[this.props.active_practiceId]),successFn:function(){Qt(O,"Package Saved Successfully"),e.props.loadData&&e.props.loadData(),e.props.history.push("/settings/bed-packages")},errorFn:function(){}},i=[];return this.state.editPackage&&i.push({key:"id",value:this.state.editPackage.id}),r.a.createElement("div",null,r.a.createElement(cr.a,null,r.a.createElement(t,Object.assign({fields:a,formProp:n,defaultValues:i,title:this.state.editPackage?"Edit Bed Package":"Add Bed Packages"},this.props))))}}]),t}(r.a.Component),xl=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).loadData=function(){var e=Object(f.a)(a);Ut(Kt(St,[a.props.active_practiceId]),(function(t){e.setState({loading:!1,packages:t})}),(function(){e.setState({loading:!1})}))},a.editObject=function(e){a.setState({editPackage:e,loading:!1}),a.props.history.push("/settings/bed-packages/edit")},a.state={loading:!1,packages:[]},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"deleteObject",value:function(e){var t=this,a=e;a.is_active=!1;qt(Kt(St,[this.props.active_practiceId]),a,(function(e){t.loadData()}),(function(){}))}},{key:"render",value:function(){var e=this,t=this,a=[{dataIndex:"image",key:"image",render:function(e){return e?r.a.createElement("img",{src:Bt(e),alt:"",style:{maxWidth:200,maxHeight:100}}):null}},{title:"Package Name",dataIndex:"name",key:"name"},{title:"Days",dataIndex:"no_of_days",key:"no_of_days"},{title:"Normal Price+tax (INR)",dataIndex:"normal_price",key:"normal_price",render:function(e,t){return r.a.createElement("p",null,(t.normal_price+t.normal_tax_value).toFixed(2))}},{title:"Tatkal Price+tax (INR)",dataIndex:"tatkal_price",key:"tatkal_price",render:function(e,t){return r.a.createElement("p",null,(t.tatkal_price+t.tatkal_tax_value).toFixed(2))}},{title:"Action",key:"action",render:function(a,n){return r.a.createElement("span",null,r.a.createElement("a",{onClick:function(){return e.editObject(n)}},"Edit"),r.a.createElement(sr.a,{type:"vertical"}),r.a.createElement(or.a,{title:"Are you sure delete this prescription?",onConfirm:function(){return t.deleteObject(n)},okText:"Yes",cancelText:"No"},r.a.createElement("a",null,"Delete")))}}];return r.a.createElement(y.d,null,r.a.createElement(y.b,{path:"/settings/bed-packages/add",render:function(t){return r.a.createElement(Sl,Object.assign({},e.props,t,{loadData:e.loadData}))}}),r.a.createElement(y.b,{path:"/settings/bed-packages/edit",render:function(t){return e.state.editPackage?r.a.createElement(Sl,Object.assign({},e.state,e.props,t,{loadData:e.loadData})):r.a.createElement(y.a,{to:"/settings/bed-packages"})}}),r.a.createElement(y.b,null,r.a.createElement(cr.a,{title:r.a.createElement("h4",null,"Bed Packages ",r.a.createElement(Da.b,{to:"/settings/bed-packages/add"},r.a.createElement(da.a,{style:{float:"right"},type:"primary"},r.a.createElement(va.a,{type:"plus"})," Add")))},r.a.createElement(ti,{dataSource:this.state.packages,loading:this.state.loading,columns:a}))))}}]),t}(r.a.Component),jl=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).handleCancel=function(){a.setState({visible:!1})},a.showDeletedExpenses=function(){a.setState({showDeleted:!0,deletedLoading:!0}),a.loadData(!0)},a.state={redirect:!1,visible:!1,rooms:null,loading:!0,showDeleted:!1,deletedLoading:!1,deletedRooms:[],editObj:{}},a.loadData=a.loadData.bind(Object(f.a)(a)),a.deleteObject=a.deleteObject.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this,a=function(a){console.log("get table"),e?t.setState({deletedRooms:a,deletedLoading:!1}):t.setState({rooms:a,loading:!1})},n=function(){e?t.setState({deletedLoading:!1}):t.setState({loading:!1})};e?Ut(Kt(Pt,[this.props.active_practiceId]),a,n,{deleted:!0,practice:this.props.active_practiceId}):Ut(Kt(Pt,[this.props.active_practiceId]),a,n)}},{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"editTax",value:function(e){this.setState({editObj:e,visible:!0})}},{key:"deleteObject",value:function(e,t){var a=this,n=e;n.is_active=t;qt(Kt(Pt,[this.props.active_practiceId]),n,(function(e){a.loadData(),a.state.showDeleted&&a.loadData(!0)}),(function(){}))}},{key:"render",value:function(){var e=this,t=this,a=[{title:"Room Type",dataIndex:"name",key:"name"},{title:"Normal Bed Count",dataIndex:"normal_seats",key:"normal_seats"},{title:"Tatkal Bed Count",dataIndex:"tatkal_seats",key:"tatkal_seats"},{title:"Action",key:"action",render:function(a,n){return n.is_active?r.a.createElement("span",null,r.a.createElement("a",{onClick:function(){return e.editTax(n)}},"  Edit"),r.a.createElement(sr.a,{type:"vertical"}),r.a.createElement(or.a,{title:"Are you sure to delete this?",onConfirm:function(){return t.deleteObject(n,!1)},okText:"Yes",cancelText:"No"},r.a.createElement("a",null,"Delete"))):r.a.createElement("span",null,r.a.createElement(or.a,{title:"Are you sure show this?",onConfirm:function(){return t.deleteObject(n,!0)},okText:"Yes",cancelText:"No"},r.a.createElement("a",null,"Show")))}}],n=[{label:"Room Type",key:"name",required:!0,type:S},{label:"Normal Bed Count",key:"normal_seats",required:!0,type:I,min:0},{label:"Tatkal Bed Count",key:"tatkal_seats",required:!0,type:I,min:0}],i=[{label:"Room Type",key:"name",required:!0,initialValue:this.state.editObj.name,type:S},{label:"Normal Bed Count",key:"normal_seats",required:!0,initialValue:this.state.editObj.normal_seats,type:I,min:0},{label:"Tatkal Bed Count",required:!0,initialValue:this.state.editObj.tatkal_seats,key:"tatkal_seats",type:I,min:0}],l={successFn:function(e){t.handleCancel(),t.loadData(),console.log(e),console.log("sucess"),Qt(O,"success")},errorFn:function(){},action:Kt(Pt,[this.props.active_practiceId]),method:"post"},o=[{key:"practice",value:this.props.active_practiceId}],s=[{key:"practice",value:this.props.active_practiceId},{key:"id",value:this.state.editObj.id}],c=vr.a.create()(Vr);return r.a.createElement("div",null,r.a.createElement("h2",null,"Room Types"),r.a.createElement(cr.a,null,r.a.createElement(c,{defaultValues:o,formProp:l,fields:n}),r.a.createElement(sr.a,null),r.a.createElement(ti,{loading:this.state.loading,columns:a,dataSource:this.state.rooms})),r.a.createElement(nr.a,{visible:this.state.visible,footer:null,onCancel:this.handleCancel},r.a.createElement(c,{title:"Edit Room Type",defaultValues:s,formProp:l,fields:i}),r.a.createElement(da.a,{key:"back",onClick:this.handleCancel},"Return"),","))}}]),t}(r.a.Component),Il=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={redirect:!1,fields:[{label:"Offer Name ",key:"code",placeholder:"Offer Name",required:!0,type:S},{label:"Description ",key:"description",placeholder:"E.g. 20% off on all services",type:S},{label:"Discount",key:"discount",required:!0,type:I},{label:"Discount Unit",key:"unit",required:!0,options:[{label:"Percent",value:"%"},{label:"Rupees",value:"INR"}],type:x,initialValue:"%"}]},a.changeRedirect=a.changeRedirect.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"render",value:function(){var e=this,t={successFn:function(t){Qt(O,"success"),e.props.loadData&&e.props.loadData()},errorFn:function(){},action:Kt(ee,[this.props.active_practiceId]),method:"post",beforeSubmit:function(e){console.log(e)}},a=vr.a.create()(Vr);return r.a.createElement("div",null,r.a.createElement(a,Object.assign({formProp:t,fields:this.state.fields},this.props)),this.state.redirect&&r.a.createElement(y.a,{to:"/settings/loyalty"}))}}]),t}(r.a.Component),Cl=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={offers:null,loading:!0},a.loadData=a.loadData.bind(Object(f.a)(a)),a.deleteObject=a.deleteObject.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentWillMount",value:function(){this.loadData()}},{key:"loadData",value:function(){var e=this;Ut(Kt(ee,[this.props.active_practiceId]),(function(t){console.log("get table"),e.setState({offers:t,loading:!1})}),(function(){e.setState({loading:!0})}))}},{key:"deleteObject",value:function(e){var t=this,a=e;a.is_active=!1;qt(Kt(ee,[this.props.active_practiceId]),a,(function(e){t.loadData()}),(function(){}))}},{key:"render",value:function(){var e=this,t=[{title:"Name",dataIndex:"code",key:"code"},{title:"Description",dataIndex:"description",key:"description"},{title:"Discount",dataIndex:"discount",key:"discount"},{title:"Discount Unit",dataIndex:"unit",key:"unit"},{title:"Action",key:"action",render:function(t,a){return r.a.createElement(or.a,{title:"Are you sure delete this Offer?",onConfirm:function(){return e.deleteObject(a)},okText:"Yes",cancelText:"No"},r.a.createElement("a",null,"Delete"))}}];return r.a.createElement(rr.a,null,r.a.createElement(Il,Object.assign({},this.props,{loadData:this.loadData})),r.a.createElement(sr.a,null),r.a.createElement(ti,{loading:this.state.loading,columns:t,dataSource:this.state.offers}))}}]),t}(r.a.Component),wl=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=[{label:"Membership Name ",key:"name",placeholder:"Membership Name",required:!0,type:S},{label:"Fee",key:"fee",required:!0,type:I,follow:"INR"},{label:"Benefit",key:"benefit",required:!0,type:I,follow:"%"},{label:"Validity",key:"validity",required:!0,type:I,follow:"Months"}],t=this,a={successFn:function(e){Qt(O,"success"),t.props.loadData&&t.props.loadData()},errorFn:function(){},action:Kt(ut,[this.props.active_practiceId]),method:"post"},n=[{key:"practice",value:this.state.active_practiceId}],i=vr.a.create()(Vr);return r.a.createElement(rr.a,null,r.a.createElement(i,Object.assign({fields:e,formProp:a,defaultValues:n},this.props)))}}]),t}(r.a.Component),Ml=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).loadData=function(){var e=Object(f.a)(a);Ut(Kt(ut,[a.props.active_practiceId]),(function(t){e.setState({membership:t})}),(function(){}))},a.state={membership:[]},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"deleteObject",value:function(e){var t=this,a=e;a.is_active=!1;qt(Kt(ut,[this.props.active_practiceId]),a,(function(e){t.loadData()}),(function(){}))}},{key:"render",value:function(){var e=this,t=[{title:"Name",dataIndex:"name",key:"name"},{title:"Fee (INR)",dataIndex:"fee",key:"fee"},{title:"Benefit (%)",dataIndex:"benefit",key:"benefit"},{title:"Opening Balance (INR)",dataIndex:"fee",key:"opening",render:function(e,t){return r.a.createElement("span",null,t.fee+t.fee*t.benefit/100)}},{title:"Validity (Months)",dataIndex:"validity",key:"validity"},{title:"Action",key:"action",render:function(t,a){return r.a.createElement(or.a,{title:"Are you sure delete this prescription?",onConfirm:function(){return e.deleteObject(a)},okText:"Yes",cancelText:"No"},r.a.createElement("a",null,"Delete"))}}];return r.a.createElement(rr.a,null,r.a.createElement(wl,Object.assign({},this.props,{loadData:this.loadData})),r.a.createElement(sr.a,null),r.a.createElement(ti,{loading:this.state.loading,columns:t,dataSource:this.state.membership}))}}]),t}(r.a.Component),Al=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).loadPatient=function(e){var t=Object(f.a)(a);e&&Ut(Kt(We,[e]),(function(e){e.results.length>0&&t.setState({patientList:e.results})}),(function(){}))},a.handleSubmit=function(e){var t=Object(f.a)(a);t.setState({loading:!0}),e.preventDefault(),a.props.form.validateFields((function(e,a){if(!e){var n=a;n.practice=t.props.active_practiceId;qt(ne,n,(function(e){t.setState({loading:!1}),Qt(O,"Successfully Created!"),t.props.form.resetFields(),t.props.loadData()}),(function(){}))}}))},a.state={editPromoCode:[],patientList:[],loading:!1},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.state.patientList,a={labelCol:{span:8},wrapperCol:{span:14}},n=this.props.form.getFieldDecorator;return r.a.createElement("div",null,r.a.createElement(vr.a,{onSubmit:this.handleSubmit},r.a.createElement(vr.a.Item,Object.assign({label:"Promo Code"},a,{key:"promo_code"}),n("promo_code",{initialValue:""})(r.a.createElement(ma.a,{placeholder:"Promo Code"}))),r.a.createElement(vr.a.Item,Object.assign({label:"Promo Code Value"},a,{key:"code_value"}),n("code_value",{initialValue:""})(r.a.createElement(Er.a,{placeholder:"Promo Code Value"}))),r.a.createElement(vr.a.Item,Object.assign({label:"Code Type"},a,{key:"code_type"}),n("code_type",{initialValue:""})(r.a.createElement(ga.a,{placeholder:"Code Type",style:{width:"100%"}},Vn.map((function(e){return r.a.createElement(ga.a.Option,{value:e.value},e.label," (",e.value,")")}))))),r.a.createElement(vr.a.Item,Object.assign({label:"Min Order"},a,{key:"minimum_order"}),n("minimum_order",{initialValue:""})(r.a.createElement(Er.a,{placeholder:"Min Order"}))),r.a.createElement(vr.a.Item,Object.assign({label:"Max Discount"},a,{key:"maximum_discount"}),n("maximum_discount",{initialValue:""})(r.a.createElement(Er.a,{placeholder:"Min Order"}))),r.a.createElement(vr.a.Item,Object.assign({label:"Expiry Date"},a,{key:"expiry_date"}),n("expiry_date",{initialValue:Or()()})(r.a.createElement(yr.a,{format:"YYYY/MM/DD"}))),r.a.createElement(vr.a.Item,Object.assign({label:"Patients"},a,{key:"patient"}),n("patients",{initialValue:[]})(r.a.createElement(ga.a,{mode:"multiple",placeholder:"Select Patient",style:{width:"100%"},showSearch:!0,onSearch:this.loadPatient,filterOption:!1},t.map((function(e){return r.a.createElement(ga.a.Option,{value:e.id},e.user.first_name," (",e.custom_id,")")})))),r.a.createElement("span",{className:"ant-form-text"},"If no patient is selected, promo code will be available to all patients.")),r.a.createElement(vr.a.Item,a,r.a.createElement(da.a,{type:"primary",htmlType:"submit",style:{margin:5}},"Submit"),this.props.history?r.a.createElement(da.a,{style:{margin:5},onClick:function(){return e.props.history.goBack()}},"Cancel"):null)))}}]),t}(r.a.Component),Tl=vr.a.create()(Al),Rl=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).loadData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=Object(f.a)(a);a.setState({loading:!0});var n=function(e){t.setState({promoCode:e.results,nextPage:e.next,loading:!1})},r=function(){t.setState({loading:!1})};Ut(Kt(ne,[a.props.active_practiceId]),n,r,{page:e,practice:a.props.active_practiceId})},a.deleteObject=function(e){var t=Object(f.a)(a);Ht(Kt(re,[e.id]),{is_active:!1},(function(e){t.loadData()}),(function(){}))},a.state={loading:!1,promoCode:[]},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentWillMount",value:function(){this.loadData()}},{key:"render",value:function(){var e=this,t=this.state,a=t.promoCode,n=t.loading,i=[{title:"Code Name",dataIndex:"promo_code",key:"promo_code"},{title:"Promo Code Value",dataIndex:"promo_code",key:"promo_code"},{title:"Type",dataIndex:"code_type",key:"code_type"},{title:"Min Order",dataIndex:"minimum_order",key:"minimum_order"},{title:"Max Discount",dataIndex:"maximum_discount",key:"maximum_discount"},{title:"Expiry Date",dataIndex:"expiry_date",render:function(e,t){return Or()(t.expiry_date).format("YYYY-MM-DD")}},{title:"Action",render:function(t,a){return r.a.createElement(or.a,{title:"Are you sure delete this promo code?",onConfirm:function(){return e.deleteObject(a)},okText:"Yes",cancelText:"No"},r.a.createElement("a",null,"Delete"))}}];return r.a.createElement(rr.a,null,r.a.createElement(Tl,Object.assign({},this.props,{loadData:this.loadData})),r.a.createElement(sr.a,null),r.a.createElement(lr.a,{loading:n,columns:i,dataSource:a,pagination:!1}),r.a.createElement(wi,{loading:this.state.loading,hidden:!this.state.nextPage,loaderFunction:function(){return e.loadData(e.state.nextPage)}}))}}]),t}(r.a.Component),Ll=hr.a.TabPane,Fl=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement(rr.a,null,r.a.createElement("h2",null,"Loyalty Settings"),r.a.createElement(cr.a,null,r.a.createElement(hr.a,null,r.a.createElement(Ll,{tab:r.a.createElement("span",null,r.a.createElement(va.a,{type:"percentage"}),"Offers"),key:"#offers"},r.a.createElement(Cl,this.props)),r.a.createElement(Ll,{tab:r.a.createElement("span",null,r.a.createElement(va.a,{type:"pound"}),"Membership"),key:"#membership"},r.a.createElement(Ml,this.props)),r.a.createElement(Ll,{tab:r.a.createElement("span",null,r.a.createElement(va.a,{type:"pound"}),"Promo Code"),key:"#promocode"},r.a.createElement(Rl,this.props)))))}}]),t}(r.a.Component),Nl=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={redirect:!1,editFields:a.props.editTest?a.props.editTest:null,productMargin:[]},a.changeRedirect=a.changeRedirect.bind(Object(f.a)(a)),a.loadProductMargin(),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e,editFields:{}})}},{key:"loadProductMargin",value:function(){var e=this;Ut("product_margin/",(function(t){e.setState({productMargin:t})}),(function(){}))}},{key:"render",value:function(){var e=this,t=this,a=hl.Form.create()(Vr),n=[{label:"Test Name",key:"name",placeholder:"Test Name",type:S,initialValue:this.state.editFields?this.state.editFields.name:null,required:!0},{label:"Cost",key:"cost",type:I,initialValue:this.state.editFields?this.state.editFields.cost:null,required:!0,follow:"INR",min:1},{label:"MLM Margin Type",type:x,initialValue:this.state.editFields?this.state.editFields.margin:null,key:"margin",required:!0,options:t.state.productMargin.map((function(e){return{label:e.name,value:e.id}}))},{label:"Instructions",key:"instruction",placeholder:"Test Instructions",initialValue:this.state.editFields?this.state.editFields.instruction:null,type:"textfield"}],i={successFn:function(e){Qt(O,"success"),t.props.loadData()},errorFn:function(){},action:Kt(fe,[t.props.active_practiceId]),method:"post"},l=[];return this.state.editFields&&l.push({key:"id",value:this.state.editFields.id}),r.a.createElement(rr.a,null,r.a.createElement(y.b,{exact:!0,path:"/settings/labs/add",render:function(t){return r.a.createElement(a,Object.assign({title:"Add Lab",changeRedirect:e.changeRedirect,formProp:i,fields:n},t))}}),r.a.createElement(y.b,{exact:!0,path:"/settings/labs/edit",render:function(t){return e.state.editFields?r.a.createElement(a,Object.assign({title:"Add Lab",defaultValues:l,changeRedirect:e.changeRedirect},t,{formProp:i,fields:n})):r.a.createElement(y.a,{to:"/settings/labs"})}}),r.a.createElement(sr.a,null),this.state.redirect&&r.a.createElement(y.a,{to:"/settings/labs"}))}}]),t}(r.a.Component),Yl=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={tests:null,editTest:null,loading:!0,productMargin:null},a.editLabs=a.editLabs.bind(Object(f.a)(a)),a.loadData=a.loadData.bind(Object(f.a)(a)),a.deleteTest=a.deleteTest.bind(Object(f.a)(a)),a.loadProductMargin=a.loadProductMargin.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadData(),this.loadProductMargin()}},{key:"loadData",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=this,t=function(t){console.log("get table"),t.current?e.setState({next:t.next,tests:t.results,loading:!1}):e.setState((function(e){return{next:t.next,tests:[].concat(Object(Oa.a)(e.tests),Object(Oa.a)(t.results)),loading:!1}}))},a=function(){e.setState({loading:!1})};Ut(Kt(fe,[e.props.active_practiceId]),t,a)}},{key:"editLabs",value:function(e){var t=this;this.setState({editTest:e,loading:!1},(function(){t.props.history.push("/settings/labs/edit")}))}},{key:"deleteTest",value:function(e){var t=this,a=e;a.is_active=!1;qt(Kt(fe,[this.props.active_practiceId]),a,(function(e){t.loadData()}),(function(){}))}},{key:"loadProductMargin",value:function(){var e=this;Ut("product_margin/",(function(t){e.setState({productMargin:t})}),(function(){}))}},{key:"render",value:function(){var e=this,t=this,a={};this.state.productMargin&&this.state.productMargin.forEach((function(e){a[e.id]=e.name}));var n=[{title:"Name",dataIndex:"name",key:"code"},{title:"Cost",dataIndex:"cost",key:"cost"},{title:" Test Instructions",dataIndex:"instruction",key:"instruction"},{title:" MLM Margin",key:"margin",render:function(e,t){return r.a.createElement("span",null," ",a[t.margin])}},{title:"Action",key:"action",render:function(e,a){return r.a.createElement("span",null,r.a.createElement("a",{onClick:function(){return t.editLabs(a)}},"Edit"),r.a.createElement(sr.a,{type:"vertical"}),r.a.createElement(or.a,{title:"Are you sure delete this test?",onConfirm:function(){return t.deleteTest(a)},okText:"Yes",cancelText:"No"},r.a.createElement("a",null,"Delete")))}}];return r.a.createElement(rr.a,null,r.a.createElement(y.b,{exact:!0,path:"/settings/labs/add",render:function(a){return r.a.createElement(Nl,Object.assign({},t.state,{loadData:e.loadData},e.props,a))}}),r.a.createElement(y.b,{exact:!0,path:"/settings/labs/edit",render:function(a){return r.a.createElement(Nl,Object.assign({},t.state,{loadData:e.loadData},e.props,a))}}),r.a.createElement(y.b,{exact:!0,path:"/settings/labs"},r.a.createElement("div",null,r.a.createElement(rr.a,null,r.a.createElement("h2",null,r.a.createElement(Da.b,{to:"/settings/labs/add"},r.a.createElement(da.a,{type:"primary",style:{float:"right"}},r.a.createElement(va.a,{type:"plus"}),"\xa0Add")))),r.a.createElement(ti,{columns:n,dataSource:this.state.tests,pagination:!1}),r.a.createElement(wi,{loading:this.state.loading,hidden:!this.state.next,loaderFunction:function(){return e.loadData(e.state.next)}}))))}}]),t}(r.a.Component);function Vl(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Bl(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Vl(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Vl(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}ga.a.Option;var Hl=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).onChangeHandler=function(e){a.setState({panelCost:e})},a.onChangeSelect=function(e){a.setState((function(t){if(t.selectedTest[e])return Qt(D,"Item Already Added"),{};for(var a=null,n=0;n<t.tests.length;n++)if(t.tests[n].id==e){a=t.tests[n];break}return a?{selectedTest:Bl({},t.selectedTest,Object(u.a)({},e,a))}:{}}))},a.removeLabPanel=function(e){a.setState((function(e){return{}})),console.log("id",e)},a.handleSubmit=function(e){e.preventDefault();var t=Object(f.a)(a);a.props.form.validateFields((function(e,n){if(!e){var r=Bl({},n,{tests:Object.keys(a.state.selectedTest)});console.log("test",r);qt(Kt(Pe,[t.props.active_practiceId]),r,(function(e){e&&console.log(e)}),(function(){}))}}))},a.state={panelCost:0,tests:[],selectedTest:{}},a.loadTests=a.loadTests.bind(Object(f.a)(a)),a.handleCancel=a.handleCancel.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadTests()}},{key:"loadTests",value:function(){var e=this;Ut(Kt(fe,[e.props.active_practiceId]),(function(t){e.setState({tests:t.results,loading:!1}),console.log(JSON.stringify(e.state.tests))}),(function(){e.setState({loading:!1})}))}},{key:"onChangeCostCalculate",value:function(){}},{key:"handleCancel",value:function(){this.props.history.push("/settings/labs")}},{key:"render",value:function(){var e=this,t=this,a={labelCol:{xs:{span:8},sm:{span:8},md:{span:8},lg:{span:8}},wrapperCol:{xs:{span:16},sm:{span:16},md:{span:16},lg:{span:16}}},n=Object.keys(this.state.selectedTest),i=0;n.forEach((function(e){i+=parseInt(t.state.selectedTest[e].cost)}));var l=this.props.form.getFieldDecorator,o=this.state.tests.map((function(e){return r.a.createElement(ga.a.Option,{value:e.id},e.name)}));return r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:18},r.a.createElement(hl.Form,{onSubmit:this.handleSubmit},r.a.createElement(hl.Form.Item,Object.assign({label:"Panel Name"},a),l("name",{})(r.a.createElement(ma.a,null))),r.a.createElement(hl.Form.Item,Object.assign({label:r.a.createElement("span",null,"Test Name")},a),r.a.createElement(ga.a,{style:{width:"100%"},onChange:this.onChangeSelect},o),r.a.createElement("div",null,n?n.map((function(a){return r.a.createElement("p",{key:a},t.state.selectedTest[a].name," ",r.a.createElement("span",{style:{paddingLeft:"50%"}},e.state.selectedTest[a].cost),r.a.createElement(da.a,{icon:"close",style:{float:"right"},onClick:function(){return e.removeLabPanel(t.state.selectedTest[a].id)},type:"danger",shape:"circle",size:"small"}))})):null)),r.a.createElement(hl.Form.Item,Object.assign({label:r.a.createElement("span",null,"Panel Cost")},a),l("cost",{initialValue:i})(r.a.createElement(Er.a,null)),r.a.createElement("span",{className:"ant-form-text"}," Total : ","number"===typeof i?i:0)),r.a.createElement(hl.Form.Item,null,r.a.createElement(da.a,{type:"primary",htmlType:"submit"},"Submit"),"\xa0\xa0\xa0",r.a.createElement(da.a,{onClick:this.handleCancel},"Cancel")))))}}]),t}(r.a.Component),ql=hl.Form.create()(Hl);function zl(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var Gl=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={labPanel:null,editTest:null,selectedTest:{}},a.loadLabPanel=a.loadLabPanel.bind(Object(f.a)(a)),a.editPanels=a.editPanels.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadLabPanel()}},{key:"loadLabPanel",value:function(){var e=this;Ut(Kt(Pe,[e.props.active_practiceId]),(function(t){e.setState({labPanel:t,loading:!1})}),(function(){e.setState({})}))}},{key:"editPanels",value:function(e){var t=this;this.setState({editTest:e,loading:!1},(function(){t.props.history.push("/settings/labs/edit")}))}},{key:"deleteLabPanel",value:function(e){var t=this,a=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?zl(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):zl(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,{is_active:!1,tests:Object.keys(this.state.selectedTest)});qt(Kt(Pe,[this.props.active_practiceId]),a,(function(e){t.loadLabPanel()}),(function(){}))}},{key:"render",value:function(){var e=this,t=this,a={};this.state.productMargin&&this.state.productMargin.forEach((function(e){a[e.id]=e.name}));var n=[{title:"Name",dataIndex:"name",key:"code"},{title:"Cost",dataIndex:"cost",key:"cost"},{title:"Action",key:"action",render:function(e,a){return r.a.createElement("span",null,r.a.createElement("a",{onClick:function(){return t.editPanels(a)}},"Edit"),r.a.createElement(sr.a,{type:"vertical"}),r.a.createElement(or.a,{title:"Are you sure delete this test?",onConfirm:function(){return t.deleteLabPanel(a)},okText:"Yes",cancelText:"No"},r.a.createElement("a",null,"Delete")))}}],i=[{title:"Name",dataIndex:"name",key:"code"},{title:"Cost",dataIndex:"cost",key:"cost"},{title:" Test Instructions",dataIndex:"instruction",key:"instruction"}];return r.a.createElement(rr.a,null,r.a.createElement(y.b,{exact:!0,path:"/settings/labs/add",render:function(a){return r.a.createElement(ql,Object.assign({},t.state,{loadData:e.loadData},e.props,a))}}),r.a.createElement(y.b,{exact:!0,path:"/settings/labs/edit",render:function(a){return r.a.createElement(ql,Object.assign({},t.state,{loadData:e.loadData},e.props,a))}}),r.a.createElement(y.b,{exact:!0,path:"/settings/labs"},r.a.createElement("div",null,r.a.createElement(rr.a,null,r.a.createElement("h2",null,r.a.createElement(Da.b,{to:"/settings/labs/add"},r.a.createElement(da.a,{type:"primary",style:{float:"right"}},r.a.createElement(va.a,{type:"plus"}),"\xa0Add")))),r.a.createElement(ti,{loading:this.state.loading,columns:n,expandedRowRender:function(e){return r.a.createElement(cr.a,null,r.a.createElement(lr.a,{pagination:!1,columns:i,dataSource:e.tests}))},dataSource:this.state.labPanel}))))}}]),t}(r.a.Component),Ul=hr.a.TabPane,Wl=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"Lab Tracking"),r.a.createElement(cr.a,null,r.a.createElement(hr.a,null,r.a.createElement(Ul,{key:"labTests",tab:"Lab Tests"},r.a.createElement(Yl,this.props)),r.a.createElement(Ul,{key:"labPanels",tab:"Lab Panels"},r.a.createElement(Gl,this.props)))))}}]),t}(r.a.Component),Kl=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).loadRequiredData=function(){var e=Object(f.a)(a);Ut(Kt($,[a.props.active_practiceId]),(function(t){e.setState({taxes:t})}),(function(){}))},a.state={editPackage:a.props.editPackage?a.props.editPackage:null,taxes:[]},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadRequiredData()}},{key:"render",value:function(){var e=this,t=vr.a.create()(Vr),a=[{label:"Package Name",key:"name",required:!0,initialValue:this.props.editPackage?this.props.editPackage.name:null,type:S},{label:"Image",key:"image",initialValue:this.props.editPackage?this.props.editPackage.image:null,type:T},{label:"Days of Booking",key:"no_of_days",required:!0,initialValue:this.props.editPackage?this.props.editPackage.no_of_days:null,type:I,follow:"INR"},{label:"Price",key:"price",required:!0,initialValue:this.props.editPackage?this.props.editPackage.final_price:null,type:I,follow:"INR"},{label:"Taxes",key:"taxes",initialValue:this.props.editPackage&&this.props.editPackage.taxes?this.props.editPackage.taxes.map((function(e){return e.id})):[],type:j,options:this.state.taxes.map((function(e){return Object.create({label:e.name+"("+e.tax_value+"%)",value:e.id})}))}],n={method:"post",action:Kt(xt,[this.props.active_practiceId]),successFn:function(){Qt(O,"Package Saved Successfully"),e.props.loadData&&e.props.loadData(),e.props.history.push("/settings/medicine-packages")},errorFn:function(){}},i=[];return this.state.editPackage&&i.push({key:"id",value:this.state.editPackage.id}),r.a.createElement("div",null,r.a.createElement(cr.a,null,r.a.createElement(t,Object.assign({fields:a,formProp:n,defaultValues:i,title:this.state.editPackage?"Edit Medicine Package":"Add Medicine Packages"},this.props))))}}]),t}(r.a.Component),Ql=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).loadData=function(){var e=Object(f.a)(a);Ut(Kt(xt,[a.props.active_practiceId]),(function(t){e.setState({loading:!1,packages:t})}),(function(){e.setState({loading:!1})}))},a.editObject=function(e){a.setState({editPackage:e,loading:!1}),a.props.history.push("/settings/medicine-packages/edit")},a.state={loading:!1,packages:[]},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"deleteObject",value:function(e){var t=this,a=e;a.is_active=!1;qt(Kt(xt,[this.props.active_practiceId]),a,(function(e){t.loadData()}),(function(){}))}},{key:"render",value:function(){var e=this,t=this,a=[{dataIndex:"image",key:"image",render:function(e){return e?r.a.createElement("img",{src:Bt(e),alt:"",style:{maxWidth:200,maxHeight:100}}):null}},{title:"Package Name",dataIndex:"name",key:"name"},{title:"Days",dataIndex:"no_of_days",key:"no_of_days"},{title:"Price (INR) + Tax",dataIndex:"final_price",key:"price"},{title:"Action",key:"action",render:function(a,n){return r.a.createElement("span",null,r.a.createElement("a",{onClick:function(){return e.editObject(n)}},"Edit"),r.a.createElement(sr.a,{type:"vertical"}),r.a.createElement(or.a,{title:"Are you sure delete this item?",onConfirm:function(){return t.deleteObject(n)},okText:"Yes",cancelText:"No"},r.a.createElement("a",null,"Delete")))}}];return r.a.createElement(y.d,null,r.a.createElement(y.b,{path:"/settings/medicine-packages/add",render:function(t){return r.a.createElement(Kl,Object.assign({},e.props,t,{loadData:e.loadData}))}}),r.a.createElement(y.b,{path:"/settings/medicine-packages/edit",render:function(t){return e.state.editPackage?r.a.createElement(Kl,Object.assign({},e.state,e.props,t,{loadData:e.loadData})):r.a.createElement(y.a,{to:"/settings/medicine-packages"})}}),r.a.createElement(y.b,null,r.a.createElement(cr.a,{title:r.a.createElement("h4",null,"Medicine Packages ",r.a.createElement(Da.b,{to:"/settings/medicine-packages/add"},r.a.createElement(da.a,{style:{float:"right"},type:"primary"},r.a.createElement(va.a,{type:"plus"})," Add")))},r.a.createElement(ti,{dataSource:this.state.packages,loading:this.state.loading,columns:a}))))}}]),t}(r.a.Component),Zl=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).handleCancel=function(){a.setState({visible:!1})},a.showDeletedExpenses=function(){a.setState({showDeleted:!0,deletedLoading:!0}),a.loadData(!0)},a.state={redirect:!1,visible:!1,diseases:null,loading:!0,showDeleted:!1,deletedLoading:!1,deletedRooms:[],editObj:{}},a.loadData=a.loadData.bind(Object(f.a)(a)),a.deleteObject=a.deleteObject.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this,a=function(a){console.log("get table"),e?t.setState({deletedRooms:a,deletedLoading:!1}):t.setState({diseases:a,loading:!1})},n=function(){e?t.setState({deletedLoading:!1}):t.setState({loading:!1})};e?Ut(Kt(Ct,[this.props.active_practiceId]),a,n,{deleted:!0,practice:this.props.active_practiceId}):Ut(Kt(Ct,[this.props.active_practiceId]),a,n)}},{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"editTax",value:function(e){this.setState({editObj:e,visible:!0})}},{key:"deleteObject",value:function(e,t){var a=this,n=e;n.is_active=t;qt(Kt(Ct,[this.props.active_practiceId]),n,(function(e){a.loadData(),a.state.showDeleted&&a.loadData(!0)}),(function(){}))}},{key:"render",value:function(){var e=this,t=this,a=[{title:"Disease",dataIndex:"name",key:"name"},{title:"Action",key:"action",render:function(a,n){return n.is_active?r.a.createElement("span",null,r.a.createElement("a",{onClick:function(){return e.editTax(n)}},"  Edit"),r.a.createElement(sr.a,{type:"vertical"}),r.a.createElement(or.a,{title:"Are you sure to delete this?",onConfirm:function(){return t.deleteObject(n,!1)},okText:"Yes",cancelText:"No"},r.a.createElement("a",null,"Delete"))):r.a.createElement("span",null,r.a.createElement(or.a,{title:"Are you sure show this?",onConfirm:function(){return t.deleteObject(n,!0)},okText:"Yes",cancelText:"No"},r.a.createElement("a",null,"Show")))}}],n=[{label:"Disease",key:"name",required:!0,type:S}],i=[{label:"Disease",key:"name",required:!0,initialValue:this.state.editObj.name,type:S}],l={successFn:function(e){t.handleCancel(),t.loadData(),console.log(e),console.log("sucess"),Qt(O,"success")},errorFn:function(){},action:Kt(Ct,[this.props.active_practiceId]),method:"post"},o=[{key:"practice",value:this.props.active_practiceId}],s=[{key:"practice",value:this.props.active_practiceId},{key:"id",value:this.state.editObj.id}],c=vr.a.create()(Vr);return r.a.createElement("div",null,r.a.createElement("h2",null,"Disease List"),r.a.createElement(cr.a,null,r.a.createElement(c,{defaultValues:o,formProp:l,fields:n}),r.a.createElement(sr.a,null),r.a.createElement(ti,{loading:this.state.loading,columns:a,dataSource:this.state.diseases})),r.a.createElement(nr.a,{visible:this.state.visible,footer:null,onCancel:this.handleCancel},r.a.createElement(c,{title:"Edit Disease",defaultValues:s,formProp:l,fields:i}),r.a.createElement(da.a,{key:"back",onClick:this.handleCancel},"Return"),","))}}]),t}(r.a.Component),Xl=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).handleCancel=function(){a.setState({visible:!1})},a.state={redirect:!1,visible:!1,data:null,loading:!0},a.loadData=a.loadData.bind(Object(f.a)(a)),a.deleteObject=a.deleteObject.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){var e=this;Ut(Kt(vt,[this.props.active_practiceId]),(function(t){e.setState({data:t,loading:!1})}),(function(){e.setState({loading:!1})}))}},{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"editFunction",value:function(e){this.setState({editingId:e.id,editingName:e.name,visible:!0,loading:!1})}},{key:"deleteObject",value:function(e){var t=this,a=e;a.is_active=!1;qt(Kt(vt,[this.props.active_practiceId]),a,(function(e){t.loadData()}),(function(){}))}},{key:"render",value:function(){var e=this,t=this,a=[{title:"Name",dataIndex:"name",key:"name"},{title:"Action",key:"action",render:function(t,a){return r.a.createElement("span",null,r.a.createElement("a",{onClick:function(){return e.editFunction(a)}},"  Edit"))}}],n=[{label:"Role Name",key:"name",placeholder:"Advisor roles",required:!0,type:S}],i=[{label:"Role Name",key:"name",required:!0,initialValue:this.state.editingName,type:S}],l={successFn:function(e){t.handleCancel(),t.loadData(),console.log("sucess"),Qt(O,"success")},errorFn:function(){},action:Kt(vt,[this.props.active_practiceId]),method:"post"},o=[{key:"practice",value:this.props.active_practiceId}],s=[{key:"practice",value:this.props.active_practiceId},{key:"id",value:this.state.editingId}],c=vr.a.create()(Vr);return r.a.createElement(cr.a,{title:"Add Advisor Roles"},r.a.createElement(c,{defaultValues:o,formProp:l,fields:n}),r.a.createElement(sr.a,null),r.a.createElement(lr.a,{loading:this.state.loading,columns:a,dataSource:this.state.data}),r.a.createElement(nr.a,{title:"Edit Advisor Roles",visible:this.state.visible,footer:null,onCancel:this.handleCancel},r.a.createElement(c,{defaultValues:s,formProp:l,fields:i}),r.a.createElement(da.a,{key:"back",onClick:this.handleCancel},"Return")))}}]),t}(r.a.Component),Jl=vr.a.Item,$l=cr.a.Meta,eo=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).handleSubmit=function(e){var t=Object(f.a)(a);e.preventDefault(),a.props.form.validateFields((function(e,n){if(!e){t.setState({saving:!0});var r={user:{},referal:n.referal,role:n.role,is_agent:!0,aadhar_upload:n.aadhar_upload&&n.aadhar_upload.file&&n.aadhar_upload.file.response?n.aadhar_upload.file.response.image_path:n.aadhar_upload,is_approved:!0,practice:a.props.active_practiceId};!a.props.editAgentData&&r.referal||delete r.referal,a.state.userDetails?r.user=a.state.userDetails.user:(r.user.first_name=n.first_name,r.user.email=n.email,r.user.mobile=n.mobile);var i=function(e){t.setState({saving:!1}),t.props.loadData&&t.props.loadData(),t.props.history&&t.props.history.goBack(),e&&Qt(O,"Agent Created Successfully")},l=function(){t.setState({saving:!1})};a.state.userDetails?Ht(Kt(ce,[a.state.userDetails.id]),r,i,l):a.props.editAgentData?Ht(Kt(ce,[a.props.editAgentData.id]),r,i,l):qt(Kt(se,[a.props.active_practiceId]),r,i,l)}}))},a.handlePatientSelect=function(e){if(e){var t=Object(f.a)(a);Ut(Kt(ce,[e]),(function(e){t.setState({userDetails:e})}),(function(){}))}},a.handleClick=function(e){a.setState({userDetails:null})},a.state={redirect:!1,saving:!1,userListData:[],agentRoles:[]},a.changeRedirect=a.changeRedirect.bind(Object(f.a)(a)),a.getPatient=a.getPatient.bind(Object(f.a)(a)),a.searchPatient=a.searchPatient.bind(Object(f.a)(a)),a.loadAgentRoles=a.loadAgentRoles.bind(Object(f.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.getPatient(),this.loadAgentRoles()}},{key:"getPatient",value:function(){var e=this;Ut(se,(function(t){e.setState({userListData:t.results})}),(function(){}))}},{key:"loadAgentRoles",value:function(){var e=this;Ut(vt,(function(t){e.setState({agentRoles:t,loading:!1})}),(function(){e.setState({loading:!1})}))}},{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"searchPatient",value:function(e){var t=this;e&&Ut(Kt(We,[e]),(function(e){e&&t.setState({userListData:e.results})}),(function(){}))}},{key:"render",value:function(){var e=this,t=this.props.formLayout?this.props.formLayout:{labelCol:{span:6},wrapperCol:{span:14}},a=this.props.formLayout?this.props.formLayout:{wrapperCol:{offset:6,span:14}},n=this.props.form.getFieldDecorator,i={name:"image",data:{name:"hello"},action:Vt("blogImage/"),headers:{authorization:"authorization-text"},onChange:function(e){"uploading"!==e.file.status&&console.log(e.file,e.fileList),"done"===e.file.status?N.a.success("".concat(e.file.name," file uploaded successfully")):"error"===e.file.status&&N.a.error("".concat(e.file.name," file upload failed."))}};return r.a.createElement(cr.a,null,r.a.createElement(pa.a,{spinning:this.state.saving},r.a.createElement(vr.a,{onSubmit:this.handleSubmit},this.props.title?r.a.createElement("h2",null,this.props.title):null,e.state.userDetails?r.a.createElement(Jl,Object.assign({key:"id",value:this.state.userDetails.id},a),r.a.createElement(cr.a,{bordered:!1,style:{background:"#ECECEC"}},r.a.createElement($l,{avatar:this.state.userDetails.image?r.a.createElement(ba.a,{src:Bt(this.state.userDetails.image)}):r.a.createElement(ba.a,{style:{backgroundColor:"#87d068"}},this.state.userDetails.user.first_name?this.state.userDetails.user.first_name.charAt(0):r.a.createElement(va.a,{type:"user"})),title:this.state.userDetails.user.first_name,description:r.a.createElement("span",null,e.props.activePracticePermissions.PatientPhoneNumber?this.state.userDetails.user.mobile:ka(this.state.userDetails.user.mobile),r.a.createElement("br",null),r.a.createElement(da.a,{type:"primary",style:{float:"right"},onClick:this.handleClick},"Select Different"))}))):r.a.createElement("div",null,r.a.createElement(Jl,Object.assign({key:"name",label:"Advisor Name"},t),n("first_name",{initialValue:e.props.editAgentData?e.props.editAgentData.user.first_name:""})(r.a.createElement(ya.a,{placeholder:"Advisor Name",showSearch:!0,disabled:!!e.props.editAgentData,onSearch:this.searchPatient,defaultActiveFirstOption:!1,showArrow:!1,filterOption:!1,onSelect:this.handlePatientSelect},this.state.userListData.map((function(t){return r.a.createElement(ya.a.Option,{value:t.id.toString()},r.a.createElement(Ea.a.Item,{style:{padding:0}},r.a.createElement(Ea.a.Item.Meta,{avatar:t.image?r.a.createElement(ba.a,{src:Bt(t.image)}):r.a.createElement(ba.a,{style:{backgroundColor:"#87d068"}},t.user.first_name?t.user.first_name.charAt(0):r.a.createElement(va.a,{type:"user"})),title:t.user.first_name+" (ID:"+(t.custom_id?t.custom_id:t.user.id)+")",description:e.props.activePracticePermissions.PatientPhoneNumber?t.user.mobile:ka(t.user.mobile)})))}))))),r.a.createElement(Jl,Object.assign({key:"mobile",label:"Mobile Number"},t),n("mobile",{initialValue:e.props.editAgentData?e.props.editAgentData.user.mobile:null,rules:[{required:!0,message:Ft}]})(r.a.createElement(ma.a,{placeholder:"Mobile Number",disabled:!!e.props.editAgentData}))),r.a.createElement(Jl,Object.assign({key:"email",label:"Email Address"},t),n("email",{initialValue:e.props.editAgentData?e.props.editAgentData.user.email:null,rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:Ft}]})(r.a.createElement(ma.a,{placeholder:"Email Address",disabled:!!e.props.editAgentData}))),this.state.editAgentData?null:r.a.createElement(Jl,Object.assign({key:"referal",label:"Referer Code"},t),n("referal",{initialValue:e.props.editAgentData?e.props.editAgentData.user.referer:null})(r.a.createElement(ma.a,{placeholder:"Referer Code",disabled:!!e.props.editAgentData})))),r.a.createElement(Jl,Object.assign({key:"role"},t,{label:"Role Type"}),n("role",{initialValue:e.props.editAgentData&&e.props.editAgentData.role?e.props.editAgentData.role:null},{rules:[{required:!0,message:Ft}]})(r.a.createElement(ga.a,null,this.state.agentRoles.map((function(e){return r.a.createElement(ga.a.Option,{value:e.id},e.name)}))))),r.a.createElement(Jl,Object.assign({label:"Document Upload"},t),n("aadhar_upload",{initialValue:e.props.editAgentData&&e.props.editAgentData.aadhar_upload?e.props.editAgentData.aadhar_upload:null,rules:[{required:!0,message:Ft}],valuePropName:"aadhar_upload"})(r.a.createElement(fr.a,i,r.a.createElement(da.a,null,r.a.createElement(va.a,{type:"upload"})," Click to Upload"),e.props.editAgentData&&e.props.editAgentData.aadhar_upload?r.a.createElement("img",{src:Bt(e.props.editAgentData.aadhar_upload),style:{maxWidth:"100%"}}):null))),r.a.createElement(Jl,t,r.a.createElement(da.a,{type:"primary",htmlType:"submit",style:{margin:5}},"Submit"),e.props.history?r.a.createElement(da.a,{style:{margin:5},onClick:function(){return e.props.history.goBack()}},"Cancel"):null))))}}]),t}(r.a.Component),to=vr.a.create()(eo),ao=(a(77),a(48)),no=(a(320),a(190)),ro=no.a.Text,io=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).loadPatientWallet=function(){var e=Object(f.a)(a);if(a.props.currentPatient&&a.props.currentPatient.id){Ut(Kt(_t,[a.props.currentPatient.id]),(function(t){t.length&&e.setState({walletAmount:t[0]})}),(function(){}))}else a.setState({pendingAmount:null})},a.loadData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=Object(f.a)(a);a.setState({loading:!0});var n=function(e){1==e.current?t.setState({ledger:e.results,loading:!1,nextPage:e.next}):t.setState((function(t){return{ledger:[].concat(Object(Oa.a)(t.ledger),Object(Oa.a)(e.results)),loading:!1,nextPage:e.next}}))},r=function(){t.setState({loading:!1})},i={page:e,start:a.state.selectedStartDate.startOf("day").format(),end:a.state.selectedEndDate.endOf("day").format(),agents:a.state.selectedAgents.join(",")};a.state.selectedAgents&&(i.agents=a.state.selectedAgents.join(",")),Ut(Kt(Ot,[a.props.currentPatient.id]),n,r,i)},a.loadSumData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=Object(f.a)(a),n=function(e){t.setState({ledgerDetails:e,nextPage:e.next})},r=function(){},i={page:e,start:a.state.selectedStartDate.format(),end:a.state.selectedEndDate.format(),agents:a.state.selectedAgents.join(",")};a.state.selectedAgents&&(i.agents=a.state.selectedAgents.join(",")),Ut(Kt(Dt,[a.props.currentPatient.id]),n,r,i)},a.changeExpenseFilters=function(e,t){var n=Object(f.a)(a);a.setState(Object(u.a)({},e,t),(function(){n.loadData(1)}))},a.state={ledger:[],ledgerDetails:{},loading:!1,walletAmount:null,selectedStartDate:Or()().subtract(1,"month"),selectedEndDate:Or()(),agents:[],selectedAgents:[]},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadData(),this.loadPatientWallet(),this.loadAgents(),this.loadSumData()}},{key:"loadAgents",value:function(){var e=this;Ut(Kt("patients/%s/my_agents/",[this.props.currentPatient.id]),(function(t){e.setState({agents:t})}),(function(){}),{agent:!0,pagination:!1})}},{key:"render",value:function(){var e=this,t=[{title:"Date",dataIndex:"created_at",key:"created_at",render:function(e){return Or()(e).format("LLL")}},{title:"Patient",dataIndex:"received_from",key:"received_from",render:function(e,t){return e?r.a.createElement(ro,null,e.user.first_name," (",e.custom_id,")"):"--"}},,{title:"Refered By",dataIndex:"received_from.user.referer_data",key:"received_from.user.referer_data",render:function(e,t){return e&&e.referer?r.a.createElement(ro,null,e.referer.first_name," (",e.custom_id,")"):"--"}},{title:"Ledger Comment",dataIndex:"comments",key:"comments",render:function(e,t){return t.is_cancelled?r.a.createElement(ro,{delete:!0},e):e}},{title:"Cr/Dr",dataIndex:"ledger_type",key:"ledger_type",render:function(e,t){return t.is_cancelled?r.a.createElement(ro,{delete:!0},e):e}},{title:"Amount",dataIndex:"amount",key:"amount",render:function(e,t){return t.is_cancelled?r.a.createElement(ro,{delete:!0},e.toFixed(2)):e.toFixed(2)}}];return r.a.createElement("div",null,r.a.createElement(cr.a,{title:"Wallet Ledger"},r.a.createElement(rr.a,{gutter:16,style:{marginBottom:10}},r.a.createElement(ir.a,{span:2,style:{textAlign:"right"}},r.a.createElement("b",null," Agents")),r.a.createElement(ir.a,{span:4},r.a.createElement(ga.a,{style:{width:"100%"},value:this.state.selectedAgents,mode:"multiple",disabled:this.state.loading,onChange:function(t){return e.changeExpenseFilters("selectedAgents",t)}},this.state.agents.map((function(e){return r.a.createElement(ga.a.Option,{value:e.id},e.user.first_name)})))),r.a.createElement(ir.a,{span:2,style:{textAlign:"right"}},r.a.createElement("b",null," From")),r.a.createElement(ir.a,{span:4},r.a.createElement(yr.a,{value:this.state.selectedStartDate,disabled:this.state.loading,onChange:function(t){return e.changeExpenseFilters("selectedStartDate",t)}})),r.a.createElement(ir.a,{span:2,style:{textAlign:"right"}},r.a.createElement("b",null," To")),r.a.createElement(ir.a,{span:4},r.a.createElement(yr.a,{value:this.state.selectedEndDate,disabled:this.state.loading,onChange:function(t){return e.changeExpenseFilters("selectedEndDate",t)}}))),this.state.walletAmount?r.a.createElement(rr.a,{style:{textAlign:"center",marginBottom:10}},r.a.createElement(ir.a,{span:24},r.a.createElement(ao.a,{title:"Wallet Total",prefix:r.a.createElement(va.a,{type:"wallet"}),value:this.state.walletAmount.non_refundable,precision:2}))):null,r.a.createElement(ti,{dataSource:this.state.ledger,loading:this.state.loading,columns:t,hideReport:!0,pagination:!1}),r.a.createElement(wi,{loading:this.state.loading,hidden:!this.state.nextPage,loaderFunction:function(){return e.loadData(e.state.nextPage)}}),r.a.createElement(rr.a,{style:{textAlign:"center",marginBottom:10}},r.a.createElement(ir.a,{span:8},r.a.createElement(ao.a,{title:"Credit",value:this.state.ledgerDetails.credit,precision:2})),r.a.createElement(ir.a,{span:8},r.a.createElement(ao.a,{title:"Debit",value:this.state.ledgerDetails.debit,precision:2})),r.a.createElement(ir.a,{span:8},r.a.createElement(ao.a,{title:"Profit",value:this.state.ledgerDetails.credit-this.state.ledgerDetails.debit,precision:2})))))}}]),t}(r.a.Component),lo=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).handleCancel=function(){a.setState({visible:!1})},a.showWallet=function(e){a.setState({showAgentData:e})},a.payAgentModal=function(e){a.setState({payAgentData:e})},a.approveAgent=function(e){var t=Object(f.a)(a),n={id:e.id,is_approved:!0};e.role?(t.setState({approvalLoading:!0}),Ht(Kt(ce,[e.id]),n,(function(a){Qt(O,"Agent Approved Successfully!"),t.setState((function(t){var a=[];return t.data.forEach((function(t){t.id==e.id&&(t.is_approved=!0),a.push(t)})),{data:a,approvalLoading:!1}}))}),(function(){t.setState({approvalLoading:!1})}))):Qt(D,"Kindly assign the role before approving!")},a.handleSubmit=function(e){var t=Object(f.a)(a);e.preventDefault(),a.props.form.validateFieldsAndScroll((function(e,a){e||t.setState({role:a.role,approved:a.approved},(function(){t.loadData()}))}))},a.state={redirect:!1,visible:!1,data:null,loading:!0,agentRoles:[],practiceList:[],approved:null,showAgentData:null},a.loadData=a.loadData.bind(Object(f.a)(a)),a.deleteObject=a.deleteObject.bind(Object(f.a)(a)),a.loadAgentRoles=a.loadAgentRoles.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadData(),this.loadAgentRoles()}},{key:"loadAgentRoles",value:function(){var e=this;Ut(vt,(function(t){e.setState({agentRoles:t})}),(function(){}))}},{key:"loadData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this;this.setState({loading:!0});var a=function(e){1==e.current?t.setState({data:e.results,total:e.count,nextPage:e.next,loading:!1}):t.setState((function(t){return{data:[].concat(Object(Oa.a)(t.data),Object(Oa.a)(e.results)),total:e.count,nextPage:e.next,loading:!1}}))},n=function(){t.setState({loading:!1})},r={agent:!0,page:e};t.state.role&&(r.role=t.state.role),null!=t.state.approved&&(r.approved=!!t.state.approved),r.practice=this.props.active_practiceId,Ut(se,a,n,r)}},{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"editObject",value:function(e){this.setState({editAgentData:e,loading:!1}),this.props.history.push("/settings/agents/"+e.id+"/edit")}},{key:"deleteObject",value:function(e){var t=this,a={id:e.id,is_agent:!1};Ht(Kt(ce,[e.id]),a,(function(e){t.setState({loading:!1}),t.loadData()}),(function(){}))}},{key:"render",value:function(){var e=this,t=this,a=1,n=this.props.form.getFieldDecorator,i=[{title:"S. No",key:"sno",dataIndex:"sno",render:function(e,t){return r.a.createElement("span",null," ",a++)},export:function(e,t,a){return a+1}},{title:"Name",dataIndex:"user.first_name",key:"name",render:function(e,t){return r.a.createElement(Da.b,{to:"/patient/"+t.id+"/profile"},e)},export:function(e,t){return t.user.first_name}},{title:"Email",dataIndex:"user.email",key:"email",export:function(e,t){return t.user.email}},{title:"Mobile",dataIndex:"user.mobile",key:"mobile",export:function(e,t){return t.user.mobile}},{title:"Referrer",dataIndex:"user.referer_data.referer.first_name",key:"referrer",render:function(e,t){return e&&t.user.referer_data.patient?r.a.createElement(Da.b,{to:"/patient/"+t.user.referer_data.patient+"/profile"},e):"--"},export:function(e,t){return t.user.referer?t.user.referer_data.referer.first_name:"--"}},{title:"Role",dataIndex:"role_data.name",key:"role_data",export:function(e,t){return t.role_data.name}},{title:"Aadhar",dataIndex:"aadhar_id",key:"aadhar_id",export:function(e){return e}},{title:"Document",dataIndex:"aadhar_upload",key:"aadhar_upload",hideExport:!0,render:function(e){return e?r.a.createElement("a",{target:"_blank",href:Bt(e)},"Open Document"):"--"}},{title:"Status",dataIndex:"is_approved",key:"is_approved",render:function(e,a){return e?r.a.createElement(fa.a,{color:"#87d068"},"Approved"):r.a.createElement(or.a,{title:"Are you sure approve this Advisor?",onConfirm:function(){return t.approveAgent(a)},okText:"Yes",cancelText:"No"},r.a.createElement("a",{href:"#",disabled:t.state.approvalLoading},"Approve"))}},{title:"Action",key:"action",hideExport:!0,render:function(a,n){return r.a.createElement("span",null,r.a.createElement("a",{onClick:function(){return e.showWallet(n)}},"  Wallet"),r.a.createElement(sr.a,{type:"vertical"}),r.a.createElement("a",{onClick:function(){return e.payAgentModal(n)}},"  Pay Out"),r.a.createElement(sr.a,{type:"vertical"}),r.a.createElement("a",{onClick:function(){return e.editObject(n)}},"  Edit"),r.a.createElement(sr.a,{type:"vertical"}),r.a.createElement(or.a,{title:"Are you sure delete this item?",onConfirm:function(){return t.deleteObject(n)},okText:"Yes",cancelText:"No"},r.a.createElement("a",null,"Delete")))}}],l=vr.a.create()(Vr);return r.a.createElement(y.d,null,r.a.createElement(y.b,{exact:!0,path:"/settings/agents/add",render:function(t){return r.a.createElement(to,Object.assign({},e.props,{title:"Create Advisor",loadData:e.loadData}))}}),r.a.createElement(y.b,{exact:!0,path:"/settings/agents/:id/edit",render:function(t){return r.a.createElement(to,Object.assign({},e.props,e.state,{title:"Edit Advisor",loadData:e.loadData}))}}),r.a.createElement(y.b,null,r.a.createElement(cr.a,{title:r.a.createElement("h4",null,"Advisor ",r.a.createElement(Da.b,{to:"/settings/agents/add"},r.a.createElement(da.a,{style:{float:"right"},type:"primary"},r.a.createElement(va.a,{type:"plus"}),"Add")))},r.a.createElement(rr.a,null,r.a.createElement(ir.a,{style:{float:"right"}},r.a.createElement(vr.a,{layout:"inline",onSubmit:this.handleSubmit},r.a.createElement(vr.a.Item,{key:"role",label:"Advisor Role"},n("role",{initialValue:this.state.agentRoles?this.state.agentRoles.id:""})(r.a.createElement(ga.a,{placeholder:"Advisor Role",style:{minWidth:150},allowClear:!0},this.state.agentRoles.map((function(e){return r.a.createElement(ga.a.Option,{value:e.id},e.name)}))))),r.a.createElement(vr.a.Item,{key:"approved",label:"Status"},n("approved",{initialValue:this.state.approved?this.state.approved:null})(r.a.createElement(ga.a,{placeholder:"status",style:{minWidth:150}},[{label:"Approved",value:!0},{label:"Pending",value:!1},{label:"All",value:null}].map((function(e){return r.a.createElement(ga.a.Option,{value:e.value},e.label)}))))),r.a.createElement(vr.a.Item,null,r.a.createElement(da.a,{type:"primary",htmlType:"submit",style:{margin:5}},"Submit"))))),r.a.createElement(ti,{loading:this.state.loading,columns:i,dataSource:this.state.data,pagination:!1}),r.a.createElement(wi,{loading:this.state.loading,loaderFunction:function(){return t.loadData(t.state.nextPage)},hidden:!this.state.nextPage}),r.a.createElement(nr.a,{visible:this.state.showAgentData,closable:!1,centered:!0,width:1e3,footer:null,style:{top:60}},r.a.createElement(da.a,{type:"primary",style:{position:"absolute",top:"-50px"},onClick:function(){return e.payAgentModal(e.state.showAgentData)}},"Pay Out"),r.a.createElement(da.a,{icon:"close",type:"danger",shape:"circle",style:{position:"absolute",top:"-50px",right:0},onClick:function(){return e.showWallet(null)}}),this.state.showAgentData?r.a.createElement(io,{currentPatient:this.state.showAgentData,key:this.state.showAgentData?this.state.showAgentData.id+this.state.payAgentData:null}):null),r.a.createElement(nr.a,{visible:this.state.payAgentData,closable:!1,centered:!0,footer:null,closeIcon:null,style:{top:60}},r.a.createElement(da.a,{icon:"close",type:"danger",shape:"circle",style:{position:"absolute",top:"-50px",right:0},onClick:function(){return e.payAgentModal(null)}}),this.state.payAgentData?r.a.createElement("div",null,r.a.createElement("h2",null,"Pay ",this.state.payAgentData.user.first_name),r.a.createElement(l,{formProp:{method:"post",action:Ot,successFn:function(){t.payAgentModal(null)},errorFn:function(){},confirm:!0,confirmText:"Are you sure to pay out this advisor?"},fields:[{label:"Amount",key:"amount",type:I,required:!0,follow:"INR"},{label:"Date",key:"date",type:C,required:!0,format:"YYYY-MM-DD",initialValue:Or()()},{label:"Comments",key:"comments",type:S,required:!0,extra:"Comments for this transaction"}],defaultValues:[{key:"ledger_type",value:"Payout"},{key:"amount_type",value:"Non Refundable"},{key:"practice",value:this.props.active_practiceId},{key:"is_mlm",value:!1},{key:"is_cancelled",value:!1},{key:"patient",value:this.state.payAgentData.id},{key:"staff",value:this.props.user.id}]})):null))))}}]),t}(r.a.Component),oo=vr.a.create()(lo),so=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={},a.loadData=a.loadData.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentWillMount",value:function(){this.props.match.params.id&&this.loadData()}},{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"loadData",value:function(){var e=this,t={id:e.props.match.params.id};Ut(At,(function(t){e.setState({editZoomData:t[0]})}),(function(){}),t)}},{key:"render",value:function(){var e,t=this,a=this,n=[{label:"User Name",key:"username",type:S,initialValue:a.state.editZoomData?a.state.editZoomData.username:""},{label:"API key",key:"API_Key",type:S,initialValue:this.state.editZoomData?this.state.editZoomData.API_Key:""},{label:"API Secret",key:"API_Secret",type:S,initialValue:this.state.editZoomData?this.state.editZoomData.API_Secret:""}],i=vr.a.create()(Vr);this.state.editZoomData&&(e={successFn:function(e){Qt(O,"success"),a.setState({redirect:!0}),a.props.loadData()},errorFn:function(){},action:Kt(At,[this.props.match.params.id]),method:"post"});var l={successFn:function(e){Qt(O,"success"),a.setState({redirect:!0}),a.props.loadData()},errorFn:function(){},action:At,method:"post"},o=[{key:"id",value:this.props.match.params.id}];return r.a.createElement(rr.a,null,r.a.createElement(cr.a,null,r.a.createElement(y.b,{exact:!0,path:"/settings/zoom-user/edit/:id",render:function(){return t.props.match.params.id?r.a.createElement(i,{title:"Edit Zoom User",defaultValues:o,changeRedirect:t.changeRedirect,formProp:e,fields:n}):r.a.createElement(y.a,{to:"/settings/zoom-user"})}}),r.a.createElement(y.b,{exact:!0,path:"/settings/zoom-user/add",render:function(){return r.a.createElement(i,{title:"Add Zoom User",changeRedirect:t.changeRedirect,formProp:l,fields:n})}})),this.state.redirect&&r.a.createElement(y.a,{to:"/settings/zoom-user"}))}}]),t}(r.a.Component),co=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={loading:!0},a.loadData=a.loadData.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentWillMount",value:function(){this.loadData()}},{key:"loadData",value:function(){var e=this;Ut(At,(function(t){e.setState({zoomUser:t,loading:!1})}),(function(){e.setState({loading:!1})}))}},{key:"deleteObject",value:function(e){var t=this,a={};a.id=e.id,a.is_active=!1;qt(Kt(At,[e.id]),a,(function(e){t.loadData()}),(function(){}))}},{key:"render",value:function(){var e=this,t=this,a=[{title:"User Name",dataIndex:"username",key:"username"},{title:"API Key",dataIndex:"API_Key",key:"API_key"},{title:"API Secret",dataIndex:"API_Secret",key:"API_Secret"},{title:"Actions",render:function(e){return r.a.createElement("div",null,r.a.createElement(Da.b,{to:"/settings/zoom-user/edit/"+e.id},"Edit"),r.a.createElement(sr.a,{type:"vertical"}),r.a.createElement(or.a,{title:"Are you sure delete this item?",onConfirm:function(){return t.deleteObject(e)},okText:"Yes",cancelText:"No"},r.a.createElement("a",null,"Delete")))}}];return r.a.createElement("div",null,r.a.createElement(y.d,null,r.a.createElement(y.b,{exact:!0,path:"/settings/zoom-user/add",render:function(t){return r.a.createElement(so,Object.assign({},e.state,t,{loadData:e.loadData}))}}),r.a.createElement(y.b,{exact:!0,path:"/settings/zoom-user/edit/:id",render:function(t){return r.a.createElement(so,Object.assign({loadData:e.loadData},t,e.state))}}),r.a.createElement(cr.a,{title:"Zoom User",extra:r.a.createElement(Da.b,{to:"/settings/zoom-user/add"},r.a.createElement(da.a,{type:"primary"},r.a.createElement(va.a,{type:"plus"})," Add Zoom User"))},r.a.createElement(lr.a,{dataSource:this.state.zoomUser,columns:a,pagination:!1}))))}}]),t}(r.a.Component),uo=o.a.Content,po=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={collapsed:!1},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(uo,{className:"main-container",style:{minHeight:280}},r.a.createElement(o.a,null,r.a.createElement(ol,this.props),r.a.createElement(uo,{style:{margin:"24px 16px",minHeight:280}},r.a.createElement(y.d,null,r.a.createElement(y.b,{exact:!0,path:"/settings/clinics-staff/adddoctor",render:function(t){return e.props.activePracticePermissions.SettingsPracticeStaff||e.props.allowAllPermissions?r.a.createElement(ci,Object.assign({},e.props,t)):r.a.createElement(xi,null)}}),r.a.createElement(y.b,{exact:!0,path:"/settings/clinics-staff/:doctorid/edit",render:function(t){return e.props.activePracticePermissions.SettingsPracticeStaff||e.props.allowAllPermissions?r.a.createElement(ci,Object.assign({},e.props,t)):r.a.createElement(xi,null)}}),r.a.createElement(y.b,{exact:!0,path:"/settings/clinics-staff/addstaff",render:function(t){return e.props.activePracticePermissions.SettingsPracticeStaff||e.props.allowAllPermissions?r.a.createElement(ui,Object.assign({},e.props,t)):r.a.createElement(xi,null)}}),r.a.createElement(y.b,{exact:!0,path:"/settings/clinics-staff/staff/:staffid/edit",render:function(t){return e.props.activePracticePermissions.SettingsPracticeStaff||e.props.allowAllPermissions?r.a.createElement(ui,Object.assign({},e.props,t)):r.a.createElement(xi,null)}}),r.a.createElement(y.b,{path:"/settings/clinics-staff",render:function(t){return e.props.activePracticePermissions.SettingsPracticeStaff||e.props.allowAllPermissions?r.a.createElement(si,Object.assign({},e.props,t)):r.a.createElement(xi,null)}}),r.a.createElement(y.b,{exact:!0,path:"/settings/clinics",render:function(t){return e.props.activePracticePermissions.SettingsPracticeDetail||e.props.allowAllPermissions?r.a.createElement(ur,Object.assign({},e.props,t)):r.a.createElement(xi,null)}}),r.a.createElement(y.b,{exact:!0,path:"/settings/clinics/add",render:function(t){return e.props.activePracticePermissions.SettingsPracticeDetail||e.props.allowAllPermissions?r.a.createElement(vi,Object.assign({},e.props,t)):r.a.createElement(xi,null)}}),r.a.createElement(y.b,{exact:!0,path:"/settings/clinics/:id/edit",render:function(t){return e.props.activePracticePermissions.SettingsPracticeDetail||e.props.allowAllPermissions?r.a.createElement(Hi,Object.assign({},e.props,{practiceId:t.match.params.id},t)):r.a.createElement(xi,null)}}),r.a.createElement(y.b,{exact:!0,path:"/settings/communication-settings",render:function(t){return e.props.activePracticePermissions.SettingsCommunincations||e.props.allowAllPermissions?r.a.createElement(Pi,Object.assign({},e.props,t)):r.a.createElement(xi,null)}}),r.a.createElement(y.b,{exact:!0,path:"/settings/calendarsettings",render:function(t){return e.props.activePracticePermissions.SettingsCalendar||e.props.allowAllPermissions?r.a.createElement(il,Object.assign({},e.props,t)):r.a.createElement(xi,null)}}),r.a.createElement(y.b,{path:"/settings/procedures",render:function(t){return e.props.activePracticePermissions.SettingsProcedureCatalog||e.props.allowAllPermissions?r.a.createElement(Mi,Object.assign({},e.props,t)):r.a.createElement(xi,null)}}),r.a.createElement(y.b,{path:"/settings/billing",render:function(t){return e.props.activePracticePermissions.SettingsBilling||e.props.allowAllPermissions?r.a.createElement(Fi,Object.assign({},e.props,t)):r.a.createElement(xi,null)}}),r.a.createElement(y.b,{exact:!0,path:"/settings/loyalty",render:function(t){return e.props.activePracticePermissions.SettingsLoyalty||e.props.allowAllPermissions?r.a.createElement(Fl,e.props):r.a.createElement(xi,null)}}),r.a.createElement(y.b,{path:"/settings/emr",render:function(t){return e.props.activePracticePermissions.SettingsEMR||e.props.allowAllPermissions?r.a.createElement(Bi,Object.assign({},e.props,t)):r.a.createElement(xi,null)}}),r.a.createElement(y.b,{path:"/settings/prescriptions",render:function(t){return e.props.activePracticePermissions.SettingsPrescriptions||e.props.allowAllPermissions?r.a.createElement(Ki,Object.assign({},e.props,t)):r.a.createElement(xi,null)}}),r.a.createElement(y.b,{exact:!0,path:"/settings/expense-types",render:function(t){return e.props.activePracticePermissions.SettingsExpenseTypes||e.props.allowAllPermissions?r.a.createElement(Qi,e.props):r.a.createElement(xi,null)}}),r.a.createElement(y.b,{path:"/settings/labs",render:function(t){return e.props.activePracticePermissions.SettingsLabs||e.props.allowAllPermissions?r.a.createElement(Wl,Object.assign({},e.props,t)):r.a.createElement(xi,null)}}),r.a.createElement(y.b,{exact:!0,path:"/settings/medical-history",render:function(t){return e.props.activePracticePermissions.SettingsMedicalHistory||e.props.allowAllPermissions?r.a.createElement(Zi,e.props):r.a.createElement(xi,null)}}),r.a.createElement(y.b,{path:"/settings/agents",render:function(t){return e.props.activePracticePermissions.SettingsAgents||e.props.allowAllPermissions?r.a.createElement(oo,Object.assign({},e.state,e.props,t,{key:e.state.active_practiceId})):r.a.createElement(xi,null)}}),r.a.createElement(y.b,{path:"/settings/agent-roles",render:function(t){return e.props.activePracticePermissions.SettingsAgentRoles||e.props.allowAllPermissions?r.a.createElement(Xl,Object.assign({},e.state,e.props,t,{key:e.state.active_practiceId})):r.a.createElement(xi,null)}}),r.a.createElement(y.b,{path:"/settings/mlm",render:function(t){return e.props.activePracticePermissions.SettingsMLMSettings||e.props.allowAllPermissions?r.a.createElement(ml,Object.assign({},e.state,e.props,t,{key:e.state.active_practiceId})):r.a.createElement(xi,null)}}),r.a.createElement(y.b,{path:"/settings/printout",render:function(t){return e.props.activePracticePermissions.SettingsPrintouts||e.props.allowAllPermissions?r.a.createElement(Ol,Object.assign({},e.state,t,e.props,{key:e.state.active_practiceId})):r.a.createElement(xi,null)}}),r.a.createElement(y.b,{path:"/settings/mailpdfsettings",render:function(t){return e.props.activePracticePermissions.SettingsEmailPDFSettings||e.props.allowAllPermissions?r.a.createElement(Pl,Object.assign({},e.state,t,e.props)):r.a.createElement(xi,null)}}),r.a.createElement(y.b,{path:"/settings/integration",render:function(t){return r.a.createElement(kl,Object.assign({},e.state,e.props,t))}}),r.a.createElement(y.b,{exact:!0,path:"/settings/roomtypes",render:function(t){return e.props.activePracticePermissions.SettingsRoomTypes||e.props.allowAllPermissions?r.a.createElement(jl,e.props):r.a.createElement(xi,null)}}),r.a.createElement(y.b,{exact:!0,path:"/settings/diseases",render:function(t){return e.props.activePracticePermissions.SettingsDiseaseList||e.props.allowAllPermissions?r.a.createElement(Zl,e.props):r.a.createElement(xi,null)}}),r.a.createElement(y.b,{path:"/settings/bed-packages",render:function(t){return e.props.activePracticePermissions.SettingsBedPackages||e.props.allowAllPermissions?r.a.createElement(xl,Object.assign({},e.state,e.props,t)):r.a.createElement(xi,null)}}),r.a.createElement(y.b,{path:"/settings/medicine-packages",render:function(t){return e.props.activePracticePermissions.SettingsMedicinePackages||e.props.allowAllPermissions?r.a.createElement(Ql,Object.assign({},e.state,e.props,t)):r.a.createElement(xi,null)}}),r.a.createElement(y.b,{path:"/settings/zoom-user",render:function(t){return e.props.activePracticePermissions.SettingsMedicinePackages||e.props.allowAllPermissions?r.a.createElement(co,Object.assign({},e.state,e.props,t)):r.a.createElement(xi,null)}}),r.a.createElement(y.b,{component:Xi})))))}}]),t}(r.a.Component),mo=(a(1575),a(1576),a(410)),ho=a.n(mo),fo=a(411),go=a.n(fo),yo=a(194),Eo=(a(1603),a(35)),bo=(a(195),a(136)),vo=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).loadAppointmentDetails=function(){a.setState({loading:!0});var e=Object(f.a)(a);Ut(Kt(Ee,[a.props.appointmentId]),(function(t){e.setState({appointment:t,loading:!1}),console.log("event",t)}),(function(){e.setState({loading:!1})}))},a.updateAppointmentStatus=function(e,t,n){var r=Object(f.a)(a),i={status:n};n==Ja?i.waiting=Or()().format():n==$a?i.engaged=Or()().format():n==en&&(i.checkout=Or()().format());Ht(Kt(Ee,[e]),i,(function(e){Qt(O,"Appointment Status Changed Successfully!!"),r.loadAppointmentDetails()}),(function(){}))},a.changeAppointmentStatus=function(e,t,n){var r=Object(f.a)(a);Ut(Kt(Ee,[e]),(function(a){a.status==t?r.updateAppointmentStatus(e,t,n):(Qt(k,"Appointment status has already changed. Updating Appointments..."),r.loadAppointmentDetails())}),(function(){}))},a.state={loading:!0,appointment:null},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){console.log(this.props),this.props.appointmentId?this.loadAppointmentDetails():this.setState({loading:!1})}},{key:"render",value:function(){var e=this,t=this.state.appointment;return r.a.createElement("div",{style:{width:"300px",minHeight:"200px"}},r.a.createElement(pa.a,{spinning:this.state.loading},this.state.appointment?r.a.createElement("div",null,r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:8},this.state.appointment.patient.image?r.a.createElement(ba.a,{src:this.state.appointment.patient.image,size:80}):r.a.createElement(ba.a,{style:{backgroundColor:"#87d068"}},this.state.appointment.patient.user.first_name?this.state.appointment.patient.user.first_name.charAt(0):r.a.createElement(va.a,{type:"user"}))),r.a.createElement(ir.a,{span:16},r.a.createElement(Da.b,{to:"/patient/"+this.state.appointment.patient.id+"/profile"},r.a.createElement("h3",null,this.state.appointment.patient.user.first_name,r.a.createElement("br",null),r.a.createElement("small",null,"Patient ID: ",this.state.appointment.patient.custom_id," , ",this.state.appointment.patient.gender,r.a.createElement("br",null),this.state.appointment.patient.user.mobile))))),r.a.createElement(sr.a,{style:{margin:0}}),r.a.createElement("small",null,"Status: ",this.state.appointment.status),r.a.createElement("br",null),r.a.createElement("small",null,r.a.createElement(va.a,{type:"clock-circle"})," ",Or()(this.state.appointment.schedule_at).format("HH:mm A on MMMM Do")," for ",this.state.appointment.slot," mins."),function(e){switch(e.status){case Ja:return r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("small",null,"Checked in At ",Or()(e.waiting).format("lll")));case $a:return r.a.createElement("div",null,r.a.createElement("small",null,"Waiting Time ",Or()(e.engaged).from(Or()(e.waiting))),r.a.createElement("br",null),r.a.createElement("small",null,"Engaged At ",Or()(e.engaged).format("lll")));case en:return r.a.createElement("div",null,r.a.createElement("small",null,"Waiting Time ",Or()(e.engaged).from(Or()(e.waiting))),r.a.createElement("br",null),r.a.createElement("small",null,"Engaged Time ",Or()(e.checkout).from(Or()(e.engaged))),r.a.createElement("br",null),r.a.createElement("small",null,"Total Stay Time ",Or()(e.checkout).from(Or()(e.waiting))))}return null}(t),r.a.createElement(rr.a,{style:{height:"100px",overflow:"scroll",backgroundColor:"#eee",padding:5}},r.a.createElement("div",null,t.status==Xa?r.a.createElement("span",{style:{width:"70px",float:"right"}},r.a.createElement("a",{onClick:function(){return e.changeAppointmentStatus(t.id,Xa,Ja)},disabled:e.props.activePracticePermissions.ChangeAppointmentStatus}," Check In")):null,t.status==Ja?r.a.createElement("span",{style:{width:"70px",float:"right"}},r.a.createElement("a",{onClick:function(){return e.changeAppointmentStatus(t.id,Ja,$a)},disabled:e.props.activePracticePermissions.ChangeAppointmentStatus}," Engage")):null,t.status==$a?r.a.createElement("span",{style:{width:"70px",float:"right"}},r.a.createElement("a",{onClick:function(){return e.changeAppointmentStatus(t.id,$a,en)},disabled:e.props.activePracticePermissions.ChangeAppointmentStatus}," Check Out")):null,t.status==en?r.a.createElement("span",{style:{width:"70px",float:"right"}},r.a.createElement("small",null,"Checked Out")):null,this.state.appointment.doctor_data?r.a.createElement(fa.a,{color:this.state.appointment.doctor_data?this.state.appointment.doctor_data.calendar_colour:null},r.a.createElement("b",null,"With "+this.state.appointment.doctor_data.user.first_name," ")):null),r.a.createElement(sr.a,{style:{margin:0}}),r.a.createElement("b",null,"Category:"),this.state.appointment.category_data?this.state.appointment.category_data.name:null),r.a.createElement(sr.a,{style:{margin:0}}),r.a.createElement(rr.a,{style:{textAlign:"right"}},r.a.createElement(da.a.Group,{size:"small"},e.props.activePracticePermissions.EditAppointment||e.props.allowAllPermissions?r.a.createElement(da.a,null,r.a.createElement(Da.b,{to:"/calendar/"+this.state.appointment.id+"/edit-appointment"},r.a.createElement(va.a,{type:"edit"})," Edit")):null,e.props.activePracticePermissions.ChangeAppointmentStatus||e.props.allowAllPermissions?r.a.createElement(or.a,{title:"Are you sure delete this?",onConfirm:function(){return e.changeAppointmentStatus(t.id,t.status,tn)},okText:"Yes",cancelText:"No"},r.a.createElement(da.a,{type:"danger"},r.a.createElement(va.a,{type:"cross"})," Cancel")):null))):r.a.createElement("h4",null,"No Patient Found")))}}]),t}(r.a.Component);var _o=function(e){function t(e){return Object(d.a)(this,t),Object(m.a)(this,Object(h.a)(t).call(this,e))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement(bo.a,{placement:"right",content:r.a.createElement(vo,Object.assign({appointmentId:this.props.event.appointment.id,key:this.props.event.appointment.id},this.props)),trigger:"hover"},r.a.createElement("div",{style:{color:"white",height:"100%"}},r.a.createElement("h1",{style:{color:"white"}},r.a.createElement(va.a,{type:"user"}),this.props.title)))}}]),t}(r.a.Component);function Oo(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Do(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Oo(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Oo(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ko=r.a.createElement(_a.a,null,r.a.createElement(_a.a.Item,{key:"1"},r.a.createElement(Da.b,{to:"/settings/calendarsettings#timings"},"Modify Calendar Timings")),r.a.createElement(_a.a.Item,{key:"2"},r.a.createElement(Da.b,{to:"/settings/clinics-staff#staff"},"Add/Edit Doctor or Staff")),r.a.createElement(_a.a.Item,{key:"3"},r.a.createElement(Da.b,{to:"/settings/clinics-staff#notification"},"Modify SMS/Email for Doctor/Staff")),r.a.createElement(_a.a.Item,{key:"4"},r.a.createElement(Da.b,{to:"/settings/communication-settings"},"Modify SMS/Email for Patients")),r.a.createElement(_a.a.Item,{key:"5"},r.a.createElement(Da.b,{to:"/settings/calendarsettings#categories"},"Add/Edit Categroies"))),Po=function(e,t){var a=E.get("calendar_settings");a||(a={}),a=Do({},a,Object(u.a)({},e,t)),E.set("calendar_settings",a)},So=function(){var e=E.get("calendar_settings");return e||(e={}),e},xo=function(e){var t=!0,a=Or()(e.value).isValid()?Or()(e.value).format("dddd").toLowerCase():null;if("DOCTOR"!=e.filterType||"ALL"==e.selectedDoctor)if(e.calendarTimings&&a&&e.calendarTimings[a]){var n=e.calendarTimings[a];n.lunch?(Or()(e.value,"HH:mm:ss").format("HH:mm:ss")<=n.startTime.format("HH:mm:ss")||Or()(e.value,"HH:mm:ss").format("HH:mm:ss")>n.endTime.format("HH:mm:ss")||Or()(e.value,"HH:mm:ss").format("HH:mm:ss")<n.lunchEndTime.format("HH:mm:ss")&&Or()(e.value,"HH:mm:ss").format("HH:mm:ss")>=n.lunchStartTime.format("HH:mm:ss"))&&(t=!1):(Or()(e.value,"HH:mm:ss").format("HH:mm:ss")<=n.startTime.format("HH:mm:ss")||Or()(e.value,"HH:mm:ss").format("HH:mm:ss")>n.endTime.format("HH:mm:ss"))&&(t=!1)}else a&&!e.calendarTimings[a]&&(t=!1);else if(e.doctorTimings&&a&&e.doctorTimings[a]){var i=e.doctorTimings[a];i.lunch?(Or()(e.value,"HH:mm:ss").format("HH:mm:ss")<=i.startTime.format("HH:mm:ss")||Or()(e.value,"HH:mm:ss").format("HH:mm:ss")>i.endTime.format("HH:mm:ss")||Or()(e.value,"HH:mm:ss").format("HH:mm:ss")<i.lunchEndTime.format("HH:mm:ss")&&Or()(e.value,"HH:mm:ss").format("HH:mm:ss")>=i.lunchStartTime.format("HH:mm:ss"))&&(t=!1):(Or()(e.value,"HH:mm:ss").format("HH:mm:ss")<=i.startTime.format("HH:mm:ss")||Or()(e.value,"HH:mm:ss").format("HH:mm:ss")>i.endTime.format("HH:mm:ss"))&&(t=!1)}else e.doctorTimings&&a&&!e.doctorTimings[a]&&(t=!1);if(e.showCalendarEvents&&t)for(var l=0;l<e.blockedCalendar.length;l++)if(e.blockedCalendar[l].doctor&&"DOCTOR"==e.filterType){if(e.blockedCalendar[l].doctor==e.selectedDoctor&&Or()(e.value).isBetween(Or()(e.blockedCalendar[l].block_from),Or()(e.blockedCalendar[l].block_to))){t=!1;break}}else if(Or()(e.value).isBetween(Or()(e.blockedCalendar[l].block_from),Or()(e.blockedCalendar[l].block_to))){t=!1;break}if(t)return e.children;var o=r.a.Children.only(e.children);return r.a.cloneElement(o,{className:o.props.className+" rbc-off-range-bg"})},jo=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).changeDate=function(e){var t=Object(f.a)(a);a.setState((function(t){return e?{selectedDate:t.selectedDate.add(1,"days")}:{selectedDate:t.selectedDate.subtract(1,"days")}}),(function(){t.todaysAppointments()}))},a.todaysAppointments=function(){var e=Object(f.a)(a);e.setState({loading:!0});Ut(Kt(be,[a.props.active_practiceId]),(function(t){e.setState((function(e){var a={},n=[];return t.forEach((function(t){if(t.status==tn)return!0;a[t.status]?a[t.status]+=1:a[t.status]=1,"ALL"==e.todaysAppointmentFilter?n.push(t):e.todaysAppointmentFilter==t.status&&n.push(t)})),{todaysAppointments:t,todaysAppointmentOverview:a,todaysFilteredAppointments:n,loading:!1}}))}),(function(){e.setState({loading:!1})}),{start:e.state.selectedDate.format("YYYY-MM-DD"),end:e.state.selectedDate.format("YYYY-MM-DD")})},a.filterTodaysAppointment=function(e){a.setState((function(t){var a=[];return t.todaysAppointments.forEach((function(t){"ALL"==e?a.push(t):e==t.status&&a.push(t)})),{todaysFilteredAppointments:a,todaysAppointmentFilter:e}}))},a.changeAppointmentStatus=function(e,t,n){var r=Object(f.a)(a);Ut(Kt(Ee,[e]),(function(a){a.status==t?r.updateAppointmentStatus(e,t,n):(Qt(k,"Appointment status has already changed. Updating Appointments..."),r.todaysAppointments())}),(function(){}))},a.updateAppointmentStatus=function(e,t,n){var r=Object(f.a)(a),i={status:n};n==Ja?i.waiting=Or()().format():n==$a?i.engaged=Or()().format():n==en&&(i.checkout=Or()().format());Ht(Kt(Ee,[e]),i,(function(e){Qt(O,"Appointment Status Changed Successfully!!"),r.todaysAppointments()}),(function(){}))},a.state={todaysAppointments:[],todaysFilteredAppointments:[],todaysAppointmentOverview:{},todaysAppointmentFilter:"ALL",selectedDate:Or()()},a.todaysAppointments=a.todaysAppointments.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.todaysAppointments()}},{key:"render",value:function(){var e=this,t=this;return r.a.createElement("div",null,r.a.createElement(ha.a,{trigger:"click",overlay:ko},r.a.createElement(da.a,{block:!0,style:{margin:5}},r.a.createElement(va.a,{type:"setting"})," Settings ",r.a.createElement(va.a,{type:"down"}))),t.props.activePracticePermissions.AddWalkinAppointment||t.props.allowAllPermissions?r.a.createElement(Da.b,{to:"/calendar/create-appointment"},r.a.createElement(da.a,{block:!0,type:"primary",style:{margin:5}}," Walkin Appointment")):null,r.a.createElement(rr.a,{gutter:8},r.a.createElement(ir.a,{span:6,onClick:function(){return e.filterTodaysAppointment(e.state.todaysAppointmentFilter==Xa?"ALL":Xa)},style:{textAlign:"center",border:"1px solid #ccc",borderRadius:"3px",backgroundColor:this.state.todaysAppointmentFilter==Xa?"#FF6600":null,color:this.state.todaysAppointmentFilter==Xa?"white":"#FF6600",boxShadow:"0 2px 4px #111 inset"}},r.a.createElement("small",null,Xa),r.a.createElement("h2",{style:{color:this.state.todaysAppointmentFilter==Xa?"white":"#FF6600"}},this.state.todaysAppointmentOverview[Xa]?this.state.todaysAppointmentOverview[Xa]:0)),r.a.createElement(ir.a,{span:6,onClick:function(){return e.filterTodaysAppointment(e.state.todaysAppointmentFilter==Ja?"ALL":Ja)},style:{textAlign:"center",border:"1px solid #ccc",borderRadius:"3px",backgroundColor:this.state.todaysAppointmentFilter==Ja?"#FC0000":null,color:this.state.todaysAppointmentFilter==Ja?"white":"#FC0000",boxShadow:"0 2px 4px #111 inset"}},r.a.createElement("small",null,Ja),r.a.createElement("h2",{style:{color:this.state.todaysAppointmentFilter==Ja?"white":"#FC0000"}},this.state.todaysAppointmentOverview[Ja]?this.state.todaysAppointmentOverview[Ja]:0)),r.a.createElement(ir.a,{span:6,onClick:function(){return e.filterTodaysAppointment(e.state.todaysAppointmentFilter==$a?"ALL":$a)},style:{textAlign:"center",border:"1px solid #ccc",borderRadius:"3px",backgroundColor:this.state.todaysAppointmentFilter==$a?"#598C01":null,color:this.state.todaysAppointmentFilter==$a?"white":"#598C01",boxShadow:"0 2px 4px #111 inset"}},r.a.createElement("small",null,$a),r.a.createElement("h2",{style:{color:this.state.todaysAppointmentFilter==$a?"white":"#598C01"}},this.state.todaysAppointmentOverview[$a]?this.state.todaysAppointmentOverview[$a]:0)),r.a.createElement(ir.a,{span:6,onClick:function(){return e.filterTodaysAppointment(e.state.todaysAppointmentFilter==en?"ALL":en)},style:{textAlign:"center",border:"1px solid #ccc",borderRadius:"3px",backgroundColor:this.state.todaysAppointmentFilter==en?"#0094DE":null,color:this.state.todaysAppointmentFilter==en?"white":"#0094DE",boxShadow:"0 2px 4px #111 inset"}},r.a.createElement("small",null,en),r.a.createElement("h2",{style:{color:this.state.todaysAppointmentFilter==en?"white":"#0094DE"}},this.state.todaysAppointmentOverview[en]?this.state.todaysAppointmentOverview[en]:0))),r.a.createElement(sr.a,null,r.a.createElement("a",{type:"primary",onClick:function(){return e.changeDate(!1)}},r.a.createElement(va.a,{type:"left"})),this.state.selectedDate.format("MMM Do")==Or()().format("MMM Do")?"Today":this.state.selectedDate.format("MMM Do"),"'s Schedule (",this.state.todaysFilteredAppointments.length,") \xa0",r.a.createElement("a",{type:"primary",onClick:function(){return e.changeDate(!0)}},r.a.createElement(va.a,{type:"right"}))),r.a.createElement(pa.a,{spinning:this.state.loading},r.a.createElement(Ea.a,{size:"small",dataSource:this.state.todaysFilteredAppointments,renderItem:function(a){return a.status==tn?r.a.createElement("div",null):r.a.createElement(Ea.a.Item,{color:"transparent",style:{padding:0}},r.a.createElement("div",{style:{border:"1px solid #ddd",borderRadius:"5px",textDecoration:a.status==tn?"line-through":"inherit",backgroundColor:a.status==tn?"#aaa":"#eee",width:"100%",marginTop:"2px",borderLeft:"5px solid"+(a.doctor&&t.props.doctors_object&&t.props.doctors_object[a.doctor]?t.props.doctors_object[a.doctor].calendar_colour:"transparent")}},r.a.createElement(Io,Object.assign({},a,{changeAppointmentStatus:e.changeAppointmentStatus},e.props))))}})))}}]),t}(r.a.Component);function Io(e){return r.a.createElement("div",{style:{width:"100%"}},r.a.createElement("p",{style:{marginBottom:0}},r.a.createElement(bo.a,{placement:"right",content:r.a.createElement(vo,Object.assign({appointmentId:e.id,key:e.id},e))},r.a.createElement("span",{style:{width:"calc(100% - 60px)"}},r.a.createElement("b",null,Or()(e.schedule_at).format("LT")),"\xa0",e.patient.user.first_name)),e.status==Xa?r.a.createElement("span",{style:{width:"70px",float:"right"}},r.a.createElement("a",{onClick:function(){return e.changeAppointmentStatus(e.id,Xa,Ja)},disabled:!e.activePracticePermissions.ChangeAppointmentStatus}," Check In")):null,e.status==Ja?r.a.createElement("span",{style:{width:"70px",float:"right"}},r.a.createElement("a",{onClick:function(){return e.changeAppointmentStatus(e.id,Ja,$a)},disabled:!e.activePracticePermissions.ChangeAppointmentStatus}," Engage")):null,e.status==$a?r.a.createElement("span",{style:{width:"70px",float:"right"}},r.a.createElement("a",{onClick:function(){return e.changeAppointmentStatus(e.id,$a,en)},disabled:!e.activePracticePermissions.ChangeAppointmentStatus}," Check Out")):null,e.status==en?r.a.createElement("span",{style:{width:"70px",float:"right"}},r.a.createElement("small",null,"Checked Out")):null))}function Co(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function wo(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Co(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Co(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Mo=Object(yo.c)(Or.a),Ao=ho()(yo.a),To=o.a.Content,Ro=nr.a.confirm,Lo=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).changeCalendarType=function(e){var t=Object(f.a)(a);a.setState({calendarType:e,selectedDoctor:"ALL",selectedCategory:"ALL",filterType:"DOCTOR"},(function(){"APPOINTMENTS"==e?t.changeFilter("selectedDoctor","ALL"):"AVAILABILITY"==e&&t.state.practice_doctors.length&&t.changeFilter("selectedDoctor",t.state.practice_doctors[0].id)}))},a.resizeEvent=function(e){var t=e.event,n=e.start,r=e.end;if(t.appointment.status!=Xa)return Qt(D,"Action Not Allowed"),!0;var i=a.state.events,l={},o=Object(f.a)(a),s=[];i.forEach((function(e){e.id==t.id&&(l={schedule_at:Or()(n).format(),slot:parseInt((r-n)/6e4)})}));var c=function(e){Qt(O,"time changed"),i.forEach((function(e){s.push(e.id==t.id?wo({},e,{start:n,end:r}):e)})),o.setState({events:s},(function(){o.refreshFilterList()}))},u=function(){};Ro({title:"Are you sure to change the time of this appointment?",onOk:function(){Ht(Kt(Ee,[t.id]),l,c,u)},onCancel:function(){console.log("Cancel")}})},a.blockedCalendarTiming=function(e,t){var n=Object(f.a)(a);Ut(De,(function(e){n.setState({blockedCalendar:e})}),(function(){}),{practice:a.props.active_practiceId,cal_fdate:e.format(),cal_tdate:t.format()})},a.onRangeChange=function(e){if(e.start&&e.end)if(a.appointmentList(Or()(e.start),Or()(e.end)),1==Or()(e.start).date())a.setState({selectedDate:Or()(e.start)});else{var t=Or()(e.start);a.setState({selectedDate:t.month(t.month()+1).date(1)})}else e.length&&(7==e.length?a.appointmentList(Or()(e[0]).subtract(1,"day"),Or()(e[e.length-1]).subtract(1,"day")):a.appointmentList(Or()(e[0]),Or()(e[e.length-1])),a.setState({selectedDate:Or()(e[0])}))},a.onSelectedDateChange=function(e){a.setState({selectedDate:Or()(e)})},a.setFilterType=function(e){var t=Object(f.a)(a);a.setState({filterType:e.key,selectedDoctor:"ALL",selectedCategory:"ALL"},(function(){"DOCTOR"==e.key?t.changeFilter("selectedDoctor","ALL"):"CATEGORY"==e.key&&t.changeFilter("selectedCategory","ALL")}))},a.setFilter=function(e,t){var n=Object(f.a)(a);a.setState(Object(u.a)({},e,t),(function(){Po(e,t),n.changeFilter("tempKey","ALL")}))},a.refreshFilterList=function(){var e=a.state;"DOCTOR"==e.filterType?a.changeFilter("selectedDoctor",e.selectedDoctor):"CATEGORY"==e.filterType&&a.changeFilter("selectedCategory",e.selectedCategory)},a.changeFilter=function(e,t){"selectedDoctor"==e&&"ALL"!=t&&a.loadDoctorTiming(t),a.setState((function(a){var n,r=[];return a.events.forEach((function(n){if(!a.filterCancelledAppointment&&n.appointment.status==tn)return!0;"ALL"==t?r.push(n):"selectedDoctor"==e&&n.doctor==t?r.push(n):"selectedCategory"==e&&n.appointment.category==t&&r.push(n)})),n={},Object(u.a)(n,e,t),Object(u.a)(n,"filteredEvent",r),n}))},a.changeState=function(e,t){a.setState(Object(u.a)({},e,t),(function(){Po(e,t)}))},a.loadDoctorTiming=function(e){var t=Object(f.a)(a);Ut(Kt(Z,[a.props.active_practiceId]),(function(a){var n={};a.length&&(n=a[0]);var r={};rn.forEach((function(e){r[e]={},n.visting_hour_same_week?(r[e].startTime=Or()(n.first_start_time,"HH:mm:ss"),r[e].endTime=Or()(n.second_end_time,"HH:mm:ss"),n.is_two_sessions?(r[e].lunch=!0,r[e].lunchStartTime=Or()(n.first_end_time,"HH:mm:ss"),r[e].lunchEndTime=Or()(n.second_start_time,"HH:mm:ss")):r[e].lunch=!1):n[e]?(r[e].startTime=Or()(n["first_start_time_".concat(e)],"HH:mm:ss"),r[e].endTime=Or()(n["second_end_time_".concat(e)],"HH:mm:ss"),n["is_two_sessions_".concat(e)]?(r[e].lunch=!0,r[e].lunchStartTime=Or()(n["first_end_time_".concat(e)],"HH:mm:ss"),r[e].lunchEndTime=Or()(n["second_start_time_".concat(e)],"HH:mm:ss")):r[e].lunch=!1):r[e]=null})),t.setState((function(t){return{doctorTiming:wo({},t.doctorTiming,Object(u.a)({},e,wo({},r)))}}))}),(function(){}),{doctor:e})},a.state=wo({startTime:null,visiblePopover:!1,events:[],filteredEvent:[],appointments:[],practice_doctors:[],practice_categories:[],practice_staff:[],doctors_object:null,categories_object:null,calendarTimings:null,timing:{},loading:!0,selectedDoctor:"ALL",selectedCategory:"ALL",selectedDate:Or()(),filterType:"DOCTOR",calendarType:"APPOINTMENTS",doctorsAppointmentCount:{},categoriesAppointmentCount:{},blockedCalendar:[],showCalendarEvents:!0,showAppointments:!0,doctorTiming:{}},So()),a.onSelectSlot=a.onSelectSlot.bind(Object(f.a)(a)),a.onSelectEvent=a.onSelectEvent.bind(Object(f.a)(a)),a.moveEvent=a.moveEvent.bind(Object(f.a)(a)),a.resizeEvent=a.resizeEvent.bind(Object(f.a)(a)),a.loadDoctors=a.loadDoctors.bind(Object(f.a)(a)),a.eventStyleGetter=a.eventStyleGetter.bind(Object(f.a)(a)),a.loadCalendarTimings=a.loadCalendarTimings.bind(Object(f.a)(a)),a.loadCalendarTimings(),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e;this.appointmentList(Or()().subtract(1,"days"),Or()().add(5,"days")),this.loadDoctors(),Ut(Kt(oe,[(e=this).props.active_practiceId]),(function(t){var a={},n=t.map((function(e){return a[e.id]=Do({},e,{calendar_colour:gi(fi(e.name))}),a[e.id]}));e.setState({categories_object:a,practice_categories:n})}),(function(){}))}},{key:"loadDoctors",value:function(){var e=this;e.setState({doctorLoading:!0});Ut(Kt(K,[this.props.active_practiceId]),(function(t){var a=[],n=[],r={};t.staff.forEach((function(e){"3"==e.role?(a.push(e),r[e.id]=e):n.push(e)})),e.setState({practice_staff:n,practice_doctors:a,doctors_object:r,doctorLoading:!1})}),(function(){e.setState({doctorLoading:!1})}))}},{key:"loadCalendarTimings",value:function(){var e=this;Ut(Kt(ge,[this.props.active_practiceId]),(function(t){var a={};t.length&&(a=t[0]);var n={};rn.forEach((function(e){n[e]={},a.visting_hour_same_week?(n[e].startTime=Or()(a.first_start_time,"HH:mm:ss"),n[e].endTime=Or()(a.second_end_time,"HH:mm:ss"),a.is_two_sessions?(n[e].lunch=!0,n[e].lunchStartTime=Or()(a.first_end_time,"HH:mm:ss"),n[e].lunchEndTime=Or()(a.second_start_time,"HH:mm:ss")):n[e].lunch=!1):a[e]?(n[e].startTime=Or()(a["first_start_time_".concat(e)],"HH:mm:ss"),n[e].endTime=Or()(a["second_end_time_".concat(e)],"HH:mm:ss"),a["is_two_sessions_".concat(e)]?(n[e].lunch=!0,n[e].lunchStartTime=Or()(a["first_end_time_".concat(e)],"HH:mm:ss"),n[e].lunchEndTime=Or()(a["second_start_time_".concat(e)],"HH:mm:ss")):n[e].lunch=!1):n[e]=null})),e.setState({calendarTimings:wo({},a),timing:wo({},n),loading:!1})}),(function(){e.setState({loading:!1})}))}},{key:"moveEvent",value:function(e){var t=e.event,a=e.start,n=e.end,r=e.isAllDay;if(t.appointment.status!=Xa)return Qt(D,"Action Not Allowed"),!0;var i=this.state.events,l=i.indexOf(t),o=t.allDay,s=this;!t.allDay&&r?o=!0:t.allDay&&!r&&(o=!1);var c=wo({},t,{start:a,end:n,allDay:o}),u=Object(Oa.a)(i),d={schedule_at:Or()(a).format(),slot:parseInt((n-a)/6e4)},p=function(e){Qt(O,"time changed"),u.splice(l,1,c),s.setState({events:u},(function(){s.refreshFilterList()}))},m=function(){};Ro({title:"Are you sure to change the time of this appointment?",onOk:function(){Ht(Kt(Ee,[t.id]),d,p,m)},onCancel:function(){}})}},{key:"onSelectSlot",value:function(e){var t=Or()(e.start).format();"doubleClick"==e.action&&(this.setState({startTime:t,redirect:!0}),this.props.history.push("/calendar/create-appointment"))}},{key:"onSelectEvent",value:function(e,t){this.setState({visiblePopover:!0}),this.props.history.push("/patients/appointments/"+e.id)}},{key:"appointmentList",value:function(e,t){var a=this;a.setState({loading:!0});Ut(Kt(be,[this.props.active_practiceId]),(function(e){a.setState((function(t){t.events;var a=[],n=[],r={},i={};return e.forEach((function(e){var l=new Or.a(e.schedule_at).add(e.slot,"minutes"),o={appointment:e,start:new Date(Or()(e.schedule_at)),end:new Date(l),title:e.patient.user.first_name,id:e.id,doctor:e.doctor,loading:!1};if(r.ALL?(r.ALL.ALL+=1,e.status==tn&&(r.ALL.CANCELLED+=1)):(r.ALL={},r.ALL.ALL=1,e.status==tn?r.ALL.CANCELLED=1:r.ALL.CANCELLED=0),e.doctor&&r[e.doctor]?(r[e.doctor].ALL+=1,e.status==tn&&(r[e.doctor].CANCELLED+=1)):(r[e.doctor]={},r[e.doctor].ALL=1,e.status==tn?r[e.doctor].CANCELLED=1:r[e.doctor].CANCELLED=0),e.category&&r[e.category]?i[e.category]+=1:i[e.category]=1,a.push(o),!t.filterCancelledAppointment&&o.appointment.status==tn)return!0;"DOCTOR"==t.filterType&&"ALL"==t.selectedDoctor||"CATEGORY"==t.filterType&&"ALL"==t.selectedCategory?n.push(o):"DOCTOR"==t.filterType&&o.doctor==t.selectedDoctor?n.push(o):"CATEGORY"==t.filterType&&o.appointment.category==t.selectedCategory&&n.push(o)})),{events:a,filteredEvent:n,doctorsAppointmentCount:wo({},r),categoriesAppointmentCount:wo({},i,{ALL:e.length}),appointments:e,loading:!1}}))}),(function(){a.setState({loading:!1})}),{start:e.format("YYYY-MM-DD"),end:t.format("YYYY-MM-DD")}),this.blockedCalendarTiming(e,t)}},{key:"eventStyleGetter",value:function(e,t,a,n){var r=e.doctor,i=e.appointment.category,l=null,o={borderRadius:"0px",opacity:.8,border:"5px",color:"white",display:"block"};return e.appointment.status==tn?(o.backgroundColor="#aaa",o.textDecoration="line-through"):("DOCTOR"==this.state.filterType?l=r&&this.state.doctors_object&&this.state.doctors_object[r]?this.state.doctors_object[r].calendar_colour:"black":"CATEGORY"==this.state.filterType&&(l=i&&this.state.categories_object&&this.state.categories_object[i]?"#"+this.state.categories_object[i].calendar_colour:"black"),o.backgroundColor=l),{style:o}}},{key:"render",value:function(){var e=this,t=this;this.state.calendarTimings&&(new Date(new Or.a(this.state.calendarTimings.start_time,"HH:mm:ss")),new Date(new Or.a(this.state.calendarTimings.end_time,"HH:mm:ss")));return r.a.createElement(To,{className:"main-container"},r.a.createElement("div",{style:{padding:"5px"}},r.a.createElement(y.d,null,r.a.createElement(y.b,null,r.a.createElement("div",{style:{backgroundColor:"#fff",padding:"5px 10px"}},r.a.createElement(rr.a,{gutter:16},r.a.createElement(ir.a,{span:3},r.a.createElement(yr.a,{onChange:this.onSelectedDateChange,value:this.state.selectedDate,format:"DD-MM-YYYY",style:{margin:5},allowClear:!1}),"APPOINTMENTS"==this.state.calendarType?r.a.createElement("div",null,t.props.activePracticePermissions.BlockCalendar||t.props.allowAllPermissions?r.a.createElement(da.a,{block:!0,style:{margin:5}},r.a.createElement(Da.b,{to:"/calendar/blockcalendar"},r.a.createElement(va.a,{type:"stop"})," Block Calendar")):null,r.a.createElement(ha.a,{trigger:"click",overlay:r.a.createElement(_a.a,{onClick:this.setFilterType},r.a.createElement(_a.a.Item,{key:"DOCTOR"},"DOCTOR"),r.a.createElement(_a.a.Item,{key:"CATEGORY"},"CATEGORY"))},r.a.createElement(da.a,{block:!0,style:{margin:5}},this.state.filterType," ",r.a.createElement(va.a,{type:"caret-down"})))):null,r.a.createElement(pa.a,{spinning:this.state.doctorLoading},"DOCTOR"==this.state.filterType?r.a.createElement(_a.a,{selectedKeys:[this.state.selectedDoctor],size:"small",onClick:function(t){return e.changeFilter("selectedDoctor",t.key)}},"APPOINTMENTS"==this.state.calendarType?r.a.createElement(_a.a.Item,{key:"ALL",style:{marginBottom:2,textOverflow:"ellipsis",borderLeft:"5px solid black",borderRight:"none"}},r.a.createElement("span",null,"(",this.state.doctorsAppointmentCount.ALL?this.state.filterCancelledAppointment?this.state.doctorsAppointmentCount.ALL.ALL:this.state.doctorsAppointmentCount.ALL.ALL-this.state.doctorsAppointmentCount.ALL.CANCELLED:0,") All Doctors")):null,this.state.practice_doctors.map((function(t){return r.a.createElement(_a.a.Item,{key:t.id,style:{textOverflow:"ellipsis",borderRight:"none",borderLeft:"5px solid "+t.calendar_colour,backgroundColor:e.state.selectedDoctor==t.id?t.calendar_colour:"inherit",color:e.state.selectedDoctor==t.id?"white":"inherit",fontWeight:e.state.selectedDoctor==t.id?"bold":"inherit"}},r.a.createElement("span",null,"(",e.state.doctorsAppointmentCount[t.id]?e.state.filterCancelledAppointment?e.state.doctorsAppointmentCount[t.id].ALL:e.state.doctorsAppointmentCount[t.id].ALL-e.state.doctorsAppointmentCount[t.id].CANCELLED:0,") ",t.user.first_name))}))):r.a.createElement(_a.a,{selectedKeys:[this.state.selectedCategory],size:"small",onClick:function(t){return e.changeFilter("selectedCategory",t.key)}},r.a.createElement(_a.a.Item,{key:"ALL",style:{marginBottom:2,textOverflow:"ellipsis",borderLeft:"5px solid black",borderRight:"none"}},r.a.createElement("span",null,"(",this.state.categoriesAppointmentCount.ALL?this.state.categoriesAppointmentCount.ALL:0,") All Categories")),this.state.practice_categories.map((function(t){return r.a.createElement(_a.a.Item,{key:t.id,style:{textOverflow:"ellipsis",borderRight:"none",borderLeft:"5px solid #"+t.calendar_colour,backgroundColor:e.state.selectedCategory==t.id?"#"+t.calendar_colour:"inherit",color:e.state.selectedCategory==t.id?"white":"inherit",fontWeight:e.state.selectedCategory==t.id?"bold":"inherit"}},r.a.createElement("span",null,"(",e.state.categoriesAppointmentCount[t.id]?e.state.categoriesAppointmentCount[t.id]:0,") ",t.name))}))),r.a.createElement("div",{style:{marginTop:16}},r.a.createElement(br.a.Group,{size:"small",checked:this.state.calendarType,defaultValue:this.state.calendarType,buttonStyle:"solid",onChange:function(t){return e.changeCalendarType(t.target.value)}},r.a.createElement(br.a.Button,{value:"APPOINTMENTS"},r.a.createElement("small",null,"Appointments")),r.a.createElement(br.a.Button,{value:"AVAILABILITY"},r.a.createElement("small",null,"Availability")))),r.a.createElement("div",{style:{position:"fixed",bottom:10,zIndex:9}},this.state.openMorePanel?r.a.createElement("div",{style:{boxShadow:"0 2px 4px #111",border:"1px solid #bbb",borderRadius:2,padding:5,backgroundColor:"white"}},r.a.createElement("ul",{style:{listStyle:"none",paddingInlineStart:0}},r.a.createElement("li",null,r.a.createElement(pr.a,{checked:this.state.showCalendarEvents,onChange:function(e){return t.changeState("showCalendarEvents",e.target.checked)}},r.a.createElement("small",null,"Events"))),r.a.createElement("li",null,r.a.createElement(pr.a,{checked:this.state.showAppointments,onChange:function(e){return t.changeState("showAppointments",e.target.checked)}},r.a.createElement("small",null,"Appointments"))),r.a.createElement("li",null,r.a.createElement(pr.a,{checked:this.state.show24HourCalendar,onChange:function(e){return t.changeState("show24HourCalendar",e.target.checked)}},r.a.createElement("small",null,"24 Hours"))),r.a.createElement("li",null,r.a.createElement(pr.a,{checked:this.state.filterCancelledAppointment,onChange:function(e){return t.setFilter("filterCancelledAppointment",e.target.checked)}},r.a.createElement("small",null,"Cancellled Appointment"))),r.a.createElement("li",null,r.a.createElement(sr.a,null)),r.a.createElement("li",null,r.a.createElement(Da.b,{to:"/settings/clinics-staff#staff"},r.a.createElement("small",null,"Add Doctor"))),r.a.createElement("li",null,r.a.createElement(Da.b,{to:"/settings/calendarsettings#timings"},r.a.createElement("small",null," Customize Calendar"))),r.a.createElement("li",null,r.a.createElement("a",null,r.a.createElement("small",null,"Resync")),r.a.createElement(da.a,{onClick:function(){return e.changeState("openMorePanel",!1)},shape:"circle",size:"small",type:"danger",icon:"close",style:{float:"right"}})))):r.a.createElement("a",{onClick:function(){return e.changeState("openMorePanel",!0)}},"More ",r.a.createElement(va.a,{type:"caret-down"}))))),"APPOINTMENTS"==this.state.calendarType?r.a.createElement("div",null,r.a.createElement(ir.a,{span:16},r.a.createElement(pa.a,{size:"large",spinning:this.state.loading},r.a.createElement(Ao,{key:"APPOINTMENTS",defaultDate:new Date,localizer:Mo,defaultView:"week",step:10,timeslots:1,truncateEvents:!1,events:this.state.showAppointments?this.state.filteredEvent:[],onEventDrop:this.moveEvent,onEventResize:this.resizeEvent,resizable:!0,selectable:!0,popup:this.onSelectEvent,onSelectSlot:this.onSelectSlot,views:{month:!0,week:Fo,day:!0,agenda:!0},style:{height:"calc(100vh - 85px)"},eventPropGetter:this.eventStyleGetter,date:new Date(this.state.selectedDate.format()),onRangeChange:this.onRangeChange,components:{event:function(e){return r.a.createElement(_o,Object.assign({},e,t.props))},timeSlotWrapper:function(e){return r.a.createElement(xo,Object.assign({},e,{key:e.value.toString(),blockedCalendar:t.state.blockedCalendar,calendarTimings:t.state.timing,doctorTimings:t.state.doctorTiming[t.state.selectedDoctor],filterType:t.state.filterType,selectedDoctor:t.state.selectedDoctor,showCalendarEvents:t.state.showCalendarEvents}))}}}))),r.a.createElement(ir.a,{span:5},r.a.createElement(jo,Object.assign({},this.props,this.state,{key:Or()(this.state.selectedDate).toISOString()})))):r.a.createElement(ir.a,{span:21},r.a.createElement(Ao,{key:"AVAILABILITY",defaultDate:new Date,localizer:Mo,defaultView:"week",step:10,timeslots:1,truncateEvents:!1,events:this.state.showAppointments?this.state.filteredEvent:[],onEventDrop:this.moveEvent,onEventResize:this.resizeEvent,resizable:!0,selectable:!0,popup:this.onSelectEvent,onSelectSlot:this.onSelectSlot,views:{week:!0,day:!0},style:{height:"calc(100vh - 85px)"},eventPropGetter:this.eventStyleGetter,date:new Date(this.state.selectedDate.format()),onRangeChange:this.onRangeChange,components:{event:function(e){return r.a.createElement(_o,Object.assign({},e,t.props))},timeSlotWrapper:function(e){return r.a.createElement(xo,Object.assign({},e,{key:e.value.toString(),blockedCalendar:t.state.blockedCalendar,calendarTimings:t.state.timing,doctorTimings:t.state.doctorTiming[t.state.selectedDoctor],filterType:t.state.filterType,selectedDoctor:t.state.selectedDoctor,showCalendarEvents:t.state.showCalendarEvents}))}}}))))))))}}]),t}(n.Component),Fo=function(e){function t(){return Object(d.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.date,a=t.range(e);return r.a.createElement(go.a,Object.assign({},this.props,{range:a,eventOffset:15}))}}]),t}(r.a.Component);Fo.range=function(e){for(var t=Eo.add(e,-1,"day"),a=Eo.add(t,6,"day"),n=t,r=[];Eo.lte(n,a,"day");)r.push(n),n=Eo.add(n,1,"day");return r},Fo.navigate=function(e,t){switch(t){case yo.b.PREVIOUS:return Eo.add(e,-3,"day");case yo.b.NEXT:return Eo.add(e,3,"day");default:return e}},Fo.title=function(e){return" ".concat(e.toLocaleDateString())};var No=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).getPatientGroup=function(){var e=Object(f.a)(a);Ut(Kt(ve,[a.props.active_practiceId]),(function(t){e.setState({patientGroup:t,loading:!1})}),(function(){e.setState({loading:!1})}))},a.state={patientGroup:[],loading:!0},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.getPatientGroup()}},{key:"deleteObject",value:function(e){var t=this,a=e;a.is_active=!1;qt(Kt(ve,[this.props.active_practiceId]),a,(function(e){t.getPatientGroup()}),(function(){}))}},{key:"render",value:function(){var e=this,t=[{title:"Group Name",dataIndex:"name",key:"name"},{title:"Patient Count",dataIndex:"patient_count",key:"patient_count"},{title:"Action",key:"action",render:function(t,a){return r.a.createElement(or.a,{title:"Are you sure delete this prescription?",onConfirm:function(){return e.deleteObject(a)},okText:"Yes",cancelText:"No"},r.a.createElement("a",null,"Delete"))}}],a=[{label:"Group Name",key:"name",required:!0,type:S}],n={successFn:function(t){console.log(t),Qt(O,"success"),e.getPatientGroup()},errorFn:function(){},action:Kt(ve,[this.props.active_practiceId]),method:"post",beforeSubmit:function(e){console.log(e)}},i=vr.a.create()(Vr);return r.a.createElement(rr.a,null,r.a.createElement(i,Object.assign({formProp:n,title:"Patient Groups",fields:a},this.props)),r.a.createElement(sr.a,null),r.a.createElement(ti,{dataSource:this.state.patientGroup,loading:this.state.loading,columns:t}))}}]),t}(r.a.Component),Yo=a(416),Vo=a.n(Yo),Bo=a(836),Ho=a.n(Bo);function qo(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function zo(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?qo(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):qo(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Go=cr.a.Meta,Uo=ma.a.Search,Wo=yr.a.MonthPicker,Ko=1,Qo=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).togglePatientGroupEditing=function(e){a.setState({showPatientGroupModal:!!e}),e||a.getPatientGroup()},a.changeSelectedPatientGroup=function(e){var t=Object(f.a)(a);a.setState({selectedPatientGroup:e.target.value,currentPage:null},(function(){t.getMorePatient()}))},a.addNewOptionField=function(){var e=a.props.form,t=e.getFieldValue("keys").concat(Ko++);e.setFieldsValue({keys:t})},a.removeNewOptionField=function(e){var t=a.props.form,n=t.getFieldValue("keys");1!==n.length&&t.setFieldsValue({keys:n.filter((function(t){return t!==e}))})},a.handleChangeOption=function(e,t,n){Object(f.a)(a).setState((function(t){return{selectedOption:zo({},t.selectedOption,Object(u.a)({},e,n)),custm_col:n?12:8}}))},a.AdvanceSearchPatient=function(e){var t=Object(f.a)(a);e.preventDefault();var n={};a.props.form.validateFields((function(e,t){e||(n=zo({},t,{dob:t.dob?Or()(t.dob).format("YYYY-MM-DD"):null,dob_gte:t.dob_gte?Or()(t.dob_gte).format("YYYY-MM-DD"):null,dob_lte:t.dob_lte?Or()(t.dob_lte).format("YYYY-MM-DD"):null,dob_month:t.dob_month?Or()(t.dob_month).format("MM"):null}))})),delete n.keys,t.setState({patientData:n},(function(){t.loadAdvanceSearchPatient()}))},a.loadAdvanceSearchPatient=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=Object(f.a)(a),n=t.state.patientData;t.setState({advancedSearch:!0,advanceLoading:!0});var r=function(e){t.setState((function(t){return e.current>1?{patientListData:[].concat(Object(Oa.a)(t.patientListData),Object(Oa.a)(e.results)),morePatientList:e.next,currentPage:e.current,advanceLoading:!1}:{patientListData:Object(Oa.a)(e.results),morePatientList:e.next,currentPage:e.current,advanceLoading:!1}}))},i=function(){t.setState({advanceLoading:!1})};n.page=e,Ut(Ue,r,i,n)},a.state={patientListData:[],patientGroup:[],morePatients:null,loading:!0,selectedPatientGroup:"all",advanced_option:Cn,selectedOption:{},sourceList:[],custm_col:8,advanceLoading:!1},a.getPatientListData=a.getPatientListData.bind(Object(f.a)(a)),a.searchPatient=a.searchPatient.bind(Object(f.a)(a)),a.getMorePatient=a.getMorePatient.bind(Object(f.a)(a)),a.getSources=a.getSources.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.getPatientListData(),this.getPatientGroup(),this.getSources()}},{key:"getSources",value:function(){var e=this;Ut("patients/source/",(function(t){e.setState({sourceList:t})}),(function(){}))}},{key:"getPatientGroup",value:function(){var e=this;Ut(Kt(ve,[this.props.active_practiceId]),(function(t){var a=t.sort((function(e,t){return t.patient_count-e.patient_count}));e.setState({patientGroup:a})}),(function(){e.setState({})}))}},{key:"getPatientListData",value:function(){var e=this;Ut(se,(function(t){e.setState({patientListData:t.results,morePatients:t.next,currentPage:t.current,totalPatients:t.count,loading:!1})}),(function(){e.setState({loading:!1})}))}},{key:"searchPatient",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=this;a.setState({searchvalue:!0,searchString:e});var n=function(t){a.setState((function(a){if(a.searchString==e)return t.current>1?{patientListData:[].concat(Object(Oa.a)(a.patientListData),Object(Oa.a)(t.results)),morePatients:t.next,currentPage:t.current}:{patientListData:Object(Oa.a)(t.results),morePatients:t.next,currentPage:t.current,loading:!1}}))},r=function(){},i={page:t,page_size:20};e?Ut(Kt(We,[e]),n,r,i):this.getPatientListData()}},{key:"getMorePatient",value:function(){var e=this,t=this.state.currentPage,a={};t?a.page=parseInt(t)+1:this.setState({loading:!0});var n=this.state.selectedPatientGroup;if("all"!=n)if("smart_a"==n||"smart_b"==n||"smart_c"==n||"smart_d"==n||"smart_e"==n||"smart_f"==n)switch(n){case"smart_a":a.gender="male";break;case"smart_b":a.gender="female";break;case"smart_c":a.gender="female",a.age=30,a.type="gt";break;case"smart_d":a.gender="female",a.age=30,a.type="lt";break;case"smart_e":a.gender="male",a.age=30,a.type="gt";break;case"smart_f":a.gender="male",a.age=30,a.type="lt"}else a.group=this.state.selectedPatientGroup;Ut(se,(function(a){a.current==t+1&&e.setState((function(e){return a.current>1?{patientListData:[].concat(Object(Oa.a)(e.patientListData),Object(Oa.a)(a.results)),morePatients:a.next,currentPage:a.current}:{patientListData:Object(Oa.a)(a.results),morePatients:a.next,currentPage:a.current,loading:!1}}))}),(function(){}),zo({},a))}},{key:"advancedOption",value:function(e){this.getPatientListData(),this.setState({advancedOptionShow:!e,selectedOption:""}),e&&this.props.form.setFieldsValue({keys:[0]})}},{key:"render",value:function(){var e=this,t=this,a=this.props.form,n=a.getFieldDecorator,i=a.getFieldValue;n("keys",{initialValue:[0]});var l=i("keys"),o=zo({},Ho()(this.state.selectedOption,(function(e){return e}))),s=l.map((function(a,n){return r.a.createElement(rr.a,{gutter:12,key:a},r.a.createElement(ir.a,{span:10},r.a.createElement(ga.a,{style:{width:"200px"},defaultValue:"Choose",key:a,size:"small",onChange:function(t){return e.handleChangeOption(a,"type",t)}},r.a.createElement(ga.a.Option,{value:""},"Choose"),Vo()(e.state.advanced_option,(function(e){return t.state.selectedOption[a]==e.value||!o[e.value]})).map((function(e){return r.a.createElement(ga.a.Option,{value:e.value,key:a},e.label)})))),e.state.selectedOption?r.a.createElement(r.a.Fragment,null,r.a.createElement(ir.a,{span:8},r.a.createElement(Jo,{k:a,selectedOption:e.state.selectedOption,form:e.props.form,sourceList:e.state.sourceList})),r.a.createElement(ir.a,{span:4},n?r.a.createElement(da.a,{onClick:function(){return e.removeNewOptionField(a)},size:"small",style:{margin:5}},r.a.createElement(va.a,{className:"dynamic-delete-button",type:"minus-circle-o",style:{color:"red"}})):null,n==l.length-1&&t.state.selectedOption[a]?r.a.createElement(da.a,{onClick:e.addNewOptionField,size:"small",style:{margin:5}},r.a.createElement(va.a,{className:"dynamic-delete-button",type:"plus-circle-o"})):null)):null)}));return t.props.activePracticePermissions.ViewPatient?r.a.createElement("div",null,r.a.createElement(rr.a,{gutter:16},this.state.advancedOptionShow?r.a.createElement(vr.a,{onSubmit:this.AdvanceSearchPatient,layout:"inline"},r.a.createElement(rr.a,{gutter:16},r.a.createElement(ir.a,{span:16},s),r.a.createElement(ir.a,{span:4,style:{display:"flex"}},r.a.createElement(vr.a.Item,null,r.a.createElement(da.a,{icon:"search",htmlType:"submit",onSubmit:this.AdvanceSearchPatient,type:"primary",style:{margin:5}},"Search")),r.a.createElement(vr.a.Item,null,r.a.createElement(da.a,{style:{margin:5},onClick:function(t){return e.advancedOption(!0)},size:"small"},"Basic Search"))))):r.a.createElement(r.a.Fragment,null,r.a.createElement(ir.a,{span:12},r.a.createElement(Uo,{style:{margin:5},placeholder:"Search Patient By Name / ID / Mobile No / Aadhar No",size:"small",onChange:function(t){return e.searchPatient(t.target.value)},enterButton:!0})),r.a.createElement(ir.a,{span:12,style:{textAlign:"center"}},r.a.createElement(da.a,{style:{margin:5},onClick:function(t){return e.advancedOption(!1)},size:"small"},"Advance Search"))),r.a.createElement(sr.a,{style:{margin:0}})),r.a.createElement(rr.a,{gutter:16},r.a.createElement(ir.a,{span:5,style:{height:"calc(100% - 55px)",overflow:"auto",padding:"10px"}},r.a.createElement(br.a.Group,{buttonStyle:"solid",defaultValue:this.state.selectedPatientGroup,onChange:this.changeSelectedPatientGroup},r.a.createElement("h2",null,"Patients"),r.a.createElement(br.a.Button,{key:"all",style:{width:"100%",backgroundColor:"transparent",border:"0px"},value:"all"},"All Patients",r.a.createElement(fa.a,{color:"#87d068",style:{float:"right",margin:4}},this.state.totalPatients?this.state.totalPatients:0)),r.a.createElement("p",null,r.a.createElement("br",null)),r.a.createElement("h2",null,"Groups"),r.a.createElement("p",null,r.a.createElement("b",null,"My Groups"),r.a.createElement("a",{style:{float:"right"},onClick:function(){return e.togglePatientGroupEditing(!0)}},"Manage")),this.state.patientGroup.map((function(e){return r.a.createElement(br.a.Button,{key:e.id,style:{width:"100%",backgroundColor:"transparent",border:"0px"},value:e.id},e.name,r.a.createElement(fa.a,{color:"#87d068",style:{float:"right",margin:4}},e.patient_count))})),r.a.createElement("p",null,r.a.createElement("br",null)),r.a.createElement("p",null,r.a.createElement("b",null,"Smart Groups")),r.a.createElement(br.a.Button,{style:{width:"100%",backgroundColor:"transparent",border:"0px"},key:"smart_a",value:"smart_a"},"All Male"),r.a.createElement(br.a.Button,{style:{width:"100%",backgroundColor:"transparent",border:"0px"},key:"smart_b",value:"smart_b"},"All Female"),r.a.createElement(br.a.Button,{style:{width:"100%",backgroundColor:"transparent",border:"0px"},key:"smart_e",value:"smart_e"},"Male Over 30"),r.a.createElement(br.a.Button,{style:{width:"100%",backgroundColor:"transparent",border:"0px"},key:"smart_c",value:"smart_c"},"Female Over 30"),r.a.createElement(br.a.Button,{style:{width:"100%",backgroundColor:"transparent",border:"0px"},key:"smart_f",value:"smart_f"},"Male Under 30"),r.a.createElement(br.a.Button,{style:{width:"100%",backgroundColor:"transparent",border:"0px"},key:"smart_d",value:"smart_d"},"Female Under 30"),r.a.createElement("p",null,r.a.createElement("br",null)))),r.a.createElement(ir.a,{span:19,style:{overflow:"scroll",borderLeft:"1px solid #ccc"}},r.a.createElement(pa.a,{spinning:this.state.loading},r.a.createElement(rr.a,null,this.state.patientListData.length?this.state.patientListData.map((function(e){return r.a.createElement(Xo,Object.assign({},e,{key:e.id,showMobile:t.props.activePracticePermissions.PatientPhoneNumber,showEmail:t.props.activePracticePermissions.PatientEmailId,setCurrentPatient:t.props.setCurrentPatient}))})):r.a.createElement("p",{style:{textAlign:"center"}},"No Data Found"))),this.state.searchvalue?r.a.createElement(wi,{loaderFunction:this.searchPatient,loading:this.state.loading,hidden:!this.state.morePatients}):this.state.advancedSearch?r.a.createElement(wi,{loading:this.state.advanceLoading,loaderFunction:function(){return e.loadAdvanceSearchPatient(t.state.morePatientList)},hidden:!this.state.morePatientList}):r.a.createElement(wi,{loaderFunction:this.getMorePatient,loading:this.state.loading,hidden:!this.state.morePatients})),r.a.createElement(nr.a,{visible:this.state.showPatientGroupModal,footer:null,onCancel:function(){return e.togglePatientGroupEditing(!1)}},r.a.createElement(No,this.props)))):r.a.createElement(xi,null)}}]),t}(r.a.Component),Zo=vr.a.create()(Qo);function Xo(e){return r.a.createElement(ir.a,{xs:24,sm:24,md:12,lg:8,xl:8,xxl:6},r.a.createElement(cr.a,{onClick:function(){return e.setCurrentPatient(e)},style:{margin:"3px",paddingBottom:"8px"}},r.a.createElement(Go,{avatar:e.image?r.a.createElement(ba.a,{src:Bt(e.image),size:50}):r.a.createElement(ba.a,{style:{backgroundColor:"#87d068"},size:50},e.user.first_name?e.user.first_name.charAt(0):r.a.createElement(va.a,{type:"user"})),title:e.user.first_name,description:r.a.createElement("span",null,e.showMobile?e.user.mobile:ka(e.user.mobile),r.a.createElement("br",null),e.showEmail?e.user.email:Pa(e.user.email),r.a.createElement("br",null),r.a.createElement("span",{className:"patientIdHighlight"},"#",e.custom_id?e.custom_id:e.id,e.gender?","+e.gender.charAt(0).toUpperCase():null))})))}function Jo(e){return r.a.createElement(r.a.Fragment,null,"name"==e.selectedOption[e.k]?r.a.createElement(vr.a.Item,{key:e.key,label:"contains"},e.form.getFieldDecorator("name")(r.a.createElement(ma.a,{placeholder:"patient Name",size:"small"}))):null,"phone"==e.selectedOption[e.k]?r.a.createElement(vr.a.Item,{key:e.key,label:"contains"},e.form.getFieldDecorator("phone")(r.a.createElement(ma.a,{placeholder:"Contact Number",size:"small"}))):null,"age"==e.selectedOption[e.k]?r.a.createElement(vr.a.Item,{key:e.key},e.form.getFieldDecorator("age")(r.a.createElement(Er.a,{placeholder:"Patient Age",size:"small"}))):null,"age_gte"==e.selectedOption[e.k]?r.a.createElement(vr.a.Item,{key:e.key},e.form.getFieldDecorator("age_gte")(r.a.createElement(Er.a,{placeholder:"Age more than",size:"small"}))):null,"age_lte"==e.selectedOption[e.k]?r.a.createElement(vr.a.Item,{key:e.key},e.form.getFieldDecorator("age_lte")(r.a.createElement(Er.a,{placeholder:"Age Less than",size:"small"}))):null,"has_age"==e.selectedOption[e.k]?r.a.createElement(vr.a.Item,null,e.form.getFieldDecorator("has_age")(r.a.createElement(ga.a,{style:{width:100},size:"small"},wn.map((function(e){return r.a.createElement(ga.a.Option,{value:e.value},e.label," ")}))))):null,"dob"==e.selectedOption[e.k]?r.a.createElement(vr.a.Item,{key:e.key,label:"is"},e.form.getFieldDecorator("dob")(r.a.createElement(yr.a,{placeholder:"Date of Birth",size:"small"}))):null,"dob_gte"==e.selectedOption[e.k]?r.a.createElement(vr.a.Item,{key:e.key},e.form.getFieldDecorator("dob_gte")(r.a.createElement(yr.a,{size:"small"}))):null,"dob_lte"==e.selectedOption[e.k]?r.a.createElement(vr.a.Item,{key:e.key},e.form.getFieldDecorator("dob_lte")(r.a.createElement(yr.a,{size:"small"}))):null,"dob_month"==e.selectedOption[e.k]?r.a.createElement(vr.a.Item,{key:e.key},e.form.getFieldDecorator("dob_month")(r.a.createElement(Wo,{size:"small"}))):null,"has_dob"==e.selectedOption[e.k]?r.a.createElement(vr.a.Item,null,e.form.getFieldDecorator("has_dob")(r.a.createElement(ga.a,{style:{width:100},size:"small"},Mn.map((function(e){return r.a.createElement(ga.a.Option,{value:e.value},e.label," ")}))))):null,"patient_id"==e.selectedOption[e.k]?r.a.createElement(vr.a.Item,{key:e.key,label:"contains"},e.form.getFieldDecorator("patient_id")(r.a.createElement(ma.a,{placeholder:"Patient Id",size:"small"}))):null,"has_aadhar"==e.selectedOption[e.k]?r.a.createElement(vr.a.Item,null,e.form.getFieldDecorator("has_aadhar")(r.a.createElement(ga.a,{style:{width:100},size:"small"},An.map((function(e){return r.a.createElement(ga.a.Option,{value:e.value},e.label," ")}))))):null,"aadhar"==e.selectedOption[e.k]?r.a.createElement(vr.a.Item,{key:e.key,label:"contains"},e.form.getFieldDecorator("aadhar")(r.a.createElement(ma.a,{placeholder:"Aadhar Id",size:"small"}))):null,"email"==e.selectedOption[e.k]?r.a.createElement(vr.a.Item,{key:e.key,label:"contains"},e.form.getFieldDecorator("email")(r.a.createElement(ma.a,{placeholder:"Email Id",size:"small"}))):null,"has_email"==e.selectedOption[e.k]?r.a.createElement(vr.a.Item,null,e.form.getFieldDecorator("has_email")(r.a.createElement(ga.a,{style:{width:100},size:"small"},Tn.map((function(e){return r.a.createElement(ga.a.Option,{value:e.value},e.label," ")}))))):null,"gender"==e.selectedOption[e.k]?r.a.createElement(vr.a.Item,{key:e.key,label:"is"},e.form.getFieldDecorator("gender")(r.a.createElement(ga.a,{style:{width:100},size:"small"},Yn.map((function(e){return r.a.createElement(ga.a.Option,{value:e.value},e.label," ")}))))):null,"has_gender"==e.selectedOption[e.k]?r.a.createElement(vr.a.Item,null,e.form.getFieldDecorator("has_gender")(r.a.createElement(ga.a,{style:{width:100},size:"small"},Rn.map((function(e){return r.a.createElement(ga.a.Option,{value:e.value},e.label," ")}))))):null,"pincode"==e.selectedOption[e.k]?r.a.createElement(vr.a.Item,{key:e.key,label:"contains"},e.form.getFieldDecorator("pincode")(r.a.createElement(ma.a,{placeholder:"PINCODE",size:"small"}))):null,"has_pincode"==e.selectedOption[e.k]?r.a.createElement(vr.a.Item,null,e.form.getFieldDecorator("has_pincode")(r.a.createElement(ga.a,{style:{width:100},size:"small"},Ln.map((function(e){return r.a.createElement(ga.a.Option,{value:e.value},e.label," ")}))))):null,"has_street"==e.selectedOption[e.k]?r.a.createElement(vr.a.Item,null,e.form.getFieldDecorator("has_street")(r.a.createElement(ga.a,{style:{width:100},size:"small"},Fn.map((function(e){return r.a.createElement(ga.a.Option,{value:e.value},e.label," ")}))))):null,"street"==e.selectedOption[e.k]?r.a.createElement(vr.a.Item,{key:e.key,label:"contains"},e.form.getFieldDecorator("street")(r.a.createElement(ma.a,{placeholder:"Street Address",size:"small"}))):null,"blood_group"==e.selectedOption[e.k]?r.a.createElement(vr.a.Item,{key:e.key,label:"is"},e.form.getFieldDecorator("blood_group")(r.a.createElement(ga.a,{style:{width:100},size:"small"},En.map((function(e){return r.a.createElement(ga.a.Option,{value:e.value},e.name," ")}))))):null,"source"==e.selectedOption[e.k]?r.a.createElement(vr.a.Item,null,e.form.getFieldDecorator("source")(r.a.createElement(ga.a,{style:{width:100},size:"small"},e.sourceList.map((function(e){return r.a.createElement(ga.a.Option,{value:e.id},e.name," ")}))))):null,"agent_referal"==e.selectedOption[e.k]?r.a.createElement(vr.a.Item,null,e.form.getFieldDecorator("agent_referal")(r.a.createElement(ga.a,{style:{width:100},size:"small"},Nn.map((function(e){return r.a.createElement(ga.a.Option,{value:e.value},e.label," ")}))))):null)}var $o=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={notes:[]},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadPatientNotes()}},{key:"loadPatientNotes",value:function(){var e=this;Ut(Kt(ke,[this.props.patientId,this.props.active_practiceId]),(function(t){e.setState({notes:t,loading:!1})}),(function(){e.setState({loading:!1})}))}},{key:"render",value:function(){var e=this,t=[{key:"name",required:!0,type:S}],a={successFn:function(t){Qt(O,"Patient Note Added"),e.loadPatientNotes()},errorFn:function(){},action:Kt(ke,[this.props.patientId,this.props.active_practiceId]),method:"post",beforeSubmit:function(e){}},n=[{key:"patient",value:this.props.patientId},{key:"practice",value:this.props.active_practiceId}],i=hl.Form.create()(Vr);return r.a.createElement("div",null,r.a.createElement(sr.a,null,"Patient Notes"),r.a.createElement(i,{formProp:a,defaultValues:n,fields:t}),r.a.createElement(hl.List,{size:"small",dataSource:this.state.notes,renderItem:function(e){return r.a.createElement(hl.List.Item,null,r.a.createElement(hl.List.Item.Meta,{title:e.name,description:"by "+(e.staff?e.staff.user.first_name:"--")+" on "+Or()(e.created_at).format("lll")}))}}))}}]),t}(r.a.Component),es=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={redirect:!1,currentPatient:a.props.currentPatient,Membership:[]},a.loadMembership=a.loadMembership.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadMembership()}},{key:"loadMembership",value:function(){var e=this;e.state.currentPatient&&Ut(Kt(ut,[e.props.active_practiceId]),(function(t){e.setState({Membership:t,loading:!1})}),(function(){e.setState({loading:!1})}))}},{key:"render",value:function(){var e=this;console.log("form state",this.state);var t=[{label:"Type",key:"medical_membership",type:x,options:this.state.Membership.map((function(e){return{label:e.name,value:e.id}}))},{label:"Start Date",key:"medical_from",initilValue:Or()(),type:C,format:"YYYY-MM-DD"}],a={successFn:function(t){Qt(O,"Medical Membership added"),e.props.loadProfile(),e.props.loadMedicalMembership(),e.props.formChange()},errorFn:function(){},action:Kt("patients/membership/?patient=%s",[this.props.patientId]),method:"post"},n=vr.a.create()(Vr),i=[{key:"patient",value:this.props.patientId},{key:"practice",value:this.props.active_practiceId}];return r.a.createElement(n,{formProp:a,defaultValues:i,fields:t})}}]),t}(r.a.Component),ts=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={redirect:!1,currentPatient:a.props.currentPatient,agentRoles:[]},a.loadAgentRoles=a.loadAgentRoles.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadAgentRoles()}},{key:"loadAgentRoles",value:function(){var e=this;Ut(vt,(function(t){e.setState({agentRoles:t,loading:!1})}),(function(){e.setState({loading:!1})}))}},{key:"render",value:function(){var e=this,t=[{label:"Role Type",key:"role",type:x,options:this.state.agentRoles.map((function(e){return{label:e.name,value:e.id}}))},{label:"Document Upload",key:"aadhar_upload",type:T,required:!0}],a={successFn:function(t){Qt(O,"Agent Role added"),e.props.loadProfile()},errorFn:function(){},action:Kt(ce,[this.props.patientId]),method:"put"},n=vr.a.create()(Vr);return r.a.createElement(n,{formProp:a,defaultValues:[{key:"is_agent",value:!0}],fields:t})}}]),t}(r.a.Component),as=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).formChange=function(e){a.setState({add:e})},a.addAgent=function(){Object(f.a)(a).setState({agentModalVisible:!0})},a.addAgentModalClosed=function(){a.setState({agentModalVisible:!1})},a.state={patientProfile:null,currentPatient:a.props.currentPatient,medicalHistory:{},loading:!0,add:"",MedicalMembership:null,hide:!1,agentModalVisible:!1},a.loadProfile=a.loadProfile.bind(Object(f.a)(a)),a.loadMedicalMembership=a.loadMedicalMembership.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.state.currentPatient&&(this.loadProfile(),this.loadMedicalMembership())}},{key:"componentWillReceiveProps",value:function(e){var t=this;e.currentPatient&&e.currentPatient!=this.state.currentPatient&&this.setState({currentPatient:e.currentPatient},(function(){t.loadProfile()}))}},{key:"loadProfile",value:function(){var e=this;e.state.currentPatient&&Ut(Kt(ce,[e.state.currentPatient.id]),(function(t){e.setState({patientProfile:t,loading:!1})}),(function(){e.setState({loading:!1})}))}},{key:"loadMedicalMembership",value:function(){var e=this;Ut(Kt("patients/membership/?patient=%s",[e.props.currentPatient.id]),(function(t){e.setState({MedicalMembership:t[t.length-1],loading:!1})}),(function(){e.setState({loading:!1})}))}},{key:"onClickHandler",value:function(e){this.state.MedicalMembership?(Qt(k,"Membership !!"),this.setState({add:!1})):this.setState({add:e})}},{key:"deleteMembership",value:function(e){var t=this,a={id:e,is_active:!1};qt(Kt("patients/cancel_membership/",[t.props.currentPatient.id]),a,(function(e){t.loadProfile(),t.loadMedicalMembership()}),(function(){}))}},{key:"render",value:function(){var e=this,t=this;if(this.props.currentPatient){var a=this.state.patientProfile;return a?r.a.createElement(cr.a,{loading:this.state.loading,title:"Patient Profile",extra:r.a.createElement(r.a.Fragment,null,t.props.activePracticePermissions.EditPatient?r.a.createElement(Da.b,{to:"/patient/"+this.state.currentPatient.id+"/profile/edit"},r.a.createElement(da.a,{type:"primary"},r.a.createElement(va.a,{type:"edit"}),"\xa0Edit Patient Profile")):null)},r.a.createElement(rr.a,{gutter:16},r.a.createElement(ir.a,{span:6,style:{textAlign:"center"}},a.image?r.a.createElement("img",{src:Bt(a.image),style:{width:"100%"}}):r.a.createElement(ba.a,{size:200,shape:"square",style:{backgroundColor:"#87d068"}},a.user.first_name?a.user.first_name:r.a.createElement(va.a,{type:"user"})),a.is_agent&&a.is_approved?r.a.createElement(ao.a,{title:"Referral Code",value:a.user.referer_code}):null,r.a.createElement(ir.a,null,r.a.createElement(sr.a,null),this.state.add?r.a.createElement("div",null,r.a.createElement("h1",{style:{fontSize:"18px"}},"Medical Membership ",r.a.createElement("a",{href:"#",onClick:function(){return e.onClickHandler(!1)}},"Cancel")),r.a.createElement(es,Object.assign({},this.props,this.state,{patientId:a.id,loadMedicalMembership:t.loadMedicalMembership,formChange:t.formChange,loadProfile:t.loadProfile}))):r.a.createElement("div",{style:{padding:"0px"}},r.a.createElement("h1",{style:{fontSize:"18px",textAlign:"center"}},"Medical Membership ",r.a.createElement("a",{href:"#",onClick:function(){return e.onClickHandler(!0)}},this.state.MedicalMembership?"Renew":"Add")),this.state.MedicalMembership?r.a.createElement(cr.a,{size:"small",title:"Membership",extra:r.a.createElement(or.a,{title:"Are you sure delete this Membership?",onConfirm:function(){return t.deleteMembership(e.state.MedicalMembership.id)},okText:"Yes",cancelText:"No"},r.a.createElement(da.a,{icon:"close",type:"danger",shape:"circle",size:"small"})),style:{textAlign:"center"}},r.a.createElement("div",{style:{textAlign:"left"}},r.a.createElement("p",null,r.a.createElement("strong",null,"Membership Code : "),r.a.createElement("span",null,this.state.MedicalMembership.membership_code)),r.a.createElement("p",null,r.a.createElement("strong",null,"Start Date : "),r.a.createElement("span",null,this.state.MedicalMembership.medical_from)),r.a.createElement("p",null,r.a.createElement("strong",null,"Valid Till : "),r.a.createElement("span",null,this.state.MedicalMembership.medical_to)))):null))),r.a.createElement(ir.a,{span:12},r.a.createElement(ns,{label:"Patient Name",value:a.user.first_name}),r.a.createElement(ns,{label:"Patient ID",value:a.custom_id?a.custom_id:a.id}),a&&a.role?r.a.createElement(ns,{label:"Advisor Role",value:a.role_data.name}):null,r.a.createElement(ns,{label:"Gender",value:a.gender}),a.is_age?r.a.createElement(ns,{label:"Age",value:a.dob?Or()().diff(this.props.currentPatient.dob,"years"):null}):r.a.createElement(ns,{label:"Date of Birth",value:a.dob}),r.a.createElement(ns,{label:"Referer",value:a.user.referer_data.referer?r.a.createElement(Da.b,{to:"/patient/"+a.user.referer_data.patient+"/profile"},a.user.referer_data.referer.first_name):"--"}),r.a.createElement(sr.a,null,"Contact Details"),r.a.createElement(ns,{label:"Email",value:t.props.activePracticePermissions.PatientEmailId?a.user.email:Pa(a.user.email)}),r.a.createElement(ns,{label:"Primary Mobile",value:t.props.activePracticePermissions.PatientPhoneNumber?a.user.mobile:ka(a.user.mobile)}),r.a.createElement(ns,{label:"Secondary Mobile",value:t.props.activePracticePermissions.PatientPhoneNumber?a.secondary_mobile_no:ka(a.secondary_mobile_no)}),r.a.createElement(ns,{label:"Landline No",value:a.landline_no}),r.a.createElement(ns,{label:"Address",value:a.address}),r.a.createElement(ns,{label:"Locality",value:a.locality}),r.a.createElement(ns,{label:"City",value:a.city_data?a.city_data.name:null}),r.a.createElement(ns,{label:"State",value:a.state_data?a.state_data.name:null}),r.a.createElement(ns,{label:"Country",value:a.country_data?a.country_data.name:null}),r.a.createElement(ns,{label:"Pincode",value:a.pincode})),r.a.createElement(ir.a,{span:6,style:{borderLeft:"1 px solid #ccc"}},r.a.createElement($o,Object.assign({},this.props,{patientId:a.id})),r.a.createElement(sr.a,null,"Medical History"),a.medical_history_data?a.medical_history_data.map((function(e,t){return r.a.createElement(fa.a,{color:"#"+gi(fi(e.name))},e.name)})):null,r.a.createElement(sr.a,null,"Groups"),r.a.createElement(Ea.a,{dataSource:a.patient_group_data,renderItem:function(e){return r.a.createElement(Ea.a.Item,null,e.name)}})),r.a.createElement(nr.a,{title:"Add Agent",visible:this.state.agentModalVisible,onOk:null,footer:null,onCancel:this.addAgentModalClosed},r.a.createElement(ts,Object.assign({patientId:a.id},this.state))))):r.a.createElement(cr.a,{loading:this.state.loading})}return r.a.createElement(Zo,this.props)}}]),t}(r.a.Component);function ns(e){return r.a.createElement(rr.a,{gutter:16,style:{marginBottom:"5px"}},r.a.createElement(ir.a,{span:8,style:{textAlign:"right"}},e.label,":"),r.a.createElement(ir.a,{span:16},r.a.createElement("strong",null,e.value)))}function rs(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function is(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?rs(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):rs(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ls=nr.a.confirm,os=function(e){function t(e){var a,n;return Object(d.a)(this,t),(n=Object(m.a)(this,Object(h.a)(t).call(this,e))).loadMedicalHistory=function(){var e=Object(f.a)(n);Ut(Kt(de,[n.props.active_practiceId]),(function(t){e.setState({history:t})}),(function(){}))},n.setFormParams=function(e,t){n.setState(Object(u.a)({},e,t))},n.getPatientGroup=function(){var e=Object(f.a)(n);Ut(Kt(ve,[n.props.active_practiceId]),(function(t){e.setState({patientGroup:t,loading:!1})}),(function(){e.setState({loading:!1})}))},n.handleSubmit=function(e){var t=Object(f.a)(n);e.preventDefault(),n.props.form.validateFields((function(e,a){if(!e){var r=is({},a,{file_enable:!!a.file_enable,file_count:a.file_count?a.file_count:n.state.file_count,on_dialysis:!!t.state.on_dialysis,medical_history:a.medical_history,patient_group:a.patient_group,user:{first_name:a.first_name?a.first_name:"",mobile:a.mobile,email:a.email}});a.anniversary&&(r.anniversary=Or()(a.anniversary).format("YYYY-MM-DD")),a.dob&&(r.dob=Or()(a.dob).format("YYYY-MM-DD")),a.age&&(r.is_age=!0,r.dob=Or()().subtract(a.age,"years").format("YYYY-MM-DD")),a.custom_id?r.custom_id=a.custom_id_pre+a.custom_id:r.custom_id=null;var i="image";r[i]&&r[i].file&&r[i].file.response&&(r[i]=r[i].file.response.image_path),delete r.first_name,delete r.email,delete r.referer_code,delete r.mobile,delete r.age,delete r.custom_id_pre,t.setState({loading:!0});var l=function(e){Qt("Patient Saved Successfully!!"),t.setState({loading:!1}),t.props.history.push("/patient/"+e.id+"/profile")},o=function(){t.setState({loading:!1})};r=ea(r),t.props.currentPatient?Ht(Kt(ce,[t.props.currentPatient.id]),r,l,o):qt(Kt(se,[t.props.match.params.id]),r,l,o)}}))},n.toggleWebCam=function(e,t){n.setState((function(a){return{webCamState:is({},a.webCamState,Object(u.a)({},e,t))}}))},n.getImageandUpload=function(e,t){var a=Object(f.a)(n),r=new FormData;r.append("image",t),r.append("name","file");qt(q,r,(function(t){a.props.form.setFieldsValue(Object(u.a)({},e,{file:{response:t}})),Qt(O,"Image Captured and processed."),a.setState((function(t){return{webCamState:is({},t.webCamState,Object(u.a)({},e,!1))}}))}),(function(){}),{"content-type":"multipart/form-data"})},n.onChangeValue=function(e,t){var a=Object(f.a)(n);a.setState(Object(u.a)({},e,t),(function(){"country"==e&&a.getState(),"state"==e&&a.getCity()}))},n.setFormParams=function(e,t){n.setState(Object(u.a)({},e,t))},n.onChangeCheckbox=function(e){n.setState({on_dialysis:!n.state.on_dialysis})},n.changeFormType=function(e){n.setState({selectedFormType:e.target.value})},n.handleRelation=function(e){e?n.setState({relation_text:!1}):n.setState({relation_text:!0})},n.handleNumberChange=function(e){n.setState({number:is({},cs(e),{value:e})})},n.state=(a={redirect:!1,history:[],patientGroup:[],membership:[],webCamState:{},countrylist:[],stateList:[],cityList:[],sourceList:[],country:n.props.currentPatient&&n.props.currentPatient.country_data?n.props.currentPatient.country:null,state:n.props.currentPatient&&n.props.currentPatient.state_data?n.props.currentPatient.state:null,selectedFormType:"DOB",file_count:10,file_enable:!0,relation_text:!0,loading:!1},Object(u.a)(a,qn,[]),Object(u.a)(a,zn,[]),Object(u.a)(a,Gn,[]),Object(u.a)(a,Un,[]),Object(u.a)(a,Wn,[]),Object(u.a)(a,"number",{}),a),n.changeRedirect=n.changeRedirect.bind(Object(f.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(f.a)(n)),n.getCountry=n.getCountry.bind(Object(f.a)(n)),n.getState=n.getState.bind(Object(f.a)(n)),n.getCity=n.getCity.bind(Object(f.a)(n)),n.getSources=n.getSources.bind(Object(f.a)(n)),n.loadPatientData=n.loadPatientData.bind(Object(f.a)(n)),n}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadMedicalHistory(),this.getPatientGroup(),this.getPatientMembership(),this.getSources(),this.getCountry(),this.state.country&&this.getState(),this.state.state&&this.getCity(),this.props.currentPatient&&this.loadPatientData(this.props.currentPatient.id),yi(this,[qn,zn,Gn,Un,Wn])}},{key:"getCountry",value:function(){var e=this;Ut("patients/country/",(function(t){e.setState({countrylist:t})}),(function(){}))}},{key:"getSources",value:function(){var e=this;Ut("patients/source/",(function(t){e.setState({sourceList:t})}),(function(){}))}},{key:"getState",value:function(){var e=this;Ut("patients/state/",(function(t){e.setState({stateList:t})}),(function(){}),{country:this.state.country})}},{key:"getCity",value:function(){var e=this;Ut("patients/city/",(function(t){e.setState({cityList:t})}),(function(){}),{state:this.state.state})}},{key:"getPatientMembership",value:function(){var e=this;Ut(Kt(ut,[this.props.active_practiceId]),(function(t){e.setState({membership:t})}),(function(){}))}},{key:"loadPatientData",value:function(e){var t=this;Ut(Kt(ce,[e]),(function(e){t.setState({patientDetails:e,loading:!1})}),(function(){t.setState({loading:!1})}))}},{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"onDeletePatient",value:function(){var e=this;ls({title:"Are you sure delete this patient?",okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){e.patientDelete()}})}},{key:"patientDelete",value:function(){var e=this,t=e.state.patientDetails.id,a={id:t,is_active:!1};Ht(Kt(ce,[t]),a,(function(t){e.setState({loading:!1}),Qt("Patient Deleted!!"),e.props.history.push("/patients/profile")}),(function(){}))}},{key:"render",value:function(){var e=this,t=this,a=this.props.form.getFieldDecorator,n={labelCol:{span:6},wrapperCol:{span:14}},i=[];this.state.history&&this.state.history.forEach((function(e){i.push({label:e.name,value:e.id})}));var l=[];this.state.patientGroup&&this.state.patientGroup.forEach((function(e){l.push({label:e.name,value:e.id})}));var o=[];this.state.membership&&this.state.membership.forEach((function(e){o.push({label:e.name,value:e.id})}));var s={name:"image",data:{name:"hello"},action:Vt("blogImage/"),headers:{authorization:"authorization-text"},onChange:function(e){"uploading"!==e.file.status&&console.log(e.file,e.fileList),"done"===e.file.status?N.a.success("".concat(e.file.name," file uploaded successfully")):"error"===e.file.status&&N.a.error("".concat(e.file.name," file upload failed."))}};return r.a.createElement(vr.a,{onSubmit:t.handleSubmit},r.a.createElement(cr.a,{title:r.a.createElement("span",null,t.props.currentPatient?"Edit Profile":"Add Patient","\xa0\xa0",r.a.createElement(Da.b,{to:"/patients/patientprintform"},"Print Patient Form")),extra:r.a.createElement("div",null,r.a.createElement(da.a,{style:{margin:5},type:"primary",htmlType:"submit"},"Save"),t.props.history?r.a.createElement(da.a,{style:{margin:5},onClick:function(){return t.props.history.goBack()}},"Cancel"):null,t.props.currentPatient?r.a.createElement(r.a.Fragment,null,this.state.patientDetails&&this.state.patientDetails.is_approved?r.a.createElement(bo.a,{placement:"leftBottom",trigger:"hover",content:"An Agent is associated. Patient can not be deleted."},r.a.createElement(da.a,{style:{margin:5},type:"danger",disabled:!0},"Delete")):r.a.createElement(da.a,{style:{margin:5},onClick:function(){return t.onDeletePatient()},type:"danger"},"Delete")):null)},r.a.createElement(vr.a.Item,Object.assign({key:"image"},n,{label:"Patient Image"}),a("image",{valuePropName:"image"})(r.a.createElement(fr.a,s,r.a.createElement(da.a,null,r.a.createElement(va.a,{type:"upload"})," Select File"),this.state.patientDetails&&this.state.patientDetails.image?r.a.createElement("img",{src:Bt(this.state.patientDetails?this.state.patientDetails.image:null),style:{maxWidth:"100%"}}):null)),r.a.createElement("span",{className:"ant-form-text"},r.a.createElement("a",{onClick:function(){return t.toggleWebCam("image",Math.random())}},"Open Webcam")),r.a.createElement(nr.a,{footer:null,onCancel:function(){return t.toggleWebCam("image",!1)},visible:!!t.state.webCamState.image,width:680,key:t.state.webCamState.image},r.a.createElement(xr,{getScreenShot:function(e){return t.getImageandUpload("image",e)}}))),r.a.createElement(vr.a.Item,Object.assign({label:"Patient Name"},n),a("first_name",{rules:[{required:!0,message:"Input Patient Name!"}],initialValue:this.state.patientDetails?this.state.patientDetails.user.first_name:""})(r.a.createElement(ma.a,{placeholder:"Patient Name"}))),r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:8},r.a.createElement(vr.a.Item,{label:"Patient Id",labelCol:{span:18},wrapperCol:{span:6}},a("custom_id_pre",{initialValue:this.state.patientDetails&&this.state.patientDetails.is_agent?"AD":"BK"})(r.a.createElement(ga.a,null,r.a.createElement(ga.a.Option,{value:"BK"},"BK"),r.a.createElement(ga.a.Option,{value:"AD"},"AD"))))),r.a.createElement(ir.a,{span:16},r.a.createElement(vr.a.Item,{labelCol:{span:0},wrapperCol:{span:18},validateStatus:this.state.number.validateStatus,help:this.state.number.errorMsg||"Only numbers are allowed."},a("custom_id",{initialValue:this.state.patientDetails?this.state.patientDetails.custom_id.replace(/\D/g,""):""})(r.a.createElement(Er.a,{style:{width:"100%"},placeholder:"Patient Id",onChange:this.handleNumberChange}))))),this.state.source&&this.state.source==S?r.a.createElement(vr.a.Item,Object.assign({key:"source_extra",label:"Source"},n),a("source_extra",{initialValue:""})(r.a.createElement(ma.a,{placeholder:"Source"})),r.a.createElement("a",{onClick:function(){return t.setFormParams("source",x)}},"Choose Source")):r.a.createElement(vr.a.Item,Object.assign({label:"Source"},n),a("source",{initialValue:this.state.patientDetails?this.state.patientDetails.source:null})(r.a.createElement(ga.a,{placeholder:"Select Source",showSearch:!0,optionFilterProp:"children"},this.state.sourceList.map((function(e){return r.a.createElement(ga.a.Option,{value:e.id},e.name)})))),r.a.createElement("a",{onClick:function(){return t.setFormParams("source",S)}},"Enter New Source")),this.state.patientDetails?null:r.a.createElement(vr.a.Item,Object.assign({label:"Referral Code"},n),a("referal",{initialValue:this.state.patientDetails?this.state.patientDetails.user.referer_code:""})(r.a.createElement(ma.a,{placeholder:"Referral Code"}))),r.a.createElement(vr.a.Item,Object.assign({label:"SMS Language"},n),a("language",{initialValue:this.state.patientDetails&&this.state.patientDetails.language?this.state.patientDetails.language:this.props.activePracticeData.language})(r.a.createElement(ga.a,null,this.state[Gn].map((function(e){return r.a.createElement(ga.a.Option,{value:e},e)}))))),r.a.createElement(vr.a.Item,Object.assign({label:"Aadhar ID"},n),a("aadhar_id",{initialValue:this.state.patientDetails?this.state.patientDetails.aadhar_id:""})(r.a.createElement(ma.a,{placeholder:"Patient Aadhar Number"}))),r.a.createElement(vr.a.Item,Object.assign({label:"Gender"},n),a("gender",{initialValue:this.state.patientDetails?this.state.patientDetails.gender:null})(r.a.createElement(ga.a,{placeholder:"Select Gender"},this.state[Wn].map((function(e){return r.a.createElement(ga.a.Option,{value:e.value},e.label)}))))),r.a.createElement(vr.a.Item,Object.assign({label:" "},n,{colon:!1}),r.a.createElement(br.a.Group,{buttonStyle:"solid",size:"small",onChange:this.changeFormType,defaultValue:this.state.selectedFormType},In.map((function(e){return r.a.createElement(br.a,{value:e.value},e.label)})))),"DOB"==this.state.selectedFormType?r.a.createElement(vr.a.Item,Object.assign({label:"DOB"},n),a("dob",{initialValue:this.state.patientDetails&&this.state.patientDetails.dob?Or()(this.state.patientDetails.dob):""})(r.a.createElement(yr.a,null))):r.a.createElement(vr.a.Item,Object.assign({label:"Age"},n),a("age",{initialValue:this.state.patientDetails&&this.state.patientDetails.dob?Or()().diff(this.state.patientDetails.dob,"years"):null})(r.a.createElement(Er.a,{min:0,max:120,placeholder:"Patient Age"}))),r.a.createElement(vr.a.Item,Object.assign({label:"Anniversary"},n),a("anniversary",{initialValue:this.state.patientDetails&&this.state.patientDetails.anniversary?Or()(this.state.patientDetails.anniversary):null})(r.a.createElement(yr.a,null))),r.a.createElement(vr.a.Item,Object.assign({label:"Blood Group"},n),a("blood_group",{initialValue:this.state.patientDetails?this.state.patientDetails.blood_group:""})(r.a.createElement(ga.a,{placeholder:"Blood Group"},this.state[qn].map((function(e){return r.a.createElement(ga.a.Option,{value:e},e)}))))),r.a.createElement(vr.a.Item,Object.assign({label:"Family"},n),r.a.createElement(vr.a.Item,{style:{display:"inline-block",width:"calc(30% - 12px)"}},a("family_relation",{initialValue:this.state.patientDetails&&null!=this.state.patientDetails.family_relation?this.state.patientDetails.family_relation:"Relation"})(r.a.createElement(ga.a,{onChange:function(t){return e.handleRelation(t)}},r.a.createElement(ga.a.Option,{value:""},"Relation"),this.state[Un].map((function(e){return r.a.createElement(ga.a.Option,{value:e.value},e.name)}))))),r.a.createElement("span",{style:{display:"inline-block",width:"14px",textAlign:"center"}}),r.a.createElement(vr.a.Item,{style:{display:"inline-block",width:"calc(50% - 12px)"}},a("attendee",{initialValue:this.state.patientDetails?this.state.patientDetails.attendee:""})(r.a.createElement(ma.a,{disabled:(!this.state.patientDetails||!this.state.patientDetails.attendee)&&this.state.relation_text})))),r.a.createElement(vr.a.Item,Object.assign({label:"Mobile (Primary)"},n),a("mobile",{initialValue:this.state.patientDetails?this.state.patientDetails.user.mobile:null,rules:[{required:!0,message:"Input Mobile Number"}]})(r.a.createElement(ma.a,{placeholder:"Patient Mobile Number (Primary)"}))),r.a.createElement(vr.a.Item,Object.assign({label:"Mobile (Secondary)"},n),a("secondary_mobile_no",{initialValue:this.state.patientDetails?this.state.patientDetails.secondary_mobile_no:""})(r.a.createElement(ma.a,{placeholder:"Patient Mobile Number (Secondary)"}))),r.a.createElement(vr.a.Item,Object.assign({label:"Landline"},n),a("landline_no",{initialValue:this.state.patientDetails?this.state.patientDetails.landline_no:""})(r.a.createElement(ma.a,{placeholder:"Patient Landline Number"}))),r.a.createElement(vr.a.Item,Object.assign({label:"Address"},n),a("address",{initialValue:this.state.patientDetails?this.state.patientDetails.address:""})(r.a.createElement(ma.a,{placeholder:"Patient Address"}))),r.a.createElement(vr.a.Item,Object.assign({label:"Locality"},n),a("locality",{initialValue:this.state.patientDetails?this.state.patientDetails.locality:""})(r.a.createElement(ma.a,{placeholder:"Patient Locality"}))),this.state.country&&this.state.country==S?r.a.createElement(vr.a.Item,Object.assign({key:"country_extra",label:"Country"},n),a("country_extra",{initialValue:""})(r.a.createElement(ma.a,{placeholder:"Country"})),r.a.createElement("a",{onClick:function(){return t.setFormParams("country",x)}},"Choose Country")):r.a.createElement(vr.a.Item,Object.assign({key:"country"},n,{label:"Country"}),a("country",{initialValue:this.state.patientDetails&&this.state.patientDetails.country_data?this.state.patientDetails.country_data.id:""})(r.a.createElement(ga.a,{placeholder:"Select Country",onChange:function(t){return e.onChangeValue("country",t)},showSearch:!0,optionFilterProp:"children"},this.state.countrylist.map((function(e){return r.a.createElement(ga.a.Option,{value:e.id},e.name)})))),r.a.createElement("a",{onClick:function(){return t.setFormParams("country",S)}},"Add New Country")),this.state.country==S||this.state.state&&this.state.state==S?r.a.createElement(vr.a.Item,Object.assign({key:"state_extra",label:"State"},n),a("state_extra",{initialValue:""})(r.a.createElement(ma.a,{placeholder:"State"})),r.a.createElement("a",{onClick:function(){return t.setFormParams("state",x)}},"Choose State")):r.a.createElement(vr.a.Item,Object.assign({key:"state"},n,{label:"State"}),a("state",{initialValue:this.state.patientDetails&&this.state.patientDetails.state_data?this.state.patientDetails.state_data.id:""})(r.a.createElement(ga.a,{placeholder:"Select State",onChange:function(t){return e.onChangeValue("state",t)},showSearch:!0,optionFilterProp:"children"},this.state.stateList.map((function(e){return r.a.createElement(ga.a.Option,{value:e.id},e.name)})))),r.a.createElement("a",{onClick:function(){return t.setFormParams("state",S)}},"Add New state")),this.state.country==S||this.state.state==S||this.state.city&&this.state.city==S?r.a.createElement(vr.a.Item,Object.assign({key:"city_extra",label:"City"},n),a("city_extra",{initialValue:""})(r.a.createElement(ma.a,{placeholder:"City"})),r.a.createElement("a",{onClick:function(){return t.setFormParams("city",x)}},"Choose City")):r.a.createElement(vr.a.Item,Object.assign({key:"City"},n,{label:"City"}),a("city",{initialValue:this.state.patientDetails&&this.state.patientDetails.city_data?this.state.patientDetails.city_data.id:""})(r.a.createElement(ga.a,{showSearch:!0,optionFilterProp:"children",placeholder:"Select City"},this.state.cityList.map((function(e){return r.a.createElement(ga.a.Option,{value:e.id},e.name)})))),r.a.createElement("a",{onClick:function(){return t.setFormParams("city",S)}},"Add New City")),r.a.createElement(vr.a.Item,Object.assign({label:"Pincode"},n),a("pincode",{initialValue:this.state.patientDetails?this.state.patientDetails.pincode:""})(r.a.createElement(ma.a,{placeholder:"Patient PINCODE"}))),r.a.createElement(vr.a.Item,Object.assign({label:"Email"},n),a("email",{initialValue:this.state.patientDetails?this.state.patientDetails.user.email:null})(r.a.createElement(ma.a,{placeholder:"Patient Email"}))),r.a.createElement(vr.a.Item,Object.assign({label:"Medical History"},n),a("medical_history",{initialValue:this.state.patientDetails?this.state.patientDetails.medical_history:[]})(r.a.createElement(ga.a,{placeholder:"Medical History",mode:"multiple"},i.map((function(e){return r.a.createElement(ga.a.Option,{value:e.value},e.label)}))))),r.a.createElement(vr.a.Item,Object.assign({label:"Patient Group"},n),a("patient_group",{initialValue:this.state.patientDetails?this.state.patientDetails.patient_group:[]})(r.a.createElement(ga.a,{placeholder:"Patient Group",mode:"multiple"},l.map((function(e){return r.a.createElement(ga.a.Option,{value:e.value},e.label)}))))),r.a.createElement(vr.a.Item,Object.assign({label:"On Dialysis"},n),a("on_dialysis",{initialValue:!!this.state.patientDetails&&this.state.patientDetails.on_dialysis})(r.a.createElement(pr.a,{onChange:function(t){return e.onChangeCheckbox(t)},style:{paddingTop:"4px"}}))),r.a.createElement(vr.a.Item,Object.assign({label:"Allow File Upload"},n),a("file_enable",{initialValue:!this.state.patientDetails||this.state.patientDetails.file_enable})(r.a.createElement(pr.a,{style:{paddingTop:"4px"},defaultChecked:!0}))),r.a.createElement(vr.a.Item,Object.assign({label:"Max Uploads Allowed"},n),a("file_count",{initialValue:this.state.patientDetails?this.state.patientDetails.file_count:10})(r.a.createElement(Er.a,{min:0}))),r.a.createElement(vr.a.Item,null,t.props.history?r.a.createElement(da.a,{style:{margin:5},onClick:function(){return t.props.history.goBack()}},"Cancel"):null,r.a.createElement(da.a,{style:{margin:5},type:"primary",htmlType:"submit",loading:this.state.loading},"Save"))))}}]),t}(r.a.Component),ss=vr.a.create()(os);function cs(e){return isNaN(e)?{validateStatus:"error",errorMsg:"Patient ID can only be numerical value."}:{validateStatus:"success",errorMsg:null}}var us=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={redirect:!1,appointments:null,practice_doctors:[],procedure_category:null,treatmentNotes:null,practice_staff:[],loading:!1},a.changeRedirect=a.changeRedirect.bind(Object(f.a)(a)),a.editAppointment=a.editAppointment.bind(Object(f.a)(a)),a.deleteAppointment=a.deleteAppointment.bind(Object(f.a)(a)),a.loadProcedureCategory=a.loadProcedureCategory.bind(Object(f.a)(a)),a.loadDoctors=a.loadDoctors.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadDoctors(),this.loadTreatmentNotes(),this.props.match.params.appointmentid?this.loadAppointment(this.props.match.params.appointmentid):this.loadAllAppointments()}},{key:"loadAppointment",value:function(e){var t=this;this.setState({loading:!0});Ut(Kt(Ee,[e]),(function(e){t.setState({appointments:[e],loading:!1})}),(function(){t.setState({loading:!1})}))}},{key:"loadAllAppointments",value:function(){var e=this;this.setState({loading:!0});Ut(Kt(ye,[this.props.active_practiceId]),(function(t){e.setState({appointments:t,loading:!1})}),(function(){e.setState({loading:!1})}),this.props.match.params.id?{patient:this.props.match.params.id,practice:this.props.active_practiceId}:{practice:this.props.active_practiceId})}},{key:"loadProcedureCategory",value:function(){var e=this;Ut(Kt(ae,[this.props.active_practiceId]),(function(t){e.setState({procedure_category:t})}),(function(){}))}},{key:"loadDoctors",value:function(){var e=this;Ut(Kt(K,[this.props.active_practiceId]),(function(t){t.staff.forEach((function(t){if("3"==t.role){var a=e.state.practice_doctors;a.push(t),e.setState({practice_doctors:a})}else{var n=e.state.practice_staff;n.push(t),e.setState({practice_staff:n})}}))}),(function(){}))}},{key:"loadTreatmentNotes",value:function(){var e=this;Ut(Kt(le,[this.props.active_practiceId]),(function(t){e.setState({treatmentNotes:t,loading:!1})}),(function(){e.setState({loading:!1})}))}},{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"editAppointment",value:function(e){var t=e.id;this.props.history.push("/calendar/"+t+"/edit-appointment")}},{key:"deleteAppointment",value:function(e){var t=this;t.setState({loading:!0});Ht(Kt(Ee,[e.id]),{is_active:!1,status:"Cancelled"},(function(e){t.loadAllAppointments(),t.setState({loading:!1})}),(function(){t.setState({loading:!1})}))}},{key:"render",value:function(){var e=this,t=this,a=[];this.state.practice_doctors.length&&this.state.practice_doctors.forEach((function(e){a[e.id]=e.user.first_name}));var n=[];this.state.treatmentNotes&&this.state.treatmentNotes.forEach((function(e){n[e.id]=e.name}));var i=[{title:"Schedule Time",key:"name",render:function(e,t){return r.a.createElement("span",null,Or()(t.schedule_at).format("LLL"),",",t.slot,"mins")}},{title:"Patient ID",key:"id",render:function(e,t){return r.a.createElement("span",null,t.patient.custom_id?t.patient.custom_id:t.patient.id)},exports:function(e,t){return t.patient.custom_id?t.patient.custom_id:t.patient.id}},{title:"Patient Name",dataIndex:"patient.user.first_name",key:"patient_name"},{title:"Patient Mobile",dataIndex:"patient.user.mobile",key:"patient_mobile",render:function(e){return t.props.activePracticePermissions.PatientPhoneNumber?e:ka(e)}},{title:"Email",dataIndex:"patient.user.email",key:"email",render:function(e){return t.props.activePracticePermissions.PatientEmailId?e:Pa(e)}},{title:"Doctor",key:"doctor",render:function(e,t){return r.a.createElement("span",null," ",a[t.doctor])}},{title:"Procedure",key:"procedure"},{title:"Treatment Notes",key:"notes",render:function(e,t){return r.a.createElement("span",null," ",n[t.notes])}},{title:"Category",key:"category",render:function(e,t){return r.a.createElement("span",null," ",t.category?t.category_data.name:"--")}},{title:"NotifyByEmail",key:"notify_via_email",render:function(e,t){return r.a.createElement(pr.a,{disabled:!0,checked:t.notify_via_email})}},{title:"NotifyBySMS",key:"notify_via_sms",render:function(e,t){return r.a.createElement(pr.a,{disabled:!0,checked:t.notify_via_sms})}},{title:"Action",key:"action",render:function(a,n){return r.a.createElement("span",null,r.a.createElement("a",{onClick:function(){return e.editAppointment(n)},disabled:!t.props.activePracticePermissions.EditAppointment},"Edit"),r.a.createElement(sr.a,{type:"vertical"}),r.a.createElement(or.a,{title:"Are you sure delete this item?",onConfirm:function(){return e.deleteAppointment(n)},okText:"Yes",cancelText:"No"},r.a.createElement("a",{disabled:!t.props.activePracticePermissions.EditAppointment},"Delete")))}}];vr.a.create()(Vr);return this.props.match.params.id?r.a.createElement(cr.a,{extra:t.props.activePracticePermissions.AddAppointment||t.props.allowAllPermissions?r.a.createElement(Da.b,{to:"/calendar/create-appointment?patient="+this.props.match.params.id},r.a.createElement(da.a,{type:"primary"},r.a.createElement(va.a,{type:"plus"}),"\xa0Add Appointment")):null},r.a.createElement(lr.a,{loading:this.state.loading,columns:i,scroll:{x:1300},pagination:!1,dataSource:this.state.appointments})):r.a.createElement(cr.a,{extra:t.props.activePracticePermissions.AddAppointment||t.props.allowAllPermissions?r.a.createElement(Da.b,{to:"/calendar/create-appointment"},r.a.createElement(da.a,{type:"primary"},r.a.createElement(va.a,{type:"plus"}),"\xa0Add Appointment")):null},r.a.createElement(lr.a,{loading:this.state.loading,columns:i,scroll:{x:1300},pagination:!1,dataSource:this.state.appointments}))}}]),t}(r.a.Component),ds=o.a.Sider,ps=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={},a.onHotKeyInner=a.onHotKeyInner.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"onHotKeyInner",value:function(e){switch(e){case"alt+f":return this.props.currentPatient?this.props.history.push("/patient/"+this.props.currentPatient.id+"/profile"):this.props.history.push("/patients/profile");case"alt+a":return this.props.currentPatient?this.props.history.push("/patient/"+this.props.currentPatient.id+"/appointments"):this.props.history.push("/patients/appointments");case"alt+o":return this.props.currentPatient?this.props.history.push("/patient/"+this.props.currentPatient.id+"/communications"):this.props.history.push("/patients/communications");case"alt+k":return this.props.currentPatient?this.props.history.push("/patient/"+this.props.currentPatient.id+"/booking"):this.props.history.push("/patients/profile");case"alt+m":case"alt+n":return this.props.currentPatient?this.props.history.push("/patient/"+this.props.currentPatient.id+"/emr/vitalsigns"):this.props.history.push("/patients/emr/vitalsigns");case"alt+t":return this.props.currentPatient?this.props.history.push("/patient/"+this.props.currentPatient.id+"/emr/plans"):this.props.history.push("/patients/emr/plans");case"alt+l":return this.props.currentPatient?this.props.history.push("/patient/"+this.props.currentPatient.id+"/emr/files"):this.props.history.push("/patients/emr/files");case"alt+i":return this.props.currentPatient?this.props.history.push("/patient/"+this.props.currentPatient.id+"/billing/invoices"):this.props.history.push("/patients/billing/invoices");case"alt+e":return this.props.currentPatient?this.props.history.push("/patient/"+this.props.currentPatient.id+"/billing/return/invoices"):this.props.history.push("/patients/billing/return/invoices");case"alt+y":return this.props.currentPatient?this.props.history.push("/patient/"+this.props.currentPatient.id+"/billing/payments"):this.props.history.push("/patients/billing/payments");case"alt+u":return this.props.currentPatient?this.props.history.push("/patient/"+this.props.currentPatient.id+"/emr/workdone"):this.props.history.push("/patients/emr/workdone");case"alt+s":return this.props.currentPatient?this.props.history.push("/patient/"+this.props.currentPatient.id+"/emr/prescriptions"):this.props.history.push("/patients/emr/prescriptions");case"alt+g":return this.props.currentPatient?this.props.history.push("/patient/"+this.props.currentPatient.id+"/billing/ledger"):this.props.history.push("/patients/profile");case"alt+w":return this.props.currentPatient?this.props.history.push("/patient/"+this.props.currentPatient.id+"/emr/timeline"):this.props.history.push("/patients/profile")}}},{key:"render",value:function(){var e=this;return r.a.createElement($n.a,{keyName:"alt+f ,alt+a, alt+o, alt+m, alt+l ,alt+i,alt+e ,alt+n ,alt+y ,alt+t,alt+s ,alt+k, alt+g,alt+u,alt+w",onKeyDown:function(t){return e.onHotKeyInner(t)}},r.a.createElement(ds,{trigger:null,collapsible:!0,collapsed:this.props.hideSidePanel,style:{overflow:"auto",minHeight:"calc(100vh - 64px)",background:"#fff"}},r.a.createElement(_a.a,{mode:"inline"},r.a.createElement(_a.a.ItemGroup,{key:"g1",title:r.a.createElement(sr.a,{style:{margin:"0px"}},"Patient")},r.a.createElement(_a.a.Item,{key:"17"},r.a.createElement(Da.b,{to:this.props.currentPatient?"/patient/"+this.props.currentPatient.id+"/profile":"/patients/profile"},r.a.createElement(va.a,{type:"user"}),r.a.createElement("span",{className:"nav-text"},"Pro",r.a.createElement("span",{className:"shortcutLetterHighlight"},"f"),"ile"))),this.props.activePracticePermissions.PatientAppointments||this.props.allowAllPermissions?r.a.createElement(_a.a.Item,{key:"18"},r.a.createElement(Da.b,{to:this.props.currentPatient?"/patient/"+this.props.currentPatient.id+"/appointments":"/patients/appointments"},r.a.createElement(va.a,{type:"calendar"}),r.a.createElement("span",{className:"nav-text"},r.a.createElement("span",{className:"shortcutLetterHighlight"},"A"),"ppointments"))):null,this.props.activePracticePermissions.PatientCommunications||this.props.allowAllPermissions?r.a.createElement(_a.a.Item,{key:"19"},r.a.createElement(Da.b,{to:this.props.currentPatient?"/patient/"+this.props.currentPatient.id+"/communications":"/patients/communications"},r.a.createElement(va.a,{type:"message"}),r.a.createElement("span",{className:"nav-text"},"C",r.a.createElement("span",{className:"shortcutLetterHighlight"},"o"),"mmunications"))):null,this.props.activePracticePermissions.PatientBookings||this.props.allowAllPermissions?r.a.createElement(_a.a.Item,{key:"booking",disabled:!this.props.currentPatient},r.a.createElement(Da.b,{to:this.props.currentPatient?"/patient/"+this.props.currentPatient.id+"/booking":"/patients/communications"},r.a.createElement(va.a,{type:"book"}),r.a.createElement("span",{className:"nav-text"},"Boo",r.a.createElement("span",{className:"shortcutLetterHighlight"},"k"),"ing"))):null),r.a.createElement(_a.a.ItemGroup,{key:"g2",title:r.a.createElement(sr.a,{style:{margin:"0px"}},"EMR")},this.props.activePracticePermissions.PatientVitalSigns||this.props.allowAllPermissions?r.a.createElement(_a.a.Item,{key:"20"},r.a.createElement(Da.b,{to:this.props.currentPatient?"/patient/"+this.props.currentPatient.id+"/emr/vitalsigns":"/patients/emr/vitalsigns"},r.a.createElement(va.a,{type:"heart"}),r.a.createElement("span",{className:"nav-text"},"Report ",r.a.createElement("span",{className:"shortcutLetterHighlight"},"M"),"anual"))):null,this.props.activePracticePermissions.PatientClinicalNotes||this.props.allowAllPermissions?r.a.createElement(_a.a.Item,{key:"21"},r.a.createElement(Da.b,{to:this.props.currentPatient?"/patient/"+this.props.currentPatient.id+"/emr/clinicnotes":"/patients/emr/clinicnotes"},r.a.createElement(va.a,{type:"solution"}),r.a.createElement("span",{className:"nav-text"},"Clinical ",r.a.createElement("span",{className:"shortcutLetterHighlight"},"N"),"otes"))):null,this.props.activePracticePermissions.PatientTreatmentPlans||this.props.allowAllPermissions?r.a.createElement(_a.a.Item,{key:"30"},r.a.createElement(Da.b,{to:this.props.currentPatient?"/patient/"+this.props.currentPatient.id+"/emr/plans":"/patients/emr/plans"},r.a.createElement(va.a,{type:"read"}),r.a.createElement("span",{className:"nav-text"},r.a.createElement("span",{className:"shortcutLetterHighlight"},"T"),"reatment Plans"))):null,this.props.activePracticePermissions.PatientCompletedProcedure||this.props.allowAllPermissions?r.a.createElement(_a.a.Item,{key:"22"},r.a.createElement(Da.b,{to:this.props.currentPatient?"/patient/"+this.props.currentPatient.id+"/emr/workdone":"/patients/emr/workdone"},r.a.createElement(va.a,{type:"check-circle"}),r.a.createElement("span",{className:"nav-text"},"Completed Proced",r.a.createElement("span",{className:"shortcutLetterHighlight"},"u"),"re"))):null,this.props.activePracticePermissions.PatientFiles||this.props.allowAllPermissions?r.a.createElement(_a.a.Item,{key:"23"},r.a.createElement(Da.b,{to:this.props.currentPatient?"/patient/"+this.props.currentPatient.id+"/emr/files":"/patients/emr/files"},r.a.createElement(va.a,{type:"picture"}),r.a.createElement("span",{className:"nav-text"},"Fi",r.a.createElement("span",{className:"shortcutLetterHighlight"},"l"),"es"))):null,this.props.activePracticePermissions.PatientPrescriptions||this.props.allowAllPermissions?r.a.createElement(_a.a.Item,{key:"24"},r.a.createElement(Da.b,{to:this.props.currentPatient?"/patient/"+this.props.currentPatient.id+"/emr/prescriptions":"/patients/emr/prescriptions"},r.a.createElement(va.a,{type:"solution"}),r.a.createElement("span",{className:"nav-text"},"Pre",r.a.createElement("span",{className:"shortcutLetterHighlight"},"s"),"criptions"))):null,this.props.activePracticePermissions.PatientTimeline||this.props.allowAllPermissions?r.a.createElement(_a.a.Item,{key:"25",disabled:!this.props.currentPatient},r.a.createElement(Da.b,{to:this.props.currentPatient?"/patient/"+this.props.currentPatient.id+"/emr/timeline":"/patients/profile"},r.a.createElement(va.a,{type:"clock-circle"}),r.a.createElement("span",{className:"nav-text"},"Timeline ",r.a.createElement("span",{className:"shortcutLetterHighlight"},"w")))):null,this.props.activePracticePermissions.PatientLabOrders||this.props.allowAllPermissions?r.a.createElement(_a.a.Item,{key:"26",disabled:!this.props.currentPatient||!0},r.a.createElement(Da.b,{to:this.props.currentPatient?"/patient/"+this.props.currentPatient.id+"/emr/labtrackings":"/patients/profile"},r.a.createElement(va.a,{type:"solution"}),r.a.createElement("span",{className:"nav-text"},"Lab Orders"))):null),r.a.createElement(_a.a.ItemGroup,{key:"g3",title:r.a.createElement(sr.a,{style:{margin:"0px"}},"Billing")},this.props.activePracticePermissions.PatientInvoices||this.props.allowAllPermissions?r.a.createElement(_a.a.Item,{key:"27"},r.a.createElement(Da.b,{to:this.props.currentPatient?"/patient/"+this.props.currentPatient.id+"/billing/invoices":"/patients/billing/invoices"},r.a.createElement(va.a,{type:"audit"}),r.a.createElement("span",{className:"nav-text"},r.a.createElement("span",{className:"shortcutLetterHighlight"},"I"),"nvoices"))):null,this.props.activePracticePermissions.PatientReturns||this.props.allowAllPermissions?r.a.createElement(_a.a.Item,{key:"31"},r.a.createElement(Da.b,{to:this.props.currentPatient?"/patient/"+this.props.currentPatient.id+"/billing/return/invoices":"/patients/billing/return/invoices"},r.a.createElement(va.a,{type:"redo"}),r.a.createElement("span",{className:"nav-text"},"Invoices R",r.a.createElement("span",{className:"shortcutLetterHighlight"},"e"),"turn"))):null,this.props.activePracticePermissions.PatientPayments||this.props.allowAllPermissions?r.a.createElement(_a.a.Item,{key:"28"},r.a.createElement(Da.b,{to:this.props.currentPatient?"/patient/"+this.props.currentPatient.id+"/billing/payments":"/patients/billing/payments"},r.a.createElement(va.a,{type:"dollar"}),r.a.createElement("span",{className:"nav-text"},"Pa",r.a.createElement("span",{className:"shortcutLetterHighlight"},"y"),"ments"))):null,this.props.activePracticePermissions.PatientLedger||this.props.allowAllPermissions?r.a.createElement(_a.a.Item,{key:"29",disabled:!this.props.currentPatient},r.a.createElement(Da.b,{to:this.props.currentPatient?"/patient/"+this.props.currentPatient.id+"/billing/ledger":"/patients/profile"},r.a.createElement(va.a,{type:"book"}),r.a.createElement("span",{className:"nav-text"},"Led",r.a.createElement("span",{className:"shortcutLetterHighlight"},"g"),"er"))):null,this.props.currentPatient&&this.props.currentPatient.is_agent&&(this.props.activePracticePermissions.PatientLedger||this.props.allowAllPermissions)?r.a.createElement(_a.a.Item,{key:"32",disabled:!this.props.currentPatient},r.a.createElement(Da.b,{to:this.props.currentPatient?"/patient/"+this.props.currentPatient.id+"/billing/wallet":"/patients/profile"},r.a.createElement(va.a,{type:"wallet"}),r.a.createElement("span",{className:"nav-text"},"Wallet Ledger"))):null))))}}]),t}(r.a.Component),ms=(a(159),a(79)),hs=(a(1605),a(567));a(1607);function fs(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function gs(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?fs(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):fs(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}a(837).a.Step;var ys=[{label:r.a.createElement("span",{style:{width:"100%"}},"Appointment"),value:"appointments"},{label:r.a.createElement("span",{style:{width:"100%"}},"Report Manual"),value:"vital_signs"},{label:r.a.createElement("span",{style:{width:"100%"}},"Clinic Notes"),value:"clinic_notes"},{label:r.a.createElement("span",{style:{width:"100%"}},"Treatment Plans"),value:"treatment_plans"},{label:r.a.createElement("span",{style:{width:"100%"}},"Procedures"),value:"procedures"},{label:r.a.createElement("span",{style:{width:"100%"}},"Files"),value:"files"},{label:r.a.createElement("span",{style:{width:"100%"}},"Prescriptions"),value:"prescriptions"},{label:r.a.createElement("span",{style:{width:"100%"}},"Invoices"),value:"invoices"},{label:r.a.createElement("span",{style:{width:"100%"}},"Payments"),value:"payments"}],Es=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).changeFilters=function(e){var t=Object(f.a)(a);a.setState({filterParams:e,selectedFiltersIntermediate:!!e.length&&e.length<ys.length,checkAllFilters:e.length===ys.length},(function(){t.loadTimeline()}))},a.onCheckAllFiltersChange=function(e){var t=Object(f.a)(a);a.setState({filterParams:e.target.checked?ys.map((function(e){return e.value})):[],selectedFiltersIntermediate:!1,checkAllFilters:e.target.checked},(function(){t.loadTimeline()}))},a.loadTimeline=function(){var e=Object(f.a)(a),t={practice_id:a.props.active_practiceId};e.setState({loading:!0}),a.state.filterParams.forEach((function(e){t[e]=1}));a.props.showAllClinic&&a.props.match.params.id&&delete t.practice_id,Ut(Kt(Se,[a.props.match.params.id]),(function(t){var a=Or()().add(5,"year");e.setState((function(){var e=[],n={};return t.forEach((function(t){a.format("YMD")!=Or()(t.sort_date).format("YMD")&&(a=Or()(t.sort_date),e.push({type:"Time",date:t.sort_date})),e.push(t),"Appointments"!=t.type&&(n[t.type]?n[t.type][t.id]=!0:n[t.type]=Object(u.a)({},t.id,!0))})),{timelineData:e,loading:!1,allCheckList:n}}))}),(function(){e.setState({loading:!1})}),t)},a.onCheckAllTimelineCard=function(e){a.setState((function(t){return{checkedTimelineCards:e.target.checked?gs({},t.allCheckList):{},indeterminate:!1,checkAll:e.target.checked}}))},a.toggleTimelineCheckbox=function(e,t,n){a.setState((function(a){var r={},i=a.checkedTimelineCards;if(i[e]?i[e][t]=!!n:i[e]=Object(u.a)({},t,!!n),n){if(r.indeterminate=!0,Object.keys(a.allCheckList).length==Object.keys(i).length){for(var l=Object.keys(a.allCheckList),o=!1,s=0;s<l.length;s++)if(Object.keys(a.allCheckList[l[s]]).length!=Object.keys(i[l[s]]).length){o=!0,r.checkAll=!1;break}o||(r.indeterminate=!1,r.checkAll=!0)}}else r.checkAll=!1,r.indeterminate=!0,delete i[e][t],Object.keys(i[e]).length||(delete i[e],Object.keys(i).length||(r.indeterminate=!1));return r.checkedTimelineCards=i,r}))},a.printCaseSheet=function(){var e=Object(f.a)(a),t=Zt("Starting print case sheet..."),n={practice:e.props.active_practiceId,timeline:[]};Object.keys(a.state.checkedTimelineCards).forEach((function(t){n.timeline.push({type:t,id:Object.keys(e.state.checkedTimelineCards[t])})}));qt(Kt(xe,[a.props.match.params.id]),n,(function(e){Xt(t,O,"Fetched report successfully!!"),window.open(V+e.report)}),(function(){Xt(t,k,"Case sheet printing failed!!")}))},a.state={filterParams:["appointments","vital_signs","clinic_notes","treatment_plans","procedures","files","prescriptions","invoices","payments"],checkAllFilters:!0,selectedFiltersIntermediate:!1,timelineData:[],checkedTimelineCards:[]},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadTimeline()}},{key:"render",value:function(){var e=this;console.log("timeline",this.state.timelineData);var t=this;return r.a.createElement(cr.a,{title:"Timeline",extra:r.a.createElement(da.a.Group,null,r.a.createElement(da.a,null,"Email Case Sheet"),r.a.createElement(da.a,{type:"primary",onClick:function(){return e.printCaseSheet()}},"Print Case Sheet"))},r.a.createElement(pa.a,{spinning:this.state.loading},r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:4},r.a.createElement(pr.a,{indeterminate:this.state.selectedFiltersIntermediate,onChange:this.onCheckAllFiltersChange,checked:this.state.checkAllFilters},r.a.createElement("b",null,"Select all")),r.a.createElement("br",null),r.a.createElement(pr.a.Group,{size:"large",value:this.state.filterParams,options:ys,onChange:this.changeFilters})),r.a.createElement(ir.a,{span:20},r.a.createElement(s.a,{top:10},r.a.createElement("h4",{style:{textAlign:"right",padding:"5px",backgroundImage:"linear-gradient(to left, white , transparent)"}},r.a.createElement(pr.a,{indeterminate:this.state.indeterminate,onChange:this.onCheckAllTimelineCard,checked:this.state.checkAll},"Select All"))),r.a.createElement(hs.a,{progressDot:!0,current:1,direction:"vertical"},this.state.timelineData.map((function(e){return r.a.createElement(hs.a.Item,{dot:"Time"==e.type?r.a.createElement(va.a,{type:"clock-circle-o",style:{fontSize:"25px"}}):null},function(e){switch(e.type){case"Clinical Notes":return function(e){return r.a.createElement(cr.a,{hoverable:!0,bodyStyle:{backgroundColor:e.checkedTimelineCards[e.type]&&e.checkedTimelineCards[e.type][e.id]?"#B5EEFF":"initial"}},r.a.createElement("h2",null,r.a.createElement(va.a,{type:"solution"})," Clinical Note Added",r.a.createElement(pr.a,{size:"large",style:{float:"right"},checked:!!e.checkedTimelineCards[e.type]&&e.checkedTimelineCards[e.type][e.id],onChange:function(t){return e.toggleTimelineCheckbox(e.type,e.id,t.target.checked)}}),e.practice?r.a.createElement(fa.a,{style:{float:"right"}},r.a.createElement(ms.a,{title:"Practice Name"},r.a.createElement("b",null,e.practice.name," "))):null),e.chief_complaints?r.a.createElement("p",null,"Chief Complaints",r.a.createElement("ul",null,e.chief_complaints.split(nn).map((function(e){return e?r.a.createElement("li",null,e):null})))):null,e.observations?r.a.createElement("p",null,"Observations",r.a.createElement("ul",null,e.observations.split(nn).map((function(e){return e?r.a.createElement("li",null,e):null})))):null,e.investigations?r.a.createElement("p",null,"Investigations",r.a.createElement("ul",null,e.investigations.split(nn).map((function(e){return e?r.a.createElement("li",null,e):null})))):null,e.diagnosis?r.a.createElement("p",null,"Diagnosis",r.a.createElement("ul",null,e.diagnosis.split(nn).map((function(e){return e?r.a.createElement("li",null,e):null})))):null,e.notes?r.a.createElement("p",null,"Notes",r.a.createElement("ul",null,e.notes.split(nn).map((function(e){return e?r.a.createElement("li",null,e):null})))):null)}(e);case"Appointments":return function(e){return r.a.createElement(cr.a,{hoverable:!0,bodyStyle:{backgroundColor:e.checkedTimelineCards[e.type]&&e.checkedTimelineCards[e.type][e.id]?"#B5EEFF":"initial"}},r.a.createElement("h2",null,r.a.createElement(va.a,{type:"calendar"})," Appointment",e.practice_data?r.a.createElement(fa.a,{style:{float:"right"}},r.a.createElement(ms.a,{title:"Practice Name"},r.a.createElement("b",null,e.practice_data.name," "))):null),e.doctor_data?r.a.createElement("p",{style:{borderLeft:"5px solid "+e.doctor_data.calendar_colour,paddingLeft:"5px"}},e.doctor_data.user.first_name):null,Or()(e.schedule_at).format("hh:mm A")," to ",Or()(e.schedule_at).add(e.slot,"mins").format("HH:mm A"))}(e);case"Files":return function(e){return r.a.createElement(cr.a,{hoverable:!0,bodyStyle:{backgroundColor:e.checkedTimelineCards[e.type]&&e.checkedTimelineCards[e.type][e.id]?"#B5EEFF":"initial"}},r.a.createElement("h2",null,r.a.createElement(va.a,{type:"picture"})," File",r.a.createElement(pr.a,{size:"large",style:{float:"right"},checked:!!e.checkedTimelineCards[e.type]&&e.checkedTimelineCards[e.type][e.id],onChange:function(t){return e.toggleTimelineCheckbox(e.type,e.id,t.target.checked)}}),e.practice_data?r.a.createElement(fa.a,{style:{float:"right"}},r.a.createElement(ms.a,{title:"Practice Name"},r.a.createElement("b",null,e.practice_data.name," "))):null),r.a.createElement("img",{src:Bt(e.file_type),alt:"",style:{height:100}}))}(e);case"Invoices":return function(e){return r.a.createElement(cr.a,{hoverable:!0,bodyStyle:{backgroundColor:e.checkedTimelineCards[e.type]&&e.checkedTimelineCards[e.type][e.id]?"#B5EEFF":"initial"}},r.a.createElement("h2",null,r.a.createElement(va.a,{type:"audit"})," Invoice",r.a.createElement(pr.a,{size:"large",style:{float:"right"},checked:!!e.checkedTimelineCards[e.type]&&e.checkedTimelineCards[e.type][e.id],onChange:function(t){return e.toggleTimelineCheckbox(e.type,e.id,t.target.checked)}}),e.practice_data?r.a.createElement(fa.a,{style:{float:"right"}},r.a.createElement(ms.a,{title:"Practice Name"},r.a.createElement("b",null,e.practice_data.name," "))):null),e.procedure.map((function(e){return r.a.createElement(fa.a,null,e.name)})),e.inventory.map((function(e){return r.a.createElement(fa.a,null,e.name)})),r.a.createElement("br",null),r.a.createElement("b",null,e.invoice_id),r.a.createElement("br",null),r.a.createElement("b",null,"Invoice Amount: INR ",e.total),r.a.createElement("br",null),r.a.createElement("b",null,"Paid Amount: INR ",e.payments_data),r.a.createElement("br",null),r.a.createElement("b",null,"Due Amount: INR ",e.total-e.payments_data))}(e);case"Vital Signs":return function(e){var t=[{title:"Time",dataIndex:"created_at",key:"name",render:function(e){return r.a.createElement("span",null,Or()(e).format("hh:mm A"))}},{title:"Temp(F)",key:"temperature",render:function(e,t){return r.a.createElement("span",null," ",t.temperature,r.a.createElement("br",null),",",t.temperature_part)}},{title:"Pulse (BPM)",dataIndex:"pulse",key:"pulse"},{title:"RR breaths/min",dataIndex:"resp_rate",key:"resp_rate"},{title:"SYS/DIA mmhg",key:"address",render:function(e,t){return r.a.createElement(r.a.Fragment,null,t.blood_pressure_up?r.a.createElement("span",null," ",t.blood_pressure_up,"/",t.blood_pressure_down,r.a.createElement("br",null),",",t.position):null)}},{title:"WEIGHT kg",dataIndex:"weight",key:"weight"},{title:"Creatinine Level",key:"creatinine",dataIndex:"creatinine"},{title:"Haemoglobin Level",key:"haemoglobin",dataIndex:"haemoglobin"},{title:"Urea Level",key:"urea",dataIndex:"urea"},{title:"Uric Acid Level",key:"uric_acid",dataIndex:"uric_acid"}];return r.a.createElement(cr.a,{hoverable:!0,bodyStyle:{backgroundColor:e.checkedTimelineCards[e.type]&&e.checkedTimelineCards[e.type][e.id]?"#B5EEFF":"initial"}},r.a.createElement("h2",null,r.a.createElement(va.a,{type:"heart"})," Report Manual Recorded",r.a.createElement(pr.a,{size:"large",style:{float:"right"},checked:!!e.checkedTimelineCards[e.type]&&e.checkedTimelineCards[e.type][e.id],onChange:function(t){return e.toggleTimelineCheckbox(e.type,e.id,t.target.checked)}}),e.practice_data?r.a.createElement(fa.a,{style:{float:"right"}},r.a.createElement(ms.a,{title:"Practice Name"},r.a.createElement("b",null,e.practice_data.name," "))):null),e.doctor_data?r.a.createElement("p",{style:{borderLeft:"5px solid "+e.doctor_data.calendar_colour,paddingLeft:"5px"}},e.doctor_data.user.first_name):null,r.a.createElement(lr.a,{columns:t,size:"small",pagination:!1,dataSource:[e]}))}(e);case"Prescriptions":return function(e){return r.a.createElement(cr.a,{hoverable:!0,bodyStyle:{backgroundColor:e.checkedTimelineCards[e.type]&&e.checkedTimelineCards[e.type][e.id]?"#B5EEFF":"initial"}},r.a.createElement("h2",null,r.a.createElement(va.a,{type:"solution"})," Prescription Added",r.a.createElement(pr.a,{size:"large",style:{float:"right"},checked:!!e.checkedTimelineCards[e.type]&&e.checkedTimelineCards[e.type][e.id],onChange:function(t){return e.toggleTimelineCheckbox(e.type,e.id,t.target.checked)}}),e.practice?r.a.createElement(fa.a,{style:{float:"right"}},r.a.createElement(ms.a,{title:"Practice Name"},r.a.createElement("b",null,e.practice.name," "))):null),e.doctor?r.a.createElement("p",{style:{borderLeft:"5px solid "+e.doctor.calendar_colour,paddingLeft:"5px"}},e.doctor.user.first_name):null,e.drugs.map((function(e){return r.a.createElement(fa.a,null,e.name)})))}(e);case"Payments":return function(e){return r.a.createElement(cr.a,{hoverable:!0,bodyStyle:{backgroundColor:e.checkedTimelineCards[e.type]&&e.checkedTimelineCards[e.type][e.id]?"#B5EEFF":"initial"}},r.a.createElement("h2",null,r.a.createElement(va.a,{type:"dollar"})," Payment",r.a.createElement(pr.a,{size:"large",style:{float:"right"},checked:!!e.checkedTimelineCards[e.type]&&e.checkedTimelineCards[e.type][e.id],onChange:function(t){return e.toggleTimelineCheckbox(e.type,e.id,t.target.checked)}}),e.practice_data?r.a.createElement(fa.a,{style:{float:"right"}},r.a.createElement(ms.a,{title:"Practice Name"},r.a.createElement("b",null,e.practice_data.name," "))):null),r.a.createElement("b",null,e.payment_id),r.a.createElement("br",null),r.a.createElement("b",null,"Amount Paid: INR ",e.total))}(e);case"Time":return function(e){return r.a.createElement("span",null,r.a.createElement(s.a,{top:20,offsetTop:30},r.a.createElement("h2",{style:{marginLeft:"10px",padding:"5px",backgroundImage:"linear-gradient(to right, #ddd , white)",borderRadius:"4px"}},Or()(e.date).format("LL"))))}(e);case"Procedures":return function(e){return r.a.createElement(cr.a,{hoverable:!0,bodyStyle:{backgroundColor:e.checkedTimelineCards[e.type]&&e.checkedTimelineCards[e.type][e.id]?"#B5EEFF":"initial"}},r.a.createElement("h2",null,"Procedure Performed",r.a.createElement(pr.a,{size:"large",style:{float:"right"},checked:!!e.checkedTimelineCards[e.type]&&e.checkedTimelineCards[e.type][e.id],onChange:function(t){return e.toggleTimelineCheckbox(e.type,e.id,t.target.checked)}}),e.practice?r.a.createElement(fa.a,{style:{float:"right"}},r.a.createElement(ms.a,{title:"Practice Name"},r.a.createElement("b",null,e.practice.name," "))):null),e.doctor?r.a.createElement("p",{style:{borderLeft:"5px solid "+e.doctor.calendar_colour,paddingLeft:"5px"}},e.doctor.user.first_name):null,e.treatment_plans.map((function(e){return r.a.createElement(fa.a,null,e.procedure.name)})))}(e);case"Treatment Plans":return function(e){return r.a.createElement(cr.a,{hoverable:!0,bodyStyle:{backgroundColor:e.checkedTimelineCards[e.type]&&e.checkedTimelineCards[e.type][e.id]?"#B5EEFF":"initial"}},r.a.createElement("h2",null,"Treatment Plan ",r.a.createElement(pr.a,{size:"large",style:{float:"right"},checked:!!e.checkedTimelineCards[e.type]&&e.checkedTimelineCards[e.type][e.id],onChange:function(t){return e.toggleTimelineCheckbox(e.type,e.id,t.target.checked)}}),e.practice?r.a.createElement(fa.a,{style:{float:"right"}},r.a.createElement(ms.a,{title:"Practice Name"},r.a.createElement("b",null,e.practice.name," "))):null),e.doctor?r.a.createElement("p",{style:{borderLeft:"5px solid "+e.doctor.calendar_colour,paddingLeft:"5px"}},e.doctor.user.first_name):null,e.treatment_plans.map((function(e){return r.a.createElement(fa.a,null,e.procedure.name)})))}(e);default:return e.type}}(gs({},e,{checkedTimelineCards:t.state.checkedTimelineCards,toggleTimelineCheckbox:t.toggleTimelineCheckbox})))})))))))}}]),t}(r.a.Component);var bs=a(409),vs=a.n(bs),_s=a(565);function Os(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ds(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Os(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Os(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ks=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).loadMailedFiles=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=Object(f.a)(a),n=function(e){t.setState((function(t){return 1==e.current?{files:Object(Oa.a)(e.results),total:e.count,loadMoreFiles:e.next,loading:!1}:{files:[].concat(Object(Oa.a)(t.files),Object(Oa.a)(e.results)),loadMoreFiles:e.next,loading:!1}}))},r=function(){},i={mailed:!0,page:e,practice:a.props.active_practiceId};a.props.currentPatient&&(i.patient=a.props.currentPatient.id),a.props.showAllClinic&&a.props.currentPatient&&delete i.practice,Ut(Ce,n,r,i)},a.filterTags=function(e){var t=Object(f.a)(a);a.setState({filterSearchTag:e.target.value},(function(){t.loadData()}))},a.showModal=function(e){a.setState((function(){return{visible:!0,filesData:Ds({},e)}}))},a.handleCancel=function(){a.setState({visible:!1})},a.state={files:[],tags:[],showAddModal:!1,loading:!0,selectedFiles:{},selectedTags:{},filterSearchTag:null,showAddMedicalModel:!1,medicalCertificate:[],visible:!1,filesData:{},mailedfiles:[]},a.loadData=a.loadData.bind(Object(f.a)(a)),a.loadMedicalCertificate=a.loadMedicalCertificate.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentWillMount",value:function(){this.loadData(),this.loadMedicalCertificate()}},{key:"loadData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this;this.setState({loading:!0});var a=function(e){t.setState((function(t){var a=null;if(1==e.current)return{files:e.results.map((function(e){return Or()(e.created_at).format("YYYYMMDD")!=Or()(a).format("YYYYMMDD")?(a=Or()(e.created_at),Ds({},e,{newDate:!0})):Ds({},e,{newDate:!1})})),total:e.count,loadMoreFiles:e.next,loading:!1};var n=e.results.map((function(e){return Or()(e.created_at).format("YYYYMMDD")!=Or()(a).format("YYYYMMDD")?(a=Or()(e.created_at),Ds({},e,{newDate:!0})):Ds({},e,{newDate:!1})}));return{files:[].concat(Object(Oa.a)(t.files),Object(Oa.a)(n)),loadMoreFiles:e.next,loading:!1}}))},n=function(){t.setState({loading:!1})},r={page:e,practice:this.props.active_practiceId};this.props.match.params.id&&(r.patient=this.props.match.params.id),this.props.showAllClinic&&this.props.match.params.id&&delete r.practice,this.state.filterSearchTag?r.tag=this.state.filterSearchTag:""==this.state.filterSearchTag&&(r.notag=!0),Ut("patients/files/",a,n,r)}},{key:"loadTags",value:function(){var e=this;Ut(Kt("clinics/%s/filetags/",[this.props.active_practiceId]),(function(t){e.setState({tags:t,loading:!1})}),(function(){e.setState({loading:!1})}))}},{key:"loadMedicalCertificate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this;t.setState({loading:!0});var a=function(e){1==e.current?t.setState({total:e.count,medicalCertificate:e.results,loading:!1,loadMoreCertificate:e.next}):t.setState((function(t){return{total:e.count,medicalCertificate:[].concat(Object(Oa.a)(t.medicalCertificate),Object(Oa.a)(e.results)),loading:!1,loadMoreCertificate:e.next}}))},n=function(){t.setState({loading:!1})};this.props.currentPatient&&Ut(Kt(Ie,[this.props.active_practiceId,this.props.currentPatient.id,e]),a,n),this.props.showAllClinic&&this.props.currentPatient?Ut(Kt(je,[this.props.currentPatient.id,e]),a,n):Ut(Kt(je,[this.props.active_practiceId,e]),a,n)}},{key:"triggerAddModal",value:function(e){this.setState({showAddModal:!!e})}},{key:"triggerAddMedicalCertificateModal",value:function(e){this.setState({showAddMedicalModel:!!e})}},{key:"filesCompleteToggle",value:function(e,t){this.setState((function(a){var n=Ds({},a.selectedFiles);return t?n[e]=!!t:delete n[e],{selectedFiles:Ds({},n)}}))}},{key:"tagsCompleteToggle",value:function(e,t){this.setState((function(a){var n=Ds({},a.selectedTags);return t?n[e]=!!t:delete n[e],{selectedTags:Ds({},n)}}))}},{key:"filesWithTags",value:function(){var e=this,t={id:Object.keys(this.state.selectedFiles),file_tags:Object.keys(this.state.selectedTags),patient:this.props.match.params.id};qt(Kt("patients/files/",[this.props.match.params.id]),t,(function(){e.setState({selectedFiles:{}}),e.loadData()}),(function(){}))}},{key:"deleteMedicalCertificate",value:function(e){var t=this,a={is_active:!1,patient:e.patient,id:e.id};qt(Kt(Ie,[t.props.active_practiceId]),a,(function(e){t.loadData(),t.loadMedicalCertificate()}),(function(){}))}},{key:"deleteFile",value:function(e){var t=this,a={id:e.id,patient:e.patient,is_active:!1};qt(Kt("patients/files/",[this.props.match.params.id]),a,(function(e){t.loadData()}),(function(){Qt(k,"Please Select Patient.")}))}},{key:"loadPDF",value:function(e){Ut(Kt("patients/medical_certificate_pdf/?id=%s",[e]),(function(e){e.report&&window.open(V+e.report)}),(function(){}))}},{key:"render",value:function(){var e=this,t=this,a=hl.Form.create()(Vr),n=[{key:"file_type",label:"File",type:T,required:!0},{key:"file_tags",label:"Tags",type:j,options:this.state.tags.map((function(e){return{label:e.name,value:e.id}}))}],i={method:"post",successFn:function(){t.triggerAddModal(!1),t.loadData()},errorFn:function(){},action:Kt("patients/files/",[this.props.match.params.id])},l=r.a.createElement("div",{style:{boxShadow:"0 2px 4px #111",border:"1px solid #bbb",borderRadius:2,paddingBottom:"30px",backgroundColor:"white"}},r.a.createElement("ul",{style:{listStyle:"none",paddingInlineStart:0,paddingTop:10}},this.state.tags?r.a.createElement("div",null,this.state.tags.map((function(e){return r.a.createElement("li",{key:e.id},r.a.createElement(pr.a,{value:e.id,onChange:function(a){return t.tagsCompleteToggle(e.id,a.target.checked)},checked:t.state.selectedTags[e.id]},e.name," "))}))):null),r.a.createElement("span",null,r.a.createElement(da.a,{type:"primary",onClick:function(){return e.filesWithTags()},style:{float:"right",borderStyle:"none"}},"Done"))),o=[{key:"is_active",value:!0},{key:"patient",value:this.props.currentPatient?this.props.currentPatient.id:null},{key:"practice",value:this.props.active_practiceId}];return this.props.match.params.id?r.a.createElement(cr.a,{title:"Files",extra:r.a.createElement(da.a.Group,null,r.a.createElement(Da.b,{to:"/patient/"+this.props.match.params.id+"/emr/create-medicalCertificate"},r.a.createElement(da.a,{type:"primary"},r.a.createElement(va.a,{type:"plus"}),"\xa0Add Medical Certificate")," "),r.a.createElement(ha.a,{overlay:l,trigger:["click"],placement:"bottomLeft"},r.a.createElement(da.a,null,r.a.createElement(va.a,{type:"plus"}),"AddFile/remove")),r.a.createElement(da.a,{onClick:function(){return e.triggerAddModal(!0)}},r.a.createElement(va.a,{type:"plus"}),"Add"))},r.a.createElement(rr.a,{gutter:8},r.a.createElement(ir.a,{span:6,style:{height:"calc(100vh - 55px)",overflow:"auto",paddingRight:"10px",borderRight:"1px solid #ccc"}},r.a.createElement(br.a.Group,{buttonStyle:"solid",defaultValue:"all",onChange:this.filterTags},r.a.createElement("h2",null,"Uploaded Files"),r.a.createElement(br.a.Button,{style:{width:"100%",backgroundColor:"transparent",border:"0px"},value:null},"All Files"),this.state.tags.map((function(e){return r.a.createElement(br.a.Button,{key:e.id,style:{width:"100%",backgroundColor:"transparent",border:"0px"},value:e.id},e.name)})),r.a.createElement(br.a.Button,{style:{width:"100%",backgroundColor:"transparent",border:"0px"},value:""},"Untagged Files"),r.a.createElement("p",null,r.a.createElement("br",null))),r.a.createElement(br.a.Group,{buttonStyle:"solid",defaultValue:""},r.a.createElement("h2",null,"Generated Files"),r.a.createElement(br.a.Button,{key:"0",style:{width:"100%",backgroundColor:"transparent",border:"0px"},value:"a",onClick:function(){return e.loadMailedFiles()}},"Emailed Files"),r.a.createElement(br.a.Button,{key:"1",style:{width:"100%",backgroundColor:"transparent",border:"0px"},onClick:function(){return e.loadMedicalCertificate()}},"Medical Leave Certificate "))),r.a.createElement(ir.a,{span:18},r.a.createElement(rr.a,null,this.state.files.map((function(a){return r.a.createElement(r.a.Fragment,null,a.newDate?r.a.createElement(ir.a,{span:24},r.a.createElement(s.a,{top:20,offsetTop:30},r.a.createElement("h2",{style:{marginLeft:"10px",padding:"5px",backgroundImage:"linear-gradient(to right, #ddd , white)",borderRadius:"4px"}},Or()(a.created_at).format("LL")))):null,r.a.createElement(ir.a,{span:8},r.a.createElement("div",{style:{width:"100%",height:"150px",border:"1px solid #bbb",backgroundSize:"cover",padding:"auto",overflow:"hidden"}},r.a.createElement(pr.a,{key:a.id,disabled:a.practice!=e.props.active_practiceId,style:{margin:10,position:"absolute",top:5,left:5,boxShadow:"0 0px 5px #000 "},onChange:function(e){return t.filesCompleteToggle(a.id,e.target.checked)},checked:t.state.selectedFiles[a.id]}),r.a.createElement(_s.a,{style:{border:"3px solid red"},large:Bt(a.file_type),small:Bt(a.file_type),alt:r.a.createElement(da.a,{type:"danger",onClick:function(){return e.deleteFile(a)}},r.a.createElement(va.a,{type:"delete"}))})),r.a.createElement(cr.a,{bodyStyle:{padding:3},style:{marginBottom:15}},r.a.createElement("h4",null,r.a.createElement("b",null,a.patient_data.user.first_name,"\xa0(",a.patient_data.custom_id,")")),r.a.createElement(fa.a,null,r.a.createElement("b",null,a.practice_data?a.practice_data.name:"--")))))}))),r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:24},r.a.createElement(wi,{loaderFunction:function(){return e.loadData(t.state.loadMoreFiles)},loading:this.state.loading,hidden:!this.state.loadMoreFiles}))),r.a.createElement(cr.a,{title:"Medical Certificate"},r.a.createElement(Ea.a,{loading:this.state.loading,grid:{gutter:16,column:3},dataSource:this.state.medicalCertificate,renderItem:function(t){return r.a.createElement(cr.a,{style:{width:600},actions:[r.a.createElement("p",null,"Issued on : "+t.date),r.a.createElement("a",{onClick:function(){return e.loadPDF(t.id)}},r.a.createElement(va.a,{type:"printer"})),r.a.createElement(or.a,{title:"Are you sure delete this item?",onConfirm:function(){return e.deleteMedicalCertificate(t)},okText:"Yes",cancelText:"No"},r.a.createElement(va.a,{type:"delete"}))]},r.a.createElement(vs.a,{title:"Medical Leave #"+t.id,description:"Excused From :"+t.excused_duty_from+" till "+t.excused_duty_to}))}}),r.a.createElement(wi,{loaderFunction:function(){return e.loadData(t.state.loadMoreCertificate)},loading:this.state.loading,hidden:!this.state.loadMoreCertificate})))),r.a.createElement(nr.a,{visible:this.state.showAddModal,onCancel:function(){return e.triggerAddModal(!1)},footer:null},r.a.createElement(a,{title:"Add Files",fields:n,defaultValues:o,formProp:i}))):r.a.createElement(cr.a,{title:"Files",extra:r.a.createElement(da.a.Group,null,r.a.createElement(da.a,{type:"primary",style:{marginRight:"10px"},onClick:function(){return e.props.togglePatientListModal(!0)}},r.a.createElement(va.a,{type:"plus"}),"\xa0 Add Medical Certificate"),r.a.createElement(da.a,{type:"primary",style:{marginRight:"10px"},onClick:function(){return e.props.togglePatientListModal(!0)}},r.a.createElement(va.a,{type:"plus"})," \xa0 AddFile/remove"),r.a.createElement(da.a,{type:"primary",style:{marginRight:"10px"},onClick:function(){return e.props.togglePatientListModal(!0)}},r.a.createElement(va.a,{type:"plus"})," \xa0 Add"))},r.a.createElement(rr.a,{gutter:8},r.a.createElement(ir.a,{span:6,style:{height:"calc(100vh - 55px)",overflow:"auto",paddingRight:"10px",borderRight:"1px solid #ccc"}},r.a.createElement(br.a.Group,{buttonStyle:"solid",defaultValue:"all",onChange:this.filterTags},r.a.createElement("h2",null,"Uploaded Files"),r.a.createElement(br.a.Button,{style:{width:"100%",backgroundColor:"transparent",border:"0px"},value:null},"All Files"),this.state.tags.map((function(e){return r.a.createElement(br.a.Button,{key:e.id,style:{width:"100%",backgroundColor:"transparent",border:"0px"},value:e.id},e.name)})),r.a.createElement(br.a.Button,{style:{width:"100%",backgroundColor:"transparent",border:"0px"},value:""},"Untagged Files"),r.a.createElement("p",null,r.a.createElement("br",null))),r.a.createElement(br.a.Group,{buttonStyle:"solid",defaultValue:""},r.a.createElement("h2",null,"Generated Files"),r.a.createElement(br.a.Button,{style:{width:"100%",backgroundColor:"transparent",border:"0px"},value:"b",onClick:function(){return e.loadMailedFiles()}},"Emailed Files"),r.a.createElement(br.a.Button,{style:{width:"100%",backgroundColor:"transparent",border:"0px"},onClick:function(){return e.loadMedicalCertificate()},value:""},"Medical Leave Certificate "))),r.a.createElement(ir.a,{span:18},r.a.createElement(rr.a,null,this.state.files.map((function(a){return r.a.createElement(r.a.Fragment,null,a.newDate?r.a.createElement(ir.a,{span:24},r.a.createElement(s.a,{top:20,offsetTop:30},r.a.createElement("h2",{style:{marginLeft:"10px",padding:"5px",backgroundImage:"linear-gradient(to right, #ddd , white)",borderRadius:"4px"}},Or()(a.created_at).format("LL")))):null,r.a.createElement(ir.a,{span:8},r.a.createElement("div",{style:{width:"100%",height:"150px",border:"1px solid #bbb",backgroundSize:"cover",padding:"auto",overflow:"hidden"}},r.a.createElement(pr.a,{key:a.id,disabled:a.practice!=e.props.active_practiceId,style:{margin:10,position:"absolute",top:5,left:5,boxShadow:"0 0px 5px #000 "},onChange:function(e){return t.filesCompleteToggle(a.id,e.target.checked)},checked:t.state.selectedFiles[a.id]}),r.a.createElement(_s.a,{style:{border:"3px solid red"},large:Bt(a.file_type),small:Bt(a.file_type),alt:r.a.createElement(da.a,{type:"danger",onClick:function(){return e.deleteFile(a)}},r.a.createElement(va.a,{type:"delete"}))})),r.a.createElement(cr.a,{bodyStyle:{padding:3},style:{marginBottom:15}},r.a.createElement(Da.b,{to:"/patient/"+a.patient_data.id+"/emr/files/"},r.a.createElement("h4",null,r.a.createElement("b",null,a.patient_data.user.first_name,"\xa0(",a.patient_data.custom_id,")"))),r.a.createElement(fa.a,null,r.a.createElement("b",null,a.practice_data?a.practice_data.name:"--")))))}))),r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:24},r.a.createElement(wi,{loaderFunction:function(){return e.loadData(t.state.loadMoreFiles)},loading:this.state.loading,hidden:!this.state.loadMoreFiles}))),r.a.createElement(cr.a,{title:"Medical Certificate"},r.a.createElement(Ea.a,{loading:this.state.loading,grid:{gutter:16,column:3},dataSource:this.state.medicalCertificate,renderItem:function(t){return r.a.createElement(cr.a,{style:{width:600},actions:[r.a.createElement("p",null,"Issued on : "+t.date),r.a.createElement("a",{onClick:function(){return e.loadPDF(t.id)}},r.a.createElement(va.a,{type:"printer"})),r.a.createElement(or.a,{title:"Are you sure delete this item?",onConfirm:function(){return e.deleteMedicalCertificate(t)},okText:"Yes",cancelText:"No"},r.a.createElement(va.a,{type:"delete"}))]},r.a.createElement(vs.a,{title:"Medical Leave #"+t.id,description:"Excused From :"+t.excused_duty_from+" till "+t.excused_duty_to}))}}),r.a.createElement(wi,{loaderFunction:function(){return e.loadMedicalCertificate(t.state.loadMoreCertificate)},loading:this.state.loading,hidden:!this.state.loadMoreCertificate})))),r.a.createElement(nr.a,{visible:this.state.showAddModal,onCancel:function(){return e.triggerAddModal(!1)},footer:null},r.a.createElement(a,{title:"Add Files",fields:n,defaultValues:o,formProp:i})))}}]),t}(r.a.Component);r.a.Component;function Ps(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ss(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ps(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ps(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var xs=hr.a.TabPane,js=["Complaints","Observations","Diagnoses","Investigations","Notes","Recent Medication"],Is={Complaints:"clinics/%s/complaints/",Observations:"clinics/%s/observations/",Diagnoses:"clinics/%s/diagnoses/",Investigations:"clinics/%s/investigations/",Notes:le,"Recent Medication":"clinics/%s/medication/"},Cs=0,ws=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).setInitialData=function(){var e=Object(f.a)(a),t=a.state.editClinicNotes;t.chief_complaints&&t.chief_complaints.split(nn).forEach((function(t){return setTimeout((function(){t.length&&e.addValues("Complaints",t)}),500)})),t.investigations&&t.investigations.split(nn).forEach((function(t){return setTimeout((function(){t.length&&e.addValues("Investigations",t)}),500)})),t.diagnosis&&t.diagnosis.split(nn).forEach((function(t){return setTimeout((function(){t.length&&e.addValues("Diagnoses",t)}),500)})),t.notes&&t.notes.split(nn).forEach((function(t){return setTimeout((function(){t.length&&e.addValues("Notes",t)}),500)})),t.observations&&t.observations.split(nn).forEach((function(t){return setTimeout((function(){t.length&&e.addValues("Observations",t)}),500)})),t.medication&&t.medication.split(nn).forEach((function(t){return setTimeout((function(){t.length&&e.addValues("Recent Medication",t)}),500)}))},a.loadRequiredResources=function(e,t){var n=Object(f.a)(a);Ut(e,(function(e){n.setState((function(a){var n=Ss({},a.resourceList,Object(u.a)({},t,e));return{resourceList:n,filteredResourceList:n,filterStrings:{}}}))}),(function(){console.log(t+" fetching error")}))},a.add=function(e){var t=a.props.form,n=t.getFieldValue(e).concat(++Cs);t.setFieldsValue(Object(u.a)({},e,n))},a.remove=function(e,t){var n=a.props.form,r=n.getFieldValue(e);1!==r.length&&n.setFieldsValue(Object(u.a)({},e,r.filter((function(e){return e!==t}))))},a.addValues=function(e,t){var n,r=a.props.form,i=r.getFieldValue(e),l=i.concat(++Cs);r.setFieldsValue((n={},Object(u.a)(n,e,l),Object(u.a)(n,"field[".concat(i[i.length-1],"]"),t),n))},a.changeValues=function(e,t){var n=a.props.form.getFieldValue(e);n.indexOf(t)==n.length-1&&a.add(e)},a.toggleModal=function(e){var t=null,n=Object(f.a)(a);a.setState((function(a){return console.log(a.resourceAddModal),a.resourceAddModal&&(t=a.resourceAddModal),{resourceAddModal:e}}),(function(){t&&n.loadRequiredResources(Kt(Is[t],[n.props.active_practiceId]),t)}))},a.searchValues=function(e,t){var n=Object(f.a)(a);a.setState((function(a){var n=Ss({},a.searchStrings);return n[e]=t,{searchStrings:n}}),(function(){n.filterValues(e)}))},a.filterValues=function(e){a.setState((function(t){var a=[];return t.resourceList[e]&&(t.searchStrings[e]?t.resourceList[e].forEach((function(n){n.name&&n.name.toString().toLowerCase().includes(t.searchStrings[e].toLowerCase())&&a.push(n)})):a=t.resourceList[e]),{filteredResourceList:Ss({},t.filteredResourceList,Object(u.a)({},e,a))}}))},a.handleSubmit=function(e){var t=Object(f.a)(a);e.preventDefault(),a.props.form.validateFieldsAndScroll((function(e,n){if(!e){var r={};r.chief_complaints=n.Complaints.map((function(e){return n.field[e]})).join(nn),r.investigations=n.Investigations.map((function(e){return n.field[e]})).join(nn),r.diagnosis=n.Diagnoses.map((function(e){return n.field[e]})).join(nn),r.notes=n.Notes.map((function(e){return n.field[e]})).join(nn),r.observations=n.Observations.map((function(e){return n.field[e]})).join(nn),r.medication=n["Recent Medication"].map((function(e){return n.field[e]})).join(nn),r.patient=t.props.match.params.id,r.practice=t.props.active_practiceId,r.doctor=t.state.selectedDoctor&&t.state.selectedDoctor.id?t.state.selectedDoctor.id:t.state.selectedDoctor,r.date=t.state.selectedDate&&Or()(t.state.selectedDate).isValid()?Or()(t.state.selectedDate).format("YYYY-MM-DD"):null,t.state.editClinicNotes&&(r.id=t.state.editClinicNotes.id);qt(Kt(Le,[a.props.match.params.id]),r,(function(e){t.props.loadData&&t.props.loadData(),t.props.history.push("/patient/"+t.props.match.params.id+"/emr/clinicnotes/")}),(function(){}))}}))},a.changeTab=function(e,t){},a.selectDoctor=function(e){a.setState({selectedDoctor:e})},a.selectedDate=function(e){a.setState({selectedDate:e})},a.state={resourceList:{},filteredResourceList:{},filterStrings:{},practiceDoctors:[],selectedDoctor:{},selectedDate:Or()(),resourceAddModal:null,selectedTab:"Complaints",editClinicNotes:a.props.editClinicNotes?a.props.editClinicNotes:null},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){mi(this),this.loadRequiredResources(Kt("clinics/%s/complaints/",[this.props.active_practiceId]),"Complaints"),this.loadRequiredResources(Kt("clinics/%s/observations/",[this.props.active_practiceId]),"Observations"),this.loadRequiredResources(Kt("clinics/%s/diagnoses/",[this.props.active_practiceId]),"Diagnoses"),this.loadRequiredResources(Kt("clinics/%s/investigations/",[this.props.active_practiceId]),"Investigations"),this.loadRequiredResources(Kt(le,[this.props.active_practiceId]),"Notes"),this.loadRequiredResources(Kt("clinics/%s/medication/",[this.props.active_practiceId]),"Recent Medication"),this.state.editClinicNotes&&this.setInitialData()}},{key:"render",value:function(){var e=this,t=this,a=this.props.form,n=a.getFieldDecorator,i=a.getFieldValue,l={labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}},o={};js.forEach((function(e){n(e,{initialValue:[++Cs]}),o[e]=i(e)}));var c=o,u=vr.a.create()(Vr);return r.a.createElement(cr.a,null,r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:18},r.a.createElement("h2",null,"Clinical Notes"),r.a.createElement(vr.a,{onSubmit:this.handleSubmit},js.map((function(a){return r.a.createElement("div",null,r.a.createElement(sr.a,{style:{margin:5}},a),r.a.createElement("div",{style:{backgroundColor:a==t.state.selectedTab?"#ddd":"initial",padding:10}},c[a].map((function(i,o){return r.a.createElement(vr.a.Item,Object.assign({},l,{label:a+" "+(o+1),key:i}),n("field[".concat(i,"]"),{validateTrigger:["onChange","onBlur"],rules:[{whitespace:!0}]})(r.a.createElement(ma.a,{placeholder:a,style:{width:"60%",marginRight:8},key:i,onFocus:function(e){return t.changeTab(e,a)},onChange:function(){return t.changeValues(a,i)}})),c[a].length-1!=o?r.a.createElement(da.a,{shape:"circle",type:"danger",size:"small",icon:"delete",onClick:function(){return e.remove(a,i)}}):null)}))))})),r.a.createElement(s.a,{offsetBottom:0},r.a.createElement(cr.a,null,r.a.createElement(rr.a,null,r.a.createElement("span",null,"by \xa0\xa0"),r.a.createElement(ha.a,{placement:"topCenter",overlay:r.a.createElement(_a.a,null,this.state.practiceDoctors.map((function(t){return r.a.createElement(_a.a.Item,{key:"0"},r.a.createElement("a",{onClick:function(){return e.selectDoctor(t)}},t.user.first_name))}))),trigger:["click"]},r.a.createElement("a",{className:"ant-dropdown-link",href:"#"},r.a.createElement("b",null,this.state.selectedDoctor.user?this.state.selectedDoctor.user.first_name:"No DOCTORS Found"))),r.a.createElement("span",null," \xa0\xa0on\xa0\xa0"),r.a.createElement(yr.a,{value:this.state.selectedDate,allowClear:!1,onChange:function(t){return e.selectedDate(t)},format:"DD-MM-YYYY"}),r.a.createElement(da.a,{type:"primary",htmlType:"submit",style:{float:"right",margin:5}},"Save"),t.props.history?r.a.createElement(da.a,{style:{margin:5,float:"right"},onClick:function(){return t.props.history.goBack()}},"Cancel"):null),r.a.createElement(rr.a,null,"Next Follow up"))))),r.a.createElement(ir.a,{span:6},r.a.createElement(hr.a,{type:"card"},js.map((function(a){return r.a.createElement(xs,{tab:a,key:a},r.a.createElement("div",{style:{padding:5}},r.a.createElement(da.a,{type:"primary",block:!0,size:"small",onClick:function(){return t.toggleModal(a)}},r.a.createElement(va.a,{type:"plus"}),"Add\xa0",a),r.a.createElement("div",{style:{backgroundColor:"#ddd",padding:8}},r.a.createElement(ma.a.Search,{placeholder:"Search in "+a+" ...",onChange:function(t){return e.searchValues(a,t.target.value)}})),r.a.createElement(Ea.a,{key:a,size:"small",dataSource:t.state.filteredResourceList[a],renderItem:function(t){return r.a.createElement(Ea.a.Item,{key:t.id,onClick:function(){return e.addValues(a,t.name)}},t.name)}})))})))),r.a.createElement(nr.a,{visible:!!this.state.resourceAddModal,onCancel:function(){return t.toggleModal(null)},title:"Add "+this.state.resourceAddModal,footer:null},this.state.resourceAddModal?r.a.createElement(u,{fields:[{label:this.state.resourceAddModal,required:!0,type:S,key:"name"}],defaultValues:[{key:"practice",value:this.props.active_practiceId}],formProp:{method:"post",action:Kt(Is[this.state.resourceAddModal],[this.props.active_practiceId]),successFn:function(){t.toggleModal(null),Qt(O,t.state.resourceAddModal+" added successfully!!")},errorFn:function(e){console.log(e)}}}):null)))}}]),t}(r.a.Component),Ms=vr.a.create()(ws),As=hl.Modal.confirm,Ts=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={currentPatient:a.props.currentPatient,active_practiceId:a.props.active_practiceId,clinicNotes:[],editClinicNotes:null,loading:!0},a.loadClinicNotes=a.loadClinicNotes.bind(Object(f.a)(a)),a.editClinicNotesData=a.editClinicNotesData.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadClinicNotes()}},{key:"loadClinicNotes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this,a=function(e){t.setState((function(t){return 1==e.current?{clinicNotes:Object(Oa.a)(e.results),next:e.next,loading:!1}:{clinicNotes:[].concat(Object(Oa.a)(t.clinicNotes),Object(Oa.a)(e.results)),next:e.next,loading:!1}}))},n=function(){t.setState({loading:!1})},r={page:e,practice:this.props.active_practiceId};this.props.match.params.id&&(r.patient=this.props.match.params.id),this.props.showAllClinic&&this.props.match.params.id&&delete r.practice,Ut(Le,a,n,r)}},{key:"editClinicNotesData",value:function(e){this.setState({editClinicNotes:e,loading:!1});var t=this.props.match.params.id;this.props.history.push("/patient/"+t+"/emr/clinicnotes/edit")}},{key:"deleteClinicNote",value:function(e){var t=this;As({title:"Are you sure to delete this item?",okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){var a={id:e.id,patient:e.patient,is_active:!1};qt(Kt(Le,[t.props.match.params.id]),a,(function(e){t.loadClinicNotes()}),(function(){}))},onCancel:function(){console.log("Cancel")}})}},{key:"loadPDF",value:function(e){Ut(Kt("patients/clinic_notes_pdf/?id=%s",[e]),(function(e){e.report&&window.open(V+e.report)}),(function(){}))}},{key:"render",value:function(){var e=this,t=this;return this.props.match.params.id?r.a.createElement("div",null,r.a.createElement(y.d,null,r.a.createElement(y.b,{exact:!0,path:"/patient/:id/emr/clinicnotes/add",render:function(t){return r.a.createElement(Ms,Object.assign({},t,e.props,{loadData:e.loadClinicNotes}))}}),r.a.createElement(y.b,{exact:!0,path:"/patient/:id/emr/clinicnotes/edit",render:function(a){return e.state.editClinicNotes?r.a.createElement(Ms,Object.assign({},e.state,a,{loadData:e.loadClinicNotes})):r.a.createElement(y.a,{to:"/patient/"+t.props.match.params.id+"/emr/clinicnotes/"})}}),r.a.createElement(y.b,null,r.a.createElement("div",null,r.a.createElement(cr.a,{bodyStyle:{padding:0},title:this.state.currentPatient?this.state.currentPatient.user.first_name+" ClinicNotes":"ClinicNotes",extra:r.a.createElement(da.a.Group,null,r.a.createElement(Da.b,{to:"/patient/"+this.props.match.params.id+"/emr/clinicnotes/add"},r.a.createElement(da.a,{type:"primary"},r.a.createElement(va.a,{type:"plus"}),"Add")))}),this.state.clinicNotes.map((function(a){return r.a.createElement(cr.a,{style:{marginTop:20},title:r.a.createElement("small",null,a.date?Or()(a.date).format("ll"):null),extra:r.a.createElement(ha.a.Button,{size:"small",style:{float:"right"},overlay:r.a.createElement(_a.a,null,r.a.createElement(_a.a.Item,{key:"1",onClick:function(){return t.editClinicNotesData(a)},disabled:a.practice&&a.practice.id!=e.props.active_practiceId},r.a.createElement(va.a,{type:"edit"}),"Edit"),r.a.createElement(_a.a.Item,{key:"2",onClick:function(){return t.deleteClinicNote(a)},disabled:a.practice&&a.practice.id!=e.props.active_practiceId},r.a.createElement(va.a,{type:"delete"}),"Delete"),r.a.createElement(_a.a.Divider,null),r.a.createElement(_a.a.Item,{key:"3"},r.a.createElement(Da.b,{to:"/patient/"+a.patient+"/emr/timeline"},r.a.createElement(va.a,{type:"clock-circle"}),"\xa0 Patient Timeline")))},r.a.createElement("a",{onClick:function(){return e.loadPDF(a.id)}},r.a.createElement(va.a,{type:"printer"})))},r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:6},r.a.createElement("h3",null,"Complaints")),r.a.createElement(ir.a,{span:18,style:{borderLeft:"1px solid #ccc",padding:4}},r.a.createElement("div",{style:{minHeight:30}},a.chief_complaints?a.chief_complaints.split(nn).map((function(e,t){return r.a.createElement("span",null,t?r.a.createElement("br",null):null,e)})):null),r.a.createElement(sr.a,{style:{margin:0}}))),r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:6},r.a.createElement("h3",null,"Observations")),r.a.createElement(ir.a,{span:18,style:{borderLeft:"1px solid #ccc",padding:4}},r.a.createElement("div",{style:{minHeight:30}},a.observations?a.observations.split(nn).map((function(e,t){return r.a.createElement("span",null,t?r.a.createElement("br",null):null,e)})):null),r.a.createElement(sr.a,{style:{margin:0}}))),r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:6},r.a.createElement("h3",null,"Investigations")),r.a.createElement(ir.a,{span:18,style:{borderLeft:"1px solid #ccc",padding:4}},r.a.createElement("div",{style:{minHeight:30}},a.investigations?a.investigations.split(nn).map((function(e,t){return r.a.createElement("span",null,t?r.a.createElement("br",null):null,e)})):null),r.a.createElement(sr.a,{style:{margin:0}}))),r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:6},r.a.createElement("h3",null,"Diagnoses")),r.a.createElement(ir.a,{span:18,style:{borderLeft:"1px solid #ccc",padding:4}},r.a.createElement("div",{style:{minHeight:30}},a.diagnosis?a.diagnosis.split(nn).map((function(e,t){return r.a.createElement("span",null,t?r.a.createElement("br",null):null,e)})):null),r.a.createElement(sr.a,{style:{margin:0}}))),r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:6},r.a.createElement("h3",null,"Notes")),r.a.createElement(ir.a,{span:18,style:{borderLeft:"1px solid #ccc",padding:4}},r.a.createElement("div",{style:{minHeight:30}},a.notes?a.notes.split(nn).map((function(e,t){return r.a.createElement("span",null,t?r.a.createElement("br",null):null,e)})):null),r.a.createElement(sr.a,{style:{margin:0}}))),r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:6},r.a.createElement("h3",null,"Recent Medications")),r.a.createElement(ir.a,{span:18,style:{borderLeft:"1px solid #ccc",padding:4}},r.a.createElement("div",{style:{minHeight:30}},a.medication?a.medication.split(nn).map((function(e,t){return r.a.createElement("span",null,t?r.a.createElement("br",null):null,e)})):null),r.a.createElement(sr.a,{style:{margin:0}}))),r.a.createElement("div",null,a.doctor?r.a.createElement(fa.a,{color:a.doctor?a.doctor.calendar_colour:null},r.a.createElement("b",null,"prescribed by  "+a.doctor.user.first_name," ")):null,a.practice?r.a.createElement(fa.a,{style:{float:"right"}},r.a.createElement(ms.a,{title:"Practice Name"},r.a.createElement("b",null,a.practice.name," "))):null))})),r.a.createElement(pa.a,{spinning:this.state.loading},r.a.createElement(rr.a,null)),r.a.createElement(wi,{loaderFunction:function(){return e.loadClinicNotes(t.state.next)},loading:this.state.loading,hidden:!this.state.next}))))):r.a.createElement("div",null,r.a.createElement(cr.a,{bodyStyle:{padding:0},title:this.state.currentPatient?this.state.currentPatient.user.first_name+" Clinic Notes":"Clinic Notes",extra:r.a.createElement(da.a.Group,null,r.a.createElement(da.a,{type:"primary",onClick:function(){return e.props.togglePatientListModal(!0)}},r.a.createElement(va.a,{type:"plus"}),"Add"))}),this.state.clinicNotes.map((function(a){return r.a.createElement(cr.a,{style:{marginTop:10},key:a.id,extra:r.a.createElement(ha.a.Button,{size:"small",overlay:r.a.createElement(_a.a,null,r.a.createElement(_a.a.Item,{key:"1",onClick:function(){return t.editClinicNotesData(a)},disabled:a.practice&&a.practice.id!=e.props.active_practiceId},r.a.createElement(va.a,{type:"edit"}),"Edit"),r.a.createElement(_a.a.Item,{key:"2",onClick:function(){return t.deleteClinicNote(a)},disabled:a.practice&&a.practice.id!=e.props.active_practiceId},r.a.createElement(va.a,{type:"delete"}),"Delete"),r.a.createElement(_a.a.Divider,null),r.a.createElement(_a.a.Item,{key:"3"},r.a.createElement(Da.b,{to:"/patient/"+a.patient+"/emr/timeline"},r.a.createElement(va.a,{type:"clock-circle"}),"\xa0 Patient Timeline")))},r.a.createElement("a",{onClick:function(){return e.loadPDF(a.id)}},r.a.createElement(va.a,{type:"printer"}))),title:r.a.createElement("div",null,r.a.createElement("small",null,a.date?Or()(a.date).format("ll"):null,r.a.createElement(Da.b,{to:"/patient/"+a.patient.id+"/emr/clinicnotes"},"\xa0\xa0 ",a.patient.user?a.patient.user.first_name:null," (ID: ",a.patient.custom_id?a.patient.custom_id:a.patient.id,")\xa0"),r.a.createElement("span",null,", ",a.patient.gender)))},r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:6},r.a.createElement("h3",null,"Complaints")),r.a.createElement(ir.a,{span:18,style:{borderLeft:"1px solid #ccc",padding:4}},r.a.createElement("div",{style:{minHeight:30}},a.chief_complaints?a.chief_complaints.split(nn).map((function(e,t){return r.a.createElement("span",{key:e},t?r.a.createElement("br",null):null,e)})):null),r.a.createElement(sr.a,{style:{margin:0}}))),r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:6},r.a.createElement("h3",null,"Observations")),r.a.createElement(ir.a,{span:18,style:{borderLeft:"1px solid #ccc",padding:4}},r.a.createElement("div",{style:{minHeight:30}},a.observations?a.observations.split(nn).map((function(e,t){return r.a.createElement("span",{key:e},t?r.a.createElement("br",null):null,e)})):null),r.a.createElement(sr.a,{style:{margin:0}}))),r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:6},r.a.createElement("h3",null,"Investigations")),r.a.createElement(ir.a,{span:18,style:{borderLeft:"1px solid #ccc",padding:4}},r.a.createElement("div",{style:{minHeight:30}},a.investigations?a.investigations.split(nn).map((function(e,t){return r.a.createElement("span",{key:e},t?r.a.createElement("br",null):null,e)})):null),r.a.createElement(sr.a,{style:{margin:0}}))),r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:6},r.a.createElement("h3",null,"Diagnoses")),r.a.createElement(ir.a,{span:18,style:{borderLeft:"1px solid #ccc",padding:4}},r.a.createElement("div",{style:{minHeight:30}},a.diagnosis?a.diagnosis.split(nn).map((function(e,t){return r.a.createElement("span",{key:e},t?r.a.createElement("br",null):null,e)})):null),r.a.createElement(sr.a,{style:{margin:0}}))),r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:6},r.a.createElement("h3",null,"Notes")),r.a.createElement(ir.a,{span:18,style:{borderLeft:"1px solid #ccc",padding:4}},r.a.createElement("div",{style:{minHeight:30}},a.notes?a.notes.split(nn).map((function(e,t){return r.a.createElement("span",{key:e},t?r.a.createElement("br",null):null,e)})):null),r.a.createElement(sr.a,{style:{margin:0}}))),r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:6},r.a.createElement("h3",null,"Recent Medications")),r.a.createElement(ir.a,{span:18,style:{borderLeft:"1px solid #ccc",padding:4}},r.a.createElement("div",{style:{minHeight:30}},a.medication?a.medication.split(nn).map((function(e,t){return r.a.createElement("span",null,t?r.a.createElement("br",null):null,e)})):null),r.a.createElement(sr.a,{style:{margin:0}}))),r.a.createElement("div",null,a.doctor?r.a.createElement(fa.a,{color:a.doctor?a.doctor.calendar_colour:null},r.a.createElement("b",null,"prescribed by  "+a.doctor.user.first_name," ")):null,a.practice?r.a.createElement(fa.a,{style:{float:"right"}},r.a.createElement(ms.a,{title:"Practice Name"},r.a.createElement("b",null,a.practice.name," "))):null))})),r.a.createElement(pa.a,{spinning:this.state.loading},r.a.createElement(rr.a,null)),r.a.createElement(wi,{loaderFunction:function(){return e.loadClinicNotes(t.state.next)},loading:this.state.loading,hidden:!this.state.next}))}}]),t}(r.a.Component),Rs=o.a.Header,Ls=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.props.refreshWallet&&this.props.refreshWallet()}},{key:"render",value:function(){var e=this,t=this;return r.a.createElement(Rs,{className:"header",style:{background:"#e4e4e4",padding:"0px 20px"}},r.a.createElement("div",null,this.props.currentPatient?r.a.createElement("div",{style:{display:"inline"}},r.a.createElement("div",{style:{display:"inline",textSize:"15px"}},r.a.createElement(ms.a,{title:"Switch Back to All Patients"},r.a.createElement(da.a,{onClick:function(){return e.props.setCurrentPatient(null)},type:"primary",ghost:!0},r.a.createElement(va.a,{type:"solution"})," \xa0 Back"))),r.a.createElement("a",{style:{padding:"8px",fontSize:"15px"},onClick:function(){return e.props.togglePatientListModal(!0)}},this.props.currentPatient.image?r.a.createElement(ba.a,{src:Bt(this.props.currentPatient.image)}):r.a.createElement(ba.a,{style:{backgroundColor:"#87d068"}},this.props.currentPatient.user.first_name?this.props.currentPatient.user.first_name.charAt(0):r.a.createElement(va.a,{type:"user"})),"\xa0\xa0",t.props.currentPatient.user.first_name.length<16?t.props.currentPatient.user.first_name:t.props.currentPatient.user.first_name.slice(0,12)+"...",r.a.createElement("small",null,r.a.createElement("i",null,r.a.createElement("b",null," [ID: ",t.props.currentPatient.custom_id?t.props.currentPatient.custom_id:t.props.currentPatient.id,"]")))),"\xa0\xa0\xa0\xa0",r.a.createElement(bo.a,{placement:"topLeft",title:"Medical History",content:r.a.createElement("div",{style:{width:250}},t.props.currentPatient.medical_history_data?t.props.currentPatient.medical_history_data.map((function(e,t){return r.a.createElement(fa.a,{color:"#"+gi(fi(e.name))},e.name)})):null)},t.props.currentPatient.medical_history_data?t.props.currentPatient.medical_history_data.map((function(e,a){return a>1?2==a&&r.a.createElement(fa.a,null,"+",t.props.currentPatient.medical_history_data.length-2):r.a.createElement(fa.a,{color:"#"+gi(fi(e.name))},e.name)})):null),r.a.createElement(mr.a,{style:{marginLeft:20},checked:this.props.showAllClinic,onChange:function(t){return e.props.toggleShowAllClinic(t)},checkedChildren:"All Clinics",unCheckedChildren:"Current Clinic"}),this.props.pendingAmount?r.a.createElement(r.a.Fragment,null,r.a.createElement(da.a,{style:{marginLeft:"20px"},type:"primary",size:"small"},r.a.createElement(Da.b,{to:"/patient/"+this.props.currentPatient.id+"/billing/payments/add"}," Pay Now!")),r.a.createElement(bo.a,{placement:"rightTop",content:r.a.createElement(Ea.a,{size:"small",dataSource:this.props.pendingAmount.practice_data,renderItem:function(e){return r.a.createElement(Ea.a.Item,null,r.a.createElement(Ea.a.Item.Meta,{title:e.name,description:"Rs. "+(e.total<0?-1*e.total+" (Advance)":e.total)}))}}),title:"Pending Payments"},r.a.createElement("div",{style:{display:"inline",float:"left",maxWidth:200,position:"absolute",margin:"0px 15px",zIndex:5}},r.a.createElement(ao.a,{title:"Total Pending Amount",value:this.props.pendingAmount.grand_total,valueStyle:{color:this.props.pendingAmount.grand_total>0?"#cf1322":"initial",fontWeight:500},precision:2})))):null,this.props.walletAmount&&this.props.walletAmount.length?r.a.createElement(bo.a,{placement:"rightTop",title:"Agent Wallet Amount",content:r.a.createElement("p",null,"Non-Refundable : ",this.props.walletAmount[0].non_refundable)},r.a.createElement("div",{style:{display:"inline",float:"left",maxWidth:400,position:"absolute",paddingLeft:173,margin:"12px 15px"}},r.a.createElement(ao.a,{tile:"wallet",value:this.props.walletAmount[0].refundable_amount+this.props.walletAmount[0].non_refundable,prefix:r.a.createElement(va.a,{type:"wallet"})}))):null):r.a.createElement("a",{style:{padding:"8px",fontSize:"20px"},onClick:function(){return e.props.togglePatientListModal(!0)}},r.a.createElement("div",{style:{display:"inline"}},r.a.createElement(va.a,{type:"solution"})," \xa0 All Patient")),r.a.createElement(ha.a,{overlay:hi},r.a.createElement(da.a,{style:{float:"right",margin:"15px"}},r.a.createElement(va.a,{type:"setting"})," Settings ",r.a.createElement(va.a,{type:"down"}))),t.props.activePracticePermissions.AddPatient||t.props.allowAllPermissions?r.a.createElement(Da.b,{to:"/patients/profile/add"},r.a.createElement(da.a,{type:"primary",style:{float:"right",margin:"15px"}},r.a.createElement(va.a,{type:"plus"})," Add Patient")):null),r.a.createElement(nr.a,{width:1300,maskClosable:!1,centered:!0,footer:null,closable:!1,visible:this.props.listModalVisible,style:{height:"calc(100vh - 120px)"}},r.a.createElement(da.a,{icon:"close",type:"danger",shape:"circle",style:{position:"absolute",top:"-50px",right:0},onClick:function(){return e.props.togglePatientListModal(!1)}}),r.a.createElement(Zo,this.props)))}}]),t}(r.a.Component);function Fs(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var Ns=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).onChanged=function(e,t){a.setState(Object(u.a)({},e,t))},a.handleSubmit=function(e){var t=Object(f.a)(a);e.preventDefault(),a.props.form.validateFields((function(e,n){if(!e){var r=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Fs(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Fs(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},n,{medicine_till:Or()(n.medicine_till).format("YYYY-MM-DD"),follow_up_date:Or()(n.follow_up_date).format("YYYY-MM-DD")});t.setState({saving:!0});Ht(Kt(ce,[a.props.currentPatient.id]),r,(function(e){Qt(O,"Communication Settings Saved Successfully!!"),t.setState({saving:!1})}),(function(){t.setState({saving:!1})}))}}))},a.state={parient_communication_history:null,patientProfile:null,saving:!1},a.loadCommunication=a.loadCommunication.bind(Object(f.a)(a)),a.loadProfile=a.loadProfile.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.props.currentPatient&&(this.loadCommunication(),this.loadProfile())}},{key:"loadProfile",value:function(){var e=this;console.log("props",e.props.match.params.id),Ut(Kt(ce,[e.props.match.params.id]),(function(t){e.setState({patientProfile:t,loading:!1})}),(function(){e.setState({loading:!1})}))}},{key:"loadCommunication",value:function(){var e=this;Ut(Kt("users/sms_status_update/?user=%s",[this.props.currentPatient.user.id]),(function(t){e.setState({parient_communication_history:t.user_sms,loading:!1})}),(function(){e.setState({loading:!1})}))}},{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a={labelCol:{xs:{span:8},sm:{span:8},md:{span:8},lg:{span:8}},wrapperCol:{xs:{span:16},sm:{span:16},md:{span:16},lg:{span:16}}},n=[{title:"SENT TIME",dataIndex:"created_at",key:"created_at",render:function(e){return r.a.createElement("span",null,Or()(e).format("LLL"))}},{title:"MESSAGE",dataIndex:"body",key:"body"},{title:"TYPE",dataIndex:"sms_type",key:"sms_type"},{title:"MESSAGE STATUS",dataIndex:"status",key:"status"}],i=Ua.map((function(e){return r.a.createElement(br.a,{value:e.value},e.title)})),l=Wa.map((function(e){return r.a.createElement(br.a,{value:e.value},e.title)})),o=Ka.map((function(e){return r.a.createElement(br.a,{value:e.value},e.title)}));return r.a.createElement(vr.a,{onSubmit:this.handleSubmit},r.a.createElement(cr.a,{title:this.props.currentPatient?this.props.currentPatient.user.first_name+" Communication":"Patient Communication",extra:r.a.createElement(da.a,{type:"primary",htmlType:"submit",loading:this.state.saving},r.a.createElement(va.a,{type:"save"})," Save Communication Setting")},r.a.createElement(vr.a.Item,Object.assign({},a,{key:"sms_enable"})," ",r.a.createElement("label",null,r.a.createElement("span",{className:"ant-form-text"},"Enable SMS the patient"," : "),t("sms_enable",{initialValue:!!this.state.patientProfile&&this.state.patientProfile.sms_enable})(r.a.createElement(br.a.Group,{onChange:function(t){return e.onChanged("sms_enable",t.target.value)}},i)))),r.a.createElement(vr.a.Item,Object.assign({},a,{key:"email_enable"})," ",r.a.createElement("label",null," ",r.a.createElement("span",{className:"ant-form-text"},"Enable Email the patient"," : "),t("email_enable",{initialValue:!!this.state.patientProfile&&this.state.patientProfile.email_enable})(r.a.createElement(br.a.Group,{onChange:function(t){return e.onChanged("email_enable",t.target.value)}},l)))),r.a.createElement(vr.a.Item,Object.assign({},a,{key:"birthday_sms_email"})," ",r.a.createElement("label",null," ",r.a.createElement("span",{className:"ant-form-text"}," ","Send Birthday wish SMS & Email"," : "),t("birthday_sms_email",{initialValue:!!this.state.patientProfile&&this.state.patientProfile.birthday_sms_email})(r.a.createElement(br.a.Group,{onChange:function(t){return e.onChanged("birthday_sms_email",t.target.value)}},o)))),r.a.createElement(vr.a.Item,Object.assign({},a,{key:"medicine_till"})," ",r.a.createElement("label",null,r.a.createElement("span",{className:"ant-form-text"}," ","Medicine Till Date"," : "),t("medicine_till",{initialValue:this.state.patientProfile&&this.state.patientProfile.medicine_till?Or()(this.state.patientProfile.medicine_till):null})(r.a.createElement(yr.a,null)))),r.a.createElement(vr.a.Item,Object.assign({},a,{key:"medicine_till"})," ",r.a.createElement("label",null,r.a.createElement("span",{className:"ant-form-text"}," ","Next follow-up To"," : "),t("follow_up_date",{initialValue:this.state.patientProfile&&this.state.patientProfile.follow_up_date?Or()(this.state.patientProfile.follow_up_date):null})(r.a.createElement(yr.a,null)))),r.a.createElement("div",null,r.a.createElement(sr.a,{dashed:!0}),r.a.createElement("h2",null,"Past Communication"),r.a.createElement(ti,{loading:this.state.loading,columns:n,dataSource:this.state.parient_communication_history}))))}}]),t}(r.a.Component),Ys=vr.a.create()(Ns),Vs=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement(Ys,Object.assign({},this.state,this.props))}}]),t}(r.a.Component),Bs=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={redirect:!1,vitalSign:null,editVitalSign:a.props.editVitalSign?a.props.editVitalSign:null},a.changeRedirect=a.changeRedirect.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"render",value:function(){var e,t=this,a=[{label:"Pulse",key:"pulse",initialValue:this.props.editVitalSign?this.props.editVitalSign.pulse:null,type:I,follow:"BPM"},{label:"Temperature",key:"temperature",initialValue:this.props.editVitalSign?this.props.editVitalSign.temperature:null,type:I,follow:"Fahrenheit"},{label:"Temperature Part",key:"temperature_part",type:x,initialValue:this.props.editVitalSign?this.props.editVitalSign.temperature_part:null,options:[{label:"forehead",value:"forehead"},{label:"armpit",value:"armpit"},{label:"oral ",value:"oral"}]},{label:"Blood Pressure Up",key:"blood_pressure_up",initialValue:this.props.editVitalSign?this.props.editVitalSign.blood_pressure_up:null,type:I,follow:"mmhg"},{label:"Blood Pressure Down",key:"blood_pressure_down",initialValue:this.props.editVitalSign?this.props.editVitalSign.blood_pressure_down:null,type:I,follow:"mmhg"},{label:"Position",key:"position",type:x,initialValue:this.props.editVitalSign?this.props.editVitalSign.position:null,options:[{label:"standing",value:"standing"},{label:"sitting",value:"sitting"}]},{label:"Weight",key:"weight",initialValue:this.props.editVitalSign?this.props.editVitalSign.weight:null,type:I,follow:"kg."},{label:"Resp Rate",key:"resp_rate",initialValue:this.props.editVitalSign?this.props.editVitalSign.resp_rate:null,type:I,follow:"breaths/min"},{label:"Creatinine Level",key:"creatinine",initialValue:this.props.editVitalSign?this.props.editVitalSign.creatinine:null,type:I},{label:"Haemoglobin Level",key:"haemoglobin",initialValue:this.props.editVitalSign?this.props.editVitalSign.haemoglobin:null,type:I},{label:"Urea Level",key:"urea",initialValue:this.props.editVitalSign?this.props.editVitalSign.urea:null,type:I},{label:"Uric Acid Level",key:"uric_acid",initialValue:this.props.editVitalSign?this.props.editVitalSign.uric_acid:null,type:I},{label:"Date",key:"date",initialValue:this.props.editVitalSign&&this.props.editVitalSign.date?this.props.editVitalSign.date:Or()(),type:C,required:!0}],n=[{key:"patient",value:this.props.match.params.id},{key:"practice",value:this.props.active_practiceId}],i=this,l=vr.a.create()(Vr);this.state.editVitalSign&&(e={successFn:function(e){Qt(O,"success"),i.props.loadData&&i.props.loadData()},errorFn:function(){},action:Kt(_e,[this.props.match.params.id]),method:"post"},n.push({key:"id",value:this.state.editVitalSign.id}));var o={successFn:function(e){Qt(O,"success"),i.props.loadData&&i.props.loadData()},errorFn:function(){},action:Kt(_e,[this.props.match.params.id]),method:"post"};return r.a.createElement(rr.a,null,r.a.createElement(cr.a,null,r.a.createElement(y.b,{exact:!0,path:"/patient/:id/emr/vitalsigns/edit",render:function(){return t.state.editVitalSign?r.a.createElement(l,{defaultValues:n,title:"Edit Report Manual",changeRedirect:t.changeRedirect,formProp:e,fields:a}):r.a.createElement(y.a,{to:"/patients/profile"})}}),r.a.createElement(y.b,{exact:!0,path:"/patient/:id/emr/vitalsigns/add",render:function(){return r.a.createElement(l,{title:"Add Report Manual",defaultValues:n,changeRedirect:t.changeRedirect,formProp:o,fields:a})}})),this.state.redirect&&r.a.createElement(y.a,{to:"/patient/"+this.props.match.params.id+"/emr/vitalsigns"}))}}]),t}(r.a.Component),Hs=a(18);function qs(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var zs=nr.a.confirm,Gs=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).deleteVitalSign=function(e){var t=Object(f.a)(a);zs({title:"Are you sure to delete this item?",okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){var a=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?qs(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):qs(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,{is_active:!1});qt(Kt(_e,[e.patient]),a,(function(e){t.loadVitalsigns(),Qt(O,"Deleted Successfully!!")}),(function(){}))},onCancel:function(){console.log("Cancel")}})},a.editObject=function(e){if(a.setState({editVitalSign:e,loading:!1}),a.props.match.params.id){var t=a.props.match.params.id;a.props.history.push("/patient/"+t+"/emr/vitalsigns/edit")}else a.props.history.push("/patient/"+e.patient+"/emr/vitalsigns")},a.state={currentPatient:a.props.currentPatient,vitalsign:[],loading:!0},a.loadVitalsigns=a.loadVitalsigns.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadVitalsigns()}},{key:"loadVitalsigns",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this,a=function(e){t.setState((function(t){return 1==e.current?{vitalsign:Object(Oa.a)(e.results),next:e.next,loading:!1}:{vitalsign:[].concat(Object(Oa.a)(t.vitalsign),Object(Oa.a)(e.results)),next:e.next,loading:!1}}))},n=function(){},r={page:e,practice:this.props.active_practiceId};this.props.match.params.id&&(r.patient=this.props.match.params.id),this.props.showAllClinic&&this.props.match.params.id&&delete r.practice,Ut(_e,a,n,r)}},{key:"loadPDF",value:function(e){Ut(Kt("patients/vital_sign_pdf/?id=%s",[e]),(function(e){e.report&&window.open(V+e.report)}),(function(){}))}},{key:"render",value:function(){var e=this,t=this,a=[{title:"Date",dataIndex:"date",key:"date",render:function(e,t){return r.a.createElement("span",null,t.date?Or()(t.date).format("LL"):"")}},{title:"Temp(F)",key:"temperature",render:function(e,t){return r.a.createElement("span",null," ",t.temperature,r.a.createElement("br",null),",",t.temperature_part)}},{title:"Pulse (BPM)",dataIndex:"pulse",key:"pulse"},{title:"RR breaths/min",dataIndex:"resp_rate",key:"resp_rate"},{title:"SYS/DIA mmhg",key:"address",render:function(e,t){return r.a.createElement("span",null," ",t.blood_pressure_up,"/",t.blood_pressure_down,r.a.createElement("br",null),",",t.position)}},{title:"WEIGHT kg",dataIndex:"weight",key:"weight"},{title:"Creatinine Level",key:"creatinine",dataIndex:"creatinine"},{title:"Haemoglobin Level",key:"haemoglobin",dataIndex:"haemoglobin"},{title:"Urea Level",key:"urea",dataIndex:"urea"},{title:"Uric Acid Level",key:"uric_acid",dataIndex:"uric_acid"},{title:"Action",key:"action",render:function(a,n){return r.a.createElement("span",null,r.a.createElement("a",{onClick:function(){return e.loadPDF(n.id)}},"Print"),r.a.createElement(sr.a,{type:"vertical"}),r.a.createElement("a",{onClick:function(){return e.editObject(n)},disabled:n.practice!=t.props.active_practiceId},"Edit"),r.a.createElement(sr.a,{type:"vertical"}),r.a.createElement("a",{onClick:function(){return t.deleteVitalSign(n)},disabled:n.practice!=t.props.active_practiceId},"Delete"))}}];return this.props.match.params.id?r.a.createElement(y.d,null,r.a.createElement(y.b,{path:"/patient/:id/emr/vitalsigns/add",render:function(t){return r.a.createElement(Bs,Object.assign({},e.props,{key:e.state.currentPatient?e.state.currentPatient.id:null},e.state,t,{loadData:e.loadVitalsigns}))}}),r.a.createElement(y.b,{path:"/patient/:id/emr/vitalsigns/edit",render:function(t){return r.a.createElement(Bs,Object.assign({},e.props,{key:e.state.currentPatient?e.state.currentPatient.id:null},e.state,t,{loadData:e.loadVitalsigns}))}}),r.a.createElement(y.b,null,r.a.createElement(cr.a,{title:this.state.currentPatient?this.state.currentPatient.user.first_name+" Report Manual":"Patient Report Manual",extra:r.a.createElement(da.a.Group,null,r.a.createElement(Da.b,{to:"/patient/"+this.props.match.params.id+"/emr/vitalsigns/add"},r.a.createElement(da.a,{type:"primary"},r.a.createElement(va.a,{type:"plus"}),"Add")))},r.a.createElement(hr.a,null,r.a.createElement(hr.a.TabPane,{tab:"Charts",key:1,style:{margin:"auto"}},r.a.createElement(sr.a,null,"Pulse Chart (bpm)"),r.a.createElement("div",{style:{height:200}},r.a.createElement(Hs.k,null,r.a.createElement(Hs.d,{width:700,height:200,data:this.state.vitalsign.reverse(),margin:{top:10,right:30,left:0,bottom:0}},r.a.createElement(Hs.n,{dataKey:"date",tickFormatter:function(e){return Or()(e).format("LL")},tickCount:t.state.vitalsign.length}),r.a.createElement(Hs.o,{domain:[function(e){return Math.abs(e)},function(e){return(1.1*e).toFixed(0)}]}),r.a.createElement(Hs.b,{strokeDasharray:"3 3"}),r.a.createElement(Hs.m,{labelFormatter:function(e){return e&&Or()(e).isValid()?Or()(e).format("LL"):"--"}}),r.a.createElement(Hs.g,{type:"monotone",dataKey:"pulse",stroke:"#8884d8",fillOpacity:1,strokeWidth:4,fill:"url(#colorUv)"})))),r.a.createElement(sr.a,null,"Temperature (F)"),r.a.createElement("div",{style:{height:200}},r.a.createElement(Hs.k,null,r.a.createElement(Hs.d,{width:700,height:200,data:this.state.vitalsign.reverse(),margin:{top:10,right:30,left:0,bottom:0}},r.a.createElement(Hs.f,{verticalAlign:"top",height:36}),r.a.createElement("defs",null,r.a.createElement("linearGradient",{id:"colorUv",x1:"0",y1:"0",x2:"0",y2:"1"},r.a.createElement("stop",{offset:"5%",stopColor:"#82ca9d",stopOpacity:.8}),r.a.createElement("stop",{offset:"95%",stopColor:"#82ca9d",stopOpacity:0}))),r.a.createElement(Hs.n,{dataKey:"date",tickFormatter:function(e){return Or()(e).format("LL")},tickCount:this.state.vitalsign.length}),r.a.createElement(Hs.o,{domain:[function(e){return Math.abs(e)},function(e){return(1.1*e).toFixed(0)}]}),r.a.createElement(Hs.b,{strokeDasharray:"3 3"}),r.a.createElement(Hs.m,{labelFormatter:function(e){return e&&Or()(e).isValid()?Or()(e).format("LL"):"--"}}),r.a.createElement(Hs.g,{type:"monotone",dataKey:"temperature",stroke:"#82ca9d",fillOpacity:1,strokeWidth:4,fill:"url(#colorUv)"})))),r.a.createElement(sr.a,null,"Blood Pressure (mmhg)"),r.a.createElement("div",{style:{height:200}},r.a.createElement(Hs.k,null,r.a.createElement(Hs.d,{width:700,height:200,data:this.state.vitalsign.reverse(),margin:{top:10,right:30,left:0,bottom:0}},r.a.createElement("defs",null,r.a.createElement("linearGradient",{id:"colorUv",x1:"0",y1:"0",x2:"0",y2:"1"},r.a.createElement("stop",{offset:"5%",stopColor:"#ffc658",stopOpacity:.8}),r.a.createElement("stop",{offset:"95%",stopColor:"#ffc658",stopOpacity:0}))),r.a.createElement(Hs.n,{dataKey:"date",tickFormatter:function(e){return Or()(e).format("LL")},tickCount:this.state.vitalsign.length}),r.a.createElement(Hs.o,{domain:[function(e){return Math.abs(e)},function(e){return(1.1*e).toFixed(0)}]}),r.a.createElement(Hs.b,{strokeDasharray:"3 3"}),r.a.createElement(Hs.m,{labelFormatter:function(e){return e&&Or()(e).isValid()?Or()(e).format("LL"):"--"}}),r.a.createElement(Hs.g,{type:"monotone",dataKey:"blood_pressure_up",stroke:"#ffc658",fillOpacity:1,strokeWidth:4,fill:"url(#colorUv)"}),r.a.createElement(Hs.g,{type:"monotone",dataKey:"blood_pressure_down",stroke:"#82ca9d",fillOpacity:1,strokeWidth:4,fill:"url(#colorUv)"})))),r.a.createElement(sr.a,null,"Weight (kg)"),r.a.createElement("div",{style:{height:200}},r.a.createElement(Hs.k,null,r.a.createElement(Hs.d,{width:700,height:200,data:this.state.vitalsign.reverse(),margin:{top:10,right:30,left:0,bottom:0}},r.a.createElement("defs",null,r.a.createElement("linearGradient",{id:"colorUv",x1:"0",y1:"0",x2:"0",y2:"1"},r.a.createElement("stop",{offset:"5%",stopColor:"#8884d8",stopOpacity:.8}),r.a.createElement("stop",{offset:"95%",stopColor:"#8884d8",stopOpacity:0})),r.a.createElement("linearGradient",{id:"colorPv",x1:"0",y1:"0",x2:"0",y2:"1"},r.a.createElement("stop",{offset:"5%",stopColor:"#82ca9d",stopOpacity:.8}),r.a.createElement("stop",{offset:"95%",stopColor:"#82ca9d",stopOpacity:0}))),r.a.createElement(Hs.n,{dataKey:"date",tickFormatter:function(e){return Or()(e).format("LL")},tickCount:this.state.vitalsign.length}),r.a.createElement(Hs.o,{domain:[function(e){return Math.abs(e)},function(e){return(1.1*e).toFixed(0)}]}),r.a.createElement(Hs.b,{strokeDasharray:"3 3"}),r.a.createElement(Hs.m,{labelFormatter:function(e){return e&&Or()(e).isValid()?Or()(e).format("LL"):"--"}}),r.a.createElement(Hs.g,{type:"monotone",dataKey:"weight",stroke:"#8884d8",fillOpacity:1,strokeWidth:4,fill:"url(#colorUv)"})))),r.a.createElement(sr.a,null,"Respiratory Rate (breaths/min)"),r.a.createElement("div",{style:{height:200}},r.a.createElement(Hs.k,null,r.a.createElement(Hs.d,{width:700,height:200,data:this.state.vitalsign.reverse(),margin:{top:10,right:30,left:0,bottom:0}},r.a.createElement("defs",null,r.a.createElement("linearGradient",{id:"colorUv",x1:"0",y1:"0",x2:"0",y2:"1"},r.a.createElement("stop",{offset:"5%",stopColor:"#82ca9d",stopOpacity:.8}),r.a.createElement("stop",{offset:"95%",stopColor:"#82ca9d",stopOpacity:0})),r.a.createElement("linearGradient",{id:"colorPv",x1:"0",y1:"0",x2:"0",y2:"1"},r.a.createElement("stop",{offset:"5%",stopColor:"#82ca9d",stopOpacity:.8}),r.a.createElement("stop",{offset:"95%",stopColor:"#82ca9d",stopOpacity:0}))),r.a.createElement(Hs.n,{dataKey:"date",tickFormatter:function(e){return Or()(e).format("LL")},tickCount:this.state.vitalsign.length}),r.a.createElement(Hs.o,{domain:[function(e){return Math.abs(e)},function(e){return(1.1*e).toFixed(0)}]}),r.a.createElement(Hs.b,{strokeDasharray:"3 3"}),r.a.createElement(Hs.m,{labelFormatter:function(e){return e&&Or()(e).isValid()?Or()(e).format("LL"):"--"}}),r.a.createElement(Hs.g,{type:"monotone",dataKey:"resp_rate",stroke:"#82ca9d",fillOpacity:1,strokeWidth:4,fill:"url(#colorUv)"})))),r.a.createElement(sr.a,null,"Creatinine Level"),r.a.createElement("div",{style:{height:200}},r.a.createElement(Hs.k,null,r.a.createElement(Hs.d,{width:700,height:200,data:this.state.vitalsign.reverse(),margin:{top:10,right:30,left:0,bottom:0}},r.a.createElement("defs",null,r.a.createElement("linearGradient",{id:"colorUv",x1:"0",y1:"0",x2:"0",y2:"1"},r.a.createElement("stop",{offset:"5%",stopColor:"#82ca9d",stopOpacity:.8}),r.a.createElement("stop",{offset:"95%",stopColor:"#82ca9d",stopOpacity:0})),r.a.createElement("linearGradient",{id:"colorPv",x1:"0",y1:"0",x2:"0",y2:"1"},r.a.createElement("stop",{offset:"5%",stopColor:"#82ca9d",stopOpacity:.8}),r.a.createElement("stop",{offset:"95%",stopColor:"#82ca9d",stopOpacity:0}))),r.a.createElement(Hs.n,{dataKey:"date",tickFormatter:function(e){return Or()(e).format("LL")},tickCount:this.state.vitalsign.length}),r.a.createElement(Hs.o,{domain:[function(e){return Math.abs(e)},function(e){return(1.1*e).toFixed(0)}]}),r.a.createElement(Hs.b,{strokeDasharray:"3 3"}),r.a.createElement(Hs.m,{labelFormatter:function(e){return e&&Or()(e).isValid()?Or()(e).format("LL"):"--"}}),r.a.createElement(Hs.g,{type:"monotone",dataKey:"creatinine",stroke:"#82ca9d",fillOpacity:1,strokeWidth:4,fill:"url(#colorUv)"})))),r.a.createElement(sr.a,null,"Haemoglobin Level"),r.a.createElement("div",{style:{height:200}},r.a.createElement(Hs.k,null,r.a.createElement(Hs.d,{width:700,height:200,data:this.state.vitalsign.reverse(),margin:{top:10,right:30,left:0,bottom:0}},r.a.createElement("defs",null,r.a.createElement("linearGradient",{id:"colorUv",x1:"0",y1:"0",x2:"0",y2:"1"},r.a.createElement("stop",{offset:"5%",stopColor:"#82ca9d",stopOpacity:.8}),r.a.createElement("stop",{offset:"95%",stopColor:"#82ca9d",stopOpacity:0})),r.a.createElement("linearGradient",{id:"colorPv",x1:"0",y1:"0",x2:"0",y2:"1"},r.a.createElement("stop",{offset:"5%",stopColor:"#82ca9d",stopOpacity:.8}),r.a.createElement("stop",{offset:"95%",stopColor:"#82ca9d",stopOpacity:0}))),r.a.createElement(Hs.n,{dataKey:"date",tickFormatter:function(e){return Or()(e).format("LL")},tickCount:this.state.vitalsign.length}),r.a.createElement(Hs.o,{domain:[function(e){return Math.abs(e)},function(e){return(1.1*e).toFixed(0)}]}),r.a.createElement(Hs.b,{strokeDasharray:"3 3"}),r.a.createElement(Hs.m,{labelFormatter:function(e){return e&&Or()(e).isValid()?Or()(e).format("LL"):"--"}}),r.a.createElement(Hs.g,{type:"monotone",dataKey:"haemoglobin",stroke:"#82ca9d",fillOpacity:1,strokeWidth:4,fill:"url(#colorUv)"})))),r.a.createElement(sr.a,null,"Urea Level"),r.a.createElement("div",{style:{height:200}},r.a.createElement(Hs.k,null,r.a.createElement(Hs.d,{width:700,height:200,data:this.state.vitalsign.reverse(),margin:{top:10,right:30,left:0,bottom:0}},r.a.createElement("defs",null,r.a.createElement("linearGradient",{id:"colorUv",x1:"0",y1:"0",x2:"0",y2:"1"},r.a.createElement("stop",{offset:"5%",stopColor:"#82ca9d",stopOpacity:.8}),r.a.createElement("stop",{offset:"95%",stopColor:"#82ca9d",stopOpacity:0})),r.a.createElement("linearGradient",{id:"colorPv",x1:"0",y1:"0",x2:"0",y2:"1"},r.a.createElement("stop",{offset:"5%",stopColor:"#82ca9d",stopOpacity:.8}),r.a.createElement("stop",{offset:"95%",stopColor:"#82ca9d",stopOpacity:0}))),r.a.createElement(Hs.n,{dataKey:"date",tickFormatter:function(e){return Or()(e).format("LL")},tickCount:this.state.vitalsign.length}),r.a.createElement(Hs.o,{domain:[function(e){return Math.abs(e)},function(e){return(1.1*e).toFixed(0)}]}),r.a.createElement(Hs.b,{strokeDasharray:"3 3"}),r.a.createElement(Hs.m,{labelFormatter:function(e){return e&&Or()(e).isValid()?Or()(e).format("LL"):"--"}}),r.a.createElement(Hs.g,{type:"monotone",dataKey:"urea",stroke:"#82ca9d",fillOpacity:1,strokeWidth:4,fill:"url(#colorUv)"})))),r.a.createElement(sr.a,null,"Uric Acid Level"),r.a.createElement("div",{style:{height:200}},r.a.createElement(Hs.k,null,r.a.createElement(Hs.d,{width:700,height:200,data:this.state.vitalsign.reverse(),margin:{top:10,right:30,left:0,bottom:0}},r.a.createElement("defs",null,r.a.createElement("linearGradient",{id:"colorUv",x1:"0",y1:"0",x2:"0",y2:"1"},r.a.createElement("stop",{offset:"5%",stopColor:"#82ca9d",stopOpacity:.8}),r.a.createElement("stop",{offset:"95%",stopColor:"#82ca9d",stopOpacity:0})),r.a.createElement("linearGradient",{id:"colorPv",x1:"0",y1:"0",x2:"0",y2:"1"},r.a.createElement("stop",{offset:"5%",stopColor:"#82ca9d",stopOpacity:.8}),r.a.createElement("stop",{offset:"95%",stopColor:"#82ca9d",stopOpacity:0}))),r.a.createElement(Hs.n,{dataKey:"date",tickFormatter:function(e){return Or()(e).format("LL")},tickCount:this.state.vitalsign.length}),r.a.createElement(Hs.o,{domain:[function(e){return Math.abs(e)},function(e){return(1.1*e).toFixed(0)}]}),r.a.createElement(Hs.b,{strokeDasharray:"3 3"}),r.a.createElement(Hs.m,{labelFormatter:function(e){return e&&Or()(e).isValid()?Or()(e).format("LL"):"--"}}),r.a.createElement(Hs.g,{type:"monotone",dataKey:"uric_acid",stroke:"#82ca9d",fillOpacity:1,strokeWidth:4,fill:"url(#colorUv)"}))))),r.a.createElement(hr.a.TabPane,{tab:"Details",key:2},r.a.createElement(ti,{columns:a,pagination:!1,dataSource:this.state.vitalsign}),r.a.createElement(wi,{loaderFunction:function(){return e.loadInvoices(t.state.next)},loading:this.state.loading,hidden:!this.state.next})))))):r.a.createElement("div",null,r.a.createElement(cr.a,{bodyStyle:{padding:0},title:this.state.currentPatient?this.state.currentPatient.user.first_name+" Report Manual":"Patients Report Manual",extra:r.a.createElement(da.a.Group,null,r.a.createElement(da.a,{type:"primary",onClick:function(){return t.props.togglePatientListModal(!0)}},r.a.createElement(va.a,{type:"plus"}),"Add"))}),this.state.vitalsign.map((function(e){return r.a.createElement("div",null,r.a.createElement(cr.a,{style:{marginTop:10},title:r.a.createElement("small",null,e.date?Or()(e.date).format("ll"):null,r.a.createElement(Da.b,{to:"/patient/"+e.patient_data.id+"/emr/vitalsigns"},"\xa0\xa0 ",e.patient_data.user?e.patient_data.user.first_name:null," (ID: ",e.patient_data.custom_id?e.patient_data.custom_id:e.patient_data.id,")\xa0"),r.a.createElement("span",null,", ",e.patient_data.gender)),bodyStyle:{padding:0}},r.a.createElement(lr.a,{columns:a,pagination:!1,dataSource:[e],footer:function(){return function(e){if(e)return console.log(e),r.a.createElement("div",null,e.doctor?r.a.createElement(fa.a,{color:e.doctor?e.doctor.calendar_colour:null},r.a.createElement("b",null,"prescribed by  "+e.doctor.user.first_name," ")):null,e.practice_data?r.a.createElement(fa.a,{style:{float:"right"}},r.a.createElement(ms.a,{title:"Practice Name"},r.a.createElement("b",null,e.practice_data.name," "))):null);return null}(e)}})))})),r.a.createElement(wi,{loaderFunction:function(){return e.loadVitalsigns(t.state.next)},loading:this.state.loading,hidden:!this.state.next}))}}]),t}(r.a.Component);var Us=a(71);function Ws(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ks(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ws(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ws(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Qs=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).calculateItem=function(e){var t=a.props.form.getFieldsValue;console.log(t()),a.setState((function(e){Object(Oa.a)(e.tableFormValues).forEach((function(e){}))}))},a.addNotes=function(e,t){a.setState((function(a){return{addNotes:Ks({},a.addNotes,Object(u.a)({},e,!!t))}}))},a.removeTreatment=function(e){a.setState((function(t){return{tableFormValues:Object(Oa.a)(Object(Us.remove)(t.tableFormValues,(function(t){return t._id!=e})))}}))},a.add=function(e){Object(f.a)(a);a.setState((function(t){var a=Math.random().toFixed(7);return{addNotes:Ks({},t.addNotes,Object(u.a)({},a,!!e.default_notes)),tableFormValues:[Ks({},e,{_id:a})].concat(Object(Oa.a)(t.tableFormValues))}}),(function(){}))},a.selectDoctor=function(e){a.setState({selectedDoctor:e})},a.selectedDate=function(e){a.setState({selectedDate:e})},a.handleSubmit=function(e){var t=Object(f.a)(a);e.preventDefault(),a.props.form.validateFields((function(e,a){if(!e){console.log("Received values of form: ",a);var n={treatment_plans:[],patient:t.props.match.params.id,doctor:t.state.selectedDoctor.id,date:t.state.selectedDate&&Or()(t.state.selectedDate).isValid()?t.state.selectedDate.format("YYYY-MM-DD"):null,practice:t.props.active_practiceId};t.props.editId&&(n.id=t.props.editTreatmentPlan.id),t.state.tableFormValues.forEach((function(e){console.log(e),e.quantity=a.quantity[e._id],e.cost=a.cost[e._id],e.discount=a.discount[e._id],a.notes&&(e.notes=a.notes[e._id]);var t={procedure:e.id,cost:e.cost,quantity:e.quantity,margin:e.margin,default_notes:e.notes,is_active:!0,is_completed:!0,discount:e.discount,discount_type:"%"};n.treatment_plans.push(t)}));qt(Kt(we,[t.props.match.params.id]),n,(function(e){Qt("Inventory updated successfully"),t.props.loadData&&t.props.loadData();var a="/patient/"+t.props.match.params.id+"/emr/workdone";t.props.history.push(a)}),(function(){}))}}))},a.searchValues=function(e){var t=Object(f.a)(a);return a.setState((function(t){return{searchString:e}}),(function(){t.loadProcedures()})),!1},a.state={loadingProcedures:!0,procedure_category:[],tableFormValues:[],addNotes:{},practiceDoctors:[],selectedDoctor:{},selectedDate:Or()()},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.props.editId&&this.setState((function(e){var t=[];return this.props.editTreatmentPlan.treatment_plans.forEach((function(e){var a=Math.random().toFixed(7);t.push(Ks({},e,{},e.procedure,{_id:a}))})),Ks({},this.props.editTreatmentPlan,{tableFormValues:t,selectedDate:Or()(this.props.editTreatmentPlan.date),selectedDoctor:this.props.editTreatmentPlan.doctor})})),this.loadProcedures(),mi(this)}},{key:"loadProcedures",value:function(){var e=this,t={};this.state.searchString&&(t.name=this.state.searchString),e.setState({loadingProcedures:!0});Ut(Kt(ae,[this.props.active_practiceId]),(function(a){t.name&&e.state.searchString!=t.name||e.setState({loadingProcedures:!1,filteredItems:a.results})}),(function(){e.setState({loadingProcedures:!1})}),t)}},{key:"render",value:function(){var e=this,t=this,a=this.props.form,n=a.getFieldDecorator,i=(a.getFieldValue,a.getFieldsValue,{labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}}),l=[{title:"Treatments",dataIndex:"name",key:"name",render:function(t,a){return r.a.createElement("span",null,r.a.createElement("b",null,t),r.a.createElement("br",null),e.state.addNotes[a._id]||e.props.editId?r.a.createElement(vr.a.Item,Object.assign({key:"default_notes[".concat(a._id,"]")},i),n("notes[".concat(a._id,"]"),{validateTrigger:["onChange","onBlur"],rules:[{message:"This field is required."}],initialValue:a.default_notes})(r.a.createElement(ma.a.TextArea,{min:0,placeholder:"Notes..."}))):r.a.createElement("a",{onClick:function(){return e.addNotes(a._id,!0)}},"+ Add Note"))}},{title:"Quantity",dataIndex:"quantity",key:"quantity",render:function(t,a){return r.a.createElement(vr.a.Item,Object.assign({key:"quantity[".concat(a._id,"]")},i),n("quantity[".concat(a._id,"]"),{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"This field is required."}],initialValue:a.quantity})(r.a.createElement(Er.a,{min:0,placeholder:"Quantity",size:"small",onChange:function(){return e.calculateItem(a._id)}})))}},{title:"Cost",dataIndex:"cost",key:"cost",render:function(t,a){return r.a.createElement(vr.a.Item,Object.assign({key:"cost[".concat(a._id,"]")},i),n("cost[".concat(a._id,"]"),{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"This field is required."}],initialValue:a.cost})(r.a.createElement(Er.a,{min:0,placeholder:"Cost",size:"small",onChange:function(){return e.calculateItem(a._id)}})))}},{title:"Discount",dataIndex:"discount",key:"discount",render:function(t,a){return r.a.createElement(vr.a.Item,Object.assign({key:"discount[".concat(a._id,"]")},i),n("discount[".concat(a._id,"]"),{validateTrigger:["onChange","onBlur"],rules:[{message:"This field is required."}]})(r.a.createElement(Er.a,{min:0,placeholder:"Discount",size:"small",onChange:function(){return e.calculateItem(a._id)}}))," %")}},{title:"Total",dataIndex:"total",key:"total",render:function(t,a){return r.a.createElement("span",null,t,r.a.createElement(da.a,{icon:"close",onClick:function(){return e.removeTreatment(a._id)},type:"danger",shape:"circle",size:"small"}))}}];return r.a.createElement("div",null,r.a.createElement(cr.a,{title:"Completed Procedures"},r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:17},r.a.createElement(vr.a,{onSubmit:this.handleSubmit},r.a.createElement(lr.a,{pagination:!1,bordered:!0,dataSource:this.state.tableFormValues,columns:l}),r.a.createElement(s.a,{offsetBottom:0},r.a.createElement(cr.a,null,r.a.createElement("span",null,"by \xa0\xa0"),r.a.createElement(ha.a,{placement:"topCenter",overlay:r.a.createElement(_a.a,null,this.state.practiceDoctors.map((function(t){return r.a.createElement(_a.a.Item,{key:"0"},r.a.createElement("a",{onClick:function(){return e.selectDoctor(t)}},t.user.first_name))}))),trigger:["click"]},r.a.createElement("a",{className:"ant-dropdown-link",href:"#"},r.a.createElement("b",null,this.state.selectedDoctor.user?this.state.selectedDoctor.user.first_name:"No DOCTORS Found"))),r.a.createElement("span",null," \xa0\xa0on\xa0\xa0"),r.a.createElement(yr.a,{value:this.state.selectedDate,onChange:function(t){return e.selectedDate(t)},format:"DD-MM-YYYY",allowClear:!1}),r.a.createElement(vr.a.Item,Object.assign({},{labelCol:{xs:{span:24},sm:{span:24}},wrapperCol:{xs:{span:24},sm:{span:24}}},{style:{marginBottom:0,float:"right"}}),r.a.createElement(da.a,{type:"primary",htmlType:"submit",style:{margin:5}},"Save Treatment Plan"),t.props.history?r.a.createElement(da.a,{style:{margin:5,float:"right"},onClick:function(){return t.props.history.goBack()}},"Cancel"):null))),r.a.createElement("div",{ref:function(e){t.bottomPoint=e}}))),r.a.createElement(ir.a,{span:7},r.a.createElement(s.a,{offsetTop:0},r.a.createElement("div",{style:{backgroundColor:"#ddd",padding:8}},r.a.createElement(ma.a.Search,{placeholder:"Search in plans ...",onChange:function(t){return e.searchValues(t.target.value)}})),r.a.createElement(Ea.a,{size:"small",loading:this.state.loadingProcedures,style:{maxHeight:"100vh",overflowX:"scroll"},itemLayout:"horizontal",dataSource:this.state.filteredItems,renderItem:function(t){return r.a.createElement(Ea.a.Item,{onClick:function(){return e.add(t)}},r.a.createElement(Ea.a.Item.Meta,{title:t.name}))}}))))))}}]),t}(r.a.Component),Zs=vr.a.create()(Qs),Xs=nr.a.confirm,Js=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={currentPatient:a.props.currentPatient,active_practiceId:a.props.active_practiceId,treatmentPlans:[],procedure_category:null,completedTreatmentPlans:[],incompletedTreatmentPlans:[],productMargin:[],loading:!0},a.loadTreatmentPlans=a.loadTreatmentPlans.bind(Object(f.a)(a)),a.editTreatmentPlanData=a.editTreatmentPlanData.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadTreatmentPlans(),this.loadProductMargin()}},{key:"loadProductMargin",value:function(){var e=this;Ut("product_margin/",(function(t){e.setState({productMargin:t,loading:!1})}),(function(){e.setState({loading:!1})}))}},{key:"loadTreatmentPlans",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=[],a=this,n=function(e){a.setState((function(t){return 1==e.current?{treatmentPlans:Object(Oa.a)(e.results),next:e.next,loading:!1}:{treatmentPlans:[].concat(Object(Oa.a)(t.treatmentPlans),Object(Oa.a)(e.results)),next:e.next,loading:!1}})),e.results.forEach((function(e){e.is_completed||t.push(e)})),a.setState((function(e){return{incompletedTreatmentPlans:[].concat(Object(Oa.a)(e.incompletedTreatmentPlans),t),loading:!1}}))},r=function(){a.setState({loading:!1})},i={page:e,practice:this.props.active_practiceId,complete:!0};this.props.match.params.id&&(i.patient=this.props.match.params.id),this.props.showAllClinic&&this.props.match.params.id&&delete i.practice,Ut(we,n,r,i)}},{key:"editTreatmentPlanData",value:function(e){this.setState({editTreatmentPlan:e});var t=this.props.match.params.id;this.props.history.push("/patient/"+t+"/emr/workdone/edit")}},{key:"deleteTreatmentPlans",value:function(e){var t=this;Xs({title:"Are you sure to delete this item?",okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){var a={id:e.id,patient:e.patient.id,is_active:!1};qt(Kt(we,[t.props.match.params.id],null),a,(function(e){Qt(O,"Completed Procedure Deleted Successfully!"),t.loadTreatmentPlans()}),(function(){}))},onCancel:function(){console.log("Cancel")}})}},{key:"loadPDF",value:function(e){Ut(Kt("patients/treatment_plan_pdf/?id=%s",[e]),(function(e){e.report&&window.open(V+e.report)}),(function(){}))}},{key:"render",value:function(){var e=this,t=this,a=[{title:"",key:"is_completed",render:function(e,t){return t.is_completed?r.a.createElement(va.a,{type:"check-circle",theme:"twoTone",style:{marginLeft:"8px",fontSize:"20px"}}):null}},{title:"Procedure",key:"procedure.name",dataIndex:"procedure.name"},{title:"Quantity",dataIndex:"quantity",initialValue:this.state.editFields?this.state.editFields.quantity:null,key:"quantity"},{title:"Discount",dataIndex:"discount",key:"discount"},{title:"Cost per  Unit",dataIndex:"cost",key:"cost"},{title:"Notes",dataIndex:"default_notes",key:"default_notes"}];return this.props.match.params.id?r.a.createElement("div",null,r.a.createElement(y.d,null,r.a.createElement(y.b,{exact:!0,path:"/patient/:id/emr/workdone/add",render:function(a){return r.a.createElement(Zs,Object.assign({},e.state,t.props,a,{loadData:e.loadTreatmentPlans}))}}),r.a.createElement(y.b,{exact:!0,path:"/patient/:id/emr/workdone/edit",render:function(a){return e.state.editTreatmentPlan?r.a.createElement(Zs,Object.assign({},e.state,a,t.props,{editId:e.state.editTreatmentPlan.id,loadData:e.loadTreatmentPlans})):r.a.createElement(y.a,{to:"/patient/"+e.props.match.params.id+"/emr/workdone"})}}),r.a.createElement(y.b,null,r.a.createElement("div",null,r.a.createElement(cr.a,{bodyStyle:{padding:0},title:this.state.currentPatient?this.state.currentPatient.user.first_name+" Completed Procedures":"Completed Procedures ",extra:r.a.createElement(da.a.Group,null,r.a.createElement(Da.b,{to:"/patient/"+this.props.match.params.id+"/emr/workdone/add"},r.a.createElement(da.a,null,r.a.createElement(va.a,{type:"plus"}),"Add")))}),this.state.treatmentPlans.map((function(n){return r.a.createElement(cr.a,{bodyStyle:{padding:0},style:{marginTop:15}},r.a.createElement("div",{style:{padding:16}},r.a.createElement("h4",null,n.date?Or()(n.date).format("ll"):null,r.a.createElement(ha.a.Button,{size:"small",style:{float:"right"},overlay:r.a.createElement(_a.a,null,r.a.createElement(_a.a.Item,{key:"1",onClick:function(){return t.editTreatmentPlanData(n)},disabled:n.practice&&n.practice.id!=e.props.active_practiceId},r.a.createElement(va.a,{type:"edit"}),"Edit"),r.a.createElement(_a.a.Item,{key:"2",onClick:function(){return t.deleteTreatmentPlans(n)},disabled:n.practice&&n.practice.id!=e.props.active_practiceId},r.a.createElement(va.a,{type:"delete"}),"Delete"),r.a.createElement(_a.a.Divider,null),r.a.createElement(_a.a.Item,{key:"3"},r.a.createElement(Da.b,{to:"/patient/"+n.patient+"/emr/timeline"},r.a.createElement(va.a,{type:"clock-circle"}),"\xa0 Patient Timeline")))},r.a.createElement("a",{onClick:function(){return e.loadPDF(n.id)}},r.a.createElement(va.a,{type:"printer"}))))),r.a.createElement(lr.a,{loading:e.state.loading,columns:a,dataSource:n.treatment_plans,footer:function(){return $s(n)},pagination:!1,key:n.id}))})),r.a.createElement(wi,{loaderFunction:function(){return e.loadTreatmentPlans(t.state.next)},loading:this.state.loading,hidden:!this.state.next}))))):r.a.createElement("div",null,r.a.createElement(cr.a,{bodyStyle:{padding:0},title:this.state.currentPatient?this.state.currentPatient.user.first_name+" Completed Procedures":"Completed Procedures ",extra:r.a.createElement(da.a.Group,null,r.a.createElement(da.a,{onClick:function(){return e.props.togglePatientListModal(!0)}},r.a.createElement(va.a,{type:"plus"}),"Add"))}),this.state.treatmentPlans.map((function(n){return r.a.createElement(cr.a,{bodyStyle:{padding:0},key:n.id,style:{marginTop:15}},r.a.createElement("div",{style:{padding:16}},r.a.createElement("h4",null,n.date?Or()(n.date).format("ll"):null,r.a.createElement(Da.b,{to:"/patient/"+n.patient.id+"/emr/workdone"},"\xa0\xa0 ",n.patient.user?n.patient.user.first_name:null," (ID: ",n.patient.custom_id?n.patient.custom_id:n.patient.id,")\xa0"),r.a.createElement("span",null,", ",n.patient.gender),r.a.createElement(ha.a.Button,{size:"small",style:{float:"right"},overlay:r.a.createElement(_a.a,null,r.a.createElement(_a.a.Item,{key:"1",disabled:n.practice&&n.practice.id!=e.props.active_practiceId},r.a.createElement(Da.b,{to:"/patient/"+n.patient.id+"/emr/workdone/edit"},r.a.createElement(va.a,{type:"edit"}),"\xa0 Edit")),r.a.createElement(_a.a.Item,{key:"2",onClick:function(){return t.deleteTreatmentPlans(n)},disabled:n.practice&&n.practice.id!=e.props.active_practiceId},r.a.createElement(va.a,{type:"delete"}),"Delete"),r.a.createElement(_a.a.Divider,null),r.a.createElement(_a.a.Item,{key:"3"},r.a.createElement(Da.b,{to:"/patient/"+n.patient.id+"/emr/timeline"},r.a.createElement(va.a,{type:"clock-circle"}),"\xa0 Patient Timeline")))},r.a.createElement(va.a,{type:"printer"})))),r.a.createElement(lr.a,{loading:e.state.loading,columns:a,dataSource:n.treatment_plans,footer:function(){return $s(n)},pagination:!1,key:n.id}))})),r.a.createElement(wi,{loaderFunction:function(){return e.loadTreatmentPlans(t.state.next)},loading:this.state.loading,hidden:!this.state.next}))}}]),t}(r.a.Component);function $s(e){return e?r.a.createElement("div",null,e.doctor?r.a.createElement(fa.a,{color:e.doctor?e.doctor.calendar_colour:null},r.a.createElement("b",null,"Completed by  "+e.doctor.user.first_name," ")):null,e.practice?r.a.createElement(fa.a,{style:{float:"right"}},r.a.createElement(ms.a,{title:"Practice Name"},r.a.createElement("b",null,e.practice.name," "))):null):null}function ec(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function tc(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ec(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ec(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ac=hr.a.TabPane,nc=0,rc=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).addInstructions=function(e,t){a.setState((function(a){return{addInstructions:tc({},a.addInstructions,Object(u.a)({},e,!!t))}}))},a.changeDurationUnits=function(e,t){a.setState((function(a){return{changeDurationUnits:tc({},a.changeDurationUnits,Object(u.a)({},e,!!t))}}))},a.removeDrug=function(e){a.setState((function(t){return{formDrugList:Object(Oa.a)(Object(Us.remove)(t.formDrugList,(function(t){return t._id!=e})))}}))},a.removeLabs=function(e,t){a.setState((function(a){return{addedLabs:tc({},a.addedLabs,Object(u.a)({},t.id,!1)),formLabList:Object(Oa.a)(Object(Us.remove)(a.formLabList,(function(t){return t._id!=e})))}}))},a.addLabs=function(e){a.setState((function(t){var a=Math.random().toFixed(7);return console.log("LAb state",t),t.addedLabs[e.id]?(Qt(D,"Item Already Added"),!1):{addedLabs:tc({},t.addedLabs,Object(u.a)({},e.id,!0)),formLabList:[].concat(Object(Oa.a)(t.formLabList),[tc({},e,{_id:a})])}}))},a.addTemplate=function(e){a.setState((function(t){Math.random().toFixed(7);if(t.addTemplate[e.id])return Qt(D,"Item Already Added"),!1;var a=Object(Oa.a)(t.formLabList),n=tc({},t.addedLabs);e.labs&&e.labs.forEach((function(e){var t=Math.random().toFixed(7);a.push(tc({},e,{_id:t})),n=tc({},n,Object(u.a)({},e.id,!0))}));var r=Object(Oa.a)(t.formDrugList),i=tc({},t.addedDrugs);return e.drugs&&e.drugs.forEach((function(t){var a=Math.random().toFixed(7);r.push(tc({},t,{_id:a,advice_data:e.advice_data})),i=tc({},i,Object(u.a)({},t.id,!0))})),{addedLabs:n,formLabList:a,addedDrugs:i,formDrugList:r}}))},a.removeTemplates=function(e,t){a.setState((function(a){return{addTemplate:tc({},a.addTemplate,Object(u.a)({},t.id,!1)),formTemplateList:Object(Oa.a)(Object(Us.remove)(a.formTemplateList,(function(t){return t._id!=e})))}}))},a.handleSubmit=function(e){var t=Object(f.a)(a);e.preventDefault(),a.props.form.validateFields((function(e,a){if(console.log("value form",a),!e){var n=tc({},a,{drug:[],labs:[],advice_data:[],patient:t.props.match.params.id,practice:t.props.active_practiceId});t.state.formDrugList.forEach((function(e){console.log("advice search",e),e.dosage=a.does[e._id],e.duration_type=a.duration_unit[e._id],e.duration=a.duration[e._id],e.frequency=a.does_frequency[e._id],a.instruction&&(e.instruction=a.instruction[e._id]),a.food_time[e._id]?(e.after_food=!0,e.before_food=!1):(e.before_food=!0,e.after_food=!1),e.advice_data&&e.advice_data.map((function(e){n.advice_data.push(e.id)}));var r={inventory:e.id,name:e.name,dosage:e.dosage,frequency:e.frequency,duration:e.duration,duration_type:e.duration_type,instruction:e.instruction,before_food:e.before_food,after_food:e.after_food,advice_data:t.state.prescriptionTemplate.advice_data,is_active:!0};n.drug.push(r)})),t.state.formLabList.forEach((function(e){n.labs.push(e.id)}));console.log("final",n),qt(Kt(Be,[t.props.active_practiceId]),n,(function(e){t.props.history.goBack()}),(function(){}))}}))},a.handleAddFields=function(){var e=a.props.form,t=e.getFieldValue("keys").concat(nc++);e.setFieldsValue({keys:t})},a.remove=function(e){var t=a.props.form,n=t.getFieldValue("keys");1!==n.length&&t.setFieldsValue({keys:n.filter((function(t){return t!==e}))})},a.onChange=function(e){a.setState({})},a.searchValues=function(e,t){var n=Object(f.a)(a);a.setState((function(a){var n=tc({},a.searchStrings);return n[e]=t,{searchStrings:n}}),(function(){"Drugs"==e?n.loadDrugList():n.filterValues(e)}))},a.filterValues=function(e){a.setState((function(t){var a=[];return t.items[e]&&(t.searchStrings[e]?t.items[e].forEach((function(n){n.name&&n.name.toString().toLowerCase().includes(t.searchStrings[e].toLowerCase())&&a.push(n)})):a=t.items[e]),{filteredItems:tc({},t.filteredItems,Object(u.a)({},e,a))}}))},a.state={items:{},filteredItems:{},drugList:[],labList:[],formDrugList:[],formLabList:[],addInstructions:{},changeDurationUnits:{},addedDrugs:{},addedLabs:{},addTemplate:{},formTemplateList:[],searchStrings:{}},a.loadPrescriptionTemplate=a.loadPrescriptionTemplate.bind(Object(f.a)(a)),a.deletePrescriptionTemplate=a.deletePrescriptionTemplate.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadDrugList(),this.loadLabList(),this.loadPrescriptionTemplate()}},{key:"loadPrescriptionTemplate",value:function(){var e=this;console.log("template",e.state.prescriptionTemplate),Ut(Kt(Be,[e.props.active_practiceId]),(function(t){e.setState({prescriptionTemplate:t.results})}),(function(){}))}},{key:"loadLabList",value:function(){var e=this;Ut(Kt(fe,[e.props.active_practiceId]),(function(t){e.setState({labList:t.results})}),(function(){}))}},{key:"loadDrugList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this,a=function(e){t.setState((function(t){var a=tc({},t.items);return{items:tc({},a,{Drugs:e.results}),filteredItems:tc({},t.filteredItems,{Drugs:e.results})}}))},n=function(){},r={practice:this.props.active_practiceId,item_type:ja,page:e};t.state.searchStrings.Drugs&&(r.item_name=t.state.searchStrings.Drugs),Ut(ht,a,n,r)}},{key:"addDrug",value:function(e){this.setState((function(t){var a=Math.random().toFixed(7);return t.addedDrugs[e.id]?(Qt(D,"Item Already Added"),!1):{addedDrugs:tc({},t.addedDrugs,Object(u.a)({},e.id,!0)),formDrugList:[].concat(Object(Oa.a)(t.formDrugList),[tc({},e,{_id:a})])}}))}},{key:"deletePrescriptionTemplate",value:function(e){var t=this,a={id:e,is_active:!1};qt(Kt(Be,[t.props.active_practiceId]),a,(function(e){t.loadPrescriptionTemplate()}),(function(){}))}},{key:"render",value:function(){var e=this,a=this,n={labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:12}}},i={wrapperCol:{xs:{span:24,offset:0},sm:{span:12,offset:4}}},l=this.props.form,o=l.getFieldDecorator,c=l.getFieldValue;l.getFieldsValue;o("keys",{initialValue:[]});var u=c("keys"),d=u.map((function(t,a){return r.a.createElement(vr.a.Item,Object.assign({},0===a?n:i,{label:0===a?"Advice":"",required:!1,key:t}),o("advice_data[".concat(t,"]"),{validateTrigger:["onChange","onBlur"]})(r.a.createElement(ma.a,{style:{width:"60%",marginRight:8}})),u.length>1?r.a.createElement(va.a,{className:"dynamic-delete-button",type:"minus-circle-o",onClick:function(){return e.remove(t)}}):null)})),p=[{title:"Drug Name",dataIndex:"name",key:"name",render:function(e){return r.a.createElement("h2",null,e)}},{title:"Dosage & Frequency",dataIndex:"dosage",key:"dosage",render:function(t,a){return r.a.createElement("div",null,r.a.createElement(vr.a.Item,{extra:r.a.createElement("span",null,"does(s)"),key:"does[".concat(a._id,"]")},o("does[".concat(a._id,"]"),{validateTrigger:["onChange","onBlur"]},{rules:[{message:"This field is required."}]})(r.a.createElement(Er.a,{min:0,size:"small"}))),r.a.createElement(vr.a.Item,{key:"does_frequency[".concat(a._id,"]")},o("does_frequency[".concat(a._id,"]"),{validateTrigger:["onChange","onBlur"],rules:[{message:"This field is required."}],initialValue:"twice daily"})(r.a.createElement(ga.a,{size:"small",onChange:function(){return e.changeDurationUnits(a._id,!1)}},Za.map((function(e){return r.a.createElement(ga.a.Option,{value:e.value},e.label)}))))))}},{title:"Duration",dataIndex:"duration",key:"duration",render:function(t,a){return r.a.createElement("div",null,r.a.createElement(vr.a.Item,{key:"duration[".concat(a._id,"]")},o("duration[".concat(a._id,"]"),{validateTrigger:["onChange","onBlur"]},{rules:[{message:"This field is required."}]})(r.a.createElement(Er.a,{min:0,size:"small"}))),r.a.createElement(vr.a.Item,{key:"duration_unit[".concat(a._id,"]")},o("duration_unit[".concat(a._id,"]"),{validateTrigger:["onChange","onBlur"],rules:[{message:"This field is required."}],initialValue:"day(s)"})(r.a.createElement(ga.a,{size:"small",onChange:function(){return e.changeDurationUnits(a._id,!1)}},Qa.map((function(e){return r.a.createElement(ga.a.Option,{value:e.value},e.label)}))))))}},{title:"Instructions",dataIndex:"instruction",key:"instruction",render:function(t,a){return r.a.createElement("div",null,e.state.addInstructions[a._id]?r.a.createElement(vr.a.Item,{extra:r.a.createElement("a",{onClick:function(){return e.addInstructions(a._id,!1)}},"Remove Instructions"),key:"instruction[".concat(a._id,"]")},o("instruction[".concat(a._id,"]"),{validateTrigger:["onChange","onBlur"],rules:[{message:"This field is required."}]})(r.a.createElement(ma.a.TextArea,{min:0,placeholder:"Instructions...",size:"small"}))):r.a.createElement("a",{onClick:function(){return e.addInstructions(a._id,!0)}},"+ Add Instructions"))}},{title:"Timing",dataIndex:"food_time",key:"food_time",render:function(t,a){return r.a.createElement("div",null,r.a.createElement(vr.a.Item,{key:"food_time[".concat(a._id,"]")},o("food_time[".concat(a._id,"]"))(r.a.createElement(br.a.Group,{onChange:e.onChange},r.a.createElement(br.a,{value:1},"After Food"),r.a.createElement(br.a,{value:0},"Before Food")))))}},{title:"",dataIndex:"action",key:"action",render:function(t,a){return r.a.createElement(vr.a.Item,null,r.a.createElement(da.a,{icon:"close",onClick:function(){return e.removeDrug(a._id)},type:"danger",shape:"circle",size:"small"}))}}],m=[{title:"Name",dataIndex:"name",key:"name",render:function(e,t){return r.a.createElement("span",null,r.a.createElement("b",null,e))}},{title:"Cost",dataIndex:"cost",key:"cost",render:function(e,t){return r.a.createElement("span",null,t.cost)}},{title:"Total",dataIndex:"total",key:"total",render:function(t,a){return r.a.createElement("span",null,t,r.a.createElement(da.a,{icon:"close",onClick:function(){return e.removeLabs(a._id,a)},type:"danger",shape:"circle",size:"small"}))}}];return r.a.createElement(cr.a,{title:"Prescriptions Template"},r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:18},r.a.createElement(vr.a,{onSubmit:this.handleSubmit},r.a.createElement(vr.a.Item,Object.assign({},n,{label:"Template Name"}),o("name",{})(r.a.createElement(ma.a,null))),r.a.createElement(vr.a.Item,Object.assign({},n,{label:"Schedule"}),o("schedule",{})(r.a.createElement(Er.a,{min:1}))),r.a.createElement(lr.a,{pagination:!1,bordered:!1,columns:p,dataSource:this.state.formDrugList}),r.a.createElement(sr.a,null," Lab Test"),r.a.createElement(lr.a,{pagination:!1,bordered:!1,columns:m,dataSource:this.state.formLabList}),r.a.createElement(sr.a,null),d,r.a.createElement(vr.a.Item,i,r.a.createElement(da.a,{type:"dashed",onClick:this.handleAddFields,style:{width:"60%"}},r.a.createElement(va.a,{type:"plus"})," Add advice field")),r.a.createElement(s.a,{target:function(){return e.container}},r.a.createElement(da.a,{type:"primary",htmlType:"submit"},"Save")))),r.a.createElement(ir.a,{span:6},r.a.createElement(hr.a,{type:"card"},r.a.createElement(ac,{tab:"Drugs",key:"1"},r.a.createElement("div",{style:{backgroundColor:"#ddd",padding:8}},r.a.createElement(ma.a.Search,{key:"Drugs",placeholder:"Search in Medicine...",onChange:function(t){return e.searchValues("Drugs",t.target.value)}})),r.a.createElement(Ea.a,{size:"small",itemLayout:"horizontal",dataSource:this.state.filteredItems.Drugs,renderItem:function(t){return r.a.createElement(Ea.a.Item,{onClick:function(){return e.addDrug(t)},actions:t.maintain_inventory?null:[r.a.createElement(fa.a,null,"Not Sold")]},r.a.createElement(Ea.a.Item.Meta,{title:t.name}))}})),r.a.createElement(ac,{tab:"Labs",key:"2"},r.a.createElement(Ea.a,{size:"small",itemLayout:"horizontal",dataSource:this.state.labList,renderItem:function(t){return r.a.createElement(Ea.a.Item,{onClick:function(){return e.addLabs(t)}},r.a.createElement(Ea.a.Item.Meta,{title:t.name}))}})),r.a.createElement(ac,{tab:"Template",key:"3"},r.a.createElement(Ea.a,{size:"small",itemLayout:"horizontal",dataSource:this.state.prescriptionTemplate,renderItem:function(t){return r.a.createElement(Ea.a.Item,{onConfirm:function(){return a.deletePrescriptionTemplate(t.id)}},r.a.createElement(Ea.a.Item.Meta,{onClick:function(){return e.addTemplate(t)},title:t.name}),r.a.createElement(or.a,{title:"Are you sure delete this item?",onConfirm:function(){return a.deletePrescriptionTemplate(t.id)},okText:"Yes",cancelText:"No"},r.a.createElement("a",null,"Delete")))}})))),r.a.createElement(y.d,null,r.a.createElement(y.b,{exact:!0,path:"/patient/:id/prescriptions/template/add",renderRoute:function(a){return r.a.createElement(t,Object.assign({},e.state,a))}}))))}}]),t}(r.a.Component),ic=vr.a.create()(rc);function lc(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function oc(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?lc(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):lc(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var sc=hr.a.TabPane,cc=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).selectDoctor=function(e){a.setState({selectedDoctor:e})},a.selectedDate=function(e){a.setState({selectedDate:e})},a.addInstructions=function(e,t){a.setState((function(a){return{addInstructions:oc({},a.addInstructions,Object(u.a)({},e,!!t))}}))},a.changeDurationUnits=function(e,t){a.setState((function(a){return{changeDurationUnits:oc({},a.changeDurationUnits,Object(u.a)({},e,!!t))}}))},a.removeDrug=function(e){a.setState((function(t){return{formDrugList:Object(Oa.a)(Object(Us.remove)(t.formDrugList,(function(t){return t._id!=e})))}}))},a.removeLabs=function(e,t){a.setState((function(a){return{addedLabs:oc({},a.addedLabs,Object(u.a)({},t.id,!1)),formLabList:Object(Oa.a)(Object(Us.remove)(a.formLabList,(function(t){return t._id!=e})))}}))},a.addLabs=function(e){a.setState((function(t){var a=Math.random().toFixed(7);return t.addedLabs[e.id]?(Qt(D,"Item Already Added"),!1):{addedLabs:oc({},t.addedLabs,Object(u.a)({},e.id,!0)),formLabList:[].concat(Object(Oa.a)(t.formLabList),[oc({},e,{_id:a})])}}))},a.addTemplate=function(e){a.setState((function(t){if(t.addTemplate[e.id])return Qt(D,"Item Already Added"),!1;var a=Object(Oa.a)(t.formLabList),n=oc({},t.addedLabs);e.labs.forEach((function(e){var t=Math.random().toFixed(7);a.push(oc({},e,{_id:t})),n=oc({},n,Object(u.a)({},e.id,!0))}));var r=Object(Oa.a)(t.formDrugList),i=oc({},t.addedDrugs);return e.drugs.forEach((function(t){var a=Math.random().toFixed(7);r.push(oc({},t,{_id:a,advice_data:e.advice_data})),n=oc({},i,Object(u.a)({},t.id,!0))})),{addedLabs:n,formLabList:a,addedDrugs:i,formDrugList:r}}))},a.removeTemplates=function(e,t){a.setState((function(a){return{addTemplate:oc({},a.addTemplate,Object(u.a)({},t.id,!1)),formTemplateList:Object(Oa.a)(Object(Us.remove)(a.formTemplateList,(function(t){return t._id!=e})))}}))},a.handleSubmit=function(e){var t=Object(f.a)(a);e.preventDefault(),a.props.form.validateFields((function(e,a){if(e)console.log(e);else{var n={drugs:[],labs:[],patient:parseInt(t.props.match.params.id),practice:t.props.active_practiceId,doctor:t.state.selectedDoctor?t.state.selectedDoctor.id:null,date:t.state.selectedDate?t.state.selectedDate.format("YYYY-MM-DD"):null,advice_data:[]};t.props.editId&&(n.id=t.props.editId),t.state.formDrugList.forEach((function(e){e.dosage=a.dosage[e._id],e.duration_type=a.duration_type[e._id],e.duration=a.duration[e._id],e.frequency=a.frequency[e._id],a.instruction&&(e.instruction=a.instruction[e._id]),a.food_time[e._id]?(e.after_food=!0,e.before_food=!1):(e.before_food=!0,e.after_food=!1);var t={inventory:e.id,name:e.name,dosage:e.dosage,frequency:e.frequency,duration_type:e.duration_type,duration:e.duration,instruction:e.instruction,before_food:e.before_food,after_food:e.after_food,is_active:!0};n.drugs.push(t),console.log("item drug",e)})),t.state.formLabList.forEach((function(e){n.labs.push(e.id)}));qt(Kt(Oe,[t.props.match.params.id]),n,(function(e){t.props.loadData&&t.props.loadData();var a="/patient/"+t.props.match.params.id+"/emr/prescriptions";t.props.history.push(a)}),(function(){}))}}))},a.onChange=function(e){a.setState({})},a.searchValues=function(e,t){var n=Object(f.a)(a);a.setState((function(a){var n=oc({},a.searchStrings);return n[e]=t,{searchStrings:n}}),(function(){"Drugs"==e?n.loadDrugList():n.filterValues(e)}))},a.filterValues=function(e){a.setState((function(t){var a=[];return t.items[e]&&(t.searchStrings[e]?t.items[e].forEach((function(n){n.name&&n.name.toString().toLowerCase().includes(t.searchStrings[e].toLowerCase())&&a.push(n)})):a=t.items[e]),{filteredItems:oc({},t.filteredItems,Object(u.a)({},e,a))}}))},a.state={items:{},filteredItems:{},formDrugList:[],formLabList:[],addInstructions:{},changeDurationUnits:{},addedDrugs:{},addedLabs:{},addTemplate:{},formTemplateList:[],practiceDoctors:[],selectedDoctor:{},selectedDate:Or()(),searchStrings:{}},a.loadPrescriptionTemplate=a.loadPrescriptionTemplate.bind(Object(f.a)(a)),a.deletePrescriptionTemplate=a.deletePrescriptionTemplate.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.loadDrugList(),this.loadLabList(),this.loadPrescriptionTemplate(),mi(this),this.props.editId&&this.setState((function(t){var a=[],n={},r={};e.props.editPrescription.drugs.forEach((function(e){var t=Math.random();a.push(oc({},e,{_id:t,food_time:e.after_food?1:0})),n[t]=!!e.instruction}));var i=[];return e.props.editPrescription.labs.forEach((function(e){i.push(oc({},e,{_id:Math.random()})),r[e.id]=!0})),oc({},e.props.editPrescription,{formDrugList:[].concat(a),formLabList:[].concat(i),addInstructions:oc({},n),addedLabs:oc({},r),selectedDoctor:e.props.editPrescription.doctor,selectedDate:Or()(e.props.editPrescription.date).isValid()?Or()(e.props.editPrescription.date):Or()()})}))}},{key:"loadPrescriptionTemplate",value:function(){var e=this;Ut(Kt(Be,[e.props.active_practiceId]),(function(t){e.setState((function(e){var a=oc({},e.items);return{items:oc({},a,{Template:t.results}),filteredItems:oc({},e.filteredItems,{Template:t.results})}}))}),(function(){}))}},{key:"loadLabList",value:function(){var e=this;Ut(Kt(fe,[e.props.active_practiceId]),(function(t){e.setState((function(e){var a=oc({},e.items);return{items:oc({},a,{Labs:t.results}),filteredItems:oc({},e.filteredItems,{Labs:t.results})}}))}),(function(){}))}},{key:"loadDrugList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this,a=t.state.searchStrings.Drugs,n=function(e){a==t.state.searchStrings.Drugs&&t.setState((function(t){var a=oc({},t.items);return{items:oc({},a,{Drugs:e.results}),filteredItems:oc({},t.filteredItems,{Drugs:e.results})}}))},r=function(){},i={practice:this.props.active_practiceId,item_type:ja,page:e};a&&(i.item_name=a),Ut(ht,n,r,i)}},{key:"addDrug",value:function(e){this.setState((function(t){var a=Math.random().toFixed(7);return{addedDrugs:oc({},t.addedDrugs,Object(u.a)({},e.id,!0)),formDrugList:[oc({},e,{_id:a})].concat(Object(Oa.a)(t.formDrugList))}}))}},{key:"deletePrescriptionTemplate",value:function(e){var t=this,a={id:e,is_active:!1};qt(Kt(Be,[t.props.active_practiceId]),a,(function(e){t.loadPrescriptionTemplate()}),(function(){}))}},{key:"render",value:function(){var e=this,t=this,a=this.props.form,n=a.getFieldDecorator,i=(a.getFieldValue,a.getFieldsValue,[{title:"Medicine Name",dataIndex:"name",key:"name",render:function(e){return r.a.createElement("h2",null,e)}},{title:"Dosage & Frequency",dataIndex:"dosage",key:"dosage",render:function(t,a){return r.a.createElement("div",null,r.a.createElement(vr.a.Item,{extra:r.a.createElement("span",null,"does(s)"),key:"dosage[".concat(a._id,"]")},n("dosage[".concat(a._id,"]"),{validateTrigger:["onChange","onBlur"],rules:[{message:"This field is required."}],initialValue:a.dosage,min:0})(r.a.createElement(Er.a,{size:"small"}))),r.a.createElement(vr.a.Item,{key:"frequency[".concat(a._id,"]")},n("frequency[".concat(a._id,"]"),{validateTrigger:["onChange","onBlur"],rules:[{message:"This field is required."}],initialValue:a.frequency||Za[0].value})(r.a.createElement(ga.a,{size:"small",onChange:function(){return e.changeDurationUnits(a._id,!1)}},Za.map((function(e){return r.a.createElement(ga.a.Option,{value:e.value},e.label)}))))))}},{title:"Duration",dataIndex:"duration",key:"duration",render:function(t,a){return r.a.createElement("div",null,r.a.createElement(vr.a.Item,{key:"duration[".concat(a._id,"]")},n("duration[".concat(a._id,"]"),{validateTrigger:["onChange","onBlur"],rules:[{message:"This field is required."}],initialValue:a.duration,min:0})(r.a.createElement(Er.a,{size:"small"}))),r.a.createElement(vr.a.Item,{key:"duration_type[".concat(a._id,"]")},n("duration_type[".concat(a._id,"]"),{validateTrigger:["onChange","onBlur"],rules:[{message:"This field is required."}],initialValue:a.duration_type||Qa[0].value})(r.a.createElement(ga.a,{size:"small",onChange:function(){return e.changeDurationUnits(a._id,!1)}},Qa.map((function(e){return r.a.createElement(ga.a.Option,{value:e.value},e.label)}))))))}},{title:"Instructions",dataIndex:"instruction",key:"instruction",render:function(t,a){return r.a.createElement("div",null,e.state.addInstructions[a._id]?r.a.createElement(vr.a.Item,{extra:r.a.createElement("a",{onClick:function(){return e.addInstructions(a._id,!1)}},"Remove Instructions"),key:"instruction[".concat(a._id,"]")},n("instruction[".concat(a._id,"]"),{validateTrigger:["onChange","onBlur"],rules:[{message:"This field is required."}],initialValue:a.instruction})(r.a.createElement(ma.a.TextArea,{placeholder:"Instructions...",size:"small"}))):r.a.createElement("a",{onClick:function(){return e.addInstructions(a._id,!0)}},"+ Add Instructions"))}},{title:"Timing",dataIndex:"food_time",key:"food_time",render:function(t,a){return r.a.createElement("div",null,r.a.createElement(vr.a.Item,{key:"food_time[".concat(a._id,"]")},n("food_time[".concat(a._id,"]"),{initialValue:a.food_time||0})(r.a.createElement(br.a.Group,{onChange:e.onChange},r.a.createElement(br.a,{value:1},"after"),r.a.createElement(br.a,{value:0},"before")))))}},{title:"",dataIndex:"action",key:"action",render:function(t,a){return r.a.createElement(vr.a.Item,null,r.a.createElement(da.a,{icon:"close",onClick:function(){return e.removeDrug(a._id)},type:"danger",shape:"circle",size:"small"}))}}]),l=[{title:"Name",dataIndex:"name",key:"name",render:function(e,t){return r.a.createElement("span",null,r.a.createElement("b",null,e))}},{title:"Cost",dataIndex:"cost",key:"cost",render:function(e,t){return r.a.createElement("span",null,t.cost)}},{title:"Total",dataIndex:"total",key:"total",render:function(t,a){return r.a.createElement("span",null,t,r.a.createElement(da.a,{icon:"close",onClick:function(){return e.removeLabs(a._id,a)},type:"danger",shape:"circle",size:"small"}))}}];return r.a.createElement(cr.a,{title:"Prescriptions"},r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:18},r.a.createElement(vr.a,{onSubmit:this.handleSubmit},r.a.createElement(lr.a,{pagination:!1,bordered:!1,columns:i,dataSource:this.state.formDrugList}),r.a.createElement(sr.a,null," Lab Test"),r.a.createElement(lr.a,{pagination:!1,bordered:!1,columns:l,dataSource:this.state.formLabList}),r.a.createElement(s.a,{offsetBottom:0},r.a.createElement(cr.a,null,r.a.createElement("span",null,"by \xa0\xa0"),r.a.createElement(ha.a,{placement:"topCenter",overlay:r.a.createElement(_a.a,null,this.state.practiceDoctors.map((function(t){return r.a.createElement(_a.a.Item,{key:"0"},r.a.createElement("a",{onClick:function(){return e.selectDoctor(t)}},t.user.first_name))}))),trigger:["click"]},r.a.createElement("a",{className:"ant-dropdown-link",href:"#"},r.a.createElement("b",null,this.state.selectedDoctor.user?this.state.selectedDoctor.user.first_name:"No DOCTORS Found"))),r.a.createElement("span",null," \xa0\xa0on\xa0\xa0"),r.a.createElement(yr.a,{value:this.state.selectedDate,onChange:function(t){return e.selectedDate(t)},format:"DD-MM-YYYY"}),r.a.createElement(da.a,{type:"primary",htmlType:"submit",style:{margin:5,float:"right"}},"Save"),t.props.history?r.a.createElement(da.a,{style:{margin:5,float:"right"},onClick:function(){return t.props.history.goBack()}},"Cancel"):null)))),r.a.createElement(ir.a,{span:6},r.a.createElement(hr.a,{type:"card"},r.a.createElement(sc,{tab:"Medicine",key:"1"},r.a.createElement("div",{style:{backgroundColor:"#ddd",padding:8}},r.a.createElement(ma.a.Search,{key:"Drugs",placeholder:"Search in Medicine...",onChange:function(t){return e.searchValues("Drugs",t.target.value)}})),r.a.createElement(Ea.a,{size:"small",itemLayout:"horizontal",dataSource:this.state.filteredItems.Drugs,renderItem:function(t){return r.a.createElement(Ea.a.Item,{onClick:function(){return e.addDrug(t)},actions:t.maintain_inventory?null:[r.a.createElement(fa.a,null,"Not Sold")]},r.a.createElement(Ea.a.Item.Meta,{title:t.name}))}})),r.a.createElement(sc,{tab:"Labs",key:"2"},r.a.createElement("div",{style:{backgroundColor:"#ddd",padding:8}},r.a.createElement(ma.a.Search,{key:"Labs",placeholder:"Search in Labs...",onChange:function(t){return e.searchValues("Labs",t.target.value)}})),r.a.createElement(Ea.a,{size:"small",itemLayout:"horizontal",dataSource:this.state.filteredItems.Labs,renderItem:function(t){return r.a.createElement(Ea.a.Item,{onClick:function(){return e.addLabs(t)}},r.a.createElement(Ea.a.Item.Meta,{title:t.name}))}})),r.a.createElement(sc,{tab:"Template",key:"3"},r.a.createElement("div",null,r.a.createElement(Da.b,{to:"/patient/"+this.props.match.params.id+"/prescriptions/template/add"},r.a.createElement(da.a,{type:"primary",block:!0,size:"small"},r.a.createElement(va.a,{type:"plus"}),"\xa0Add Template"))),r.a.createElement(sr.a,{style:{margin:0}}),r.a.createElement("div",{style:{backgroundColor:"#ddd",padding:8}},r.a.createElement(ma.a.Search,{key:"Template",placeholder:"Search in Template...",onChange:function(t){return e.searchValues("Template",t.target.value)}})),r.a.createElement(Ea.a,{size:"small",itemLayout:"horizontal",dataSource:this.state.filteredItems.Template,renderItem:function(a){return r.a.createElement(Ea.a.Item,{onConfirm:function(){return t.deletePrescriptionTemplate(a.id)}},r.a.createElement(Ea.a.Item.Meta,{onClick:function(){return e.addTemplate(a)},title:a.name}),r.a.createElement(or.a,{title:"Are you sure delete this item?",onConfirm:function(){return t.deletePrescriptionTemplate(a.id)},okText:"Yes",cancelText:"No"},r.a.createElement("a",null,"Delete")))}})))),r.a.createElement(y.d,null,r.a.createElement(y.b,{exact:!0,path:"/patient/:id/prescriptions/template/add",render:function(t){return r.a.createElement(ic,Object.assign({},e.state,t))}}))))}}]),t}(r.a.Component),uc=vr.a.create()(cc),dc=nr.a.confirm,pc=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={currentPatient:a.props.currentPatient,active_practiceId:a.props.active_practiceId,prescription:[],drug_catalog:null,editPrescription:null,loading:!0},a.loadPrescriptions=a.loadPrescriptions.bind(Object(f.a)(a)),a.loadDrugCatalog=a.loadDrugCatalog.bind(Object(f.a)(a)),a.editPrescriptionData=a.editPrescriptionData.bind(Object(f.a)(a)),a.deletePrescriptions=a.deletePrescriptions.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadPrescriptions(),this.loadDrugCatalog()}},{key:"loadPrescriptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this;this.setState({loading:!0});var a=function(e){t.setState({prescription:e.results,nextPrescriptionPage:e.next,loading:!1})},n=function(){t.setState({loading:!1})},r={page:e,practice:this.props.active_practiceId};this.props.match.params.id&&(r.patient=this.props.match.params.id),this.props.showAllClinic&&this.props.match.params.id&&delete r.practice,Ut(Oe,a,n,r)}},{key:"loadPDF",value:function(e){Ut(Kt("patients/prescriptions_pdf/?id=%s",[e]),(function(e){e.report&&window.open(V+e.report)}),(function(){}))}},{key:"loadDrugCatalog",value:function(){var e=this;Ut(Kt(he,[this.props.active_practiceId]),(function(t){e.setState({drug_catalog:t})}),(function(){e.setState({})}))}},{key:"editPrescriptionData",value:function(e){var t=this;this.setState({editPrescription:e},(function(){t.props.history.push("/patient/"+e.patient+"/emr/prescriptions/edit")}))}},{key:"deletePrescriptions",value:function(e){var t=this;dc({title:"Are you sure to delete this item?",okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){var a={id:e.id,patient:e.patient,is_active:!1};qt(Kt(Oe,[t.props.match.params.id]),a,(function(e){t.loadPrescriptions()}),(function(){}))},onCancel:function(){console.log("Cancel")}})}},{key:"render",value:function(){var e=this,t={};this.state.drug_catalog&&this.state.drug_catalog.forEach((function(e){t[e.id]=e.name+","+e.strength}));var a=this,n=[{title:"Drug",key:"name",dataIndex:"name"},{title:"Frequency",dataIndex:"frequency",key:"frequency",render:function(e,t){return r.a.createElement("span",null,t.dosage,"\xa0",t.frequency)}},{title:"Duration",dataIndex:"duration",key:"duration",render:function(e,t){return r.a.createElement("span",null,e,"\xa0",t.duration_type)}},{title:"Instruction",dataIndex:"instruction",key:"instruction",render:function(e,t){return r.a.createElement("span",null,t.before_food?r.a.createElement(fa.a,null,"before food "):null,t.after_food?r.a.createElement(fa.a,null,"after food"):null,e)}}];return this.props.match.params.id?r.a.createElement("div",null,r.a.createElement(y.d,null,r.a.createElement(y.b,{exact:!0,path:"/patient/:id/emr/prescriptions/add",render:function(t){return r.a.createElement(uc,Object.assign({},e.state,e.props,{loadData:e.loadPrescriptions},t))}}),r.a.createElement(y.b,{exact:!0,path:"/patient/:id/emr/prescriptions/edit",render:function(t){return a.state.editPrescription?r.a.createElement(uc,Object.assign({},e.state,t,e.props,{loadData:e.loadPrescriptions,editId:a.state.editPrescription.id})):r.a.createElement(y.a,{to:"/patient/"+a.props.match.params.id+"/emr/prescriptions"})}}),r.a.createElement(y.b,null,r.a.createElement("div",null,r.a.createElement(cr.a,{bodyStyle:{padding:0},title:this.state.currentPatient?this.state.currentPatient.user.first_name+" Prescriptions":"Prescriptions",extra:r.a.createElement(da.a.Group,{style:{float:"right"}},r.a.createElement(Da.b,{to:"/patient/"+this.props.match.params.id+"/emr/prescriptions/add"},r.a.createElement(da.a,{type:"primary"},r.a.createElement(va.a,{type:"plus"}),"Add")))}),this.state.prescription.map((function(t){return r.a.createElement("div",null,r.a.createElement(cr.a,{style:{marginTop:10},bodyStyle:{padding:0},title:r.a.createElement("small",null,t.date?Or()(t.date).format("ll"):null),extra:r.a.createElement(ha.a.Button,{size:"small",style:{float:"right"},overlay:r.a.createElement(_a.a,null,r.a.createElement(_a.a.Item,{key:"1",onClick:function(){return a.editPrescriptionData(t)},disabled:t.practice&&t.practice.id!=a.props.active_practiceId},r.a.createElement(va.a,{type:"edit"}),"Edit"),r.a.createElement(_a.a.Item,{key:"2",onClick:function(){return a.deletePrescriptions(t)},disabled:t.practice&&t.practice.id!=a.props.active_practiceId},r.a.createElement(va.a,{type:"delete"}),"Delete"),r.a.createElement(_a.a.Divider,null),r.a.createElement(_a.a.Item,{key:"3"},r.a.createElement(Da.b,{to:"/patient/"+t.patient+"/emr/timeline"},r.a.createElement(va.a,{type:"clock-circle"}),"\xa0 Patient Timeline")))},r.a.createElement("a",{onClick:function(){return e.loadPDF(t.id)}},r.a.createElement(va.a,{type:"printer"})))},r.a.createElement(lr.a,{columns:n,dataSource:t.drugs,pagination:!1,footer:function(){return mc(t)},key:t.id})))})),r.a.createElement(pa.a,{spinning:this.state.loading},r.a.createElement(rr.a,null)),r.a.createElement(wi,{loading:this.state.loading,loaderFunction:function(){return e.loadPrescriptions(e.state.nextPrescriptionPage)},hidden:!this.state.nextPrescriptionPage}))))):r.a.createElement("div",null,r.a.createElement(cr.a,{bodyStyle:{padding:0},title:this.state.currentPatient?this.state.currentPatient.user.first_name+" Prescriptions":"Prescriptions",extra:r.a.createElement(da.a.Group,{style:{float:"right"}},r.a.createElement(da.a,{type:"primary",onClick:function(){return e.props.togglePatientListModal(!0)}},r.a.createElement(va.a,{type:"plus"}),"Add"))}),this.state.prescription.map((function(t){return r.a.createElement("div",{key:t.id},r.a.createElement(cr.a,{style:{marginTop:10},bodyStyle:{padding:0},title:r.a.createElement("small",null,t.date?Or()(t.date).format("ll"):null,r.a.createElement(Da.b,{to:"/patient/"+t.patient.id+"/emr/prescriptions"},"\xa0\xa0 ",t.patient.user?t.patient.user.first_name:null," (ID: ",t.patient.custom_id?t.patient.custom_id:t.patient.id,")\xa0"),r.a.createElement("span",null,", ",t.patient.gender)),extra:r.a.createElement(ha.a.Button,{size:"small",style:{float:"right"},overlay:r.a.createElement(_a.a,null,r.a.createElement(_a.a.Item,{key:"1",onClick:function(){return a.editPrescriptionData(t)},disabled:t.practice&&t.practice.id!=a.props.active_practiceId},r.a.createElement(va.a,{type:"edit"}),"Edit"),r.a.createElement(_a.a.Item,{key:"2",onClick:function(){return a.deletePrescriptions(t)},disabled:t.practice&&t.practice.id!=a.props.active_practiceId},r.a.createElement(va.a,{type:"delete"}),"Delete"),r.a.createElement(_a.a.Divider,null),r.a.createElement(_a.a.Item,{key:"3"},r.a.createElement(Da.b,{to:"/patient/"+t.patient+"/emr/timeline"},r.a.createElement(va.a,{type:"clock-circle"}),"\xa0 Patient Timeline")))},r.a.createElement("a",{onClick:function(){return e.loadPDF(t.id)}},r.a.createElement(va.a,{type:"printer"})))},r.a.createElement(lr.a,{columns:n,dataSource:t.drugs,pagination:!1,footer:function(){return mc(t)},key:t.id})))})),r.a.createElement(pa.a,{spinning:this.state.loading},r.a.createElement(rr.a,null)),r.a.createElement(wi,{loading:this.state.loading,loaderFunction:function(){return e.loadPrescriptions(e.state.nextPrescriptionPage)},hidden:!this.state.nextPrescriptionPage}))}}]),t}(r.a.Component);function mc(e){return e?r.a.createElement("div",null,e.doctor?r.a.createElement(ms.a,{title:"Doctor"},r.a.createElement(fa.a,{color:e.doctor?e.doctor.calendar_colour:null},r.a.createElement("b",null,"prescribed by  "+e.doctor.user.first_name," "))):null,e.practice?r.a.createElement(fa.a,{style:{float:"right"}},r.a.createElement(ms.a,{title:"Practice Name"},r.a.createElement("b",null,e.practice.name," "))):null,e.labs.length?r.a.createElement("div",null,"+",e.labs.length,"\xa0Lab Orders"):null):null}function hc(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function fc(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?hc(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):hc(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var gc=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).calculateItem=function(e){var t=a.props.form.getFieldsValue;console.log(t()),a.setState((function(e){Object(Oa.a)(e.tableFormValues).forEach((function(e){}))}))},a.addNotes=function(e,t){a.setState((function(a){return{addNotes:fc({},a.addNotes,Object(u.a)({},e,!!t))}}))},a.removeTreatment=function(e){a.setState((function(t){return{tableFormValues:Object(Oa.a)(Object(Us.remove)(t.tableFormValues,(function(t){return t._id!=e})))}}))},a.add=function(e){Object(f.a)(a);a.setState((function(t){var a=Math.random().toFixed(7);return{addNotes:fc({},t.addNotes,Object(u.a)({},a,!!e.default_notes)),tableFormValues:[fc({},e,{_id:a})].concat(Object(Oa.a)(t.tableFormValues))}}),(function(){}))},a.selectDoctor=function(e){a.setState({selectedDoctor:e})},a.selectedDate=function(e){a.setState({selectedDate:e})},a.handleSubmit=function(e){var t=Object(f.a)(a);e.preventDefault(),a.props.form.validateFields((function(e,a){if(!e){console.log("Received values of form: ",a);var n={treatment_plans:[],patient:t.props.match.params.id,doctor:t.state.selectedDoctor.id,date:t.state.selectedDate&&Or()(t.state.selectedDate).isValid()?t.state.selectedDate.format("YYYY-MM-DD"):null,practice:t.props.active_practiceId};t.props.editId&&(n.id=t.props.editTreatmentPlan.id),t.state.tableFormValues.forEach((function(e){console.log(e),e.quantity=a.quantity[e._id],e.cost=a.cost[e._id],e.discount=a.discount[e._id],a.notes&&(e.notes=a.notes[e._id]);var t={procedure:e.id,cost:e.cost,quantity:e.quantity,margin:e.margin,default_notes:e.default_notes,is_active:!0,is_completed:e.is_completed||!1,discount:e.discount,discount_type:"%"};n.treatment_plans.push(t)}));qt(Kt(we,[t.props.match.params.id]),n,(function(e){Qt("Inventory updated successfully"),t.props.loadData&&t.props.loadData();var a="/patient/"+t.props.match.params.id+"/emr/plans";t.props.history.push(a)}),(function(){}))}}))},a.searchValues=function(e){var t=Object(f.a)(a);return a.setState((function(t){return{searchString:e}}),(function(){t.loadProcedures()})),!1},a.state={loadingProcedures:!0,procedure_category:[],tableFormValues:[],addNotes:{},practiceDoctors:[],selectedDoctor:{},selectedDate:Or()()},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.props.editId&&this.setState((function(e){var t=[];return this.props.editTreatmentPlan.treatment_plans.forEach((function(e){var a=Math.random().toFixed(7);t.push(fc({},e,{},e.procedure,{_id:a}))})),fc({},this.props.editTreatmentPlan,{tableFormValues:t,selectedDate:Or()(this.props.editTreatmentPlan.date),selectedDoctor:this.props.editTreatmentPlan.doctor})})),this.loadProcedures(),mi(this)}},{key:"loadProcedures",value:function(){var e=this,t={};this.state.searchString&&(t.name=this.state.searchString),e.setState({loadingProcedures:!0});Ut(Kt(ae,[this.props.active_practiceId]),(function(a){t.name&&e.state.searchString!=t.name||e.setState({loadingProcedures:!1,filteredItems:a.results})}),(function(){e.setState({loadingProcedures:!1})}),t)}},{key:"render",value:function(){var e=this,t=this,a=this.props.form,n=a.getFieldDecorator,i=(a.getFieldValue,a.getFieldsValue,{labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}}),l=[{title:"Treatments",dataIndex:"name",key:"name",render:function(t,a){return r.a.createElement("span",null,r.a.createElement("b",null,t),r.a.createElement("br",null),e.state.addNotes[a._id]?r.a.createElement(vr.a.Item,Object.assign({key:"default_notes[".concat(a._id,"]")},i),n("default_notes[".concat(a._id,"]"),{validateTrigger:["onChange","onBlur"],rules:[{message:"This field is required."}],initialValue:a.default_notes})(r.a.createElement(ma.a.TextArea,{min:0,placeholder:"Notes..."}))):r.a.createElement("a",{onClick:function(){return e.addNotes(a._id,!0)}},"+ Add Note"))}},{title:"Quantity",dataIndex:"quantity",key:"quantity",render:function(t,a){return r.a.createElement(vr.a.Item,Object.assign({key:"quantity[".concat(a._id,"]")},i),n("quantity[".concat(a._id,"]"),{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"This field is required."}],initialValue:1})(r.a.createElement(Er.a,{min:0,placeholder:"Quantity",size:"small",onChange:function(){return e.calculateItem(a._id)}})))}},{title:"Cost",dataIndex:"cost",key:"cost",render:function(t,a){return r.a.createElement(vr.a.Item,Object.assign({key:"cost[".concat(a._id,"]")},i),n("cost[".concat(a._id,"]"),{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"This field is required."}],initialValue:a.cost})(r.a.createElement(Er.a,{min:0,placeholder:"Cost",size:"small",onChange:function(){return e.calculateItem(a._id)}})))}},{title:"Discount",dataIndex:"discount",key:"discount",render:function(t,a){return r.a.createElement(vr.a.Item,Object.assign({key:"discount[".concat(a._id,"]")},i),n("discount[".concat(a._id,"]"),{validateTrigger:["onChange","onBlur"],rules:[{message:"This field is required."}]})(r.a.createElement(Er.a,{min:0,placeholder:"Discount",size:"small",onChange:function(){return e.calculateItem(a._id)}}))," %")}},{title:"Total",dataIndex:"total",key:"total",render:function(t,a){return r.a.createElement("span",null,t,r.a.createElement(da.a,{icon:"close",onClick:function(){return e.removeTreatment(a._id)},type:"danger",shape:"circle",size:"small"}))}}];return r.a.createElement("div",null,r.a.createElement(cr.a,{title:"Treatment Plans"},r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:17},r.a.createElement(vr.a,{onSubmit:this.handleSubmit},r.a.createElement(lr.a,{pagination:!1,bordered:!0,dataSource:this.state.tableFormValues,columns:l}),r.a.createElement(s.a,{offsetBottom:0},r.a.createElement(cr.a,null,r.a.createElement("span",null,"by \xa0\xa0"),r.a.createElement(ha.a,{placement:"topCenter",overlay:r.a.createElement(_a.a,null,this.state.practiceDoctors.map((function(t){return r.a.createElement(_a.a.Item,{key:"0"},r.a.createElement("a",{onClick:function(){return e.selectDoctor(t)}},t.user.first_name))}))),trigger:["click"]},r.a.createElement("a",{className:"ant-dropdown-link",href:"#"},r.a.createElement("b",null,this.state.selectedDoctor.user?this.state.selectedDoctor.user.first_name:"No DOCTORS Found"))),r.a.createElement("span",null," \xa0\xa0on\xa0\xa0"),r.a.createElement(yr.a,{value:this.state.selectedDate,onChange:function(t){return e.selectedDate(t)},format:"DD-MM-YYYY",allowClear:!1}),r.a.createElement(vr.a.Item,Object.assign({},{labelCol:{xs:{span:24},sm:{span:24}},wrapperCol:{xs:{span:24},sm:{span:24}}},{style:{marginBottom:0,float:"right"}}),r.a.createElement(da.a,{type:"primary",htmlType:"submit",style:{margin:5}},"Save Treatment Plan"),t.props.history?r.a.createElement(da.a,{style:{margin:5,float:"right"},onClick:function(){return t.props.history.goBack()}},"Cancel"):null))),r.a.createElement("div",{ref:function(e){t.bottomPoint=e}}))),r.a.createElement(ir.a,{span:7},r.a.createElement(s.a,{offsetTop:0},r.a.createElement("div",{style:{backgroundColor:"#ddd",padding:8}},r.a.createElement(ma.a.Search,{placeholder:"Search in plans ...",onChange:function(t){return e.searchValues(t.target.value)}})),r.a.createElement(Ea.a,{size:"small",style:{maxHeight:"100vh",overflowX:"scroll"},itemLayout:"horizontal",dataSource:this.state.filteredItems,loading:this.state.loadingProcedures,renderItem:function(t){return r.a.createElement(Ea.a.Item,{onClick:function(){return e.add(t)}},r.a.createElement(Ea.a.Item.Meta,{title:t.name}))}}))))))}}]),t}(r.a.Component),yc=vr.a.create()(gc);function Ec(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function bc(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ec(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ec(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var vc=nr.a.confirm,_c=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={currentPatient:a.props.currentPatient,active_practiceId:a.props.active_practiceId,treatmentPlans:[],procedure_category:null,incompletedTreatmentPlans:[],loading:!0,selectedTreatments:{}},a.loadTreatmentPlans=a.loadTreatmentPlans.bind(Object(f.a)(a)),a.editTreatmentPlanData=a.editTreatmentPlanData.bind(Object(f.a)(a)),a.submitCompleteTreatment=a.submitCompleteTreatment.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadTreatmentPlans()}},{key:"loadTreatmentPlans",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=[],a=this;this.setState({loading:!0});var n=function(e){a.setState((function(t){return 1==e.current?{treatmentPlans:Object(Oa.a)(e.results),next:e.next,loading:!1}:{treatmentPlans:[].concat(Object(Oa.a)(t.treatmentPlans),Object(Oa.a)(e.results)),next:e.next,loading:!1}})),e.results.forEach((function(e){e.is_completed||t.push(e)})),a.setState((function(a){return 1==e.current?{incompletedTreatmentPlans:[].concat(t),loading:!1}:{incompletedTreatmentPlans:[].concat(Object(Oa.a)(a.incompletedTreatmentPlans),t),loading:!1}}))},r=function(){a.setState({loading:!1})},i={page:e,practice:this.props.active_practiceId};this.props.match.params.id&&(i.patient=this.props.match.params.id),this.props.showAllClinic&&this.props.match.params.id&&delete i.practice,Ut(we,n,r,i)}},{key:"editTreatmentPlanData",value:function(e){console.log("record",e.id),this.setState({editTreatmentPlan:e,loading:!1});e.patient;this.props.history.push("/patient/"+e.id+"/emr/plans/edit")}},{key:"deleteTreatmentPlans",value:function(e){var t=this;vc({title:"Are you sure to delete this item?",okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){var a={id:e.id,patient:e.patient.id,is_active:!1};qt(Kt(we,[t.props.match.params.id],null),a,(function(e){t.loadTreatmentPlans(),Qt(O,"Treatment Plan Deleted Successfully!")}),(function(){}))},onCancel:function(){console.log("Cancel")}})}},{key:"treatmentCompleteToggle",value:function(e,t){this.setState((function(a){return{selectedTreatments:bc({},a.selectedTreatments,Object(u.a)({},e,!!t))}}))}},{key:"submitCompleteTreatment",value:function(){var e=this,t=this.state.selectedTreatments,a=Object.keys(t),n={treatment:[],patient:e.props.match.params.id};a.forEach((function(e){var a={id:e,is_completed:t[e]};n.treatment.push(a)}));qt(Kt("patients/complete_procedure/?id=%s&complete=%s",[this.props.match.params.id]),n,(function(t){e.loadTreatmentPlans(),e.setState({selectedTreatments:{}})}),(function(){}))}},{key:"loadPDF",value:function(e){Ut(Kt("patients/treatment_plan_pdf/?id=%s",[e]),(function(e){e.report&&window.open(V+e.report)}),(function(){}))}},{key:"render",value:function(){var e=this,t=this,a=[{title:"",key:"is_completed",render:function(t,a){return a.is_completed?r.a.createElement(va.a,{type:"check-circle",theme:"twoTone",style:{marginLeft:"8px",fontSize:"20px"}}):r.a.createElement(pr.a,{key:a.id,onChange:function(t){return e.treatmentCompleteToggle(a.id,t.target.checked)},value:e.state.selectedTreatments[a.id]})}},{title:"Procedure",dataIndex:"procedure",key:"procedure",render:function(e,t){return r.a.createElement("span",null," ",e.name)}},{title:"Quantity",dataIndex:"quantity",key:"quantity"},{title:"Discount",dataIndex:"discount",key:"discount"},{title:"Cost per  Unit",dataIndex:"cost",key:"cost"},{title:"Notes",dataIndex:"default_notes",key:"default_notes"}];return this.props.match.params.id?r.a.createElement("div",null,r.a.createElement(y.d,null,r.a.createElement(y.b,{exact:!0,path:"/patient/:id/emr/plans/add",render:function(a){return r.a.createElement(yc,Object.assign({},e.state,a,t.props,{loadData:e.loadTreatmentPlans}))}}),r.a.createElement(y.b,{exact:!0,path:"/patient/:id/emr/plans/edit",render:function(a){return e.state.editTreatmentPlan?r.a.createElement(yc,Object.assign({},e.state,a,t.props,{loadData:e.loadTreatmentPlans,editId:e.state.editTreatmentPlan.id})):r.a.createElement(y.a,{to:"/patient/"+e.props.match.params.id+"/emr/plans"})}}),r.a.createElement("div",null,r.a.createElement(cr.a,{bodyStyle:{padding:0},title:this.state.currentPatient?this.state.currentPatient.user.first_name+" TreatmentPlans":"TreatmentPlans",extra:r.a.createElement(da.a.Group,null,r.a.createElement(da.a,{onClick:this.submitCompleteTreatment},r.a.createElement(va.a,{type:"save"}),"Save"),r.a.createElement(Da.b,{to:"/patient/"+this.props.match.params.id+"/emr/plans/add"},r.a.createElement(da.a,{type:"primary"},r.a.createElement(va.a,{type:"plus"}),"Add")))}),r.a.createElement(pa.a,{spinning:this.state.loading},this.state.treatmentPlans.map((function(n){return r.a.createElement(cr.a,{bodyStyle:{padding:0},style:{marginTop:15}},r.a.createElement("div",{style:{padding:16}},r.a.createElement("h4",null,n.date?Or()(n.date).format("ll"):null,r.a.createElement(ha.a.Button,{size:"small",style:{float:"right"},overlay:r.a.createElement(_a.a,null,r.a.createElement(_a.a.Item,{key:"1",onClick:function(){return t.editTreatmentPlanData(n)},disabled:n.practice&&n.practice.id!=e.props.active_practiceId},r.a.createElement(va.a,{type:"edit"}),"Edit"),r.a.createElement(_a.a.Item,{key:"2",onClick:function(){return t.deleteTreatmentPlans(n)},disabled:n.practice&&n.practice.id!=e.props.active_practiceId},r.a.createElement(va.a,{type:"delete"}),"Delete"),r.a.createElement(_a.a.Divider,null),r.a.createElement(_a.a.Item,{key:"3"},r.a.createElement(Da.b,{to:"/patient/"+n.patient+"/emr/timeline"},r.a.createElement(va.a,{type:"clock-circle"}),"\xa0 Patient Timeline")))},r.a.createElement("a",{onClick:function(){return e.loadPDF(n.id)}},r.a.createElement(va.a,{type:"printer"}))))),r.a.createElement(lr.a,{loading:e.state.loading,columns:a,dataSource:n.treatment_plans,footer:function(){return Oc(n)},pagination:!1,key:n.id}))}))),r.a.createElement(wi,{loaderFunction:function(){return e.loadTreatmentPlans(t.state.next)},loading:this.state.loading,hidden:!this.state.next})))):r.a.createElement("div",null,r.a.createElement(cr.a,{bodyStyle:{padding:0},title:this.state.currentPatient?this.state.currentPatient.user.first_name+" TreatmentPlans":"TreatmentPlans",extra:r.a.createElement(da.a.Group,null,r.a.createElement(da.a,{onClick:this.submitCompleteTreatment},r.a.createElement(va.a,{type:"save"}),"Save"),r.a.createElement(da.a,{type:"primary",onClick:function(){return e.props.togglePatientListModal(!0)}},r.a.createElement(va.a,{type:"plus"}),"Add"))}),r.a.createElement(pa.a,{spinning:this.state.loading},this.state.treatmentPlans.map((function(n){return r.a.createElement(cr.a,{bodyStyle:{padding:0},key:n.id,style:{marginTop:15}},r.a.createElement("div",{style:{padding:16}},r.a.createElement("h4",null,n.date?Or()(n.date).format("ll"):null,r.a.createElement(Da.b,{to:"/patient/"+n.patient.id+"/emr/plans"},"\xa0\xa0 ",n.patient.user?n.patient.user.first_name:null," (ID: ",n.patient.custom_id?n.patient.custom_id:n.patient.id,")\xa0"),r.a.createElement("span",null,", ",n.patient.gender),r.a.createElement(ha.a.Button,{size:"small",style:{float:"right"},overlay:r.a.createElement(_a.a,null,r.a.createElement(_a.a.Item,{key:"1",disabled:n.practice&&n.practice.id!=e.props.active_practiceId},r.a.createElement(Da.b,{to:"/patient/"+n.patient.id+"/emr/plans/edit"},r.a.createElement(va.a,{type:"edit"}),"\xa0 Edit")),r.a.createElement(_a.a.Item,{key:"2",onClick:function(){return t.deleteTreatmentPlans(n)},disabled:n.practice&&n.practice.id!=e.props.active_practiceId},r.a.createElement(va.a,{type:"delete"}),"Delete"),r.a.createElement(_a.a.Divider,null),r.a.createElement(_a.a.Item,{key:"3"},r.a.createElement(Da.b,{to:"/patient/"+n.patient+"/emr/timeline"},r.a.createElement(va.a,{type:"clock-circle"}),"\xa0 Patient Timeline")))},r.a.createElement("a",{onClick:function(){return e.loadPDF(n.id)}},r.a.createElement(va.a,{type:"printer"}))))),r.a.createElement(lr.a,{loading:e.state.loading,columns:a,dataSource:n.treatment_plans,footer:function(){return Oc(n)},pagination:!1,key:n.id}))}))),r.a.createElement(wi,{loaderFunction:function(){return e.loadTreatmentPlans(t.state.next)},loading:this.state.loading,hidden:!this.state.next}))}}]),t}(r.a.Component);function Oc(e){return e?r.a.createElement("div",null,e.doctor?r.a.createElement(fa.a,{color:e.doctor?e.doctor.calendar_colour:null},r.a.createElement("b",null,"prescribed by  "+e.doctor.user.first_name," ")):null,e.practice?r.a.createElement(fa.a,{style:{float:"right"}},r.a.createElement(ms.a,{title:"Practice Name"},r.a.createElement("b",null,e.practice.name," "))):null):null}function Dc(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function kc(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Dc(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Dc(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Pc=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).calculateItem=function(e){var t=a.props.form.getFieldsValue;console.log(t()),a.setState((function(e){Object(Oa.a)(e.tableFormValues).forEach((function(e){}))}))},a.removeTests=function(e,t){a.setState((function(a){return{addedLabs:kc({},a.addedLabs,Object(u.a)({},t.id,!1)),tableFormValues:Object(Oa.a)(Object(Us.remove)(a.tableFormValues,(function(t){return t._id!=e})))}}))},a.add=function(e){console.log("item",e),a.setState((function(t){console.log("preview",t);var a=Math.random().toFixed(7);return t.addedLabs[e.id]?(Qt(D,"Item Already Added"),!1):{addedLabs:kc({},t.addedLabs,Object(u.a)({},e.id,!0)),tableFormValues:[].concat(Object(Oa.a)(t.tableFormValues),[kc({},e,{_id:a})])}}))},a.handleSubmit=function(e){var t=Object(f.a)(a);e.preventDefault(),a.props.form.validateFields((function(e,a){if(!e){var n={treatment:[],patient:t.props.match.params.id};t.state.tableFormValues.forEach((function(e){e.cost=a.cost[e._id];var t={name:e.id,cost:e.cost,instruction:e.instruction,is_active:!0,practice:e.practice,margin:e.margin};n.treatment.push(t)}));console.log("DataSet",n)}}))},a.state={lab_test:[],tableFormValues:[],addedLabs:{}},console.log("urgent",a.props.active_practiceId),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadLabs()}},{key:"loadLabs",value:function(){var e=this;Ut(Kt(fe,[e.props.active_practiceId]),(function(t){e.setState({lab_test:t})}),(function(){}))}},{key:"render",value:function(){var e=this,t=this.props.form,a=t.getFieldDecorator,n=(t.getFieldValue,t.getFieldsValue,{labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}}),i=[{title:"Name",dataIndex:"name",key:"name",render:function(e,t){return r.a.createElement("span",null,r.a.createElement("b",null,e))}},{title:"Cost",dataIndex:"cost",key:"cost",render:function(e,t){return r.a.createElement("span",null,r.a.createElement(vr.a.Item,Object.assign({key:"cost[".concat(t._id,"]")},n),a("cost[".concat(t._id,"]"),{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"This field is required."}],initialValue:t.cost})))}},{title:"Total",dataIndex:"total",key:"total",render:function(t,a){return r.a.createElement("span",null,t,r.a.createElement("a",{onClick:function(){return e.removeTests(a._id,a)}},r.a.createElement(va.a,{type:"close-circle",theme:"twoTone",twoToneColor:"#f00"})))}}];return r.a.createElement("div",null,r.a.createElement(vr.a,{onSubmit:this.handleSubmit},r.a.createElement(cr.a,{title:"Patient Lab Orders",bodyStyle:{padding:0},extra:r.a.createElement(vr.a.Item,Object.assign({},{labelCol:{xs:{span:24},sm:{span:24}},wrapperCol:{xs:{span:24},sm:{span:24}}},{style:{marginBottom:0}}),r.a.createElement(da.a,{type:"primary",htmlType:"submit"},"Save Lab Orders"))},r.a.createElement(rr.a,{gutter:16},r.a.createElement(ir.a,{span:7},r.a.createElement(Ea.a,{size:"small",itemLayout:"horizontal",dataSource:this.state.lab_test,renderItem:function(t){return r.a.createElement(Ea.a.Item,null,r.a.createElement(Ea.a.Item.Meta,{title:t.name}),r.a.createElement(da.a,{type:"primary",size:"small",shape:"circle",onClick:function(){return e.add(t)},icon:"arrow-right"}))}})),r.a.createElement(ir.a,{span:17},r.a.createElement(lr.a,{pagination:!1,bordered:!0,dataSource:this.state.tableFormValues,columns:i}))))))}}]),t}(r.a.Component),Sc=vr.a.create()(Pc),xc=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={currentPatient:a.props.currentPatient,active_practiceId:a.props.active_practiceId,loading:!1},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=[{title:"Time",dataIndex:"created_at",key:"name",render:function(e){return r.a.createElement("span",null,Or()(e).format("LLL"))}},{title:"Drug",key:"drug"},{title:"Quantity",dataIndex:"qunatity",key:"quantity"},{title:"Cost Per  Unit",dataIndex:"cost",key:"cost"},{title:"Completed",key:"is_completed",render:function(e,t){return r.a.createElement(pr.a,{checked:t.is_completed})}},{title:"Action",key:"action",render:function(t,a){return r.a.createElement("span",null,r.a.createElement("a",{onClick:function(){return e.editPrescriptionData(a)}},"Edit"),r.a.createElement(sr.a,{type:"vertical"}),r.a.createElement("a",{href:"javascript:;"},"Delete"))}}];return r.a.createElement("div",null,r.a.createElement(y.d,null,r.a.createElement(y.b,{exact:!0,path:"/patient/:id/emr/labtrackings/add",render:function(t){return r.a.createElement(Sc,Object.assign({},e.state,t))}}),r.a.createElement(cr.a,{title:this.state.currentPatient?this.state.currentPatient.user.first_name+" Lab Order":"Patients Lab Order",extra:r.a.createElement(da.a.Group,null,r.a.createElement(Da.b,{to:"/patient/"+this.props.match.params.id+"/emr/labtrackings/add"},r.a.createElement(da.a,null,r.a.createElement(va.a,{type:"plus"}),"Add")))},r.a.createElement(lr.a,{loading:this.state.loading,columns:t,dataSource:this.state.payments}))))}}]),t}(r.a.Component);function jc(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ic(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?jc(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):jc(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Cc=ma.a.Search,wc=hr.a.TabPane,Mc=no.a.Text,Ac={_id:null,quantity:0,batch:null},Tc=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).selectedDefaultDate=function(e){a.setState({selectedDate:e})},a.loadEditInvoiceData=function(){var e=Object(f.a)(a),t=a.props.editInvoice;a.setState((function(a){var n=[];t.procedure.forEach((function(t){var a=Math.random().toFixed(7);n.push(Ic({},t.procedure_data,{},t,{selectedDoctor:t.doctor_data,selectedDate:Or()(t.date).isValid()?Or()(t.date):null,_id:a,item_type:Ia})),e.changeNetPrice(a,t.discount)}));var r=Ic({},a.stocks);return t.inventory.forEach((function(t){var i=Math.random().toFixed(7);if(a.itemBatches[t.inventory]){if(r[t.inventory]){var l=r[t.inventory];l[t.batch_number],l[t.batch_number]+=t.unit}else{var o={};o[t.batch_number]=t.unit,r[t.inventory]=o}a.itemBatches[t.inventory].forEach((function(e){e.batch_number==t.batch_number&&(t.selectedBatch=e)}))}n.push(Ic({},t.inventory_item_data,{},t,{selectedDoctor:t.doctor_data,_id:i,item_type:wa,selectOption:!!t.offers})),e.changeNetPrice(i,t.discount)})),{tableFormValues:n,selectedDate:Or()(t.date).isValid()?Or()(t.date):null,stocks:r,notes:t.notes}}))},a.remove=function(e){a.setState((function(t){var a=[];return t.tableFormValues.forEach((function(t){t._id!=e&&a.push(t)})),{tableFormValues:a}}))},a.add=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.random().toFixed(7);a.setState((function(a){return e.item_type==Ia?e=Ic({},e,{id:void 0,unit_cost:e.cost,procedure:e.id,selectedDoctor:a.selectedDoctor?a.selectedDoctor:null,selectedDate:Or()(),taxes:e.taxes.map((function(e){return e.id}))}):e.item_type==wa&&(e=Ic({},e,{id:void 0,inventory:e.id,unit_cost:e.retail_without_tax,selectedDoctor:a.selectedDoctor?a.selectedDoctor:null})),{tableFormValues:[Ic({},Ac,{},e,{id:void 0,_id:t})].concat(Object(Oa.a)(a.tableFormValues))}}))},a.selectDoctor=function(e,t,n){a.setState((function(a){var r=[];return a.tableFormValues.forEach((function(a){a._id==t&&a.item_type==n?r.push(Ic({},a,{selectedDoctor:e})):r.push(a)})),{tableFormValues:r}}))},a.selectedDate=function(e,t,n){a.setState((function(a){var r=[];return a.tableFormValues.forEach((function(a){a._id==t&&a.item_type==n?r.push(Ic({},a,{selectedDate:e})):r.push(a)})),{tableFormValues:r}}))},a.selectBatch=function(e,t,n){a.setState((function(a){var r=[];return a.tableFormValues.forEach((function(a){a._id==t&&a.item_type==n?r.push(Ic({},a,{selectedBatch:e})):r.push(a)})),{tableFormValues:r}}))},a.addPrescription=function(e){var t=Object(f.a)(a);e.drugs.forEach((function(a){a.inventory.maintain_inventory&&t.add(Ic({},a.inventory,{item_type:wa,inventory:e.inventory.id,id:void 0}))})),t.setState((function(t){return{selectedPrescriptions:[].concat(Object(Oa.a)(t.selectedPrescriptions),[e.id])}}))},a.handleSubmit=function(e){var t=Object(f.a)(a);a.props.form.validateFields((function(a,n){if(!a){t.setState({});var r={promo_code:t.state.promoCode,practice:t.props.active_practiceId,patient:t.props.match.params.id,unit:null,cost:null,discount:null,taxes:0,total:null,procedure:[],inventory:[],prescription:t.state.selectedPrescriptions,notes:n.notes,date:t.state.selectedDate&&Or()(t.state.selectedDate).isValid()?t.state.selectedDate.format("YYYY-MM-DD"):null};t.state.tableFormValues.forEach((function(e){switch(e.unit=n.unit[e._id],e.taxes=n.taxes[e._id],e.item_type){case Ia:r.procedure.push({name:e.name,unit:e.unit,procedure:e.procedure,default_notes:null,is_active:!0,margin:e.margin,taxes:e.taxes,unit_cost:e.unit_cost,discount:e.discount,discount_type:e.discount_type,offers:e.offers,doctor:e.selectedDoctor?e.selectedDoctor.id:null,id:t.props.editId?e.id:void 0});break;case wa:r.inventory.push({inventory:e.inventory,name:e.name,unit:e.unit,taxes:e.taxes,unit_cost:e.unit_cost,discount:e.discount,discount_type:e.discount_type,offers:e.offers,doctor:e.selectedDoctor?e.selectedDoctor.id:null,instruction:e.instruction,is_active:!0,batch_number:e.selectedBatch?e.selectedBatch.batch_number:null,id:t.props.editId?e.id:void 0});break;default:return null}}));var i=function(a){if(t.setState({saveLoading:!1}),Qt("Inventory updated successfully"),t.props.loadData(),e)t.props.history.goBack();else{var n="/patient/"+t.props.match.params.id+"/billing/payments/add?invoices="+a.id;t.props.history.push(n)}},l=function(){t.setState({saveLoading:!1})};t.props.editId?Ht(Kt(Re,[t.props.editId]),r,i,l):qt(Te,r,i,l)}}))},a.addItemThroughQR=function(e){var t=Object(f.a)(a);t.setState({loadingQr:!0});var n=e.split("*");Ut(Et,(function(e){var a=t.props.form,r=a.setFieldsValue,i=(a.getFieldsValue,a.getFieldValue),l=Math.random().toFixed(7),o=!0;if(t.state.tableFormValues.forEach((function(e){if(e.name==n[0]){var t=e._id,a=e.selectedBatch.batch_number,l=i("unit[".concat(t,"]"));a==n[1]&&(o=!1,r(Object(u.a)({},"unit[".concat(t,"]"),l+1)))}})),o){var s=null;e.item_type_stock&&e.item_type_stock.item_stock&&e.item_type_stock.item_stock.forEach((function(t){t.batch_number==n[1]&&(e.selectedBatch=t,s=t.unit_cost)})),t.add(Ic({},e,{item_type:wa}),l),r(Object(u.a)({},"unit_cost[".concat(l,"]"),s))}t.setState((function(e){return{loadingQr:!1,qrValue:""}}))}),(function(){}),{qr:e,form:"Invoice"})},a.setQrValue=function(e){var t=e.target.value;a.setState({qrValue:t})},a.searchValues=function(e,t){var n=Object(f.a)(a),r=e.target.value;a.setState({searchItem:r},(function(){t==wa?n.loadInventoryItemList():t==Ca?n.loadPrescriptions():t==Ia&&n.loadProcedures()}))},a.changeNetPrice=function(e,t){var n=Object(f.a)(a),r=a.props.form,i=r.getFieldsValue;r.setFields;setTimeout((function(){var a=i();a.unit_cost[e]||a.unit[e]||a.discount[e]||a.discount_type[e]?n.setState((function(n){var r=[];return n.tableFormValues.forEach((function(i){if(i._id==e){var l=0,o=0,s="%",c=null,u=!(!i.selectOption&&0!=i.selectOption)&&i.selectOption;a.taxes[e].forEach((function(e){n.taxes_list.forEach((function(t){t.id==e&&(l+=t.tax_value)}))})),t&&"0"==t&&(u=!1),a.discount_type&&a.discount_type[e]?(o=a.discount[e],s=a.discount_type[e],c=null):(o=a.discount[e]?a.discount[e].toString().split("#")[0]:"",s=a.discount[e]?a.discount[e].toString().split("#")[1]:"",c=a.discount[e]?a.discount[e].toString().split("#")[2]:null);var d=a.unit[e]*(a.unit_cost[e]?a.unit_cost[e]:0);"%"==s&&o?(o>100&&(o=100),d*=1-.01*o):"INR"==s&&o&&(d>o?d-=o:d=0);var p=(d*=1+.01*l)/a.unit[e];r.push(Ic({},i,{total_unit_cost:p,total:d,selectOption:u,discount:o,discount_type:s,offers:c}))}else r.push(i)})),{tableFormValues:r}})):n.setState({retail_price:0}),n.checkPromoCode()}),1e3)},a.applyPromoCodeDiscounts=function(e){var t=Object(f.a)(a),n=t.props.form,r=n.setFieldsValue,i=n.getFieldsValue,l=[],o=i(),s=e,c={};t.state.tableFormValues.forEach((function(e){var a=0,n=0,r=!(!e.selectOption&&0!=e.selectOption)&&e.selectOption;o.taxes[e._id].forEach((function(e){t.state.taxes_list.forEach((function(t){t.id==e&&(a+=t.tax_value)}))}));var i=o.unit[e._id]*(o.unit_cost[e._id]?o.unit_cost[e._id]:0);s&&(i>s?(i-=s,n=s,s=0):(s-=i,n=i,i=0));var u=(i*=1+.01*a)/o.unit[e._id];l.push(Ic({},e,{total_unit_cost:u,total:i,selectOption:r,discount:s,discount_type:"INR",offers:null})),c["discount[".concat(e._id,"]")]=n.toFixed(2),c["discount_type[".concat(e._id,"]")]="INR"})),t.setState({tableFormValues:l}),r(c)},a.loadLoyaltyDiscount=function(){var e=Object(f.a)(a);Ut(Kt(ee,[a.props.active_practiceId]),(function(t){e.setState({offers:t})}),(function(){e.setState({})}))},a.onChangeOption=function(e,t){Object(f.a)(a).setState((function(e){var a=[];return e.tableFormValues.forEach((function(e){e._id==t?a.push(Ic({},e,{selectOption:!0})):a.push(e)})),{tableFormValues:a}}))},a.onChangeOffer=function(e,t){Object(f.a)(a).setState((function(a){var n=[];return a.tableFormValues.forEach((function(r){r._id==t?("none"==e&&n.push(Ic({},r,{loyaltyDiscount:null})),"0"==e?n.push(Ic({},r,{selectOption:!1})):a.offers.forEach((function(t){t.id==e&&n.push(Ic({},r,{loyaltyDiscount:t.discount}))}))):n.push(r)})),{tableFormValues:n}}))},a.onchangeDiscountSimple=function(e,t){console.log(e,t),Object(f.a)(a).setState((function(a){var n=[];return a.tableFormValues.forEach((function(a){if(a._id==t){var r=a.unit_cost/(1+.01*e);console.log(r),n.push(Ic({},a,{loyaltyDiscount:e}))}else n.push(a)})),{tableFormValues:n}}))},a.enterPromoCode=function(e){a.setState({promoCode:e.target.value})},a.calculateGrandTotalWithoutDiscount=function(){var e=0,t=Object(f.a)(a),n=(0,a.props.form.getFieldsValue)();return a.state.tableFormValues.forEach((function(a){var r=0;n.taxes[a._id].forEach((function(e){t.state.taxes_list.forEach((function(t){t.id==e&&(r+=t.tax_value)}))}));var i=n.unit[a._id]*(n.unit_cost[a._id]?n.unit_cost[a._id]:0);e+=i*=1+.01*r})),e},a.checkPromoCode=function(e){var t=Object(f.a)(a);t.setState({promoCodeCheckLoading:!0});var n={promo_code:a.state.promoCode,practice:a.props.active_practiceId,patient:t.props.match.params.id,amount:a.calculateGrandTotalWithoutDiscount()};n.promo_code?Ut(ie,(function(e){t.setState({appliedPromoCodeDiscount:e.discount,promoCodeCheckLoading:!1}),t.applyPromoCodeDiscounts(e.discount)}),(function(){t.setState({promoCodeCheckLoading:!1,appliedPromoCodeDiscount:null,promoCode:""})}),n):t.setState({promoCodeCheckLoading:!1})},a.removePromoCode=function(){a.setState({appliedPromoCodeDiscount:0,promoCodeCheckLoading:!1,promoCode:""}),a.applyPromoCodeDiscounts(0)},a.state={classType:e.type,tableFormValues:[],maxQuantityforConsume:{},items:{},practiceDoctors:[],selectedPrescriptions:[],selectedDate:Or()(),stocks:{},itemBatches:{},saveLoading:!1,qrValue:"",searchItem:"",selectedDoctor:{},tempValues:{},offers:[],loading:!1,taxes_list:[],promoCode:"",appliedPromoCodeDiscount:null,promoCodeCheckLoading:!1},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this;mi(this),this.loadInventoryItemList(),this.loadProcedures(),this.loadPrescriptions(),this.loadTaxes(),this.loadLoyaltyDiscount(),this.props.editId&&setTimeout(function(){e.setState({loading:!1}),e.loadEditInvoiceData()}.bind(this),2e3)}},{key:"loadInventoryItemList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this,a=this.state.searchItem;t.setState({loadingInventory:!0});var n=function(e){var n=e.results,r=[];t.state.searchItem==a&&t.setState((function(t){var a=Ic({},t.stocks),i={};n.forEach((function(e){if(e.item_type==ja){if(r.push(e),a[e.id]){var t=a[e.id];e.item_type_stock&&e.item_type_stock.item_stock&&e.item_type_stock.item_stock.forEach((function(e){t[e.batch_number],t[e.batch_number]+=e.quantity}))}else{var n={};e.item_type_stock&&e.item_type_stock.item_stock&&e.item_type_stock.item_stock.forEach((function(e){n[e.batch_number]=e.quantity})),a[e.id]=n}i[e.id]=e.item_type_stock.item_stock}}));var l=t.items;return l[wa]=Ic({},e,{results:r}),{items:l,stocks:Ic({},t.stocks,{},a),itemBatches:Ic({},t.itemBatches,{},i),loadingInventory:!1}}),(function(){t.props.editId&&t.loadEditInvoiceData()}))},r=function(){t.setState({loadingInventory:!1})},i={practice:this.props.active_practiceId,maintain_inventory:!0,page:e};this.state.searchItem&&(i.item_name=a),Ut(ht,n,r,i)}},{key:"loadProcedures",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this,a=this.state.searchItem,n=function(e){var n=t.state.items;n[Ia]=e,t.state.searchItem==a&&t.setState({items:n})},r=function(){},i={practice:this.props.active_practiceId,page:e};this.state.searchItem&&(i.name=a),Ut(Kt(ae,[this.props.active_practiceId]),n,r,i)}},{key:"loadPrescriptions",value:function(){var e=this,t=this.state.searchItem,a={practice:this.props.active_practiceId};this.state.searchItem&&(a.item_name=t),Ut(Kt("patients/unpaid_prescriptions/?id=%s",[e.props.match.params.id]),(function(a){e.state.searchItem==t&&e.setState((function(e){return{items:Ic({},e.items,Object(u.a)({},Ca,a))}}))}),(function(){}),a)}},{key:"loadTaxes",value:function(){var e=this;Ut(Kt($,[this.props.active_practiceId]),(function(t){e.setState({taxes_list:t})}),(function(){}))}},{key:"render",value:function(){var e=this,t=this,a=this.props.form.getFieldDecorator,n={labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:24},md:{span:24},lg:{span:24},xl:{span:24}}};a("keys",{initialValue:[]});var i=[{title:"Item Name",key:"item_name",dataIndex:"name",width:180,render:function(e,i){switch(i.item_type){case Ia:return r.a.createElement(vr.a.Item,Object.assign({key:"name[".concat(i._id,"]")},n),a("name[".concat(i._id,"]"),{validateTrigger:["onChange","onBlur"],initialValue:e,rules:[{required:!0,message:"This field is required."}]})(r.a.createElement(ma.a,{min:0,placeholder:"Item name",size:"small"})),r.a.createElement("span",null,"by \xa0\xa0"),r.a.createElement(ha.a,{placement:"topCenter",overlay:r.a.createElement(_a.a,null,t.state.practiceDoctors.map((function(e){return r.a.createElement(_a.a.Item,{key:"0"},r.a.createElement("a",{onClick:function(){return t.selectDoctor(e,i._id,Ia)}},e.user.first_name))}))),trigger:["click"]},r.a.createElement("a",{className:"ant-dropdown-link",href:"#"},r.a.createElement("b",null,i.selectedDoctor.user?i.selectedDoctor.user.first_name:"No DOCTORS Found"))),r.a.createElement("span",null," \xa0\xa0on\xa0\xa0"),r.a.createElement(yr.a,{value:i.selectedDate,size:"small",onChange:function(e){return t.selectedDate(e,i._id,Ia)},format:"DD-MM-YYYY"}));case Ca:return r.a.createElement("b",null,i.name);case wa:return r.a.createElement("div",null,r.a.createElement("span",null,i.name),r.a.createElement("span",null,r.a.createElement("br",null),"by \xa0\xa0"),r.a.createElement(ha.a,{placement:"topCenter",overlay:r.a.createElement(_a.a,null,t.state.practiceDoctors.map((function(e){return r.a.createElement(_a.a.Item,{key:e.id},r.a.createElement("a",{onClick:function(){return t.selectDoctor(e,i._id,wa)}},e.user.first_name))}))),trigger:["click"]},r.a.createElement("a",{className:"ant-dropdown-link",href:"#"},r.a.createElement("b",null,i.selectedDoctor.user?i.selectedDoctor.user.first_name:"No DOCTORS Found"))),r.a.createElement("span",null,r.a.createElement("br",null),"from batch \xa0\xa0"),r.a.createElement(ha.a,{placement:"topCenter",overlay:r.a.createElement(_a.a,null,t.state.itemBatches[i.inventory]&&t.state.itemBatches[i.inventory].map((function(e,a){return Or()()>=Or()(e.expiry_date)?r.a.createElement(_a.a.Item,{key:a,disabled:!0},e.batch_number,"\xa0(",e.quantity,") \xa0\xa0",e.expiry_date):r.a.createElement(_a.a.Item,{key:a},r.a.createElement("a",{onClick:function(){return t.selectBatch(e,i._id,wa)}},e.batch_number,"\xa0(",e.quantity,") \xa0\xa0",e.expiry_date))}))),trigger:["click"]},r.a.createElement("a",{className:"ant-dropdown-link",href:"#"},r.a.createElement("b",null,i.selectedBatch?i.selectedBatch.batch_number:"Select Batch"))));default:return null}}}];return i=(i=i.concat([{title:"Unit",key:"unit",width:100,dataIndex:"unit",render:function(i,l){return l.item_type==wa?r.a.createElement(vr.a.Item,Object.assign({key:"unit[".concat(l._id,"]")},n),a("unit[".concat(l._id,"]"),{validateTrigger:["onChange","onBlur"],initialValue:l.unit||1,rules:[{required:!0,message:"This field is required."}]})(r.a.createElement(Er.a,{min:1,max:l.selectedBatch&&t.state.stocks[l.inventory]&&t.state.stocks[l.inventory][l.selectedBatch.batch_number]?t.state.stocks[l.inventory][l.selectedBatch.batch_number]:0,placeholder:"units",size:"small",onChange:function(t){return e.changeNetPrice(l._id,l.discount)},disabled:!(l.selectedBatch&&t.state.stocks[l.inventory]&&t.state.stocks[l.inventory][l.selectedBatch.batch_number])}))):r.a.createElement(vr.a.Item,Object.assign({key:"unit[".concat(l._id,"]")},n),a("unit[".concat(l._id,"]"),{initialValue:l.unit||1,validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"This field is required."}]})(r.a.createElement(Er.a,{min:1,max:100,placeholder:"unit",size:"small",onChange:function(t){return e.changeNetPrice(l._id,l.discount)}})))}},{title:"Unit Cost",key:"unit_cost",width:100,dataIndex:"unit_cost",render:function(e,i){return r.a.createElement(vr.a.Item,Object.assign({key:"unit_cost[".concat(i._id,"]")},n),a("unit_cost[".concat(i._id,"]"),{validateTrigger:["onChange","onBlur"],initialValue:i.item_type==wa?i.retail_without_tax:i.cost,rules:[{required:!0,message:"This field is required."}]})(r.a.createElement(Er.a,{min:1,placeholder:"Unit Cost",size:"small",onChange:function(){return t.changeNetPrice(i._id,i.discount)}})))}},{title:"Discount",key:"discount",dataIndex:"discount",render:function(i,l){return l.selectOption?r.a.createElement(vr.a.Item,{key:"discount[".concat(l._id,"]"),extra:r.a.createElement("span",null,l&&l.discount?l.discount+" "+l.discount_type+" Discount":null," ")},a("discount[".concat(l._id,"]"),{initialValue:l.offers,validateTrigger:["onChange","onBlur"]})(r.a.createElement(ga.a,{style:{width:150},onChange:function(e){return t.changeNetPrice(l._id,e)},size:"small",disabled:e.state.appliedPromoCodeDiscount},r.a.createElement(ga.a.Option,{value:"0"},"Custom Offer"),t.state.offers.map((function(e){return r.a.createElement(ga.a.Option,{value:e.discount+"#"+e.unit+"#"+e.id},e.code)}))))):r.a.createElement(vr.a.Item,Object.assign({extra:r.a.createElement("a",{onClick:function(){return t.onChangeOption("selectOption",l._id)},disabled:e.state.appliedPromoCodeDiscount},"Choose Offer"),key:"discount[".concat(l._id,"]")},n),a("discount[".concat(l._id,"]"),{initialValue:l.discount?l.discount:0,validateTrigger:["onChange","onBlur"]})(r.a.createElement(ma.a,{placeholder:"discount",disabled:e.state.appliedPromoCodeDiscount,addonAfter:a("discount_type[".concat(l._id,"]"),{initialValue:l.discount_type||"%"})(r.a.createElement(ga.a,{onChange:function(e){return t.changeNetPrice(l._id,e)},disabled:e.state.appliedPromoCodeDiscount},Vn.map((function(e){return r.a.createElement(ga.a.Option,{value:e.value}," ",e.value)})))),size:"small",style:{width:150},onChange:function(t){return e.changeNetPrice(l._id,t.target.value)}})))}},{title:"Taxes",key:"taxes",dataIndex:"taxes",render:function(i,l){return r.a.createElement(vr.a.Item,Object.assign({key:"taxes[".concat(l._id,"]")},n),a("taxes[".concat(l._id,"]"),{initialValue:l.taxes||[],validateTrigger:["onChange","onBlur"]})(r.a.createElement(ga.a,{placeholder:"Taxes",size:"small",mode:"multiple",style:{width:150},onChange:function(){return t.changeNetPrice(l._id,l.discount)}},e.state.taxes_list&&e.state.taxes_list.map((function(e){return r.a.createElement(ga.a.Option,{value:e.id},e.name,"@",e.tax_value,"%")})))))}},{title:"Total Unit Cost",key:"total_unit_cost",width:80,align:"right",dataIndex:"total_unit_cost",render:function(e,t){return r.a.createElement("span",null,e?e.toFixed(2):"0.00")}},{title:"Total",key:"total",width:80,align:"right",dataIndex:"total",render:function(e,t){return e?e.toFixed(2):"0.00"}}])).concat([{key:"_id",dataIndex:"_id",render:function(e,a){return r.a.createElement(da.a,{icon:"close",onClick:function(){return t.remove(a._id)},type:"danger",shape:"circle",size:"small"})}}]),r.a.createElement("div",null,r.a.createElement(pa.a,{spinning:this.state.saveLoading,tip:"Saving Invoice..."},r.a.createElement(pa.a,{spinning:this.state.promoCodeCheckLoading,tip:"Checking Promo Code and Discounts..."},r.a.createElement(cr.a,{title:this.props.editId?"Edit Invoice (INV "+this.props.editId+")":"Add Invoice",extra:r.a.createElement(Cc,{loading:this.state.loadingQr,value:this.state.qrValue,onChange:this.setQrValue,placeholder:"Search QR Code",onSearch:this.addItemThroughQR,style:{width:200}}),bodyStyle:{padding:0}},r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:6},r.a.createElement(hr.a,{size:"small",type:"card"},r.a.createElement(wc,{tab:wa,key:wa},r.a.createElement("div",{style:{backgroundColor:"#ddd",padding:8}},r.a.createElement(ma.a.Search,{placeholder:"Search in "+wa,onChange:function(t){return e.searchValues(t,wa)}})),r.a.createElement(Ea.a,{size:"small",itemLayout:"horizontal",loading:this.state.loadingInventory,dataSource:this.state.items&&this.state.items[wa]?this.state.items[wa].results:[],renderItem:function(t){return r.a.createElement(Ea.a.Item,null,r.a.createElement(Ea.a.Item.Meta,{title:t.name+" ("+t.total_quantity+")"}),r.a.createElement(da.a,{type:"primary",size:"small",shape:"circle",onClick:function(){return e.add(Ic({},t,{item_type:wa}))},icon:"arrow-right"}))}}),this.state.items&&this.state.items[wa]?r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("a",{style:{margin:5},disabled:!this.state.items[wa].previous,onClick:function(){return e.loadInventoryItemList(e.state.items[wa].previous)}},r.a.createElement(va.a,{type:"left"}),"Previous"),r.a.createElement(sr.a,{type:"vertical"}),r.a.createElement("a",{style:{margin:5},disabled:!this.state.items[wa].next,onClick:function(){return e.loadInventoryItemList(e.state.items[wa].next)}},"Next",r.a.createElement(va.a,{type:"right"}))):null),r.a.createElement(wc,{tab:Ca,key:Ca},r.a.createElement(Ea.a,{size:"small",itemLayout:"horizontal",dataSource:this.state.items?this.state.items[Ca]:[],renderItem:function(t){return r.a.createElement(Ea.a.Item,null,r.a.createElement(Ea.a.Item.Meta,{title:t.drugs.map((function(e){return r.a.createElement("div",null,r.a.createElement("span",null,e.name)," ",e.inventory.maintain_inventory?null:r.a.createElement(fa.a,{color:"red",style:{float:"right",lineHeight:"18px"}},"Not Sold"),r.a.createElement("br",null))})),description:t.doctor?r.a.createElement(fa.a,{color:t.doctor?t.doctor.calendar_colour:null},r.a.createElement("b",null,"prescribed by  "+t.doctor.user.first_name," ")):null}),r.a.createElement(da.a,{type:"primary",size:"small",shape:"circle",onClick:function(){return e.addPrescription(Ic({},t))},icon:"arrow-right"}))}})),r.a.createElement(wc,{tab:Ia,key:Ia},r.a.createElement("div",{style:{backgroundColor:"#ddd",padding:8}},r.a.createElement(ma.a.Search,{placeholder:"Search in "+Ia,onChange:function(t){return e.searchValues(t,Ia)}})),r.a.createElement(Ea.a,{size:"small",itemLayout:"horizontal",dataSource:this.state.items&&this.state.items[Ia]?this.state.items[Ia].results:[],renderItem:function(t){return r.a.createElement(Ea.a.Item,null,r.a.createElement(Ea.a.Item.Meta,{title:t.name}),r.a.createElement(da.a,{type:"primary",size:"small",shape:"circle",onClick:function(){return e.add(Ic({},t,{item_type:Ia}))},icon:"arrow-right"}))}}),this.state.items&&this.state.items[Ia]?r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("a",{style:{margin:5},disabled:!this.state.items[Ia].previous,onClick:function(){return e.loadProcedures(e.state.items[Ia].previous)}},r.a.createElement(va.a,{type:"left"}),"Previous"),r.a.createElement(sr.a,{type:"vertical"}),r.a.createElement("a",{style:{margin:5},disabled:!this.state.items[Ia].next,onClick:function(){return e.loadProcedures(e.state.items[Ia].next)}},"Next",r.a.createElement(va.a,{type:"right"}))):null))),r.a.createElement(ir.a,{span:18},r.a.createElement(vr.a,null,r.a.createElement(lr.a,{pagination:!1,loading:t.state.loading,bordered:!0,dataSource:this.state.tableFormValues,columns:i}),r.a.createElement(s.a,{offsetBottom:0},r.a.createElement(cr.a,null,r.a.createElement(ir.a,{span:8},r.a.createElement(vr.a.Item,Object.assign({label:"Notes",key:"notes"},n),a("notes",{initialValue:this.state.notes,validateTrigger:["onChange","onBlur"]})(r.a.createElement(ma.a.TextArea,{row:2,placeholder:"unit",size:"small"}))),r.a.createElement("h3",null,"Grand Total: ",r.a.createElement("b",null,this.state.tableFormValues.reduce((function(e,t){return(parseFloat(e)+(t&&t.total?t.total:0)).toFixed(2)}),0)))),r.a.createElement("span",null," \xa0\xa0on\xa0\xa0"),r.a.createElement(yr.a,{value:this.state.selectedDate,onChange:function(t){return e.selectedDefaultDate(t)},format:"DD-MM-YYYY",allowClear:!1}),r.a.createElement(vr.a.Item,Object.assign({},{labelCol:{xs:{span:24},sm:{span:24}},wrapperCol:{xs:{span:24},sm:{span:24}}},{style:{marginBottom:0,float:"right"}}),r.a.createElement(da.a,{type:"primary",htmlType:"submit",onClick:function(){return e.handleSubmit(!0)},style:{margin:5}},"Save Invoice"),r.a.createElement(da.a,{type:"primary",htmlType:"submit",onClick:function(){return e.handleSubmit(!1)},style:{margin:5}},"Save & Create Payment"),t.props.history?r.a.createElement(da.a,{style:{margin:5,float:"right"},onClick:function(){return t.props.history.goBack()}},"Cancel"):null)))),r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:12,style:{padding:10}},r.a.createElement("div",null,this.state.appliedPromoCodeDiscount?r.a.createElement("div",null,r.a.createElement(fa.a,null,"'",this.state.promoCode,"' Applied ",r.a.createElement(va.a,{onClick:function(){return e.removePromoCode()},theme:"twoTone",twoToneColor:"#f00",type:"close-circle"})),r.a.createElement(Mc,{type:"success"},r.a.createElement("br",null),"Discount INR ",this.state.appliedPromoCodeDiscount)):r.a.createElement("div",null,r.a.createElement(Cc,{enterButton:"Apply",value:this.state.promoCode,placeholder:"Promo Code",onChange:this.enterPromoCode,onSearch:this.checkPromoCode,style:{width:200}})))))))))))}}]),t}(r.a.Component),Rc=vr.a.create()(Tc);function Lc(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Fc(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Lc(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Lc(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}ma.a.Search,yr.a.MonthPicker,hr.a.TabPane;var Nc={_id:null,quantity:0,batch:null},Yc=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).selectedDefaultDate=function(e){a.setState({selectedDate:e})},a.loadEditInvoiceData=function(){var e=a.props.editInvoice;a.setState((function(t){var a=[];e.procedure.forEach((function(e){a.push(Fc({},e.procedure_data,{},e,{selectedDoctor:e.doctor_data,selectedDate:Or()(e.date).isValid()?Or()(e.date):null,_id:Math.random().toFixed(7),item_type:Ia}))}));var n=Fc({},t.stocks);return e.inventory.forEach((function(e){if(t.itemBatches[e.inventory]){if(n[e.inventory]){var r=n[e.inventory];r[e.batch_number],r[e.batch_number]+=e.unit}else{var i={};i[e.batch_number]=e.unit,n[e.inventory]=i}t.itemBatches[e.inventory].forEach((function(t){t.batch_number==e.batch_number&&(e.selectedBatch=t)}))}a.push(Fc({},e.inventory_item_data,{},e,{selectedDoctor:e.doctor_data,_id:Math.random().toFixed(7),item_type:wa}))})),{tableFormValues:a,selectedDate:Or()(e.date).isValid()?Or()(e.date):null,stocks:n}}))},a.remove=function(e){a.setState((function(t){var a=[];return t.tableFormValues.forEach((function(t){t._id!=e&&a.push(t)})),{tableFormValues:a}}))},a.add=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.random().toFixed(7);a.setState((function(a){return e.item_type==Ia?e=Fc({},e,{id:void 0,unit_cost:e.cost,procedure:e.id,selectedDoctor:a.selectedDoctor?a.selectedDoctor:null,selectedDate:Or()(),taxes:e.taxes.map((function(e){return e.id}))}):e.item_type==wa&&(e=Fc({},e,{id:void 0,inventory:e.id,unit_cost:e.retail_without_tax,selectedDoctor:a.selectedDoctor?a.selectedDoctor:null})),{tableFormValues:[].concat(Object(Oa.a)(a.tableFormValues),[Fc({},Nc,{},e,{id:void 0,_id:t})])}}))},a.selectDoctor=function(e,t,n){a.setState((function(a){var r=[];return a.tableFormValues.forEach((function(a){a._id==t&&a.item_type==n?r.push(Fc({},a,{selectedDoctor:e})):r.push(a)})),{tableFormValues:r}}))},a.selectedDate=function(e,t,n){a.setState((function(a){var r=[];return a.tableFormValues.forEach((function(a){a._id==t&&a.item_type==n?r.push(Fc({},a,{selectedDate:e})):r.push(a)})),{tableFormValues:r}}))},a.selectBatch=function(e,t,n){a.setState((function(a){var r=[];return a.tableFormValues.forEach((function(a){a._id==t&&a.item_type==n?r.push(Fc({},a,{selectedBatch:e})):r.push(a)})),{tableFormValues:r}}))},a.addPrescription=function(e){var t=Object(f.a)(a);e.drugs.forEach((function(a){a.inventory.maintain_inventory&&t.add(Fc({},a.inventory,{item_type:wa,inventory:e.inventory.id,id:void 0}))})),t.setState((function(t){return{selectedPrescriptions:[].concat(Object(Oa.a)(t.selectedPrescriptions),[e.id])}}))},a.handleSubmit=function(e){var t=Object(f.a)(a);e.preventDefault(),a.props.form.validateFields((function(e,n){if(!e){t.setState({saveLoading:!0});var r={bank:"",number:"",practice:t.props.active_practiceId,return_mode:null,invoice:a.props.editInvoice.id,procedure:[],inventory:[],notes:n.notes,patient:t.props.match.params.id,staff:a.props.editInvoice.staff_data?a.props.editInvoice.staff_data.id:null,prescription:t.state.selectedPrescriptions,date:t.state.selectedDate&&Or()(t.state.selectedDate).isValid()?t.state.selectedDate.format("YYYY-MM-DD"):null,with_tax:!!a.state.return_with_tax,cash_return:n.cash_return,advance_value:a.state.returnCashAvailable-n.cash_return||0};t.state.tableFormValues.forEach((function(e){e.unit=n.unit[e._id];var t=e.id;if(delete e.id,e.unit)switch(e.item_type){case Ia:r.procedure.push(Fc({},e,{unit:e.unit,procedure_inv:t}));break;case wa:r.inventory.push(Fc({},e,{unit:e.unit,inventory_inv:t}));break;default:return null}}));qt(ze,r,(function(e){t.setState({saveLoading:!1}),Qt("Inventory updated successfully"),t.props.loadData();var a="/patient/"+t.props.match.params.id+"/billing/invoices";t.props.history.push(a)}),(function(){t.setState({saveLoading:!1})}))}}))},a.addItemThroughQR=function(e){var t=Object(f.a)(a);t.setState({loadingQr:!0});var n=e.split("*");Ut(Et,(function(e){var a=t.props.form,r=a.setFieldsValue,i=(a.getFieldsValue,a.getFieldValue),l=Math.random().toFixed(7),o=!0;if(t.state.tableFormValues.forEach((function(e){if(e.name==n[0]){var t=e._id,a=e.selectedBatch.batch_number,l=i("unit[".concat(t,"]"));a==n[1]&&(o=!1,r(Object(u.a)({},"unit[".concat(t,"]"),l+1)))}})),o){var s=null;e.item_type_stock&&e.item_type_stock.item_stock&&e.item_type_stock.item_stock.forEach((function(t){t.batch_number==n[1]&&(e.selectedBatch=t,s=t.unit_cost)})),t.add(Fc({},e,{item_type:wa}),l),r(Object(u.a)({},"unit_cost[".concat(l,"]"),s))}t.setState((function(e){return{loadingQr:!1,qrValue:""}}))}),(function(){}),{qr:e,form:"Invoice"})},a.setQrValue=function(e){var t=e.target.value;a.setState({qrValue:t})},a.searchValues=function(e){var t=e.target.value;a.setState({searchItem:t},(function(){this.loadInventoryItemList()}))},a.changeNetPrice=function(e){var t=Object(f.a)(a),n=a.props.form,r=n.getFieldsValue;n.setFields;setTimeout((function(){var a=r();a.total_unit_cost[e]?t.setState((function(t){var n=[];return t.tableFormValues.forEach((function(r){if(r._id==e){var i=0;a.taxes[e].forEach((function(e){t.taxes_list.forEach((function(t){t.id==e&&(i+=t.tax_value)}))}));var l=a.total_unit_cost[e]/(1+.01*i);n.push(Fc({},r,{unit_cost:l}))}else n.push(r)})),{tableFormValues:n}})):t.setState({retail_price:0})}),1e3)},a.onChangeHandle=function(e){var t=Object(f.a)(a);a.setState({return_with_tax:e.target.checked},(function(){t.calculateReturnCashAvailable()}))},a.calculateReturnCashAvailable=function(){var e=Object(f.a)(a),t=a.state.editInvoice.payments.reduce((function(e,t){return e+t.pay_amount}),0),n=a.state.editInvoice.total-t,r=0,i=a.props.form.getFieldsValue;setTimeout((function(){var t=i(),a=e.state.return_with_tax;e.state.tableFormValues.forEach((function(e){var n=t.unit[e._id];e.item_type==wa?(r+=n*e.unit_cost,r+=a?e.tax_value/e.unit*n:null):e.item_type==Ca?(r+=n*e.unit_cost,r+=a?e.tax_value/e.unit*n:null):e.item_type==Ia&&(r+=n*e.unit_cost,r+=a?e.tax_value/e.unit*n:null)})),e.setState({returnCashAvailable:(r>n?r-n:0).toFixed(2)})}),500)},a.state={editInvoice:a.props.editInvoice,classType:e.type,tableFormValues:[],maxQuantityforConsume:{},items:{},practiceDoctors:[],selectedPrescriptions:[],selectedDate:Or()(),stocks:{},itemBatches:{},saveLoading:!1,qrValue:"",searchItem:"",return_with_tax:!1,returnCashAvailable:0},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){mi(this),this.loadInventoryItemList(),this.loadProcedures(),this.loadPrescriptions(),this.loadTaxes(),this.props.editId&&this.loadEditInvoiceData()}},{key:"loadInventoryItemList",value:function(){var e=this,t={practice:this.props.active_practiceId,maintain_inventory:!0};this.state.searchItem&&(t.item_name=this.state.searchItem),Ut(ht,(function(t){var a=t.results,n=[];e.setState((function(t){var r=Fc({},t.stocks),i={};a.forEach((function(e){if(e.item_type==ja){if(n.push(e),r[e.id]){var t=r[e.id];e.item_type_stock&&e.item_type_stock.item_stock&&e.item_type_stock.item_stock.forEach((function(e){t[e.batch_number],t[e.batch_number]+=e.quantity}))}else{var a={};e.item_type_stock&&e.item_type_stock.item_stock&&e.item_type_stock.item_stock.forEach((function(e){a[e.batch_number]=e.quantity})),r[e.id]=a}i[e.id]=e.item_type_stock.item_stock}}));var l=e.state.items;return l[wa]=n,{items:l,stocks:Fc({},t.stocks,{},r),itemBatches:Fc({},t.itemBatches,{},i)}}),(function(){e.props.editId&&e.loadEditInvoiceData()}))}),(function(){}),t)}},{key:"loadProcedures",value:function(){var e=this;Ut(Kt(ae,[this.props.active_practiceId]),(function(t){var a=e.state.items;a[Ia]=t,e.setState({items:a})}),(function(){}))}},{key:"loadPrescriptions",value:function(){var e=this;Ut(Kt("patients/unpaid_prescriptions/?id=%s",[e.props.match.params.id]),(function(t){e.setState((function(e){return{items:Fc({},e.items,Object(u.a)({},Ca,t))}}))}),(function(){}))}},{key:"loadTaxes",value:function(){var e=this;Ut(Kt($,[this.props.active_practiceId]),(function(t){e.setState({taxes_list:t})}),(function(){}))}},{key:"render",value:function(){var e=this,t=this,a=this.props.form,n=a.getFieldDecorator,i=(a.getFieldValue,a.getFieldsValue,{labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:24},md:{span:24},lg:{span:24},xl:{span:24}}});n("keys",{initialValue:[]});var l=[{title:"Item Name",key:"item_name",dataIndex:"name",render:function(e,a){switch(a.item_type){case Ia:return r.a.createElement(vr.a.Item,Object.assign({key:"name[".concat(a._id,"]")},i),n("name[".concat(a._id,"]"),{validateTrigger:["onChange","onBlur"],initialValue:e,rules:[{required:!0,message:"This field is required."}]})(r.a.createElement(ma.a,{min:0,placeholder:"Item name",size:"small",disabled:!0})),r.a.createElement("span",null,"by \xa0\xa0"),r.a.createElement(ha.a,{placement:"topCenter",disabled:!0,overlay:r.a.createElement(_a.a,null,t.state.practiceDoctors.map((function(e){return r.a.createElement(_a.a.Item,{key:"0"},r.a.createElement("a",{onClick:function(){return t.selectDoctor(e,a._id,Ia)}},e.user.first_name))}))),trigger:["click"]},r.a.createElement("a",{className:"ant-dropdown-link",href:"#"},r.a.createElement("b",null,a.selectedDoctor.user?a.selectedDoctor.user.first_name:"No DOCTORS Found"))),r.a.createElement("span",null," \xa0\xa0on\xa0\xa0"),r.a.createElement(yr.a,{value:a.selectedDate,disabled:!0,size:"small",onChange:function(e){return t.selectedDate(e,a._id,Ia)},format:"DD-MM-YYYY"}));case Ca:return r.a.createElement("b",null,a.name);case wa:return r.a.createElement("div",null,a.name,r.a.createElement("span",null,r.a.createElement("br",null),"by \xa0\xa0"),r.a.createElement(ha.a,{placement:"topCenter",disabled:!0,overlay:r.a.createElement(_a.a,null,t.state.practiceDoctors.map((function(e){return r.a.createElement(_a.a.Item,{key:e.id},r.a.createElement("a",{onClick:function(){return t.selectDoctor(e,a._id,Ia)}},e.user.first_name))}))),trigger:["click"]},r.a.createElement("a",{className:"ant-dropdown-link",href:"#"},r.a.createElement("b",null,a.selectedDoctor&&a.selectedDoctor.user?a.selectedDoctor.user.first_name:"+Add Doctor"))),r.a.createElement("span",null,r.a.createElement("br",null),"from batch \xa0\xa0"),r.a.createElement(ha.a,{placement:"topCenter",disabled:!0,overlay:r.a.createElement(_a.a,null,t.state.itemBatches[a.inventory]&&t.state.itemBatches[a.inventory].map((function(e,n){return Or()()>=Or()(e.expiry_date)?r.a.createElement(_a.a.Item,{key:n,disabled:!0},e.batch_number,"\xa0(",e.quantity,") \xa0\xa0",e.expiry_date):r.a.createElement(_a.a.Item,{key:n},r.a.createElement("a",{onClick:function(){return t.selectBatch(e,a._id,wa)}},e.batch_number,"\xa0(",e.quantity,") \xa0\xa0",e.expiry_date))}))),trigger:["click"]},r.a.createElement("a",{className:"ant-dropdown-link",href:"#"},r.a.createElement("b",null,a.selectedBatch?a.selectedBatch.batch_number:"Select Batch"))));default:return null}}}];return l=l.concat([{title:"Returning Unit",key:"unit",width:100,dataIndex:"unit",render:function(a,l){return l.item_type==wa?r.a.createElement(vr.a.Item,Object.assign({key:"unit[".concat(l._id,"]")},i),n("unit[".concat(l._id,"]"),{validateTrigger:["onChange","onBlur"],initialValue:0})(r.a.createElement(Er.a,{max:l.unit,onChange:e.calculateReturnCashAvailable,min:0,placeholder:"units",size:"small",disabled:!(l.selectedBatch&&t.state.stocks[l.inventory]&&t.state.stocks[l.inventory][l.selectedBatch.batch_number])})),r.a.createElement("span",{className:"ant-form-text"},"Items: ",l.unit)):r.a.createElement(vr.a.Item,Object.assign({key:"unit[".concat(l._id,"]")},i),n("unit[".concat(l._id,"]"),{initialValue:0,validateTrigger:["onChange","onBlur"]})(r.a.createElement(Er.a,{min:0,max:l.unit,placeholder:"unit",size:"small",onChange:e.calculateReturnCashAvailable})),r.a.createElement("span",{className:"ant-form-text"},"Items: ",l.unit))}},{title:"Unit Cost",key:"unit_cost",width:100,dataIndex:"unit_cost",render:function(e,t){return e?e.toFixed(2):null}},{title:"discount %",key:"discount",width:100,dataIndex:"discount",render:function(e,t){return r.a.createElement(vr.a.Item,Object.assign({key:"discount[".concat(t._id,"]")},i),n("discount[".concat(t._id,"]"),{initialValue:t.discount,validateTrigger:["onChange","onBlur"]})(r.a.createElement(Er.a,{min:0,max:100,placeholder:"discount",size:"small",disabled:!0})))}},{title:"Taxes",key:"taxes",dataIndex:"taxes",render:function(a,l){return r.a.createElement(vr.a.Item,Object.assign({key:"taxes[".concat(l._id,"]")},i),n("taxes[".concat(l._id,"]"),{initialValue:l.taxes||[],validateTrigger:["onChange","onBlur"]})(r.a.createElement(ga.a,{placeholder:"Taxes",size:"small",mode:"multiple",disabled:!0,style:{width:150},onChange:function(){return t.changeNetPrice(l._id)}},e.state.taxes_list&&e.state.taxes_list.map((function(e){return r.a.createElement(ga.a.Option,{value:e.id},e.name,"@",e.tax_value,"%")})))))}},{title:"Total Unit Cost",key:"total",width:100,dataIndex:"total",render:function(e,t){return t.unit?(t.total/t.unit).toFixed(2):t.total.toFixed(2)}}]),r.a.createElement("div",null,r.a.createElement(pa.a,{spinning:this.state.saveLoading,tip:"Saving Invoice..."},r.a.createElement(rr.a,{gutter:16},r.a.createElement(ir.a,{span:20},r.a.createElement(cr.a,{title:this.props.editId?"Return Invoice (INV "+this.props.editId+")":"Add Invoice",bodyStyle:{padding:0}},r.a.createElement(rr.a,{gutter:16},r.a.createElement(ir.a,{span:24},r.a.createElement(vr.a,{onSubmit:this.handleSubmit,layout:"inline"},r.a.createElement(lr.a,{pagination:!1,bordered:!0,dataSource:this.state.tableFormValues,columns:l}),r.a.createElement(s.a,{offsetBottom:0},r.a.createElement(cr.a,null,r.a.createElement(rr.a,{gutter:16},r.a.createElement(ir.a,{span:6},r.a.createElement("span",null," \xa0\xa0on\xa0\xa0"),r.a.createElement(yr.a,{value:this.state.selectedDate,disabled:!0,onChange:function(t){return e.selectedDefaultDate(t)},format:"DD-MM-YYYY",allowClear:!1}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(pr.a,{onChange:this.onChangeHandle,defaultChecked:this.state.return_with_tax},"Return With Tax")),r.a.createElement(ir.a,{span:8},r.a.createElement(vr.a.Item,{label:"Returned Cash "},n("cash_return")(r.a.createElement(Er.a,{min:0,max:this.state.returnCashAvailable,placeholder:"Cash Returned"})),r.a.createElement("span",null,r.a.createElement("br",null),"Max Cash Return Allowed (INR) ",this.state.returnCashAvailable))),r.a.createElement(ir.a,{span:10},r.a.createElement(vr.a.Item,{label:"Notes",key:"notes"},n("notes",{initialValue:this.state.tableFormValues.notes,validateTrigger:["onChange","onBlur"]})(r.a.createElement(ma.a.TextArea,{row:2,placeholder:"Notes...",size:"small",style:{width:"100%"}}))),r.a.createElement(vr.a.Item,Object.assign({},{labelCol:{xs:{span:24},sm:{span:24}},wrapperCol:{xs:{span:24},sm:{span:24}}},{style:{marginBottom:0,float:"right"}}),r.a.createElement(da.a,{type:"primary",htmlType:"submit",style:{margin:5}},"Save Return Invoice"),t.props.history?r.a.createElement(da.a,{style:{margin:5,float:"right"},onClick:function(){return t.props.history.goBack()}},"Cancel"):null)))))))))),r.a.createElement(ir.a,{span:4},r.a.createElement(sr.a,null,"Payments Done"),r.a.createElement(Ea.a,{dataSource:this.state.editInvoice.payments,renderItem:function(e){return r.a.createElement(cr.a,{title:e.payment_id,style:{marginBottom:10},bodyStyle:{padding:5}},r.a.createElement("p",null,"Paid (INR)",r.a.createElement("span",{style:{float:"right",fontWeight:600}}," ",e.pay_amount.toFixed(2))))}})))))}}]),t}(r.a.Component),Vc=vr.a.create()(Yc);function Bc(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var Hc=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).handleSubmitReturnInvoice=function(e){var t=Object(f.a)(a);e.preventDefault(),a.props.form.validateFields((function(e,n){if(!e){var r=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Bc(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Bc(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},n,{practice:a.props.active_practiceId});qt(qe,r,(function(e){t.setState({returnIncoiceVisible:!1}),t.returnInvoiceData(t.props.editInvoice),t.props.returnInvoiceClose()}),(function(){}))}}))},a.returnInvoiceData=function(e){var t=Object(f.a)(a);a.setState({editInvoice:e},(function(){t.props.history.push("/patient/"+e.patient_data.id+"/billing/invoices/return/")}))},a.state={returnIncoiceVisible:a.props.returnIncoiceVisible,otpSent:a.props.otpSent},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"sendOTP",value:function(){Ut("patients/resend_otp/",(function(e){}),(function(){}))}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement(nr.a,{visible:this.state.returnIncoiceVisible&&this.props.editInvoice&&this.props.editInvoice.id==this.props.invoice.id,title:"Return Invoice",footer:null,onOk:this.props.handleSubmitReturnInvoice,onCancel:this.props.returnInvoiceClose},r.a.createElement(vr.a,null,r.a.createElement(vr.a.Item,null,e("otp",{rules:[{required:!0,message:"Please input Otp!"}]})(r.a.createElement(ma.a,{prefix:r.a.createElement(va.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Otp"}))),r.a.createElement(vr.a.Item,null,this.props.otpSent?r.a.createElement("a",{style:{float:"right"},type:"primary",onClick:this.sendOTP},"Resend Otp ?"):null,r.a.createElement(da.a,{size:"small",type:"primary",htmlType:"submit",onClick:this.handleSubmitReturnInvoice},"Submit"),"\xa0",r.a.createElement(da.a,{size:"small",onClick:this.props.returnInvoiceClose},"Close"))))}}]),t}(r.a.Component),qc=vr.a.create()(Hc);function zc(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var Gc=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).handleSubmitEditInvoice=function(e){var t=Object(f.a)(a);e.preventDefault(),a.props.form.validateFields((function(e,n){if(!e){var r=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?zc(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):zc(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},n,{practice:a.props.active_practiceId});qt(qe,r,(function(e){t.setState({editIncoiceVisible:!1}),t.editInvoiceData(t.props.editInvoice),t.props.editInvoiceClose()}),(function(){}))}}))},a.editInvoiceData=function(e){var t=Object(f.a)(a);a.setState({editInvoice:e},(function(){t.props.history.push("/patient/"+e.patient_data.id+"/billing/invoices/edit/")}))},a.state={otpSent:a.props.otpSent,returnIncoiceVisible:a.props.returnIncoiceVisible,editIncoiceVisible:a.props.editIncoiceVisible},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"sendOTP",value:function(){Ut("patients/resend_otp/",(function(e){}),(function(){}))}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement(nr.a,{visible:this.state.editIncoiceVisible&&this.props.editInvoice&&this.props.editInvoice.id==this.props.invoice.id,title:"Edit Invoice",footer:null,onOk:this.handleSubmitEditInvoice,onCancel:this.props.editInvoiceClose},r.a.createElement(vr.a,null,r.a.createElement(vr.a.Item,null,e("otp",{rules:[{required:!0,message:"Please input Otp!"}]})(r.a.createElement(ma.a,{prefix:r.a.createElement(va.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Otp"}))),r.a.createElement(vr.a.Item,null,this.props.otpSent?r.a.createElement("a",{style:{float:"right"},type:"primary",onClick:this.sendOTP},"Resend Otp ?"):null,r.a.createElement(da.a,{size:"small",type:"primary",htmlType:"submit",onClick:this.handleSubmitEditInvoice},"Submit"),"\xa0",r.a.createElement(da.a,{size:"small",onClick:this.props.editInvoiceClose},"Close"))))}}]),t}(r.a.Component),Uc=vr.a.create()(Gc);function Wc(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var Kc=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).handleSubmitCancelInvoice=function(e){var t=Object(f.a)(a);e.preventDefault(),a.props.form.validateFields((function(e,n){if(!e){var r=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Wc(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Wc(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},n,{practice:a.props.active_practiceId});qt(qe,r,(function(e){t.setState({cancelIncoiceVisible:!1}),t.deleteInvoice(t.props.patientId,t.props.invoiceId)}),(function(){}))}}))},a.state={cancelIncoiceVisible:a.props.cancelIncoiceVisible,otpSent:a.props.otpSent},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"deleteInvoice",value:function(e,t){var a=this,n={patient:e,is_cancelled:!0};Ht(Kt("invoice/%s/",[t]),n,(function(e){Qt(O,"Invoice cancelled successfully"),a.props.loadInvoices()}),(function(){}))}},{key:"sendOTP",value:function(){Ut("patients/resend_otp/",(function(e){}),(function(){}))}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement(nr.a,{visible:this.state.cancelIncoiceVisible&&this.props.editInvoice&&this.props.editInvoice.id==this.props.invoice.id,title:"Cancel Invoice",footer:null,onOk:this.handleSubmitCancelInvoice,onCancel:this.cancelInvoiceClose},r.a.createElement(vr.a,null,r.a.createElement(vr.a.Item,null,e("otp",{rules:[{required:!0,message:"Please input Otp!"}]})(r.a.createElement(ma.a,{prefix:r.a.createElement(va.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Otp"}))),r.a.createElement(vr.a.Item,null,this.props.otpSent?r.a.createElement("a",{style:{float:"right"},type:"primary",onClick:this.sendOTP},"Resend Otp ?"):null,r.a.createElement(da.a,{size:"small",type:"primary",htmlType:"submit",onClick:this.handleSubmitCancelInvoice},"Submit"),"\xa0",r.a.createElement(da.a,{size:"small",onClick:this.cancelInvoiceClose},"Close"))))}}]),t}(r.a.Component),Qc=vr.a.create()(Kc);function Zc(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Xc(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Zc(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Zc(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}nr.a.confirm;var Jc=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).loadPDF=function(e){Object(f.a)(a);Ut(Kt(Ae,[e]),(function(e){e.report&&window.open(V+e.report)}),(function(){}))},a.returnModelOpen=function(e){var t=Object(f.a)(a);if(Or()().diff(e.created_at,"minutes")>F){t.setState({returnIncoiceVisible:!0,editIncoiceVisible:!1,cancelIncoiceVisible:!1,editInvoice:e});var n={practice:a.props.active_practiceId,type:"Invoice:"+e.invoice_id+" Return"};qt(He,n,(function(a){t.setState({otpSent:!0,patientId:e.patient,invoiceId:e.id})}),(function(){}))}else a.setState({editInvoice:e},(function(){t.props.history.push("/patient/"+e.patient_data.id+"/billing/invoices/return/")}))},a.cancelModalOpen=function(e){var t=Object(f.a)(a);if(Or()().diff(e.created_at,"minutes")>F){t.setState({cancelIncoiceVisible:!0,editIncoiceVisible:!1,returnIncoiceVisible:!1,editInvoice:e});var n={practice:a.props.active_practiceId,type:"Invoice:"+e.invoice_id+"  Cancellation"};qt(He,n,(function(a){t.setState({otpSent:!0,patientId:e.patient,invoiceId:e.id})}),(function(){}))}else t.deleteInvoice(e.patient,e.id)},a.editInvoiceClose=function(){a.setState({editIncoiceVisible:!1})},a.returnInvoiceClose=function(){a.setState({returnIncoiceVisible:!1})},a.cancelInvoiceClose=function(){a.setState({cancelIncoiceVisible:!1})},a.state={currentPatient:a.props.currentPatient,active_practiceId:a.props.active_practiceId,invoices:[],drug_catalog:null,procedure_category:null,taxes_list:null,editInvoice:null,loading:!0,returnIncoiceVisible:!1,editIncoiceVisible:!1,cancelIncoiceVisible:!1},a.loadInvoices=a.loadInvoices.bind(Object(f.a)(a)),a.loadDrugCatalog=a.loadDrugCatalog.bind(Object(f.a)(a)),a.loadProcedureCategory=a.loadProcedureCategory.bind(Object(f.a)(a)),a.loadTaxes=a.loadTaxes.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadInvoices()}},{key:"loadInvoices",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this;t.props.refreshWallet&&1==e&&t.props.refreshWallet(),t.setState({loading:!0});var a=function(e){1==e.current?t.setState({total:e.count,invoices:e.results,loading:!1,loadMoreInvoice:e.next}):t.setState((function(t){return{total:e.count,invoices:[].concat(Object(Oa.a)(t.invoices),Object(Oa.a)(e.results)),loading:!1,loadMoreInvoice:e.next}}))},n=function(){t.setState({loading:!1})},r={page:e,practice:this.props.active_practiceId};this.props.match.params.id&&(r.patient=this.props.match.params.id),Ut(Me,a,n,r)}},{key:"loadDrugCatalog",value:function(){var e=this;Ut(Kt(he,[this.props.active_practiceId]),(function(t){e.setState({drug_catalog:t})}),(function(){}))}},{key:"loadProcedureCategory",value:function(){var e=this;Ut(Kt(ae,[this.props.active_practiceId]),(function(t){e.setState({procedure_category:t})}),(function(){}))}},{key:"loadTaxes",value:function(){var e=this;Ut(Kt($,[this.props.active_practiceId]),(function(t){e.setState({taxes_list:t})}),(function(){}))}},{key:"editModelOpen",value:function(e){var t=this;if(Or()().diff(e.created_at,"minutes")>F){t.setState({editIncoiceVisible:!0,cancelIncoiceVisible:!1,returnIncoiceVisible:!1,editInvoice:e});var a={practice:this.props.active_practiceId,type:"Invoice:"+e.invoice_id+" Edit"};qt(He,a,(function(a){t.setState({otpSent:!0,patientId:e.patient,invoiceId:e.id})}),(function(){}))}else this.setState({editInvoice:e},(function(){t.props.history.push("/patient/"+e.patient_data.id+"/billing/invoices/edit/")}))}},{key:"deleteInvoice",value:function(e,t){var a=this,n={patient:e,is_cancelled:!0};Ht(Kt("invoice/%s/",[t]),n,(function(e){Qt(O,"Invoice cancelled successfully"),a.loadInvoices()}),(function(){}))}},{key:"render",value:function(){var e=this,t=this,a={};this.state.drug_catalog&&this.state.drug_catalog.forEach((function(e){a[e.id]=e.name+","+e.strength}));var n={};this.state.procedure_category&&this.state.procedure_category.forEach((function(e){n[e.id]=e.name}));var i={};return this.state.taxes_list&&this.state.taxes_list.forEach((function(e){i[e.id]=e.name})),this.props.match.params.id?r.a.createElement("div",null,r.a.createElement(y.d,null,r.a.createElement(y.b,{path:"/patient/:id/billing/invoices/add",render:function(t){return r.a.createElement(Rc,Object.assign({},t,e.props,{loadData:e.loadInvoices}))}}),r.a.createElement(y.b,{path:"/patient/:id/billing/invoices/edit",render:function(t){return e.state.editInvoice?r.a.createElement(Rc,Object.assign({},e.state,t,e.props,{editId:e.state.editInvoice.id,loadData:e.loadInvoices})):r.a.createElement(y.a,{to:"/patient/"+e.props.match.params.id+"/billing/invoices"})}}),r.a.createElement(y.b,{path:"/patient/:id/billing/invoices/return",render:function(t){return e.state.editInvoice?r.a.createElement(Vc,Object.assign({},e.state,t,{editId:e.state.editInvoice.id,loadData:e.loadInvoices})):r.a.createElement(y.a,{to:"/patient/"+e.props.match.params.id+"/billing/invoices"})}}),r.a.createElement(y.b,null,r.a.createElement("div",null,r.a.createElement(c.a,{banner:!0,showIcon:!0,type:"info",message:"The invoices shown are only for the current selected practice!"}),r.a.createElement(s.a,{offsetTop:0},r.a.createElement(cr.a,{bodyStyle:{padding:0},style:{boxShadow:"0 5px 8px rgba(0, 0, 0, 0.09)"},title:(this.state.currentPatient?this.state.currentPatient.user.first_name+" Invoice ":"Invoices ")+(this.state.total?"(Total:".concat(this.state.total,")"):""),extra:r.a.createElement(da.a.Group,null,r.a.createElement(Da.b,{to:"/patient/"+this.props.match.params.id+"/billing/invoices/add"},r.a.createElement(da.a,{type:"primary"},r.a.createElement(va.a,{type:"plus"}),"Add")))})),this.state.invoices.map((function(e){return tu(e,t)})),r.a.createElement(pa.a,{spinning:this.state.loading},r.a.createElement(rr.a,null)),r.a.createElement(wi,{loaderFunction:function(){return e.loadInvoices(e.state.loadMoreInvoice)},loading:this.state.loading,hidden:!this.state.loadMoreInvoice}))))):r.a.createElement("div",null,r.a.createElement(s.a,{offsetTop:0},r.a.createElement(cr.a,{bodyStyle:{padding:0},style:{boxShadow:"0 5px 8px rgba(0, 0, 0, 0.09)"},title:(this.state.currentPatient?this.state.currentPatient.user.first_name+" Invoice ":"Invoice ")+(this.state.total?"(Total:".concat(this.state.total,")"):""),extra:r.a.createElement(da.a.Group,null,r.a.createElement(da.a,{type:"primary",onClick:function(){return e.props.togglePatientListModal(!0)}},r.a.createElement(va.a,{type:"plus"}),"Add"))})),this.state.invoices.map((function(e){return tu(e,t)})),r.a.createElement(pa.a,{spinning:this.state.loading},r.a.createElement(rr.a,null)),r.a.createElement(wi,{loaderFunction:function(){return e.loadInvoices(e.state.loadMoreInvoice)},loading:this.state.loading,hidden:!this.state.loadMoreInvoice}))}}]),t}(r.a.Component),$c=vr.a.create()(Jc);function eu(e){return e?r.a.createElement("p",null,e.doctor?r.a.createElement(ms.a,{title:"Doctor"},r.a.createElement(fa.a,{color:e.doctor?e.doctor.calendar_colour:null},r.a.createElement("b",null,"prescribed by  "+e.doctor.user.first_name," "))):null,e.practice?r.a.createElement(fa.a,{style:{float:"right"}},r.a.createElement(ms.a,{title:"Practice Name"},r.a.createElement("b",null,e.practice.name," "))):null,e.notes?r.a.createElement("p",null,"Notes: ",e.notes):null):null}function tu(e,t){var a=[];t.props.form.getFieldDecorator;if(e.reservation){var n=e.reservation_data.medicines.map((function(e){return Object.create(Xc({},e,{unit:1,total:e.final_price,unit_cost:e.price,discount:0}))})),i={NORMAL:{total:"final_normal_price",tax:"normal_tax_value",unit_cost:"normal_price"},TATKAL:{total:"final_tatkal_price",tax:"tatkal_tax_value",unit_cost:"tatkal_price"}};a=[].concat(Object(Oa.a)(a),[Xc({},e.reservation_data.bed_package,{unit:1,total:e.reservation_data.bed_package?e.reservation_data.bed_package[i[e.reservation_data.seat_type].total]:null,tax_value:e.reservation_data.bed_package?e.reservation_data.bed_package[i[e.reservation_data.seat_type].tax]:null,unit_cost:e.reservation_data.bed_package?e.reservation_data.bed_package[i[e.reservation_data.seat_type].unit_cost]:null})],Object(Oa.a)(n))}return r.a.createElement(cr.a,{key:e.id,style:{marginTop:10},bodyStyle:{padding:0},title:r.a.createElement("small",null,e.date?Or()(e.date).format("ll"):null,t.state.currentPatient?null:r.a.createElement("span",null,r.a.createElement(Da.b,{to:"/patient/"+(e.patient_data?e.patient_data.id:null)+"/billing/invoices"},"\xa0\xa0 ",e.patient_data?e.patient_data.user.first_name:null," (ID: ",e.patient_data&&e.patient_data.custom_id?e.patient_data.custom_id:e.patient_data.id,")\xa0"),", ",e.patient_data?e.patient_data.gender:null)),extra:r.a.createElement(ha.a.Button,{size:"small",style:{float:"right"},overlay:r.a.createElement(_a.a,null,r.a.createElement(_a.a.Item,{key:"1"},r.a.createElement(Da.b,{to:"/patient/"+(e.patient_data?e.patient_data.id:null)+"/billing/payments/add?invoices="+e.id},r.a.createElement(va.a,{type:"dollar"}),"\xa0 Pay")),r.a.createElement(_a.a.Divider,null),r.a.createElement(_a.a.Item,{key:"2",onClick:function(){return t.editModelOpen(e)},disabled:e.practice!=t.props.active_practiceId||e.payments_data||e.is_cancelled},r.a.createElement(va.a,{type:"edit"}),"Edit"),r.a.createElement(_a.a.Item,{key:"5",onClick:function(){return t.returnModelOpen(e)},disabled:e.practice!=t.props.active_practiceId||e.is_cancelled},r.a.createElement(va.a,{type:"redo"}),"Return"),r.a.createElement(_a.a.Item,{key:"3",onClick:function(){return t.cancelModalOpen(e)},disabled:e.practice!=t.props.active_practiceId||e.payments_data||e.is_cancelled},r.a.createElement(va.a,{type:"delete"}),"Cancel"),r.a.createElement(_a.a.Divider,null),r.a.createElement(_a.a.Item,{key:"4"},r.a.createElement(Da.b,{to:"/patient/"+e.patient+"/emr/timeline"},r.a.createElement(va.a,{type:"clock-circle"}),"Patient Timeline")))},r.a.createElement("a",{onClick:function(){return t.loadPDF(e.id)}},r.a.createElement(va.a,{type:"printer"})))},r.a.createElement(rr.a,{gutter:8},r.a.createElement(ir.a,{xs:24,sm:24,md:6,lg:4,xl:4,xxl:4,style:{padding:10}},e.is_cancelled?r.a.createElement(c.a,{message:"Cancelled",type:"error",showIcon:!0}):null,r.a.createElement(sr.a,{style:{marginBottom:0}},e.invoice_id),r.a.createElement(ao.a,{title:"Paid / Total ",value:e.payments_data?e.payments_data.toFixed(2):0,suffix:"/ "+e.total.toFixed(2)})),r.a.createElement(ir.a,{xs:24,sm:24,md:18,lg:20,xl:20,xxl:20},"Membership Amount."==e.type?r.a.createElement(lr.a,{bordered:!0,pagination:!1,columns:au,dataSource:[{inventory:!0,name:"Membership",unit_cost:e.total,unit:1,discount_value:0,tax_value:0,total:e.total}],footer:function(){return eu({practice:e.practice_data,notes:e.notes})}}):r.a.createElement(lr.a,{bordered:!0,pagination:!1,columns:au,dataSource:[].concat(Object(Oa.a)(a),Object(Oa.a)(e.inventory),Object(Oa.a)(e.procedure)),footer:function(){return eu({practice:e.practice_data,notes:e.notes})}}))),t.state.cancelIncoiceVisible&&t.state.otpSent&&r.a.createElement(Qc,Object.assign({},t.state,{invoice:e,cancelInvoiceClose:t.cancelInvoiceClose},t.props,{loadInvoices:t.loadInvoices})),t.state.editIncoiceVisible&&t.state.otpSent&&r.a.createElement(Uc,Object.assign({},t.state,{invoice:e,editInvoiceClose:t.editInvoiceClose},t.props)),t.state.returnIncoiceVisible&&t.state.otpSent&&r.a.createElement(qc,Object.assign({},t.state,{invoice:e,returnInvoiceClose:t.returnInvoiceClose},t.props)))}var au=[{title:"Treatment & Products",dataIndex:"drug",key:"drug",render:function(e,t){return r.a.createElement("span",null," ",r.a.createElement("b",null,t.name?t.name:null),r.a.createElement("br",null)," ",t.doctor_data?r.a.createElement(fa.a,{color:t.doctor_data?t.doctor_data.calendar_colour:null},r.a.createElement("b",null,"prescribed by  "+t.doctor_data.user.first_name," ")):null)}},{title:"Cost",dataIndex:"unit_cost",key:"unit_cost",render:function(e,t){return r.a.createElement("span",null,t.unit_cost?t.unit_cost.toFixed(2):null)}},{title:"Unit",dataIndex:"unit",key:"unit"},{title:"Discount",dataIndex:"discount_value",key:"discount_value",render:function(e,t){return r.a.createElement("span",null,t.discount_value?t.discount_value.toFixed(2):null)}},{title:"Tax",dataIndex:"tax_value",key:"tax_value",render:function(e,t){return r.a.createElement("span",null,t.tax_value?t.tax_value.toFixed(2):null)}},{title:"Total",dataIndex:"total",key:"total",render:function(e){return e?e.toFixed(2):null}}];function nu(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ru(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?nu(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):nu(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var iu=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).loadEditPyament=function(e){var t=Object(f.a)(a),n={},r=[],i=0;a.setState((function(a){return e.forEach((function(e){n[e.invoice]=!0,r.push(ru({},e,{},e.invoice_data)),i+=e.pay_amount+e.pay_amount_wallet}),(function(){t.calculateInvoicePayments(),t.setPaymentAmount(i)})),{addedInvoice:r,addedInvoiceId:n}}))},a.loadAvailableAdvance=function(){var e=Object(f.a)(a);Ut(Kt(Qe,[e.props.match.params.id]),(function(t){e.setState({availableAdvance:t})}),(function(){}),{practice_id:a.props.active_practiceId})},a.loadPaymentModes=function(){var e=Object(f.a)(a);Ut(Kt(te,[a.props.active_practiceId]),(function(t){e.setState({paymentModes:t,selectedPaymentMode:t.length?t[0].id:null})}),(function(){}))},a.loadInvoices=function(e){var t=Object(f.a)(a);t.setState({invoiceLoading:!0});Ut(Me,(function(a){t.setState((function(e){return{invoicesList:[].concat(Object(Oa.a)(a.results),Object(Oa.a)(e.addedInvoice)),invoiceLoading:!1,loadMoreInvoice:a.next}}),(function(){e&&e.forEach((function(e){t.addInvoiceToPayments(e)})),t.calculateInvoicePayments()}))}),(function(){t.setState({invoiceLoading:!1})}),{page:t.state.loadMoreInvoice||1,is_cancelled:!1,is_pending:!0,patient:a.props.match.params.id,practice:a.props.active_practiceId})},a.addInvoiceToPayments=function(e){var t=Object(f.a)(a);a.setState((function(t){var a=null;return t.invoicesList.forEach((function(t){t.id==e&&(a=t)})),a?{addedInvoice:[].concat(Object(Oa.a)(t.addedInvoice),[a]),addedInvoiceId:ru({},t.addedInvoiceId,Object(u.a)({},e,!0)),invoicePayments:ru({},t.addedInvoiceId,Object(u.a)({},e,0))}:null}),(function(){t.calculateInvoicePayments()}))},a.removeInvoiceToPayments=function(e){var t=Object(f.a)(a);a.setState((function(t){var a=[];return t.addedInvoice.forEach((function(t){t.id!=e&&a.push(t)})),a?{addedInvoice:a,addedInvoiceId:ru({},t.addedInvoiceId,Object(u.a)({},e,!1))}:null}),(function(){t.calculateInvoicePayments()}))},a.calculateInvoicePayments=function(){a.setState((function(e){var t=0,a=e.totalPayingAmount+e.totalPayingFromAdvanceAmount,n={};return e.addedInvoice.forEach((function(e){var r=e.total-e.payments_data;e.pay_amount&&(r+=e.pay_amount),e.pay_amount_wallet&&(r+=e.pay_amount_wallet),t+=r,a>=r?(a-=r,n[e.id]=r):(n[e.id]=a,a=0)})),{advanceToBeSent:a,totalPayableAmount:t.toFixed(2),invoicePayments:n}}))},a.setPaymentAmount=function(e){var t=Object(f.a)(a);a.setState({totalPayingAmount:e},(function(){t.calculateInvoicePayments()}))},a.setPaymentFromAdvanceAmount=function(e){var t=Object(f.a)(a);a.setState({totalPayingFromAdvanceAmount:e},(function(){t.calculateInvoicePayments()}))},a.changeSelectedPaymentMode=function(e){a.setState({selectedPaymentMode:e})},a.changeNotes=function(e){a.setState({notes:e})},a.selectedDate=function(e){Object(f.a)(a).setState({selectDate:e})},a.handleSubmit=function(e){if(!a.state.totalPayingAmount)return Qt(D,"Payment Amount of O INR is not allowed."),!1;a.setState({loading:!0});var t=Object(f.a)(a),n={invoices:[],bank:"",number:0,is_active:!0,notes:t.state.notes,is_cancelled:!1,practice:t.props.active_practiceId,patient:t.props.match.params.id,payment_mode:t.state.selectedPaymentMode,advance_value:t.state.advanceToBeSent,is_advance:!!t.state.advanceToBeSent,date:Or()(t.state.selectDate).format("YYYY-MM-DD")},r=[];t.state.totalPayingAmount-t.state.totalPayableAmount>1&&(r.advance_value=t.state.totalPayingAmount-t.state.totalPayableAmount,r.is_advance=!0);var i=Object.keys(t.state.invoicePayments),l=ru({},t.state.invoicePayments),o=t.state.totalPayingFromAdvanceAmount,s=0;for(o&&t.state.availableAdvance.data.forEach((function(e){var t=o;for(e.advance_value<t&&(t=e.advance_value);o&&i.length>s;)l[i[s]]&&t>l[i[s]]?(e.advance_value-=l[i[s]],e.invoices.push({pay_amount_advance:l[i[s]],pay_amount:l[i[s]],is_active:!0,invoice:i[s]}),o-=l[i[++s]],l[i[s]]-=l[i[s]]):l[i[s]]&&(e.invoices.push({pay_amount_advance:t,pay_amount:t,is_active:!0,invoice:i[s]}),l[i[s]]-=t,o-=t,e.advance_value-=t);r.push(e)}));i.length>s;s++)n.invoices.push({pay_amount:l[i[s]],type:"Invoice",is_active:!0,invoice:i[s]});a.props.editPayment&&a.props.editPayment.id&&(n.id=a.props.editPayment.id),(n.invoices.length||n.id||n.is_advance)&&r.push(n),t.state.receivedPayIdFromRazorPay&&(n.bank="RazorPay",n.number=t.state.receivedPayIdFromRazorPay);qt(Ne,r,(function(e){t.setState({loading:!1}),t.props.loadData(),t.props.history.push("/patient/"+t.props.match.params.id+"/billing/payments")}),(function(){t.setState({loading:!1})}))},a.state={invoicesList:[],invoiceLoading:!0,addedInvoiceId:{},addedInvoice:[],paymentModes:[],totalPayableAmount:0,invoicePayments:{},totalPayingAmount:0,totalPayingFromAdvanceAmount:0,selectedPaymentMode:null,availableAdvance:null,advanceToBeSent:0,selectDate:Or()(),loading:!1},a.loadEditPyament=a.loadEditPyament.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentWillMount",value:function(){this.props.editPayment&&this.props.editPayment.invoices&&this.loadEditPyament(this.props.editPayment.invoices);var e=[];if(this.props.history&&this.props.history.location.search){var t=this.props.history.location.search.substr(1).split("&");t.length&&t.forEach((function(t){"invoices"==t.split("=")[0]&&(e=t.split("=")[1].split(","))}))}this.loadInvoices(e),this.loadPaymentModes(),this.loadAvailableAdvance()}},{key:"paymentHandler",value:function(e,t,a){if(!a)return Qt(D,"Payment Amount of O INR is not allowed."),!1;var n=this,r={key:"rzp_live_Wl01N16ABswm3p",amount:100*a.toFixed(2),name:t.custom_id,description:"Payment for "+e,prefill:{name:t.user.first_name,email:t.user.email,contact:t.user.mobile},handler:function(e){var t=e.razorpay_payment_id,r={payment_id:t,amount:a};n.setState({loading:!0});qt("clinics/payment/",r,(function(e){Qt(O,e.detail),n.setState({loading:!1,receivedPayIdFromRazorPay:t},(function(){n.handleSubmit()}))}),(function(){n.setState({loading:!1}),console.log("Request failed")}))}};new window.Razorpay(r).open()}},{key:"render",value:function(){var e=this,t=this;return r.a.createElement("div",null,r.a.createElement(pa.a,{spinning:this.state.loading,size:"large"},r.a.createElement(rr.a,{gutter:8},r.a.createElement(ir.a,{xs:24,sm:24,md:16,lg:16,xl:18,xxl:18},r.a.createElement(cr.a,null,r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:24},r.a.createElement("table",{style:{width:"100%"}},r.a.createElement("tbody",null,r.a.createElement("tr",{style:{borderBottom:"2px solid #ccc"}},r.a.createElement("td",{style:{width:"20%"}},r.a.createElement("small",null,"INVOICE NO")),r.a.createElement("td",{style:{width:"20%"}},r.a.createElement("small",null,"PROCEDURE")),r.a.createElement("td",{style:{width:"20%",textAlign:"right"}},r.a.createElement("small",null,"DUE(INR)")),r.a.createElement("td",{style:{width:"20%",textAlign:"right"}},r.a.createElement("small",null,"PAY NOW(INR)")),r.a.createElement("td",{style:{width:"20%",textAlign:"right"}},r.a.createElement("small",null,"DUE AFTER PAYMENT(INR)"))),this.state.addedInvoice.map((function(a){return r.a.createElement("tr",{style:{borderBottom:"2px solid #ccc"}},r.a.createElement("td",null,r.a.createElement(da.a,{size:"small",type:"danger",shape:"circle",icon:"close",style:{position:"absolute",right:"-35px"},onClick:function(){return e.removeInvoiceToPayments(a.id)}}),r.a.createElement("h3",null,a.invoice_id),a.date),r.a.createElement("td",null,a.procedure.map((function(e){return e.procedure_data.name+", "})),a.inventory.map((function(e){return e.inventory_item_data.name+", "})),a.reservation?a.type+",":null,a.reservation_data&&a.reservation_data.medicines?a.reservation_data.medicines.map((function(e){return e.name+","})):null),r.a.createElement("td",{style:{textAlign:"right"}},r.a.createElement("b",null,(a.total-a.payments_data+(a.pay_amount||0)+(a.pay_amount_wallet||0)).toFixed(2))),r.a.createElement("td",{style:{textAlign:"right"}},r.a.createElement("b",null,t.state.invoicePayments[a.id])),r.a.createElement("td",{style:{textAlign:"right"}},r.a.createElement("b",null,(a.total-a.payments_data+(a.pay_amount||0)+(a.pay_amount_wallet||0)-t.state.invoicePayments[a.id]).toFixed(2))))})))))),r.a.createElement(rr.a,{style:{borderBottom:"2px dashed #ccc",marginTop:"20px"}},r.a.createElement(ir.a,{span:6},r.a.createElement("h3",null,"Total Payable :")),r.a.createElement(ir.a,{span:6},r.a.createElement("h2",null,this.state.totalPayableAmount))),r.a.createElement(rr.a,{gutter:16,style:{marginTop:"20px"}},r.a.createElement(ir.a,{span:12},r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:12},r.a.createElement("h3",null,"Amount From Advance :",r.a.createElement("br",null),r.a.createElement("small",null,"Available: ",this.state.availableAdvance?this.state.availableAdvance.max_allowed:0," INR"))),r.a.createElement(ir.a,{span:12},r.a.createElement(Er.a,{min:0,step:1,max:this.state.availableAdvance?this.state.availableAdvance.max_allowed:0,disabled:!this.state.availableAdvance||!this.state.availableAdvance.max_allowed,value:this.state.totalPayingFromAdvanceAmount,onChange:this.setPaymentFromAdvanceAmount}))),r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:12},r.a.createElement("h3",null,"Pay Now:")),r.a.createElement(ir.a,{span:12},r.a.createElement(Er.a,{min:0,step:1,value:this.state.totalPayingAmount,onChange:this.setPaymentAmount})))),r.a.createElement(ir.a,{span:12},r.a.createElement(ma.a.TextArea,{row:2,placeholder:"Notes...",size:"small",onChange:function(t){return e.changeNotes(t)}},this.state.notes),r.a.createElement(ga.a,{style:{width:"100%"},value:this.state.selectedPaymentMode,onChange:this.changeSelectedPaymentMode},this.state.paymentModes.map((function(e){return r.a.createElement(ga.a.Option,{value:e.id,key:e.id},e.mode)}))),r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:6},r.a.createElement("br",null),r.a.createElement("span",null," \xa0\xa0on\xa0\xa0"),r.a.createElement(yr.a,{style:{width:150},defaultValue:Or()(),onChange:function(e){return t.selectedDate(e)}}))))),r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:24,style:{align:"center"}},r.a.createElement(or.a,{title:"Are you sure to take payment of INR "+this.state.totalPayingAmount+"?",onConfirm:function(){return e.paymentHandler(e.state.addedInvoice.map((function(e){return e.invoice_id})).join(", "),e.props.currentPatient,e.state.totalPayingAmount)}},r.a.createElement(da.a,{type:"primary",style:{margin:5},disabled:t.props.editPayment&&t.props.editPayment.invoices},"Pay Online & Save Payments")),r.a.createElement(or.a,{title:"Are you sure to take payment of INR "+this.state.totalPayingAmount+"?",onConfirm:this.handleSubmit},r.a.createElement(da.a,{type:"primary",style:{margin:5}},"Only Save Payments")))))),r.a.createElement(ir.a,{xs:24,sm:24,md:6,lg:8,xl:6,xxl:6},r.a.createElement(Ea.a,{loading:this.state.invoiceLoading,dataSource:this.state.invoicesList,renderItem:function(a){return t.state.addedInvoiceId[a.id]?r.a.createElement("div",null):r.a.createElement(cr.a,{hoverable:!0,onClick:function(){return e.addInvoiceToPayments(a.id)},style:{marginBottom:"10px"}},r.a.createElement("table",{style:{width:"100%"}},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{style:{maxWidth:"calc(100% - 60px)"}},r.a.createElement("h4",null,a.invoice_id)),r.a.createElement("td",{style:{textAlign:"right"}},r.a.createElement("b",null,a.date))))),r.a.createElement(sr.a,{style:{margin:0}}),r.a.createElement("table",{style:{width:"100%"}},r.a.createElement("tbody",null,a.procedure.map((function(e){return r.a.createElement("tr",null,r.a.createElement("td",{style:{maxWidth:"calc(100% - 60px)"}},e.procedure_data.name),r.a.createElement("td",{style:{textAlign:"right"}},r.a.createElement("b",null,(e.unit*e.unit_cost).toFixed(2))))})),a.inventory.map((function(e){return r.a.createElement("tr",null,r.a.createElement("td",{style:{maxWidth:"calc(100% - 60px)"}},e.inventory_item_data.name),r.a.createElement("td",{style:{textAlign:"right"}},r.a.createElement("b",null,(e.unit*e.unit_cost).toFixed(2))))})),a.reservation?r.a.createElement("tr",null,r.a.createElement("td",{style:{maxWidth:"calc(100% - 60px)"}},a.type),r.a.createElement("td",{style:{textAlign:"right"}},r.a.createElement("b",null,a.reservation_data.bed_package_price?a.reservation_data.bed_package_price.toFixed(2):null))):null,a.reservation_data&&a.reservation_data.medicines?r.a.createElement(r.a.Fragment,null,a.reservation_data.medicines.map((function(e){return r.a.createElement("tr",null,r.a.createElement("td",{style:{maxWidth:"calc(100% - 60px)"}},e.name),r.a.createElement("td",{style:{textAlign:"right"}},r.a.createElement("b",null,e.final_price.toFixed(2))))}))):null)),r.a.createElement(sr.a,{style:{margin:0}}),r.a.createElement("table",{style:{width:"100%"}},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{style:{maxWidth:"calc(100% - 60px)"}},"Invoice Amount"),r.a.createElement("td",{style:{textAlign:"right"}},r.a.createElement("b",null,a.total.toFixed(2)))),r.a.createElement("tr",null,r.a.createElement("td",{style:{maxWidth:"calc(100% - 60px)"}},"Paid Amount"),r.a.createElement("td",{style:{textAlign:"right"}},r.a.createElement("b",null,a.payments_data?a.payments_data.toFixed(2):0))),r.a.createElement("tr",null,r.a.createElement("td",{style:{maxWidth:"calc(100% - 60px)"}},r.a.createElement("b",null,"Amount Due")),r.a.createElement("td",{style:{textAlign:"right"}},r.a.createElement("b",null,(a.total-a.payments_data).toFixed(2)))))))}})))))}}]),t}(r.a.Component);function lu(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var ou=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).handleSubmitEditPayment=function(e){var t=Object(f.a)(a);e.preventDefault(),a.props.form.validateFields((function(e,n){if(!e){var r=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?lu(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):lu(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},n,{practice:a.props.active_practiceId});qt(qe,r,(function(e){t.setState({editPaymentVisible:!1}),t.editPaymentData(t.props.editPayment),t.props.editPaymentClose()}),(function(){}))}}))},a.editPaymentData=function(e){Object(f.a)(a).props.history.push("/patient/"+e.patient+"/billing/payments/edit/")},a.state={otpSent:a.props.otpSent,editPaymentVisible:a.props.editPaymentVisible,cancelPaymentVisible:a.props.cancelPaymentVisible},a.editPaymentData=a.editPaymentData.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"sendOTP",value:function(){Ut("patients/resend_otp/",(function(e){}),(function(){}))}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement(nr.a,{visible:this.state.editPaymentVisible&&this.props.editPayment&&this.props.editPayment.id==this.props.payment.id,title:"Edit Invoice",footer:null,onOk:this.handleSubmitEditPayment,onCancel:this.props.editPaymentClose},r.a.createElement(vr.a,null,r.a.createElement(vr.a.Item,null,e("otp",{rules:[{required:!0,message:"Please input Otp!"}]})(r.a.createElement(ma.a,{prefix:r.a.createElement(va.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Otp"}))),r.a.createElement(vr.a.Item,null,this.props.otpSent?r.a.createElement("a",{style:{float:"right"},type:"primary",onClick:this.sendOTP},"Resend Otp ?"):null,r.a.createElement(da.a,{size:"small",type:"primary",htmlType:"submit",onClick:this.handleSubmitEditPayment},"Submit"),"\xa0",r.a.createElement(da.a,{size:"small",onClick:this.props.editPaymentClose},"Close"))))}}]),t}(r.a.Component),su=vr.a.create()(ou);function cu(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var uu=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).handleSubmitCancelPayment=function(e){var t=Object(f.a)(a);e.preventDefault(),a.props.form.validateFields((function(e,n){if(!e){var r=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?cu(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):cu(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},n,{practice:a.props.active_practiceId});qt(qe,r,(function(e){t.setState({cancelPaymentVisible:!1}),t.deletePayment(t.props.patientId,t.props.paymentId),t.props.cancelPaymentClose()}),(function(){}))}}))},a.state={cancelPaymentVisible:a.props.cancelPaymentVisible,otpSent:a.props.otpSent},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"deletePayment",value:function(e,t){var a=this,n={patient:e,is_cancelled:!0};Ht(Kt("payment/%s/",[t]),n,(function(e){Qt(O,"Payment cancelled successfully"),a.props.loadPayments()}),(function(){}))}},{key:"sendOTP",value:function(){Ut("patients/resend_otp/",(function(e){}),(function(){}))}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement(nr.a,{visible:this.state.cancelPaymentVisible&&this.props.editPayment&&this.props.editPayment.id==this.props.payment.id,title:"Cancel Payment",footer:null,onOk:this.handleSubmitCancelPayment,onCancel:this.props.cancelPaymentClose},r.a.createElement(vr.a,null,r.a.createElement(vr.a.Item,null,e("otp",{rules:[{required:!0,message:"Please input Otp!"}]})(r.a.createElement(ma.a,{prefix:r.a.createElement(va.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Otp"}))),r.a.createElement(vr.a.Item,null,this.state.otpSent?r.a.createElement("a",{style:{float:"right"},type:"primary",onClick:this.sendOTP},"Resend Otp ?"):null,r.a.createElement(da.a,{size:"small",type:"primary",htmlType:"submit",onClick:this.handleSubmitCancelPayment},"Submit"),"\xa0",r.a.createElement(da.a,{size:"small",onClick:this.props.cancelPaymentClose},"Close"))))}}]),t}(r.a.Component),du=vr.a.create()(uu),pu=(hl.Modal.confirm,function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).loadPayments=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=Object(f.a)(a);t.props.refreshWallet&&1==e&&t.props.refreshWallet(),a.setState({loading:!0});var n=function(e){t.setState((function(t){return 1==e.current?{payments:Object(Oa.a)(e.results),next:e.next,loading:!1}:{payments:[].concat(Object(Oa.a)(t.payments),Object(Oa.a)(e.results)),next:e.next,loading:!1}}))},r=function(){t.setState({loading:!1})},i={page:e,practice:a.props.active_practiceId};a.props.match.params.id&&(i.patient=a.props.match.params.id),Ut(Fe,n,r,i)},a.loadPDF=function(e){Object(f.a)(a);Ut(Kt(kt,[e]),(function(e){e.report&&window.open(V+e.report)}),(function(){}))},a.editModelOpen=function(e){var t=Object(f.a)(a);if(Or()().diff(e.created_at,"minutes")>F){t.setState({editPaymentVisible:!0,cancelPaymentVisible:!1,editPayment:e});var n={practice:a.props.active_practiceId,type:"Payment:"+e.payment_id+" Edit"};qt(He,n,(function(a){t.setState({otpSent:!0,patientId:e.patient,paymentId:e.payment_id})}),(function(){}))}else t.setState({editPayment:e},(function(){t.props.history.push("/patient/"+e.patient+"/billing/payments/edit")}))},a.editPaymentData=function(e){var t=Object(f.a)(a);t.setState({editPayment:e},(function(){t.props.history.push("/patient/"+e.patient+"/billing/payments/edit/")}))},a.cancelModalOpen=function(e){var t=Object(f.a)(a);if(Or()().diff(e.created_at,"minutes")>F){t.setState({editPaymentVisible:!1,cancelPaymentVisible:!0,editPayment:e});var n={practice:a.props.active_practiceId,type:"Payment:"+e.payment_id+"  Cancellation"};qt(He,n,(function(a){t.setState({otpSent:!0,patientId:e.patient,paymentId:e.id})}),(function(){}))}else t.deletePayment(e.patient,e.id)},a.editPaymentClose=function(){a.setState({editPaymentVisible:!1})},a.cancelPaymentClose=function(){a.setState({cancelPaymentVisible:!1})},a.state={payments:[],active_practiceId:a.props.active_practiceId,loading:!0,otpSent:!1,editPaymentVisible:!1,editPayment:null},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadPayments()}},{key:"deletePayment",value:function(e,t){var a=this,n={patient:e,is_cancelled:!0};Ht(Kt("payment/%s/",[t]),n,(function(e){Qt(O,"Payment cancelled successfully"),a.loadPayments()}),(function(){}))}},{key:"render",value:function(){var e=this,t=this,a={};return this.state.paymentModes&&this.state.paymentModes.forEach((function(e){a[e.id]=e.mode})),this.props.match.params.id?r.a.createElement("div",null,r.a.createElement(y.d,null,r.a.createElement(y.b,{exact:!0,path:"/patient/:id/billing/payments/add",render:function(t){return r.a.createElement(iu,Object.assign({},e.state,t,e.props,{loadData:e.loadPayments}))}}),r.a.createElement(y.b,{exact:!0,path:"/patient/:id/billing/payments/edit",render:function(a){return t.state.editPayment?r.a.createElement(iu,Object.assign({},e.state,a,e.props,{paymentId:e.state.paymentId,loadData:e.loadPayments})):r.a.createElement(y.a,{to:"/patient/"+a.match.params.id+"/billing/payments"})}}),r.a.createElement(y.b,null,r.a.createElement("div",null,r.a.createElement(c.a,{banner:!0,showIcon:!0,type:"info",message:"The payments shown are only for the current selected practice!"}),r.a.createElement(cr.a,{bodyStyle:{padding:0},title:this.state.currentPatient?this.state.currentPatient.name+" Payments":"Payments",extra:r.a.createElement(da.a.Group,null,r.a.createElement(Da.b,{to:"/patient/"+this.props.match.params.id+"/billing/payments/add"},r.a.createElement(da.a,null,r.a.createElement(va.a,{type:"plus"}),"Add")))}),this.state.payments.map((function(t){return fu(t,e)})),r.a.createElement(pa.a,{spinning:this.state.loading},r.a.createElement(rr.a,null)),r.a.createElement(wi,{loaderFunction:function(){return e.loadPayments(t.state.next)},loading:this.state.loading,hidden:!this.state.next}))))):r.a.createElement("div",null,r.a.createElement(cr.a,{bodyStyle:{padding:0},title:this.state.currentPatient?this.state.currentPatient.name+" Payments":"Payments",extra:r.a.createElement(da.a.Group,null,r.a.createElement(da.a,{type:"primary",onClick:function(){return e.props.togglePatientListModal(!0)}},r.a.createElement(va.a,{type:"plus"}),"Add"))}),this.state.payments.map((function(t){return fu(t,e)})),r.a.createElement(pa.a,{spinning:this.state.loading},r.a.createElement(rr.a,null)),r.a.createElement(wi,{loaderFunction:function(){return e.loadPayments(t.state.next)},loading:this.state.loading,hidden:!this.state.next}))}}]),t}(r.a.Component)),mu=vr.a.create()(pu),hu=[{title:"INVOICE",dataIndex:"invoice_id",key:"invoice",render:function(e){return r.a.createElement("span",null,e)}},{title:"Amount Paid",key:"pay_amount",dataIndex:"pay_amount",render:function(e){return e.toFixed(2)}}];function fu(e,t){t.props.form.getFieldDecorator;var a=[];return e.is_advance&&a.push({invoice_id:"Advance Payment",pay_amount:e.advance_value}),r.a.createElement(cr.a,{style:{marginTop:10},key:e.id,bodyStyle:{padding:0},title:e.patient_data&&!t.props.currentPatient?r.a.createElement("small",null,e.date?Or()(e.date).format("lll"):null,r.a.createElement(Da.b,{to:"/patient/"+e.patient_data.id+"/billing/payments"},"\xa0\xa0 ",e.patient_data.user.first_name," (ID: ",e.patient_data.custom_id?e.patient_data.custom_id:e.patient_data.id,")\xa0"),r.a.createElement("span",null,", ",e.patient_data.gender)):r.a.createElement("small",null,e.created_at?Or()(e.created_at).format("lll"):null),extra:r.a.createElement(ha.a.Button,{size:"small",style:{float:"right"},overlay:r.a.createElement(_a.a,null,r.a.createElement(_a.a.Item,{key:"2",onClick:function(){return t.editModelOpen(e)},disabled:e.practice!=t.props.active_practiceId},r.a.createElement(va.a,{type:"edit"}),"Edit"),r.a.createElement(_a.a.Item,{key:"3",onClick:function(){return t.cancelModalOpen(e)},disabled:e.practice!=t.props.active_practiceId||e.is_cancelled},r.a.createElement(va.a,{type:"delete"}),"Cancel"),r.a.createElement(_a.a.Divider,null),r.a.createElement(_a.a.Item,{key:"4"},r.a.createElement(Da.b,{to:"/patient/"+e.patient+"/emr/timeline"},r.a.createElement(va.a,{type:"clock-circle"}),"Patient Timeline")))},r.a.createElement("a",{onClick:function(){return t.loadPDF(e.id)}},r.a.createElement(va.a,{type:"printer"})))},r.a.createElement(rr.a,{gutter:8},r.a.createElement(ir.a,{xs:24,sm:24,md:6,lg:4,xl:4,xxl:4,style:{padding:10}},e.is_cancelled?r.a.createElement(c.a,{message:"Cancelled",type:"error",showIcon:!0}):null,r.a.createElement(sr.a,{style:{marginBottom:0}},e.payment_id)),r.a.createElement(ir.a,{xs:24,sm:24,md:18,lg:20,xl:20,xxl:20},r.a.createElement(lr.a,{columns:hu,pagination:!1,footer:function(){return function(e){if(e)return r.a.createElement("p",null,e.doctor?r.a.createElement(ms.a,{title:"Doctor"},r.a.createElement(fa.a,{color:e.doctor?e.doctor.calendar_colour:null},r.a.createElement("b",null,"prescribed by  "+e.doctor.user.first_name," "))):null,e.practice?r.a.createElement(fa.a,{style:{float:"right"}},r.a.createElement(ms.a,{title:"Practice Name"},r.a.createElement("b",null,e.practice.name," "))):null,e.notes?r.a.createElement("p",null,"Notes: ",e.notes):null);return null}({practice:e.practice_data,notes:e.notes})},dataSource:[].concat(Object(Oa.a)(e.invoices),a),rowKey:e.id}))),t.state.editPaymentVisible&&t.state.otpSent&&r.a.createElement(su,Object.assign({},t.state,{payment:e,editPaymentClose:t.editPaymentClose,editPaymentData:t.editPaymentData},t.props)),t.state.cancelPaymentVisible&&t.state.otpSent&&r.a.createElement(du,Object.assign({},t.state,{payment:e,cancelPaymentClose:t.cancelPaymentClose},t.props,{loadPayments:t.loadPayments})))}function gu(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function yu(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?gu(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):gu(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Eu=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).loadPDF=function(e){Object(f.a)(a);Ut(Kt(Ge,[e]),(function(e){e.report&&window.open(V+e.report)}),(function(){}))},a.cancelModalOpen=function(e){var t=Object(f.a)(a);if(Or()().diff(e.created_at,"minutes")>F){t.setState({cancelReturnIncoiceVisible:!0,editReturnInvoice:e});var n={practice:a.props.active_practiceId,type:"Return Invoice:"+e.return_id+"  Cancellation"};qt(He,n,(function(a){t.setState({otpSent:!0,patientId:e.patient,returnInvoiceId:e.id})}),(function(){}))}else t.deleteReturnInvoice(e.patient,e.id)},a.cancelReturnInvoiceClose=function(){a.setState({cancelReturnIncoiceVisible:!1})},a.handleSubmitCancelReturnInvoice=function(e){var t=Object(f.a)(a);e.preventDefault(),a.props.form.validateFields((function(e,n){if(!e){var r=yu({},n,{practice:a.props.active_practiceId});qt(qe,r,(function(e){t.setState({cancelReturnIncoiceVisible:!1}),t.deleteReturnInvoice(t.state.patientId,t.state.returnInvoiceId)}),(function(){}))}}))},a.state={currentPatient:a.props.currentPatient,active_practiceId:a.props.active_practiceId,returnInvoices:[],drug_catalog:null,procedure_category:null,taxes_list:null,loading:!0,cancelReturnIncoiceVisible:!1},a.loadReturnInvoices=a.loadReturnInvoices.bind(Object(f.a)(a)),a.loadDrugCatalog=a.loadDrugCatalog.bind(Object(f.a)(a)),a.loadProcedureCategory=a.loadProcedureCategory.bind(Object(f.a)(a)),a.loadTaxes=a.loadTaxes.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadReturnInvoices()}},{key:"loadReturnInvoices",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this;t.props.refreshWallet&&1==e&&t.props.refreshWallet(),t.setState({loading:!0});var a=function(e){1==e.current?t.setState({total:e.count,returnInvoices:e.results,loading:!1,loadMoreReturnInvoice:e.next}):t.setState((function(t){return{total:e.count,returnInvoices:[].concat(Object(Oa.a)(t.returnInvoices),Object(Oa.a)(e.results)),loading:!1,loadMoreReturnInvoice:e.next}}))},n=function(){t.setState({loading:!1})},r={page:e,practice:this.props.active_practiceId};this.props.match.params.id&&(r.patient=this.props.match.params.id),Ut(ze,a,n,r)}},{key:"loadDrugCatalog",value:function(){var e=this;Ut(Kt(he,[this.props.active_practiceId]),(function(t){e.setState({drug_catalog:t})}),(function(){}))}},{key:"loadProcedureCategory",value:function(){var e=this;Ut(Kt(ae,[this.props.active_practiceId]),(function(t){e.setState({procedure_category:t})}),(function(){}))}},{key:"loadTaxes",value:function(){var e=this;Ut(Kt($,[this.props.active_practiceId]),(function(t){e.setState({taxes_list:t})}),(function(){}))}},{key:"sendOTP",value:function(){Ut("patients/resend_otp/",(function(e){}),(function(){}))}},{key:"deleteReturnInvoice",value:function(e,t){var a=this,n={patient:e,is_cancelled:!0};Ht(Kt("return/%s/",[t]),n,(function(e){Qt(O,"Return Invoice cancelled successfully"),a.loadReturnInvoices()}),(function(){}))}},{key:"render",value:function(){var e=this,t=this,a={};this.state.drug_catalog&&this.state.drug_catalog.forEach((function(e){a[e.id]=e.name+","+e.strength}));var n={};this.state.procedure_category&&this.state.procedure_category.forEach((function(e){n[e.id]=e.name}));var i={};return this.state.taxes_list&&this.state.taxes_list.forEach((function(e){i[e.id]=e.name})),this.props.match.params.id?r.a.createElement("div",null,r.a.createElement(y.d,null,r.a.createElement(y.b,null,r.a.createElement("div",null,r.a.createElement(c.a,{banner:!0,showIcon:!0,type:"info",message:"The invoices return shown are only for the current selected practice!"}),r.a.createElement(s.a,{offsetTop:0},r.a.createElement(cr.a,{bodyStyle:{padding:0},style:{boxShadow:"0 5px 8px rgba(0, 0, 0, 0.09)"},title:(this.state.currentPatient?this.state.currentPatient.user.first_name+" Invoice Return":"Invoices Return ")+(this.state.total?"(Total:".concat(this.state.total,")"):"")})),this.state.returnInvoices.map((function(e){return vu(e,t)})),r.a.createElement(pa.a,{spinning:this.state.loading},r.a.createElement(rr.a,null)),r.a.createElement(wi,{loaderFunction:function(){return e.loadInvoices(e.state.loadMoreInvoice)},loading:this.state.loading,hidden:!this.state.loadMoreInvoice}))))):r.a.createElement("div",null,r.a.createElement(s.a,{offsetTop:0},r.a.createElement(cr.a,{bodyStyle:{padding:0},style:{boxShadow:"0 5px 8px rgba(0, 0, 0, 0.09)"},title:(this.state.currentPatient?this.state.currentPatient.user.first_name+" Invoice Return":"Invoice Return ")+(this.state.total?"(Total:".concat(this.state.total,")"):"")})),this.state.returnInvoices.map((function(e){return vu(e,t)})),r.a.createElement(pa.a,{spinning:this.state.loading},r.a.createElement(rr.a,null)),r.a.createElement(wi,{loaderFunction:function(){return e.loadInvoices(e.state.loadMoreInvoice)},loading:this.state.loading,hidden:!this.state.loadMoreInvoice}))}}]),t}(r.a.Component),bu=vr.a.create()(Eu);function vu(e,t){var a=t.props.form.getFieldDecorator;return r.a.createElement(cr.a,{key:e.id,style:{marginTop:10},bodyStyle:{padding:0},title:r.a.createElement("small",null,e.date?Or()(e.date).format("ll"):null,t.state.currentPatient?null:r.a.createElement("span",null,r.a.createElement(Da.b,{to:"/patient/"+(e.patient_data?e.patient_data.id:null)+"/billing/return/invoices"},"\xa0\xa0 ",e.patient_data?e.patient_data.user.first_name:null," (ID: ",e.patient_data.custom_id?e.patient_data.custom_id:e.patient_data.id,")\xa0"),", ",e.patient_data?e.patient_data.gender:null)),extra:r.a.createElement(ha.a.Button,{size:"small",style:{float:"right"},overlay:r.a.createElement(_a.a,null,r.a.createElement(_a.a.Item,{key:"1",onClick:function(){return t.cancelModalOpen(e)},disabled:e.practice!=t.props.active_practiceId||e.payments_data||e.is_cancelled},r.a.createElement(va.a,{type:"delete"}),"Cancel"))},r.a.createElement("a",{onClick:function(){return t.loadPDF(e.id)}},r.a.createElement(va.a,{type:"printer"})))},r.a.createElement(rr.a,{gutter:8},r.a.createElement(ir.a,{xs:24,sm:24,md:6,lg:4,xl:4,xxl:4,style:{padding:10}},e.is_cancelled?r.a.createElement(c.a,{message:"Cancelled",type:"error",showIcon:!0}):null,r.a.createElement(sr.a,{style:{marginBottom:0}},e.return_id),r.a.createElement(ao.a,{title:"Cash / Return ",value:e.cash_return?e.cash_return.toFixed(2):0,suffix:"/ "+(e.return_value?e.return_value.toFixed(2):0)})),r.a.createElement(ir.a,{xs:24,sm:24,md:18,lg:20,xl:20,xxl:20},r.a.createElement(lr.a,{bordered:!0,pagination:!1,columns:_u,dataSource:[].concat(Object(Oa.a)(e.inventory),Object(Oa.a)(e.procedure)),footer:function(){return(t=yu({},e))?r.a.createElement("p",null,t.staff?r.a.createElement(ms.a,{title:"Staff"},r.a.createElement(fa.a,{color:t.staff?t.staff_data.calendar_colour:null},r.a.createElement("b",null,"Return by  "+t.staff_data.user.first_name," "))):null,t.practice?r.a.createElement(fa.a,{style:{float:"right"}},r.a.createElement(ms.a,{title:"Practice Name"},r.a.createElement("b",null,t.practice_data.name," "))):null,t.notes?r.a.createElement("p",null,"Notes: ",t.notes):null):null;var t}}))),r.a.createElement(nr.a,{visible:t.state.cancelReturnIncoiceVisible&&t.state.editReturnInvoice&&t.state.editReturnInvoice.id==e.id,title:"Cancel Return Invoice",footer:null,onOk:t.handleSubmitCancelReturnInvoice,onCancel:t.cancelReturnInvoiceClose},r.a.createElement(vr.a,null,r.a.createElement(vr.a.Item,null,a("otp",{rules:[{required:!0,message:"Please input Otp!"}]})(r.a.createElement(ma.a,{prefix:r.a.createElement(va.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Otp"}))),r.a.createElement(vr.a.Item,null,t.state.otpSent?r.a.createElement("a",{style:{float:"right"},type:"primary",onClick:t.sendOTP},"Resend Otp ?"):null,r.a.createElement(da.a,{size:"small",type:"primary",htmlType:"submit",onClick:t.handleSubmitCancelReturnInvoice},"Submit"),"\xa0",r.a.createElement(da.a,{size:"small",onClick:t.cancelReturnInvoiceClose},"Close")))))}var _u=[{title:"Treatment & Products",dataIndex:"drug",key:"drug",render:function(e,t){return r.a.createElement("span",null," ",r.a.createElement("b",null,t.name?t.name:null))}},{title:"Cost",dataIndex:"unit_cost",key:"unit_cost",render:function(e,t){return r.a.createElement("span",null,t.unit_cost?t.unit_cost.toFixed(2):null)}},{title:"Unit",dataIndex:"unit",key:"unit"},{title:"Discount",dataIndex:"discount_value",key:"discount_value",render:function(e,t){return r.a.createElement("span",null,t.discount_value?t.discount_value.toFixed(2):null)}},{title:"Tax",dataIndex:"tax_value",key:"tax_value",render:function(e,t){return r.a.createElement("span",null,t.tax_value?t.tax_value.toFixed(2):null)}},{title:"Total",dataIndex:"total",key:"total",render:function(e){return e?e.toFixed(2):null}}],Ou=function(e){var t="";return"Invoice"!=e.type&&(t+=e.type+", "),e.procedure&&e.procedure.forEach((function(e){e.procedure_data&&(t+=e.procedure_data.name+", ")})),e.inventory&&e.inventory.forEach((function(e){e.inventory_item_data&&(t+=e.inventory_item_data.name+", ")})),e.reservation&&(t+=e.type+","),e.reservation_data&&e.reservation_data.medicines&&e.reservation_data.medicines.forEach((function(e){t+=e.name+","})),t.trim(",")},Du=function(e){var t="";return e.invoices&&e.invoices.forEach((function(e){e.invoice&&(t+=e.invoice.invoice_id+", ")})),t},ku=function(e){var t="";return e.procedure&&e.procedure.forEach((function(e){e.procedure_data&&(t+=e.procedure_data.name+", ")})),e.inventory&&e.inventory.forEach((function(e){t+=e.name+", "})),e.reservation&&(t+=e.type+","),e.reservation_data&&e.reservation_data.medicines&&e.reservation_data.medicines.forEach((function(e){t+=e.name+","})),t.trim(",")};function Pu(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Su(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Pu(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Pu(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var xu=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).loadPatientLedger=function(){var e=Object(f.a)(a);e.props.refreshWallet&&e.props.refreshWallet(),a.setState({loadingLedger:!0});var t={practice_id:a.props.active_practiceId};a.props.showAllClinic&&a.props.match.params.id&&delete t.practice,Ut(Kt(pe,[e.props.currentPatient.id]),(function(t){var a=[],n=0,r=0,i=0;t.forEach((function(e){var t={date:e.date,type:e.ledger_type};"Invoice"==e.ledger_type?(t.type_id=e.invoice_id,t.details=Ou(e),t.credit=e.total,t.debit=0,t.return=0,t.cash_return=0):"Payment"==e.ledger_type?(t.type_id=e.payment_id,t.details=Du(e),e.return_pay?(t.credit=0,t.debit=0,t.return=-1*(e.total+e.advance_value)):(t.credit=0,t.debit=e.total+e.advance_value,t.return=0),t.cash_return=0):"Return"==e.ledger_type&&(t.type_id=e.return_id,t.details=ku(e),t.credit=e.cash_return,t.debit=0,t.return=e.return_value,0==e.with_tax&&(t.credit+=e.taxes),t.cash_return=e.cash_return),n+=t.credit,n-=t.debit,i+=t.debit,r+=t.credit,t.balance=n,a.push(t)})),e.setState({loadingLedger:!1,credit:r,debit:i,balance:n,ledger:a})}),(function(){e.setState({loadingLedger:!1})}),t)},a.loadPDF=function(e){Object(f.a)(a)},a.state={loading:!1,ledger:[],loadingLedger:!1,selectedList:{},credit:0,debit:0,balance:0},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadPatientLedger()}},{key:"ledgerCompleteToggle",value:function(e,t){this.setState((function(a){return{selectedList:Su({},a.selectedList,Object(u.a)({},e,!!t))}}))}},{key:"render",value:function(){return r.a.createElement(rr.a,null,r.a.createElement(cr.a,{title:this.state.currentPatient?this.state.currentPatient.name+" Payment Ledger":"Patient Ledgers",extra:r.a.createElement(da.a.Group,null,r.a.createElement(Da.b,{to:"/patient/"+this.props.match.params.id+"/billing/payments"}," ",r.a.createElement(da.a,{type:"primary"},r.a.createElement(va.a,{type:"plus"}),"\xa0Add Payment")),r.a.createElement(Da.b,{to:"/patient/"+this.props.match.params.id+"/billing/invoices"}," ",r.a.createElement(da.a,{type:"primary"},r.a.createElement(va.a,{type:"plus"}),"\xa0Add Invoice")),"\xa0")},r.a.createElement(lr.a,{loading:this.state.loadingLedger,columns:[{title:"Date",key:"date",dataIndex:"date",width:120},{title:"Invoice/ Receipt/ Return No",key:"type_id",dataIndex:"type_id"},{title:"Details",key:"details",dataIndex:"details"},{title:"Type",key:"type",dataIndex:"type"},{title:"Return(INR)",key:"return",dataIndex:"return",align:"right",render:function(e){return e.toFixed(2)}},{title:"Cash Return(INR)",key:"cash_return",dataIndex:"cash_return",align:"right",render:function(e){return e.toFixed(2)}},{title:"Credit(INR)",key:"credit",dataIndex:"credit",align:"right",render:function(e){return e.toFixed(2)}},{title:"Debit(INR)",key:"debit",dataIndex:"debit",align:"right",render:function(e){return e.toFixed(2)}},{title:"Balance(INR)",key:"balance",dataIndex:"balance",align:"right",render:function(e){return e.toFixed(2)}}],dataSource:this.state.ledger,pagination:!1}),r.a.createElement(rr.a,{style:{marginTop:20,textAlign:"center"}},r.a.createElement(ir.a,{span:8},r.a.createElement("h3",null,"Total Credit: ",this.state.credit.toFixed(2))),r.a.createElement(ir.a,{span:8},r.a.createElement("h3",null,"Total Debit: ",this.state.debit.toFixed(2))),r.a.createElement(ir.a,{span:8},r.a.createElement("h3",null,"Total Balance: ",this.state.balance<0?(-1*this.state.balance).toFixed(2)+" (Advance)":this.state.balance.toFixed(2))))))}}]),t}(r.a.Component),ju=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).searchPatient=function(e){a.setState({searchPatientString:e});var t=Object(f.a)(a);e&&Ut(Kt(We,[e]),(function(e){e&&t.setState({patientListData:e.results})}),(function(){}))},a.removePatient=function(e){a.setState(Object(u.a)({},e,null))},a.handlePatientSelect=function(e,t){if(console.log(e),e){var n=Object(f.a)(a);Ut(Kt(ce,[e]),(function(e){n.setState(Object(u.a)({},t,e))}),(function(){}))}},a.mergePatient=function(){a.setState({loading:!0});var e=Object(f.a)(a),t={patient_from:a.state.patient_from.id,patient_to:a.state.patient_to.id};qt(ue,t,(function(t){Qt(O,"Patients Merged Successfully!!"),e.setState({loading:!1,patient_from:null,patient_to:null})}),(function(){Qt(k,"Patients Merging Failed!!"),e.setState({loading:!1})}))},a.state={patient_from:null,patient_to:null,loading:!1,patientListData:[]},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h2",null,"Merge Patients"),r.a.createElement(cr.a,null,r.a.createElement(c.a,{message:"Profile details and records of Patient 1 will be moved to Patient 2. You cannot undo this action once done.",type:"warning"}),r.a.createElement(pa.a,{spinning:this.state.loading},r.a.createElement(rr.a,{gutter:16,style:{marginTop:10}},r.a.createElement(ir.a,{span:12,style:{textAlign:"center"}},r.a.createElement("h3",null,"Patient 1"),this.state.patient_from?r.a.createElement(cr.a,{bordered:!1,style:{background:"#ECECEC",textAlign:"left"}},r.a.createElement(cr.a.Meta,{avatar:this.state.patient_from.image?r.a.createElement(ba.a,{src:Bt(this.state.patient_from.image)}):r.a.createElement(ba.a,{style:{backgroundColor:"#87d068"}},this.state.patient_from.user.first_name?this.state.patient_from.user.first_name.charAt(0):r.a.createElement(va.a,{type:"user"})),title:this.state.patient_from.user.first_name,description:this.state.patient_from.user.mobile}),r.a.createElement(da.a,{type:"primary",style:{float:"right"},onClick:function(){return e.removePatient("patient_from")}},"Select Different Patient")):r.a.createElement(ya.a,{placeholder:"Patient Name",showSearch:!0,onSearch:this.searchPatient,defaultActiveFirstOption:!1,showArrow:!1,filterOption:!1,onChange:this.handleChange,onSelect:function(t){return e.handlePatientSelect(t,"patient_from")}},this.state.patientListData.map((function(e){return r.a.createElement(ya.a.Option,{value:e.id.toString()},r.a.createElement(Ea.a.Item,{style:{padding:0}},r.a.createElement(Ea.a.Item.Meta,{avatar:e.image?r.a.createElement(ba.a,{src:Bt(e.image)}):r.a.createElement(ba.a,{style:{backgroundColor:"#87d068"}},e.user.first_name?e.user.first_name.charAt(0):r.a.createElement(va.a,{type:"user"})),title:e.user.first_name+" ("+e.user.id+")",description:r.a.createElement("small",null,e.user.mobile)})))})))),r.a.createElement(ir.a,{span:12,style:{textAlign:"center"}},r.a.createElement("h3",null,"Patient 2"),this.state.patient_to?r.a.createElement(cr.a,{bordered:!1,style:{background:"#ECECEC",textAlign:"left"}},r.a.createElement(cr.a.Meta,{avatar:this.state.patient_to.image?r.a.createElement(ba.a,{src:Bt(this.state.patient_to.image)}):r.a.createElement(ba.a,{style:{backgroundColor:"#87d068"}},this.state.patient_to.user.first_name?this.state.patient_to.user.first_name.charAt(0):r.a.createElement(va.a,{type:"user"})),title:this.state.patient_to.user.first_name,description:this.state.patient_to.user.mobile}),r.a.createElement(da.a,{type:"primary",style:{float:"right"},onClick:function(){return e.removePatient("patient_to")}},"Select Different Patient")):r.a.createElement(ya.a,{placeholder:"Patient Name",showSearch:!0,onSearch:this.searchPatient,defaultActiveFirstOption:!1,showArrow:!1,filterOption:!1,onChange:this.handleChange,onSelect:function(t){return e.handlePatientSelect(t,"patient_to")}},this.state.patientListData.map((function(e){return r.a.createElement(ya.a.Option,{value:e.id.toString()},r.a.createElement(Ea.a.Item,{style:{padding:0}},r.a.createElement(Ea.a.Item.Meta,{avatar:e.image?r.a.createElement(ba.a,{src:Bt(e.image)}):r.a.createElement(ba.a,{style:{backgroundColor:"#87d068"}},e.user.first_name?e.user.first_name.charAt(0):r.a.createElement(va.a,{type:"user"})),title:e.user.first_name+" ("+e.user.id+")",description:r.a.createElement("small",null,e.user.mobile)})))})))),r.a.createElement(ir.a,{span:24,style:{textAlign:"center",marginTop:30}},r.a.createElement(da.a,{disabled:this.state.loading||!this.state.patient_from||!this.state.patient_to,type:"primary",onClick:this.mergePatient},r.a.createElement(va.a,{type:"plus"}),"Merge Patients"))))))}}]),t}(r.a.Component),Iu=function(e){function t(e){return Object(d.a)(this,t),Object(m.a)(this,Object(h.a)(t).call(this,e))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(cr.a,{style:{textAlign:"center"}},r.a.createElement("h2",null," Please select patient to further continue !!"),this.props.togglePatientListModal?r.a.createElement(da.a,{type:"primary",onClick:function(){return e.props.togglePatientListModal(!0)}},r.a.createElement(va.a,{type:"user"})," Select Patient"):null)}}]),t}(r.a.Component);function Cu(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var wu=ma.a.TextArea,Mu=ga.a.Option,Au=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).handleCheck=function(e){a.setState({excused_duty_checked:!a.state.excused_duty_checked})},a.handleLighDutyCheck=function(e){a.setState({fit_light_duty_checked:!a.state.fit_light_duty_checked})},a.onChangeHandle=function(e){console.log("handlechanged",e),a.setState({value:e.target.value})},a.handleAttendanceCheck=function(e){a.setState({attendance_checked:!a.state.attendance_checked})},a.handleChangeStart=function(e){a.setState({startDate:e})},a.onChange=function(e){a.setState({proof_attendance_from:e})},a.selectedDate=function(e){a.setState({selectedDate:e})},a.selectDoctor=function(e){a.setState({selectedDoctor:e})},a.handleSubmit=function(e){var t=Object(f.a)(a);e.preventDefault(),a.props.form.validateFields((function(e,n){if(n.excused_duty||n.fit_light_duty||n.proof_attendance){if(!e){var r=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Cu(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Cu(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},n,{doctor:t.state.selectedDoctor.id,practice:t.props.active_practiceId,date:t.state.selectedDate&&Or()(t.state.selectedDate).isValid()?t.state.selectedDate.format("YYYY-MM-DD"):null,excused_duty_from:Or()(n.excused_duty_from).format("YYYY-MM-DD"),excused_duty_to:Or()(n.excused_duty_to).format("YYYY-MM-DD"),fit_light_duty_from:Or()(n.fit_light_duty_from).format("YYYY-MM-DD"),fit_light_duty_to:Or()(n.fit_light_duty_to).format("YYYY-MM-DD"),proof_attendance_date:Or()(n.proof_attendance_date).format("YYYY-MM-DD"),proof_attendance_from:Or()(n.proof_attendance_from).format("LT"),proof_attendance_to:Or()(n.proof_attendance_to).format("LT"),patient:t.props.match.params.id,is_active:!0,valid_court:!1,invalid_court:!1,no_mention:!1});n.group&&(r[n.group]=!0),delete r.group;qt(Kt(Ie,[a.props.currentPatient.id]),r,(function(e){Qt(O,"Medical Certificate Generated."),t.props.history.push("/patient/"+t.props.match.params.id+"/emr/files")}),(function(){t.setState({})}))}}else Qt(k,"Please select at least one of the above options")}))},a.state={redirect:!1,excused_duty_checked:!1,fit_light_duty_checked:!1,attendance_checked:!1,startDate:a.props.value,endDate:new Date,proof_attendance_from:null,days:0,practiceDoctors:[],selectedDoctor:{},selectedDate:Or()(),value:""},a.handleChangeStart=a.handleChangeStart.bind(Object(f.a)(a)),a.handleChangeEnd=a.handleChangeEnd.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){mi(this)}},{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"handleChangeEnd",value:function(e){this.setState({endDate:e})}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=ln.map((function(e){return r.a.createElement(br.a,{value:e.value},e.label)}));return r.a.createElement(vr.a,Object.assign({onSubmit:this.handleSubmit},{labelCol:{xs:{span:24},sm:{span:8},md:{span:8},lg:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16},md:{span:16},lg:{span:16}}}),r.a.createElement(cr.a,{title:"ADD MEDICAL LEAVE CERTIFICATE",extra:r.a.createElement(da.a.Group,null,r.a.createElement(da.a,{type:"primary",htmlType:"submit"},"Save Certificate"))},r.a.createElement(vr.a.Item,null,t("excused_duty",{})(r.a.createElement(pr.a,{onClick:this.handleCheck,defaultChecked:this.state.excused_duty_checked},"Excused from duty"))),this.state.excused_duty_checked?r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:6,offset:6},r.a.createElement(vr.a.Item,{label:"From"},t("excused_duty_from",{})(r.a.createElement(yr.a,null))),r.a.createElement(vr.a.Item,{label:"till"},t("excused_duty_to",{})(r.a.createElement(yr.a,null)))),r.a.createElement(ir.a,{span:6},r.a.createElement(vr.a.Item,null,t("excused_duty_from_session",{initialValue:"Morning"})(r.a.createElement(ga.a,null,r.a.createElement(Mu,{value:"Morning"},"Morning Session"),r.a.createElement(Mu,{value:"Morning"},"Evening Session")))),r.a.createElement(vr.a.Item,null,t("excused_duty_to_session",{initialValue:"Morning"})(r.a.createElement(ga.a,null,r.a.createElement(Mu,{value:"Morning"},"Morning Session"),r.a.createElement(Mu,{value:"Morning"},"Evening Session")))))):null,r.a.createElement(vr.a.Item,null,t("fit_light_duty",{})(r.a.createElement(pr.a,{onClick:this.handleLighDutyCheck,defaultChecked:this.state.fit_light_duty_checked},"Fit for light duty"))),this.state.fit_light_duty_checked?r.a.createElement(rr.a,null,r.a.createElement(ir.a,null,r.a.createElement(vr.a.Item,{label:"From"},t("fit_light_duty_from",{})(r.a.createElement(yr.a,null))),r.a.createElement(vr.a.Item,{label:"till"},t("fit_light_duty_to",{})(r.a.createElement(yr.a,null))))):null,r.a.createElement(vr.a.Item,null,t("proof_attendance",{})(r.a.createElement(pr.a,{onClick:this.handleAttendanceCheck,defaultChecked:this.state.attendance_checked},"Proof of attendance at practice"))),this.state.attendance_checked?r.a.createElement(rr.a,null,r.a.createElement(vr.a.Item,{label:"on"},t("proof_attendance_date",{})(r.a.createElement(yr.a,null))),r.a.createElement(ir.a,{span:6,offset:6},r.a.createElement(vr.a.Item,{label:"From"},t("proof_attendance_from",{})(r.a.createElement(gr.a,{use12Hours:!0,format:"h:mm A"}))),r.a.createElement(vr.a.Item,{label:"till"},t("proof_attendance_to",{})(r.a.createElement(gr.a,{use12Hours:!0,format:"h:mm A"}))))):null,r.a.createElement(vr.a.Item,{label:"Notes"},t("notes",{})(r.a.createElement(wu,null))),r.a.createElement(vr.a.Item,null,t("group",{initialValue:"no_mention"})(r.a.createElement(br.a.Group,null,a))),r.a.createElement(s.a,{offsetBottom:0},r.a.createElement(cr.a,null,r.a.createElement("span",null,"Issued by \xa0\xa0"),r.a.createElement(ha.a,{placement:"topCenter",overlay:r.a.createElement(_a.a,null,this.state.practiceDoctors.map((function(t){return r.a.createElement(_a.a.Item,{key:"0"},r.a.createElement("a",{onClick:function(){return e.selectDoctor(t)}},t.user.first_name))}))),trigger:["click"]},r.a.createElement("a",{className:"ant-dropdown-link",href:"#"},r.a.createElement("b",null,this.state.selectedDoctor.user?this.state.selectedDoctor.user.first_name:"No DOCTORS Found"))),r.a.createElement("span",null," \xa0\xa0on\xa0\xa0"),r.a.createElement(yr.a,{value:this.state.selectedDate,onChange:function(t){return e.selectedDate(t)},format:"DD-MM-YYYY",allowClear:!1})))))}}]),t}(r.a.Component),Tu=vr.a.create()(Au);function Ru(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Lu(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ru(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ru(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Fu=cr.a.Meta,Nu=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).loadPackages=function(){var e=Object(f.a)(a);Ut(Kt(St,[a.props.active_practiceId]),(function(t){e.setState({packages:t})}),(function(){}))},a.loadDiseases=function(){var e=Object(f.a)(a);Ut(Kt(Ct,[a.props.active_practiceId]),(function(t){e.setState({diseases:t})}),(function(){}))},a.searchPatient=function(e){var t=Object(f.a)(a);Ut(Kt(We,[e]),(function(e){e&&t.setState({patientList:e,ptr:e})}),(function(){}))},a.handlePatientSelect=function(e){if(e){var t=Object(f.a)(a);Ut(Kt(ce,[e]),(function(e){t.setState({patientDetails:e})}),(function(){}))}},a.checkBedStatus=function(e,t){var n=Object(f.a)(a);n.handleRoomType(),a.setState(Object(u.a)({},e,t),(function(){n.calculateTotalAmount();var e=n.state,t=e.from_date,a=e.bed_package;if(t&&a){var r=null;if(n.state.packages.forEach((function(e){a==e.id&&(r=Or()(t).add(e.no_of_days-1,"day"))})),t&&r&&a)(0,n.props.form.setFieldsValue)({to_date:r}),Ut(Kt(It,[n.props.active_practiceId]),(function(e){n.setState({availabilitySeatTatkal:e.TATKAL,availabilitySeatNormal:e.NORMAL}),e[n.props.form.getFieldValue("seat_type")]||(n.props.form.setFieldsValue({seat_type:null}),n.calculateTotalAmount())}),(function(){}),{start:Or()(t).format("YYYY-MM-DD"),end:Or()(r).format("YYYY-MM-DD"),bed_package:a})}}))},a.handleSubmit=function(e){a.setState({loading:!0});var t=Object(f.a)(a);e.preventDefault(),a.props.form.validateFields((function(e,n){if(!e){var r=Lu({},n,{to_date:Or()(n.to_date).format("YYYY-MM-DD"),from_date:Or()(n.from_date).format("YYYY-MM-DD"),paid:!1,total_price:a.state.totalPayableAmount,date:Or()().format("YYYY-MM-DD"),total_tax:a.state.tax,patient:a.state.patientDetails.id,rest_diseases:n.rest_diseases?n.rest_diseases.join(","):null,report_upload:n.file&&n.file.file.response?n.file.file.response.image_path:null});qt(Kt(jt,[a.props.active_practiceId]),r,(function(e){Qt(O,"Saved Successfully!!"),t.props.history.goBack(),t.props.loadData&&t.props.loadData()}),(function(){}))}}))},a.handleClick=function(e){a.setState({patientDetails:null})},a.handleRoomType=function(e,t){var n=Object(f.a)(a);a.setState(Object(u.a)({},e,t),(function(){n.calculateTotalAmount()}))},a.calculateTotalAmount=function(){Object(f.a)(a).setState((function(e){var t=0,a=0,n={},r=[],i=0;return e.packages.forEach((function(i){e.bed_package==i.id&&("NORMAL"==e.seat_type&&(t=i.normal_price+i.normal_tax_value,a+=i.normal_tax_value,n=Lu({},i,{type:"BED",price_with_tax:t,tax:i.normal_tax_value,price:i.normal_price,_id:Math.random().toFixed(7)}),r=[n]),"TATKAL"==e.seat_type&&(t=i.tatkal_price+i.tatkal_tax_value,a+=i.tatkal_tax_value,n=Lu({},i,{type:"BED",price_with_tax:t,tax:i.tatkal_tax_value,price:i.tatkal_price,_id:Math.random().toFixed(7)}),r=[n]))})),e.medicinePackage.forEach((function(t){e.medicineItem.forEach((function(e){t.id==e&&(i+=t.final_price,a+=t.tax_value,r=[].concat(Object(Oa.a)(r),[Lu({},t,{type:"MEDICINE",price_with_tax:t.final_price,tax:t.tax_value,_id:Math.random().toFixed(7)})]))}))})),{totalPayableAmount:t+i,tax:a,choosePkg:Object(Oa.a)(r)}}))},a.setPaymentAmount=function(e){var t=Object(f.a)(a);a.setState({totalPayingAmount:e},(function(){t.calculateTotalAmount()}))},a.handleMedicineSelect=function(e){var t=e;a.setState({medicineItem:t},(function(){this.calculateTotalAmount()}))},a.changeDiscount=function(e,t){Object(f.a)(a).setState((function(a){var n=[];return a.choosePkg.forEach((function(a){a._id==e?n.push(Lu({},a,{discount:t})):n.push(a)})),{choosePkg:n}}))},a.state={packages:[],totalPayableAmount:0,totalPayingAmount:0,patientList:[],paymentModes:[],medicinePackage:[],medicineItem:[],diseases:[]},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.props.currentPatient&&this.handlePatientSelect(this.props.currentPatient.id),this.loadPackages(),this.loadPaymentModes(),this.loadMedicinePackages(),this.loadDiseases()}},{key:"loadMedicinePackages",value:function(){var e=this;Ut(Kt(xt,[this.props.active_practiceId]),(function(t){e.setState({medicinePackage:t})}),(function(){}))}},{key:"loadPaymentModes",value:function(){var e=this;Ut(Kt(te,[this.props.active_practiceId]),(function(t){e.setState({paymentModes:t})}),(function(){}))}},{key:"render",value:function(){var e=this,t=[{value:"NORMAL",is_or_not:!(!this.state.availabilitySeatNormal||!this.state.availabilitySeatNormal.available)},{value:"TATKAL",is_or_not:!(!this.state.availabilitySeatTatkal||!this.state.availabilitySeatTatkal.available)}],a=this,n=this.props.form.getFieldDecorator,i={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:14}}},l=[{title:"Item",key:"name",dataIndex:"name"},{title:"Normal Price",key:"normal_price",dataIndex:"normal_price"},{title:"Tatkal Price",key:"tatkal_price",dataIndex:"tatkal_price"},{title:"discount %",key:"discount",width:100,dataIndex:"discount",render:function(e,t){return r.a.createElement(vr.a.Item,Object.assign({key:"discount[".concat(t._id,"]")},i),n("discount[".concat(t._id,"]"),{initialValue:t.discount,validateTrigger:["onChange","onBlur"]})(r.a.createElement(Er.a,{min:0,max:100,placeholder:"discount",size:"small",value:t.discount,onChange:function(e){return a.changeDiscount(t._id,e)}})))}},{title:"Price",key:"price",dataIndex:"price",render:function(e,t){return r.a.createElement("p",null,e?e.toFixed(2):null)}},{title:"Tax",key:"tax",dataIndex:"tax",render:function(e,t){return r.a.createElement("p",null,e?e.toFixed(2):null)}},{title:"Total Amount",key:"price_with_tax",dataIndex:"price_with_tax",render:function(e,t){return r.a.createElement("p",null,e?e.toFixed(2):null)}}],o={name:"image",data:{name:"hello"},action:Vt("blogImage/"),headers:{authorization:"authorization-text"},onChange:function(e){e.file.status,"done"===e.file.status?N.a.success("".concat(e.file.name," file uploaded successfully")):"error"===e.file.status&&N.a.error("".concat(e.file.name," file upload failed."))}};return r.a.createElement("div",null,r.a.createElement(cr.a,{title:"Book a Seat/Bed"},r.a.createElement(vr.a,null,r.a.createElement(rr.a,null,r.a.createElement(ir.a,{xs:24,sm:24,md:12,lg:12,xl:12},r.a.createElement("div",null,this.state.patientDetails?r.a.createElement(vr.a.Item,Object.assign({key:"id",value:this.state.patientDetails?this.state.patientDetails.id:""},{wrapperCol:{xs:{offset:6,span:24},sm:{offset:6,span:14}}}),r.a.createElement(cr.a,{bordered:!1,style:{background:"#ECECEC"}},r.a.createElement(Fu,{avatar:this.state.patientDetails.image?r.a.createElement(ba.a,{src:Bt(this.state.patientDetails.image)}):r.a.createElement(ba.a,{style:{backgroundColor:"#87d068"}},this.state.patientDetails.user.first_name?this.state.patientDetails.user.first_name.charAt(0):r.a.createElement(va.a,{type:"user"})),title:this.state.patientDetails.user.first_name,description:this.state.patientDetails.user.mobile}))):r.a.createElement("div",null,r.a.createElement(vr.a.Item,Object.assign({label:"Patient"},i),n("patient",{rules:[{required:!0,message:"this field required"}]})(r.a.createElement(ya.a,{placeholder:"Patient Name",showSearch:!0,onSearch:this.searchPatient,defaultActiveFirstOption:!1,showArrow:!1,filterOption:!1,onSelect:this.handlePatientSelect},this.state.patientList.map((function(e){return r.a.createElement(ya.a.Option,{value:e?e.id.toString():""},r.a.createElement(Ea.a.Item,{style:{padding:0}},r.a.createElement(Ea.a.Item.Meta,{avatar:e.image?r.a.createElement(ba.a,{style:{backgroundColor:"#ffff"},src:Bt(e.image)}):r.a.createElement(va.a,{type:"user"}),title:e.user.first_name+" ("+e.user.id+")",description:r.a.createElement("small",null,e.user.mobile)})))})))),this.state.ptr?r.a.createElement(c.a,{message:"Patient Not Found !!",description:"Please Search another patient or create new patient.",type:"error"}):null)),r.a.createElement(vr.a.Item,Object.assign({label:"Bed Package"},i),n("bed_package",{rules:[{required:!0,message:"this field required!"}]})(r.a.createElement(ga.a,{onChange:function(e){return a.checkBedStatus("bed_package",e)}},a.state.packages.map((function(e){return r.a.createElement(ga.a.Option,{value:e.id},e.name)}))))),r.a.createElement(vr.a.Item,Object.assign({label:"Book From"},i),n("from_date",{rules:[{required:!0,message:"Input From Date!"}]})(r.a.createElement(yr.a,{onChange:function(e){return a.checkBedStatus("from_date",e)},format:"DD-MM-YYYY"}))),r.a.createElement(vr.a.Item,Object.assign({label:"Book To"},i),n("to_date",{rules:[{required:!0,message:"Input To Date!"}]})(r.a.createElement(yr.a,{disabled:!0,format:"DD-MM-YYYY"}))),r.a.createElement(vr.a.Item,Object.assign({label:"Booking Type"},i),n("seat_type",{rules:[{required:!0,message:"this field required"}]})(r.a.createElement(br.a.Group,{onChange:function(t){return e.handleRoomType("seat_type",t.target.value)}},t.map((function(e){return r.a.createElement(br.a,{value:e.is_or_not?e.value:"",disabled:!e.is_or_not},e.value)}))))),r.a.createElement(vr.a.Item,Object.assign({label:"Medicine  Package"},i),n("medicines",{})(r.a.createElement(ga.a,{mode:"multiple",onChange:this.handleMedicineSelect},a.state.medicinePackage.map((function(e){return r.a.createElement(ga.a.Option,{value:e.id},e.name)}))))),r.a.createElement(vr.a.Item,Object.assign({label:"Pay Now : "},i),n("pay_value",{rules:[{required:!0,message:"this field is required"}],initialValue:this.state.totalPayingAmount?this.state.totalPayingAmount:null})(r.a.createElement(Er.a,{min:0,step:1,max:this.state.totalPayableAmount,onChange:this.setPaymentAmount}))),r.a.createElement(vr.a.Item,Object.assign({label:"Payment Mode"},i),n("payment_mode",{rules:[{required:!0,message:"this field required"}]})(r.a.createElement(ga.a,{showSearch:!0,filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},this.state.paymentModes.map((function(e){return r.a.createElement(ga.a.Option,{value:e.id},e.mode)}))))))),r.a.createElement(ir.a,{xs:24,sm:24,md:12,lg:12,xl:12},r.a.createElement(sr.a,null,"Patient Details"),r.a.createElement(vr.a.Item,Object.assign({label:"Creatinine Level"},i),n("creatinine",{})(r.a.createElement(ma.a,null))),r.a.createElement(vr.a.Item,Object.assign({label:"Urea Level"},i),n("urea_level",{})(r.a.createElement(ma.a,null))),r.a.createElement(vr.a.Item,Object.assign({label:"Currently on Dialysis?"},i),n("dialysis",{})(r.a.createElement(ga.a,{showSearch:!0,filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},r.a.createElement(ga.a.Option,{value:!0},"YES"),r.a.createElement(ga.a.Option,{value:!1},"NO")))),r.a.createElement(vr.a.Item,Object.assign({label:"Diseases"},i),n("other_diseases",{})(r.a.createElement(ga.a,{showSearch:!0,mode:"multiple",filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},this.state.diseases.map((function(e){return r.a.createElement(ga.a.Option,{value:e.id},e.name)}))))),r.a.createElement(vr.a.Item,Object.assign({label:"Other Diseases"},i),n("rest_diseases",{})(r.a.createElement(ga.a,{mode:"tags"}))),r.a.createElement(vr.a.Item,Object.assign({label:"Upload Report"},i),n("file",{})(r.a.createElement(fr.a,o,r.a.createElement(da.a,null,r.a.createElement(va.a,{type:"upload"})," Select File")))),r.a.createElement(lr.a,{pagination:!1,columns:l,size:"small",dataSource:this.state.choosePkg})),r.a.createElement(ir.a,{span:24},r.a.createElement("h3",null,"Grand Total: ",r.a.createElement("b",null,this.state.totalPayableAmount.toFixed(2))),r.a.createElement(vr.a.Item,null,r.a.createElement(or.a,{title:"Are you sure to take payment of INR "+this.state.totalPayingAmount+"?",onConfirm:this.handleSubmit},r.a.createElement(da.a,{type:"primary"},"Submit")),a.props.history?r.a.createElement(da.a,{style:{margin:5},onClick:function(){return a.props.history.goBack()}},"Cancel"):null))))))}}]),t}(r.a.Component),Yu=vr.a.create()(Nu),Vu=o.a.Content,Bu=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).loadBedBookingReport=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=Object(f.a)(a);a.setState({loading:!0});var n=function(e){console.log(e),1==e.current?t.setState({bedBookingReports:e.results,loading:!1,nextReport:e.next}):t.setState((function(t){return{bedBookingReports:[].concat(Object(Oa.a)(t.bedBookingReports),Object(Oa.a)(e.results)),loading:!1,nextReport:e.next}}))},r=function(){t.setState({loading:!1})};Ut(Kt(dt,[a.props.active_practiceId]),n,r,{page:e,patients:a.state.patient.id})},a.state={loading:!0,bedBookingReports:[],patient:a.props.currentPatient||{}},a.loadBedBookingReport=a.loadBedBookingReport.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadBedBookingReport()}},{key:"render",value:function(){var e=this,t=this,a=[{title:"Bed Package",key:"name",dataIndex:"bed_package.name"},{title:"Medicine Package",key:"medicine",dataIndex:"medicines",render:function(e,t){return r.a.createElement("span",null,e.map((function(e){return r.a.createElement(fa.a,null,e.name)})))}},{title:"From ",key:"from_date",render:function(e,t){return r.a.createElement("span",null,Or()(t.from_date).format("LL"))}},{title:"To ",key:"to_date",render:function(e,t){return r.a.createElement("span",null,Or()(t.to_date).format("LL"))}},{title:"Seat/Bed Type",key:"seat_type",dataIndex:"seat_type"},{title:"Seat Number",key:"seat_no",dataIndex:"seat_no"},{title:"Total price",key:"total_price",dataIndex:"total_price",render:function(e){return r.a.createElement("p",null,e.toFixed(2))}},{title:"Payment Status",key:"payment_status",dataIndex:"payment_status"}];return r.a.createElement(Vu,{className:"main-container",style:{minHeight:280}},r.a.createElement(o.a,null,r.a.createElement(y.d,null,r.a.createElement(y.b,{path:"/patient/:patient/booking/bed-booking",render:function(){return t.props.activePracticePermissions.PatientBookings||t.props.allowAllPermissions?r.a.createElement(Yu,Object.assign({},e.props,{bedBooking:!0,loadData:e.loadBedBookingReport})):r.a.createElement(xi,null)}}),r.a.createElement(y.b,null,r.a.createElement("div",null,r.a.createElement("h2",null,"Bed Booking Management",r.a.createElement(Da.b,{to:"/patient/"+this.state.patient.id+"/booking/bed-booking"},r.a.createElement(da.a,{type:"primary",style:{float:"right"}},r.a.createElement(va.a,{type:"plus"}),"\xa0Book A Seat"))),r.a.createElement(cr.a,null,r.a.createElement(ti,{pagination:!1,hideReport:!0,loading:this.state.loading,columns:a,size:"small",dataSource:this.state.bedBookingReports}),r.a.createElement(wi,{loaderFunction:function(){return e.loadBedBookingReport(e.state.nextReport)},loading:this.state.loading,hidden:!this.state.nextReport})))))))}}]),t}(r.a.Component),Hu=o.a.Content,qu=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).loadPatientPendingAmount=function(){var e=Object(f.a)(a);if(a.state.currentPatient&&a.state.currentPatient.id){Ut(Kt(Ke,[a.state.currentPatient.id]),(function(t){e.setState({pendingAmount:t})}),(function(){}))}else a.setState({pendingAmount:null})},a.loadPatientWallet=function(){var e=Object(f.a)(a);if(a.state.currentPatient&&a.state.currentPatient.id){Ut(Kt(_t,[a.state.currentPatient.id]),(function(t){e.setState({walletAmount:t})}),(function(){}))}else a.setState({pendingAmount:null})},a.refreshWallet=function(){a.loadPatientWallet(),a.loadPatientPendingAmount()},a.state={currentPatient:null,active_practiceId:a.props.active_practiceId,medicalHistory:[],listModalVisible:!1,loading:!1,showAllClinic:$t("showAllClinic"),pendingAmount:null,walletAmount:null,hideSidePanel:!1},a.setCurrentPatient=a.setCurrentPatient.bind(Object(f.a)(a)),a.togglePatientListModal=a.togglePatientListModal.bind(Object(f.a)(a)),a.toggleShowAllClinic=a.toggleShowAllClinic.bind(Object(f.a)(a)),a.loadPatientPendingAmount=a.loadPatientPendingAmount.bind(Object(f.a)(a)),a.loadPatientWallet=a.loadPatientWallet.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){!this.props.match.params.id||this.state.currentPatient&&this.props.match.params.id==this.state.currentPatient.id||this.getPatientListData(this.props.match.params.id),this.loadPatientPendingAmount(),this.loadPatientWallet()}},{key:"componentWillReceiveProps",value:function(e,t){var a=this;this.state.currentPathLocation!=e.location&&this.setState({currentPathLocation:e.location},(function(){for(var e=!1,t=0;t<Bn.length;t++)Object(y.f)(a.state.currentPathLocation.pathname,{path:Bn[t],exact:!1,strict:!1})&&(e=!0,a.setState({hideSidePanel:!0}));e||a.setState({hideSidePanel:!1})}))}},{key:"getPatientListData",value:function(e){var t=this;t.setState({loading:!0});Ut(Kt(ce,[e]),(function(e){t.setCurrentPatient(e)}),(function(){Qt(k,"Patient Loading Failed"),t.setState({loading:!1})}))}},{key:"setCurrentPatient",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=this,n=this.props.location.pathname.split("/");isNaN(parseInt(n[2]))?e&&(n[1]="patient",n.splice(2,0,e.id)):e?(n[1]="patient",n[2]=e.id):(n[1]="patients",n.splice(2,1)),this.props.history.push(n.join("/")),this.setState({currentPatient:e,loading:!1,listModalVisible:!1},(function(){t&&a.props.history.push(Kt(t,[e.id]))}))}},{key:"togglePatientListModal",value:function(e){this.setState({listModalVisible:!!e})}},{key:"toggleShowAllClinic",value:function(e){this.setState({showAllClinic:!!e},(function(){var t,a;t="showAllClinic",a=!!e,E.set(t,a)}))}},{key:"render",value:function(){var e=this,t=this;return r.a.createElement(Hu,null,r.a.createElement(pa.a,{spinning:this.state.loading,size:"large"},r.a.createElement(Ls,Object.assign({},this.state,this.props,{togglePatientListModal:this.togglePatientListModal,key:this.state.currentPatient,setCurrentPatient:this.setCurrentPatient,toggleShowAllClinic:this.toggleShowAllClinic,refreshWallet:this.refreshWallet})),r.a.createElement(o.a,null,r.a.createElement(ps,Object.assign({},this.state,this.props)),r.a.createElement(o.a,null,r.a.createElement(Hu,{className:"main-container",key:this.state.showAllClinic.toString(),style:{padding:"0px 5px",minHeight:280}},r.a.createElement(y.d,null,r.a.createElement(y.b,{exact:!0,path:"/patients/merge",render:function(a){return t.props.activePracticePermissions.MergePatients||t.props.allowAllPermissions?r.a.createElement(ju,e.state):r.a.createElement(xi,null)}}),t.props.activePracticePermissions.WebAdmin||t.allowAllPermissions?r.a.createElement(y.b,{exact:!0,path:"/patients/profile",render:function(t){return e.state.currentPatient?r.a.createElement(y.a,{to:"/patient/"+e.state.currentPatient.id+"/profile"}):r.a.createElement(as,Object.assign({},e.state,{key:e.state.currentPatient,setCurrentPatient:e.setCurrentPatient},e.props))}}):null,r.a.createElement(y.b,{exact:!0,path:"/patients/profile/add",render:function(a){return t.props.activePracticePermissions.AddPatient||t.props.allowAllPermissions?r.a.createElement(ss,Object.assign({key:e.state.currentPatient},e.props,a)):r.a.createElement(xi,null)}}),r.a.createElement(y.b,{exact:!0,path:"/patient/:id/profile",render:function(a){return t.props.activePracticePermissions.ViewPatient||t.props.allowAllPermissions?r.a.createElement(as,Object.assign({},e.state,{key:e.state.currentPatient,setCurrentPatient:e.setCurrentPatient},e.props,a)):r.a.createElement(xi,null)}}),r.a.createElement(y.b,{exact:!0,path:"/patient/:id/profile/edit",render:function(a){return t.props.activePracticePermissions.EditPatient||t.props.allowAllPermissions?r.a.createElement(ss,Object.assign({key:e.state.currentPatient},e.state,e.props,a)):r.a.createElement(xi,null)}}),t.props.activePracticePermissions.PatientAppointments||t.allowAllPermissions?r.a.createElement(y.b,{exact:!0,path:"/patients/appointments",render:function(t){return e.state.currentPatient?r.a.createElement(y.a,{to:"/patient/"+e.state.currentPatient.id+"/appointments"}):r.a.createElement(us,Object.assign({key:e.state.currentPatient},e.state,t,e.props))}}):null,t.props.activePracticePermissions.PatientAppointments||t.allowAllPermissions?r.a.createElement(y.b,{exact:!0,path:"/patient/:id/appointments",render:function(t){return r.a.createElement(us,Object.assign({key:e.state.currentPatient?e.state.currentPatient.id:null},e.state,t,e.props))}}):null,t.props.activePracticePermissions.PatientAppointments||t.allowAllPermissions?r.a.createElement(y.b,{exact:!0,path:"/patients/appointments/:appointmentid",render:function(t){return r.a.createElement(us,Object.assign({key:e.state.currentPatient},e.state,t,e.props))}}):null,t.props.activePracticePermissions.PatientCommunications||t.allowAllPermissions?r.a.createElement(y.b,{exact:!0,path:"/patients/communications",render:function(){return e.state.currentPatient?r.a.createElement(y.a,{to:"/patient/"+e.state.currentPatient.id+"/communications"}):r.a.createElement(Iu,{togglePatientListModal:e.togglePatientListModal})}}):null,t.props.activePracticePermissions.PatientCommunications||t.allowAllPermissions?r.a.createElement(y.b,{exact:!0,path:"/patient/:id/communications",render:function(t){return r.a.createElement(Vs,Object.assign({key:e.state.currentPatient?e.state.currentPatient.id:null},e.state,t))}}):null,t.props.activePracticePermissions.PatientVitalSigns||t.allowAllPermissions?r.a.createElement(y.b,{exact:!0,path:"/patients/emr/vitalsigns",render:function(t){return e.state.currentPatient?r.a.createElement(y.a,{to:"/patient/"+e.state.currentPatient.id+"/emr/vitalsigns"}):r.a.createElement(Gs,Object.assign({togglePatientListModal:e.togglePatientListModal,key:e.state.currentPatient?e.state.currentPatient.id:null},e.state,t))}}):null,r.a.createElement(y.b,{path:"/patient/:id/emr/vitalsigns",render:function(a){return t.props.activePracticePermissions.PatientVitalSigns||t.allowAllPermissions?r.a.createElement(Gs,Object.assign({key:e.state.currentPatient?e.state.currentPatient.id:null},e.state,a)):r.a.createElement(xi,null)}}),r.a.createElement(y.b,{exact:!0,path:"/patient/:id/emr/vitalsigns/edit",render:function(a){return t.props.activePracticePermissions.PatientVitalSigns||t.allowAllPermissions?r.a.createElement(Bs,Object.assign({key:e.state.currentPatient?e.state.currentPatient.id:null},e.state,a)):r.a.createElement(xi,null)}}),r.a.createElement(y.b,{path:"/patients/emr/clinicnotes",render:function(t){return r.a.createElement(Ts,Object.assign({togglePatientListModal:e.togglePatientListModal,key:e.state.currentPatient?e.state.currentPatient.id:null},e.props,e.state,t))}}),"}/>",r.a.createElement(y.b,{path:"/patient/:id/emr/clinicnotes",render:function(t){return r.a.createElement(Ts,Object.assign({key:e.state.currentPatient?e.state.currentPatient.id:null},e.props,e.state,t))}}),t.props.activePracticePermissions.PatientCompletedProcedure||t.allowAllPermissions?r.a.createElement(y.b,{exact:!0,path:"/patients/emr/workdone",render:function(t){return e.state.currentPatient?r.a.createElement(y.a,{to:"/patient/"+e.state.currentPatient.id+"/emr/workdone"}):r.a.createElement(Js,Object.assign({togglePatientListModal:e.togglePatientListModal,key:e.state.currentPatient?e.state.currentPatient.id:null},e.props,e.state,t))}}):null,t.props.activePracticePermissions.PatientCompletedProcedure||t.allowAllPermissions?r.a.createElement(y.b,{path:"/patient/:id/emr/workdone",render:function(a){return r.a.createElement(Js,Object.assign({},t.props,{key:e.state.currentPatient?e.state.currentPatient.id:null},e.state,a))}}):null,t.props.activePracticePermissions.PatientFiles||t.allowAllPermissions?r.a.createElement(y.b,{exact:!0,path:"/patients/emr/files",render:function(t){return e.state.currentPatient?r.a.createElement(y.a,{to:"/patient/"+e.state.currentPatient.id+"/emr/files"}):r.a.createElement(ks,Object.assign({togglePatientListModal:e.togglePatientListModal,key:e.state.currentPatient?e.state.currentPatient.id:null},t,e.state))}}):null,t.props.activePracticePermissions.PatientFiles||t.allowAllPermissions?r.a.createElement(y.b,{path:"/patient/:id/emr/files",render:function(t){return r.a.createElement(ks,Object.assign({key:e.state.currentPatient?e.state.currentPatient.id:null},e.props,t,e.state))}}):null,t.props.activePracticePermissions.PatientFiles||t.allowAllPermissions?r.a.createElement(y.b,{path:"/patient/:id/emr/create-medicalCertificate",render:function(t){return r.a.createElement(Tu,Object.assign({key:e.state.currentPatient?e.state.currentPatient.id:null},e.props,t,e.state))}}):null,t.props.activePracticePermissions.PatientPrescriptions||t.allowAllPermissions?r.a.createElement(y.b,{exact:!0,path:"/patients/emr/prescriptions",render:function(t){return e.state.currentPatient?r.a.createElement(y.a,{to:"/patient/"+e.state.currentPatient.id+"/emr/prescriptions"}):r.a.createElement(pc,Object.assign({togglePatientListModal:e.togglePatientListModal,key:e.state.currentPatient?e.state.currentPatient.id:null},e.props,e.state,t))}}):null,t.props.activePracticePermissions.PatientPrescriptions||t.allowAllPermissions?r.a.createElement(y.b,{path:"/patient/:id/emr/prescriptions",render:function(t){return r.a.createElement(pc,Object.assign({key:e.state.currentPatient?e.state.currentPatient.id:null},e.props,e.state,t))}}):null,t.props.activePracticePermissions.PatientTreatmentPlans||t.allowAllPermissions?r.a.createElement(y.b,{exact:!0,path:"/patients/emr/plans",render:function(t){return e.state.currentPatient?r.a.createElement(y.a,{to:"/patient/"+e.state.currentPatient.id+"/emr/plans"}):r.a.createElement(_c,Object.assign({togglePatientListModal:e.togglePatientListModal,key:e.state.currentPatient?e.state.currentPatient.id:null},e.state,e.props,t))}}):null,t.props.activePracticePermissions.PatientTreatmentPlans||t.allowAllPermissions?r.a.createElement(y.b,{path:"/patient/:id/emr/plans",render:function(a){return r.a.createElement(_c,Object.assign({key:e.state.currentPatient?e.state.currentPatient.id:null},e.state,t.props,a))}}):null,r.a.createElement(y.b,{path:"/patient/:id/emr/timeline",render:function(a){return t.props.activePracticePermissions.PatientTimeline||t.allowAllPermissions?r.a.createElement(Es,Object.assign({key:e.state.currentPatient?e.state.currentPatient.id:null},e.state,a)):r.a.createElement(xi,null)}}),t.props.activePracticePermissions.PatientLabOrders||t.allowAllPermissions?r.a.createElement(y.b,{exact:!0,path:"/patient/emr/labtrackings",render:function(t){return e.state.currentPatient?r.a.createElement(y.a,{to:"/patient/"+e.state.currentPatient.id+"/emr/labtrackings"}):r.a.createElement(xc,Object.assign({key:e.state.currentPatient},e.state,t))}}):null,r.a.createElement(y.b,{path:"/patient/:id/emr/labtrackings",render:function(a){return t.props.activePracticePermissions.PatientLabOrders||t.allowAllPermissions?r.a.createElement(xc,Object.assign({key:e.state.currentPatient?e.state.currentPatient.id:null},e.state,a)):r.a.createElement(xi,null)}}),t.props.activePracticePermissions.PatientInvoices||t.allowAllPermissions?r.a.createElement(y.b,{exact:!0,path:"/patients/billing/invoices",render:function(t){return e.state.currentPatient?r.a.createElement(y.a,{to:"/patient/"+e.state.currentPatient.id+"/billing/invoices"}):r.a.createElement($c,Object.assign({togglePatientListModal:e.togglePatientListModal,key:e.state.currentPatient?e.state.currentPatient.id:null},e.props,e.state,t))}}):null,r.a.createElement(y.b,{path:"/patient/:id/billing/invoices",render:function(a){return t.props.activePracticePermissions.PatientInvoices||t.allowAllPermissions?r.a.createElement($c,Object.assign({refreshWallet:e.refreshWallet,key:e.state.currentPatient?e.state.currentPatient.id:null},e.props,e.state,a)):r.a.createElement(xi,null)}}),t.props.activePracticePermissions.PatientReturns||t.allowAllPermissions?r.a.createElement(y.b,{exact:!0,path:"/patients/billing/return/invoices",render:function(t){return e.state.currentPatient?r.a.createElement(y.a,{to:"/patient/"+e.state.currentPatient.id+"/billing/return/invoices"}):r.a.createElement(bu,Object.assign({togglePatientListModal:e.togglePatientListModal,key:e.state.currentPatient?e.state.currentPatient.id:null},e.state,t))}}):null,r.a.createElement(y.b,{exact:!0,path:"/patient/:id/billing/return/invoices",render:function(a){return t.props.activePracticePermissions.PatientReturns||t.allowAllPermissions?r.a.createElement(bu,Object.assign({refreshWallet:e.refreshWallet,key:e.state.currentPatient?e.state.currentPatient.id:null},e.state,a)):r.a.createElement(xi,null)}}),t.props.activePracticePermissions.PatientPayments||t.allowAllPermissions?r.a.createElement(y.b,{path:"/patients/billing/payments",render:function(t){return e.state.currentPatient?r.a.createElement(y.a,{to:"/patient/"+e.state.currentPatient.id+"/billing/payments"}):r.a.createElement(mu,Object.assign({togglePatientListModal:e.togglePatientListModal,key:e.state.currentPatient?e.state.currentPatient.id:null},e.state,e.props,t))}}):null,r.a.createElement(y.b,{path:"/patient/:id/billing/payments",render:function(a){return t.props.activePracticePermissions.PatientPayments||t.allowAllPermissions?r.a.createElement(mu,Object.assign({refreshWallet:e.refreshWallet,key:e.state.currentPatient?e.state.currentPatient.id:null},e.state,a)):r.a.createElement(xi,null)}}),this.state.currentPatient?r.a.createElement(y.b,{exact:!0,path:"/patient/:id/billing/ledger",render:function(a){return t.props.activePracticePermissions.PatientLedger||t.allowAllPermissions?r.a.createElement(xu,Object.assign({refreshWallet:e.refreshWallet,key:e.state.currentPatient?e.state.currentPatient.id:null},e.state,a)):r.a.createElement(xi,null)}}):null,r.a.createElement(y.b,{exact:!0,path:"/patient/:id/prescriptions/template/add",render:function(a){return t.props.activePracticePermissions.PatientPrescriptions||t.allowAllPermissions?r.a.createElement(ic,Object.assign({key:e.state.currentPatient?e.state.currentPatient.id:null},e.state,a)):r.a.createElement(xi,null)}}),r.a.createElement(y.b,{path:"/patient/:id/booking",render:function(a){return t.props.activePracticePermissions.PatientBookings||t.props.allowAllPermissions?r.a.createElement(Bu,Object.assign({},e.state,e.props,a,{key:e.state.currentPatient?e.state.currentPatient.id:null})):r.a.createElement(xi,null)}}),this.state.currentPatient&&this.state.currentPatient.is_agent?r.a.createElement(y.b,{exact:!0,path:"/patient/:id/billing/wallet",render:function(a){return t.props.activePracticePermissions.PatientBookings||t.props.allowAllPermissions?r.a.createElement(io,Object.assign({},e.state,e.props,a,{key:e.state.currentPatient?e.state.currentPatient.id:null})):r.a.createElement(xi,null)}}):null,r.a.createElement(y.b,{render:function(t){return e.state.currentPatient?r.a.createElement(y.a,{to:"/patient/"+e.state.currentPatient.id+"/profile"}):r.a.createElement(as,Object.assign({},e.state,{key:e.state.currentPatient,setCurrentPatient:e.setCurrentPatient},e.props))}})))))))}}]),t}(r.a.Component),zu=o.a.Header,Gu=yr.a.RangePicker,Uu=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).changeReport=a.changeReport.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"changeReport",value:function(e){this.props.history.push(e)}},{key:"render",value:function(){var e=this,t=[{name:"Daily Summary",value:"/reports/summary",active:e.props.activePracticePermissions.ReportsDailySummary||e.props.allowAllPermissions},{name:"Income",value:"/reports/income",active:e.props.activePracticePermissions.ReportsIncome||e.props.allowAllPermissions},{name:"Payments",value:"/reports/payments",active:e.props.activePracticePermissions.ReportsPayments||e.props.allowAllPermissions},{name:"Appointment",value:"/reports/appointments",active:e.props.activePracticePermissions.ReportsAppointments||e.props.allowAllPermissions},{name:"Patients",value:"/reports/patients",active:e.props.activePracticePermissions.ReportsPatients||e.props.allowAllPermissions},{name:"Amount Due",value:"/reports/amountdue",active:e.props.activePracticePermissions.ReportsAmountDue||e.props.allowAllPermissions},{name:"Expenses",value:"/reports/expenses",active:e.props.activePracticePermissions.ReportsExpenses||e.props.allowAllPermissions},{name:"Inventory",value:"/reports/inventory",active:e.props.activePracticePermissions.ReportsInventory||e.props.allowAllPermissions},{name:"EMR",value:"/reports/emr",active:e.props.activePracticePermissions.ReportsEMR||e.props.allowAllPermissions},{name:"Bed Booking",value:"/reports/bed_booking",active:e.props.activePracticePermissions.ReportsBedBooking||e.props.allowAllPermissions},{name:"Inventory Retails",value:"/reports/inventoryretails",active:e.props.activePracticePermissions.ReportsInventoryRetail||e.props.allowAllPermissions},{name:"MLM ",value:"/reports/mlm",active:e.props.activePracticePermissions.ReportsMLMReport||e.props.allowAllPermissions},{name:"Invoice Returns ",value:"/reports/invoice-return",active:e.props.activePracticePermissions.ReportsInventoryRetail||e.props.allowAllPermissions},{name:"Suggestions",value:"/reports/suggestions",active:e.props.activePracticePermissions.ReportsSuggestions||e.props.allowAllPermissions}];return r.a.createElement(zu,{style:{background:"#fff"}},r.a.createElement("ul",{style:{listStyle:"none"}},r.a.createElement("li",{style:{display:"inline"}},"Select Report Category \xa0"),r.a.createElement("li",{style:{display:"inline"}},r.a.createElement(ga.a,{style:{minWidth:"200px"},defaultValue:t[3].name,value:this.props.history.location.pathname,onChange:this.changeReport},t.map((function(e){return r.a.createElement(ga.a.Option,{value:e.value,disabled:!e.active},e.name)})))),r.a.createElement("li",{style:{display:"inline",float:"right"}},r.a.createElement(Gu,{onChange:function(t,a){return e.props.reportsDateRange(a)},defaultValue:[Or()(),Or()()],format:"DD/MM/YYYY"}))))}}]),t}(r.a.Component),Wu=nr.a.confirm,Ku=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).loadReport=function(){var e=Object(f.a)(a);e.setState({loading:!0});var t={practice:a.props.active_practiceId,type:e.props.type,start:a.state.startDate.format("YYYY-MM-DD"),end:a.state.endDate.format("YYYY-MM-DD")};a.props.patient_groups&&(t.groups=a.props.patient_groups.toString()),a.props.doctors&&(t.doctors=a.props.doctors.toString()),Ut(ot,(function(t){e.setState({report:t,loading:!1})}),(function(){e.setState({loading:!1})}),t)},a.sendMail=function(e){var t={practice:a.props.active_practiceId,start:a.state.startDate.format("YYYY-MM-DD"),end:a.state.endDate.format("YYYY-MM-DD"),type:a.props.type};a.props.patient_groups&&(t.groups=a.props.patient_groups.toString()),a.props.doctors&&(t.doctors=a.props.doctors.toString()),t.mail_to=e,bi(ot,t)},a.showConfirmMail=function(e){var t=Object(f.a)(a);Wu({title:"Are you sure send mail?",content:"Email Id :"+e,okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){t.sendMail(e)},onCancel:function(){console.log("Cancel",e)}})},a.state={startDate:a.props.startDate,endDate:a.props.endDate,loading:!0,report:[],mailingUsersList:[]},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadReport(),Ei(this)}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.startDate==e.startDate&&this.props.endDate==e.endDate&&this.props.patient_groups==e.patient_groups&&this.props.doctors==e.doctors||this.setState({startDate:e.startDate,endDate:e.endDate},(function(){t.loadReport()}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.report,n=t.loading,i=[{title:"S. No",key:"s_no",dataIndex:"s_no",render:function(e,t,a){return r.a.createElement("span",null,a+1)},width:50},{title:"Invoice Date",key:"date",render:function(e,t){return r.a.createElement("span",null,Or()(t.date).format("DD MMM YYYY"))}},{title:"Invoice Number",key:"invoice_id",dataIndex:"invoice_id"},{title:"Patient",dataIndex:"first_name",key:"first_name"},{title:"Patient ID",dataIndex:"custom_id",key:"custom_id"},{title:"Doctor Name",dataIndex:"doctor_name",key:"doctor_name"},{title:"Invoice Amount(INR)",key:"total",dataIndex:"total",render:function(e){return e.toFixed(2)}},{title:"Amount Due(INR)",dataIndex:"amount_due",key:"amount_due",render:function(e){return e.toFixed(2)}}],l=a.reduce((function(e,t){return e+t.amount_due}),0);return r.a.createElement("div",null,r.a.createElement("h2",null,"Total Amount Due ",r.a.createElement("span",{style:{float:"right"}},r.a.createElement("p",null,r.a.createElement("small",null,"E-Mail To:\xa0"),r.a.createElement(ga.a,{onChange:function(t){return e.showConfirmMail(t)},style:{width:200}},this.state.mailingUsersList.map((function(e){return r.a.createElement(ga.a.Option,{value:e.email},e.name)})))))),r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:12,offset:6,style:{textAlign:"center"}},r.a.createElement(ao.a,{title:"Amount Due For Listed Invoices(INR)",value:l.toFixed(2)}),r.a.createElement("br",null),r.a.createElement("p",null,"*Advance payments are not considered here. Amounts may vary slightly."))),r.a.createElement(lr.a,{loading:n,columns:i,pagination:!1,dataSource:a}))}}]),t}(r.a.Component),Qu=nr.a.confirm,Zu=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).loadReport=function(){var e=Object(f.a)(a);e.setState({loading:!0});var t={practice:a.props.active_practiceId,type:e.props.type,start:a.state.startDate.format("YYYY-MM-DD"),end:a.state.endDate.format("YYYY-MM-DD")};a.props.doctors&&(t.doctors=a.props.doctors.toString()),Ut(ot,(function(t){e.setState({report:t,loading:!1})}),(function(){e.setState({loading:!1})}),t)},a.sendMail=function(e){var t={practice:a.props.active_practiceId,start:a.state.startDate.format("YYYY-MM-DD"),end:a.state.endDate.format("YYYY-MM-DD"),type:a.props.type};a.props.doctors&&(t.doctors=a.props.doctors.toString()),t.mail_to=e,bi(ot,t)},a.showConfirmMail=function(e){var t=Object(f.a)(a);Qu({title:"Are you sure send mail?",content:"Email Id :"+e,okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){t.sendMail(e)},onCancel:function(){console.log("Cancel",e)}})},a.state={startDate:a.props.startDate,endDate:a.props.endDate,loading:!0,report:[],mailingUsersList:[]},a.loadReport=a.loadReport.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadReport(),Ei(this)}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.startDate==e.startDate&&this.props.endDate==e.endDate&&this.props.doctors==e.doctors||this.setState({startDate:e.startDate,endDate:e.endDate},(function(){t.loadReport()}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.report,n=t.loading,i=0,l=0,o=0,s=0,c=0,u=0;a.map((function(e){i+=e["0_29"],l+=e["30_59"],o+=e["60_89"],s+=e["89_364"],c+=e[365],u=i+l+o+s+c}));var d=[{title:"S. No",key:"s_no",dataIndex:"s_no",render:function(e,t,a){return r.a.createElement("span",null,a+1)},width:50},{title:"Name",dataIndex:"first_name",key:"first_name"},{title:"for 0-29 days (INR)",dataIndex:"0_29",key:"0_29",render:function(e){return r.a.createElement("span",null,e.toFixed(2))}},{title:"for 30-59 days (INR)",dataIndex:"30_59",key:"30_59",render:function(e){return r.a.createElement("span",null,e.toFixed(2))}},{title:"for 60-89 days (INR)",dataIndex:"60_89",key:"60_89",render:function(e){return r.a.createElement("span",null,e.toFixed(2))}},{title:"for 89-364 days (INR)",dataIndex:"89_364",key:"89_364",render:function(e){return r.a.createElement("span",null,e.toFixed(2))}},{title:"for more than 364 days (INR)",dataIndex:"365",key:"365",render:function(e){return r.a.createElement("span",null,e.toFixed(2))}},{title:"Total (INR)",key:"total",render:function(e,t){return r.a.createElement("span",null,(t["0_29"]+t["30_59"]+t["60_89"]+t["89_364"]+t[365]).toFixed(2))}}];return r.a.createElement("div",null,r.a.createElement("h2",null,"Ageing Amount Due ",r.a.createElement("span",{style:{float:"right"}},r.a.createElement("p",null,r.a.createElement("small",null,"E-Mail To:\xa0"),r.a.createElement(ga.a,{onChange:function(t){return e.showConfirmMail(t)},style:{width:200}},this.state.mailingUsersList.map((function(e){return r.a.createElement(ga.a.Option,{value:e.email},e.name)})))))),r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:22,offset:1},r.a.createElement("p",{style:{textAlign:"center",marginTop:40}},"*Unpaid Invoice Amount."),r.a.createElement(cr.a,{title:"Summary",bordered:!1,type:"inner"},r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:4},r.a.createElement(ao.a,{title:"for 0-29 days (INR)",value:i.toFixed(2)})),r.a.createElement(ir.a,{span:4},r.a.createElement(ao.a,{title:"for 30-59 days (INR)",value:l.toFixed(2)})),r.a.createElement(ir.a,{span:4},r.a.createElement(ao.a,{title:"for 60-89 days (INR)",value:o.toFixed(2)})),r.a.createElement(ir.a,{span:4},r.a.createElement(ao.a,{title:"for 89-364 days (INR)",value:s.toFixed(2)})),r.a.createElement(ir.a,{span:4},r.a.createElement(ao.a,{title:"for more than 364 days (INR)",value:c.toFixed(2)})),r.a.createElement(ir.a,{span:4},r.a.createElement(ao.a,{title:"Total (INR)",value:u.toFixed(2)})))))),r.a.createElement(rr.a,{gutter:16},r.a.createElement("p",{style:{textAlign:"center",marginTop:40}},"*Unpaid Invoice Amount."),r.a.createElement(cr.a,{title:"Summary",bordered:!1,type:"inner",bodyStyle:{padding:0}},r.a.createElement(lr.a,{loading:n,columns:d,pagination:!1,dataSource:a}))))}}]),t}(r.a.Component),Xu=(a(82),a(37)),Ju=nr.a.confirm,$u=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).onPieEnter=function(e,t){a.setState({activeIndex:t})},a.sendMail=function(e){var t={practice:a.props.active_practiceId,start:a.state.startDate.format("YYYY-MM-DD"),end:a.state.endDate.format("YYYY-MM-DD"),type:a.props.type};t.mail_to=e,bi(ot,t)},a.showConfirmMail=function(e){var t=Object(f.a)(a);Ju({title:"Are you sure send mail?",content:"Email Id :"+e,okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){t.sendMail(e)},onCancel:function(){console.log("Cancel",e)}})},a.state={reportEachDoctor:[],startDate:a.props.startDate,endDate:a.props.endDate,loading:!0,activeIndex:0,mailingUsersList:[]},a.loadReport=a.loadReport.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadReport(),Ei(this)}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.startDate==e.startDate&&this.props.endDate==e.endDate||this.setState({startDate:e.startDate,endDate:e.endDate},(function(){t.loadReport()}))}},{key:"loadReport",value:function(){var e=this;e.setState({loading:!0});var t={practice:this.props.active_practiceId,type:e.props.type,start:this.state.startDate.format("YYYY-MM-DD"),end:this.state.endDate.format("YYYY-MM-DD")};Ut(ot,(function(t){e.setState({reportEachDoctor:t,loading:!1})}),(function(){e.setState({loading:!1})}),t)}},{key:"render",value:function(){var e=this,t=this.state,a=t.reportEachDoctor,n=t.loading,i=[{title:"S. No",key:"s_no",dataIndex:"s_no",width:50,render:function(e,t,a){return r.a.createElement("span",null,a+1)}},{title:"Doctor",key:"doctor",dataIndex:"doctor_name"},{title:"Invoiced (INR)",key:"invoiced",dataIndex:"invoiced",render:function(e){return e.toFixed(2)}},{title:"Received (INR)",key:"received_amount",dataIndex:"received_amount",render:function(e,t){return r.a.createElement("span",null,(t.invoiced-t.amount_due).toFixed(2))}},{title:"Total Amount Due (INR)",key:"amount_due",dataIndex:"amount_due",render:function(e){return e.toFixed(2)}}],l=["#0088FE","#00C49F","#FFBB28","#FF8042"];return r.a.createElement("div",null,r.a.createElement("h2",null,"Amount Due Per Doctor",r.a.createElement("span",{style:{float:"right"}},r.a.createElement("p",null,r.a.createElement("small",null,"E-Mail To:\xa0"),r.a.createElement(ga.a,{onChange:function(t){return e.showConfirmMail(t)},style:{width:200}},this.state.mailingUsersList.map((function(e){return r.a.createElement(ga.a.Option,{value:e.email},e.name)})))))),r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:12,offset:6},r.a.createElement(pa.a,{size:"large",spinning:n},a.length>0?r.a.createElement(Hs.j,{width:800,height:400},r.a.createElement(Hs.i,{activeIndex:this.state.activeIndex,activeShape:function(e){var t=Math.PI/180,a=e.cx,n=e.cy,i=e.midAngle,l=e.innerRadius,o=e.outerRadius,s=e.startAngle,c=e.endAngle,u=e.fill,d=e.payload,p=e.percent,m=(e.value,Math.sin(-t*i)),h=Math.cos(-t*i),f=a+(o+10)*h,g=n+(o+10)*m,y=a+(o+30)*h,E=n+(o+30)*m,b=y+22*(h>=0?1:-1),v=E,_=h>=0?"start":"end";return r.a.createElement("g",null,r.a.createElement(Hs.l,{cx:a,cy:n,innerRadius:l,outerRadius:o,startAngle:s,endAngle:c,fill:u}),r.a.createElement(Hs.l,{cx:a,cy:n,startAngle:s,endAngle:c,innerRadius:o+6,outerRadius:o+10,fill:u}),r.a.createElement("path",{d:"M".concat(f,",").concat(g,"L").concat(y,",").concat(E,"L").concat(b,",").concat(v),stroke:u,fill:"none"}),r.a.createElement("circle",{cx:b,cy:v,r:2,fill:u,stroke:"none"}),r.a.createElement("text",{x:b+12*(h>=0?1:-1),y:v,textAnchor:_,fill:"#333"},d.doctor_name+", INR "+d.invoiced.toFixed(2)),r.a.createElement("text",{x:b+12*(h>=0?1:-1),y:v,dy:18,textAnchor:_,fill:"#999"},"(Rate ".concat((100*p).toFixed(2),"%)")))},data:a,cx:300,dataKey:"amount_due",cy:200,innerRadius:60,outerRadius:80,fill:"#8884d8",onMouseEnter:this.onPieEnter},a.map((function(e,t){return r.a.createElement(Hs.c,{fill:l[t%l.length]})})))):r.a.createElement(Xu.a,{image:Xu.a.PRESENTED_IMAGE_SIMPLE,description:"No Data to Show"})))),r.a.createElement(lr.a,{loading:n,columns:i,pagination:!1,dataSource:a}))}}]),t}(r.a.Component),ed=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).onChangeHandle=function(e,t){Object(f.a)(a);a.setState(Object(u.a)({},e,t.target.value))},a.changeSidePanelSize=function(e){a.setState({sidePanelColSpan:e?0:4})},a.handleChangeOption=function(e,t){Object(f.a)(a);a.setState(Object(u.a)({},e,t))},a.state={sidePanelColSpan:4,patientGroup:[],practiceDoctors:[],type:"ALL",advancedOptionShow:!0},mi(Object(f.a)(a)),a.loadPatientGroup=a.loadPatientGroup.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadPatientGroup()}},{key:"loadPatientGroup",value:function(){var e=this;Ut(Kt(ve,[this.props.active_practiceId]),(function(t){e.setState({patientGroup:t})}),(function(){}))}},{key:"advancedOption",value:function(e){this.setState({advancedOptionShow:e})}},{key:"render",value:function(){var e=this,t=this.state,a=t.type,n=t.sidePanelColSpan,i=t.advancedOptionShow,l=t.patientGroup,o=t.practiceDoctors;return r.a.createElement("div",null,r.a.createElement("h2",null,"Amount Due Report ",r.a.createElement(da.a,{type:"primary",shape:"round",icon:n?"double-right":"double-left",style:{float:"right"},onClick:function(){return e.changeSidePanelSize(n)}},"Panel")),r.a.createElement(cr.a,null,r.a.createElement(rr.a,{gutter:16},r.a.createElement(ir.a,{span:24-n},"ALL"==a?r.a.createElement(Ku,Object.assign({},this.state,this.props)):null,"AGEING"==a?r.a.createElement(Zu,Object.assign({},this.state,this.props)):null,"DOCTOR"==a?r.a.createElement($u,Object.assign({},this.state,this.props)):null),r.a.createElement(ir.a,{span:n},r.a.createElement(br.a.Group,{buttonStyle:"solid",defaultValue:"ALL",onChange:function(t){return e.onChangeHandle("type",t)}},r.a.createElement("h2",null,"Patients"),r.a.createElement(br.a.Button,{style:{width:"100%",backgroundColor:"transparent",border:"0px"},value:"ALL"},"Total Amount Due"),r.a.createElement("p",null,r.a.createElement("br",null)),r.a.createElement("h2",null,"Related Reports"),yn.map((function(e){return r.a.createElement(br.a.Button,{style:{width:"100%",backgroundColor:"transparent"},value:e.value},e.name)}))),r.a.createElement("br",null),r.a.createElement("br",null),"ALL"==this.state.type||"AGEING"==this.state.type?r.a.createElement(r.a.Fragment,null,i?r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{href:"#",onClick:function(t){return e.advancedOption(!1)}},"Hide Advanced Options"),r.a.createElement(ir.a,null," ",r.a.createElement("br",null),"AGEING"!=this.state.type?r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",null,"Patient Groups"),r.a.createElement(ga.a,{style:{minWidth:"200px"},mode:"multiple",placeholder:"Select Patient Groups",onChange:function(t){return e.handleChangeOption("patient_groups",t)}},l.map((function(e){return r.a.createElement(ga.a.Option,{value:e.id},e.name)}))),r.a.createElement("br",null),r.a.createElement("br",null)):null,r.a.createElement("h4",null,"Doctors"),r.a.createElement(ga.a,{style:{minWidth:"200px"},mode:"multiple",placeholder:"Select Doctors",onChange:function(t){return e.handleChangeOption("doctors",t)}},o.map((function(e){return r.a.createElement(ga.a.Option,{value:e.id},e.user.first_name)}))))):r.a.createElement("a",{href:"#",onClick:function(t){return e.advancedOption(!0)}},"Show Advanced Options")):null))))}}]),t}(r.a.Component);function td(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ad(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?td(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):td(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var nd=nr.a.confirm,rd=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).loadAppointmentReport=function(){var e=Object(f.a)(a),t={type:e.props.type,start:a.state.startDate.format("YYYY-MM-DD"),end:a.state.endDate.format("YYYY-MM-DD"),exclude_cancelled:!!a.props.exclude_cancelled,practice:e.props.active_practiceId};a.props.categories&&(t.categories=a.props.categories.toString()),a.props.doctors&&(t.doctors=a.props.doctors.toString()),Ut(Kt(st,[e.props.active_practiceId]),(function(t){e.setState({appointmentReports:t.data,total:t.total,loading:!1})}),(function(){e.setState({loading:!1})}),t)},a.onPieEnter=function(e,t){a.setState({activeIndex:t})},a.sendMail=function(e){console.log(e);var t=Object(f.a)(a),n={type:t.props.type,start:a.state.startDate.format("YYYY-MM-DD"),end:a.state.endDate.format("YYYY-MM-DD"),exclude_cancelled:!!a.props.exclude_cancelled};a.props.categories&&(n.categories=a.props.categories.toString()),a.props.doctors&&(n.doctors=a.props.doctors.toString()),n.mail_to=e,bi(Kt(st,[t.props.active_practiceId]),n)},a.showConfirmMail=function(e){var t=Object(f.a)(a);nd({title:"Are you sure send mail?",content:"Email Id :"+e,okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){t.sendMail(e)},onCancel:function(){console.log("Cancel",e)}})},a.state={startDate:a.props.startDate,endDate:a.props.endDate,loading:!0,appointmentCategory:[],appointmentReports:[],activeIndex:0,mailingUsersList:[]},a.loadAppointmentReport=a.loadAppointmentReport.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadAppointmentReport(),Ei(this)}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.startDate==e.startDate&&this.props.endDate==e.endDate&&this.props.categories==e.categories&&this.props.doctors==e.doctors&&this.props.exclude_cancelled==e.exclude_cancelled||this.setState({startDate:e.startDate,endDate:e.endDate},(function(){t.loadAppointmentReport()}))}},{key:"render",value:function(){for(var e=this,t=this.state.appointmentReports,a=[],n=1;n<=t.length;n++)a.push(ad({s_no:n},t[n-1]));var i=[{title:"S. No",key:"s_no",dataIndex:"s_no",width:50},{title:"Date",key:"date",dataIndex:"date",render:function(e,t){return r.a.createElement("span",null,Or()(t.schedule_at).format("DD MMM YYYY"))},export:function(e,t){return Or()(t.schedule_at).format("ll")}},{title:"Scheduled At\t",key:"time",dataIndex:"time",render:function(e,t){return r.a.createElement("span",null,Or()(t.schedule_at).format("HH:mm"))},export:function(e,t){return Or()(t.schedule_at).format("HH:mm")}},{title:"Check-in At",dataIndex:"waiting",key:"waiting",render:function(e,t){return r.a.createElement("span",null,t.waiting?Or()(t.waiting).format("lll"):"")},export:function(e,t){return Or()(t.schedule_at).format("HH:mm")}},{title:"Waited For (hh:mm:ss)",dataIndex:"age",key:"age",render:function(e,t){return r.a.createElement("span",null,t.engaged?Or()(t.engaged).from(Or()(t.waiting)):"")},export:function(e,t){return t.engaged?Or()(t.engaged).from(Or()(t.waiting)):""}},{title:"Engaged At",dataIndex:"engaged",key:"engaged",render:function(e,t){return r.a.createElement("span",null,t.engaged?Or()(t.engaged).format("lll"):"")},export:function(e,t){return t.engaged?Or()(t.engaged).format("lll"):""}},{title:"Checkout At",dataIndex:"checkout",key:"checkout",render:function(e,t){return r.a.createElement("span",null,t.checkout?Or()(t.checkout).format("lll"):"")},export:function(e,t){return t.checkout?Or()(t.checkout).format("lll"):""}},{title:"Patient",dataIndex:"patient",key:"patient_name",render:function(e,t){return r.a.createElement("span",null,e.user.first_name)},export:function(e,t){return e.user.first_name}},{title:"Current Status",key:"status",dataIndex:"status"},{title:"Doctor",dataIndex:"doctor",key:"address",render:function(e,t){return r.a.createElement("span",null,t.doctor_data?t.doctor_data.user.first_name:null)},export:function(e,t){return t.doctor_data?t.doctor_data.user.first_name:null}},{title:"Category",dataIndex:"category",key:"address",render:function(e,t){return r.a.createElement("span",null,t.category_data?t.category_data.name:null)},export:function(e,t){return t.category_data?t.category_data.name:null}}];return r.a.createElement("div",null,r.a.createElement("h2",null,"All Appointments Report",r.a.createElement("span",{style:{float:"right"}},r.a.createElement("p",null,r.a.createElement("small",null,"E-Mail To:\xa0"),r.a.createElement(ga.a,{onChange:function(t){return e.showConfirmMail(t)},style:{width:200}},this.state.mailingUsersList.map((function(e){return r.a.createElement(ga.a.Option,{value:e.email},e.name)})))))),r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:12,offset:6,style:{textAlign:"center"}},r.a.createElement(ao.a,{title:"Total Appointments",value:this.state.total}),r.a.createElement("br",null))),r.a.createElement(ti,{hideReport:!0,loading:this.state.loading,columns:i,dataSource:a}))}}]),t}(r.a.Component);function id(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ld(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?id(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):id(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var od=nr.a.confirm,sd=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).loadAppointmentWithCategory=function(){var e=Object(f.a)(a);e.setState({loading:!0}),a.setState({loading:!0});var t={type:e.props.type,practice:e.props.active_practiceId,start:a.state.startDate.format("YYYY-MM-DD"),end:a.state.endDate.format("YYYY-MM-DD"),exclude_cancelled:!!a.props.exclude_cancelled};a.props.categories&&(t.categories=a.props.categories.toString()),a.props.doctors&&(t.doctors=a.props.doctors.toString()),Ut(et,(function(t){e.setState({appointmentCategory:t,loading:!1})}),(function(){e.setState({loading:!1})}),t)},a.onPieEnter=function(e,t){a.setState({activeIndex:t})},a.sendMail=function(e){var t={type:a.props.type,practice:a.props.active_practiceId,start:a.state.startDate.format("YYYY-MM-DD"),end:a.state.endDate.format("YYYY-MM-DD"),exclude_cancelled:!!a.props.exclude_cancelled};a.props.categories&&(t.categories=a.props.categories.toString()),a.props.doctors&&(t.doctors=a.props.doctors.toString()),t.mail_to=e,bi(et,t)},a.showConfirmMail=function(e){var t=Object(f.a)(a);od({title:"Are you sure send mail?",content:"Email Id :"+e,okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){t.sendMail(e)},onCancel:function(){console.log("Cancel",e)}})},a.state={startDate:a.props.startDate,endDate:a.props.endDate,loading:!1,appointmentCategory:[],activeIndex:0,mailingUsersList:[]},a.loadAppointmentWithCategory=a.loadAppointmentWithCategory.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadAppointmentWithCategory(),Ei(this)}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.startDate==e.startDate&&this.props.endDate==e.endDate&&this.props.categories==e.categories&&this.props.doctors==e.doctors&&this.props.exclude_cancelled==e.exclude_cancelled||this.setState({startDate:e.startDate,endDate:e.endDate},(function(){t.loadAppointmentWithCategory()}))}},{key:"render",value:function(){for(var e=this,t=this.state.appointmentCategory,a=[],n=1;n<=t.length;n++)a.push(ld({s_no:n},t[n-1]));var i=["#0088FE","#00C49F","#FFBB28","#FF8042"];return r.a.createElement("div",null,r.a.createElement("h2",null,"Appointment By Category",r.a.createElement("span",{style:{float:"right"}},r.a.createElement("p",null,r.a.createElement("small",null,"E-Mail To:\xa0"),r.a.createElement(ga.a,{onChange:function(t){return e.showConfirmMail(t)},style:{width:200}},this.state.mailingUsersList.map((function(e){return r.a.createElement(ga.a.Option,{value:e.email},e.name)})))))),r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:12,offset:6},r.a.createElement(pa.a,{size:"large",spinning:this.state.loading},a.length>0?r.a.createElement(Hs.j,{width:800,height:400},r.a.createElement(Hs.i,{activeIndex:this.state.activeIndex,activeShape:function(e){var t=Math.PI/180,a=e.cx,n=e.cy,i=e.midAngle,l=e.innerRadius,o=e.outerRadius,s=e.startAngle,c=e.endAngle,u=e.fill,d=e.payload,p=e.percent,m=(e.value,Math.sin(-t*i)),h=Math.cos(-t*i),f=a+(o+10)*h,g=n+(o+10)*m,y=a+(o+30)*h,E=n+(o+30)*m,b=y+22*(h>=0?1:-1),v=E,_=h>=0?"start":"end";return r.a.createElement("g",null,r.a.createElement(Hs.l,{cx:a,cy:n,innerRadius:l,outerRadius:o,startAngle:s,endAngle:c,fill:u}),r.a.createElement(Hs.l,{cx:a,cy:n,startAngle:s,endAngle:c,innerRadius:o+6,outerRadius:o+10,fill:u}),r.a.createElement("path",{d:"M".concat(f,",").concat(g,"L").concat(y,",").concat(E,"L").concat(b,",").concat(v),stroke:u,fill:"none"}),r.a.createElement("circle",{cx:b,cy:v,r:2,fill:u,stroke:"none"}),r.a.createElement("text",{x:b+12*(h>=0?1:-1),y:v,textAnchor:_,fill:"#333"},d.category+","+d.count),r.a.createElement("text",{x:b+12*(h>=0?1:-1),y:v,dy:18,textAnchor:_,fill:"#999"},"(Rate ".concat((100*p).toFixed(2),"%)")))},data:a,cx:300,dataKey:"count",cy:200,innerRadius:60,outerRadius:80,fill:"#8884d8",onMouseEnter:this.onPieEnter},a.map((function(e,t){return r.a.createElement(Hs.c,{fill:i[t%i.length]})})))):r.a.createElement(Xu.a,{image:Xu.a.PRESENTED_IMAGE_SIMPLE,description:"No Data to Show"})))),r.a.createElement(ti,{hideReport:!0,loading:this.state.loading,columns:[{title:"S. No",key:"s_no",dataIndex:"s_no",width:50},{title:"Appointment Category",key:"category",dataIndex:"category"},{title:"Total Appointments",key:"count",dataIndex:"count"}],dataSource:a}))}}]),t}(r.a.Component);function cd(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ud(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?cd(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):cd(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var dd=nr.a.confirm,pd=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).loadAppointmentEachDoctor=function(){var e=Object(f.a)(a);e.setState({loading:!0});var t={type:e.props.type,practice:e.props.active_practiceId,start:a.state.startDate.format("YYYY-MM-DD"),end:a.state.endDate.format("YYYY-MM-DD"),exclude_cancelled:!!a.props.exclude_cancelled};a.props.categories&&(t.categories=a.props.categories.toString()),a.props.doctors&&(t.doctors=a.props.doctors.toString()),Ut(et,(function(t){e.setState({appointmentEachDoctor:t,loading:!1})}),(function(){e.setState({loading:!1})}),t)},a.onPieEnter=function(e,t){a.setState({activeIndex:t})},a.sendMail=function(e){var t={type:a.props.type,practice:a.props.active_practiceId,start:a.state.startDate.format("YYYY-MM-DD"),end:a.state.endDate.format("YYYY-MM-DD"),exclude_cancelled:!!a.props.exclude_cancelled};a.props.categories&&(t.categories=a.props.categories.toString()),a.props.doctors&&(t.doctors=a.props.doctors.toString()),t.mail_to=e,bi(et,t)},a.showConfirmMail=function(e){var t=Object(f.a)(a);dd({title:"Are you sure send mail?",content:"Email Id :"+e,okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){t.sendMail(e)},onCancel:function(){console.log("Cancel")}})},a.state={appointmentEachDoctor:[],startDate:a.props.startDate,endDate:a.props.endDate,loading:!1,activeIndex:0,mailingUsersList:[]},a.loadAppointmentEachDoctor=a.loadAppointmentEachDoctor.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadAppointmentEachDoctor(),Ei(this)}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.startDate==e.startDate&&this.props.endDate==e.endDate&&this.props.categories==e.categories&&this.props.doctors==e.doctors&&this.props.exclude_cancelled==e.exclude_cancelled||this.setState({startDate:e.startDate,endDate:e.endDate},(function(){t.loadAppointmentEachDoctor()}))}},{key:"render",value:function(){for(var e=this,t=this.state.appointmentEachDoctor,a=[],n=1;n<=t.length;n++)a.push(ud({s_no:n},t[n-1]));var i=["#0088FE","#00C49F","#FFBB28","#FF8042"],l=a.reduce((function(e,t){return e+t.count}),0);return r.a.createElement("div",null,r.a.createElement("h2",null,"Appointment For Each Patient Doctor",r.a.createElement("span",{style:{float:"right"}},r.a.createElement("p",null,r.a.createElement("small",null,"E-Mail To:\xa0"),r.a.createElement(ga.a,{onChange:function(t){return e.showConfirmMail(t)},style:{width:200}},this.state.mailingUsersList.map((function(e){return r.a.createElement(ga.a.Option,{value:e.email},e.name)})))))),r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:12,offset:6},r.a.createElement(pa.a,{size:"large",spinning:this.state.loading},a.length>0?r.a.createElement(Hs.j,{width:800,height:400},r.a.createElement(Hs.i,{activeIndex:this.state.activeIndex,activeShape:function(e){var t=Math.PI/180,a=e.cx,n=e.cy,i=e.midAngle,l=e.innerRadius,o=e.outerRadius,s=e.startAngle,c=e.endAngle,u=e.fill,d=e.payload,p=e.percent,m=(e.value,Math.sin(-t*i)),h=Math.cos(-t*i),f=a+(o+10)*h,g=n+(o+10)*m,y=a+(o+30)*h,E=n+(o+30)*m,b=y+22*(h>=0?1:-1),v=E,_=h>=0?"start":"end";return r.a.createElement("g",null,r.a.createElement(Hs.l,{cx:a,cy:n,innerRadius:l,outerRadius:o,startAngle:s,endAngle:c,fill:u}),r.a.createElement(Hs.l,{cx:a,cy:n,startAngle:s,endAngle:c,innerRadius:o+6,outerRadius:o+10,fill:u}),r.a.createElement("path",{d:"M".concat(f,",").concat(g,"L").concat(y,",").concat(E,"L").concat(b,",").concat(v),stroke:u,fill:"none"}),r.a.createElement("circle",{cx:b,cy:v,r:2,fill:u,stroke:"none"}),r.a.createElement("text",{x:b+12*(h>=0?1:-1),y:v,textAnchor:_,fill:"#333"},d.doctor+","+d.count),r.a.createElement("text",{x:b+12*(h>=0?1:-1),y:v,dy:18,textAnchor:_,fill:"#999"},"(Rate ".concat((100*p).toFixed(2),"%)")))},data:a,cx:300,dataKey:"count",cy:200,innerRadius:60,outerRadius:80,fill:"#8884d8",onMouseEnter:this.onPieEnter},a.map((function(e,t){return r.a.createElement(Hs.c,{fill:i[t%i.length]})})))):r.a.createElement(Xu.a,{image:Xu.a.PRESENTED_IMAGE_SIMPLE,description:"No Data to Show"})))),r.a.createElement(sr.a,null,r.a.createElement(ao.a,{title:"Total",value:l})),r.a.createElement(ti,{hideReport:!0,loading:this.state.loading,columns:[{title:"S. No",key:"s_no",dataIndex:"s_no",width:50},{title:"Doctor",key:"doctor",dataIndex:"doctor"},{title:"Total Appointments",key:"count",dataIndex:"count"}],dataSource:a}))}}]),t}(r.a.Component);function md(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function hd(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?md(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):md(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var fd=nr.a.confirm,gd=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).loadAppointmentPatientGroup=function(){var e=Object(f.a)(a);e.setState({loading:!0});var t={type:e.props.type,practice:e.props.active_practiceId,start:a.state.startDate.format("YYYY-MM-DD"),end:a.state.endDate.format("YYYY-MM-DD"),exclude_cancelled:!!a.props.exclude_cancelled};a.props.categories&&(t.categories=a.props.categories.toString()),a.props.doctors&&(t.doctors=a.props.doctors.toString()),Ut(et,(function(t){e.setState({appointmentGroup:t.data,total:t.total,loading:!1})}),(function(){e.setState({loading:!1})}),t)},a.onPieEnter=function(e,t){a.setState({activeIndex:t})},a.sendMail=function(e){var t={type:a.props.type,practice:a.props.active_practiceId,start:a.state.startDate.format("YYYY-MM-DD"),end:a.state.endDate.format("YYYY-MM-DD"),exclude_cancelled:!!a.props.exclude_cancelled};a.props.categories&&(t.categories=a.props.categories.toString()),a.props.doctors&&(t.doctors=a.props.doctors.toString()),t.mail_to=e,bi(et,t)},a.showConfirmMail=function(e){var t=Object(f.a)(a);fd({title:"Are you sure send mail?",content:"Email Id :"+e,okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){t.sendMail(e)},onCancel:function(){console.log("Cancel")}})},a.state={appointmentGroup:[],startDate:a.props.startDate,endDate:a.props.endDate,loading:!1,activeIndex:0,mailingUsersList:[]},a.loadAppointmentPatientGroup=a.loadAppointmentPatientGroup.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadAppointmentPatientGroup(),Ei(this)}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.startDate==e.startDate&&this.props.endDate==e.endDate&&this.props.categories==e.categories&&this.props.doctors==e.doctors&&this.props.exclude_cancelled==e.exclude_cancelled||this.setState({startDate:e.startDate,endDate:e.endDate},(function(){t.loadAppointmentPatientGroup()}))}},{key:"render",value:function(){for(var e=this,t=this.state.appointmentGroup,a=[],n=1;n<=t.length;n++)a.push(hd({s_no:n},t[n-1]));var i=["#0088FE","#00C49F","#FFBB28","#FF8042"];return r.a.createElement("div",null,r.a.createElement("h2",null,"Appointment For Each Patient Group",r.a.createElement("span",{style:{float:"right"}},r.a.createElement("p",null,r.a.createElement("small",null,"E-Mail To:\xa0"),r.a.createElement(ga.a,{onChange:function(t){return e.showConfirmMail(t)},style:{width:200}},this.state.mailingUsersList.map((function(e){return r.a.createElement(ga.a.Option,{value:e.email},e.name)})))))),r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:12,offset:6},r.a.createElement(pa.a,{size:"large",spinning:this.state.loading},a.length>0?r.a.createElement(Hs.j,{width:800,height:400},r.a.createElement(Hs.i,{activeIndex:this.state.activeIndex,activeShape:function(e){var t=Math.PI/180,a=e.cx,n=e.cy,i=e.midAngle,l=e.innerRadius,o=e.outerRadius,s=e.startAngle,c=e.endAngle,u=e.fill,d=e.payload,p=e.percent,m=(e.value,Math.sin(-t*i)),h=Math.cos(-t*i),f=a+(o+10)*h,g=n+(o+10)*m,y=a+(o+30)*h,E=n+(o+30)*m,b=y+22*(h>=0?1:-1),v=E,_=h>=0?"start":"end";return r.a.createElement("g",null,r.a.createElement("text",{x:a,y:n,dy:8,textAnchor:"middle",fill:u},d.patient_group),r.a.createElement(Hs.l,{cx:a,cy:n,innerRadius:l,outerRadius:o,startAngle:s,endAngle:c,fill:u}),r.a.createElement(Hs.l,{cx:a,cy:n,startAngle:s,endAngle:c,innerRadius:o+6,outerRadius:o+10,fill:u}),r.a.createElement("path",{d:"M".concat(f,",").concat(g,"L").concat(y,",").concat(E,"L").concat(b,",").concat(v),stroke:u,fill:"none"}),r.a.createElement("circle",{cx:b,cy:v,r:2,fill:u,stroke:"none"}),r.a.createElement("text",{x:b+12*(h>=0?1:-1),y:v,textAnchor:_,fill:"#333"},d.patient_group+","+d.count),r.a.createElement("text",{x:b+12*(h>=0?1:-1),y:v,dy:18,textAnchor:_,fill:"#999"},"(Rate ".concat((100*p).toFixed(2),"%)")))},data:a,cx:300,dataKey:"count",cy:200,innerRadius:60,outerRadius:80,fill:"#8884d8",onMouseEnter:this.onPieEnter},a.map((function(e,t){return r.a.createElement(Hs.c,{fill:i[t%i.length]})})))):r.a.createElement(Xu.a,{image:Xu.a.PRESENTED_IMAGE_SIMPLE,description:"No Data to Show"})))),r.a.createElement(sr.a,null,r.a.createElement(ao.a,{title:"Total",value:this.state.total})),r.a.createElement(ti,{hideReport:!0,loading:this.state.loading,columns:[{title:"S. No",key:"s_no",dataIndex:"s_no",width:50},{title:"Patient Group",key:"patient_group",dataIndex:"patient_group"},{title:"Total Appointments",key:"count",dataIndex:"count"}],dataSource:a}))}}]),t}(r.a.Component);function yd(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ed(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?yd(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):yd(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var bd=nr.a.confirm,vd=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).loadAppointmentDayWait=function(){var e=Object(f.a)(a);e.setState({loading:!0});var t={type:e.props.type,practice:e.props.active_practiceId,start:a.state.startDate.format("YYYY-MM-DD"),end:a.state.endDate.format("YYYY-MM-DD"),exclude_cancelled:!!a.props.exclude_cancelled};a.props.categories&&(t.categories=a.props.categories.toString()),a.props.doctors&&(t.doctors=a.props.doctors.toString()),Ut(et,(function(t){e.setState({appointmentDayWait:t,loading:!1})}),(function(){e.setState({loading:!1})}),t)},a.sendMail=function(e){var t={type:a.props.type,practice:a.props.active_practiceId,start:a.state.startDate.format("YYYY-MM-DD"),end:a.state.endDate.format("YYYY-MM-DD"),exclude_cancelled:!!a.props.exclude_cancelled};a.props.categories&&(t.categories=a.props.categories.toString()),a.props.doctors&&(t.doctors=a.props.doctors.toString()),t.mail_to=e,bi(et,t)},a.showConfirmMail=function(e){var t=Object(f.a)(a);bd({title:"Are you sure send mail?",content:"Email Id :"+e,okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){t.sendMail(e)},onCancel:function(){console.log("Cancel")}})},a.state={appointmentDayWait:[],startDate:a.props.startDate,endDate:a.props.endDate,loading:!1,mailingUsersList:[]},a.loadAppointmentDayWait=a.loadAppointmentDayWait.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadAppointmentDayWait(),Ei(this)}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.startDate==e.startDate&&this.props.endDate==e.endDate&&this.props.categories==e.categories&&this.props.doctors==e.doctors&&this.props.exclude_cancelled==e.exclude_cancelled||this.setState({startDate:e.startDate,endDate:e.endDate},(function(){t.loadAppointmentDayWait()}))}},{key:"render",value:function(){for(var e=this,t=this.state.appointmentDayWait,a=[],n=1;n<=t.length;n++)a.push(Ed({s_no:n},t[n-1]));var i=[{title:"S. No",key:"s_no",dataIndex:"s_no",width:50},{title:"Appointment Time Day",key:"date",dataIndex:"date",render:function(e,t){return r.a.createElement("span",null,Or()(t.date).format("DD MMM YYYY"))},export:function(e,t){return Or()(t.date).format("DD MMM YYYY")}},{title:"Avg. waiting Time(hh:mm:ss)",key:"wait",dataIndex:"wait",render:function(e,t){return r.a.createElement("span",null,t.wait?Or()().add(t.wait,"second").fromNow():"")},export:function(e,t){return t.wait?Or()().add(t.wait,"second").fromNow():""}},{title:"Avg. engaged Time(hh:mm:ss)",key:"engage",dataIndex:"engage",render:function(e,t){return r.a.createElement("span",null,t.engage?Or()().add(t.engage,"second").fromNow():"")},export:function(e,t){return t.engage?Or()().add(t.engage,"second").fromNow():""}},{title:"Avg. stay Time (hh:mm:ss)",key:"stay",dataIndex:"stay",render:function(e,t){return r.a.createElement("span",null,t.stay?Or()().add(t.stay,"second").fromNow():"")},export:function(e,t){return t.stay?Or()().add(t.stay,"second").fromNow():""}}];return r.a.createElement("div",null,r.a.createElement("h2",null,"Average Waiting/engaged Time Day Wise",r.a.createElement("span",{style:{float:"right"}},r.a.createElement("p",null,r.a.createElement("small",null,"E-Mail To:\xa0"),r.a.createElement(ga.a,{onChange:function(t){return e.showConfirmMail(t)},style:{width:200}},this.state.mailingUsersList.map((function(e){return r.a.createElement(ga.a.Option,{value:e.email},e.name)})))))),r.a.createElement(ti,{hideReport:!0,loading:this.state.loading,columns:i,dataSource:a}))}}]),t}(r.a.Component);function _d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Od(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_d(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_d(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Dd=nr.a.confirm,kd=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).loadAppointmentMonthWait=function(){var e=Object(f.a)(a);e.setState({loading:!0});var t={type:e.props.type,practice:e.props.active_practiceId,start:a.state.startDate.format("YYYY-MM-DD"),end:a.state.endDate.format("YYYY-MM-DD"),exclude_cancelled:!!a.props.exclude_cancelled};a.props.categories&&(t.categories=a.props.categories.toString()),a.props.doctors&&(t.doctors=a.props.doctors.toString()),Ut(et,(function(t){e.setState({appointmentMonthWait:t,loading:!1})}),(function(){e.setState({loading:!1})}),t)},a.sendMail=function(e){var t={type:a.props.type,practice:a.props.active_practiceId,start:a.state.startDate.format("YYYY-MM-DD"),end:a.state.endDate.format("YYYY-MM-DD"),exclude_cancelled:!!a.props.exclude_cancelled};a.props.categories&&(t.categories=a.props.categories.toString()),a.props.doctors&&(t.doctors=a.props.doctors.toString()),t.mail_to=e,bi(et,t)},a.showConfirmMail=function(e){var t=Object(f.a)(a);Dd({title:"Are you sure send mail?",content:"Email Id :"+e,okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){t.sendMail(e)},onCancel:function(){console.log("Cancel")}})},a.state={appointmentMonthWait:[],startDate:a.props.startDate,endDate:a.props.endDate,loading:!1,mailingUsersList:[]},a.loadAppointmentMonthWait=a.loadAppointmentMonthWait.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadAppointmentMonthWait(),Ei(this)}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.startDate==e.startDate&&this.props.endDate==e.endDate&&this.props.categories==e.categories&&this.props.doctors==e.doctors&&this.props.exclude_cancelled==e.exclude_cancelled||this.setState({startDate:e.startDate,endDate:e.endDate},(function(){t.loadAppointmentMonthWait()}))}},{key:"render",value:function(){for(var e=this,t=this.state.appointmentMonthWait,a=[],n=1;n<=t.length;n++)a.push(Od({s_no:n},t[n-1]));var i=[{title:"S. No",key:"s_no",dataIndex:"s_no",width:50},{title:"Appointment Time Month",key:"date",dataIndex:"date",render:function(e,t){return r.a.createElement("span",null,Or()(t.date).format("DD MMM YYYY"))},export:function(e,t){return Or()(t.date).format("DD MMM YYYY")}},{title:"Avg. waiting Time(hh:mm:ss)",key:"wait",dataIndex:"wait",render:function(e,t){return r.a.createElement("span",null,t.wait?Or()().add(t.wait,"second").fromNow():"")},export:function(e,t){return t.wait?Or()().add(t.wait,"second").fromNow():""}},{title:"Avg. engaged Time(hh:mm:ss)",key:"engage",dataIndex:"engage",render:function(e,t){return r.a.createElement("span",null,t.engage?Or()().add(t.engage,"second").fromNow():"")},export:function(e,t){return t.engage?Or()().add(t.engage,"second").fromNow():""}},{title:"Avg. stay Time (hh:mm:ss)",key:"stay",dataIndex:"stay",render:function(e,t){return r.a.createElement("span",null,t.stay?Or()().add(t.stay,"second").fromNow():"")},export:function(e,t){return t.stay?Or()().add(t.stay,"second").fromNow():""}}];return r.a.createElement("div",null,r.a.createElement("h2",null,"Average Waiting/engaged Time Month Wise",r.a.createElement("span",{style:{float:"right"}},r.a.createElement("p",null,r.a.createElement("small",null,"E-Mail To:\xa0"),r.a.createElement(ga.a,{onChange:function(t){return e.showConfirmMail(t)},style:{width:200}},this.state.mailingUsersList.map((function(e){return r.a.createElement(ga.a.Option,{value:e.email},e.name)})))))),r.a.createElement(ti,{hideReport:!0,loading:this.state.loading,columns:i,dataSource:a}))}}]),t}(r.a.Component);function Pd(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Sd(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Pd(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Pd(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var xd=nr.a.confirm,jd=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).loadAppointmentCancellation=function(){var e=Object(f.a)(a);e.setState({loading:!0});var t={type:e.props.type,practice:e.props.active_practiceId,start:a.state.startDate.format("YYYY-MM-DD"),end:a.state.endDate.format("YYYY-MM-DD"),exclude_cancelled:!!a.props.exclude_cancelled};a.props.categories&&(t.categories=a.props.categories.toString()),a.props.doctors&&(t.doctors=a.props.doctors.toString()),Ut(et,(function(t){console.log(Object.entries(t)),e.setState({appointmentCancel:t,loading:!1})}),(function(){e.setState({loading:!1})}),t)},a.sendMail=function(e){var t={type:a.props.type,practice:a.props.active_practiceId,start:a.state.startDate.format("YYYY-MM-DD"),end:a.state.endDate.format("YYYY-MM-DD"),exclude_cancelled:!!a.props.exclude_cancelled};a.props.categories&&(t.categories=a.props.categories.toString()),a.props.doctors&&(t.doctors=a.props.doctors.toString()),t.mail_to=e,bi(et,t)},a.showConfirmMail=function(e){var t=Object(f.a)(a);xd({title:"Are you sure send mail?",content:"Email Id :"+e,okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){t.sendMail(e)},onCancel:function(){console.log("Cancel")}})},a.onPieEnter=function(e,t){a.setState({activeIndex:t})},a.state={appointmentCancel:[],startDate:a.props.startDate,endDate:a.props.endDate,loading:!1,activeIndex:0,mailingUsersList:[]},a.loadAppointmentCancellation=a.loadAppointmentCancellation.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadAppointmentCancellation(),Ei(this)}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.startDate==e.startDate&&this.props.endDate==e.endDate&&this.props.categories==e.categories&&this.props.doctors==e.doctors&&this.props.exclude_cancelled==e.exclude_cancelled||this.setState({startDate:e.startDate,endDate:e.endDate},(function(){t.loadAppointmentCancellation()}))}},{key:"render",value:function(){for(var e=this,t=this.state.appointmentCancel,a=[],n=1;n<=t.length;n++)a.push(Sd({s_no:n},t[n-1]));var i=["#FFBB28","#FF8042"],l=a.reduce((function(e,t){return e+t.count}),0);return r.a.createElement("div",null,r.a.createElement("h2",null,"Cancellations Numbers",r.a.createElement("span",{style:{float:"right"}},r.a.createElement("p",null,r.a.createElement("small",null,"E-Mail To:\xa0"),r.a.createElement(ga.a,{onChange:function(t){return e.showConfirmMail(t)},style:{width:200}},this.state.mailingUsersList.map((function(e){return r.a.createElement(ga.a.Option,{value:e.email},e.name)})))))),r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:12,offset:6},r.a.createElement(pa.a,{size:"large",spinning:this.state.loading},a.length>0&&l?r.a.createElement(Hs.j,{width:800,height:400},r.a.createElement(Hs.i,{label:function(e){var t=Math.PI/180,a=e.cx,n=e.cy,i=e.midAngle,l=e.innerRadius,o=e.outerRadius,s=e.startAngle,c=e.endAngle,u=e.fill,d=e.payload,p=e.percent,m=(e.value,Math.sin(-t*i)),h=Math.cos(-t*i),f=a+(o+10)*h,g=n+(o+10)*m,y=a+(o+30)*h,E=n+(o+30)*m,b=y+22*(h>=0?1:-1),v=E,_=h>=0?"start":"end";return r.a.createElement("g",null,r.a.createElement(Hs.l,{cx:a,cy:n,innerRadius:l,outerRadius:o,startAngle:s,endAngle:c,fill:u}),r.a.createElement("path",{d:"M".concat(f,",").concat(g,"L").concat(y,",").concat(E,"L").concat(b,",").concat(v),stroke:u,fill:"none"}),r.a.createElement("circle",{cx:b,cy:v,r:2,fill:u,stroke:"none"}),r.a.createElement("text",{x:b+12*(h>=0?1:-1),y:v,textAnchor:_,fill:"#333"},d.type+","+d.count),r.a.createElement("text",{x:b+12*(h>=0?1:-1),y:v,dy:18,textAnchor:_,fill:"#999"},"(Rate ".concat((100*p).toFixed(2),"%)")))},data:a,cx:300,dataKey:"count",cy:200,innerRadius:60,outerRadius:80,fill:"#8884d8"},a.map((function(e,t){return r.a.createElement(Hs.c,{fill:i[t%i.length]})})))):r.a.createElement(Xu.a,{image:Xu.a.PRESENTED_IMAGE_SIMPLE,description:"No Data to Show"})))),r.a.createElement(sr.a,null,r.a.createElement(ao.a,{title:"Total",value:l})),r.a.createElement(ti,{hideReport:!0,loading:this.state.loading,columns:[{title:"S. No",key:"s_no",dataIndex:"s_no",width:50},{title:"Appointment Status",key:"type",dataIndex:"type"},{title:"Total Appointments",key:"count",dataIndex:"count"}],dataSource:a}))}}]),t}(r.a.Component);function Id(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Cd(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Id(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Id(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var wd=nr.a.confirm,Md=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).loadAppointmentDaily=function(){var e=Object(f.a)(a);e.setState({loading:!0});var t={type:e.props.type,practice:e.props.active_practiceId,start:a.state.startDate.format("YYYY-MM-DD"),end:a.state.endDate.format("YYYY-MM-DD"),exclude_cancelled:!!a.props.exclude_cancelled};a.props.categories&&(t.categories=a.props.categories.toString()),a.props.doctors&&(t.doctors=a.props.doctors.toString()),Ut(et,(function(t){e.setState({appointmentDaily:t.data,total:t.total,loading:!1})}),(function(){e.setState({loading:!1})}),t)},a.sendMail=function(e){var t={type:a.props.type,practice:a.props.active_practiceId,start:a.state.startDate.format("YYYY-MM-DD"),end:a.state.endDate.format("YYYY-MM-DD"),exclude_cancelled:!!a.props.exclude_cancelled};a.props.categories&&(t.categories=a.props.categories.toString()),a.props.doctors&&(t.doctors=a.props.doctors.toString()),t.mail_to=e,bi(et,t)},a.showConfirmMail=function(e){var t=Object(f.a)(a);wd({title:"Are you sure send mail?",content:"Email Id :"+e,okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){t.sendMail(e)},onCancel:function(){console.log("Cancel")}})},a.state={appointmentDaily:[],startDate:a.props.startDate,endDate:a.props.endDate,loading:!1,mailingUsersList:[]},a.loadAppointmentDaily=a.loadAppointmentDaily.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadAppointmentDaily(),Ei(this)}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.startDate==e.startDate&&this.props.endDate==e.endDate&&this.props.categories==e.categories&&this.props.doctors==e.doctors&&this.props.exclude_cancelled==e.exclude_cancelled||this.setState({startDate:e.startDate,endDate:e.endDate},(function(){t.loadAppointmentDaily()}))}},{key:"render",value:function(){for(var e=this,t=this.state.appointmentDaily,a=[],n=1;n<=t.length;n++)a.push(Cd({s_no:n},t[n-1]));var i=[{title:"S. No",key:"s_no",dataIndex:"s_no",width:50},{title:"Day",key:"date",dataIndex:"date",render:function(e,t){return r.a.createElement("span",null,Or()(t.date).format("DD MMM "))},export:function(e,t){return Or()(t.date).format("DD MMM ")}},{title:"Total Appointments",key:"count",dataIndex:"count"}];return r.a.createElement("div",null,r.a.createElement("h2",null,"Daily Appointment Count",r.a.createElement("span",{style:{float:"right"}},r.a.createElement("p",null,r.a.createElement("small",null,"E-Mail To:\xa0"),r.a.createElement(ga.a,{onChange:function(t){return e.showConfirmMail(t)},style:{width:200}},this.state.mailingUsersList.map((function(e){return r.a.createElement(ga.a.Option,{value:e.email},e.name)})))))),r.a.createElement(pa.a,{size:"large",spinning:this.state.loading},a.length>0?r.a.createElement(Hs.h,{width:1e3,height:300,data:[].concat(a).reverse(),margin:{top:5,right:30,left:20,bottom:55}},r.a.createElement(Hs.n,{dataKey:"date",tickFormatter:function(e){return Or()(e).format("DD MMM")},label:{value:"Data Range",offset:0,margin:{top:10},position:"insideBottom"}}),r.a.createElement(Hs.o,{label:{value:"Appointments",angle:-90,position:"insideLeft"}}),r.a.createElement(Hs.b,{strokeDasharray:"3 3"}),r.a.createElement(Hs.m,null),r.a.createElement(Hs.g,{type:"monotone",dataKey:"count",stroke:"#1DA57A",strokeWidth:4,label:r.a.createElement((function(e){var t=e.x,a=e.y,n=(e.stroke,e.value);return r.a.createElement("text",{x:t,y:a,dy:-4,fill:"#666",fontSize:18,textAnchor:"middle"},n)}),null)})):r.a.createElement(Xu.a,{image:Xu.a.PRESENTED_IMAGE_SIMPLE,description:"No Data to Show"})),r.a.createElement(sr.a,null,r.a.createElement(ao.a,{title:"Total",value:this.state.total})),r.a.createElement(ti,{hideReport:!0,loading:this.state.loading,columns:i,dataSource:a}))}}]),t}(r.a.Component);function Ad(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Td(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ad(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ad(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Rd=nr.a.confirm,Ld=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).loadAppointmentMonthly=function(){var e=Object(f.a)(a);e.setState({loading:!0});var t={type:e.props.type,practice:e.props.active_practiceId,start:a.state.startDate.format("YYYY-MM-DD"),end:a.state.endDate.format("YYYY-MM-DD"),exclude_cancelled:!!a.props.exclude_cancelled};a.props.categories&&(t.categories=a.props.categories.toString()),a.props.doctors&&(t.doctors=a.props.doctors.toString()),Ut(et,(function(t){e.setState({appointmentMonthly:t.data,total:t.total,loading:!1})}),(function(){e.setState({loading:!1})}),t)},a.sendMail=function(e){var t={type:a.props.type,practice:a.props.active_practiceId,start:a.state.startDate.format("YYYY-MM-DD"),end:a.state.endDate.format("YYYY-MM-DD"),exclude_cancelled:!!a.props.exclude_cancelled};a.props.categories&&(t.categories=a.props.categories.toString()),a.props.doctors&&(t.doctors=a.props.doctors.toString()),t.mail_to=e,bi(et,t)},a.showConfirmMail=function(e){var t=Object(f.a)(a);Rd({title:"Are you sure send mail?",content:"Email Id :"+e,okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){t.sendMail(e)},onCancel:function(){console.log("Cancel")}})},a.state={appointmentMonthly:[],startDate:a.props.startDate,endDate:a.props.endDate,loading:!1,mailingUsersList:[]},a.loadAppointmentMonthly=a.loadAppointmentMonthly.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadAppointmentMonthly(),Ei(this)}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.startDate==e.startDate&&this.props.endDate==e.endDate&&this.props.categories==e.categories&&this.props.doctors==e.doctors&&this.props.exclude_cancelled==e.exclude_cancelled||this.setState({startDate:e.startDate,endDate:e.endDate},(function(){t.loadAppointmentMonthly()}))}},{key:"render",value:function(){for(var e=this,t=this.state.appointmentMonthly,a=[],n=1;n<=t.length;n++)a.push(Td({s_no:n},t[n-1]));var i=[{title:"S. No",key:"s_no",dataIndex:"s_no",width:50},{title:"Month",key:"date",dataIndex:"date",render:function(e,t){return r.a.createElement("span",null,Or()(t.date).format("MMMM YYYY"))},export:function(e,t){return Or()(t.date).format("DD MMM YYYY")}},{title:"Total Appointments",key:"count",dataIndex:"count"}];return r.a.createElement("div",null,r.a.createElement("h2",null,"Monthly Appointment Count",r.a.createElement("span",{style:{float:"right"}},r.a.createElement("p",null,r.a.createElement("small",null,"E-Mail To:\xa0"),r.a.createElement(ga.a,{onChange:function(t){return e.showConfirmMail(t)},style:{width:200}},this.state.mailingUsersList.map((function(e){return r.a.createElement(ga.a.Option,{value:e.email},e.name)})))))),r.a.createElement(pa.a,{size:"large",spinning:this.state.loading},a.length>0?r.a.createElement(Hs.d,{width:1e3,height:400,data:[].concat(a).reverse(),margin:{top:20,right:20,bottom:20,left:20}},r.a.createElement(Hs.n,{dataKey:"date",tickFormatter:function(e){return Or()(e).format("MMM YY")}}),r.a.createElement(Hs.o,null),r.a.createElement(Hs.m,null),r.a.createElement(Hs.a,{dataKey:"count",barSize:35,fill:"#0059b3",stroke:"#0059b3",label:function(e){e.payload;var t=e.x,a=e.y,n=e.width,i=(e.height,e.value);return r.a.createElement("text",{x:t+n/2,y:a,fill:"#666",textAnchor:"middle",dy:-6},i)}})):r.a.createElement(Xu.a,{image:Xu.a.PRESENTED_IMAGE_SIMPLE,description:"No Data to Show"})),r.a.createElement(sr.a,null,r.a.createElement(ao.a,{title:"Total",value:this.state.total})),r.a.createElement(ti,{hideReport:!0,loading:this.state.loading,columns:i,dataSource:a}))}}]),t}(r.a.Component),Fd=nr.a.confirm;r.a.Component;function Nd(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Yd(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Nd(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Nd(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Vd=nr.a.confirm,Bd=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).sendMail=function(e){var t={type:a.props.type,practice:a.props.active_practiceId,start:a.state.startDate.format("YYYY-MM-DD"),end:a.state.endDate.format("YYYY-MM-DD"),exclude_cancelled:!!a.props.exclude_cancelled};a.props.categories&&(t.categories=a.props.categories.toString()),a.props.doctors&&(t.doctors=a.props.doctors.toString()),t.mail_to=e,bi(et,t)},a.showConfirmMail=function(e){var t=Object(f.a)(a);Vd({title:"Are you sure send mail?",content:"Email Id :"+e,okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){t.sendMail(e)},onCancel:function(){console.log("Cancel")}})},a.state={patient_conversion:[],distinct_patients:"",startDate:a.props.startDate,endDate:a.props.endDate,loading:!1,activeIndex:0,mailingUsersList:[]},a.loadPatientConversion=a.loadPatientConversion.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadPatientConversion(),Ei(this)}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.startDate==e.startDate&&this.props.endDate==e.endDate&&this.props.categories==e.categories&&this.props.doctors==e.doctors&&this.props.exclude_cancelled==e.exclude_cancelled||this.setState({startDate:e.startDate,endDate:e.endDate},(function(){t.loadPatientConversion()}))}},{key:"loadPatientConversion",value:function(){var e=this;e.setState({loading:!0});var t={type:this.props.type,practice:this.props.active_practiceId,start:this.state.startDate.format("YYYY-MM-DD"),end:this.state.endDate.format("YYYY-MM-DD"),exclude_cancelled:!!this.props.exclude_cancelled};this.props.categories&&(t.categories=this.props.categories.toString()),this.props.doctors&&(t.doctors=this.props.doctors.toString()),Ut(et,(function(t){e.setState({patient_conversion:t.data,distinct_patients:t.distinct_patients,loading:!1})}),(function(){e.setState({loading:!1})}),t)}},{key:"render",value:function(){for(var e=this,t=this,a=this.state.patient_conversion,n=[],i=1;i<=a.length;i++)n.push(Yd({s_no:i},a[i-1]));var l=[{title:"S. No",key:"s_no",dataIndex:"s_no",width:50},{title:"Date",key:"date",dataIndex:"date"},{title:"Patient Id",key:"custom_id",dataIndex:"custom_id"},{title:"Patient Name",key:"patient_name",dataIndex:"patient_name"},{title:"Gender",key:"gender",dataIndex:"gender"},{title:"Contact Number",key:"mobile",dataIndex:"mobile",render:function(e){return t.props.activePracticePermissions.PatientPhoneNumber?e:ka(e)},exports:function(e){return e}},{title:"Email",key:"email",dataIndex:"email",render:function(e){return t.props.activePracticePermissions.PatientEmailId?e:Pa(e)},exports:function(e){return e}},{title:"Address",key:"address",dataIndex:"address"},{title:"Source",key:"source",dataIndex:"source"},{title:"Last Patient Note",key:"last_note",dataIndex:"last_note",render:function(e,t){return r.a.createElement("span",null,t.last_note?t.last_note+"( "+t.note_by+")":"")}},{title:"Last Payments",key:"invoice_total",dataIndex:"invoice_total"}];return r.a.createElement("div",null,r.a.createElement("h2",null,"Patient Conversion",r.a.createElement("span",{style:{float:"right"}},r.a.createElement("p",null,r.a.createElement("small",null,"E-Mail To:\xa0"),r.a.createElement(ga.a,{onChange:function(t){return e.showConfirmMail(t)},style:{width:200}},this.state.mailingUsersList.map((function(e){return r.a.createElement(ga.a.Option,{value:e.email},e.name)})))))),r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:12,offset:6,style:{textAlign:"center"}},r.a.createElement(ao.a,{title:"Total Conversions",value:this.state.distinct_patients}))),r.a.createElement(ti,{hideReport:!0,loading:this.state.loading,columns:l,dataSource:n}))}}]),t}(r.a.Component),Hd=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).onChangeHandle=function(e,t){Object(f.a)(a);a.setState(Object(u.a)({},e,t.target.value))},a.handleChangeOption=function(e,t){Object(f.a)(a);a.setState(Object(u.a)({},e,t))},a.onChangeCheckbox=function(e){a.setState({exclude_cancelled:!a.state.exclude_cancelled})},a.changeSidePanelSize=function(e){a.setState({sidePanelColSpan:e?0:4})},a.state={sidePanelColSpan:4,appointmentReports:[],type:"ALL",advancedOptionShow:!0,appointmentCategory:[],categories:"",practiceDoctors:[]},a.loadAppointmentCategory=a.loadAppointmentCategory.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadAppointmentCategory(),mi(this)}},{key:"loadAppointmentCategory",value:function(){var e=this;Ut(Kt(oe,[this.props.active_practiceId]),(function(t){e.setState({appointmentCategory:t})}),(function(){}))}},{key:"advancedOption",value:function(e){this.setState({advancedOptionShow:e})}},{key:"render",value:function(){var e=this,t=this.state,a=t.sidePanelColSpan,n=t.type,i=t.advancedOptionShow,l=t.practiceDoctors,o=t.appointmentCategory;return r.a.createElement("div",null,r.a.createElement("h2",null,"Appointments Report ",r.a.createElement(da.a,{type:"primary",shape:"round",icon:a?"double-right":"double-left",style:{float:"right"},onClick:function(){return e.changeSidePanelSize(a)}},"Panel")),r.a.createElement(cr.a,null,r.a.createElement(rr.a,{gutter:16},r.a.createElement(ir.a,{span:24-a},"ALL"==n?r.a.createElement(rd,Object.assign({type:"ALL"},this.state,this.props)):null,"CATEGORY"==n?r.a.createElement(sd,Object.assign({},this.state,this.props)):null,"DOCTOR"==n?r.a.createElement(pd,Object.assign({},this.state,this.props)):null,"PATIENT_GROUPS"==n?r.a.createElement(gd,Object.assign({},this.state,this.props)):null,"DAILY_WAIT"==n?r.a.createElement(vd,Object.assign({},this.state,this.props)):null,"MONTHLY_WAIT"==n?r.a.createElement(kd,Object.assign({},this.state,this.props)):null,"CANCEL_NUMBERS"==n?r.a.createElement(jd,Object.assign({},this.state,this.props)):null,"DAILY"==n?r.a.createElement(Md,Object.assign({},this.state,this.props)):null,"MONTHLY"==n?r.a.createElement(Ld,Object.assign({},this.state,this.props)):null,"CONVERSION_REPORT"==n?r.a.createElement(Bd,Object.assign({},this.props,this.state)):null),r.a.createElement(ir.a,{span:a},r.a.createElement(br.a.Group,{buttonStyle:"solid",defaultValue:"ALL",onChange:function(t){return e.onChangeHandle("type",t)}},r.a.createElement("h2",null,"Appointments"),r.a.createElement(br.a.Button,{style:{width:"100%",backgroundColor:"transparent",border:"0px"},value:"ALL"},"All Appointments"),r.a.createElement("p",null,r.a.createElement("br",null)),r.a.createElement("h2",null,"Related Reports"),fn.map((function(e){return r.a.createElement(br.a.Button,{style:{width:"100%",backgroundColor:"transparent"},value:e.value},e.name)}))),r.a.createElement("br",null),r.a.createElement("br",null),i?r.a.createElement(r.a.Fragment,null,r.a.createElement(da.a,{type:"link",onClick:function(t){return e.advancedOption(!1)}},"Hide Advanced Options "),r.a.createElement(ir.a,null," ",r.a.createElement("br",null),r.a.createElement("h4",null,"Doctors"),r.a.createElement(ga.a,{style:{minWidth:"200px"},mode:"multiple",placeholder:"Select Doctors",onChange:function(t){return e.handleChangeOption("doctors",t)}},l.map((function(e){return r.a.createElement(ga.a.Option,{value:e.id},e.user.first_name)}))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h4",null,"Appointment Categories"),r.a.createElement(ga.a,{style:{minWidth:"200px"},mode:"multiple",placeholder:"Select Category",onChange:function(t){return e.handleChangeOption("categories",t)}},o.map((function(e){return r.a.createElement(ga.a.Option,{value:e.id},e.name)}))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(pr.a,{onChange:function(t){return e.onChangeCheckbox(t)}}," Exclude Cancelled"))):r.a.createElement(da.a,{type:"link",onClick:function(t){return e.advancedOption(!0)}},"Show Advanced Options ")))))}}]),t}(r.a.Component),qd=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).loadTreatmentEachDoctor=function(){var e=Object(f.a)(a);e.setState({loading:!0});var t={type:e.props.type,start:a.state.startDate.format("YYYY-MM-DD"),end:a.state.endDate.format("YYYY-MM-DD"),is_complete:!!a.props.is_complete};a.props.doctors&&(t.doctors=a.props.doctors.toString()),Ut(Kt(tt,[e.props.active_practiceId]),(function(t){e.setState({treatmentEachDoctor:t,loading:!1})}),(function(){e.setState({loading:!1})}),t)},a.onPieEnter=function(e,t){a.setState({activeIndex:t})},a.state={treatmentEachDoctor:[],startDate:a.props.startDate,endDate:a.props.endDate,loading:!1,activeIndex:0},a.loadTreatmentEachDoctor=a.loadTreatmentEachDoctor.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadTreatmentEachDoctor()}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.startDate==e.startDate&&this.props.endDate==e.endDate&&this.props.doctors==e.doctors&&this.props.is_complete==e.is_complete||this.setState({startDate:e.startDate,endDate:e.endDate},(function(){t.loadTreatmentEachDoctor()}))}},{key:"render",value:function(){var e=1,t=[{title:"S. No",key:"sno",dataIndex:"sno",render:function(t,a){return r.a.createElement("span",null," ",e++)},export:function(e,t,a){return a+1},width:50},{title:"Doctor",key:"doctor",dataIndex:"doctor"},{title:"Total Treatments",key:"count",dataIndex:"count"}],a=["#0088FE","#00C49F","#FFBB28","#FF8042"],n=this.state.treatmentEachDoctor.reduce((function(e,t){return e+t.count}),0);return r.a.createElement("div",null,r.a.createElement("h2",null,"Treatments For Each Patient Doctor"),r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:12,offset:6},r.a.createElement(pa.a,{size:"large",spinning:this.state.loading},this.state.treatmentEachDoctor.length>0?r.a.createElement(Hs.j,{width:800,height:400},r.a.createElement(Hs.i,{activeIndex:this.state.activeIndex,activeShape:function(e){var t=Math.PI/180,a=e.cx,n=e.cy,i=e.midAngle,l=e.innerRadius,o=e.outerRadius,s=e.startAngle,c=e.endAngle,u=e.fill,d=e.payload,p=e.percent,m=(e.value,Math.sin(-t*i)),h=Math.cos(-t*i),f=a+(o+10)*h,g=n+(o+10)*m,y=a+(o+30)*h,E=n+(o+30)*m,b=y+22*(h>=0?1:-1),v=E,_=h>=0?"start":"end";return r.a.createElement("g",null,r.a.createElement(Hs.l,{cx:a,cy:n,innerRadius:l,outerRadius:o,startAngle:s,endAngle:c,fill:u}),r.a.createElement(Hs.l,{cx:a,cy:n,startAngle:s,endAngle:c,innerRadius:o+6,outerRadius:o+10,fill:u}),r.a.createElement("path",{d:"M".concat(f,",").concat(g,"L").concat(y,",").concat(E,"L").concat(b,",").concat(v),stroke:u,fill:"none"}),r.a.createElement("circle",{cx:b,cy:v,r:2,fill:u,stroke:"none"}),r.a.createElement("text",{x:b+12*(h>=0?1:-1),y:v,textAnchor:_,fill:"#333"},d.doctor+","+d.count),r.a.createElement("text",{x:b+12*(h>=0?1:-1),y:v,dy:18,textAnchor:_,fill:"#999"},"(Rate ".concat((100*p).toFixed(2),"%)")))},data:Object(Oa.a)(this.state.treatmentEachDoctor).reverse(),cx:300,dataKey:"count",cy:200,innerRadius:60,outerRadius:80,fill:"#8884d8",onMouseEnter:this.onPieEnter},this.state.treatmentEachDoctor.map((function(e,t){return r.a.createElement(Hs.c,{fill:a[t%a.length]})})))):r.a.createElement(Xu.a,{image:Xu.a.PRESENTED_IMAGE_SIMPLE,description:"No Data to Show"})))),r.a.createElement(sr.a,null,r.a.createElement(ao.a,{title:"Total",value:n})),r.a.createElement(ti,{loading:this.state.loading,columns:t,dataSource:this.state.treatmentEachDoctor}))}}]),t}(r.a.Component),zd=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={report:[],startDate:a.props.startDate,endDate:a.props.endDate,loading:!1},a.loadDailyTreatments=a.loadDailyTreatments.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadDailyTreatments()}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.startDate==e.startDate&&this.props.endDate==e.endDate&&this.props.doctors==e.doctors&&this.props.is_complete==e.is_complete||this.setState({startDate:e.startDate,endDate:e.endDate},(function(){t.loadDailyTreatments()}))}},{key:"loadDailyTreatments",value:function(){var e=this;e.setState({loading:!0});var t={type:e.props.type,start:this.state.startDate.format("YYYY-MM-DD"),end:this.state.endDate.format("YYYY-MM-DD"),is_complete:!!this.props.is_complete};this.props.doctors&&(t.doctors=this.props.doctors.toString()),Ut(Kt(tt,[e.props.active_practiceId]),(function(t){e.setState({report:t.data,total:t.total,loading:!1})}),(function(){e.setState({loading:!1})}),t)}},{key:"render",value:function(){var e=1,t=[{title:"S. No",key:"sno",dataIndex:"abcd",render:function(t,a){return r.a.createElement("span",null," ",e++)},export:function(e,t,a){return a+1},width:50},{title:"Day",key:"date",dataIndex:"date",render:function(e,t){return r.a.createElement("span",null,Or()(t.date).format("ll"))},export:function(e,t){return Or()(t.date).format("ll")}},{title:"Total Treatments",key:"count",dataIndex:"count"}];return r.a.createElement("div",null,r.a.createElement("h2",null,"Daily Treatments Count"),r.a.createElement(pa.a,{size:"large",spinning:this.state.loading},this.state.report.length>0?r.a.createElement(Hs.h,{width:1e3,height:300,data:Object(Oa.a)(this.state.report).reverse(),margin:{top:5,right:30,left:20,bottom:55}},r.a.createElement(Hs.n,{dataKey:"date",tickFormatter:function(e){return Or()(e).format("DD MMM")},label:{value:"Data Range",offset:0,margin:{top:10},position:"insideBottom"}}),r.a.createElement(Hs.o,{label:{value:"Total Treatments",angle:-90,position:"insideLeft"}}),r.a.createElement(Hs.b,{strokeDasharray:"3 3"}),r.a.createElement(Hs.m,null),r.a.createElement(Hs.g,{type:"monotone",dataKey:"count",stroke:"#8884d8",strokeWidth:4})):r.a.createElement(Xu.a,{image:Xu.a.PRESENTED_IMAGE_SIMPLE,description:"No Data to Show"})),r.a.createElement(sr.a,null,r.a.createElement(ao.a,{title:"Total Patients",value:this.state.total})),r.a.createElement(ti,{loading:this.state.loading,columns:t,dataSource:this.state.report}))}}]),t}(r.a.Component),Gd=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).loadTreatmentsReport=function(){var e=Object(f.a)(a);e.setState({loading:!0});var t={type:e.props.type,start:a.state.startDate.format("YYYY-MM-DD"),end:a.state.endDate.format("YYYY-MM-DD"),is_complete:!!a.props.is_complete};a.props.doctors&&(t.doctors=a.props.doctors.toString()),Ut(Kt(tt,[e.props.active_practiceId]),(function(t){e.setState({treatmentPerformed:t,loading:!1})}),(function(){e.setState({loading:!1})}),t)},a.state={startDate:a.props.startDate,endDate:a.props.endDate,loading:!1,treatmentPerformed:[]},a.loadTreatmentsReport=a.loadTreatmentsReport.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadTreatmentsReport()}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.startDate==e.startDate&&this.props.endDate==e.endDate&&this.props.doctors==e.doctors&&this.props.is_complete==e.is_complete||this.setState({startDate:e.startDate,endDate:e.endDate},(function(){t.loadTreatmentsReport()}))}},{key:"render",value:function(){var e=1,t=[{title:"S. No",key:"sno",render:function(t,a){return r.a.createElement("span",null," ",e++)},export:function(e,t,a){return a+1},width:50},{title:"Performed On",key:"date",render:function(e,t){return r.a.createElement("span",null,Or()(t.schedule_at).format("DD MMM YYYY"))},export:function(e,t){return Or()(t.schedule_at).format("DD MMM YYYY")}},{title:"Name",dataIndex:"procedure_name",key:"procedure_name"},{title:"Performed by",key:"doctor",dataIndex:"doctor"},{title:"Total Treatments",key:"quantity",dataIndex:"quantity"}],a=this.state.treatmentPerformed.reduce((function(e,t){return e+t.quantity}),0);return r.a.createElement("div",null,r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:12,offset:6,style:{textAlign:"center"}},r.a.createElement(ao.a,{title:"Total Treatments",value:a}),r.a.createElement("br",null))),r.a.createElement(ti,{loading:this.state.loading,columns:t,dataSource:this.state.treatmentPerformed}))}}]),t}(r.a.Component),Ud=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).loadTreatmentMonthly=function(){var e=Object(f.a)(a);e.setState({loading:!0});var t={type:e.props.type,start:a.state.startDate.format("YYYY-MM-DD"),end:a.state.endDate.format("YYYY-MM-DD"),is_complete:!!a.props.is_complete};a.props.doctors&&(t.doctors=a.props.doctors.toString()),Ut(Kt(tt,[e.props.active_practiceId]),(function(t){e.setState({treatmentMonthly:t.data,total:t.total,loading:!1})}),(function(){e.setState({loading:!1})}),t)},a.state={treatmentMonthly:[],startDate:a.props.startDate,endDate:a.props.endDate,loading:!1},a.loadTreatmentMonthly=a.loadTreatmentMonthly.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadTreatmentMonthly()}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.startDate==e.startDate&&this.props.endDate==e.endDate&&this.props.doctors==e.doctors&&this.props.is_complete==e.is_complete||this.setState({startDate:e.startDate,endDate:e.endDate},(function(){t.loadTreatmentMonthly()}))}},{key:"render",value:function(){var e=1,t=[{title:"S. No",key:"sno",dataIndex:"date",render:function(t,a){return r.a.createElement("span",null," ",e++)},export:function(e,t,a){return a+1},width:50},{title:"Month",key:"date",dataIndex:"date",render:function(e,t){return r.a.createElement("span",null,Or()(t.date).format("MMMM YYYY"))},export:function(e,t){Or()(t.date).format("ll")}},{title:"Total Treatments",key:"count",dataIndex:"count"}];return r.a.createElement("div",null,r.a.createElement("h2",null,"Monthly Treatments Count"),r.a.createElement(pa.a,{size:"large",spinning:this.state.loading},this.state.treatmentMonthly.length>0?r.a.createElement(Hs.d,{width:1e3,height:400,data:Object(Oa.a)(this.state.treatmentMonthly).reverse(),margin:{top:20,right:20,bottom:20,left:20}},r.a.createElement(Hs.n,{dataKey:"date",tickFormatter:function(e){return Or()(e).format("MMM YY")}}),r.a.createElement(Hs.o,null),r.a.createElement(Hs.m,null),r.a.createElement(Hs.a,{dataKey:"count",barSize:35,fill:"#0059b3",stroke:"#0059b3",label:function(e){e.payload;var t=e.x,a=e.y,n=e.width,i=(e.height,e.value);return r.a.createElement("text",{x:t+n/2,y:a,fill:"#666",textAnchor:"middle",dy:-6},i)}})):r.a.createElement(Xu.a,{image:Xu.a.PRESENTED_IMAGE_SIMPLE,description:"No Data to Show"})),r.a.createElement(sr.a,null,r.a.createElement(ao.a,{title:"Total",value:this.state.total})),r.a.createElement(ti,{loading:this.state.loading,columns:t,dataSource:this.state.treatmentMonthly}))}}]),t}(r.a.Component),Wd=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).loadTreatmentWithCategory=function(){var e=Object(f.a)(a);a.setState({loading:!0});var t={type:e.props.type,start:a.state.startDate.format("YYYY-MM-DD"),end:a.state.endDate.format("YYYY-MM-DD"),is_complete:!!a.props.is_complete};a.props.doctors&&(t.doctors=a.props.doctors.toString()),Ut(Kt(tt,[e.props.active_practiceId]),(function(t){e.setState({treatmentCategory:t,loading:!1})}),(function(){e.setState({loading:!1})}),t)},a.onPieEnter=function(e,t){a.setState({activeIndex:t})},a.state={startDate:a.props.startDate,endDate:a.props.endDate,loading:!1,treatmentCategory:[],activeIndex:0},a.loadTreatmentWithCategory=a.loadTreatmentWithCategory.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadTreatmentWithCategory()}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.startDate==e.startDate&&this.props.endDate==e.endDate&&this.props.doctors==e.doctors&&this.props.is_complete==e.is_complete||this.setState({startDate:e.startDate,endDate:e.endDate},(function(){t.loadTreatmentWithCategory()}))}},{key:"render",value:function(){var e=1,t=[{title:"S. No",key:"sno",dataIndex:"sno",render:function(t,a){return r.a.createElement("span",null," ",e++)},export:function(e,t,a){return a+1},width:50},{title:"Treatment Category",key:"procedure_name",dataIndex:"procedure_name"},{title:"Total Treatments",key:"count",dataIndex:"count"}],a=["#0088FE","#00C49F","#FFBB28","#FF8042"];return r.a.createElement("div",null,r.a.createElement("h2",null,"Treatments By Category"),r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:12,offset:6},r.a.createElement(pa.a,{size:"large",spinning:this.state.loading},this.state.treatmentCategory.length>0?r.a.createElement(Hs.j,{width:800,height:400},r.a.createElement(Hs.i,{activeIndex:this.state.activeIndex,activeShape:function(e){var t=Math.PI/180,a=e.cx,n=e.cy,i=e.midAngle,l=e.innerRadius,o=e.outerRadius,s=e.startAngle,c=e.endAngle,u=e.fill,d=e.payload,p=e.percent,m=(e.value,Math.sin(-t*i)),h=Math.cos(-t*i),f=a+(o+10)*h,g=n+(o+10)*m,y=a+(o+30)*h,E=n+(o+30)*m,b=y+22*(h>=0?1:-1),v=E,_=h>=0?"start":"end";return r.a.createElement("g",null,r.a.createElement(Hs.l,{cx:a,cy:n,innerRadius:l,outerRadius:o,startAngle:s,endAngle:c,fill:u}),r.a.createElement(Hs.l,{cx:a,cy:n,startAngle:s,endAngle:c,innerRadius:o+6,outerRadius:o+10,fill:u}),r.a.createElement("path",{d:"M".concat(f,",").concat(g,"L").concat(y,",").concat(E,"L").concat(b,",").concat(v),stroke:u,fill:"none"}),r.a.createElement("circle",{cx:b,cy:v,r:2,fill:u,stroke:"none"}),r.a.createElement("text",{x:b+12*(h>=0?1:-1),y:v,textAnchor:_,fill:"#333"},d.procedure_name+","+d.count),r.a.createElement("text",{x:b+12*(h>=0?1:-1),y:v,dy:18,textAnchor:_,fill:"#999"},"(Rate ".concat((100*p).toFixed(2),"%)")))},data:Object(Oa.a)(this.state.treatmentCategory).reverse(),cx:300,dataKey:"count",cy:200,innerRadius:60,outerRadius:80,fill:"#8884d8",onMouseEnter:this.onPieEnter},this.state.treatmentCategory.map((function(e,t){return r.a.createElement(Hs.c,{fill:a[t%a.length]})})))):r.a.createElement(Xu.a,{image:Xu.a.PRESENTED_IMAGE_SIMPLE,description:"No Data to Show"})))),r.a.createElement(ti,{loading:this.state.loading,columns:t,dataSource:this.state.treatmentCategory}))}}]),t}(r.a.Component),Kd=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).onChangeHandle=function(e,t){Object(f.a)(a);a.setState(Object(u.a)({},e,t.target.value))},a.changeSidePanelSize=function(e){a.setState({sidePanelColSpan:e?0:4})},a.handleChangeOption=function(e,t){Object(f.a)(a);a.setState(Object(u.a)({},e,t))},a.onChangeCheckbox=function(e){a.setState({is_complete:!a.state.is_complete})},a.state={startDate:a.props.startDate,endDate:a.props.endDate,type:"ALL",loading:!0,sidePanelColSpan:4,advancedOptionShow:!0,practiceDoctors:[]},mi(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"advancedOption",value:function(e){this.setState({advancedOptionShow:e})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h2",null,"EMR Report ",r.a.createElement(da.a,{type:"primary",shape:"round",icon:this.state.sidePanelColSpan?"double-right":"double-left",style:{float:"right"},onClick:function(){return e.changeSidePanelSize(e.state.sidePanelColSpan)}},"Panel")),r.a.createElement(cr.a,null,r.a.createElement(rr.a,{gutter:16},r.a.createElement(ir.a,{span:24-this.state.sidePanelColSpan},"ALL"==this.state.type?r.a.createElement(Gd,Object.assign({},this.state,this.props)):null,"DAILY"==this.state.type?r.a.createElement(zd,Object.assign({},this.state,this.props)):null,"DOCTOR"==this.state.type?r.a.createElement(qd,Object.assign({},this.state,this.props)):null,"MONTHLY"==this.state.type?r.a.createElement(Ud,Object.assign({},this.state,this.props)):null,"CATEGORY"==this.state.type?r.a.createElement(Wd,Object.assign({},this.state,this.props)):null),r.a.createElement(ir.a,{span:this.state.sidePanelColSpan},r.a.createElement(br.a.Group,{buttonStyle:"solid",defaultValue:"ALL",onChange:function(t){return e.onChangeHandle("type",t)}},r.a.createElement("h2",null,"Treatments"),r.a.createElement(br.a.Button,{style:{width:"100%",backgroundColor:"transparent",border:"0px"},value:"ALL"},"All Treatments Performed"),r.a.createElement("p",null,r.a.createElement("br",null)),r.a.createElement("h2",null,"Related Reports"),gn.map((function(e){return r.a.createElement(br.a.Button,{style:{width:"100%",backgroundColor:"transparent",border:"0px"},value:e.value},e.name)}))),r.a.createElement("br",null),r.a.createElement("br",null),this.state.advancedOptionShow?r.a.createElement(r.a.Fragment,null,r.a.createElement(da.a,{type:"link",onClick:function(t){return e.advancedOption(!1)}},"Hide Advanced Options "),r.a.createElement(ir.a,null," ",r.a.createElement("br",null),r.a.createElement("h4",null,"Doctors"),r.a.createElement(ga.a,{style:{minWidth:"200px"},mode:"multiple",placeholder:"Select Doctors",onChange:function(t){return e.handleChangeOption("doctors",t)}},this.state.practiceDoctors.map((function(e){return r.a.createElement(ga.a.Option,{value:e.id},e.user.first_name)}))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(pr.a,{onChange:function(t){return e.onChangeCheckbox(t)}}," Only Completed"))):r.a.createElement(da.a,{type:"link",onClick:function(t){return e.advancedOption(!0)}},"Show Advanced Options ")))))}}]),t}(r.a.Component),Qd=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={report:[],startDate:a.props.startDate,endDate:a.props.endDate,loading:!1},a.ExpenseReport=a.ExpenseReport.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.ExpenseReport()}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.startDate==e.startDate&&this.props.endDate==e.endDate&&this.props.expense_type==e.expense_type&&this.props.payment_mode==e.payment_mode||this.setState({startDate:e.startDate,endDate:e.endDate},(function(){t.ExpenseReport()}))}},{key:"ExpenseReport",value:function(){var e=this;this.setState({loading:!0});var t={practice:e.props.active_practiceId,start:this.state.startDate.format("YYYY-MM-DD"),end:this.state.endDate.format("YYYY-MM-DD")};this.props.payment_mode&&(t.payment_mode=this.props.payment_mode.toString()),this.props.expense_type&&(t.expense_type=this.props.expense_type.toString()),Ut("expenses",(function(t){e.setState({report:t,loading:!1})}),(function(){e.setState({loading:!1})}),t)}},{key:"render",value:function(){var e=1,t=[{title:"S. No",key:"sno",dataIndex:"sno",render:function(t,a){return r.a.createElement("span",null," ",e++)},export:function(e,t,a){return a+1},width:50},{title:"Date",key:"date",dataIndex:"date",render:function(e,t){return r.a.createElement("span",null,Or()(t.expense_date).format("DD MMM YYYY"))},export:function(e,t){return Or()(t.expense_date).format("ll")}},{title:"\tExpense Type",dataIndex:"expense_type.name",key:"name",export:function(e,t){return t.expense_type.name}},{title:"Expense Amount (INR)",dataIndex:"amount",key:"amount"},{title:"Mode Of Payment",dataIndex:"payment_mode.mode",key:"payment_mode",export:function(e,t){return t.payment_mode.mode}},{title:"Vendor",dataIndex:"vendor.name",key:"vendor.name",export:function(e,t){return t.vendor.name}},{title:"Notes",dataIndex:"remark",key:"remark"}],a=this.state.report.reduce((function(e,t){return e+t.amount}),0);return r.a.createElement("div",null,r.a.createElement("h2",null,"Expenses Report"),r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:12,offset:6,style:{textAlign:"center"}},r.a.createElement(ao.a,{title:"Total Expense (INR)",value:a}),r.a.createElement("br",null))),r.a.createElement(ti,{loading:this.state.loading,columns:t,dataSource:this.state.report}))}}]),t}(r.a.Component),Zd=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={report:[],startDate:a.props.startDate,endDate:a.props.endDate,loading:!1},a.loadDailyExpense=a.loadDailyExpense.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadDailyExpense()}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.startDate==e.startDate&&this.props.endDate==e.endDate&&this.props.expense_type==e.expense_type&&this.props.payment_mode==e.payment_mode||this.setState({startDate:e.startDate,endDate:e.endDate},(function(){t.loadDailyExpense()}))}},{key:"loadDailyExpense",value:function(){var e=this;e.setState({loading:!0});var t={type:e.props.type,practice:e.props.active_practiceId,start:this.state.startDate.format("YYYY-MM-DD"),end:this.state.endDate.format("YYYY-MM-DD")};this.props.payment_mode&&(t.payment_mode=this.props.payment_mode.toString()),this.props.expense_type&&(t.expense_type=this.props.expense_type.toString()),Ut("expenses/report",(function(t){e.setState({report:t,loading:!1})}),(function(){e.setState({loading:!1})}),t)}},{key:"render",value:function(){var e=1,t=[{title:"S. No",key:"sno",dataIndex:"sno",render:function(t,a){return r.a.createElement("span",null," ",e++)},export:function(e,t,a){return a+1},width:50},{title:"Day",key:"date",dataIndex:"date",render:function(e,t){return r.a.createElement("span",null,Or()(t.date).format("DD MMM"))},export:function(e,t){return Or()(t.date).format("DD MMM")}},{title:"Total Expenses (INR)",key:"total",dataIndex:"total"}],a=this.state.report.reduce((function(e,t){return e+t.total}),0);return r.a.createElement("div",null,r.a.createElement("h2",null,"Daily Expense"),r.a.createElement(pa.a,{size:"large",spinning:this.state.loading},this.state.report.length>0?r.a.createElement(Hs.d,{width:1e3,height:400,data:Object(Oa.a)(this.state.report).reverse(),margin:{top:20,right:20,bottom:20,left:20}},r.a.createElement(Hs.n,{dataKey:"date",tickFormatter:function(e){return Or()(e).format("DD MMM")},label:{value:"Data Range",offset:0,margin:{top:10},position:"insideBottom"}}),r.a.createElement(Hs.o,{label:{value:"Total Expenses(INR)",angle:-90,position:"insideLeft"}}),r.a.createElement(Hs.m,null),r.a.createElement(Hs.a,{dataKey:"total",barSize:35,fill:"#0059b3",stroke:"#0059b3",label:function(e){e.payload;var t=e.x,a=e.y,n=e.width,i=(e.height,e.value);return r.a.createElement("text",{x:t+n/2,y:a,fill:"#666",textAnchor:"middle",dy:-6},i)}})):r.a.createElement(Xu.a,{image:Xu.a.PRESENTED_IMAGE_SIMPLE,description:"No Data to Show"})),r.a.createElement(sr.a,null,r.a.createElement(ao.a,{title:"Total",value:a})),r.a.createElement(ti,{loading:this.state.loading,columns:t,dataSource:this.state.report}))}}]),t}(r.a.Component),Xd=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={report:[],startDate:a.props.startDate,endDate:a.props.endDate,loading:!1},a.loadMonthlyExpense=a.loadMonthlyExpense.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadMonthlyExpense()}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.startDate==e.startDate&&this.props.endDate==e.endDate&&this.props.expense_type==e.expense_type&&this.props.payment_mode==e.payment_mode||this.setState({startDate:e.startDate,endDate:e.endDate},(function(){t.loadMonthlyExpense()}))}},{key:"loadMonthlyExpense",value:function(){var e=this;e.setState({loading:!0});var t={type:e.props.type,practice:e.props.active_practiceId,start:this.state.startDate.format("YYYY-MM-DD"),end:this.state.endDate.format("YYYY-MM-DD")};this.props.payment_mode&&(t.payment_mode=this.props.payment_mode.toString()),this.props.expense_type&&(t.expense_type=this.props.expense_type.toString()),Ut("expenses/report",(function(t){e.setState({report:t,loading:!1})}),(function(){e.setState({loading:!1})}),t)}},{key:"render",value:function(){var e=1,t=[{title:"S. No",key:"sno",dataIndex:"sno",render:function(t,a){return r.a.createElement("span",null," ",e++)},export:function(e,t,a){return a+1},width:50},{title:"Month",key:"date",dataIndex:"date",render:function(e,t){return r.a.createElement("span",null,Or()(t.date).format("MMMM YYYY"))},export:function(e,t){return Or()(t.date).format("MMM YYYY")}},{title:"Total Expenses (INR)",key:"total",dataIndex:"total"}],a=this.state.report.reduce((function(e,t){return e+t.total}),0);return r.a.createElement("div",null,r.a.createElement("h2",null,"Monthly Expense"),r.a.createElement(pa.a,{size:"large",spinning:this.state.loading},this.state.report.length>0?r.a.createElement(Hs.d,{width:1e3,height:400,data:Object(Oa.a)(this.state.report).reverse(),margin:{top:20,right:20,bottom:20,left:20}},r.a.createElement(Hs.n,{dataKey:"date",tickFormatter:function(e){return Or()(e).format("MMM YY")},label:{value:"Data Range",offset:0,margin:{top:10},position:"insideBottom"}}),r.a.createElement(Hs.o,{label:{value:"Total Expenses(INR)",angle:-90,position:"insideLeft"}}),r.a.createElement(Hs.m,null),r.a.createElement(Hs.a,{dataKey:"total",barSize:35,fill:"#0059b3",stroke:"#0059b3",label:function(e){e.payload;var t=e.x,a=e.y,n=e.width,i=(e.height,e.value);return r.a.createElement("text",{x:t+n/2,y:a,fill:"#666",textAnchor:"middle",dy:-6},i)}})):r.a.createElement(Xu.a,{image:Xu.a.PRESENTED_IMAGE_SIMPLE,description:"No Data to Show"})),r.a.createElement(sr.a,null,r.a.createElement(ao.a,{title:"Total",value:a})),r.a.createElement(ti,{loading:this.state.loading,columns:t,dataSource:this.state.report}))}}]),t}(r.a.Component),Jd=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={report:[],startDate:a.props.startDate,endDate:a.props.endDate,loading:!1},a.loadExpenseEachType=a.loadExpenseEachType.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadExpenseEachType()}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.startDate==e.startDate&&this.props.endDate==e.endDate&&this.props.expense_type==e.expense_type&&this.props.payment_mode==e.payment_mode||this.setState({startDate:e.startDate,endDate:e.endDate},(function(){t.loadExpenseEachType()}))}},{key:"loadExpenseEachType",value:function(){var e=this;e.setState({loading:!0});var t={type:e.props.type,practice:e.props.active_practiceId,start:this.state.startDate.format("YYYY-MM-DD"),end:this.state.endDate.format("YYYY-MM-DD")};this.props.payment_mode&&(t.payment_mode=this.props.payment_mode.toString()),this.props.expense_type&&(t.expense_type=this.props.expense_type.toString()),Ut("expenses/report",(function(t){e.setState({report:t,loading:!1})}),(function(){e.setState({loading:!1})}),t)}},{key:"render",value:function(){var e=1,t=[{title:"S. No",key:"sno",dataIndex:"sno",render:function(t,a){return r.a.createElement("span",null," ",e++)},export:function(e,t,a){return a+1},width:50},{title:"Expense Name",key:"expense",dataIndex:"expense"},{title:"Total Expenses (INR)",key:"total",dataIndex:"total"}],a=["#89b9d8","#8fc6eb","#81dac9","#f39e94","#bb98c9","#73c1c1"],n=this.state.report.reduce((function(e,t){return e+t.total}),0);return r.a.createElement("div",null,r.a.createElement("h2",null,"Expenses By Type"),r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:12,offset:6},r.a.createElement(pa.a,{size:"large",spinning:this.state.loading},this.state.report.length>0&&n?r.a.createElement(Hs.j,{width:800,height:400},r.a.createElement(Hs.i,{label:function(e){var t=Math.PI/180,a=e.cx,n=e.cy,i=e.midAngle,l=e.innerRadius,o=e.outerRadius,s=e.startAngle,c=e.endAngle,u=e.fill,d=e.payload,p=e.percent,m=(e.value,Math.sin(-t*i)),h=Math.cos(-t*i),f=a+(o+10)*h,g=n+(o+10)*m,y=a+(o+30)*h,E=n+(o+30)*m,b=y+22*(h>=0?1:-1),v=E,_=h>=0?"start":"end";return r.a.createElement("g",null,r.a.createElement(Hs.l,{cx:a,cy:n,innerRadius:l,outerRadius:o,startAngle:s,endAngle:c,fill:u}),r.a.createElement("path",{d:"M".concat(f,",").concat(g,"L").concat(y,",").concat(E,"L").concat(b,",").concat(v),stroke:u,fill:"none"}),r.a.createElement("circle",{cx:b,cy:v,r:2,fill:u,stroke:"none"}),r.a.createElement("text",{x:b+12*(h>=0?1:-1),y:v,textAnchor:_,fill:"#333"},d.expense+","+d.total),r.a.createElement("text",{x:b+12*(h>=0?1:-1),y:v,dy:18,textAnchor:_,fill:"#999"},"(Rate ".concat((100*p).toFixed(2),"%)")))},data:this.state.report,cx:300,dataKey:"total",cy:200,innerRadius:60,outerRadius:80,fill:"#8884d8"},this.state.report.map((function(e,t){return r.a.createElement(Hs.c,{fill:a[t%a.length]})})))):r.a.createElement(Xu.a,{image:Xu.a.PRESENTED_IMAGE_SIMPLE,description:"No Data to Show"})))),r.a.createElement(sr.a,null,r.a.createElement(ao.a,{title:"Total",value:n})),r.a.createElement(ti,{loading:this.state.loading,columns:t,dataSource:this.state.report}))}}]),t}(r.a.Component),$d=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).onChangeHandle=function(e,t){Object(f.a)(a);a.setState(Object(u.a)({},e,t.target.value))},a.changeSidePanelSize=function(e){a.setState({sidePanelColSpan:e?0:4})},a.handleChangeOption=function(e,t){Object(f.a)(a);a.setState(Object(u.a)({},e,t))},a.state={advancedOptionShow:!0,expenseTypeOption:[],paymentModeOption:[],sidePanelColSpan:4,type:"ALL"},a.loadExpenseType=a.loadExpenseType.bind(Object(f.a)(a)),a.loadPaymentMode=a.loadPaymentMode.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadExpenseType(),this.loadPaymentMode()}},{key:"loadExpenseType",value:function(){var e=this;Ut(Kt(me,[this.props.active_practiceId]),(function(t){e.setState({expenseTypeOption:t})}),(function(){}))}},{key:"loadPaymentMode",value:function(){var e=this;Ut(Kt(te,[this.props.active_practiceId]),(function(t){e.setState({paymentModeOption:t})}),(function(){}))}},{key:"advancedOption",value:function(e){this.setState({advancedOptionShow:e})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h2",null,"Expenses Report ",r.a.createElement(da.a,{type:"primary",shape:"round",icon:this.state.sidePanelColSpan?"double-right":"double-left",style:{float:"right"},onClick:function(){return e.changeSidePanelSize(e.state.sidePanelColSpan)}},"Panel")),r.a.createElement(cr.a,null,r.a.createElement(rr.a,{gutter:16},r.a.createElement(ir.a,{span:24-this.state.sidePanelColSpan},"ALL"==this.state.type?r.a.createElement(Qd,Object.assign({},this.props,this.state)):null,"DAILY"==this.state.type?r.a.createElement(Zd,Object.assign({},this.props,this.state)):null,"MONTHLY"==this.state.type?r.a.createElement(Xd,Object.assign({},this.props,this.state)):null,"EXPENSE_TYPE"==this.state.type?r.a.createElement(Jd,Object.assign({},this.props,this.state)):null),r.a.createElement(ir.a,{span:this.state.sidePanelColSpan},r.a.createElement(br.a.Group,{buttonStyle:"solid",defaultValue:"ALL",onChange:function(t){return e.onChangeHandle("type",t)}},r.a.createElement("h2",null,"Expenses"),r.a.createElement(br.a.Button,{style:{width:"100%",backgroundColor:"transparent",border:"0px"},value:"ALL"},"All Expenses"),r.a.createElement("p",null,r.a.createElement("br",null)),r.a.createElement("h2",null,"Related Reports"),bn.map((function(e){return r.a.createElement(br.a.Button,{style:{width:"100%",backgroundColor:"transparent",border:"0px"},value:e.value},e.name)}))),r.a.createElement("br",null),r.a.createElement("br",null),this.state.advancedOptionShow?r.a.createElement(r.a.Fragment,null,r.a.createElement(da.a,{type:"link",onClick:function(t){return e.advancedOption(!1)}},"Hide Advanced Options "),r.a.createElement(ir.a,null," ",r.a.createElement("br",null),r.a.createElement("h4",null,"Expense Type"),r.a.createElement(ga.a,{style:{minWidth:"200px"},mode:"multiple",placeholder:"Select Expense Type",onChange:function(t){return e.handleChangeOption("expense_type",t)}},this.state.expenseTypeOption.map((function(e){return r.a.createElement(ga.a.Option,{value:e.id},e.name)}))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h4",null,"Payment Modes"),r.a.createElement(ga.a,{style:{minWidth:"200px"},mode:"multiple",placeholder:"Select Payment Modes",onChange:function(t){return e.handleChangeOption("payment_mode",t)}},this.state.paymentModeOption.map((function(e){return r.a.createElement(ga.a.Option,{value:e.id},e.mode)}))))):r.a.createElement(da.a,{type:"link",onClick:function(t){return e.advancedOption(!0)}},"Show Advanced Options ")))))}}]),t}(r.a.Component);function ep(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function tp(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ep(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ep(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ap=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).loadInvoices=function(){var e=Object(f.a)(a),t={practice:e.props.active_practiceId,start:a.state.startDate.format("YYYY-MM-DD"),end:a.state.endDate.format("YYYY-MM-DD"),type:e.props.type,is_cancelled:!!a.props.is_cancelled};e.props.income_type&&(t.income_type=e.props.income_type),e.props.discount&&(t.discount=e.props.discount),a.props.patient_groups&&(t.groups=a.props.patient_groups.toString()),a.props.products&&(t.products=a.props.products.toString()),a.props.doctors&&(t.doctors=a.props.doctors.toString()),a.props.taxes&&(t.taxes=a.props.taxes.toString()),a.props.treatments&&(t.treatments=a.props.treatments.toString()),Ut(it,(function(t){e.setState({invoiceReports:t,loading:!1})}),(function(){e.setState({loading:!1})}),t)},a.state={inventoryReports:[],startDate:a.props.startDate,endDate:a.props.endDate,loading:!1,invoiceReports:[]},a.loadInvoices=a.loadInvoices.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadInvoices()}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.startDate==e.startDate&&this.props.endDate==e.endDate&&this.props.products==e.products&&this.props.income_type==e.income_type&&this.props.is_cancelled==e.is_cancelled&&this.props.discount==e.discount&&this.props.treatments==e.treatments&&this.props.doctors==e.doctors&&this.props.taxes==e.taxes&&this.props.patient_groups==e.patient_groups||this.setState({startDate:e.startDate,endDate:e.endDate},(function(){t.loadInvoices()}))}},{key:"render",value:function(){for(var e=this.state.invoiceReports,t=[],a=0,n=0,i=0,l=0,o=0,s=0;s<e.length;s++)n+=e[s].cost,i+=e[s].taxes,a+=e[s].total,l+=e[s].total-e[s].cost,o+=e[s].total-e[s].cost-e[s].taxes;t.push({sale_amount:a,tax_amount:i,cost_amount:n,profit_before_tax:l,profit_after_tax:o});var c=[],u=[];e.map((function(e){if(e.reservation){var t=e.reservation_data.medicines.map((function(e){return tp({},e,{unit:1,total:e.final_price,unit_cost:e.price,discount:0})})),a={NORMAL:{total:"final_normal_price",tax:"normal_tax_value",unit_cost:"normal_price"},TATKAL:{total:"final_tatkal_price",tax:"tatkal_tax_value",unit_cost:"tatkal_price"}};c=[].concat(Object(Oa.a)(c),[tp({},e.reservation_data.bed_package,{unit:1,total:e.reservation_data.bed_package?e.reservation_data.bed_package[a[e.reservation_data.seat_type].total]:null,tax_value:e.reservation_data.bed_package?e.reservation_data.bed_package[a[e.reservation_data.seat_type].tax]:null,unit_cost:e.reservation_data.bed_package?e.reservation_data.bed_package[a[e.reservation_data.seat_type].unit_cost]:null})],Object(Oa.a)(t))}u.push(tp({},e,{treatment:[].concat(Object(Oa.a)(c),Object(Oa.a)(e.procedure),Object(Oa.a)(e.inventory))}))}));var d=1,p=[{title:"Total Sales (INR)",key:"sale_amount",dataIndex:"sale_amount",render:function(e,t){return r.a.createElement("span",null,t.sale_amount.toFixed(2))},export:function(e,t){return t.sale_amount.toFixed(2)}},{title:"Total Cost (INR)",key:"cost_amount",dataIndex:"cost_amount",render:function(e,t){return r.a.createElement("span",null,t.cost_amount.toFixed(2))},export:function(e,t){return t.cost_amount.toFixed(2)}},{title:"Total Profit before Tax(INR)",key:"tax_with_out",dataIndex:"profit_before_tax",render:function(e,t){return r.a.createElement("span",null,t.profit_before_tax.toFixed(2))},export:function(e,t){return t.profit_before_tax.toFixed(2)}},{title:"Total Tax(INR)",key:"tax_amount",dataIndex:"tax_amount",render:function(e,t){return r.a.createElement("span",null,t.tax_amount.toFixed(2))},export:function(e,t){return t.tax_amount.toFixed(2)}},{title:"Total Profit after Tax(INR)",key:"tax_with",dataIndex:"profit_after_tax",render:function(e,t){return r.a.createElement("span",null,t.profit_after_tax.toFixed(2))},export:function(e,t){return t.profit_after_tax.toFixed(2)}}],m=[{title:"S. No",key:"sno",render:function(e,t){return r.a.createElement("span",null," ",d++)},width:50},{title:"Date",key:"date",render:function(e,t){return r.a.createElement("span",null,Or()(t.created_at).format("ll"))},export:function(e,t){return Or()(t.created_at).format("ll")}},{title:"Invoice Number",key:"invoice_id",dataIndex:"invoice_id"},{title:"Patient",key:"patient",dataIndex:"patient",render:function(e,t){return r.a.createElement("span",null,t.patient?t.patient.user.first_name:t.patient)},export:function(e,t){return t.patient?t.patient.user.first_name:t.patient}},{title:"Treatments & Products",key:"treatments",render:function(e,t){return r.a.createElement("span",null,t.treatment.map((function(e){return r.a.createElement(fa.a,null,e.name)})))},export:function(e,t){return t.treatment.map((function(e){return e.name+","}))}}];return"PRODUCTS"==this.props.income_type&&m.push({title:"Cost(INR)",key:"cost",dataIndex:"cost",render:function(e,t){return r.a.createElement("span",null,t.cost.toFixed(2))},export:function(e,t){return t.cost.toFixed(2)}},{title:"Discount(INR)",key:"discount",dataIndex:"discount",render:function(e,t){return r.a.createElement("span",null,t.discount.toFixed(2))},export:function(e,t){return t.discount.toFixed(2)}},{title:"tax(INR)",key:"tax",dataIndex:"taxes",render:function(e,t){return r.a.createElement("span",null,t.taxes.toFixed(2))},export:function(e,t){return t.taxes.toFixed(2)}},{title:"Invoice Amount(INR)",key:"amount",dataIndex:"total",render:function(e,t){return r.a.createElement("span",null,t.total.toFixed(2))},export:function(e,t){return t.total.toFixed(2)}},{title:"Amount Paid(INR)",key:"tax",dataIndex:"tax"}),r.a.createElement("div",null,r.a.createElement("h2",null,"All Invoices"),r.a.createElement(lr.a,{loading:this.state.loading,columns:p,pagination:!1,dataSource:t}),r.a.createElement(ti,{loading:this.state.loading,columns:m,pagination:!1,dataSource:u}))}}]),t}(r.a.Component),np=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={report:[],startDate:a.props.startDate,endDate:a.props.endDate,loading:!1},a.loadDailyIncome=a.loadDailyIncome.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadDailyIncome()}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.startDate==e.startDate&&this.props.endDate==e.endDate&&this.props.products==e.products&&this.props.income_type==e.income_type&&this.props.is_cancelled==e.is_cancelled&&this.props.discount==e.discount&&this.props.treatments==e.treatments&&this.props.doctors==e.doctors&&this.props.taxes==e.taxes&&this.props.patient_groups==e.patient_groups||this.setState({startDate:e.startDate,endDate:e.endDate},(function(){t.loadDailyIncome()}))}},{key:"loadDailyIncome",value:function(){var e=this;e.setState({loading:!0});var t={practice:e.props.active_practiceId,start:this.state.startDate.format("YYYY-MM-DD"),end:this.state.endDate.format("YYYY-MM-DD"),type:e.props.type,is_cancelled:!!this.props.is_cancelled};e.props.income_type&&(t.income_type=e.props.income_type),e.props.discount&&(t.discount=e.props.discount),this.props.patient_groups&&(t.groups=this.props.patient_groups.toString()),this.props.products&&(t.products=this.props.products.toString()),this.props.doctors&&(t.doctors=this.props.doctors.toString()),this.props.taxes&&(t.taxes=this.props.taxes.toString()),this.props.treatments&&(t.treatments=this.props.treatments.toString()),Ut(it,(function(t){e.setState({report:t,loading:!1})}),(function(){e.setState({loading:!1})}),t)}},{key:"render",value:function(){var e=1,t=[{title:"S. No",key:"sno",render:function(t,a){return r.a.createElement("span",null," ",e++)},export:function(e,t,a){return a+1},width:50},{title:"Day",key:"date",dataIndex:"date",render:function(e,t){return r.a.createElement("span",null,Or()(t.date).format("ll"))},export:function(e,t){return Or()(t.date).format("ll")}},{title:"Cost(INR)",key:"cost",dataIndex:"cost",render:function(e,t){return r.a.createElement("span",null,t.cost.toFixed(2))}},{title:"Discount(INR)",key:"discount",dataIndex:"discount",render:function(e,t){return r.a.createElement("span",null,t.discount.toFixed(2))}},{title:"Income after Discount(INR)",key:"income_after_discount",render:function(e,t){return r.a.createElement("span",null,(t.cost-t.discount).toFixed(2))}},{title:"Tax(INR)",key:"tax",dataIndex:"tax",render:function(e,t){return r.a.createElement("span",null,t.tax.toFixed(2))}},{title:"Income Amount(INR)",key:"income_amount",render:function(e,t){return r.a.createElement("span",null,(t.cost-(t.discount+t.tax)).toFixed(2))}}];return r.a.createElement("div",null,r.a.createElement("h2",null,"Daily Invoiced Income "),r.a.createElement(pa.a,{size:"large",spinning:this.state.loading},this.state.report.length>0?r.a.createElement(Hs.d,{width:1e3,height:400,data:this.state.report,margin:{top:20,right:20,bottom:20,left:20}},r.a.createElement(Hs.n,{dataKey:"date",tickFormatter:function(e){return Or()(e).format("ll")}}),r.a.createElement(Hs.o,{label:{value:"Income(INR)",angle:-90,position:"insideLeft"}}),r.a.createElement(Hs.m,null),r.a.createElement(Hs.a,{dataKey:"cost",barSize:35,fill:"#0059b3",stroke:"#0059b3",label:function(e){e.payload;var t=e.x,a=e.y,n=e.width,i=(e.height,e.value);return r.a.createElement("text",{x:t+n/2,y:a,fill:"#666",textAnchor:"middle",dy:-6},i.toFixed(2))}})):r.a.createElement(Xu.a,{image:Xu.a.PRESENTED_IMAGE_SIMPLE,description:"No Data to Show"})),r.a.createElement(ti,{loading:this.state.loading,columns:t,dataSource:this.state.report}))}}]),t}(r.a.Component),rp=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={report:[],startDate:a.props.startDate,endDate:a.props.endDate,loading:!1},a.loadDailyIncome=a.loadDailyIncome.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadDailyIncome()}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.startDate==e.startDate&&this.props.endDate==e.endDate&&this.props.products==e.products&&this.props.income_type==e.income_type&&this.props.is_cancelled==e.is_cancelled&&this.props.discount==e.discount&&this.props.treatments==e.treatments&&this.props.doctors==e.doctors&&this.props.taxes==e.taxes&&this.props.patient_groups==e.patient_groups||this.setState({startDate:e.startDate,endDate:e.endDate},(function(){t.loadDailyIncome()}))}},{key:"loadDailyIncome",value:function(){var e=this;e.setState({loading:!0});var t={practice:e.props.active_practiceId,start:this.state.startDate.format("YYYY-MM-DD"),end:this.state.endDate.format("YYYY-MM-DD"),type:e.props.type,is_cancelled:!!this.props.is_cancelled};e.props.income_type&&(t.income_type=e.props.income_type),e.props.discount&&(t.discount=e.props.discount),this.props.patient_groups&&(t.groups=this.props.patient_groups.toString()),this.props.products&&(t.products=this.props.products.toString()),this.props.doctors&&(t.doctors=this.props.doctors.toString()),this.props.taxes&&(t.taxes=this.props.taxes.toString()),this.props.treatments&&(t.treatments=this.props.treatments.toString()),Ut(it,(function(t){e.setState({report:t,loading:!1})}),(function(){e.setState({loading:!1})}),t)}},{key:"render",value:function(){var e=1,t=[{title:"S. No",key:"sno",render:function(t,a){return r.a.createElement("span",null," ",e++)},export:function(e,t,a){return a+1},width:50},{title:"Day",key:"date",dataIndex:"date",render:function(e,t){return r.a.createElement("span",null,Or()(t.date).format("MM YYYY"))},export:function(e,t){return Or()(t.date).format("MM YYYY")}},{title:"Cost(INR)",key:"cost",dataIndex:"cost",render:function(e,t){return r.a.createElement("span",null,t.cost.toFixed(2))}},{title:"Discount(INR)",key:"discount",dataIndex:"discount",render:function(e,t){return r.a.createElement("span",null,t.discount.toFixed(2))}},{title:"Income after Discount(INR)",key:"income_after_discount",render:function(e,t){return r.a.createElement("span",null,(t.cost-t.discount).toFixed(2))}},{title:"Tax(INR)",key:"tax",dataIndex:"tax",render:function(e,t){return r.a.createElement("span",null,t.tax.toFixed(2))}},{title:"Income Amount(INR)",key:"income_amount",render:function(e,t){return r.a.createElement("span",null,(t.cost-(t.discount+t.tax)).toFixed(2))}}];return r.a.createElement("div",null,r.a.createElement("h2",null,"Monthly Invoiced Income "),r.a.createElement(pa.a,{size:"large",spinning:this.state.loading},this.state.report.length>0?r.a.createElement(Hs.d,{width:1e3,height:400,data:this.state.report,margin:{top:20,right:20,bottom:20,left:20}},r.a.createElement(Hs.n,{dataKey:"date",tickFormatter:function(e){return Or()(e).format("MM YYYY")}}),r.a.createElement(Hs.o,{label:{value:"Income(INR)",angle:-90,position:"insideLeft"}}),r.a.createElement(Hs.m,null),r.a.createElement(Hs.a,{dataKey:"cost",barSize:35,fill:"#0059b3",stroke:"#0059b3",label:function(e){e.payload;var t=e.x,a=e.y,n=e.width,i=(e.height,e.value);return r.a.createElement("text",{x:t+n/2,y:a,fill:"#666",textAnchor:"middle",dy:-6},i.toFixed(2))}})):r.a.createElement(Xu.a,{image:Xu.a.PRESENTED_IMAGE_SIMPLE,description:"No Data to Show"})),r.a.createElement(ti,{loading:this.state.loading,columns:t,dataSource:this.state.report}))}}]),t}(r.a.Component),ip=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={report:[],startDate:a.props.startDate,endDate:a.props.endDate,loading:!1,activeIndex:0},a.loadTaxedIncome=a.loadTaxedIncome.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadTaxedIncome()}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.startDate==e.startDate&&this.props.endDate==e.endDate&&this.props.products==e.products&&this.props.income_type==e.income_type&&this.props.is_cancelled==e.is_cancelled&&this.props.discount==e.discount&&this.props.treatments==e.treatments&&this.props.doctors==e.doctors&&this.props.taxes==e.taxes&&this.props.patient_groups==e.patient_groups||this.setState({startDate:e.startDate,endDate:e.endDate},(function(){t.loadTaxedIncome()}))}},{key:"loadTaxedIncome",value:function(){var e=this;e.setState({loading:!0});var t={practice:e.props.active_practiceId,start:this.state.startDate.format("YYYY-MM-DD"),end:this.state.endDate.format("YYYY-MM-DD"),type:e.props.type,is_cancelled:!!this.props.is_cancelled};e.props.income_type&&(t.income_type=e.props.income_type),e.props.discount&&(t.discount=e.props.discount),this.props.patient_groups&&(t.groups=this.props.patient_groups.toString()),this.props.products&&(t.products=this.props.products.toString()),this.props.doctors&&(t.doctors=this.props.doctors.toString()),this.props.taxes&&(t.taxes=this.props.taxes.toString()),this.props.treatments&&(t.treatments=this.props.treatments.toString()),Ut(it,(function(t){e.setState({report:t,loading:!1})}),(function(){e.setState({loading:!1})}),t)}},{key:"render",value:function(){var e=1,t=[{title:"S. No",key:"sno",dataIndex:"sno",render:function(t,a){return r.a.createElement("span",null," ",e++)},export:function(e,t,a){return a+1},width:50},{title:"Tax Name",key:"name",dataIndex:"name"},{title:"Tax (INR)",key:"tax",dataIndex:"total",render:function(e,t){return r.a.createElement("span",null,t.total.toFixed(2))}}],a=["#FFBB28","#FF8042","#1DA57A"],n=this.state.report.reduce((function(e,t){return e+t.total}),0);return r.a.createElement("div",null,r.a.createElement("h2",null,"Taxed Invoiced Income"),r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:12,offset:6},r.a.createElement(pa.a,{size:"large",spinning:this.state.loading},this.state.report.length>0&&n?r.a.createElement(Hs.j,{width:800,height:400},r.a.createElement(Hs.i,{label:function(e){var t=Math.PI/180,a=e.cx,n=e.cy,i=e.midAngle,l=e.innerRadius,o=e.outerRadius,s=e.startAngle,c=e.endAngle,u=e.fill,d=e.payload,p=e.percent,m=(e.value,Math.sin(-t*i)),h=Math.cos(-t*i),f=a+(o+10)*h,g=n+(o+10)*m,y=a+(o+30)*h,E=n+(o+30)*m,b=y+22*(h>=0?1:-1),v=E,_=h>=0?"start":"end";return r.a.createElement("g",null,r.a.createElement(Hs.l,{cx:a,cy:n,innerRadius:l,outerRadius:o,startAngle:s,endAngle:c,fill:u}),r.a.createElement("path",{d:"M".concat(f,",").concat(g,"L").concat(y,",").concat(E,"L").concat(b,",").concat(v),stroke:u,fill:"none"}),r.a.createElement("circle",{cx:b,cy:v,r:2,fill:u,stroke:"none"}),r.a.createElement("text",{x:b+12*(h>=0?1:-1),y:v,textAnchor:_,fill:"#333"},d.name+","+d.total.toFixed(2)),r.a.createElement("text",{x:b+12*(h>=0?1:-1),y:v,dy:18,textAnchor:_,fill:"#999"},"(Rate ".concat((100*p).toFixed(2),"%)")))},data:this.state.report,cx:300,dataKey:"total",cy:200,innerRadius:60,outerRadius:80,fill:"#8884d8"},this.state.report.map((function(e,t){return r.a.createElement(Hs.c,{fill:a[t%a.length]})})))):r.a.createElement(Xu.a,{image:Xu.a.PRESENTED_IMAGE_SIMPLE,description:"No Data to Show"})))),r.a.createElement(sr.a,null,r.a.createElement(ao.a,{title:"Total",value:n.toFixed(2)})),r.a.createElement(ti,{loading:this.state.loading,columns:t,dataSource:this.state.report}))}}]),t}(r.a.Component),lp=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).onPieEnter=function(e,t){a.setState({activeIndex:t})},a.state={report:[],startDate:a.props.startDate,endDate:a.props.endDate,loading:!1,activeIndex:0,practiceDoctors:[]},a.loadEachDoctorIncome=a.loadEachDoctorIncome.bind(Object(f.a)(a)),mi(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadEachDoctorIncome()}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.startDate==e.startDate&&this.props.endDate==e.endDate&&this.props.products==e.products&&this.props.income_type==e.income_type&&this.props.is_cancelled==e.is_cancelled&&this.props.discount==e.discount&&this.props.treatments==e.treatments&&this.props.doctors==e.doctors&&this.props.taxes==e.taxes&&this.props.patient_groups==e.patient_groups||this.setState({startDate:e.startDate,endDate:e.endDate},(function(){t.loadEachDoctorIncome()}))}},{key:"loadEachDoctorIncome",value:function(){var e=this;e.setState({loading:!0});var t={practice:e.props.active_practiceId,start:this.state.startDate.format("YYYY-MM-DD"),end:this.state.endDate.format("YYYY-MM-DD"),type:e.props.type,is_cancelled:!!this.props.is_cancelled};e.props.income_type&&(t.income_type=e.props.income_type),e.props.discount&&(t.discount=e.props.discount),this.props.patient_groups&&(t.groups=this.props.patient_groups.toString()),this.props.products&&(t.products=this.props.products.toString()),this.props.doctors&&(t.doctors=this.props.doctors.toString()),this.props.taxes&&(t.taxes=this.props.taxes.toString()),this.props.treatments&&(t.treatments=this.props.treatments.toString()),Ut(it,(function(t){e.setState({report:t,loading:!1})}),(function(){e.setState({loading:!1})}),t)}},{key:"render",value:function(){var e=this,t=1,a=[{title:"S. No",key:"sno",dataIndex:"sno",render:function(e,a){return r.a.createElement("span",null," ",t++)},export:function(e,t,a){return a+1},width:50},{title:"Doctor",key:"doctor",dataIndex:"doctor",render:function(t,a){return r.a.createElement("span",null,"NA"==a.doctor?r.a.createElement("span",null,"No Doctor assigned"):r.a.createElement(r.a.Fragment,null,e.state.practiceDoctors.map((function(e){return e.id==a.doctor?r.a.createElement("span",null,e.user.first_name):null}))))}},{title:"Cost(INR)",key:"cost",dataIndex:"cost",render:function(e,t){return r.a.createElement("span",null,t.cost.toFixed(2))}},{title:"Discount(INR)",key:"discount",dataIndex:"discount_value",render:function(e,t){return r.a.createElement("span",null,t.discount_value.toFixed(2))}},{title:"Income After Discount",key:"income_after_discount",render:function(e,t){return r.a.createElement("span",null,(t.cost-t.discount_value).toFixed(2))}},{title:"Tax (INR)",key:"tax",render:function(e,t){return r.a.createElement("span",null,t.tax_value.toFixed(2))}},{title:"Invoiced Amount(INR)",key:"amount",render:function(e,t){return r.a.createElement("span",null,(t.cost-(t.discount_value+t.tax_value)).toFixed(2))}}],n=["#0088FE","#00C49F","#FFBB28","#FF8042"],i=this.state.report.reduce((function(e,t){return e+t.cost}),0);return r.a.createElement("div",null,r.a.createElement("h2",null,"Income For Each Patient Doctor"),r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:12,offset:6},r.a.createElement(pa.a,{size:"large",spinning:this.state.loading},this.state.report.length>0?r.a.createElement(Hs.j,{width:800,height:400},r.a.createElement(Hs.i,{activeIndex:this.state.activeIndex,activeShape:function(t){var a=Math.PI/180,n=t.cx,i=t.cy,l=t.midAngle,o=t.innerRadius,s=t.outerRadius,c=t.startAngle,u=t.endAngle,d=t.fill,p=t.payload,m=t.percent,h=(t.value,Math.sin(-a*l)),f=Math.cos(-a*l),g=n+(s+10)*f,y=i+(s+10)*h,E=n+(s+30)*f,b=i+(s+30)*h,v=E+22*(f>=0?1:-1),_=b,O=f>=0?"start":"end";return r.a.createElement("g",null,r.a.createElement(Hs.l,{cx:n,cy:i,innerRadius:o,outerRadius:s,startAngle:c,endAngle:u,fill:d}),r.a.createElement(Hs.l,{cx:n,cy:i,startAngle:c,endAngle:u,innerRadius:s+6,outerRadius:s+10,fill:d}),r.a.createElement("path",{d:"M".concat(g,",").concat(y,"L").concat(E,",").concat(b,"L").concat(v,",").concat(_),stroke:d,fill:"none"}),r.a.createElement("circle",{cx:v,cy:_,r:2,fill:d,stroke:"none"}),r.a.createElement("text",{x:v+12*(f>=0?1:-1),y:_,textAnchor:O,fill:"#333"},"NA"==p.doctor?"No Doctor assigned":r.a.createElement(r.a.Fragment,null,e.state.practiceDoctors.map((function(e){return e.id==p.doctor?r.a.createElement(r.a.Fragment,null,e.user.first_name):null})))),r.a.createElement("text",{x:v+12*(f>=0?1:-1),y:_,dy:18,textAnchor:O,fill:"#999"},"(Rate ".concat((100*m).toFixed(2),"%)")))},data:this.state.report,cx:300,dataKey:"cost",cy:200,innerRadius:60,outerRadius:80,fill:"#8884d8",onMouseEnter:this.onPieEnter},this.state.report.map((function(e,t){return r.a.createElement(Hs.c,{fill:n[t%n.length]})})))):r.a.createElement(Xu.a,{image:Xu.a.PRESENTED_IMAGE_SIMPLE,description:"No Data to Show"})))),r.a.createElement(sr.a,null,r.a.createElement(ao.a,{title:"Total",value:i.toFixed(2)})),r.a.createElement(ti,{loading:this.state.loading,columns:a,dataSource:this.state.report}))}}]),t}(r.a.Component),op=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).onPieEnter=function(e,t){a.setState({activeIndex:t})},a.state={report:[],startDate:a.props.startDate,endDate:a.props.endDate,loading:!1,activeIndex:0},a.loadEachProcedureIncome=a.loadEachProcedureIncome.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadEachProcedureIncome()}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.startDate==e.startDate&&this.props.endDate==e.endDate&&this.props.products==e.products&&this.props.income_type==e.income_type&&this.props.is_cancelled==e.is_cancelled&&this.props.discount==e.discount&&this.props.treatments==e.treatments&&this.props.doctors==e.doctors&&this.props.taxes==e.taxes&&this.props.patient_groups==e.patient_groups||this.setState({startDate:e.startDate,endDate:e.endDate},(function(){t.loadEachProcedureIncome()}))}},{key:"loadEachProcedureIncome",value:function(){var e=this;e.setState({loading:!0});var t={practice:e.props.active_practiceId,start:this.state.startDate.format("YYYY-MM-DD"),end:this.state.endDate.format("YYYY-MM-DD"),type:e.props.type,is_cancelled:!!this.props.is_cancelled};e.props.income_type&&(t.income_type=e.props.income_type),e.props.discount&&(t.discount=e.props.discount),this.props.patient_groups&&(t.groups=this.props.patient_groups.toString()),this.props.products&&(t.products=this.props.products.toString()),this.props.doctors&&(t.doctors=this.props.doctors.toString()),this.props.taxes&&(t.taxes=this.props.taxes.toString()),this.props.treatments&&(t.treatments=this.props.treatments.toString()),Ut(it,(function(t){e.setState({report:t,loading:!1})}),(function(){e.setState({loading:!1})}),t)}},{key:"render",value:function(){var e=1,t=[{title:"S. No",key:"sno",dataIndex:"sno",render:function(t,a){return r.a.createElement("span",null," ",e++)},export:function(e,t,a){return a+1},width:50},{title:"Treatment Category",key:"name",dataIndex:"name"},{title:"Cost(INR)",key:"cost",dataIndex:"cost",render:function(e,t){return r.a.createElement("span",null,t.cost.toFixed(2))}},{title:"Discount(INR)",key:"discount",dataIndex:"discount_value",render:function(e,t){return r.a.createElement("span",null,t.discount_value.toFixed(2))}},{title:"Income After Discount",key:"income_after_discount",render:function(e,t){return r.a.createElement("span",null,(t.cost-t.discount_value).toFixed(2))}},{title:"Tax (INR)",key:"tax",render:function(e,t){return r.a.createElement("span",null,t.tax_value.toFixed(2))}},{title:"Invoiced Amount(INR)",key:"amount",render:function(e,t){return r.a.createElement("span",null,(t.cost-(t.discount_value+t.tax_value)).toFixed(2))}}],a=["#0088FE","#00C49F","#FFBB28","#FF8042"],n=this.state.report.reduce((function(e,t){return e+t.cost}),0);return r.a.createElement("div",null,r.a.createElement("h2",null,"Income For Each Procedure"),r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:12,offset:6},r.a.createElement(pa.a,{size:"large",spinning:this.state.loading},this.state.report.length>0?r.a.createElement(Hs.j,{width:800,height:400},r.a.createElement(Hs.i,{activeIndex:this.state.activeIndex,activeShape:function(e){var t=Math.PI/180,a=e.cx,n=e.cy,i=e.midAngle,l=e.innerRadius,o=e.outerRadius,s=e.startAngle,c=e.endAngle,u=e.fill,d=e.payload,p=e.percent,m=(e.value,Math.sin(-t*i)),h=Math.cos(-t*i),f=a+(o+10)*h,g=n+(o+10)*m,y=a+(o+30)*h,E=n+(o+30)*m,b=y+22*(h>=0?1:-1),v=E,_=h>=0?"start":"end";return r.a.createElement("g",null,r.a.createElement(Hs.l,{cx:a,cy:n,innerRadius:l,outerRadius:o,startAngle:s,endAngle:c,fill:u}),r.a.createElement(Hs.l,{cx:a,cy:n,startAngle:s,endAngle:c,innerRadius:o+6,outerRadius:o+10,fill:u}),r.a.createElement("path",{d:"M".concat(f,",").concat(g,"L").concat(y,",").concat(E,"L").concat(b,",").concat(v),stroke:u,fill:"none"}),r.a.createElement("circle",{cx:b,cy:v,r:2,fill:u,stroke:"none"}),r.a.createElement("text",{x:b+12*(h>=0?1:-1),y:v,textAnchor:_,fill:"#333"},d.name+","+d.cost.toFixed(2)),r.a.createElement("text",{x:b+12*(h>=0?1:-1),y:v,dy:18,textAnchor:_,fill:"#999"},"(Rate ".concat((100*p).toFixed(2),"%)")))},data:this.state.report,cx:300,dataKey:"cost",cy:200,innerRadius:60,outerRadius:80,fill:"#8884d8",onMouseEnter:this.onPieEnter},this.state.report.map((function(e,t){return r.a.createElement(Hs.c,{fill:a[t%a.length]})})))):r.a.createElement(Xu.a,{image:Xu.a.PRESENTED_IMAGE_SIMPLE,description:"No Data to Show"})))),r.a.createElement(sr.a,null,r.a.createElement(ao.a,{title:"Total",value:n.toFixed(2)})),r.a.createElement(ti,{loading:this.state.loading,columns:t,dataSource:this.state.report}))}}]),t}(r.a.Component),sp=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).onPieEnter=function(e,t){a.setState({activeIndex:t})},a.state={report:[],startDate:a.props.startDate,endDate:a.props.endDate,loading:!1,activeIndex:0},a.loadPatientGroupsIncome=a.loadPatientGroupsIncome.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadPatientGroupsIncome()}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.startDate==e.startDate&&this.props.endDate==e.endDate&&this.props.products==e.products&&this.props.income_type==e.income_type&&this.props.is_cancelled==e.is_cancelled&&this.props.discount==e.discount&&this.props.treatments==e.treatments&&this.props.doctors==e.doctors&&this.props.taxes==e.taxes&&this.props.patient_groups==e.patient_groups||this.setState({startDate:e.startDate,endDate:e.endDate},(function(){t.loadPatientGroupsIncome()}))}},{key:"loadPatientGroupsIncome",value:function(){var e=this;e.setState({loading:!0});var t={practice:e.props.active_practiceId,start:this.state.startDate.format("YYYY-MM-DD"),end:this.state.endDate.format("YYYY-MM-DD"),type:e.props.type,is_cancelled:!!this.props.is_cancelled};e.props.income_type&&(t.income_type=e.props.income_type),e.props.discount&&(t.discount=e.props.discount),this.props.patient_groups&&(t.groups=this.props.patient_groups.toString()),this.props.products&&(t.products=this.props.products.toString()),this.props.doctors&&(t.doctors=this.props.doctors.toString()),this.props.taxes&&(t.taxes=this.props.taxes.toString()),this.props.treatments&&(t.treatments=this.props.treatments.toString()),Ut(it,(function(t){e.setState({report:t,loading:!1})}),(function(){e.setState({loading:!1})}),t)}},{key:"render",value:function(){var e=1,t=[{title:"S. No",key:"sno",dataIndex:"sno",render:function(t,a){return r.a.createElement("span",null," ",e++)},export:function(e,t,a){return a+1},width:50},{title:"Patient Group",key:"name",dataIndex:"name"},{title:"Cost(INR)",key:"cost",dataIndex:"cost",render:function(e,t){return r.a.createElement("span",null,t.cost.toFixed(2))}},{title:"Discount(INR)",key:"discount",dataIndex:"discount_value",render:function(e,t){return r.a.createElement("span",null,t.discount.toFixed(2))}},{title:"Income After Discount",key:"income_after_discount",render:function(e,t){return r.a.createElement("span",null,(t.cost-t.discount).toFixed(2))}},{title:"Tax (INR)",key:"tax",render:function(e,t){return r.a.createElement("span",null,t.tax.toFixed(2))}},{title:"Invoiced Amount(INR)",key:"amount",render:function(e,t){return r.a.createElement("span",null,(t.cost-(t.discount+t.tax)).toFixed(2))}}],a=["#0088FE","#00C49F","#FFBB28","#FF8042"],n=this.state.report.reduce((function(e,t){return e+t.cost}),0);return r.a.createElement("div",null,r.a.createElement("h2",null,"Income For Each Patient Group"),r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:12,offset:6},r.a.createElement(pa.a,{size:"large",spinning:this.state.loading},this.state.report.length>0?r.a.createElement(Hs.j,{width:800,height:400},r.a.createElement(Hs.i,{activeIndex:this.state.activeIndex,activeShape:function(e){var t=Math.PI/180,a=e.cx,n=e.cy,i=e.midAngle,l=e.innerRadius,o=e.outerRadius,s=e.startAngle,c=e.endAngle,u=e.fill,d=e.payload,p=e.percent,m=(e.value,Math.sin(-t*i)),h=Math.cos(-t*i),f=a+(o+10)*h,g=n+(o+10)*m,y=a+(o+30)*h,E=n+(o+30)*m,b=y+22*(h>=0?1:-1),v=E,_=h>=0?"start":"end";return r.a.createElement("g",null,r.a.createElement(Hs.l,{cx:a,cy:n,innerRadius:l,outerRadius:o,startAngle:s,endAngle:c,fill:u}),r.a.createElement(Hs.l,{cx:a,cy:n,startAngle:s,endAngle:c,innerRadius:o+6,outerRadius:o+10,fill:u}),r.a.createElement("path",{d:"M".concat(f,",").concat(g,"L").concat(y,",").concat(E,"L").concat(b,",").concat(v),stroke:u,fill:"none"}),r.a.createElement("circle",{cx:b,cy:v,r:2,fill:u,stroke:"none"}),r.a.createElement("text",{x:b+12*(h>=0?1:-1),y:v,textAnchor:_,fill:"#333"},d.name+","+d.cost.toFixed(2)),r.a.createElement("text",{x:b+12*(h>=0?1:-1),y:v,dy:18,textAnchor:_,fill:"#999"},"(Rate ".concat((100*p).toFixed(2),"%)")))},data:this.state.report,cx:300,dataKey:"cost",cy:200,innerRadius:60,outerRadius:80,fill:"#8884d8",onMouseEnter:this.onPieEnter},this.state.report.map((function(e,t){return r.a.createElement(Hs.c,{fill:a[t%a.length]})})))):r.a.createElement(Xu.a,{image:Xu.a.PRESENTED_IMAGE_SIMPLE,description:"No Data to Show"})))),r.a.createElement(sr.a,null,r.a.createElement(ao.a,{title:"Total",value:n.toFixed(2)})),r.a.createElement(ti,{loading:this.state.loading,columns:t,dataSource:this.state.report}))}}]),t}(r.a.Component),cp=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).onPieEnter=function(e,t){a.setState({activeIndex:t})},a.state={report:[],startDate:a.props.startDate,endDate:a.props.endDate,loading:!1,activeIndex:0},a.loadEachProductIncome=a.loadEachProductIncome.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadEachProductIncome()}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.startDate==e.startDate&&this.props.endDate==e.endDate&&this.props.products==e.products&&this.props.income_type==e.income_type&&this.props.is_cancelled==e.is_cancelled&&this.props.discount==e.discount&&this.props.treatments==e.treatments&&this.props.doctors==e.doctors&&this.props.taxes==e.taxes&&this.props.patient_groups==e.patient_groups||this.setState({startDate:e.startDate,endDate:e.endDate},(function(){t.loadEachProductIncome()}))}},{key:"loadEachProductIncome",value:function(){var e=this;e.setState({loading:!0});var t={practice:e.props.active_practiceId,start:this.state.startDate.format("YYYY-MM-DD"),end:this.state.endDate.format("YYYY-MM-DD"),type:e.props.type,is_cancelled:!!this.props.is_cancelled};e.props.income_type&&(t.income_type=e.props.income_type),e.props.discount&&(t.discount=e.props.discount),this.props.patient_groups&&(t.groups=this.props.patient_groups.toString()),this.props.products&&(t.products=this.props.products.toString()),this.props.doctors&&(t.doctors=this.props.doctors.toString()),this.props.taxes&&(t.taxes=this.props.taxes.toString()),this.props.treatments&&(t.treatments=this.props.treatments.toString()),Ut(it,(function(t){e.setState({report:t,loading:!1})}),(function(){e.setState({loading:!1})}),t)}},{key:"render",value:function(){var e=1,t=[{title:"S. No",key:"sno",dataIndex:"sno",render:function(t,a){return r.a.createElement("span",null," ",e++)},export:function(e,t,a){return a+1},width:50},{title:"Item Destock",key:"name",dataIndex:"name"},{title:"Quantity",key:"quantity",dataIndex:"product"},{title:"Cost(INR)",key:"cost",dataIndex:"cost",render:function(e,t){return r.a.createElement("span",null,t.cost.toFixed(2))}},{title:"Discount(INR)",key:"discount",dataIndex:"discount_value",render:function(e,t){return r.a.createElement("span",null,t.discount_value.toFixed(2))}},{title:"Income After Discount",key:"income_after_discount",render:function(e,t){return r.a.createElement("span",null,(t.cost-t.discount_value).toFixed(2))}},{title:"Tax (INR)",key:"tax",render:function(e,t){return r.a.createElement("span",null,t.tax_value.toFixed(2))}},{title:"Invoiced Amount(INR)",key:"amount",render:function(e,t){return r.a.createElement("span",null,(t.cost-(t.discount_value+t.tax_value)).toFixed(2))}}],a=["#0088FE","#00C49F","#FFBB28","#FF8042"],n=this.state.report.reduce((function(e,t){return e+t.cost}),0);return r.a.createElement("div",null,r.a.createElement("h2",null,"Income For Each Product"),r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:12,offset:6},r.a.createElement(pa.a,{size:"large",spinning:this.state.loading},this.state.report.length>0?r.a.createElement(Hs.j,{width:800,height:400},r.a.createElement(Hs.i,{activeIndex:this.state.activeIndex,activeShape:function(e){var t=Math.PI/180,a=e.cx,n=e.cy,i=e.midAngle,l=e.innerRadius,o=e.outerRadius,s=e.startAngle,c=e.endAngle,u=e.fill,d=e.payload,p=e.percent,m=(e.value,Math.sin(-t*i)),h=Math.cos(-t*i),f=a+(o+10)*h,g=n+(o+10)*m,y=a+(o+30)*h,E=n+(o+30)*m,b=y+22*(h>=0?1:-1),v=E,_=h>=0?"start":"end";return r.a.createElement("g",null,r.a.createElement(Hs.l,{cx:a,cy:n,innerRadius:l,outerRadius:o,startAngle:s,endAngle:c,fill:u}),r.a.createElement(Hs.l,{cx:a,cy:n,startAngle:s,endAngle:c,innerRadius:o+6,outerRadius:o+10,fill:u}),r.a.createElement("path",{d:"M".concat(f,",").concat(g,"L").concat(y,",").concat(E,"L").concat(b,",").concat(v),stroke:u,fill:"none"}),r.a.createElement("circle",{cx:b,cy:v,r:2,fill:u,stroke:"none"}),r.a.createElement("text",{x:b+12*(h>=0?1:-1),y:v,textAnchor:_,fill:"#333"},d.name+","+d.cost.toFixed(2)),r.a.createElement("text",{x:b+12*(h>=0?1:-1),y:v,dy:18,textAnchor:_,fill:"#999"},"(Rate ".concat((100*p).toFixed(2),"%)")))},data:this.state.report,cx:300,dataKey:"cost",cy:200,innerRadius:60,outerRadius:80,fill:"#8884d8",onMouseEnter:this.onPieEnter},this.state.report.map((function(e,t){return r.a.createElement(Hs.c,{fill:a[t%a.length]})})))):r.a.createElement(Xu.a,{image:Xu.a.PRESENTED_IMAGE_SIMPLE,description:"No Data to Show"})))),r.a.createElement(sr.a,null,r.a.createElement(ao.a,{title:"Total",value:n.toFixed(2)})),r.a.createElement(ti,{loading:this.state.loading,columns:t,dataSource:this.state.report}))}}]),t}(r.a.Component),up=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).onChangeHandle=function(e,t){Object(f.a)(a);a.setState(Object(u.a)({},e,t.target.value))},a.changeSidePanelSize=function(e){a.setState({sidePanelColSpan:e?0:4})},a.handleChangeOption=function(e,t){Object(f.a)(a);a.setState(Object(u.a)({},e,t))},a.onChangeCheckbox=function(e){a.setState({is_cancelled:!a.state.is_cancelled})},a.state={advancedOptionShow:!0,sidePanelColSpan:4,type:"ALL",practiceDoctors:[],patientGroup:[],vendorOption:[],taxes_list:[],productItems:[],treatment_data:[]},mi(Object(f.a)(a)),a.loadPatientGroup=a.loadPatientGroup.bind(Object(f.a)(a)),a.loadTaxes=a.loadTaxes.bind(Object(f.a)(a)),a.loadProductItem=a.loadProductItem.bind(Object(f.a)(a)),a.loadTreatments=a.loadTreatments.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadPatientGroup(),this.loadTaxes(),this.loadProductItem(),this.loadTreatments()}},{key:"loadProductItem",value:function(){var e=this;Ut(at,(function(t){e.setState({productItems:t})}),(function(){}),{practice:this.props.active_practiceId})}},{key:"loadPatientGroup",value:function(){var e=this;Ut(Kt(ve,[this.props.active_practiceId]),(function(t){e.setState({patientGroup:t})}),(function(){}))}},{key:"loadTaxes",value:function(){var e=this;Ut(Kt($,[this.props.active_practiceId]),(function(t){e.setState({taxes_list:t})}),(function(){}))}},{key:"loadTreatments",value:function(){var e=this;Ut(Kt(ae,[this.props.active_practiceId]),(function(t){e.setState({treatment_data:t})}),(function(){}),{pagination:!1})}},{key:"advancedOption",value:function(e){this.setState({advancedOptionShow:e})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h2",null,"Income Report ",r.a.createElement(da.a,{type:"primary",shape:"round",icon:this.state.sidePanelColSpan?"double-right":"double-left",style:{float:"right"},onClick:function(){return e.changeSidePanelSize(e.state.sidePanelColSpan)}},"Panel")),r.a.createElement(cr.a,null,r.a.createElement(rr.a,{gutter:16},r.a.createElement(ir.a,{span:24-this.state.sidePanelColSpan},"ALL"==this.state.type?r.a.createElement(ap,Object.assign({},this.props,this.state)):null,"DAILY"==this.state.type?r.a.createElement(np,Object.assign({},this.props,this.state)):null,"MONTHLY"==this.state.type?r.a.createElement(rp,Object.assign({},this.props,this.state)):null,"TAX"==this.state.type?r.a.createElement(ip,Object.assign({},this.props,this.state)):null,"DOCTOR"==this.state.type?r.a.createElement(lp,Object.assign({},this.props,this.state)):null,"PROCEDURE"==this.state.type?r.a.createElement(op,Object.assign({},this.props,this.state)):null,"PATIENT_GROUPS"==this.state.type?r.a.createElement(sp,Object.assign({},this.props,this.state)):null,"PRODUCT"==this.state.type?r.a.createElement(cp,Object.assign({},this.props,this.state)):null),r.a.createElement(ir.a,{span:this.state.sidePanelColSpan},r.a.createElement(br.a.Group,{buttonStyle:"solid",defaultValue:"ALL",onChange:function(t){return e.onChangeHandle("type",t)}},r.a.createElement("h2",null,"Income"),r.a.createElement(br.a.Button,{style:{width:"100%",backgroundColor:"transparent",border:"0px"},value:"ALL"},"All Invoice"),r.a.createElement("p",null,r.a.createElement("br",null)),r.a.createElement("h2",null,"Related Reports"),kn.map((function(e){return r.a.createElement(br.a.Button,{style:{width:"100%",backgroundColor:"transparent",border:"0px"},value:e.value},e.name)}))),r.a.createElement("br",null),r.a.createElement("br",null),this.state.advancedOptionShow?r.a.createElement(r.a.Fragment,null,r.a.createElement(da.a,{type:"link",onClick:function(t){return e.advancedOption(!1)}},"Hide Advanced Options "),r.a.createElement(ir.a,null," ",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h4",null,"Show income from"),r.a.createElement(br.a.Group,{style:{width:"100%",display:"inline-grid"},onChange:function(t){return e.handleChangeOption("income_type",t.target.value)}},Sn.map((function(e){return r.a.createElement(br.a,{value:e.value}," ",e.label)}))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h4",null,"Doctors"),r.a.createElement(ga.a,{style:{minWidth:"200px"},mode:"multiple",placeholder:"Select Doctors",onChange:function(t){return e.handleChangeOption("doctors",t)}},this.state.practiceDoctors.map((function(e){return r.a.createElement(ga.a.Option,{value:e.id},e.user.first_name)}))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h4",null,"Patient Groups"),r.a.createElement(ga.a,{style:{minWidth:"200px"},mode:"multiple",placeholder:"Select Patient Groups",onChange:function(t){return e.handleChangeOption("patient_groups",t)}},this.state.patientGroup.map((function(e){return r.a.createElement(ga.a.Option,{value:e.id},e.name)}))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h4",null,"Discount"),r.a.createElement(ga.a,{style:{minWidth:"200px"},placeholder:"Select Discount",onChange:function(t){return e.handleChangeOption("discount",t)}},xn.map((function(e){return r.a.createElement(ga.a.Option,{value:e.value},e.label)}))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h4",null,"Product"),r.a.createElement(ga.a,{style:{minWidth:"200px"},mode:"multiple",placeholder:"Select Products",onChange:function(t){return e.handleChangeOption("products",t)}},this.state.productItems.map((function(e){return r.a.createElement(ga.a.Option,{value:e.id},e.name)}))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h4",null,"Treatments"),r.a.createElement(ga.a,{style:{minWidth:"200px"},mode:"multiple",placeholder:"Select Treatments",onChange:function(t){return e.handleChangeOption("treatments",t)}},this.state.treatment_data.map((function(e){return r.a.createElement(ga.a.Option,{value:e.id},e.name)}))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h4",null,"Taxes"),r.a.createElement(ga.a,{style:{minWidth:"200px"},mode:"multiple",placeholder:"Select Taxes",onChange:function(t){return e.handleChangeOption("taxes",t)}},this.state.taxes_list.map((function(e){return r.a.createElement(ga.a.Option,{value:e.id},e.name)}))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(pr.a,{onChange:function(t){return e.onChangeCheckbox(t)}}," Exclude Cancelled"))):r.a.createElement(da.a,{type:"link",onClick:function(t){return e.advancedOption(!0)}},"Show Advanced Options ")))))}}]),t}(r.a.Component),dp=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={inventoryList:[],loading:!1},a.loadData=a.loadData.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){var e=this;e.setState({loading:!0});var t={bill_number:this.props.bill_number,supplier:this.props.supplier,date:this.props.date};(this.props.bill_number||this.props.supplier)&&Ut("stock_entry/",(function(t){e.setState({inventoryList:t.results,loading:!1})}),(function(){e.setState({loading:!1})}),t)}},{key:"render",value:function(){var e=[{title:"name",key:"name",dataIndex:"inventory_item_data.name"},{title:"Batch",key:"batch_number",dataIndex:"batch_number"},{title:"Expiry Date",key:"expiry_date",dataIndex:"expiry_date"},{title:"Item Type",key:"item_type",dataIndex:"inventory_item_data.item_type"},{title:"ADD/CONSUME",key:"item_add_type",dataIndex:"item_add_type"},{title:"Type of Consumption",key:"type_of_consumption",dataIndex:"type_of_consumption"},{title:"Bill File",key:"bill_file",dataIndex:"bill_file",render:function(e){return e?r.a.createElement("a",{target:"_blank",href:Bt(e)},"Bill"):null}},{title:"Quantity",key:"quantity",dataIndex:"quantity"},{title:"Unit Cost",key:"unit_cost",dataIndex:"unit_cost"},{title:"Total Cost",key:"total_cost",dataIndex:"total_cost"}];return r.a.createElement("div",null,r.a.createElement(lr.a,{loading:this.state.loading,bordered:!0,rowKey:function(e){return e.id},pagination:!1,columns:e,dataSource:this.state.inventoryList}))}}]),t}(r.a.Component),pp=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).handleSubmit=function(e){var t=Object(f.a)(a);e.preventDefault(),a.props.form.validateFieldsAndScroll((function(e,a){console.log(a),e||t.setState({bill_number:a.bill_number,supplier:a.supplier,inventory:a.inventory,invoice:a.invoice},(function(){t.loadBillSupplier()}))}))},a.onChangeCheckbox=function(e,t){a.setState(Object(u.a)({},e,!t))},a.state={loading:!1,billSuplier:[],startDate:a.props.startDate,endDate:a.props.endDate,nextItemPage:null,supplierList:[],inventory:!0,invoice:!0},a.loadBillSupplier=a.loadBillSupplier.bind(Object(f.a)(a)),a.loadSupplierList=a.loadSupplierList.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadBillSupplier(),this.loadSupplierList()}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.startDate==e.startDate&&this.props.endDate==e.endDate||this.setState({startDate:e.startDate,endDate:e.endDate},(function(){t.loadBillSupplier()}))}},{key:"loadBillSupplier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this;t.setState({loading:!0});var a=function(e){t.setState((function(t){return 1==e.current?{loading:!1,billSuplier:e.results,nextItemPage:e.next}:{loading:!1,billSuplier:[].concat(Object(Oa.a)(t.billSuplier),Object(Oa.a)(e.results)),nextItemPage:e.next}}))},n=function(){t.setState({loading:!1})},r={page:e,start:this.state.startDate.format("YYYY-MM-DD"),end:this.state.endDate.format("YYYY-MM-DD")};t.state.bill_number&&(r.bill_number=t.state.bill_number),t.state.supplier&&(r.supplier=t.state.supplier.toString()),t.state.invoice&&(r.invoice=1),t.state.inventory&&(r.inventory=1),Ut("stock_entry/bills_suppliers/",a,n,r)}},{key:"expandIcon",value:function(e){return r.a.createElement(da.a,{onClick:function(t){return e.onExpand(e.record,t)}},"view detail")}},{key:"loadSupplierList",value:function(){var e=this,t={practice:this.props.active_practiceId};Ut(Kt(yt,[this.props.active_practiceId]),(function(t){e.setState({supplierList:t})}),(function(){}),t)}},{key:"handleChange",value:function(e,t){this.props.form.setFieldsValue(Object(u.a)({},e,t))}},{key:"render",value:function(){var e=this,t=this,a=this.props.form.getFieldDecorator,n=[{title:"Date",key:"date",dataIndex:"date",render:function(e){return r.a.createElement("span",null,e||"")}},{title:"Bill Number",key:"bill_number",dataIndex:"bill_number"},{title:"Supplier ",key:"name",dataIndex:"supplier_data.name"}];return r.a.createElement("div",null,r.a.createElement("h2",null,"Inventory Report"),r.a.createElement(cr.a,{bodyStyle:{padding:0},extra:r.a.createElement("div",null,r.a.createElement(vr.a,{layout:"inline",onSubmit:this.handleSubmit},r.a.createElement(vr.a.Item,{label:"Invoice"},a("invoice",{valuePropName:"checked",initialValue:this.state.invoice})(r.a.createElement(pr.a,{onChange:function(t){return e.onChangeCheckbox("invoice",t)}}))),r.a.createElement(vr.a.Item,{label:"Inventory"},a("inventory",{valuePropName:"checked",initialValue:this.state.inventory})(r.a.createElement(pr.a,{onChange:function(t){return e.onChangeCheckbox("inventory",t)}}))),r.a.createElement(vr.a.Item,{label:"Bill Number"},a("bill_number",{})(r.a.createElement(ma.a,{placeholder:"Bill Numbers"}))),r.a.createElement(vr.a.Item,{key:"supplier",label:"Supplier"},a("supplier",{initialValue:this.state.supplierList?this.state.supplierList.name:null},{rules:[{required:!0,message:"This field required!"}],onChange:this.handleChange})(r.a.createElement(ga.a,{placeholder:"Supplier",style:{minWidth:150},mode:"multiple"},this.state.supplierList.map((function(e){return r.a.createElement(ga.a.Option,{value:e.id},e.name)}))))),r.a.createElement(vr.a.Item,null,r.a.createElement(da.a,{type:"primary",htmlType:"submit",style:{margin:5}},"Submit"))))},r.a.createElement(lr.a,{loading:this.state.loading,bordered:!0,rowKey:function(e){return e.id},expandedRowRender:function(e){return r.a.createElement(dp,Object.assign({},e,t.props))},columns:n,dataSource:this.state.billSuplier,pagination:!1}),r.a.createElement(wi,{loaderFunction:function(){return e.loadBillSupplier(e.state.nextItemPage)},loading:this.state.loading,hidden:!this.state.nextItemPage})))}}]),t}(r.a.Component),mp=vr.a.create()(pp),hp=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={report:[],startDate:a.props.startDate,endDate:a.props.endDate,loading:!1},a.loadDailyInventory=a.loadDailyInventory.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadDailyInventory()}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.startDate==e.startDate&&this.props.endDate==e.endDate&&this.props.product_item==e.product_item&&this.props.consume==e.consume||this.setState({startDate:e.startDate,endDate:e.endDate},(function(){t.loadDailyInventory()}))}},{key:"loadDailyInventory",value:function(){var e=this;e.setState({loading:!0});var t={start:this.state.startDate.format("YYYY-MM-DD"),end:this.state.endDate.format("YYYY-MM-DD"),type:e.props.type};this.props.consume&&(t.consume=this.props.consume.toString()),this.props.product_item&&(t.product=this.props.product_item),Ut("inventory_item/inventory_report",(function(t){e.setState({report:t,loading:!1})}),(function(){e.setState({loading:!1})}),t)}},{key:"render",value:function(){var e=this,t=e.state.report,a=[],n={},i=1;for(i=0;i<t.length;i++)t[i].date in n?n[t[i].date][t[i].type_of_consumption]=t[i].consume:(n[t[i].date]={SALES:0,SERVICES:0,DAMAGED:0,RETURNED:0,ADJUSTMENT:0},n[t[i].date][t[i].type_of_consumption]=t[i].consume);for(var l in n){var o={item_date:l,type:n[l],total_consumption:0},s=n[l].SALES+n[l].SERVICES+n[l].DAMAGED+n[l].RETURNED+n[l].ADJUSTMENT;o.total_consumption=s,a.push(o)}for(var c=[{title:"S. No",key:"sno",render:function(e,t){return r.a.createElement("span",null," ",i++)},export:function(e,t,a){return a+1},width:50},{title:"Day",key:"date",dataIndex:"item_date",render:function(e,t){return r.a.createElement("span",null,Or()(t.item_date).format("DD MMM"))},export:function(e,t){return Or()(t.item_date).format("DD MMM")}}],u=function(t){var a=an[t].value,n={title:an[t].label,key:an[t].value,render:function(e,t){return r.a.createElement("span",null,t.type[a])},export:function(e,t){return t.type.value}};e.props.consume.includes(an[t].value)&&c.push(n)},d=0;d<an.length;d++)u(d);c.push({title:"Total Consumption",key:"total_consumption",dataIndex:"total_consumption"});return r.a.createElement("div",null,r.a.createElement("h2",null,"Daily Inventory"),r.a.createElement(pa.a,{size:"large",spinning:this.state.loading},this.state.report.length>0?r.a.createElement(Hs.d,{width:1e3,height:400,data:Object(Oa.a)(this.state.report).reverse(),margin:{top:20,right:20,bottom:20,left:20}},r.a.createElement(Hs.n,{dataKey:"date",tickFormatter:function(e){return Or()(e).format("DD MMM")}}),r.a.createElement(Hs.o,{label:{value:"Quantity Consumed",angle:-90,position:"insideLeft"}}),r.a.createElement(Hs.m,null),r.a.createElement(Hs.a,{dataKey:"consume",barSize:35,fill:"#0059b3",stroke:"#0059b3",label:function(e){e.payload;var t=e.x,a=e.y,n=e.width,i=(e.height,e.value);return r.a.createElement("text",{x:t+n/2,y:a,fill:"#666",textAnchor:"middle",dy:-6},i)}})):r.a.createElement(Xu.a,{image:Xu.a.PRESENTED_IMAGE_SIMPLE,description:"No Data to Show"})),r.a.createElement(ti,{loading:this.state.loading,columns:c,dataSource:a}))}}]),t}(r.a.Component),fp=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={report:[],startDate:a.props.startDate,endDate:a.props.endDate,loading:!1},a.loadMonthlyInventory=a.loadMonthlyInventory.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadMonthlyInventory()}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.startDate==e.startDate&&this.props.endDate==e.endDate&&this.props.product_item==e.product_item&&this.props.consume==e.consume||this.setState({startDate:e.startDate,endDate:e.endDate},(function(){t.loadMonthlyInventory()}))}},{key:"loadMonthlyInventory",value:function(){var e=this;e.setState({loading:!0});var t={start:this.state.startDate.format("YYYY-MM-DD"),end:this.state.endDate.format("YYYY-MM-DD"),type:e.props.type};this.props.consume&&(t.consume=this.props.consume.toString()),this.props.product_item&&(t.product=this.props.product_item),Ut("inventory_item/inventory_report",(function(t){e.setState({report:t,loading:!1})}),(function(){e.setState({loading:!1})}),t)}},{key:"render",value:function(){var e=this,t=e.state.report,a=[],n={};for(s=0;s<t.length;s++)t[s].date in n?n[t[s].date][t[s].type_of_consumption]=t[s].consume:(n[t[s].date]={SERVICES:0,SALES:0,DAMAGED:0,RETURNED:0,ADJUSTMENT:0},n[t[s].date][t[s].type_of_consumption]=t[s].consume);for(var i in n){var l={item_date:i,type:n[i],total_consumption:0},o=n[i].SERVICES+n[i].SALES+n[i].DAMAGED+n[i].RETURNED+n[i].ADJUSTMENT;l.total_consumption=o,a.push(l)}for(var s=1,c=[{title:"S. No",key:"sno",render:function(e,t){return r.a.createElement("span",null," ",s++)},export:function(e,t,a){return a+1},width:50},{title:"Month",key:"date",dataIndex:"item_date",render:function(e,t){return r.a.createElement("span",null,Or()(t.item_date).format("MMM YYYY"))},export:function(e,t){return Or()(t.item_date).format("MMM YYYY")}}],u=function(t){var a=an[t].value,n={title:an[t].label,key:an[t].value,render:function(e,t){return r.a.createElement("span",null,t.type[a])},export:function(e,t){return t.type.value}};e.props.consume.includes(an[t].value)&&c.push(n)},d=0;d<an.length;d++)u(d);c.push({title:"Total Consumption",key:"total_consumption",dataIndex:"total_consumption"});return r.a.createElement("div",null,r.a.createElement("h2",null,"Monthly Inventory"),r.a.createElement(pa.a,{size:"large",spinning:this.state.loading},this.state.report.length>0?r.a.createElement(Hs.d,{width:1e3,height:400,data:Object(Oa.a)(this.state.report).reverse(),margin:{top:20,right:20,bottom:20,left:20}},r.a.createElement(Hs.n,{dataKey:"date",tickFormatter:function(e){return Or()(e).format("MMM YY")}}),r.a.createElement(Hs.o,{label:{value:"Quantity Consumed",angle:-90,position:"insideLeft"}}),r.a.createElement(Hs.m,null),r.a.createElement(Hs.a,{dataKey:"consume",barSize:35,fill:"#0059b3",stroke:"#0059b3",label:function(e){e.payload;var t=e.x,a=e.y,n=e.width,i=(e.height,e.value);return r.a.createElement("text",{x:t+n/2,y:a,fill:"#666",textAnchor:"middle",dy:-6},i)}})):r.a.createElement(Xu.a,{image:Xu.a.PRESENTED_IMAGE_SIMPLE,description:"No Data to Show"})),r.a.createElement(ti,{loading:this.state.loading,columns:c,dataSource:a}))}}]),t}(r.a.Component),gp=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={reportItem_wise:[],reportTotal:[],startDate:a.props.startDate,endDate:a.props.endDate,loading:!1},a.loadDailyInventory=a.loadDailyInventory.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadDailyInventory()}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.startDate==e.startDate&&this.props.endDate==e.endDate&&this.props.product_item==e.product_item&&this.props.consume==e.consume||this.setState({startDate:e.startDate,endDate:e.endDate},(function(){t.loadDailyInventory()}))}},{key:"loadDailyInventory",value:function(){var e=this;e.setState({loading:!0});var t={start:this.state.startDate.format("YYYY-MM-DD"),end:this.state.endDate.format("YYYY-MM-DD"),type:e.props.type};this.props.consume&&(t.consume=this.props.consume.toString()),this.props.product_item&&(t.product=this.props.product_item),Ut("inventory_item/inventory_report",(function(t){e.setState({report:t,reportItem_wise:t.item_wise,reportTotal:t.total,loading:!1})}),(function(){e.setState({loading:!1})}),t)}},{key:"render",value:function(){var e=this,t=e.state.reportItem_wise,a=[],n={};for(s=0;s<t.length;s++)t[s].inventory_item__name in n?n[t[s].inventory_item__name][t[s].type_of_consumption]=t[s].consume:(n[t[s].inventory_item__name]={SALES:0,SERVICES:0,DAMAGED:0,RETURNED:0,ADJUSTMENT:0},n[t[s].inventory_item__name][t[s].type_of_consumption]=t[s].consume);for(var i in n){var l={item_name:i,type:n[i],total_consumption:0},o=n[i].SALES+n[i].SERVICES+n[i].DAMAGED+n[i].RETURNED+n[i].ADJUSTMENT;l.total_consumption=o,a.push(l)}for(var s=1,c=[{title:"S. No",key:"sno",render:function(e,t){return r.a.createElement("span",null," ",s++)},export:function(e,t,a){return a+1},width:50},{title:"Item Name",key:"inventory_item__name",dataIndex:"item_name"}],u=function(t){var a=an[t].value,n={title:an[t].label,key:an[t].value,render:function(e,t){return r.a.createElement("span",null,t.type[a])},export:function(e,t){return t.type.value}};e.props.consume.includes(an[t].value)&&c.push(n)},d=0;d<an.length;d++)u(d);c.push({title:"Total Consumption",key:"total_consumption",dataIndex:"total_consumption"});return r.a.createElement("div",null,r.a.createElement("h2",null,"Top Inventory"),r.a.createElement(pa.a,{size:"large",spinning:this.state.loading},this.state.reportTotal.length>0?r.a.createElement(Hs.d,{width:1e3,height:400,data:this.state.reportTotal,margin:{top:20,right:20,bottom:20,left:20}},r.a.createElement(Hs.n,{dataKey:"inventory_item__name"}),r.a.createElement(Hs.o,{label:{value:"Top Quantity Consumed",angle:-90,position:"insideLeft"}}),r.a.createElement(Hs.m,null),r.a.createElement(Hs.a,{dataKey:"consume",barSize:35,fill:"#0059b3",stroke:"#0059b3",label:function(e){e.payload;var t=e.x,a=e.y,n=e.width,i=(e.height,e.value);return r.a.createElement("text",{x:t+n/2,y:a,fill:"#666",textAnchor:"middle",dy:-6},i)}})):r.a.createElement(Xu.a,{image:Xu.a.PRESENTED_IMAGE_SIMPLE,description:"No Data to Show"})),r.a.createElement(ti,{loading:this.state.loading,columns:c,dataSource:a}))}}]),t}(r.a.Component),yp=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).onChangeHandle=function(e,t){Object(f.a)(a);a.setState(Object(u.a)({},e,t.target.value))},a.changeSidePanelSize=function(e){a.setState({sidePanelColSpan:e?0:4})},a.handleChangeOption=function(e,t){Object(f.a)(a);a.setState(Object(u.a)({},e,t))},a.state={advancedOptionShow:!0,sidePanelColSpan:4,productItems:[],type:"ALL",consume:an.map((function(e){return e.value}))},a.loadProductItem=a.loadProductItem.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadProductItem()}},{key:"loadProductItem",value:function(){var e=this;Ut(at,(function(t){e.setState({productItems:t})}),(function(){}),{practice:this.props.active_practiceId})}},{key:"advancedOption",value:function(e){this.setState({advancedOptionShow:e})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h2",null,"Inventory Report ",r.a.createElement(da.a,{type:"primary",shape:"round",icon:this.state.sidePanelColSpan?"double-right":"double-left",style:{float:"right"},onClick:function(){return e.changeSidePanelSize(e.state.sidePanelColSpan)}},"Panel")),r.a.createElement(cr.a,null,r.a.createElement(rr.a,{gutter:16},r.a.createElement(ir.a,{span:24-this.state.sidePanelColSpan},"ALL"==this.state.type?r.a.createElement(mp,Object.assign({},this.props,this.state)):null,"DAILY"==this.state.type?r.a.createElement(hp,Object.assign({},this.props,this.state)):null,"MONTHLY"==this.state.type?r.a.createElement(fp,Object.assign({},this.props,this.state)):null,"TOP"==this.state.type?r.a.createElement(gp,Object.assign({},this.props,this.state)):null),r.a.createElement(ir.a,{span:this.state.sidePanelColSpan},r.a.createElement(br.a.Group,{buttonStyle:"solid",defaultValue:"ALL",onChange:function(t){return e.onChangeHandle("type",t)}},r.a.createElement("h2",null,"Inventory"),r.a.createElement(br.a.Button,{style:{width:"100%",backgroundColor:"transparent",border:"0px"},value:"ALL"},"All Stock Update History"),r.a.createElement("p",null,r.a.createElement("br",null)),r.a.createElement("h2",null,"Related Reports"),vn.map((function(e){return r.a.createElement(br.a.Button,{style:{width:"100%",backgroundColor:"transparent",border:"0px"},value:e.value},e.name)}))),r.a.createElement("br",null),r.a.createElement("br",null),"ALL"!==this.state.type?r.a.createElement(r.a.Fragment,null,this.state.advancedOptionShow?r.a.createElement(r.a.Fragment,null,r.a.createElement(da.a,{type:"link",onClick:function(t){return e.advancedOption(!1)}},"Hide Advanced Options "),r.a.createElement(ir.a,null," ",r.a.createElement("br",null),r.a.createElement("h4",null,"Product"),r.a.createElement(ga.a,{style:{minWidth:"200px"},defaultValue:L,onChange:function(t){return e.handleChangeOption("product_item",t)}},r.a.createElement(ga.a.Option,{value:""},L),this.state.productItems.map((function(e){return r.a.createElement(ga.a.Option,{value:e.id},e.name)}))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(pr.a.Group,{style:{width:"100%",display:"inline-grid"},defaultValue:an.map((function(e){return e.value})),onChange:function(t){return e.handleChangeOption("consume",t)}},an.map((function(e){return r.a.createElement(pr.a,{value:e.value}," ",e.label)}))))):r.a.createElement(da.a,{type:"link",onClick:function(t){return e.advancedOption(!0)}},"Show Advanced Options ")):null))))}}]),t}(r.a.Component);function Ep(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function bp(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ep(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ep(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var vp=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).sendMail=function(e){var t={from_date:a.props.startDate.format("YYYY-MM-DD"),to_date:a.props.endDate.format("YYYY-MM-DD"),type:a.props.type};a.props.patient_groups&&(t.groups=a.props.patient_groups.toString()),a.props.blood_group&&(t.blood_group=a.props.blood_group),t.mail_to=e,bi(Ze,t)},a.state={report:[],startDate:a.props.startDate,endDate:a.props.endDate,loading:!1,mailingUsersList:[]},a.loadDailyNewPatients=a.loadDailyNewPatients.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadDailyNewPatients(),Ei(this)}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.startDate==e.startDate&&this.props.endDate==e.endDate&&this.props.patient_groups==e.patient_groups&&this.props.blood_group==e.blood_group||this.setState({startDate:e.startDate,endDate:e.endDate},(function(){t.loadDailyNewPatients()}))}},{key:"loadDailyNewPatients",value:function(){var e=this;e.setState({loading:!0});var t={from_date:this.props.startDate.format("YYYY-MM-DD"),to_date:this.props.endDate.format("YYYY-MM-DD"),type:this.props.type};this.props.patient_groups&&(t.groups=this.props.patient_groups.toString()),this.props.blood_group&&(t.blood_group=this.props.blood_group),Ut(Ze,(function(t){e.setState({report:t.data,total:t.total,loading:!1})}),(function(){e.setState({loading:!1})}),t)}},{key:"render",value:function(){for(var e=this,t=this.state.report,a=[],n=1;n<=t.length;n++)a.push(bp({s_no:n},t[n-1]));var i=[{title:"S. No",key:"s_no",dataIndex:"s_no",width:50},{title:"Day",key:"date",dataIndex:"date",render:function(e,t){return r.a.createElement("span",null,Or()(t.date).format("ll"))},export:function(e,t){return Or()(t.date).format("ll")}},{title:"Patients",key:"count",dataIndex:"count"}];return r.a.createElement("div",null,r.a.createElement("h2",null,"Daily New Patients Report",r.a.createElement("span",{style:{float:"right"}},r.a.createElement("p",null,r.a.createElement("small",null,"E-Mail To:\xa0"),r.a.createElement(ga.a,{onChange:function(t){return e.sendMail(t)},style:{width:200}},this.state.mailingUsersList.map((function(e){return r.a.createElement(ga.a.Option,{value:e.email},e.name)})))))),r.a.createElement(pa.a,{size:"large",spinning:this.state.loading},a.length>0?r.a.createElement(Hs.h,{width:1e3,height:300,data:[].concat(a).reverse(),margin:{top:5,right:30,left:20,bottom:55}},r.a.createElement(Hs.n,{dataKey:"date",tickFormatter:function(e){return Or()(e).format("DD MMM")},label:{value:"Data Range",offset:0,margin:{top:10},position:"insideBottom"}}),r.a.createElement(Hs.o,{label:{value:"Total Patients",angle:-90,position:"insideLeft"}}),r.a.createElement(Hs.b,{strokeDasharray:"3 3"}),r.a.createElement(Hs.m,null),r.a.createElement(Hs.g,{type:"monotone",dataKey:"count",stroke:"#8884d8",strokeWidth:4})):r.a.createElement(Xu.a,{image:Xu.a.PRESENTED_IMAGE_SIMPLE,description:"No Data to Show"})),r.a.createElement(sr.a,null,r.a.createElement(ao.a,{title:"Total Patients",value:this.state.total})),r.a.createElement(ti,{hideReport:!0,loading:this.state.loading,columns:i,dataSource:a}))}}]),t}(r.a.Component);function _p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Op(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_p(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_p(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Dp=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).sendMail=function(e){var t={from_date:a.props.startDate.format("YYYY-MM-DD"),to_date:a.props.endDate.format("YYYY-MM-DD"),type:a.props.type};t.mail_to=e,bi(Je,t)},a.state={report:[],startDate:a.props.startDate,endDate:a.props.endDate,loading:!1,mailingUsersList:[]},a.loadExpireMembership=a.loadExpireMembership.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadExpireMembership(),Ei(this)}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.startDate==e.startDate&&this.props.endDate==e.endDate||this.setState({startDate:e.startDate,endDate:e.endDate},(function(){t.loadExpireMembership()}))}},{key:"loadExpireMembership",value:function(){var e=this;e.setState({loading:!0});var t={from_date:this.props.startDate.format("YYYY-MM-DD"),to_date:this.props.endDate.format("YYYY-MM-DD"),type:this.props.type};Ut(Je,(function(t){e.setState({report:t,loading:!1})}),(function(){e.setState({loading:!1})}),t)}},{key:"render",value:function(){for(var e=this,t=this,a=this.state.report,n=[],i=1;i<=a.length;i++)n.push(Op({s_no:i},a[i-1]));var l=[{title:"S. No",key:"s_no",dataIndex:"s_no",width:50},{title:"Name",dataIndex:"patient.user.first_name",key:"patient.user.first_name",export:function(e,t){return t.patient.user.first_name}},{title:"Mobile Number",key:"patient.user.mobile",dataIndex:"patient.user.mobile",render:function(e){return t.props.activePracticePermissions.PatientPhoneNumber?e:ka(e)},export:function(e,t){return t.patient.user.mobile}},{title:"Email",key:"patient.user.email",dataIndex:"patient.user.email",render:function(e){return t.props.activePracticePermissions.PatientEmailId?e:Pa(e)},export:function(e,t){return t.patient.user.email}},{title:"Gender",key:"gender",dataIndex:"patient.gender",export:function(e,t){return t.patient.gender}},{title:"Start Date",key:"start_date",dataIndex:"medical_from"},{title:"Valid Till",key:"valid_till",dataIndex:"medical_to"}];return r.a.createElement("div",null,r.a.createElement("h2",null,"Expiring Membership",r.a.createElement("span",{style:{float:"right"}},r.a.createElement("p",null,r.a.createElement("small",null,"E-Mail To:\xa0"),r.a.createElement(ga.a,{onChange:function(t){return e.sendMail(t)},style:{width:200}},this.state.mailingUsersList.map((function(e){return r.a.createElement(ga.a.Option,{value:e.email},e.name)})))))),r.a.createElement(ti,{loading:this.state.loading,columns:l,hideReport:!0,dataSource:n}))}}]),t}(r.a.Component);function kp(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Pp(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?kp(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):kp(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Sp=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).sendMail=function(e){var t={from_date:a.props.startDate.format("YYYY-MM-DD"),to_date:a.props.endDate.format("YYYY-MM-DD"),type:a.props.type};a.props.patient_groups&&(t.groups=a.props.patient_groups.toString()),t.mail_to=e,bi(Ze,t)},a.state={report:[],startDate:a.props.startDate,endDate:a.props.endDate,loading:!1,mailingUsersList:[]},a.loadMonthlyPatients=a.loadMonthlyPatients.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadMonthlyPatients(),Ei(this)}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.startDate==e.startDate&&this.props.endDate==e.endDate&&this.props.patient_groups==e.patient_groups&&this.props.blood_group==e.blood_group&&this.props.offer==e.offer||this.setState({startDate:e.startDate,endDate:e.endDate},(function(){t.loadMonthlyPatients()}))}},{key:"loadMonthlyPatients",value:function(){var e=this;e.setState({loading:!0});var t={from_date:this.props.startDate.format("YYYY-MM-DD"),to_date:this.props.endDate.format("YYYY-MM-DD"),type:this.props.type};this.props.patient_groups&&(t.groups=this.props.patient_groups.toString()),Ut(Ze,(function(t){e.setState({report:t.data,total:t.total,loading:!1})}),(function(){e.setState({loading:!1})}),t)}},{key:"render",value:function(){for(var e=this,t=this.state.report,a=[],n=1;n<=t.length;n++)a.push(Pp({s_no:n},t[n-1]));var i=[{title:"S. No",key:"s_no",dataIndex:"s_no",width:50},{title:"Month",key:"month",render:function(e,t){return r.a.createElement("span",null,Or()(t.month).format("MMM")," \xa0",Or()(t.year).format("YYYY"))},export:function(e,t){return Or()(t.month).format("MMM YYYY")}},{title:"Patients",key:"count",dataIndex:"count"}];return r.a.createElement("div",null,r.a.createElement("h2",null,"Monthly New Patients Report",r.a.createElement("span",{style:{float:"right"}},r.a.createElement("p",null,r.a.createElement("small",null,"E-Mail To:\xa0"),r.a.createElement(ga.a,{onChange:function(t){return e.sendMail(t)},style:{width:200}},this.state.mailingUsersList.map((function(e){return r.a.createElement(ga.a.Option,{value:e.email},e.name)})))))),r.a.createElement(pa.a,{size:"large",spinning:this.state.loading},a.length>0?r.a.createElement(Hs.d,{width:1e3,height:400,data:[].concat(a).reverse(),margin:{top:20,right:20,bottom:20,left:20}},r.a.createElement(Hs.n,{dataKey:"date",tickFormatter:function(e){return Or()(e).format("MMM YYYY")}}),r.a.createElement(Hs.o,null),r.a.createElement(Hs.m,null),r.a.createElement(Hs.a,{dataKey:"count",barSize:35,fill:"#413ea0",label:function(e){e.payload;var t=e.x,a=e.y,n=e.width,i=(e.height,e.value);return r.a.createElement("text",{x:t+n/2,y:a,fill:"#666",textAnchor:"middle",dy:-6},i)}})):r.a.createElement(Xu.a,{image:Xu.a.PRESENTED_IMAGE_SIMPLE,description:"No Data to Show"})),r.a.createElement(sr.a,null,r.a.createElement(ao.a,{title:"Total Patients",value:this.state.total})),r.a.createElement(ti,{hideReport:!0,loading:this.state.loading,columns:i,dataSource:a}))}}]),t}(r.a.Component);function xp(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function jp(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?xp(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):xp(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Ip=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).sendMail=function(e){var t={from_date:a.props.startDate.format("YYYY-MM-DD"),to_date:a.props.endDate.format("YYYY-MM-DD"),type:a.props.type};t.mail_to=e,bi(Je,t)},a.state={report:[],startDate:a.props.startDate,endDate:a.props.endDate,loading:!1,mailingUsersList:[]},a.loadNewMembership=a.loadNewMembership.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadNewMembership(),Ei(this)}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.startDate==e.startDate&&this.props.endDate==e.endDate||this.setState({startDate:e.startDate,endDate:e.endDate},(function(){t.loadNewMembership()}))}},{key:"loadNewMembership",value:function(){var e=this;e.setState({loading:!0});var t={from_date:this.props.startDate.format("YYYY-MM-DD"),to_date:this.props.endDate.format("YYYY-MM-DD"),type:this.props.type};Ut(Je,(function(t){e.setState({report:t,loading:!1})}),(function(){e.setState({loading:!1})}),t)}},{key:"render",value:function(){for(var e=this,t=this,a=this.state.report,n=[],i=1;i<=a.length;i++)n.push(jp({s_no:i},a[i-1]));var l=[{title:"S. No",key:"s_no",dataIndex:"s_no",width:50},{title:"Name",dataIndex:"patient.user.first_name",key:"patient.user.first_name",export:function(e,t){return t.patient.user.first_name}},{title:"Mobile Number",key:"patient.user.mobile",dataIndex:"patient.user.mobile",render:function(e){return t.props.activePracticePermissions.PatientPhoneNumber?e:ka(e)},export:function(e,t){return t.patient.user.mobile}},{title:"Email",key:"patient.user.email",dataIndex:"patient.user.email",render:function(e){return t.props.activePracticePermissions.PatientEmailId?e:Pa(e)},export:function(e,t){return t.patient.user.email}},{title:"Membership Type",key:"membership_type",dataIndex:"medical_membership.name",export:function(e,t){return t.medical_membership.name}},{title:"Start Date",key:"start_date",dataIndex:"medical_from"},{title:"Valid Till",key:"valid_till",dataIndex:"medical_to"}];return r.a.createElement("div",null,r.a.createElement("h2",null,"New Membership ",r.a.createElement("span",{style:{float:"right"}},r.a.createElement("p",null,r.a.createElement("small",null,"E-Mail To:\xa0"),r.a.createElement(ga.a,{onChange:function(t){return e.sendMail(t)},style:{width:200}},this.state.mailingUsersList.map((function(e){return r.a.createElement(ga.a.Option,{value:e.email},e.name)})))))),r.a.createElement(ti,{hideReport:!0,loading:this.state.loading,columns:l,dataSource:n}))}}]),t}(r.a.Component);function Cp(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function wp(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Cp(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Cp(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Mp=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).sendMail=function(e){var t={from_date:a.props.startDate.format("YYYY-MM-DD"),to_date:a.props.endDate.format("YYYY-MM-DD"),type:a.props.type};a.props.patient_groups&&(t.groups=a.props.patient_groups.toString()),a.props.blood_group&&(t.blood_group=a.props.blood_group),t.mail_to=e,bi(Ze,t)},a.state={startDate:a.props.startDate,endDate:a.props.endDate,report:[],loading:!1,mailingUsersList:[]},a.loadNewPatient=a.loadNewPatient.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){"DETAILED"==this.props.type&&this.loadNewPatient(),Ei(this)}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.startDate==e.startDate&&this.props.endDate==e.endDate&&this.props.patient_groups==e.patient_groups&&this.props.blood_group==e.blood_group&&this.props.blood_group==e.blood_group||this.setState({startDate:e.startDate,endDate:e.endDate},(function(){"DETAILED"==t.props.type&&this.loadNewPatient()}))}},{key:"loadNewPatient",value:function(){var e=this;e.setState({loading:!0});var t={type:e.props.type?e.props.type:"DETAILED",from_date:this.props.startDate.format("YYYY-MM-DD"),to_date:this.props.endDate.format("YYYY-MM-DD")};this.props.patient_groups&&(t.groups=this.props.patient_groups.toString()),this.props.blood_group&&(t.blood_group=this.props.blood_group),Ut(Ze,(function(t){e.setState({report:t,loading:!1})}),(function(){e.setState({loading:!1})}),t)}},{key:"render",value:function(){for(var e=this,t=this,a=this.state.report,n=[],i=1;i<=a.length;i++)n.push(wp({s_no:i},a[i-1]));var l=[{title:"S. No",key:"s_no",dataIndex:"s_no",render:function(e,t){return r.a.createElement("span",null," ",t.s_no)},export:function(e,t,a){return a+1},width:50},{title:"Patient Name",dataIndex:"user.first_name",key:"first_name"},{title:"Patient Number",key:"id",render:function(e,t){return r.a.createElement("span",null,t.custom_id?t.custom_id:t.id)},exports:function(e,t){return t.custom_id?t.custom_id:t.id}},{title:"Mobile Number",key:"user.mobile",dataIndex:"user.mobile",render:function(e){return t.props.activePracticePermissions.PatientPhoneNumber?e:ka(e)},exports:function(e){return e}},{title:"Email",key:"user.email",dataIndex:"user.email",render:function(e){return t.props.activePracticePermissions.PatientEmailId?e:Pa(e)},exports:function(e){return e}},{title:"Gender",key:"gender",dataIndex:"gender"}];return r.a.createElement("div",null,r.a.createElement("h2",null,"New Patients Report",r.a.createElement("span",{style:{float:"right"}},r.a.createElement("p",null,r.a.createElement("small",null,"E-Mail To:\xa0"),r.a.createElement(ga.a,{onChange:function(t){return e.sendMail(t)},style:{width:200}},this.state.mailingUsersList.map((function(e){return r.a.createElement(ga.a.Option,{value:e.email},e.name)})))))),r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:12,offset:6,style:{textAlign:"center"}},r.a.createElement(ao.a,{title:"Total Patients",value:this.state.report.length}),r.a.createElement("br",null))),r.a.createElement(ti,{loading:this.state.loading,columns:l,hideReport:!0,dataSource:n}))}}]),t}(r.a.Component);function Ap(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Tp(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ap(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ap(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Rp=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).sendMail=function(e){var t={from_date:a.props.startDate.format("YYYY-MM-DD"),to_date:a.props.endDate.format("YYYY-MM-DD")};t.mail_to=e,bi($e,t)},a.state={report:[],startDate:a.props.startDate,endDate:a.props.endDate,loading:!1,mailingUsersList:[]},a.loadFirstAppointment=a.loadFirstAppointment.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadFirstAppointment(),Ei(this)}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.startDate==e.startDate&&this.props.endDate==e.endDate||this.setState({startDate:e.startDate,endDate:e.endDate},(function(){t.loadFirstAppointment()}))}},{key:"loadFirstAppointment",value:function(){var e=this;e.setState({loading:!0});var t={from_date:this.props.startDate.format("YYYY-MM-DD"),to_date:this.props.endDate.format("YYYY-MM-DD")};Ut($e,(function(t){e.setState({report:t,loading:!1})}),(function(){e.setState({loading:!1})}),t)}},{key:"render",value:function(){for(var e=this,t=this.state.report,a=[],n=1;n<=t.length;n++)a.push(Tp({s_no:n},t[n-1]));var i=[{title:"S. No",key:"s_no",dataIndex:"s_no",width:50},{title:"Date",key:"appointment_time",render:function(e,t){return r.a.createElement("span",null,Or()(t.appointment_time).format("LL"))},export:function(e,t){return Or()(t.appointment_time).format("LL")}},{title:"Patient Name",dataIndex:"patient_name",key:"patient_name"},{title:"Patient Number",key:"id",render:function(e,t){return r.a.createElement("span",null,t.custom_id?t.custom_id:t.patient_id)},exports:function(e,t){return t.custom_id?t.custom_id:t.patient_id}}];return r.a.createElement("div",null,r.a.createElement("h2",null,"Patients First AppointmentReport",r.a.createElement("span",{style:{float:"right"}},r.a.createElement("p",null,r.a.createElement("small",null,"E-Mail To:\xa0"),r.a.createElement(ga.a,{onChange:function(t){return e.sendMail(t)},style:{width:200}},this.state.mailingUsersList.map((function(e){return r.a.createElement(ga.a.Option,{value:e.email},e.name)})))))),r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:12,offset:6,style:{textAlign:"center"}},r.a.createElement(ao.a,{title:"Total Patients",value:this.state.report.length}),r.a.createElement("br",null))),r.a.createElement(ti,{hideReport:!0,loading:this.state.loading,columns:i,dataSource:a}))}}]),t}(r.a.Component);function Lp(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Fp(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Lp(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Lp(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Np=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).sendMail=function(e){var t={from_date:a.props.startDate.format("YYYY-MM-DD"),to_date:a.props.endDate.format("YYYY-MM-DD")};a.props.patient_groups&&(t.groups=a.props.patient_groups.toString()),a.props.blood_group&&(t.blood_group=a.props.blood_group),t.mail_to=e,bi(Xe,t)},a.state={startDate:a.props.startDate,endDate:a.props.endDate,report:[],loading:!1,mailingUsersList:[]},a.loadActivePatient=a.loadActivePatient.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadActivePatient(),Ei(this)}},{key:"componentWillReceiveProps",value:function(e){this.props.startDate==e.startDate&&this.props.endDate==e.endDate&&this.props.patient_groups==e.patient_groups&&this.props.blood_group==e.blood_group&&this.props.blood_group==e.blood_group||this.setState({startDate:e.startDate,endDate:e.endDate},(function(){this.loadActivePatient()}))}},{key:"loadActivePatient",value:function(){var e=this;e.setState({loading:!0});var t={from_date:this.props.startDate.format("YYYY-MM-DD"),to_date:this.props.endDate.format("YYYY-MM-DD")};this.props.patient_groups&&(t.groups=this.props.patient_groups.toString()),this.props.blood_group&&(t.blood_group=this.props.blood_group),Ut(Xe,(function(t){e.setState({report:t,loading:!1})}),(function(){e.setState({loading:!1})}),t)}},{key:"render",value:function(){for(var e=this,t=this,a=this.state.report,n=[],i=1;i<=a.length;i++)n.push(Fp({s_no:i},a[i-1]));var l=[{title:"S. No",key:"s_no",dataIndex:"s_no",render:function(e,t){return r.a.createElement("span",null," ",t.s_no)},export:function(e,t,a){return a+1},width:50},{title:"Patient Name",dataIndex:"user.first_name",key:"first_name"},{title:"Patient Number",key:"id",render:function(e,t){return r.a.createElement("span",null,t.custom_id?t.custom_id:t.id)},exports:function(e,t){return t.custom_id?t.custom_id:t.id}},{title:"Mobile Number",key:"user.mobile",dataIndex:"user.mobile",render:function(e){return t.props.activePracticePermissions.PatientPhoneNumber?e:ka(e)},exports:function(e){return e}},{title:"Email",key:"user.email",dataIndex:"user.email",render:function(e){return t.props.activePracticePermissions.PatientEmailId?e:Pa(e)},exports:function(e){return e}},{title:"Gender",key:"gender",dataIndex:"gender"}];return r.a.createElement("div",null,r.a.createElement("h2",null,"Active Patients Report",r.a.createElement("span",{style:{float:"right"}},r.a.createElement("p",null,r.a.createElement("small",null,"E-Mail To:\xa0"),r.a.createElement(ga.a,{onChange:function(t){return e.sendMail(t)},style:{width:200}},this.state.mailingUsersList.map((function(e){return r.a.createElement(ga.a.Option,{value:e.email},e.name)})))))),r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:12,offset:6,style:{textAlign:"center"}},r.a.createElement(ao.a,{title:"Total Patients",value:this.state.report.length}),r.a.createElement("br",null))),r.a.createElement(ti,{loading:this.state.loading,columns:l,hideReport:!0,dataSource:n}))}}]),t}(r.a.Component);function Yp(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Vp(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Yp(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Yp(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Bp=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).sendMail=function(e){var t={from_date:a.props.startDate.format("YYYY-MM-DD"),to_date:a.props.endDate.format("YYYY-MM-DD"),type:a.props.type};a.props.patient_groups&&(t.groups=a.props.patient_groups.toString()),a.props.blood_group&&(t.blood_group=a.props.blood_group),t.mail_to=e,bi(Ze,t)},a.state={startDate:a.props.startDate,endDate:a.props.endDate,report:[],loading:!1,mailingUsersList:[]},a.loadFollowUpPatient=a.loadFollowUpPatient.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadFollowUpPatient(),Ei(this)}},{key:"componentWillReceiveProps",value:function(e){this.props.startDate==e.startDate&&this.props.endDate==e.endDate&&this.props.patient_groups==e.patient_groups&&this.props.blood_group==e.blood_group&&this.props.blood_group==e.blood_group||this.setState({startDate:e.startDate,endDate:e.endDate},(function(){this.loadFollowUpPatient()}))}},{key:"loadFollowUpPatient",value:function(){var e=this;e.setState({loading:!0});var t={follow_start:this.props.startDate.format("YYYY-MM-DD"),follow_end:this.props.endDate.format("YYYY-MM-DD"),type:this.props.type};this.props.patient_groups&&(t.groups=this.props.patient_groups.toString()),this.props.blood_group&&(t.blood_group=this.props.blood_group),Ut(Ze,(function(t){e.setState({report:t,loading:!1})}),(function(){e.setState({loading:!1})}),t)}},{key:"render",value:function(){for(var e=this,t=this,a=this.state.report,n=[],i=1;i<=a.length;i++)n.push(Vp({s_no:i},a[i-1]));var l=[{title:"S. No",key:"s_no",dataIndex:"s_no",width:50},{title:"Patient Name",dataIndex:"user.first_name",key:"first_name"},{title:"Patient Number",key:"id",render:function(e,t){return r.a.createElement("span",null,t.custom_id?t.custom_id:t.id)},exports:function(e,t){return t.custom_id?t.custom_id:t.id}},{title:"Mobile Number",key:"user.mobile",dataIndex:"user.mobile",render:function(e){return t.props.activePracticePermissions.PatientPhoneNumber?e:ka(e)},exports:function(e){return e}},{title:"Email",key:"user.email",dataIndex:"user.email",render:function(e){return t.props.activePracticePermissions.PatientEmailId?e:Pa(e)},exports:function(e){return e}},{title:"Gender",key:"gender",dataIndex:"gender"}];return r.a.createElement("div",null,r.a.createElement("h2",null,"Patient Follow Up Report",r.a.createElement("span",{style:{float:"right"}},r.a.createElement("p",null,r.a.createElement("small",null,"E-Mail To:\xa0"),r.a.createElement(ga.a,{onChange:function(t){return e.sendMail(t)},style:{width:200}},this.state.mailingUsersList.map((function(e){return r.a.createElement(ga.a.Option,{value:e.email},e.name)})))))),r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:12,offset:6,style:{textAlign:"center"}},r.a.createElement(ao.a,{title:"Total Patients",value:this.state.report.length}),r.a.createElement("br",null))),r.a.createElement(ti,{hideReport:!0,loading:this.state.loading,columns:l,dataSource:n}))}}]),t}(r.a.Component);function Hp(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function qp(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Hp(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Hp(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var zp=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).sendMail=function(e){var t={from_date:a.props.startDate.format("YYYY-MM-DD"),to_date:a.props.endDate.format("YYYY-MM-DD"),type:a.props.type};a.props.patient_groups&&(t.groups=a.props.patient_groups.toString()),a.props.blood_group&&(t.blood_group=a.props.blood_group),t.mail_to=e,bi(Ze,t)},a.state={startDate:a.props.startDate,endDate:a.props.endDate,report:[],loading:!1,mailingUsersList:[]},a.loadPatientMedicine=a.loadPatientMedicine.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadPatientMedicine(),Ei(this)}},{key:"componentWillReceiveProps",value:function(e){this.props.startDate==e.startDate&&this.props.endDate==e.endDate&&this.props.patient_groups==e.patient_groups&&this.props.blood_group==e.blood_group&&this.props.blood_group==e.blood_group||this.setState({startDate:e.startDate,endDate:e.endDate},(function(){this.loadPatientMedicine()}))}},{key:"loadPatientMedicine",value:function(){var e=this;e.setState({loading:!0});var t={follow_start:this.props.startDate.format("YYYY-MM-DD"),follow_end:this.props.endDate.format("YYYY-MM-DD"),type:this.props.type};this.props.patient_groups&&(t.groups=this.props.patient_groups.toString()),this.props.blood_group&&(t.blood_group=this.props.blood_group),Ut(Ze,(function(t){e.setState({report:t,loading:!1})}),(function(){e.setState({loading:!1})}),t)}},{key:"render",value:function(){for(var e=this,t=this,a=this.state.report,n=[],i=1;i<=a.length;i++)n.push(qp({s_no:i},a[i-1]));var l=[{title:"S. No",key:"s_no",dataIndex:"s_no",width:50},{title:"Patient Name",dataIndex:"user.first_name",key:"first_name"},{title:"Patient Number",key:"id",render:function(e,t){return r.a.createElement("span",null,t.custom_id?t.custom_id:t.id)},exports:function(e,t){return t.custom_id?t.custom_id:t.id}},{title:"Mobile Number",key:"user.mobile",dataIndex:"user.mobile",render:function(e){return t.props.activePracticePermissions.PatientPhoneNumber?e:ka(e)},exports:function(e){return e}},{title:"Email",key:"user.email",dataIndex:"user.email",render:function(e){return t.props.activePracticePermissions.PatientEmailId?e:Pa(e)},exports:function(e){return e}},{title:"Gender",key:"gender",dataIndex:"gender"}];return r.a.createElement("div",null,r.a.createElement("h2",null,"Patient Medicine Report",r.a.createElement("span",{style:{float:"right"}},r.a.createElement("p",null,r.a.createElement("small",null,"E-Mail To:\xa0"),r.a.createElement(ga.a,{onChange:function(t){return e.sendMail(t)},style:{width:200}},this.state.mailingUsersList.map((function(e){return r.a.createElement(ga.a.Option,{value:e.email},e.name)})))))),r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:12,offset:6,style:{textAlign:"center"}},r.a.createElement(ao.a,{title:"Total Patients",value:n.length}),r.a.createElement("br",null))),r.a.createElement(ti,{loading:this.state.loading,columns:l,hideReport:!0,dataSource:n}))}}]),t}(r.a.Component),Gp=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).onChangeHandle=function(e,t){Object(f.a)(a);a.setState(Object(u.a)({},e,t.target.value))},a.changeSidePanelSize=function(e){a.setState({sidePanelColSpan:e?0:4})},a.handleChangeOption=function(e,t){Object(f.a)(a);a.setState(Object(u.a)({},e,t))},a.state={type:"DETAILED",advancedOptionShow:!0,sidePanelColSpan:4,patientGroup:[],offerOption:[]},a.loadPatientGroup=a.loadPatientGroup.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadPatientGroup()}},{key:"loadPatientGroup",value:function(){var e=this;Ut(Kt(ve,[this.props.active_practiceId]),(function(t){e.setState({patientGroup:t})}),(function(){}))}},{key:"advancedOption",value:function(e){this.setState({advancedOptionShow:e})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h2",null,"Patients Report ",r.a.createElement(da.a,{type:"primary",shape:"round",icon:this.state.sidePanelColSpan?"double-right":"double-left",style:{float:"right"},onClick:function(){return e.changeSidePanelSize(e.state.sidePanelColSpan)}},"Panel")),r.a.createElement(cr.a,null,r.a.createElement(rr.a,{gutter:16},r.a.createElement(ir.a,{span:24-this.state.sidePanelColSpan},"DETAILED"==this.state.type?r.a.createElement(Mp,Object.assign({},this.props,this.state)):null,"DAILY"==this.state.type?r.a.createElement(vp,Object.assign({},this.props,this.state)):null,"EXPIRED"==this.state.type?r.a.createElement(Dp,Object.assign({},this.props,this.state)):null,"patientsfirstappointment"==this.state.type?r.a.createElement(Rp,Object.assign({},this.props,this.state)):null,"MONTHLY"==this.state.type?r.a.createElement(Sp,Object.assign({},this.props,this.state)):null,"NEW"==this.state.type?r.a.createElement(Ip,Object.assign({},this.props,this.state)):null,"ACTIVE"==this.state.type?r.a.createElement(Np,Object.assign({},this.props,this.state)):null,"FOLLOW_UP"==this.state.type?r.a.createElement(Bp,Object.assign({},this.props,this.state)):null,"MEDICINE"==this.state.type?r.a.createElement(zp,Object.assign({},this.props,this.state)):null),r.a.createElement(ir.a,{span:this.state.sidePanelColSpan},r.a.createElement(br.a.Group,{buttonStyle:"solid",defaultValue:"DETAILED",onChange:function(t){return e.onChangeHandle("type",t)}},r.a.createElement("h2",null,"Patients"),r.a.createElement(br.a.Button,{style:{width:"100%",backgroundColor:"transparent",border:"0px"},value:"DETAILED"},"New Patients"),r.a.createElement("p",null,r.a.createElement("br",null)),r.a.createElement("h2",null,"Related Reports"),hn.map((function(e){return r.a.createElement(br.a.Button,{style:{width:"100%",backgroundColor:"transparent"},value:e.value},e.name)}))),r.a.createElement("br",null),r.a.createElement("br",null),"DETAILED"==this.state.type||"DAILY"==this.state.type||"MONTHLY"==this.state.type||"ACTIVE"==this.state.type||"FOLLOW_UP"==this.state.type||"MEDICINE"==this.state.type?r.a.createElement(r.a.Fragment,null,this.state.advancedOptionShow?r.a.createElement(r.a.Fragment,null,r.a.createElement(da.a,{type:"link",onClick:function(t){return e.advancedOption(!1)}},"Hide Advanced Options "),r.a.createElement(ir.a,null," ",r.a.createElement("br",null),r.a.createElement("h4",null,"Patient Groups"),r.a.createElement(ga.a,{style:{minWidth:"200px"},mode:"multiple",placeholder:"Select Patient Groups",onChange:function(t){return e.handleChangeOption("patient_groups",t)}},this.state.patientGroup.map((function(e){return r.a.createElement(ga.a.Option,{value:e.id},e.name)}))),r.a.createElement("br",null),r.a.createElement("h4",null,"Blood Groups"),r.a.createElement(ga.a,{style:{minWidth:"200px"},placeholder:"Select Blood Group",onChange:function(t){return e.handleChangeOption("blood_group",t)},allowClear:!0},En.map((function(e){return r.a.createElement(ga.a.Option,{value:e.value},e.name)}))))):r.a.createElement(da.a,{type:"link",onClick:function(t){return e.advancedOption(!0)}},"Show Advanced Options ")):null))))}}]),t}(r.a.Component),Up=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).loadPaymentsReport=function(){var e=Object(f.a)(a),t={type:e.props.type,start:a.state.startDate.format("YYYY-MM-DD"),end:a.state.endDate.format("YYYY-MM-DD"),exclude_cancelled:!!a.props.exclude_cancelled};a.props.taxes&&(t.taxes=a.props.taxes.toString()),a.props.patient_groups&&(t.patient_groups=a.props.patient_groups.toString()),a.props.payment_mode&&(t.payment_mode=a.props.payment_mode.toString()),a.props.doctors&&(t.doctors=a.props.doctors.toString()),a.props.consume&&(t.consume=a.props.consume.toString()),Ut(Kt(rt,[e.props.active_practiceId]),(function(t){e.setState({report:t.data,total:t.total,loading:!1})}),(function(){e.setState({loading:!1})}),t)},a.onPieEnter=function(e,t){a.setState({activeIndex:t})},a.state={startDate:a.props.startDate,endDate:a.props.endDate,loading:!0,report:[]},a.loadPaymentsReport=a.loadPaymentsReport.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadPaymentsReport()}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.startDate==e.startDate&&this.props.endDate==e.endDate&&this.props.patient_groups==e.patient_groups&&this.props.taxes==e.taxes&&this.props.doctors==e.doctors&&this.props.payment_mode==e.payment_mode&&this.props.consume==e.consume&&this.props.exclude_cancelled==e.exclude_cancelled||this.setState({startDate:e.startDate,endDate:e.endDate},(function(){t.loadPaymentsReport()}))}},{key:"render",value:function(){var e=[{title:"Date",key:"date",render:function(e,t){return r.a.createElement("span",null,Or()(t.shedule_at).format("LL"))}},{title:"Scheduled At\t",key:"time",render:function(e,t){return r.a.createElement("span",null,Or()(t.shedule_at).format("HH:mm"))}},{title:"Patient",dataIndex:"age",key:"age"},{title:"Receipt Number",dataIndex:"age",key:"age"},{title:"Invoice(s)",dataIndex:"age",key:"age"},{title:"Treatments & Products",dataIndex:"age",key:"age"},{title:"Amount Paid (INR)\t",dataIndex:"patient_name",key:"patient_name"},{title:"Advance Amount (INR)",dataIndex:"address",key:"address"},{title:"Payment Info\t",dataIndex:"address",key:"address"},{title:"Vendor Fees (INR)",dataIndex:"address",key:"address"}];return r.a.createElement("div",null,r.a.createElement("h2",null,"All Payments Report"),r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:12,offset:6,style:{textAlign:"center"}},r.a.createElement("br",null))),r.a.createElement(ti,{loading:this.state.loading,columns:e,dataSource:this.state.report}))}}]),t}(r.a.Component),Wp=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).loadPaymentsReport=function(){var e=Object(f.a)(a),t={type:e.props.type,start:a.state.startDate.format("YYYY-MM-DD"),end:a.state.endDate.format("YYYY-MM-DD"),exclude_cancelled:!!a.props.exclude_cancelled};a.props.taxes&&(t.taxes=a.props.taxes.toString()),a.props.patient_groups&&(t.patient_groups=a.props.patient_groups.toString()),a.props.payment_mode&&(t.payment_mode=a.props.payment_mode.toString()),a.props.doctors&&(t.doctors=a.props.doctors.toString()),a.props.consume&&(t.consume=a.props.consume.toString()),Ut(Kt(rt,[e.props.active_practiceId]),(function(t){e.setState({report:t.data,total:t.total,loading:!1})}),(function(){e.setState({loading:!1})}),t)},a.state={startDate:a.props.startDate,endDate:a.props.endDate,loading:!0,report:[]},a.loadPaymentsReport=a.loadPaymentsReport.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadPaymentsReport()}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.startDate==e.startDate&&this.props.endDate==e.endDate&&this.props.patient_groups==e.patient_groups&&this.props.taxes==e.taxes&&this.props.doctors==e.doctors&&this.props.payment_mode==e.payment_mode&&this.props.consume==e.consume&&this.props.exclude_cancelled==e.exclude_cancelled||this.setState({startDate:e.startDate,endDate:e.endDate},(function(){t.loadPaymentsReport()}))}},{key:"render",value:function(){var e=1,t=[{title:"S. No",key:"sno",dataIndex:"sno",render:function(t,a){return r.a.createElement("span",null," ",e++)},export:function(e,t,a){return a+1},width:50}];return r.a.createElement("div",null,r.a.createElement("h2",null,"Credit Amount Per Doctor"),r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:12,offset:6,style:{textAlign:"center"}},r.a.createElement("br",null))),r.a.createElement(ti,{loading:this.state.loading,columns:t,dataSource:this.state.report}))}}]),t}(r.a.Component),Kp=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).loadPaymentsReport=function(){var e=Object(f.a)(a);e.setState({loading:!0});var t={type:e.props.type,start:a.state.startDate.format("YYYY-MM-DD"),end:a.state.endDate.format("YYYY-MM-DD"),exclude_cancelled:!!a.props.exclude_cancelled};a.props.taxes&&(t.taxes=a.props.taxes.toString()),a.props.patient_groups&&(t.patient_groups=a.props.patient_groups.toString()),a.props.payment_mode&&(t.payment_mode=a.props.payment_mode.toString()),a.props.doctors&&(t.doctors=a.props.doctors.toString()),a.props.consume&&(t.consume=a.props.consume.toString()),Ut(Kt(rt,[e.props.active_practiceId]),(function(t){e.setState({report:t.data,total:t.total,loading:!1})}),(function(){e.setState({loading:!1})}),t)},a.state={startDate:a.props.startDate,endDate:a.props.endDate,loading:!1,report:[]},a.loadPaymentsReport=a.loadPaymentsReport.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadPaymentsReport()}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.startDate==e.startDate&&this.props.endDate==e.endDate&&this.props.patient_groups==e.patient_groups&&this.props.taxes==e.taxes&&this.props.doctors==e.doctors&&this.props.payment_mode==e.payment_mode&&this.props.consume==e.consume&&this.props.exclude_cancelled==e.exclude_cancelled||this.setState({startDate:e.startDate,endDate:e.endDate},(function(){t.loadPaymentsReport()}))}},{key:"render",value:function(){var e=1,t=[{title:"S. No",key:"sno",dataIndex:"sno",render:function(t,a){return r.a.createElement("span",null," ",e++)},export:function(e,t,a){return a+1},width:50}];return r.a.createElement("div",null,r.a.createElement("h2",null,"Refund Payments"),r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:12,offset:6,style:{textAlign:"center"}},r.a.createElement("br",null))),r.a.createElement(ti,{loading:this.state.loading,columns:t,dataSource:this.state.report}))}}]),t}(r.a.Component),Qp=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).loadPaymentsReport=function(){var e=Object(f.a)(a);e.setState({loading:!0});var t={type:e.props.type,start:a.state.startDate.format("YYYY-MM-DD"),end:a.state.endDate.format("YYYY-MM-DD"),exclude_cancelled:!!a.props.exclude_cancelled};a.props.taxes&&(t.taxes=a.props.taxes.toString()),a.props.patient_groups&&(t.patient_groups=a.props.patient_groups.toString()),a.props.payment_mode&&(t.payment_mode=a.props.payment_mode.toString()),a.props.doctors&&(t.doctors=a.props.doctors.toString()),a.props.consume&&(t.consume=a.props.consume.toString()),Ut(Kt(rt,[e.props.active_practiceId]),(function(t){e.setState({report:t.data,total:t.total,loading:!1})}),(function(){e.setState({loading:!1})}),t)},a.state={startDate:a.props.startDate,endDate:a.props.endDate,loading:!1,report:[]},a.loadPaymentsReport=a.loadPaymentsReport.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadPaymentsReport()}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.startDate==e.startDate&&this.props.endDate==e.endDate&&this.props.patient_groups==e.patient_groups&&this.props.taxes==e.taxes&&this.props.doctors==e.doctors&&this.props.payment_mode==e.payment_mode&&this.props.consume==e.consume&&this.props.exclude_cancelled==e.exclude_cancelled||this.setState({startDate:e.startDate,endDate:e.endDate},(function(){t.loadPaymentsReport()}))}},{key:"render",value:function(){var e=1,t=[{title:"S. No",key:"sno",dataIndex:"sno",render:function(t,a){return r.a.createElement("span",null," ",e++)},export:function(e,t,a){return a+1},width:50}];return r.a.createElement("div",null,r.a.createElement("h2",null,"Payment Received Each Patient Group"),r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:12,offset:6,style:{textAlign:"center"}},r.a.createElement("br",null))),r.a.createElement(ti,{loading:this.state.loading,columns:t,dataSource:this.state.report}))}}]),t}(r.a.Component),Zp=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).loadPaymentsReport=function(){var e=Object(f.a)(a);e.setState({loading:!0});var t={type:e.props.type,start:a.state.startDate.format("YYYY-MM-DD"),end:a.state.endDate.format("YYYY-MM-DD"),exclude_cancelled:!!a.props.exclude_cancelled};a.props.taxes&&(t.taxes=a.props.taxes.toString()),a.props.patient_groups&&(t.patient_groups=a.props.patient_groups.toString()),a.props.payment_mode&&(t.payment_mode=a.props.payment_mode.toString()),a.props.doctors&&(t.doctors=a.props.doctors.toString()),a.props.consume&&(t.consume=a.props.consume.toString()),Ut(Kt(rt,[e.props.active_practiceId]),(function(t){e.setState({report:t.data,total:t.total,loading:!1})}),(function(){e.setState({loading:!1})}),t)},a.state={startDate:a.props.startDate,endDate:a.props.endDate,loading:!1,report:[]},a.loadPaymentsReport=a.loadPaymentsReport.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadPaymentsReport()}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.startDate==e.startDate&&this.props.endDate==e.endDate&&this.props.patient_groups==e.patient_groups&&this.props.taxes==e.taxes&&this.props.doctors==e.doctors&&this.props.payment_mode==e.payment_mode&&this.props.consume==e.consume&&this.props.exclude_cancelled==e.exclude_cancelled||this.setState({startDate:e.startDate,endDate:e.endDate},(function(){t.loadPaymentsReport()}))}},{key:"render",value:function(){var e=1,t=[{title:"S. No",key:"sno",dataIndex:"sno",render:function(t,a){return r.a.createElement("span",null," ",e++)},export:function(e,t,a){return a+1},width:50}];return r.a.createElement("div",null,r.a.createElement("h2",null,"Patients With Unsettled Advance"),r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:12,offset:6,style:{textAlign:"center"}},r.a.createElement("br",null))),r.a.createElement(ti,{loading:this.state.loading,columns:t,dataSource:this.state.report}))}}]),t}(r.a.Component),Xp=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).loadPaymentsReport=function(){var e=Object(f.a)(a);e.setState({loading:!0});var t={type:e.props.type,start:a.state.startDate.format("YYYY-MM-DD"),end:a.state.endDate.format("YYYY-MM-DD"),exclude_cancelled:!!a.props.exclude_cancelled};a.props.taxes&&(t.taxes=a.props.taxes.toString()),a.props.patient_groups&&(t.patient_groups=a.props.patient_groups.toString()),a.props.payment_mode&&(t.payment_mode=a.props.payment_mode.toString()),a.props.doctors&&(t.doctors=a.props.doctors.toString()),a.props.consume&&(t.consume=a.props.consume.toString()),Ut(Kt(rt,[e.props.active_practiceId]),(function(t){e.setState({report:t.data,total:t.total,loading:!1})}),(function(){e.setState({loading:!1})}),t)},a.state={startDate:a.props.startDate,endDate:a.props.endDate,loading:!1,report:[]},a.loadPaymentsReport=a.loadPaymentsReport.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadPaymentsReport()}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.startDate==e.startDate&&this.props.endDate==e.endDate&&this.props.patient_groups==e.patient_groups&&this.props.taxes==e.taxes&&this.props.doctors==e.doctors&&this.props.payment_mode==e.payment_mode&&this.props.consume==e.consume&&this.props.exclude_cancelled==e.exclude_cancelled||this.setState({startDate:e.startDate,endDate:e.endDate},(function(){t.loadPaymentsReport()}))}},{key:"render",value:function(){var e=1,t=[{title:"S. No",key:"sno",dataIndex:"sno",render:function(t,a){return r.a.createElement("span",null," ",e++)},export:function(e,t,a){return a+1},width:50}];return r.a.createElement("div",null,r.a.createElement("h2",null,"Modes of Payment"),r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:12,offset:6,style:{textAlign:"center"}},r.a.createElement("br",null))),r.a.createElement(ti,{loading:this.state.loading,columns:t,dataSource:this.state.report}))}}]),t}(r.a.Component),Jp=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).loadPaymentsReport=function(){var e=Object(f.a)(a);e.setState({loading:!0});var t={type:e.props.type,start:a.state.startDate.format("YYYY-MM-DD"),end:a.state.endDate.format("YYYY-MM-DD"),exclude_cancelled:!!a.props.exclude_cancelled};a.props.taxes&&(t.taxes=a.props.taxes.toString()),a.props.patient_groups&&(t.patient_groups=a.props.patient_groups.toString()),a.props.payment_mode&&(t.payment_mode=a.props.payment_mode.toString()),a.props.doctors&&(t.doctors=a.props.doctors.toString()),a.props.consume&&(t.consume=a.props.consume.toString()),Ut(Kt(rt,[e.props.active_practiceId]),(function(t){e.setState({report:t.data,total:t.total,loading:!1})}),(function(){e.setState({loading:!1})}),t)},a.state={startDate:a.props.startDate,endDate:a.props.endDate,loading:!1,report:[]},a.loadPaymentsReport=a.loadPaymentsReport.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadPaymentsReport()}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.startDate==e.startDate&&this.props.endDate==e.endDate&&this.props.patient_groups==e.patient_groups&&this.props.taxes==e.taxes&&this.props.doctors==e.doctors&&this.props.payment_mode==e.payment_mode&&this.props.consume==e.consume&&this.props.exclude_cancelled==e.exclude_cancelled||this.setState({startDate:e.startDate,endDate:e.endDate},(function(){t.loadPaymentsReport()}))}},{key:"render",value:function(){var e=1,t=[{title:"S. No",key:"sno",dataIndex:"sno",render:function(t,a){return r.a.createElement("span",null," ",e++)},export:function(e,t,a){return a+1},width:50}];return r.a.createElement("div",null,r.a.createElement("h2",null,"Payment Received Per Day"),r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:12,offset:6,style:{textAlign:"center"}},r.a.createElement("br",null))),r.a.createElement(ti,{loading:this.state.loading,columns:t,dataSource:this.state.report}))}}]),t}(r.a.Component),$p=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).loadPaymentsReport=function(){var e=Object(f.a)(a);e.setState({loading:!0});var t={type:e.props.type,start:a.state.startDate.format("YYYY-MM-DD"),end:a.state.endDate.format("YYYY-MM-DD"),exclude_cancelled:!!a.props.exclude_cancelled};a.props.taxes&&(t.taxes=a.props.taxes.toString()),a.props.patient_groups&&(t.patient_groups=a.props.patient_groups.toString()),a.props.payment_mode&&(t.payment_mode=a.props.payment_mode.toString()),a.props.doctors&&(t.doctors=a.props.doctors.toString()),a.props.consume&&(t.consume=a.props.consume.toString()),Ut(Kt(rt,[e.props.active_practiceId]),(function(t){e.setState({report:t.data,total:t.total,loading:!1})}),(function(){e.setState({loading:!1})}),t)},a.state={startDate:a.props.startDate,endDate:a.props.endDate,loading:!1,report:[]},a.loadPaymentsReport=a.loadPaymentsReport.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadPaymentsReport()}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.startDate==e.startDate&&this.props.endDate==e.endDate&&this.props.patient_groups==e.patient_groups&&this.props.taxes==e.taxes&&this.props.doctors==e.doctors&&this.props.payment_mode==e.payment_mode&&this.props.consume==e.consume&&this.props.exclude_cancelled==e.exclude_cancelled||this.setState({startDate:e.startDate,endDate:e.endDate},(function(){t.loadPaymentsReport()}))}},{key:"render",value:function(){var e=1,t=[{title:"S. No",key:"sno",dataIndex:"sno",render:function(t,a){return r.a.createElement("span",null," ",e++)},export:function(e,t,a){return a+1},width:50}];return r.a.createElement("div",null,r.a.createElement("h2",null,"Payment Received Per Month"),r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:12,offset:6,style:{textAlign:"center"}},r.a.createElement("br",null))),r.a.createElement(ti,{loading:this.state.loading,columns:t,dataSource:this.state.report}))}}]),t}(r.a.Component),em=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).loadPaymentsReport=function(){var e=Object(f.a)(a);e.setState({loading:!0});var t={type:e.props.type,start:a.state.startDate.format("YYYY-MM-DD"),end:a.state.endDate.format("YYYY-MM-DD"),exclude_cancelled:!!a.props.exclude_cancelled};a.props.taxes&&(t.taxes=a.props.taxes.toString()),a.props.patient_groups&&(t.patient_groups=a.props.patient_groups.toString()),a.props.payment_mode&&(t.payment_mode=a.props.payment_mode.toString()),a.props.doctors&&(t.doctors=a.props.doctors.toString()),a.props.consume&&(t.consume=a.props.consume.toString()),Ut(Kt(rt,[e.props.active_practiceId]),(function(t){e.setState({report:t.data,total:t.total,loading:!1})}),(function(){e.setState({loading:!1})}),t)},a.state={startDate:a.props.startDate,endDate:a.props.endDate,loading:!1,report:[]},a.loadPaymentsReport=a.loadPaymentsReport.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadPaymentsReport()}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.startDate==e.startDate&&this.props.endDate==e.endDate&&this.props.patient_groups==e.patient_groups&&this.props.taxes==e.taxes&&this.props.doctors==e.doctors&&this.props.payment_mode==e.payment_mode&&this.props.consume==e.consume&&this.props.exclude_cancelled==e.exclude_cancelled||this.setState({startDate:e.startDate,endDate:e.endDate},(function(){t.loadPaymentsReport()}))}},{key:"render",value:function(){var e=1,t=[{title:"S. No",key:"sno",dataIndex:"sno",render:function(t,a){return r.a.createElement("span",null," ",e++)},export:function(e,t,a){return a+1},width:50}];return r.a.createElement("div",null,r.a.createElement("h2",null,"Payment Received Per Doctor"),r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:12,offset:6,style:{textAlign:"center"}},r.a.createElement("br",null))),r.a.createElement(ti,{loading:this.state.loading,columns:t,dataSource:this.state.report}))}}]),t}(r.a.Component),tm=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).loadPaymentsReport=function(){var e=Object(f.a)(a);e.setState({loading:!0});var t={type:e.props.type,start:a.state.startDate.format("YYYY-MM-DD"),end:a.state.endDate.format("YYYY-MM-DD"),exclude_cancelled:!!a.props.exclude_cancelled};a.props.taxes&&(t.taxes=a.props.taxes.toString()),a.props.patient_groups&&(t.patient_groups=a.props.patient_groups.toString()),a.props.payment_mode&&(t.payment_mode=a.props.payment_mode.toString()),a.props.doctors&&(t.doctors=a.props.doctors.toString()),a.props.consume&&(t.consume=a.props.consume.toString()),Ut(Kt(rt,[e.props.active_practiceId]),(function(t){e.setState({report:t.data,total:t.total,loading:!1})}),(function(){e.setState({loading:!1})}),t)},a.state={startDate:a.props.startDate,endDate:a.props.endDate,loading:!1,report:[]},a.loadPaymentsReport=a.loadPaymentsReport.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadPaymentsReport()}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.startDate==e.startDate&&this.props.endDate==e.endDate&&this.props.patient_groups==e.patient_groups&&this.props.taxes==e.taxes&&this.props.doctors==e.doctors&&this.props.payment_mode==e.payment_mode&&this.props.consume==e.consume&&this.props.exclude_cancelled==e.exclude_cancelled||this.setState({startDate:e.startDate,endDate:e.endDate},(function(){t.loadPaymentsReport()}))}},{key:"render",value:function(){var e=1,t=[{title:"S. No",key:"sno",dataIndex:"sno",render:function(t,a){return r.a.createElement("span",null," ",e++)},export:function(e,t,a){return a+1},width:50}];return r.a.createElement("div",null,r.a.createElement("h2",null,"Credit Notes"),r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:12,offset:6,style:{textAlign:"center"}},r.a.createElement("br",null))),r.a.createElement(ti,{loading:this.state.loading,columns:t,dataSource:this.state.report}))}}]),t}(r.a.Component),am=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).loadPaymentsReport=function(){var e=Object(f.a)(a);e.setState({loading:!0});var t={type:e.props.type,start:a.state.startDate.format("YYYY-MM-DD"),end:a.state.endDate.format("YYYY-MM-DD"),exclude_cancelled:!!a.props.exclude_cancelled};a.props.taxes&&(t.taxes=a.props.taxes.toString()),a.props.patient_groups&&(t.patient_groups=a.props.patient_groups.toString()),a.props.payment_mode&&(t.payment_mode=a.props.payment_mode.toString()),a.props.doctors&&(t.doctors=a.props.doctors.toString()),a.props.consume&&(t.consume=a.props.consume.toString()),Ut(Kt(rt,[e.props.active_practiceId]),(function(t){e.setState({report:t.data,total:t.total,loading:!1})}),(function(){e.setState({loading:!1})}),t)},a.state={startDate:a.props.startDate,endDate:a.props.endDate,loading:!1,report:[]},a.loadPaymentsReport=a.loadPaymentsReport.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadPaymentsReport()}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.startDate==e.startDate&&this.props.endDate==e.endDate&&this.props.patient_groups==e.patient_groups&&this.props.taxes==e.taxes&&this.props.doctors==e.doctors&&this.props.payment_mode==e.payment_mode&&this.props.consume==e.consume&&this.props.exclude_cancelled==e.exclude_cancelled||this.setState({startDate:e.startDate,endDate:e.endDate},(function(){t.loadPaymentsReport()}))}},{key:"render",value:function(){var e=1,t=[{title:"S. No",key:"sno",dataIndex:"sno",render:function(t,a){return r.a.createElement("span",null," ",e++)},export:function(e,t,a){return a+1},width:50}];return r.a.createElement("div",null,r.a.createElement("h2",null,"Payment Settlement"),r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:12,offset:6,style:{textAlign:"center"}},r.a.createElement("br",null))),r.a.createElement(ti,{loading:this.state.loading,columns:t,dataSource:this.state.report}))}}]),t}(r.a.Component),nm=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).loadPaymentsReport=function(){var e=Object(f.a)(a);e.setState({loading:!0});var t={type:e.props.type,start:a.state.startDate.format("YYYY-MM-DD"),end:a.state.endDate.format("YYYY-MM-DD"),exclude_cancelled:!!a.props.exclude_cancelled};a.props.taxes&&(t.taxes=a.props.taxes.toString()),a.props.patient_groups&&(t.patient_groups=a.props.patient_groups.toString()),a.props.payment_mode&&(t.payment_mode=a.props.payment_mode.toString()),a.props.doctors&&(t.doctors=a.props.doctors.toString()),a.props.consume&&(t.consume=a.props.consume.toString()),Ut(Kt(rt,[e.props.active_practiceId]),(function(t){e.setState({report:t.data,total:t.total,loading:!1})}),(function(){e.setState({loading:!1})}),t)},a.state={startDate:a.props.startDate,endDate:a.props.endDate,loading:!1,report:[]},a.loadPaymentsReport=a.loadPaymentsReport.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadPaymentsReport()}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.startDate==e.startDate&&this.props.endDate==e.endDate&&this.props.patient_groups==e.patient_groups&&this.props.taxes==e.taxes&&this.props.doctors==e.doctors&&this.props.payment_mode==e.payment_mode&&this.props.consume==e.consume&&this.props.exclude_cancelled==e.exclude_cancelled||this.setState({startDate:e.startDate,endDate:e.endDate},(function(){t.loadPaymentsReport()}))}},{key:"render",value:function(){var e=1,t=[{title:"S. No",key:"sno",dataIndex:"sno",render:function(t,a){return r.a.createElement("span",null," ",e++)},export:function(e,t,a){return a+1},width:50}];return r.a.createElement("div",null,r.a.createElement("h2",null,"Payment Settlement Per Doctor"),r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:12,offset:6,style:{textAlign:"center"}},r.a.createElement("br",null))),r.a.createElement(ti,{loading:this.state.loading,columns:t,dataSource:this.state.report}))}}]),t}(r.a.Component),rm=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).onChangeHandle=function(e,t){Object(f.a)(a);a.setState(Object(u.a)({},e,t.target.value))},a.changeSidePanelSize=function(e){a.setState({sidePanelColSpan:e?0:4})},a.handleChangeOption=function(e,t){Object(f.a)(a);a.setState(Object(u.a)({},e,t))},a.onChangeCheckbox=function(e){a.setState({exclude_cancelled:!a.state.exclude_cancelled})},a.state={advancedOptionShow:!0,paymentModeOption:[],sidePanelColSpan:4,type:"ALL",practiceDoctors:[],patientGroup:[],vendorOption:[],taxes_list:[]},mi(Object(f.a)(a)),a.loadPatientGroup=a.loadPatientGroup.bind(Object(f.a)(a)),a.loadPaymentMode=a.loadPaymentMode.bind(Object(f.a)(a)),a.loadTaxes=a.loadTaxes.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadPatientGroup(),this.loadPaymentMode(),this.loadTaxes()}},{key:"loadPatientGroup",value:function(){var e=this;Ut(Kt(ve,[this.props.active_practiceId]),(function(t){e.setState({patientGroup:t})}),(function(){}))}},{key:"loadPaymentMode",value:function(){var e=this;Ut(Kt(te,[this.props.active_practiceId]),(function(t){e.setState({paymentModeOption:t})}),(function(){}))}},{key:"loadTaxes",value:function(){var e=this;Ut(Kt($,[this.props.active_practiceId]),(function(t){e.setState({taxes_list:t})}),(function(){}))}},{key:"advancedOption",value:function(e){this.setState({advancedOptionShow:e})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h2",null,"Payments Report ",r.a.createElement(da.a,{type:"primary",shape:"round",icon:this.state.sidePanelColSpan?"double-right":"double-left",style:{float:"right"},onClick:function(){return e.changeSidePanelSize(e.state.sidePanelColSpan)}},"Panel")),r.a.createElement(cr.a,null,r.a.createElement(rr.a,{gutter:16},r.a.createElement(ir.a,{span:24-this.state.sidePanelColSpan},"ALL"==this.state.type?r.a.createElement(Up,Object.assign({},this.props,this.state)):null,"REFUND"==this.state.type?r.a.createElement(Kp,Object.assign({},this.props,this.state)):null,"GROUP"==this.state.type?r.a.createElement(Qp,Object.assign({},this.props,this.state)):null,"ADVANCE"==this.state.type?r.a.createElement(Zp,Object.assign({},this.props,this.state)):null,"MODE"==this.state.type?r.a.createElement(Xp,Object.assign({},this.props,this.state)):null,"DAY"==this.state.type?r.a.createElement(Jp,Object.assign({},this.props,this.state)):null,"MONTH"==this.state.type?r.a.createElement($p,Object.assign({},this.props,this.state)):null,"PER_DOCTOR"==this.state.type?r.a.createElement(em,Object.assign({},this.props,this.state)):null,"NOTES"==this.state.type?r.a.createElement(tm,Object.assign({},this.props,this.state)):null,"SETTLEMENT"==this.state.type?r.a.createElement(am,Object.assign({},this.props,this.state)):null,"SETTLEMENT_DOCTOR"==this.state.type?r.a.createElement(nm,Object.assign({},this.props,this.state)):null,"DOCTOR"==this.state.type?r.a.createElement(Wp,Object.assign({},this.state,this.props)):null),r.a.createElement(ir.a,{span:this.state.sidePanelColSpan},r.a.createElement(br.a.Group,{buttonStyle:"solid",defaultValue:"ALL",onChange:function(t){return e.onChangeHandle("type",t)}},r.a.createElement("h2",null,"Payments"),r.a.createElement(br.a.Button,{style:{width:"100%",backgroundColor:"transparent",border:"0px"},value:"ALL"},"All Payments"),r.a.createElement("p",null,r.a.createElement("br",null)),r.a.createElement("h2",null,"Related Reports"),Dn.map((function(e){return r.a.createElement(br.a.Button,{style:{width:"100%",backgroundColor:"transparent",border:"0px"},value:e.value},e.name)}))),r.a.createElement("br",null),r.a.createElement("br",null),this.state.advancedOptionShow?r.a.createElement(r.a.Fragment,null,r.a.createElement(da.a,{type:"link",onClick:function(t){return e.advancedOption(!1)}},"Hide Advanced Options "),r.a.createElement(ir.a,null," ",r.a.createElement("br",null),r.a.createElement("h4",null,"Show"),r.a.createElement(pr.a.Group,{style:{width:"100%",display:"inline-grid"},onChange:function(t){return e.handleChangeOption("consume",t)}},jn.map((function(e){return r.a.createElement(pr.a,{value:e.value}," ",e.label)}))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h4",null,"Doctors"),r.a.createElement(ga.a,{style:{minWidth:"200px"},mode:"multiple",placeholder:"Select Doctors",onChange:function(t){return e.handleChangeOption("doctors",t)}},this.state.practiceDoctors.map((function(e){return r.a.createElement(ga.a.Option,{value:e.id},e.user.first_name)}))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h4",null,"Patient Groups"),r.a.createElement(ga.a,{style:{minWidth:"200px"},mode:"multiple",placeholder:"Select Patient Groups",onChange:function(t){return e.handleChangeOption("patient_groups",t)}},this.state.patientGroup.map((function(e){return r.a.createElement(ga.a.Option,{value:e.id},e.name)}))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h4",null,"Payment Modes"),r.a.createElement(ga.a,{style:{minWidth:"200px"},mode:"multiple",placeholder:"Select Payment Modes",onChange:function(t){return e.handleChangeOption("payment_mode",t)}},this.state.paymentModeOption.map((function(e){return r.a.createElement(ga.a.Option,{value:e.id},e.mode)}))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h4",null,"Taxes"),r.a.createElement(ga.a,{style:{minWidth:"200px"},mode:"multiple",placeholder:"Select Taxes",onChange:function(t){return e.handleChangeOption("taxes",t)}},this.state.taxes_list.map((function(e){return r.a.createElement(ga.a.Option,{value:e.id},e.name)}))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(pr.a,{onChange:function(t){return e.onChangeCheckbox(t)}}," Exclude Cancelled"))):r.a.createElement(da.a,{type:"link",onClick:function(t){return e.advancedOption(!0)}},"Show Advanced Options ")))))}}]),t}(r.a.Component);function im(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function lm(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?im(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):im(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var om=no.a.Text,sm=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={startDate:a.props.startDate,endDate:a.props.endDate,loading:!1,dailySummary:[],practiceDoctors:[],paidAmountForPaymentMode:{}},a.loadDailySummary=a.loadDailySummary.bind(Object(f.a)(a)),mi(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadDailySummary()}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.startDate==e.startDate&&this.props.endDate==e.endDate||this.setState({startDate:e.startDate,endDate:e.endDate},(function(){t.loadDailySummary()}))}},{key:"loadDailySummary",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this;t.setState({loading:!0});var a=function(e){t.setState((function(t){var a=[],n={type:"FINAL",unit_cost:0,tax_value:0,unit:1,total:0,discount_value:0,invoice:{inventory:[],prescription:[],procedure:[],payments:[]},paidAmount:0},r={};return e.current>1&&(r=lm({},t.paidAmountForPaymentMode)),e.results.length&&e.results.forEach((function(e){e.inventory.forEach((function(t){a.push(lm({},t,{invoice:e})),n.unit_cost+=t.unit_cost*t.unit,n.tax_value+=t.tax_value,n.discount_value+=t.discount_value,n.total+=t.total})),e.prescription.forEach((function(t){a.push(lm({},t,{invoice:e})),n.unit_cost+=t.unit_cost*t.unit,n.tax_value+=t.tax_value,n.discount_value+=t.discount_value,n.total+=t.total})),e.procedure.forEach((function(t){a.push(lm({},t,{invoice:e})),n.unit_cost+=t.unit_cost*t.unit,n.tax_value+=t.tax_value,n.discount_value+=t.discount_value,n.total+=t.total})),n.paidAmount+=e.payments.map((function(e){return e.pay_amount})).reduce((function(e,t){return e+t}),0),e.payments.forEach((function(e){r[e.payment_mode]?r[e.payment_mode]+=e.pay_amount:r[e.payment_mode]=e.pay_amount}))})),e.count&&!e.next&&a.push(n),1==e.current?{loading:!1,dailySummary:a,nextItemPage:e.next,paidAmountForPaymentMode:r}:{loading:!1,dailySummary:[].concat(Object(Oa.a)(t.dailySummary),a),nextItemPage:e.next,paidAmountForPaymentMode:r}}))},n=function(){t.setState({loading:!1})},r={page:e,start:this.state.startDate.format("YYYY-MM-DD"),end:this.state.endDate.format("YYYY-MM-DD"),practice:this.props.active_practiceId};this.state.doctors&&(r.doctor=this.state.doctors.toString()),Ut(Me,a,n,r)}},{key:"filterReport",value:function(e,t){this.setState((function(a){return Object(u.a)({},e,t)}),(function(){this.loadDailySummary()}))}},{key:"render",value:function(){var e=this,t=this,a=1,n=null,i=null,l=null,o=null,s=null,c=null,u=[{title:"S. No",key:"sno",dataIndex:"abcd",align:"center",render:function(e,t,i){var l={props:{}};return t.invoice.invoice_id==n?l.props.rowSpan=0:(n=t.invoice.invoice_id,l.children="FINAL"==t.type?"--":r.a.createElement("span",null," ",a++),l.props.rowSpan=t.invoice.inventory.length+t.invoice.prescription.length+t.invoice.procedure.length,"FINAL"==t.type&&(l.props.rowSpan=1)),l},width:50},{title:"Patient Name",key:"patient_name",dataIndex:"invoice.patient_data.user.first_name",render:function(e,t,a){var n={props:{}};if(t.invoice.invoice_id==i)n.props.rowSpan=0;else{i=t.invoice.invoice_id;var l=t.invoice.payments.map((function(e){return e.pay_amount})).reduce((function(e,t){return e+t}),0).toFixed(2);n.children="FINAL"==t.type?"--":r.a.createElement("span",null,r.a.createElement("b",null,e," (",t.invoice.patient_data.custom_id,")"),r.a.createElement("br",null),r.a.createElement("span",null,"Invoice Income: ",r.a.createElement(om,{type:"danger"},"INR\xa0",t.invoice.total.toFixed(2))),r.a.createElement("br",null),r.a.createElement("span",null,"Total Payment: ",r.a.createElement(om,{type:"danger"},"INR\xa0",l)),r.a.createElement("br",null),r.a.createElement("span",null,"Amount Due: ",r.a.createElement(om,{type:"danger"},"INR\xa0",(t.invoice.total-l).toFixed(2))),r.a.createElement("br",null)),n.props.rowSpan=t.invoice.inventory.length+t.invoice.prescription.length+t.invoice.procedure.length,"FINAL"==t.type&&(n.props.rowSpan=1)}return n}},{title:"Treatment & Products",dataIndex:"name",key:"name"},{title:"Cost (INR)",key:"unit_cost",dataIndex:"unit_cost",align:"right",render:function(e,t){return t.unit_cost?r.a.createElement("span",null,(t.unit_cost.toFixed(2)*t.unit).toFixed(2),"FINAL"==t.type?null:r.a.createElement("span",null,r.a.createElement("br",null),r.a.createElement("small",null,t.unit_cost.toFixed(2),"x",t.unit))):"--"}},{title:"Discount (INR)",key:"discount_value",dataIndex:"discount_value",align:"right",render:function(e,t){return r.a.createElement("span",null,e.toFixed(2))}},{title:"Tax",dataIndex:"tax_value",key:"taxes",align:"right",render:function(e,t){return r.a.createElement("span",null,e.toFixed(2))}},{title:"Invoice No.",key:"invoice_id",dataIndex:"invoice.invoice_id",render:function(e,t){return r.a.createElement("span",null,e,r.a.createElement("br",null),r.a.createElement("small",null,t.invoice.date))}},{title:"Invoice Cost (INR)",key:"invoice_cost",dataIndex:"total",align:"right",render:function(e,t){return r.a.createElement("span",null,e.toFixed(2))}},{title:"Receipt No",key:"payment_data.payment_id",dataIndex:"",render:function(e,t,a){var n={props:{}};return t.invoice.invoice_id==l?n.props.rowSpan=0:(l=t.invoice.invoice_id,n.children=r.a.createElement("span",null,t.invoice.payments.map((function(e){return r.a.createElement("span",null,e.payment_id,r.a.createElement("br",null))}))),n.props.rowSpan=t.invoice.inventory.length+t.invoice.prescription.length+t.invoice.procedure.length,"FINAL"==t.type&&(n.props.rowSpan=1)),n}},{title:"Mode Of Payment",key:"mode_of_payments",dataIndex:"payment_mode",align:"center",render:function(e,t,a){var n={props:{}};return t.invoice.invoice_id==o?n.props.rowSpan=0:(o=t.invoice.invoice_id,n.children=r.a.createElement("span",null,t.invoice.payments.map((function(e){return r.a.createElement("span",null,e.payment_mode||"--",r.a.createElement("br",null))}))),n.props.rowSpan=t.invoice.inventory.length+t.invoice.prescription.length+t.invoice.procedure.length,"FINAL"==t.type&&(n.props.rowSpan=1)),n}},{title:"Amount Paid (INR)",key:"amount_paid",dataIndex:"pay_amount",align:"right",render:function(e,t,a){var n={props:{}};return t.invoice.invoice_id==s?n.props.rowSpan=0:(s=t.invoice.invoice_id,n.children=r.a.createElement("span",null,t.invoice.payments.map((function(e){return r.a.createElement("span",null,e.pay_amount.toFixed(2)||"--",r.a.createElement("br",null))}))),n.props.rowSpan=t.invoice.inventory.length+t.invoice.prescription.length+t.invoice.procedure.length,"FINAL"==t.type&&(n.props.rowSpan=1,n.children=r.a.createElement("span",null,t.paidAmount.toFixed(2)))),n}},{title:"Total Amount Paid",key:"total_amount_paid",dataIndex:"total",align:"right",render:function(e,t,a){var n={props:{}};return t.invoice.invoice_id==c?n.props.rowSpan=0:(c=t.invoice.invoice_id,n.children=r.a.createElement("span",null,t.invoice.payments.map((function(e){return r.a.createElement("b",null,e.pay_amount.toFixed(2)||"--",r.a.createElement("br",null))}))),n.props.rowSpan=t.invoice.inventory.length+t.invoice.prescription.length+t.invoice.procedure.length,"FINAL"==t.type&&(n.props.rowSpan=1,n.children=r.a.createElement("span",null,t.paidAmount.toFixed(2)))),n}}];return r.a.createElement("div",null,r.a.createElement("h2",null,"Daily Summary Report"),r.a.createElement(cr.a,{bodyStyle:{padding:0},extra:r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,"Doctors :"),r.a.createElement(ga.a,{style:{minWidth:"200px"},mode:"multiple",placeholder:"Select Doctors",onChange:function(t){return e.filterReport("doctors",t)}},this.state.practiceDoctors.map((function(e){return r.a.createElement(ga.a.Option,{key:e.id,value:e.id},e.user.first_name)}))))},r.a.createElement(lr.a,{bordered:!0,rowKey:function(e,t){return t},columns:u,dataSource:this.state.dailySummary,pagination:!1}),r.a.createElement(wi,{loaderFunction:function(){return e.loadDailySummary(e.state.nextItemPage)},loading:this.state.loading,hidden:!this.state.nextItemPage}),this.state.nextItemPage?null:r.a.createElement(rr.a,{gutter:16},r.a.createElement(ir.a,{span:6,style:{margin:15}},r.a.createElement("h4",null,"Amount Total by Mode of Payments"),r.a.createElement(Ea.a,{size:"small",dataSource:Object.keys(this.state.paidAmountForPaymentMode).map((function(e){return{payment_mode:e||"--",value:0}})),renderItem:function(e){return r.a.createElement(Ea.a.Item,null,r.a.createElement(Ea.a.Item.Meta,{title:e.payment_mode||"--"}),r.a.createElement("span",null,"INR ",t.state.paidAmountForPaymentMode[e.payment_mode].toFixed(2)))}})))))}}]),t}(r.a.Component),cm=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).loadBedBookingReport=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=Object(f.a)(a);a.setState({loading:!0});var n=function(e){1==e.current?t.setState({bedBookingReports:e.results,loading:!1,nextReport:e.next}):t.setState((function(t){return{bedBookingReports:[].concat(Object(Oa.a)(t.bedBookingReports),Object(Oa.a)(e.results)),loading:!1,nextReport:e.next}}))},r=function(){t.setState({loading:!1})},i={start:a.state.startDate.format("YYYY-MM-DD"),end:a.state.endDate.format("YYYY-MM-DD"),page:e,practice:a.props.active_practiceId};a.props.payment_status&&(i.payment_status=a.props.payment_status),a.props.type&&(i.type=a.props.type),a.props.bed_packages&&(i.bed_packages=a.props.bed_packages.join(",")),Ut(dt,n,r,i)},a.state={startDate:a.props.startDate,endDate:a.props.endDate,loading:!1,bedBookingReports:[],packages:[]},a.loadBedBookingReport=a.loadBedBookingReport.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadBedBookingReport()}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.startDate==e.startDate&&this.props.endDate==e.endDate&&this.props.bed_packages==e.bed_packages&&this.props.payment_status==e.payment_status&&this.props.type==e.type||this.setState({startDate:e.startDate,endDate:e.endDate},(function(){t.loadBedBookingReport()}))}},{key:"render",value:function(){var e=this,t=1,a=[{title:"S. No",key:"sno",render:function(e,a){return r.a.createElement("span",null," ",t++)},export:function(e,a){t++},width:50},{title:"Patient Name",key:"patient",dataIndex:"patient",render:function(e){return e?r.a.createElement("span",null,e.user.first_name,"\xa0(",e.custom_id,")"):null}},{title:"Package Name",key:"name",dataIndex:"bed_package.name"},{title:"Medicine Package",key:"medicine",dataIndex:"medicines",render:function(e,t){return r.a.createElement("span",null,e.map((function(e){return r.a.createElement(fa.a,null,e.name)})))}},{title:"From ",key:"from_date",render:function(e,t){return r.a.createElement("span",null,Or()(t.from_date).format("LL"))}},{title:"To ",key:"to_date",render:function(e,t){return r.a.createElement("span",null,Or()(t.to_date).format("LL"))}},{title:"Seat/Bed Type",key:"seat_type",dataIndex:"seat_type"},{title:"Seat Number",key:"seat_no",dataIndex:"seat_no"},{title:"Total price",key:"total_price",dataIndex:"total_price",render:function(e){return r.a.createElement("p",null,e.toFixed(2))}},{title:"Payment Status",key:"payment_status",dataIndex:"payment_status"}];return r.a.createElement("div",null,r.a.createElement("h2",null,"Seat/Bed Booking Report"),r.a.createElement(ti,{hideReport:!0,pagination:!1,columns:a,dataSource:this.state.bedBookingReports}),r.a.createElement(wi,{loaderFunction:function(){return e.loadBedBookingReport(e.state.nextReport)},loading:this.state.loading,hidden:!this.state.nextReport}))}}]),t}(r.a.Component),um=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).loadBedBookingReport=function(){var e=Object(f.a)(a);a.setState({loading:!0});var t={start:a.state.startDate.format("YYYY-MM-DD"),end:a.state.endDate.format("YYYY-MM-DD"),practice:a.props.active_practiceId,report_type:a.props.report_type};a.props.payment_status&&(t.payment_status=a.props.payment_status),a.props.type&&(t.type=a.props.type),a.props.bed_packages&&(t.bed_packages=a.props.bed_packages.join(",")),Ut(dt,(function(t){e.setState({bedBookingReports:t,loading:!1})}),(function(){e.setState({loading:!1})}),t)},a.state={startDate:a.props.startDate,endDate:a.props.endDate,loading:!1,bedBookingReports:[],packages:[]},a.loadBedBookingReport=a.loadBedBookingReport.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadBedBookingReport()}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.startDate==e.startDate&&this.props.endDate==e.endDate&&this.props.bed_packages==e.bed_packages&&this.props.payment_status==e.payment_status&&this.props.type==e.type||this.setState({startDate:e.startDate,endDate:e.endDate},(function(){t.loadBedBookingReport()}))}},{key:"render",value:function(){var e=1,t=[{title:"S. No",key:"sno",dataIndex:"sno",render:function(t,a){return r.a.createElement("span",null," ",e++)},export:function(e,t,a){return a+1},width:50},{title:"Day",key:"date",dataIndex:"date",render:function(e,t){return r.a.createElement("span",null,Or()(t.date).format("DD MMM "))},export:function(e,t){return Or()(t.date).format("DD MMM ")}},{title:"Total Booking",key:"count",dataIndex:"count"},{title:"Amount (INR)",key:"amount",dataIndex:"total"}],a=this.state.bedBookingReports.reduce((function(e,t){return e+t.total}),0);return r.a.createElement("div",null,r.a.createElement("h2",null,"Daily Booking Count"),r.a.createElement(pa.a,{size:"large",spinning:this.state.loading},this.state.bedBookingReports.length>0?r.a.createElement(Hs.h,{width:1e3,height:300,data:Object(Oa.a)(this.state.bedBookingReports).reverse(),margin:{top:5,right:30,left:20,bottom:55}},r.a.createElement(Hs.n,{dataKey:"date",tickFormatter:function(e){return Or()(e).format("DD MMM")},label:{value:"Data Range",offset:0,margin:{top:10},position:"insideBottom"}}),r.a.createElement(Hs.o,{label:{value:"Bookings",angle:-90,position:"insideLeft"}}),r.a.createElement(Hs.b,{strokeDasharray:"3 3"}),r.a.createElement(Hs.m,null),r.a.createElement(Hs.g,{type:"monotone",dataKey:"count",stroke:"#1DA57A",strokeWidth:4,label:r.a.createElement((function(e){var t=e.x,a=e.y,n=(e.stroke,e.value);return r.a.createElement("text",{x:t,y:a,dy:-4,fill:"#666",fontSize:18,textAnchor:"middle"},n)}),null)})):r.a.createElement(Xu.a,{image:Xu.a.PRESENTED_IMAGE_SIMPLE,description:"No Data to Show"})),r.a.createElement(sr.a,null,r.a.createElement(ao.a,{title:"Total Amounts",value:a||"0.00"})),r.a.createElement(ti,{loading:this.state.loading,columns:t,dataSource:this.state.bedBookingReports}))}}]),t}(r.a.Component),dm=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).loadBedBookingReport=function(){var e=Object(f.a)(a);a.setState({loading:!0});var t={start:a.state.startDate.format("YYYY-MM-DD"),end:a.state.endDate.format("YYYY-MM-DD"),practice:a.props.active_practiceId,report_type:a.props.report_type};a.props.payment_status&&(t.payment_status=a.props.payment_status),a.props.type&&(t.type=a.props.type),a.props.bed_packages&&(t.bed_packages=a.props.bed_packages.join(",")),Ut(dt,(function(t){e.setState({bedBookingReports:t,loading:!1})}),(function(){e.setState({loading:!1})}),t)},a.state={startDate:a.props.startDate,endDate:a.props.endDate,loading:!1,bedBookingReports:[],packages:[]},a.loadBedBookingReport=a.loadBedBookingReport.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadBedBookingReport()}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.startDate==e.startDate&&this.props.endDate==e.endDate&&this.props.bed_packages==e.bed_packages&&this.props.payment_status==e.payment_status&&this.props.type==e.type||this.setState({startDate:e.startDate,endDate:e.endDate},(function(){t.loadBedBookingReport()}))}},{key:"render",value:function(){var e=1,t=[{title:"S. No",key:"sno",dataIndex:"sno",render:function(t,a){return r.a.createElement("span",null," ",e++)},export:function(e,t,a){return a+1},width:50},{title:"Month",key:"date",dataIndex:"date",render:function(e,t){return r.a.createElement("span",null,Or()(t.date).format("MMM YYYY"))},export:function(e,t){return Or()(t.date).format("MMM YYYY")}},{title:"Total Booking",key:"count",dataIndex:"count"},{title:"Amount (INR)",key:"amount",dataIndex:"total"}],a=this.state.bedBookingReports.reduce((function(e,t){return e+t.total}),0);return r.a.createElement("div",null,r.a.createElement("h2",null,"Monthly Booking Count"),r.a.createElement(pa.a,{size:"large",spinning:this.state.loading},this.state.bedBookingReports.length>0?r.a.createElement(Hs.d,{width:1e3,height:400,data:Object(Oa.a)(this.state.bedBookingReports).reverse(),margin:{top:20,right:20,bottom:20,left:20}},r.a.createElement(Hs.n,{dataKey:"date",tickFormatter:function(e){return Or()(e).format("MMM YY")}}),r.a.createElement(Hs.o,null),r.a.createElement(Hs.m,null),r.a.createElement(Hs.a,{dataKey:"count",barSize:35,fill:"#0059b3",stroke:"#0059b3",label:function(e){e.payload;var t=e.x,a=e.y,n=e.width,i=(e.height,e.value);return r.a.createElement("text",{x:t+n/2,y:a,fill:"#666",textAnchor:"middle",dy:-6},i)}})):r.a.createElement(Xu.a,{image:Xu.a.PRESENTED_IMAGE_SIMPLE,description:"No Data to Show"})),r.a.createElement(sr.a,null,r.a.createElement(ao.a,{title:"Total Amounts",value:a||"0.00"})),r.a.createElement(ti,{loading:this.state.loading,columns:t,dataSource:this.state.bedBookingReports}))}}]),t}(r.a.Component),pm=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).loadBedBookingReport=function(){var e=Object(f.a)(a);a.setState({loading:!0});var t={start:a.state.startDate.format("YYYY-MM-DD"),end:a.state.endDate.format("YYYY-MM-DD"),report_type:a.props.report_type,practice:a.props.active_practiceId};a.props.payment_status&&(t.payment_status=a.props.payment_status),a.props.type&&(t.type=a.props.type),a.props.bed_packages&&(t.bed_packages=a.props.bed_packages.join(",")),Ut(dt,(function(t){e.setState({bedBookingReports:t,loading:!1})}),(function(){e.setState({loading:!1})}),t)},a.onPieEnter=function(e,t){a.setState({activeIndex:t})},a.state={startDate:a.props.startDate,endDate:a.props.endDate,loading:!1,bedBookingReports:[],packages:[],activeIndex:0},a.loadBedBookingReport=a.loadBedBookingReport.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadBedBookingReport()}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.startDate==e.startDate&&this.props.endDate==e.endDate&&this.props.bed_packages==e.bed_packages&&this.props.payment_status==e.payment_status&&this.props.type==e.type||this.setState({startDate:e.startDate,endDate:e.endDate},(function(){t.loadBedBookingReport()}))}},{key:"render",value:function(){var e=1,t=[{title:"S. No",key:"sno",dataIndex:"sno",render:function(t,a){return r.a.createElement("span",null," ",e++)},export:function(e,t,a){return a+1},width:50},{title:"Medicine Name",key:"name",dataIndex:"medicine"},{title:"Total Medicine",key:"count",dataIndex:"count"}],a=["#0088FE","#00C49F","#FFBB28","#FF8042"],n=this.state.bedBookingReports.reduce((function(e,t){return e+t.count}),0);return r.a.createElement("div",null,r.a.createElement("h2",null,"Medicine Usage Count"),r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:12,offset:6},r.a.createElement(pa.a,{size:"large",spinning:this.state.loading},this.state.bedBookingReports.length>0?r.a.createElement(Hs.j,{width:800,height:400},r.a.createElement(Hs.i,{activeIndex:this.state.activeIndex,activeShape:function(e){var t=Math.PI/180,a=e.cx,n=e.cy,i=e.midAngle,l=e.innerRadius,o=e.outerRadius,s=e.startAngle,c=e.endAngle,u=e.fill,d=e.payload,p=e.percent,m=(e.value,Math.sin(-t*i)),h=Math.cos(-t*i),f=a+(o+10)*h,g=n+(o+10)*m,y=a+(o+30)*h,E=n+(o+30)*m,b=y+22*(h>=0?1:-1),v=E,_=h>=0?"start":"end";return r.a.createElement("g",null,r.a.createElement(Hs.l,{cx:a,cy:n,innerRadius:l,outerRadius:o,startAngle:s,endAngle:c,fill:u}),r.a.createElement(Hs.l,{cx:a,cy:n,startAngle:s,endAngle:c,innerRadius:o+6,outerRadius:o+10,fill:u}),r.a.createElement("path",{d:"M".concat(f,",").concat(g,"L").concat(y,",").concat(E,"L").concat(b,",").concat(v),stroke:u,fill:"none"}),r.a.createElement("circle",{cx:b,cy:v,r:2,fill:u,stroke:"none"}),r.a.createElement("text",{x:b+12*(h>=0?1:-1),y:v,textAnchor:_,fill:"#333"},d.medicine+","+d.count),r.a.createElement("text",{x:b+12*(h>=0?1:-1),y:v,dy:18,textAnchor:_,fill:"#999"},"(Rate ".concat((100*p).toFixed(2),"%)")))},data:this.state.bedBookingReports,cx:300,dataKey:"count",cy:200,innerRadius:60,outerRadius:80,fill:"#8884d8",onMouseEnter:this.onPieEnter},this.state.bedBookingReports.map((function(e,t){return r.a.createElement(Hs.c,{fill:a[t%a.length]})})))):r.a.createElement(Xu.a,{image:Xu.a.PRESENTED_IMAGE_SIMPLE,description:"No Data to Show"})))),r.a.createElement(sr.a,null,r.a.createElement(ao.a,{title:"Total Amounts",value:n})),r.a.createElement(ti,{loading:this.state.loading,columns:t,dataSource:this.state.bedBookingReports}))}}]),t}(r.a.Component),mm=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).loadBedBookingReport=function(){var e=Object(f.a)(a);e.setState({loading:!0});var t={start:a.state.startDate.format("YYYY-MM-DD"),end:a.state.endDate.format("YYYY-MM-DD"),report_type:a.props.report_type,practice:a.props.active_practiceId};a.props.payment_status&&(t.payment_status=a.props.payment_status),a.props.type&&(t.type=a.props.type),a.props.bed_packages&&(t.bed_packages=a.props.bed_packages.join(",")),Ut(dt,(function(t){e.setState({bedBookingReports:t,loading:!1})}),(function(){e.setState({loading:!1})}),t)},a.onPieEnter=function(e,t){a.setState({activeIndex:t})},a.state={startDate:a.props.startDate,endDate:a.props.endDate,loading:!1,bedBookingReports:[],packages:[],activeIndex:0},a.loadBedBookingReport=a.loadBedBookingReport.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadBedBookingReport()}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.startDate==e.startDate&&this.props.endDate==e.endDate&&this.props.bed_packages==e.bed_packages&&this.props.payment_status==e.payment_status&&this.props.type==e.type||this.setState({startDate:e.startDate,endDate:e.endDate},(function(){t.loadBedBookingReport()}))}},{key:"render",value:function(){var e=1,t=[{title:"S. No",key:"sno",dataIndex:"sno",render:function(t,a){return r.a.createElement("span",null," ",e++)},export:function(e,t,a){return a+1},width:50},{title:"Bed Package Name",key:"bed_package",dataIndex:"bed_package"},{title:"Total Bed Package",key:"count",dataIndex:"count"}],a=["#0088FE","#00C49F","#FFBB28","#FF8042"],n=this.state.bedBookingReports.reduce((function(e,t){return e+t.count}),0);return r.a.createElement("div",null,r.a.createElement("h2",null,"Medicine Usage Count"),r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:12,offset:6},r.a.createElement(pa.a,{size:"large",spinning:this.state.loading},this.state.bedBookingReports.length>0?r.a.createElement(Hs.j,{width:800,height:400},r.a.createElement(Hs.i,{activeIndex:this.state.activeIndex,activeShape:function(e){var t=Math.PI/180,a=e.cx,n=e.cy,i=e.midAngle,l=e.innerRadius,o=e.outerRadius,s=e.startAngle,c=e.endAngle,u=e.fill,d=e.payload,p=e.percent,m=(e.value,Math.sin(-t*i)),h=Math.cos(-t*i),f=a+(o+10)*h,g=n+(o+10)*m,y=a+(o+30)*h,E=n+(o+30)*m,b=y+22*(h>=0?1:-1),v=E,_=h>=0?"start":"end";return r.a.createElement("g",null,r.a.createElement(Hs.l,{cx:a,cy:n,innerRadius:l,outerRadius:o,startAngle:s,endAngle:c,fill:u}),r.a.createElement(Hs.l,{cx:a,cy:n,startAngle:s,endAngle:c,innerRadius:o+6,outerRadius:o+10,fill:u}),r.a.createElement("path",{d:"M".concat(f,",").concat(g,"L").concat(y,",").concat(E,"L").concat(b,",").concat(v),stroke:u,fill:"none"}),r.a.createElement("circle",{cx:b,cy:v,r:2,fill:u,stroke:"none"}),r.a.createElement("text",{x:b+12*(h>=0?1:-1),y:v,textAnchor:_,fill:"#333"},d.bed_package+","+d.count),r.a.createElement("text",{x:b+12*(h>=0?1:-1),y:v,dy:18,textAnchor:_,fill:"#999"},"(Rate ".concat((100*p).toFixed(2),"%)")))},data:this.state.bedBookingReports,cx:300,dataKey:"count",cy:200,innerRadius:60,outerRadius:80,fill:"#8884d8",onMouseEnter:this.onPieEnter},this.state.bedBookingReports.map((function(e,t){return r.a.createElement(Hs.c,{fill:a[t%a.length]})})))):r.a.createElement(Xu.a,{image:Xu.a.PRESENTED_IMAGE_SIMPLE,description:"No Data to Show"})))),r.a.createElement(sr.a,null,r.a.createElement(ao.a,{title:"Total Amounts",value:n})),r.a.createElement(ti,{loading:this.state.loading,columns:t,dataSource:this.state.bedBookingReports}))}}]),t}(r.a.Component),hm=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).onChangeHandle=function(e,t){Object(f.a)(a);a.setState(Object(u.a)({},e,t.target.value))},a.loadPackages=function(){var e=Object(f.a)(a);Ut(Kt(St,[a.props.active_practiceId]),(function(t){e.setState({packages:t})}),(function(){}))},a.changeSidePanelSize=function(e){a.setState({sidePanelColSpan:e?0:4})},a.handleChangeOption=function(e,t){Object(f.a)(a);a.setState(Object(u.a)({},e,t))},a.state={report_type:"ALL",sidePanelColSpan:4,advancedOptionShow:!0,packages:[]},a.loadPackages=a.loadPackages.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadPackages()}},{key:"advancedOption",value:function(e){this.setState({advancedOptionShow:e})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h2",null,"Bed Booking Report ",r.a.createElement(da.a,{type:"primary",shape:"round",icon:this.state.sidePanelColSpan?"double-right":"double-left",style:{float:"right"},onClick:function(){return e.changeSidePanelSize(e.state.sidePanelColSpan)}},"Panel")),r.a.createElement(cr.a,null,r.a.createElement(rr.a,{gutter:16},r.a.createElement(ir.a,{span:24-this.state.sidePanelColSpan},this.state.report_type==L?r.a.createElement(cm,Object.assign({},this.props,this.state)):null,"DAILY"==this.state.report_type?r.a.createElement(um,Object.assign({},this.props,this.state)):null,"MONTHLY"==this.state.report_type?r.a.createElement(dm,Object.assign({},this.props,this.state)):null,"MEDICINE_COUNT"==this.state.report_type?r.a.createElement(pm,Object.assign({},this.props,this.state)):null,"BED_PACKAGE_COUNT"==this.state.report_type?r.a.createElement(mm,Object.assign({},this.props,this.state)):null),r.a.createElement(ir.a,{span:this.state.sidePanelColSpan},r.a.createElement(br.a.Group,{buttonStyle:"solid",defaultValue:L,onChange:function(t){return e.onChangeHandle("report_type",t)}},r.a.createElement("h2",null,"Bed Booking"),r.a.createElement(br.a.Button,{style:{width:"100%",backgroundColor:"transparent",border:"0px"},value:L},"All Bookings"),r.a.createElement("p",null,r.a.createElement("br",null)),r.a.createElement("h2",null,"Related Reports"),_n.map((function(e){return r.a.createElement(br.a.Button,{style:{width:"100%",backgroundColor:"transparent",border:"0px"},value:e.value},e.name)}))),r.a.createElement("br",null),r.a.createElement("br",null),this.state.advancedOptionShow?r.a.createElement(r.a.Fragment,null,r.a.createElement(da.a,{type:"link",onClick:function(t){return e.advancedOption(!1)}},"Hide Advanced Options "),r.a.createElement(ir.a,null," ",r.a.createElement("br",null),r.a.createElement("h4",null,"Bed Package"),r.a.createElement(ga.a,{style:{minWidth:"200px"},mode:"multiple",placeholder:"Select Bed Package",onChange:function(t){return e.handleChangeOption("bed_packages",t)}},this.state.packages.map((function(e){return r.a.createElement(ga.a.Option,{value:e.id},e.name)}))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h4",null,"Type"),r.a.createElement(ga.a,{style:{minWidth:"200px"},placeholder:"Select type",defaultValue:L,onChange:function(t){return e.handleChangeOption("type",t)}},r.a.createElement(ga.a.Option,{value:""},L),pn.map((function(e){return r.a.createElement(ga.a.Option,{value:e.value},e.label)}))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h4",null,"Payment Status"),r.a.createElement(ga.a,{style:{minWidth:"200px"},placeholder:"Select Payment Status",defaultValue:L,onChange:function(t){return e.handleChangeOption("payment_status",t)}},r.a.createElement(ga.a.Option,{value:""},L),dn.map((function(e){return r.a.createElement(ga.a.Option,{value:e.value},e.label)}))))):r.a.createElement(da.a,{type:"link",onClick:function(t){return e.advancedOption(!0)}},"Show Advanced Options ")))))}}]),t}(r.a.Component);function fm(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function gm(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?fm(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):fm(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ym=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).loadInventoryRetails=function(){var e=Object(f.a)(a);e.setState({loading:!0});var t={practice:e.props.active_practiceId,start:a.state.startDate.format("YYYY-MM-DD"),end:a.state.endDate.format("YYYY-MM-DD")};a.props.patient_groups&&(t.groups=a.props.patient_groups.toString()),a.props.products&&(t.products=a.props.products.toString()),a.props.doctors&&(t.doctors=a.props.doctors.toString()),a.props.manufacturers&&(t.manufacturers=a.props.manufacturers.toString()),a.props.suppliers&&(t.suppliers=a.props.suppliers.toString()),Ut(nt,(function(t){var a=[];t.forEach((function(e){var t=gm({},e);t.profit=(e.total-e.cost-e.tax).toFixed(2),a.push(t)})),e.setState({inventoryReports:a,loading:!1})}),(function(){e.setState({loading:!1})}),t)},a.state={inventoryReports:[],startDate:a.props.startDate,endDate:a.props.endDate,loading:!1},a.loadInventoryRetails=a.loadInventoryRetails.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadInventoryRetails()}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.startDate==e.startDate&&this.props.endDate==e.endDate&&this.props.products==e.products&&this.props.doctors==e.doctors&&this.props.manufacturers==e.manufacturers&&this.props.suppliers==e.suppliers&&this.props.patient_groups==e.patient_groups||this.setState({startDate:e.startDate,endDate:e.endDate},(function(){t.loadInventoryRetails()}))}},{key:"render",value:function(){for(var e=this.state.inventoryReports,t=[],a=0,n=0,i=0,l=0,o=0,s=0;s<e.length;s++)n+=e[s].cost,i+=e[s].tax,a+=e[s].total,l+=e[s].total-e[s].cost,o+=e[s].total-e[s].cost-e[s].tax;t.push({sale_amount:a,tax_amount:i,cost_amount:n,profit_before_tax:l,profit_after_tax:o});for(var c=[{title:"Total Sales (INR)",key:"sale_amount",dataIndex:"sale_amount",render:function(e,t){return r.a.createElement("span",null,t.sale_amount.toFixed(2))}},{title:"Total Cost (INR)",key:"cost_amount",dataIndex:"cost_amount",render:function(e,t){return r.a.createElement("span",null,t.cost_amount.toFixed(2))}},{title:"Total Profit before Tax(INR)",key:"tax_with_out",dataIndex:"profit_before_tax",render:function(e,t){return r.a.createElement("span",null,t.profit_before_tax.toFixed(2))}},{title:"Total Tax(INR)",key:"tax_amount",dataIndex:"tax_amount",render:function(e,t){return r.a.createElement("span",null,t.tax_amount.toFixed(2))}},{title:"Total Profit after Tax(INR)",key:"tax_with",dataIndex:"profit_after_tax",render:function(e,t){return r.a.createElement("span",null,t.profit_after_tax.toFixed(2))}}],u=this.state.inventoryReports,d=[],p=1;p<=u.length;p++)d.push(gm({s_no:p},u[p-1]));var m=[{title:"S. No",key:"s_no",dataIndex:"s_no",width:50},{title:"Date",key:"date",render:function(e,t){return r.a.createElement("span",null,Or()(t.date).format("YYYY-MM-DD"))}},{title:"Sales (INR)",key:"sale_amount",dataIndex:"total",render:function(e,t){return r.a.createElement("span",null,t.total.toFixed(2))}},{title:"Cost",key:"cost",dataIndex:"cost",render:function(e,t){return r.a.createElement("span",null,t.cost.toFixed(2))}},{title:"Profit before Tax(INR)",key:"tax_with_out",render:function(e,t){return r.a.createElement("span",null,(t.total-t.cost).toFixed(2))}},{title:"Tax(INR)",key:"tax",dataIndex:"tax",render:function(e,t){return r.a.createElement("span",null,t.tax.toFixed(2))}},{title:"Profit after Tax(INR)",key:"tax_with",render:function(e,t){return r.a.createElement("span",null,(t.total-t.cost-t.tax).toFixed(2))}}];return r.a.createElement("div",null,r.a.createElement("h2",null,"Profit Loss"),r.a.createElement(pa.a,{size:"large",spinning:this.state.loading},d.length>0?r.a.createElement(Hs.d,{width:1e3,height:400,data:d,margin:{top:20,right:20,bottom:20,left:20}},r.a.createElement(Hs.n,{dataKey:"date",tickFormatter:function(e){return Or()(e).format("DD MMM")},label:{value:"Data Range",offset:0,margin:{top:10},position:"insideBottom"}}),r.a.createElement(Hs.o,{label:{value:"Sales Profit",angle:-90,position:"insideLeft"}}),r.a.createElement(Hs.o,null),r.a.createElement(Hs.m,null),r.a.createElement(Hs.a,{dataKey:"profit",barSize:35,fill:"#0059b3",stroke:"#0059b3",label:function(e){e.payload;var t=e.x,a=e.y,n=e.width,i=(e.height,e.value);return r.a.createElement("text",{x:t+n/2,y:a,fill:"#666",textAnchor:"middle",dy:-6},i)}})):r.a.createElement(Xu.a,{image:Xu.a.PRESENTED_IMAGE_SIMPLE,description:"No Data to Show"})),r.a.createElement(lr.a,{loading:this.state.loading,columns:c,pagination:!1,dataSource:t}),r.a.createElement(lr.a,{loading:this.state.loading,columns:m,pagination:!1,dataSource:d}))}}]),t}(r.a.Component),Em=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).onChangeHandle=function(e,t){Object(f.a)(a);a.setState(Object(u.a)({},e,t.target.value))},a.handleChangeOption=function(e,t){Object(f.a)(a);a.setState(Object(u.a)({},e,t))},a.onChangeCheckbox=function(e){a.setState({exclude_cancelled:!a.state.exclude_cancelled})},a.changeSidePanelSize=function(e){a.setState({sidePanelColSpan:e?0:4})},a.state={sidePanelColSpan:4,startDate:a.props.startDate,endDate:a.props.endDate,advancedOptionShow:!0,manufacturesOption:[],productsOption:[],suppliersOption:[],practiceDoctors:[],patientGroup:[]},a.loadManufactures=a.loadManufactures.bind(Object(f.a)(a)),a.loadProducts=a.loadProducts.bind(Object(f.a)(a)),a.loadSuppliers=a.loadSuppliers.bind(Object(f.a)(a)),a.loadPatientGroup=a.loadPatientGroup.bind(Object(f.a)(a)),mi(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadManufactures(),this.loadProducts(),this.loadSuppliers(),this.loadPatientGroup()}},{key:"loadPatientGroup",value:function(){var e=this;Ut(Kt(ve,[this.props.active_practiceId]),(function(t){e.setState({patientGroup:t})}),(function(){}))}},{key:"loadManufactures",value:function(){var e=this;Ut("manufacturer/",(function(t){e.setState({manufacturesOption:t})}),(function(){}))}},{key:"loadSuppliers",value:function(){var e=this,t={practice:this.props.active_practiceId};Ut(yt,(function(t){e.setState({suppliersOption:t})}),(function(){}),t)}},{key:"loadProducts",value:function(){var e=this,t={practice:this.props.active_practiceId};Ut(at,(function(t){e.setState({productsOption:t})}),(function(){}),t)}},{key:"advancedOption",value:function(e){this.setState({advancedOptionShow:e})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h2",null,"Inventory Report ",r.a.createElement(da.a,{type:"primary",shape:"round",icon:this.state.sidePanelColSpan?"double-right":"double-left",style:{float:"right"},onClick:function(){return e.changeSidePanelSize(e.state.sidePanelColSpan)}},"Panel")),r.a.createElement(cr.a,null,r.a.createElement(rr.a,{gutter:16},r.a.createElement(ir.a,{span:24-this.state.sidePanelColSpan},r.a.createElement(ym,Object.assign({},this.state,this.props))),r.a.createElement(ir.a,{span:this.state.sidePanelColSpan},r.a.createElement(br.a.Group,{buttonStyle:"solid",defaultValue:L},r.a.createElement("h2",null,"Inventory Retails"),r.a.createElement(br.a.Button,{style:{width:"100%",backgroundColor:"transparent",border:"0px"},value:L},"Profit Loss"),r.a.createElement("p",null,r.a.createElement("br",null)),r.a.createElement("h2",null,"Related Reports")),r.a.createElement("br",null),r.a.createElement("br",null),this.state.advancedOptionShow?r.a.createElement(r.a.Fragment,null,r.a.createElement(da.a,{type:"link",onClick:function(t){return e.advancedOption(!1)}},"Hide Advanced Options "),r.a.createElement(ir.a,null," ",r.a.createElement("br",null),r.a.createElement("h4",null,"Patient Groups"),r.a.createElement(ga.a,{style:{minWidth:"200px"},mode:"multiple",placeholder:"Select Patient Groups",onChange:function(t){return e.handleChangeOption("patient_groups",t)}},this.state.patientGroup.map((function(e){return r.a.createElement(ga.a.Option,{value:e.id},e.name)}))),r.a.createElement("br",null),r.a.createElement("h4",null,"Doctors"),r.a.createElement(ga.a,{style:{minWidth:"200px"},mode:"multiple",placeholder:"Select Doctors",onChange:function(t){return e.handleChangeOption("doctors",t)}},this.state.practiceDoctors.map((function(e){return r.a.createElement(ga.a.Option,{value:e.id},e.user.first_name)}))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h4",null,"Products"),r.a.createElement(ga.a,{style:{minWidth:"200px"},placeholder:"Select Products",onChange:function(t){return e.handleChangeOption("products",t)}},this.state.productsOption.map((function(e){return r.a.createElement(ga.a.Option,{value:e.id},e.name)}))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h4",null,"Manufactures"),r.a.createElement(ga.a,{style:{minWidth:"200px"},mode:"multiple",placeholder:"Select Manufacturers",onChange:function(t){return e.handleChangeOption("manufacturers",t)}},this.state.manufacturesOption.map((function(e){return r.a.createElement(ga.a.Option,{value:e.id},e.name)}))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h4",null,"Suppliers"),r.a.createElement(ga.a,{style:{minWidth:"200px"},mode:"multiple",placeholder:"Select Suppliers",onChange:function(t){return e.handleChangeOption("suppliers",t)}},this.state.suppliersOption.map((function(e){return r.a.createElement(ga.a.Option,{value:e.id},e.name)}))))):r.a.createElement(da.a,{type:"link",onClick:function(t){return e.advancedOption(!0)}},"Show Advanced Options ")))))}}]),t}(r.a.Component);function bm(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function vm(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?bm(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):bm(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}no.a.Text;var _m=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={report:[],startDate:a.props.startDate,endDate:a.props.endDate,loading:!1},a.loadMlmReport=a.loadMlmReport.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadMlmReport()}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.startDate==e.startDate&&this.props.endDate==e.endDate&&this.props.agents==e.agents||this.setState({startDate:e.startDate,endDate:e.endDate},(function(){t.loadMlmReport()}))}},{key:"loadMlmReport",value:function(){var e=this;this.setState({loading:!0});var t={practice:e.props.active_practiceId,start:this.state.startDate.format("YYYY-MM-DD"),end:this.state.endDate.format("YYYY-MM-DD"),type:this.props.type};this.props.agents&&(t.agents=this.props.agents.toString()),Ut("patients/mlm_report",(function(t){e.setState({report:t,loading:!1})}),(function(){e.setState({loading:!1})}),t)}},{key:"render",value:function(){for(var e=this.state.report,t=[],a=1;a<=e.length;a++)t.push(vm({s_no:a},e[a-1]));var n=t.reduce((function(e,t){return e+t.total}),0),i=["#0088FE","#00C49F","#FFBB28","#FF8042"];return r.a.createElement("div",null,r.a.createElement("h2",null,"Margin Type wise "),r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:12,offset:6},r.a.createElement(pa.a,{size:"large",spinning:this.state.loading},t.length>0&&n?r.a.createElement(Hs.j,{width:800,height:400},r.a.createElement(Hs.i,{label:function(e){var t=Math.PI/180,a=e.cx,n=e.cy,i=e.midAngle,l=e.innerRadius,o=e.outerRadius,s=e.startAngle,c=e.endAngle,u=e.fill,d=e.payload,p=e.percent,m=(e.value,Math.sin(-t*i)),h=Math.cos(-t*i),f=a+(o+10)*h,g=n+(o+10)*m,y=a+(o+30)*h,E=n+(o+30)*m,b=y+22*(h>=0?1:-1),v=E,_=h>=0?"start":"end";return r.a.createElement("g",null,r.a.createElement(Hs.l,{cx:a,cy:n,innerRadius:l,outerRadius:o,startAngle:s,endAngle:c,fill:u}),r.a.createElement("path",{d:"M".concat(f,",").concat(g,"L").concat(y,",").concat(E,"L").concat(b,",").concat(v),stroke:u,fill:"none"}),r.a.createElement("circle",{cx:b,cy:v,r:2,fill:u,stroke:"none"}),r.a.createElement("text",{x:b+12*(h>=0?1:-1),y:v,textAnchor:_,fill:"#333"},d.margin+","+d.total),r.a.createElement("text",{x:b+12*(h>=0?1:-1),y:v,dy:18,textAnchor:_,fill:"#999"},"(Rate ".concat((100*p).toFixed(2),"%)")))},data:t,cx:300,dataKey:"total",cy:200,innerRadius:60,outerRadius:80,fill:"#8884d8"},t.map((function(e,t){return r.a.createElement(Hs.c,{fill:i[t%i.length]})})))):r.a.createElement(Xu.a,{image:Xu.a.PRESENTED_IMAGE_SIMPLE,description:"No Data to Show"})))),r.a.createElement(ti,{loading:this.state.loading,columns:[{title:"S. No",key:"s_no",dataIndex:"s_no",width:50},{title:"Name",key:"name",dataIndex:"margin"},{title:"Total Amount",key:"amount",dataIndex:"total"}],dataSource:t}))}}]),t}(r.a.Component);function Om(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Dm(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Om(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Om(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var km=no.a.Text,Pm=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).onPieEnter=function(e,t){a.setState({activeIndex:t})},a.state={report:[],reportSummary:[],startDate:a.props.startDate,endDate:a.props.endDate,loading:!1,activeIndex:0},a.loadMlmReport=a.loadMlmReport.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadMlmReport()}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.startDate==e.startDate&&this.props.endDate==e.endDate&&this.props.agents==e.agents||this.setState({startDate:e.startDate,endDate:e.endDate},(function(){t.loadMlmReport()}))}},{key:"loadMlmReport",value:function(){var e=this;this.setState({loading:!0});var t={practice:e.props.active_practiceId,start:this.state.startDate.format("YYYY-MM-DD"),end:this.state.endDate.format("YYYY-MM-DD"),type:"TRANSFER"};this.props.agents&&(t.agents=this.props.agents.toString()),Ut("patients/mlm_report",(function(t){e.setState({report:t.data,reportSummary:t.summary,loading:!1})}),(function(){e.setState({loading:!1})}),t)}},{key:"render",value:function(){for(var e=this,t=this.state.report,a=[],n=1;n<=t.length;n++)a.push(Dm({s_no:n},t[n-1]));var i=[{title:"S. No",key:"s_no",dataIndex:"s_no",width:50},{title:"Date",dataIndex:"created_at",key:"created_at",render:function(e,t){return r.a.createElement("span",null,Or()(t.schedule_at).format("LLL")," ")},export:function(e,t){return Or()(t.schedule_at).format("LLL")}},{title:"Agent Name",dataIndex:"patient.user.first_name",key:"name",export:function(e,t){return t.patient.user.first_name}},{title:"Mobile Number",key:"patient.user.mobile",dataIndex:"patient.user.mobile",render:function(t){return e.props.activePracticePermissions.PatientPhoneNumber?t:ka(t)},export:function(e,t){return t.patient.user.mobile}},{title:"Email",key:"patient.user.email",dataIndex:"patient.user.email",render:function(t){return e.props.activePracticePermissions.PatientEmailId?t:Pa(t)},export:function(e,t){return t.patient.user.email}},{title:"Gender",key:"gender",dataIndex:"patient.gender",export:function(e,t){return t.patient.gender}},{title:"Amount (INR)",dataIndex:"amount",key:"amount",render:function(e,t){return t.is_cancelled?r.a.createElement(km,{delete:!0},e):e}},{title:"Amount Type",dataIndex:"amount_type",key:"amount_type"},{title:"Cr/Dr",dataIndex:"ledger_type",key:"ledger_type",render:function(e,t){return t.is_cancelled?r.a.createElement(km,{delete:!0},e):e}},{title:"Margin",key:"mlm",dataIndex:"mlm"},{title:"Ledger Comment",dataIndex:"comments",key:"comments"}],l=["#0088FE","#00C49F","#FFBB28","#FF8042"];this.state.reportSummary.reduce((function(e,t){return e+t.total}),0);return r.a.createElement("div",null,r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:12,offset:6},r.a.createElement(pa.a,{size:"large",spinning:this.state.loading},this.state.reportSummary.length>0?r.a.createElement(Hs.j,{width:800,height:400},r.a.createElement(Hs.i,{activeIndex:this.state.activeIndex,activeShape:function(e){var t=Math.PI/180,a=e.cx,n=e.cy,i=e.midAngle,l=e.innerRadius,o=e.outerRadius,s=e.startAngle,c=e.endAngle,u=e.fill,d=e.payload,p=e.percent,m=(e.value,Math.sin(-t*i)),h=Math.cos(-t*i),f=a+(o+10)*h,g=n+(o+10)*m,y=a+(o+30)*h,E=n+(o+30)*m,b=y+22*(h>=0?1:-1),v=E,_=h>=0?"start":"end";return r.a.createElement("g",null,r.a.createElement(Hs.l,{cx:a,cy:n,innerRadius:l,outerRadius:o,startAngle:s,endAngle:c,fill:u}),r.a.createElement(Hs.l,{cx:a,cy:n,startAngle:s,endAngle:c,innerRadius:o+6,outerRadius:o+10,fill:u}),r.a.createElement("path",{d:"M".concat(f,",").concat(g,"L").concat(y,",").concat(E,"L").concat(b,",").concat(v),stroke:u,fill:"none"}),r.a.createElement("circle",{cx:b,cy:v,r:2,fill:u,stroke:"none"}),r.a.createElement("text",{x:b+12*(h>=0?1:-1),y:v,textAnchor:_,fill:"#333"},d.ledger_type+","+d.total),r.a.createElement("text",{x:b+12*(h>=0?1:-1),y:v,dy:18,textAnchor:_,fill:"#999"},"(Rate ".concat((100*p).toFixed(2),"%)")))},data:this.state.reportSummary,cx:300,dataKey:"total",cy:200,innerRadius:60,outerRadius:80,fill:"#8884d8",onMouseEnter:this.onPieEnter},this.state.reportSummary.map((function(e,t){return r.a.createElement(Hs.c,{fill:l[t%l.length]})})))):r.a.createElement(Xu.a,{image:Xu.a.PRESENTED_IMAGE_SIMPLE,description:"No Data to Show"})))),r.a.createElement(ti,{loading:this.state.loading,columns:i,dataSource:a}))}}]),t}(r.a.Component);function Sm(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function xm(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Sm(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Sm(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var jm=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={report:[],startDate:a.props.startDate,endDate:a.props.endDate,loading:!1},a.loadMlmReport=a.loadMlmReport.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadMlmReport()}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.startDate==e.startDate&&this.props.endDate==e.endDate&&this.props.agents==e.agents||this.setState({startDate:e.startDate,endDate:e.endDate},(function(){t.loadMlmReport()}))}},{key:"loadMlmReport",value:function(){var e=this;this.setState({loading:!0});var t={practice:e.props.active_practiceId,start:this.state.startDate.format("YYYY-MM-DD"),end:this.state.endDate.format("YYYY-MM-DD")};this.props.agents&&(t.agents=this.props.agents.toString()),Ut("patients/agent_wallet_balance",(function(t){e.setState({report:t,loading:!1})}),(function(){e.setState({loading:!1})}),t)}},{key:"render",value:function(){for(var e=this,t=this.state.report,a=[],n=1;n<=t.length;n++)a.push(xm({s_no:n},t[n-1]));var i=[{title:"S. No",key:"s_no",dataIndex:"s_no",width:50},{title:"Agent Name",dataIndex:"patient.user.first_name",key:"name",export:function(e,t){return t.patient.user.first_name}},{title:"Mobile Number",key:"patient.user.mobile",dataIndex:"patient.user.mobile",render:function(t){return e.props.activePracticePermissions.PatientPhoneNumber?t:ka(t)},export:function(e,t){return t.patient.user.mobile}},{title:"Email",key:"patient.user.email",dataIndex:"patient.user.email",render:function(t){return e.props.activePracticePermissions.PatientEmailId?t:Pa(t)},export:function(e,t){return t.patient.user.email}},{title:"Gender",key:"gender",dataIndex:"patient.gender",export:function(e,t){return t.patient.gender}},{title:"Refundable Amount",dataIndex:"refundable_amount",key:"refundable_amount",render:function(e,t){return r.a.createElement("span",null,t.refundable_amount?t.refundable_amount.toFixed(2):"0.00")}},{title:"Non Refundable Amount",dataIndex:"non_refundable",key:"non_refundable",render:function(e,t){return r.a.createElement("span",null,t.non_refundable?t.non_refundable.toFixed(2):"0.00")}}],l=this.state.report.reduce((function(e,t){return e+t.refundable_amount}),0),o=this.state.report.reduce((function(e,t){return e+t.non_refundable}),0);return r.a.createElement("div",null,r.a.createElement("h2",null,"Wallet Balance Amount"),r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:12,offset:6,style:{textAlign:"center"}},r.a.createElement(rr.a,{gutter:16},r.a.createElement(ir.a,{span:12},r.a.createElement(ao.a,{title:"Total Refundable Amount(INR)",value:l?l.toFixed(2):"0.00"})),r.a.createElement(ir.a,{span:12},r.a.createElement(ao.a,{title:"Total Non Refundable Amount(INR)",value:o?o.toFixed(2):"0.00"}))))),r.a.createElement(ti,{loading:this.state.loading,columns:i,dataSource:a}))}}]),t}(r.a.Component);function Im(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Cm(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Im(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Im(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}r.a.Component;var wm=a(847),Mm=a.n(wm),Am=(a(1682),cr.a.Meta,function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={agentData:{},agentTreeData:{},loading:!1},a.loadAgentTree=a.loadAgentTree.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.props.agent&&this.loadAgentTree()}},{key:"componentWillReceiveProps",value:function(e){this.props.agent!=e.agent&&this.setState({startDate:e.startDate,endDate:e.endDate},(function(){this.props.agent&&this.loadAgentTree()}))}},{key:"loadAgentTree",value:function(){var e=this;e.setState({loading:!0});Ut(Kt("patients/%s/agents_chain/",[e.props.agent]),(function(t){e.setState({agentData:t,loading:!1},(function(){e.setState({agentTreeData:this.general_list(0,t[0][0]),loading:!1})}))}),(function(){e.setState({loading:!1})}))}},{key:"ref_data_level",value:function(e,t){var a=this.state.agentData;return a[t.toString()]?a[t.toString()].filter((function(t){return t.user.referer==e})):[]}},{key:"general_list",value:function(e,t){var a=this.ref_data_level(t.user.id,e+1);for(var n in a)a[n]=this.general_list(e+1,a[n]);return t.children=a,t}},{key:"render",value:function(){return r.a.createElement("div",{style:{background:"#f0f2f5",paddingBottom:"20px"}},r.a.createElement("h2",{style:{padding:"10px"}},"Agent Tree"),r.a.createElement("div",{style:{width:"100%",overflowX:"scroll"}},r.a.createElement(Mm.a,{tree:this.state.agentTreeData,NodeComponent:Tm})))}}]),t}(r.a.Component)),Tm=function(e){var t=e.node;return r.a.createElement("div",null,t.user?r.a.createElement(r.a.Fragment,null,r.a.createElement(cr.a,{style:{margin:"auto",height:160,width:160},bodyStyle:{padding:5,overflow:"hidden"},hoverable:!0},r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:24},t.image?r.a.createElement(ba.a,{src:Bt(t.image),size:50}):r.a.createElement(ba.a,{style:{backgroundColor:"#87d068"},size:50},t.user.first_name?t.user.first_name.charAt(0):r.a.createElement(va.a,{type:"user"}))),r.a.createElement(ir.a,{span:24},t.user.first_name),r.a.createElement(ir.a,{span:24},r.a.createElement("span",null,t.is_approved?r.a.createElement(fa.a,{color:"#87d068"},"Approved"):r.a.createElement(fa.a,{color:"#f50"},"Not Approved"),r.a.createElement("br",null),t.user.mobile,r.a.createElement("br",null),t.user.email))))):null)},Rm=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).onChangeHandle=function(e,t){Object(f.a)(a);a.setState(Object(u.a)({},e,t.target.value))},a.changeSidePanelSize=function(e){a.setState({sidePanelColSpan:e?0:4})},a.handleChangeOption=function(e,t){Object(f.a)(a);a.setState(Object(u.a)({},e,t))},a.state={type:"ALL",sidePanelColSpan:4,advancedOptionShow:!0,agentsOption:[]},a.loadAgents=a.loadAgents.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadAgents()}},{key:"loadAgents",value:function(){var e=this,t={agent:!0,practice:this.props.active_practiceId,type:this.props.type};Ut(se,(function(t){e.setState({agentsOption:t.results})}),(function(){}),t)}},{key:"advancedOption",value:function(e){this.setState({advancedOptionShow:e})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h2",null,"MLM Report ",r.a.createElement(da.a,{type:"primary",shape:"round",icon:this.state.sidePanelColSpan?"double-right":"double-left",style:{float:"right"},onClick:function(){return e.changeSidePanelSize(e.state.sidePanelColSpan)}},"Panel")),r.a.createElement(cr.a,null,r.a.createElement(rr.a,{gutter:16},r.a.createElement(ir.a,{span:24-this.state.sidePanelColSpan},this.state.type==L?r.a.createElement(Pm,Object.assign({},this.state,this.props)):null,"MARGIN"==this.state.type?r.a.createElement(_m,Object.assign({},this.props,this.state)):null,"AGENTVIEW"==this.state.type?r.a.createElement(Am,Object.assign({},this.props,this.state)):null,"WALLET"==this.state.type?r.a.createElement(jm,Object.assign({},this.props,this.state)):null),r.a.createElement(ir.a,{span:this.state.sidePanelColSpan},r.a.createElement(br.a.Group,{buttonStyle:"solid",defaultValue:L,onChange:function(t){return e.onChangeHandle("type",t)}},r.a.createElement("h2",null,"MLM"),r.a.createElement(br.a.Button,{style:{width:"100%",backgroundColor:"transparent",border:"0px"},value:L},"All MLM"),r.a.createElement("p",null,r.a.createElement("br",null)),r.a.createElement("h2",null,"Related Reports"),On.map((function(e){return r.a.createElement(br.a.Button,{style:{width:"100%",backgroundColor:"transparent",border:"0px"},value:e.value},e.name)}))),r.a.createElement("br",null),r.a.createElement("br",null),"AGENTVIEW"==this.state.type?r.a.createElement(r.a.Fragment,null,this.state.advancedOptionShow?r.a.createElement(r.a.Fragment,null,r.a.createElement(da.a,{type:"link",onClick:function(t){return e.advancedOption(!1)}},"Hide Advanced Options "),r.a.createElement(ir.a,null," ",r.a.createElement("br",null),r.a.createElement("h4",null,"Agents"),r.a.createElement(ga.a,{style:{minWidth:"200px"},placeholder:"Select Agents",showSearch:!0,optionFilterProp:"children",onChange:function(t){return e.handleChangeOption("agent",t)}},this.state.agentsOption.map((function(e){return r.a.createElement(ga.a.Option,{value:e.id},e.user.first_name)}))))):r.a.createElement(da.a,{type:"link",onClick:function(t){return e.advancedOption(!0)}},"Show Advanced Options ")):r.a.createElement(r.a.Fragment,null,this.state.advancedOptionShow?r.a.createElement(r.a.Fragment,null,r.a.createElement(da.a,{type:"link",onClick:function(t){return e.advancedOption(!1)}},"Hide Advanced Options "),r.a.createElement(ir.a,null," ",r.a.createElement("br",null),r.a.createElement("h4",null,"Agents"),r.a.createElement(ga.a,{style:{minWidth:"200px"},mode:"multiple",placeholder:"Select Agents",showSearch:!0,optionFilterProp:"children",onChange:function(t){return e.handleChangeOption("agents",t)}},this.state.agentsOption.map((function(e){return r.a.createElement(ga.a.Option,{value:e.id},e.user.first_name)}))))):r.a.createElement(da.a,{type:"link",onClick:function(t){return e.advancedOption(!0)}},"Show Advanced Options "))))))}}]),t}(r.a.Component);function Lm(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Fm(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Lm(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Lm(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Nm=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).loadSuggestionsReport=function(){var e=Object(f.a)(a);e.setState({loading:!0});var t={start:a.state.startDate.format("YYYY-MM-DD"),end:a.state.endDate.format("YYYY-MM-DD")};a.props.status&&(t.status=a.props.status.toString()),Ut(wt,(function(t){e.setState({report:t.results,loading:!1})}),(function(){e.setState({loading:!1})}),t)},a.state={startDate:a.props.startDate,endDate:a.props.endDate,loading:!1,report:[]},a.loadSuggestionsReport=a.loadSuggestionsReport.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadSuggestionsReport()}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.startDate==e.startDate&&this.props.endDate==e.endDate&&this.props.status==e.status||this.setState({startDate:e.startDate,endDate:e.endDate},(function(){t.loadSuggestionsReport()}))}},{key:"render",value:function(){for(var e=this.state.report,t=[],a=1;a<=e.length;a++)t.push(Fm({s_no:a},e[a-1]));var n=[{title:"S. No",key:"s_no",dataIndex:"s_no",width:50},{title:"Date",key:"date",render:function(e,t){return r.a.createElement("span",null,Or()(t.created_at).format("DD MMM YYYY"))},export:function(e,t){return Or()(t.created_at).format("DD MMM YYYY")}},{title:"Name",dataIndex:"name",key:"name"},{title:"Email",key:"email",dataIndex:"email"},{title:"Mobile",ket:"mobile",dataIndex:"mobile"},{title:"Subject",key:"subject",dataIndex:"subject"},{title:"Description",key:"description",dataIndex:"description"}];return r.a.createElement("div",null,r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:12,offset:6,style:{textAlign:"center"}},r.a.createElement(ao.a,{title:"Total Suggestions",value:t.length}),r.a.createElement("br",null))),r.a.createElement(ti,{loading:this.state.loading,columns:n,dataSource:t}))}}]),t}(r.a.Component),Ym=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).onChangeHandle=function(e,t){Object(f.a)(a);a.setState(Object(u.a)({},e,t.target.value))},a.changeSidePanelSize=function(e){a.setState({sidePanelColSpan:e?0:4})},a.handleChangeOption=function(e,t){Object(f.a)(a);a.setState(Object(u.a)({},e,t))},a.onChangeCheckbox=function(e){a.setState({is_complete:!a.state.is_complete})},a.state={type:"ALL",loading:!0,sidePanelColSpan:4,advancedOptionShow:!0},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"advancedOption",value:function(e){this.setState({advancedOptionShow:e})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h2",null,"Suggestions Report ",r.a.createElement(da.a,{type:"primary",shape:"round",icon:this.state.sidePanelColSpan?"double-right":"double-left",style:{float:"right"},onClick:function(){return e.changeSidePanelSize(e.state.sidePanelColSpan)}},"Panel")),r.a.createElement(cr.a,null,r.a.createElement(rr.a,{gutter:16},r.a.createElement(ir.a,{span:24-this.state.sidePanelColSpan},this.state.type==L?r.a.createElement(Nm,Object.assign({},this.state,this.props)):null),r.a.createElement(ir.a,{span:this.state.sidePanelColSpan},r.a.createElement(br.a.Group,{buttonStyle:"solid",defaultValue:L,onChange:function(t){return e.onChangeHandle("type",t)}},r.a.createElement("h2",null,"Suggestions"),r.a.createElement(br.a.Button,{style:{width:"100%",backgroundColor:"transparent",border:"0px"},value:L},"All Suggestions"),r.a.createElement("p",null,r.a.createElement("br",null)),r.a.createElement("h2",null,"Related Reports"))))))}}]),t}(r.a.Component);function Vm(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Bm(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Vm(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Vm(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Hm=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).startLoading=function(){a.setState({loading:!0})},a.stopLoading=function(){a.setState({loading:!1})},a.state={report:[],startDate:a.props.startDate,endDate:a.props.endDate,loading:!1},a.loadReturnInvoice=a.loadReturnInvoice.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadReturnInvoice()}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.startDate==e.startDate&&this.props.endDate==e.endDate&&this.props.patient_groups==e.patient_groups&&this.props.doctors==e.doctors&&this.props.income_type==e.income_type&&this.props.taxes==e.taxes&&this.props.discount==e.discount&&this.props.products==e.products&&this.props.treatments==e.treatments&&this.props.exclude_cancelled==e.exclude_cancelled||this.setState({startDate:e.startDate,endDate:e.endDate},(function(){t.loadReturnInvoice()}))}},{key:"loadReturnInvoice",value:function(){var e=this;this.startLoading();var t=this.state,a=t.startDate,n=t.endDate,r=this.props,i=r.active_practiceId,l=r.type,o=r.exclude_cancelled,s=r.patient_groups,c=r.doctors,u=r.income_type,d=r.taxes,p=r.discount,m=r.products,h=r.treatments,f={practice:i,type:l,start:a.format("YYYY-MM-DD"),end:n.format("YYYY-MM-DD"),is_cancelled:!!o};s&&(f.groups=s.toString()),c&&(f.doctors=c.toString()),u&&(f.income_type=u),h&&(f.treatments=h.toString()),p&&(f.discount=p),d&&(f.taxes=d.toString()),m&&(f.products=m.toString());Ut(lt,(function(t){e.setState({report:t}),e.stopLoading()}),(function(t){e.stopLoading()}),f)}},{key:"render",value:function(){for(var e=this.state,t=e.report,a=e.loading,n=[],i=1;i<=t.length;i++)n.push(Bm({s_no:i},t[i-1]));var l=[{title:"S. No",key:"s_no",dataIndex:"s_no",render:function(e,t){return r.a.createElement("span",null," ",t.s_no)},width:50},{title:"Date",key:"date",render:function(e,t){return r.a.createElement("span",null,Us.get(t,"date"))}},{title:"Patient Name",key:"patientName",render:function(e,t){return r.a.createElement("span",null,Us.get(t,"patient_data.user.first_name"))}},{title:"Patient Id",key:"patient_id",render:function(e,t){return r.a.createElement("span",null,Us.get(t,"patient_data.custom_id"))}},{title:"Return Id",key:"return_id",render:function(e,t){return r.a.createElement("span",null,Us.get(t,"return_id"))}},{title:"Return By",key:"returnBy",render:function(e,t){return r.a.createElement("span",null,Us.get(t,"staff_data.user.first_name"))}},{title:"Total Amount",key:"total",render:function(e,t){return r.a.createElement("span",null,Us.get(t,"total",0).toFixed(2))}},{title:"Return Amount",key:"return_value",render:function(e,t){return r.a.createElement("span",null,Us.get(t,"return_value",0).toFixed(2))}},{title:"Cash Return Amount",key:"cash_return",render:function(e,t){return r.a.createElement("span",null,Us.get(t,"cash_return",0).toFixed(2))}}];return r.a.createElement("div",null,r.a.createElement("h2",null,"All Returned Invoices"),r.a.createElement(lr.a,{loading:a,rowKey:function(e){return e.s_no},pagination:!1,columns:l,expandedRowRender:function(e){return r.a.createElement(qm,{record:[].concat(Object(Oa.a)(e.inventory),Object(Oa.a)(e.procedure))})},dataSource:n}))}}]),t}(r.a.Component);function qm(e){var t=[{title:"Treatment & Products",key:"name",render:function(e,t){return r.a.createElement("span",null,Us.get(t,"name"))}},{title:"Cost",key:"cost",render:function(e,t){return r.a.createElement("span",null,Us.get(t,"unit_cost",0).toFixed(2))}},{title:"Unit",key:"unit",render:function(e,t){return r.a.createElement("span",null,Us.get(t,"unit"))}},{title:"Discount",key:"discount",render:function(e,t){return r.a.createElement("span",null,Us.get(t,"discount_value",0).toFixed(2))}},{title:"Tax",key:"tax",render:function(e,t){return r.a.createElement("span",null,Us.get(t,"tax_value",0).toFixed(2))}},{title:"Total",key:"total",render:function(e,t){return r.a.createElement("span",null,Us.get(t,"total",0).toFixed(2))}}];return r.a.createElement("div",null,r.a.createElement(lr.a,{columns:t,dataSource:Us.get(e,"record"),pagination:!1}))}function zm(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Gm(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?zm(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):zm(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Um=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).startLoading=function(){a.setState({loading:!0})},a.stopLoading=function(){a.setState({loading:!1})},a.loadMonthlyInvoiceReturn=function(){var e=Object(f.a)(a);a.startLoading();var t=a.state,n=t.startDate,r=t.endDate,i=a.props,l=i.active_practiceId,o=i.type,s=i.exclude_cancelled,c=i.patient_groups,u=i.doctors,d=i.income_type,p=i.taxes,m=i.discount,h=i.products,g=i.treatments,y={practice:l,type:o,start:n.format("YYYY-MM-DD"),end:r.format("YYYY-MM-DD"),is_cancelled:!!s};c&&(y.groups=c.toString()),u&&(y.doctors=u.toString()),d&&(y.income_type=d),g&&(y.treatments=g.toString()),m&&(y.discount=m),p&&(y.taxes=p.toString()),h&&(y.products=h.toString());Ut(lt,(function(t){e.setState({report:t}),e.stopLoading()}),(function(t){e.stopLoading()}),y)},a.state={report:[],startDate:a.props.startDate,endDate:a.props.endDate,loading:!1},a.loadMonthlyInvoiceReturn=a.loadMonthlyInvoiceReturn.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadMonthlyInvoiceReturn()}},{key:"componentWillReceiveProps",value:function(e){var t=this,a=this.props,n=a.startDate,r=a.endDate,i=a.patient_groups,l=a.doctors,o=a.income_type,s=a.taxes,c=a.discount,u=a.products,d=a.treatments,p=a.exclude_cancelled;n==e.startDate&&r==e.endDate&&i==e.patient_groups&&l==e.doctors&&o==e.income_type&&s==e.taxes&&c==e.discount&&u==e.products&&d==e.treatments&&p==e.exclude_cancelled||this.setState({startDate:e.startDate,endDate:e.endDate},(function(){t.loadMonthlyInvoiceReturn()}))}},{key:"render",value:function(){for(var e=this.state,t=e.report,a=e.loading,n=[],i=1;i<=t.length;i++)n.push(Gm({s_no:i},t[i-1]));var l=[{title:"S. No",key:"s_no",dataIndex:"s_no",width:50},{title:"Day",key:"date",dataIndex:"date",render:function(e,t){return r.a.createElement("span",null,Or()(t.date).format("MM YYYY"))},export:function(e,t){return Or()(t.date).format("MM YYYY")}},{title:"Cost(INR)",key:"cost",dataIndex:"cost",render:function(e,t){return r.a.createElement("span",null,t.cost.toFixed(2))}},{title:"Discount(INR)",key:"discount",dataIndex:"discount",render:function(e,t){return r.a.createElement("span",null,t.discount.toFixed(2))}},{title:"Tax(INR)",key:"tax",dataIndex:"tax",render:function(e,t){return r.a.createElement("span",null,t.tax.toFixed(2))}}];return r.a.createElement("div",null,r.a.createElement("h2",null,"Monthly wise Return Invoice"),r.a.createElement(pa.a,{size:"large",spinning:a},n.length>0?r.a.createElement(Hs.d,{width:1e3,height:400,data:n,margin:{top:20,right:20,bottom:20,left:20}},r.a.createElement(Hs.n,{dataKey:"date",tickFormatter:function(e){return Or()(e).format("MM YYYY")}}),r.a.createElement(Hs.o,{label:{value:"Return Invoice(INR)",angle:-90,position:"insideLeft"}}),r.a.createElement(Hs.m,null),r.a.createElement(Hs.a,{dataKey:"cost",barSize:35,fill:"#0059b3",stroke:"#0059b3"})):r.a.createElement(Xu.a,{image:Xu.a.PRESENTED_IMAGE_SIMPLE,description:"No Data to Show"})),r.a.createElement(ti,{loading:a,columns:l,dataSource:n}))}}]),t}(r.a.Component),Wm=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).startLoading=function(){a.setState({loading:!0})},a.stopLoading=function(){a.setState({loading:!1})},a.loadEachProcedureInvoiceReturn=function(){var e=Object(f.a)(a);a.startLoading();var t=a.state,n=t.startDate,r=t.endDate,i=a.props,l=i.active_practiceId,o=i.type,s=i.exclude_cancelled,c=i.patient_groups,u=i.doctors,d=i.income_type,p=i.taxes,m=i.discount,h=i.products,g=i.treatments,y={practice:l,type:o,start:n.format("YYYY-MM-DD"),end:r.format("YYYY-MM-DD"),is_cancelled:!!s};c&&(y.groups=c.toString()),u&&(y.doctors=u.toString()),d&&(y.income_type=d),g&&(y.treatments=g.toString()),m&&(y.discount=m),p&&(y.taxes=p.toString()),h&&(y.products=h.toString());Ut(lt,(function(t){e.setState({report:t}),e.stopLoading()}),(function(t){e.stopLoading()}),y)},a.onPieEnter=function(e,t){a.setState({activeIndex:t})},a.state={report:[],startDate:a.props.startDate,endDate:a.props.endDate,loading:!1,activeIndex:0},a.loadEachProcedureInvoiceReturn=a.loadEachProcedureInvoiceReturn.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadEachProcedureInvoiceReturn()}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.startDate==e.startDate&&this.props.endDate==e.endDate&&this.props.patient_groups==e.patient_groups&&this.props.doctors==e.doctors&&this.props.income_type==e.income_type&&this.props.taxes==e.taxes&&this.props.discount==e.discount&&this.props.products==e.products&&this.props.treatments==e.treatments&&this.props.exclude_cancelled==e.exclude_cancelled||this.setState({startDate:e.startDate,endDate:e.endDate},(function(){t.loadEachProcedureInvoiceReturn()}))}},{key:"render",value:function(){var e=this.state,t=e.loading,a=e.report,n=e.activeIndex,i=["#00C49F","#0088FE","#FFBB28","#FF8042"],l=a.reduce((function(e,t){return e+t.cost}),0),o=[{title:"Name",key:"name",dataIndex:"name"},{title:"Discount",key:"discount_value",dataIndex:"discount_value",render:function(e,t){return r.a.createElement("span",null,Us.get(t,"discount_value",0).toFixed(2))}},{title:"Tax",key:"tax_value",dataIndex:"tax_value",render:function(e,t){return r.a.createElement("span",null,Us.get(t,"tax_value",0).toFixed(2))}},{title:"Cost",key:"cost",dataIndex:"cost",render:function(e,t){return r.a.createElement("span",null,Us.get(t,"cost",0).toFixed(2))}}];return r.a.createElement("div",null,r.a.createElement("h2",null,"Return Invoice For Each Procedures"),r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:12,offset:6},r.a.createElement(pa.a,{size:"large",spinning:t},a.length>0?r.a.createElement(Hs.j,{width:1e3,height:400},r.a.createElement(Hs.i,{activeIndex:n,activeShape:function(e){var t=Math.PI/180,a=e.cx,n=e.cy,i=e.midAngle,l=e.innerRadius,o=e.outerRadius,s=e.startAngle,c=e.endAngle,u=e.fill,d=e.payload,p=e.percent,m=(e.value,Math.sin(-t*i)),h=Math.cos(-t*i),f=a+(o+10)*h,g=n+(o+10)*m,y=a+(o+30)*h,E=n+(o+30)*m,b=y+22*(h>=0?1:-1),v=E,_=h>=0?"start":"end";return r.a.createElement("g",null,r.a.createElement(Hs.l,{cx:a,cy:n,innerRadius:l,outerRadius:o,startAngle:s,endAngle:c,fill:u}),r.a.createElement(Hs.l,{cx:a,cy:n,startAngle:s,endAngle:c,innerRadius:o+6,outerRadius:o+10,fill:u}),r.a.createElement("path",{d:"M".concat(f,",").concat(g,"L").concat(y,",").concat(E,"L").concat(b,",").concat(v),stroke:u,fill:"none"}),r.a.createElement("circle",{cx:b,cy:v,r:2,fill:u,stroke:"none"}),r.a.createElement("text",{x:b+12*(h>=0?1:-1),y:v,textAnchor:_,fill:"#333"},d.name+","+d.cost.toFixed(2)),r.a.createElement("text",{x:b+12*(h>=0?1:-1),y:v,dy:18,textAnchor:_,fill:"#999"},"(Rate ".concat((100*p).toFixed(2),"%)")))},data:a,cx:400,dataKey:"cost",cy:200,innerRadius:60,outerRadius:80,fill:"#8884d8",onMouseEnter:this.onPieEnter},a.map((function(e,t){return r.a.createElement(Hs.c,{fill:i[t%i.length]})})))):r.a.createElement(Xu.a,{image:Xu.a.PRESENTED_IMAGE_SIMPLE,description:"No Data to Show"})))),r.a.createElement(sr.a,null,r.a.createElement(ao.a,{title:"Total",value:l.toFixed(2)})),r.a.createElement(ti,{loading:this.state.loading,columns:o,dataSource:a}))}}]),t}(r.a.Component),Km=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).startLoading=function(){a.setState({loading:!0})},a.stopLoading=function(){a.setState({loading:!1})},a.loadEachProductInvoiceReturn=function(){var e=Object(f.a)(a);a.startLoading();var t=a.state,n=t.startDate,r=t.endDate,i=a.props,l=i.active_practiceId,o=i.type,s=i.exclude_cancelled,c=i.patient_groups,u=i.doctors,d=i.income_type,p=i.taxes,m=i.discount,h=i.products,g=i.treatments,y={practice:l,type:o,start:n.format("YYYY-MM-DD"),end:r.format("YYYY-MM-DD"),is_cancelled:!!s};c&&(y.groups=c.toString()),u&&(y.doctors=u.toString()),d&&(y.income_type=d),g&&(y.treatments=g.toString()),m&&(y.discount=m),p&&(y.taxes=p.toString()),h&&(y.products=h.toString());Ut(lt,(function(t){e.setState({report:t}),e.stopLoading()}),(function(t){e.stopLoading()}),y)},a.onPieEnter=function(e,t){a.setState({activeIndex:t})},a.state={report:[],startDate:a.props.startDate,endDate:a.props.endDate,loading:!1,activeIndex:0},a.loadEachProductInvoiceReturn=a.loadEachProductInvoiceReturn.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadEachProductInvoiceReturn()}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.startDate==e.startDate&&this.props.endDate==e.endDate&&this.props.patient_groups==e.patient_groups&&this.props.doctors==e.doctors&&this.props.income_type==e.income_type&&this.props.taxes==e.taxes&&this.props.discount==e.discount&&this.props.products==e.products&&this.props.treatments==e.treatments&&this.props.exclude_cancelled==e.exclude_cancelled||this.setState({startDate:e.startDate,endDate:e.endDate},(function(){t.loadEachProductInvoiceReturn()}))}},{key:"render",value:function(){var e=this.state,t=e.loading,a=e.report,n=e.activeIndex,i=["#0088FE","#00C49F","#FFBB28","#FF8042"],l=a.reduce((function(e,t){return e+t.cost}),0),o=[{title:"Name",key:"name",dataIndex:"name"},{title:"Discount",key:"discount_value",dataIndex:"discount_value",render:function(e,t){return r.a.createElement("span",null,Us.get(t,"discount_value",0).toFixed(2))}},{title:"Tax",key:"tax_value",dataIndex:"tax_value",render:function(e,t){return r.a.createElement("span",null,Us.get(t,"tax_value",0).toFixed(2))}},{title:"Cost",key:"cost",dataIndex:"cost",render:function(e,t){return r.a.createElement("span",null,Us.get(t,"cost",0).toFixed(2))}}];return r.a.createElement("div",null,r.a.createElement("h2",null,"Return Invoice For Each Products"),r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:12,offset:6},r.a.createElement(pa.a,{size:"large",spinning:t},a.length>0?r.a.createElement(Hs.j,{width:800,height:400},r.a.createElement(Hs.i,{activeIndex:n,activeShape:function(e){var t=Math.PI/180,a=e.cx,n=e.cy,i=e.midAngle,l=e.innerRadius,o=e.outerRadius,s=e.startAngle,c=e.endAngle,u=e.fill,d=e.payload,p=e.percent,m=(e.value,Math.sin(-t*i)),h=Math.cos(-t*i),f=a+(o+10)*h,g=n+(o+10)*m,y=a+(o+30)*h,E=n+(o+30)*m,b=y+22*(h>=0?1:-1),v=E,_=h>=0?"start":"end";return r.a.createElement("g",null,r.a.createElement(Hs.l,{cx:a,cy:n,innerRadius:l,outerRadius:o,startAngle:s,endAngle:c,fill:u}),r.a.createElement(Hs.l,{cx:a,cy:n,startAngle:s,endAngle:c,innerRadius:o+6,outerRadius:o+10,fill:u}),r.a.createElement("path",{d:"M".concat(f,",").concat(g,"L").concat(y,",").concat(E,"L").concat(b,",").concat(v),stroke:u,fill:"none"}),r.a.createElement("circle",{cx:b,cy:v,r:2,fill:u,stroke:"none"}),r.a.createElement("text",{x:b+12*(h>=0?1:-1),y:v,textAnchor:_,fill:"#333"},d.name+","+d.cost.toFixed(2)),r.a.createElement("text",{x:b+12*(h>=0?1:-1),y:v,dy:18,textAnchor:_,fill:"#999"},"(Rate ".concat((100*p).toFixed(2),"%)")))},data:a,cx:300,dataKey:"cost",cy:200,innerRadius:60,outerRadius:80,fill:"#8884d8",onMouseEnter:this.onPieEnter},a.map((function(e,t){return r.a.createElement(Hs.c,{fill:i[t%i.length]})})))):r.a.createElement(Xu.a,{image:Xu.a.PRESENTED_IMAGE_SIMPLE,description:"No Data to Show"})))),r.a.createElement(sr.a,null,r.a.createElement(ao.a,{title:"Total",value:l.toFixed(2)})),r.a.createElement(ti,{loading:this.state.loading,columns:o,dataSource:a}))}}]),t}(r.a.Component),Qm=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).startLoading=function(){a.setState({loading:!0})},a.stopLoading=function(){a.setState({loading:!1})},a.loadEachDoctorInvoiceReturn=function(){var e=Object(f.a)(a);a.startLoading();var t=a.state,n=t.startDate,r=t.endDate,i=a.props,l=i.active_practiceId,o=i.type,s=i.exclude_cancelled,c=i.patient_groups,u=i.doctors,d=i.income_type,p=i.taxes,m=i.discount,h=i.products,g=i.treatments,y={practice:l,type:o,start:n.format("YYYY-MM-DD"),end:r.format("YYYY-MM-DD"),is_cancelled:!!s};c&&(y.groups=c.toString()),u&&(y.doctors=u.toString()),d&&(y.income_type=d),g&&(y.treatments=g.toString()),m&&(y.discount=m),p&&(y.taxes=p.toString()),h&&(y.products=h.toString());Ut(lt,(function(t){e.setState({report:t}),e.stopLoading()}),(function(t){e.stopLoading()}),y)},a.onPieEnter=function(e,t){a.setState({activeIndex:t})},a.state={report:[],practiceDoctors:[],startDate:a.props.startDate,endDate:a.props.endDate,loading:!1,activeIndex:0},a.loadEachDoctorInvoiceReturn=a.loadEachDoctorInvoiceReturn.bind(Object(f.a)(a)),mi(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadEachDoctorInvoiceReturn()}},{key:"componentWillReceiveProps",value:function(e){var t=this,a=this.props,n=a.startDate,r=a.endDate,i=a.patient_groups,l=a.doctors,o=a.income_type,s=a.taxes,c=a.discount,u=a.products,d=a.treatments,p=a.exclude_cancelled;n==e.startDate&&r==e.endDate&&i==e.patient_groups&&l==e.doctors&&o==e.income_type&&s==e.taxes&&c==e.discount&&u==e.products&&d==e.treatments&&p==e.exclude_cancelled||this.setState({startDate:e.startDate,endDate:e.endDate},(function(){t.loadEachDoctorInvoiceReturn()}))}},{key:"render",value:function(){var e=this.state,t=e.report,a=e.loading,n=e.activeIndex,i=e.practiceDoctors,l=["#0088FE","#00C49F","#FFBB28","#FF8042"],o=t.reduce((function(e,t){return e+t.cost}),0),s=[{title:"Doctor",key:"doctor",dataIndex:"doctor",render:function(e,t){return r.a.createElement("span",null,"NA"==t.doctor?r.a.createElement("span",null,"No Doctor assigned"):r.a.createElement(r.a.Fragment,null,i.map((function(e){return e.id==t.doctor?r.a.createElement("span",null,e.user.first_name):null}))))}},{title:"Discount",key:"discount_value",dataIndex:"discount_value",render:function(e,t){return r.a.createElement("span",null,Us.get(t,"discount_value",0).toFixed(2))}},{title:"Tax",key:"tax_value",dataIndex:"tax_value",render:function(e,t){return r.a.createElement("span",null,Us.get(t,"tax_value",0).toFixed(2))}},{title:"Cost",key:"cost",dataIndex:"cost",render:function(e,t){return r.a.createElement("span",null,Us.get(t,"cost",0).toFixed(2))}}];return r.a.createElement("div",null,r.a.createElement("h2",null,"Return Invoice For Each Doctors"),r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:12,offset:6},r.a.createElement(pa.a,{size:"large",spinning:a},t.length>0?r.a.createElement(Hs.j,{width:800,height:400},r.a.createElement(Hs.i,{activeIndex:n,activeShape:function(e){var t=Math.PI/180,a=e.cx,n=e.cy,l=e.midAngle,o=e.innerRadius,s=e.outerRadius,c=e.startAngle,u=e.endAngle,d=e.fill,p=e.payload,m=e.percent,h=(e.value,Math.sin(-t*l)),f=Math.cos(-t*l),g=a+(s+10)*f,y=n+(s+10)*h,E=a+(s+30)*f,b=n+(s+30)*h,v=E+22*(f>=0?1:-1),_=b,O=f>=0?"start":"end";return r.a.createElement("g",null,r.a.createElement(Hs.l,{cx:a,cy:n,innerRadius:o,outerRadius:s,startAngle:c,endAngle:u,fill:d}),r.a.createElement(Hs.l,{cx:a,cy:n,startAngle:c,endAngle:u,innerRadius:s+6,outerRadius:s+10,fill:d}),r.a.createElement("path",{d:"M".concat(g,",").concat(y,"L").concat(E,",").concat(b,"L").concat(v,",").concat(_),stroke:d,fill:"none"}),r.a.createElement("circle",{cx:v,cy:_,r:2,fill:d,stroke:"none"}),r.a.createElement("text",{x:v+12*(f>=0?1:-1),y:_,textAnchor:O,fill:"#333"},"NA"==p.doctor?"No Doctor assigned":r.a.createElement(r.a.Fragment,null,i.map((function(e){return e.id==p.doctor?r.a.createElement(r.a.Fragment,null,e.user.first_name):null})))),r.a.createElement("text",{x:v+12*(f>=0?1:-1),y:_,dy:18,textAnchor:O,fill:"#999"},"(Rate ".concat((100*m).toFixed(2),"%)")))},data:t,cx:300,dataKey:"cost",cy:200,innerRadius:60,outerRadius:80,fill:"#8884d8",onMouseEnter:this.onPieEnter},t.map((function(e,t){return r.a.createElement(Hs.c,{fill:l[t%l.length]})})))):r.a.createElement(Xu.a,{image:Xu.a.PRESENTED_IMAGE_SIMPLE,description:"No Data to Show"})))),r.a.createElement(sr.a,null,r.a.createElement(ao.a,{title:"Total",value:o.toFixed(2)})),r.a.createElement(ti,{loading:this.state.loading,columns:s,dataSource:t}))}}]),t}(r.a.Component),Zm=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).startLoading=function(){a.setState({loading:!0})},a.stopLoading=function(){a.setState({loading:!1})},a.loadEachPatientGroupInvoiceReturn=function(){var e=Object(f.a)(a);a.startLoading();var t=a.state,n=t.startDate,r=t.endDate,i=a.props,l=i.active_practiceId,o=i.type,s=i.exclude_cancelled,c=i.patient_groups,u=i.doctors,d=i.income_type,p=i.taxes,m=i.discount,h=i.products,g=i.treatments,y={practice:l,type:o,start:n.format("YYYY-MM-DD"),end:r.format("YYYY-MM-DD"),is_cancelled:!!s};c&&(y.groups=c.toString()),u&&(y.doctors=u.toString()),d&&(y.income_type=d),g&&(y.treatments=g.toString()),m&&(y.discount=m),p&&(y.taxes=p.toString()),h&&(y.products=h.toString());Ut(lt,(function(t){e.setState({report:t}),e.stopLoading()}),(function(t){e.stopLoading()}),y)},a.onPieEnter=function(e,t){a.setState({activeIndex:t})},a.state={report:[],startDate:a.props.startDate,endDate:a.props.endDate,loading:!1,activeIndex:0},a.loadEachPatientGroupInvoiceReturn=a.loadEachPatientGroupInvoiceReturn.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadEachPatientGroupInvoiceReturn()}},{key:"componentWillReceiveProps",value:function(e){var t=this,a=this.props,n=a.startDate,r=a.endDate,i=a.patient_groups,l=a.doctors,o=a.income_type,s=a.taxes,c=a.discount,u=a.products,d=a.treatments,p=a.exclude_cancelled;n==e.startDate&&r==e.endDate&&i==e.patient_groups&&l==e.doctors&&o==e.income_type&&s==e.taxes&&c==e.discount&&u==e.products&&d==e.treatments&&p==e.exclude_cancelled||this.setState({startDate:e.startDate,endDate:e.endDate},(function(){t.loadEachPatientGroupInvoiceReturn()}))}},{key:"render",value:function(){var e=this.state,t=e.report,a=e.loading,n=e.activeIndex,i=["#00C49F","#0088FE","#00C49F","#FFBB28","#FF8042"],l=t.reduce((function(e,t){return e+t.cost}),0),o=[{title:"Patient Group",key:"name",dataIndex:"name"},{title:"Discount",key:"discount_value",dataIndex:"discount_value",render:function(e,t){return r.a.createElement("span",null,Us.get(t,"discount_value",0).toFixed(2))}},{title:"Tax",key:"tax_value",dataIndex:"tax_value",render:function(e,t){return r.a.createElement("span",null,Us.get(t,"tax_value",0).toFixed(2))}},{title:"Cost",key:"cost",dataIndex:"cost",render:function(e,t){return r.a.createElement("span",null,Us.get(t,"cost",0).toFixed(2))}}];return r.a.createElement("div",null,r.a.createElement("h2",null,"Return Invoice For Each Patient Groups"),r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:12,offset:6},r.a.createElement(pa.a,{size:"large",spinning:a},t.length>0?r.a.createElement(Hs.j,{width:800,height:400},r.a.createElement(Hs.i,{activeIndex:n,activeShape:function(e){var t=Math.PI/180,a=e.cx,n=e.cy,i=e.midAngle,l=e.innerRadius,o=e.outerRadius,s=e.startAngle,c=e.endAngle,u=e.fill,d=e.payload,p=e.percent,m=(e.value,Math.sin(-t*i)),h=Math.cos(-t*i),f=a+(o+10)*h,g=n+(o+10)*m,y=a+(o+30)*h,E=n+(o+30)*m,b=y+22*(h>=0?1:-1),v=E,_=h>=0?"start":"end";return r.a.createElement("g",null,r.a.createElement(Hs.l,{cx:a,cy:n,innerRadius:l,outerRadius:o,startAngle:s,endAngle:c,fill:u}),r.a.createElement(Hs.l,{cx:a,cy:n,startAngle:s,endAngle:c,innerRadius:o+6,outerRadius:o+10,fill:u}),r.a.createElement("path",{d:"M".concat(f,",").concat(g,"L").concat(y,",").concat(E,"L").concat(b,",").concat(v),stroke:u,fill:"none"}),r.a.createElement("circle",{cx:b,cy:v,r:2,fill:u,stroke:"none"}),r.a.createElement("text",{x:b+12*(h>=0?1:-1),y:v,textAnchor:_,fill:"#333"},d.name+","+d.cost.toFixed(2)),r.a.createElement("text",{x:b+12*(h>=0?1:-1),y:v,dy:18,textAnchor:_,fill:"#999"},"(Rate ".concat((100*p).toFixed(2),"%)")))},data:t,cx:300,dataKey:"cost",cy:200,innerRadius:60,outerRadius:80,fill:"#8884d8",onMouseEnter:this.onPieEnter},t.map((function(e,t){return r.a.createElement(Hs.c,{fill:i[t%i.length]})})))):r.a.createElement(Xu.a,{image:Xu.a.PRESENTED_IMAGE_SIMPLE,description:"No Data to Show"})))),r.a.createElement(sr.a,null,r.a.createElement(ao.a,{title:"Total",value:l.toFixed(2)})),r.a.createElement(ti,{loading:this.state.loading,columns:o,dataSource:t}))}}]),t}(r.a.Component),Xm=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).startLoading=function(){a.setState({loading:!0})},a.stopLoading=function(){a.setState({loading:!1})},a.loadEachTaxInvoiceReturn=function(){var e=Object(f.a)(a);a.startLoading();var t=a.state,n=t.startDate,r=t.endDate,i=a.props,l=i.active_practiceId,o=i.type,s=i.exclude_cancelled,c=i.patient_groups,u=i.doctors,d=i.income_type,p=i.taxes,m=i.discount,h=i.products,g=i.treatments,y={practice:l,type:o,start:n.format("YYYY-MM-DD"),end:r.format("YYYY-MM-DD"),is_cancelled:!!s};c&&(y.groups=c.toString()),u&&(y.doctors=u.toString()),d&&(y.income_type=d),g&&(y.treatments=g.toString()),m&&(y.discount=m),p&&(y.taxes=p.toString()),h&&(y.products=h.toString());Ut(lt,(function(t){e.setState({report:t}),e.stopLoading()}),(function(t){e.stopLoading()}),y)},a.onPieEnter=function(e,t){a.setState({activeIndex:t})},a.state={report:[],startDate:a.props.startDate,endDate:a.props.endDate,loading:!1,activeIndex:0},a.loadEachTaxInvoiceReturn=a.loadEachTaxInvoiceReturn.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadEachTaxInvoiceReturn()}},{key:"componentWillReceiveProps",value:function(e){var t=this,a=this.props,n=a.startDate,r=a.endDate,i=a.patient_groups,l=a.doctors,o=a.income_type,s=a.taxes,c=a.discount,u=a.products,d=a.treatments,p=a.exclude_cancelled;n==e.startDate&&r==e.endDate&&i==e.patient_groups&&l==e.doctors&&o==e.income_type&&s==e.taxes&&c==e.discount&&u==e.products&&d==e.treatments&&p==e.exclude_cancelled||this.setState({startDate:e.startDate,endDate:e.endDate},(function(){t.loadEachTaxInvoiceReturn()}))}},{key:"render",value:function(){var e=this.state,t=e.report,a=e.loading,n=e.activeIndex,i=["#0088FE","#00C49F","#FFBB28","#FF8042"],l=[{title:"Tax",key:"name",dataIndex:"name"},{title:"Tax",key:"tax_value",dataIndex:"tax_value",render:function(e,t){return r.a.createElement("span",null,Us.get(t,"tax_value",0).toFixed(2))}},{title:"Total",key:"total",dataIndex:"total",render:function(e,t){return r.a.createElement("span",null,Us.get(t,"total",0).toFixed(2))}}],o=t.reduce((function(e,t){return e+t.total}),0);return r.a.createElement("div",null,r.a.createElement("h2",null,"Return Invoice For Each Taxes"),r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:12,offset:6},r.a.createElement(pa.a,{size:"large",spinning:a},t.length>0?r.a.createElement(Hs.j,{width:800,height:400},r.a.createElement(Hs.i,{activeIndex:n,activeShape:function(e){var t=Math.PI/180,a=e.cx,n=e.cy,i=e.midAngle,l=e.innerRadius,o=e.outerRadius,s=e.startAngle,c=e.endAngle,u=e.fill,d=e.payload,p=e.percent,m=(e.value,Math.sin(-t*i)),h=Math.cos(-t*i),f=a+(o+10)*h,g=n+(o+10)*m,y=a+(o+30)*h,E=n+(o+30)*m,b=y+22*(h>=0?1:-1),v=E,_=h>=0?"start":"end";return r.a.createElement("g",null,r.a.createElement(Hs.l,{cx:a,cy:n,innerRadius:l,outerRadius:o,startAngle:s,endAngle:c,fill:u}),r.a.createElement(Hs.l,{cx:a,cy:n,startAngle:s,endAngle:c,innerRadius:o+6,outerRadius:o+10,fill:u}),r.a.createElement("path",{d:"M".concat(f,",").concat(g,"L").concat(y,",").concat(E,"L").concat(b,",").concat(v),stroke:u,fill:"none"}),r.a.createElement("circle",{cx:b,cy:v,r:2,fill:u,stroke:"none"}),r.a.createElement("text",{x:b+12*(h>=0?1:-1),y:v,textAnchor:_,fill:"#333"},d.name+","+d.total.toFixed(2)),r.a.createElement("text",{x:b+12*(h>=0?1:-1),y:v,dy:18,textAnchor:_,fill:"#999"},"(Rate ".concat((100*p).toFixed(2),"%)")))},data:t,cx:300,dataKey:"total",cy:200,innerRadius:60,outerRadius:80,fill:"#8884d8",onMouseEnter:this.onPieEnter},t.map((function(e,t){return r.a.createElement(Hs.c,{fill:i[t%i.length]})})))):r.a.createElement(Xu.a,{image:Xu.a.PRESENTED_IMAGE_SIMPLE,description:"No Data to Show"})))),r.a.createElement(sr.a,null,r.a.createElement(ao.a,{title:"Total",value:o.toFixed(2)})),r.a.createElement(ti,{loading:this.state.loading,columns:l,dataSource:t}))}}]),t}(r.a.Component);function Jm(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function $m(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Jm(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Jm(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var eh=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).startLoading=function(){a.setState({loading:!0})},a.stopLoading=function(){a.setState({loading:!1})},a.loadDailyInvoiceReturn=function(){var e=Object(f.a)(a);a.startLoading();var t=a.state,n=t.startDate,r=t.endDate,i=a.props,l=i.active_practiceId,o=i.type,s=i.exclude_cancelled,c=i.patient_groups,u=i.doctors,d=i.income_type,p=i.taxes,m=i.discount,h=i.products,g=i.treatments,y={practice:l,type:o,start:n.format("YYYY-MM-DD"),end:r.format("YYYY-MM-DD"),is_cancelled:!!s};c&&(y.groups=c.toString()),u&&(y.doctors=u.toString()),d&&(y.income_type=d),g&&(y.treatments=g.toString()),m&&(y.discount=m),p&&(y.taxes=p.toString()),h&&(y.products=h.toString());Ut(lt,(function(t){e.setState({report:t}),e.stopLoading()}),(function(t){e.stopLoading()}),y)},a.state={report:[],startDate:a.props.startDate,endDate:a.props.endDate,loading:!1},a.loadDailyInvoiceReturn=a.loadDailyInvoiceReturn.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadDailyInvoiceReturn()}},{key:"componentWillReceiveProps",value:function(e){var t=this,a=this.props,n=a.startDate,r=a.endDate,i=a.patient_groups,l=a.doctors,o=a.income_type,s=a.taxes,c=a.discount,u=a.products,d=a.treatments,p=a.exclude_cancelled;n==e.startDate&&r==e.endDate&&i==e.patient_groups&&l==e.doctors&&o==e.income_type&&s==e.taxes&&c==e.discount&&u==e.products&&d==e.treatments&&p==e.exclude_cancelled||this.setState({startDate:e.startDate,endDate:e.endDate},(function(){t.loadDailyInvoiceReturn()}))}},{key:"render",value:function(){for(var e=this.state,t=e.report,a=e.loading,n=[],i=1;i<=t.length;i++)n.push($m({s_no:i},t[i-1]));var l=[{title:"S. No",key:"s_no",dataIndex:"s_no",width:50},{title:"Day",key:"date",dataIndex:"date",render:function(e,t){return r.a.createElement("span",null,Or()(t.date).format("ll"))},export:function(e,t){return Or()(t.date).format("ll")}},{title:"Cost(INR)",key:"cost",dataIndex:"cost",render:function(e,t){return r.a.createElement("span",null,t.cost.toFixed(2))}},{title:"Discount(INR)",key:"discount",dataIndex:"discount",render:function(e,t){return r.a.createElement("span",null,t.discount.toFixed(2))}},{title:"Tax(INR)",key:"tax",dataIndex:"tax",render:function(e,t){return r.a.createElement("span",null,t.tax.toFixed(2))}}];return r.a.createElement("div",null,r.a.createElement("h2",null,"Daily wise Return Invoice"),r.a.createElement(pa.a,{size:"large",spinning:a},n.length>0?r.a.createElement(Hs.d,{width:1e3,height:400,data:n,margin:{top:20,right:20,bottom:20,left:20}},r.a.createElement(Hs.n,{dataKey:"date",tickFormatter:function(e){return Or()(e).format("ll")}}),r.a.createElement(Hs.o,{label:{value:"Return Invoice(INR)",angle:-90,position:"insideLeft"}}),r.a.createElement(Hs.m,null),r.a.createElement(Hs.a,{dataKey:"cost",barSize:35,fill:"#0059b3",stroke:"#0059b3"},r.a.createElement(Hs.e,{dataKey:"cost"}))):r.a.createElement(Xu.a,{image:Xu.a.PRESENTED_IMAGE_SIMPLE,description:"No Data to Show"})),r.a.createElement(ti,{loading:a,columns:l,dataSource:n}))}}]),t}(r.a.Component),th=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).onChangeHandle=function(e,t){Object(f.a)(a);a.setState(Object(u.a)({},e,t.target.value))},a.changeSidePanelSize=function(e){a.setState({sidePanelColSpan:e?0:4})},a.handleChangeOption=function(e,t){a.setState(Object(u.a)({},e,t))},a.onChangeCheckbox=function(e){a.setState({exclude_cancelled:!a.state.exclude_cancelled})},a.state={type:"ALL",loading:!0,sidePanelColSpan:4,advancedOptionShow:!0,patientGroup:[],practiceDoctors:[],taxes_list:[],productItems:[],treatment_data:[]},mi(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadPatientGroup(),this.loadTaxes(),this.loadProductItem(),this.loadTreatments()}},{key:"loadPatientGroup",value:function(){var e=this;Ut(Kt(ve,[this.props.active_practiceId]),(function(t){e.setState({patientGroup:t})}),(function(){}))}},{key:"loadTaxes",value:function(){var e=this;Ut(Kt($,[this.props.active_practiceId]),(function(t){e.setState({taxes_list:t})}),(function(){}))}},{key:"loadProductItem",value:function(){var e=this;Ut(at,(function(t){e.setState({productItems:t})}),(function(){}),{practice:this.props.active_practiceId})}},{key:"loadTreatments",value:function(){var e=this;Ut(Kt(ae,[this.props.active_practiceId]),(function(t){e.setState({treatment_data:t})}),(function(){}),{pagination:!1})}},{key:"advancedOption",value:function(e){this.setState({advancedOptionShow:e})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h2",null,"Return Invoice Report ",r.a.createElement(da.a,{type:"primary",shape:"round",icon:this.state.sidePanelColSpan?"double-right":"double-left",style:{float:"right"},onClick:function(){return e.changeSidePanelSize(e.state.sidePanelColSpan)}},"Panel")),r.a.createElement(cr.a,null,r.a.createElement(rr.a,{gutter:16},r.a.createElement(ir.a,{span:24-this.state.sidePanelColSpan},"ALL"==this.state.type?r.a.createElement(Hm,Object.assign({},this.props,this.state)):null,"DAILY"==this.state.type?r.a.createElement(eh,Object.assign({},this.props,this.state)):null,"MONTHLY"==this.state.type?r.a.createElement(Um,Object.assign({},this.props,this.state)):null,"PROCEDURE"==this.state.type?r.a.createElement(Wm,Object.assign({},this.props,this.state)):null,"PRODUCT"==this.state.type?r.a.createElement(Km,Object.assign({},this.props,this.state)):null,"DOCTOR"==this.state.type?r.a.createElement(Qm,Object.assign({},this.state,this.props)):null,"PATIENT_GROUPS"==this.state.type?r.a.createElement(Zm,Object.assign({},this.state,this.props)):null,"TAX"==this.state.type?r.a.createElement(Xm,Object.assign({},this.state,this.props)):null),r.a.createElement(ir.a,{span:this.state.sidePanelColSpan},r.a.createElement(br.a.Group,{buttonStyle:"solid",defaultValue:"ALL",onChange:function(t){return e.onChangeHandle("type",t)}},r.a.createElement("h2",null,"Invoice Returns"),r.a.createElement(br.a.Button,{style:{width:"100%",backgroundColor:"transparent",border:"0px"},value:L},"All Returned Invoices"),r.a.createElement("p",null,r.a.createElement("br",null)),r.a.createElement("h2",null,"Related Reports"),Pn.map((function(e){return r.a.createElement(br.a.Button,{style:{width:"100%",backgroundColor:"transparent",border:"0px"},value:e.value},e.name)}))),r.a.createElement("br",null),r.a.createElement("br",null),this.state.advancedOptionShow?r.a.createElement(r.a.Fragment,null,r.a.createElement(da.a,{type:"link",onClick:function(t){return e.advancedOption(!1)}},"Hide Advanced Options "),r.a.createElement(ir.a,null," ",r.a.createElement("br",null),r.a.createElement("h4",null,"Patient Groups"),r.a.createElement(ga.a,{style:{minWidth:"200px"},mode:"multiple",placeholder:"Select Patient Groups",onChange:function(t){return e.handleChangeOption("patient_groups",t)}},this.state.patientGroup.map((function(e){return r.a.createElement(ga.a.Option,{value:e.id},e.name)}))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h4",null,"Doctors"),r.a.createElement(ga.a,{style:{minWidth:"200px"},mode:"multiple",placeholder:"Select Doctors",onChange:function(t){return e.handleChangeOption("doctors",t)}},this.state.practiceDoctors.map((function(e){return r.a.createElement(ga.a.Option,{value:e.id},e.user.first_name)}))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h4",null,"Income Type"),r.a.createElement(ga.a,{style:{minWidth:"200px"},placeholder:"Select Income Type",onChange:function(t){return e.handleChangeOption("income_type",t)}},Kn.map((function(e){return r.a.createElement(ga.a.Option,{value:e.value},e.label)}))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h4",null,"Taxes"),r.a.createElement(ga.a,{style:{minWidth:"200px"},mode:"multiple",placeholder:"Select Taxes",onChange:function(t){return e.handleChangeOption("taxes",t)}},this.state.taxes_list.map((function(e){return r.a.createElement(ga.a.Option,{value:e.id},e.name)}))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h4",null,"Discount"),r.a.createElement(ga.a,{style:{minWidth:"200px"},placeholder:"Select Discount",onChange:function(t){return e.handleChangeOption("discount",t)}},xn.map((function(e){return r.a.createElement(ga.a.Option,{value:e.value},e.label)}))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h4",null,"Product"),r.a.createElement(ga.a,{style:{minWidth:"200px"},mode:"multiple",placeholder:"Select Products",onChange:function(t){return e.handleChangeOption("products",t)}},this.state.productItems.map((function(e){return r.a.createElement(ga.a.Option,{value:e.id},e.name)}))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h4",null,"Treatments"),r.a.createElement(ga.a,{style:{minWidth:"200px"},mode:"multiple",placeholder:"Select Treatments",onChange:function(t){return e.handleChangeOption("treatments",t)}},this.state.treatment_data.map((function(e){return r.a.createElement(ga.a.Option,{value:e.id},e.name)}))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(pr.a,{onChange:function(t){return e.onChangeCheckbox(t)}}," Exclude Cancelled"))):r.a.createElement(da.a,{type:"link",onClick:function(t){return e.advancedOption(!0)}},"Show Advanced Options ")))))}}]),t}(r.a.Component),ah=o.a.Content,nh=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={startDate:Or()(),endDate:Or()(),active_practiceId:a.props.active_practiceId},a.reportsDateRange=a.reportsDateRange.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"reportsDateRange",value:function(e){this.setState({startDate:Or()(e[0],"DD/MM/YYYY"),endDate:Or()(e[1],"DD/MM/YYYY")})}},{key:"render",value:function(){var e=this,t=this;return r.a.createElement(o.a,null,r.a.createElement(Uu,Object.assign({reportsDateRange:this.reportsDateRange},this.props)),r.a.createElement(ah,{style:{margin:"16px"}},r.a.createElement(y.d,null,r.a.createElement(y.b,{exact:!0,path:"/reports/amountdue",render:function(a){return t.props.activePracticePermissions.ReportsAmountDue||t.props.allowAllPermissions?r.a.createElement(ed,Object.assign({},e.props,e.state,a)):r.a.createElement(xi,null)}}),r.a.createElement(y.b,{exact:!0,path:"/reports/emr",render:function(a){return t.props.activePracticePermissions.ReportsEMR||t.props.allowAllPermissions?r.a.createElement(Kd,Object.assign({},e.props,e.state,a)):r.a.createElement(xi,null)}}),r.a.createElement(y.b,{exact:!0,path:"/reports/expenses",render:function(a){return t.props.activePracticePermissions.ReportsExpenses||t.props.allowAllPermissions?r.a.createElement($d,Object.assign({},e.props,e.state,a)):r.a.createElement(xi,null)}}),r.a.createElement(y.b,{exact:!0,path:"/reports/income",render:function(a){return t.props.activePracticePermissions.ReportsIncome||t.props.allowAllPermissions?r.a.createElement(up,Object.assign({},e.props,e.state,a)):r.a.createElement(xi,null)}}),r.a.createElement(y.b,{exact:!0,path:"/reports/inventory",render:function(a){return t.props.activePracticePermissions.ReportsInventory||t.props.allowAllPermissions?r.a.createElement(yp,Object.assign({},e.props,e.state,a)):r.a.createElement(xi,null)}}),r.a.createElement(y.b,{exact:!0,path:"/reports/inventoryretails",render:function(a){return t.props.activePracticePermissions.ReportsInventoryRetail||t.props.allowAllPermissions?r.a.createElement(Em,Object.assign({},e.props,e.state,a)):r.a.createElement(xi,null)}}),r.a.createElement(y.b,{exact:!0,path:"/reports/patients",render:function(a){return t.props.activePracticePermissions.ReportsPatients||t.props.allowAllPermissions?r.a.createElement(Gp,Object.assign({},e.props,e.state,a)):r.a.createElement(xi,null)}}),r.a.createElement(y.b,{exact:!0,path:"/reports/payments",render:function(a){return t.props.activePracticePermissions.ReportsPayments||t.props.allowAllPermissions?r.a.createElement(rm,Object.assign({},e.props,e.state,a)):r.a.createElement(xi,null)}}),r.a.createElement(y.b,{exact:!0,path:"/reports/summary",render:function(a){return t.props.activePracticePermissions.ReportsDailySummary||t.props.allowAllPermissions?r.a.createElement(sm,Object.assign({},e.props,e.state,a)):r.a.createElement(xi,null)}}),r.a.createElement(y.b,{exact:!0,path:"/reports/bed_booking",render:function(a){return t.props.activePracticePermissions.ReportsBedBooking||t.props.allowAllPermissions?r.a.createElement(hm,Object.assign({},e.props,e.state,a)):r.a.createElement(xi,null)}}),r.a.createElement(y.b,{exact:!0,path:"/reports/mlm",render:function(a){return t.props.activePracticePermissions.ReportsMLMReport||t.props.allowAllPermissions?r.a.createElement(Rm,Object.assign({},e.props,e.state,a)):r.a.createElement(xi,null)}}),r.a.createElement(y.b,{exact:!0,path:"/reports/invoice-return",render:function(a){return t.props.activePracticePermissions.ReportsMLMReport||t.props.allowAllPermissions?r.a.createElement(th,Object.assign({},e.props,e.state,a)):r.a.createElement(xi,null)}}),r.a.createElement(y.b,{exact:!0,path:"/reports/suggestions",render:function(a){return t.props.activePracticePermissions.ReportsSuggestions||t.props.allowAllPermissions?r.a.createElement(Ym,Object.assign({},e.props,e.state,a)):r.a.createElement(xi,null)}}),r.a.createElement(y.b,{render:function(a){return t.props.activePracticePermissions.ReportsAppointments||t.props.allowAllPermissions?r.a.createElement(Hd,Object.assign({},e.props,e.state,a)):r.a.createElement(xi,null)}}))))}}]),t}(r.a.Component),rh=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={editBlogData:a.props.editBlogData?a.props.editBlogData:null},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.props.match.params.id&&(this.state.editBlogData||this.loadData())}},{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"loadData",value:function(){var e=this;Ut(Kt("video/%s/",[this.props.match.params.id]),(function(t){e.setState({editBlogData:t})}),(function(){}))}},{key:"render",value:function(){var e,t=this,a=this,n=[{label:"Name",key:"name",initialValue:this.state.editBlogData?this.state.editBlogData.name:null,type:S},{label:"Rank ",key:"rank",initialValue:this.state.editBlogData?this.state.editBlogData.rank:1,type:I,required:!0,min:1},{label:"Video link",key:"link",initialValue:this.state.editBlogData?this.state.editBlogData.link:null,type:S,required:!0}];this.state.editBlogData&&(e={successFn:function(e){Qt(O,"success"),a.setState({redirect:!0}),a.props.loadData()},errorFn:function(){},action:Kt("video/%s/",[this.props.match.params.id]),method:"put"});var i=vr.a.create()(Vr),l={successFn:function(e){Qt(O,"success"),a.setState({redirect:!0}),a.props.loadData(),console.log(e)},errorFn:function(){},action:"video/",method:"post"},o=[{key:"is_active",value:!0}];return r.a.createElement(rr.a,null,r.a.createElement(cr.a,null,r.a.createElement(y.b,{exact:!0,path:"/web/videos/edit/:id",render:function(){return t.props.match.params.id?r.a.createElement(i,{defaultValues:o,title:"Edit Video",changeRedirect:t.changeRedirect,formProp:e,fields:n}):r.a.createElement(y.a,{to:"/web/videos"})}}),r.a.createElement(y.b,{exact:!0,path:"/web/videos/add",render:function(){return r.a.createElement(i,{title:"Add video",defaultValues:o,changeRedirect:t.changeRedirect,formProp:l,fields:n})}})),this.state.redirect&&r.a.createElement(y.a,{to:"/web/videos"}))}}]),t}(r.a.Component),ih=a(419),lh=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={videos:[],loading:!0},a.loadData=a.loadData.bind(Object(f.a)(a)),a.deleteObject=a.deleteObject.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){var e=this;Ut("video/",(function(t){e.setState({videos:t,loading:!1})}),(function(){e.setState({loading:!1})}))}},{key:"deleteObject",value:function(e){var t=this,a={is_active:!1};Gt(Kt("video/%s/",[e.id]),a,(function(e){t.loadData()}),(function(){}))}},{key:"render",value:function(){var e=this,t=this,a={height:"200",width:"300",playerVars:{}},n=function(e){};return r.a.createElement("div",null,r.a.createElement(y.d,null,r.a.createElement(y.b,{exact:!0,path:"/web/videos/add",render:function(t){return r.a.createElement(rh,Object.assign({},e.state,t,{loadData:e.loadData}))}}),r.a.createElement(y.b,{exact:!0,path:"/web/videos/edit/:id",render:function(t){return r.a.createElement(rh,Object.assign({},e.state,t,{loadData:e.loadData}))}}),r.a.createElement(y.b,null,r.a.createElement(cr.a,{title:"Videos",extra:r.a.createElement(Da.b,{to:"/web/videos/add"}," ",r.a.createElement(da.a,{type:"primary"},r.a.createElement(va.a,{type:"plus"})," Add"))},r.a.createElement(Ea.a,{loading:this.state.loading,dataSource:this.state.videos,itemLayout:"vertical",renderItem:function(e){return r.a.createElement(Ea.a.Item,{key:e.id,actions:[r.a.createElement(Da.b,{to:"/web/videos/edit/"+e.id},"Edit"),r.a.createElement(or.a,{title:"Are you sure delete this item?",onConfirm:function(){return t.deleteObject(e)},okText:"Yes",cancelText:"No"},r.a.createElement("a",null,"Delete"))],extra:r.a.createElement(ih.a,{videoId:e.link,opts:a,onReady:n})},r.a.createElement(Ea.a.Item.Meta,{avatar:r.a.createElement(ba.a,{style:{backgroundColor:"#87d068"}},e.rank),title:e.name}))}})))))}}]),t}(r.a.Component),oh=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={editBlogData:a.props.editBlogData?a.props.editBlogData:null},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"componentDidMount",value:function(){this.props.match.params.id&&(this.state.editBlogData||this.loadData())}},{key:"loadData",value:function(){var e=this;Ut(Kt("post/%s/",[this.props.match.params.id]),(function(t){e.setState({editBlogData:t})}),(function(){}))}},{key:"render",value:function(){var e,t=this,a=this,n=[{label:"Blog Title",key:"title",required:!0,initialValue:this.state.editBlogData?this.state.editBlogData.title:null,type:S},{label:"Blog Domain ",key:"domain",initialValue:this.state.editBlogData?this.state.editBlogData.domain:null,type:S},{label:"Blog URL ",key:"slug",required:!0,initialValue:this.state.editBlogData?this.state.editBlogData.slug:null,type:S},{label:"Blog Image",key:"featured_image",initialValue:this.state.editBlogData?this.state.editBlogData.featured_image:null,type:T},{label:"Posted On",key:"posted_on",initialValue:this.state.editBlogData&&this.state.editBlogData.posted_on?Or()(this.state.editBlogData.posted_on):"",type:C},{label:"SEO Description",key:"meta_description",initialValue:this.state.editBlogData?this.state.editBlogData.meta_description:null,type:S},{label:"SEO Keywords",key:"keywords",required:!0,initialValue:this.state.editBlogData?this.state.editBlogData.keywords:null,type:"textfield"},{label:"Content",key:"content",initialValue:this.state.editBlogData?this.state.editBlogData.content:" ",type:A}];this.state.editBlogData&&(e={successFn:function(e){Qt(O,"success"),a.setState({redirect:!0}),a.props.loadData(),console.log(e)},errorFn:function(){},action:Kt("post/%s/",[this.props.match.params.id]),method:"put"});var i=vr.a.create()(Vr),l={successFn:function(e){Qt(O,"success"),a.setState({redirect:!0}),a.props.loadData(),console.log(e)},errorFn:function(e){console.log(e)},action:"post/",method:"post"},o=[];return r.a.createElement(rr.a,null,r.a.createElement(cr.a,null,r.a.createElement(y.b,{exact:!0,path:"/web/blog/edit/:id",render:function(){return t.props.match.params.id?r.a.createElement(i,{defaultValues:o,title:"Edit Post",changeRedirect:t.changeRedirect,formProp:e,fields:n}):r.a.createElement(y.a,{to:"/web/blog"})}}),r.a.createElement(y.b,{exact:!0,path:"/web/blog/add",render:function(){return r.a.createElement(i,{title:"Add Post",changeRedirect:t.changeRedirect,formProp:l,fields:n})}})),this.state.redirect&&r.a.createElement(y.a,{to:"/web/blog"}))}}]),t}(r.a.Component),sh=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={post:null,loading:!0},a.loadData=a.loadData.bind(Object(f.a)(a)),a.deleteObject=a.deleteObject.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){var e=this;Ut("post/",(function(t){e.setState({post:t,loading:!1})}),(function(){e.setState({loading:!1})}))}},{key:"deleteObject",value:function(e){var t=this,a={is_active:!1};Gt(Kt("post/%s/",[e.id]),a,(function(e){t.loadData()}),(function(){}))}},{key:"render",value:function(){var e=this,t=this,a=[{title:"Blog Title",dataIndex:"title",key:"post_title"},{title:"Date",dataIndex:"posted_on",key:"post_date",export:function(e){return Or()(e).format("lll")},render:function(e,t){return r.a.createElement("span",null,t.posted_on?r.a.createElement("span",null,Or()(t.posted_on).format("lll")):null)}},{title:"Actions",render:function(e){return r.a.createElement("div",null,r.a.createElement(Da.b,{to:"/web/blog/edit/"+e.id},"Edit"),r.a.createElement(sr.a,{type:"vertical"}),r.a.createElement(or.a,{title:"Are you sure delete this item?",onConfirm:function(){return t.deleteObject(e)},okText:"Yes",cancelText:"No"},r.a.createElement("a",null,"Delete")))}}];return r.a.createElement("div",null,r.a.createElement(y.d,null,r.a.createElement(y.b,{exact:!0,path:"/web/blog/add",render:function(t){return r.a.createElement(oh,Object.assign({},e.state,t,{loadData:e.loadData}))}}),r.a.createElement(y.b,{exact:!0,path:"/web/blog/edit/:id",render:function(t){return r.a.createElement(oh,Object.assign({},e.state,t,{loadData:e.loadData}))}}),r.a.createElement(cr.a,{title:"Blogs",extra:r.a.createElement(Da.b,{to:"/web/blog/add"}," ",r.a.createElement(da.a,{type:"primary"},r.a.createElement(va.a,{type:"plus"})," Add"))},r.a.createElement(lr.a,{loading:this.state.loading,dataSource:this.state.post,columns:a}))))}}]),t}(r.a.Component),ch=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={editBlogData:a.props.editBlogData?a.props.editBlogData:null},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.props.match.params.id&&(this.state.editBlogData||this.loadData())}},{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"loadData",value:function(){var e=this;Ut(Kt("contactus/%s/",[this.props.match.params.id]),(function(t){e.setState({editBlogData:t})}),(function(){}))}},{key:"render",value:function(){var e,t=this,a=[{label:"Name",key:"name",required:!0,initialValue:this.state.editBlogData?this.state.editBlogData.name:null,type:S},{label:"Rank ",key:"contact_rank",initialValue:this.state.editBlogData?this.state.editBlogData.contact_rank:1,type:I,required:!0,min:1},{label:"Link",key:"link",initialValue:this.state.editBlogData?this.state.editBlogData.link:null,type:S},{label:"Phone Number ",key:"phone_no",initialValue:this.state.editBlogData?this.state.editBlogData.phone_no:null,type:S},{label:"Email",key:"email",required:!0,initialValue:this.state.editBlogData?this.state.editBlogData.email:null,type:S},{label:"Address",key:"address",required:!0,initialValue:this.state.editBlogData?this.state.editBlogData.address:null,type:"textfield",minRows:3}],n=this;this.state.editBlogData&&(e={successFn:function(e){Qt(O,"success"),n.setState({redirect:!0}),n.props.loadData()},errorFn:function(){},action:Kt("contactus/%s/",[this.props.match.params.id]),method:"put"});var i=vr.a.create()(Vr),l={successFn:function(e){Qt(O,"success"),n.setState({redirect:!0}),n.props.loadData()},errorFn:function(){},action:"contactus/",method:"post"},o=[{key:"is_active",value:!0}];return r.a.createElement(rr.a,null,r.a.createElement(cr.a,null,r.a.createElement(y.b,{exact:!0,path:"/web/contact/edit/:id",render:function(){return t.props.match.params.id?r.a.createElement(i,{defaultValues:o,title:"Edit Contact",changeRedirect:t.changeRedirect,formProp:e,fields:a}):r.a.createElement(y.a,{to:"/web/contact"})}}),r.a.createElement(y.b,{exact:!0,path:"/web/contact/add",render:function(){return r.a.createElement(i,{title:"Add Contact",defaultValues:o,changeRedirect:t.changeRedirect,formProp:l,fields:a})}})),this.state.redirect&&r.a.createElement(y.a,{to:"/web/contact"}))}}]),t}(r.a.Component),uh=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={contacts:null,loading:!0},a.loadData=a.loadData.bind(Object(f.a)(a)),a.deleteObject=a.deleteObject.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){var e=this;Ut("contactus/",(function(t){e.setState({contacts:t,loading:!1})}),(function(){}))}},{key:"deleteObject",value:function(e){var t=this,a={is_active:!1};Gt(Kt("contactus/%s/",[e.id]),a,(function(e){t.loadData()}),(function(){}))}},{key:"render",value:function(){var e=this,t=this,a=[{title:"Rank",dataIndex:"contact_rank",key:"rank"},{title:"Address",dataIndex:"address",key:"address"},{title:"Email",dataIndex:"email",key:"email"},{title:"Phone",dataIndex:"phone_no",key:"phone"},{title:"Actions",render:function(e){return r.a.createElement("div",null,r.a.createElement(Da.b,{to:"/web/contact/edit/"+e.id},"Edit"),r.a.createElement(sr.a,{type:"vertical"}),r.a.createElement(or.a,{title:"Are you sure delete this item?",onConfirm:function(){return t.deleteObject(e)},okText:"Yes",cancelText:"No"},r.a.createElement("a",null,"Delete")))}}];return r.a.createElement("div",null,r.a.createElement(y.d,null,r.a.createElement(y.b,{exact:!0,path:"/web/contact/add",render:function(t){return r.a.createElement(ch,Object.assign({},e.state,t,{loadData:e.loadData}))}}),r.a.createElement(y.b,{exact:!0,path:"/web/contact/edit/:id",render:function(t){return r.a.createElement(ch,Object.assign({},e.state,t,{loadData:e.loadData}))}}),r.a.createElement(cr.a,{title:"Contacts",extra:r.a.createElement(Da.b,{to:"/web/contact/add"}," ",r.a.createElement(da.a,{type:"primary"},r.a.createElement(va.a,{type:"plus"})," Add"))},r.a.createElement(lr.a,{loading:this.state.loading,dataSource:this.state.contacts,columns:a}))))}}]),t}(r.a.Component),dh=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={editBlogData:a.props.editBlogData?a.props.editBlogData:null},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.props.match.params.id&&(this.state.editBlogData||this.loadData())}},{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"loadData",value:function(){var e=this;Ut(Kt("disease/%s/",[this.props.match.params.id]),(function(t){e.setState({editBlogData:t})}),(function(){}))}},{key:"render",value:function(){var e,t=this,a=this,n=[{label:"Disease Type",key:"disease_type",initialValue:this.state.editBlogData?this.state.editBlogData.disease_type:null,type:x,options:xa},{label:"Disease Name",key:"disease_name",initialValue:this.state.editBlogData?this.state.editBlogData.disease_name:null,type:S},{label:"Disease Main Image",key:"main_image",initialValue:this.state.editBlogData?this.state.editBlogData.main_image:null,type:T},{label:"Disease Side Image",key:"side_image",initialValue:this.state.editBlogData?this.state.editBlogData.side_image:[],type:R},{label:"SEO Description",key:"meta_description",initialValue:this.state.editBlogData?this.state.editBlogData.meta_description:null,type:"textfield"},{label:"SEO Keywords",key:"keywords",required:!0,initialValue:this.state.editBlogData?this.state.editBlogData.keywords:null,type:"textfield"},{label:"URL",key:"domain",initialValue:this.state.editBlogData?this.state.editBlogData.domain:null,type:S,required:!0},{label:"Content",key:"content",initialValue:this.state.editBlogData?this.state.editBlogData.content:" ",type:A}];this.state.editBlogData&&(e={successFn:function(e){Qt(O,"success"),a.setState({redirect:!0}),a.props.loadData()},errorFn:function(){},action:Kt("disease/%s/",[this.props.match.params.id]),method:"put"});var i=vr.a.create()(Vr),l={successFn:function(e){Qt(O,"success"),a.setState({redirect:!0}),a.props.loadData()},errorFn:function(){},action:"disease/",method:"post"},o=[];return r.a.createElement(rr.a,null,r.a.createElement(cr.a,null,r.a.createElement(y.b,{exact:!0,path:"/web/disease/edit/:id",render:function(){return t.props.match.params.id?r.a.createElement(i,{defaultValues:o,title:"Edit Disease",changeRedirect:t.changeRedirect,formProp:e,fields:n}):r.a.createElement(y.a,{to:"/web/disease"})}}),r.a.createElement(y.b,{exact:!0,path:"/web/disease/add",render:function(){return r.a.createElement(i,{title:"Add Disease",changeRedirect:t.changeRedirect,formProp:l,fields:n})}})),this.state.redirect&&r.a.createElement(y.a,{to:"/web/disease"}))}}]),t}(r.a.Component),ph=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={disease:null,loading:!0},a.loadDiseases=a.loadDiseases.bind(Object(f.a)(a)),a.deleteObject=a.deleteObject.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadDiseases()}},{key:"loadDiseases",value:function(){var e=this;Ut("disease/",(function(t){e.setState({disease:t,loading:!1})}),(function(){e.setState({loading:!1})}))}},{key:"deleteObject",value:function(e){var t=this,a={is_active:!1};Gt(Kt("disease/%s/",[e.id]),a,(function(e){t.loadDiseases()}),(function(){}))}},{key:"render",value:function(){var e=this,t=this,a=[{title:"Disease Name",dataIndex:"disease_name",key:"disease_name"},{title:"Disease Type",dataIndex:"disease_type",key:"disease_type"},{title:"Actions",render:function(e){return r.a.createElement("div",null,r.a.createElement(Da.b,{to:"/web/disease/edit/"+e.id},"Edit"),r.a.createElement(sr.a,{type:"vertical"}),r.a.createElement(or.a,{title:"Are you sure delete this item?",onConfirm:function(){return t.deleteObject(e)},okText:"Yes",cancelText:"No"},r.a.createElement("a",null,"Delete")))}}];return r.a.createElement("div",null,r.a.createElement(y.d,null,r.a.createElement(y.b,{exact:!0,path:"/web/disease/add",render:function(t){return r.a.createElement(dh,Object.assign({},e.state,t,{loadData:e.loadDiseases}))}}),r.a.createElement(y.b,{exact:!0,path:"/web/disease/edit/:id",render:function(t){return r.a.createElement(dh,Object.assign({},e.state,t,{loadData:e.loadDiseases}))}}),r.a.createElement(cr.a,{title:"Disease",extra:r.a.createElement(Da.b,{to:"/web/disease/add"}," ",r.a.createElement(da.a,{type:"primary"},r.a.createElement(va.a,{type:"plus"})," Add"))},r.a.createElement(lr.a,{loading:this.state.loading,columns:a,dataSource:this.state.disease}))))}}]),t}(r.a.Component),mh=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={editBlogData:a.props.editBlogData?a.props.editBlogData:null},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"componentDidMount",value:function(){this.props.match.params.id&&(this.state.editBlogData||this.loadData())}},{key:"loadData",value:function(){var e=this;Ut(Kt("events/%s/",[this.props.match.params.id]),(function(t){e.setState({editBlogData:t})}),(function(){}))}},{key:"render",value:function(){var e,t=this,a=[{label:"Event Title",key:"title",initialValue:this.state.editBlogData?this.state.editBlogData.title:null,type:S},{label:"Event Date",key:"event_date",initialValue:this.state.editBlogData?this.state.editBlogData.event_date:null,type:C},{label:"Event Image",key:"event_image",initialValue:this.state.editBlogData?this.state.editBlogData.event_image:null,type:T},{label:"SEO Description",key:"meta_description",initialValue:this.state.editBlogData?this.state.editBlogData.meta_description:null,type:S},{label:"SEO Keywords",key:"keywords",required:!0,initialValue:this.state.editBlogData?this.state.editBlogData.keywords:null,type:"textfield"},{label:"URL",key:"domain",initialValue:this.state.editBlogData?this.state.editBlogData.domain:null,type:S},{label:"Content",key:"content",required:!0,initialValue:this.state.editBlogData?this.state.editBlogData.content:null,type:A}],n=this;this.state.editBlogData&&(e={successFn:function(e){Qt(O,"success"),console.log(e),n.props.loadData(),n.changeRedirect()},errorFn:function(){},action:Kt("events/%s/",[this.props.match.params.id]),method:"put"});var i=vr.a.create()(Vr),l={successFn:function(e){Qt(O,"success"),n.props.loadData(),n.changeRedirect(),console.log(e)},errorFn:function(){},action:"events/",method:"post"},o=[{key:"is_active",value:!0}];return r.a.createElement(rr.a,null,r.a.createElement(cr.a,null,r.a.createElement(y.b,{exact:!0,path:"/web/event/edit/:id",render:function(){return t.props.match.params.id?r.a.createElement(i,{defaultValues:o,title:"Edit Event",changeRedirect:t.changeRedirect,formProp:e,fields:a}):r.a.createElement(y.a,{to:"/web/event"})}}),r.a.createElement(y.b,{exact:!0,path:"/web/event/add",render:function(){return r.a.createElement(i,{defaultValues:o,title:"Add Event",changeRedirect:t.changeRedirect,formProp:l,fields:a})}})),this.state.redirect&&r.a.createElement(y.a,{to:"/web/event"}))}}]),t}(r.a.Component),hh=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={events:null,loading:!0},a.loadData=a.loadData.bind(Object(f.a)(a)),a.deleteObject=a.deleteObject.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){var e=this;Ut("events/",(function(t){e.setState({events:t,loading:!1})}),(function(){e.setState({loading:!1})}))}},{key:"deleteObject",value:function(e){var t=this,a={is_active:!1};Gt(Kt("events/%s/",[e.id]),a,(function(e){t.loadData()}),(function(){}))}},{key:"render",value:function(){var e=this,t=this,a=[{title:"Event Title",dataIndex:"title",key:"event_title"},{title:"Date",dataIndex:"event_date",key:"event_date",render:function(e){return Or()(e).format("LLL")}},{title:"Actions",render:function(e){return r.a.createElement("div",null,r.a.createElement(Da.b,{to:"/web/event/edit/"+e.id},"Edit"),r.a.createElement(sr.a,{type:"vertical"}),r.a.createElement(or.a,{title:"Are you sure delete this item?",onConfirm:function(){return t.deleteObject(e)},okText:"Yes",cancelText:"No"},r.a.createElement("a",null,"Delete")))}}];return r.a.createElement("div",null,r.a.createElement(y.d,null,r.a.createElement(y.b,{exact:!0,path:"/web/event/add",render:function(t){return r.a.createElement(mh,Object.assign({},e.state,{loadData:e.loadData},t))}}),r.a.createElement(y.b,{exact:!0,path:"/web/event/edit/:id",render:function(t){return r.a.createElement(mh,Object.assign({},e.state,{loadData:e.loadData},t))}}),r.a.createElement(cr.a,{title:"Events",extra:r.a.createElement(Da.b,{to:"/web/event/add"},r.a.createElement(da.a,{type:"primary"},r.a.createElement(va.a,{type:"plus"})," Add"))},r.a.createElement(lr.a,{loading:this.state.loading,dataSource:this.state.events,columns:a}))))}}]),t}(r.a.Component),fh=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={editBlogData:a.props.editBlogData?a.props.editBlogData:null},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"componentDidMount",value:function(){this.props.match.params.id&&(this.state.editBlogData||this.loadData())}},{key:"loadData",value:function(){var e=this;console.log("i M groot");Ut(Kt("page_seo/%s/",[this.props.match.params.id]),(function(t){e.setState({editBlogData:t})}),(function(){}))}},{key:"render",value:function(){var e,t=this,a=[{label:"Page",key:"name",initialValue:this.state.editBlogData?this.state.editBlogData.name:null,type:S,disabled:!1},{label:"Page Title",key:"title",initialValue:this.state.editBlogData?this.state.editBlogData.title:null,type:S},{label:"SEO Description",key:"meta_description",initialValue:this.state.editBlogData?this.state.editBlogData.meta_description:null,type:"textfield"},{label:"SEO Keywords",key:"keywords",required:!0,initialValue:this.state.editBlogData?this.state.editBlogData.keywords:null,type:"textfield"}],n=this;this.state.editBlogData&&(e={successFn:function(e){Qt(O,"success"),n.setState({redirect:!0}),n.props.loadData(),console.log(e)},errorFn:function(){},action:Kt("page_seo/%s/",[this.props.match.params.id]),method:"put"});var i=vr.a.create()(Vr),l={successFn:function(e){Qt(O,"success"),n.setState({redirect:!0}),n.props.loadData(),console.log(e)},errorFn:function(){},action:"page_seo/",method:"post"},o=[{key:"is_active",value:!0}];return r.a.createElement(rr.a,null,r.a.createElement(cr.a,null,r.a.createElement(y.b,{exact:!0,path:"/web/pageseo/edit/:id",render:function(){return t.props.match.params.id?r.a.createElement(i,{defaultValues:o,title:"Edit SEO",changeRedirect:t.changeRedirect,formProp:e,fields:a}):r.a.createElement(y.a,{to:"web/pageseo"})}}),r.a.createElement(y.b,{exact:!0,path:"/web/pageseo/add",render:function(){return r.a.createElement(i,{title:"Add SEO",changeRedirect:t.changeRedirect,formProp:l,fields:a})}})),this.state.redirect&&r.a.createElement(y.a,{to:"/web/pageseo"}))}}]),t}(r.a.Component),gh=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={pageSEO:null,loading:!0},a.loadData=a.loadData.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){var e=this;Ut("page_seo/",(function(t){e.setState({pageSEO:t,loading:!1})}),(function(){e.setState({loading:!1})}))}},{key:"render",value:function(){var e=this,t=[{title:"Name",dataIndex:"name",key:"name"},{title:"Title",dataIndex:"title",key:"title"},{title:"SEO Descriptions",dataIndex:"meta_description",key:"meta_description"},{title:"SEO Keywords",dataIndex:"keywords",key:"keywords"},{title:"Actions",render:function(e){return r.a.createElement("div",null,r.a.createElement(Da.b,{to:"/web/pageseo/edit/"+e.id},"Edit"))}}];return r.a.createElement("div",null,r.a.createElement(y.d,null,r.a.createElement(y.b,{exact:!0,path:"/web/pageseo/add",render:function(t){return r.a.createElement(fh,Object.assign({},e.state,t,{loadData:e.loadData}))}}),r.a.createElement(y.b,{exact:!0,path:"/web/pageseo/edit/:id",render:function(t){return r.a.createElement(fh,Object.assign({loadData:e.loadData},e.state,t))}}),r.a.createElement(cr.a,{title:"Pages SEO",extra:r.a.createElement(Da.b,{to:"/web/pageseo/add"}," ",r.a.createElement(da.a,{type:"primary"},r.a.createElement(va.a,{type:"plus"})," Add"))},r.a.createElement(lr.a,{loading:this.state.loading,dataSource:this.state.pageSEO,columns:t}))))}}]),t}(r.a.Component),yh=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={editBlogData:a.props.editBlogData?a.props.editBlogData:null},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"componentDidMount",value:function(){this.props.match.params.id&&(this.state.editBlogData||this.loadData())}},{key:"loadData",value:function(){var e=this;console.log("i M groot");Ut(Kt("slider/%s/",[this.props.match.params.id]),(function(t){e.setState({editBlogData:t})}),(function(){}))}},{key:"render",value:function(){var e,t=this,a=[{label:"Name",key:"name",initialValue:this.state.editBlogData?this.state.editBlogData.name:null,type:S},{label:"Page Title ",key:"title",initialValue:this.state.editBlogData?this.state.editBlogData.title:null,type:S},{label:"Rank ",key:"rank",initialValue:this.state.editBlogData?this.state.editBlogData.rank:null,type:I},{label:"Slider Image ",key:"silder_image",initialValue:this.state.editBlogData?this.state.editBlogData.silder_image:null,type:T}],n=this;this.state.editBlogData&&(e={successFn:function(e){Qt(O,"success"),console.log(e),n.props.loadData(),n.changeRedirect()},errorFn:function(){},action:Kt("slider/%s/",[this.props.match.params.id]),method:"put"});var i=vr.a.create()(Vr),l={successFn:function(e){Qt(O,"success"),n.props.loadData(),n.changeRedirect(),console.log(e)},errorFn:function(){},action:"slider/",method:"post"},o=[{key:"is_active",value:!0}];return r.a.createElement(rr.a,null,r.a.createElement(cr.a,null,r.a.createElement(y.b,{exact:!0,path:"/web/slider-image/edit/:id",render:function(){return t.props.match.params.id?r.a.createElement(i,{defaultValues:o,title:"Edit Slider Image",changeRedirect:t.changeRedirect,formProp:e,fields:a}):r.a.createElement(y.a,{to:"web/silder-image"})}}),r.a.createElement(y.b,{exact:!0,path:"/web/slider-image/add",render:function(){return r.a.createElement(i,{title:"Add Slider Image",defaultValues:o,changeRedirect:t.changeRedirect,formProp:l,fields:a})}})),this.state.redirect&&r.a.createElement(y.a,{to:"/web/slider-image"}))}}]),t}(r.a.Component),Eh=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={slider:[],loading:!0},a.loadData=a.loadData.bind(Object(f.a)(a)),a.deleteObject=a.deleteObject.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentWillMount",value:function(){this.loadData()}},{key:"loadData",value:function(){var e=this;Ut("slider/",(function(t){console.log(t),e.setState({slider:t,loading:!1})}),(function(){e.setState({loading:!1})}))}},{key:"deleteObject",value:function(e){var t=this,a={is_active:!1};Gt(Kt("slider/%s/",[e.id]),a,(function(e){t.loadData()}),(function(){}))}},{key:"render",value:function(){var e=this,t=this;return r.a.createElement("div",null,r.a.createElement(y.d,null,r.a.createElement(y.b,{exact:!0,path:"/web/slider-image/add",render:function(t){return r.a.createElement(yh,Object.assign({},e.state,t,{loadData:e.loadData}))}}),r.a.createElement(y.b,{exact:!0,path:"/web/slider-image/edit/:id",render:function(t){return r.a.createElement(yh,Object.assign({},e.state,t,{loadData:e.loadData}))}}),r.a.createElement(cr.a,{title:"Slider Image",extra:r.a.createElement(Da.b,{to:"/web/slider-image/add"},r.a.createElement(da.a,{type:"primary"},r.a.createElement(va.a,{type:"plus"})," Add"))},r.a.createElement(Ea.a,{loading:this.state.loading,itemLayout:"vertical",dataSource:this.state.slider,renderItem:function(e){return r.a.createElement(Ea.a.Item,{key:e.id,extra:r.a.createElement("img",{src:Bt(e.silder_image),alt:e.title,style:{maxWidth:"100%",width:"400px"}}),actions:[r.a.createElement(Da.b,{to:"/web/slider-image/edit/"+e.id},"Edit"),r.a.createElement(or.a,{title:"Are you sure delete this item?",onConfirm:function(){return t.deleteObject(e)},okText:"Yes",cancelText:"No"},r.a.createElement("a",null,"Delete"))]},r.a.createElement(Ea.a.Item.Meta,{avatar:r.a.createElement(ba.a,null,e.rank),title:e.title,description:e.name}))}}))))}}]),t}(r.a.Component),bh=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={editBlogData:a.props.editBlogData?a.props.editBlogData:null},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"componentDidMount",value:function(){this.props.match.params.id&&(this.state.editBlogData||this.loadData())}},{key:"loadData",value:function(){var e=this;console.log("i M groot");Ut(Kt("facility/%s/",[this.props.match.params.id]),(function(t){e.setState({editBlogData:t})}),(function(){}))}},{key:"render",value:function(){var e,t=this,a=[{label:"Name",key:"name",initialValue:this.state.editBlogData?this.state.editBlogData.name:null,type:S},{label:"content",key:"content",initialValue:this.state.editBlogData?this.state.editBlogData.content:null,type:A}],n=this;this.state.editBlogData&&(e={successFn:function(e){Qt(O,"success"),console.log(e),n.props.loadData(),n.changeRedirect()},errorFn:function(){},action:Kt("facility/%s/",[this.props.match.params.id]),method:"put"});var i=vr.a.create()(Vr),l={successFn:function(e){Qt(O,"success"),n.props.loadData(),n.changeRedirect(),console.log(e)},errorFn:function(){},action:"facility/",method:"post"},o=[{key:"is_active",value:!0}];return r.a.createElement(rr.a,null,r.a.createElement(cr.a,null,r.a.createElement(y.b,{exact:!0,path:"/web/facilities/edit/:id",render:function(){return t.props.match.params.id?r.a.createElement(i,{defaultValues:o,title:"Edit Facility",changeRedirect:t.changeRedirect,formProp:e,fields:a}):r.a.createElement(y.a,{to:"web/facilities"})}}),r.a.createElement(y.b,{exact:!0,path:"/web/facilities/add",render:function(){return r.a.createElement(i,{title:"Add Facility",defaultValues:o,changeRedirect:t.changeRedirect,formProp:l,fields:a})}})),this.state.redirect&&r.a.createElement(y.a,{to:"/web/facilities"}))}}]),t}(r.a.Component),vh=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={facility:null,loading:!0},a.loadData=a.loadData.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){var e=this;Ut("facility/",(function(t){e.setState({facility:t,loading:!1})}),(function(){e.setState({loading:!1})}))}},{key:"deleteObject",value:function(e){var t=this,a={is_active:!1};Gt(Kt("facility/%s/",[e.id]),a,(function(e){t.loadData()}),(function(){}))}},{key:"render",value:function(){var e=this,t=this,a=[{title:"Name",dataIndex:"name",key:"name"},{title:"Actions",render:function(e){return r.a.createElement("div",null,r.a.createElement(Da.b,{to:"/web/facilities/edit/"+e.id},"Edit"),r.a.createElement(sr.a,{type:"vertical"}),r.a.createElement(or.a,{title:"Are you sure delete this item?",onConfirm:function(){return t.deleteObject(e)},okText:"Yes",cancelText:"No"},r.a.createElement("a",null,"Delete")))}}];return r.a.createElement("div",null,r.a.createElement(y.d,null,r.a.createElement(y.b,{exact:!0,path:"/web/facilities/add",render:function(t){return r.a.createElement(bh,Object.assign({loadData:e.loadData},e.state,t))}}),r.a.createElement(y.b,{exact:!0,path:"/web/facilities/edit/:id",render:function(t){return r.a.createElement(bh,Object.assign({loadData:e.loadData},e.state,t))}}),r.a.createElement(cr.a,{title:"Facilities",extra:r.a.createElement(Da.b,{to:"/web/facilities/add"}," ",r.a.createElement(da.a,{type:"primary"},r.a.createElement(va.a,{type:"plus"})," Add"))},r.a.createElement(lr.a,{loading:this.state.loading,dataSource:this.state.facility,columns:a}))))}}]),t}(r.a.Component),_h=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={editBlogData:a.props.editBlogData?a.props.editBlogData:null},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.props.match.params.id&&(this.state.editBlogData||this.loadData())}},{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"loadData",value:function(){var e=this;Ut(Kt("landing_page_video/%s/",[this.props.match.params.id]),(function(t){e.setState({editBlogData:t})}),(function(){}))}},{key:"render",value:function(){var e,t=this,a=this,n=[{label:"Name",key:"name",initialValue:this.state.editBlogData?this.state.editBlogData.name:null,type:S},{label:"Rank ",key:"rank",initialValue:this.state.editBlogData?this.state.editBlogData.rank:null,type:I},{label:"Video link",key:"link",initialValue:this.state.editBlogData?this.state.editBlogData.link:null,type:S}];this.state.editBlogData&&(e={successFn:function(e){Qt(O,"success"),console.log(e),a.props.loadData(),a.changeRedirect()},errorFn:function(){},action:Kt("landing_page_video/%s/",[this.props.match.params.id]),method:"put"});var i=vr.a.create()(Vr),l={successFn:function(e){Qt(O,"success"),a.props.loadData(),console.log(e),a.changeRedirect()},errorFn:function(){},action:"landing_page_video/",method:"post"},o=[{is_active:!0}];return r.a.createElement(rr.a,null,r.a.createElement(cr.a,null,r.a.createElement(y.b,{exact:!0,path:"/web/landingpagevideo/edit/:id",render:function(){return t.props.match.params.id?r.a.createElement(i,{defaultValues:o,title:"Edit Video",changeRedirect:t.changeRedirect,formProp:e,fields:n}):r.a.createElement(y.a,{to:"/web/landingpagevideo"})}}),r.a.createElement(y.b,{exact:!0,path:"/web/landingpagevideo/add",render:function(){return r.a.createElement(i,{title:"Add video",defaultValues:o,changeRedirect:t.changeRedirect,formProp:l,fields:n})}})),this.state.redirect&&r.a.createElement(y.a,{to:"/web/landingpagevideo"}))}}]),t}(r.a.Component),Oh=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={videos:[],loading:!0},a.loadData=a.loadData.bind(Object(f.a)(a)),a.deleteObject=a.deleteObject.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){var e=this;Ut("landing_page_video/",(function(t){e.setState({videos:t,loading:!1})}),(function(){e.setState({loading:!1})}))}},{key:"deleteObject",value:function(e){var t=this,a={is_active:!1};Gt(Kt("landing_page_video/%s/",[e.id]),a,(function(e){t.loadData()}),(function(){}))}},{key:"render",value:function(){var e=this,t=this,a={height:"200",width:"300"};return r.a.createElement("div",null,r.a.createElement(y.d,null,r.a.createElement(y.b,{exact:!0,path:"/web/landingpagevideo/add",render:function(t){return r.a.createElement(_h,Object.assign({},e.state,{loadData:e.loadData},t))}}),r.a.createElement(y.b,{exact:!0,path:"/web/landingpagevideo/edit/:id",render:function(t){return r.a.createElement(_h,Object.assign({},e.state,{loadData:e.loadData},t))}}),r.a.createElement(cr.a,{title:"Landing Page Video",extra:r.a.createElement(Da.b,{to:"/web/landingpagevideo/add"}," ",r.a.createElement(da.a,{type:"primary"},r.a.createElement(va.a,{type:"plus"})," Add"))},r.a.createElement(Ea.a,{loading:this.state.loading,dataSource:this.state.videos,itemLayout:"vertical",renderItem:function(e){return r.a.createElement(Ea.a.Item,{key:e.id,actions:[r.a.createElement(Da.b,{to:"/web/landingpagevideo/edit/"+e.id},"Edit"),r.a.createElement(or.a,{title:"Are you sure delete this item?",onConfirm:function(){return t.deleteObject(e)},okText:"Yes",cancelText:"No"},r.a.createElement("a",null,"Delete"))],extra:r.a.createElement(ih.a,{videoId:e.link,opts:a})},r.a.createElement(Ea.a.Item.Meta,{avatar:r.a.createElement(ba.a,{style:{backgroundColor:"#87d068"}},e.rank),title:e.name}))}}))))}}]),t}(r.a.Component),Dh=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={editBlogData:a.props.editBlogData?a.props.editBlogData:null},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.props.match.params.id&&(this.state.editBlogData||this.loadData())}},{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"loadData",value:function(){var e=this;Ut(Kt("landing_page_content/%s/",[this.props.match.params.id]),(function(t){e.setState({editBlogData:t})}),(function(){}))}},{key:"render",value:function(){var e,t=this,a=this,n=[{label:"Title",key:"title",initialValue:this.state.editBlogData?this.state.editBlogData.title:null,type:S},{label:"Image",key:"image",initialValue:this.state.editBlogData?this.state.editBlogData.image:null,type:T},{label:"Content",key:"content",initialValue:this.state.editBlogData?this.state.editBlogData.content:null,type:A}];this.state.editBlogData&&(e={successFn:function(e){Qt(O,"success"),a.setState({redirect:!0}),a.props.loadData()},errorFn:function(){},action:Kt("landing_page_content/%s/",[this.props.match.params.id]),method:"put"});var i=vr.a.create()(Vr),l={successFn:function(e){Qt(O,"success"),a.setState({redirect:!0}),a.props.loadData()},errorFn:function(){},action:"landing_page_content/",method:"post"},o=[];return r.a.createElement(rr.a,null,r.a.createElement(cr.a,null,r.a.createElement(y.b,{exact:!0,path:"/web/landingpagecontent/edit/:id",render:function(){return t.props.match.params.id?r.a.createElement(i,{defaultValues:o,title:"Edit Content",changeRedirect:t.changeRedirect,formProp:e,fields:n}):r.a.createElement(y.a,{to:"/web/landingpagecontent"})}}),r.a.createElement(y.b,{exact:!0,path:"/web/landingpagecontent/add",render:function(){return r.a.createElement(i,{title:"Add Content",changeRedirect:t.changeRedirect,formProp:l,fields:n})}})),this.state.redirect&&r.a.createElement(y.a,{to:"/web/landingpagecontent"}))}}]),t}(r.a.Component),kh=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={pageContent:[],loading:!0},a.loadData=a.loadData.bind(Object(f.a)(a)),a.deleteObject=a.deleteObject.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){var e=this;Ut("landing_page_content/",(function(t){e.setState({pageContent:t,loading:!1})}),(function(){e.setState({loading:!1})}))}},{key:"deleteObject",value:function(e){var t=this,a={is_active:!1};Gt(Kt("landing_page_content/%s/",[e.id]),a,(function(e){t.loadData()}),(function(){}))}},{key:"render",value:function(){var e=this,t=this;return r.a.createElement("div",null,r.a.createElement(y.d,null,r.a.createElement(y.b,{exact:!0,path:"/web/landingpagecontent/add",render:function(t){return r.a.createElement(Dh,Object.assign({},e.state,t,{loadData:e.loadData}))}}),r.a.createElement(y.b,{exact:!0,path:"/web/landingpagecontent/edit/:id",render:function(t){return r.a.createElement(Dh,Object.assign({},e.state,t,{loadData:e.loadData}))}}),r.a.createElement(cr.a,{title:"Landing Page Content",extra:r.a.createElement(Da.b,{to:"/web/landingpagecontent/add"}," ",r.a.createElement(da.a,{type:"primary"},r.a.createElement(va.a,{type:"plus"})," Add"))},r.a.createElement(Ea.a,{loading:this.state.loading,dataSource:this.state.pageContent,itemLayout:"vertical",renderItem:function(e){return r.a.createElement(Ea.a.Item,{key:e.id,actions:[r.a.createElement(Da.b,{to:"/web/landingpagecontent/edit/"+e.id},"Edit"),r.a.createElement(or.a,{title:"Are you sure delete this item?",onConfirm:function(){return t.deleteObject(e)},okText:"Yes",cancelText:"No"},r.a.createElement("a",null,"Delete"))],extra:r.a.createElement("img",{src:Bt(e.image),style:{width:"300px"}})},r.a.createElement(Ea.a.Item.Meta,{avatar:r.a.createElement(ba.a,{style:{backgroundColor:"#87d068"}},e.rank),title:e.title,description:r.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.content}})}))}}))))}}]),t}(r.a.Component),Ph=o.a.Sider,Sh=function(e){function t(){return Object(d.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement(Ph,{trigger:null,collapsible:!0,style:{overflow:"auto",minHeight:"100vh",background:"#fff"}},r.a.createElement(_a.a,{mode:"inline",defaultSelectedKeys:["web-1"]},r.a.createElement(_a.a.ItemGroup,{key:"g1",title:r.a.createElement(sr.a,{style:{margin:"0px"}},"Web Settings")},r.a.createElement(_a.a.Item,{key:"web-1"},r.a.createElement(Da.b,{to:"/web/videos"},r.a.createElement(va.a,{type:"youtube"}),r.a.createElement("span",{className:"nav-text"},"Videos"))),r.a.createElement(_a.a.Item,{key:"web-2"},r.a.createElement(Da.b,{to:"/web/disease"},r.a.createElement(va.a,{type:"bell"}),r.a.createElement("span",{className:"nav-text"},"Disease"))),r.a.createElement(_a.a.Item,{key:"web-3"},r.a.createElement(Da.b,{to:"/web/blog"},r.a.createElement(va.a,{type:"pic-right"}),r.a.createElement("span",{className:"nav-text"},"Blogs"))),r.a.createElement(_a.a.Item,{key:"web-4"},r.a.createElement(Da.b,{to:"/web/event"},r.a.createElement(va.a,{type:"notification"}),r.a.createElement("span",{className:"nav-text"},"Events"))),r.a.createElement(_a.a.Item,{key:"web-5"},r.a.createElement(Da.b,{to:"/web/contact"},r.a.createElement(va.a,{type:"phone"}),r.a.createElement("span",{className:"nav-text"},"Contacts"))),r.a.createElement(_a.a.Item,{key:"web-6"},r.a.createElement(Da.b,{to:"/web/pageseo"},r.a.createElement(va.a,{type:"search"}),r.a.createElement("span",{className:"nav-text"},"Page SEO"))),r.a.createElement(_a.a.Item,{key:"web-7"},r.a.createElement(Da.b,{to:"/web/slider-image"},r.a.createElement(va.a,{type:"picture"}),r.a.createElement("span",{className:"nav-text"},"Slider Image"))),r.a.createElement(_a.a.Item,{key:"web-8"},r.a.createElement(Da.b,{to:"/web/facilities"},r.a.createElement(va.a,{type:"gift"}),r.a.createElement("span",{className:"nav-text"},"Facilities"))),r.a.createElement(_a.a.Item,{key:"web-9"},r.a.createElement(Da.b,{to:"/web/landingpagevideo"},r.a.createElement(va.a,{type:"video-camera"}),r.a.createElement("span",{className:"nav-text"},"Landing Page Videos"))),r.a.createElement(_a.a.Item,{key:"web-10"},r.a.createElement(Da.b,{to:"/web/landingpagecontent"},r.a.createElement(va.a,{type:"read"}),r.a.createElement("span",{className:"nav-text"},"Landing Page Content"))),r.a.createElement(_a.a.Item,{key:"web-11"},r.a.createElement(Da.b,{to:"/web/manageproduct"},r.a.createElement(va.a,{type:"hdd"}),r.a.createElement("span",{className:"nav-text"},"Manage Product"))),r.a.createElement(_a.a.Item,{key:"web-12"},r.a.createElement(Da.b,{to:"/web/managetherapy"},r.a.createElement(va.a,{type:"box-plot"}),r.a.createElement("span",{className:"nav-text"},"Manage Therapy"))))))}}]),t}(r.a.Component),xh=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={editProductData:a.props.editProductData?a.props.editProductData:null},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.props.match.params.id&&(this.state.editProductData||this.loadData())}},{key:"loadData",value:function(){var e=this;Ut(Kt("product_content/%s/",[this.props.match.params.id]),(function(t){e.setState({editProductData:t})}),(function(){}))}},{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"render",value:function(){var e,t=this,a=this,n=[{label:"Product Name",key:"title",required:!0,initialValue:this.state.editProductData?this.state.editProductData.title:null,type:S},{label:"Product Price",key:"price",required:!0,initialValue:this.state.editProductData?this.state.editProductData.price:null,type:I},{label:"Product Image",key:"image",type:T,initialValue:this.state.editProductData?this.state.editProductData.image:null},{label:"Content",key:"content",initialValue:this.state.editProductData?this.state.editProductData.content:null,required:!0,type:A}];this.state.editProductData&&(e={successFn:function(e){Qt(O,"success"),a.setState({redirect:!0}),a.props.loadData()},errorFn:function(){},action:Kt("product_content/%s/",[this.props.match.params.id]),method:"put"});var i=vr.a.create()(Vr),l={successFn:function(e){console.log("formaDta",e),Qt(O,"success"),a.setState({redirect:!0}),a.props.loadData()},errorFn:function(){},action:"product_content/",method:"post"},o=[];return r.a.createElement(rr.a,null,r.a.createElement(cr.a,null,r.a.createElement(y.b,{exact:!0,path:"/web/manageproduct/edit/:id",render:function(){return t.props.match.params.id?r.a.createElement(i,{defaultValues:o,title:"Edit Product",changeRedirect:t.changeRedirect,formProp:e,fields:n}):r.a.createElement(y.a,{to:"web/manageproduct"})}}),r.a.createElement(y.b,{exact:!0,path:"/web/manageproduct/add",render:function(){return r.a.createElement(i,{title:"Add Product",defaultValues:o,changeRedirect:t.changeRedirect,formProp:l,fields:n})}})),this.state.redirect&&r.a.createElement(y.a,{to:"/web/manageproduct"}))}}]),t}(r.a.Component),jh=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={productData:null,loading:!0},a.loadData=a.loadData.bind(Object(f.a)(a)),a.deleteObject=a.deleteObject.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){var e=this;Ut("product_content/",(function(t){console.log("data a",t),e.setState({productData:t,loading:!1})}),(function(){e.setState({loading:!1})}))}},{key:"deleteObject",value:function(e){var t=this,a={is_active:!1};Gt(Kt("product_content/%s/",[e.id]),a,(function(e){t.loadData()}),(function(){}))}},{key:"render",value:function(){var e=this,t=this,a=[{title:"Name",dataIndex:"title",key:"title"},{title:"image",key:"image",dataIndex:"image",render:function(e,t){return r.a.createElement(ba.a,{src:Bt(t.image)})}},{title:"Description",render:function(e){return r.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.content}})}},{title:"Actions",render:function(e){return r.a.createElement("div",null,r.a.createElement(Da.b,{to:"/web/manageproduct/edit/"+e.id},"Edit"),r.a.createElement(sr.a,{type:"vertical"}),r.a.createElement(or.a,{title:"Are you sure delete this item?",onConfirm:function(){return t.deleteObject(e)},okText:"Yes",cancelText:"No"},r.a.createElement("a",null,"Delete")))}}];return r.a.createElement("div",null,r.a.createElement(y.d,null,r.a.createElement(y.b,{exact:!0,path:"/web/manageproduct/edit/:id",render:function(t){return r.a.createElement(xh,Object.assign({loadData:e.loadData},e.state,t))}}),r.a.createElement(y.b,{exact:!0,path:"/web/manageproduct/add",render:function(t){return r.a.createElement(xh,Object.assign({loadData:e.loadData},e.state,t))}}),r.a.createElement(cr.a,{title:"Products",extra:r.a.createElement(Da.b,{to:"/web/manageproduct/add"}," ",r.a.createElement(da.a,{type:"primary"},r.a.createElement(va.a,{type:"plus"})," Add"))},r.a.createElement(lr.a,{loading:this.state.loading,dataSource:this.state.productData,columns:a}))))}}]),t}(r.a.Component),Ih=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={editTherapyData:a.props.editTherapyData?a.props.editTherapyData:null},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.props.match.params.id&&(this.state.editTherapyData||this.loadData())}},{key:"loadData",value:function(){var e=this;Ut(Kt("therapy_content/%s/",[this.props.match.params.id]),(function(t){e.setState({editTherapyData:t})}),(function(){}))}},{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"render",value:function(){var e,t=this,a=this,n=[{label:"Therapy Name",key:"title",required:!0,initialValue:this.state.editTherapyData?this.state.editTherapyData.title:null,type:S},{label:"Therapy Image",key:"image",required:!0,type:T},{label:"Content",key:"content",initialValue:this.state.editTherapyData?this.state.editTherapyData.content:null,type:A}];this.state.editTherapyData&&(e={successFn:function(e){Qt(O,"success"),a.setState({redirect:!0}),a.props.loadData()},errorFn:function(){},action:Kt("therapy_content/%s/",[this.props.match.params.id]),method:"put"});var i=vr.a.create()(Vr),l={successFn:function(e){Qt(O,"success"),a.setState({redirect:!0}),a.props.loadData()},errorFn:function(){},action:"therapy_content/",method:"post"},o=[];return r.a.createElement(rr.a,null,r.a.createElement(cr.a,null,r.a.createElement(y.b,{exact:!0,path:"/web/managetherapy/edit/:id",render:function(){return t.props.match.params.id?r.a.createElement(i,{defaultValues:o,title:"Edit Therapy",changeRedirect:t.changeRedirect,formProp:e,fields:n}):r.a.createElement(y.a,{to:"web/managetherapy"})}}),r.a.createElement(y.b,{exact:!0,path:"/web/managetherapy/add",render:function(){return r.a.createElement(i,{title:"Add Therapy",defaultValues:o,changeRedirect:t.changeRedirect,formProp:l,fields:n})}})),this.state.redirect&&r.a.createElement(y.a,{to:"/web/managetherapy"}))}}]),t}(r.a.Component),Ch=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={therapyData:null,loading:!0},a.loadData=a.loadData.bind(Object(f.a)(a)),a.deleteObject=a.deleteObject.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){var e=this;console.log("product Data",e.state.therapyData),Ut("therapy_content/",(function(t){console.log("data a",t),e.setState({therapyData:t,loading:!1})}),(function(){e.setState({loading:!1})}))}},{key:"deleteObject",value:function(e){var t=this,a={is_active:!1};Gt(Kt("therapy_content/%s/",[e.id]),a,(function(e){t.loadData()}),(function(){}))}},{key:"render",value:function(){var e=this,t=this,a=[{title:"Name",dataIndex:"title",key:"title"},{title:"Description",render:function(e){return r.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.content}})}},{title:"Actions",render:function(e){return r.a.createElement("div",null,r.a.createElement(Da.b,{to:"/web/managetherapy/edit/"+e.id},"Edit"),r.a.createElement(sr.a,{type:"vertical"}),r.a.createElement(or.a,{title:"Are you sure delete this item?",onConfirm:function(){return t.deleteObject(e)},okText:"Yes",cancelText:"No"},r.a.createElement("a",null,"Delete")))}}];return r.a.createElement("div",null,r.a.createElement(y.d,null,r.a.createElement(y.b,{exact:!0,path:"/web/managetherapy/edit/:id",render:function(t){return r.a.createElement(Ih,Object.assign({loadData:e.loadData},e.state,t))}}),r.a.createElement(y.b,{exact:!0,path:"/web/managetherapy/add",render:function(t){return r.a.createElement(Ih,Object.assign({loadData:e.loadData},e.state,t))}}),r.a.createElement(cr.a,{title:"Therapy",extra:r.a.createElement(Da.b,{to:"/web/managetherapy/add"}," ",r.a.createElement(da.a,{type:"primary"},r.a.createElement(va.a,{type:"plus"})," Add"))},r.a.createElement(lr.a,{loading:this.state.loading,dataSource:this.state.therapyData,columns:a}))))}}]),t}(r.a.Component),wh=o.a.Content,Mh=function(e){function t(){return Object(d.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement(wh,{className:"main-container",style:{minHeight:280}},r.a.createElement(o.a,null,r.a.createElement(Sh,this.props),r.a.createElement(wh,{style:{margin:"24px 16px",minHeight:280}},r.a.createElement(y.d,null,r.a.createElement(y.b,{path:"/web/videos",render:function(e){return r.a.createElement(lh,null)}}),r.a.createElement(y.b,{path:"/web/blog",render:function(e){return r.a.createElement(sh,null)}}),r.a.createElement(y.b,{path:"/web/contact",render:function(e){return r.a.createElement(uh,null)}}),r.a.createElement(y.b,{path:"/web/disease",render:function(e){return r.a.createElement(ph,null)}}),r.a.createElement(y.b,{path:"/web/event",render:function(e){return r.a.createElement(hh,null)}}),r.a.createElement(y.b,{path:"/web/pageseo",render:function(e){return r.a.createElement(gh,null)}}),r.a.createElement(y.b,{path:"/web/slider-image",render:function(e){return r.a.createElement(Eh,null)}}),r.a.createElement(y.b,{path:"/web/facilities",render:function(e){return r.a.createElement(vh,null)}}),r.a.createElement(y.b,{path:"/web/landingpagevideo",render:function(e){return r.a.createElement(Oh,null)}}),r.a.createElement(y.b,{path:"/web/landingpagecontent",render:function(e){return r.a.createElement(kh,null)}}),r.a.createElement(y.b,{path:"/web/manageproduct",render:function(e){return r.a.createElement(jh,null)}}),r.a.createElement(y.b,{path:"/web/managetherapy",render:function(e){return r.a.createElement(Ch,null)}}),r.a.createElement(y.b,{component:Xi})))))}}]),t}(r.a.Component),Ah=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).changeRedirect=function(){var e=a.state.redirect;a.setState({redirect:!e})},a.state={editData:a.props.editData?a.props.editData:null},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.props.match.params.id&&(this.state.editData||this.loadData())}},{key:"loadData",value:function(){var e=this;Ut(Kt("vendor/%s/",[this.props.match.params.id]),(function(t){e.setState({editData:t})}),(function(){}))}},{key:"render",value:function(){var e,t=this,a=this,n=[{label:"Name",key:"name",initialValue:this.state.editData?this.state.editData.name:null,type:S,required:!0},{label:"Description",key:"description",initialValue:this.state.editData?this.state.editData.description:null,type:S}];this.state.editData&&(e={successFn:function(e){Qt(O,"success"),a.props.loadData(),console.log(e)},errorFn:function(){},action:Kt("vendor/%s/",[this.props.match.params.id]),method:"put"});var i=vr.a.create()(Vr),l={successFn:function(e){Qt(O,"success"),a.props.loadData(),console.log(e)},errorFn:function(){},action:Kt(mt,[a.props.active_practiceId]),method:"post"},o=[{key:"practice",value:this.props.active_practiceId}];return r.a.createElement(rr.a,null,r.a.createElement(cr.a,null,r.a.createElement(y.b,{exact:!0,path:"/inventory/vendor/edit/:id",render:function(a){return t.props.match.params.id?r.a.createElement(i,Object.assign({defaultValues:o,title:"Edit Vendor",changeRedirect:t.changeRedirect,formProp:e},a,{fields:n})):r.a.createElement(y.a,{to:"/inventory/vendor"})}}),r.a.createElement(y.b,{exact:!0,path:"/inventory/vendor/add",render:function(e){return r.a.createElement(i,Object.assign({title:"Add Vendor",changeRedirect:t.changeRedirect},e,{formProp:l,fields:n}))}})),this.state.redirect&&r.a.createElement(y.a,{to:"/inventory/vendor"}))}}]),t}(r.a.Component);function Th(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var Rh=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={active_practiceId:a.props.active_practiceId,vendors:null},a.loadData=a.loadData.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){var e=this;Ut(Kt(mt,[this.props.active_practiceId]),(function(t){e.setState({vendors:t})}),(function(){}))}},{key:"deleteVendor",value:function(e){var t=this,a=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Th(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Th(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,{is_active:!1});console.log("is_active",a);Ht(Kt("vendor/%s/",[e]),a,(function(e){t.loadData(),console.log("Deleted")}),(function(){}))}},{key:"render",value:function(){var e=this,t=this,a=[{title:"Name",key:"name",dataIndex:"name"},{title:"Details",key:"details",dataIndex:"description"},{title:"Action",render:function(e){return r.a.createElement("div",null,r.a.createElement(Da.b,{to:"/inventory/vendor/edit/"+e.id},"Edit"),r.a.createElement(sr.a,{type:"vertical"}),r.a.createElement(or.a,{title:"Are you sure delete this item?",onConfirm:function(){return t.deleteVendor(e.id)},okText:"Yes",cancelText:"No"},r.a.createElement("a",{disabled:!t.props.activePracticePermissions.DeleteVendor},"Delete")))}}];return r.a.createElement("div",null,r.a.createElement(y.d,null,r.a.createElement(y.b,{exact:!0,path:"/inventory/vendor/add",render:function(a){return t.props.activePracticePermissions.EditVendor||t.props.allowAllPermissions?r.a.createElement(Ah,Object.assign({},e.state,a,{loadData:t.loadData})):r.a.createElement(xi,null)}}),r.a.createElement(y.b,{exact:!0,path:"/inventory/vendor/edit/:id",render:function(a){return t.props.activePracticePermissions.EditVendor||t.props.allowAllPermissions?r.a.createElement(Ah,Object.assign({},e.state,a,{loadData:t.loadData})):r.a.createElement(xi,null)}}),r.a.createElement(cr.a,{title:"Vendors",extra:t.props.activePracticePermissions.EditVendor?r.a.createElement(Da.b,{to:"/inventory/vendor/add"}," ",r.a.createElement(da.a,{type:"primary"},r.a.createElement(va.a,{type:"plus"})," Add")):null},r.a.createElement(ti,{columns:a,dataSource:this.state.vendors,hideReport:!t.props.activePracticePermissions.ExportVendor}))))}}]),t}(r.a.Component),Lh=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={editData:a.props.editData?a.props.editData:null},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"componentDidMount",value:function(){this.props.match.params.id&&(this.state.editData||this.loadData()),this.loadExpensetypes(),this.loadPaymentModes(),this.loadVendors()}},{key:"loadPaymentModes",value:function(){var e=this;Ut(Kt(te,[this.props.active_practiceId]),(function(t){console.log("get table"),e.setState({paymentModes:t}),console.log("payment mode",e.state.paymentModes)}),(function(){}))}},{key:"loadData",value:function(){var e=this;Ut(Kt("expenses/%s/",[this.props.match.params.id]),(function(t){e.setState({editData:t})}),(function(){}))}},{key:"loadExpensetypes",value:function(){var e=this;Ut(Kt(me,[this.props.active_practiceId]),(function(t){console.log("get table"),e.setState({expense_types:t})}),(function(){}))}},{key:"loadVendors",value:function(){var e=this;Ut(Kt(mt,[this.props.active_practiceId]),(function(t){console.log("get table"),e.setState({vendors:t})}),(function(){}))}},{key:"render",value:function(){var e=this,t=[];this.state.paymentModes&&this.state.paymentModes.forEach((function(e){t.push({label:e.mode,value:e.id})}));var a=[];this.state.expense_types&&this.state.expense_types.forEach((function(e){a.push({label:e.name,value:e.id})}));var n=[];this.state.vendors&&this.state.vendors.forEach((function(e){n.push({label:e.name,value:e.id})}));var i,l=[{label:"Expense Date",key:"expense_date",required:!0,initialValue:this.state.editData?this.state.editData.expense_date:Or()(),type:C,format:"YYYY-MM-DD"},{label:"Amount",key:"amount",required:!0,initialValue:this.state.editData?this.state.editData.amount:null,type:I,follow:"INR"},{label:"Vendor",key:"vendor",type:x,initialValue:this.state.editData?this.state.editData.vendors:null,options:n},{label:"Expense type",key:"expense_type",type:x,initialValue:this.state.editData?this.state.editData.expense_type.id:null,options:a},{label:"Payment Mode",key:"payment_mode",type:x,required:!0,initialValue:this.state.editData?this.state.editData.payment_mode.id:null,options:t},{label:"Bank Name",key:"bank_name",type:S,initialValue:this.state.editData?this.state.editData.bank_name:null},{label:"Remark",key:"remark",type:"textfield",minRows:2,maxRows:6,initialValue:this.state.editData?this.state.editData.remark:null}],o=this;this.state.editData&&(i={successFn:function(e){Qt(O,"success"),o.props.loadData(),o.changeRedirect()},errorFn:function(){},action:Kt("expenses/%s/",[this.props.match.params.id]),method:"put"});var s=vr.a.create()(Vr),c={successFn:function(e){Qt(O,"success"),o.props.loadData(),o.changeRedirect(),console.log(e)},errorFn:function(){},action:pt,method:"post"},u=[{key:"practice",value:this.props.active_practiceId}];return r.a.createElement(rr.a,null,r.a.createElement(cr.a,null,r.a.createElement(y.b,{exact:!0,path:"/inventory/expenses/edit/:id",render:function(){return e.props.match.params.id?r.a.createElement(s,{defaultValues:u,title:"Edit Expense",changeRedirect:e.changeRedirect,formProp:i,fields:l}):r.a.createElement(y.a,{to:"/inventory/expenses"})}}),r.a.createElement(y.b,{exact:!0,path:"/inventory/expenses/add",render:function(){return r.a.createElement(s,{title:"Add Expenses",changeRedirect:e.changeRedirect,formProp:c,fields:l,defaultValues:u})}})),this.state.redirect&&r.a.createElement(y.a,{to:"/inventory/expenses"}))}}]),t}(r.a.Component),Fh=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).changeExpenseFilters=function(e,t){var n=Object(f.a)(a);a.setState(Object(u.a)({},e,t),(function(){n.loadData()}))},a.loadData=function(){var e=Object(f.a)(a);e.setState({loading:!0});Ut(pt,(function(t){e.setState({expenses:t,loading:!1}),console.log("log data",e.state.expenses)}),(function(){e.setState({loading:!1})}),{practice:e.props.active_practiceId,payment_mode:e.state.selectedPaymentMode,expense_type:e.state.selectedExpenseType,start:e.state.selectedStartDate.format(),end:e.state.selectedEndDate.format()})},a.state={active_practiceId:a.props.active_practiceId,expenses:null,expenseTypes:[],loading:!0,paymentModes:[],selectedExpenseType:null,selectedPaymentMode:null,selectedStartDate:Or()().subtract(1,"month"),selectedEndDate:Or()()},a.loadData=a.loadData.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadExpenseTypes(),this.loadPaymentModes(),this.loadData()}},{key:"loadExpenseTypes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this,a=function(a){console.log("get table"),e?t.setState({deletedExpenses:a,deletedLoading:!1}):t.setState({expenseTypes:a})},n=function(){};e?Ut(Kt(me,[this.props.active_practiceId]),a,n,{deleted:!0}):Ut(Kt(me,[this.props.active_practiceId]),a,n)}},{key:"loadPaymentModes",value:function(){var e=this;Ut(Kt(te,[this.props.active_practiceId]),(function(t){console.log("get table"),e.setState({paymentModes:t})}),(function(){}))}},{key:"deleteObject",value:function(e,t){var a=this,n=e;n.is_active=t;qt(Kt("expenses/%s/",[e.id]),n,(function(e){a.loadData(),a.state.showDeleted&&a.loadData(!0)}),(function(){}))}},{key:"render",value:function(){var e=this,t=this,a=[{title:"Expense Date",key:"expense_date",dataIndex:"expense_date",export:function(e){return Or()(e).format("lll")},render:function(e){return Or()(e).format("lll")}},{title:"Expense Type",key:"expense_type",dataIndex:"expense_type.name"},{title:"Vendor",key:"vendor",dataIndex:"vendor.name"},{title:"Payment Mode",key:"payment_mode",dataIndex:"payment_mode.mode"},{title:"Amount",key:"amount",dataIndex:"amount"},{title:"Bank Name",key:"bank_name",dataIndex:"bank_name"},{title:"Remark",key:"remark",dataIndex:"remark"},{title:"Action",render:function(e){return r.a.createElement("div",null,t.props.activePracticePermissions.EditExpenses||t.props.allowAllPermissions?r.a.createElement(Da.b,{to:"/inventory/expenses/edit/"+e.id},"Edit"):null,r.a.createElement(sr.a,{type:"vertical"}),t.props.activePracticePermissions.DeleteExpenses||t.props.allowAllPermissions?r.a.createElement(or.a,{title:"Are you sure to delete this?",onConfirm:function(){return t.deleteObject(e,!1)},okText:"Yes",cancelText:"No"},r.a.createElement("a",null,"Delete")):null)}}];return r.a.createElement("div",null,r.a.createElement(y.d,null,r.a.createElement(y.b,{exact:!0,path:"/inventory/expenses/add",render:function(a){return t.props.activePracticePermissions.EditExpenses||t.props.allowAllPermissions?r.a.createElement(Lh,Object.assign({},e.state,a,{loadData:e.loadData})):r.a.createElement(xi,null)}}),r.a.createElement(y.b,{exact:!0,path:"/inventory/expenses/edit/:id",render:function(a){return t.props.activePracticePermissions.EditExpenses||t.props.allowAllPermissions?r.a.createElement(Lh,Object.assign({},e.state,a,{loadData:e.loadData})):r.a.createElement(xi,null)}}),r.a.createElement(cr.a,{title:"Expenses",extra:t.props.activePracticePermissions.EditExpenses||t.props.allowAllPermissions?r.a.createElement(Da.b,{to:"/inventory/expenses/add"}," ",r.a.createElement(da.a,{type:"primary"},r.a.createElement(va.a,{type:"plus"})," Add")):r.a.createElement(xi,null)},r.a.createElement(rr.a,{gutter:16,style:{marginBottom:10}},r.a.createElement(ir.a,{span:2,style:{textAlign:"right"}},r.a.createElement("b",null," Expense Types")),r.a.createElement(ir.a,{span:4},r.a.createElement(ga.a,{style:{width:"100%"},value:this.state.selectedExpenseType,disabled:this.state.loading,onChange:function(t){return e.changeExpenseFilters("selectedExpenseType",t)}},r.a.createElement(ga.a.Option,{value:null},"--ALL EXPENSES--"),this.state.expenseTypes.map((function(e){return r.a.createElement(ga.a.Option,{value:e.id},e.name)})))),r.a.createElement(ir.a,{span:2,style:{textAlign:"right"}},r.a.createElement("b",null," Payment Modes")),r.a.createElement(ir.a,{span:4},r.a.createElement(ga.a,{style:{width:"100%"},value:this.state.selectedPaymentMode,disabled:this.state.loading,onChange:function(t){return e.changeExpenseFilters("selectedPaymentMode",t)}},r.a.createElement(ga.a.Option,{value:null},"--ALL PAYMENT MODE--"),this.state.paymentModes.map((function(e){return r.a.createElement(ga.a.Option,{value:e.id},e.mode)})))),r.a.createElement(ir.a,{span:2,style:{textAlign:"right"}},r.a.createElement("b",null," From")),r.a.createElement(ir.a,{span:4},r.a.createElement(yr.a,{value:this.state.selectedStartDate,disabled:this.state.loading,onChange:function(t){return e.changeExpenseFilters("selectedStartDate",t)}})),r.a.createElement(ir.a,{span:2,style:{textAlign:"right"}},r.a.createElement("b",null," To")),r.a.createElement(ir.a,{span:4},r.a.createElement(yr.a,{value:this.state.selectedEndDate,disabled:this.state.loading,onChange:function(t){return e.changeExpenseFilters("selectedEndDate",t)}}))),r.a.createElement(ti,{loading:this.state.loading,dataSource:this.state.expenses,columns:a,hideReport:!t.props.activePracticePermissions.ExportExpenses}))))}}]),t}(r.a.Component),Nh=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).changeRedirect=function(){var e=a.state.redirect;a.setState({redirect:!e})},a.state={editData:a.props.editData?a.props.editData:null},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.props.match.params.id&&(this.state.editData||this.loadData())}},{key:"loadData",value:function(){var e=this;Ut(Kt("manufacturer/%s/",[this.props.match.params.id]),(function(t){e.setState({editData:t})}),(function(){}))}},{key:"render",value:function(){var e=this;console.log("props",this.state);var t,a=this,n=[{label:"Name",key:"name",initialValue:this.state.editData?this.state.editData.name:null,type:S},{label:"Details",key:"description",initialValue:this.state.editData?this.state.editData.description:null,type:"textfield"}];this.state.editData&&(t={successFn:function(e){Qt(O,"success"),a.props.loadData(),console.log(e)},errorFn:function(){},action:Kt("manufacturer/%s/",[this.props.match.params.id]),method:"put"});var i=vr.a.create()(Vr),l={successFn:function(e){Qt(O,"success"),a.props.loadData(),console.log(e)},errorFn:function(){},action:"manufacturer/",method:"post"},o=[{key:"practice",value:this.props.active_practiceId}];return r.a.createElement(rr.a,null,r.a.createElement(cr.a,null,r.a.createElement(y.b,{path:"/inventory/manufacture/edit/:id",render:function(a){return e.props.match.params.id?r.a.createElement(i,Object.assign({defaultValues:o,title:"Edit Manufacturer",changeRedirect:e.changeRedirect,formProp:t},a,{fields:n})):r.a.createElement(y.a,{to:"/inventory/manufacture"})}}),r.a.createElement(y.b,{exact:!0,path:"/inventory/manufacture/add",render:function(t){return a.props.activePracticePermissions.EditManufacturer||a.props.allowAllPermissions?r.a.createElement(i,Object.assign({title:"Add Manufacturer",changeRedirect:e.changeRedirect},t,{formProp:l,fields:n})):r.a.createElement(xi,null)}})),this.state.redirect&&r.a.createElement(y.a,{to:"/inventory/manufacture"}))}}]),t}(r.a.Component);function Yh(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var Vh=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={active_practiceId:a.props.active_practiceId,manufactures:null,loading:!0},a.loadData=a.loadData.bind(Object(f.a)(a)),a.deleteManufacture=a.deleteManufacture.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){var e=this;Ut("manufacturer/",(function(t){e.setState({manufactures:t,loading:!1})}),(function(){e.setState({loading:!1})}))}},{key:"deleteManufacture",value:function(e){var t=this,a=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Yh(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Yh(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,{is_active:!1});Ht(Kt("manufacturer/%s/",[e]),a,(function(e){t.setState({loading:!1}),t.loadData()}),(function(){}))}},{key:"render",value:function(){var e=this,t=this,a=[{title:"Name",key:"name",dataIndex:"name"},{title:"Details",key:"details",dataIndex:"description"},{title:"Action",render:function(e){return r.a.createElement("div",null,t.props.activePracticePermissions.EditManufacturer||t.props.allowAllPermissions?r.a.createElement(Da.b,{to:"/inventory/manufacture/edit/"+e.id},"Edit"):null,r.a.createElement(sr.a,{type:"vertical"}),t.props.activePracticePermissions.DeleteManufacturer||t.props.allowAllPermissions?r.a.createElement(or.a,{title:"Are you sure delete this item?",onConfirm:function(){return t.deleteManufacture(e.id)},okText:"Yes",cancelText:"No"},r.a.createElement("a",null,"Delete")):null)}}];return r.a.createElement("div",null,r.a.createElement(y.d,null,r.a.createElement(y.b,{exact:!0,path:"/inventory/manufacture/add",render:function(a){return t.props.activePracticePermissions.EditManufacturer||t.props.allowAllPermissions?r.a.createElement(Nh,Object.assign({},e.state,a,e.props,{loadData:t.loadData})):r.a.createElement(xi,null)}}),r.a.createElement(y.b,{path:"/inventory/manufacture/edit/:id",render:function(a){return t.props.activePracticePermissions.EditManufacturer||t.props.allowAllPermissions?r.a.createElement(Nh,Object.assign({},e.state,e.props,a,{loadData:t.loadData})):r.a.createElement(xi,null)}}),r.a.createElement(cr.a,{title:"Manufacturers",extra:r.a.createElement(Da.b,{to:"/inventory/manufacture/add"}," ",r.a.createElement(da.a,{type:"primary",disabled:!t.props.activePracticePermissions.EditManufacturer},r.a.createElement(va.a,{type:"plus"})," Add"))},r.a.createElement(ti,{loading:this.state.loading,dataSource:this.state.manufactures,columns:a,hideReport:!t.props.activePracticePermissions.ExportManufacturer}))))}}]),t}(r.a.Component),Bh=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={editData:a.props.editData?a.props.editData:null},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"componentDidMount",value:function(){this.props.match.params.id&&(this.state.editData||this.loadData()),this.getPatientListData()}},{key:"loadData",value:function(){var e=this;Ut(Kt("expenses/%s/",[this.props.match.params.id]),(function(t){e.setState({editData:t})}),(function(){}))}},{key:"getPatientListData",value:function(){var e=this;Ut(se,(function(t){e.setState({patientListData:t})}),(function(){}))}},{key:"render",value:function(){var e=this,t=[];this.state.patientListData&&this.state.patientListData.length&&this.state.patientListData.forEach((function(e){t.push({label:e.name,value:e.id})}));var a,n=[{label:"Job number ",key:"job_no",initialValue:this.state.editData?this.state.editData.job_no:null,type:S},{label:"Doctor Name ",key:"job_no",initialValue:this.state.editData?this.state.editData.doctor_name:null,type:S},{label:"Name ",key:"name",initialValue:this.state.editData?this.state.editData.name:null,type:S},{label:"Status ",key:"status",initialValue:this.state.editData?this.state.editData.status:null,type:S},{label:"Due Date",key:"due_date",type:C,initialValue:this.state.editData?this.state.editData.due_date:null,format:"YYYY/MM/DD HH:mm"},{label:"patient",key:"patient",type:x,initialValue:this.state.editData?this.state.editData.patient:null,options:t}];this.state.editBlogData&&(a={successFn:function(e){Qt(O,"success"),console.log(e)},errorFn:function(){},action:Kt("lab/%s/",[this.props.match.params.id]),method:"put"});var i=vr.a.create()(Vr),l={successFn:function(e){Qt(O,"success"),console.log(e)},errorFn:function(){},action:"lab/",method:"post"},o=[{key:"practice",value:this.props.active_practiceId}];return r.a.createElement(rr.a,null,r.a.createElement(cr.a,null,r.a.createElement(y.b,{exact:!0,path:"/inventory/lab/edit/:id",render:function(){return e.props.match.params.id?r.a.createElement(i,{defaultValues:o,title:"Edit Lab",changeRedirect:e.changeRedirect,formProp:a,fields:n}):r.a.createElement(y.a,{to:"/inventory/lab"})}}),r.a.createElement(y.b,{exact:!0,path:"/inventory/lab/add",render:function(){return r.a.createElement(i,{title:"Add lab",changeRedirect:e.changeRedirect,formProp:l,fields:n})}})),this.state.redirect&&r.a.createElement(y.a,{to:"/inventory/lab"}))}}]),t}(r.a.Component),Hh=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={active_practiceId:a.props.active_practiceId,lab:null,loading:!0},a.loadData=a.loadData.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){var e=this;Ut("lab/",(function(t){e.setState({lab:t,loading:!1})}),(function(){e.setState({loading:!1})}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(y.d,null,r.a.createElement(y.b,{exact:!0,path:"/inventory/lab/add",render:function(t){return r.a.createElement(Bh,Object.assign({},e.state,t))}}),r.a.createElement(y.b,{exact:!0,path:"/inventory/expenses/lab/:id",render:function(t){return r.a.createElement(Bh,Object.assign({},e.state,t))}}),r.a.createElement(cr.a,{loading:this.state.loading,title:"Lab",extra:r.a.createElement(Da.b,{to:"/inventory/lab/add"}," ",r.a.createElement(da.a,{type:"primary"},r.a.createElement(va.a,{type:"plus"})," Add"))})))}}]),t}(r.a.Component),qh=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={activity:null,loading:!0},a.loadActivityLog=a.loadActivityLog.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentWillMount",value:function(){this.loadActivityLog()}},{key:"loadActivityLog",value:function(){var e=this;Ut("activity/",(function(t){e.setState({activity:t,loading:!1})}),(function(){e.setState({loading:!1})}))}},{key:"render",value:function(){return r.a.createElement(cr.a,{title:"Activity Log"},r.a.createElement(lr.a,{loading:this.state.loading,dataSource:this.state.activity}))}}]),t}(r.a.Component),zh=a(278),Gh=a.n(zh);function Uh(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Wh(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Uh(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Uh(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Kh=pr.a.Group,Qh=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).loadDrugType=function(){var e=Object(f.a)(a);Ut(Kt(ct,[a.props.active_practiceId]),(function(t){e.setState({drugTypeList:t})}),(function(){}))},a.onChangeHandeler=function(e){Object(f.a)(a).setState({type:e})},a.setFormParams=function(e,t){a.setState(Object(u.a)({},e,t))},a.handleSubmit=function(e){e.preventDefault();var t=Object(f.a)(a);a.props.form.validateFields((function(e,n){if(!e){var r=Wh({},n,{retail_without_tax:t.state.retail_price,net_price:void 0,practice:a.props.active_practiceId});a.state.editInventoryItem&&(r.id=a.state.editInventoryItem.id);var i=function(e){t.setState({redirect:!0}),t.props.loadData()},l=function(){};a.state.editInventoryItem?Ht(Kt(ft,[a.props.match.params.id]),r,i,l):qt(Kt(ht,[a.props.match.params.id]),r,i,l)}}))},a.changeNetPrice=function(e){var t=Object(f.a)(a),n=a.props.form,r=n.getFieldsValue;n.setFields;setTimeout((function(){var e=r();if(e.retail_with_tax){var a=0;e.taxes.forEach((function(e){t.state.taxes_list.forEach((function(t){t.id==e&&(a+=t.tax_value)}))}));var n=e.retail_with_tax/(1+.01*a);t.setState({retail_price:n.toFixed(2)})}else t.setState({retail_price:0})}),1e3)},a.state={taxes_list:a.props.taxes_list?a.props.taxes_list:null,manufacture_list:a.props.manufacture_list?a.props.manufacture_list:null,vendor_list:a.props.vendor_list?a.props.vendor_list:null,redirect:!1,type:a.props.editInventoryItem?a.props.editInventoryItem:null,drugUnitList:[],drugTypeList:[],retail_price:0,productMargin:[],loading:!1},a.changeRedirect=a.changeRedirect.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"componentDidMount",value:function(){this.props.match.params.id&&(this.state.editInventoryItem||this.loadData()),null==this.props.taxes_list&&this.loadTaxes(),null==this.props.manufacture_list&&this.loadManufactureList(),null==this.props.vendor_list&&this.loadVendorList(),this.loadDrugType(),this.loadDrugUnit(),this.loadProductMargin()}},{key:"loadProductMargin",value:function(){var e=this;Ut("product_margin/",(function(t){e.setState({productMargin:t})}),(function(){}))}},{key:"loadTaxes",value:function(){var e=this;Ut(Kt($,[this.props.active_practiceId]),(function(t){e.setState({taxes_list:t})}),(function(){}))}},{key:"loadManufactureList",value:function(){var e=this;Ut("manufacturer/",(function(t){e.setState({manufacture_list:t})}),(function(){}))}},{key:"loadVendorList",value:function(){var e=this;Ut(Kt(mt,[this.props.active_practiceId]),(function(t){e.setState({vendor_list:t})}),(function(){}))}},{key:"loadData",value:function(){var e=this;this.props.match.params.id&&Ut(Kt(ft,[this.props.match.params.id]),(function(t){e.setState((function(e){var a=0;t.taxes_data.forEach((function(e){a+=e.tax_value}));var n=(t.retail_price*(1+.01*a)).toFixed(2);return{editInventoryItem:Wh({},t,{net_price:n}),type:t.item_type,retail_price:t.retail_price}}))}),(function(){}))}},{key:"loadDrugUnit",value:function(){var e=this;Ut(Kt("clinics/%s/drugunit/",[this.props.active_practiceId]),(function(t){e.setState({drugUnitList:t})}),(function(){}))}},{key:"render",value:function(){var e=this,t=[];this.state.taxes_list&&this.state.taxes_list.forEach((function(e){t.push({label:e.name+"("+e.tax_value+"%)",value:e.id})}));var a=[];this.state.manufacture_list&&this.state.manufacture_list.forEach((function(e){a.push({label:e.name,value:e.id})}));var n=[];this.state.vendor_list&&this.state.vendor_list.forEach((function(e){n.push({label:e.name,value:e.id})}));var i=this.props.form.getFieldDecorator,l={labelCol:{span:10},wrapperCol:{span:14}};return r.a.createElement(cr.a,{title:this.state.editInventoryItem?"Edit Inventory Item":"Add Inventory Item",loading:this.state.loading},r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:18},r.a.createElement(vr.a,{onSubmit:this.handleSubmit},r.a.createElement(vr.a.Item,Object.assign({label:"Item Name"},l),i("name",{initialValue:this.state.editInventoryItem?this.state.editInventoryItem.name:null,rules:[{required:!0,message:Ft}]})(r.a.createElement(ma.a,{placeholder:"Item Name"}))),r.a.createElement(vr.a.Item,Object.assign({label:"HSN"},l),i("code",{initialValue:this.state.editInventoryItem?this.state.editInventoryItem.code:null})(r.a.createElement(ma.a,{placeholder:"HSN Number"}))),this.state.manufacturerType&&this.state.manufacturerType==S?r.a.createElement(vr.a.Item,Object.assign({key:"manufacturer_extra",label:"Manufacturer"},l),i("manufacturer_extra",{initialValue:e.state.editPrescreption?e.state.editPrescreption.manufacturer_extra:null,rules:[{required:!0,message:Ft}]})(r.a.createElement(ma.a,null)),r.a.createElement("a",{onClick:function(){return e.setFormParams("manufacturerType",x)}},"Choose Manufacturer")):r.a.createElement(vr.a.Item,Object.assign({key:"manufacturer"},l,{label:"Manufacturer"}),i("manufacturer",{initialValue:this.state.editInventoryItem?this.state.editInventoryItem.manufacturer:null})(r.a.createElement(ga.a,null,a.map((function(e){return r.a.createElement(ga.a.Option,{value:e.value},e.label)})))),r.a.createElement("a",{onClick:function(){return e.setFormParams("manufacturerType",S)}},"Add New Manufacturer")),r.a.createElement(vr.a.Item,Object.assign({label:"Stocking Unit"},l),i("stocking_unit",{initialValue:this.state.editInventoryItem?this.state.editInventoryItem.stocking_unit:null,rules:[{required:!0,message:Ft}]})(r.a.createElement(ma.a,{placeholder:"Example: Bottles, Strips etc."})),r.a.createElement("p",null,"(Make sure this is the same as the unit in which you dispense this item.)")),r.a.createElement(vr.a.Item,Object.assign({label:"Re-Order Level"},l),i("re_order_level",{initialValue:this.state.editInventoryItem?this.state.editInventoryItem.re_order_level:null})(r.a.createElement(Er.a,{placeholder:"Re-Order Level"}))),r.a.createElement(vr.a.Item,Object.assign({label:"Net Price"},l),i("retail_with_tax",{initialValue:this.state.editInventoryItem?this.state.editInventoryItem.retail_with_tax:null,rules:[{required:!0,message:Ft}]})(r.a.createElement(Er.a,{onChange:this.changeNetPrice})),r.a.createElement("span",{className:"ant-form-text"},"INR")),r.a.createElement(vr.a.Item,Object.assign({label:"Tax"},l),i("taxes",{initialValue:this.state.editInventoryItem?this.state.editInventoryItem.taxes:[]})(r.a.createElement(Kh,{onChange:this.changeNetPrice},t.map((function(e){return r.a.createElement(pr.a,{value:e.value},e.label)}))))),r.a.createElement(vr.a.Item,Object.assign({label:"Retail Price"},l),r.a.createElement("span",{className:"ant-form-text"},r.a.createElement("b",null,e.state.retail_price),"\xa0INR")),r.a.createElement(vr.a.Item,Object.assign({key:"margin"},l,{label:"MLM Margin"}),i("margin",{initialValue:this.state.editingProcedureData?this.state.editingProcedureData.margin:null})(r.a.createElement(ga.a,null,this.state.productMargin.map((function(e){return r.a.createElement(ga.a.Option,{value:e.id},e.name)}))))),r.a.createElement(vr.a.Item,Object.assign({label:"Item Type"},l),i("item_type",{initialValue:this.state.editInventoryItem?this.state.editInventoryItem.item_type:null,rules:[{required:!0,message:Ft}]})(r.a.createElement(ga.a,{placeholder:"Item Type",onChange:this.onChangeHandeler},Ma.map((function(e){return r.a.createElement(ga.a.Option,{value:e.value},e.label)}))))),this.state.type==ja?r.a.createElement("div",null,r.a.createElement(vr.a.Item,Object.assign({label:"I prescribe this"},l),i("perscribe_this",{valuePropName:"checked",initialValue:!!this.state.editInventoryItem&&this.state.editInventoryItem.perscribe_this})(r.a.createElement(pr.a,null))),this.state.drugType&&this.state.drugType==S?r.a.createElement(vr.a.Item,Object.assign({key:"drug_type_extra",label:"Medicine Type"},l),i("drug_type_extra",{initialValue:e.state.editInventoryItem?e.state.editInventoryItem.drug_type_extra:null,rules:[{required:!0,message:Ft}]})(r.a.createElement(ma.a,null)),r.a.createElement("a",{onClick:function(){return e.setFormParams("drugType",x)}},"Choose Medicine Type")):r.a.createElement(vr.a.Item,Object.assign({key:"drug_type"},l,{label:"Medicine Type"}),i("drug_type",{initialValue:this.state.editInventoryItem?this.state.editInventoryItem.drug_type:null,rules:[{required:!0,message:Ft}]})(r.a.createElement(ga.a,null,e.state.drugTypeList.map((function(e){return r.a.createElement(ga.a.Option,{value:e.id},e.name)})))),r.a.createElement("a",{onClick:function(){return e.setFormParams("drugType",S)}},"Add New Medicine Type")),r.a.createElement(vr.a.Item,Object.assign({label:"Strength"},l),i("strength",{initialValue:this.state.editInventoryItem?this.state.editInventoryItem.strength:null})(r.a.createElement(Er.a,null))),this.state.drugUnit&&this.state.drugUnit==S?r.a.createElement(vr.a.Item,Object.assign({key:"unit_type_extra",label:"Strength Unit"},l),i("unit_type_extra",{initialValue:e.state.editInventoryItem?e.state.editInventoryItem.unit_type_extra:null,rules:[{required:!0,message:Ft}]})(r.a.createElement(ma.a,null)),r.a.createElement("a",{onClick:function(){return e.setFormParams("drugUnit",x)}},"Choose Strength Unit")):r.a.createElement(vr.a.Item,Object.assign({key:"stength_unit"},l,{label:"Strength Unit"}),i("stength_unit",{initialValue:this.state.editInventoryItem?this.state.editInventoryItem.stength_unit:null,rules:[{required:!0,message:Ft}]})(r.a.createElement(ga.a,null,e.state.drugUnitList.map((function(e){return r.a.createElement(ga.a.Option,{value:e.id},e.name)})))),r.a.createElement("a",{onClick:function(){return e.setFormParams("drugUnit",S)}},"Add New Strength Unit")),r.a.createElement(vr.a.Item,Object.assign({label:"Instructions"},l),i("instructions",{initialValue:this.state.editInventoryItem?this.state.editInventoryItem.instructions:null})(r.a.createElement(Gh.a,null)))):null,"Supplies"==this.state.type?r.a.createElement("div",null,r.a.createElement(vr.a.Item,Object.assign({label:"I prescribe this"},l),i("perscribe_this",{valuePropName:"checked",initialValue:!!this.state.editInventoryItem&&this.state.editInventoryItem.perscribe_this})(r.a.createElement(pr.a,null))),r.a.createElement(vr.a.Item,Object.assign({label:"Strength Unit"},l),i("strength",{initialValue:this.state.editInventoryItem?this.state.editInventoryItem.strength:null})(r.a.createElement(ma.a,null))),this.state.drugUnit&&this.state.drugUnit==S?r.a.createElement(vr.a.Item,Object.assign({key:"unit_type_extra",label:"Strength Unit"},l),i("unit_type_extra",{initialValue:e.state.editInventoryItem?e.state.editInventoryItem.unit_type_extra:null,rules:[{required:!0,message:Ft}]})(r.a.createElement(ma.a,null)),r.a.createElement("a",{onClick:function(){return e.setFormParams("drugUnit",x)}},"Choose Strength Unit")):r.a.createElement(vr.a.Item,Object.assign({key:"stength_unit"},l,{label:"Strength Unit"}),i("stength_unit",{initialValue:this.state.editInventoryItem?this.state.editInventoryItem.stength_unit:null,rules:[{required:!0,message:Ft}]})(r.a.createElement(ga.a,null,e.state.drugUnitList.map((function(e){return r.a.createElement(ga.a.Option,{value:e.id},e.name)})))),r.a.createElement("a",{onClick:function(){return e.setFormParams("drugUnit",S)}},"Add New Strength Unit")),r.a.createElement(vr.a.Item,Object.assign({label:"Instructions"},l),i("instructions",{initialValue:this.state.editInventoryItem?this.state.editInventoryItem.instructions:null})(r.a.createElement(Gh.a,null)))):null,"Equipment"==this.state.type?r.a.createElement("div",null,r.a.createElement(vr.a.Item,Object.assign({label:"I prescribe this"},l),i("perscribe_this",{valuePropName:"checked",initialValue:this.state.editInventoryItem?this.state.editInventoryItem.perscribe_this:null})(r.a.createElement(pr.a,null))),r.a.createElement(vr.a.Item,Object.assign({label:"Instructions"},l),i("instructions",{initialValue:this.state.editInventoryItem?this.state.editInventoryItem.instructions:null})(r.a.createElement(Gh.a,null)))):null,r.a.createElement(vr.a.Item,null,r.a.createElement(da.a,{style:{margin:5},type:"primary",htmlType:"submit"},"Submit"),e.props.history?r.a.createElement(da.a,{style:{margin:5},onClick:function(){return e.props.history.goBack()}},"Cancel"):null)))),this.state.redirect&&r.a.createElement(y.a,{to:"/inventory"}))}}]),t}(r.a.Component),Zh=vr.a.create()(Qh);function Xh(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Jh(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Xh(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Xh(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var $h=ma.a.Search,ef=yr.a.MonthPicker,tf=hr.a.TabPane,af={_id:null,quantity:0,batch:null},nf=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).changeSupplierType=function(e){a.setState({customSupplier:!!e})},a.loadItemsList=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=Object(f.a)(a),r=function(t){var a=t;n.setState((function(t){return{items:Jh({},t.items,Object(u.a)({},e,Jh({},t.items[e],{},a))),loading:!1}}))},i=function(){},l={maintain_inventory:!0,practice:a.props.active_practiceId,item_type:e,page:t};n.state.searchStrings[e]&&(l.item_name=n.state.searchStrings[e]),Ut(ht,r,i,l)},a.remove=function(e){a.setState((function(t){var a=[];return t.tableFormValues.forEach((function(t){t._id!=e&&a.push(t)})),console.log(t.tableFormValues,e),{tableFormValues:a}}))},a.add=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.random().toFixed(7);a.setState((function(a){return{tableFormValues:[Jh({},af,{},e,{_id:t})].concat(Object(Oa.a)(a.tableFormValues))}}))},a.handleSubmit=function(e){var t=Object(f.a)(a);if(a.setState({loading:!0}),13==e.keyCode)return!1;e.preventDefault(),a.props.form.validateFields((function(e,a){if(!e){var n=[];t.state.tableFormValues.forEach((function(e){var r={item_add_type:t.state.classType,inventory_item:e.id,quantity:a.quantity[e._id],batch_number:a.batch[e._id],date:Or()(a.date).format("YYYY-MM-DD"),bill_number:a.bill_number,bill_file:a.file&&a.file.file.response?a.file.file.response.image_path:null};t.state.classType==Aa?(r=Jh({},r,{expiry_date:Or()(a.expiry_date[e._id]).format("YYYY-MM-DD"),unit_cost:a.unit_cost[e._id],total_cost:a.unit_cost[e._id]*a.quantity[e._id]}),a.supplier?r.supplier=a.supplier:a.supplier_name&&(r.supplier_name=a.supplier_name)):t.state.classType==Ta&&(r.type_of_consumption=a.type_of_consumption),n.push(r)})),n.date=Or()(a.date).isValid()?Or()(a.date).format():null,t.state.customSupplier?n.supplier_name=a.supplier_name:n.supplier=a.supplier;qt(gt,n,(function(e){Qt("Inventory updated successfully"),t.props.loadData(),t.props.history.push("/inventory")}),(function(){t.setState({loading:!1})}))}}))},a.searchValues=function(e,t){var n=Object(f.a)(a);a.setState((function(a){var n=Jh({},a.searchStrings);return n[e]=t,{searchStrings:n}}),(function(){n.loadItemsList(e)}))},a.filterValues=function(e){a.setState((function(t){var a=[];return t.items[e]&&(t.searchStrings[e]?t.items[e].forEach((function(n){n.name.toString().toLowerCase().includes(t.searchStrings[e].toLowerCase())&&a.push(n)})):a=t.items[e]),{filteredItems:Jh({},t.filteredItems,Object(u.a)({},e,a))}}))},a.storeValue=function(e,t,n){var r=Object(f.a)(a);if(a.setState((function(a){return{tempValues:Jh({},a.tempValues,Object(u.a)({},e.toString()+t.toString(),n))}})),"batch"==e){var i=r.props.form.setFieldsValue;r.state.tableFormValues.forEach((function(e){e._id==t&&e.item_type_stock.batch_number&&e.item_type_stock.batch_number.forEach((function(e){i(Object(u.a)({},"expiry_date[".concat(t,"]"),e.expiry_date&&Or()(e.expiry_date).isValid()?Or()(e.expiry_date):null))}))}))}},a.addItemThroughQR=function(e){var t=Object(f.a)(a);t.setState({loadingQr:!0});var n=e.split("*");Ut(Et,(function(a){var r=t.props.form,i=r.setFieldsValue,l=r.getFieldsValue,o=(r.getFieldValue,Math.random().toFixed(7)),s=!0;if(t.state.tableFormValues.forEach((function(a){if(a.item_name==n[0]){var r=a._id;if(l("batch[".concat(r,"]"))==n[3]){var o=l("quantity[".concat(r,"]"));s=!1,i(Object(u.a)({},"quantity[".concat(r,"]"),o+1)),t.storeValue("quantity",r,e)}}})),s){var c;t.add(a,o),t.storeValue("batch",o,n[1]),t.storeValue("unit_cost",o,n[3]);var d=(c={},Object(u.a)(c,"batch[".concat(o,"]"),n[1]),Object(u.a)(c,"expiry_date[".concat(o,"]"),Or()(n[2],"MM/YY")),c);t.state.classType==Ta&&(d["unit_cost[".concat(o,"]")]=n[3]),i(d)}console.log(l(),Object(u.a)({},"batch[".concat(o,"]"),n[0])),t.setState((function(e){return{loadingQr:!1,qrValue:""}}))}),(function(){}),{qr:e,form:"Inventory"})},a.setQrValue=function(e){var t=e.target.value;a.setState({qrValue:t})},a.state={items:{},classType:e.type,tableFormValues:[],maxQuantityforConsume:{},searchStrings:{},tempValues:{},supplierList:[],customSupplier:!1,qrValue:"",loading:!0},a.loadSupplierList=a.loadSupplierList.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadInventoryItemList(),this.loadSupplierList()}},{key:"loadSupplierList",value:function(){var e=this,t={practice:this.props.active_practiceId};Ut(Kt(yt,[this.props.active_practiceId]),(function(t){e.setState({supplierList:t})}),(function(){}),t)}},{key:"loadInventoryItemList",value:function(){var e=this;Ma.forEach((function(t){e.loadItemsList(t.value)}))}},{key:"changeMaxQuantityforConsume",value:function(e,t){this.setState((function(a){var n=Jh({},a.maxQuantityforConsume);return a.tableFormValues.forEach((function(a){a._id==e&&a.item_type_stock.item_stock.forEach((function(a){a.batch_number==t&&(n[e]=a.quantity||0)}))})),{maxQuantityforConsume:n}}))}},{key:"render",value:function(){var e=this,t=this,a=this.props.form.getFieldDecorator,n={labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}},i={name:"image",data:{name:"hello"},action:Vt("blogImage/"),headers:{authorization:"authorization-text"},onChange:function(e){e.file.status,"done"===e.file.status?N.a.success("".concat(e.file.name," file uploaded successfully")):"error"===e.file.status&&N.a.error("".concat(e.file.name," file upload failed."))}};a("keys",{initialValue:[]});var l=[{title:"Item Name",key:"item_name",dataIndex:"name"}];return this.state.classType==Aa?l=l.concat([{title:"Quantity",key:"quantity",dataIndex:"quantity",render:function(t,i){return r.a.createElement(vr.a.Item,Object.assign({key:"quantity[".concat(i._id,"]")},n),a("quantity[".concat(i._id,"]"),{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"This field is required."}]})(r.a.createElement(Er.a,{min:0,placeholder:"quantity",onChange:function(t){return e.storeValue("quantity",i._id,t)}})))}},{title:"Batch",key:"batch",dataIndex:"batch",render:function(t,i){return r.a.createElement(vr.a.Item,Object.assign({key:"batch[".concat(i._id,"]")},n),a("batch[".concat(i._id,"]"),{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"This field is required."}]})(r.a.createElement(ya.a,{placeholder:"Batch Number",onChange:function(t){return e.storeValue("batch",i._id,t)},dataSource:i.item_type_stock&&i.item_type_stock.item_stock?i.item_type_stock.item_stock.map((function(e){return e.batch_number?e.batch_number:"--"})):[]})))}},{title:"Expiry Date",key:"expiry",dataIndex:"expiry",render:function(e,t){return r.a.createElement(vr.a.Item,Object.assign({key:"expiry_date[".concat(t._id,"]")},n),a("expiry_date[".concat(t._id,"]"),{rules:[{required:!0,message:"This field is required."}],initialValue:Or()(new Date)})(r.a.createElement(ef,null)))}},{title:"Unit Cost",key:"unit_cost",dataIndex:"unit_cost",render:function(t,i){return r.a.createElement(vr.a.Item,Object.assign({key:"unit_cost[".concat(i._id,"]")},n),a("unit_cost[".concat(i._id,"]"),{rules:[{required:!0,message:"This field is required."}]})(r.a.createElement(Er.a,{placeholder:"Unit Cost",onChange:function(t){return e.storeValue("unit_cost",i._id,t)}})))}},{title:"Total Cost",key:"total_cost",dataIndex:"total_cost",render:function(t,a){return r.a.createElement("span",null,e.state.tempValues["unit_cost"+a._id]&&e.state.tempValues["quantity"+a._id]?e.state.tempValues["unit_cost"+a._id]*e.state.tempValues["quantity"+a._id]:"--")}}]):this.state.classType==Ta&&(l=l.concat([{title:"Batch",key:"batch",dataIndex:"batch",render:function(e,i){return r.a.createElement(vr.a.Item,Object.assign({key:"batch[".concat(i._id,"]")},n),a("batch[".concat(i._id,"]"),{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"This field is required."}]})(r.a.createElement(ga.a,{placeholder:"Batch Number",onChange:function(e){return t.changeMaxQuantityforConsume(i._id,e)}},i.item_type_stock&&i.item_type_stock.item_stock&&i.item_type_stock.item_stock.map((function(e){return r.a.createElement(ga.a.Option,{value:e.batch_number},"#",e.batch_number," (",e.quantity,")")})))))}},{title:"Quantity",key:"quantity",dataIndex:"quantity",render:function(t,i){return r.a.createElement(vr.a.Item,Object.assign({key:"quantity[".concat(i._id,"]")},n),a("quantity[".concat(i._id,"]"),{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"This field is required."}]})(r.a.createElement(Er.a,{min:0,max:e.state.maxQuantityforConsume[i._id],placeholder:"quantity"})))}}])),l=l.concat([{title:"Action",key:"_id",dataIndex:"_id",render:function(e,a){return r.a.createElement("a",{onClick:function(){return t.remove(a._id)}},"Delete")}}]),r.a.createElement("div",null,r.a.createElement(pa.a,{spinning:this.state.loading},r.a.createElement(cr.a,{title:this.state.classType+" Stock",extra:r.a.createElement($h,{loading:this.state.loadingQr,value:this.state.qrValue,onChange:this.setQrValue,placeholder:"Search QR Code",onSearch:this.addItemThroughQR,style:{width:200}})},r.a.createElement(rr.a,{gutter:16},r.a.createElement(ir.a,{span:7},r.a.createElement(hr.a,{size:"small",type:"card"},Ma.map((function(t){return r.a.createElement(tf,{tab:t.label,key:t.value},r.a.createElement("div",{style:{backgroundColor:"#ddd",padding:8}},r.a.createElement(ma.a.Search,{key:t.label,placeholder:"Search in "+t.label+"...",onSearch:function(a){return e.searchValues(t.label,a)}})),r.a.createElement(Ea.a,{size:"small",itemLayout:"horizontal",dataSource:e.state.items&&e.state.items[t.value]?e.state.items[t.value].results:[],renderItem:function(t){return r.a.createElement(Ea.a.Item,null,r.a.createElement(Ea.a.Item.Meta,{title:t.name,description:t.item_type_stock.item_stock&&t.item_type_stock.item_stock.map((function(e){return r.a.createElement("span",null,"#",e.batch_number,"(",e.quantity,")",r.a.createElement("br",null))}))}),r.a.createElement(da.a,{type:"primary",size:"small",shape:"circle",onClick:function(){return e.add(t)},icon:"arrow-right"}))}}),e.state.items&&e.state.items[t.value]?r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("a",{style:{margin:5},disabled:!e.state.items[t.value].previous,onClick:function(){return e.loadItemsList(t.value,e.state.items[t.value].previous)}},r.a.createElement(va.a,{type:"left"}),"Previous"),r.a.createElement(sr.a,{type:"vertical"}),r.a.createElement("a",{style:{margin:5},disabled:!e.state.items[t.value].next,onClick:function(){return e.loadItemsList(t.value,e.state.items[t.value].next)}},"Next",r.a.createElement(va.a,{type:"right"}))):null)})))),r.a.createElement(ir.a,{span:17},r.a.createElement(vr.a,{onSubmit:this.handleSubmit},this.state.classType==Ta?r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:16},r.a.createElement(vr.a.Item,Object.assign({key:"type_of_consumption",label:"Type of Consumption"},{labelCol:{span:6},wrapperCol:{span:14}}),a("type_of_consumption",{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"This field is required."}]})(r.a.createElement(ga.a,null,an.map((function(e){return r.a.createElement(ga.a.Option,{value:e.value},e.label)}))))))):null,r.a.createElement(lr.a,{pagination:!1,bordered:!0,rowKey:function(e){return e._id},dataSource:this.state.tableFormValues,columns:l}),r.a.createElement(s.a,{offsetBottom:0},r.a.createElement(cr.a,null,r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:8},r.a.createElement(vr.a.Item,{labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}},r.a.createElement(da.a,{type:"primary",htmlType:"submit"},"Submit"),t.props.history?r.a.createElement(da.a,{style:{margin:5},onClick:function(){return t.props.history.goBack()}},"Cancel"):null)),r.a.createElement(ir.a,{span:8},r.a.createElement(vr.a.Item,Object.assign({key:"date",label:this.state.classType==Aa?"Added On":"Consumed On"},{labelCol:{span:10},wrapperCol:{span:14}}),a("date",{rules:[{required:!0,message:"This field is required."}],initialValue:Or()()})(r.a.createElement(yr.a,null))),r.a.createElement(vr.a.Item,Object.assign({key:"bill_number",label:"Bill Number"},{labelCol:{span:10},wrapperCol:{span:14}}),a("bill_number",{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"This field is required."}]})(r.a.createElement(ma.a,null))),this.state.classType==Aa?r.a.createElement("div",null,this.state.customSupplier?r.a.createElement(vr.a.Item,Object.assign({key:"supplier_name",label:"Supplier"},{labelCol:{span:10},wrapperCol:{span:14}}),a("supplier_name",{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"This field is required."}]})(r.a.createElement(ma.a,null)),this.state.customSupplier?r.a.createElement("a",{onClick:function(){return e.changeSupplierType(!1)}},"Cancel"):null):r.a.createElement(vr.a.Item,Object.assign({key:"supplier",label:"Supplier"},{labelCol:{span:10},wrapperCol:{span:14}}),a("supplier",{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"This field is required."}]})(r.a.createElement(ga.a,null,this.state.supplierList.map((function(e){return r.a.createElement(ga.a.Option,{value:e.id},e.name)})))),this.state.customSupplier?null:r.a.createElement("a",{onClick:function(){return e.changeSupplierType(!0)}},"Add New"))," "):null),r.a.createElement(ir.a,{span:6,offset:2},r.a.createElement(vr.a.Item,Object.assign({key:"file"},n),a("file",{})(r.a.createElement(fr.a,i,r.a.createElement(da.a,null,r.a.createElement(va.a,{type:"upload"})," Select File"))))),this.state.classType==Aa?r.a.createElement(ir.a,{style:{textAlign:"center"},span:8},r.a.createElement("h3",null,"Grand Total: ",r.a.createElement("b",null,this.state.tableFormValues.reduce((function(e,a){return t.state.tempValues["quantity"+a._id]&&t.state.tempValues["unit_cost"+a._id]?e+t.state.tempValues["quantity"+a._id]*t.state.tempValues["unit_cost"+a._id]:e}),0)))):null)))))))))}}]),t}(r.a.Component),rf=vr.a.create()(nf),lf=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).changeFilter=function(e){var t=Object(f.a)(a);a.setState(Object(u.a)({},e.target.name,e.target.value),(function(){t.loadData()}))},a.changeInventoryFilters=function(e,t){var n=Object(f.a)(a);n.setState(Object(u.a)({},e,t),(function(){n.loadData()}))},a.state={inventoryItems:[],inventoryItemList:[],stockModalVisibility:!1,itemTypeFilter:"ALL",itemStockFilter:"ALL",loading:!0,nextItemPage:null},a.loadData=a.loadData.bind(Object(f.a)(a)),a.showAddOrConsumeModal=a.showAddOrConsumeModal.bind(Object(f.a)(a)),a.setActionType=a.setActionType.bind(Object(f.a)(a)),a.changeFilter=a.changeFilter.bind(Object(f.a)(a)),a.deleteObject=a.deleteObject.bind(Object(f.a)(a)),a.excelExport=a.excelExport.bind(Object(f.a)(a)),a.pdfExport=a.pdfExport.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this;t.setState({loading:!0});var a=function(e){var a=e.results;t.setState((function(t){return 1==e.current?{inventoryItems:a,loading:!1,nextItemPage:e.next}:{inventoryItems:[].concat(Object(Oa.a)(t.inventoryItems),Object(Oa.a)(a)),loading:!1,nextItemPage:e.next}}))},n=function(){t.setState({loading:!1})},r={maintain_inventory:!0,practice:this.props.active_practiceId,page:e,sort:"asc",on:"total_quantity"};"ALL"!=t.state.itemTypeFilter&&(r.item_type=t.state.itemTypeFilter),"ALL"!=t.state.itemStockFilter&&(r.filter_type=t.state.itemStockFilter),t.state.filterItemName&&(r.item_name=t.state.filterItemName),t.state.filterItemCode&&(r.code=t.state.filterItemCode),Ut(ht,a,n,r)}},{key:"deleteObject",value:function(e){var t=this;Ht(Kt(ft,[e]),{is_active:!1},(function(e){t.loadData()}),(function(){}))}},{key:"setActionType",value:function(e,t){this.setState({itemId:t,actionType:e}),this.showAddOrConsumeModal(!0)}},{key:"showAddOrConsumeModal",value:function(e){this.setState({stockModalVisibility:e})}},{key:"excelExport",value:function(){var e=Zt("Generating Report..."),t={maintain_inventory:!0,practice:this.props.active_practiceId,sort:"asc",on:"total_quantity"};"ALL"!=this.state.itemTypeFilter&&(t.item_type=this.state.itemTypeFilter),"ALL"!=this.state.itemStockFilter&&(t.filter_type=this.state.itemStockFilter),this.state.filterItemName&&(t.item_name=this.state.filterItemName),this.state.filterItemCode&&(t.code=this.state.filterItemCode),Ut("inventory_item/export",(function(t){Xt(e,O,"Report Generated Successfully!!"),t.report_csv&&window.open(V+t.report_csv)}),(function(){Xt(e,k,"Report Generation Failed!!")}),t)}},{key:"pdfExport",value:function(){var e=Zt("Generating Report..."),t={maintain_inventory:!0,practice:this.props.active_practiceId,sort:"asc",on:"total_quantity"};"ALL"!=this.state.itemTypeFilter&&(t.item_type=this.state.itemTypeFilter),"ALL"!=this.state.itemStockFilter&&(t.filter_type=this.state.itemStockFilter),this.state.filterItemName&&(t.item_name=this.state.filterItemName),this.state.filterItemCode&&(t.code=this.state.filterItemCode),Ut("inventory_item/export",(function(t){Xt(e,O,"Report Generated Successfully!!"),t.report_pdf&&window.open(V+t.report_pdf)}),(function(){Xt(e,k,"Report Generation Failed!!")}),t)}},{key:"render",value:function(){var e=this,t={};this.state.taxes_list&&this.state.taxes_list.forEach((function(e){t[e.id]=e}));var a={};this.state.manufacture_list&&this.state.manufacture_list.forEach((function(e){a[e.id]=e.name}));var n={};this.state.vendor_list&&this.state.vendor_list.forEach((function(e){n[e.id]=e.name}));var i=this,l=[{title:"Name",dataIndex:"name",key:"name"},{title:"HSN",dataIndex:"code",key:"code"},{title:"Inventory Stock",dataIndex:"total_quantity",key:"total_quantity",render:function(e,t){return r.a.createElement("span",null,e," ",e<=t.re_order_level?r.a.createElement(fa.a,{color:"#f50"},"Low"):null)}},{title:"Expired Stock",dataIndex:"item_type_stock",key:"expired_stock",export:function(e,t){var a=0,n=Or()();return e.item_stock&&e.item_stock.forEach((function(e){n>=Or()(e.expiry_date,"YYYY-MM-DD")&&(a+=Number.isInteger(e.quantity)?e.quantity:0)})),a},render:function(e,t){var a=0,n=Or()();return e.item_stock&&e.item_stock.forEach((function(e){n>=Or()(e.expiry_date,"YYYY-MM-DD")&&(a+=Number.isInteger(e.quantity)?e.quantity:0)})),r.a.createElement("span",null,a)}},{title:"Retail Price (INR)",dataIndex:"retail_without_tax",key:"retail_without_tax",render:function(e,t){return r.a.createElement("span",null,t.retail_without_tax)}},{title:"Tax",dataIndex:"taxes",key:"taxes",render:function(e,t){return r.a.createElement("span",null,t.taxes_data&&t.taxes_data.map((function(e){return r.a.createElement(fa.a,null,r.a.createElement("small",null," ",e?e.name+"@"+e.tax_value+"%":null))})))}},{title:"MLM Margin",dataIndex:"margin_data",key:"margin",render:function(e){return r.a.createElement("span",null,e?e.name:null)}},{title:"Item type",dataIndex:"item_type",key:"item_type"},{title:"Reorder Level",dataIndex:"re_order_level",key:"re_order_level"},{title:"Manufacturer",key:"manufacturer",export:function(e,t){return t.manufacturer_data?t.manufacturer_data.name:""},render:function(e,t){return r.a.createElement("span",null," ",t.manufacturer_data?t.manufacturer_data.name:"")}},{title:"Actions",render:function(e){return r.a.createElement("div",null,r.a.createElement(Da.b,{to:"/inventory/edit/"+e.id},"Edit"),r.a.createElement(sr.a,{type:"vertical"}),0==e.total_quantity?r.a.createElement(or.a,{title:"Are you sure delete this item?",onConfirm:function(){return i.deleteObject(e.id)},okText:"Yes",cancelText:"No"},r.a.createElement("a",null,"Delete")):r.a.createElement(fa.a,{color:"red"},"Can Not Delete"))}}];return r.a.createElement("div",null,r.a.createElement(y.d,null,r.a.createElement(y.b,{path:"/inventory/add",render:function(t){return i.props.activePracticePermissions.AddInventoryItem||i.props.allowAllPermissions?r.a.createElement(Zh,Object.assign({},t,e.props,e.state,{loadData:e.loadData})):r.a.createElement(xi,null)}}),r.a.createElement(y.b,{exact:!0,path:"/inventory/edit/:id",render:function(t){return i.props.activePracticePermissions.AddInventoryItem||i.props.allowAllPermissions?r.a.createElement(Zh,Object.assign({},e.state,e.props,t,{loadData:e.loadData})):r.a.createElement(xi,null)}}),r.a.createElement(y.b,{exact:!0,path:"/inventory/consume-stock",render:function(t){return i.props.activePracticePermissions.AddInventoryStock||i.props.allowAllPermissions?r.a.createElement(rf,Object.assign({key:Ta,type:Ta,loadData:e.loadData},e.state,t,e.props)):r.a.createElement(xi,null)}}),r.a.createElement(y.b,{exact:!0,path:"/inventory/add-stock",render:function(t){return i.props.activePracticePermissions.ConsumeInventoryStock||i.props.allowAllPermissions?r.a.createElement(rf,Object.assign({key:Aa,type:Aa,loadData:e.loadData},e.state,t,e.props)):r.a.createElement(xi,null)}}),r.a.createElement(y.b,null,r.a.createElement(cr.a,{title:"Inventory List",extra:r.a.createElement(da.a.Group,null,r.a.createElement(Da.b,{to:"/inventory/add"},r.a.createElement(da.a,{type:"primary",disabled:!i.props.activePracticePermissions.AddInventoryItem&&!i.props.allowAllPermissions},r.a.createElement(va.a,{type:"plus"})," Add Item")),r.a.createElement(Da.b,{to:"/inventory/add-stock"}," ",r.a.createElement(da.a,{disabled:!i.props.activePracticePermissions.AddInventoryStock&&!i.props.allowAllPermissions,type:"primary"},"Add Stock")),r.a.createElement(Da.b,{to:"/inventory/consume-stock"},r.a.createElement(da.a,{disabled:!i.props.activePracticePermissions.ConsumeInventoryStock&&!i.props.allowAllPermissions,type:"primary"},"Consume Stock")))},r.a.createElement(rr.a,null,r.a.createElement(br.a.Group,{name:"itemTypeFilter",size:"small",defaultValue:"ALL",buttonStyle:"solid",onChange:this.changeFilter,style:{margin:"10px"}},r.a.createElement(br.a.Button,{value:"ALL"},"ALL"),Ma.map((function(e){return r.a.createElement(br.a.Button,{value:e.value},e.label)}))),r.a.createElement(br.a.Group,{name:"itemStockFilter",size:"small",defaultValue:"ALL",buttonStyle:"solid",style:{margin:"10px",float:"right"},onChange:this.changeFilter},r.a.createElement(br.a.Button,{value:"ALL"},"ALL"),r.a.createElement(br.a.Button,{value:"Low"},"Low"),r.a.createElement(br.a.Button,{value:"Expired"},"Expired"))),r.a.createElement(rr.a,{gutter:16,style:{marginBottom:10}},r.a.createElement(ir.a,{span:4},r.a.createElement(da.a.Group,{size:"small"},r.a.createElement(da.a,{disabled:this.state.loading,type:"primary",onClick:this.excelExport},r.a.createElement(va.a,{type:"file-excel"})," Excel"),r.a.createElement(da.a,{disabled:this.state.loading,type:"primary",onClick:this.pdfExport},r.a.createElement(va.a,{type:"file-pdf"})," PDF"))),r.a.createElement(ir.a,{span:2,style:{textAlign:"right"}},r.a.createElement("b",null," Item Name")),r.a.createElement(ir.a,{span:4},r.a.createElement(ma.a,{style:{width:"100%"},value:this.state.filterItemName,allowClear:!0,placeholder:"Item Name",onChange:function(t){return e.changeInventoryFilters("filterItemName",t.target.value)}})),r.a.createElement(ir.a,{span:2,style:{textAlign:"right"}},r.a.createElement("b",null," HSN")),r.a.createElement(ir.a,{span:4},r.a.createElement(ma.a,{style:{width:"100%"},value:this.state.filterItemCode,allowClear:!0,placeholder:"HSN Number",onChange:function(t){return e.changeInventoryFilters("filterItemCode",t.target.value)}}))),r.a.createElement(rr.a,null,r.a.createElement(lr.a,{bordered:!0,pagination:!1,hideReport:!0,dataSource:this.state.inventoryItems.sort((function(e,t){return parseInt(t.total_quantity)-parseInt(e.total_quantity)})),columns:l}),r.a.createElement(pa.a,{spinning:this.state.loading},r.a.createElement(rr.a,null)),r.a.createElement(wi,{loaderFunction:function(){return e.loadData(e.state.nextItemPage)},loading:this.state.loading,hidden:!this.state.nextItemPage})),r.a.createElement(nr.a,{visible:this.state.stockModalVisibility,title:"Stock"+this.state.actionType,onOk:function(){return e.showAddOrConsumeModal(!1)},onCancel:function(){return e.showAddOrConsumeModal(!1)},footer:null},r.a.createElement(rf,{showAddOrConsumeModal:this.showAddOrConsumeModal,itemId:this.state.itemId,actionType:this.state.actionType}))))))}}]),t}(r.a.Component),of=o.a.Content,sf=function(e){function t(e){return Object(d.a)(this,t),Object(m.a)(this,Object(h.a)(t).call(this,e))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this;return r.a.createElement(of,{className:"main-container",style:{margin:"24px 16px",minHeight:280}},r.a.createElement(y.d,null,r.a.createElement(y.b,{path:"/inventory/vendor",render:function(a){return t.props.activePracticePermissions.ViewVendor||t.props.allowAllPermissions?r.a.createElement(Rh,Object.assign({},e.props,a)):r.a.createElement(xi,null)}}),r.a.createElement(y.b,{path:"/inventory/expenses",render:function(a){return t.props.activePracticePermissions.ViewExpenses||t.props.allowAllPermissions?r.a.createElement(Fh,Object.assign({},e.props,a)):r.a.createElement(xi,null)}}),r.a.createElement(y.b,{path:"/inventory/manufacture",render:function(a){return t.props.activePracticePermissions.ViewManufacturer||t.props.allowAllPermissions?r.a.createElement(Vh,Object.assign({},t.props,e.state,a)):r.a.createElement(xi,null)}}),r.a.createElement(y.b,{path:"/inventory/lab",render:function(a){return t.props.activePracticePermissions.Labs||t.props.allowAllPermissions?r.a.createElement(Hh,e.props):r.a.createElement(xi,null)}}),r.a.createElement(y.b,{path:"/inventory/activity",render:function(a){return t.props.activePracticePermissions.ViewActivities||t.props.allowAllPermissions?r.a.createElement(qh,Object.assign({},e.props,a)):r.a.createElement(xi,null)}}),r.a.createElement(y.b,{path:"/inventory",render:function(a){return t.props.activePracticePermissions.ViewInventory||t.props.allowAllPermissions?r.a.createElement(lf,Object.assign({},a,e.props)):r.a.createElement(xi,null)}})))}}]),t}(r.a.Component),cf=vr.a.Item,uf=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault();var t=Object(f.a)(a);a.props.form.validateFieldsAndScroll((function(e,a){if(!e){var n;t.setState({changePassLoading:!0});var r=(n={},Object(u.a)(n,ta,a.oldPass),Object(u.a)(n,aa,a.newPass),n);qt(U,r,(function(e){N.a.success(e.message),t.setState({changePassLoading:!1})}),(function(){t.setState({changePassLoading:!1})}))}}))},a.handleConfirmBlur=function(e){var t=e.target.value;a.setState({confirmDirty:a.state.confirmDirty||!!t})},a.compareToFirstPassword=function(e,t,n){var r=a.props.form;t&&t!=r.getFieldValue("newPass")?n("Two passwords that you enter is inconsistent!"):n()},a.validateToNextPassword=function(e,t,a){a(Jt(e,t,a))},a.state={confirmDirty:!1,changePassLoading:!1},a.handleSubmit=a.handleSubmit.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e={labelCol:{span:6},wrapperCol:{span:14}},t=this.props.form.getFieldDecorator;return r.a.createElement(vr.a,{onSubmit:this.handleSubmit},r.a.createElement(cf,Object.assign({label:"Old Password"},e),t("oldPass",{rules:[{required:!0,message:"Please enter your old Password!"}]})(r.a.createElement(ma.a,{prefix:r.a.createElement(va.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Old Password"}))),r.a.createElement(cf,Object.assign({label:"New Password"},e),t("newPass",{rules:[{required:!0,message:"Please enter your new Password!"},{validator:this.validateToNextPassword}]})(r.a.createElement(ma.a,{prefix:r.a.createElement(va.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"New Password"}))),r.a.createElement(cf,Object.assign({label:"Confirm Password"},e),t("confirmPass",{rules:[{required:!0,message:"Please confirm your new Password!"},{validator:this.compareToFirstPassword}]})(r.a.createElement(ma.a,{prefix:r.a.createElement(va.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Confirm Password",onBlur:this.handleConfirmBlur}))),r.a.createElement(cf,null,r.a.createElement(da.a,{loading:this.state.changePassLoading,type:"primary",htmlType:"submit",className:"login-form-button"},"Change Password")))}}]),t}(r.a.Component),df=o.a.Content,pf=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={},console.log(a.state),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"loadProfile",value:function(){var e=this;Ut("users/user_clone/",(function(t){e.setState({userProfile:t,loading:!1})}),(function(){e.setState({loading:!1})}))}},{key:"render",value:function(){var e=vr.a.create()(uf);return r.a.createElement(df,{className:"main-container",style:{margin:"24px 16px",minHeight:280}},r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:12},r.a.createElement(cr.a,{title:"Change Password"},r.a.createElement(e,null))),r.a.createElement(ir.a,{span:12},r.a.createElement(cr.a,{title:"My Permissions"},r.a.createElement(Ea.a,{size:"small",dataSource:this.props.activePracticeData?this.props.activePracticeData.permissions_data:[],renderItem:function(e){return r.a.createElement(Ea.a.Item,null,e.name)}}))),r.a.createElement(sr.a,null),r.a.createElement(ir.a,{span:12},r.a.createElement(cr.a,{title:"My Profile"},r.a.createElement(rr.a,{gutter:16},r.a.createElement(ir.a,{span:6},r.a.createElement(mf,{label:"Name ",value:this.props.user.first_name}),r.a.createElement(mf,{label:"Email Id ",value:this.props.user.email}),r.a.createElement(mf,{label:"Contact No.",value:this.props.user.mobile})))))))}}]),t}(r.a.Component);function mf(e){return r.a.createElement(rr.a,{gutter:16,style:{marginBottom:"5px"}},r.a.createElement(ir.a,{span:12,style:{textAlign:"right"}},e.label,":"),r.a.createElement(ir.a,{span:12},r.a.createElement("strong",null,e.value)))}a(1694);var hf=function(e){function t(e){return Object(d.a)(this,t),Object(m.a)(this,Object(h.a)(t).call(this,e))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.props.activePracticeData&&setTimeout((function(){window.print()}),1e3)}},{key:"componentWillReceiveProps",value:function(e){e.activePracticeData&&setTimeout((function(){window.print()}),1e3)}},{key:"render",value:function(){return this.props.activePracticeData?r.a.createElement("html",{className:"PrintPatientForm"},r.a.createElement("meta",{"http-equiv":"Content-Type",content:"text/html; charset=utf-8"}),r.a.createElement("body",{style:{margin:"0 auto",marginTop:"20px"}},r.a.createElement("div",{style:{margin:"0px 10%"}},r.a.createElement("table",{style:{borderBottom:"1px solid #000",width:"100%"}},r.a.createElement("tr",null,r.a.createElement("td",{style:{width:"150px"}},r.a.createElement("img",{style:{width:"150px"},src:Bt(this.props.activePracticeData.logo)})),r.a.createElement("td",null,r.a.createElement("h2",{style:{margin:"5px"}},this.props.activePracticeData.name),r.a.createElement("p",{style:{margin:"5px",fontSize:"11px"}},this.props.activePracticeData.address,r.a.createElement("br",null),this.props.activePracticeData.locality,r.a.createElement("br",null),this.props.activePracticeData.city,", ",this.props.activePracticeData.state,"-",this.props.activePracticeData.pincode),r.a.createElement("div",{style:{margin:"5px",fontSize:"11px"}},"Email : ",r.a.createElement("strong",null,this.props.activePracticeData.email),r.a.createElement("br",null),"Phone : ",r.a.createElement("strong",null,this.props.activePracticeData.contact),r.a.createElement("br",null),"Website : ",r.a.createElement("strong",null,this.props.activePracticeData.website),r.a.createElement("br",null))))),r.a.createElement("h3",{className:"centeralign"},"Patient Information "),r.a.createElement("table",null,r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"2"},r.a.createElement("h4",null,"Personal Details"))),r.a.createElement("tr",null,r.a.createElement("td",{className:"rightalign",style:{width:"30%"}},"Name"),r.a.createElement("td",null,r.a.createElement("div",{className:"textfield"}))),r.a.createElement("tr",null,r.a.createElement("td",{className:"rightalign"},"Patient ID"),r.a.createElement("td",null,r.a.createElement("div",{className:"textfield"}),r.a.createElement("span",{className:"leftrightmargin_10"},"(official use)"))),r.a.createElement("tr",{id:"nationalid",style:{display:"none"}},r.a.createElement("td",{className:"rightalign"},r.a.createElement("span",{id:"nationalidlabel"})),r.a.createElement("td",null,r.a.createElement("div",{className:"textfield"}))),r.a.createElement("tr",null,r.a.createElement("td",{className:"rightalign"},"Mobile Number"),r.a.createElement("td",null,r.a.createElement("div",{className:"textfield"}))),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"2"},r.a.createElement("h4",null,"Contact Details"))),r.a.createElement("tr",null,r.a.createElement("td",{className:"rightalign"},"Email"),r.a.createElement("td",null,r.a.createElement("div",{className:"textfield"}))),r.a.createElement("tr",null,r.a.createElement("td",{className:"rightalign"},"Land-line Number(s)"),r.a.createElement("td",null,r.a.createElement("div",{className:"textfield"}))),r.a.createElement("tr",null,r.a.createElement("td",{className:"rightalign"},"Address"),r.a.createElement("td",null,r.a.createElement("div",{className:"textarea"}))),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"2"},r.a.createElement("h4",null,"General Details"))),r.a.createElement("tr",null,r.a.createElement("td",{className:"rightalign"},"Gender"),r.a.createElement("td",null,r.a.createElement("div",{className:"radio"}),r.a.createElement("label",null,"Male "),r.a.createElement("div",{className:"radio"}),r.a.createElement("label",null,"Female "))),r.a.createElement("tr",null,r.a.createElement("td",{className:"rightalign"},"Blood Group"),r.a.createElement("td",null,r.a.createElement("div",{className:"textfield"}))),r.a.createElement("tr",null,r.a.createElement("td",{className:"rightalign"},"Date of Birth / Age"),r.a.createElement("td",null,r.a.createElement("div",{className:"textfield"})))),r.a.createElement("p",null,"I hereby declare that the information provided above is true and correct to the best of my knowledge. I give consent to the performance of medical / surgical / anesthesia / diagnostic procedure / treatment to be performed upon myself at B.K. Arogyam & Research Pvt Ltd. I will pay in full any cost of treatment or insurance co-payments according to the office's financial policy. "),r.a.createElement("div",{className:"date"},"Date"),r.a.createElement("div",{className:"signature"},"Patient's Signature")))):null}}]),t}(r.a.Component);a(1695);function ff(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function gf(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ff(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ff(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}ma.a.TextArea;var yf=vr.a.Item,Ef=(hl.Radio.Group,hl.Checkbox.Group,cr.a.Meta),bf=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).loadPracticeTiming=function(){var e=Object(f.a)(a);Ut(Kt(ge,[a.props.active_practiceId]),(function(t){var a={};t.length&&(a=t[0]);var n={};rn.forEach((function(e){n[e]={},a.visting_hour_same_week?(n[e].startTime=Or()(a.first_start_time,"HH:mm:ss"),n[e].endTime=Or()(a.second_end_time,"HH:mm:ss"),a.is_two_sessions?(n[e].lunch=!0,n[e].lunchStartTime=Or()(a.first_end_time,"HH:mm:ss"),n[e].lunchEndTime=Or()(a.second_start_time,"HH:mm:ss")):n[e].lunch=!1):a[e]?(n[e].startTime=Or()(a["first_start_time_".concat(e)],"HH:mm:ss"),n[e].endTime=Or()(a["second_end_time_".concat(e)],"HH:mm:ss"),a["is_two_sessions_".concat(e)]?(n[e].lunch=!0,n[e].lunchStartTime=Or()(a["first_end_time_".concat(e)],"HH:mm:ss"),n[e].lunchEndTime=Or()(a["second_start_time_".concat(e)],"HH:mm:ss")):n[e].lunch=!1):n[e]=null})),e.setState({calendarTimings:gf({},n)},(function(){e.findOutsidePracticeTiming()}))}),(function(){e.setState({calendarTimings:{}})}))},a.loadDoctorsTiming=function(){var e=Object(f.a)(a);e.state.timeToCheckBlock.doctor&&Ut(Kt(Z,[a.props.active_practiceId]),(function(t){var a={};t.length&&(a=t[0]);var n={};rn.forEach((function(e){n[e]={},a.visting_hour_same_week?(n[e].startTime=Or()(a.first_start_time,"HH:mm:ss"),n[e].endTime=Or()(a.second_end_time,"HH:mm:ss"),a.is_two_sessions?(n[e].lunch=!0,n[e].lunchStartTime=Or()(a.first_end_time,"HH:mm:ss"),n[e].lunchEndTime=Or()(a.second_start_time,"HH:mm:ss")):n[e].lunch=!1):a[e]?(n[e].startTime=Or()(a["first_start_time_".concat(e)],"HH:mm:ss"),n[e].endTime=Or()(a["second_end_time_".concat(e)],"HH:mm:ss"),a["is_two_sessions_".concat(e)]?(n[e].lunch=!0,n[e].lunchStartTime=Or()(a["first_end_time_".concat(e)],"HH:mm:ss"),n[e].lunchEndTime=Or()(a["second_start_time_".concat(e)],"HH:mm:ss")):n[e].lunch=!1):n[e]=null})),e.setState({doctorTimings:gf({},n)},(function(){e.findOutsideDoctorTiming()}))}),(function(){}),{doctor:e.state.timeToCheckBlock.doctor})},a.setBlockedTiming=function(e,t){console.log("Onchange",t);var n=Object(f.a)(a);e&&a.setState((function(a){return{timeToCheckBlock:gf({},a.timeToCheckBlock,Object(u.a)({},e,t))}}),(function(){n.loadAppointmentList(),n.findBlockedTiming(),n.findOutsidePracticeTiming(),"doctor"==e?n.loadDoctorsTiming():n.findOutsideDoctorTiming()}))},a.findBlockedTiming=function(){var e=Object(f.a)(a);Ut(De,(function(t){t.forEach((function(t){null==t.doctor?e.setState({practiceBlock:!0}):t.doctor==e.props.timeToCheckBlock.doctor&&e.setState({doctorBlock:!0})}))}),(function(){}),{practice:a.props.active_practiceId,cal_fdate:Or()(e.state.timeToCheckBlock.schedule_at).format(),cal_tdate:Or()(e.state.timeToCheckBlock.schedule_at).add(e.state.timeToCheckBlock.slot,"minutes").format()})},a.findOutsidePracticeTiming=function(){var e=Object(f.a)(a),t=!0;if(e.state.timeToCheckBlock.schedule_at&&e.state.timeToCheckBlock.slot){var n=e.state.timeToCheckBlock.schedule_at,r=e.state.calendarTimings,i=Or()(n).isValid()?Or()(n).format("dddd").toLowerCase():null;if(r&&i&&r[i]){var l=r[i];l.lunch?(Or()(n,"HH:mm:ss").format("HH:mm:ss")<=l.startTime.format("HH:mm:ss")||Or()(n,"HH:mm:ss").format("HH:mm:ss")>l.endTime.format("HH:mm:ss")||Or()(n,"HH:mm:ss").format("HH:mm:ss")<l.lunchEndTime.format("HH:mm:ss")&&Or()(n,"HH:mm:ss").format("HH:mm:ss")>=l.lunchStartTime.format("HH:mm:ss"))&&(t=!1):(Or()(n,"HH:mm:ss").format("HH:mm:ss")<=l.startTime.format("HH:mm:ss")||Or()(n,"HH:mm:ss").format("HH:mm:ss")>l.endTime.format("HH:mm:ss"))&&(t=!1)}else i&&!r[i]&&(t=!1)}e.setState({practiceOutsideAvailableTiming:!t})},a.findOutsideDoctorTiming=function(){var e=Object(f.a)(a),t=!0;if(e.state.timeToCheckBlock.schedule_at&&e.state.timeToCheckBlock.slot){var n=e.state.timeToCheckBlock.schedule_at,r=e.state.doctorTimings,i=Or()(n).isValid()?Or()(n).format("dddd").toLowerCase():null;if(r&&i&&r[i]){var l=r[i];l.lunch?(Or()(n,"HH:mm:ss").format("HH:mm:ss")<=l.startTime.format("HH:mm:ss")||Or()(n,"HH:mm:ss").format("HH:mm:ss")>l.endTime.format("HH:mm:ss")||Or()(n,"HH:mm:ss").format("HH:mm:ss")<l.lunchEndTime.format("HH:mm:ss")&&Or()(n,"HH:mm:ss").format("HH:mm:ss")>=l.lunchStartTime.format("HH:mm:ss"))&&(t=!1):(Or()(n,"HH:mm:ss").format("HH:mm:ss")<=l.startTime.format("HH:mm:ss")||Or()(n,"HH:mm:ss").format("HH:mm:ss")>l.endTime.format("HH:mm:ss"))&&(t=!1)}else i&&r&&!r[i]&&(t=!1)}e.setState({doctorOutsideAvailableTiming:!t})},a.handleSubmit=function(e){var t=Object(f.a)(a);e.preventDefault(),a.props.form.validateFields((function(e,n){if(!e){t.setState({saving:!0});var r=gf({},n);r.patient={user:{}},a.state.patientDetails?r.patient=a.state.patientDetails:(r.patient.user.first_name=r.patient_name,r.patient.user.email=r.patient_email,r.patient.user.mobile=r.patient_mobile,r.patient_email=void 0,r.patient_name=void 0,r.patient_mobile=void 0),r.practice=t.props.active_practiceId;var i=function(e){t.setState({saving:!1}),t.props.history&&t.props.history.goBack(),t.props.loadData&&t.props.loadData(),e&&Qt(O,"Appointment Created Successfully")},l=function(){t.setState({saving:!1})};a.state.appointment?Ht(Kt(Ee,[a.state.appointment.id]),r,i,l):qt(ye,r,i,l)}}))},a.handlePatientSelect=function(e){if(e){var t=Object(f.a)(a);Ut(Kt(ce,[e]),(function(e){t.setState({patientDetails:e})}),(function(){}))}},a.handleClick=function(e){a.setState({patientDetails:null})},a.state={redirect:!1,practice_doctors:[],appointmentCategories:null,procedure_category:null,treatmentNotes:null,practice_staff:[],appointment:null,loading:!1,patientListData:[],appointmentDetail:null,saving:!1,doctorBlock:!1,doctorOutsideAvailableTiming:!1,practiceBlock:!1,practiceOutsideAvailableTiming:!1,timeToCheckBlock:{schedule_at:Or()(),slot:10},procedureObjectsById:{}},a.changeRedirect=a.changeRedirect.bind(Object(f.a)(a)),a.loadDoctors=a.loadDoctors.bind(Object(f.a)(a)),a.loadProcedureCategory=a.loadProcedureCategory.bind(Object(f.a)(a)),a.loadTreatmentNotes=a.loadTreatmentNotes.bind(Object(f.a)(a)),a.searchPatient=a.searchPatient.bind(Object(f.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(f.a)(a)),a.loadAppointment=a.loadAppointment.bind(Object(f.a)(a)),a.loadAppointmentList=a.loadAppointmentList.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this;if(this.loadDoctors(),this.loadProcedureCategory(),this.loadTreatmentNotes(),this.loadAppointmentCategories(),this.loadPracticeTiming(),this.loadAppointmentList(),this.props.match.params.appointmentid)e.loadAppointment();else if(this.props.history&&this.props.history.location.search){var t=this.props.history.location.search.substr(1).split("&");t.length&&t.forEach((function(t){var a=t.split("=");a&&2==a.length&&"patient"==a[0]&&a[1]&&e.handlePatientSelect(a[1])}))}}},{key:"loadAppointment",value:function(){var e=this;this.setState({loading:!0});Ut(Kt(Ee,[this.props.match.params.appointmentid]),(function(t){e.setState({appointment:t,patientDetails:t.patient,timeToCheckBlock:t,loading:!1},(function(){e.findBlockedTiming(),e.findOutsideDoctorTiming(),e.loadDoctorsTiming(),e.loadAppointmentList()}))}),(function(){e.setState({loading:!1})}))}},{key:"loadDoctors",value:function(){var e=this;Ut(Kt(K,[this.props.active_practiceId]),(function(t){var a=[],n={};t.staff.forEach((function(t){"3"==t.role&&(a.push(t),e.props.user.id==t.user.id&&(n=t))})),e.setState((function(e){return{selectedDoctor:a.length&&!n.id?a[0].user.id:n.user.id,practice_doctors:a,timeToCheckBlock:gf({},e.timeToCheckBlock,{doctor:a.length&&!n.id?a[0].user.id:n.user.id})}}),(function(){e.findBlockedTiming(),e.loadDoctorsTiming()}))}),(function(){}))}},{key:"loadProcedureCategory",value:function(){var e=this;Ut(Kt(ae,[this.props.active_practiceId]),(function(t){var a={};t.forEach((function(e){a[e.id]=e})),e.setState({procedure_category:t,procedureObjectsById:gf({},a)})}),(function(){}),{pagination:!1})}},{key:"loadTreatmentNotes",value:function(){var e=this;Ut(Kt(le,[this.props.active_practiceId]),(function(t){e.setState({treatmentNotes:t})}),(function(){}))}},{key:"loadAppointmentCategories",value:function(){var e=this;Ut(Kt(oe,[this.props.active_practiceId]),(function(t){e.setState({appointmentCategories:t})}),(function(){}))}},{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"searchPatient",value:function(e){var t=this;this.setState({searchPatientString:e});e&&Ut(Kt(We,[e]),(function(a){t.setState((function(t){if(t.searchPatientString==e)return a.current>1?{patientListData:[].concat(Object(Oa.a)(t.patientListData),Object(Oa.a)(a.results))}:{patientListData:Object(Oa.a)(a.results)}}))}),(function(e){t.setState({searchPatientString:null})}))}},{key:"loadAppointmentList",value:function(){var e=this,t={start_time:Or()(this.state.timeToCheckBlock.schedule_at).format(),end_time:Or()(this.state.timeToCheckBlock.schedule_at).add(this.state.timeToCheckBlock.slot,"minutes").format(),doctor:this.state.timeToCheckBlock.doctor};Ut(Kt("appointment/?practice=%s",[this.props.active_practiceId]),(function(t){e.setState({appointmentList:t})}),(function(e){}),t)}},{key:"render",value:function(){var e=this,t=this,a=this.props.formLayout?this.props.formLayout:{labelCol:{span:6},wrapperCol:{span:14}},n=this.props.formLayout?this.props.formLayout:{wrapperCol:{offset:6,span:14}},i=this.props.form.getFieldDecorator,l=[];this.state.treatmentNotes&&this.state.treatmentNotes.forEach((function(e){l.push({label:e.name,value:e.id})}));var o=[];this.state.appointmentCategories&&this.state.appointmentCategories.forEach((function(e){o.push({label:e.name,value:e.id})}));var s=this.state.appointment?this.state.appointment.schedule_at:this.props.startTime;s||(s=new Or.a(new Date).format());return r.a.createElement(cr.a,null,r.a.createElement(pa.a,{spinning:this.state.saving},r.a.createElement(vr.a,{onSubmit:this.handleSubmit},this.props.title?r.a.createElement("h2",null,this.props.title):null,r.a.createElement(yf,Object.assign({key:"schedule_at",label:"Appointment Schedule"},a),i("schedule_at",{initialValue:s?Or()(s):null,rules:[{required:!0,message:Ft}]})(r.a.createElement(yr.a,{format:"YYYY/MM/DD HH:mm",showTime:!0,onChange:function(t){return e.setBlockedTiming("schedule_at",t)}})),this.state.practiceOutsideAvailableTiming?r.a.createElement(c.a,{message:"Selected time is outside available clinic time!!",type:"warning",showIcon:!0}):null,this.state.practiceBlock?r.a.createElement(c.a,{message:"Selected time is blocked in this clinic !!",type:"warning",showIcon:!0}):null),r.a.createElement(yf,Object.assign({key:"slot"},a,{label:"Time Slot"}),i("slot",{initialValue:this.state.appointment?this.state.appointment.slot:10,rules:[{required:!0,message:Ft}]})(r.a.createElement(Er.a,{min:1,onChange:function(t){return e.setBlockedTiming("slot",t)}})),r.a.createElement("span",{className:"ant-form-text"},"mins",r.a.createElement(rr.a,{style:{float:"right"}},r.a.createElement(ir.a,{span:24},this.state.appointmentList&&this.state.appointmentList.length>0?r.a.createElement("div",{span:5,style:{float:"right"}},r.a.createElement("ul",{style:{listStyle:"none",display:"inline-flex",paddingLeft:"15px",paddingRight:"10px"}},t.state.appointmentList.map((function(e){return r.a.createElement("li",{style:{border:"1px solid #bbb",marginLeft:"13px",padding:" 0.01em 14px"}},r.a.createElement("span",{style:{width:"calc(100% - 60px)"}},r.a.createElement("b",null,Or()(e.schedule_at).format("LT")),"\xa0",e.patient.user.first_name),"\xa0",r.a.createElement("b",null,"with")," \xa0",e.doctor_data.user.first_name)})))):null))),this.state.appointmentList&&this.state.appointmentList.length>0?r.a.createElement(r.a.Fragment,null,r.a.createElement(c.a,{message:"Selected time slot have assigned someone else !! please select another slot.",type:"warning",showIcon:!0})):null),t.state.patientDetails?r.a.createElement(yf,Object.assign({key:"id",value:this.state.patientDetails.id},n),r.a.createElement(cr.a,{bordered:!1,style:{background:"#ECECEC"}},r.a.createElement(Ef,{avatar:this.state.patientDetails.image?r.a.createElement(ba.a,{src:Bt(this.state.patientDetails.image)}):r.a.createElement(ba.a,{style:{backgroundColor:"#87d068"}},this.state.patientDetails.user.first_name?this.state.patientDetails.user.first_name.charAt(0):r.a.createElement(va.a,{type:"user"})),title:this.state.patientDetails.user.first_name,description:r.a.createElement("span",null,t.props.activePracticePermissions.PatientPhoneNumber?this.state.patientDetails.user.mobile:ka(this.state.patientDetails.user.mobile),r.a.createElement("br",null),r.a.createElement(da.a,{type:"primary",style:{float:"right"},onClick:this.handleClick},"Add New Patient"))}))):r.a.createElement("div",null,r.a.createElement(yf,Object.assign({key:"patient_name",label:"Patient Name"},a),i("patient_name",{initialValue:this.state.appointment?this.state.appointment.patient.user.first_name:null,rules:[{required:!0,message:Ft}]})(r.a.createElement(ya.a,{placeholder:"Patient Name",showSearch:!0,onSearch:this.searchPatient,defaultActiveFirstOption:!1,showArrow:!1,filterOption:!1,onSelect:this.handlePatientSelect},this.state.patientListData.map((function(e){return r.a.createElement(ya.a.Option,{value:e.id.toString()},r.a.createElement(Ea.a.Item,{style:{padding:0}},r.a.createElement(Ea.a.Item.Meta,{avatar:e.image?r.a.createElement(ba.a,{src:Bt(e.image)}):r.a.createElement(ba.a,{style:{backgroundColor:"#87d068"}},e.user.first_name?e.user.first_name.charAt(0):r.a.createElement(va.a,{type:"user"})),title:e.user.first_name+" (ID:"+(e.custom_id?e.custom_id:e.user.id)+")",description:t.props.activePracticePermissions.PatientPhoneNumber?e.user.mobile:ka(e.user.mobile)})))}))))),r.a.createElement(yf,Object.assign({key:"patient_mobile",label:"Mobile Number"},a),i("patient_mobile",{initialValue:this.state.appointment?this.state.appointment.patient.user.mobile:null,rules:[{required:!0,message:Ft}]})(r.a.createElement(ma.a,{placeholder:"Mobile Number"}))),r.a.createElement(yf,Object.assign({key:"patient_email",label:"Email Address"},a),i("patient_email",{initialValue:this.state.appointment?this.state.appointment.patient.user.email:null,rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:Ft}]})(r.a.createElement(ma.a,{placeholder:"Email Address"})))),r.a.createElement(yf,Object.assign({key:"doctor"},a,{label:"Doctor"}),i("doctor",{initialValue:this.state.appointment?this.state.appointment.doctor:this.state.selectedDoctor},{rules:[{required:!0,message:Ft}]})(r.a.createElement(ga.a,{placeholder:"Doctor",onChange:function(t){return e.setBlockedTiming("doctor",t)}},this.state.practice_doctors.map((function(e){return r.a.createElement(ga.a.Option,{value:e.id},e.user.first_name+"("+e.user.email+")")})))),this.state.doctorBlock?r.a.createElement(c.a,{message:"Selected time is blocked for selected doctor in this clinic!!",type:"warning",showIcon:!0}):null,this.state.doctorOutsideAvailableTiming?r.a.createElement(c.a,{message:"Selected time is out of doctor's visit time in this clinic!!",type:"warning",showIcon:!0}):null,this.state.appointmentList&&this.state.appointmentList.length>0?r.a.createElement(r.a.Fragment,null,r.a.createElement(c.a,{message:"Selected time doctor's busy on other patients in  this clinic!!",type:"warning",showIcon:!0})):null),r.a.createElement(yf,Object.assign({key:"category"},a,{label:"Category"}),i("category",{initialValue:this.state.appointment?this.state.appointment.category:null},{rules:[{required:!0,message:Ft}]})(r.a.createElement(ga.a,{placeholder:"Category"},o.map((function(e){return r.a.createElement(ga.a.Option,{value:e.value},e.label)}))))),this.state.appointment?r.a.createElement(yf,Object.assign({key:"status"},a,{label:"Status"}),i("status",{initialValue:this.state.appointment.status})(r.a.createElement(ga.a,{placeholder:"Status"},un.map((function(e){return r.a.createElement(ga.a.Option,{value:e.value},e.label)}))))):null,r.a.createElement(yf,Object.assign({key:"notes"},a,{label:"Notes"}),i("notes",{initialValue:this.state.appointment?this.state.appointment.notes:null},{rules:[{required:!0,message:Ft}]})(r.a.createElement(ma.a,{placeholder:"Notes"}))),r.a.createElement(yf,a,r.a.createElement(da.a,{loading:t.state.saving,type:"primary",htmlType:"submit",style:{margin:5}},"Submit"),t.props.history?r.a.createElement(da.a,{style:{margin:5},onClick:function(){return t.props.history.goBack()}},"Cancel"):null))))}}]),t}(r.a.Component),vf=function(e){function t(){return Object(d.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=[{key:"practice",value:this.props.active_practiceId}],a=vr.a.create()(bf);return r.a.createElement(rr.a,null,r.a.createElement(y.b,{exact:!0,path:"/calendar/:appointmentid/edit-appointment",render:function(n){return e.props.match.params.appointmentid?r.a.createElement(a,Object.assign({},n,e.props,{defaultValues:t,title:"Edit Appointment",changeRedirect:e.changeRedirect})):r.a.createElement(y.a,{to:"/patients/appointments/"})}}),r.a.createElement(y.b,{exact:!0,path:"/calendar/create-appointment",render:function(n){return r.a.createElement(a,Object.assign({},e.props,{defaultValues:t,changeRedirect:e.changeRedirect},n,{title:"ADD Appointment "}))}}))}}]),t}(r.a.Component);a(1697);function _f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Of(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_f(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_f(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Df=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).changeParamsForBlockedAppointments=function(e,t){var n=Object(f.a)(a);a.setState((function(a){return{blockedAppointmentParams:Of({},a.blockedAppointmentParams,Object(u.a)({},e,t))}}),(function(){n.retrieveBlockingAppointments()}))},a.retrieveBlockingAppointments=function(){var e=Object(f.a)(a);e.setState({loading:!0});a.state.blockedAppointmentParams.block_from&&a.state.blockedAppointmentParams.block_to&&Ut(Kt(be,[a.props.active_practiceId]),(function(t){e.setState((function(e){return{blockingAppointments:t,loading:!1}}))}),(function(){e.setState({loading:!1})}),{start:Or()(e.state.blockedAppointmentParams.block_from).format("YYYY-MM-DD"),end:Or()(e.state.blockedAppointmentParams.block_to).format("YYYY-MM-DD"),doctor:e.state.blockedAppointmentParams.doctor})},a.handleSubmit=function(e){Object(f.a)(a);e.preventDefault();var t={};a.props.form.validateFields((function(e,n){e||(t=Of({},n,{practice:a.props.active_practiceId}))}));qt(De,t,(function(e){}),(function(){}))},a.state={practiceDoctors:[],blockedAppointmentParams:{block_from:Or()(),block_to:Or()()}},mi(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this,a=this.props.form.getFieldDecorator,n={labelCol:{span:6},wrapperCol:{span:4}};return r.a.createElement(cr.a,{title:"Block Calendar"},r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:18},r.a.createElement(vr.a,{onSubmit:this.handleSubmit},r.a.createElement(vr.a.Item,Object.assign({label:"Block From"},n),a("block_from",{initialValue:Or()()})(r.a.createElement(yr.a,{showTime:!0,onChange:function(t){return e.changeParamsForBlockedAppointments("block_from",t)}}))),r.a.createElement(vr.a.Item,Object.assign({label:"Block To"},n),a("block_to",{initialValue:Or()()})(r.a.createElement(yr.a,{showTime:!0,onChange:function(t){return e.changeParamsForBlockedAppointments("block_to",t)}}))),r.a.createElement(vr.a.Item,Object.assign({label:"Event Name"},n),a("event",{})(r.a.createElement(ma.a,{placeholder:"Event Name"}))),r.a.createElement(vr.a.Item,Object.assign({label:"Doctor"},n),a("doctor",{initialValue:6})(r.a.createElement(ga.a,{placeholder:"Docto List",onChange:function(t){return e.changeParamsForBlockedAppointments("doctor",t)}},this.state.practiceDoctors.map((function(e){return r.a.createElement(ga.a.Option,{value:e.id},e.user.first_name)}))))),r.a.createElement(vr.a.Item,null,r.a.createElement(da.a,{style:{margin:5},type:"primary",htmlType:"submit"},"Submit"),t.props.history?r.a.createElement(da.a,{style:{margin:5},onClick:function(){return t.props.history.goBack()}},"Cancel"):null))),r.a.createElement(ir.a,{span:6},r.a.createElement(Ea.a,{size:"small",dataSource:this.state.blockingAppointments,renderItem:function(a){return a.status==tn?r.a.createElement("div",null):r.a.createElement(Ea.a.Item,{color:"transparent",style:{padding:0}},r.a.createElement("div",{style:{border:"1px solid #ddd",borderRadius:"5px",textDecoration:a.status==tn?"line-through":"inherit",backgroundColor:a.status==tn?"#aaa":"#eee",width:"100%",marginTop:"2px",borderLeft:"5px solid"+(a.doctor&&t.state.practice_doctors&&t.state.practice_doctors[a.doctor]?t.props.doctors_object[a.doctor].calendar_colour:"transparent")}},r.a.createElement(Pf,Object.assign({},a,{changeAppointmentStatus:e.changeAppointmentStatus},e.props))))}}))))}}]),t}(r.a.Component),kf=vr.a.create()(Df);function Pf(e){return r.a.createElement("div",{style:{width:"100%"}},r.a.createElement("p",{style:{marginBottom:0}},r.a.createElement(sr.a,{type:"vertical"}),r.a.createElement(bo.a,{placement:"right",content:r.a.createElement(vo,Object.assign({appointmentId:e.id,key:e.id},e))},r.a.createElement("span",{style:{width:"calc(100% - 60px)"}},r.a.createElement("b",null,Or()(e.schedule_at).format("LLL")),"\xa0",e.patient.user.first_name),r.a.createElement("p",{style:{color:e.doctor_data?e.doctor_data.calendar_colour:null}},r.a.createElement(sr.a,{type:"vertical"}),r.a.createElement("span",null,e.doctor_data?e.doctor_data.user.first_name:null)))))}function Sf(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var xf=ma.a.TextArea,jf=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).onClose=function(){Object(f.a)(a).props.close()},a.handleSubmit=function(e){e.preventDefault();var t=Object(f.a)(a);a.props.form.validateFieldsAndScroll((function(e,a){if(!e){var n=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Sf(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Sf(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},a);qt(wt,n,(function(e){Qt(O,"Save Your Suggestions"),t.props.close()}),(function(){}))}}))},a.state={},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement("div",null,r.a.createElement(nr.a,{title:"Your Suggestion",width:720,onClose:this.onClose,visible:this.props.visible},r.a.createElement(vr.a,{layout:"vertical",onSubmit:this.handleSubmit},r.a.createElement(rr.a,{gutter:16},r.a.createElement(ir.a,{span:12},r.a.createElement(vr.a.Item,{label:"Name"},e("name",{rules:[{required:!0,message:"Please enter  name"}]})(r.a.createElement(ma.a,{placeholder:"Please enter user name"})))),r.a.createElement(ir.a,{span:12},r.a.createElement(vr.a.Item,{label:"Email"},e("email",{rules:[{required:!0,message:"Please enter Email"}]})(r.a.createElement(ma.a,{style:{width:"100%"},placeholder:"Please enter Email"}))))),r.a.createElement(rr.a,{gutter:16},r.a.createElement(ir.a,{span:12},r.a.createElement(vr.a.Item,{label:"Mobile"},e("mobile")(r.a.createElement(ma.a,{placeholder:"Please enter Mobile"})))),r.a.createElement(ir.a,{span:12},r.a.createElement(vr.a.Item,{label:"Subject"},e("subject")(r.a.createElement(ma.a,{style:{width:"100%"},placeholder:"Please enter Email"}))))),r.a.createElement(rr.a,{gutter:16},r.a.createElement(ir.a,{span:24},r.a.createElement(vr.a.Item,{label:"Description"},e("description")(r.a.createElement(xf,{placeholder:"Please enter description",autosize:{minRows:4,maxRows:6}}))))),r.a.createElement(sr.a,null),r.a.createElement("div",{style:{textAlign:"-webkit-center"}},r.a.createElement(da.a,{onClick:this.onClose,style:{marginRight:8}},"Cancel"),r.a.createElement(da.a,{htmlType:"submit",onSubmit:this.handleSubmit,type:"primary"},"Submit")))))}}]),t}(r.a.Component),If=vr.a.create()(jf),Cf=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).redirectToHome=function(){window.location.replace("/")},a.state={hasError:!1},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidCatch",value:function(e,t){!function(e,t){var a={text:e.toString(),attachments:[{color:"#36a64f",author_name:window.location.hostname,author_link:"http://flickr.com/bobby/",author_icon:window.location.hostname+"/favicon.ico",title:"BK ERP Admin Application Crash Error",text:t.componentStack,fields:[{title:"Priority",value:"High",short:!1},{title:"Domain",value:window.location.hostname,short:!1},{title:"Path",value:window.location.pathname,short:!1},{title:"User",value:na(),short:!1}],ts:(new Or.a).format("X")}]};(Y.prodDomain&&Y.crashHandling.slack.sendOnProduction&&Y.prodDomain.indexOf(window.location.hostname)>-1||Y.crashHandling.slack.sendOnDevelopment)&&zt(Y.crashHandling.slack.webHookUrl,a,(function(){console.log("The above error has been notified to devs.")}),(function(){console.log("The above error notifications failed")}),{"Content-type":"application/x-www-form-urlencoded"})}(e,t)}},{key:"render",value:function(){return this.state.hasError?r.a.createElement(Si.a,{status:"500",title:"500",subTitle:"Sorry, something went wrong.",extra:r.a.createElement(da.a,{type:"primary",onClick:this.redirectToHome},"Back Home")}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),t}(r.a.Component),wf=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).loadMeetingDetails=function(){var e=Object(f.a)(a);e.setState({loading:!0});Ut(Kt(Lt,[e.props.meetingId]),(function(t){e.setState({loading:!1,meeting:t})}),(function(){e.setState({loading:!1})}))},a.openWindowLink=function(e){window.open(e)},a.state={loading:!1,meeting:null},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadMeetingDetails()}},{key:"copyToClipBoard",value:function(e){navigator.clipboard.writeText(e),Qt(O,"Meeting URL & Password copied to clipboard")}},{key:"render",value:function(){var e=this;if(!this.state.meeting)return r.a.createElement(Si.a,{status:"warning",title:"Meeting Not Found"});var t=this,a="https://us04web.zoom.us/wc/join/"+t.state.meeting.meeting_id+"?"+t.state.meeting.join_url.split("?")[1];return r.a.createElement("div",{style:{width:"300px",minHeight:"200px",overflowY:"scroll",overflowX:"hidden"}},r.a.createElement(pa.a,{spinning:this.state.loading},r.a.createElement("div",null,r.a.createElement("h4",null,this.state.meeting.name),r.a.createElement(or.a,{title:"Are you sure to start this meeting?",onConfirm:function(){return t.openWindowLink(t.state.meeting.start_url)},okText:"Yes",cancelText:"No"},r.a.createElement("a",null,"Admin Meeting Start Link")),r.a.createElement(sr.a,{style:{margin:0}},"Invite Link"),r.a.createElement("p",null,a,r.a.createElement("br",null),"Password: ",this.state.meeting.password),r.a.createElement(da.a,{size:"small",onClick:function(){return e.copyToClipBoard(a+"\nPassword: "+e.state.meeting.password)},block:!0,shape:"round"},"Copy Invite Link"),r.a.createElement("p",null,this.state.meeting.purpose))))}}]),t}(r.a.Component),Mf=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={loading:!1},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentWillReceiveProps",value:function(){this.loadTodayMeeting()}},{key:"loadTodayMeeting",value:function(){var e=this;this.setState({loading:!0});var t={start:Or()().startOf("day").format(),end:Or()().endOf("day").format()};e.props.selectedZoomUser&&"ALL"!=e.props.selectedZoomUser&&(t.zoom_user=e.props.selectedZoomUser),Ut(Rt,(function(t){e.setState({filterMeetingList:t,loading:!1})}),(function(){this.setState({loading:!1})}),t)}},{key:"render",value:function(){var e=this.state.filterMeetingList;return console.log("===",e),r.a.createElement("div",null,r.a.createElement(sr.a,null,r.a.createElement("a",{type:"primary"},r.a.createElement(va.a,{type:"left"}))," Meeting's Schedule ",r.a.createElement("a",{type:"primary"},r.a.createElement(va.a,{type:"right"}))),r.a.createElement(pa.a,{spinning:this.props.loading},r.a.createElement(Ea.a,{dataSource:e,bordered:!0,renderItem:function(e){return r.a.createElement(Ea.a.Item,null,r.a.createElement(Af,e))}})))}}]),t}(r.a.Component);function Af(e){return r.a.createElement("div",{style:{width:"100%"}},r.a.createElement("p",{style:{marginBottom:0}},r.a.createElement(bo.a,{placement:"right",content:r.a.createElement(wf,{meetingId:e.id,key:e.id})},r.a.createElement("span",{style:{width:"calc(100% - 60px)"}},r.a.createElement("b",null,Or()(e.start).format("LT")),"\xa0",e.name))))}var Tf=0,Rf=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).loadPatient=function(e){var t=Object(f.a)(a);e&&Ut(Kt(We,[e]),(function(e){e.results.length>0&&t.setState({patientListData:e.results})}),(function(){}))},a.handleSubmit=function(e){var t=Object(f.a)(a);t.setState({loading:!0}),e.preventDefault(),a.props.form.validateFields((function(e,a){if(!e){var n=a;if(a.doctors){a.doctors.length;var r=a.doctors.values(),i=[],l=!0,o=!1,s=void 0;try{for(var c,u=r[Symbol.iterator]();!(l=(c=u.next()).done);l=!0){var d=c.value;i.push({doctor:d})}}catch(e){o=!0,s=e}finally{try{l||null==u.return||u.return()}finally{if(o)throw s}}n.doctors=i}if(a.patients){a.patients.length;var p=[],m=a.patients.values(),h=!0,f=!1,g=void 0;try{for(var y,E=m[Symbol.iterator]();!(h=(y=E.next()).done);h=!0){var b=y.value;p.push({patient:b})}}catch(e){f=!0,g=e}finally{try{h||null==E.return||E.return()}finally{if(f)throw g}}n.patients=p}a.other_user&&a.other_user.length;qt(Tt,n,(function(e){t.setState({loading:!1}),t.props.history.push("/meeting-booking"),t.props.loadData()}),(function(){t.setState({loading:!1})}))}}))},a.addNewUser=function(){Object(f.a)(a);var e=a.props.form,t=e.getFieldValue("keys").concat(Tf++);e.setFieldsValue({keys:t})},a.removeNewOptionField=function(e){var t=a.props.form,n=t.getFieldValue("keys");t.setFieldsValue({keys:n.filter((function(t){return t!==e}))})},a.loadMeetingList=function(e,t,n){var r=Object(f.a)(a);r.setState({loading:!0});var i={start:e.format(),end:t.format(),zoom_user:n};Ut(Rt,(function(e){r.setState({filterMeetingList:e,loading:!1,meetingNotAllowed:!!e.length})}),(function(){r.setState({meetingNotAllowed:!0,loading:!1})}),i)},a.checkMeetingAvailabilty=function(e,t){var n,r=Object(f.a)(a);a.setState((n={},Object(u.a)(n,e,t),Object(u.a)(n,"loading",!0),n),(function(){r.loadMeetingList(r.state.startSchedule,Or()(r.state.startSchedule).add(r.state.duration,"minute"),r.state.zoomUser)}))},a.state={loading:!1,patientListData:[],no_of_participant:1,practiceDoctors:[],zoom_user:[],add_new_user:!1,meetingNotAllowed:!0,duration:30,startSchedule:a.props?Or()(a.props.startTime):Or()(),filterMeetingList:[]},a.loadPatient=a.loadPatient.bind(Object(f.a)(a)),a.loadZoomUser=a.loadZoomUser.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentWillMount",value:function(){this.loadPatient(),mi(this),this.loadZoomUser(),this.loadMeetingList(this.state.startSchedule,Or()(this.state.startSchedule).add(this.state.duration,"minute"))}},{key:"loadZoomUser",value:function(){var e=this;Ut(At,(function(t){e.setState({zoom_user:t})}),(function(){}))}},{key:"onChangeParticipant",value:function(e){this.setState({no_of_participant:e})}},{key:"render",value:function(){var e=this,t=this,a=this.props.form,n=a.getFieldDecorator,i=a.getFieldValue,l=this.state.filterMeetingList,o={labelCol:{span:6},wrapperCol:{span:18}};n("keys",{initialValue:[]});var s=i("keys").map((function(e,a){return r.a.createElement("div",null,r.a.createElement(ir.a,{span:6,offset:4},r.a.createElement(vr.a.Item,{label:"First Name",key:e},n("others[".concat(e,"][first_name]"),{initialValue:""})(r.a.createElement(ma.a,{placeholder:"First Name"})))),r.a.createElement(ir.a,{span:4},r.a.createElement(vr.a.Item,{label:"Last Name"},n("others[".concat(e,"][last_name]"),{initialValue:""})(r.a.createElement(ma.a,{placeholder:"Last Name"})))),r.a.createElement(ir.a,{span:4},r.a.createElement(vr.a.Item,{label:"Email Id"},n("others[".concat(e,"][email]"),{initialValue:""})(r.a.createElement(ma.a,{placeholder:"Email Id"})))),r.a.createElement(ir.a,{span:4},r.a.createElement(vr.a.Item,{label:"phone"},n("others[".concat(e,"][phone]"),{initialValue:""})(r.a.createElement(ma.a,{placeholder:"Phone Number"})))),r.a.createElement(ir.a,{span:2},r.a.createElement(vr.a.Item,{label:" ",colon:!1},r.a.createElement(da.a,{shape:"circle",onClick:function(){return t.removeNewOptionField(e)}},r.a.createElement(va.a,{className:"dynamic-delete-button",type:"minus-circle-o"})),r.a.createElement("br",null))))}));return r.a.createElement(cr.a,{title:"Add Booking"},r.a.createElement(rr.a,{gutter:16},r.a.createElement(ir.a,{span:14},r.a.createElement(vr.a,{onSubmit:this.handleSubmit},r.a.createElement(vr.a.Item,Object.assign({label:"Purpose"},o),n("name",{initialValue:""})(r.a.createElement(ma.a,{placeholder:"Purpose"}))),r.a.createElement(vr.a.Item,Object.assign({label:"Agenda"},o),n("agenda",{initialValue:""})(r.a.createElement(ma.a.TextArea,{placeholder:"Agenda",rows:3}))),r.a.createElement(vr.a.Item,Object.assign({label:"Patients"},o,{key:"patient"}),n("patients",{initialValue:[]})(r.a.createElement(ga.a,{mode:"multiple",placeholder:"Select Patient",style:{width:"100%"},showSearch:!0,onSearch:this.loadPatient,filterOption:!1},this.state.patientListData.map((function(e){return r.a.createElement(ga.a.Option,{value:e.id},e.user.first_name," (",e.custom_id,")")}))))),r.a.createElement(vr.a.Item,Object.assign({label:"Doctors"},o,{key:"doctors"}),n("doctors",{initialValue:[]})(r.a.createElement(ga.a,{placeholder:"Select Doctors",style:{width:"100%"},mode:"multiple"},this.state.practiceDoctors.map((function(e){return r.a.createElement(ga.a.Option,{key:e.id},e.user.first_name)}))))),r.a.createElement(vr.a.Item,Object.assign({label:"Meeting User"},o,{key:"zoom_user"}),n("zoom_user",{initialValue:[],rules:[{required:!0,message:Ft}]})(r.a.createElement(ga.a,{placeholder:"Select Zoom User",style:{width:"100%"},onChange:function(e){return t.checkMeetingAvailabilty("zoomUser",e)}},this.state.zoom_user.map((function(e){return r.a.createElement(ga.a.Option,{key:e.id},e.username)}))))),r.a.createElement(rr.a,{gutter:16},s),r.a.createElement(vr.a.Item,{wrapperCol:{xs:{span:24,offset:0},sm:{span:18,offset:6}}},r.a.createElement("a",{onClick:function(){return e.addNewUser()}}," ",r.a.createElement(va.a,{type:"plus"})," Add New User")),r.a.createElement(vr.a.Item,Object.assign({label:"Booking From"},o),n("start",{initialValue:t.state.startSchedule&&Or()(t.state.startSchedule).isValid()?Or()(t.state.startSchedule):t.props.startTime&&Or()(t.props.startTime).isValid()?Or()(t.props.startTime):null})(r.a.createElement(yr.a,{format:"YYYY/MM/DD HH:mm",showTime:!0,onChange:function(e){return t.checkMeetingAvailabilty("startSchedule",e)}})),this.state.filterMeetingList.length>0?r.a.createElement(c.a,{message:"Selected time slot Booked!!",type:"warning",showIcon:!0}):null),r.a.createElement(vr.a.Item,Object.assign({label:"Duration"},o),n("duration",{initialValue:this.state.duration})(r.a.createElement(Er.a,{onChange:function(e){return t.checkMeetingAvailabilty("duration",e)}})),r.a.createElement("span",{className:"ant-form-text"},"Minutes")),r.a.createElement(vr.a.Item,o,r.a.createElement(da.a,{type:"primary",htmlType:"submit",style:{margin:5},disabled:this.state.meetingNotAllowed,loading:this.state.loading},"Submit"),t.props.history?r.a.createElement(da.a,{style:{margin:5},onClick:function(){return t.props.history.goBack()}},"Cancel"):null))),r.a.createElement(ir.a,{span:6,style:{float:"Right"}},r.a.createElement("div",null,r.a.createElement(pa.a,{spinning:this.props.loading},r.a.createElement(Ea.a,{dataSource:l,bordered:l.length>0,renderItem:function(e){return r.a.createElement(Ea.a.Item,null,r.a.createElement(Ff,e))}}))))))}}]),t}(r.a.Component),Lf=vr.a.create()(Rf);function Ff(e){return r.a.createElement("div",{style:{width:"100%"}},r.a.createElement("p",{style:{marginBottom:0}},r.a.createElement(bo.a,{placement:"right",content:r.a.createElement(wf,{meetingId:e.id,key:e.id})},r.a.createElement("span",{style:{width:"calc(100% - 60px)"}},r.a.createElement("b",null,Or()(e.start).format("LLL")),"\xa0",e.name))))}var Nf=function(e){function t(e){return Object(d.a)(this,t),Object(m.a)(this,Object(h.a)(t).call(this,e))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement(bo.a,{placement:"right",content:r.a.createElement(wf,Object.assign({meetingId:this.props.event.id,key:this.props.event.id},this.props)),trigger:"hover"},r.a.createElement("div",{style:{color:"white",height:"100%"}},r.a.createElement("h1",{style:{color:"white"}},r.a.createElement(va.a,{type:"user"}),this.props.event.name)))}}]),t}(r.a.Component);function Yf(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var Vf=ho()(yo.a),Bf=Object(yo.c)(Or.a),Hf=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).onSelectSlot=function(e){var t=Object(f.a)(a),n=Or()(e.start);"doubleClick"==e.action&&(t.setState({startTime:n,redirect:!0}),a.props.history.push("/meeting-booking/add"))},a.onRangeChange=function(e){var t=Object(f.a)(a);if(e.start&&e.end)if(1==Or()(e.start).date())a.setState({selectedDate:Or()(e.start),selectedStartDate:Or()(e.start),selectedEndDate:Or()(e.end)},(function(){t.loadMeetingList()}));else{var n=Or()(e.start);a.setState({selectedDate:n.month(n.month()+1).date(1),selectedStartDate:Or()(e.start),selectedEndDate:Or()(e.end)},(function(){t.loadMeetingList()}))}else e.length&&(7==e.length?a.setState({selectedDate:Or()(e[1]),selectedStartDate:Or()(e[0]).subtract(1,"day"),selectedEndDate:Or()(e[e.length-1]).add(1,"day")},(function(){t.loadMeetingList()})):(a.loadMeetingList(Or()(e[0]),Or()(e[e.length-1])),a.setState({selectedDate:Or()(e[0]),selectedStartDate:Or()(e[0]),selectedEndDate:Or()(e[e.length-1])},(function(){t.loadMeetingList()}))))},a.setFilterType=function(e){var t=Object(f.a)(a);a.setState({filterType:e.key,selectedZoomUser:"ALL"},(function(){"Zoom User"==e.key&&t.changeFilter("selectedZoomUser","ALL")}))},a.changeFilter=function(e,t){"selectedDoctor"==e&&"ALL"!=t&&a.loadMeetingList(),a.setState((function(a){var n,r=[];return a.meetingList.forEach((function(a){"ALL"==t?r.push(a):"selectedZoomUser"==e&&a.zoom_user==t&&r.push(a)})),n={},Object(u.a)(n,e,t),Object(u.a)(n,"filterMeetingList",r),n}))},a.state={loading:!1,selectedDate:Or()(),selectedStartDate:Or()().subtract(1,"days"),selectedEndDate:Or()().add(5,"days"),meetingList:[],filterMeetingList:[],filterType:"Zoom User",zoomUser:[]},a.loadZoomUser=a.loadZoomUser.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadMeetingList(),this.loadZoomUser()}},{key:"loadZoomUser",value:function(){var e=this;Ut(At,(function(t){e.setState({zoomUser:t,loading:!1})}),(function(){e.setState({loading:!1})}))}},{key:"loadMeetingList",value:function(){var e=this;e.setState({loading:!0});var t={start:Or()(this.state.selectedStartDate).startOf("day").format(),end:Or()(this.state.selectedEndDate).endOf("day").format()};Ut(Rt,(function(t){var a=[];t.forEach((function(e){a.push(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Yf(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Yf(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,{title:e.agenda,start:new Date(e.start),end:new Date(e.end)}))})),e.setState({meetingList:a,filterMeetingList:a,loading:!1})}),(function(){}),t)}},{key:"render",value:function(){var e=this,t=this;return r.a.createElement("div",{style:{margin:20}},r.a.createElement(y.d,null,r.a.createElement(y.b,{exact:!0,path:"/meeting-booking/add",render:function(a){return t.props.activePracticePermissions||t.props.CreateMeeting?r.a.createElement(Lf,Object.assign({},e.state,a,e.props,{loadData:e.loadMeetingList})):r.a.createElement(xi,null)}}),r.a.createElement(y.b,{exact:!0,path:"/meeting-booking/edit/:id",render:function(a){return t.props.activePracticePermissions||t.props.UpdateMeeting?r.a.createElement(Lf,Object.assign({},a,e.props,e.state,{loadData:e.loadMeetingList})):r.a.createElement(xi,null)}}),r.a.createElement(cr.a,{title:"Meeting Booking",extra:r.a.createElement(Da.b,{to:"/meeting-booking/add"},r.a.createElement(da.a,{type:"primary"},r.a.createElement(va.a,{type:"plus"})," Add Booking"))},r.a.createElement(pa.a,{size:"large",spinning:this.state.loading},r.a.createElement(rr.a,{gutter:16},r.a.createElement(ir.a,{span:3},r.a.createElement("div",null,r.a.createElement(ha.a,{trigger:"click",overlay:r.a.createElement(_a.a,null,r.a.createElement(_a.a.Item,{key:"Zoom User"},"Zoom User"))},r.a.createElement(da.a,{block:!0,style:{margin:5}},this.state.filterType," ",r.a.createElement(va.a,{type:"caret-down"}))),r.a.createElement(_a.a,{defaultSelectedKeys:"ALL",onClick:function(t){return e.changeFilter("selectedZoomUser",t.key)}},r.a.createElement(_a.a.Item,{key:"ALL",style:{marginBottom:2,textOverflow:"ellipsis",borderRight:"none"}},r.a.createElement("span",null,"All Zoom User")),this.state.zoomUser.map((function(e){return r.a.createElement(_a.a.Item,{key:e.id,style:{textOverflow:"ellipsis",borderRight:"none"}},r.a.createElement("span",null,e.id?e.username:null))}))))),r.a.createElement(ir.a,{span:16},r.a.createElement(Vf,{localizer:Bf,startAccessor:"start",defaultView:"week",step:10,timeslots:1,events:this.state.filterMeetingList,selectable:!0,date:new Date(this.state.selectedDate.format()),endAccessor:"end",defaultDate:new Date,views:{month:!0,week:qf,day:!0},onSelectSlot:this.onSelectSlot,style:{height:"calc(100vh - 85px)"},onRangeChange:this.onRangeChange,components:{event:function(e){return r.a.createElement(Nf,Object.assign({},e,t.props))}}})),r.a.createElement(ir.a,{span:5},r.a.createElement(Mf,Object.assign({},this.props,this.state))))))))}}]),t}(r.a.Component),qf=function(e){function t(){return Object(d.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.date,a=t.range(e);return r.a.createElement(go.a,Object.assign({},this.props,{range:a,eventOffset:15}))}}]),t}(r.a.Component);qf.range=function(e){for(var t=Eo.add(e,-1,"day"),a=Eo.add(t,6,"day"),n=t,r=[];Eo.lte(n,a,"day");)r.push(n),n=Eo.add(n,1,"day");return r},qf.navigate=function(e,t){switch(t){case yo.b.PREVIOUS:return Eo.add(e,-3,"day");case yo.b.NEXT:return Eo.add(e,3,"day");default:return e}},qf.title=function(e){return" ".concat(e.toLocaleDateString())};ma.a.TextArea;var zf=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).toggleSider=function(e){a.setState({collapsed:!!e})},a.showDrawer=function(){a.setState({visible:!0})},a.onClose=function(){a.setState({visible:!1})},a.state={collapsed:!1,active_practiceId:la(),practiceList:ia(),activePracticeData:null,activePracticePermissions:{},specialisations:null,allowAllPermissions:!1,loadingPermissions:!1,visible:!1},a.activeData=a.activeData.bind(Object(f.a)(a)),a.switchPractice=a.switchPractice.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.activeData()}},{key:"activeData",value:function(){var e=this,t=function(t){e.setState((function(e){var a={};return t.practice_permissions.forEach((function(e){a[e.codename]=e})),t.global_permissions.forEach((function(e){a[e.codename]=e})),{activePracticePermissions:a,loadingPermissions:!1,practiceList:ia()}}),(function(){}))},a=function(){e.setState({loadingPermissions:!1})};e.setState((function(e){var t=null;return e.practiceList.forEach((function(a){a.practice.id==e.active_practiceId&&(t=a.practice)})),t||!e.practiceList.length?{activePracticeData:t,loadingPermissions:!0}:(ra(e.practiceList[0].practice.id),{activePracticeData:e.practiceList[0].practice,active_practiceId:e.practiceList[0].practice.id,loadingPermissions:!0})}),(function(){var n,r,i;n=e.state.active_practiceId,r=t,i=a,Ut("users/user_clone/",(function(e){b.a.set(P,e.user),b.a.set("practice",e.practice_list),r(e)}),(function(){Qt(k,"Permission Loading Failed. Kindly refresh or check your internet connection..."),i()}),{practice:n})}))}},{key:"switchPractice",value:function(e){var t=this;t.setState((function(t){return{active_practiceId:e}}),(function(){ra(e),t.activeData()}))}},{key:"render",value:function(){var e=this,t=this;return this.state.loadingPermissions?r.a.createElement(pa.a,{spinning:this.state.loadingPermissions,tip:"Loading Permissions...."},r.a.createElement("div",{style:{width:"100vw",height:"100vh"}})):r.a.createElement(o.a,{style:{minHeight:"100vh"}},r.a.createElement(Cf,null,r.a.createElement("div",{style:{position:"fixed",right:"29px",bottom:"23px",zIndex:"20"}},r.a.createElement(da.a,{type:"primary",shape:"circle",icon:"mail",size:"large",onClick:this.showDrawer})),r.a.createElement(y.d,null,r.a.createElement(y.b,{path:"/patients/patientprintform",render:function(a){return r.a.createElement(hf,Object.assign({},e.state,{key:t.state.active_practiceId}))}}),r.a.createElement(y.b,null,r.a.createElement(o.a,null,r.a.createElement(ar,Object.assign({toggleSider:this.toggleSider},this.state,{key:t.state.active_practiceId},this.props)),r.a.createElement(o.a,null,r.a.createElement(Zn,Object.assign({},this.props,this.state,{switchPractice:this.switchPractice,toggleSider:this.toggleSider})),r.a.createElement(y.d,null,this.state.activePracticePermissions.WebAdmin?r.a.createElement(y.b,{path:"/web",render:function(a){return r.a.createElement(Mh,Object.assign({},e.state,e.props,a,{key:t.state.active_practiceId}))}}):null,r.a.createElement(y.b,{exact:!0,path:"/calendar/create-appointment",render:function(t){return e.state.activePracticePermissions.AddAppointment||e.state.allowAllPermissions?r.a.createElement(vf,Object.assign({},e.state,e.props,t,{startTime:e.state.startTime})):r.a.createElement(xi,null)}}),r.a.createElement(y.b,{exact:!0,path:"/calendar/:appointmentid/edit-appointment",render:function(t){return e.state.activePracticePermissions.EditAppointment||e.state.allowAllPermissions?r.a.createElement(vf,Object.assign({},e.state,e.props,t,{startTime:e.state.startTime})):r.a.createElement(xi,null)}}),r.a.createElement(y.b,{exact:!0,path:"/calendar/blockcalendar",render:function(a){return t.state.activePracticePermissions.BlockCalendar||t.state.allowAllPermissions?r.a.createElement(kf,Object.assign({},e.state,e.props,a)):r.a.createElement(xi,null)}}),r.a.createElement(y.b,{path:"/calendar",render:function(e){return t.state.activePracticePermissions.ViewCalendar?r.a.createElement(Lo,Object.assign({},t.state,t.props,e,{key:t.state.active_practiceId})):r.a.createElement(xi,null)}}),r.a.createElement(y.b,{path:"/patient/:id",render:function(a){return r.a.createElement(qu,Object.assign({},e.state,e.props,a,{key:t.state.active_practiceId+"|"+a.match.params.id}))}}),r.a.createElement(y.b,{path:"/settings",render:function(a){return r.a.createElement(po,Object.assign({},e.state,e.props,a,{key:t.state.active_practiceId,refreshClinicData:e.activeData}))}}),r.a.createElement(y.b,{path:"/inventory",render:function(a){return r.a.createElement(sf,Object.assign({},e.state,e.props,a,{key:t.state.active_practiceId}))}}),r.a.createElement(y.b,{path:"/reports/:type",render:function(a){return r.a.createElement(nh,Object.assign({},e.state,e.props,a,{key:t.state.active_practiceId}))}}),r.a.createElement(y.b,{path:"/profile",render:function(a){return r.a.createElement(pf,Object.assign({},e.state,e.props,a,{key:t.state.active_practiceId}))}}),r.a.createElement(y.b,{path:"/meeting-booking",render:function(a){return e.state.activePracticePermissions.ViewMeeting||e.state.allowAllPermissions?r.a.createElement(Hf,Object.assign({},e.state,e.props,a,{key:t.state.active_practiceId})):r.a.createElement(xi,null)}}),this.state.activePracticePermissions.ViewCalendar?r.a.createElement(y.b,{exact:!0,path:"/",render:function(a){return r.a.createElement(Lo,Object.assign({},e.state,e.props,a,{key:t.state.active_practiceId}))}}):null,r.a.createElement(y.b,{path:"/",render:function(a){return r.a.createElement(qu,Object.assign({},e.state,e.props,a,{key:t.state.active_practiceId}))}}),r.a.createElement(y.b,{component:Xi})))))),r.a.createElement(If,Object.assign({},this.state,{close:this.onClose}))))}}]),t}(r.a.Component),Gf=(a(1713),vr.a.Item),Uf=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).handleOk=function(e){var t=Object(f.a)(a);console.log(e);zt(Vt(W),{mobile:a.state.userMail},(function(e){Qt("success","Link to update your password have been sent to your mail."),t.setState({resetModalVisible:!1})}),(function(){}))},a.handleCancel=function(e){console.log(e),a.setState({resetModalVisible:!1})},a.state={isLoading:!1,username:null,userMail:"",redirect:null,resetModalVisible:!1},a.handleSubmit=a.handleSubmit.bind(Object(f.a)(a)),a.showResetModal=a.showResetModal.bind(Object(f.a)(a)),a.changeUserMail=a.changeUserMail.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"showResetModal",value:function(){this.setState({resetModalVisible:!0})}},{key:"changeUserMail",value:function(e){this.setState({userMail:e.target.value})}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this;this.props.form.validateFields((function(e,a){if(!e){var n,r=(n={},Object(u.a)(n,"email",a.email),Object(u.a)(n,"password",a.password),n);t.props.login(r)}}))}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return this.state.redirect?r.a.createElement(y.a,{to:this.state.redirect}):r.a.createElement(r.a.Fragment,null,r.a.createElement(vr.a,{onSubmit:this.handleSubmit,className:"login-form"},r.a.createElement(Gf,null,e("email",{rules:[{required:!0,message:"Please input your username!"}]})(r.a.createElement(ma.a,{size:"large",prefix:r.a.createElement(va.a,{type:"phone",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Mobile Number"}))),r.a.createElement(Gf,null,e("password",{rules:[{required:!0,message:"Please input your Password!"}]})(r.a.createElement(ma.a,{size:"large",prefix:r.a.createElement(va.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"}))),r.a.createElement(Gf,null,r.a.createElement("a",{style:{float:"right"},type:"primary",onClick:this.showResetModal},"Forgot Password ?"),r.a.createElement(da.a,{size:"large",loading:this.state.changePassLoading,type:"primary",htmlType:"submit",className:"login-form-button"},"Log in"))),r.a.createElement(sr.a,null,"OR"),r.a.createElement("h4",null,r.a.createElement(Da.b,{to:"/loginwithphone"},r.a.createElement(da.a,{size:"large",type:"primary",className:"login-form-button"},"Log in with phone"))),r.a.createElement(sr.a,null),r.a.createElement(nr.a,{title:"Email to Reset Password",visible:this.state.resetModalVisible,onOk:this.handleOk,onCancel:this.handleCancel,okText:"Reset Password"},r.a.createElement(ma.a,{placeholder:"Enter your Mobile Number",prefix:r.a.createElement(va.a,{type:"mobile",style:{color:"rgba(0,0,0,.25)"}}),onChange:this.changeUserMail})),1==this.props.redirect&&r.a.createElement(y.a,{push:!0,to:"/"}))}}]),t}(r.a.Component);var Wf=vr.a.Item,Kf=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).handleSubmit=function(e){var t=Object(f.a)(a);e.preventDefault(),a.props.form.validateFields((function(e,a){e||e||t.props.login&&t.props.login(a,!1)}))},a.setPhone=function(e,t){a.setState(Object(u.a)({},e,t))},a.sendOTP=function(){var e=Object(f.a)(a);if(a.state.phone){var t=function(t){e.setState({otpSent:!0}),Qt(O,"OTP Sent successfully!")},n=function(){};a.state.otpSent?ua(Vt(G),a.state.phone,t,n):ua(Vt(z),a.state.phone,t,n)}else Qt(D,"Phone No can not be empty!!")},a.state={},a.handleSubmit=a.handleSubmit.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator;return r.a.createElement(vr.a,{onSubmit:this.handleSubmit,className:"login-form"},r.a.createElement(ma.a.Group,{size:"large"},r.a.createElement(rr.a,null,r.a.createElement(ir.a,{span:this.state.otpSent?24:18},r.a.createElement(Wf,null,t("phone_no",{rules:[{required:!0,message:"Please input your phone!"}]})(r.a.createElement(ma.a,{prefix:r.a.createElement(va.a,{type:"phone",style:{color:"rgba(0,0,0,.25)"}}),type:"text",placeholder:"Phone",onChange:function(t){return e.setPhone("phone",t.target.value)}})))),r.a.createElement(ir.a,{span:this.state.otpSent?0:6},r.a.createElement(da.a,{type:"primary",size:"large",block:!0,onClick:this.sendOTP},"Send OTP")))),r.a.createElement(Wf,null,t("otp",{rules:[{required:!0,message:"Please input otp!"}]})(r.a.createElement(ma.a,{size:"large",prefix:r.a.createElement(va.a,{type:"key",style:{color:"rgba(0,0,0,.25)"}}),type:"text",placeholder:"otp"}))),r.a.createElement(Wf,null,this.state.otpSent?r.a.createElement("a",{style:{float:"right"},type:"primary",onClick:this.sendOTP},"Resend Otp ?"):null,r.a.createElement(da.a,{size:"large",type:"primary",htmlType:"submit",className:"login-form-button"},"Log in")),r.a.createElement(sr.a,null,"OR"),r.a.createElement("h4",null,r.a.createElement(Da.b,{to:"/"}," ",r.a.createElement(da.a,{size:"large",type:"primary",htmlType:"submit",className:"login-form-button"},"Log in with password "))),r.a.createElement(sr.a,null))}}]),t}(r.a.Component),Qf=(a(1714),function(e){function t(e){return Object(d.a)(this,t),Object(m.a)(this,Object(h.a)(t).call(this,e))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=vr.a.create()(Uf),t=vr.a.create()(Vr),a=vr.a.create()(Kf),n=[{key:"code",value:this.props.match&&this.props.match.params.token?this.props.match.params.token:null}],i=[{label:"Password",key:"password",type:"password",required:!0},{label:"Retype Password",key:"re-password",type:"password",required:!0}],l={successFn:function(e){Qt(O,"success")},errorFn:function(){},action:"users/reset_password/",method:"post"};return r.a.createElement(o.a,{className:"loginLayout"},r.a.createElement(y.d,null,r.a.createElement(y.b,{path:"/password-reset/"},r.a.createElement(rr.a,null,r.a.createElement(ir.a,{xs:{span:20,offset:2},sm:{span:16,offset:4},md:{span:12,offset:6},lg:{span:8,offset:8},xl:{span:8,offset:8}},r.a.createElement("div",{className:"loginFormWrapper",style:{textAlign:"center"}},r.a.createElement("img",{src:Jn.a,alt:"",style:{maxWidth:"70%",minWidth:"50%",padding:"20px"}}),r.a.createElement(cr.a,null,r.a.createElement(t,Object.assign({},this.props,{formProp:l,fields:i,defaultValues:n}))),r.a.createElement(sr.a,null),r.a.createElement("h4",null))))),r.a.createElement(y.b,null,r.a.createElement(rr.a,null,r.a.createElement(ir.a,{xs:{span:20,offset:2},sm:{span:16,offset:4},md:{span:12,offset:6},lg:{span:8,offset:8},xl:{span:8,offset:8},style:{padding:"35px"}},r.a.createElement("div",{className:"loginFormWrapper",style:{textAlign:"center"}},r.a.createElement("img",{src:Jn.a,alt:"",style:{maxWidth:"70%",minWidth:"50%",padding:"20px"}}),r.a.createElement(y.d,null,r.a.createElement(y.b,{path:"/loginwithphone"},r.a.createElement(a,Object.assign({},this.props,{login:this.props.login}))),r.a.createElement(y.b,null,r.a.createElement(e,Object.assign({},this.props,{login:this.props.login}))),r.a.createElement(y.b,null)),r.a.createElement("h4",{style:{textAlign:"center"}},"Powered By: ",r.a.createElement("a",{href:"https://plutonic.co.in/",target:"_blank"},"Plutonic Services"))))))))}}]),t}(r.a.Component)),Zf=a(564);function Xf(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Jf(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Xf(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Xf(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var $f=function(e){function t(e){var a;return Object(d.a)(this,t),a=Object(m.a)(this,Object(h.a)(t).call(this,e)),Zf.a.initialize("UA-143616458-1"),a.state={user:na(),redirect:!1,production:"clinic.bkarogyam.com"==window.location.hostname},a.login=a.login.bind(Object(f.a)(a)),a.logout=a.logout.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.location.pathname!==e.location.pathname&&Zf.a.pageview(window.location.pathname+window.location.search)}},{key:"login",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=this,n=function(){var e=na();a.setState({user:e})},r=function(){};t?oa(e,n,r):sa(Jf({},e),n,r)}},{key:"logout",value:function(){var e=this;!function(e,t){b.a.rm(P),b.a.rm("token"),b.a.rm("practice"),b.a.rm("group"),e()}((function(){e.setState({user:null})}))}},{key:"render",value:function(){var e=this;return r.a.createElement(o.a,null,this.state.production?null:r.a.createElement(s.a,null,r.a.createElement(c.a,{message:"Demo Version (Only for testing purposes)",banner:!0,closable:!0})),r.a.createElement(y.d,null,r.a.createElement(y.b,{exact:!0,path:"/login",render:function(){return r.a.createElement(Qf,Object.assign({},e.state,{login:e.login}))}}),r.a.createElement(y.b,{exact:!0,path:"/password-reset/:token",render:function(t){return r.a.createElement(Qf,Object.assign({},t,e.state,{login:e.login}))}}),r.a.createElement(y.b,{render:function(t){return e.state.user?r.a.createElement(zf,Object.assign({},e.state,t,e.props,{logout:e.logout})):r.a.createElement(Qf,Object.assign({},e.state,{login:e.login}))}})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(1715),a(1716);l.a.render(r.a.createElement(Da.a,null,r.a.createElement($f,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},327:function(e,t,a){e.exports=a.p+"static/media/kidneycarelogo.3378a129.png"},866:function(e,t,a){e.exports=a(1717)},871:function(e,t,a){}},[[866,1,2]]]);
//# sourceMappingURL=main.5f1860f2.chunk.js.map