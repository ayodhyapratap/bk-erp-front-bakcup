(window["webpackJsonpbk-erp-front"]=window["webpackJsonpbk-erp-front"]||[]).push([[0],{1146:function(e,t,a){e.exports=a(2708)},1151:function(e,t,a){},2400:function(e,t,a){},2685:function(e,t,a){},2705:function(e,t,a){},2706:function(e,t,a){},2707:function(e,t,a){},2708:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(22),l=a.n(r),s=(a(1151),a(124),a(65)),c=(a(148),a(84)),o=(a(224),a(107)),u=a(24),d=a(7),m=a(8),p=a(10),h=a(9),f=a(3),g=a(11),b=a(18),y=a(75),E=a.n(y),v=a(182),_=a.n(v),k="success",O="warning",P="error",j="role",D="input",S="select",x="multiselect",I="number",C="datepicker",w="datetimepicker",T="timepicker",A="quilltextfield",M="singleimageupload",L="multiimageupload",V=(a(226),a(85)),F="",R=F+"/erp-api",N="blogImage/create_with_base64/",B="staff_login/send_otp/",H="staff_login/resend_otp/",q="users/passwordchange/",Y="users/staff_reset_mail/",z="clinics/%s/practice_staff/",G="staff/%s/practice_list/",U="clinics/%s/doctor_timing/",W="users/all_permissions/",K="clinics/%s/taxes/",Q="clinics/%s/offers/",X="clinics/%s/payment_modes/",J="clinics/%s/procedure_category/",$="clinics/%s/treatmentnotes/",Z="clinics/%s/appointment_category/",ee="patients/",te="patients/%s/",ae="patients/merge_patients/",ne="patients/history/?id=%s",ie="clinics/%s/expense_type/",re="clinics/%s/drugcatalog/",le="clinics/%s/labtest/",se="clinics/%s/calender_settings/",ce="appointment/",oe="appointment/%s/",ue="appointment/?id=%s",de="patients/group/?id=%s",me="patients/vital_sign/",pe="patients/prescriptions/",he="appointment/block_calendar/",fe="patients/patient_notes/?patient=%s&practice=%s",ge="clinics/%s/labpanel/",be="patients/%s/combine_patient_report/",ye="patients/%s/timeline_pdf/",Ee="patients/medical_certificate/?practice=%s&page=%s",ve="patients/medical_certificate/?practice=%s&patient=%s",_e="patients/files/",ke="patients/procedure/",Oe="invoice/",Pe="invoice/%s/get_pdf",je="invoice/",De="invoice/%s/",Se="patients/clinic_notes/",xe="payment/",Ie="clinics/%s/practice_print_settings/?type=%s&sub_type=%s",Ce="clinics/%s/all_print_settings/",we="clinics/%s/prescription_template/",Te="patients/generate_otp/",Ae="patients/verify_otp/",Me="return/",Le="return/%s/get_pdf",Ve="patients/search/?name=%s",Fe="patients/%s/pending_amount/",Re="clinics/%s/appointment_report/",Ne="clinics/%s/invoice_report/",Be="clinics/%s/drugtype/",He="clinics/%s/membership/",qe="clinics/seat_booking_report",Ye="expenses/",ze="clinics/%s/vendor/",Ge="inventory_item/",Ue="inventory_item/%s/",We="stock_entry/bulk/",Ke="item_type_stock/find_item",Qe="product_margin/generate_mlm/",Xe="role_commission/agent_roles/",Je="patient_wallet/?patient=%s",$e="payment/%s/get_pdf/",Ze="clinics/%s/room_types/",et="clinics/%s/bed_packages/",tt="clinics/%s/medicine_packages/",at="clinics/%s/seat_booking/",nt="clinics/%s/seat_availability/",it="clinics/%s/other_diseases/",rt="This field is required!";function lt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function st(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?lt(a,!0).forEach(function(t){Object(u.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):lt(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var ct=function(e){return R+"/"+e},ot=function(e){return"/media/"+e},ut=function(e,t,a,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};_()({method:"put",url:ct(e),data:t,headers:st({Authorization:"Token "+Ct()},i)}).then(function(e){var t=e.data;a(t),t.detail&&bt(k,t.detail)}).catch(function(e){ft(e),n(t)})},dt=function(e,t,a,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};_()({method:"post",url:ct(e),data:t,headers:st({Authorization:"Token "+Ct()},i)}).then(function(e){var t=e.data;a(t),t.detail&&bt(k,t.detail)}).catch(function(e){console.log(e),ft(e),n()})},mt=function(e,t,a,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};_()({method:"post",url:e,data:t,headers:st({},i)}).then(function(e){var t=e.data;a(t),t.detail&&bt(k,t.detail)}).catch(function(e){console.log(e),ft(e),n()})},pt=function(e,t,a,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};_()({method:"patch",url:ct(e),data:t,headers:st({Authorization:"Token "+Ct()},i)}).then(function(e){var t=e.data;a(t)}).catch(function(e){console.log(e),ft(e),n()})},ht=function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};_()({method:"get",url:ct(e),headers:{Authorization:"Token "+Ct()},params:n}).then(function(e){console.log(e);var a=e.data;t(a),a.detail&&bt(k,a.detail)}).catch(function(e){console.log("Error aa rhi ",e),ft(e),a()})},ft=function(e){var t=e.response;if(t){console.info("Error Response Recieved",t);var a=t.status;400==a?t.data.detail&&V.a.error(t.data.detail):401==a?t.data.detail&&V.a.error(t.data.detail):403==a?t.data.detail&&V.a.error(t.data.detail):404==a?t.data.detail?V.a.error(t.data.detail):V.a.error("Not Found"):500==a&&V.a.error("Internal Server Error")}else console.error(t)},gt=function(e,t){var a=/%s/;return t.reduce(function(e,t){return e.replace(a,t)},e)},bt=function(e,t){e==k?V.a.success(t):"info"==e?V.a.info(t):e==O?V.a.warning(t):e==P&&V.a.error(t)},yt=function(e){return V.a.loading(e,0)},Et=function(e,t,a){return e(),t&&bt(t,a),!0},vt=function(e,t,a){return t.length<6&&0!=t.length?"Password should be atleast 6 character long":t==t.toLowerCase()&&0!=t.length?"Password must have atleast 1 uppercase letter":t==t.toUpperCase()&&0!=t.length?"Password must have atleast 1 lowercase letter":t.search(/[0-9]/)<0&&0!=t.length?"Password must contain atleast 1 digit":1==/^[a-zA-Z0-9 ]*$/.test(t)&&0!=t.length?"Password must have atleast 1 special character":void 0},_t=function(e){var t=y.get(e);return t||!1},kt="old_password",Ot="new_password",Pt=function(){var e=E.a.get(j),t=E.a.get("token");return e&&t?e:null},jt=function(e){E.a.set("current_practice",e)},Dt=function(){var e=E.a.get(j),t=E.a.get("token"),a=E.a.get("practice");return e&&t&&a?a:[]},St=function e(){var t=E.a.get("current_practice");if(t&&t!={})return t;var a=E.a.get("practice");return a&&a.length?(console.log(a),jt(a[0].practice.id),e()):null},xt=function(e,t,a){console.log("workign");var n=Object(u.a)({mobile:e.email},"password",e.password);_.a.post(ct("users/login/"),n).then(function(e){var a=e.data;E.a.set(j,a.user),E.a.set("token",a.token),E.a.set("practice",a.practice_list),t()}).catch(function(e){console.log(e),ft(e),a()})},It=function(e,t,a){var n={phone_no:e.phone_no,otp:e.otp};_.a.post(ct("staff_login/verify_otp/"),n).then(function(e){var a=e.data;E.a.set(j,a.user),E.a.set("token",a.token),E.a.set("practice",a.practice_list),t()}).catch(function(e){console.log(e),ft(e),a()})},Ct=function(){return E.a.get("token")},wt=function(e,t,a,n){var i={phone_no:t};_.a.post(e,i).then(function(e){a(e)}).catch(function(e){console.log(e),ft(e),n()})},Tt=(a(104),a(61)),At=(a(116),a(62)),Mt=(a(99),a(44)),Lt=(a(97),a(27)),Vt=(a(38),a(12)),Ft=(a(254),a(123)),Rt=(a(100),a(34)),Nt=(a(137),a(76)),Bt=(a(47),a(6)),Ht=(a(105),a(23)),qt=a(15),Yt=function(e){return e&&e.length>8?e.substring(0,3)+"*".repeat(e.length-5)+e.substring(e.length-2):e},zt=function(e){return e&&e.length>8?e.substring(0,3)+"*".repeat(e.length-e.indexOf("@")-4)+e.substring(e.length-e.indexOf("@")-4):e},Gt=s.a.Header,Ut=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).searchPatient=function(e){a.setState({searchPatientString:e});var t=Object(f.a)(a);ht(gt(Ve,[e]),function(e){e&&t.setState({patientListData:e})},function(){})},a.handlePatientSelect=function(e){console.log(e),e&&(a.props.history.push("/patient/"+e+"/profile"),a.setState({searchPatientString:null}))},a.state={patientListData:[],searchPatientString:null},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this,a=i.a.createElement(Ht.a,null,i.a.createElement(Ht.a.Item,{key:"profile"},i.a.createElement(qt.b,{to:"/profile"},"Profile")),i.a.createElement(Ht.a.Divider,null),i.a.createElement(Ht.a.Item,{key:"website"},i.a.createElement("a",{href:"https://bkarogyam.com"},i.a.createElement("small",null,"Switch to Website >"))),i.a.createElement(Ht.a.Divider,null),i.a.createElement(Ht.a.Item,{key:"logout"},i.a.createElement("a",{onClick:this.props.logout},"Log out")));return i.a.createElement(Gt,{style:{background:"#fff",padding:0,boxShadow:"0 2px 4px 0 rgba(38,50,69,.2)",zIndex:1}},i.a.createElement("div",{style:{float:"left",margin:"0px 20px"}},i.a.createElement(Bt.a,{className:"trigger",type:this.props.collapsed?"menu-unfold":"menu-fold",onClick:function(){return e.props.toggleSider(!e.props.collapsed)}})),i.a.createElement(Ht.a,{mode:"horizontal",style:{lineHeight:"64px"}},i.a.createElement(Ht.a.Item,{key:"5"},i.a.createElement(Ft.a,{placeholder:"Patient Name",showSearch:!0,onSearch:this.searchPatient,defaultActiveFirstOption:!1,showArrow:!1,value:this.state.searchPatientString,filterOption:!1,onSelect:this.handlePatientSelect},this.state.patientListData.map(function(e){return i.a.createElement(Ft.a.Option,{value:e.id.toString()},i.a.createElement(Rt.a.Item,{style:{padding:0}},i.a.createElement(Rt.a.Item.Meta,{avatar:i.a.createElement(Nt.a,{src:e.image?ot(e.image):"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png"}),title:e.user.first_name+" ("+e.user.id+")",description:t.props.activePracticePermissions.PatientPhoneNumber?e.user.mobile:Yt(e.user.mobile)})))}))),i.a.createElement(Ht.a.Item,{key:"4"},i.a.createElement(Vt.a.Group,null,t.props.activePracticePermissions.AddPatient||t.props.allowAllPermissions?i.a.createElement(qt.b,{to:"/patients/profile/add"},i.a.createElement(Vt.a,{type:"primary"},i.a.createElement(Bt.a,{type:"plus"}),"Add Patient")):null,t.props.activePracticePermissions.MergePatients||t.props.allowAllPermissions?i.a.createElement(qt.b,{to:"/patients/merge"},i.a.createElement(Vt.a,{type:"primary"},i.a.createElement(Bt.a,{type:"user-add"}),"Merge Patients")):null)),i.a.createElement(Ht.a.Item,{key:"3"},i.a.createElement(Lt.a,{onChange:this.props.switchPractice,defaultValue:this.props.active_practiceId,value:this.props.active_practiceId,style:{width:"300px",maxWidth:"70vw"}},this.props.practiceList&&this.props.practiceList.map(function(e){return i.a.createElement(Lt.a.Option,{key:e.practice.id,value:e.practice.id},e.practice.name)}))),i.a.createElement("div",{style:{float:"right",margin:"0px 20px"}},this.props.user&&this.props.user.is_superuser?i.a.createElement(Mt.a,{color:"red"},"SuperUser"):null,i.a.createElement(At.a,{overlay:a,placement:"bottomRight"},i.a.createElement(Nt.a,{style:{backgroundColor:"#87d068"},icon:"user"})))))}}]),t}(i.a.Component),Wt=a(343),Kt=a.n(Wt),Qt=s.a.Sider,Xt=Ht.a.SubMenu,Jt=(Ht.a.ItemGroup,function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).onOpenChange=function(e){var t=e.find(function(e){return-1===a.state.openKeys.indexOf(e)});-1===["sub1","sub2"].indexOf(t)?a.setState({openKeys:e}):a.setState({openKeys:t?[t]:[]})},a.state={openKeys:[]},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement(Qt,{trigger:null,collapsible:!0,collapsed:this.props.collapsed,style:{zIndex:1},breakpoint:"xxl",onBreakpoint:function(t){e.props.toggleSider(t)},onCollapse:function(e,t){}},i.a.createElement("img",{src:Kt.a,alt:"",style:{width:"100%",padding:"20px"}}),i.a.createElement(Ht.a,{mode:"inline",defaultSelectedKeys:["1"],openKeys:this.state.openKeys,onOpenChange:this.onOpenChange,theme:"dark"},this.props.activePracticePermissions.ViewCalendar?i.a.createElement(Ht.a.Item,{key:"1"},i.a.createElement(qt.b,{to:"/calendar"},i.a.createElement(Bt.a,{type:"schedule"}),i.a.createElement("span",{className:"nav-text"},"Calendar"))):null,i.a.createElement(Ht.a.Item,{key:"26"},i.a.createElement(qt.b,{to:this.props.currentPatient?"/patient/"+this.props.currentPatient.id+"/profile":"/patients/profile"},i.a.createElement(Bt.a,{type:"user"}),i.a.createElement("span",{className:"nav-text"},"Patients"))),i.a.createElement(Ht.a.Item,{key:"27"},i.a.createElement(qt.b,{to:"/reports/appointments"},i.a.createElement(Bt.a,{type:"bar-chart"}),i.a.createElement("span",{className:"nav-text"},"Reports"))),i.a.createElement(Ht.a.Item,{key:"5"},i.a.createElement(qt.b,{to:"/settings/clinics"},i.a.createElement(Bt.a,{type:"setting"}),i.a.createElement("span",{className:"nav-text"},"Settings"))),i.a.createElement(Xt,{key:"sub1",title:i.a.createElement("span",null,i.a.createElement(Bt.a,{type:"gold"}),i.a.createElement("span",null,"Back Office"))},i.a.createElement(Ht.a.Item,{key:"6"},i.a.createElement(qt.b,{to:"/inventory/expenses"},i.a.createElement(Bt.a,{type:"credit-card"}),i.a.createElement("span",{className:"nav-text"},"Expenses"))),i.a.createElement(Ht.a.Item,{key:"7"},i.a.createElement(qt.b,{to:"/inventory/activity"},i.a.createElement(Bt.a,{type:"bell"}),i.a.createElement("span",{className:"nav-text"},"Activities"))),i.a.createElement(Ht.a.Item,{key:"8"},i.a.createElement(qt.b,{to:"/inventory/manufacture"},i.a.createElement(Bt.a,{type:"database"}),i.a.createElement("span",{className:"nav-text"},"Manufacturers"))),i.a.createElement(Ht.a.Item,{key:"42"},i.a.createElement(qt.b,{to:"/inventory/vendor"},i.a.createElement(Bt.a,{type:"database"}),i.a.createElement("span",{className:"nav-text"},"Vendor"))),i.a.createElement(Ht.a.Item,{key:"9"},i.a.createElement(qt.b,{to:"/inventory/lab"},i.a.createElement(Bt.a,{type:"experiment"}),i.a.createElement("span",{className:"nav-text"},"Labs"))),i.a.createElement(Ht.a.Item,{key:"10"},i.a.createElement(qt.b,{to:"/inventory"},i.a.createElement(Bt.a,{type:"gold"}),i.a.createElement("span",{className:"nav-text"},"Inventory")))),this.props.activePracticePermissions.WebAdmin?i.a.createElement(Ht.a.Item,{key:"web-1"},i.a.createElement(qt.b,{to:"/web/videos"},i.a.createElement(Bt.a,{type:"google"}),i.a.createElement("span",{className:"nav-text"},"Web Admin"))):null))}}]),t}(i.a.Component)),$t=(a(93),a(56)),Zt=(a(41),a(16)),ea=(a(67),a(20)),ta=(a(71),a(39)),aa=(a(68),a(40)),na=(a(49),a(25)),ia=(a(29),a(14)),ra=(ia.a.Meta,function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).showModal=function(e){a.setState(function(){return{visible:!0,practice:e}})},a.handleCancel=function(){a.setState({visible:!1})},a.state={practiceList:[],specialisations:null,loading:!0,visible:!1,practice:{}},a.deletePractice=a.deletePractice.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.admin_practiceData()}},{key:"admin_practiceData",value:function(){var e=this;ht("clinics/",function(t){var a={};t[0].specialisations.forEach(function(e){a[e.id]=e}),console.log(a),e.setState({practiceList:t,specialisations:a,loading:!1})},function(){e.setState({loading:!1})})}},{key:"deletePractice",value:function(e){var t=this;dt(gt("clinics/%s/delete_clinic/",[e]),{},function(e){console.log("data"),t.admin_practiceData(),t.props.refreshClinicData&&t.props.refreshClinicData()},function(){})}},{key:"render",value:function(){var e=this,t=this;console.log(t.props.practiceList);var a=[{title:"Name",dataIndex:"name",key:"name",render:function(t,a){return i.a.createElement("a",{href:"#",onClick:function(){return e.showModal(a)}},t)}},{title:"Tagline",dataIndex:"tagline",key:"tagline"},{title:"Address",dataIndex:"address",key:"address"},{title:"Specialisation",key:"specialisation",dataIndex:"specialisation"},{title:"Action",key:"action",render:function(a,n){return i.a.createElement("span",null,i.a.createElement(qt.b,{to:"/settings/clinics/"+n.id+"/edit"},"Edit"),i.a.createElement(na.a,{type:"vertical"}),t.props.practiceList.length>1?i.a.createElement(aa.a,{title:"Are you sure delete this Practice?",onConfirm:function(){return e.deletePractice(n.id)},okText:"Yes",cancelText:"No"},i.a.createElement("a",null,"Delete")):null)}}];return i.a.createElement(Zt.a,null,i.a.createElement("h2",null,"Practice Details",i.a.createElement(qt.b,{to:"/settings/clinics/add"},i.a.createElement(Vt.a,{type:"primary",style:{float:"right"}},i.a.createElement(Bt.a,{type:"plus"}),"\xa0Add"))),i.a.createElement(ia.a,{loading:this.state.loading},i.a.createElement(ta.a,{pagination:!1,columns:a,dataSource:this.state.practiceList})),i.a.createElement($t.a,{visible:this.state.visible,closable:!1,width:600,onCancel:this.handleCancel,footer:null},i.a.createElement(Vt.a,{icon:"close",type:"danger",shape:"circle",style:{position:"absolute",top:"-50px",right:0},onClick:this.handleCancel}),i.a.createElement(Zt.a,{style:{paddingBottom:"25px"}},i.a.createElement(ea.a,{span:12,offset:10},this.state.practice.logo?i.a.createElement(Nt.a,{shape:"square",size:"large",src:ot(this.state.practice.logo)}):null)),i.a.createElement(la,{label:"Practice Name : ",value:this.state.practice.name}),i.a.createElement(la,{label:"Tagline : ",value:this.state.practice.tagline}),i.a.createElement(la,{label:"Email Id: ",value:this.state.practice.email}),i.a.createElement(la,{label:"Contact Number : ",value:this.state.practice.contact}),i.a.createElement(la,{label:"Website : ",value:this.state.practice.website}),i.a.createElement(la,{label:"GSTIN : ",value:this.state.practice.gstin}),i.a.createElement(la,{label:"Specialisation",value:this.state.practice.specialisation}),la({label:"Address",value:this.state.practice.address?this.state.practice.address:this.state.practice.locality})))}}]),t}(i.a.Component));function la(e){return i.a.createElement(Zt.a,{gutter:16},i.a.createElement(ea.a,{span:8},i.a.createElement("p",null,i.a.createElement("b",null,e.label))),i.a.createElement(ea.a,{span:16},e.value))}a(126);var sa=a(43),ca=(a(741),a(345)),oa=(a(121),a(52)),ua=(a(273),a(157)),da=(a(302),a(98)),ma=(a(128),a(64)),pa=(a(127),a(53)),ha=(a(125),a(35)),fa=(a(45),a(4)),ga=(a(78),a(28)),ba=a(5),ya=a.n(ba),Ea=a(1089),va=a(1090),_a=a.n(va),ka=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).setRef=function(e){a.webcam=e},a.capture=function(){var e=a.webcam.getScreenshot();a.props.getScreenShot&&a.props.getScreenShot(e)},a.state={},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{style:{width:680}},i.a.createElement(_a.a,{audio:!1,height:480,width:640,ref:this.setRef,videoConstraints:{width:1280,height:720,facingMode:"user"},screenshotFormat:"image/jpeg"}),i.a.createElement(Vt.a,{onClick:this.capture},"Capture photo"))}}]),t}(i.a.Component),Oa=a(679),Pa=(a(1705),a(136)),ja=a(350),Da=a.n(ja),Sa=a(485),xa=a.n(Sa);function Ia(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Ca(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ia(a,!0).forEach(function(t){Object(u.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ia(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var wa=ga.a.TextArea,Ta=fa.a.Item,Aa=ha.a.Group,Ma=sa.a.Group,La=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).fieldDecorators=function(e,t){var n=a.state.urlInitialValues;return e.type==x?{initialValue:t[e.key]?t[e.key]:n[e.key]?n[e.key]:t[e.key],rules:[{required:e.required,message:rt,type:"array"}]}:{initialValue:t[e.key]?t[e.key]:n[e.key]?n[e.key]:t[e.key],rules:[{required:e.required,message:rt}]}},a.handleSubmit=function(e){var t=Object(f.a)(a);e.preventDefault(),a.props.form.validateFieldsAndScroll(function(e,n){e||(a.props.defaultValues&&a.props.defaultValues.forEach(function(e){n=Ca(Object(u.a)({},e.key,e.value),n)}),a.state.colorPickerKey&&(n[a.state.colorPickerKey]=a.state.colorPickerColor),t.props.fields.forEach(function(e){if(e.type==M){var a=e.key;n[a]&&n[a].file&&n[a].file.response?n[a]=n[a].file.response.image_path:n[a]=e.initialValue}else if(e.type==L){var i=e.key;n[i]&&n[i].file&&n[i].file.response?n[i]=n[i].fileList.map(function(e){return e.response.id}):n[i]=e.initialValue}else if(e.type==T||e.type==C||e.type==w){var r=e.key;e.format&&(n[r]=ya()(n[r]).isValid()?ya()(n[r]).format(e.format):null)}else if(e.type==A){var l=e.key;n[l]=t.state.editorState[l]?Da()(Object(Pa.convertToRaw)(t.state.editorState[l].getCurrentContent())):e.initialValue}}),t.state.formProp.beforeSend&&(n=t.state.formProp.beforeSend(n)),t.submitForm(n))})},a.addMailTemplateTag=function(e,t){Object(f.a)(a);a.setState(function(a){var n=a.editorState[e]?Da()(Object(Pa.convertToRaw)(a.editorState[e].getCurrentContent())):"";return n+=t,{editorState:Ca({},a.editorState,Object(u.a)({},e,Pa.EditorState.createWithContent(Pa.ContentState.createFromBlockArray(xa()(n)))))}})},a.toggleWebCam=function(e,t){a.setState(function(a){return{webCamState:Ca({},a.webCamState,Object(u.a)({},e,t))}})},a.getImageandUpload=function(e,t){var n=Object(f.a)(a),i=new FormData;i.append("image",t),i.append("name","file");dt(N,i,function(t){n.props.form.setFieldsValue(Object(u.a)({},e,{file:{response:t}})),bt(k,"Image Captured and processed."),n.setState(function(t){return{webCamState:Ca({},t.webCamState,Object(u.a)({},e,!1))}})},function(){},{"content-type":"multipart/form-data"})},a.onEditorStateChange=function(e,t){a.setState(function(a){return{editorState:Ca({},a.editorState,Object(u.a)({},e,t))}})},a.state={fields:a.props.fields,formData:{},formProp:a.props.formProp,disabled:!1,loading:!1,countryOptions:[],stateOptions:[],cityOptions:[],smsFields:{},urlInitialValues:{},webCamState:{},editorState:{}},a.resetFormData=a.resetFormData.bind(Object(f.a)(a)),a.submitForm=a.submitForm.bind(Object(f.a)(a)),a.colorChange=a.colorChange.bind(Object(f.a)(a)),a.loadCountryData=a.loadCountryData.bind(Object(f.a)(a)),a.addSMSTag=a.addSMSTag.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentWillReceiveProps",value:function(e){}},{key:"componentDidMount",value:function(){var e=this;if(this.resetFormData(),this.props.fields.forEach(function(t){"country"==t.type&&e.loadCountryData()}),this.props.history&&this.props.history.location.search){var t=this.props.history.location.search.substr(1).split("&");if(t.length){var a={};t.forEach(function(e){var t=e.split("=");t&&2==t.length&&(isNaN(t[1])||-1==t[1].toString().indexOf(".")?isNaN(t[1])?a[t[0]]=t[1]:a[t[0]]=parseInt(t[1]):a[t[0]]=parseFloat(t[1]))}),this.setState({urlInitialValues:a})}}}},{key:"resetFormData",value:function(){var e={};this.state.fields.forEach(function(t){e[t.key]=t.initialValue}),this.setState({formData:e})}},{key:"submitForm",value:function(e){var t=this;this.setState({disabled:!0,loading:!0});var a=function(e){t.state.formProp.successFn(e),t.setState({disabled:!1,loading:!1}),t.props.changeRedirect&&t.props.changeRedirect()},n=function(){t.state.formProp.errorFn(),t.setState({disabled:!1,loading:!1})};"post"==this.props.formProp.method?dt(this.props.formProp.action,e,a,n):"put"==this.props.formProp.method&&ut(this.props.formProp.action,e,a,n)}},{key:"colorChange",value:function(e,t){var a=this;this.setState({colorPickerKey:t,colorPickerColor:e.hex},function(){a.props.form.setFieldsValue(Object(u.a)({},t,e.hex))})}},{key:"setAddressField",value:function(e,t){"country"==e?this.setState(function(e){var a=[];return e.countryOptions.forEach(function(e){e.id==t&&(a=e.states)}),{stateOptions:a}}):this.setState(function(e){var a=[];return e.stateOptions.forEach(function(e){e.id==t&&(a=e.cities)}),{cityOptions:a}})}},{key:"loadCountryData",value:function(){var e=this;ht("clinics/extra_data/",function(t){e.setState({countryOptions:t.country})},function(){})}},{key:"addSMSTag",value:function(e,t){var a=this.props.form.getFieldValue(e)||"";this.props.form.setFieldsValue(Object(u.a)({},e,a+t))}},{key:"render",value:function(){var e=this,t=this.props.formLayout?this.props.formLayout:{labelCol:{span:8},wrapperCol:{span:14}},a=this.props.form.getFieldDecorator;return i.a.createElement("div",null,i.a.createElement(fa.a,{onSubmit:this.handleSubmit},this.props.title?i.a.createElement("h2",null,this.props.title):null,this.state.fields?this.state.fields.map(function(n){switch(n.type){case"password":return i.a.createElement(fa.a.Item,Object.assign({key:n.key,label:n.label},t,{extra:n.extra}),a(n.key,e.fieldDecorators(n,e.state.formData))(i.a.createElement(ga.a,{prefix:i.a.createElement(Bt.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:n.placeholder,onChange:function(e){return function(){n.onChange&&n.onChange(e)}},disabled:n.disabled?n.disabled:e.state.disabled})));case D:return i.a.createElement(Ta,Object.assign({key:n.key,label:n.label},t,{extra:n.extra}),a(n.key,e.fieldDecorators(n,e.state.formData))(i.a.createElement(ga.a,{placeholder:n.placeholder,onChange:function(e){return function(){n.onChange&&n.onChange(e)}},disabled:n.disabled?n.disabled:e.state.disabled})),n.follow?i.a.createElement("span",{className:"ant-form-text"},n.follow):null);case S:return i.a.createElement(Ta,Object.assign({key:n.key},t,{label:n.label,extra:n.extra}),a(n.key,e.fieldDecorators(n,e.state.formData))(i.a.createElement(Lt.a,{placeholder:n.placeholder,disabled:n.disabled?n.disabled:e.state.disabled,mode:n.mode?n.mode:"default"},n.options.map(function(e){return i.a.createElement(Lt.a.Option,{value:e.value},e.label)}))),n.follow?i.a.createElement("span",{className:"ant-form-text"},n.follow):null);case x:return i.a.createElement(Ta,Object.assign({key:n.key},t,{label:n.label,extra:n.extra}),a(n.key,Ca({},e.fieldDecorators(n,e.state.formData)))(i.a.createElement(Lt.a,{mode:"multiple",placeholder:n.placeholder,disabled:n.disabled?n.disabled:e.state.disabled},n.options.map(function(e){return i.a.createElement(Lt.a.Option,{value:e.value},e.label)}))),n.follow?i.a.createElement("span",{className:"ant-form-text"},n.follow):null);case"radio":return i.a.createElement(Ta,Object.assign({key:n.key,label:n.label},t,{extra:n.extra}),a(n.key,e.fieldDecorators(n,e.state.formData))(i.a.createElement(Aa,{disabled:n.disabled?n.disabled:e.state.disabled},n.options.map(function(e){return i.a.createElement(ha.a,{value:e.value},e.label)}))));case"checkbox":return i.a.createElement(Ta,Object.assign({key:n.key,label:n.label},t,{extra:n.extra}),a(n.key,e.fieldDecorators(n,e.state.formData))(i.a.createElement(Ma,{options:n.options,disabled:n.disabled?n.disabled:e.state.disabled})));case"singlecheckbox":return i.a.createElement(Ta,Object.assign({key:n.key,label:n.label},t,{extra:n.extra}),a(n.key,{valuePropName:"checked",initialValue:n.initialValue},{rules:[{required:n.required,message:rt}]})(i.a.createElement(sa.a,{disabled:n.disabled?n.disabled:e.state.disabled},n.follow)));case I:return i.a.createElement(Ta,Object.assign({key:n.key},t,{label:n.label,extra:n.extra}),a(n.key,e.fieldDecorators(n,e.state.formData))(i.a.createElement(pa.a,{min:n.min,max:n.max,disabled:n.disabled?n.disabled:e.state.disabled})),i.a.createElement("span",{className:"ant-form-text"},n.follow));case C:return i.a.createElement(Ta,Object.assign({key:n.key,label:n.label},t,{extra:n.extra}),a(n.key,{initialValue:n.initialValue?ya()(n.initialValue):null},{rules:[{required:n.required,message:rt}]})(i.a.createElement(ma.a,{format:n.format})));case w:return i.a.createElement(Ta,Object.assign({key:n.key,label:n.label},t,{extra:n.extra}),a(n.key,{initialValue:n.initialValue?ya()(n.initialValue):null},{rules:[{required:n.required,message:rt}]})(i.a.createElement(ma.a,{format:n.format,showTime:!0,onChange:function(e){return n.onChange?n.onChange(e):function(){}}})));case"textfield":return i.a.createElement("div",{key:n.key},i.a.createElement(Ta,Object.assign({key:n.key,label:n.label},t,{extra:n.extra}),a(n.key,e.fieldDecorators(n,e.state.formData))(i.a.createElement(wa,{autosize:{minRows:n.minRows,maxRows:n.maxRows},placeholder:n.placeholder,disabled:n.disabled?n.disabled:e.state.disabled,onChange:e.inputChange}))));case"sms_field":return i.a.createElement("div",null,i.a.createElement(Ta,Object.assign({key:n.key,label:n.label},t,{extra:n.extra}),a(n.key,e.fieldDecorators(n,e.state.formData))(i.a.createElement(wa,{autosize:{minRows:n.minRows,maxRows:n.maxRows},placeholder:n.placeholder,disabled:n.disabled?n.disabled:e.state.disabled})),n.options&&n.options.map(function(t){return i.a.createElement(Mt.a,{color:"#108ee9",onClick:function(){return e.addSMSTag(n.key,t.value)}},t.label)})));case"mail_field":return i.a.createElement("div",null,i.a.createElement(Ta,Object.assign({key:n.key,label:n.label},t,{extra:n.extra}),a(n.key,{initialValue:n.initialValue&&n.initialValue.length?n.initialValue:"",rules:[{required:n.required,message:rt}]})(i.a.createElement("div",{style:{border:"1px solid #eee"}},i.a.createElement(Oa.Editor,{editorState:e.state.editorState[n.key]?e.state.editorState[n.key]:n.initialValue?Pa.EditorState.createWithContent(Pa.ContentState.createFromBlockArray(xa()(n.initialValue))):Pa.EditorState.createEmpty(),onEditorStateChange:function(t){return e.onEditorStateChange(n.key,t)}}))),n.options&&n.options.map(function(t){return i.a.createElement(Mt.a,{color:"#108ee9",onClick:function(){return e.addMailTemplateTag(n.key,t.value)}},t.label)}),n.preview?i.a.createElement("div",null,i.a.createElement(na.a,null,"Preview"),i.a.createElement("div",{style:{maxHeight:200,overflowY:"scroll"},dangerouslySetInnerHTML:{__html:"".concat(e.state.editorState[n.key]?Da()(Object(Pa.convertToRaw)(e.state.editorState[n.key].getCurrentContent())):n.initialValue)||""}}),i.a.createElement(na.a,null)):null));case A:return i.a.createElement("div",null,i.a.createElement(Ta,Object.assign({key:n.key,label:n.label},t,{extra:n.extra}),a(n.key,{initialValue:n.initialValue&&n.initialValue.length?n.initialValue:"",rules:[{required:n.required,message:rt}]})(i.a.createElement("div",{style:{border:"1px solid #eee"}},i.a.createElement(Oa.Editor,{editorState:e.state.editorState[n.key]?e.state.editorState[n.key]:n.initialValue?Pa.EditorState.createWithContent(Pa.ContentState.createFromBlockArray(xa()(n.initialValue))):Pa.EditorState.createEmpty(),onEditorStateChange:function(t){return e.onEditorStateChange(n.key,t)}}))),n.preview?i.a.createElement("div",null,i.a.createElement(na.a,null,"Preview"),i.a.createElement("div",{style:{maxHeight:200,overflowY:"scroll"},dangerouslySetInnerHTML:{__html:"".concat(e.state.editorState[n.key]?Da()(Object(Pa.convertToRaw)(e.state.editorState[n.key].getCurrentContent())):n.initialValue)||""}}),i.a.createElement(na.a,null)):null));case T:return i.a.createElement(Ta,Object.assign({key:n.key,label:n.label},t,{extra:n.extra}),a(n.key,{initialValue:n.initialValue?ya()(n.initialValue,n.format):null,rules:[{required:n.required,message:rt}]})(i.a.createElement(da.a,{format:n.format})));case"colorpicker":return i.a.createElement(Ta,Object.assign({key:n.key,label:n.label},t,{extra:n.extra}),a(n.key,e.fieldDecorators(n,e.state.formData))(i.a.createElement("div",null,i.a.createElement(Ea.SwatchesPicker,{style:{width:"100%"},onChange:function(t){return e.colorChange(t,n.key)}}),e.state.colorPickerKey?i.a.createElement("div",{style:{margin:"10px",backgroundColor:e.state.colorPickerColor,height:"40px",width:"40px"}}):e.state.formData[n.key]?i.a.createElement("div",{style:{margin:"10px",backgroundColor:e.state.formData[n.key],height:"40px",width:"40px"}}):null)));case M:var r={name:"image",data:{name:"hello"},action:ct("blogImage/"),headers:{authorization:"authorization-text"},onChange:function(e){"uploading"!==e.file.status&&console.log(e.file,e.fileList),"done"===e.file.status?V.a.success("".concat(e.file.name," file uploaded successfully")):"error"===e.file.status&&V.a.error("".concat(e.file.name," file upload failed."))}};return i.a.createElement(fa.a.Item,Object.assign({key:n.key},t,{label:n.label}),a(n.key,{valuePropName:n.key})(i.a.createElement(ua.a,r,i.a.createElement(Vt.a,null,i.a.createElement(Bt.a,{type:"upload"})," Select File"),n.initialValue?i.a.createElement("img",{src:ot(n.initialValue),style:{maxWidth:"100%"}}):null)),n.allowWebcam?i.a.createElement("span",{className:"ant-form-text"},i.a.createElement("a",{onClick:function(){return e.toggleWebCam(n.key,Math.random())}},"Open Webcam")):null,i.a.createElement($t.a,{footer:null,onCancel:function(){return e.toggleWebCam(n.key,!1)},visible:!!e.state.webCamState[n.key],width:680,key:e.state.webCamState[n.key]},i.a.createElement(ka,{getScreenShot:function(t){return e.getImageandUpload(n.key,t)}})));case L:var l={name:"image",data:{name:"hello"},action:ct("blogImage/"),headers:{authorization:"authorization-text"},onChange:function(e){"uploading"!==e.file.status&&console.log(e.file,e.fileList),"done"===e.file.status?V.a.success("".concat(e.file.name," file uploaded successfully")):"error"===e.file.status&&V.a.error("".concat(e.file.name," file upload failed."))}};return i.a.createElement(fa.a.Item,Object.assign({key:n.key},t,{label:n.label}),a(n.key,{valuePropName:n.key})(i.a.createElement(ua.a,l,i.a.createElement(Vt.a,null,i.a.createElement(Bt.a,{type:"upload"})," Select File"),n.initialValue&&n.initialValue.length?n.initialValue.map(function(e){return i.a.createElement("img",{src:e,style:{maxWidth:"100%"}})}):null)));case"country":return i.a.createElement(Ta,Object.assign({key:n.key},t,{label:n.label,extra:n.extra}),a(n.key,e.fieldDecorators(n,e.state.formData))(i.a.createElement(Lt.a,{placeholder:n.placeholder,disabled:n.disabled?n.disabled:e.state.disabled,mode:n.mode?n.mode:"default",onChange:function(t){return e.setAddressField("country",t)}},e.state.countryOptions.map(function(e){return i.a.createElement(Lt.a.Option,{value:e.id},e.name)}))));case"state":return i.a.createElement(Ta,Object.assign({key:n.key},t,{label:n.label,extra:n.extra}),a(n.key,e.fieldDecorators(n,e.state.formData))(i.a.createElement(Lt.a,{placeholder:n.placeholder,disabled:n.disabled?n.disabled:e.state.disabled,mode:n.mode?n.mode:"default",onChange:function(t){return e.setAddressField("state",t)}},e.state.stateOptions.map(function(e){return i.a.createElement(Lt.a.Option,{value:e.id},e.name)}))));case"email":return i.a.createElement(fa.a.Item,Object.assign({key:n.key},t,{label:n.label,extra:n.extra}),a(n.key,{initialValue:e.state.formData[n.key],rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:"Please input your E-mail!"}]})(i.a.createElement(ga.a,{placeholder:n.placeholder,disabled:n.disabled?n.disabled:e.state.disabled,onChange:e.inputChange})));case"city":return i.a.createElement(Ta,Object.assign({key:n.key},t,{label:n.label,extra:n.extra}),a(n.key,e.fieldDecorators(n,e.state.formData))(i.a.createElement(Lt.a,{placeholder:n.placeholder,disabled:n.disabled?n.disabled:e.state.disabled,mode:n.mode?n.mode:"default"},e.state.cityOptions.map(function(e){return i.a.createElement(Lt.a.Option,{value:e.id},e.name)}))));case"divider_field":return i.a.createElement(na.a,{style:{margin:4}});default:return null}}):null,i.a.createElement(Ta,t,i.a.createElement(Vt.a,{loading:e.state.loading,type:"primary",htmlType:"submit",style:{margin:5}},"Submit"),e.props.history?i.a.createElement(Vt.a,{style:{margin:5},onClick:function(){return e.props.history.goBack()}},"Cancel"):null)))}}]),t}(i.a.Component);var Va=[{label:"cash",value:"cash"},{label:"cheque",value:"cheque"},{label:"card",value:"card"},{label:"netbanking",value:"netbanking"},{label:"unknown",value:"unknown"}],Fa=[{label:"Kidney Disease",value:"Kidney Disease"},{label:"Cancer Disease",value:"Cancer Disease"},{label:"Other Disease",value:"Other Disease"}],Ra="Medicine",Na="Procedure",Ba="Inventory",Ha=[{label:Ra,value:Ra},{label:"Equipment",value:"Equipment"},{label:"Supplies",value:"Supplies"}],qa="ADD",Ya="CONSUME",za=[{label:"CLINIC CONTACT",value:"{{CLINICCONTACTNUMBER}}"},{label:"CLINIC NAME",value:"{{CLINIC}}"},{label:"PATIENT NAME",value:"{{PATIENT}}"},{label:"APPOINTMENT CATEGORY",value:"{{CATEGORY}}"},{label:"DATE",value:"{{DATE}}"},{label:"TIME",value:"{{TIME}}"}],Ga=[{title:"PRESCRIPTION"},{title:"TREATMENT PLAN"},{title:"CASE SHEET"},{title:"MEDICAL LEAVE"},{title:"REPORT MANUAL"},{title:"LAB ORDER"},{title:"CLINICAL NOTES"}],Ua=[{title:"INVOICE"},{title:"RECEIPTS"},{title:"RETURN"}],Wa=["A2","A3","A4","A5"],Ka=[{value:"PORTRAIT"},{value:"LANDSCAPE"}],Qa=[{value:"COLOR"},{value:"BLACK"}],Xa=[{title:"Yes",value:!0},{title:"No , I already have a letter head.",value:!1}],Ja=[{value:"Square"},{value:"Narrow"},{value:"Wide"}],$a=[{value:"RIGHT"},{value:"LEFT"},{value:"CENTRE"}],Za=[{title:"Yes",value:!0},{title:"No",value:!1}],en=[{value:"Exclude Mediacal History"},{value:"Exclude Patient Number"},{value:"Exclude address"},{value:"Exclude Blood Group"}],tn=[{title:"Yes",value:!0},{title:"No",value:!1}],an=[{title:"Yes",value:!0},{title:"No",value:!1}],nn=[{title:"Yes",value:!0},{title:"No",value:!1}],rn=[{label:"day(s)",value:"day(s)"},{label:"week(s)",value:"week(s)"},{label:"month(s)",value:"month(s)"},{label:"year(s)",value:"year(s)"}],ln=[{label:"twice daily",value:"twice daily"},{label:"three times a day",value:"three times a day"},{label:"four times a day",value:"four times a day"},{label:"every four hours",value:"every four hours"},{label:"as needed",value:"as needed"},{label:"every 2 hour(s)",value:"every 2 hour(s)"},{label:"every other hour",value:"every other hour"},{label:"every day",value:"every day"},{label:"every other day",value:"every other day"}],sn="Scheduled",cn="Waiting",on="Engaged",un="CheckOut",dn="Cancelled",mn=[{label:"Sales",value:"SALES"},{label:"Services",value:"SERVICES"},{label:"Damaged",value:"DAMAGED"},{label:"Returned",value:"RETURNED"},{label:"Adjustment",value:"ADJUSTMENT"}],pn="$_$",hn=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],fn=[{label:"Valid for absence from court attendance",value:"valid_court"},{label:"Invalid for absence from court attendance",value:"invalid_court"},{label:"Dont mention",value:"no_mention"}],gn=[{label:"Degree Fahrenheit",value:"Degree Fahrenheit"},{label:"Degree Celsius",value:"Degree Celsius"}],bn=[{label:"Armpit",value:"Armpit"},{label:"Forehead",value:"Forehead"},{label:"Anus",value:"Anus"},{label:"Mouth",value:"Mouth"},{label:"Ear",value:"Ear"}],yn=[{label:"Sitting",value:"Sitting"},{label:"Standing",value:"Standing"}],En=[{label:"Scheduled",value:sn},{label:"Cancelled",value:dn},{label:"Engaged",value:on}],vn=[{label:"Success",value:"SUCCESSFUL"},{label:"Failed",value:"FAILED"},{label:"Pending",value:"PENDING"}],_n=[{label:"OPD",value:"OPD"},{label:"IPD",value:"IPD"}],kn=[{label:"ADMIN",value:"1"},{label:"CLINIC_ADMIN",value:"2"}];function On(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Pn(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?On(a,!0).forEach(function(t){Object(u.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):On(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var jn=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).loadData=function(){var e=Object(f.a)(a);ht(gt(U,[a.props.active_practiceId]),function(t){var a=!0,n={},i={};if(t.length&&t[0]){var r=t[0];hn.forEach(function(e){n[e]=r[e],i["is_two_sessions_".concat(e)]=r["is_two_sessions_".concat(e)]}),a=r.visting_hour_same_week,i.is_two_sessions=r.is_two_sessions}t.length?e.setState({timings:t[0],visting_hour_same_week:a,openPracticeDays:n,twoSessions:i}):(e.setState({timings:{},visting_hour_same_week:a,openPracticeDays:n,twoSessions:i}),bt(O,"Doctors visit timing is empty"))},function(){},{doctor:a.state.doctorId})},a.handleSubmit=function(e){var t=Object(f.a)(a);e.preventDefault(),a.props.form.validateFieldsAndScroll(function(e,n){if(!e){console.log(n);var i=Pn({},n);i.first_start_time&&(i.first_start_time=ya()(i.first_start_time).format("HH:mm")),i.first_end_time&&(i.first_end_time=ya()(i.first_end_time).format("HH:mm")),i.second_start_time&&(i.second_start_time=ya()(i.second_start_time).format("HH:mm")),i.second_end_time&&(i.second_end_time=ya()(i.second_end_time).format("HH:mm")),i.doctor=t.state.doctorId,hn.forEach(function(e){i["first_start_time_".concat(e)]&&(i["first_start_time_".concat(e)]=ya()(i["first_start_time_".concat(e)]).format("HH:mm")),i["first_end_time_".concat(e)]&&(i["first_end_time_".concat(e)]=ya()(i["first_end_time_".concat(e)]).format("HH:mm")),i["second_start_time_".concat(e)]&&(i["second_start_time_".concat(e)]=ya()(i["second_start_time_".concat(e)]).format("HH:mm")),i["second_end_time_".concat(e)]&&(i["second_end_time_".concat(e)]=ya()(i["second_end_time_".concat(e)]).format("HH:mm"))}),t.state.timings&&(i.id=t.state.timings.id);dt(gt(U,[a.props.active_practiceId]),i,function(e){t.props.history.goBack(),t.props.loadData&&t.props.loadData(),bt(k,"Doctor Timings Saved successfully!!")},function(){})}})},a.changeVistingHourSameWeek=function(e){console.log(e.target),a.setState(Object(u.a)({},e.target.id,e.target.checked))},a.changeOpenPracticeDays=function(e,t){a.setState(function(a){return{openPracticeDays:Pn({},a.openPracticeDays,Object(u.a)({},e,t))}})},a.changePracticeTwoSessions=function(e,t){a.setState(function(a){return{twoSessions:Pn({},a.twoSessions,Object(u.a)({},e,t))}})},a.state={doctorId:a.props.match.params.docId,timings:null,openPracticeDays:{},visting_hour_same_week:!0,twoSessions:{}},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.state.doctorId&&this.loadData()}},{key:"render",value:function(){var e=this;if(this.state.doctorId){if(this.state.timings){var t=this,a=this.props.formLayout?this.props.formLayout:{labelCol:{span:12},wrapperCol:{span:12}},n=this.props.form.getFieldDecorator;return i.a.createElement("div",null,i.a.createElement(ia.a,null,i.a.createElement(fa.a,{onSubmit:this.handleSubmit},i.a.createElement(fa.a.Item,Object.assign({key:"visting_hour_same_week"},a),n("visting_hour_same_week",{valuePropName:"checked",initialValue:!!t.state.timings&&t.state.visting_hour_same_week},{rules:[{message:rt}]})(i.a.createElement(sa.a,{onChange:this.changeVistingHourSameWeek},"Visiting hours are  same for all working days in a week"))),i.a.createElement(na.a,{style:{margin:4}}),this.state.visting_hour_same_week?i.a.createElement("div",null,i.a.createElement(Zt.a,null,i.a.createElement(ea.a,{span:4}),i.a.createElement(ea.a,{span:18},i.a.createElement(fa.a.Item,Object.assign({key:"is_two_sessions"},a),n("is_two_sessions",{valuePropName:"checked",initialValue:!!t.state.timings&&(t.state.timings.is_two_sessions||t.state.twoSessions.is_two_sessions)},{rules:[{message:rt}]})(i.a.createElement(sa.a,{onChange:function(t){return e.changePracticeTwoSessions("is_two_sessions",t.target.checked)}},"Practice operates in two sessions."))),i.a.createElement(Zt.a,{gutter:16},i.a.createElement(ea.a,{span:12},i.a.createElement(fa.a.Item,Object.assign({key:"first_start_time",label:"Practice Starts At"},a),n("first_start_time",{initialValue:t.state.timings&&t.state.timings.first_start_time?ya()(t.state.timings.first_start_time,"HH:mm"):null,rules:[{required:!0,message:rt}]})(i.a.createElement(da.a,{format:"HH:mm"})))),t.state.twoSessions.is_two_sessions?i.a.createElement("div",null,i.a.createElement(ea.a,{span:12},i.a.createElement(fa.a.Item,Object.assign({key:"first_end_time",label:"Lunch At"},a),n("first_end_time",{initialValue:t.state.timings&&t.state.timings.first_end_time?ya()(t.state.timings.first_end_time,"HH:mm"):null,rules:[{required:!0,message:rt}]})(i.a.createElement(da.a,{format:"HH:mm"})))),i.a.createElement(ea.a,{span:12},i.a.createElement(fa.a.Item,Object.assign({key:"second_start_time",label:"Resume At"},a),n("second_start_time",{initialValue:t.state.timings&&t.state.timings.second_start_time?ya()(t.state.timings.second_start_time,"HH:mm"):null,rules:[{required:!0,message:rt}]})(i.a.createElement(da.a,{format:"HH:mm"}))))):null,i.a.createElement(ea.a,{span:12},i.a.createElement(fa.a.Item,Object.assign({key:"second_end_time",label:"Practice Ends At"},a),n("second_end_time",{initialValue:t.state.timings&&t.state.timings.second_end_time?ya()(t.state.timings.second_end_time,"HH:mm"):null,rules:[{required:!0,message:rt}]})(i.a.createElement(da.a,{format:"HH:mm"}))))))),i.a.createElement(na.a,{style:{margin:4}})):hn.map(function(r){return i.a.createElement("div",{key:r},i.a.createElement(Zt.a,null,i.a.createElement(ea.a,{span:4},i.a.createElement("h4",null,r.replace(/^\w/,function(e){return e.toUpperCase()}))),i.a.createElement(ea.a,{span:18},i.a.createElement(fa.a.Item,Object.assign({key:"".concat(r)},a),n("".concat(r),{valuePropName:"checked",initialValue:!!t.state.timings&&(t.state.timings["".concat(r)]||t.state.openPracticeDays[r])},{rules:[{message:rt}]})(i.a.createElement(sa.a,{onChange:function(e){return t.changeOpenPracticeDays(r,e.target.checked)}},"Practice is open on ".concat(r.replace(/^\w/,function(e){return e.toUpperCase()}))))),t.state.openPracticeDays[r]?i.a.createElement("div",null,i.a.createElement(fa.a.Item,Object.assign({key:"is_two_sessions_".concat(r)},a),n("is_two_sessions_".concat(r),{valuePropName:"checked",initialValue:!!t.state.timings&&(t.state.timings["is_two_sessions_".concat(r)]||t.state.twoSessions["is_two_sessions_".concat(r)])},{rules:[{message:rt}]})(i.a.createElement(sa.a,{onChange:function(t){return e.changePracticeTwoSessions("is_two_sessions_".concat(r),t.target.checked)}},"Practice operates in two sessions."))),i.a.createElement(Zt.a,{gutter:16},i.a.createElement(ea.a,{span:12},i.a.createElement(fa.a.Item,Object.assign({key:"first_start_time_".concat(r),label:"Practice Starts At"},a),n("first_start_time_".concat(r),{initialValue:t.state.timings&&t.state.timings["first_start_time_".concat(r)]?ya()(t.state.timings["first_start_time_".concat(r)],"HH:mm"):null,rules:[{required:!0,message:rt}]})(i.a.createElement(da.a,{format:"HH:mm"})))),t.state.twoSessions["is_two_sessions_".concat(r)]?i.a.createElement("div",null,i.a.createElement(ea.a,{span:12},i.a.createElement(fa.a.Item,Object.assign({key:"first_end_time_".concat(r),label:"Lunch At"},a),n("first_end_time_".concat(r),{initialValue:t.state.timings&&t.state.timings["first_end_time_".concat(r)]?ya()(t.state.timings["first_end_time_".concat(r)],"HH:mm"):null,rules:[{required:!0,message:rt}]})(i.a.createElement(da.a,{format:"HH:mm"})))),i.a.createElement(ea.a,{span:12},i.a.createElement(fa.a.Item,Object.assign({key:"second_start_time_".concat(r),label:"Resume At"},a),n("second_start_time_".concat(r),{initialValue:t.state.timings&&t.state.timings["second_start_time_".concat(r)]?ya()(t.state.timings["second_start_time_".concat(r)],"HH:mm"):null,rules:[{required:!0,message:rt}]})(i.a.createElement(da.a,{format:"HH:mm"}))))):null,i.a.createElement(ea.a,{span:12},i.a.createElement(fa.a.Item,Object.assign({key:"second_end_time_".concat(r),label:"Practice Ends At"},a),n("second_end_time_".concat(r),{initialValue:t.state.timings&&t.state.timings["second_end_time_".concat(r)]?ya()(t.state.timings["second_end_time_".concat(r)],"HH:mm"):null,rules:[{required:!0,message:rt}]})(i.a.createElement(da.a,{format:"HH:mm"})))))):null)),i.a.createElement(na.a,{style:{margin:4}}))}),i.a.createElement(fa.a.Item,a,i.a.createElement(Vt.a,{loading:t.state.loading,type:"primary",htmlType:"submit",style:{margin:5}},"Submit"),t.props.history?i.a.createElement(Vt.a,{style:{margin:5},onClick:function(){return t.props.history.goBack()}},"Cancel"):null))))}return i.a.createElement(ia.a,{loading:!0})}return i.a.createElement(b.a,{to:"/settings/clinics-staff"})}}]),t}(i.a.Component),Dn=fa.a.create()(jn);function Sn(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function xn(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Sn(a,!0).forEach(function(t){Object(u.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Sn(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var In=ta.a.Column,Cn=(ta.a.ColumnGroup,oa.a.TabPane);function wn(e){return ya()(e,"HH:mm").format("HH:mm")}var Tn=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).getAllPermissions=function(){var e=Object(f.a)(a);ht(W,function(t){e.setState({allPermissions:t.practice_permissions,allGlobalPermissions:t.global_permissions})},function(){})},a.handleClick=function(e){a.setState({current:e.key})},a.loadDoctorsTiming=function(){var e=Object(f.a)(a),t=e.state.practice_doctors.map(function(e){return e.id});ht(gt(U,[a.props.active_practiceId]),function(t){e.setState(function(e){var a={};return t.forEach(function(e){a[e.doctor.id]=e}),{doctorsTiming:a}})},function(){},{doctor:t.join(",")})},a.changeTab=function(e){a.setState({defaultActiveTab:e}),a.props.history.push("/settings/clinics-staff"+e)},a.toggleEnableStaffPractice=function(e,t){var n=Object(f.a)(a);dt(gt(G,[e]),{practice:n.props.active_practiceId,is_active:!!t},function(e){bt(k,t?"Staff enabled for this practice successfully!!":"Staff disabled for this practice successfully!!"),n.admin_StaffData()},function(){})},a.state={current:"staff",practice_staff:[],practice_doctors:[],roles:null,permissionEditModal:!1,editPermissions:{},allPermissions:[],allGlobalPermissions:[],loading:!0,defaultActiveTab:a.props.location.hash,doctorsTiming:{}},a.setPermission=a.setPermission.bind(Object(f.a)(a)),a.staffRoles(),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.getAllPermissions(),this.loadData()}},{key:"setPermission",value:function(e,t,a,n){var i=this,r=a.target.checked;if(this.setState(function(t){var a=xn({},t.editPermissions[e]);return a.loading=!0,{editPermissions:xn({},t.editPermissions,Object(u.a)({},e,a))}}),r){var l={name:t,codename:e,is_active:!0,practice:n?i.props.active_practiceId:null,staff:i.state.currentUser};dt("user_permissions/",l,function(t){i.setState(function(a){return{editPermissions:xn({},a.editPermissions,Object(u.a)({},e,t))}})},function(){})}else if(i.state.editPermissions[e].id){pt(gt("user_permissions/%s/",[i.state.editPermissions[e].id]),{is_active:!1},function(e){i.setState(function(t){return{editPermissions:xn({},t.editPermissions,Object(u.a)({},e.codename,void 0))}})},function(){})}}},{key:"editPermissions",value:function(e){var t=this;if(!e)return t.setState({permissionEditModal:!1}),!0;t.setState({permissionEditModal:!0,editPermissions:[],currentUser:e});ht(gt("user_permissions/?staff=%s&practice=%s",[e,t.props.active_practiceId]),function(e){var a={};e.forEach(function(e){a[e.codename]=e}),t.setState({editPermissions:a})},function(){})}},{key:"loadData",value:function(){this.admin_StaffData()}},{key:"deleteStaff",value:function(e){var t=this;!function(e,t,a){_()({method:"delete",url:ct(e),headers:{Authorization:"Token "+Ct()}}).then(function(e){console.log(e);var a=e.data;t(a),a.detail&&bt(k,a.detail)}).catch(function(e){console.log("Error aa rhi ",e),ft(e),a()})}(gt("staff/%s/",[e]),function(e){t.loadData(),console.log("Deleted")},function(){})}},{key:"staffRoles",value:function(){var e=this;ht("staff/roles/",function(t){e.setState({roles:t})},function(){})}},{key:"admin_StaffData",value:function(){var e=this;ht(gt(z,[this.props.active_practiceId]),function(t){var a=[],n=[];t.staff.forEach(function(e){"3"==e.role?a.push(e):n.push(e)}),e.setState({practice_doctors:a,practice_staff:n,loading:!1},function(){e.loadDoctorsTiming()})},function(){e.setState({loading:!1})},{all:!0})}},{key:"clinicData",value:function(){var e=Dt(),t=(Object.keys(e),this);ht(gt(z,[this.props.active_practiceId]),function(e){var a=[],n=[];e.staff.forEach(function(e){"3"==e.role?a.push(e):n.push(e)}),t.setState({practice_doctors:a,practice_staff:n},function(){t.loadDoctorsTiming()})},function(){})}},{key:"render",value:function(){var e=this,t=this,a=[{title:"Name",dataIndex:"user.first_name",key:"name"},{title:"Email",dataIndex:"user.email",key:"email",render:function(e,t){return t.user&&t.user.is_active?t.user.email:e}},{title:"Mobile",dataIndex:"user.mobile",key:"mobile"},{title:"Registration Number",dataIndex:"registration_number",key:"registration_number"},{title:"Enable Staff",dataIndex:"in_practice",key:"enable_staff",render:function(e,a){return a.user&&a.user.is_superuser?i.a.createElement(Mt.a,{color:"red"},"Not Allowed"):i.a.createElement(ca.a,{defaultChecked:!!e,onChange:function(e){return t.toggleEnableStaffPractice(a.id,e)}})}},{title:"Last Login",key:"user",render:function(e,t){return t.user&&t.user.is_active?t.user.last_login?ya()(t.user.last_login).fromNow():"--":i.a.createElement(Mt.a,{color:"#f50"},"Activation Pending")}},{title:"Action",key:"action",render:function(e,a){return a.user&&a.user.is_superuser?i.a.createElement(Mt.a,{color:"red"},"SuperUser"):i.a.createElement("span",null,i.a.createElement(qt.b,{to:"/settings/clinics-staff/"+a.id+"/edit"},i.a.createElement("a",null,"Edit")),i.a.createElement(na.a,{type:"vertical"}),i.a.createElement("a",{onClick:function(){return t.editPermissions(a.id)},disabled:!a.in_practice},"Permissions"),i.a.createElement(na.a,{type:"vertical"}),i.a.createElement(aa.a,{title:"Are you sure delete this staff?",onConfirm:function(){return t.deleteStaff(a.id)},okText:"Yes",cancelText:"No"},i.a.createElement("a",null,"Delete")))}}],n=[{title:"Name",dataIndex:"user.first_name",key:"name"},{title:"Email",dataIndex:"user.email",key:"email",render:function(e,t){return t.user&&t.user.is_active?t.user.email:e}},{title:"Mobile",dataIndex:"user.mobile",key:"mobile"},{title:"Enable Staff",dataIndex:"in_practice",key:"enable_staff",render:function(e,a){return a.user&&a.user.is_superuser?i.a.createElement(Mt.a,{color:"red"},"Not Allowed"):i.a.createElement(ca.a,{defaultChecked:!!e,onChange:function(e){return t.toggleEnableStaffPractice(a.id,e)}})}},{title:"Last Login",key:"user",render:function(e,t){return t.user&&t.user.is_active?t.user.last_login?ya()(t.user.last_login).fromNow():"--":i.a.createElement(Mt.a,{color:"#f50"},"Activation Pending")}},{title:"Action",key:"action",render:function(e,a){return a.user&&a.user.is_superuser?i.a.createElement(Mt.a,{color:"red"},"SuperUser"):i.a.createElement("span",null,i.a.createElement(qt.b,{to:"/settings/clinics-staff/staff/"+a.id+"/edit"},i.a.createElement("a",null,"Edit")),i.a.createElement(na.a,{type:"vertical"}),i.a.createElement("a",{onClick:function(){return t.editPermissions(a.id)},disabled:!a.in_practice},"Permissions"),i.a.createElement(na.a,{type:"vertical"}),i.a.createElement(aa.a,{title:"Are you sure delete this staff?",onConfirm:function(){return t.deleteStaff(a.id)},okText:"Yes",cancelText:"No"},i.a.createElement("a",null,"Delete")))}}],r=[{title:"Name",dataIndex:"user.first_name",key:"name"},{title:"Confirmation SMS",dataIndex:"confirmation_sms",key:"confirmation_sms",render:function(e){return i.a.createElement("span",null,i.a.createElement(sa.a,{checked:e}))}},{title:"Schedule SMS",dataIndex:"schedule_sms",key:"schedule_sms",render:function(e){return i.a.createElement("span",null,i.a.createElement(sa.a,{checked:e}))}},{title:"Confirmation EMAIL",dataIndex:"confirmation_email",key:"confirmation_email",render:function(e){return i.a.createElement("span",null,i.a.createElement(sa.a,{checked:e}))}},{title:"Online Appointment SMS",dataIndex:"online_appointment_sms",key:"online_appointment_sms",render:function(e){return i.a.createElement(sa.a,{checked:e})}},{title:"Action",key:"action",render:function(e,t){return t.user&&t.user.is_superuser?i.a.createElement(Mt.a,null," Not Allowed"):i.a.createElement("span",null,i.a.createElement(qt.b,{to:"/settings/clinics-staff/"+t.id+"/edit"},i.a.createElement("a",null,"Edit")))}}],l=[{title:"Name",dataIndex:"user.first_name",key:"name"},{title:"Confirmation SMS",dataIndex:"confirmation_sms",key:"confirmation_sms",render:function(e){return i.a.createElement("span",null,i.a.createElement(sa.a,{checked:e}))}},{title:"Schedule SMS",dataIndex:"schedule_sms",key:"schedule_sms",render:function(e){return i.a.createElement("span",null,i.a.createElement(sa.a,{checked:e}))}},{title:"Confirmation EMAIL",dataIndex:"confirmation_email",key:"confirmation_email",render:function(e){return i.a.createElement("span",null,i.a.createElement(sa.a,{checked:e}))}},{title:"Online Appointment SMS",dataIndex:"online_appointment_sms",key:"online_appointment_sms",render:function(e){return i.a.createElement(sa.a,{checked:e})}},{title:"Action",key:"action",render:function(e,t){return t.user&&t.is_superuser?i.a.createElement(Mt.a,null," Not Allowed"):i.a.createElement("span",null,i.a.createElement(qt.b,{to:"/settings/clinics-staff/staff/"+t.id+"/edit"},i.a.createElement("a",null,"Edit")))}}];return i.a.createElement(Zt.a,null,i.a.createElement("h2",null,"Practice Staff"),i.a.createElement(b.d,null,i.a.createElement(b.b,{path:"/settings/clinics-staff/:docId/edit-timing",render:function(a){return i.a.createElement(Dn,Object.assign({},e.props,a,{loadData:t.loadData}))}}),i.a.createElement(b.b,null,i.a.createElement(ia.a,null,i.a.createElement(oa.a,{defaultActiveKey:this.state.defaultActiveTab,onChange:this.changeTab},i.a.createElement(Cn,{tab:i.a.createElement("span",null,i.a.createElement(Bt.a,{type:"user-add"}),"Manage Staff"),key:"#staff"},i.a.createElement("h2",null,"Doctors",i.a.createElement(qt.b,{to:"/settings/clinics-staff/adddoctor"},i.a.createElement(Vt.a,{type:"primary",style:{float:"right"}},i.a.createElement(Bt.a,{type:"plus"}),"\xa0Add Doctor")),i.a.createElement(qt.b,{to:"/settings/clinics-staff/addstaff"},i.a.createElement(Vt.a,{type:"primary",style:{float:"right",marginRight:"5px"}},i.a.createElement(Bt.a,{type:"plus"}),"\xa0Add Staff"))),i.a.createElement(ta.a,{loading:this.state.loading,pagination:!1,columns:a,dataSource:this.state.practice_doctors}),i.a.createElement(na.a,null),i.a.createElement("h2",null,"Staff "),i.a.createElement(ta.a,{loading:this.state.loading,pagination:!1,columns:n,dataSource:this.state.practice_staff})),i.a.createElement(Cn,{tab:i.a.createElement("span",null,i.a.createElement(Bt.a,{type:"team"}),"Staff Notification"),key:"#notification"},i.a.createElement("h2",null,"Doctors"),i.a.createElement(ta.a,{loading:this.state.loading,pagination:!1,columns:r,dataSource:this.state.practice_doctors}),i.a.createElement(na.a,null),i.a.createElement("h2",null,"Staff"),i.a.createElement(ta.a,{loading:this.state.loading,pagination:!1,columns:l,dataSource:this.state.practice_staff})),i.a.createElement(Cn,{tab:i.a.createElement("span",null,i.a.createElement(Bt.a,{type:"schedule"}),"Doctors visit Timing"),key:"#timing"},i.a.createElement(ta.a,{loading:this.state.loading,dataSource:this.state.practice_doctors},i.a.createElement(In,{title:"Name",dataIndex:"user.first_name",key:"name"}),i.a.createElement(In,{title:"Visit Timing",dataIndex:"loginstatus",key:"VisitTiming",render:function(e,a){return function(e){if(e)return e.visting_hour_same_week?i.a.createElement("span",null,i.a.createElement("b",null,"Mon-Sun : "),wn(e.first_start_time),e.is_two_sessions?"-"+wn(e.first_end_time)+" ||LUNCH|| "+wn(e.second_start_time):null,"-",wn(e.second_end_time)):hn.map(function(t){return e[t]?i.a.createElement("span",null,i.a.createElement("b",null,t," : "),wn(e["first_start_time_".concat(t)]),e["is_two_sessions_".concat(t)]?"-"+wn(e["first_end_time_".concat(t)])+"||LUNCH||"+wn(e["second_start_time_".concat(t)]):null,"-",wn(e["second_end_time_".concat(t)]),i.a.createElement("br",null)):null});return null}(t.state.doctorsTiming[a.id])}}),i.a.createElement(In,{title:"Action",key:"action",render:function(e,t){return i.a.createElement(qt.b,{to:"/settings/clinics-staff/"+t.id+"/edit-timing"},i.a.createElement("a",null,"Edit Timing"))}})))),i.a.createElement($t.a,{title:"Edit Permissions",visible:this.state.permissionEditModal,onCancel:function(){return e.editPermissions()},footer:null},t.state.allPermissions.map(function(a){return i.a.createElement(sa.a,{value:a.codename,checked:t.state.editPermissions[a.codename],disabled:t.state.editPermissions[a.codename]&&t.state.editPermissions[a.codename].loading,onClick:function(t){return e.setPermission(a.codename,a.name,t,!0)},style:{display:"list-item"}},a.id," ",a.name)}),i.a.createElement(na.a,null,"Global Permissions"),t.state.allGlobalPermissions.map(function(a){return i.a.createElement(sa.a,{value:a.codename,checked:t.state.editPermissions[a.codename],disabled:t.state.editPermissions[a.codename]&&t.state.editPermissions[a.codename].loading,onClick:function(t){return e.setPermission(a.codename,a.name,t,!1)},style:{display:"list-item"}},a.id," ",a.name)}))))))}}]),t}(i.a.Component),An=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={redirect:!1,editStaff:null,roles:[]},a.changeRedirect=a.changeRedirect.bind(Object(f.a)(a)),a.loadEditPracticeStaff=a.loadEditPracticeStaff.bind(Object(f.a)(a)),a.props.match.params.doctorid&&a.loadEditPracticeStaff(),a.staffRoles(),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"staffRoles",value:function(){var e=this;ht("staff/roles/",function(t){e.setState({roles:t})},function(){})}},{key:"loadEditPracticeStaff",value:function(){var e=this.props.match.params.doctorid;console.log(e);var t=this;ht(gt("staff/%s/",[e]),function(e){t.setState({editStaff:e})},function(){t.setState({})})}},{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"render",value:function(){var e=this,t=this;console.log("props",t.props);var a,n=[{label:"Doctor",key:"user.first_name",required:!0,placeholder:"Doctor Name",initialValue:this.state.editStaff?this.state.editStaff.user.first_name:null,type:D},{label:"Mobile Number",key:"user.mobile",placeholder:"Mobile Number",required:!0,initialValue:this.state.editStaff?this.state.editStaff.user.mobile:null,type:D,disabled:!!this.state.editStaff},{label:"Email Id",key:"user.email",placeholder:"Email Id",required:!0,disabled:!!this.state.editStaff,initialValue:this.state.editStaff?this.state.editStaff.user.email:null,type:"email"},{label:"Registration Number",key:"registration_number",placeholder:"Registration Number",initialValue:this.state.editStaff?this.state.editStaff.registration_number:null,type:D},{label:"Calendar Colour",key:"calendar_colour",initialValue:this.state.editStaff?this.state.editStaff.calendar_colour:null,type:"colorpicker",required:!0},{label:"Schedule SMS",key:"schedule_sms",initialValue:!!this.state.editStaff&&this.state.editStaff.schedule_sms,type:"singlecheckbox"},{label:"Confirmation SMS",key:"confirmation_sms",initialValue:!!this.state.editStaff&&this.state.editStaff.confirmation_sms,type:"singlecheckbox"},{label:"Confirmation Email",key:"confirmation_email",initialValue:!!this.state.editStaff&&this.state.editStaff.confirmation_email,type:"singlecheckbox"},{label:"Online Appointment SMS",key:"online_appointment_sms",initialValue:!!this.state.editStaff&&this.state.editStaff.online_appointment_sms,type:"singlecheckbox"}],r={successFn:function(e){bt(k,"success"),console.log("all data",e),t.setState({redirect:!1}),t.props.loadData()},errorFn:function(){},action:"staff/",method:"post"};this.state.editStaff&&(a={successFn:function(e){bt(k,"success"),t.setState({redirect:!0}),t.props.loadData()},errorFn:function(){},action:gt("staff/%s/",[t.props.match.params.doctorid]),method:"put"});var l=[{key:"role",value:[3]}],s=fa.a.create()(La);return i.a.createElement(Zt.a,null,i.a.createElement(ia.a,null,i.a.createElement(b.b,{exact:!0,path:"/settings/clinics-staff/:doctorid/edit",render:function(t){return e.props.match.params.doctorid?i.a.createElement(s,Object.assign({defaultValues:l,title:"Edit Doctor",changeRedirect:e.changeRedirect,formProp:a,fields:n},t)):i.a.createElement(b.a,{to:"/settings/clinics-staff"})}}),i.a.createElement(b.b,{exact:!0,path:"/settings/clinics-staff/adddoctor",render:function(t){return i.a.createElement(s,Object.assign({defaultValues:l,changeRedirect:e.changeRedirect,title:"Add Doctor ",formProp:r,fields:n},t))}})),this.state.redirect&&i.a.createElement(b.a,{to:"/settings/clinics-staff"}))}}]),t}(i.a.Component),Mn=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={redirect:!1,editStaff:null},a.changeRedirect=a.changeRedirect.bind(Object(f.a)(a)),a.loadEditPracticeStaff=a.loadEditPracticeStaff.bind(Object(f.a)(a)),a.props.match.params.staffid&&a.loadEditPracticeStaff(),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"loadEditPracticeStaff",value:function(){var e=this.props.match.params.staffid;console.log(e);var t=this;ht(gt("staff/%s/",[e]),function(e){t.setState({editStaff:e})},function(){t.setState({})})}},{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"render",value:function(){var e,t=this,a=this,n=[{label:"Staff Name",key:"user.first_name",required:!0,placeholder:"Staff Name",initialValue:this.state.editStaff?this.state.editStaff.user.first_name:null,type:D},{label:"Mobile Number",key:"user.mobile",placeholder:"Mobile Number",required:!0,initialValue:this.state.editStaff?this.state.editStaff.user.mobile:null,type:D,disabled:!!this.state.editStaff},{label:"Email Id",key:"user.email",placeholder:"Email Id",required:!0,disabled:!!this.state.editStaff,initialValue:this.state.editStaff?this.state.editStaff.user.email:null,type:"email"},{label:"Role",key:"role",required:!0,initialValue:this.state.editStaff?this.state.editStaff.role:null,type:S,options:kn.map(function(e){return{label:e.label,value:[e.value]}})},{label:"Schedule SMS",key:"schedule_sms",initialValue:!!this.state.editStaff&&this.state.editStaff.schedule_sms,type:"singlecheckbox"},{label:"Confirmation SMS",key:"confirmation_sms",initialValue:!!this.state.editStaff&&this.state.editStaff.confirmation_sms,type:"singlecheckbox"},{label:"Confirmation Email",key:"confirmation_email",initialValue:!!this.state.editStaff&&this.state.editStaff.confirmation_email,type:"singlecheckbox"},{label:"Online Appointment SMS",key:"online_appointment_sms",initialValue:!!this.state.editStaff&&this.state.editStaff.online_appointment_sms,type:"singlecheckbox"}],r={successFn:function(e){bt(k,"success"),console.log("all data",e),a.setState({redirect:!1}),a.props.loadData()},errorFn:function(){},action:"staff/",method:"post"};this.state.editStaff&&(e={successFn:function(e){bt(k,"success"),a.setState({redirect:!0}),a.props.loadData()},errorFn:function(){},action:gt("staff/%s/",[a.props.match.params.staffid]),method:"put"});var l=[],s=fa.a.create()(La);return i.a.createElement(Zt.a,null,i.a.createElement(ia.a,null,i.a.createElement(b.b,{exact:!0,path:"/settings/clinics-staff/staff/:staffid/edit",render:function(a){return t.props.match.params.staffid?i.a.createElement(s,Object.assign({defaultValues:l,title:"Edit Staff",changeRedirect:t.changeRedirect,formProp:e,fields:n},a)):i.a.createElement(b.a,{to:"/settings/clinics-staff"})}}),i.a.createElement(b.b,{exact:!0,path:"/settings/clinics-staff/addstaff",render:function(e){return i.a.createElement(s,Object.assign({defaultValues:l,changeRedirect:t.changeRedirect,title:"Add Staff ",formProp:r,fields:n},e))}})),this.state.redirect&&i.a.createElement(b.a,{to:"/settings/clinics-staff"}))}}]),t}(i.a.Component),Ln=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={redirect:!1,specialisations:null,countries:null},a.changeRedirect=a.changeRedirect.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;ht("clinics/extra_data/",function(t){var a={};t.specialisation.forEach(function(e){a[e.id]=e}),console.log(a),e.setState({specialisations:t.specialisation,countries:t.country})},function(){})}},{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"render",value:function(){var e=[];this.state.specialisations&&this.state.specialisations.forEach(function(t){e.push({label:t.name,value:t.id})});var t=[{label:"Practice Logo",key:"logo",type:M,allowWebcam:!1},{label:"Practice Name",key:"name",placeholder:"Practice Name",required:!0,type:D},{label:"Practice Tagline",key:"tagline",placeholder:"Practice Tagline",required:!0,type:D},{label:"Practice Specialisation",key:"specialisation",placeholder:"Practice Specialisation",type:D},{label:"Practice Street Address",key:"address",placeholder:"Practice Street Address",type:D},{label:"Practice Locality",key:"locality",placeholder:"Practice Locality",type:D},{label:"Practice Country",key:"country",placeholder:"Practice Country",type:D},{label:"Practice State",key:"state",placeholder:"Practice State",type:D},{label:"Practice City",key:"city",placeholder:"Practice City",type:D},{label:"Practice PINCODE",key:"pincode",placeholder:"Practice PINCODE",type:D},{label:"Practice Contact Number",key:"contact",placeholder:"Practice Contact Number",type:D},{label:"Practice Email",key:"email",placeholder:"Practice Email",type:"email"},{label:"Practice Website",key:"website",placeholder:"Practice Website",type:D},{label:"GSTIN",key:"gstin",placeholder:"GSTIN",type:D},{label:"Invoice Prefix",placeholder:"DEL/INV/",key:"invoice_prefix",type:D,required:!0},{label:"Payment Prefix",placeholder:"DEL/RCPT/",key:"payment_prefix",type:D,required:!0},{label:"Return Prefix",placeholder:"DEL/RET/",key:"return_prefix",type:D,required:!0}],a={successFn:function(e){bt(k,"success"),console.log(e)},errorFn:function(){},action:"clinics/",method:"post"},n=fa.a.create()(La);return i.a.createElement(Zt.a,null,i.a.createElement(ia.a,null,i.a.createElement(n,Object.assign({title:"Practice Details",changeRedirect:this.changeRedirect,formProp:a,fields:t},this.props))),this.state.redirect&&i.a.createElement(b.a,{to:"/settings/clinics"}))}}]),t}(i.a.Component),Vn=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={},a.loadWishSMS=a.loadWishSMS.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.loadWishSMS()}},{key:"loadWishSMS",value:function(){var e=this;ht(gt("clinics/%s/communications/",[this.props.active_practiceId]),function(t){e.setState({wishsmsData:t[t.length-1]})},function(){})}},{key:"render",value:function(){console.log("wishSMS",this.state.wishsmsData);var e=[{key:"birthday_wish_sms",initialValue:!!this.state.wishsmsData&&this.state.wishsmsData.birthday_wish_sms,type:"singlecheckbox",extra:"This SMS is sent to the Patient on the morning of their birthday",follow:i.a.createElement("b",null,"BIRTHDAY WISH SMS")},{key:"birthday_wish_text",placeholder:"{clinic}{patient}}",initialValue:this.state.wishsmsData?this.state.wishsmsData.birthday_wish_text:" ",minRows:4,type:"sms_field",options:za},{key:"anniversary_wish_sms",initialValue:!!this.state.wishsmsData&&this.state.wishsmsData.anniversary_wish_sms,type:"singlecheckbox",extra:"This SMS is sent to the Patient on the morning of their anniversary",follow:i.a.createElement("b",null,"ANNIVERSARY WISH SMS")},{key:"anniversary_wish_text",placeholder:"{anniversary}",initialValue:this.state.wishsmsData?this.state.wishsmsData.anniversary_wish_text:" ",minRows:4,type:"sms_field",options:za},{key:"online_appointment_sms",type:"singlecheckbox",initialValue:!!this.state.wishsmsData&&this.state.wishsmsData.online_appointment_sms,extra:"This SMS is sent to the Patient when they request an appointment on your practice marketing page",follow:i.a.createElement("b",null,"ONLINE APPOINTMENT SMS")},{key:"online_appointment_text",placeholder:"{online appointment}",initialValue:this.state.wishsmsData?this.state.wishsmsData.online_appointment_text:" ",minRows:4,type:"sms_field",options:za}],t={successFn:function(e){bt(k,"success")},errorFn:function(){},action:gt("clinics/%s/communications/",[this.props.active_practiceId]),method:"post"},a=[{key:"practice",value:this.props.active_practiceId},{key:"id",value:this.state.wishsmsData?this.state.wishsmsData.id:null}],n=fa.a.create()(La);return i.a.createElement("div",null,i.a.createElement(n,{formProp:t,defaultValues:a,fields:e}))}}]),t}(i.a.Component),Fn=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={redirect:!1,data:null},a.loadData=a.loadData.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){var e=this;ht(gt("clinics/%s/communications/",[this.props.active_practiceId]),function(t){console.log("length",t.length-1),e.setState({data:t[t.length-1]})},function(){})}},{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"render",value:function(){var e=[{label:"Contact Number",key:"contact_number",placeholder:"Contact Number",initialValue:this.state.data?this.state.data.contact_number:" ",extra:"Maximum 15 characters & represented as {{CLINICCONTACTNUMBER}}",type:D},{label:"Email",key:"email",placeholder:"Email Address",initialValue:this.state.data?this.state.data.email:" ",extra:"All replies by Patients for emails will be sent to this address",type:D},{label:"SMS clinic Name",key:"sms_clinic_name",placeholder:"Clinic Name",initialValue:this.state.data?this.state.data.sms_clinic_name:" ",extra:"{{CLINIC}} will use this name.",type:D},{key:"appointment_confirmation_sms",placeholder:"Appointment Confirmation SMS Text",initialValue:!!this.state.data&&this.state.data.appointment_confirmation_sms,type:"singlecheckbox",extra:"SMS is sent to the Patient on successfully adding an appointment",follow:i.a.createElement("b",null,"APPOINTMENT CONFIRMATION SMS")},{key:"appointment_confirmation_text",placeholder:"Appointment Cancellation SMS Text",initialValue:this.state.data?this.state.data.appointment_confirmation_text:null,minRows:4,type:"sms_field",options:za},{key:"appointment_cancellation_sms",initialValue:!!this.state.data&&this.state.data.appointment_cancellation_sms,type:"singlecheckbox",extra:"SMS is sent to the Patient when the appointment is cancelled",follow:i.a.createElement("b",null,"APPOINTMENT CANCELLATION SMS")},{key:"appointment_cancellation_text",placeholder:"Appointment Cancellation SMS Text",initialValue:this.state.data?this.state.data.appointment_cancellation_text:null,minRows:4,type:"sms_field",options:za},{key:"appointment_reminder_sms",placeholder:"Appointment Reminder SMS Text",initialValue:!!this.state.data&&this.state.data.appointment_reminder_sms,type:"singlecheckbox",extra:"This SMS is automatically sent to the Patient at selected time & date before the appointment.",follow:i.a.createElement("b",null,"APPOINTMENT REMINDER SMS")},{key:"appointment_reminder_text",placeholder:"Appointment Reminder SMS Text",initialValue:this.state.data?this.state.data.appointment_reminder_text:null,minRows:4,type:"sms_field",options:za},{key:"send_on_day_of_appointment",initialValue:!!this.state.data&&this.state.data.send_on_day_of_appointment,type:"singlecheckbox",follow:"Send reminder SMS on the day of appointment at 7:30 AM"},{key:"send_on_day_of_appointment",initialValue:!!this.state.data&&this.state.data.send_on_day_of_appointment,follow:"Send reminder SMS on the day before the appointment at",type:"singlecheckbox"},{key:"send_on_day_of_appointment_time",initialValue:this.state.data&&ya()(this.state.data.send_on_day_of_appointment_time).isValid()?ya()(this.state.data.send_on_day_of_appointment_time):null,type:T},{key:"follow_up_reminder_sms",initialValue:!!this.state.data&&this.state.data.follow_up_reminder_sms,type:"singlecheckbox",extra:"This SMS is sent to the Patient on the morning of the followup sms.",follow:i.a.createElement("b",null,"FOLLOW UP REMINDER SMS")},{key:"follow_up_reminder_sms_text",placeholder:"Follow-up Reminder SMS Text",initialValue:this.state.data?this.state.data.follow_up_reminder_sms_text:null,minRows:4,type:"sms_field",options:za},{key:"send_follow_up_reminder_time",initialValue:this.state.data?this.state.data.send_follow_up_reminder_time:null,extra:"Time to Send follow-up SMS after the last appointment.",type:S,options:[{label:"1 Month",value:1},{label:"3 Month",value:3},{label:"6 Month",value:6}]},{key:"payment_sms",initialValue:!!this.state.data&&this.state.data.payment_sms,type:"singlecheckbox",extra:"This SMS is sent to the Patient when payment is received.",follow:i.a.createElement("b",null,"PAYMENT SMS")},{key:"payment_sms_text",placeholder:"Payment SMS Text",initialValue:this.state.data?this.state.data.payment_sms_text:null,minRows:4,type:"sms_field",options:za},{key:"lab_order_confirmation_sms",initialValue:!!this.state.data&&this.state.data.lab_order_confirmation_sms,type:"singlecheckbox",extra:"This SMS is sent to the Patient when he is prescribed a lab order.",follow:i.a.createElement("b",null,"LAB ORDER CONFIRMATION SMS")},{key:"lab_order_confirmation_text",placeholder:"Lab Order Confirmation SMS Text",initialValue:this.state.data?this.state.data.lab_order_confirmation_text:null,minRows:4,type:"sms_field",options:za},{key:"lab_order_due_on_sms",placeholder:"Lab Order Due On SMS Text",initialValue:!!this.state.data&&this.state.data.lab_order_due_on_sms,extra:"This SMS is sent to the Patient informing lab order due date",type:"singlecheckbox",follow:i.a.createElement("b",null,"LAB ORDER DUE ON SMS")},{key:"lab_order_result_sms",initialValue:!!this.state.data&&this.state.data.lab_order_result_sms,extra:"This SMS is sent to the Patient when lab order results are ready",type:"singlecheckbox",follow:i.a.createElement("b",null,"LAB ORDER RESULT SMS")},{key:"lab_order_reminder_sms",initialValue:!!this.state.data&&this.state.data.lab_order_reminder_sms,type:"singlecheckbox",extra:"This reminder SMS is sent to the Patient",follow:i.a.createElement("b",null,"LAB ORDER REMINDER SMS")}],t={successFn:function(e){bt(k,"success")},errorFn:function(){},action:gt("clinics/%s/communications/",[this.props.active_practiceId]),method:"post"},a=[{key:"practice",value:this.props.active_practiceId},{key:"id",value:this.state.data?this.state.data.id:null}],n=fa.a.create()(La);return i.a.createElement("div",null,i.a.createElement(n,Object.assign({formProp:t,defaultValues:a,fields:e},this.props)))}}]),t}(i.a.Component),Rn=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={},a.loadData=a.loadData.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){var e=this;ht(gt("clinics/%s/email_communications/",[this.props.active_practiceId]),function(t){e.setState({data:t[0]})},function(){})}},{key:"render",value:function(){var e=[{key:"appointment_confirmation_email",initialValue:!!this.state.data&&this.state.data.appointment_confirmation_email,type:"singlecheckbox",follow:i.a.createElement("b",null,"APPOINTMENT CONFIRMATION EMAIL"),options:[],extra:"Email is sent to the Patient on successfully adding an appointment"},{key:"appointment_confirmation_email_text",initialValue:this.state.data?this.state.data.appointment_confirmation_email_text:"",type:"mail_field",options:za},{type:"divider_field"},{key:"appointment_cancellation_email",initialValue:!!this.state.data&&this.state.data.appointment_cancellation_email,type:"singlecheckbox",follow:i.a.createElement("b",null,"APPOINTMENT CANCELLATION EMAIL"),extra:"Email is sent to the Patient when the appointment is cancelled"},{key:"appointment_cancellation_email_text",initialValue:this.state.data?this.state.data.appointment_cancellation_email_text:"",type:"mail_field",options:za},{type:"divider_field"},{key:"appointment_reminder_email",initialValue:!!this.state.data&&this.state.data.appointment_reminder_email,type:"singlecheckbox",follow:i.a.createElement("b",null,"APPOINTMENT REMINDER EMAIL"),extra:"Email is sent to the Patient on the morning of the appointment date"},{key:"send_on_day_of_appointment",initialValue:!!this.state.data&&this.state.data.send_on_day_of_appointment,type:"singlecheckbox",follow:"Send reminder SMS on the day of appointment at 7:30 AM"},{key:"send_before_day_of_appointment",initialValue:!!this.state.data&&this.state.data.send_before_day_of_appointment,follow:"Send reminder SMS on the day before the appointment at",type:"singlecheckbox"},{key:"send_on_day_of_appointment_time",initialValue:this.state.data&&ya()(this.state.data.send_on_day_of_appointment_time).isValid()?ya()(this.state.data.send_on_day_of_appointment_time):null,type:T},{key:"appointment_cancellation_email_text",initialValue:this.state.data?this.state.data.appointment_cancellation_email_text:"",type:"mail_field",options:za},{type:"divider_field"},{key:"followup_reminder_email",initialValue:!!this.state.data&&this.state.data.followup_reminder_email,type:"singlecheckbox",follow:i.a.createElement("b",null,"FOLLOW-UP REMINDER EMAIL"),extra:"Email is sent to the Patient on the morning of their planned follow-up date"},{key:"appointment_reminder_email_text",initialValue:this.state.data?this.state.data.appointment_reminder_email_text:"",type:"mail_field",options:za},{type:"divider_field"},{key:"birthday_wish_email",initialValue:!!this.state.data&&this.state.data.birthday_wish_email,type:"singlecheckbox",follow:i.a.createElement("b",null,"BIRTHDAY WISH EMAIL"),extra:"Email is sent to the Patient on the morning of their birthday"},{key:"birthday_wish_email_text",initialValue:this.state.data?this.state.data.birthday_wish_email_text:"",type:"mail_field",options:za},{type:"divider_field"},{key:"lab_order_confirmation_email",initialValue:!!this.state.data&&this.state.data.lab_order_confirmation_email,type:"singlecheckbox",follow:i.a.createElement("b",null,"LAB ORDER CONFIRMATION EMAIL"),extra:"Email is sent to the Patient when he is prescribed a Lab Order"},{key:"lab_order_confirmation_email_text",initialValue:this.state.data?this.state.data.lab_order_confirmation_email_text:"",type:"mail_field",options:za},{type:"divider_field"},{key:"lab_order_due_date_email",initialValue:!!this.state.data&&this.state.data.lab_order_due_date_email,type:"singlecheckbox",follow:i.a.createElement("b",null,"LAB ORDER DUE DATE EMAIL"),extra:"Email is sent to the Patient when due date is entered for a Lab Order"},{key:"lab_order_due_date_email_text",initialValue:this.state.data?this.state.data.lab_order_due_date_email_text:"",type:"mail_field",options:za},{type:"divider_field"},{key:"lab_order_result_email",initialValue:!!this.state.data&&this.state.data.lab_order_result_email,type:"singlecheckbox",follow:i.a.createElement("b",null,"LAB ORDER RESULT EMAIL"),extra:"Email is sent to the Patient when result for a Lab Order is ready"},{key:"alab_order_result_email_text",initialValue:this.state.data?this.state.data.alab_order_result_email_text:"",type:"mail_field",options:za},{type:"divider_field"},{key:"anniversary_wish_email",initialValue:!!this.state.data&&this.state.data.anniversary_wish_email,type:"singlecheckbox",follow:i.a.createElement("b",null,"ANNIVERSARY WISH EMAIL"),extra:"Email is sent to the Patient on the morning of their anniversary"},{key:"anniversary_wish_email_text",initialValue:this.state.data?this.state.data.anniversary_wish_email_text:"",type:"mail_field",options:za}],t={successFn:function(e){bt(k,"Communication Settings Saved Successfully!!")},errorFn:function(){},action:gt("clinics/%s/email_communications/",[this.props.active_practiceId]),method:"post"},a=[{key:"practice",value:this.props.active_practiceId,is_active:!1},{key:"id",value:this.state.data?this.state.data.id:null}],n=fa.a.create()(La);return i.a.createElement("div",null,i.a.createElement(n,Object.assign({formProp:t,defaultValues:a,fields:e},this.props)))}}]),t}(i.a.Component),Nn=oa.a.TabPane,Bn=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(Zt.a,null,i.a.createElement("h2",null,"Communication Settings"),i.a.createElement(ia.a,null,i.a.createElement(oa.a,{defaultActiveKey:"appointmentsms"},i.a.createElement(Nn,{tab:i.a.createElement("span",null,i.a.createElement(Bt.a,{type:"schedule"}),"Appointment & FollowUp SMS"),key:"appointmentsms"},i.a.createElement(Fn,this.props)),i.a.createElement(Nn,{tab:i.a.createElement("span",null,i.a.createElement(Bt.a,{type:"mail"}),"Emails"),key:"emails"},i.a.createElement(Rn,this.props)),i.a.createElement(Nn,{tab:i.a.createElement("span",null,i.a.createElement(Bt.a,{type:"android"}),"Wish SMS"),key:"wishsms"},i.a.createElement(Vn,this.props))))))}}]),t}(i.a.Component),Hn=(i.a.Component,a(848),a(480)),qn=function(e){function t(){return Object(d.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return i.a.createElement(Zt.a,{style:{marginTop:"20px"}},i.a.createElement(Hn.a,{status:"403",title:i.a.createElement("span",null,i.a.createElement("h1",null,i.a.createElement("b",null,"403")),i.a.createElement("h2",null,"Permission Denied")),subTitle:"You don't have permission to view this page.",extra:i.a.createElement(qt.b,{to:"/"},i.a.createElement(Vt.a,{type:"primary"},"Go to Home"))}))}}]),t}(i.a.Component),Yn=a(662),zn=a.n(Yn),Gn=(a(1857),function(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n="",i=[];return a&&(e.forEach(function(e){i.push(e)}),n+=i.join(","),n+="\r\n"),t.forEach(function(t){i=[],e.forEach(function(e){t[e]?i.push(t[e]):i.push("--")}),n+=i.join(","),n+="\r\n"}),n}),Un=function(e,t){var a,n=t+".csv",i=[];i.push(255,254);for(var r=0;r<e.length;++r)a=e.charCodeAt(r),i.push(255&a),i.push(a/256>>>0);var l=new Blob([new Uint8Array(i)],{type:"text/csv;charset=UTF-16LE;"});if(navigator.msSaveBlob)navigator.msSaveBlob(l,n);else{var s=document.createElement("a");if(void 0!==s.download){var c=window.URL.createObjectURL(l);s.setAttribute("href",c),s.setAttribute("download",n),s.style.visibility="hidden",document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(c)}}};function Wn(e){e.line(10,20,200,20)}function Kn(e){e.line(10,270,200,270),e.setFontSize(8),e.text(10,275,"This is a computer generated report.")}var Qn=a(1091),Xn=a.n(Qn);function Jn(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function $n(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Jn(a,!0).forEach(function(t){Object(u.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Jn(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Zn=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).getColumnSearchProps=function(e){return{filterDropdown:function(t){var n=t.setSelectedKeys,r=t.selectedKeys,l=t.confirm,s=t.clearFilters;return i.a.createElement("div",{style:{padding:8}},i.a.createElement(ga.a,{ref:function(e){a.searchInput=e},placeholder:"Search ".concat(e),value:r[0],onChange:function(e){return n(e.target.value?[e.target.value]:[])},onPressEnter:function(){return a.handleSearch(r,l)},style:{width:188,marginBottom:8,display:"block"}}),i.a.createElement(Vt.a,{type:"primary",onClick:function(){return a.handleSearch(r,l)},icon:"search",size:"small",style:{width:90,marginRight:8}},"Search"),i.a.createElement(Vt.a,{onClick:function(){return a.handleReset(s)},size:"small",style:{width:90}},"Reset"))},filterIcon:function(e){return i.a.createElement(Bt.a,{type:"search",style:{color:e?"#1890ff":void 0}})},onFilter:function(t,a){return null!=a[e]?a[e].toString().toLowerCase().includes(t.toLowerCase()):""},onFilterDropdownVisibleChange:function(e){e&&setTimeout(function(){return a.searchInput.select()})},render:function(e){return i.a.createElement(Xn.a,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[a.state.searchText],autoEscape:!0,textToHighlight:e?e.toString():""})}}},a.handleSearch=function(e,t){t(),a.setState({searchText:e[0]})},a.handleReset=function(e){e(),a.setState({searchText:""})},a.state=$n({},e,{searchText:""}),a.excelExport=a.excelExport.bind(Object(f.a)(a)),a.pdfExport=a.pdfExport.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.columns==this.state.columns&&e.dataSource==this.state.dataSource&&e.loading==this.state.loading||this.setState($n({},e))}},{key:"pdfExport",value:function(){var e=this,t=e.state.columns.map(function(e){return{title:e.title,dataKey:e.title}}),a=[];e.state.dataSource.forEach(function(t){var n={};e.state.columns.forEach(function(e){e.export?n[e.title]=e.export(t[e.dataIndex],t):n[e.title]=t[e.dataIndex]}),a.push(n)}),function(e,t,a){!(arguments.length>3&&void 0!==arguments[3])||arguments[3];var n=new zn.a("p","mm","a4");Wn(n);var i=Object.create(t);n.autoTable(e,i,{margin:{top:35},startY:n.autoTableEndPosY()+20,headerStyle:{overflow:"linebreak"},bodyStyles:{overflow:"linebreak"}}),Kn(n),n.save(a+".pdf")}(t,a,"Export"+ya()(),!0)}},{key:"excelExport",value:function(){var e=this,t=e.state.columns.map(function(e){return e.title}),a=[];e.state.dataSource.forEach(function(t){var n={};e.state.columns.forEach(function(e){e.export?n[e.title]=e.export(t[e.dataIndex],t):n[e.title]=t[e.dataIndex]}),a.push(n)}),function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"download",n=Gn(e,t);Un(n,a)}(t,a,"Export"+ya()())}},{key:"render",value:function(){var e=this,t=this.state.columns.map(function(t){return t.render?$n({},t):$n({},t,{},e.getColumnSearchProps(t.dataIndex))});return i.a.createElement("div",null,this.props.hideReport?null:i.a.createElement(Zt.a,null,i.a.createElement(ea.a,null,i.a.createElement(Vt.a.Group,{size:"small"},i.a.createElement(Vt.a,{disabled:this.state.loading,type:"primary",onClick:this.excelExport},i.a.createElement(Bt.a,{type:"file-excel"})," Excel"),i.a.createElement(Vt.a,{disabled:this.state.loading,type:"primary",onClick:this.pdfExport},i.a.createElement(Bt.a,{type:"file-pdf"})," PDF")))),i.a.createElement(Zt.a,null,i.a.createElement(ta.a,Object.assign({pagination:{position:"both",pageSizeOptions:["10","20","30","40","50","100"],showSizeChanger:!0,showQuickJumper:!0,size:"small",showTotal:function(e,t){return i.a.createElement(Mt.a,null,"Showing ",i.a.createElement("b",null,t[0])," to ",i.a.createElement("b",null,t[1])," of ",i.a.createElement("b",null,e)," items")}}},this.state,{columns:t}))))}}]),t}(i.a.Component);i.a.Component;function ei(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var ti=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).changeNetPrice=function(e){var t=Object(f.a)(a),n=a.props.form,i=n.getFieldsValue;n.setFields;setTimeout(function(){var e=i();if(e.cost_with_tax){var a=0;e.taxes.forEach(function(e){t.state.taxes.forEach(function(t){t.id==e&&(a+=t.tax_value)})});var n=e.cost_with_tax/(1+.01*a);t.setState({retail_price:n.toFixed(2)})}else t.setState({retail_price:0})},1e3)},a.handleSubmit=function(e){var t=Object(f.a)(a);e.preventDefault(),a.props.form.validateFields(function(e,n){if(!e){var i=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ei(a,!0).forEach(function(t){Object(u.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ei(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},n,{cost:t.state.retail_price});a.state.editingProcedureData&&(i.id=a.state.editingProcedureData.id),dt(gt(J,[a.props.active_practiceId]),i,function(e){bt(k,"Procedure Updated Successfully!!"),t.props.loadData&&t.props.loadData(),t.props.history.push("settings/procedures")},function(){})}})},a.state={editingProcedureData:a.props.editingProcedureData?a.props.editingProcedureData:null,taxes:[],procedure_category:[],redirect:!1,productMargin:[],retail_price:0},a.loadTaxes=a.loadTaxes.bind(Object(f.a)(a)),a.loadProcedures=a.loadProcedures.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){if(this.loadTaxes(),this.loadProcedures(),this.loadProductMargin(),this.props.editingProcedureData&&this.setState({retail_price:this.props.editingProcedureData.cost}),this.props.history&&this.props.history.location.search){var e=this.props.history.location.search.substr(1).split("&");if(e.length){var t={},a=this.props.form.setFieldsValue;e.forEach(function(e){var n=e.split("=");n&&2==n.length&&(isNaN(n[1])||-1==n[1].toString().indexOf(".")?isNaN(n[1])?(t[n[0]]=n[1],a(Object(u.a)({},n[0],n[1]))):(t[n[0]]=parseInt(n[1]),a(Object(u.a)({},n[0],parseInt(n[1])))):(t[n[0]]=parseFloat(n[1]),a(Object(u.a)({},n[0],parseFloat(n[1])))))})}}}},{key:"loadProductMargin",value:function(){var e=this;ht("product_margin/",function(t){e.setState({productMargin:t})},function(){})}},{key:"loadProcedures",value:function(){var e=this;ht(gt(J,[this.props.active_practiceId]),function(t){e.setState({procedure_category:t})},function(){})}},{key:"loadTaxes",value:function(){var e=this;ht(gt(K,[this.props.active_practiceId]),function(t){e.setState({taxes:t})},function(){})}},{key:"render",value:function(){var e=this,t={labelCol:{span:8},wrapperCol:{span:14}},a=this.props.form.getFieldDecorator;return i.a.createElement("div",null,i.a.createElement(ia.a,null,i.a.createElement(fa.a,{onSubmit:this.handleSubmit},i.a.createElement("h2",null,this.state.editingProcedureData?"Edit Procedures":"Add Procedures"),i.a.createElement(fa.a.Item,Object.assign({label:"Procedure Name"},t),a("name",{initialValue:this.state.editingProcedureData?this.state.editingProcedureData.name:null,rules:[{required:!0,message:rt}]})(i.a.createElement(ga.a,{placeholder:"Procedure Name"}))),i.a.createElement(fa.a.Item,Object.assign({label:"Procedure Net Price"},t),a("cost_with_tax",{initialValue:this.state.editingProcedureData?this.state.editingProcedureData.cost_with_tax:null,rules:[{required:!0,message:rt}]})(i.a.createElement(pa.a,{onChange:this.changeNetPrice})),i.a.createElement("span",{className:"ant-form-text"},"INR")),i.a.createElement(fa.a.Item,Object.assign({label:"Tax"},t),a("taxes",{initialValue:this.state.editingProcedureData&&this.state.editingProcedureData.taxes?this.state.editingProcedureData.taxes.map(function(e){return e.id}):[]})(i.a.createElement(sa.a.Group,{onChange:this.changeNetPrice},this.state.taxes.map(function(e){return i.a.createElement(sa.a,{value:e.id},e.name+(e.tax_value?"("+e.tax_value+"%)":""))})))),i.a.createElement(fa.a.Item,Object.assign({label:"Procedure Retail Price"},t),i.a.createElement("span",{className:"ant-form-text"},i.a.createElement("b",null,e.state.retail_price),"\xa0INR")),i.a.createElement(fa.a.Item,Object.assign({key:"margin"},t,{label:"MLM Margin"}),a("margin",{initialValue:this.state.editingProcedureData&&this.state.editingProcedureData.margin?this.state.editingProcedureData.margin.id:null})(i.a.createElement(Lt.a,null,this.state.productMargin.map(function(e){return i.a.createElement(Lt.a.Option,{value:e.id},e.name)})))),i.a.createElement(fa.a.Item,Object.assign({key:"under"},t,{label:"Add Under"}),a("under",{initialValue:this.state.editingProcedureData?this.state.editingProcedureData.under:null})(i.a.createElement(Lt.a,null,this.state.procedure_category.map(function(e){return i.a.createElement(Lt.a.Option,{value:e.id},e.name)})))),i.a.createElement(fa.a.Item,Object.assign({label:"Default Note"},t),a("default_notes",{initialValue:this.state.editingProcedureData?this.state.editingProcedureData.default_notes:null,rules:[{required:!0,message:rt}]})(i.a.createElement(ga.a,{placeholder:"Default Note"}))),i.a.createElement(fa.a.Item,null,i.a.createElement(Vt.a,{style:{margin:5},type:"primary",htmlType:"submit"},"Submit"),e.props.history?i.a.createElement(Vt.a,{style:{margin:5},onClick:function(){return e.props.history.goBack()}},"Cancel"):null))))}}]),t}(i.a.Component),ai=fa.a.create()(ti),ni=(ta.a.Column,ta.a.ColumnGroup,oa.a.TabPane,function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).handleClick=function(e){a.setState({current:e.key})},a.state={current:"staff",procedure_category:null,editingProcedureData:null,loading:!0},a.loadProcedures=a.loadProcedures.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.loadProcedures()}},{key:"loadProcedures",value:function(){var e=this;ht(gt(J,[this.props.active_practiceId]),function(t){e.setState({procedure_category:t,loading:!1})},function(){})}},{key:"deleteObject",value:function(e){var t=this,a={id:e.id,is_active:!1};a.is_active=!1;dt(gt(J,[this.props.active_practiceId]),a,function(e){t.loadProcedures()},function(){})}},{key:"editProcedure",value:function(e){this.setState({editingProcedureData:e,loading:!1});var t="/settings/procedures/"+e.id+"/editprocedure";this.props.history.push(t)}},{key:"render",value:function(){var e=this,t=this,a=[{title:"Procedure Name",dataIndex:"name",key:"name"},{title:"Procedure Unit Cost",dataIndex:"cost_with_tax",key:"cost"},{title:"MLM Margin",dataIndex:"margin",key:"margin",render:function(e){return i.a.createElement("span",null,e?e.name:null)}},{title:"Applicable Taxes",dataIndex:"taxes",key:"taxes",render:function(e){return i.a.createElement("span",null,e&&e.length?e.map(function(e){return i.a.createElement(Mt.a,null," ",e.name,"|",i.a.createElement("b",null,e.tax_value,"%"))}):null)}},{title:"Standard Notes",dataIndex:"default_notes",key:"default_notes"},{title:"Action",key:"action",render:function(a,n){return i.a.createElement("span",null,i.a.createElement(qt.b,{to:"/settings/procedures/addprocedure?under="+n.id},"Add SubCategory"),i.a.createElement(na.a,{type:"vertical"}),i.a.createElement("a",{onClick:function(){return e.editProcedure(n)}},"Edit"),i.a.createElement(na.a,{type:"vertical"}),i.a.createElement(aa.a,{title:"Are you sure delete this?",onConfirm:function(){return t.deleteObject(n)},okText:"Yes",cancelText:"No"},i.a.createElement("a",null,"Delete")))}}];return i.a.createElement(b.d,null,i.a.createElement(b.b,{path:"/settings/procedures/addprocedure",render:function(t){return e.props.activePracticePermissions.SettingsProcedureCatalog||e.props.allowAllPermissions?i.a.createElement(ai,Object.assign({},e.props,t,{loadData:e.loadProcedures})):i.a.createElement(qn,null)}}),i.a.createElement(b.b,{exact:!0,path:"/settings/procedures/:id/editprocedure",render:function(a){return t.props.activePracticePermissions.SettingsProcedureCatalog||t.props.allowAllPermissions?t.state.editingProcedureData?i.a.createElement(ai,Object.assign({},e.state,e.props,a,{loadData:e.loadProcedures})):i.a.createElement(b.a,{to:"/settings/procedures"}):i.a.createElement(qn,null)}}),i.a.createElement(b.b,null,i.a.createElement(Zt.a,null,i.a.createElement("h2",null,"Procedures Catalog",i.a.createElement(qt.b,{to:"/settings/procedures/addprocedure"},i.a.createElement(Vt.a,{type:"primary",style:{float:"right"}},i.a.createElement(Bt.a,{type:"plus"}),"\xa0Add Procedure"))),i.a.createElement(ia.a,null,i.a.createElement(Zn,{columns:a,loading:this.state.loading,dataSource:this.state.procedure_category})))))}}]),t}(i.a.Component)),ii=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).handleCancel=function(){a.setState({visible:!1})},a.state={redirect:!1,visible:!1,modes:null},a.loadData=a.loadData.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){var e=this;ht(gt(X,[this.props.active_practiceId]),function(t){console.log("get table"),e.setState({modes:t})},function(){})}},{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"editPayment",value:function(e){this.setState({editingId:e.id,editingmode:e.mode,editingType:e.payment_type,editingFee:e.fee,visible:!0})}},{key:"deleteObject",value:function(e){var t=this,a=e;a.is_active=!1;dt(gt(X,[this.props.active_practiceId]),a,function(e){t.loadData()},function(){})}},{key:"render",value:function(){var e=this,t=this,a=[{title:"Mode of Payment",placeholder:"",dataIndex:"mode",key:"mode"},{title:"Payment Type",dataIndex:"payment_type",key:"payment_type"},{title:"Fees",dataIndex:"fee",key:"fee",render:function(e,t){return i.a.createElement("span",null,e," %")}},{title:"Action",key:"action",render:function(a,n){return i.a.createElement("span",null,i.a.createElement("a",{onClick:function(){return e.editPayment(n)}},"Edit"),i.a.createElement(na.a,{type:"vertical"}),i.a.createElement(aa.a,{title:"Are you sure delete this payment mode?",onConfirm:function(){return t.deleteObject(n)},okText:"Yes",cancelText:"No"},i.a.createElement("a",null,"Delete")))}}],n=[{label:"Mode of payment",key:"mode",required:!0,type:D},{label:"Payment Type",key:"payment_type",required:!0,type:S,options:Va},{label:"Vendor Fee",key:"fee",required:!0,type:I,min:0,follow:"%"}],r=[{label:"Mode of payment",key:"mode",required:!0,initialValue:this.state.editingmode,type:D},{label:"Payment Type",key:"payment_type",required:!0,initialValue:this.state.editingType,type:S,options:Va},{label:"Vendor Fee",key:"fee",required:!0,initialValue:this.state.editingFee,type:I,min:0,follow:"%"}],l={successFn:function(e){t.handleCancel(),t.loadData(),console.log(e),console.log("sucess"),bt(k,"sucess")},errorFn:function(){},action:gt(X,[this.props.active_practiceId]),method:"post"},s=[{key:"practice",value:this.props.active_practiceId}],c=[{key:"practice",value:this.props.active_practiceId},{key:"id",value:this.state.editingId}],o=fa.a.create()(La);return i.a.createElement("div",null,i.a.createElement(o,Object.assign({defaultValues:s,formProp:l,fields:n},this.props)),i.a.createElement(na.a,null),i.a.createElement(Zn,{columns:a,dataSource:this.state.modes}),i.a.createElement($t.a,{title:"Edit Payment Mode",visible:this.state.visible,footer:null,onCancel:this.handleCancel},i.a.createElement(o,{defaultValues:c,formProp:l,fields:r}),i.a.createElement(Vt.a,{key:"back",onClick:this.handleCancel},"Return")))}}]),t}(i.a.Component),ri=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).handleCancel=function(){a.setState({visible:!1})},a.state={redirect:!1,visible:!1,taxes:null,loading:!0},a.loadData=a.loadData.bind(Object(f.a)(a)),a.deleteObject=a.deleteObject.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){var e=this;ht(gt(K,[this.props.active_practiceId]),function(t){console.log("get table"),e.setState({taxes:t,loading:!1})},function(){e.setState({loading:!1})})}},{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"editTax",value:function(e){this.setState({editingId:e.id,editingName:e.name,editingValue:e.tax_value,visible:!0})}},{key:"deleteObject",value:function(e){var t=this,a=e;a.is_active=!1;dt(gt(K,[this.props.active_practiceId]),a,function(e){t.loadData()},function(){})}},{key:"render",value:function(){var e=this,t=[{title:"Name",dataIndex:"name",key:"name"},{title:"Tax Value",dataIndex:"tax_value",key:"tax_value",render:function(e,t){return i.a.createElement("span",null,e," %")}},{title:"Actions",key:"action",render:function(t,a){return i.a.createElement("span",null,i.a.createElement(aa.a,{title:"Are you sure delete this?",onConfirm:function(){return e.deleteObject(a)},okText:"Yes",cancelText:"No"},i.a.createElement("a",null,"Delete")))}}],a=[{label:"Tax name",key:"name",placeholder:"Tax Name",required:!0,type:D},{label:"Tax Value",key:"tax_value",follow:"%",max:100,min:0,required:!0,type:I}],n=[{label:"Tax name",key:"name",required:!0,initialValue:this.state.editingName,type:D},{label:"Tax Value",key:"tax_value",follow:"%",max:100,min:0,required:!0,initialValue:this.state.editingValue,type:I}],r={successFn:function(t){e.handleCancel(),e.loadData(),console.log(t),console.log("sucess"),bt(k,"success")},errorFn:function(){},action:gt(K,[this.props.active_practiceId]),method:"post"},l=[{key:"practice",value:this.props.active_practiceId}],s=[{key:"practice",value:this.props.active_practiceId},{key:"id",value:this.state.editingId}],c=fa.a.create()(La);return i.a.createElement("div",null,i.a.createElement(c,Object.assign({defaultValues:l,formProp:r,fields:a},this.props)),i.a.createElement(na.a,null),i.a.createElement(Zn,{loading:this.state.loading,columns:t,dataSource:this.state.taxes}),i.a.createElement($t.a,{title:"Edit Tax",visible:this.state.visible,footer:null,onCancel:this.handleCancel},i.a.createElement(c,{defaultValues:s,formProp:r,fields:n}),i.a.createElement(Vt.a,{key:"back",onClick:this.handleCancel},"Return"),","))}}]),t}(i.a.Component),li=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={practiceDetail:{}},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;ht(gt("clinics/%s/",[this.props.active_practiceId]),function(t){var a=t.countries;e.setState({countries:a,practiceDetail:t})},function(){})}},{key:"render",value:function(){var e=[{key:"hide_cancelled_invoice",type:"singlecheckbox",follow:i.a.createElement("b",null,"Hide Cancelled Invoice"),initialValue:!!this.state.practiceDetail&&this.state.practiceDetail.hide_cancelled_invoice},{key:"hide_cancelled_payment",type:"singlecheckbox",follow:i.a.createElement("b",null,"Hide Cancelled Payments"),initialValue:!!this.state.practiceDetail&&this.state.practiceDetail.hide_cancelled_payment}],t={successFn:function(e){bt(k,"Settings Saved Successfuly!!")},errorFn:function(){},action:gt("clinics/%s/",[this.props.active_practiceId]),method:"put"},a=fa.a.create()(La),n=[{key:"id",value:this.props.active_practiceId}];return i.a.createElement("div",null,i.a.createElement(a,Object.assign({formProp:t,fields:e},this.props,{defaultValues:n})))}}]),t}(i.a.Component),si=oa.a.TabPane,ci=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={defaultActiveKey:a.props.location.hash},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(Zt.a,null,i.a.createElement("h2",null,"Billing"),i.a.createElement(ia.a,null,i.a.createElement(oa.a,{defaultActiveKey:this.state.defaultActiveKey},i.a.createElement(si,{tab:i.a.createElement("span",null,i.a.createElement(Bt.a,{type:"cluster"}),"Tax Catalog"),key:"#taxcatalog"},i.a.createElement(ri,Object.assign({},this.state,this.props))),i.a.createElement(si,{tab:i.a.createElement("span",null,i.a.createElement(Bt.a,{type:"dollar"}),"Accepted Modes of payment "),key:"#paymentmodes"},i.a.createElement(ii,this.props)),i.a.createElement(si,{tab:i.a.createElement("span",null,i.a.createElement(Bt.a,{type:"block"}),"Cancelled Invoice"),key:"cancelledinvoice"},i.a.createElement(li,Object.assign({},this.state,this.props)))))))}}]),t}(i.a.Component),oi=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).handleCancel=function(){a.setState({visible:!1})},a.state={redirect:!1,visible:!1,data:null,loading:!0},a.loadData=a.loadData.bind(Object(f.a)(a)),a.deleteObject=a.deleteObject.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){var e=this;ht(gt(this.props.id,[this.props.active_practiceId]),function(t){e.setState({data:t,loading:!1})},function(){e.setState({loading:!1})})}},{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"editFunction",value:function(e){this.setState({editingId:e.id,editingName:e.name,visible:!0,loading:!1})}},{key:"deleteObject",value:function(e){var t=this,a=e;a.is_active=!1;dt(gt(this.props.id,[this.props.active_practiceId]),a,function(e){t.loadData()},function(){})}},{key:"render",value:function(){var e=this,t=this,a=[{title:"Name",dataIndex:"name",key:"name"},{title:"Action",key:"action",render:function(a,n){return i.a.createElement("span",null,i.a.createElement("a",{onClick:function(){return e.editFunction(n)}},"  Edit"),i.a.createElement(na.a,{type:"vertical"}),i.a.createElement(aa.a,{title:"Are you sure delete this item?",onConfirm:function(){return t.deleteObject(n)},okText:"Yes",cancelText:"No"},i.a.createElement("a",null,"Delete")))}}],n=[{label:this.props.name,key:"name",required:!0,type:D}],r=[{label:this.props.name,key:"name",required:!0,initialValue:this.state.editingName,type:D}],l={successFn:function(e){t.handleCancel(),t.loadData(),console.log(e),console.log("sucess"),bt(k,"success")},errorFn:function(){},action:gt(this.props.id,[this.props.active_practiceId]),method:"post"},s=[{key:"practice",value:this.props.active_practiceId}],c=[{key:"practice",value:this.props.active_practiceId},{key:"id",value:this.state.editingId}],o=fa.a.create()(La);return i.a.createElement("div",null,i.a.createElement(o,{defaultValues:s,formProp:l,fields:n}),i.a.createElement(na.a,null),i.a.createElement(Zn,{loading:this.state.loading,columns:a,dataSource:this.state.data}),i.a.createElement($t.a,{title:"Edit "+this.props.name,visible:this.state.visible,footer:null,onCancel:this.handleCancel},i.a.createElement(o,{defaultValues:c,formProp:l,fields:r}),i.a.createElement(Vt.a,{key:"back",onClick:this.handleCancel},"Return"),","))}}]),t}(i.a.Component),ui=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={redirect:!1,vitalSign:null},a.changeRedirect=a.changeRedirect.bind(Object(f.a)(a)),a.loadVitalSign=a.loadVitalSign.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.loadVitalSign()}},{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"loadVitalSign",value:function(){var e=this;ht(gt("clinics/%s/vital_sign/",[e.props.active_practiceId]),function(t){e.setState({vitalSign:t[t.length-1]})},function(){e.setState({})})}},{key:"render",value:function(){var e=[{label:"Default temperature measurement in",key:"temperature_unit",type:S,initialValue:this.state.vitalSign?this.state.vitalSign.temperature_unit:null,options:gn.map(function(e){return{label:e.label,value:e.value}})},{label:"Default temperature measurement method",key:"temperature_method",type:S,initialValue:this.state.vitalSign?this.state.vitalSign.temperature_method:null,options:bn.map(function(e){return{label:e.label,value:e.value}})},{label:"Default blood pressure measurement method",key:"blood_pressure_method",initialValue:this.state.vitalSign?this.state.vitalSign.blood_pressure_method:null,type:S,options:yn.map(function(e){return{label:e.label,value:e.value}})}],t=[{key:"practice",value:this.props.active_practiceId},{key:"id",value:this.state.vitalSign?this.state.vitalSign.id:null}],a=fa.a.create()(La),n={successFn:function(e){bt(k,"success")},errorFn:function(){},action:gt("clinics/%s/vital_sign/",[this.props.active_practiceId]),method:"post"};return i.a.createElement(Zt.a,null,i.a.createElement(a,{defaultValues:t,formProp:n,fields:e}))}}]),t}(i.a.Component),di=oa.a.TabPane,mi=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={defaultActiveKey:a.props.location.hash},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return console.log("propss",this.props),i.a.createElement("div",null,i.a.createElement(Zt.a,null,i.a.createElement("h2",null,"EMR Settings"),i.a.createElement(ia.a,null,i.a.createElement(oa.a,{defaultActiveKey:this.state.defaultActiveKey},i.a.createElement(di,{tab:i.a.createElement("span",null,i.a.createElement(Bt.a,{type:"sound"}),"Complaints"),key:"#complaints"},i.a.createElement(oi,Object.assign({},this.props,{id:"clinics/%s/complaints/",name:"Complaints"}))),i.a.createElement(di,{tab:i.a.createElement("span",null,i.a.createElement(Bt.a,{type:"eye"}),"Observations"),key:"#observations"},i.a.createElement(oi,Object.assign({},this.props,{id:"clinics/%s/observations/",name:"Observations"}))),i.a.createElement(di,{tab:i.a.createElement("span",null,i.a.createElement(Bt.a,{type:"plus-square"}),"Diagnoses"),key:"#diagnoses"},i.a.createElement(oi,Object.assign({},this.props,{id:"clinics/%s/diagnoses/",name:"Diagnoses"}))),i.a.createElement(di,{tab:i.a.createElement("span",null,i.a.createElement(Bt.a,{type:"laptop"}),"Investigations"),key:"#investigations"},i.a.createElement(oi,Object.assign({},this.props,{id:"clinics/%s/investigations/",name:"Investigations"}))),i.a.createElement(di,{tab:i.a.createElement("span",null,i.a.createElement(Bt.a,{type:"solution"}),"Notes"),key:"#treatmentnotes"},i.a.createElement(oi,Object.assign({},this.props,{id:$,name:"Treatment Notes"}))),i.a.createElement(di,{tab:i.a.createElement("span",null,i.a.createElement(Bt.a,{type:"file"}),"File Labels"),key:"#filetags"},i.a.createElement(oi,Object.assign({},this.props,{id:"clinics/%s/filetags/",name:"File Labels"}))),i.a.createElement(di,{tab:i.a.createElement("span",null,i.a.createElement(Bt.a,{type:"heart"}),"Vital Signs"),key:"#vitalsigns"},i.a.createElement(ui,this.props))))))}}]),t}(i.a.Component),pi=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={practiceDetail:null,countries:null},a.changeRedirect=a.changeRedirect.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"componentDidMount",value:function(){var e=this;ht(gt("clinics/%s/",[this.props.practiceId]),function(t){var a=t.countries;e.setState({countries:a,practiceDetail:t})},function(){})}},{key:"render",value:function(){var e=[];if(this.state.practiceDetail&&this.state.practiceDetail.specialisations.forEach(function(t){e.push({label:t.name,value:t.id})}),this.state.practiceDetail){var t=[{label:"Practice Logo",key:"logo",type:M,initialValue:this.state.practiceDetail.logo,allowWebcam:!1},{label:"Practice Name",key:"name",required:!0,placeholder:"Practice Name",initialValue:this.state.practiceDetail.name,type:D},{label:"Practice Tagline",key:"tagline",placeholder:"Practice Tagline",required:!0,initialValue:this.state.practiceDetail.tagline,type:D},{label:"Practice Specialisation",key:"specialisation",placeholder:"Practice Specialisation",initialValue:this.state.practiceDetail.specialisation,type:D},{label:"Practice Street Address",key:"address",placeholder:"Practice Street Address",initialValue:this.state.practiceDetail.address,type:D},{label:"Practice locality",initialValue:this.state.practiceDetail.locality,key:"locality",placeholder:"Practice Locality",type:D},{label:"Practice City",initialValue:this.state.practiceDetail.City,placeholder:"Practice City",key:"city",type:D},{label:"Practice state",key:"state",placeholder:"Practice State",initialValue:this.state.practiceDetail.state,type:D},{label:"Practice Country",key:"country",placeholder:"Practice Country",initialValue:this.state.practiceDetail.country,type:D},{label:"Practice PINCODE",key:"pincode",placeholder:"Practice PINCODE",initialValue:this.state.practiceDetail.pincode,type:D},{label:"Practice Contact Number",key:"contact",placeholder:"Practice Contact Number",initialValue:this.state.practiceDetail.contact,type:D},{label:"Practice Email",key:"email",placeholder:"Practice Email",initialValue:this.state.practiceDetail.email,type:"email"},{label:"Practice website",key:"website",placeholder:"Practice Website",initialValue:this.state.practiceDetail.website,type:D},{label:"GSTIN",initialValue:this.state.practiceDetail.gstin,placeholder:"GSTIN",key:"gstin",type:D},{label:"Invoice Prefix",initialValue:this.state.practiceDetail.invoice_prefix,placeholder:"DEL/INV/",key:"invoice_prefix",type:D,required:!0},{label:"Payment Prefix",initialValue:this.state.practiceDetail.payment_prefix,placeholder:"DEL/RCPT/",key:"payment_prefix",type:D,required:!0},{label:"Return Prefix",placeholder:"DEL/RET/",initialValue:this.state.practiceDetail.return_prefix,key:"return_prefix",type:D,required:!0}],a=fa.a.create()(La),n={successFn:function(e){bt(k,"success"),console.log(e)},errorFn:function(){},action:gt("clinics/%s/",[this.props.practiceId]),method:"put"};return i.a.createElement(Zt.a,null,i.a.createElement(ia.a,null,i.a.createElement(a,Object.assign({title:"Edit Practice Details",changeRedirect:this.changeRedirect,formProp:n,fields:t},this.props)),this.state.redirect&&i.a.createElement(b.a,{to:"/settings/clinics"})))}return i.a.createElement(ia.a,{loading:!0})}}]),t}(i.a.Component);function hi(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var fi=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).setFormParams=function(e,t){a.setState(Object(u.a)({},e,t))},a.handleSubmit=function(e){var t=Object(f.a)(a);a.props.form.validateFieldsAndScroll(function(a,n){a||console.log(n);var i=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?hi(a,!0).forEach(function(t){Object(u.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):hi(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},n,{practice:t.props.active_practiceId,maintain_inventory:e,item_type:Ra});t.state.editPrescreption&&(i.id=t.state.editPrescreption.id);dt(Ge,i,function(e){bt(k,"success"),t.props.loadData();t.props.history.push("/settings/prescriptions")},function(){})})},a.state={drugTypeList:[],drugUnitList:[],editPrescreption:a.props.editCatalog?a.props.editCatalog:null},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentWillMount",value:function(){this.loadDrugType(),this.loadDrugUnit()}},{key:"loadDrugType",value:function(){var e=this;ht(gt(Be,[this.props.active_practiceId]),function(t){e.setState({drugTypeList:t})},function(){})}},{key:"loadDrugUnit",value:function(){var e=this;ht(gt("clinics/%s/drugunit/",[this.props.active_practiceId]),function(t){e.setState({drugUnitList:t})},function(){})}},{key:"render",value:function(){var e=this,t=this,a=this.props.formLayout?this.props.formLayout:{labelCol:{span:6},wrapperCol:{span:14}},n=this.props.form.getFieldDecorator;return i.a.createElement(ia.a,null,i.a.createElement(fa.a,null,i.a.createElement("h2",null,this.props.title),i.a.createElement(fa.a.Item,Object.assign({key:"name",label:"Name"},a),n("name",{initialValue:t.state.editPrescreption?t.state.editPrescreption.name:null,rules:[{required:!0,message:rt}]})(i.a.createElement(ga.a,{placeholder:"Medicine Name"}))),this.state.drugType&&this.state.drugType==D?i.a.createElement(fa.a.Item,Object.assign({key:"drug_type_extra",label:"Medicine Type"},a),n("drug_type_extra",{initialValue:t.state.editPrescreption?t.state.editPrescreption.drug_type_extra:null,rules:[{required:!0,message:rt}]})(i.a.createElement(ga.a,null)),i.a.createElement("a",{onClick:function(){return t.setFormParams("drugType",S)}},"Choose Medicine Type")):i.a.createElement(fa.a.Item,Object.assign({key:"drug_type"},a,{label:"Medicine Type"}),n("drug_type",{initialValue:this.state.editPrescreption?this.state.editPrescreption.drug_type:null,rules:[{required:!0,message:rt}]})(i.a.createElement(Lt.a,null,t.state.drugTypeList.map(function(e){return i.a.createElement(Lt.a.Option,{value:e.id},e.name)}))),i.a.createElement("a",{onClick:function(){return t.setFormParams("drugType",D)}},"Add New Medicine Type")),i.a.createElement(fa.a.Item,Object.assign({key:"strength"},a,{label:"Dosage"}),n("strength",{initialValue:t.state.editPrescreption?t.state.editPrescreption.strength:null,rules:[{required:!0,message:rt}]})(i.a.createElement(pa.a,{min:0}))),this.state.drugUnit&&this.state.drugUnit==D?i.a.createElement(fa.a.Item,Object.assign({key:"unit_type_extra",label:"Medicine Unit"},a),n("unit_type_extra",{initialValue:t.state.editPrescreption?t.state.editPrescreption.unit_type_extra:null,rules:[{required:!0,message:rt}]})(i.a.createElement(ga.a,null)),i.a.createElement("a",{onClick:function(){return t.setFormParams("drugUnit",S)}},"Choose Medicine Unit")):i.a.createElement(fa.a.Item,Object.assign({key:"stength_unit"},a,{label:"Medicine Unit"}),n("stength_unit",{initialValue:this.state.editPrescreption?this.state.editPrescreption.stength_unit:null,rules:[{required:!0,message:rt}]})(i.a.createElement(Lt.a,null,t.state.drugUnitList.map(function(e){return i.a.createElement(Lt.a.Option,{value:e.id},e.name)}))),i.a.createElement("a",{onClick:function(){return t.setFormParams("drugUnit",D)}},"Add New Medicine Unit")),i.a.createElement(fa.a.Item,Object.assign({key:"instructions"},a,{label:"Instructions"}),n("instructions",{initialValue:t.state.editPrescreption?t.state.editPrescreption.instructions:null})(i.a.createElement(ga.a,null))),i.a.createElement(fa.a.Item,a,i.a.createElement(Vt.a,{onClick:function(){return e.handleSubmit(!1)}},"Save Medicine"),"\xa0\xa0\xa0",i.a.createElement(Vt.a,{onClick:function(){return e.handleSubmit(!0)},type:"primary"},"Save & Add to Inventory"),"\xa0\xa0\xa0",t.props.history?i.a.createElement(Vt.a,{onClick:function(){return t.props.history.goBack()}},"Cancel"):null)))}}]),t}(i.a.Component),gi=fa.a.create()(fi);function bi(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function yi(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?bi(a,!0).forEach(function(t){Object(u.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):bi(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}i.a.Component;var Ei=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).startLoading=function(){a.props.loaderFunction&&(a.props.loaderFunction(),a.startMakingExtraLabels())},a.startMakingExtraLabels=function(){var e=Object(f.a)(a);a.setState(function(e){return e.extraLoadingLabel.length>2?{extraLoadingLabel:""}:{extraLoadingLabel:e.extraLoadingLabel+"."}},function(){e.props.loading&&setTimeout(function(){e.startMakingExtraLabels()},500)})},a.state={extraLoadingLabel:""},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return this.props.loading?i.a.createElement(Tt.a,{spinning:this.props.loading},i.a.createElement(Zt.a,{style:{minHeight:200}})):this.props.hidden?i.a.createElement(Zt.a,null,i.a.createElement("div",{style:{textAlign:"center",margin:"15px 0px"}},i.a.createElement("small",null,"No More Data Found"))):i.a.createElement(Zt.a,null,i.a.createElement("div",{style:{textAlign:"center",margin:"15px 0px"}},i.a.createElement(Vt.a,{type:"primary",onClick:this.startLoading,loading:this.props.loading},this.props.loading?"Loading"+this.state.extraLoadingLabel:"Load More")))}}]),t}(i.a.Component),vi=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={catalog:null,editCatalog:{},loading:!0,loadMorePrescriptions:null},a.loadData=a.loadData.bind(Object(f.a)(a)),a.deleteObject=a.deleteObject.bind(Object(f.a)(a)),a.loadInitialData=a.loadInitialData.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){var e=this;ht(Ge,function(t){console.log("get table"),e.setState({catalog:t.results,loadMorePrescriptions:t.next,loading:!1})},function(){e.setState({loading:!1})},{practice:this.props.active_practiceId,item_type:Ra,maintain_inventory:!1,page:e.state.loadMorePrescriptions||1})}},{key:"loadInitialData",value:function(){var e=this;this.setState({loadMorePrescriptions:null},function(){e.loadData()})}},{key:"deleteObject",value:function(e){var t=this,a=e;a.is_active=!1;dt(Ge,a,function(e){t.loadData()},function(){})}},{key:"editCatalog",value:function(e){this.setState({editCatalog:e,loading:!1}),this.props.history.push("/settings/prescriptions/edit")}},{key:"render",value:function(){var e=this,t=this,a=[{title:"Name",dataIndex:"name",key:"code"},{title:"Dosage",dataIndex:"strength",key:"strength",render:function(e,t){return i.a.createElement("span",null,e,"\xa0",t.stength_unit)}},{title:"Medicine Instructions",dataIndex:"instructions",key:"instructions"},{title:"Action",key:"action",render:function(a,n){return i.a.createElement("span",null,i.a.createElement("a",{onClick:function(){return e.editCatalog(n)}},"Edit"),i.a.createElement(na.a,{type:"vertical"}),i.a.createElement(aa.a,{title:"Are you sure delete this prescription?",onConfirm:function(){return t.deleteObject(n)},okText:"Yes",cancelText:"No"},i.a.createElement("a",null,"Delete")))}}];return i.a.createElement(Zt.a,null,i.a.createElement(b.d,null,i.a.createElement(b.b,{exact:!0,path:"/settings/prescriptions/add",render:function(){return i.a.createElement(gi,Object.assign({},e.props,{loadData:e.loadInitialData,title:"Add Prescription"}))}}),i.a.createElement(b.b,{exact:!0,path:"/settings/prescriptions/edit",render:function(t){return e.state.editCatalog.id?i.a.createElement(gi,Object.assign({},e.state,{title:"Edit Prescription",loadData:e.loadInitialData},e.props,t)):i.a.createElement(b.a,{to:"/settings/prescriptions/"})}}),i.a.createElement(b.b,null,i.a.createElement("div",null,i.a.createElement("h2",null,"All presciptions",i.a.createElement(qt.b,{to:"/settings/prescriptions/add"},i.a.createElement(Vt.a,{type:"primary",style:{float:"right"}},i.a.createElement(Bt.a,{type:"plus"}),"\xa0Add"))),i.a.createElement(ia.a,null,i.a.createElement(Zn,{loading:this.state.loading,columns:a,dataSource:this.state.catalog,pagination:!1})),i.a.createElement(Ei,{loaderFunction:this.loadData,loading:this.state.loading,hidden:!this.state.loadMorePrescriptions})))))}}]),t}(i.a.Component),_i=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).handleCancel=function(){a.setState({visible:!1})},a.showDeletedExpenses=function(){a.setState({showDeleted:!0,deletedLoading:!0}),a.loadData(!0)},a.state={redirect:!1,visible:!1,expenses:null,loading:!0,showDeleted:!1,deletedLoading:!1,deletedExpenses:[]},a.loadData=a.loadData.bind(Object(f.a)(a)),a.deleteObject=a.deleteObject.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this,a=function(a){console.log("get table"),e?t.setState({deletedExpenses:a,deletedLoading:!1}):t.setState({expenses:a,loading:!1})},n=function(){};e?ht(gt(ie,[this.props.active_practiceId]),a,n,{deleted:!0}):ht(gt(ie,[this.props.active_practiceId]),a,n)}},{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"editTax",value:function(e){this.setState({editingId:e.id,editingName:e.name,editingValue:e.tax_value,loading:!1,visible:!0})}},{key:"deleteObject",value:function(e,t){var a=this,n=e;n.is_active=t;dt(gt(ie,[this.props.active_practiceId]),n,function(e){a.loadData(),a.state.showDeleted&&a.loadData(!0)},function(){})}},{key:"render",value:function(){var e=this,t=this,a=[{title:"Expense Type",dataIndex:"name",key:"name"},{title:"Action",key:"action",render:function(a,n){return n.is_active?i.a.createElement("span",null,i.a.createElement("a",{onClick:function(){return e.editTax(n)}},"  Edit"),i.a.createElement(na.a,{type:"vertical"}),i.a.createElement(aa.a,{title:"Are you sure to delete this?",onConfirm:function(){return t.deleteObject(n,!1)},okText:"Yes",cancelText:"No"},i.a.createElement("a",null,"Delete"))):i.a.createElement("span",null,i.a.createElement(aa.a,{title:"Are you sure to show this?",onConfirm:function(){return t.deleteObject(n,!0)},okText:"Yes",cancelText:"No"},i.a.createElement("a",null,"Show")))}}],n=[{label:"Expense Type",key:"name",placeholder:"Expense Type",required:!0,type:D}],r=[{label:"Expense Type",key:"name",required:!0,initialValue:this.state.editingName,type:D}],l={successFn:function(e){t.handleCancel(),t.loadData(),bt(k,"success")},errorFn:function(){},action:gt(ie,[this.props.active_practiceId]),method:"post"},s=[{key:"practice",value:this.props.active_practiceId}],c=[{key:"practice",value:this.props.active_practiceId},{key:"id",value:this.state.editingId}],o=fa.a.create()(La);return i.a.createElement("div",null,i.a.createElement("h2",null,"Expense Types"),i.a.createElement(ia.a,null,i.a.createElement(o,{defaultValues:s,formProp:l,fields:n}),i.a.createElement(na.a,null),i.a.createElement(Zn,{loading:this.state.loading,columns:a,dataSource:this.state.expenses}),this.state.showDeleted?i.a.createElement("div",null,i.a.createElement(Zn,{loading:this.state.deletedLoading,columns:a,dataSource:this.state.deletedExpenses})):i.a.createElement("h4",null,i.a.createElement("a",{onClick:function(){return e.showDeletedExpenses()}},"Show Deleted Expense Types"))),i.a.createElement($t.a,{title:"Edit Expense Type",visible:this.state.visible,footer:null,onCancel:this.handleCancel},i.a.createElement(o,{defaultValues:c,formProp:l,fields:r}),i.a.createElement(Vt.a,{key:"back",onClick:this.handleCancel},"Return")))}}]),t}(i.a.Component),ki=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).handleCancel=function(){a.setState({visible:!1})},a.showDeletedMedicalHistory=function(){a.setState({showDeleted:!0,deletedLoading:!0}),a.loadData(!0)},a.state={redirect:!1,visible:!1,history:null,loading:!0,deletedHistory:[],showDeleted:!1,deletedLoading:!1},a.loadData=a.loadData.bind(Object(f.a)(a)),a.deleteObject=a.deleteObject.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this,a=function(a){console.log("get table"),e?t.setState({deletedHistory:a,deletedLoading:!1}):t.setState({history:a,loading:!1})},n=function(){t.setState({loading:!1})};e?ht(gt(ne,[this.props.active_practiceId]),a,n,{deleted:!0}):ht(gt(ne,[this.props.active_practiceId]),a,n)}},{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"editTax",value:function(e){this.setState({editingId:e.id,editingName:e.name,visible:!0,loading:!1})}},{key:"deleteObject",value:function(e,t){var a=this,n=e;n.is_active=t;dt(gt(ne,[this.props.active_practiceId]),n,function(e){a.loadData(),a.state.showDeleted&&a.loadData(!0)},function(){})}},{key:"render",value:function(){var e=this,t=this,a=[{title:"Medical History",dataIndex:"name",key:"name"},{title:"Action",key:"action",render:function(a,n){return n.is_active?i.a.createElement("span",null,i.a.createElement("a",{onClick:function(){return e.editTax(n)}},"  Edit"),i.a.createElement(na.a,{type:"vertical"}),i.a.createElement(aa.a,{title:"Are you sure to delete this?",onConfirm:function(){return t.deleteObject(n,!1)},okText:"Yes",cancelText:"No"},i.a.createElement("a",null,"Delete"))):i.a.createElement("span",null,i.a.createElement(aa.a,{title:"Are you sure to show this?",onConfirm:function(){return t.deleteObject(n,!0)},okText:"Yes",cancelText:"No"},i.a.createElement("a",null,"Show")))}}],n=[{label:"Medical History",key:"name",required:!0,type:D}],r=[{label:"Medical history ",key:"name",required:!0,initialValue:this.state.editingName,type:D}],l={successFn:function(e){t.handleCancel(),t.loadData(),console.log(e),console.log("sucess"),bt(k,"success")},errorFn:function(){},action:gt(ne,[this.props.active_practiceId]),method:"post"},s=[{key:"id",value:this.state.editingId}],c=fa.a.create()(La);return i.a.createElement("div",null,i.a.createElement("h2",null,"Medical History"),i.a.createElement(ia.a,null,i.a.createElement(c,{defaultValues:[],formProp:l,fields:n}),i.a.createElement(na.a,null),i.a.createElement(Zn,{loading:this.state.loading,columns:a,dataSource:this.state.history}),this.state.showDeleted?i.a.createElement("div",null,i.a.createElement(Zn,{loading:this.state.deletedLoading,columns:a,dataSource:this.state.deletedHistory})):i.a.createElement("h4",null,i.a.createElement("a",{onClick:function(){return e.showDeletedMedicalHistory()}},"Show Deleted Medical History"))),i.a.createElement($t.a,{title:"Basic Modal",visible:this.state.visible,footer:null},i.a.createElement(c,{title:"Change history",defaultValues:s,formProp:l,fields:r}),i.a.createElement(Vt.a,{key:"back",onClick:this.handleCancel},"Return"),","))}}]),t}(i.a.Component),Oi=function(e){function t(){return Object(d.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return i.a.createElement(Zt.a,{style:{marginTop:"20px"},gutter:24},i.a.createElement(Hn.a,{status:"404",title:i.a.createElement("span",null,i.a.createElement("h1",null,i.a.createElement("b",null,"404")),i.a.createElement("h2",null,"Page Not Found")),subTitle:"The page you are looking for has been temporarily moved or did not exist.",extra:i.a.createElement(qt.b,{to:"/"},i.a.createElement(Vt.a,{type:"primary"},"Go to Home"))}))}}]),t}(i.a.Component);function Pi(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function ji(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Pi(a,!0).forEach(function(t){Object(u.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Pi(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Di=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],Si=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).changeVistingHourSameWeek=function(e){console.log(e.target),a.setState(Object(u.a)({},e.target.id,e.target.checked))},a.changeOpenPracticeDays=function(e,t){a.setState(function(a){return{openPracticeDays:ji({},a.openPracticeDays,Object(u.a)({},e,t))}})},a.changePracticeTwoSessions=function(e,t){a.setState(function(a){return{twoSessions:ji({},a.twoSessions,Object(u.a)({},e,t))}})},a.handleSubmit=function(e){var t=Object(f.a)(a);e.preventDefault(),a.props.form.validateFieldsAndScroll(function(e,n){if(!e){console.log(n);var i=ji({},n);i.first_start_time&&(i.first_start_time=ya()(i.first_start_time).format("HH:mm")),i.first_end_time&&(i.first_end_time=ya()(i.first_end_time).format("HH:mm")),i.second_start_time&&(i.second_start_time=ya()(i.second_start_time).format("HH:mm")),i.second_end_time&&(i.second_end_time=ya()(i.second_end_time).format("HH:mm")),Di.forEach(function(e){i["first_start_time_".concat(e)]&&(i["first_start_time_".concat(e)]=ya()(i["first_start_time_".concat(e)]).format("HH:mm")),i["first_end_time_".concat(e)]&&(i["first_end_time_".concat(e)]=ya()(i["first_end_time_".concat(e)]).format("HH:mm")),i["second_start_time_".concat(e)]&&(i["second_start_time_".concat(e)]=ya()(i["second_start_time_".concat(e)]).format("HH:mm")),i["second_end_time_".concat(e)]&&(i["second_end_time_".concat(e)]=ya()(i["second_end_time_".concat(e)]).format("HH:mm"))}),t.state.timings&&(i.id=t.state.timings.id);dt(gt(se,[a.props.active_practiceId]),i,function(e){t.loadData(),bt(k,"Calendar Timings Saved successfully!!")},function(){})}})},a.state={redirect:!1,visible:!1,timings:null,loading:!0,visting_hour_same_week:!0,openPracticeDays:{},twoSessions:{}},a.loadData=a.loadData.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){var e=this;ht(gt(se,[this.props.active_practiceId]),function(t){var a=!0,n={},i={};if(t.length&&t[0]){var r=t[0];Di.forEach(function(e){n[e]=r[e],i["is_two_sessions_".concat(e)]=r["is_two_sessions_".concat(e)]}),a=r.visting_hour_same_week,i.is_two_sessions=r.is_two_sessions}e.setState({timings:t[0],visting_hour_same_week:a,openPracticeDays:n,twoSessions:i,loading:!1})},function(){e.setState({timings:{},loading:!1})})}},{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"render",value:function(){var e=this,t=this,a=this.props.formLayout?this.props.formLayout:{labelCol:{span:12},wrapperCol:{span:12}},n=this.props.form.getFieldDecorator;return i.a.createElement("div",null,i.a.createElement(fa.a,{onSubmit:this.handleSubmit},i.a.createElement(fa.a.Item,Object.assign({key:"today_first_day"},a),n("today_first_day",{valuePropName:"checked",initialValue:!!t.state.timings&&t.state.timings.today_first_day},{rules:[{message:rt}]})(i.a.createElement(sa.a,null,"Always show today as first day on my calendar"))),i.a.createElement(fa.a.Item,Object.assign({key:"calendar_slot"},a,{label:"Show Calendar Slots of"}),n("calendar_slot",{initialValue:t.state.timings?t.state.timings.calendar_slot:null,rules:[{required:!0,message:rt}]})(i.a.createElement(pa.a,{min:5})),i.a.createElement("span",{className:"ant-form-text"},"mins.")),i.a.createElement(fa.a.Item,Object.assign({key:"visting_hour_same_week"},a),n("visting_hour_same_week",{valuePropName:"checked",initialValue:!!t.state.timings&&t.state.timings.visting_hour_same_week},{rules:[{message:rt}]})(i.a.createElement(sa.a,{onChange:this.changeVistingHourSameWeek},"Visiting hours are  same for all working days in a week"))),i.a.createElement(na.a,{style:{margin:4}}),this.state.visting_hour_same_week?i.a.createElement("div",null,i.a.createElement(Zt.a,null,i.a.createElement(ea.a,{span:4}),i.a.createElement(ea.a,{span:18},i.a.createElement(fa.a.Item,Object.assign({key:"is_two_sessions"},a),n("is_two_sessions",{valuePropName:"checked",initialValue:!!t.state.timings&&(t.state.timings.is_two_sessions||t.state.twoSessions.is_two_sessions)},{rules:[{message:rt}]})(i.a.createElement(sa.a,{onChange:function(t){return e.changePracticeTwoSessions("is_two_sessions",t.target.checked)}},"Practice operates in two sessions."))),i.a.createElement(Zt.a,{gutter:16},i.a.createElement(ea.a,{span:12},i.a.createElement(fa.a.Item,Object.assign({key:"first_start_time",label:"Practice Starts At"},a),n("first_start_time",{initialValue:t.state.timings&&t.state.timings.first_start_time?ya()(t.state.timings.first_start_time,"HH:mm"):null,rules:[{required:!0,message:rt}]})(i.a.createElement(da.a,{format:"HH:mm"})))),t.state.twoSessions.is_two_sessions?i.a.createElement("div",null,i.a.createElement(ea.a,{span:12},i.a.createElement(fa.a.Item,Object.assign({key:"first_end_time",label:"Lunch At"},a),n("first_end_time",{initialValue:t.state.timings&&t.state.timings.first_end_time?ya()(t.state.timings.first_end_time,"HH:mm"):null,rules:[{required:!0,message:rt}]})(i.a.createElement(da.a,{format:"HH:mm"})))),i.a.createElement(ea.a,{span:12},i.a.createElement(fa.a.Item,Object.assign({key:"second_start_time",label:"Resume At"},a),n("second_start_time",{initialValue:t.state.timings&&t.state.timings.second_start_time?ya()(t.state.timings.second_start_time,"HH:mm"):null,rules:[{required:!0,message:rt}]})(i.a.createElement(da.a,{format:"HH:mm"}))))):null,i.a.createElement(ea.a,{span:12},i.a.createElement(fa.a.Item,Object.assign({key:"second_end_time",label:"Practice Ends At"},a),n("second_end_time",{initialValue:t.state.timings&&t.state.timings.second_end_time?ya()(t.state.timings.second_end_time,"HH:mm"):null,rules:[{required:!0,message:rt}]})(i.a.createElement(da.a,{format:"HH:mm"}))))))),i.a.createElement(na.a,{style:{margin:4}})):Di.map(function(r){return i.a.createElement("div",{key:r},i.a.createElement(Zt.a,null,i.a.createElement(ea.a,{span:4},i.a.createElement("h4",null,r.replace(/^\w/,function(e){return e.toUpperCase()}))),i.a.createElement(ea.a,{span:18},i.a.createElement(fa.a.Item,Object.assign({key:"".concat(r)},a),n("".concat(r),{valuePropName:"checked",initialValue:!!t.state.timings&&(t.state.timings["".concat(r)]||t.state.openPracticeDays[r])},{rules:[{message:rt}]})(i.a.createElement(sa.a,{onChange:function(e){return t.changeOpenPracticeDays(r,e.target.checked)}},"Practice is open on ".concat(r.replace(/^\w/,function(e){return e.toUpperCase()}))))),t.state.openPracticeDays[r]?i.a.createElement("div",null,i.a.createElement(fa.a.Item,Object.assign({key:"is_two_sessions_".concat(r)},a),n("is_two_sessions_".concat(r),{valuePropName:"checked",initialValue:!!t.state.timings&&(t.state.timings["is_two_sessions_".concat(r)]||t.state.twoSessions["is_two_sessions_".concat(r)])},{rules:[{message:rt}]})(i.a.createElement(sa.a,{onChange:function(t){return e.changePracticeTwoSessions("is_two_sessions_".concat(r),t.target.checked)}},"Practice operates in two sessions."))),i.a.createElement(Zt.a,{gutter:16},i.a.createElement(ea.a,{span:12},i.a.createElement(fa.a.Item,Object.assign({key:"first_start_time_".concat(r),label:"Practice Starts At"},a),n("first_start_time_".concat(r),{initialValue:t.state.timings&&t.state.timings["first_start_time_".concat(r)]?ya()(t.state.timings["first_start_time_".concat(r)],"HH:mm"):null,rules:[{required:!0,message:rt}]})(i.a.createElement(da.a,{format:"HH:mm"})))),t.state.twoSessions["is_two_sessions_".concat(r)]?i.a.createElement("div",null,i.a.createElement(ea.a,{span:12},i.a.createElement(fa.a.Item,Object.assign({key:"first_end_time_".concat(r),label:"Lunch At"},a),n("first_end_time_".concat(r),{initialValue:t.state.timings&&t.state.timings["first_end_time_".concat(r)]?ya()(t.state.timings["first_end_time_".concat(r)],"HH:mm"):null,rules:[{required:!0,message:rt}]})(i.a.createElement(da.a,{format:"HH:mm"})))),i.a.createElement(ea.a,{span:12},i.a.createElement(fa.a.Item,Object.assign({key:"second_start_time_".concat(r),label:"Resume At"},a),n("second_start_time_".concat(r),{initialValue:t.state.timings&&t.state.timings["second_start_time_".concat(r)]?ya()(t.state.timings["second_start_time_".concat(r)],"HH:mm"):null,rules:[{required:!0,message:rt}]})(i.a.createElement(da.a,{format:"HH:mm"}))))):null,i.a.createElement(ea.a,{span:12},i.a.createElement(fa.a.Item,Object.assign({key:"second_end_time_".concat(r),label:"Practice Ends At"},a),n("second_end_time_".concat(r),{initialValue:t.state.timings&&t.state.timings["second_end_time_".concat(r)]?ya()(t.state.timings["second_end_time_".concat(r)],"HH:mm"):null,rules:[{required:!0,message:rt}]})(i.a.createElement(da.a,{format:"HH:mm"})))))):null)),i.a.createElement(na.a,{style:{margin:4}}))}),i.a.createElement(fa.a.Item,a,i.a.createElement(Vt.a,{loading:t.state.loading,type:"primary",htmlType:"submit",style:{margin:5}},"Submit"),t.props.history?i.a.createElement(Vt.a,{style:{margin:5},onClick:function(){return t.props.history.goBack()}},"Cancel"):null)))}}]),t}(i.a.Component),xi=fa.a.create()(Si),Ii=function(e){ht(gt(z,[e.props.active_practiceId]),function(t){var a=[],n={};t.staff.forEach(function(t){(t.role.indexOf(parseInt("3"))>-1||t.role.indexOf("3")>-1)&&(a.push(t),e.state.selectedDoctor&&(n=e.state.selectedDoctor))}),e.setState({practiceDoctors:a,selectedDoctor:a.length&&!n.id?a[0]:n})},function(){})},Ci=i.a.createElement(Ht.a,null,i.a.createElement(Ht.a.Item,{key:"1"},i.a.createElement(qt.b,{to:"/settings/prescriptions"},"Add/Edit Drugs")),i.a.createElement(Ht.a.Item,{key:"2"},i.a.createElement(qt.b,{to:"/settings/procedures"},"Add/Edit Procedures")),i.a.createElement(Ht.a.Item,{key:"3"},i.a.createElement(qt.b,{to:"/settings/emr#treatmentnotes"},"Add/Edit Clinical Notes")),i.a.createElement(Ht.a.Item,{key:"4"},i.a.createElement(qt.b,{to:"/settings/printout"},"Modify EMR/Billing Printout")),i.a.createElement(Ht.a.Item,{key:"5"},i.a.createElement(qt.b,{to:"/settings/billing#taxcatalog"},"Add/Edit taxes")),i.a.createElement(Ht.a.Item,{key:"6"},i.a.createElement(qt.b,{to:"/settings/billing#paymentmodes"},"Add/Edit Payment Modes"))),wi=function(e){for(var t=0,a=0;a<e.length;a++)t=((t=e.charCodeAt(a)+((t<<6)-t))>>6)+t;return t},Ti=function(e){var t=(16777215&e).toString(16).toUpperCase();return"00000".substring(0,6-t.length)+t},Ai=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).handleCancel=function(){a.setState({visible:!1})},a.state={redirect:!1,visible:!1,appointmentCategories:null,loading:!0},a.loadAppointmentCategories=a.loadAppointmentCategories.bind(Object(f.a)(a)),a.deleteObject=a.deleteObject.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.loadAppointmentCategories()}},{key:"loadAppointmentCategories",value:function(){var e=this;ht(gt(Z,[this.props.active_practiceId]),function(t){e.setState(function(e){return t.forEach(function(e){e.color=Ti(wi(e.name))}),{appointmentCategories:t,loading:!1}})},function(){})}},{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"editCategory",value:function(e){this.setState({editingId:e.id,editingName:e.name,visible:!0,loading:!1})}},{key:"deleteObject",value:function(e){var t=this,a=e;a.is_active=!1;dt(gt(Z,[this.props.active_practiceId]),a,function(e){t.loadAppointmentCategories()},function(){})}},{key:"render",value:function(){var e=this,t=this,a=[{dataIndex:"color",key:"color",render:function(e){return i.a.createElement(Mt.a,{color:"#"+e},"#")}},{title:"Name",dataIndex:"name",key:"name"},{title:"Action",key:"action",render:function(a,n){return i.a.createElement("span",null,i.a.createElement("a",{onClick:function(){return e.editCategory(n)}},"  Edit"),i.a.createElement(na.a,{type:"vertical"}),i.a.createElement(aa.a,{title:"Are you sure delete this?",onConfirm:function(){return t.deleteObject(n)},okText:"Yes",cancelText:"No"},i.a.createElement("a",null,"Delete")))}}],n=[{label:"Category name",key:"name",placeholder:"Category Name",required:!0,type:D}],r=[{label:"Category name",key:"name",required:!0,initialValue:this.state.editingName,type:D}],l={successFn:function(e){t.handleCancel(),t.loadAppointmentCategories(),console.log(e),console.log("sucess"),bt(k,"success")},errorFn:function(){},action:gt(Z,[this.props.active_practiceId]),method:"post"},s=[{key:"id",value:this.state.editingId}],c=fa.a.create()(La);return i.a.createElement("div",null,i.a.createElement(c,Object.assign({defaultValues:[],formProp:l,fields:n},this.props)),i.a.createElement(na.a,null),i.a.createElement(Zn,{loading:this.state.loading,columns:a,dataSource:this.state.appointmentCategories}),i.a.createElement($t.a,{title:"Edit Appointment Category",visible:this.state.visible,footer:null,onCancel:this.handleCancel},i.a.createElement(c,{defaultValues:s,formProp:l,fields:r}),i.a.createElement(Vt.a,{key:"back",onClick:this.handleCancel},"Return"),","))}}]),t}(i.a.Component),Mi=oa.a.TabPane,Li=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={loading:!0,defaultActiveKey:a.props.location.hash},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("h2",null,"Calendar Settings"),i.a.createElement(Zt.a,null,i.a.createElement(ia.a,null,i.a.createElement(oa.a,{defaultActiveKey:this.state.defaultActiveKey},i.a.createElement(Mi,{tab:i.a.createElement("span",null,i.a.createElement(Bt.a,{type:"schedule"}),"Calender Timings Settings"),key:"#timings"},i.a.createElement(xi,Object.assign({},this.state,this.props))),i.a.createElement(Mi,{tab:i.a.createElement("span",null,i.a.createElement(Bt.a,{type:"reconciliation"}),"Appointment Categories"),key:"#categories"},i.a.createElement(Ai,this.props))))))}}]),t}(i.a.Component),Vi=s.a.Sider,Fi=function(e){function t(){return Object(d.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return i.a.createElement(Vi,{trigger:null,collapsible:!0,style:{overflow:"auto",minHeight:"100vh",background:"#fff"}},i.a.createElement(Ht.a,{mode:"inline",defaultSelectedKeys:["5"]},i.a.createElement(Ht.a.ItemGroup,{key:"g1",title:i.a.createElement(na.a,{style:{margin:"0px"}},"Practice Settings")},this.props.activePracticePermissions.SettingsPracticeDetail?i.a.createElement(Ht.a.Item,{key:"5"},i.a.createElement(qt.b,{to:"/settings/clinics"},i.a.createElement(Bt.a,{type:"shop"}),"Practice Details")):null,this.props.activePracticePermissions.SettingsCommunincations?i.a.createElement(Ht.a.Item,{key:"7"},i.a.createElement(qt.b,{to:"/settings/communication-settings"},i.a.createElement(Bt.a,{type:"message"}),"Communication")):null,this.props.activePracticePermissions.SettingsCalendar?i.a.createElement(Ht.a.Item,{key:"17"},i.a.createElement(qt.b,{to:"/settings/calendarsettings#timings"},i.a.createElement(Bt.a,{type:"schedule"}),"Calendar")):null,this.props.activePracticePermissions.SettingsPracticeStaff?i.a.createElement(Ht.a.Item,{key:"6"},i.a.createElement(qt.b,{to:"/settings/clinics-staff"},i.a.createElement(Bt.a,{type:"team"}),"Practice Staff")):null,i.a.createElement(Ht.a.Item,{key:"32"},i.a.createElement(qt.b,{to:"/settings/agents"},i.a.createElement(Bt.a,{type:"usergroup-add"}),i.a.createElement("span",{className:"nav-text"},"Agents"))),i.a.createElement(Ht.a.Item,{key:"33"},i.a.createElement(qt.b,{to:"/settings/agent-roles"},i.a.createElement(Bt.a,{type:"apartment"}),i.a.createElement("span",{className:"nav-text"},"Agent Roles"))),this.props.activePracticePermissions.SettingsProcedureCatalog?i.a.createElement(Ht.a.Item,{key:"8"},i.a.createElement(qt.b,{to:"/settings/procedures"},i.a.createElement(Bt.a,{type:"folder-open"}),"Procedure Catalog")):null,this.props.activePracticePermissions.SettingsBilling?i.a.createElement(Ht.a.Item,{key:"9"},i.a.createElement(qt.b,{to:"/settings/billing#taxcatalog"},i.a.createElement(Bt.a,{type:"audit"}),"Billing")):null,this.props.activePracticePermissions.SettingsLoyalty?i.a.createElement(Ht.a.Item,{key:"10"},i.a.createElement(qt.b,{to:"/settings/loyalty"},i.a.createElement(Bt.a,{type:"trophy"}),"Loyalty")):null,this.props.activePracticePermissions.SettingsMLMSettings?i.a.createElement(Ht.a.Item,{key:"30"},i.a.createElement(qt.b,{to:"/settings/mlm"},i.a.createElement(Bt.a,{type:"wallet"}),i.a.createElement("span",{className:"nav-text"},"MLM"))):null,this.props.activePracticePermissions.SettingsEMR?i.a.createElement(Ht.a.Item,{key:"12"},i.a.createElement(qt.b,{to:"/settings/emr#complaints"},i.a.createElement(Bt.a,{type:"file-text"})," EMR")):null,this.props.activePracticePermissions.SettingsPrescriptions?i.a.createElement(Ht.a.Item,{key:"13"},i.a.createElement(qt.b,{to:"/settings/prescriptions"},i.a.createElement(Bt.a,{type:"file-text"})," Prescriptions")):null,this.props.activePracticePermissions.SettingsLabs?i.a.createElement(Ht.a.Item,{key:"14"},i.a.createElement(qt.b,{to:"/settings/labs"},i.a.createElement(Bt.a,{type:"experiment"}),"Labs")):null,this.props.activePracticePermissions.SettingsPrintouts?i.a.createElement(Ht.a.Item,{key:"18"},i.a.createElement(qt.b,{to:"/settings/printout"},i.a.createElement(Bt.a,{type:"printer"})," Printout")):null,this.props.activePracticePermissions.SettingsMedicalHistory?i.a.createElement(Ht.a.Item,{key:"15"},i.a.createElement(qt.b,{to:"/settings/medical-history"},i.a.createElement(Bt.a,{type:"medicine-box"})," Medical History")):null,this.props.activePracticePermissions.SettingsExpenseTypes?i.a.createElement(Ht.a.Item,{key:"16"},i.a.createElement(qt.b,{to:"/settings/expense-types"},i.a.createElement(Bt.a,{type:"dollar"})," Expense Types")):null),i.a.createElement(Ht.a.ItemGroup,{key:"g2",title:i.a.createElement(na.a,{style:{margin:"0px"}},"Bed & Medicine")},this.props.activePracticePermissions.SettingsRoomTypes?i.a.createElement(Ht.a.Item,{key:"22"},i.a.createElement(qt.b,{to:"/settings/roomtypes"},i.a.createElement(Bt.a,{type:"apartment"})," Room Types")):null,this.props.activePracticePermissions.SettingsBedPackages?i.a.createElement(Ht.a.Item,{key:"23"},i.a.createElement(qt.b,{to:"/settings/bed-packages"},i.a.createElement(Bt.a,{type:"box-plot"})," Bed Packages")):null,this.props.activePracticePermissions.SettingsMedicinePackages?i.a.createElement(Ht.a.Item,{key:"24"},i.a.createElement(qt.b,{to:"/settings/medicine-packages"},i.a.createElement(Bt.a,{type:"medicine-box"})," Medicine Packages")):null,this.props.activePracticePermissions.SettingsDiseaseList?i.a.createElement(Ht.a.Item,{key:"25"},i.a.createElement(qt.b,{to:"/settings/diseases"},i.a.createElement(Bt.a,{type:"apartment"})," Disease List")):null)))}}]),t}(i.a.Component),Ri=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault();var t=Object(f.a)(a);a.props.form.validateFieldsAndScroll(function(e,a){var n={};n[a.margin_name]={};for(var i=1;i<=t.state.level_count;i++){n[a.margin_name][i]=[];for(var r=1;r<a[i].length;r++)n[a.margin_name][i].push(Object(u.a)({},r,a[i][r]))}if(n[a.margin_name].details={level_count:t.state.level_count},!e){console.log(n),t.setState({changePassLoading:!0,redirect:!0});dt(Qe,n,function(e){bt(k,e.message),t.props.loadMlmData(),t.props.history.push("/mlm")},function(){})}})},a.add=function(e){var t=a.props.form,n=t.getFieldValue("keys").concat(e);t.setFieldsValue({keys:n})},a.setLevelCount=function(e){Object(f.a)(a).setState({level_count:e<5?e:5})},a.state={redirect:!1,level_count:1,margin:null,editRecord:a.props.editRecord?a.props.editRecord:null,editId:a.props.editId?a.props.editId:null,loading:!0},a.changeRedirect=a.changeRedirect.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.loadMlmData(),this.loadRoles(),this.state.editRecord&&this.state.editId&&(this.loadMlmData(),this.setLevelCount(this.state.editRecord.length))}},{key:"loadMlmData",value:function(){var e=this;ht(gt("product_margin/%s/",[this.state.editId]),function(t){e.setState({margin:t,loading:!1})},function(){e.setState({loading:!0})})}},{key:"loadRoles",value:function(){var e=this;ht(Xe,function(t){e.setState({staffRoles:t,loading:!1})},function(){e.setState({loading:!1})})}},{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"render",value:function(){var e=this,t=this.props.form,a=t.getFieldDecorator,n=(t.getFieldValue,{labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}});a("keys",{initialValue:[]});var r=[{title:"Roles",dataIndex:"name",key:"name"}];if(this.state.level_count)for(var l=function(t){r.push({title:"Level "+t,dataIndex:"Level "+t,key:"Level "+t,render:function(r,l){return i.a.createElement(fa.a.Item,Object.assign({},n,{required:!0,key:"".concat(t,"[").concat(l.id,"]")}),a("".concat(t,"[").concat(l.id,"]"),{validateTrigger:["onChange","onBlur"],initialValue:e.state.editRecord&&(l=e.state.editRecord[l.id])?l[t]:null})(i.a.createElement(pa.a,{min:0,placeholder:"Percent Commission"})))}})},s=1;s<=this.state.level_count;s++)l(s);return i.a.createElement(ia.a,{title:"Manage MLM Commission"},i.a.createElement(fa.a,{onSubmit:this.handleSubmit,className:"login-form"},i.a.createElement(fa.a.Item,Object.assign({},n,{label:"Margin Name",required:!0,key:"margin_name"}),a("margin_name",{validateTrigger:["onChange","onBlur"],initialValue:this.state.margin?this.state.margin.name:null})(i.a.createElement(ga.a,{placeholder:"Margin Type Name"}))),i.a.createElement(fa.a.Item,Object.assign({},n,{label:"No of Levels",required:!1,key:"level_count"}),a("level_count",{validateTrigger:["onChange","onBlur"],initialValue:this.state.editRecord?this.state.editRecord.length:null})(i.a.createElement(pa.a,{min:1,max:5,placeholder:"Level Count",onChange:this.setLevelCount}))),i.a.createElement(ta.a,{loading:this.state.loading,bordered:!0,pagination:!1,columns:r,dataSource:this.state.staffRoles}),i.a.createElement(fa.a.Item,null,i.a.createElement("br",null),i.a.createElement(Vt.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"Set MLM Commissions"))),this.state.redirect&&i.a.createElement(b.a,{to:"/settings/mlm"}))}}]),t}(i.a.Component),Ni=fa.a.create()(Ri);function Bi(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var Hi=oa.a.TabPane,qi=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={mlmItems:[],productMargin:[],active_practiceId:a.props.active_practiceId,loading:!0},a.loadMlmData=a.loadMlmData.bind(Object(f.a)(a)),a.deleteObject=a.deleteObject.bind(Object(f.a)(a)),a.loadRoles=a.loadRoles.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.loadMlmData(),this.loadRoles(),this.loadProductMargin()}},{key:"loadMlmData",value:function(){var e=this;ht("role_commission/",function(t){e.setState({mlmItems:t,loading:!1})},function(){e.setState({loading:!1})})}},{key:"loadRoles",value:function(){var e=this;ht(Xe,function(t){e.setState({staffRoles:t,loading:!1})},function(){e.setState({loading:!1})})}},{key:"loadProductMargin",value:function(){var e=this;ht("product_margin/",function(t){e.setState({productMargin:t})},function(){})}},{key:"editObject",value:function(e,t){this.setState({editId:e,editRecord:t,loading:!1},function(){this.props.history.push("/settings/mlm/edit")})}},{key:"deleteObject",value:function(e){var t=this,a=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Bi(a,!0).forEach(function(t){Object(u.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Bi(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},e,{is_active:!1});a.is_active=!1;ut(gt("product_margin/%s/",[e.id]),a,function(e){t.loadProductMargin()},function(){})}},{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"render",value:function(){var e=this,t=this,a={};this.state.staffRoles&&this.state.staffRoles.forEach(function(e){a[e.id]=e.name});var n={};t.state.productMargin.forEach(function(e){n[e.id]=[{title:"Role",key:"role",dataIndex:"role"}];for(var t=1;t<=e.level_count;t++)n[e.id].push({title:"Level "+t,key:t,dataIndex:t,render:function(e){return i.a.createElement("span",null,e,"%")}})});var r={};return t.state.productMargin.forEach(function(e){r[e.id]=[],t.state.staffRoles&&t.state.staffRoles.forEach(function(a){var n={role:a.name};if(e.level_count)for(var i=1;i<=e.level_count;i++)if(t.state.mlmItems)for(var l=0;l<t.state.mlmItems.length;l++){var s=t.state.mlmItems[l];if(s.margin.id==e.id&&s.level==i&&a.id==s.role){n[i]=s.commision_percent;break}}r[e.id].push(n)})}),i.a.createElement("div",null,i.a.createElement(b.d,null,i.a.createElement(b.b,{exact:!0,path:"/settings/mlm/generate",render:function(t){return i.a.createElement(Ni,Object.assign({},t,{loadData:e.loadMlmData},e.state))}}),this.state.editId&&this.state.editRecord?i.a.createElement(b.b,{exact:!0,path:"/settings/mlm/edit",render:function(t){return i.a.createElement(Ni,Object.assign({},t,{loadData:e.loadMlmData},e.state))}}):null,i.a.createElement(b.b,null,i.a.createElement("div",null,i.a.createElement("h2",null,"MLM Commissions",i.a.createElement(qt.b,{to:"/settings/mlm/generate"},i.a.createElement(Vt.a,{type:"primary",style:{float:"right"}},i.a.createElement(Bt.a,{type:"plus"}),"\xa0Add"))),i.a.createElement(ia.a,null,this.state.productMargin?i.a.createElement(oa.a,{type:"card"},this.state.productMargin.map(function(a){return i.a.createElement(Hi,{tab:a.name,key:a.id},i.a.createElement(Zt.a,null,i.a.createElement("br",null),i.a.createElement("h2",null,a.name,i.a.createElement(Vt.a.Group,{style:{float:"right"}},i.a.createElement(Vt.a,{type:"primary",onClick:function(){return e.editObject(a.id,r[a.id])}},i.a.createElement(Bt.a,{type:"edit"})," Edit"),i.a.createElement(Vt.a,{type:"danger",onClick:function(){return t.deleteObject(a)}},i.a.createElement(Bt.a,{type:"delete"})," Delete")))),i.a.createElement(ta.a,{loading:e.state.loading,pagination:!1,style:{marginTop:10},dataSource:r[a.id],rowKey:"role",columns:n[a.id],bordered:!0}))})):i.a.createElement("h4",null,"No MLM Data"))))))}}]),t}(i.a.Component),Yi=a(87);function zi(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Gi(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?zi(a,!0).forEach(function(t){Object(u.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):zi(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Ui=ga.a.TextArea,Wi=["PAGE","HEADER","PATIENT","FOOTER"].map(function(e){return i.a.createElement(ha.a.Button,{value:e},e)}),Ki=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).changeFormType=function(e){a.setState({selectedFormType:e.target.value})},a.handleSubmit=function(e){console.log(e),e.preventDefault();var t=Object(f.a)(a);a.props.form.validateFields(function(e,n){if(console.log(n),!e){var i=Gi({type:t.state.type},n),r="logo_path";i[r]&&n[r].file&&n[r].file.response?i[r]=n[r].file.response.image_path:i[r]=t.state.print_setting.logo_path,i.save_for_all||(i=Gi({},i,{sub_type:t.state.sub_type,id:t.state.print_setting.id})),delete i.save_for_all;var l=function(e){bt(k,"Settings Saved Successfully!!")},s=function(){};n.save_for_all?dt(gt(Ce,[a.props.active_practiceId]),i,l,s):dt(gt(Ie,[a.props.active_practiceId,t.state.type,t.state.sub_type]),i,l,s)}})},a.handleFormEditSettings=function(e,t){a.setState(function(a){return{editedPrintSettings:Gi({},a.editedPrintSettings,Object(u.a)({},e,t))}})},a.loadPDF=function(e){Object(f.a)(a);ht(e,function(e){e.report&&window.open(F+e.report)},function(){})},a.onchangeHandle=function(e,t){Object(f.a)(a);a.setState(Object(u.a)({},e,t),function(){this.state.is_patient_not&&this.props.form.resetFields()})},a.state={type:a.props.type,sub_type:a.props.sub_type,selectedFormType:"PAGE",print_setting:{},editedPrintSettings:{}},a.loadData=a.loadData.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){var e=this;ht(gt(Ie,[this.props.active_practiceId,e.state.type,e.state.sub_type]),function(t){t.length&&e.setState({print_setting:t[0]})},function(){})}},{key:"render",value:function(){var e=this;console.log(this.state);var t={labelCol:{xs:{span:8},sm:{span:8},md:{span:8},lg:{span:8}},wrapperCol:{xs:{span:16},sm:{span:16},md:{span:16},lg:{span:16}}},a=Wa.map(function(e){return i.a.createElement(Lt.a.Option,{value:e},e)}),n=Xa.map(function(e){return i.a.createElement(ha.a,{value:e.value},e.title)}),r=Ja.map(function(e){return i.a.createElement(ha.a,{value:e.value},e.value)}),l=$a.map(function(e){return i.a.createElement(ha.a,{value:e.value},e.value)}),s=Za.map(function(e){return i.a.createElement(ha.a,{value:e.value},e.title)}),c={name:"image",data:{name:"hello"},action:ct("blogImage/"),headers:{authorization:"authorization-text"},onChange:function(e){"uploading"!==e.file.status&&console.log(e.file,e.fileList),"done"===e.file.status?Yi.message.success("".concat(e.file.name," file uploaded successfully")):"error"===e.file.status&&Yi.message.error("".concat(e.file.name," file upload failed."))}},o=(en.map(function(e){return i.a.createElement("li",null,i.a.createElement(sa.a,{value:e.value},e.value))}),Ka.map(function(e){return i.a.createElement(ha.a,{value:e.value},e.value)})),u=Qa.map(function(e){return i.a.createElement(ha.a,{value:e.value},e.value)}),d="?preview=true&type="+this.props.type+"&sub_type="+this.props.sub_type;if(this.state.print_setting){var m=Gi({},this.state.print_setting,{},this.state.editedPrintSettings);Object.keys(m).forEach(function(e){m[e]&&(d+="&"+e+"="+encodeURIComponent(m[e]))})}var p=this.props.form.getFieldDecorator;return i.a.createElement(Zt.a,null,i.a.createElement(ea.a,{span:24},i.a.createElement(fa.a,{onSubmit:this.handleSubmit},i.a.createElement("div",{className:"div_padding_top"},i.a.createElement(Zt.a,{gutter:16},i.a.createElement(ea.a,{span:12},i.a.createElement("div",{style:{textAlign:"center"}},i.a.createElement(ha.a.Group,{buttonStyle:"solid",size:"small",onChange:this.changeFormType,defaultValue:this.state.selectedFormType},Wi),i.a.createElement("br",null)),i.a.createElement("div",{hidden:"PAGE"!=this.state.selectedFormType},i.a.createElement("h2",null,"Page Setup"),i.a.createElement(fa.a.Item,Object.assign({key:"page_size"},t,{label:"Paper Size"}),p("page_size",{initialValue:this.state.print_setting.page_size})(i.a.createElement(Lt.a,{style:{width:"100%"},onChange:function(t){return e.handleFormEditSettings("page_size",t)}},a))),i.a.createElement(fa.a.Item,Object.assign({label:"Orientation"},t),p("page_orientation",{initialValue:this.state.print_setting.page_orientation})(i.a.createElement(ha.a.Group,{onChange:function(t){return e.handleFormEditSettings("orientation",t.target.value)}},o))),i.a.createElement(fa.a.Item,Object.assign({label:i.a.createElement("span",null,"Printer Type\xa0")},t),p("page_print_type",{initialValue:this.state.print_setting.page_print_type})(i.a.createElement(ha.a.Group,{onChange:function(t){return e.handleFormEditSettings("printerType",t.target.value)}},u))),i.a.createElement(fa.a.Item,Object.assign({key:"page_margin_top",label:i.a.createElement("span",null,"Top Margin")},t),p("page_margin_top",{initialValue:this.state.print_setting.page_margin_top})(i.a.createElement(pa.a,{min:0,max:10,onChange:function(t){return e.handleFormEditSettings("page_margin_top",t)}})),i.a.createElement("span",{className:"ant-form-text"},"Inches")),i.a.createElement(fa.a.Item,Object.assign({key:"page_margin_left",label:i.a.createElement("span",null,"Left Margin")},t),p("page_margin_left",{initialValue:this.state.print_setting.page_margin_left})(i.a.createElement(pa.a,{min:0,max:10,onChange:function(t){return e.handleFormEditSettings("page_margin_left",t)}})),i.a.createElement("span",{className:"ant-form-text"},"Inches")),i.a.createElement(fa.a.Item,Object.assign({key:"page_margin_bottom",label:i.a.createElement("span",null,"Bottom Margin")},t),p("page_margin_bottom",{initialValue:this.state.print_setting.page_margin_bottom})(i.a.createElement(pa.a,{min:0,max:10,onChange:function(t){return e.handleFormEditSettings("page_margin_bottom",t)}})),i.a.createElement("span",{className:"ant-form-text"},"Inches")),i.a.createElement(fa.a.Item,Object.assign({key:"page_margin_right",label:i.a.createElement("span",null,"Right Margin")},t),p("page_margin_right",{initialValue:this.state.print_setting.page_margin_right})(i.a.createElement(pa.a,{min:0,max:10,onChange:function(t){return e.handleFormEditSettings("page_margin_right",t)}})),i.a.createElement("span",{className:"ant-form-text"},"Inches"))),i.a.createElement("div",{hidden:"HEADER"!=this.state.selectedFormType},i.a.createElement("h2",null,"Customize Header"),i.a.createElement(fa.a.Item,Object.assign({key:"header_include"},t,{label:i.a.createElement("span",null,"Include Header\xa0")}),p("header_include",{initialValue:this.state.print_setting.header_include})(i.a.createElement(ha.a.Group,{onChange:function(t){return e.handleFormEditSettings("header_include",t.target.value)}},n))),i.a.createElement(fa.a.Item,Object.assign({key:"header_text"},t,{label:i.a.createElement("span",null,"Header\xa0")}),p("header_text",{initialValue:this.state.print_setting.header_text})(i.a.createElement(ga.a,{onChange:function(t){return e.handleFormEditSettings("header_text",t.target.value)}}))),i.a.createElement(fa.a.Item,Object.assign({key:"header_left_text"},t,{label:i.a.createElement("span",null,"Left Text\xa0")}),p("header_left_text",{initialValue:this.state.print_setting.header_left_text})(i.a.createElement(Ui,{onChange:function(t){return e.handleFormEditSettings("header_left_text",t.target.value)}}))),i.a.createElement(fa.a.Item,Object.assign({key:"header_right_text"},t,{label:i.a.createElement("span",null,"Right Text\xa0")}),p("header_right_text",{initialValue:this.state.print_setting.header_right_text})(i.a.createElement(Ui,{onChange:function(t){return e.handleFormEditSettings("header_right_text",t.target.value)}}))),i.a.createElement(fa.a.Item,Object.assign({key:"logo_include"},t,{label:i.a.createElement("span",null,"Include Logo\xa0")}),p("logo_include",{initialValue:this.state.print_setting.logo_include})(i.a.createElement(ha.a.Group,{onChange:function(t){return e.handleFormEditSettings("logo_include",t.target.value)}},s))),i.a.createElement(fa.a.Item,Object.assign({key:"logo_path"},t,{label:i.a.createElement("span",null,"Logo\xa0")}),p("logo_path")(i.a.createElement(ua.a,c,i.a.createElement(Vt.a,null,i.a.createElement(Bt.a,{type:"upload"})," Click to Upload")))),i.a.createElement(fa.a.Item,Object.assign({key:"logo_type"},t,{label:i.a.createElement("span",null,"Type\xa0")}),p("logo_type",{initialValue:this.state.print_setting.logo_type})(i.a.createElement(ha.a.Group,{onChange:function(t){return e.handleFormEditSettings("logo_type",t.target.value)}},r))),i.a.createElement(fa.a.Item,Object.assign({key:"logo_alignment"},t,{label:i.a.createElement("span",null,"Alignment\xa0")}),p("logo_alignment",{initialValue:this.state.print_setting.logo_alignment})(i.a.createElement(ha.a.Group,{onChange:function(t){return e.handleFormEditSettings("logo_alignment",t.target.value)}},l)))),i.a.createElement("div",{hidden:"PATIENT"!=this.state.selectedFormType},i.a.createElement("h2",null,"Customize Patient Details"),i.a.createElement(fa.a.Item,null,p("patient_details",{})(i.a.createElement(sa.a,{onChange:function(t){return e.onchangeHandle("is_patient_not",t.target.checked)}},"Show Patient Details"))),i.a.createElement("ul",{className:"subLists"},i.a.createElement(fa.a.Item,null,p("exclude_history",{})(i.a.createElement(sa.a,null,"Exclude Mediacal History"))),i.a.createElement(fa.a.Item,null,p("exclude_phone",{})(i.a.createElement(sa.a,null,"Exclude Patient Number"))),i.a.createElement(fa.a.Item,null,p("exclude_email",{})(i.a.createElement(sa.a,null,"Exclude Patient Email Id"))),i.a.createElement(fa.a.Item,null,p("exclude_address",{})(i.a.createElement(sa.a,null,"Exclude address"))),i.a.createElement(fa.a.Item,null,p("exclude_blood_group",{})(i.a.createElement(sa.a,null,"Exclude Blood Group"))),i.a.createElement(fa.a.Item,null,p("exclude_gender_dob",{})(i.a.createElement(sa.a,null,"Exclude Patient Gender & DOB"))))),i.a.createElement("div",{hidden:"FOOTER"!=this.state.selectedFormType},i.a.createElement("h2",null,"Footer Setup"),i.a.createElement(fa.a.Item,Object.assign({key:"footer_margin_top"},t,{label:i.a.createElement("span",null,"Top Margin\xa0")}),p("footer_margin_top",{initialValue:this.state.print_setting.footer_margin_top})(i.a.createElement(pa.a,{min:0,max:10,onChange:function(t){return e.handleFormEditSettings("footer_margin_top",t)}})),i.a.createElement("span",{className:"ant-form-text"},"Inches")),i.a.createElement(fa.a.Item,Object.assign({key:"footer_text"},t,{label:i.a.createElement("span",null,"Full Width Content\xa0")}),p("footer_text",{initialValue:this.state.print_setting.footer_text})(i.a.createElement(Ui,{rows:3,onChange:function(t){return e.handleFormEditSettings("footer_text",t.target.value)}}))),i.a.createElement(fa.a.Item,Object.assign({key:"footer_left_text"},t,{label:i.a.createElement("span",null,"Left Signature\xa0")}),p("footer_left_text",{initialValue:this.state.print_setting.footer_left_text})(i.a.createElement(Ui,{onChange:function(t){return e.handleFormEditSettings("footer_left_text",t.target.value)}}))),i.a.createElement(fa.a.Item,Object.assign({key:"footer_right_text"},t,{label:i.a.createElement("span",null,"Right Signature\xa0")}),p("footer_right_text",{initialValue:this.state.print_setting.footer_right_text})(i.a.createElement(Ui,{onChange:function(t){return e.handleFormEditSettings("footer_right_text",t.target.value)}})))),i.a.createElement(Zt.a,null,i.a.createElement(na.a,null),i.a.createElement(fa.a.Item,Object.assign({},t,{key:"save_for_all"}),p("save_for_all",{})(i.a.createElement(sa.a,null,i.a.createElement("b",null," Save for all")))),i.a.createElement(fa.a.Item,null,i.a.createElement(Vt.a,{style:{margin:5},type:"primary",htmlType:"submit",value:"ALL"},"Save"),i.a.createElement(Vt.a,{style:{margin:5},onClick:function(){return e.loadPDF("patients/print/"+d+"&pdf=1")}},"Show Print Preview")))),i.a.createElement(ea.a,{span:12,style:{textAlign:"center"}},i.a.createElement("div",{style:{position:"absolute",backgroundColor:"black",color:"white",padding:10,right:20,top:50}},i.a.createElement("b",null,"PREVIEW")),i.a.createElement("iframe",{src:ct("patients/print/"+d),style:{width:"100%",height:"100%",minHeight:"600px",boxShadow:"-2px 0px 4px #B8B8B8"}})))))))}}]),t}(i.a.Component),Qi=fa.a.create()(Ki),Xi=oa.a.TabPane,Ji=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).setRandomKey=function(e){console.log(e),a.setState({randomKey:Math.random(),activeKey:e})},a.state={randomKey:Math.random(),activeKey:"a"},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this;return i.a.createElement("div",null,i.a.createElement("h2",null,"Print Settings"),i.a.createElement(oa.a,{defaultActiveKey:"EMR",size:"small",type:"card"},i.a.createElement(Xi,{tab:i.a.createElement("span",null,i.a.createElement(Bt.a,{type:"calculator"}),"EMR"),key:"EMR"},i.a.createElement(ia.a,null,i.a.createElement("h4",null,i.a.createElement("div",null,i.a.createElement(oa.a,{size:"small",onChange:this.setRandomKey},Ga.map(function(a,n){return i.a.createElement(Xi,{tab:a.title,key:n},i.a.createElement(Qi,{key:n.toString()==t.state.activeKey.toString()?a.title+t.state.randomKey:a.title,sub_type:a.title,active_practiceId:e.props.active_practiceId,type:"EMR"}))})))))),i.a.createElement(Xi,{tab:i.a.createElement("span",null,i.a.createElement(Bt.a,{type:"audit"}),"BILLING"),key:"BILLING"},i.a.createElement(ia.a,null,i.a.createElement("h4",null,i.a.createElement("div",null,i.a.createElement(oa.a,{size:"small",onChange:this.setRandomKey},Ua.map(function(a,n){return i.a.createElement(Xi,{tab:a.title,key:n},i.a.createElement(Qi,{key:n.toString()==t.state.activeKey.toString()?a.title+t.state.randomKey:a.title,sub_type:a.title,active_practiceId:e.props.active_practiceId,type:"BILLING"}))}))))))))}}]),t}(i.a.Component),$i=oa.a.TabPane,Zi=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={integrateData:{}},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"loadData",value:function(){}},{key:"render",value:function(){var e=this,t=[{key:"task_user",type:D,initialValue:this.state.integrateData.task_user,required:!0,label:"Username"},{key:"task_pass",type:"password",initialValue:this.state.integrateData.task_pass,required:!0,label:"Password"}],a={method:"post",successFn:function(t){e.loadData()},errorFn:function(){}},n=Yi.Form.create()(La);return i.a.createElement(Zt.a,null,i.a.createElement(ia.a,null,i.a.createElement("h2",null,"My Integrations"),i.a.createElement(oa.a,null,i.a.createElement($i,{tab:i.a.createElement("span",null,i.a.createElement(Bt.a,{type:"check-circle"}),"Task Tracker"),key:"Complaints"},i.a.createElement(n,{fields:t,formProp:a})),i.a.createElement($i,{tab:i.a.createElement("span",null,i.a.createElement(Bt.a,{type:"phone"}),"Calling"),key:"observations"}))))}}]),t}(i.a.Component),er=function(e){function t(e){return Object(d.a)(this,t),Object(p.a)(this,Object(h.a)(t).call(this,e))}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("h2",null,"Email PDF Settings"),i.a.createElement(ia.a,null,i.a.createElement(Qi,{sub_type:"INVOICE",active_practiceId:this.props.active_practiceId,type:"MAIL"})))}}]),t}(i.a.Component),tr=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).loadRequiredData=function(){var e=Object(f.a)(a);ht(gt(Ze,[a.props.active_practiceId]),function(t){e.setState({roomTypes:t})},function(){})},a.state={editPackage:a.props.editPackage?a.props.editPackage:null,roomTypes:[],taxes:[]},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.loadRequiredData(),this.loadTaxes()}},{key:"loadTaxes",value:function(){var e=this;ht(gt(K,[this.props.active_practiceId]),function(t){e.setState({taxes:t})},function(){})}},{key:"render",value:function(){var e=this,t=fa.a.create()(La),a=[{label:"Package Name",key:"name",required:!0,initialValue:this.props.editPackage?this.props.editPackage.name:null,type:D},{label:"Days of Booking",key:"no_of_days",required:!0,initialValue:this.props.editPackage?this.props.editPackage.no_of_days:null,type:I,follow:"INR"},{label:"Normal Price",key:"normal_price",required:!0,initialValue:this.props.editPackage?(this.props.editPackage.normal_price+this.props.editPackage.normal_tax_value).toFixed(2):null,type:I,follow:"INR"},{label:"Tatkal Price",key:"tatkal_price",required:!0,initialValue:this.props.editPackage?(this.props.editPackage.tatkal_price+this.props.editPackage.tatkal_tax_value).toFixed(2):null,type:I,follow:"INR"},{label:"Image",key:"image",initialValue:this.props.editPackage?this.props.editPackage.image:null,type:M},{label:"Room Type",key:"room",required:!0,initialValue:this.props.editPackage?this.props.editPackage.room:null,type:S,options:this.state.roomTypes.map(function(e){return Object.create({label:e.name,value:e.id})})},{label:"Taxes",key:"taxes",required:!0,initialValue:this.props.editPackage&&this.props.editPackage.taxes?this.props.editPackage.taxes.map(function(e){return e.id}):[],type:x,options:this.state.taxes.map(function(e){return Object.create({label:e.name+"("+e.tax_value+"%)",value:e.id})})}],n={method:"post",action:gt(et,[this.props.active_practiceId]),successFn:function(){bt(k,"Package Saved Successfully"),e.props.loadData&&e.props.loadData(),e.props.history.push("/settings/bed-packages")},errorFn:function(){}},r=[];return this.state.editPackage&&r.push({key:"id",value:this.state.editPackage.id}),i.a.createElement("div",null,i.a.createElement(ia.a,null,i.a.createElement(t,Object.assign({fields:a,formProp:n,defaultValues:r,title:this.state.editPackage?"Edit Bed Package":"Add Bed Packages"},this.props))))}}]),t}(i.a.Component),ar=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).loadData=function(){var e=Object(f.a)(a);ht(gt(et,[a.props.active_practiceId]),function(t){e.setState({loading:!1,packages:t})},function(){e.setState({loading:!1})})},a.editObject=function(e){a.setState({editPackage:e,loading:!1}),a.props.history.push("/settings/bed-packages/edit")},a.state={loading:!1,packages:[]},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"deleteObject",value:function(e){var t=this,a=e;a.is_active=!1;dt(gt(et,[this.props.active_practiceId]),a,function(e){t.loadData()},function(){})}},{key:"render",value:function(){var e=this,t=this,a=[{dataIndex:"image",key:"image",render:function(e){return e?i.a.createElement("img",{src:ot(e),alt:"",style:{maxWidth:200,maxHeight:100}}):null}},{title:"Package Name",dataIndex:"name",key:"name"},{title:"Days",dataIndex:"no_of_days",key:"no_of_days"},{title:"Normal Price+tax (INR)",dataIndex:"normal_price",key:"normal_price",render:function(e,t){return i.a.createElement("p",null,(t.normal_price+t.normal_tax_value).toFixed(2))}},{title:"Tatkal Price+tax (INR)",dataIndex:"tatkal_price",key:"tatkal_price",render:function(e,t){return i.a.createElement("p",null,(t.tatkal_price+t.tatkal_tax_value).toFixed(2))}},{title:"Action",key:"action",render:function(a,n){return i.a.createElement("span",null,i.a.createElement("a",{onClick:function(){return e.editObject(n)}},"Edit"),i.a.createElement(na.a,{type:"vertical"}),i.a.createElement(aa.a,{title:"Are you sure delete this prescription?",onConfirm:function(){return t.deleteObject(n)},okText:"Yes",cancelText:"No"},i.a.createElement("a",null,"Delete")))}}];return i.a.createElement(b.d,null,i.a.createElement(b.b,{path:"/settings/bed-packages/add",render:function(t){return i.a.createElement(tr,Object.assign({},e.state,e.props,t,{loadData:e.loadData}))}}),i.a.createElement(b.b,{path:"/settings/bed-packages/edit",render:function(t){return e.state.editPackage?i.a.createElement(tr,Object.assign({},e.state,e.props,t,{loadData:e.loadData})):i.a.createElement(b.a,{to:"/settings/bed-packages"})}}),i.a.createElement(b.b,null,i.a.createElement(ia.a,{title:i.a.createElement("h4",null,"Bed Packages ",i.a.createElement(qt.b,{to:"/settings/bed-packages/add"},i.a.createElement(Vt.a,{style:{float:"right"},type:"primary"},i.a.createElement(Bt.a,{type:"plus"})," Add")))},i.a.createElement(Zn,{dataSource:this.state.packages,loading:this.state.loading,columns:a}))))}}]),t}(i.a.Component),nr=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).handleCancel=function(){a.setState({visible:!1})},a.showDeletedExpenses=function(){a.setState({showDeleted:!0,deletedLoading:!0}),a.loadData(!0)},a.state={redirect:!1,visible:!1,rooms:null,loading:!0,showDeleted:!1,deletedLoading:!1,deletedRooms:[],editObj:{}},a.loadData=a.loadData.bind(Object(f.a)(a)),a.deleteObject=a.deleteObject.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this,a=function(a){console.log("get table"),e?t.setState({deletedRooms:a,deletedLoading:!1}):t.setState({rooms:a,loading:!1})},n=function(){e?t.setState({deletedLoading:!1}):t.setState({loading:!1})};e?ht(gt(Ze,[this.props.active_practiceId]),a,n,{deleted:!0,practice:this.props.active_practiceId}):ht(gt(Ze,[this.props.active_practiceId]),a,n)}},{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"editTax",value:function(e){this.setState({editObj:e,visible:!0})}},{key:"deleteObject",value:function(e,t){var a=this,n=e;n.is_active=t;dt(gt(Ze,[this.props.active_practiceId]),n,function(e){a.loadData(),a.state.showDeleted&&a.loadData(!0)},function(){})}},{key:"render",value:function(){var e=this,t=this,a=[{title:"Room Type",dataIndex:"name",key:"name"},{title:"Normal Bed Count",dataIndex:"normal_seats",key:"normal_seats"},{title:"Tatkal Bed Count",dataIndex:"tatkal_seats",key:"tatkal_seats"},{title:"Action",key:"action",render:function(a,n){return n.is_active?i.a.createElement("span",null,i.a.createElement("a",{onClick:function(){return e.editTax(n)}},"  Edit"),i.a.createElement(na.a,{type:"vertical"}),i.a.createElement(aa.a,{title:"Are you sure to delete this?",onConfirm:function(){return t.deleteObject(n,!1)},okText:"Yes",cancelText:"No"},i.a.createElement("a",null,"Delete"))):i.a.createElement("span",null,i.a.createElement(aa.a,{title:"Are you sure show this?",onConfirm:function(){return t.deleteObject(n,!0)},okText:"Yes",cancelText:"No"},i.a.createElement("a",null,"Show")))}}],n=[{label:"Room Type",key:"name",required:!0,type:D},{label:"Normal Bed Count",key:"normal_seats",required:!0,type:I,min:0},{label:"Tatkal Bed Count",key:"tatkal_seats",required:!0,type:I,min:0}],r=[{label:"Room Type",key:"name",required:!0,initialValue:this.state.editObj.name,type:D},{label:"Normal Bed Count",key:"normal_seats",required:!0,initialValue:this.state.editObj.normal_seats,type:I,min:0},{label:"Tatkal Bed Count",required:!0,initialValue:this.state.editObj.tatkal_seats,key:"tatkal_seats",type:I,min:0}],l={successFn:function(e){t.handleCancel(),t.loadData(),console.log(e),console.log("sucess"),bt(k,"success")},errorFn:function(){},action:gt(Ze,[this.props.active_practiceId]),method:"post"},s=[{key:"practice",value:this.props.active_practiceId}],c=[{key:"practice",value:this.props.active_practiceId},{key:"id",value:this.state.editObj.id}],o=fa.a.create()(La);return i.a.createElement("div",null,i.a.createElement("h2",null,"Room Types"),i.a.createElement(ia.a,null,i.a.createElement(o,{defaultValues:s,formProp:l,fields:n}),i.a.createElement(na.a,null),i.a.createElement(Zn,{loading:this.state.loading,columns:a,dataSource:this.state.rooms})),i.a.createElement($t.a,{visible:this.state.visible,footer:null,onCancel:this.handleCancel},i.a.createElement(o,{title:"Edit Room Type",defaultValues:c,formProp:l,fields:r}),i.a.createElement(Vt.a,{key:"back",onClick:this.handleCancel},"Return"),","))}}]),t}(i.a.Component),ir=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={redirect:!1,fields:[{label:"Offer Name ",key:"code",placeholder:"Offer Name",required:!0,type:D},{label:"Description ",key:"description",placeholder:"E.g. 20% off on all services",type:D},{label:"Discount",key:"discount",required:!0,type:I},{label:"Discount Unit",key:"unit",required:!0,options:[{label:"Percent",value:"%"},{label:"Rupees",value:"INR"}],type:S,initialValue:"%"}]},a.changeRedirect=a.changeRedirect.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"render",value:function(){var e=this,t={successFn:function(t){bt(k,"success"),e.props.loadData&&e.props.loadData()},errorFn:function(){},action:gt(Q,[this.props.active_practiceId]),method:"post",beforeSubmit:function(e){console.log(e)}},a=fa.a.create()(La);return i.a.createElement("div",null,i.a.createElement(a,Object.assign({formProp:t,fields:this.state.fields},this.props)),this.state.redirect&&i.a.createElement(b.a,{to:"/settings/loyalty"}))}}]),t}(i.a.Component),rr=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={offers:null,loading:!0},a.loadData=a.loadData.bind(Object(f.a)(a)),a.deleteObject=a.deleteObject.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentWillMount",value:function(){this.loadData()}},{key:"loadData",value:function(){var e=this;ht(gt(Q,[this.props.active_practiceId]),function(t){console.log("get table"),e.setState({offers:t,loading:!1})},function(){e.setState({loading:!0})})}},{key:"deleteObject",value:function(e){var t=this,a=e;a.is_active=!1;dt(gt(Q,[this.props.active_practiceId]),a,function(e){t.loadData()},function(){})}},{key:"render",value:function(){var e=this,t=[{title:"Name",dataIndex:"code",key:"code"},{title:"Description",dataIndex:"description",key:"description"},{title:"Discount",dataIndex:"discount",key:"discount"},{title:"Discount Unit",dataIndex:"unit",key:"unit"},{title:"Action",key:"action",render:function(t,a){return i.a.createElement(aa.a,{title:"Are you sure delete this prescription?",onConfirm:function(){return e.deleteObject(a)},okText:"Yes",cancelText:"No"},i.a.createElement("a",null,"Delete"))}}];return i.a.createElement(Zt.a,null,i.a.createElement(ir,Object.assign({},this.props,{loadData:this.loadData})),i.a.createElement(na.a,null),i.a.createElement(Zn,{loading:this.state.loading,columns:t,dataSource:this.state.offers}))}}]),t}(i.a.Component),lr=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=[{label:"Membership Name ",key:"name",placeholder:"Membership Name",required:!0,type:D},{label:"Fee",key:"fee",required:!0,type:I,follow:"INR"},{label:"Benefit",key:"benefit",required:!0,type:I,follow:"%"},{label:"Validity",key:"validity",required:!0,type:I,follow:"Months"}],t=this,a={successFn:function(e){bt(k,"success"),t.props.loadData&&t.props.loadData()},errorFn:function(){},action:gt(He,[this.props.active_practiceId]),method:"post"},n=[{key:"practice",value:this.state.active_practiceId}],r=fa.a.create()(La);return i.a.createElement(Zt.a,null,i.a.createElement(r,Object.assign({fields:e,formProp:a,defaultValues:n},this.props)))}}]),t}(i.a.Component),sr=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).loadData=function(){var e=Object(f.a)(a);ht(gt(He,[a.props.active_practiceId]),function(t){e.setState({membership:t})},function(){})},a.state={membership:[]},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"deleteObject",value:function(e){var t=this,a=e;a.is_active=!1;dt(gt(He,[this.props.active_practiceId]),a,function(e){t.loadData()},function(){})}},{key:"render",value:function(){var e=this,t=[{title:"Name",dataIndex:"name",key:"name"},{title:"Fee (INR)",dataIndex:"fee",key:"fee"},{title:"Benefit (%)",dataIndex:"benefit",key:"benefit"},{title:"Opening Balance (INR)",dataIndex:"fee",key:"opening",render:function(e,t){return i.a.createElement("span",null,t.fee+t.fee*t.benefit/100)}},{title:"Validity (Months)",dataIndex:"validity",key:"validity"},{title:"Action",key:"action",render:function(t,a){return i.a.createElement(aa.a,{title:"Are you sure delete this prescription?",onConfirm:function(){return e.deleteObject(a)},okText:"Yes",cancelText:"No"},i.a.createElement("a",null,"Delete"))}}];return i.a.createElement(Zt.a,null,i.a.createElement(lr,Object.assign({},this.props,{loadData:this.loadData})),i.a.createElement(na.a,null),i.a.createElement(Zn,{loading:this.state.loading,columns:t,dataSource:this.state.membership}))}}]),t}(i.a.Component),cr=oa.a.TabPane,or=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return i.a.createElement(Zt.a,null,i.a.createElement("h2",null,"Loyalty Settings"),i.a.createElement(ia.a,null,i.a.createElement(oa.a,null,i.a.createElement(cr,{tab:i.a.createElement("span",null,i.a.createElement(Bt.a,{type:"percentage"}),"Offers"),key:"#offers"},i.a.createElement(rr,this.props)),i.a.createElement(cr,{tab:i.a.createElement("span",null,i.a.createElement(Bt.a,{type:"pound"}),"Membership"),key:"#membership"},i.a.createElement(sr,this.props)))))}}]),t}(i.a.Component),ur=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={redirect:!1,editFields:a.props.editTest?a.props.editTest:null,productMargin:[]},a.changeRedirect=a.changeRedirect.bind(Object(f.a)(a)),a.loadProductMargin(),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e,editFields:{}})}},{key:"loadProductMargin",value:function(){var e=this;ht("product_margin/",function(t){e.setState({productMargin:t})},function(){})}},{key:"render",value:function(){var e=this,t=this,a=Yi.Form.create()(La),n=[{label:"Test Name",key:"name",placeholder:"Test Name",type:D,initialValue:this.state.editFields?this.state.editFields.name:null,required:!0},{label:"Cost",key:"cost",type:I,initialValue:this.state.editFields?this.state.editFields.cost:null,required:!0,follow:"INR",min:1},{label:"MLM Margin Type",type:S,initialValue:this.state.editFields?this.state.editFields.margin:null,key:"margin",required:!0,options:t.state.productMargin.map(function(e){return{label:e.name,value:e.id}})},{label:"Instructions",key:"instruction",placeholder:"Test Instructions",initialValue:this.state.editFields?this.state.editFields.instruction:null,type:"textfield"}],r={successFn:function(e){bt(k,"success"),t.props.loadData(),console.log(e)},errorFn:function(){},action:gt(le,[t.props.active_practiceId]),method:"post"},l=[];return this.state.editFields&&l.push({key:"id",value:this.state.editFields.id}),i.a.createElement(Zt.a,null,i.a.createElement(b.b,{exact:!0,path:"/settings/labs/add",render:function(t){return i.a.createElement(a,Object.assign({title:"Add Lab",changeRedirect:e.changeRedirect,formProp:r,fields:n},t))}}),i.a.createElement(b.b,{exact:!0,path:"/settings/labs/edit",render:function(t){return e.state.editFields?i.a.createElement(a,Object.assign({title:"Add Lab",defaultValues:l,changeRedirect:e.changeRedirect},t,{formProp:r,fields:n})):i.a.createElement(b.a,{to:"/settings/labs"})}}),i.a.createElement(na.a,null),this.state.redirect&&i.a.createElement(b.a,{to:"/settings/labs"}))}}]),t}(i.a.Component),dr=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={tests:null,editTest:null,loading:!0,productMargin:null},a.editLabs=a.editLabs.bind(Object(f.a)(a)),a.loadData=a.loadData.bind(Object(f.a)(a)),a.deleteTest=a.deleteTest.bind(Object(f.a)(a)),a.loadProductMargin=a.loadProductMargin.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.loadData(),this.loadProductMargin()}},{key:"loadData",value:function(){var e=this;ht(gt(le,[e.props.active_practiceId]),function(t){console.log("get table"),e.setState({tests:t,loading:!1})},function(){e.setState({loading:!1})})}},{key:"editLabs",value:function(e){var t=this;this.setState({editTest:e,loading:!1},function(){t.props.history.push("/settings/labs/edit")})}},{key:"deleteTest",value:function(e){var t=this,a=e;a.is_active=!1;dt(gt(le,[this.props.active_practiceId]),a,function(e){t.loadData()},function(){})}},{key:"loadProductMargin",value:function(){var e=this;ht("product_margin/",function(t){e.setState({productMargin:t})},function(){})}},{key:"render",value:function(){var e=this,t=this,a={};this.state.productMargin&&this.state.productMargin.forEach(function(e){a[e.id]=e.name});var n=[{title:"Name",dataIndex:"name",key:"code"},{title:"Cost",dataIndex:"cost",key:"cost"},{title:" Test Instructions",dataIndex:"instruction",key:"instruction"},{title:" MLM Margin",key:"margin",render:function(e,t){return i.a.createElement("span",null," ",a[t.margin])}},{title:"Action",key:"action",render:function(e,a){return i.a.createElement("span",null,i.a.createElement("a",{onClick:function(){return t.editLabs(a)}},"Edit"),i.a.createElement(na.a,{type:"vertical"}),i.a.createElement(aa.a,{title:"Are you sure delete this test?",onConfirm:function(){return t.deleteTest(a)},okText:"Yes",cancelText:"No"},i.a.createElement("a",null,"Delete")))}}];return i.a.createElement(Zt.a,null,i.a.createElement(b.b,{exact:!0,path:"/settings/labs/add",render:function(a){return i.a.createElement(ur,Object.assign({},t.state,{loadData:e.loadData},e.props,a))}}),i.a.createElement(b.b,{exact:!0,path:"/settings/labs/edit",render:function(a){return i.a.createElement(ur,Object.assign({},t.state,{loadData:e.loadData},e.props,a))}}),i.a.createElement(b.b,{exact:!0,path:"/settings/labs"},i.a.createElement("div",null,i.a.createElement(Zt.a,null,i.a.createElement("h2",null,i.a.createElement(qt.b,{to:"/settings/labs/add"},i.a.createElement(Vt.a,{type:"primary",style:{float:"right"}},i.a.createElement(Bt.a,{type:"plus"}),"\xa0Add")))),i.a.createElement(Zn,{loading:this.state.loading,columns:n,dataSource:this.state.tests}))))}}]),t}(i.a.Component);function mr(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function pr(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?mr(a,!0).forEach(function(t){Object(u.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):mr(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}Lt.a.Option;var hr=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).onChangeHandler=function(e){a.setState({panelCost:e})},a.onChangeSelect=function(e){a.setState(function(t){if(t.selectedTest[e])return bt(O,"Item Already Added"),{};for(var a=null,n=0;n<t.tests.length;n++)if(t.tests[n].id==e){a=t.tests[n];break}return a?{selectedTest:pr({},t.selectedTest,Object(u.a)({},e,a))}:{}})},a.removeLabPanel=function(e){a.setState(function(e){return{}}),console.log("id",e)},a.handleSubmit=function(e){e.preventDefault();var t=Object(f.a)(a);a.props.form.validateFields(function(e,n){if(!e){var i=pr({},n,{tests:Object.keys(a.state.selectedTest)});console.log("test",i);dt(gt(ge,[t.props.active_practiceId]),i,function(e){e&&console.log(e)},function(){})}})},a.state={panelCost:0,tests:[],selectedTest:{}},a.loadTests=a.loadTests.bind(Object(f.a)(a)),a.handleCancel=a.handleCancel.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.loadTests()}},{key:"loadTests",value:function(){var e=this;ht(gt(le,[e.props.active_practiceId]),function(t){console.log("get table"),e.setState({tests:t,loading:!1}),console.log(JSON.stringify(e.state.tests))},function(){e.setState({loading:!1})})}},{key:"onChangeCostCalculate",value:function(){}},{key:"handleCancel",value:function(){this.props.history.push("/settings/labs")}},{key:"render",value:function(){var e=this,t=this,a={labelCol:{xs:{span:8},sm:{span:8},md:{span:8},lg:{span:8}},wrapperCol:{xs:{span:16},sm:{span:16},md:{span:16},lg:{span:16}}},n=Object.keys(this.state.selectedTest),r=0;n.forEach(function(e){r+=parseInt(t.state.selectedTest[e].cost)}),console.log("total cost",r);var l=this.props.form.getFieldDecorator,s=this.state.tests.map(function(e){return i.a.createElement(Lt.a.Option,{value:e.id},e.name)});return i.a.createElement(Zt.a,null,i.a.createElement(ea.a,{span:18},i.a.createElement(Yi.Form,{onSubmit:this.handleSubmit},i.a.createElement(Yi.Form.Item,Object.assign({label:"Panel Name"},a),l("name",{})(i.a.createElement(ga.a,null))),i.a.createElement(Yi.Form.Item,Object.assign({label:i.a.createElement("span",null,"Test Name")},a),i.a.createElement(Lt.a,{style:{width:"100%"},onChange:this.onChangeSelect},s),i.a.createElement("div",null,n?n.map(function(a){return i.a.createElement("p",{key:a},t.state.selectedTest[a].name," ",i.a.createElement("span",{style:{paddingLeft:"50%"}},e.state.selectedTest[a].cost),i.a.createElement(Vt.a,{icon:"close",style:{float:"right"},onClick:function(){return e.removeLabPanel(t.state.selectedTest[a].id)},type:"danger",shape:"circle",size:"small"}))}):null)),i.a.createElement(Yi.Form.Item,Object.assign({label:i.a.createElement("span",null,"Panel Cost")},a),l("cost",{initialValue:r})(i.a.createElement(pa.a,null)),i.a.createElement("span",{className:"ant-form-text"}," Total : ","number"===typeof r?r:0)),i.a.createElement(Yi.Form.Item,null,i.a.createElement(Vt.a,{type:"primary",htmlType:"submit"},"Submit"),"\xa0\xa0\xa0",i.a.createElement(Vt.a,{onClick:this.handleCancel},"Cancel")))))}}]),t}(i.a.Component),fr=Yi.Form.create()(hr);function gr(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var br=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={labPanel:null,editTest:null,selectedTest:{}},a.loadLabPanel=a.loadLabPanel.bind(Object(f.a)(a)),a.editPanels=a.editPanels.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.loadLabPanel()}},{key:"loadLabPanel",value:function(){var e=this;ht(gt(ge,[e.props.active_practiceId]),function(t){e.setState({labPanel:t,loading:!1})},function(){e.setState({})})}},{key:"editPanels",value:function(e){var t=this;this.setState({editTest:e,loading:!1},function(){t.props.history.push("/settings/labs/edit")})}},{key:"deleteLabPanel",value:function(e){var t=this,a=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?gr(a,!0).forEach(function(t){Object(u.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):gr(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},e,{is_active:!1,tests:Object.keys(this.state.selectedTest)});dt(gt(ge,[this.props.active_practiceId]),a,function(e){t.loadLabPanel()},function(){})}},{key:"render",value:function(){var e=this,t=this,a={};this.state.productMargin&&this.state.productMargin.forEach(function(e){a[e.id]=e.name});var n=[{title:"Name",dataIndex:"name",key:"code"},{title:"Cost",dataIndex:"cost",key:"cost"},{title:"Action",key:"action",render:function(e,a){return i.a.createElement("span",null,i.a.createElement("a",{onClick:function(){return t.editPanels(a)}},"Edit"),i.a.createElement(na.a,{type:"vertical"}),i.a.createElement(aa.a,{title:"Are you sure delete this test?",onConfirm:function(){return t.deleteLabPanel(a)},okText:"Yes",cancelText:"No"},i.a.createElement("a",null,"Delete")))}}],r=[{title:"Name",dataIndex:"name",key:"code"},{title:"Cost",dataIndex:"cost",key:"cost"},{title:" Test Instructions",dataIndex:"instruction",key:"instruction"}];return i.a.createElement(Zt.a,null,i.a.createElement(b.b,{exact:!0,path:"/settings/labs/add",render:function(a){return i.a.createElement(fr,Object.assign({},t.state,{loadData:e.loadData},e.props,a))}}),i.a.createElement(b.b,{exact:!0,path:"/settings/labs/edit",render:function(a){return i.a.createElement(fr,Object.assign({},t.state,{loadData:e.loadData},e.props,a))}}),i.a.createElement(b.b,{exact:!0,path:"/settings/labs"},i.a.createElement("div",null,i.a.createElement(Zt.a,null,i.a.createElement("h2",null,i.a.createElement(qt.b,{to:"/settings/labs/add"},i.a.createElement(Vt.a,{type:"primary",style:{float:"right"}},i.a.createElement(Bt.a,{type:"plus"}),"\xa0Add")))),i.a.createElement(Zn,{loading:this.state.loading,columns:n,expandedRowRender:function(e){return i.a.createElement(ia.a,null,i.a.createElement(ta.a,{pagination:!1,columns:r,dataSource:e.tests}))},dataSource:this.state.labPanel}))))}}]),t}(i.a.Component),yr=oa.a.TabPane,Er=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("h2",null,"Lab Tracking"),i.a.createElement(ia.a,null,i.a.createElement(oa.a,null,i.a.createElement(yr,{key:"labTests",tab:"Lab Tests"},i.a.createElement(dr,this.props)),i.a.createElement(yr,{key:"labPanels",tab:"Lab Panels"},i.a.createElement(br,this.props)))))}}]),t}(i.a.Component),vr=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).loadRequiredData=function(){var e=Object(f.a)(a);ht(gt(K,[a.props.active_practiceId]),function(t){e.setState({taxes:t})},function(){})},a.state={editPackage:a.props.editPackage?a.props.editPackage:null,taxes:[]},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.loadRequiredData()}},{key:"render",value:function(){var e=this,t=fa.a.create()(La),a=[{label:"Package Name",key:"name",required:!0,initialValue:this.props.editPackage?this.props.editPackage.name:null,type:D},{label:"Image",key:"image",initialValue:this.props.editPackage?this.props.editPackage.image:null,type:M},{label:"Days of Booking",key:"no_of_days",required:!0,initialValue:this.props.editPackage?this.props.editPackage.no_of_days:null,type:I,follow:"INR"},{label:"Price",key:"price",required:!0,initialValue:this.props.editPackage?this.props.editPackage.final_price:null,type:I,follow:"INR"},{label:"Taxes",key:"taxes",required:!0,initialValue:this.props.editPackage&&this.props.editPackage.taxes?this.props.editPackage.taxes.map(function(e){return e.id}):[],type:x,options:this.state.taxes.map(function(e){return Object.create({label:e.name+"("+e.tax_value+"%)",value:e.id})})}],n={method:"post",action:gt(tt,[this.props.active_practiceId]),successFn:function(){bt(k,"Package Saved Successfully"),e.props.loadData&&e.props.loadData(),e.props.history.push("/settings/medicine-packages")},errorFn:function(){}},r=[];return this.state.editPackage&&r.push({key:"id",value:this.state.editPackage.id}),i.a.createElement("div",null,i.a.createElement(ia.a,null,i.a.createElement(t,Object.assign({fields:a,formProp:n,defaultValues:r,title:this.state.editPackage?"Edit Medicine Package":"Add Medicine Packages"},this.props))))}}]),t}(i.a.Component),_r=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).loadData=function(){var e=Object(f.a)(a);ht(gt(tt,[a.props.active_practiceId]),function(t){e.setState({loading:!1,packages:t})},function(){e.setState({loading:!1})})},a.editObject=function(e){a.setState({editPackage:e,loading:!1}),a.props.history.push("/settings/medicine-packages/edit")},a.state={loading:!1,packages:[]},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"deleteObject",value:function(e){var t=this,a=e;a.is_active=!1;dt(gt(tt,[this.props.active_practiceId]),a,function(e){t.loadData()},function(){})}},{key:"render",value:function(){var e=this,t=this,a=[{dataIndex:"image",key:"image",render:function(e){return e?i.a.createElement("img",{src:ot(e),alt:"",style:{maxWidth:200,maxHeight:100}}):null}},{title:"Package Name",dataIndex:"name",key:"name"},{title:"Days",dataIndex:"no_of_days",key:"no_of_days"},{title:"Price (INR) + Tax",dataIndex:"final_price",key:"price"},{title:"Action",key:"action",render:function(a,n){return i.a.createElement("span",null,i.a.createElement("a",{onClick:function(){return e.editObject(n)}},"Edit"),i.a.createElement(na.a,{type:"vertical"}),i.a.createElement(aa.a,{title:"Are you sure delete this item?",onConfirm:function(){return t.deleteObject(n)},okText:"Yes",cancelText:"No"},i.a.createElement("a",null,"Delete")))}}];return i.a.createElement(b.d,null,i.a.createElement(b.b,{path:"/settings/medicine-packages/add",render:function(t){return i.a.createElement(vr,Object.assign({},e.state,e.props,t,{loadData:e.loadData}))}}),i.a.createElement(b.b,{path:"/settings/medicine-packages/edit",render:function(t){return e.state.editPackage?i.a.createElement(vr,Object.assign({},e.state,e.props,t,{loadData:e.loadData})):i.a.createElement(b.a,{to:"/settings/medicine-packages"})}}),i.a.createElement(b.b,null,i.a.createElement(ia.a,{title:i.a.createElement("h4",null,"Medicine Packages ",i.a.createElement(qt.b,{to:"/settings/medicine-packages/add"},i.a.createElement(Vt.a,{style:{float:"right"},type:"primary"},i.a.createElement(Bt.a,{type:"plus"})," Add")))},i.a.createElement(Zn,{dataSource:this.state.packages,loading:this.state.loading,columns:a}))))}}]),t}(i.a.Component),kr=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).handleCancel=function(){a.setState({visible:!1})},a.showDeletedExpenses=function(){a.setState({showDeleted:!0,deletedLoading:!0}),a.loadData(!0)},a.state={redirect:!1,visible:!1,diseases:null,loading:!0,showDeleted:!1,deletedLoading:!1,deletedRooms:[],editObj:{}},a.loadData=a.loadData.bind(Object(f.a)(a)),a.deleteObject=a.deleteObject.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this,a=function(a){console.log("get table"),e?t.setState({deletedRooms:a,deletedLoading:!1}):t.setState({diseases:a,loading:!1})},n=function(){e?t.setState({deletedLoading:!1}):t.setState({loading:!1})};e?ht(gt(it,[this.props.active_practiceId]),a,n,{deleted:!0,practice:this.props.active_practiceId}):ht(gt(it,[this.props.active_practiceId]),a,n)}},{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"editTax",value:function(e){this.setState({editObj:e,visible:!0})}},{key:"deleteObject",value:function(e,t){var a=this,n=e;n.is_active=t;dt(gt(it,[this.props.active_practiceId]),n,function(e){a.loadData(),a.state.showDeleted&&a.loadData(!0)},function(){})}},{key:"render",value:function(){var e=this,t=this,a=[{title:"Disease",dataIndex:"name",key:"name"},{title:"Action",key:"action",render:function(a,n){return n.is_active?i.a.createElement("span",null,i.a.createElement("a",{onClick:function(){return e.editTax(n)}},"  Edit"),i.a.createElement(na.a,{type:"vertical"}),i.a.createElement(aa.a,{title:"Are you sure to delete this?",onConfirm:function(){return t.deleteObject(n,!1)},okText:"Yes",cancelText:"No"},i.a.createElement("a",null,"Delete"))):i.a.createElement("span",null,i.a.createElement(aa.a,{title:"Are you sure show this?",onConfirm:function(){return t.deleteObject(n,!0)},okText:"Yes",cancelText:"No"},i.a.createElement("a",null,"Show")))}}],n=[{label:"Disease",key:"name",required:!0,type:D}],r=[{label:"Disease",key:"name",required:!0,initialValue:this.state.editObj.name,type:D}],l={successFn:function(e){t.handleCancel(),t.loadData(),console.log(e),console.log("sucess"),bt(k,"success")},errorFn:function(){},action:gt(it,[this.props.active_practiceId]),method:"post"},s=[{key:"practice",value:this.props.active_practiceId}],c=[{key:"practice",value:this.props.active_practiceId},{key:"id",value:this.state.editObj.id}],o=fa.a.create()(La);return i.a.createElement("div",null,i.a.createElement("h2",null,"Disease List"),i.a.createElement(ia.a,null,i.a.createElement(o,{defaultValues:s,formProp:l,fields:n}),i.a.createElement(na.a,null),i.a.createElement(Zn,{loading:this.state.loading,columns:a,dataSource:this.state.diseases})),i.a.createElement($t.a,{visible:this.state.visible,footer:null,onCancel:this.handleCancel},i.a.createElement(o,{title:"Edit Disease",defaultValues:c,formProp:l,fields:r}),i.a.createElement(Vt.a,{key:"back",onClick:this.handleCancel},"Return"),","))}}]),t}(i.a.Component),Or=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).handleCancel=function(){a.setState({visible:!1})},a.state={redirect:!1,visible:!1,data:null,loading:!0},a.loadData=a.loadData.bind(Object(f.a)(a)),a.deleteObject=a.deleteObject.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){var e=this;ht(gt(Xe,[this.props.active_practiceId]),function(t){e.setState({data:t,loading:!1})},function(){e.setState({loading:!1})})}},{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"editFunction",value:function(e){this.setState({editingId:e.id,editingName:e.name,visible:!0,loading:!1})}},{key:"deleteObject",value:function(e){var t=this,a=e;a.is_active=!1;dt(gt(Xe,[this.props.active_practiceId]),a,function(e){t.loadData()},function(){})}},{key:"render",value:function(){var e=this,t=this,a=[{title:"Name",dataIndex:"name",key:"name"},{title:"Action",key:"action",render:function(a,n){return i.a.createElement("span",null,i.a.createElement("a",{onClick:function(){return e.editFunction(n)}},"  Edit"),i.a.createElement(na.a,{type:"vertical"}),i.a.createElement(aa.a,{title:"Are you sure delete this item?",onConfirm:function(){return t.deleteObject(n)},okText:"Yes",cancelText:"No"},i.a.createElement("a",null,"Delete")))}}],n=[{label:"Role Name",key:"name",placeholder:"Agent roles",required:!0,type:D}],r=[{label:"Role Name",key:"name",required:!0,initialValue:this.state.editingName,type:D}],l={successFn:function(e){t.handleCancel(),t.loadData(),console.log("sucess"),bt(k,"success")},errorFn:function(){},action:gt(Xe,[this.props.active_practiceId]),method:"post"},s=[{key:"practice",value:this.props.active_practiceId}],c=[{key:"practice",value:this.props.active_practiceId},{key:"id",value:this.state.editingId}],o=fa.a.create()(La);return i.a.createElement(ia.a,{title:"Add Agent Roles"},i.a.createElement(o,{defaultValues:s,formProp:l,fields:n}),i.a.createElement(na.a,null),i.a.createElement(ta.a,{loading:this.state.loading,columns:a,dataSource:this.state.data}),i.a.createElement($t.a,{title:"Edit Agent Roles",visible:this.state.visible,footer:null,onCancel:this.handleCancel},i.a.createElement(o,{defaultValues:c,formProp:l,fields:r}),i.a.createElement(Vt.a,{key:"back",onClick:this.handleCancel},"Return")))}}]),t}(i.a.Component),Pr=fa.a.Item,jr=ia.a.Meta,Dr=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).handleSubmit=function(e){var t=Object(f.a)(a);e.preventDefault(),a.props.form.validateFields(function(e,n){if(!e){t.setState({saving:!0});var i={user:{},role:n.role,is_agent:!0,aadhar_upload:n.aadhar_upload&&n.aadhar_upload.file&&n.aadhar_upload.file.response?n.aadhar_upload.file.response.image_path:null};a.state.userDetails||(i.user.first_name=n.first_name,i.user.email=n.email,i.user.mobile=n.mobile);var r=function(e){t.setState({saving:!1}),t.props.loadData&&t.props.loadData(),t.props.history&&t.props.history.goBack(),e&&bt(k,"Agent Created Successfully")},l=function(){t.setState({saving:!1})};a.state.userDetails?ut(gt(te,[a.state.userDetails.id]),i,r,l):a.props.editAgentData?ut(gt(te,[a.props.editAgentData.id]),i,r,l):dt(gt(ee,[a.props.active_practiceId]),i,r,l)}})},a.handlePatientSelect=function(e){if(e){var t=Object(f.a)(a);ht(gt(te,[e]),function(e){t.setState({userDetails:e})},function(){})}},a.handleClick=function(e){a.setState({userDetails:null})},a.state={redirect:!1,saving:!1,userListData:[],agentRoles:[]},a.changeRedirect=a.changeRedirect.bind(Object(f.a)(a)),a.getPatient=a.getPatient.bind(Object(f.a)(a)),a.searchPatient=a.searchPatient.bind(Object(f.a)(a)),a.loadAgentRoles=a.loadAgentRoles.bind(Object(f.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.getPatient(),this.loadAgentRoles()}},{key:"getPatient",value:function(){var e=this;ht(ee,function(t){e.setState({userListData:t.results})},function(){})}},{key:"loadAgentRoles",value:function(){var e=this;ht(Xe,function(t){e.setState({agentRoles:t,loading:!1})},function(){e.setState({loading:!1})})}},{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"searchPatient",value:function(e){var t=this;ht(gt(Ve,[e]),function(e){e&&t.setState({userListData:e})},function(){})}},{key:"render",value:function(){var e=this,t=this.props.formLayout?this.props.formLayout:{labelCol:{span:6},wrapperCol:{span:14}},a=this.props.formLayout?this.props.formLayout:{wrapperCol:{offset:6,span:14}},n=this.props.form.getFieldDecorator,r={name:"image",data:{name:"hello"},action:ct("blogImage/"),headers:{authorization:"authorization-text"},onChange:function(e){"uploading"!==e.file.status&&console.log(e.file,e.fileList),"done"===e.file.status?V.a.success("".concat(e.file.name," file uploaded successfully")):"error"===e.file.status&&V.a.error("".concat(e.file.name," file upload failed."))}};return i.a.createElement(ia.a,null,i.a.createElement(Tt.a,{spinning:this.state.saving},i.a.createElement(fa.a,{onSubmit:this.handleSubmit},this.props.title?i.a.createElement("h2",null,this.props.title):null,e.state.userDetails?i.a.createElement(Pr,Object.assign({key:"id",value:this.state.userDetails.id},a),i.a.createElement(ia.a,{bordered:!1,style:{background:"#ECECEC"}},i.a.createElement(jr,{avatar:i.a.createElement(Nt.a,{style:{backgroundColor:"#ffff"},size:150,src:this.state.userDetails.image?ot(this.state.userDetails.image):"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png"}),title:this.state.userDetails.user.first_name,description:i.a.createElement("span",null,e.props.activePracticePermissions.PatientPhoneNumber?this.state.userDetails.user.mobile:Yt(this.state.userDetails.user.mobile),i.a.createElement("br",null),i.a.createElement(Vt.a,{type:"primary",style:{float:"right"},onClick:this.handleClick},"Select Different"))}))):i.a.createElement("div",null,i.a.createElement(Pr,Object.assign({key:"patient_name",label:"Agent Name"},t),n("first_name",{initialValue:e.props.editAgentData?e.props.editAgentData.user.first_name:""})(i.a.createElement(Ft.a,{placeholder:"Agent Name",showSearch:!0,onSearch:this.searchPatient,defaultActiveFirstOption:!1,showArrow:!1,filterOption:!1,onSelect:this.handlePatientSelect},this.state.userListData.map(function(t){return i.a.createElement(Ft.a.Option,{value:t.id.toString()},i.a.createElement(Rt.a.Item,{style:{padding:0}},i.a.createElement(Rt.a.Item.Meta,{avatar:i.a.createElement(Nt.a,{src:t.image?ot(t.image):"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png"}),title:t.user.first_name+" (ID:"+t.user.id+")",description:e.props.activePracticePermissions.PatientPhoneNumber?t.user.mobile:Yt(t.user.mobile)})))})))),i.a.createElement(Pr,Object.assign({key:"patient_mobile",label:"Mobile Number"},t),n("mobile",{initialValue:e.props.editAgentData?e.props.editAgentData.user.mobile:null,rules:[{required:!0,message:rt}]})(i.a.createElement(ga.a,{placeholder:"Mobile Number"}))),i.a.createElement(Pr,Object.assign({key:"patient_email",label:"Email Address"},t),n("email",{initialValue:e.props.editAgentData?e.props.editAgentData.user.email:null,rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:rt}]})(i.a.createElement(ga.a,{placeholder:"Email Address"})))),i.a.createElement(Pr,Object.assign({key:"role"},t,{label:"Role Type"}),n("role",{initialValue:e.props.editAgentData&&e.props.editAgentData.role?e.props.editAgentData.role:null},{rules:[{required:!0,message:rt}]})(i.a.createElement(Lt.a,null,this.state.agentRoles.map(function(e){return i.a.createElement(Lt.a.Option,{value:e.id},e.name)})))),i.a.createElement(Pr,Object.assign({label:"Document Upload"},t),n("aadhar_upload")(i.a.createElement(ua.a,r,i.a.createElement(Vt.a,null,i.a.createElement(Bt.a,{type:"upload"})," Click to Upload")))),i.a.createElement(Pr,t,i.a.createElement(Vt.a,{type:"primary",htmlType:"submit",style:{margin:5}},"Submit"),e.props.history?i.a.createElement(Vt.a,{style:{margin:5},onClick:function(){return e.props.history.goBack()}},"Cancel"):null))))}}]),t}(i.a.Component),Sr=fa.a.create()(Dr),xr=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).handleCancel=function(){a.setState({visible:!1})},a.approveAgent=function(e){var t=Object(f.a)(a),n={id:e.id,is_approved:!0};e.role?(t.setState({approvalLoading:!0}),ut(gt(te,[e.id]),n,function(a){bt(k,"Agent Approved Successfully!"),t.setState(function(t){var a=[];return t.data.forEach(function(t){t.id==e.id&&(t.is_approved=!0),a.push(t)}),{data:a,approvalLoading:!1}})},function(){t.setState({approvalLoading:!1})})):bt(O,"Kindly assign the role before approving!")},a.state={redirect:!1,visible:!1,data:null,loading:!0},a.loadData=a.loadData.bind(Object(f.a)(a)),a.deleteObject=a.deleteObject.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this;this.setState({loading:!0});var a=function(e){t.setState({data:e.results,total:e.count,nextPage:e.next,loading:!1})},n=function(){t.setState({loading:!1})},i={agent:!0,page:e};ht(gt(ee,[this.props.active_practiceId]),a,n,i)}},{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"editObject",value:function(e){this.setState({editAgentData:e,loading:!1}),this.props.history.push("/settings/agents/"+e.id+"/edit")}},{key:"deleteObject",value:function(e){var t=this,a={id:e.id,is_agent:!1};ut(gt(te,[e.id]),a,function(e){t.setState({loading:!1}),t.loadData()},function(){})}},{key:"render",value:function(){var e=this,t=this,a=[{title:"Name",dataIndex:"user.first_name",key:"name"},{title:"Email",dataIndex:"user.email",key:"email"},{title:"Mobile",dataIndex:"user.mobile",key:"mobile"},{title:"Role",dataIndex:"role_data.name",key:"role_data"},{title:"Aadhar",dataIndex:"aadhar_id",key:"aadhar_id"},{title:"Document",dataIndex:"aadhar_upload",key:"aadhar_upload",render:function(e){return e?i.a.createElement("a",{target:"_blank",href:ot(e)},"Open Document"):null}},{title:"Status",dataIndex:"is_approved",key:"is_approved",render:function(e,a){return e?i.a.createElement(Mt.a,{color:"#87d068"},"Approved"):i.a.createElement(aa.a,{title:"Are you sure approve this agent?",onConfirm:function(){return t.approveAgent(a)},okText:"Yes",cancelText:"No"},i.a.createElement("a",{href:"#",disabled:t.state.approvalLoading},"Approve"))}},{title:"Action",key:"action",render:function(a,n){return i.a.createElement("span",null,i.a.createElement("a",{onClick:function(){return e.editObject(n)}},"  Edit"),i.a.createElement(na.a,{type:"vertical"}),i.a.createElement(aa.a,{title:"Are you sure delete this item?",onConfirm:function(){return t.deleteObject(n)},okText:"Yes",cancelText:"No"},i.a.createElement("a",null,"Delete")))}}];return i.a.createElement(b.d,null,i.a.createElement(b.b,{exact:!0,path:"/settings/agents/add",render:function(t){return i.a.createElement(Sr,Object.assign({},e.props,{title:"Create Agent",loadData:e.loadData}))}}),i.a.createElement(b.b,{exact:!0,path:"/settings/agents/:id/edit",render:function(t){return i.a.createElement(Sr,Object.assign({},e.props,e.state,{title:"Edit Agent",loadData:e.loadData}))}}),i.a.createElement(b.b,null,i.a.createElement(ia.a,{title:i.a.createElement("h4",null,"Agents ",i.a.createElement(qt.b,{to:"/settings/agents/add"},i.a.createElement(Vt.a,{style:{float:"right"},type:"primary"},i.a.createElement(Bt.a,{type:"plus"}),"Add")))},i.a.createElement(Zn,{loading:this.state.loading,columns:a,dataSource:this.state.data,pagination:!1}),i.a.createElement(Ei,{loading:this.state.loading,loaderFunction:function(){return t.loadData(t.state.nextPage)},hidden:!this.state.nextPage}))))}}]),t}(i.a.Component),Ir=s.a.Content,Cr=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={collapsed:!1},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement(Ir,{className:"main-container",style:{minHeight:280}},i.a.createElement(s.a,null,i.a.createElement(Fi,this.props),i.a.createElement(Ir,{style:{margin:"24px 16px",minHeight:280}},i.a.createElement(b.d,null,i.a.createElement(b.b,{exact:!0,path:"/settings/clinics-staff/adddoctor",render:function(t){return e.props.activePracticePermissions.SettingsPracticeStaff||e.props.allowAllPermissions?i.a.createElement(An,Object.assign({},e.props,t)):i.a.createElement(qn,null)}}),i.a.createElement(b.b,{exact:!0,path:"/settings/clinics-staff/:doctorid/edit",render:function(t){return e.props.activePracticePermissions.SettingsPracticeStaff||e.props.allowAllPermissions?i.a.createElement(An,Object.assign({},e.props,t)):i.a.createElement(qn,null)}}),i.a.createElement(b.b,{exact:!0,path:"/settings/clinics-staff/addstaff",render:function(t){return e.props.activePracticePermissions.SettingsPracticeStaff||e.props.allowAllPermissions?i.a.createElement(Mn,Object.assign({},e.props,t)):i.a.createElement(qn,null)}}),i.a.createElement(b.b,{exact:!0,path:"/settings/clinics-staff/staff/:staffid/edit",render:function(t){return e.props.activePracticePermissions.SettingsPracticeStaff||e.props.allowAllPermissions?i.a.createElement(Mn,Object.assign({},e.props,t)):i.a.createElement(qn,null)}}),i.a.createElement(b.b,{path:"/settings/clinics-staff",render:function(t){return e.props.activePracticePermissions.SettingsPracticeStaff||e.props.allowAllPermissions?i.a.createElement(Tn,Object.assign({},e.props,t)):i.a.createElement(qn,null)}}),i.a.createElement(b.b,{exact:!0,path:"/settings/clinics",render:function(t){return e.props.activePracticePermissions.SettingsPracticeDetail||e.props.allowAllPermissions?i.a.createElement(ra,Object.assign({},e.props,t)):i.a.createElement(qn,null)}}),i.a.createElement(b.b,{exact:!0,path:"/settings/clinics/add",render:function(t){return e.props.activePracticePermissions.SettingsPracticeDetail||e.props.allowAllPermissions?i.a.createElement(Ln,Object.assign({},e.props,t)):i.a.createElement(qn,null)}}),i.a.createElement(b.b,{exact:!0,path:"/settings/clinics/:id/edit",render:function(t){return e.props.activePracticePermissions.SettingsPracticeDetail||e.props.allowAllPermissions?i.a.createElement(pi,Object.assign({},e.props,{practiceId:t.match.params.id},t)):i.a.createElement(qn,null)}}),i.a.createElement(b.b,{exact:!0,path:"/settings/communication-settings",render:function(t){return e.props.activePracticePermissions.SettingsCommunincations||e.props.allowAllPermissions?i.a.createElement(Bn,Object.assign({},e.props,t)):i.a.createElement(qn,null)}}),i.a.createElement(b.b,{exact:!0,path:"/settings/calendarsettings",render:function(t){return e.props.activePracticePermissions.SettingsCalendar||e.props.allowAllPermissions?i.a.createElement(Li,Object.assign({},e.props,t)):i.a.createElement(qn,null)}}),i.a.createElement(b.b,{path:"/settings/procedures",render:function(t){return e.props.activePracticePermissions.SettingsProcedureCatalog||e.props.allowAllPermissions?i.a.createElement(ni,Object.assign({},e.props,t)):i.a.createElement(qn,null)}}),i.a.createElement(b.b,{path:"/settings/billing",render:function(t){return e.props.activePracticePermissions.SettingsBilling||e.props.allowAllPermissions?i.a.createElement(ci,Object.assign({},e.props,t)):i.a.createElement(qn,null)}}),i.a.createElement(b.b,{exact:!0,path:"/settings/loyalty",render:function(t){return e.props.activePracticePermissions.SettingsLoyalty||e.props.allowAllPermissions?i.a.createElement(or,e.props):i.a.createElement(qn,null)}}),i.a.createElement(b.b,{path:"/settings/emr",render:function(t){return e.props.activePracticePermissions.SettingsEMR||e.props.allowAllPermissions?i.a.createElement(mi,Object.assign({},e.props,t)):i.a.createElement(qn,null)}}),i.a.createElement(b.b,{path:"/settings/prescriptions",render:function(t){return e.props.activePracticePermissions.SettingsPrescriptions||e.props.allowAllPermissions?i.a.createElement(vi,Object.assign({},e.props,t)):i.a.createElement(qn,null)}}),i.a.createElement(b.b,{exact:!0,path:"/settings/expense-types",render:function(t){return e.props.activePracticePermissions.SettingsExpenseTypes||e.props.allowAllPermissions?i.a.createElement(_i,e.props):i.a.createElement(qn,null)}}),i.a.createElement(b.b,{path:"/settings/labs",render:function(t){return e.props.activePracticePermissions.SettingsLabs||e.props.allowAllPermissions?i.a.createElement(Er,Object.assign({},e.props,t)):i.a.createElement(qn,null)}}),i.a.createElement(b.b,{exact:!0,path:"/settings/medical-history",render:function(t){return e.props.activePracticePermissions.SettingsMedicalHistory||e.props.allowAllPermissions?i.a.createElement(ki,e.props):i.a.createElement(qn,null)}}),i.a.createElement(b.b,{path:"/settings/agents",render:function(t){return i.a.createElement(xr,Object.assign({},e.state,e.props,t,{key:e.state.active_practiceId}))}}),i.a.createElement(b.b,{path:"/settings/agent-roles",render:function(t){return i.a.createElement(Or,Object.assign({},e.state,e.props,t,{key:e.state.active_practiceId}))}}),i.a.createElement(b.b,{path:"/settings/mlm",render:function(t){return e.props.activePracticePermissions.SettingsMLMSettings||e.props.allowAllPermissions?i.a.createElement(qi,Object.assign({},e.state,e.props,t,{key:e.state.active_practiceId})):i.a.createElement(qn,null)}}),i.a.createElement(b.b,{path:"/settings/printout",render:function(t){return e.props.activePracticePermissions.SettingsPrintouts||e.props.allowAllPermissions?i.a.createElement(Ji,Object.assign({},e.state,t,e.props,{key:e.state.active_practiceId})):i.a.createElement(qn,null)}}),i.a.createElement(b.b,{path:"/settings/mailpdfsettings",render:function(t){return e.props.activePracticePermissions.SettingsEmailPDFSettings||e.props.allowAllPermissions?i.a.createElement(er,Object.assign({},e.state,t,e.props)):i.a.createElement(qn,null)}}),i.a.createElement(b.b,{path:"/settings/integration",render:function(t){return i.a.createElement(Zi,Object.assign({},e.state,e.props,t))}}),i.a.createElement(b.b,{exact:!0,path:"/settings/roomtypes",render:function(t){return e.props.activePracticePermissions.SettingsRoomTypes||e.props.allowAllPermissions?i.a.createElement(nr,e.props):i.a.createElement(qn,null)}}),i.a.createElement(b.b,{exact:!0,path:"/settings/diseases",render:function(t){return e.props.activePracticePermissions.SettingsDiseaseList||e.props.allowAllPermissions?i.a.createElement(kr,e.props):i.a.createElement(qn,null)}}),i.a.createElement(b.b,{path:"/settings/bed-packages",render:function(t){return e.props.activePracticePermissions.SettingsBedPackages||e.props.allowAllPermissions?i.a.createElement(ar,Object.assign({},e.state,e.props,t)):i.a.createElement(qn,null)}}),i.a.createElement(b.b,{path:"/settings/medicine-packages",render:function(t){return e.props.activePracticePermissions.SettingsMedicinePackages||e.props.allowAllPermissions?i.a.createElement(_r,Object.assign({},e.state,e.props,t)):i.a.createElement(qn,null)}}),i.a.createElement(b.b,{component:Oi})))))}}]),t}(i.a.Component),wr=a(36),Tr=(a(2258),a(2259),a(1098)),Ar=a.n(Tr),Mr=a(1099),Lr=a.n(Mr),Vr=a(353),Fr=(a(2400),a(30)),Rr=(a(299),a(201)),Nr=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).loadAppointmentDetails=function(){a.setState({loading:!0});var e=Object(f.a)(a);ht(gt(oe,[a.props.appointmentId]),function(t){e.setState({appointment:t,loading:!1}),console.log("event",t)},function(){e.setState({loading:!1})})},a.updateAppointmentStatus=function(e,t,n){var i=Object(f.a)(a),r={status:n};n==cn?r.waiting=ya()().format():n==on?r.engaged=ya()().format():n==un&&(r.checkout=ya()().format());ut(gt(oe,[e]),r,function(e){bt(k,"Appointment Status Changed Successfully!!"),i.loadAppointmentDetails()},function(){})},a.changeAppointmentStatus=function(e,t,n){var i=Object(f.a)(a);ht(gt(oe,[e]),function(a){a.status==t?i.updateAppointmentStatus(e,t,n):(bt(P,"Appointment status has already changed. Updating Appointments..."),i.loadAppointmentDetails())},function(){})},a.state={loading:!0,appointment:null},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){console.log(this.props),this.props.appointmentId?this.loadAppointmentDetails():this.setState({loading:!1})}},{key:"render",value:function(){var e=this,t=this.state.appointment;return i.a.createElement("div",{style:{width:"300px",minHeight:"200px"}},i.a.createElement(Tt.a,{spinning:this.state.loading},this.state.appointment?i.a.createElement("div",null,i.a.createElement(Zt.a,null,i.a.createElement(ea.a,{span:8},i.a.createElement(Nt.a,{src:this.state.appointment.patient.image,size:80})),i.a.createElement(ea.a,{span:16},i.a.createElement(qt.b,{to:"/patient/"+this.state.appointment.patient.id+"/profile"},i.a.createElement("h3",null,this.state.appointment.patient.user.first_name,i.a.createElement("br",null),i.a.createElement("small",null,"Patient ID: ",this.state.appointment.patient.id," , ",this.state.appointment.patient.gender,i.a.createElement("br",null),this.state.appointment.patient.user.mobile))))),i.a.createElement(na.a,{style:{margin:0}}),i.a.createElement("small",null,"Status: ",this.state.appointment.status),i.a.createElement("br",null),i.a.createElement("small",null,i.a.createElement(Bt.a,{type:"clock-circle"})," ",ya()(this.state.appointment.schedule_at).format("HH:mm A on MMMM Do")," for ",this.state.appointment.slot," mins."),function(e){switch(e.status){case cn:return i.a.createElement("div",null,i.a.createElement("br",null),i.a.createElement("small",null,"Checked in At ",ya()(e.waiting).format("lll")));case on:return i.a.createElement("div",null,i.a.createElement("small",null,"Waiting Time ",ya()(e.engaged).from(ya()(e.waiting))),i.a.createElement("br",null),i.a.createElement("small",null,"Engaged At ",ya()(e.engaged).format("lll")));case un:return i.a.createElement("div",null,i.a.createElement("small",null,"Waiting Time ",ya()(e.engaged).from(ya()(e.waiting))),i.a.createElement("br",null),i.a.createElement("small",null,"Engaged Time ",ya()(e.checkout).from(ya()(e.engaged))),i.a.createElement("br",null),i.a.createElement("small",null,"Total Stay Time ",ya()(e.checkout).from(ya()(e.waiting))))}return null}(t),i.a.createElement(Zt.a,{style:{height:"100px",overflow:"scroll",backgroundColor:"#eee",padding:5}},i.a.createElement("div",null,t.status==sn?i.a.createElement("span",{style:{width:"70px",float:"right"}},i.a.createElement("a",{onClick:function(){return e.changeAppointmentStatus(t.id,sn,cn)},disabled:e.props.activePracticePermissions.ChangeAppointmentStatus}," Check In")):null,t.status==cn?i.a.createElement("span",{style:{width:"70px",float:"right"}},i.a.createElement("a",{onClick:function(){return e.changeAppointmentStatus(t.id,cn,on)},disabled:e.props.activePracticePermissions.ChangeAppointmentStatus}," Engage")):null,t.status==on?i.a.createElement("span",{style:{width:"70px",float:"right"}},i.a.createElement("a",{onClick:function(){return e.changeAppointmentStatus(t.id,on,un)},disabled:e.props.activePracticePermissions.ChangeAppointmentStatus}," Check Out")):null,t.status==un?i.a.createElement("span",{style:{width:"70px",float:"right"}},i.a.createElement("small",null,"Checked Out")):null,this.state.appointment.doctor_data?i.a.createElement(Mt.a,{color:this.state.appointment.doctor_data?this.state.appointment.doctor_data.calendar_colour:null},i.a.createElement("b",null,"With "+this.state.appointment.doctor_data.user.first_name," ")):null),i.a.createElement(na.a,{style:{margin:0}}),i.a.createElement("b",null,"Category:"),this.state.appointment.category_data?this.state.appointment.category_data.name:null),i.a.createElement(na.a,{style:{margin:0}}),i.a.createElement(Zt.a,{style:{textAlign:"right"}},i.a.createElement(Vt.a.Group,{size:"small"},e.props.activePracticePermissions.EditAppointment||e.props.allowAllPermissions?i.a.createElement(Vt.a,null,i.a.createElement(qt.b,{to:"/calendar/"+this.state.appointment.id+"/edit-appointment"},i.a.createElement(Bt.a,{type:"edit"})," Edit")):null,e.props.activePracticePermissions.ChangeAppointmentStatus||e.props.allowAllPermissions?i.a.createElement(aa.a,{title:"Are you sure delete this?",onConfirm:function(){return e.changeAppointmentStatus(t.id,t.status,dn)},okText:"Yes",cancelText:"No"},i.a.createElement(Vt.a,{type:"danger"},i.a.createElement(Bt.a,{type:"cross"})," Cancel")):null))):i.a.createElement("h4",null,"No Patient Found")))}}]),t}(i.a.Component);var Br=function(e){function t(e){return Object(d.a)(this,t),Object(p.a)(this,Object(h.a)(t).call(this,e))}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return i.a.createElement(Rr.a,{placement:"right",content:i.a.createElement(Nr,Object.assign({appointmentId:this.props.event.appointment.id,key:this.props.event.appointment.id},this.props)),trigger:"hover"},i.a.createElement("div",{style:{color:"white"}},i.a.createElement("h1",{style:{color:"white"}},i.a.createElement(Bt.a,{type:"user"}),this.props.title)))}}]),t}(i.a.Component);function Hr(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function qr(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Hr(a,!0).forEach(function(t){Object(u.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Hr(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Yr=i.a.createElement(Ht.a,null,i.a.createElement(Ht.a.Item,{key:"1"},i.a.createElement(qt.b,{to:"/settings/calendarsettings#timings"},"Modify Calendar Timings")),i.a.createElement(Ht.a.Item,{key:"2"},i.a.createElement(qt.b,{to:"/settings/clinics-staff#staff"},"Add/Edit Doctor or Staff")),i.a.createElement(Ht.a.Item,{key:"3"},i.a.createElement(qt.b,{to:"/settings/clinics-staff#notification"},"Modify SMS/Email for Doctor/Staff")),i.a.createElement(Ht.a.Item,{key:"4"},i.a.createElement(qt.b,{to:"/settings/communication-settings"},"Modify SMS/Email for Patients")),i.a.createElement(Ht.a.Item,{key:"5"},i.a.createElement(qt.b,{to:"/settings/calendarsettings#categories"},"Add/Edit Categroies"))),zr=function(e,t){var a=y.get("calendar_settings");a||(a={}),a=qr({},a,Object(u.a)({},e,t)),y.set("calendar_settings",a)},Gr=function(){var e=y.get("calendar_settings");return e||(e={}),e},Ur=function(e){var t=!0,a=ya()(e.value).isValid()?ya()(e.value).format("dddd").toLowerCase():null;if("DOCTOR"!=e.filterType||"ALL"==e.selectedDoctor)if(e.calendarTimings&&a&&e.calendarTimings[a]){var n=e.calendarTimings[a];n.lunch?(ya()(e.value,"HH:mm:ss").format("HH:mm:ss")<=n.startTime.format("HH:mm:ss")||ya()(e.value,"HH:mm:ss").format("HH:mm:ss")>n.endTime.format("HH:mm:ss")||ya()(e.value,"HH:mm:ss").format("HH:mm:ss")<n.lunchEndTime.format("HH:mm:ss")&&ya()(e.value,"HH:mm:ss").format("HH:mm:ss")>=n.lunchStartTime.format("HH:mm:ss"))&&(t=!1):(ya()(e.value,"HH:mm:ss").format("HH:mm:ss")<=n.startTime.format("HH:mm:ss")||ya()(e.value,"HH:mm:ss").format("HH:mm:ss")>n.endTime.format("HH:mm:ss"))&&(t=!1)}else a&&!e.calendarTimings[a]&&(t=!1);else if(e.doctorTimings&&a&&e.doctorTimings[a]){var r=e.doctorTimings[a];r.lunch?(ya()(e.value,"HH:mm:ss").format("HH:mm:ss")<=r.startTime.format("HH:mm:ss")||ya()(e.value,"HH:mm:ss").format("HH:mm:ss")>r.endTime.format("HH:mm:ss")||ya()(e.value,"HH:mm:ss").format("HH:mm:ss")<r.lunchEndTime.format("HH:mm:ss")&&ya()(e.value,"HH:mm:ss").format("HH:mm:ss")>=r.lunchStartTime.format("HH:mm:ss"))&&(t=!1):(ya()(e.value,"HH:mm:ss").format("HH:mm:ss")<=r.startTime.format("HH:mm:ss")||ya()(e.value,"HH:mm:ss").format("HH:mm:ss")>r.endTime.format("HH:mm:ss"))&&(t=!1)}else e.doctorTimings&&a&&!e.doctorTimings[a]&&(t=!1);if(e.showCalendarEvents&&t)for(var l=0;l<e.blockedCalendar.length;l++)if(e.blockedCalendar[l].doctor&&"DOCTOR"==e.filterType){if(e.blockedCalendar[l].doctor==e.selectedDoctor&&ya()(e.value).isBetween(ya()(e.blockedCalendar[l].block_from),ya()(e.blockedCalendar[l].block_to))){t=!1;break}}else if(ya()(e.value).isBetween(ya()(e.blockedCalendar[l].block_from),ya()(e.blockedCalendar[l].block_to))){t=!1;break}if(t)return e.children;var s=i.a.Children.only(e.children);return i.a.cloneElement(s,{className:s.props.className+" rbc-off-range-bg"})},Wr=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).changeDate=function(e){var t=Object(f.a)(a);a.setState(function(t){return e?{selectedDate:t.selectedDate.add(1,"days")}:{selectedDate:t.selectedDate.subtract(1,"days")}},function(){t.todaysAppointments()})},a.todaysAppointments=function(){var e=Object(f.a)(a);e.setState({loading:!0});ht(gt(ue,[a.props.active_practiceId]),function(t){e.setState(function(e){var a={},n=[];return t.forEach(function(t){if(t.status==dn)return!0;a[t.status]?a[t.status]+=1:a[t.status]=1,"ALL"==e.todaysAppointmentFilter?n.push(t):e.todaysAppointmentFilter==t.status&&n.push(t)}),{todaysAppointments:t,todaysAppointmentOverview:a,todaysFilteredAppointments:n,loading:!1}})},function(){e.setState({loading:!1})},{start:e.state.selectedDate.format("YYYY-MM-DD"),end:e.state.selectedDate.format("YYYY-MM-DD")})},a.filterTodaysAppointment=function(e){a.setState(function(t){var a=[];return t.todaysAppointments.forEach(function(t){"ALL"==e?a.push(t):e==t.status&&a.push(t)}),{todaysFilteredAppointments:a,todaysAppointmentFilter:e}})},a.changeAppointmentStatus=function(e,t,n){var i=Object(f.a)(a);ht(gt(oe,[e]),function(a){a.status==t?i.updateAppointmentStatus(e,t,n):(bt(P,"Appointment status has already changed. Updating Appointments..."),i.todaysAppointments())},function(){})},a.updateAppointmentStatus=function(e,t,n){var i=Object(f.a)(a),r={status:n};n==cn?r.waiting=ya()().format():n==on?r.engaged=ya()().format():n==un&&(r.checkout=ya()().format());ut(gt(oe,[e]),r,function(e){bt(k,"Appointment Status Changed Successfully!!"),i.todaysAppointments()},function(){})},a.state={todaysAppointments:[],todaysFilteredAppointments:[],todaysAppointmentOverview:{},todaysAppointmentFilter:"ALL",selectedDate:ya()()},a.todaysAppointments=a.todaysAppointments.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.todaysAppointments()}},{key:"render",value:function(){var e=this,t=this;return i.a.createElement("div",null,i.a.createElement(At.a,{trigger:"click",overlay:Yr},i.a.createElement(Vt.a,{block:!0,style:{margin:5}},i.a.createElement(Bt.a,{type:"setting"})," Settings ",i.a.createElement(Bt.a,{type:"down"}))),t.props.activePracticePermissions.AddWalkinAppointment||t.props.allowAllPermissions?i.a.createElement(qt.b,{to:"/calendar/create-appointment"},i.a.createElement(Vt.a,{block:!0,type:"primary",style:{margin:5}}," Walkin Appointment")):null,i.a.createElement(Zt.a,{gutter:8},i.a.createElement(ea.a,{span:6,onClick:function(){return e.filterTodaysAppointment(e.state.todaysAppointmentFilter==sn?"ALL":sn)},style:{textAlign:"center",border:"1px solid #ccc",borderRadius:"3px",backgroundColor:this.state.todaysAppointmentFilter==sn?"#FF6600":null,color:this.state.todaysAppointmentFilter==sn?"white":"#FF6600",boxShadow:"0 2px 4px #111 inset"}},i.a.createElement("small",null,sn),i.a.createElement("h2",{style:{color:this.state.todaysAppointmentFilter==sn?"white":"#FF6600"}},this.state.todaysAppointmentOverview[sn]?this.state.todaysAppointmentOverview[sn]:0)),i.a.createElement(ea.a,{span:6,onClick:function(){return e.filterTodaysAppointment(e.state.todaysAppointmentFilter==cn?"ALL":cn)},style:{textAlign:"center",border:"1px solid #ccc",borderRadius:"3px",backgroundColor:this.state.todaysAppointmentFilter==cn?"#FC0000":null,color:this.state.todaysAppointmentFilter==cn?"white":"#FC0000",boxShadow:"0 2px 4px #111 inset"}},i.a.createElement("small",null,cn),i.a.createElement("h2",{style:{color:this.state.todaysAppointmentFilter==cn?"white":"#FC0000"}},this.state.todaysAppointmentOverview[cn]?this.state.todaysAppointmentOverview[cn]:0)),i.a.createElement(ea.a,{span:6,onClick:function(){return e.filterTodaysAppointment(e.state.todaysAppointmentFilter==on?"ALL":on)},style:{textAlign:"center",border:"1px solid #ccc",borderRadius:"3px",backgroundColor:this.state.todaysAppointmentFilter==on?"#598C01":null,color:this.state.todaysAppointmentFilter==on?"white":"#598C01",boxShadow:"0 2px 4px #111 inset"}},i.a.createElement("small",null,on),i.a.createElement("h2",{style:{color:this.state.todaysAppointmentFilter==on?"white":"#598C01"}},this.state.todaysAppointmentOverview[on]?this.state.todaysAppointmentOverview[on]:0)),i.a.createElement(ea.a,{span:6,onClick:function(){return e.filterTodaysAppointment(e.state.todaysAppointmentFilter==un?"ALL":un)},style:{textAlign:"center",border:"1px solid #ccc",borderRadius:"3px",backgroundColor:this.state.todaysAppointmentFilter==un?"#0094DE":null,color:this.state.todaysAppointmentFilter==un?"white":"#0094DE",boxShadow:"0 2px 4px #111 inset"}},i.a.createElement("small",null,un),i.a.createElement("h2",{style:{color:this.state.todaysAppointmentFilter==un?"white":"#0094DE"}},this.state.todaysAppointmentOverview[un]?this.state.todaysAppointmentOverview[un]:0))),i.a.createElement(na.a,null,i.a.createElement("a",{type:"primary",onClick:function(){return e.changeDate(!1)}},i.a.createElement(Bt.a,{type:"left"})),"\xa0",this.state.selectedDate.format("MMM Do")==ya()().format("MMM Do")?"Today":this.state.selectedDate.format("MMM Do"),"'s Schedule (",this.state.todaysFilteredAppointments.length,") \xa0",i.a.createElement("a",{type:"primary",onClick:function(){return e.changeDate(!0)}},i.a.createElement(Bt.a,{type:"right"}))),i.a.createElement(Tt.a,{spinning:this.state.loading},i.a.createElement(Rt.a,{size:"small",dataSource:this.state.todaysFilteredAppointments,renderItem:function(a){return a.status==dn?i.a.createElement("div",null):i.a.createElement(Rt.a.Item,{color:"transparent",style:{padding:0}},i.a.createElement("div",{style:{border:"1px solid #ddd",borderRadius:"5px",textDecoration:a.status==dn?"line-through":"inherit",backgroundColor:a.status==dn?"#aaa":"#eee",width:"100%",marginTop:"2px",borderLeft:"5px solid"+(a.doctor&&t.props.doctors_object&&t.props.doctors_object[a.doctor]?t.props.doctors_object[a.doctor].calendar_colour:"transparent")}},i.a.createElement(Kr,Object.assign({},a,{changeAppointmentStatus:e.changeAppointmentStatus},e.props))))}})))}}]),t}(i.a.Component);function Kr(e){return i.a.createElement("div",{style:{width:"100%"}},i.a.createElement("p",{style:{marginBottom:0}},i.a.createElement(Rr.a,{placement:"right",content:i.a.createElement(Nr,Object.assign({appointmentId:e.id,key:e.id},e))},i.a.createElement("span",{style:{width:"calc(100% - 60px)"}},i.a.createElement("b",null,ya()(e.schedule_at).format("LT")),"\xa0",e.patient.user.first_name)),e.status==sn?i.a.createElement("span",{style:{width:"70px",float:"right"}},i.a.createElement("a",{onClick:function(){return e.changeAppointmentStatus(e.id,sn,cn)},disabled:!e.activePracticePermissions.ChangeAppointmentStatus}," Check In")):null,e.status==cn?i.a.createElement("span",{style:{width:"70px",float:"right"}},i.a.createElement("a",{onClick:function(){return e.changeAppointmentStatus(e.id,cn,on)},disabled:!e.activePracticePermissions.ChangeAppointmentStatus}," Engage")):null,e.status==on?i.a.createElement("span",{style:{width:"70px",float:"right"}},i.a.createElement("a",{onClick:function(){return e.changeAppointmentStatus(e.id,on,un)},disabled:!e.activePracticePermissions.ChangeAppointmentStatus}," Check Out")):null,e.status==un?i.a.createElement("span",{style:{width:"70px",float:"right"}},i.a.createElement("small",null,"Checked Out")):null))}function Qr(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Xr(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Qr(a,!0).forEach(function(t){Object(u.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Qr(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Jr=Object(Vr.b)(ya.a),$r=Ar()(Vr.a),Zr=s.a.Content,el=$t.a.confirm,tl=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).changeCalendarType=function(e){var t=Object(f.a)(a);a.setState({calendarType:e,selectedDoctor:"ALL",selectedCategory:"ALL",filterType:"DOCTOR"},function(){"APPOINTMENTS"==e?t.changeFilter("selectedDoctor","ALL"):"AVAILABILITY"==e&&t.state.practice_doctors.length&&t.changeFilter("selectedDoctor",t.state.practice_doctors[0].id)})},a.resizeEvent=function(e){var t=e.event,n=e.start,i=e.end;if(t.appointment.status!=sn)return bt(O,"Action Not Allowed"),!0;var r=a.state.events,l={},s=Object(f.a)(a),c=[];r.forEach(function(e){e.id==t.id&&(l={schedule_at:ya()(n).format(),slot:parseInt((i-n)/6e4)})});var o=function(e){bt(k,"time changed"),r.forEach(function(e){c.push(e.id==t.id?Xr({},e,{start:n,end:i}):e)}),s.setState({events:c},function(){s.refreshFilterList()})},u=function(){};el({title:"Are you sure to change the time of this appointment?",onOk:function(){ut(gt(oe,[t.id]),l,o,u)},onCancel:function(){console.log("Cancel")}})},a.blockedCalendarTiming=function(e,t){var n=Object(f.a)(a);ht(he,function(e){n.setState({blockedCalendar:e})},function(){},{practice:a.props.active_practiceId,cal_fdate:e.format(),cal_tdate:t.format()})},a.onRangeChange=function(e){if(e.start&&e.end)if(a.appointmentList(ya()(e.start),ya()(e.end)),1==ya()(e.start).date())a.setState({selectedDate:ya()(e.start)});else{var t=ya()(e.start);a.setState({selectedDate:t.month(t.month()+1).date(1)})}else e.length&&(7==e.length?a.appointmentList(ya()(e[0]).subtract(1,"day"),ya()(e[e.length-1]).subtract(1,"day")):a.appointmentList(ya()(e[0]),ya()(e[e.length-1])),a.setState({selectedDate:ya()(e[0])}))},a.onSelectedDateChange=function(e){a.setState({selectedDate:ya()(e)})},a.setFilterType=function(e){var t=Object(f.a)(a);a.setState({filterType:e.key,selectedDoctor:"ALL",selectedCategory:"ALL"},function(){"DOCTOR"==e.key?t.changeFilter("selectedDoctor","ALL"):"CATEGORY"==e.key&&t.changeFilter("selectedCategory","ALL")})},a.setFilter=function(e,t){var n=Object(f.a)(a);a.setState(Object(u.a)({},e,t),function(){zr(e,t),n.changeFilter("tempKey","ALL")})},a.refreshFilterList=function(){var e=a.state;"DOCTOR"==e.filterType?a.changeFilter("selectedDoctor",e.selectedDoctor):"CATEGORY"==e.filterType&&a.changeFilter("selectedCategory",e.selectedCategory)},a.changeFilter=function(e,t){"selectedDoctor"==e&&"ALL"!=t&&a.loadDoctorTiming(t),a.setState(function(a){var n,i=[];return a.events.forEach(function(n){if(!a.filterCancelledAppointment&&n.appointment.status==dn)return!0;"ALL"==t?i.push(n):"selectedDoctor"==e&&n.doctor==t?i.push(n):"selectedCategory"==e&&n.appointment.category==t&&i.push(n)}),n={},Object(u.a)(n,e,t),Object(u.a)(n,"filteredEvent",i),n})},a.changeState=function(e,t){a.setState(Object(u.a)({},e,t),function(){zr(e,t)})},a.loadDoctorTiming=function(e){var t=Object(f.a)(a);ht(gt(U,[a.props.active_practiceId]),function(a){var n={};a.length&&(n=a[0]);var i={};hn.forEach(function(e){i[e]={},n.visting_hour_same_week?(i[e].startTime=ya()(n.first_start_time,"HH:mm:ss"),i[e].endTime=ya()(n.second_end_time,"HH:mm:ss"),n.is_two_sessions?(i[e].lunch=!0,i[e].lunchStartTime=ya()(n.first_end_time,"HH:mm:ss"),i[e].lunchEndTime=ya()(n.second_start_time,"HH:mm:ss")):i[e].lunch=!1):n[e]?(i[e].startTime=ya()(n["first_start_time_".concat(e)],"HH:mm:ss"),i[e].endTime=ya()(n["second_end_time_".concat(e)],"HH:mm:ss"),n["is_two_sessions_".concat(e)]?(i[e].lunch=!0,i[e].lunchStartTime=ya()(n["first_end_time_".concat(e)],"HH:mm:ss"),i[e].lunchEndTime=ya()(n["second_start_time_".concat(e)],"HH:mm:ss")):i[e].lunch=!1):i[e]=null}),t.setState(function(t){return{doctorTiming:Xr({},t.doctorTiming,Object(u.a)({},e,Xr({},i)))}})},function(){},{doctor:e})},a.state=Xr({startTime:null,visiblePopover:!1,events:[],filteredEvent:[],appointments:[],practice_doctors:[],practice_categories:[],practice_staff:[],doctors_object:null,categories_object:null,calendarTimings:null,timing:{},loading:!0,selectedDoctor:"ALL",selectedCategory:"ALL",selectedDate:ya()(),filterType:"DOCTOR",calendarType:"APPOINTMENTS",doctorsAppointmentCount:{},categoriesAppointmentCount:{},blockedCalendar:[],showCalendarEvents:!0,showAppointments:!0,doctorTiming:{}},Gr()),a.onSelectSlot=a.onSelectSlot.bind(Object(f.a)(a)),a.onSelectEvent=a.onSelectEvent.bind(Object(f.a)(a)),a.moveEvent=a.moveEvent.bind(Object(f.a)(a)),a.resizeEvent=a.resizeEvent.bind(Object(f.a)(a)),a.loadDoctors=a.loadDoctors.bind(Object(f.a)(a)),a.eventStyleGetter=a.eventStyleGetter.bind(Object(f.a)(a)),a.loadCalendarTimings=a.loadCalendarTimings.bind(Object(f.a)(a)),a.loadCalendarTimings(),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e;this.loadDoctors(),ht(gt(Z,[(e=this).props.active_practiceId]),function(t){var a={},n=t.map(function(e){return a[e.id]=qr({},e,{calendar_colour:Ti(wi(e.name))}),a[e.id]});e.setState({categories_object:a,practice_categories:n})},function(){}),this.appointmentList(ya()().subtract(1,"days"),ya()().add(5,"days"))}},{key:"loadDoctors",value:function(){var e=this;ht(gt(z,[this.props.active_practiceId]),function(t){t.staff.forEach(function(t){if("3"==t.role){var a=e.state.practice_doctors;a.push(t),e.setState({practice_doctors:a})}else{var n=e.state.practice_staff;n.push(t),e.setState({practice_staff:n})}});var a={};e.state.practice_doctors&&e.state.practice_doctors.forEach(function(e){a[e.id]=e}),e.setState({doctors_object:a})},function(){})}},{key:"loadCalendarTimings",value:function(){var e=this;ht(gt(se,[this.props.active_practiceId]),function(t){var a={};t.length&&(a=t[0]);var n={};hn.forEach(function(e){n[e]={},a.visting_hour_same_week?(n[e].startTime=ya()(a.first_start_time,"HH:mm:ss"),n[e].endTime=ya()(a.second_end_time,"HH:mm:ss"),a.is_two_sessions?(n[e].lunch=!0,n[e].lunchStartTime=ya()(a.first_end_time,"HH:mm:ss"),n[e].lunchEndTime=ya()(a.second_start_time,"HH:mm:ss")):n[e].lunch=!1):a[e]?(n[e].startTime=ya()(a["first_start_time_".concat(e)],"HH:mm:ss"),n[e].endTime=ya()(a["second_end_time_".concat(e)],"HH:mm:ss"),a["is_two_sessions_".concat(e)]?(n[e].lunch=!0,n[e].lunchStartTime=ya()(a["first_end_time_".concat(e)],"HH:mm:ss"),n[e].lunchEndTime=ya()(a["second_start_time_".concat(e)],"HH:mm:ss")):n[e].lunch=!1):n[e]=null}),e.setState({calendarTimings:Xr({},a),timing:Xr({},n),loading:!1})},function(){e.setState({loading:!1})})}},{key:"moveEvent",value:function(e){var t=e.event,a=e.start,n=e.end,i=e.isAllDay;if(t.appointment.status!=sn)return bt(O,"Action Not Allowed"),!0;var r=this.state.events,l=r.indexOf(t),s=t.allDay,c=this;!t.allDay&&i?s=!0:t.allDay&&!i&&(s=!1);var o=Xr({},t,{start:a,end:n,allDay:s}),u=Object(wr.a)(r),d={schedule_at:ya()(a).format(),slot:parseInt((n-a)/6e4)},m=function(e){bt(k,"time changed"),u.splice(l,1,o),c.setState({events:u},function(){c.refreshFilterList()})},p=function(){};el({title:"Are you sure to change the time of this appointment?",onOk:function(){ut(gt(oe,[t.id]),d,m,p)},onCancel:function(){}})}},{key:"onSelectSlot",value:function(e){var t=ya()(e.start).format();"doubleClick"==e.action&&(this.setState({startTime:t,redirect:!0}),this.props.history.push("/calendar/create-appointment"))}},{key:"onSelectEvent",value:function(e,t){this.setState({visiblePopover:!0}),this.props.history.push("/patients/appointments/"+e.id)}},{key:"appointmentList",value:function(e,t){var a=this;a.setState({loading:!0});ht(gt(ue,[this.props.active_practiceId]),function(e){a.setState(function(t){t.events;var a=[],n=[],i={},r={};return e.forEach(function(e){var l=new ya.a(e.schedule_at).add(e.slot,"minutes"),s={appointment:e,start:new Date(ya()(e.schedule_at)),end:new Date(l),title:e.patient.user.first_name,id:e.id,doctor:e.doctor,loading:!1};if(i.ALL?(i.ALL.ALL+=1,e.status==dn&&(i.ALL.CANCELLED+=1)):(i.ALL={},i.ALL.ALL=1,e.status==dn?i.ALL.CANCELLED=1:i.ALL.CANCELLED=0),e.doctor&&i[e.doctor]?(i[e.doctor].ALL+=1,e.status==dn&&(i[e.doctor].CANCELLED+=1)):(i[e.doctor]={},i[e.doctor].ALL=1,e.status==dn?i[e.doctor].CANCELLED=1:i[e.doctor].CANCELLED=0),e.category&&i[e.category]?r[e.category]+=1:r[e.category]=1,a.push(s),!t.filterCancelledAppointment&&s.appointment.status==dn)return!0;"DOCTOR"==t.filterType&&"ALL"==t.selectedDoctor||"CATEGORY"==t.filterType&&"ALL"==t.selectedCategory?n.push(s):"DOCTOR"==t.filterType&&s.doctor==t.selectedDoctor?n.push(s):"CATEGORY"==t.filterType&&s.appointment.category==t.selectedCategory&&n.push(s)}),{events:a,filteredEvent:n,doctorsAppointmentCount:Xr({},i),categoriesAppointmentCount:Xr({},r,{ALL:e.length}),appointments:e,loading:!1}})},function(){a.setState({loading:!1})},{start:e.format("YYYY-MM-DD"),end:t.format("YYYY-MM-DD")}),this.blockedCalendarTiming(e,t)}},{key:"eventStyleGetter",value:function(e,t,a,n){var i=e.doctor,r=e.appointment.category,l=null,s={borderRadius:"0px",opacity:.8,border:"5px",color:"white",display:"block"};return e.appointment.status==dn?(s.backgroundColor="#aaa",s.textDecoration="line-through"):("DOCTOR"==this.state.filterType?l=i&&this.state.doctors_object&&this.state.doctors_object[i]?this.state.doctors_object[i].calendar_colour:"black":"CATEGORY"==this.state.filterType&&(l=r&&this.state.categories_object&&this.state.categories_object[r]?"#"+this.state.categories_object[r].calendar_colour:"black"),s.backgroundColor=l),{style:s}}},{key:"render",value:function(){var e=this,t=this;this.state.calendarTimings&&(new Date(new ya.a(this.state.calendarTimings.start_time,"HH:mm:ss")),new Date(new ya.a(this.state.calendarTimings.end_time,"HH:mm:ss")));return i.a.createElement(Zr,{className:"main-container"},i.a.createElement("div",{style:{padding:"5px"}},i.a.createElement(b.d,null,i.a.createElement(b.b,null,i.a.createElement("div",{style:{backgroundColor:"#fff",padding:"5px 10px"}},i.a.createElement(Zt.a,{gutter:16},i.a.createElement(ea.a,{span:3},i.a.createElement(ma.a,{onChange:this.onSelectedDateChange,value:this.state.selectedDate,format:"DD-MM-YYYY",style:{margin:5},allowClear:!1}),"APPOINTMENTS"==this.state.calendarType?i.a.createElement("div",null,t.props.activePracticePermissions.BlockCalendar||t.props.allowAllPermissions?i.a.createElement(Vt.a,{block:!0,style:{margin:5}},i.a.createElement(qt.b,{to:"/calendar/blockcalendar"},i.a.createElement(Bt.a,{type:"stop"})," Block Calendar")):null,i.a.createElement(At.a,{trigger:"click",overlay:i.a.createElement(Ht.a,{onClick:this.setFilterType},i.a.createElement(Ht.a.Item,{key:"DOCTOR"},"DOCTOR"),i.a.createElement(Ht.a.Item,{key:"CATEGORY"},"CATEGORY"))},i.a.createElement(Vt.a,{block:!0,style:{margin:5}},this.state.filterType," ",i.a.createElement(Bt.a,{type:"caret-down"})))):null,i.a.createElement(Tt.a,{spinning:this.state.loading},"DOCTOR"==this.state.filterType?i.a.createElement(Ht.a,{selectedKeys:[this.state.selectedDoctor],size:"small",onClick:function(t){return e.changeFilter("selectedDoctor",t.key)}},"APPOINTMENTS"==this.state.calendarType?i.a.createElement(Ht.a.Item,{key:"ALL",style:{marginBottom:2,textOverflow:"ellipsis",borderLeft:"5px solid black",borderRight:"none"}},i.a.createElement("span",null,"(",this.state.doctorsAppointmentCount.ALL?this.state.filterCancelledAppointment?this.state.doctorsAppointmentCount.ALL.ALL:this.state.doctorsAppointmentCount.ALL.ALL-this.state.doctorsAppointmentCount.ALL.CANCELLED:0,") All Doctors")):null,this.state.practice_doctors.map(function(t){return i.a.createElement(Ht.a.Item,{key:t.id,style:{textOverflow:"ellipsis",borderRight:"none",borderLeft:"5px solid "+t.calendar_colour,backgroundColor:e.state.selectedDoctor==t.id?t.calendar_colour:"inherit",color:e.state.selectedDoctor==t.id?"white":"inherit",fontWeight:e.state.selectedDoctor==t.id?"bold":"inherit"}},i.a.createElement("span",null,"(",e.state.doctorsAppointmentCount[t.id]?e.state.filterCancelledAppointment?e.state.doctorsAppointmentCount[t.id].ALL:e.state.doctorsAppointmentCount[t.id].ALL-e.state.doctorsAppointmentCount[t.id].CANCELLED:0,") ",t.user.first_name))})):i.a.createElement(Ht.a,{selectedKeys:[this.state.selectedCategory],size:"small",onClick:function(t){return e.changeFilter("selectedCategory",t.key)}},i.a.createElement(Ht.a.Item,{key:"ALL",style:{marginBottom:2,textOverflow:"ellipsis",borderLeft:"5px solid black",borderRight:"none"}},i.a.createElement("span",null,"(",this.state.categoriesAppointmentCount.ALL?this.state.categoriesAppointmentCount.ALL:0,") All Categories")),this.state.practice_categories.map(function(t){return i.a.createElement(Ht.a.Item,{key:t.id,style:{textOverflow:"ellipsis",borderRight:"none",borderLeft:"5px solid #"+t.calendar_colour,backgroundColor:e.state.selectedCategory==t.id?"#"+t.calendar_colour:"inherit",color:e.state.selectedCategory==t.id?"white":"inherit",fontWeight:e.state.selectedCategory==t.id?"bold":"inherit"}},i.a.createElement("span",null,"(",e.state.categoriesAppointmentCount[t.id]?e.state.categoriesAppointmentCount[t.id]:0,") ",t.name))})),i.a.createElement("div",{style:{marginTop:16}},i.a.createElement(ha.a.Group,{size:"small",checked:this.state.calendarType,defaultValue:this.state.calendarType,buttonStyle:"solid",onChange:function(t){return e.changeCalendarType(t.target.value)}},i.a.createElement(ha.a.Button,{value:"APPOINTMENTS"},i.a.createElement("small",null,"Appointments")),i.a.createElement(ha.a.Button,{value:"AVAILABILITY"},i.a.createElement("small",null,"Availability")))),i.a.createElement("div",{style:{position:"fixed",bottom:10,zIndex:9}},this.state.openMorePanel?i.a.createElement("div",{style:{boxShadow:"0 2px 4px #111",border:"1px solid #bbb",borderRadius:2,padding:5,backgroundColor:"white"}},i.a.createElement("ul",{style:{listStyle:"none",paddingInlineStart:0}},i.a.createElement("li",null,i.a.createElement(sa.a,{checked:this.state.showCalendarEvents,onChange:function(e){return t.changeState("showCalendarEvents",e.target.checked)}},i.a.createElement("small",null,"Events"))),i.a.createElement("li",null,i.a.createElement(sa.a,{checked:this.state.showAppointments,onChange:function(e){return t.changeState("showAppointments",e.target.checked)}},i.a.createElement("small",null,"Appointments"))),i.a.createElement("li",null,i.a.createElement(sa.a,{checked:this.state.show24HourCalendar,onChange:function(e){return t.changeState("show24HourCalendar",e.target.checked)}},i.a.createElement("small",null,"24 Hours"))),i.a.createElement("li",null,i.a.createElement(sa.a,{checked:this.state.filterCancelledAppointment,onChange:function(e){return t.setFilter("filterCancelledAppointment",e.target.checked)}},i.a.createElement("small",null,"Cancellled Appointment"))),i.a.createElement("li",null,i.a.createElement(na.a,null)),i.a.createElement("li",null,i.a.createElement(qt.b,{to:"/settings/clinics-staff#staff"},i.a.createElement("small",null,"Add Doctor"))),i.a.createElement("li",null,i.a.createElement(qt.b,{to:"/settings/calendarsettings#timings"},i.a.createElement("small",null," Customize Calendar"))),i.a.createElement("li",null,i.a.createElement("a",null,i.a.createElement("small",null,"Resync")),i.a.createElement(Vt.a,{onClick:function(){return e.changeState("openMorePanel",!1)},shape:"circle",size:"small",type:"danger",icon:"close",style:{float:"right"}})))):i.a.createElement("a",{onClick:function(){return e.changeState("openMorePanel",!0)}},"More ",i.a.createElement(Bt.a,{type:"caret-down"}))))),"APPOINTMENTS"==this.state.calendarType?i.a.createElement("div",null,i.a.createElement(ea.a,{span:16},i.a.createElement(Tt.a,{size:"large",spinning:this.state.loading},i.a.createElement($r,{key:"APPOINTMENTS",defaultDate:new Date,localizer:Jr,defaultView:"week",step:10,timeslots:1,truncateEvents:!1,events:this.state.showAppointments?this.state.filteredEvent:[],onEventDrop:this.moveEvent,onEventResize:this.resizeEvent,resizable:!0,selectable:!0,popup:this.onSelectEvent,onSelectSlot:this.onSelectSlot,views:{month:!0,week:al,day:!0,agenda:!0},style:{height:"calc(100vh - 85px)"},eventPropGetter:this.eventStyleGetter,date:new Date(this.state.selectedDate.format()),onRangeChange:this.onRangeChange,components:{event:function(e){return i.a.createElement(Br,Object.assign({},e,t.props))},timeSlotWrapper:function(e){return i.a.createElement(Ur,Object.assign({},e,{key:e.value.toString(),blockedCalendar:t.state.blockedCalendar,calendarTimings:t.state.timing,doctorTimings:t.state.doctorTiming[t.state.selectedDoctor],filterType:t.state.filterType,selectedDoctor:t.state.selectedDoctor,showCalendarEvents:t.state.showCalendarEvents}))}}}))),i.a.createElement(ea.a,{span:5},i.a.createElement(Wr,Object.assign({},this.props,this.state,{key:ya()(this.state.selectedDate).toISOString()})))):i.a.createElement(ea.a,{span:21},i.a.createElement($r,{key:"AVAILABILITY",defaultDate:new Date,localizer:Jr,defaultView:"week",step:10,timeslots:1,truncateEvents:!1,events:this.state.showAppointments?this.state.filteredEvent:[],onEventDrop:this.moveEvent,onEventResize:this.resizeEvent,resizable:!0,selectable:!0,popup:this.onSelectEvent,onSelectSlot:this.onSelectSlot,views:{week:!0,day:!0},style:{height:"calc(100vh - 85px)"},eventPropGetter:this.eventStyleGetter,date:new Date(this.state.selectedDate.format()),onRangeChange:this.onRangeChange,components:{event:function(e){return i.a.createElement(Br,Object.assign({},e,t.props))},timeSlotWrapper:function(e){return i.a.createElement(Ur,Object.assign({},e,{key:e.value.toString(),blockedCalendar:t.state.blockedCalendar,calendarTimings:t.state.timing,doctorTimings:t.state.doctorTiming[t.state.selectedDoctor],filterType:t.state.filterType,selectedDoctor:t.state.selectedDoctor,showCalendarEvents:t.state.showCalendarEvents}))}}}))))))))}}]),t}(n.Component),al=function(e){function t(){return Object(d.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.date,a=t.range(e);return i.a.createElement(Lr.a,Object.assign({},this.props,{range:a,eventOffset:15}))}}]),t}(i.a.Component);al.range=function(e){for(var t=Fr.add(e,-1,"day"),a=Fr.add(t,6,"day"),n=t,i=[];Fr.lte(n,a,"day");)i.push(n),n=Fr.add(n,1,"day");return i},al.navigate=function(e,t){switch(t){case Vr.a.Navigate.PREVIOUS:return Fr.add(e,-3,"day");case Vr.a.Navigate.NEXT:return Fr.add(e,3,"day");default:return e}},al.title=function(e){return" ".concat(e.toLocaleDateString())};var nl=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).getPatientGroup=function(){var e=Object(f.a)(a);ht(gt(de,[a.props.active_practiceId]),function(t){e.setState({patientGroup:t,loading:!1})},function(){e.setState({loading:!1})})},a.state={patientGroup:[],loading:!0},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.getPatientGroup()}},{key:"deleteObject",value:function(e){var t=this,a=e;a.is_active=!1;dt(gt(de,[this.props.active_practiceId]),a,function(e){t.getPatientGroup()},function(){})}},{key:"render",value:function(){var e=this,t=[{title:"Group Name",dataIndex:"name",key:"name"},{title:"Patient Count",dataIndex:"patient_count",key:"patient_count"},{title:"Action",key:"action",render:function(t,a){return i.a.createElement(aa.a,{title:"Are you sure delete this prescription?",onConfirm:function(){return e.deleteObject(a)},okText:"Yes",cancelText:"No"},i.a.createElement("a",null,"Delete"))}}],a=[{label:"Group Name",key:"name",required:!0,type:D}],n={successFn:function(t){console.log(t),bt(k,"success"),e.getPatientGroup()},errorFn:function(){},action:gt(de,[this.props.active_practiceId]),method:"post",beforeSubmit:function(e){console.log(e)}},r=fa.a.create()(La);return i.a.createElement(Zt.a,null,i.a.createElement(r,Object.assign({formProp:n,title:"Patient Groups",fields:a},this.props)),i.a.createElement(na.a,null),i.a.createElement(Zn,{dataSource:this.state.patientGroup,loading:this.state.loading,columns:t}))}}]),t}(i.a.Component);function il(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var rl=ia.a.Meta,ll=ga.a.Search,sl=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).togglePatientGroupEditing=function(e){a.setState({showPatientGroupModal:!!e}),e||a.getPatientGroup()},a.changeSelectedPatientGroup=function(e){var t=Object(f.a)(a);a.setState({selectedPatientGroup:e.target.value,currentPage:null},function(){t.getMorePatient()})},a.state={patientListData:[],patientGroup:[],morePatients:null,loading:!0,selectedPatientGroup:"all"},a.getPatientListData=a.getPatientListData.bind(Object(f.a)(a)),a.searchPatient=a.searchPatient.bind(Object(f.a)(a)),a.getMorePatient=a.getMorePatient.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.getPatientListData(),this.getPatientGroup()}},{key:"getPatientGroup",value:function(){var e=this;ht(gt(de,[this.props.active_practiceId]),function(t){var a=t.sort(function(e,t){return t.patient_count-e.patient_count});e.setState({patientGroup:a})},function(){e.setState({})})}},{key:"getPatientListData",value:function(){var e=this;ht(ee,function(t){e.setState({patientListData:t.results,morePatients:t.next,currentPage:t.current,totalPatients:t.count,loading:!1})},function(){e.setState({loading:!1})})}},{key:"searchPatient",value:function(e){if(e.target.value){var t=this;ht(gt(Ve,[e.target.value]),function(e){e&&t.setState({patientListData:e})},function(){})}else this.getPatientListData()}},{key:"getMorePatient",value:function(){var e=this,t=this.state.currentPage,a={};t?a.page=parseInt(t)+1:this.setState({loading:!0});var n=this.state.selectedPatientGroup;if("all"!=n)if("smart_a"==n||"smart_b"==n||"smart_c"==n||"smart_d"==n)switch(n){case"smart_a":a.gender="male";break;case"smart_b":a.gender="female";break;case"smart_c":a.gender="female",a.age=30,a.type="lt";break;case"smart_d":a.gender="female",a.age=30,a.type="gt"}else a.group=this.state.selectedPatientGroup;ht(ee,function(a){a.current==t+1&&e.setState(function(e){return a.current>1?{patientListData:[].concat(Object(wr.a)(e.patientListData),Object(wr.a)(a.results)),morePatients:a.next,currentPage:a.current}:{patientListData:Object(wr.a)(a.results),morePatients:a.next,currentPage:a.current,loading:!1}})},function(){},function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?il(a,!0).forEach(function(t){Object(u.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):il(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},a))}},{key:"render",value:function(){var e=this,t=this;return i.a.createElement(Zt.a,null,i.a.createElement(ea.a,{span:5,style:{height:"calc(100vh - 55px)",overflow:"auto",padding:"10px",borderRight:"1px solid #ccc"}},i.a.createElement(ha.a.Group,{buttonStyle:"solid",defaultValue:this.state.selectedPatientGroup,onChange:this.changeSelectedPatientGroup},i.a.createElement("h2",null,"Patients"),i.a.createElement(ha.a.Button,{key:"all",style:{width:"100%",backgroundColor:"transparent",border:"0px"},value:"all"},"All Patients",i.a.createElement(Mt.a,{color:"#87d068",style:{float:"right",margin:4}},this.state.totalPatients?this.state.totalPatients:0)),i.a.createElement("p",null,i.a.createElement("br",null)),i.a.createElement("h2",null,"Groups"),i.a.createElement("p",null,i.a.createElement("b",null,"My Groups"),i.a.createElement("a",{style:{float:"right"},onClick:function(){return e.togglePatientGroupEditing(!0)}},"Manage")),this.state.patientGroup.map(function(e){return i.a.createElement(ha.a.Button,{key:e.id,style:{width:"100%",backgroundColor:"transparent",border:"0px"},value:e.id},e.name,i.a.createElement(Mt.a,{color:"#87d068",style:{float:"right",margin:4}},e.patient_count))}),i.a.createElement("p",null,i.a.createElement("br",null)),i.a.createElement("p",null,i.a.createElement("b",null,"Smart Groups")),i.a.createElement(ha.a.Button,{style:{width:"100%",backgroundColor:"transparent",border:"0px"},key:"smart_a",value:"smart_a"},"All Male"),i.a.createElement(ha.a.Button,{style:{width:"100%",backgroundColor:"transparent",border:"0px"},key:"smart_b",value:"smart_b"},"All Female"),i.a.createElement(ha.a.Button,{style:{width:"100%",backgroundColor:"transparent",border:"0px"},key:"smart_c",value:"smart_c"},"Female Over 30"),i.a.createElement(ha.a.Button,{style:{width:"100%",backgroundColor:"transparent",border:"0px"},key:"smart_d",value:"smart_d"},"Female Under 30"),i.a.createElement("p",null,i.a.createElement("br",null)))),i.a.createElement(ea.a,{span:19,style:{overflow:"scroll"}},i.a.createElement(ll,{placeholder:"input search text",onChange:function(t){return e.searchPatient(t)},enterButton:!0}),i.a.createElement(Tt.a,{spinning:this.state.loading},i.a.createElement(Zt.a,null,this.state.patientListData.length?this.state.patientListData.map(function(e){return i.a.createElement(cl,Object.assign({},e,{key:e.id,showMobile:t.props.activePracticePermissions.PatientPhoneNumber,showEmail:t.props.activePracticePermissions.PatientEmailId,setCurrentPatient:t.props.setCurrentPatient}))}):i.a.createElement("p",{style:{textAlign:"center"}},"No Data Found"))),i.a.createElement(Ei,{loaderFunction:this.getMorePatient,loading:this.state.loading,hidden:!this.state.morePatients})),i.a.createElement($t.a,{visible:this.state.showPatientGroupModal,footer:null,onCancel:function(){return e.togglePatientGroupEditing(!1)}},i.a.createElement(nl,this.props)))}}]),t}(i.a.Component);function cl(e){return i.a.createElement(ea.a,{xs:24,sm:24,md:12,lg:8,xl:8,xxl:6},i.a.createElement(ia.a,{onClick:function(){return e.setCurrentPatient(e)},style:{margin:"5px"}},i.a.createElement(rl,{avatar:e.image?i.a.createElement(Nt.a,{src:ot(e.image),size:50}):i.a.createElement(Nt.a,{style:{backgroundColor:"#87d068"},size:50},e.user.first_name?e.user.first_name.charAt(0):i.a.createElement(Bt.a,{type:"user"})),title:e.user.first_name,description:i.a.createElement("span",null,e.showMobile?e.user.mobile:Yt(e.user.mobile),i.a.createElement("br",null),e.showEmail?e.user.email:zt(e.user.email))})))}var ol=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={notes:[]},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.loadPatientNotes()}},{key:"loadPatientNotes",value:function(){var e=this;ht(gt(fe,[this.props.patientId,this.props.active_practiceId]),function(t){e.setState({notes:t,loading:!1})},function(){e.setState({loading:!1})})}},{key:"render",value:function(){var e=this,t=[{key:"name",required:!0,type:D}],a={successFn:function(t){bt(k,"Patient Note Added"),e.loadPatientNotes()},errorFn:function(){},action:gt(fe,[this.props.patientId,this.props.active_practiceId]),method:"post",beforeSubmit:function(e){}},n=[{key:"patient",value:this.props.patientId},{key:"practice",value:this.props.active_practiceId}],r=Yi.Form.create()(La);return i.a.createElement("div",null,i.a.createElement(na.a,null,"Patient Notes"),i.a.createElement(r,{formProp:a,defaultValues:n,fields:t}),i.a.createElement(Yi.List,{size:"small",dataSource:this.state.notes,renderItem:function(e){return i.a.createElement(Yi.List.Item,null,i.a.createElement(Yi.List.Item.Meta,{title:e.name,description:"by "+(e.staff?e.staff.user.first_name:"--")+" on "+ya()(e.created_at).format("lll")}))}}))}}]),t}(i.a.Component),ul=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={redirect:!1,currentPatient:a.props.currentPatient,Membership:[]},a.loadMembership=a.loadMembership.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.loadMembership()}},{key:"loadMembership",value:function(){var e=this;e.state.currentPatient&&ht(gt(He,[e.props.active_practiceId]),function(t){e.setState({Membership:t,loading:!1})},function(){e.setState({loading:!1})})}},{key:"render",value:function(){var e=this;console.log("form state",this.state);var t=[{label:"Type",key:"medical_membership",type:S,options:this.state.Membership.map(function(e){return{label:e.name,value:e.id}})},{label:"Start Date",key:"medical_from",initilValue:ya()(),type:C,format:"YYYY-MM-DD"}],a={successFn:function(t){bt(k,"Medical Membership added"),e.props.loadProfile(),e.props.loadMedicalMembership(),e.props.formChange()},errorFn:function(){},action:gt("patients/membership/?patient=%s",[this.props.patientId]),method:"post"},n=fa.a.create()(La),r=[{key:"patient",value:this.props.patientId},{key:"practice",value:this.props.active_practiceId}];return i.a.createElement(n,{formProp:a,defaultValues:r,fields:t})}}]),t}(i.a.Component),dl=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={redirect:!1,currentPatient:a.props.currentPatient,agentRoles:[]},a.loadAgentRoles=a.loadAgentRoles.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.loadAgentRoles()}},{key:"loadAgentRoles",value:function(){var e=this;ht(Xe,function(t){e.setState({agentRoles:t,loading:!1})},function(){e.setState({loading:!1})})}},{key:"render",value:function(){console.log("history",this.props);var e=this,t=[{label:"Role Type",key:"role",type:S,options:this.state.agentRoles.map(function(e){return{label:e.name,value:e.id}})},{label:"Document Upload",key:"aadhar_upload",type:M}],a={successFn:function(t){bt(k,"Agent Role added"),e.props.loadProfile()},errorFn:function(){},action:gt(te,[this.props.patientId]),method:"put"},n=fa.a.create()(La);return i.a.createElement(n,{formProp:a,defaultValues:[{key:"is_agent",value:!0}],fields:t})}}]),t}(i.a.Component),ml=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).formChange=function(e){console.log("hi",e),a.setState({add:e})},a.addAgent=function(){Object(f.a)(a).setState({agentModalVisible:!0})},a.addAgentModalClosed=function(){a.setState({agentModalVisible:!1})},a.state={patientProfile:null,currentPatient:a.props.currentPatient,medicalHistory:{},loading:!0,add:"",MedicalMembership:null,hide:!1,agentModalVisible:!1},a.loadProfile=a.loadProfile.bind(Object(f.a)(a)),a.loadMedicalMembership=a.loadMedicalMembership.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.state.currentPatient&&(this.loadProfile(),this.loadMedicalMembership())}},{key:"componentWillReceiveProps",value:function(e){var t=this;e.currentPatient&&e.currentPatient!=this.state.currentPatient&&this.setState({currentPatient:e.currentPatient},function(){t.loadProfile()})}},{key:"loadProfile",value:function(){var e=this;e.state.currentPatient&&ht(gt(te,[e.state.currentPatient.id]),function(t){e.setState({patientProfile:t,loading:!1})},function(){e.setState({loading:!1})})}},{key:"loadMedicalMembership",value:function(){var e=this;ht(gt("patients/membership/?patient=%s",[e.props.currentPatient.id]),function(t){e.setState({MedicalMembership:t[t.length-1],loading:!1})},function(){e.setState({loading:!1})})}},{key:"onClickHandler",value:function(e){this.state.MedicalMembership?(bt(P,"Membership !!"),this.setState({add:!1})):this.setState({add:e})}},{key:"deleteMembership",value:function(e){var t=this,a={id:e,is_active:!1};dt(gt("patients/cancel_membership/",[t.props.currentPatient.id]),a,function(e){t.loadProfile(),t.loadMedicalMembership()},function(){})}},{key:"render",value:function(){var e=this;console.log("state",this.state);var t=this;if(this.props.currentPatient){var a=this.state.patientProfile;return a?i.a.createElement(ia.a,{loading:this.state.loading,title:"Patient Profile",extra:t.props.activePracticePermissions.EditPatient?i.a.createElement(i.a.Fragment,null,i.a.createElement(Vt.a,{type:"primary",onClick:this.addAgent},i.a.createElement(Bt.a,{type:"usergroup-add"}),"\xa0Add Agent"),"\xa0\xa0",i.a.createElement(qt.b,{to:"/patient/"+this.state.currentPatient.id+"/profile/edit"},i.a.createElement(Vt.a,{type:"primary"},i.a.createElement(Bt.a,{type:"edit"}),"\xa0Edit Patient Profile"))):null},i.a.createElement(Zt.a,{gutter:16},i.a.createElement(ea.a,{span:6,style:{textAlign:"center"}},a.image?i.a.createElement("img",{src:ot(a.image),style:{width:"100%"}}):i.a.createElement(Nt.a,{size:200,shape:"square",style:{backgroundColor:"#87d068"}},a.user.first_name?a.user.first_name:i.a.createElement(Bt.a,{type:"user"})),i.a.createElement(ea.a,null,i.a.createElement(na.a,null),this.state.add?i.a.createElement("div",null,i.a.createElement("h1",{style:{fontSize:"18px"}},"Medical Membership ",i.a.createElement("a",{href:"#",onClick:function(){return e.onClickHandler(!1)}},"Cancel")),i.a.createElement(ul,Object.assign({},this.props,this.state,{patientId:a.id,loadMedicalMembership:t.loadMedicalMembership,formChange:t.formChange,loadProfile:t.loadProfile}))):i.a.createElement("div",{style:{padding:"0px"}},i.a.createElement("h1",{style:{fontSize:"18px",textAlign:"center"}},"Medical Membership ",i.a.createElement("a",{href:"#",onClick:function(){return e.onClickHandler(!0)}},this.state.MedicalMembership?"Renew":"Add")),this.state.MedicalMembership?i.a.createElement(ia.a,{size:"small",title:"Membership",extra:i.a.createElement(aa.a,{title:"Are you sure delete this Membership?",onConfirm:function(){return t.deleteMembership(e.state.MedicalMembership.id)},okText:"Yes",cancelText:"No"},i.a.createElement(Vt.a,{icon:"close",type:"danger",shape:"circle",size:"small"})),style:{textAlign:"center"}},i.a.createElement("div",{style:{textAlign:"left"}},i.a.createElement("p",null,i.a.createElement("strong",null,"Membership Code : "),i.a.createElement("span",null,this.state.MedicalMembership.membership_code)),i.a.createElement("p",null,i.a.createElement("strong",null,"Start Date : "),i.a.createElement("span",null,this.state.MedicalMembership.medical_from)),i.a.createElement("p",null,i.a.createElement("strong",null,"Valid Till : "),i.a.createElement("span",null,this.state.MedicalMembership.medical_to)))):null)),i.a.createElement(ea.a,null)),i.a.createElement(ea.a,{span:12},i.a.createElement(pl,{label:"Patient Name",value:a.user.first_name}),i.a.createElement(pl,{label:"Patient ID",value:a.id}),a&&a.role?i.a.createElement(pl,{label:"Agent Roles",value:a.role_data.name}):null,i.a.createElement(pl,{label:"Gender",value:a.gender}),i.a.createElement(pl,{label:"Date of Birth",value:a.dob}),i.a.createElement(na.a,null,"Contact Details"),i.a.createElement(pl,{label:"Email",value:t.props.activePracticePermissions.PatientEmailId?a.user.email:zt(a.user.email)}),i.a.createElement(pl,{label:"Primary Mobile",value:t.props.activePracticePermissions.PatientPhoneNumber?a.user.mobile:Yt(a.user.mobile)}),i.a.createElement(pl,{label:"Secondary Mobile",value:t.props.activePracticePermissions.PatientPhoneNumber?a.secondary_mobile_no:Yt(a.secondary_mobile_no)}),i.a.createElement(pl,{label:"Landline No",value:a.landline_no}),i.a.createElement(pl,{label:"Address",value:a.address}),i.a.createElement(pl,{label:"Locality",value:a.locality}),i.a.createElement(pl,{label:"City",value:a.city_data?a.city_data.name:null}),i.a.createElement(pl,{label:"State",value:a.state_data?a.state_data.name:null}),i.a.createElement(pl,{label:"Country",value:a.country_data?a.country_data.name:null}),i.a.createElement(pl,{label:"Pincode",value:a.pincode})),i.a.createElement(ea.a,{span:6,style:{borderLeft:"1 px solid #ccc"}},i.a.createElement(ol,Object.assign({},this.props,{patientId:a.id})),i.a.createElement(na.a,null,"Medical History"),a.medical_history_data&&i.a.createElement(Rt.a,{size:"small",loading:this.state.loading,dataSource:a.medical_history_data,renderItem:function(e){return i.a.createElement(Rt.a.Item,null,e.name)}}),i.a.createElement(na.a,null,"Groups"),i.a.createElement(Rt.a,{dataSource:a.patient_group_data,renderItem:function(e){return i.a.createElement(Rt.a.Item,null,e.name)}})),i.a.createElement($t.a,{title:"Add Agent",visible:this.state.agentModalVisible,onOk:null,footer:null,onCancel:this.addAgentModalClosed},i.a.createElement(dl,Object.assign({patientId:a.id},this.state))))):i.a.createElement(ia.a,{loading:this.state.loading})}return i.a.createElement(sl,this.props)}}]),t}(i.a.Component);function pl(e){return i.a.createElement(Zt.a,{gutter:16,style:{marginBottom:"5px"}},i.a.createElement(ea.a,{span:12,style:{textAlign:"right"}},e.label,":"),i.a.createElement(ea.a,{span:12},i.a.createElement("strong",null,e.value)))}function hl(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function fl(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?hl(a,!0).forEach(function(t){Object(u.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):hl(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var gl=Lt.a.Option,bl=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).loadMedicalHistory=function(){var e=Object(f.a)(a);ht(gt(ne,[a.props.active_practiceId]),function(t){e.setState({history:t})},function(){})},a.setFormParams=function(e,t){a.setState(Object(u.a)({},e,t))},a.getPatientGroup=function(){var e=Object(f.a)(a);ht(gt(de,[a.props.active_practiceId]),function(t){e.setState({patientGroup:t,loading:!1})},function(){e.setState({loading:!1})})},a.handleSubmit=function(e){var t=Object(f.a)(a);e.preventDefault(),a.props.form.validateFields(function(e,a){if(!e){var n=fl({},a,{medical_history:a.medical_history,patient_group:a.patient_group,user:{first_name:a.first_name?a.first_name:null,mobile:a.mobile,referer_code:a.referer_code?a.referer_code:null,email:a.email},dob:ya()(a.dob).format("YYYY-MM-DD"),anniversary:ya()(a.anniversary).format("YYYY-MM-DD")}),i="image";n[i]&&n[i].file&&n[i].file.response&&(n[i]=n[i].file.response.image_path),delete n.first_name,delete n.email,delete n.referer_code,delete n.mobile,t.setState({});var r=function(e){bt("Patient Saved Successfully!!"),t.props.currentPatient?t.props.history.push("/patient/"+t.props.currentPatient.id+"/profile"):t.props.history.push("/patients/profile")},l=function(){t.setState({})};t.props.currentPatient?ut(gt(te,[t.props.currentPatient.id]),n,r,l):dt(gt(ee,[t.props.match.params.id]),n,r,l)}})},a.toggleWebCam=function(e,t){a.setState(function(a){return{webCamState:fl({},a.webCamState,Object(u.a)({},e,t))}})},a.getImageandUpload=function(e,t){var n=Object(f.a)(a),i=new FormData;i.append("image",t),i.append("name","file");dt(N,i,function(t){n.props.form.setFieldsValue(Object(u.a)({},e,{file:{response:t}})),bt(k,"Image Captured and processed."),n.setState(function(t){return{webCamState:fl({},t.webCamState,Object(u.a)({},e,!1))}})},function(){},{"content-type":"multipart/form-data"})},a.onChangeValue=function(e,t){var n=Object(f.a)(a);n.setState(Object(u.a)({},e,t),function(){"country"==e&&n.getState(),"state"==e&&n.getCity()})},a.setFormParams=function(e,t){a.setState(Object(u.a)({},e,t))},a.state={redirect:!1,history:[],patientGroup:[],membership:[],webCamState:{},countrylist:[],stateList:[],cityList:[],country:a.props.currentPatient&&a.props.currentPatient.country_data?a.props.currentPatient.country:null,state:a.props.currentPatient&&a.props.currentPatient.state_data?a.props.currentPatient.state:null},a.changeRedirect=a.changeRedirect.bind(Object(f.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(f.a)(a)),a.getCountry=a.getCountry.bind(Object(f.a)(a)),a.getState=a.getState.bind(Object(f.a)(a)),a.getCity=a.getCity.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.loadMedicalHistory(),this.getPatientGroup(),this.getPatientMembership(),this.getCountry(),this.state.country&&this.getState(),this.state.state&&this.getCity()}},{key:"getCountry",value:function(){var e=this;ht("patients/country/",function(t){e.setState({countrylist:t})},function(){})}},{key:"getState",value:function(){var e=this;ht("patients/state/",function(t){e.setState({stateList:t})},function(){},{country:this.state.country})}},{key:"getCity",value:function(){var e=this;ht("patients/city/",function(t){e.setState({cityList:t})},function(){},{state:this.state.state})}},{key:"getPatientMembership",value:function(){var e=this;ht(gt(He,[this.props.active_practiceId]),function(t){e.setState({membership:t})},function(){})}},{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"render",value:function(){var e=this;console.log("state",this.state),console.log("props",this.props);var t=this,a=this.props.form.getFieldDecorator,n={labelCol:{span:6},wrapperCol:{span:14}},r=[];this.state.history&&this.state.history.forEach(function(e){r.push({label:e.name,value:e.id})});var l=[];this.state.patientGroup&&this.state.patientGroup.forEach(function(e){l.push({label:e.name,value:e.id})});var s=[];this.state.membership&&this.state.membership.forEach(function(e){s.push({label:e.name,value:e.id})});var c={name:"image",data:{name:"hello"},action:ct("blogImage/"),headers:{authorization:"authorization-text"},onChange:function(e){"uploading"!==e.file.status&&console.log(e.file,e.fileList),"done"===e.file.status?V.a.success("".concat(e.file.name," file uploaded successfully")):"error"===e.file.status&&V.a.error("".concat(e.file.name," file upload failed."))}};return i.a.createElement(fa.a,{onSubmit:t.handleSubmit},i.a.createElement(ia.a,{title:i.a.createElement("span",null,t.props.currentPatient?"Edit Profile":"Add Patient","\xa0\xa0",i.a.createElement(qt.b,{to:"/patients/patientprintform"},"Print Patient Form")),extra:i.a.createElement("div",null,i.a.createElement(Vt.a,{style:{margin:5},type:"primary",htmlType:"submit"},"Submit"),t.props.history?i.a.createElement(Vt.a,{style:{margin:5},onClick:function(){return t.props.history.goBack()}},"Cancel"):null)},i.a.createElement(fa.a.Item,Object.assign({key:"image"},n,{label:"Patient Image"}),a("image",{valuePropName:"image"})(i.a.createElement(ua.a,c,i.a.createElement(Vt.a,null,i.a.createElement(Bt.a,{type:"upload"})," Select File"),this.props.currentPatient&&this.props.currentPatient.image?i.a.createElement("img",{src:ot(this.props.currentPatient?this.props.currentPatient.image:null),style:{maxWidth:"100%"}}):null)),i.a.createElement("span",{className:"ant-form-text"},i.a.createElement("a",{onClick:function(){return t.toggleWebCam("image",Math.random())}},"Open Webcam")),i.a.createElement($t.a,{footer:null,onCancel:function(){return t.toggleWebCam("image",!1)},visible:!!t.state.webCamState.image,width:680,key:t.state.webCamState.image},i.a.createElement(ka,{getScreenShot:function(e){return t.getImageandUpload("image",e)}}))),i.a.createElement(fa.a.Item,Object.assign({label:"Patient Name"},n),a("first_name",{rules:[{required:!0,message:"Input Patient Name!"}],initialValue:this.props.currentPatient?this.props.currentPatient.user.first_name:null})(i.a.createElement(ga.a,{placeholder:"Patient Name"}))),i.a.createElement(fa.a.Item,Object.assign({label:"Referral Code"},n),a("referer_code",{initialValue:this.props.currentPatient?this.props.currentPatient.user.referer_code:null})(i.a.createElement(ga.a,{placeholder:"Referral Code"}))),i.a.createElement(fa.a.Item,Object.assign({label:"Aadhar ID"},n),a("aadhar_id",{initialValue:this.props.currentPatient?this.props.currentPatient.aadhar_id:null})(i.a.createElement(ga.a,{placeholder:"Patient Aadhar Number"}))),i.a.createElement(fa.a.Item,Object.assign({label:"Gender"},n),a("gender",{initialValue:this.props.currentPatient?this.props.currentPatient.gender:null})(i.a.createElement(Lt.a,null,i.a.createElement(gl,{value:"male"},"Male"),i.a.createElement(gl,{value:"female"},"Female"),i.a.createElement(gl,{value:"other"},"Other")))),i.a.createElement(fa.a.Item,Object.assign({label:"DOB"},n),a("dob",{defaultValue:this.props.currentPatient?this.props.currentPatient.dob:null})(i.a.createElement(ma.a,null))),i.a.createElement(fa.a.Item,Object.assign({label:"Anniversary"},n),a("anniversary",{defaultValue:this.props.currentPatient?this.props.currentPatient.anniversary:null})(i.a.createElement(ma.a,null))),i.a.createElement(fa.a.Item,Object.assign({label:"Blood Group"},n),a("blood_group",{initialValue:this.props.currentPatient?this.props.currentPatient.blood_group:null})(i.a.createElement(ga.a,{placeholder:"Patient Blood Group"}))),i.a.createElement(fa.a.Item,Object.assign({label:"Family Relation"},n),a("family_relation",{initialValue:this.props.currentPatient?this.props.currentPatient.family_relation:null})(i.a.createElement(ga.a,{placeholder:"Patient Family Relation"}))),i.a.createElement(fa.a.Item,Object.assign({label:"Mobile (Primary)"},n),a("mobile",{initialValue:this.props.currentPatient?this.props.currentPatient.user.mobile:null,rules:[{required:!0,message:"Input Mobile Number"}]})(i.a.createElement(ga.a,{placeholder:"Patient Mobile Number (Primary)"}))),i.a.createElement(fa.a.Item,Object.assign({label:"Mobile (Secondary)"},n),a("secondary_mobile_no",{initialValue:this.props.currentPatient?this.props.currentPatient.secondary_mobile_no:null})(i.a.createElement(ga.a,{placeholder:"Patient Mobile Number (Secondary)"}))),i.a.createElement(fa.a.Item,Object.assign({label:"Landline"},n),a("landline_no",{initialValue:this.props.currentPatient?this.props.currentPatient.landline_no:null})(i.a.createElement(ga.a,{placeholder:"Patient Landline Number"}))),i.a.createElement(fa.a.Item,Object.assign({label:"Address"},n),a("address",{initialValue:this.props.currentPatient?this.props.currentPatient.address:null})(i.a.createElement(ga.a,{placeholder:"Patient Address"}))),i.a.createElement(fa.a.Item,Object.assign({label:"Locality"},n),a("locality",{initialValue:this.props.currentPatient?this.props.currentPatient.locality:null})(i.a.createElement(ga.a,{placeholder:"Patient Locality"}))),this.state.country&&this.state.country==D?i.a.createElement(fa.a.Item,Object.assign({key:"country_extra",label:"Country"},n),a("country_extra",{initialValue:""})(i.a.createElement(ga.a,null)),i.a.createElement("a",{onClick:function(){return t.setFormParams("country",S)}},"Choose Country")):i.a.createElement(fa.a.Item,Object.assign({key:"country"},n,{label:"Country"}),a("country",{initialValue:this.props.currentPatient&&this.props.currentPatient.country_data?this.props.currentPatient.country_data.id:""})(i.a.createElement(Lt.a,{onChange:function(t){return e.onChangeValue("country",t)}},this.state.countrylist.map(function(e){return i.a.createElement(Lt.a.Option,{value:e.id},e.name)}))),i.a.createElement("a",{onClick:function(){return t.setFormParams("country",D)}},"Add New Country")),this.state.country==D||this.state.state&&this.state.state==D?i.a.createElement(fa.a.Item,Object.assign({key:"state_extra",label:"State"},n),a("state_extra",{initialValue:""})(i.a.createElement(ga.a,null)),i.a.createElement("a",{onClick:function(){return t.setFormParams("state",S)}},"Choose State")):i.a.createElement(fa.a.Item,Object.assign({key:"state"},n,{label:"State"}),a("state",{initialValue:this.props.currentPatient&&this.props.currentPatient.state_data?this.props.currentPatient.state_data.id:""})(i.a.createElement(Lt.a,{onChange:function(t){return e.onChangeValue("state",t)}},this.state.stateList.map(function(e){return i.a.createElement(Lt.a.Option,{value:e.id},e.name)}))),i.a.createElement("a",{onClick:function(){return t.setFormParams("state",D)}},"Add New state")),this.state.country==D||this.state.state==D||this.state.city&&this.state.city==D?i.a.createElement(fa.a.Item,Object.assign({key:"city_extra",label:"City"},n),a("city_extra",{initialValue:""})(i.a.createElement(ga.a,null)),i.a.createElement("a",{onClick:function(){return t.setFormParams("city",S)}},"Choose City")):i.a.createElement(fa.a.Item,Object.assign({key:"City"},n,{label:"City"}),a("city",{initialValue:this.props.currentPatient&&this.props.currentPatient.city_data?this.props.currentPatient.city_data.id:""})(i.a.createElement(Lt.a,null,this.state.cityList.map(function(e){return i.a.createElement(Lt.a.Option,{value:e.id},e.name)}))),i.a.createElement("a",{onClick:function(){return t.setFormParams("city",D)}},"Add New City")),i.a.createElement(fa.a.Item,Object.assign({label:"Pincode"},n),a("pincode",{initialValue:this.props.currentPatient?this.props.currentPatient.pincode:null})(i.a.createElement(ga.a,{placeholder:"Patient PINCODE"}))),i.a.createElement(fa.a.Item,Object.assign({label:"Email"},n),a("email",{initialValue:this.props.currentPatient?this.props.currentPatient.user.email:null})(i.a.createElement(ga.a,{placeholder:"Patient Email"}))),i.a.createElement(fa.a.Item,Object.assign({label:"Medical History"},n),a("medical_history",{})(i.a.createElement(Lt.a,{placeholder:"Medical History"},r.map(function(e){return i.a.createElement(Lt.a.Option,{value:e.value},e.label)})))),i.a.createElement(fa.a.Item,Object.assign({label:"Patient Group"},n),a("patient_group",{initialValue:this.props.currentPatient?this.props.currentPatient.patient_group:[]})(i.a.createElement(Lt.a,{placeholder:"Patient Group",mode:"multiple"},l.map(function(e){return i.a.createElement(Lt.a.Option,{value:e.value},e.label)})))),i.a.createElement(fa.a.Item,null,i.a.createElement(Vt.a,{style:{margin:5},type:"primary",htmlType:"submit"},"Submit"),t.props.history?i.a.createElement(Vt.a,{style:{margin:5},onClick:function(){return t.props.history.goBack()}},"Cancel"):null)))}}]),t}(i.a.Component),yl=fa.a.create()(bl),El=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={redirect:!1,appointments:null,practice_doctors:[],procedure_category:null,treatmentNotes:null,practice_staff:[],loading:!1},a.changeRedirect=a.changeRedirect.bind(Object(f.a)(a)),a.editAppointment=a.editAppointment.bind(Object(f.a)(a)),a.deleteAppointment=a.deleteAppointment.bind(Object(f.a)(a)),a.loadProcedureCategory=a.loadProcedureCategory.bind(Object(f.a)(a)),a.loadDoctors=a.loadDoctors.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.loadProcedureCategory(),this.loadDoctors(),this.loadTreatmentNotes(),this.props.match.params.appointmentid?this.loadAppointment(this.props.match.params.appointmentid):this.loadAllAppointments()}},{key:"loadAppointment",value:function(e){var t=this;this.setState({loading:!0});ht(gt(oe,[e]),function(e){t.setState({appointments:[e],loading:!1})},function(){t.setState({loading:!1})})}},{key:"loadAllAppointments",value:function(){var e=this;this.setState({loading:!0});ht(gt(Re,[this.props.active_practiceId]),function(t){var a=t;e.setState({appointments:a.data,loading:!1})},function(){e.setState({loading:!1})},this.props.match.params.id?{patient:this.props.match.params.id}:{})}},{key:"loadProcedureCategory",value:function(){var e=this;ht(gt(J,[this.props.active_practiceId]),function(t){e.setState({procedure_category:t})},function(){})}},{key:"loadDoctors",value:function(){var e=this;ht(gt(z,[this.props.active_practiceId]),function(t){t.staff.forEach(function(t){if("3"==t.role){var a=e.state.practice_doctors;a.push(t),e.setState({practice_doctors:a})}else{var n=e.state.practice_staff;n.push(t),e.setState({practice_staff:n})}})},function(){})}},{key:"loadTreatmentNotes",value:function(){var e=this;ht(gt($,[this.props.active_practiceId]),function(t){e.setState({treatmentNotes:t,loading:!1})},function(){e.setState({loading:!1})})}},{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"editAppointment",value:function(e){var t=e.id;this.props.history.push("/calendar/"+t+"/edit-appointment")}},{key:"deleteAppointment",value:function(e){var t=this;t.setState({loading:!0});ut(gt(oe,[e.id]),{is_active:!1,status:"Cancelled"},function(e){t.loadAllAppointments(),t.setState({loading:!1})},function(){t.setState({loading:!1})})}},{key:"render",value:function(){var e=this,t=this;console.log("props",this.props);var a={};this.state.procedure_category&&this.state.procedure_category.forEach(function(e){a[e.id]=e.name});var n=[];this.state.practice_doctors.length&&this.state.practice_doctors.forEach(function(e){n[e.id]=e.user.first_name});var r=[];this.state.treatmentNotes&&this.state.treatmentNotes.forEach(function(e){r[e.id]=e.name});var l={1:"fast",2:"Full Stomach",3:"No Liquids"},s=[{title:"Schedule Time",key:"name",render:function(e,t){return i.a.createElement("span",null,ya()(t.schedule_at).format("LLL"),",",t.slot,"mins")}},{title:"Patient ID",dataIndex:"patient.id",key:"patient_id"},{title:"Patient Name",dataIndex:"patient.user.first_name",key:"patient_name"},{title:"Patient Mobile",dataIndex:"patient.user.mobile",key:"patient_mobile",render:function(e){return t.props.activePracticePermissions.PatientPhoneNumber?e:Yt(e)}},{title:"Email",dataIndex:"patient.user.email",key:"email",render:function(e){return t.props.activePracticePermissions.PatientEmailId?e:zt(e)}},{title:"Doctor",key:"doctor",render:function(e,t){return i.a.createElement("span",null," ",n[t.doctor])}},{title:"Procedure",key:"procedure",render:function(e,t){return i.a.createElement("span",null," ",a[t.procedure])}},{title:"Treatment Notes",key:"notes",render:function(e,t){return i.a.createElement("span",null," ",r[t.notes])}},{title:"Category",key:"category",render:function(e,t){return i.a.createElement("span",null," ",l[t.category])}},{title:"NotifyByEmail",key:"notify_via_email",render:function(e,t){return i.a.createElement(sa.a,{disabled:!0,checked:t.notify_via_email})}},{title:"NotifyBySMS",key:"notify_via_sms",render:function(e,t){return i.a.createElement(sa.a,{disabled:!0,checked:t.notify_via_sms})}},{title:"Action",key:"action",render:function(a,n){return i.a.createElement("span",null,i.a.createElement("a",{onClick:function(){return e.editAppointment(n)},disabled:!t.props.activePracticePermissions.EditAppointment},"Edit"),i.a.createElement(na.a,{type:"vertical"}),i.a.createElement(aa.a,{title:"Are you sure delete this item?",onConfirm:function(){return e.deleteAppointment(n)},okText:"Yes",cancelText:"No"},i.a.createElement("a",{disabled:!t.props.activePracticePermissions.EditAppointment},"Delete")))}}];fa.a.create()(La);return this.props.match.params.id?i.a.createElement(ia.a,{extra:t.props.activePracticePermissions.AddAppointment||t.props.allowAllPermissions?i.a.createElement(qt.b,{to:"/calendar/create-appointment?patient="+this.props.match.params.id},i.a.createElement(Vt.a,{type:"primary"},i.a.createElement(Bt.a,{type:"plus"}),"\xa0Add Appointment")):null},i.a.createElement(ta.a,{loading:this.state.loading,columns:s,scroll:{x:1300},dataSource:this.state.appointments})):i.a.createElement(ia.a,{extra:t.props.activePracticePermissions.AddAppointment||t.props.allowAllPermissions?i.a.createElement(qt.b,{to:"/calendar/create-appointment"},i.a.createElement(Vt.a,{type:"primary"},i.a.createElement(Bt.a,{type:"plus"}),"\xa0Add Appointment")):null},i.a.createElement(ta.a,{loading:this.state.loading,columns:s,scroll:{x:1300},dataSource:this.state.appointments}))}}]),t}(i.a.Component),vl=s.a.Sider,_l=function(e){function t(){return Object(d.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return i.a.createElement(vl,{trigger:null,collapsible:!0,style:{overflow:"auto",minHeight:"calc(100vh - 64px)",background:"#fff"}},i.a.createElement(Ht.a,{mode:"inline"},i.a.createElement(Ht.a.ItemGroup,{key:"g1",title:i.a.createElement(na.a,{style:{margin:"0px"}},"Patient")},i.a.createElement(Ht.a.Item,{key:"17"},i.a.createElement(qt.b,{to:this.props.currentPatient?"/patient/"+this.props.currentPatient.id+"/profile":"/patients/profile"},i.a.createElement(Bt.a,{type:"user"}),"Profile")),this.props.activePracticePermissions.PatientAppointments||this.props.allowAllPermissions?i.a.createElement(Ht.a.Item,{key:"18"},i.a.createElement(qt.b,{to:this.props.currentPatient?"/patient/"+this.props.currentPatient.id+"/appointments":"/patients/appointments"},i.a.createElement(Bt.a,{type:"calendar"}),"Appointments")):null,this.props.activePracticePermissions.PatientCommunications||this.props.allowAllPermissions?i.a.createElement(Ht.a.Item,{key:"19"},i.a.createElement(qt.b,{to:this.props.currentPatient?"/patient/"+this.props.currentPatient.id+"/communications":"/patients/communications"},i.a.createElement(Bt.a,{type:"message"}),"Communications")):null,this.props.activePracticePermissions.PatientBookings||this.props.allowAllPermissions?i.a.createElement(Ht.a.Item,{key:"booking",disabled:!this.props.currentPatient},i.a.createElement(qt.b,{to:this.props.currentPatient?"/patient/"+this.props.currentPatient.id+"/booking":"/patients/communications"},i.a.createElement(Bt.a,{type:"book"}),"Booking")):null),i.a.createElement(Ht.a.ItemGroup,{key:"g2",title:i.a.createElement(na.a,{style:{margin:"0px"}},"EMR")},this.props.activePracticePermissions.PatientVitalSigns||this.props.allowAllPermissions?i.a.createElement(Ht.a.Item,{key:"20"},i.a.createElement(qt.b,{to:this.props.currentPatient?"/patient/"+this.props.currentPatient.id+"/emr/vitalsigns":"/patients/emr/vitalsigns"},i.a.createElement(Bt.a,{type:"heart"}),"Report Manual")):null,this.props.activePracticePermissions.PatientClinicalNotes||this.props.allowAllPermissions?i.a.createElement(Ht.a.Item,{key:"21"},i.a.createElement(qt.b,{to:this.props.currentPatient?"/patient/"+this.props.currentPatient.id+"/emr/clinicnotes":"/patients/emr/clinicnotes"},i.a.createElement(Bt.a,{type:"solution"}),"Clinical Notes")):null,this.props.activePracticePermissions.PatientTreatmentPlans||this.props.allowAllPermissions?i.a.createElement(Ht.a.Item,{key:"30"},i.a.createElement(qt.b,{to:this.props.currentPatient?"/patient/"+this.props.currentPatient.id+"/emr/plans":"/patients/emr/plans"},i.a.createElement(Bt.a,{type:"read"}),"Treatment Plans")):null,this.props.activePracticePermissions.PatientCompletedProcedure||this.props.allowAllPermissions?i.a.createElement(Ht.a.Item,{key:"22"},i.a.createElement(qt.b,{to:this.props.currentPatient?"/patient/"+this.props.currentPatient.id+"/emr/workdone":"/patients/emr/workdone"},i.a.createElement(Bt.a,{type:"check-circle"}),"Completed Procedure")):null,this.props.activePracticePermissions.PatientFiles||this.props.allowAllPermissions?i.a.createElement(Ht.a.Item,{key:"23"},i.a.createElement(qt.b,{to:this.props.currentPatient?"/patient/"+this.props.currentPatient.id+"/emr/files":"/patients/emr/files"},i.a.createElement(Bt.a,{type:"picture"}),"Files")):null,this.props.activePracticePermissions.PatientPrescriptions||this.props.allowAllPermissions?i.a.createElement(Ht.a.Item,{key:"24"},i.a.createElement(qt.b,{to:this.props.currentPatient?"/patient/"+this.props.currentPatient.id+"/emr/prescriptions":"/patients/emr/prescriptions"},i.a.createElement(Bt.a,{type:"solution"}),"Prescriptions")):null,this.props.activePracticePermissions.PatientTimeline||this.props.allowAllPermissions?i.a.createElement(Ht.a.Item,{key:"25",disabled:!this.props.currentPatient},i.a.createElement(qt.b,{to:this.props.currentPatient?"/patient/"+this.props.currentPatient.id+"/emr/timeline":"/patients/profile"},i.a.createElement(Bt.a,{type:"clock-circle"}),"Timeline")):null,this.props.activePracticePermissions.PatientLabOrders||this.props.allowAllPermissions?i.a.createElement(Ht.a.Item,{key:"26",disabled:!this.props.currentPatient||!0},i.a.createElement(qt.b,{to:this.props.currentPatient?"/patient/"+this.props.currentPatient.id+"/emr/labtrackings":"/patients/profile"},i.a.createElement(Bt.a,{type:"solution"}),"Lab Orders")):null),i.a.createElement(Ht.a.ItemGroup,{key:"g3",title:i.a.createElement(na.a,{style:{margin:"0px"}},"Billing")},this.props.activePracticePermissions.PatientInvoices||this.props.allowAllPermissions?i.a.createElement(Ht.a.Item,{key:"27"},i.a.createElement(qt.b,{to:this.props.currentPatient?"/patient/"+this.props.currentPatient.id+"/billing/invoices":"/patients/billing/invoices"},i.a.createElement(Bt.a,{type:"audit"}),"Invoices")):null,this.props.activePracticePermissions.PatientReturns||this.props.allowAllPermissions?i.a.createElement(Ht.a.Item,{key:"31"},i.a.createElement(qt.b,{to:this.props.currentPatient?"/patient/"+this.props.currentPatient.id+"/billing/return/invoices":"/patients/billing/return/invoices"},i.a.createElement(Bt.a,{type:"redo"}),"Invoices Return")):null,this.props.activePracticePermissions.PatientPayments||this.props.allowAllPermissions?i.a.createElement(Ht.a.Item,{key:"28"},i.a.createElement(qt.b,{to:this.props.currentPatient?"/patient/"+this.props.currentPatient.id+"/billing/payments":"/patients/billing/payments"},i.a.createElement(Bt.a,{type:"dollar"}),"Payments")):null,this.props.activePracticePermissions.PatientLedger||this.props.allowAllPermissions?i.a.createElement(Ht.a.Item,{key:"29",disabled:!this.props.currentPatient},i.a.createElement(qt.b,{to:this.props.currentPatient?"/patient/"+this.props.currentPatient.id+"/billing/ledger":"/patients/profile"},i.a.createElement(Bt.a,{type:"book"}),"Ledger")):null)))}}]),t}(i.a.Component),kl=(a(170),a(72)),Ol=(a(2401),a(690));a(2403);function Pl(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function jl(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Pl(a,!0).forEach(function(t){Object(u.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Pl(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}a(1106).a.Step;var Dl=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).changeFilters=function(e){var t=Object(f.a)(a);a.setState({filterParams:e},function(){t.loadTimeline()})},a.loadTimeline=function(){var e=Object(f.a)(a),t={practice:a.props.active_practiceId};e.setState({loading:!0}),a.state.filterParams.forEach(function(e){t[e]=1});a.props.showAllClinic&&a.props.match.params.id&&delete t.practice,ht(gt(be,[a.props.match.params.id]),function(t){var a=ya()().add(5,"year");e.setState(function(){var e=[],n={};return t.forEach(function(t){a.format("YMD")!=ya()(t.sort_date).format("YMD")&&(a=ya()(t.sort_date),e.push({type:"Time",date:t.sort_date})),e.push(t),"Appointments"!=t.type&&(n[t.type]?n[t.type][t.id]=!0:n[t.type]=Object(u.a)({},t.id,!0))}),{timelineData:e,loading:!1,allCheckList:n}})},function(){e.setState({loading:!1})},t)},a.onCheckAllTimelineCard=function(e){a.setState(function(t){return{checkedTimelineCards:e.target.checked?jl({},t.allCheckList):{},indeterminate:!1,checkAll:e.target.checked}})},a.toggleTimelineCheckbox=function(e,t,n){a.setState(function(a){var i={},r=a.checkedTimelineCards;if(r[e]?r[e][t]=!!n:r[e]=Object(u.a)({},t,!!n),n){if(i.indeterminate=!0,Object.keys(a.allCheckList).length==Object.keys(r).length){for(var l=Object.keys(a.allCheckList),s=!1,c=0;c<l.length;c++)if(Object.keys(a.allCheckList[l[c]]).length!=Object.keys(r[l[c]]).length){s=!0,i.checkAll=!1;break}s||(i.indeterminate=!1,i.checkAll=!0)}}else i.checkAll=!1,i.indeterminate=!0,delete r[e][t],Object.keys(r[e]).length||(delete r[e],Object.keys(r).length||(i.indeterminate=!1));return i.checkedTimelineCards=r,i})},a.printCaseSheet=function(){var e=Object(f.a)(a),t=yt("Starting print case sheet..."),n={practice:e.props.active_practiceId,timeline:[]};Object.keys(a.state.checkedTimelineCards).forEach(function(t){n.timeline.push({type:t,id:Object.keys(e.state.checkedTimelineCards[t])})});dt(gt(ye,[a.props.match.params.id]),n,function(e){Et(t,k,"Fetched report successfully!!"),window.open(F+e.report)},function(){Et(t,P,"Case sheet printing failed!!")})},a.state={filterParams:["appointments","vital_signs","clinic_notes","treatment_plans","procedures","files","prescriptions","invoices","payments"],timelineData:[],checkedTimelineCards:[]},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.loadTimeline()}},{key:"render",value:function(){var e=this;console.log("timeline",this.state.timelineData);var t=this,a=[{label:i.a.createElement("span",{style:{width:"100%"}},"Appointment"),value:"appointments"},{label:i.a.createElement("span",{style:{width:"100%"}},"Report Manual"),value:"vital_signs"},{label:i.a.createElement("span",{style:{width:"100%"}},"Clinic Notes"),value:"clinic_notes"},{label:i.a.createElement("span",{style:{width:"100%"}},"Treatment Plans"),value:"treatment_plans"},{label:i.a.createElement("span",{style:{width:"100%"}},"Procedures"),value:"procedures"},{label:i.a.createElement("span",{style:{width:"100%"}},"Files"),value:"files"},{label:i.a.createElement("span",{style:{width:"100%"}},"Prescriptions"),value:"prescriptions"},{label:i.a.createElement("span",{style:{width:"100%"}},"Invoices"),value:"invoices"},{label:i.a.createElement("span",{style:{width:"100%"}},"Payments"),value:"payments"}];return i.a.createElement(ia.a,{title:"Timeline",extra:i.a.createElement(Vt.a.Group,null,i.a.createElement(Vt.a,null,"Email Case Sheet"),i.a.createElement(Vt.a,{type:"primary",onClick:function(){return e.printCaseSheet()}},"Print Case Sheet"))},i.a.createElement(Tt.a,{spinning:this.state.loading},i.a.createElement(Zt.a,null,i.a.createElement(ea.a,{span:4},i.a.createElement(sa.a.Group,{size:"large",value:this.state.filterParams,options:a,onChange:this.changeFilters})),i.a.createElement(ea.a,{span:20},i.a.createElement(c.a,{top:10},i.a.createElement("h4",{style:{textAlign:"right",padding:"5px",backgroundImage:"linear-gradient(to left, white , transparent)"}},i.a.createElement(sa.a,{indeterminate:this.state.indeterminate,onChange:this.onCheckAllTimelineCard,checked:this.state.checkAll},"Select All"))),i.a.createElement(Ol.a,{progressDot:!0,current:1,direction:"vertical"},this.state.timelineData.map(function(e){return i.a.createElement(Ol.a.Item,{dot:"Time"==e.type?i.a.createElement(Bt.a,{type:"clock-circle-o",style:{fontSize:"25px"}}):null},function(e){switch(e.type){case"Clinical Notes":return function(e){return i.a.createElement(ia.a,{hoverable:!0,bodyStyle:{backgroundColor:e.checkedTimelineCards[e.type]&&e.checkedTimelineCards[e.type][e.id]?"#B5EEFF":"initial"}},i.a.createElement("h2",null,i.a.createElement(Bt.a,{type:"solution"})," Clinical Note Added",i.a.createElement(sa.a,{size:"large",style:{float:"right"},checked:!!e.checkedTimelineCards[e.type]&&e.checkedTimelineCards[e.type][e.id],onChange:function(t){return e.toggleTimelineCheckbox(e.type,e.id,t.target.checked)}}),e.practice?i.a.createElement(Mt.a,{style:{float:"right"}},i.a.createElement(kl.a,{title:"Practice Name"},i.a.createElement("b",null,e.practice.name," "))):null),e.chief_complaints?i.a.createElement("p",null,"Chief Complaints",i.a.createElement("ul",null,e.chief_complaints.split(pn).map(function(e){return e?i.a.createElement("li",null,e):null}))):null,e.observations?i.a.createElement("p",null,"Observations",i.a.createElement("ul",null,e.observations.split(pn).map(function(e){return e?i.a.createElement("li",null,e):null}))):null,e.investigations?i.a.createElement("p",null,"Investigations",i.a.createElement("ul",null,e.investigations.split(pn).map(function(e){return e?i.a.createElement("li",null,e):null}))):null,e.diagnosis?i.a.createElement("p",null,"Diagnosis",i.a.createElement("ul",null,e.diagnosis.split(pn).map(function(e){return e?i.a.createElement("li",null,e):null}))):null,e.notes?i.a.createElement("p",null,"Notes",i.a.createElement("ul",null,e.notes.split(pn).map(function(e){return e?i.a.createElement("li",null,e):null}))):null)}(e);case"Appointments":return function(e){return i.a.createElement(ia.a,{hoverable:!0,bodyStyle:{backgroundColor:e.checkedTimelineCards[e.type]&&e.checkedTimelineCards[e.type][e.id]?"#B5EEFF":"initial"}},i.a.createElement("h2",null,i.a.createElement(Bt.a,{type:"calendar"})," Appointment",e.practice_data?i.a.createElement(Mt.a,{style:{float:"right"}},i.a.createElement(kl.a,{title:"Practice Name"},i.a.createElement("b",null,e.practice_data.name," "))):null),e.doctor_data?i.a.createElement("p",{style:{borderLeft:"5px solid "+e.doctor_data.calendar_colour,paddingLeft:"5px"}},e.doctor_data.user.first_name):null,ya()(e.schedule_at).format("hh:mm A")," to ",ya()(e.schedule_at).add(e.slot,"mins").format("HH:mm A"))}(e);case"Files":return function(e){return i.a.createElement(ia.a,{hoverable:!0,bodyStyle:{backgroundColor:e.checkedTimelineCards[e.type]&&e.checkedTimelineCards[e.type][e.id]?"#B5EEFF":"initial"}},i.a.createElement("h2",null,i.a.createElement(Bt.a,{type:"picture"})," File",i.a.createElement(sa.a,{size:"large",style:{float:"right"},checked:!!e.checkedTimelineCards[e.type]&&e.checkedTimelineCards[e.type][e.id],onChange:function(t){return e.toggleTimelineCheckbox(e.type,e.id,t.target.checked)}}),e.practice_data?i.a.createElement(Mt.a,{style:{float:"right"}},i.a.createElement(kl.a,{title:"Practice Name"},i.a.createElement("b",null,e.practice_data.name," "))):null),i.a.createElement("img",{src:ot(e.file_type),alt:"",style:{height:100}}))}(e);case"Invoices":return function(e){return i.a.createElement(ia.a,{hoverable:!0,bodyStyle:{backgroundColor:e.checkedTimelineCards[e.type]&&e.checkedTimelineCards[e.type][e.id]?"#B5EEFF":"initial"}},i.a.createElement("h2",null,i.a.createElement(Bt.a,{type:"audit"})," Invoice",i.a.createElement(sa.a,{size:"large",style:{float:"right"},checked:!!e.checkedTimelineCards[e.type]&&e.checkedTimelineCards[e.type][e.id],onChange:function(t){return e.toggleTimelineCheckbox(e.type,e.id,t.target.checked)}}),e.practice_data?i.a.createElement(Mt.a,{style:{float:"right"}},i.a.createElement(kl.a,{title:"Practice Name"},i.a.createElement("b",null,e.practice_data.name," "))):null),e.procedure.map(function(e){return i.a.createElement(Mt.a,null,e.name)}),e.inventory.map(function(e){return i.a.createElement(Mt.a,null,e.name)}),i.a.createElement("br",null),i.a.createElement("b",null,e.invoice_id),i.a.createElement("br",null),i.a.createElement("b",null,"Invoice Amount: INR ",e.total),i.a.createElement("br",null),i.a.createElement("b",null,"Paid Amount: INR ",e.payments_data),i.a.createElement("br",null),i.a.createElement("b",null,"Due Amount: INR ",e.total-e.payments_data))}(e);case"Vital Signs":return function(e){var t=[{title:"Time",dataIndex:"created_at",key:"name",render:function(e){return i.a.createElement("span",null,ya()(e).format("hh:mm A"))}},{title:"Temp(F)",key:"temperature",render:function(e,t){return i.a.createElement("span",null," ",t.temperature,i.a.createElement("br",null),",",t.temperature_part)}},{title:"Pulse (BPM)",dataIndex:"pulse",key:"pulse"},{title:"RR breaths/min",dataIndex:"resp_rate",key:"resp_rate"},{title:"SYS/DIA mmhg",key:"address",render:function(e,t){return i.a.createElement(i.a.Fragment,null,t.blood_pressure_up?i.a.createElement("span",null," ",t.blood_pressure_up,"/",t.blood_pressure_down,i.a.createElement("br",null),",",t.position):null)}},{title:"WEIGHT kg",dataIndex:"weight",key:"weight"},{title:"Creatinine Level",key:"creatinine",dataIndex:"creatinine"},{title:"Haemoglobin Level",key:"haemoglobin",dataIndex:"haemoglobin"},{title:"Urea Level",key:"urea",dataIndex:"urea"},{title:"Uric Acid Level",key:"uric_acid",dataIndex:"uric_acid"}];return i.a.createElement(ia.a,{hoverable:!0,bodyStyle:{backgroundColor:e.checkedTimelineCards[e.type]&&e.checkedTimelineCards[e.type][e.id]?"#B5EEFF":"initial"}},i.a.createElement("h2",null,i.a.createElement(Bt.a,{type:"heart"})," Report Manual Recorded",i.a.createElement(sa.a,{size:"large",style:{float:"right"},checked:!!e.checkedTimelineCards[e.type]&&e.checkedTimelineCards[e.type][e.id],onChange:function(t){return e.toggleTimelineCheckbox(e.type,e.id,t.target.checked)}}),e.practice_data?i.a.createElement(Mt.a,{style:{float:"right"}},i.a.createElement(kl.a,{title:"Practice Name"},i.a.createElement("b",null,e.practice_data.name," "))):null),e.doctor_data?i.a.createElement("p",{style:{borderLeft:"5px solid "+e.doctor_data.calendar_colour,paddingLeft:"5px"}},e.doctor_data.user.first_name):null,i.a.createElement(ta.a,{columns:t,size:"small",pagination:!1,dataSource:[e]}))}(e);case"Prescriptions":return function(e){return i.a.createElement(ia.a,{hoverable:!0,bodyStyle:{backgroundColor:e.checkedTimelineCards[e.type]&&e.checkedTimelineCards[e.type][e.id]?"#B5EEFF":"initial"}},i.a.createElement("h2",null,i.a.createElement(Bt.a,{type:"solution"})," Prescription Added",i.a.createElement(sa.a,{size:"large",style:{float:"right"},checked:!!e.checkedTimelineCards[e.type]&&e.checkedTimelineCards[e.type][e.id],onChange:function(t){return e.toggleTimelineCheckbox(e.type,e.id,t.target.checked)}}),e.practice?i.a.createElement(Mt.a,{style:{float:"right"}},i.a.createElement(kl.a,{title:"Practice Name"},i.a.createElement("b",null,e.practice.name," "))):null),e.doctor?i.a.createElement("p",{style:{borderLeft:"5px solid "+e.doctor.calendar_colour,paddingLeft:"5px"}},e.doctor.user.first_name):null,e.drugs.map(function(e){return i.a.createElement(Mt.a,null,e.name)}))}(e);case"Payments":return function(e){return i.a.createElement(ia.a,{hoverable:!0,bodyStyle:{backgroundColor:e.checkedTimelineCards[e.type]&&e.checkedTimelineCards[e.type][e.id]?"#B5EEFF":"initial"}},i.a.createElement("h2",null,i.a.createElement(Bt.a,{type:"dollar"})," Payment",i.a.createElement(sa.a,{size:"large",style:{float:"right"},checked:!!e.checkedTimelineCards[e.type]&&e.checkedTimelineCards[e.type][e.id],onChange:function(t){return e.toggleTimelineCheckbox(e.type,e.id,t.target.checked)}}),e.practice_data?i.a.createElement(Mt.a,{style:{float:"right"}},i.a.createElement(kl.a,{title:"Practice Name"},i.a.createElement("b",null,e.practice_data.name," "))):null),i.a.createElement("b",null,e.payment_id),i.a.createElement("br",null),i.a.createElement("b",null,"Amount Paid: INR ",e.total))}(e);case"Time":return function(e){return i.a.createElement("span",null,i.a.createElement(c.a,{top:20,offsetTop:30},i.a.createElement("h2",{style:{marginLeft:"10px",padding:"5px",backgroundImage:"linear-gradient(to right, #ddd , white)",borderRadius:"4px"}},ya()(e.date).format("LL"))))}(e);case"Procedures":return function(e){return i.a.createElement(ia.a,{hoverable:!0,bodyStyle:{backgroundColor:e.checkedTimelineCards[e.type]&&e.checkedTimelineCards[e.type][e.id]?"#B5EEFF":"initial"}},i.a.createElement("h2",null,"Procedure Performed",i.a.createElement(sa.a,{size:"large",style:{float:"right"},checked:!!e.checkedTimelineCards[e.type]&&e.checkedTimelineCards[e.type][e.id],onChange:function(t){return e.toggleTimelineCheckbox(e.type,e.id,t.target.checked)}}),e.practice?i.a.createElement(Mt.a,{style:{float:"right"}},i.a.createElement(kl.a,{title:"Practice Name"},i.a.createElement("b",null,e.practice.name," "))):null),e.doctor?i.a.createElement("p",{style:{borderLeft:"5px solid "+e.doctor.calendar_colour,paddingLeft:"5px"}},e.doctor.user.first_name):null,e.treatment_plans.map(function(e){return i.a.createElement(Mt.a,null,e.procedure.name)}))}(e);case"Treatment Plans":return function(e){return i.a.createElement(ia.a,{hoverable:!0,bodyStyle:{backgroundColor:e.checkedTimelineCards[e.type]&&e.checkedTimelineCards[e.type][e.id]?"#B5EEFF":"initial"}},i.a.createElement("h2",null,"Treatment Plan ",i.a.createElement(sa.a,{size:"large",style:{float:"right"},checked:!!e.checkedTimelineCards[e.type]&&e.checkedTimelineCards[e.type][e.id],onChange:function(t){return e.toggleTimelineCheckbox(e.type,e.id,t.target.checked)}}),e.practice?i.a.createElement(Mt.a,{style:{float:"right"}},i.a.createElement(kl.a,{title:"Practice Name"},i.a.createElement("b",null,e.practice.name," "))):null),e.doctor?i.a.createElement("p",{style:{borderLeft:"5px solid "+e.doctor.calendar_colour,paddingLeft:"5px"}},e.doctor.user.first_name):null,e.treatment_plans.map(function(e){return i.a.createElement(Mt.a,null,e.procedure.name)}))}(e);default:return e.type}}(jl({},e,{checkedTimelineCards:t.state.checkedTimelineCards,toggleTimelineCheckbox:t.toggleTimelineCheckbox})))}))))))}}]),t}(i.a.Component);var Sl=a(468),xl=a.n(Sl),Il=a(689);function Cl(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function wl(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Cl(a,!0).forEach(function(t){Object(u.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Cl(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Tl=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).loadMailedFiles=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=Object(f.a)(a),n=function(e){t.setState(function(t){return 1==e.current?{files:Object(wr.a)(e.results),total:e.count,loadMoreFiles:e.next,loading:!1}:{files:[].concat(Object(wr.a)(t.files),Object(wr.a)(e.results)),loadMoreFiles:e.next,loading:!1}})},i=function(){},r={mailed:!0,page:e,practice:a.props.active_practiceId};a.props.currentPatient&&(r.patient=a.props.currentPatient.id),a.props.showAllClinic&&a.props.currentPatient&&delete r.practice,ht(_e,n,i,r)},a.filterTags=function(e){var t=Object(f.a)(a);a.setState({filterSearchTag:e.target.value},function(){t.loadData()})},a.showModal=function(e){a.setState(function(){return{visible:!0,filesData:wl({},e)}})},a.handleCancel=function(){a.setState({visible:!1})},a.state={files:[],tags:[],showAddModal:!1,loading:!0,selectedFiles:{},selectedTags:{},filterSearchTag:null,showAddMedicalModel:!1,medicalCertificate:[],visible:!1,filesData:{},mailedfiles:[]},a.loadData=a.loadData.bind(Object(f.a)(a)),a.loadMedicalCertificate=a.loadMedicalCertificate.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentWillMount",value:function(){this.loadData(),this.loadMedicalCertificate()}},{key:"loadData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this;this.setState({loading:!0});var a=function(e){t.setState(function(t){return 1==e.current?{files:Object(wr.a)(e.results),total:e.count,loadMoreFiles:e.next,loading:!1}:{files:[].concat(Object(wr.a)(t.files),Object(wr.a)(e.results)),loadMoreFiles:e.next,loading:!1}})},n=function(){t.setState({loading:!1})},i={page:e,practice:this.props.active_practiceId};this.props.match.params.id&&(i.patient=this.props.match.params.id),this.props.showAllClinic&&this.props.match.params.id&&delete i.practice,this.state.filterSearchTag?i.tag=this.state.filterSearchTag:""==this.state.filterSearchTag&&(i.notag=!0),ht("patients/files/",a,n,i)}},{key:"loadTags",value:function(){var e=this;ht(gt("clinics/%s/filetags/",[this.props.active_practiceId]),function(t){e.setState({tags:t,loading:!1})},function(){e.setState({loading:!1})})}},{key:"loadMedicalCertificate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this;t.setState({loading:!0});var a=function(e){1==e.current?t.setState({total:e.count,medicalCertificate:e.results,loading:!1,loadMoreCertificate:e.next}):t.setState(function(t){return{total:e.count,medicalCertificate:[].concat(Object(wr.a)(t.medicalCertificate),Object(wr.a)(e.results)),loading:!1,loadMoreCertificate:e.next}})},n=function(){t.setState({loading:!1})};this.props.currentPatient&&ht(gt(ve,[this.props.active_practiceId,this.props.currentPatient.id,e]),a,n),this.props.showAllClinic&&this.props.currentPatient?ht(gt(Ee,[this.props.currentPatient.id,e]),a,n):ht(gt(Ee,[this.props.active_practiceId,e]),a,n)}},{key:"triggerAddModal",value:function(e){this.setState({showAddModal:!!e})}},{key:"triggerAddMedicalCertificateModal",value:function(e){this.setState({showAddMedicalModel:!!e})}},{key:"filesCompleteToggle",value:function(e,t){this.setState(function(a){var n=wl({},a.selectedFiles);return t?n[e]=!!t:delete n[e],{selectedFiles:wl({},n)}})}},{key:"tagsCompleteToggle",value:function(e,t){this.setState(function(a){var n=wl({},a.selectedTags);return t?n[e]=!!t:delete n[e],{selectedTags:wl({},n)}})}},{key:"filesWithTags",value:function(){var e=this,t={id:Object.keys(this.state.selectedFiles),file_tags:Object.keys(this.state.selectedTags),patient:this.props.match.params.id};dt(gt("patients/files/",[this.props.match.params.id]),t,function(){e.setState({selectedFiles:{}}),e.loadData()},function(){})}},{key:"deleteMedicalCertificate",value:function(e){var t=this,a={is_active:!1,patient:e.patient,id:e.id};dt(gt(ve,[t.props.active_practiceId]),a,function(e){t.loadData(),t.loadMedicalCertificate()},function(){})}},{key:"deleteFile",value:function(e){var t=this,a={id:e.id,patient:e.patient,is_active:!1};dt(gt("patients/files/",[this.props.match.params.id]),a,function(e){t.loadData()},function(){bt(P,"Please Select Patient.")})}},{key:"loadPDF",value:function(e){ht(gt("patients/medical_certificate_pdf/?id=%s",[e]),function(e){e.report&&window.open(F+e.report)},function(){})}},{key:"render",value:function(){var e=this;console.log("Files",this.state);var t=this,a=Yi.Form.create()(La),n=[{key:"file_type",label:"File",type:M},{key:"file_tags",label:"Tags",type:x,options:this.state.tags.map(function(e){return{label:e.name,value:e.id}})}],r={method:"post",successFn:function(){t.triggerAddModal(!1),t.loadData()},errorFn:function(){},action:gt("patients/files/",[this.props.match.params.id])},l=i.a.createElement("div",{style:{boxShadow:"0 2px 4px #111",border:"1px solid #bbb",borderRadius:2,paddingBottom:"30px",backgroundColor:"white"}},i.a.createElement("ul",{style:{listStyle:"none",paddingInlineStart:0,paddingTop:10}},this.state.tags?i.a.createElement("div",null,this.state.tags.map(function(e){return i.a.createElement("li",{key:e.id},i.a.createElement(sa.a,{value:e.id,onChange:function(a){return t.tagsCompleteToggle(e.id,a.target.checked)},checked:t.state.selectedTags[e.id]},e.name," "))})):null),i.a.createElement("span",null,i.a.createElement(Vt.a,{type:"primary",onClick:function(){return e.filesWithTags()},style:{float:"right",borderStyle:"none"}},"Done"))),s=[{key:"is_active",value:!0},{key:"patient",value:this.props.currentPatient?this.props.currentPatient.id:null},{key:"practice",value:this.props.active_practiceId}];return this.props.match.params.id?i.a.createElement(ia.a,{title:"Files",extra:i.a.createElement(Vt.a.Group,null,i.a.createElement(qt.b,{to:"/patient/"+this.props.match.params.id+"/emr/create-medicalCertificate"}," ",i.a.createElement(Vt.a,{type:"primary"},i.a.createElement(Bt.a,{type:"plus"}),"\xa0Add Medical Certificate")," "),i.a.createElement(At.a,{overlay:l,trigger:["click"],placement:"bottomLeft"},i.a.createElement(Vt.a,null,i.a.createElement(Bt.a,{type:"plus"}),"AddFile/remove")),i.a.createElement(Vt.a,{onClick:function(){return e.triggerAddModal(!0)}},i.a.createElement(Bt.a,{type:"plus"}),"Add"))},i.a.createElement(Zt.a,{gutter:8},i.a.createElement(ea.a,{span:6,style:{height:"calc(100vh - 55px)",overflow:"auto",paddingRight:"10px",borderRight:"1px solid #ccc"}},i.a.createElement(ha.a.Group,{buttonStyle:"solid",defaultValue:"all",onChange:this.filterTags},i.a.createElement("h2",null,"Uploaded Files"),i.a.createElement(ha.a.Button,{style:{width:"100%",backgroundColor:"transparent",border:"0px"},value:null},"All Files"),this.state.tags.map(function(e){return i.a.createElement(ha.a.Button,{key:e.id,style:{width:"100%",backgroundColor:"transparent",border:"0px"},value:e.id},e.name)}),i.a.createElement(ha.a.Button,{style:{width:"100%",backgroundColor:"transparent",border:"0px"},value:""},"Untagged Files"),i.a.createElement("p",null,i.a.createElement("br",null))),i.a.createElement(ha.a.Group,{buttonStyle:"solid",defaultValue:""},i.a.createElement("h2",null,"Generated Files"),i.a.createElement(ha.a.Button,{key:"0",style:{width:"100%",backgroundColor:"transparent",border:"0px"},value:"a",onClick:function(){return e.loadMailedFiles()}},"Emailed Files"),i.a.createElement(ha.a.Button,{key:"1",style:{width:"100%",backgroundColor:"transparent",border:"0px"},onClick:function(){return e.loadMedicalCertificate()}},"Medical Leave Certificate "))),i.a.createElement(ea.a,{span:18},i.a.createElement(Rt.a,{loading:this.state.loading,grid:{gutter:16,column:3},dataSource:this.state.files,renderItem:function(a){return i.a.createElement(Rt.a.Item,{style:{textAlign:"center"},key:a.id},i.a.createElement("div",{style:{width:"100%",height:"150px",border:"1px solid #bbb",backgroundSize:"cover",padding:"auto",overflow:"hidden"}},i.a.createElement(sa.a,{key:a.id,disabled:a.practice!=e.props.active_practiceId,style:{margin:10,position:"absolute",top:5,left:5,boxShadow:"0 0px 5px #000 "},onChange:function(e){return t.filesCompleteToggle(a.id,e.target.checked)},checked:t.state.selectedFiles[a.id]}),i.a.createElement(Il.a,{style:{border:"3px solid red"},large:ot(a.file_type),small:ot(a.file_type),alt:i.a.createElement(Vt.a,{type:"danger",onClick:function(){return e.deleteFile(a)}},i.a.createElement(Bt.a,{type:"delete"}))})))}}),i.a.createElement(Ei,{loaderFunction:function(){return e.loadData(t.state.loadMoreFiles)},loading:this.state.loading,hidden:!this.state.loadMoreFiles}),i.a.createElement(ia.a,{title:"Medical Certificate"},i.a.createElement(Rt.a,{loading:this.state.loading,grid:{gutter:16,column:3},dataSource:this.state.medicalCertificate,renderItem:function(t){return i.a.createElement(ia.a,{style:{width:600},actions:[i.a.createElement("p",null,"Issued on : "+t.date),i.a.createElement("a",{onClick:function(){return e.loadPDF(t.id)}},i.a.createElement(Bt.a,{type:"printer"})),i.a.createElement(aa.a,{title:"Are you sure delete this item?",onConfirm:function(){return e.deleteMedicalCertificate(t)},okText:"Yes",cancelText:"No"},i.a.createElement(Bt.a,{type:"delete"}))]},i.a.createElement(xl.a,{title:"Medical Leave #"+t.id,description:"Excused From :"+t.excused_duty_from+" till "+t.excused_duty_to}))}}),i.a.createElement(Ei,{loaderFunction:function(){return e.loadData(t.state.loadMoreCertificate)},loading:this.state.loading,hidden:!this.state.loadMoreCertificate})))),i.a.createElement($t.a,{visible:this.state.showAddModal,onCancel:function(){return e.triggerAddModal(!1)},footer:null},i.a.createElement(a,{title:"Add Files",fields:n,defaultValues:s,formProp:r}))):i.a.createElement(ia.a,{title:"Files",extra:i.a.createElement(Vt.a.Group,null,i.a.createElement(Vt.a,{type:"primary",style:{marginRight:"10px"},onClick:function(){return e.props.togglePatientListModal(!0)}},i.a.createElement(Bt.a,{type:"plus"}),"\xa0 Add Medical Certificate"),i.a.createElement(Vt.a,{type:"primary",style:{marginRight:"10px"},onClick:function(){return e.props.togglePatientListModal(!0)}},i.a.createElement(Bt.a,{type:"plus"})," \xa0 AddFile/remove"),i.a.createElement(Vt.a,{type:"primary",style:{marginRight:"10px"},onClick:function(){return e.props.togglePatientListModal(!0)}},i.a.createElement(Bt.a,{type:"plus"})," \xa0 Add"))},i.a.createElement(Zt.a,{gutter:8},i.a.createElement(ea.a,{span:6,style:{height:"calc(100vh - 55px)",overflow:"auto",paddingRight:"10px",borderRight:"1px solid #ccc"}},i.a.createElement(ha.a.Group,{buttonStyle:"solid",defaultValue:"all",onChange:this.filterTags},i.a.createElement("h2",null,"Uploaded Files"),i.a.createElement(ha.a.Button,{style:{width:"100%",backgroundColor:"transparent",border:"0px"},value:null},"All Files"),this.state.tags.map(function(e){return i.a.createElement(ha.a.Button,{key:e.id,style:{width:"100%",backgroundColor:"transparent",border:"0px"},value:e.id},e.name)}),i.a.createElement(ha.a.Button,{style:{width:"100%",backgroundColor:"transparent",border:"0px"},value:""},"Untagged Files"),i.a.createElement("p",null,i.a.createElement("br",null))),i.a.createElement(ha.a.Group,{buttonStyle:"solid",defaultValue:""},i.a.createElement("h2",null,"Generated Files"),i.a.createElement(ha.a.Button,{style:{width:"100%",backgroundColor:"transparent",border:"0px"},value:"b",onClick:function(){return e.loadMailedFiles()}},"Emailed Files"),i.a.createElement(ha.a.Button,{style:{width:"100%",backgroundColor:"transparent",border:"0px"},onClick:function(){return e.loadMedicalCertificate()},value:""},"Medical Leave Certificate "))),i.a.createElement(ea.a,{span:18},i.a.createElement(Rt.a,{loading:this.state.loading,grid:{gutter:16,column:3},dataSource:this.state.files,renderItem:function(a){return i.a.createElement(Rt.a.Item,{style:{textAlign:"center"},key:a.id},i.a.createElement("div",{style:{width:"100%",height:"150px",border:"1px solid #bbb",backgroundSize:"cover",padding:"auto",overflow:"hidden"}},i.a.createElement(sa.a,{key:a.id,disabled:a.practice!=e.props.active_practiceId,style:{margin:10,position:"absolute",top:5,left:5,boxShadow:"0 0px 5px #000 "},onChange:function(e){return t.filesCompleteToggle(a.id,e.target.checked)},checked:t.state.selectedFiles[a.id]}),i.a.createElement(Il.a,{style:{border:"3px solid red"},large:ot(a.file_type),small:ot(a.file_type),alt:i.a.createElement(Vt.a,{type:"danger",onClick:function(){return e.deleteFile(a)}},i.a.createElement(Bt.a,{type:"delete"}))})))}}),i.a.createElement(Ei,{loaderFunction:function(){return e.loadData(t.state.loadMoreFiles)},loading:this.state.loading,hidden:!this.state.loadMoreFiles}),i.a.createElement(ia.a,{title:"Medical Certificate"},i.a.createElement(Rt.a,{loading:this.state.loading,grid:{gutter:16,column:3},dataSource:this.state.medicalCertificate,renderItem:function(t){return i.a.createElement(ia.a,{style:{width:600},actions:[i.a.createElement("p",null,"Issued on : "+t.date),i.a.createElement("a",{onClick:function(){return e.loadPDF(t.id)}},i.a.createElement(Bt.a,{type:"printer"})),i.a.createElement(aa.a,{title:"Are you sure delete this item?",onConfirm:function(){return e.deleteMedicalCertificate(t)},okText:"Yes",cancelText:"No"},i.a.createElement(Bt.a,{type:"delete"}))]},i.a.createElement(xl.a,{title:"Medical Leave #"+t.id,description:"Excused From :"+t.excused_duty_from+" till "+t.excused_duty_to}))}}),i.a.createElement(Ei,{loaderFunction:function(){return e.loadMedicalCertificate(t.state.loadMoreCertificate)},loading:this.state.loading,hidden:!this.state.loadMoreCertificate})))),i.a.createElement($t.a,{visible:this.state.showAddModal,onCancel:function(){return e.triggerAddModal(!1)},footer:null},i.a.createElement(a,{title:"Add Files",fields:n,defaultValues:s,formProp:r})))}}]),t}(i.a.Component);i.a.Component;function Al(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Ml(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Al(a,!0).forEach(function(t){Object(u.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Al(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Ll=oa.a.TabPane,Vl=["Complaints","Observations","Diagnoses","Investigations","Notes"],Fl={Complaints:"clinics/%s/complaints/",Observations:"clinics/%s/observations/",Diagnoses:"clinics/%s/diagnoses/",Investigations:"clinics/%s/investigations/",Notes:$},Rl=0,Nl=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).setInitialData=function(){var e=Object(f.a)(a),t=a.state.editClinicNotes;t.chief_complaints&&t.chief_complaints.split(pn).forEach(function(t){return setTimeout(function(){t.length&&e.addValues("Complaints",t)},500)}),t.investigations&&t.investigations.split(pn).forEach(function(t){return setTimeout(function(){t.length&&e.addValues("Investigations",t)},500)}),t.diagnosis&&t.diagnosis.split(pn).forEach(function(t){return setTimeout(function(){t.length&&e.addValues("Diagnoses",t)},500)}),t.notes&&t.notes.split(pn).forEach(function(t){return setTimeout(function(){t.length&&e.addValues("Notes",t)},500)}),t.observations&&t.observations.split(pn).forEach(function(t){return setTimeout(function(){t.length&&e.addValues("Observations",t)},500)})},a.loadRequiredResources=function(e,t){var n=Object(f.a)(a);ht(e,function(e){n.setState(function(a){var n=Ml({},a.resourceList,Object(u.a)({},t,e));return{resourceList:n,filteredResourceList:n,filterStrings:{}}})},function(){console.log(t+" fetching error")})},a.add=function(e){var t=a.props.form,n=t.getFieldValue(e).concat(++Rl);t.setFieldsValue(Object(u.a)({},e,n))},a.remove=function(e,t){var n=a.props.form,i=n.getFieldValue(e);1!==i.length&&n.setFieldsValue(Object(u.a)({},e,i.filter(function(e){return e!==t})))},a.addValues=function(e,t){var n,i=a.props.form,r=i.getFieldValue(e),l=r.concat(++Rl);i.setFieldsValue((n={},Object(u.a)(n,e,l),Object(u.a)(n,"field[".concat(r[r.length-1],"]"),t),n))},a.changeValues=function(e,t){var n=a.props.form.getFieldValue(e);n.indexOf(t)==n.length-1&&a.add(e)},a.toggleModal=function(e){var t=null,n=Object(f.a)(a);a.setState(function(a){return console.log(a.resourceAddModal),a.resourceAddModal&&(t=a.resourceAddModal),{resourceAddModal:e}},function(){t&&n.loadRequiredResources(gt(Fl[t],[n.props.active_practiceId]),t)})},a.searchValues=function(e,t){var n=Object(f.a)(a);a.setState(function(a){var n=Ml({},a.searchStrings);return n[e]=t,{searchStrings:n}},function(){n.filterValues(e)})},a.filterValues=function(e){a.setState(function(t){var a=[];return t.resourceList[e]&&(t.searchStrings[e]?t.resourceList[e].forEach(function(n){n.name&&n.name.toString().toLowerCase().includes(t.searchStrings[e].toLowerCase())&&a.push(n)}):a=t.resourceList[e]),{filteredResourceList:Ml({},t.filteredResourceList,Object(u.a)({},e,a))}})},a.handleSubmit=function(e){var t=Object(f.a)(a);e.preventDefault(),a.props.form.validateFieldsAndScroll(function(e,n){if(!e){var i={};i.chief_complaints=n.Complaints.map(function(e){return n.field[e]}).join(pn),i.investigations=n.Investigations.map(function(e){return n.field[e]}).join(pn),i.diagnosis=n.Diagnoses.map(function(e){return n.field[e]}).join(pn),i.notes=n.Notes.map(function(e){return n.field[e]}).join(pn),i.observations=n.Observations.map(function(e){return n.field[e]}).join(pn),i.patient=t.props.match.params.id,i.practice=t.props.active_practiceId,i.doctor=t.state.selectedDoctor&&t.state.selectedDoctor.id?t.state.selectedDoctor.id:t.state.selectedDoctor,i.date=t.state.selectedDate&&ya()(t.state.selectedDate).isValid()?ya()(t.state.selectedDate).format("YYYY-MM-DD"):null,t.state.editClinicNotes&&(i.id=t.state.editClinicNotes.id);dt(gt(Se,[a.props.match.params.id]),i,function(e){t.props.loadData&&t.props.loadData(),t.props.history.push("/patient/"+t.props.match.params.id+"/emr/clinicnotes/")},function(){})}})},a.changeTab=function(e,t){},a.selectDoctor=function(e){a.setState({selectedDoctor:e})},a.selectedDate=function(e){a.setState({selectedDate:e})},a.state={resourceList:{},filteredResourceList:{},filterStrings:{},practiceDoctors:[],selectedDoctor:{},selectedDate:ya()(),resourceAddModal:null,selectedTab:"Complaints",editClinicNotes:a.props.editClinicNotes?a.props.editClinicNotes:null},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){Ii(this),this.loadRequiredResources(gt("clinics/%s/complaints/",[this.props.active_practiceId]),"Complaints"),this.loadRequiredResources(gt("clinics/%s/observations/",[this.props.active_practiceId]),"Observations"),this.loadRequiredResources(gt("clinics/%s/diagnoses/",[this.props.active_practiceId]),"Diagnoses"),this.loadRequiredResources(gt("clinics/%s/investigations/",[this.props.active_practiceId]),"Investigations"),this.loadRequiredResources(gt($,[this.props.active_practiceId]),"Notes"),this.state.editClinicNotes&&this.setInitialData()}},{key:"render",value:function(){var e=this,t=this,a=this.props.form,n=a.getFieldDecorator,r=a.getFieldValue,l={labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}},s={};Vl.forEach(function(e){n(e,{initialValue:[++Rl]}),s[e]=r(e)});var o=s,u=fa.a.create()(La);return i.a.createElement(ia.a,null,i.a.createElement(Zt.a,null,i.a.createElement(ea.a,{span:18},i.a.createElement("h2",null,"Clinical Notes"),i.a.createElement(fa.a,{onSubmit:this.handleSubmit},Vl.map(function(a){return i.a.createElement("div",null,i.a.createElement(na.a,{style:{margin:5}},a),i.a.createElement("div",{style:{backgroundColor:a==t.state.selectedTab?"#ddd":"initial",padding:10}},o[a].map(function(r,s){return i.a.createElement(fa.a.Item,Object.assign({},l,{label:a+" "+(s+1),key:r}),n("field[".concat(r,"]"),{validateTrigger:["onChange","onBlur"],rules:[{whitespace:!0}]})(i.a.createElement(ga.a,{placeholder:a,style:{width:"60%",marginRight:8},key:r,onFocus:function(e){return t.changeTab(e,a)},onChange:function(){return t.changeValues(a,r)}})),o[a].length-1!=s?i.a.createElement(Vt.a,{shape:"circle",type:"danger",size:"small",icon:"delete",onClick:function(){return e.remove(a,r)}}):null)})))}),i.a.createElement(c.a,{offsetBottom:0},i.a.createElement(ia.a,null,i.a.createElement(Zt.a,null,i.a.createElement("span",null,"by \xa0\xa0"),i.a.createElement(At.a,{placement:"topCenter",overlay:i.a.createElement(Ht.a,null,this.state.practiceDoctors.map(function(t){return i.a.createElement(Ht.a.Item,{key:"0"},i.a.createElement("a",{onClick:function(){return e.selectDoctor(t)}},t.user.first_name))})),trigger:["click"]},i.a.createElement("a",{className:"ant-dropdown-link",href:"#"},i.a.createElement("b",null,this.state.selectedDoctor.user?this.state.selectedDoctor.user.first_name:"No DOCTORS Found"))),i.a.createElement("span",null," \xa0\xa0on\xa0\xa0"),i.a.createElement(ma.a,{value:this.state.selectedDate,allowClear:!1,onChange:function(t){return e.selectedDate(t)},format:"DD-MM-YYYY"}),i.a.createElement(Vt.a,{type:"primary",htmlType:"submit",style:{float:"right",margin:5}},"Save"),t.props.history?i.a.createElement(Vt.a,{style:{margin:5,float:"right"},onClick:function(){return t.props.history.goBack()}},"Cancel"):null),i.a.createElement(Zt.a,null,"Next Follow up"))))),i.a.createElement(ea.a,{span:6},i.a.createElement(oa.a,{type:"card"},Vl.map(function(a){return i.a.createElement(Ll,{tab:a,key:a},i.a.createElement("div",{style:{padding:5}},i.a.createElement(Vt.a,{type:"primary",block:!0,size:"small",onClick:function(){return t.toggleModal(a)}},i.a.createElement(Bt.a,{type:"plus"}),"Add\xa0",a),i.a.createElement("div",{style:{backgroundColor:"#ddd",padding:8}},i.a.createElement(ga.a.Search,{placeholder:"Search in "+a+" ...",onChange:function(t){return e.searchValues(a,t.target.value)}})),i.a.createElement(Rt.a,{key:a,size:"small",dataSource:t.state.filteredResourceList[a],renderItem:function(t){return i.a.createElement(Rt.a.Item,{key:t.id,onClick:function(){return e.addValues(a,t.name)}},t.name)}})))}))),i.a.createElement($t.a,{visible:!!this.state.resourceAddModal,onCancel:function(){return t.toggleModal(null)},title:"Add "+this.state.resourceAddModal,footer:null},this.state.resourceAddModal?i.a.createElement(u,{fields:[{label:this.state.resourceAddModal,required:!0,type:D,key:"name"}],defaultValues:[{key:"practice",value:this.props.active_practiceId}],formProp:{method:"post",action:gt(Fl[this.state.resourceAddModal],[this.props.active_practiceId]),successFn:function(){t.toggleModal(null),bt(k,t.state.resourceAddModal+" added successfully!!")},errorFn:function(e){console.log(e)}}}):null)))}}]),t}(i.a.Component),Bl=fa.a.create()(Nl),Hl=Yi.Modal.confirm,ql=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={currentPatient:a.props.currentPatient,active_practiceId:a.props.active_practiceId,clinicNotes:[],editClinicNotes:null,loading:!0},a.loadClinicNotes=a.loadClinicNotes.bind(Object(f.a)(a)),a.editClinicNotesData=a.editClinicNotesData.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.loadClinicNotes()}},{key:"loadClinicNotes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this,a=function(e){t.setState(function(t){return 1==e.current?{clinicNotes:Object(wr.a)(e.results),next:e.next,loading:!1}:{clinicNotes:[].concat(Object(wr.a)(t.clinicNotes),Object(wr.a)(e.results)),next:e.next,loading:!1}})},n=function(){t.setState({loading:!1})},i={page:e,practice:this.props.active_practiceId};this.props.match.params.id&&(i.patient=this.props.match.params.id),this.props.showAllClinic&&this.props.match.params.id&&delete i.practice,ht(Se,a,n,i)}},{key:"editClinicNotesData",value:function(e){this.setState({editClinicNotes:e,loading:!1});var t=this.props.match.params.id;this.props.history.push("/patient/"+t+"/emr/clinicnotes/edit")}},{key:"deleteClinicNote",value:function(e){var t=this;Hl({title:"Are you sure to delete this item?",okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){var a={id:e.id,patient:e.patient,is_active:!1};dt(gt(Se,[t.props.match.params.id]),a,function(e){t.loadClinicNotes()},function(){})},onCancel:function(){console.log("Cancel")}})}},{key:"loadPDF",value:function(e){ht(gt("patients/clinic_notes_pdf/?id=%s",[e]),function(e){e.report&&window.open(F+e.report)},function(){})}},{key:"render",value:function(){var e=this,t=this;return this.props.match.params.id?i.a.createElement("div",null,i.a.createElement(b.d,null,i.a.createElement(b.b,{exact:!0,path:"/patient/:id/emr/clinicnotes/add",render:function(t){return i.a.createElement(Bl,Object.assign({},t,e.props,{loadData:e.loadClinicNotes}))}}),i.a.createElement(b.b,{exact:!0,path:"/patient/:id/emr/clinicnotes/edit",render:function(a){return e.state.editClinicNotes?i.a.createElement(Bl,Object.assign({},e.state,a,{loadData:e.loadClinicNotes})):i.a.createElement(b.a,{to:"/patient/"+t.props.match.params.id+"/emr/clinicnotes/"})}}),i.a.createElement(b.b,null,i.a.createElement("div",null,i.a.createElement(ia.a,{bodyStyle:{padding:0},title:this.state.currentPatient?this.state.currentPatient.user.first_name+" ClinicNotes":"ClinicNotes",extra:i.a.createElement(Vt.a.Group,null,i.a.createElement(qt.b,{to:"/patient/"+this.props.match.params.id+"/emr/clinicnotes/add"},i.a.createElement(Vt.a,{type:"primary"},i.a.createElement(Bt.a,{type:"plus"}),"Add")))}),this.state.clinicNotes.map(function(a){return i.a.createElement(ia.a,{style:{marginTop:20},title:i.a.createElement("small",null,a.date?ya()(a.date).format("ll"):null),extra:i.a.createElement(At.a.Button,{size:"small",style:{float:"right"},overlay:i.a.createElement(Ht.a,null,i.a.createElement(Ht.a.Item,{key:"1",onClick:function(){return t.editClinicNotesData(a)},disabled:a.practice&&a.practice.id!=e.props.active_practiceId},i.a.createElement(Bt.a,{type:"edit"}),"Edit"),i.a.createElement(Ht.a.Item,{key:"2",onClick:function(){return t.deleteClinicNote(a)},disabled:a.practice&&a.practice.id!=e.props.active_practiceId},i.a.createElement(Bt.a,{type:"delete"}),"Delete"),i.a.createElement(Ht.a.Divider,null),i.a.createElement(Ht.a.Item,{key:"3"},i.a.createElement(qt.b,{to:"/patient/"+a.patient+"/emr/timeline"},i.a.createElement(Bt.a,{type:"clock-circle"}),"\xa0 Patient Timeline")))},i.a.createElement("a",{onClick:function(){return e.loadPDF(a.id)}},i.a.createElement(Bt.a,{type:"printer"})))},i.a.createElement(Zt.a,null,i.a.createElement(ea.a,{span:6},i.a.createElement("h3",null,"Complaints")),i.a.createElement(ea.a,{span:18,style:{borderLeft:"1px solid #ccc",padding:4}},i.a.createElement("div",{style:{minHeight:30}},a.chief_complaints?a.chief_complaints.split(pn).map(function(e,t){return i.a.createElement("span",null,t?i.a.createElement("br",null):null,e)}):null),i.a.createElement(na.a,{style:{margin:0}}))),i.a.createElement(Zt.a,null,i.a.createElement(ea.a,{span:6},i.a.createElement("h3",null,"Observations")),i.a.createElement(ea.a,{span:18,style:{borderLeft:"1px solid #ccc",padding:4}},i.a.createElement("div",{style:{minHeight:30}},a.observations?a.observations.split(pn).map(function(e,t){return i.a.createElement("span",null,t?i.a.createElement("br",null):null,e)}):null),i.a.createElement(na.a,{style:{margin:0}}))),i.a.createElement(Zt.a,null,i.a.createElement(ea.a,{span:6},i.a.createElement("h3",null,"Investigations")),i.a.createElement(ea.a,{span:18,style:{borderLeft:"1px solid #ccc",padding:4}},i.a.createElement("div",{style:{minHeight:30}},a.investigations?a.investigations.split(pn).map(function(e,t){return i.a.createElement("span",null,t?i.a.createElement("br",null):null,e)}):null),i.a.createElement(na.a,{style:{margin:0}}))),i.a.createElement(Zt.a,null,i.a.createElement(ea.a,{span:6},i.a.createElement("h3",null,"Diagnoses")),i.a.createElement(ea.a,{span:18,style:{borderLeft:"1px solid #ccc",padding:4}},i.a.createElement("div",{style:{minHeight:30}},a.diagnosis?a.diagnosis.split(pn).map(function(e,t){return i.a.createElement("span",null,t?i.a.createElement("br",null):null,e)}):null),i.a.createElement(na.a,{style:{margin:0}}))),i.a.createElement(Zt.a,null,i.a.createElement(ea.a,{span:6},i.a.createElement("h3",null,"Notes")),i.a.createElement(ea.a,{span:18,style:{borderLeft:"1px solid #ccc",padding:4}},i.a.createElement("div",{style:{minHeight:30}},a.notes?a.notes.split(pn).map(function(e,t){return i.a.createElement("span",null,t?i.a.createElement("br",null):null,e)}):null),i.a.createElement(na.a,{style:{margin:0}}))),i.a.createElement("div",null,a.doctor?i.a.createElement(Mt.a,{color:a.doctor?a.doctor.calendar_colour:null},i.a.createElement("b",null,"prescribed by  "+a.doctor.user.first_name," ")):null,a.practice?i.a.createElement(Mt.a,{style:{float:"right"}},i.a.createElement(kl.a,{title:"Practice Name"},i.a.createElement("b",null,a.practice.name," "))):null))}),i.a.createElement(Tt.a,{spinning:this.state.loading},i.a.createElement(Zt.a,null)),i.a.createElement(Ei,{loaderFunction:function(){return e.loadClinicNotes(t.state.next)},loading:this.state.loading,hidden:!this.state.next}))))):i.a.createElement("div",null,i.a.createElement(ia.a,{bodyStyle:{padding:0},title:this.state.currentPatient?this.state.currentPatient.user.first_name+" Clinic Notes":"Clinic Notes",extra:i.a.createElement(Vt.a.Group,null,i.a.createElement(Vt.a,{type:"primary",onClick:function(){return e.props.togglePatientListModal(!0)}},i.a.createElement(Bt.a,{type:"plus"}),"Add"))}),this.state.clinicNotes.map(function(a){return i.a.createElement(ia.a,{style:{marginTop:10},key:a.id,extra:i.a.createElement(At.a.Button,{size:"small",overlay:i.a.createElement(Ht.a,null,i.a.createElement(Ht.a.Item,{key:"1",onClick:function(){return t.editClinicNotesData(a)},disabled:a.practice&&a.practice.id!=e.props.active_practiceId},i.a.createElement(Bt.a,{type:"edit"}),"Edit"),i.a.createElement(Ht.a.Item,{key:"2",onClick:function(){return t.deleteClinicNote(a)},disabled:a.practice&&a.practice.id!=e.props.active_practiceId},i.a.createElement(Bt.a,{type:"delete"}),"Delete"),i.a.createElement(Ht.a.Divider,null),i.a.createElement(Ht.a.Item,{key:"3"},i.a.createElement(qt.b,{to:"/patient/"+a.patient+"/emr/timeline"},i.a.createElement(Bt.a,{type:"clock-circle"}),"\xa0 Patient Timeline")))},i.a.createElement("a",{onClick:function(){return e.loadPDF(a.id)}},i.a.createElement(Bt.a,{type:"printer"}))),title:i.a.createElement("div",null,i.a.createElement("small",null,a.date?ya()(a.date).format("ll"):null,i.a.createElement(qt.b,{to:"/patient/"+a.patient.id+"/emr/clinicnotes"},"\xa0\xa0 ",a.patient.user?a.patient.user.first_name:null," (ID: ",a.patient.id,")\xa0"),i.a.createElement("span",null,", ",a.patient.gender)))},i.a.createElement(Zt.a,null,i.a.createElement(ea.a,{span:6},i.a.createElement("h3",null,"Complaints")),i.a.createElement(ea.a,{span:18,style:{borderLeft:"1px solid #ccc",padding:4}},i.a.createElement("div",{style:{minHeight:30}},a.chief_complaints?a.chief_complaints.split(pn).map(function(e,t){return i.a.createElement("span",{key:e},t?i.a.createElement("br",null):null,e)}):null),i.a.createElement(na.a,{style:{margin:0}}))),i.a.createElement(Zt.a,null,i.a.createElement(ea.a,{span:6},i.a.createElement("h3",null,"Observations")),i.a.createElement(ea.a,{span:18,style:{borderLeft:"1px solid #ccc",padding:4}},i.a.createElement("div",{style:{minHeight:30}},a.observations?a.observations.split(pn).map(function(e,t){return i.a.createElement("span",{key:e},t?i.a.createElement("br",null):null,e)}):null),i.a.createElement(na.a,{style:{margin:0}}))),i.a.createElement(Zt.a,null,i.a.createElement(ea.a,{span:6},i.a.createElement("h3",null,"Investigations")),i.a.createElement(ea.a,{span:18,style:{borderLeft:"1px solid #ccc",padding:4}},i.a.createElement("div",{style:{minHeight:30}},a.investigations?a.investigations.split(pn).map(function(e,t){return i.a.createElement("span",{key:e},t?i.a.createElement("br",null):null,e)}):null),i.a.createElement(na.a,{style:{margin:0}}))),i.a.createElement(Zt.a,null,i.a.createElement(ea.a,{span:6},i.a.createElement("h3",null,"Diagnoses")),i.a.createElement(ea.a,{span:18,style:{borderLeft:"1px solid #ccc",padding:4}},i.a.createElement("div",{style:{minHeight:30}},a.diagnosis?a.diagnosis.split(pn).map(function(e,t){return i.a.createElement("span",{key:e},t?i.a.createElement("br",null):null,e)}):null),i.a.createElement(na.a,{style:{margin:0}}))),i.a.createElement(Zt.a,null,i.a.createElement(ea.a,{span:6},i.a.createElement("h3",null,"Notes")),i.a.createElement(ea.a,{span:18,style:{borderLeft:"1px solid #ccc",padding:4}},i.a.createElement("div",{style:{minHeight:30}},a.notes?a.notes.split(pn).map(function(e,t){return i.a.createElement("span",{key:e},t?i.a.createElement("br",null):null,e)}):null),i.a.createElement(na.a,{style:{margin:0}}))),i.a.createElement("div",null,a.doctor?i.a.createElement(Mt.a,{color:a.doctor?a.doctor.calendar_colour:null},i.a.createElement("b",null,"prescribed by  "+a.doctor.user.first_name," ")):null,a.practice?i.a.createElement(Mt.a,{style:{float:"right"}},i.a.createElement(kl.a,{title:"Practice Name"},i.a.createElement("b",null,a.practice.name," "))):null))}),i.a.createElement(Tt.a,{spinning:this.state.loading},i.a.createElement(Zt.a,null)),i.a.createElement(Ei,{loaderFunction:function(){return e.loadClinicNotes(t.state.next)},loading:this.state.loading,hidden:!this.state.next}))}}]),t}(i.a.Component),Yl=(a(2405),a(1107)),zl=(a(616),a(248)),Gl=s.a.Header,Ul=(s.a.Content,s.a.Sider,function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).loadPatientPendingAmount=function(){var e=Object(f.a)(a);if(a.props.currentPatient&&a.props.currentPatient.id){ht(gt(Fe,[a.props.currentPatient.id]),function(t){e.setState({pendingAmount:t})},function(){})}else a.setState({pendingAmount:null})},a.loadPatientWallet=function(){var e=Object(f.a)(a);if(a.props.currentPatient&&a.props.currentPatient.id){ht(gt(Je,[a.props.currentPatient.id]),function(t){e.setState({walletAmount:t})},function(){})}else a.setState({pendingAmount:null})},a.state={pendingAmount:null,walletAmount:null},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.loadPatientPendingAmount(),this.loadPatientWallet()}},{key:"render",value:function(){var e=this;return i.a.createElement(Gl,{className:"header",style:{background:"#e4e4e4"}},i.a.createElement("div",null,this.props.currentPatient?i.a.createElement("div",{style:{display:"inline"}},i.a.createElement("div",{style:{display:"inline",textSize:"25px"}},i.a.createElement(kl.a,{title:"Switch Back to All Patients"},i.a.createElement(Vt.a,{onClick:function(){return e.props.setCurrentPatient(null)},type:"primary",ghost:!0},i.a.createElement(Bt.a,{type:"solution"})," \xa0 Back"))),i.a.createElement("a",{style:{padding:"8px",fontSize:"20px"},onClick:function(){return e.props.togglePatientListModal(!0)}},this.props.currentPatient.image?i.a.createElement(Nt.a,{src:ot(this.props.currentPatient.image)}):i.a.createElement(Nt.a,{style:{backgroundColor:"#87d068"}},this.props.currentPatient.user.first_name?this.props.currentPatient.user.first_name.charAt(0):i.a.createElement(Bt.a,{type:"user"})),"\xa0\xa0",this.props.currentPatient.user.first_name),"\xa0\xa0\xa0\xa0",i.a.createElement(kl.a,{placement:"top",title:"Medical History"},this.props.currentPatient.medical_history_data?this.props.currentPatient.medical_history_data.map(function(e){return i.a.createElement(Mt.a,null,e.name)}):null),i.a.createElement(ca.a,{checked:this.props.showAllClinic,onChange:function(t){return e.props.toggleShowAllClinic(t)},checkedChildren:"All Clinics",unCheckedChildren:"Current Clinic"}),this.state.pendingAmount?i.a.createElement(Rr.a,{placement:"rightTop",content:i.a.createElement(Rt.a,{size:"small",dataSource:this.state.pendingAmount.practice_data,renderItem:function(e){return i.a.createElement(Rt.a.Item,null,i.a.createElement(Rt.a.Item.Meta,{title:e.name,description:"Rs. "+e.total}))}}),title:"Pending Payments"},i.a.createElement("div",{style:{display:"inline",float:"left",maxWidth:200,position:"absolute",margin:"0px 15px"}},i.a.createElement(zl.a,{title:"Total Pending Amount",value:this.state.pendingAmount.grand_total,valueStyle:{color:this.state.pendingAmount.grand_total>0?"#cf1322":"initial",fontWeight:500},precision:2}))):null,this.state.walletAmount&&this.state.walletAmount.length?i.a.createElement(Rr.a,{placement:"rightTop",title:"Wallet Amount",content:i.a.createElement("p",null,"Refundable : ",this.state.walletAmount[0].refundable_amount," ",i.a.createElement("br",null),"Non-Refundable : ",this.state.walletAmount[0].non_refundable)},i.a.createElement("div",{style:{display:"inline",float:"left",maxWidth:400,position:"absolute",paddingLeft:200,margin:"12px 15px"}},i.a.createElement(zl.a,{tile:"wallet",value:this.state.walletAmount[0].refundable_amount+this.state.walletAmount[0].non_refundable,prefix:i.a.createElement(Bt.a,{type:"wallet"})}))):null):i.a.createElement("a",{style:{padding:"8px",fontSize:"20px"},onClick:function(){return e.props.togglePatientListModal(!0)}},i.a.createElement("div",{style:{display:"inline"}},i.a.createElement(Bt.a,{type:"solution"})," \xa0 All Patient")),i.a.createElement(At.a,{overlay:Ci},i.a.createElement(Vt.a,{style:{float:"right",margin:"15px"}},i.a.createElement(Bt.a,{type:"setting"})," Settings ",i.a.createElement(Bt.a,{type:"down"}))),this.props.activePracticePermissions.AddPatient||this.props.allowAllPermissions?i.a.createElement(qt.b,{to:"/patients/profile/add"},i.a.createElement(Vt.a,{type:"primary",style:{float:"right",margin:"15px"}},i.a.createElement(Bt.a,{type:"plus"})," Add Patient")):null),i.a.createElement(Yl.a,{title:"Select Patient",width:1220,placement:"left",onClose:function(){return e.props.togglePatientListModal(!1)},maskClosable:!1,visible:this.props.listModalVisible,style:{height:"calc(100% - 55px)",overflow:"auto",paddingBottom:53}},i.a.createElement(sl,this.props)))}}]),t}(i.a.Component));function Wl(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var Kl=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).onChanged=function(e,t){a.setState(Object(u.a)({},e,t))},a.handleSubmit=function(e){console.log("state",a.state);var t=Object(f.a)(a);e.preventDefault(),a.props.form.validateFields(function(e,n){if(!e){console.log("Received values of form: ",n);var i=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Wl(a,!0).forEach(function(t){Object(u.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Wl(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},n);t.setState({saving:!0});ut(gt(te,[a.props.currentPatient.id]),i,function(e){bt(k,"Communication Settings Saved Successfully!!"),t.setState({saving:!1})},function(){t.setState({saving:!1})})}})},a.state={parient_communication_history:null,patientProfile:null,saving:!1},a.loadCommunication=a.loadCommunication.bind(Object(f.a)(a)),a.loadProfile=a.loadProfile.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.props.currentPatient&&(this.loadCommunication(),this.loadProfile())}},{key:"loadProfile",value:function(){var e=this;console.log("props",e.props.match.params.id),ht(gt(te,[e.props.match.params.id]),function(t){e.setState({patientProfile:t,loading:!1})},function(){e.setState({loading:!1})})}},{key:"loadCommunication",value:function(){var e=this;ht(gt("users/sms_status_update/?user=%s",[this.props.currentPatient.user.id]),function(t){e.setState({parient_communication_history:t.user_sms,loading:!1})},function(){e.setState({loading:!1})})}},{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a={labelCol:{xs:{span:8},sm:{span:8},md:{span:8},lg:{span:8}},wrapperCol:{xs:{span:16},sm:{span:16},md:{span:16},lg:{span:16}}},n=[{title:"SENT TIME",dataIndex:"created_at",key:"created_at",render:function(e){return i.a.createElement("span",null,ya()(e).format("LLL"))}},{title:"MESSAGE",dataIndex:"body",key:"body"},{title:"TYPE",dataIndex:"sms_type",key:"sms_type"},{title:"MESSAGE STATUS",dataIndex:"status",key:"status"}],r=tn.map(function(e){return i.a.createElement(ha.a,{value:e.value},e.title)}),l=an.map(function(e){return i.a.createElement(ha.a,{value:e.value},e.title)}),s=nn.map(function(e){return i.a.createElement(ha.a,{value:e.value},e.title)});return i.a.createElement(fa.a,{onSubmit:this.handleSubmit},i.a.createElement(ia.a,{title:this.props.currentPatient?this.props.currentPatient.user.first_name+" Communication":"Patient Communication",extra:i.a.createElement(Vt.a,{type:"primary",htmlType:"submit",loading:this.state.saving},i.a.createElement(Bt.a,{type:"save"})," Save Communication Setting")},i.a.createElement(fa.a.Item,Object.assign({},a,{key:"sms_enable"})," ",i.a.createElement("label",null,i.a.createElement("span",{className:"ant-form-text"},"Enable SMS the patient"," : "),t("sms_enable",{initialValue:!!this.state.patientProfile&&this.state.patientProfile.sms_enable})(i.a.createElement(ha.a.Group,{onChange:function(t){return e.onChanged("sms_enable",t.target.value)}},r)))),i.a.createElement(fa.a.Item,Object.assign({},a,{key:"email_enable"})," ",i.a.createElement("label",null," ",i.a.createElement("span",{className:"ant-form-text"},"Enable Email the patient"," : "),t("email_enable",{initialValue:!!this.state.patientProfile&&this.state.patientProfile.email_enable})(i.a.createElement(ha.a.Group,{onChange:function(t){return e.onChanged("email_enable",t.target.value)}},l)))),i.a.createElement(fa.a.Item,Object.assign({},a,{key:"birthday_sms_email"})," ",i.a.createElement("label",null," ",i.a.createElement("span",{className:"ant-form-text"}," ","Send Birthday wish SMS & Email"," : "),t("birthday_sms_email",{initialValue:!!this.state.patientProfile&&this.state.patientProfile.birthday_sms_email})(i.a.createElement(ha.a.Group,{onChange:function(t){return e.onChanged("birthday_sms_email",t.target.value)}},s)))),i.a.createElement("div",null,i.a.createElement(na.a,{dashed:!0}),i.a.createElement("h2",null,"Past Communication"),i.a.createElement(Zn,{loading:this.state.loading,columns:n,dataSource:this.state.parient_communication_history}))))}}]),t}(i.a.Component),Ql=fa.a.create()(Kl),Xl=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return i.a.createElement(Ql,Object.assign({},this.state,this.props))}}]),t}(i.a.Component),Jl=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={redirect:!1,vitalSign:null,editVitalSign:a.props.editVitalSign?a.props.editVitalSign:null},a.changeRedirect=a.changeRedirect.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"render",value:function(){var e,t=this,a=[{label:"Pulse",key:"pulse",initialValue:this.props.editVitalSign?this.props.editVitalSign.pulse:null,type:I,follow:"BPM"},{label:"Temperature",key:"temperature",initialValue:this.props.editVitalSign?this.props.editVitalSign.temperature:null,type:I,follow:"Fahrenheit"},{label:"Temperature Part",key:"temperature_part",type:S,initialValue:this.props.editVitalSign?this.props.editVitalSign.temperature_part:null,options:[{label:"forehead",value:"forehead"},{label:"armpit",value:"armpit"},{label:"oral ",value:"oral"}]},{label:"Blood Pressure Up",key:"blood_pressure_up",initialValue:this.props.editVitalSign?this.props.editVitalSign.blood_pressure_up:null,type:I,follow:"mmhg"},{label:"Blood Pressure Down",key:"blood_pressure_down",initialValue:this.props.editVitalSign?this.props.editVitalSign.blood_pressure_down:null,type:I,follow:"mmhg"},{label:"Position",key:"position",type:S,initialValue:this.props.editVitalSign?this.props.editVitalSign.position:null,options:[{label:"standing",value:"standing"},{label:"sitting",value:"sitting"}]},{label:"Weight",key:"weight",initialValue:this.props.editVitalSign?this.props.editVitalSign.weight:null,type:I,follow:"kg."},{label:"Resp Rate",key:"resp_rate",initialValue:this.props.editVitalSign?this.props.editVitalSign.resp_rate:null,type:I,follow:"breaths/min"},{label:"Creatinine Level",key:"creatinine",initialValue:this.props.editVitalSign?this.props.editVitalSign.creatinine:null,type:I},{label:"Haemoglobin Level",key:"haemoglobin",initialValue:this.props.editVitalSign?this.props.editVitalSign.haemoglobin:null,type:I},{label:"Urea Level",key:"urea",initialValue:this.props.editVitalSign?this.props.editVitalSign.urea:null,type:I},{label:"Uric Acid Level",key:"uric_acid",initialValue:this.props.editVitalSign?this.props.editVitalSign.uric_acid:null,type:I}],n=[{key:"patient",value:this.props.match.params.id},{key:"practice",value:this.props.active_practiceId}],r=this,l=fa.a.create()(La);this.state.editVitalSign&&(e={successFn:function(e){bt(k,"success"),r.props.loadData&&r.props.loadData()},errorFn:function(){},action:gt(me,[this.props.match.params.id]),method:"post"},n.push({key:"id",value:this.state.editVitalSign.id}));var s={successFn:function(e){bt(k,"success"),r.props.loadData&&r.props.loadData()},errorFn:function(){},action:gt(me,[this.props.match.params.id]),method:"post"};return i.a.createElement(Zt.a,null,i.a.createElement(ia.a,null,i.a.createElement(b.b,{exact:!0,path:"/patient/:id/emr/vitalsigns/edit",render:function(){return t.state.editVitalSign?i.a.createElement(l,{defaultValues:n,title:"Edit Report Manual",changeRedirect:t.changeRedirect,formProp:e,fields:a}):i.a.createElement(b.a,{to:"/patients/profile"})}}),i.a.createElement(b.b,{exact:!0,path:"/patient/:id/emr/vitalsigns/add",render:function(){return i.a.createElement(l,{title:"Add Report Manual",defaultValues:n,changeRedirect:t.changeRedirect,formProp:s,fields:a})}})),this.state.redirect&&i.a.createElement(b.a,{to:"/patient/"+this.props.match.params.id+"/emr/vitalsigns"}))}}]),t}(i.a.Component),$l=a(55);function Zl(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}ia.a.Meta,ga.a.Search;var es=$t.a.confirm,ts=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).deleteVitalSign=function(e){Object(f.a)(a);es({title:"Are you sure to delete this item?",okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){var t=this,a=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Zl(a,!0).forEach(function(t){Object(u.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Zl(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},e,{is_active:!1});dt(gt(me,[this.props.match.params.id]),a,function(e){bt(k,"Deleted Successfully!!"),t.loadVitalsigns()},function(){})},onCancel:function(){console.log("Cancel")}})},a.editObject=function(e){a.setState({editVitalSign:e,loading:!1});var t=a.props.match.params.id;a.props.history.push("/patient/"+t+"/emr/vitalsigns/edit")},a.state={currentPatient:a.props.currentPatient,vitalsign:[],loading:!0},a.loadVitalsigns=a.loadVitalsigns.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.loadVitalsigns()}},{key:"loadVitalsigns",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this,a=function(e){t.setState(function(t){return 1==e.current?{vitalsign:Object(wr.a)(e.results),next:e.next,loading:!1}:{vitalsign:[].concat(Object(wr.a)(t.vitalsign),Object(wr.a)(e.results)),next:e.next,loading:!1}})},n=function(){},i={page:e,practice:this.props.active_practiceId};this.props.match.params.id&&(i.patient=this.props.match.params.id),this.props.showAllClinic&&this.props.match.params.id&&delete i.practice,ht(me,a,n,i)}},{key:"loadPDF",value:function(e){ht(gt("patients/vital_sign_pdf/?id=%s",[e]),function(e){e.report&&window.open(F+e.report)},function(){})}},{key:"render",value:function(){var e=this,t=this,a=[{title:"Time",dataIndex:"created_at",key:"name",render:function(e){return i.a.createElement("span",null,ya()(e).format("LLL"))}},{title:"Temp(F)",key:"temperature",render:function(e,t){return i.a.createElement("span",null," ",t.temperature,i.a.createElement("br",null),",",t.temperature_part)}},{title:"Pulse (BPM)",dataIndex:"pulse",key:"pulse"},{title:"RR breaths/min",dataIndex:"resp_rate",key:"resp_rate"},{title:"SYS/DIA mmhg",key:"address",render:function(e,t){return i.a.createElement("span",null," ",t.blood_pressure_up,"/",t.blood_pressure_down,i.a.createElement("br",null),",",t.position)}},{title:"WEIGHT kg",dataIndex:"weight",key:"weight"},{title:"Creatinine Level",key:"creatinine",dataIndex:"creatinine"},{title:"Haemoglobin Level",key:"haemoglobin",dataIndex:"haemoglobin"},{title:"Urea Level",key:"urea",dataIndex:"urea"},{title:"Uric Acid Level",key:"uric_acid",dataIndex:"uric_acid"},{title:"Action",key:"action",render:function(a,n){return i.a.createElement("span",null,i.a.createElement("a",{onClick:function(){return e.loadPDF(n.id)}},"Print"),i.a.createElement(na.a,{type:"vertical"}),i.a.createElement("a",{onClick:function(){return e.editObject(n)},disabled:n.practice!=t.props.active_practiceId},"Edit"),i.a.createElement(na.a,{type:"vertical"}),i.a.createElement("a",{onClick:function(){return t.deleteVitalSign(n)},disabled:n.practice!=t.props.active_practiceId},"Delete"))}}];return this.props.match.params.id?i.a.createElement(b.d,null,i.a.createElement(b.b,{path:"/patient/:id/emr/vitalsigns/add",render:function(t){return i.a.createElement(Jl,Object.assign({},e.props,{key:e.state.currentPatient?e.state.currentPatient.id:null},e.state,t,{loadData:e.loadVitalsigns}))}}),i.a.createElement(b.b,{path:"/patient/:id/emr/vitalsigns/edit",render:function(t){return i.a.createElement(Jl,Object.assign({},e.props,{key:e.state.currentPatient?e.state.currentPatient.id:null},e.state,t,{loadData:e.loadVitalsigns}))}}),i.a.createElement(b.b,null,i.a.createElement(ia.a,{title:this.state.currentPatient?this.state.currentPatient.user.first_name+" Report Manual":"Patient Report Manual",extra:i.a.createElement(Vt.a.Group,null,i.a.createElement(qt.b,{to:"/patient/"+this.props.match.params.id+"/emr/vitalsigns/add"},i.a.createElement(Vt.a,{type:"primary"},i.a.createElement(Bt.a,{type:"plus"}),"Add")))},i.a.createElement(oa.a,null,i.a.createElement(oa.a.TabPane,{tab:"Charts",key:1,style:{margin:"auto"}},i.a.createElement(na.a,null,"Pulse Chart (bpm)"),i.a.createElement($l.d,{width:700,height:200,data:this.state.vitalsign.reverse(),margin:{top:10,right:30,left:0,bottom:0}},i.a.createElement($l.f,{dataKey:"created_at",tickFormatter:function(e){return ya()(e).format("LLL")},tickCount:t.state.vitalsign.length}),i.a.createElement($l.g,{domain:[function(e){return Math.abs(e)},function(e){return(1.1*e).toFixed(0)}]}),i.a.createElement($l.a,{strokeDasharray:"3 3"}),i.a.createElement($l.e,{labelFormatter:function(e){return e&&ya()(e).isValid()?ya()(e).format("LLL"):"--"}}),i.a.createElement($l.c,{type:"monotone",dataKey:"pulse",stroke:"#8884d8",fillOpacity:1,strokeWidth:4,fill:"url(#colorUv)"})),i.a.createElement(na.a,null,"Temperature (F)"),i.a.createElement($l.d,{width:700,height:200,data:this.state.vitalsign.reverse(),margin:{top:10,right:30,left:0,bottom:0}},i.a.createElement($l.b,{verticalAlign:"top",height:36}),i.a.createElement("defs",null,i.a.createElement("linearGradient",{id:"colorUv",x1:"0",y1:"0",x2:"0",y2:"1"},i.a.createElement("stop",{offset:"5%",stopColor:"#82ca9d",stopOpacity:.8}),i.a.createElement("stop",{offset:"95%",stopColor:"#82ca9d",stopOpacity:0}))),i.a.createElement($l.f,{dataKey:"created_at",tickFormatter:function(e){return ya()(e).format("LLL")},tickCount:this.state.vitalsign.length}),i.a.createElement($l.g,{domain:[function(e){return Math.abs(e)},function(e){return(1.1*e).toFixed(0)}]}),i.a.createElement($l.a,{strokeDasharray:"3 3"}),i.a.createElement($l.e,{labelFormatter:function(e){return e&&ya()(e).isValid()?ya()(e).format("LLL"):"--"}}),i.a.createElement($l.c,{type:"monotone",dataKey:"temperature",stroke:"#82ca9d",fillOpacity:1,strokeWidth:4,fill:"url(#colorUv)"})),i.a.createElement(na.a,null,"Blood Pressure (mmhg)"),i.a.createElement($l.d,{width:700,height:200,data:this.state.vitalsign.reverse(),margin:{top:10,right:30,left:0,bottom:0}},i.a.createElement("defs",null,i.a.createElement("linearGradient",{id:"colorUv",x1:"0",y1:"0",x2:"0",y2:"1"},i.a.createElement("stop",{offset:"5%",stopColor:"#ffc658",stopOpacity:.8}),i.a.createElement("stop",{offset:"95%",stopColor:"#ffc658",stopOpacity:0}))),i.a.createElement($l.f,{dataKey:"created_at",tickFormatter:function(e){return ya()(e).format("LLL")},tickCount:this.state.vitalsign.length}),i.a.createElement($l.g,{domain:[function(e){return Math.abs(e)},function(e){return(1.1*e).toFixed(0)}]}),i.a.createElement($l.a,{strokeDasharray:"3 3"}),i.a.createElement($l.e,{labelFormatter:function(e){return e&&ya()(e).isValid()?ya()(e).format("LLL"):"--"}}),i.a.createElement($l.c,{type:"monotone",dataKey:"blood_pressure_up",stroke:"#ffc658",fillOpacity:1,strokeWidth:4,fill:"url(#colorUv)"}),i.a.createElement($l.c,{type:"monotone",dataKey:"blood_pressure_down",stroke:"#82ca9d",fillOpacity:1,strokeWidth:4,fill:"url(#colorUv)"})),i.a.createElement(na.a,null,"Weight (kg)"),i.a.createElement($l.d,{width:700,height:200,data:this.state.vitalsign.reverse(),margin:{top:10,right:30,left:0,bottom:0}},i.a.createElement("defs",null,i.a.createElement("linearGradient",{id:"colorUv",x1:"0",y1:"0",x2:"0",y2:"1"},i.a.createElement("stop",{offset:"5%",stopColor:"#8884d8",stopOpacity:.8}),i.a.createElement("stop",{offset:"95%",stopColor:"#8884d8",stopOpacity:0})),i.a.createElement("linearGradient",{id:"colorPv",x1:"0",y1:"0",x2:"0",y2:"1"},i.a.createElement("stop",{offset:"5%",stopColor:"#82ca9d",stopOpacity:.8}),i.a.createElement("stop",{offset:"95%",stopColor:"#82ca9d",stopOpacity:0}))),i.a.createElement($l.f,{dataKey:"created_at",tickFormatter:function(e){return ya()(e).format("LLL")},tickCount:this.state.vitalsign.length}),i.a.createElement($l.g,{domain:[function(e){return Math.abs(e)},function(e){return(1.1*e).toFixed(0)}]}),i.a.createElement($l.a,{strokeDasharray:"3 3"}),i.a.createElement($l.e,{labelFormatter:function(e){return e&&ya()(e).isValid()?ya()(e).format("LLL"):"--"}}),i.a.createElement($l.c,{type:"monotone",dataKey:"weight",stroke:"#8884d8",fillOpacity:1,strokeWidth:4,fill:"url(#colorUv)"})),i.a.createElement(na.a,null,"Respiratory Rate (breaths/min)"),i.a.createElement($l.d,{width:700,height:200,data:this.state.vitalsign.reverse(),margin:{top:10,right:30,left:0,bottom:0}},i.a.createElement("defs",null,i.a.createElement("linearGradient",{id:"colorUv",x1:"0",y1:"0",x2:"0",y2:"1"},i.a.createElement("stop",{offset:"5%",stopColor:"#82ca9d",stopOpacity:.8}),i.a.createElement("stop",{offset:"95%",stopColor:"#82ca9d",stopOpacity:0})),i.a.createElement("linearGradient",{id:"colorPv",x1:"0",y1:"0",x2:"0",y2:"1"},i.a.createElement("stop",{offset:"5%",stopColor:"#82ca9d",stopOpacity:.8}),i.a.createElement("stop",{offset:"95%",stopColor:"#82ca9d",stopOpacity:0}))),i.a.createElement($l.f,{dataKey:"created_at",tickFormatter:function(e){return ya()(e).format("LLL")},tickCount:this.state.vitalsign.length}),i.a.createElement($l.g,{domain:[function(e){return Math.abs(e)},function(e){return(1.1*e).toFixed(0)}]}),i.a.createElement($l.a,{strokeDasharray:"3 3"}),i.a.createElement($l.e,{labelFormatter:function(e){return e&&ya()(e).isValid()?ya()(e).format("LLL"):"--"}}),i.a.createElement($l.c,{type:"monotone",dataKey:"resp_rate",stroke:"#82ca9d",fillOpacity:1,strokeWidth:4,fill:"url(#colorUv)"})),i.a.createElement(na.a,null,"Creatinine Level"),i.a.createElement($l.d,{width:700,height:200,data:this.state.vitalsign.reverse(),margin:{top:10,right:30,left:0,bottom:0}},i.a.createElement("defs",null,i.a.createElement("linearGradient",{id:"colorUv",x1:"0",y1:"0",x2:"0",y2:"1"},i.a.createElement("stop",{offset:"5%",stopColor:"#82ca9d",stopOpacity:.8}),i.a.createElement("stop",{offset:"95%",stopColor:"#82ca9d",stopOpacity:0})),i.a.createElement("linearGradient",{id:"colorPv",x1:"0",y1:"0",x2:"0",y2:"1"},i.a.createElement("stop",{offset:"5%",stopColor:"#82ca9d",stopOpacity:.8}),i.a.createElement("stop",{offset:"95%",stopColor:"#82ca9d",stopOpacity:0}))),i.a.createElement($l.f,{dataKey:"created_at",tickFormatter:function(e){return ya()(e).format("LLL")},tickCount:this.state.vitalsign.length}),i.a.createElement($l.g,{domain:[function(e){return Math.abs(e)},function(e){return(1.1*e).toFixed(0)}]}),i.a.createElement($l.a,{strokeDasharray:"3 3"}),i.a.createElement($l.e,{labelFormatter:function(e){return e&&ya()(e).isValid()?ya()(e).format("LLL"):"--"}}),i.a.createElement($l.c,{type:"monotone",dataKey:"creatinine",stroke:"#82ca9d",fillOpacity:1,strokeWidth:4,fill:"url(#colorUv)"})),i.a.createElement(na.a,null,"Haemoglobin Level"),i.a.createElement($l.d,{width:700,height:200,data:this.state.vitalsign.reverse(),margin:{top:10,right:30,left:0,bottom:0}},i.a.createElement("defs",null,i.a.createElement("linearGradient",{id:"colorUv",x1:"0",y1:"0",x2:"0",y2:"1"},i.a.createElement("stop",{offset:"5%",stopColor:"#82ca9d",stopOpacity:.8}),i.a.createElement("stop",{offset:"95%",stopColor:"#82ca9d",stopOpacity:0})),i.a.createElement("linearGradient",{id:"colorPv",x1:"0",y1:"0",x2:"0",y2:"1"},i.a.createElement("stop",{offset:"5%",stopColor:"#82ca9d",stopOpacity:.8}),i.a.createElement("stop",{offset:"95%",stopColor:"#82ca9d",stopOpacity:0}))),i.a.createElement($l.f,{dataKey:"created_at",tickFormatter:function(e){return ya()(e).format("LLL")},tickCount:this.state.vitalsign.length}),i.a.createElement($l.g,{domain:[function(e){return Math.abs(e)},function(e){return(1.1*e).toFixed(0)}]}),i.a.createElement($l.a,{strokeDasharray:"3 3"}),i.a.createElement($l.e,{labelFormatter:function(e){return e&&ya()(e).isValid()?ya()(e).format("LLL"):"--"}}),i.a.createElement($l.c,{type:"monotone",dataKey:"haemoglobin",stroke:"#82ca9d",fillOpacity:1,strokeWidth:4,fill:"url(#colorUv)"})),i.a.createElement(na.a,null,"Urea Level"),i.a.createElement($l.d,{width:700,height:200,data:this.state.vitalsign.reverse(),margin:{top:10,right:30,left:0,bottom:0}},i.a.createElement("defs",null,i.a.createElement("linearGradient",{id:"colorUv",x1:"0",y1:"0",x2:"0",y2:"1"},i.a.createElement("stop",{offset:"5%",stopColor:"#82ca9d",stopOpacity:.8}),i.a.createElement("stop",{offset:"95%",stopColor:"#82ca9d",stopOpacity:0})),i.a.createElement("linearGradient",{id:"colorPv",x1:"0",y1:"0",x2:"0",y2:"1"},i.a.createElement("stop",{offset:"5%",stopColor:"#82ca9d",stopOpacity:.8}),i.a.createElement("stop",{offset:"95%",stopColor:"#82ca9d",stopOpacity:0}))),i.a.createElement($l.f,{dataKey:"created_at",tickFormatter:function(e){return ya()(e).format("LLL")},tickCount:this.state.vitalsign.length}),i.a.createElement($l.g,{domain:[function(e){return Math.abs(e)},function(e){return(1.1*e).toFixed(0)}]}),i.a.createElement($l.a,{strokeDasharray:"3 3"}),i.a.createElement($l.e,{labelFormatter:function(e){return e&&ya()(e).isValid()?ya()(e).format("LLL"):"--"}}),i.a.createElement($l.c,{type:"monotone",dataKey:"urea",stroke:"#82ca9d",fillOpacity:1,strokeWidth:4,fill:"url(#colorUv)"})),i.a.createElement(na.a,null,"Uric Acid Level"),i.a.createElement($l.d,{width:700,height:200,data:this.state.vitalsign.reverse(),margin:{top:10,right:30,left:0,bottom:0}},i.a.createElement("defs",null,i.a.createElement("linearGradient",{id:"colorUv",x1:"0",y1:"0",x2:"0",y2:"1"},i.a.createElement("stop",{offset:"5%",stopColor:"#82ca9d",stopOpacity:.8}),i.a.createElement("stop",{offset:"95%",stopColor:"#82ca9d",stopOpacity:0})),i.a.createElement("linearGradient",{id:"colorPv",x1:"0",y1:"0",x2:"0",y2:"1"},i.a.createElement("stop",{offset:"5%",stopColor:"#82ca9d",stopOpacity:.8}),i.a.createElement("stop",{offset:"95%",stopColor:"#82ca9d",stopOpacity:0}))),i.a.createElement($l.f,{dataKey:"created_at",tickFormatter:function(e){return ya()(e).format("LLL")},tickCount:this.state.vitalsign.length}),i.a.createElement($l.g,{domain:[function(e){return Math.abs(e)},function(e){return(1.1*e).toFixed(0)}]}),i.a.createElement($l.a,{strokeDasharray:"3 3"}),i.a.createElement($l.e,{labelFormatter:function(e){return e&&ya()(e).isValid()?ya()(e).format("LLL"):"--"}}),i.a.createElement($l.c,{type:"monotone",dataKey:"uric_acid",stroke:"#82ca9d",fillOpacity:1,strokeWidth:4,fill:"url(#colorUv)"}))),i.a.createElement(oa.a.TabPane,{tab:"Details",key:2},i.a.createElement(Zn,{columns:a,pagination:!1,dataSource:this.state.vitalsign}),i.a.createElement(Ei,{loaderFunction:function(){return e.loadInvoices(t.state.next)},loading:this.state.loading,hidden:!this.state.next})))))):i.a.createElement("div",null,i.a.createElement(ia.a,{bodyStyle:{padding:0},title:this.state.currentPatient?this.state.currentPatient.user.first_name+" Report Manual":"Patients Report Manual",extra:i.a.createElement(Vt.a.Group,null,i.a.createElement(Vt.a,{type:"primary",onClick:function(){return t.props.togglePatientListModal(!0)}},i.a.createElement(Bt.a,{type:"plus"}),"Add"))}),this.state.vitalsign.map(function(e){return i.a.createElement("div",null,i.a.createElement(ia.a,{style:{marginTop:10},title:i.a.createElement("small",null,e.date?ya()(e.date).format("ll"):null,i.a.createElement(qt.b,{to:"/patient/"+e.patient_data.id+"/emr/vitalsigns"},"\xa0\xa0 ",e.patient_data.user?e.patient_data.user.first_name:null," (ID: ",e.patient_data.id,")\xa0"),i.a.createElement("span",null,", ",e.patient_data.gender)),bodyStyle:{padding:0}},i.a.createElement(ta.a,{columns:a,pagination:!1,dataSource:[e]})))}),i.a.createElement(Ei,{loaderFunction:function(){return e.loadInvoices(t.state.next)},loading:this.state.loading,hidden:!this.state.next}))}}]),t}(i.a.Component);var as=a(147);function ns(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function is(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ns(a,!0).forEach(function(t){Object(u.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ns(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var rs=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).calculateItem=function(e){var t=a.props.form.getFieldsValue;console.log(t()),a.setState(function(e){Object(wr.a)(e.tableFormValues).forEach(function(e){})})},a.addNotes=function(e,t){a.setState(function(a){return{addNotes:is({},a.addNotes,Object(u.a)({},e,!!t))}})},a.removeTreatment=function(e){a.setState(function(t){return{tableFormValues:Object(wr.a)(Object(as.remove)(t.tableFormValues,function(t){return t._id!=e}))}})},a.add=function(e){var t=Object(f.a)(a);a.setState(function(t){var a=Math.random().toFixed(7);return{addNotes:is({},t.addNotes,Object(u.a)({},a,!!e.default_notes)),tableFormValues:[].concat(Object(wr.a)(t.tableFormValues),[is({},e,{_id:a})])}},function(){t.bottomPoint&&t.bottomPoint.scrollIntoView({behavior:"smooth"})})},a.selectDoctor=function(e){a.setState({selectedDoctor:e})},a.selectedDate=function(e){a.setState({selectedDate:e})},a.handleSubmit=function(e){var t=Object(f.a)(a);e.preventDefault(),a.props.form.validateFields(function(e,a){if(!e){console.log("Received values of form: ",a);var n={treatment_plans:[],patient:t.props.match.params.id,doctor:t.state.selectedDoctor.id,date:t.state.selectedDate&&ya()(t.state.selectedDate).isValid()?t.state.selectedDate.format("YYYY-MM-DD"):null,practice:t.props.active_practiceId};t.props.editId&&(n.id=t.props.editTreatmentPlan.id),t.state.tableFormValues.forEach(function(e){console.log(e),e.quantity=a.quantity[e._id],e.cost=a.cost[e._id],e.discount=a.discount[e._id],a.notes&&(e.notes=a.notes[e._id]);var t={procedure:e.id,cost:e.cost,quantity:e.quantity,margin:e.margin,default_notes:e.notes,is_active:!0,is_completed:!0,discount:e.discount,discount_type:"%"};n.treatment_plans.push(t)});dt(gt(ke,[t.props.match.params.id]),n,function(e){bt("Inventory updated successfully");var a="/patient/"+t.props.match.params.id+"/emr/plans";t.props.history.push(a)},function(){})}})},a.searchValues=function(e){var t=Object(f.a)(a);return a.setState(function(t){return{searchStrings:e}},function(){t.filterValues()}),!1},a.filterValues=function(){a.setState(function(e){var t=[];return e.procedure_category&&(e.searchStrings?e.procedure_category.forEach(function(a){a.name.toString().toLowerCase().includes(e.searchStrings.toLowerCase())&&t.push(a)}):t=e.procedure_category),{filteredItems:t}})},a.state={loadingProcedures:!0,procedure_category:[],tableFormValues:[],addNotes:{},practiceDoctors:[],selectedDoctor:{},selectedDate:ya()()},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.props.editId&&this.setState(function(e){var t=[];return this.props.editTreatmentPlan.treatment_plans.forEach(function(e){var a=Math.random().toFixed(7);t.push(is({},e,{},e.procedure,{_id:a}))}),is({},this.props.editTreatmentPlan,{tableFormValues:t,selectedDate:ya()(this.props.editTreatmentPlan.date),selectedDoctor:this.props.editTreatmentPlan.doctor})}),this.loadProcedures(),Ii(this)}},{key:"loadProcedures",value:function(){var e=this;ht(gt(J,[this.props.active_practiceId]),function(t){e.setState({procedure_category:t,loadingProcedures:!1,filteredItems:t})},function(){e.setState({loadingProcedures:!1})})}},{key:"render",value:function(){var e=this,t=this,a=this.props.form,n=a.getFieldDecorator,r=(a.getFieldValue,a.getFieldsValue,{labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}}),l=[{title:"Treatments",dataIndex:"name",key:"name",render:function(t,a){return i.a.createElement("span",null,i.a.createElement("b",null,t),i.a.createElement("br",null),e.state.addNotes[a._id]?i.a.createElement(fa.a.Item,Object.assign({key:"default_notes[".concat(a._id,"]")},r),n("notes[".concat(a._id,"]"),{validateTrigger:["onChange","onBlur"],rules:[{message:"This field is required."}],initialValue:a.default_notes})(i.a.createElement(ga.a.TextArea,{min:0,placeholder:"Notes..."}))):i.a.createElement("a",{onClick:function(){return e.addNotes(a._id,!0)}},"+ Add Note"))}},{title:"Quantity",dataIndex:"quantity",key:"quantity",render:function(t,a){return i.a.createElement(fa.a.Item,Object.assign({key:"quantity[".concat(a._id,"]")},r),n("quantity[".concat(a._id,"]"),{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"This field is required."}],initialValue:1})(i.a.createElement(pa.a,{min:0,placeholder:"Quantity",size:"small",onChange:function(){return e.calculateItem(a._id)}})))}},{title:"Cost",dataIndex:"cost",key:"cost",render:function(t,a){return i.a.createElement(fa.a.Item,Object.assign({key:"cost[".concat(a._id,"]")},r),n("cost[".concat(a._id,"]"),{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"This field is required."}],initialValue:a.cost})(i.a.createElement(pa.a,{min:0,placeholder:"Cost",size:"small",onChange:function(){return e.calculateItem(a._id)}})))}},{title:"Discount",dataIndex:"discount",key:"discount",render:function(t,a){return i.a.createElement(fa.a.Item,Object.assign({key:"discount[".concat(a._id,"]")},r),n("discount[".concat(a._id,"]"),{validateTrigger:["onChange","onBlur"],rules:[{message:"This field is required."}]})(i.a.createElement(pa.a,{min:0,placeholder:"Discount",size:"small",onChange:function(){return e.calculateItem(a._id)}}))," %")}},{title:"Total",dataIndex:"total",key:"total",render:function(t,a){return i.a.createElement("span",null,t,i.a.createElement(Vt.a,{icon:"close",onClick:function(){return e.removeTreatment(a._id)},type:"danger",shape:"circle",size:"small"}))}}];return i.a.createElement("div",null,i.a.createElement(ia.a,{title:"Completed Procedures"},i.a.createElement(Zt.a,null,i.a.createElement(ea.a,{span:17},i.a.createElement(fa.a,{onSubmit:this.handleSubmit},i.a.createElement(ta.a,{pagination:!1,bordered:!0,dataSource:this.state.tableFormValues,columns:l}),i.a.createElement(c.a,{offsetBottom:0},i.a.createElement(ia.a,null,i.a.createElement("span",null,"by \xa0\xa0"),i.a.createElement(At.a,{placement:"topCenter",overlay:i.a.createElement(Ht.a,null,this.state.practiceDoctors.map(function(t){return i.a.createElement(Ht.a.Item,{key:"0"},i.a.createElement("a",{onClick:function(){return e.selectDoctor(t)}},t.user.first_name))})),trigger:["click"]},i.a.createElement("a",{className:"ant-dropdown-link",href:"#"},i.a.createElement("b",null,this.state.selectedDoctor.user?this.state.selectedDoctor.user.first_name:"No DOCTORS Found"))),i.a.createElement("span",null," \xa0\xa0on\xa0\xa0"),i.a.createElement(ma.a,{value:this.state.selectedDate,onChange:function(t){return e.selectedDate(t)},format:"DD-MM-YYYY",allowClear:!1}),i.a.createElement(fa.a.Item,Object.assign({},{labelCol:{xs:{span:24},sm:{span:24}},wrapperCol:{xs:{span:24},sm:{span:24}}},{style:{marginBottom:0,float:"right"}}),i.a.createElement(Vt.a,{type:"primary",htmlType:"submit",style:{margin:5}},"Save Treatment Plan"),t.props.history?i.a.createElement(Vt.a,{style:{margin:5,float:"right"},onClick:function(){return t.props.history.goBack()}},"Cancel"):null))),i.a.createElement("div",{ref:function(e){t.bottomPoint=e}}))),i.a.createElement(ea.a,{span:7},i.a.createElement(c.a,{offsetTop:0},i.a.createElement("div",{style:{backgroundColor:"#ddd",padding:8}},i.a.createElement(ga.a.Search,{placeholder:"Search in plans ...",onChange:function(t){return e.searchValues(t.target.value)}})),i.a.createElement(Rt.a,{size:"small",style:{maxHeight:"100vh",overflowX:"scroll"},itemLayout:"horizontal",dataSource:this.state.filteredItems,renderItem:function(t){return i.a.createElement(Rt.a.Item,{onClick:function(){return e.add(t)}},i.a.createElement(Rt.a.Item.Meta,{title:t.name}))}}))))))}}]),t}(i.a.Component),ls=fa.a.create()(rs),ss=$t.a.confirm,cs=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={currentPatient:a.props.currentPatient,active_practiceId:a.props.active_practiceId,treatmentPlans:[],procedure_category:null,completedTreatmentPlans:[],incompletedTreatmentPlans:[],productMargin:[],loading:!0},a.loadTreatmentPlans=a.loadTreatmentPlans.bind(Object(f.a)(a)),a.loadProcedureCategory=a.loadProcedureCategory.bind(Object(f.a)(a)),a.editTreatmentPlanData=a.editTreatmentPlanData.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.loadTreatmentPlans(),this.loadProcedureCategory(),this.loadProductMargin()}},{key:"loadProductMargin",value:function(){var e=this;ht("product_margin/",function(t){e.setState({productMargin:t,loading:!1})},function(){e.setState({loading:!1})})}},{key:"loadTreatmentPlans",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=[],a=this,n=function(e){a.setState(function(t){return 1==e.current?{treatmentPlans:Object(wr.a)(e.results),next:e.next,loading:!1}:{treatmentPlans:[].concat(Object(wr.a)(t.treatmentPlans),Object(wr.a)(e.results)),next:e.next,loading:!1}}),e.results.forEach(function(e){e.is_completed||t.push(e)}),a.setState(function(e){return{incompletedTreatmentPlans:[].concat(Object(wr.a)(e.incompletedTreatmentPlans),t),loading:!1}})},i=function(){a.setState({loading:!1})},r={page:e,practice:this.props.active_practiceId,complete:!0};this.props.match.params.id&&(r.patient=this.props.match.params.id),this.props.showAllClinic&&this.props.match.params.id&&delete r.practice,ht(ke,n,i,r)}},{key:"loadProcedureCategory",value:function(){var e=this;ht(gt(J,[this.props.active_practiceId]),function(t){e.setState({procedure_category:t,loading:!1})},function(){e.setState({loading:!1})})}},{key:"editTreatmentPlanData",value:function(e){console.log("array record",e),this.setState({editTreatmentPlan:e});var t=this.props.match.params.id;this.props.history.push("/patient/"+t+"/emr/workdone/edit")}},{key:"deleteTreatmentPlans",value:function(e){var t=this;ss({title:"Are you sure to delete this item?",okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){var a={id:e.id,patient:e.patient.id,is_active:!1};dt(gt(ke,[t.props.match.params.id],null),a,function(e){bt(k,"Completed Procedure Deleted Successfully!"),t.loadTreatmentPlans()},function(){})},onCancel:function(){console.log("Cancel")}})}},{key:"loadPDF",value:function(e){ht(gt("patients/treatment_plan_pdf/?id=%s",[e]),function(e){e.report&&window.open(F+e.report)},function(){})}},{key:"render",value:function(){var e=this,t=this,a={};this.state.procedure_category&&this.state.procedure_category.forEach(function(e){a[e.id]=e.name});var n=[{title:"",key:"is_completed",render:function(e,t){return t.is_completed?i.a.createElement(Bt.a,{type:"check-circle",theme:"twoTone",style:{marginLeft:"8px",fontSize:"20px"}}):null}},{title:"Procedure",key:"procedure.name",dataIndex:"procedure.name"},{title:"Quantity",dataIndex:"quantity",initialValue:this.state.editFields?this.state.editFields.quantity:null,key:"quantity"},{title:"Discount",dataIndex:"discount",key:"discount"},{title:"Cost per  Unit",dataIndex:"cost",key:"cost"},{title:"Notes",dataIndex:"default_notes",key:"default_notes"}];return this.props.match.params.id?i.a.createElement("div",null,i.a.createElement(b.d,null,i.a.createElement(b.b,{exact:!0,path:"/patient/:id/emr/workdone/add",render:function(t){return i.a.createElement(ls,Object.assign({},e.state,t))}}),i.a.createElement(b.b,{exact:!0,path:"/patient/:id/emr/workdone/edit",render:function(t){return e.state.editTreatmentPlan?i.a.createElement(ls,Object.assign({},e.state,t,{editId:e.state.editTreatmentPlan.id})):i.a.createElement(b.a,{to:"/patient/"+e.props.match.params.id+"/emr/workdone"})}}),i.a.createElement(b.b,null,i.a.createElement("div",null,i.a.createElement(ia.a,{bodyStyle:{padding:0},title:this.state.currentPatient?this.state.currentPatient.user.first_name+" Completed Procedures":"Completed Procedures ",extra:i.a.createElement(Vt.a.Group,null,i.a.createElement(qt.b,{to:"/patient/"+this.props.match.params.id+"/emr/workdone/add"},i.a.createElement(Vt.a,null,i.a.createElement(Bt.a,{type:"plus"}),"Add")))}),this.state.treatmentPlans.map(function(a){return i.a.createElement(ia.a,{bodyStyle:{padding:0},style:{marginTop:15}},i.a.createElement("div",{style:{padding:16}},i.a.createElement("h4",null,a.date?ya()(a.date).format("ll"):null,i.a.createElement(At.a.Button,{size:"small",style:{float:"right"},overlay:i.a.createElement(Ht.a,null,i.a.createElement(Ht.a.Item,{key:"1",onClick:function(){return t.editTreatmentPlanData(a)},disabled:a.practice&&a.practice.id!=e.props.active_practiceId},i.a.createElement(Bt.a,{type:"edit"}),"Edit"),i.a.createElement(Ht.a.Item,{key:"2",onClick:function(){return t.deleteTreatmentPlans(a)},disabled:a.practice&&a.practice.id!=e.props.active_practiceId},i.a.createElement(Bt.a,{type:"delete"}),"Delete"),i.a.createElement(Ht.a.Divider,null),i.a.createElement(Ht.a.Item,{key:"3"},i.a.createElement(qt.b,{to:"/patient/"+a.patient+"/emr/timeline"},i.a.createElement(Bt.a,{type:"clock-circle"}),"\xa0 Patient Timeline")))},i.a.createElement("a",{onClick:function(){return e.loadPDF(a.id)}},i.a.createElement(Bt.a,{type:"printer"}))))),i.a.createElement(ta.a,{loading:e.state.loading,columns:n,dataSource:a.treatment_plans,footer:function(){return os(a)},pagination:!1,key:a.id}))}),i.a.createElement(Ei,{loaderFunction:function(){return e.loadTreatmentPlans(t.state.next)},loading:this.state.loading,hidden:!this.state.next}))))):i.a.createElement("div",null,i.a.createElement(ia.a,{bodyStyle:{padding:0},title:this.state.currentPatient?this.state.currentPatient.user.first_name+" Completed Procedures":"Completed Procedures ",extra:i.a.createElement(Vt.a.Group,null,i.a.createElement(Vt.a,{onClick:function(){return e.props.togglePatientListModal(!0)}},i.a.createElement(Bt.a,{type:"plus"}),"Add"))}),this.state.treatmentPlans.map(function(a){return i.a.createElement(ia.a,{bodyStyle:{padding:0},key:a.id,style:{marginTop:15}},i.a.createElement("div",{style:{padding:16}},i.a.createElement("h4",null,a.date?ya()(a.date).format("ll"):null,i.a.createElement(qt.b,{to:"/patient/"+a.patient.id+"/emr/workdone"},"\xa0\xa0 ",a.patient.user?a.patient.user.first_name:null," (ID: ",a.patient.id,")\xa0"),i.a.createElement("span",null,", ",a.patient.gender),i.a.createElement(At.a.Button,{size:"small",style:{float:"right"},overlay:i.a.createElement(Ht.a,null,i.a.createElement(Ht.a.Item,{key:"1",disabled:a.practice&&a.practice.id!=e.props.active_practiceId},i.a.createElement(qt.b,{to:"/patient/"+a.patient.id+"/emr/workdone/edit"},i.a.createElement(Bt.a,{type:"edit"}),"\xa0 Edit")),i.a.createElement(Ht.a.Item,{key:"2",onClick:function(){return t.deleteTreatmentPlans(a)},disabled:a.practice&&a.practice.id!=e.props.active_practiceId},i.a.createElement(Bt.a,{type:"delete"}),"Delete"),i.a.createElement(Ht.a.Divider,null),i.a.createElement(Ht.a.Item,{key:"3"},i.a.createElement(qt.b,{to:"/patient/"+a.patient.id+"/emr/timeline"},i.a.createElement(Bt.a,{type:"clock-circle"}),"\xa0 Patient Timeline")))},i.a.createElement(Bt.a,{type:"printer"})))),i.a.createElement(ta.a,{loading:e.state.loading,columns:n,dataSource:a.treatment_plans,footer:function(){return os(a)},pagination:!1,key:a.id}))}),i.a.createElement(Ei,{loaderFunction:function(){return e.loadTreatmentPlans(t.state.next)},loading:this.state.loading,hidden:!this.state.next}))}}]),t}(i.a.Component);function os(e){return e?i.a.createElement("div",null,e.doctor?i.a.createElement(Mt.a,{color:e.doctor?e.doctor.calendar_colour:null},i.a.createElement("b",null,"Completed by  "+e.doctor.user.first_name," ")):null,e.practice?i.a.createElement(Mt.a,{style:{float:"right"}},i.a.createElement(kl.a,{title:"Practice Name"},i.a.createElement("b",null,e.practice.name," "))):null):null}function us(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function ds(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?us(a,!0).forEach(function(t){Object(u.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):us(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var ms=oa.a.TabPane,ps=0,hs=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).addInstructions=function(e,t){a.setState(function(a){return{addInstructions:ds({},a.addInstructions,Object(u.a)({},e,!!t))}})},a.changeDurationUnits=function(e,t){a.setState(function(a){return{changeDurationUnits:ds({},a.changeDurationUnits,Object(u.a)({},e,!!t))}})},a.removeDrug=function(e){a.setState(function(t){return{formDrugList:Object(wr.a)(Object(as.remove)(t.formDrugList,function(t){return t._id!=e}))}})},a.removeLabs=function(e,t){a.setState(function(a){return{addedLabs:ds({},a.addedLabs,Object(u.a)({},t.id,!1)),formLabList:Object(wr.a)(Object(as.remove)(a.formLabList,function(t){return t._id!=e}))}})},a.addLabs=function(e){a.setState(function(t){var a=Math.random().toFixed(7);return console.log("LAb state",t),t.addedLabs[e.id]?(bt(O,"Item Already Added"),!1):{addedLabs:ds({},t.addedLabs,Object(u.a)({},e.id,!0)),formLabList:[].concat(Object(wr.a)(t.formLabList),[ds({},e,{_id:a})])}})},a.addTemplate=function(e){a.setState(function(t){Math.random().toFixed(7);if(t.addTemplate[e.id])return bt(O,"Item Already Added"),!1;var a=Object(wr.a)(t.formLabList),n=ds({},t.addedLabs);e.labs.forEach(function(e){var t=Math.random().toFixed(7);a.push(ds({},e,{_id:t})),n=ds({},n,Object(u.a)({},e.id,!0))});var i=Object(wr.a)(t.formDrugList),r=ds({},t.addedDrugs);return e.drug.forEach(function(t){var a=Math.random().toFixed(7);i.push(ds({},t,{_id:a,advice_data:e.advice_data})),n=ds({},r,Object(u.a)({},t.id,!0))}),{addedLabs:n,formLabList:a,addedDrugs:r,formDrugList:i}})},a.removeTemplates=function(e,t){a.setState(function(a){return{addTemplate:ds({},a.addTemplate,Object(u.a)({},t.id,!1)),formTemplateList:Object(wr.a)(Object(as.remove)(a.formTemplateList,function(t){return t._id!=e}))}})},a.handleSubmit=function(e){var t=Object(f.a)(a);e.preventDefault(),a.props.form.validateFields(function(e,a){if(console.log("value form",a),!e){var n=ds({},a,{drug:[],labs:[],advice_data:[],patient:t.props.match.params.id,practice:t.props.active_practiceId});t.state.formDrugList.forEach(function(e){console.log("advice search",e),e.dosage=a.does[e._id],e.duration_type=a.duration_unit[e._id],e.frequency=a.does_frequency[e._id],a.instruction&&(e.instruction=a.instruction[e._id]),a.food_time[e._id]?(e.after_food=!0,e.before_food=!1):(e.before_food=!0,e.after_food=!1),e.advice_data&&e.advice_data.map(function(e){n.advice_data.push(e.id)});var i={drug:e.id,name:e.name,dosage:e.dosage,frequency:e.frequency,duration_type:e.duration_type,instruction:e.instruction,before_food:e.before_food,after_food:e.after_food,advice_data:t.state.prescriptionTemplate.advice_data,is_active:!0};n.drug.push(i),console.log("item drug",e)}),t.state.formLabList.forEach(function(e){n.labs.push(e.id)});console.log("final",n),dt(gt(we,[t.props.active_practiceId]),n,function(e){},function(){})}})},a.handleAddFields=function(){var e=a.props.form,t=e.getFieldValue("keys").concat(ps++);e.setFieldsValue({keys:t})},a.remove=function(e){var t=a.props.form,n=t.getFieldValue("keys");1!==n.length&&t.setFieldsValue({keys:n.filter(function(t){return t!==e})})},a.onChange=function(e){a.setState({})},a.state={drugList:[],labList:[],formDrugList:[],formLabList:[],addInstructions:{},changeDurationUnits:{},addedDrugs:{},addedLabs:{},addTemplate:{},formTemplateList:[]},a.loadPrescriptionTemplate=a.loadPrescriptionTemplate.bind(Object(f.a)(a)),a.deletePrescriptionTemplate=a.deletePrescriptionTemplate.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.loadDrugList(),this.loadLabList(),this.loadPrescriptionTemplate()}},{key:"loadPrescriptionTemplate",value:function(){var e=this;console.log("template",e.state.prescriptionTemplate),ht(gt(we,[e.props.active_practiceId]),function(t){e.setState({prescriptionTemplate:t})},function(){})}},{key:"loadLabList",value:function(){var e=this;ht(gt(le,[e.props.active_practiceId]),function(t){e.setState({labList:t})},function(){})}},{key:"loadDrugList",value:function(){var e=this;ht(gt(re,[this.props.active_practiceId]),function(t){e.setState({drugList:t})},function(){})}},{key:"addDrug",value:function(e){this.setState(function(t){var a=Math.random().toFixed(7);return t.addedDrugs[e.id]?(bt(O,"Item Already Added"),!1):{addedDrugs:ds({},t.addedDrugs,Object(u.a)({},e.id,!0)),formDrugList:[].concat(Object(wr.a)(t.formDrugList),[ds({},e,{_id:a})])}})}},{key:"deletePrescriptionTemplate",value:function(e){var t=this,a={id:e,is_active:!1};dt(gt(we,[t.props.active_practiceId]),a,function(e){t.loadPrescriptionTemplate()},function(){})}},{key:"render",value:function(){var e=this,a=this,n={labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:12}}},r={wrapperCol:{xs:{span:24,offset:0},sm:{span:12,offset:4}}},l=this.props.form,s=l.getFieldDecorator,o=l.getFieldValue;l.getFieldsValue;s("keys",{initialValue:[]});var u=o("keys"),d=u.map(function(t,a){return i.a.createElement(fa.a.Item,Object.assign({},0===a?n:r,{label:0===a?"Advice":"",required:!1,key:t}),s("advice_data[".concat(t,"]"),{validateTrigger:["onChange","onBlur"]})(i.a.createElement(ga.a,{style:{width:"60%",marginRight:8}})),u.length>1?i.a.createElement(Bt.a,{className:"dynamic-delete-button",type:"minus-circle-o",onClick:function(){return e.remove(t)}}):null)}),m=[{title:"Drug Name",dataIndex:"name",key:"name",render:function(e){return i.a.createElement("h2",null,e)}},{title:"Dosage & Frequency",dataIndex:"dosage",key:"dosage",render:function(t,a){return i.a.createElement("div",null,i.a.createElement(fa.a.Item,{extra:i.a.createElement("span",null,"does(s)"),key:"does[".concat(a._id,"]")},s("does[".concat(a._id,"]"),{validateTrigger:["onChange","onBlur"]},{rules:[{message:"This field is required."}]})(i.a.createElement(pa.a,{min:0,size:"small"}))),i.a.createElement(fa.a.Item,{key:"does_frequency[".concat(a._id,"]")},s("does_frequency[".concat(a._id,"]"),{validateTrigger:["onChange","onBlur"],rules:[{message:"This field is required."}],initialValue:"twice daily"})(i.a.createElement(Lt.a,{size:"small",onChange:function(){return e.changeDurationUnits(a._id,!1)}},ln.map(function(e){return i.a.createElement(Lt.a.Option,{value:e.value},e.label)})))))}},{title:"Duration",dataIndex:"duration",key:"duration",render:function(t,a){return i.a.createElement("div",null,i.a.createElement(fa.a.Item,{key:"duration[".concat(a._id,"]")},s("duration[".concat(a._id,"]"),{validateTrigger:["onChange","onBlur"]},{rules:[{message:"This field is required."}]})(i.a.createElement(pa.a,{min:0,size:"small"}))),i.a.createElement(fa.a.Item,{key:"duration_unit[".concat(a._id,"]")},s("duration_unit[".concat(a._id,"]"),{validateTrigger:["onChange","onBlur"],rules:[{message:"This field is required."}],initialValue:"day(s)"})(i.a.createElement(Lt.a,{size:"small",onChange:function(){return e.changeDurationUnits(a._id,!1)}},rn.map(function(e){return i.a.createElement(Lt.a.Option,{value:e.value},e.label)})))))}},{title:"Instructions",dataIndex:"instruction",key:"instruction",render:function(t,a){return i.a.createElement("div",null,e.state.addInstructions[a._id]?i.a.createElement(fa.a.Item,{extra:i.a.createElement("a",{onClick:function(){return e.addInstructions(a._id,!1)}},"Remove Instructions"),key:"instruction[".concat(a._id,"]")},s("instruction[".concat(a._id,"]"),{validateTrigger:["onChange","onBlur"],rules:[{message:"This field is required."}]})(i.a.createElement(ga.a.TextArea,{min:0,placeholder:"Instructions...",size:"small"}))):i.a.createElement("a",{onClick:function(){return e.addInstructions(a._id,!0)}},"+ Add Instructions"))}},{title:"Timing",dataIndex:"food_time",key:"food_time",render:function(t,a){return i.a.createElement("div",null,i.a.createElement(fa.a.Item,{key:"food_time[".concat(a._id,"]")},s("food_time[".concat(a._id,"]"))(i.a.createElement(ha.a.Group,{onChange:e.onChange},i.a.createElement(ha.a,{value:1},"After Food"),i.a.createElement(ha.a,{value:0},"Before Food")))))}},{title:"",dataIndex:"action",key:"action",render:function(t,a){return i.a.createElement(fa.a.Item,null,i.a.createElement(Vt.a,{icon:"close",onClick:function(){return e.removeDrug(a._id)},type:"danger",shape:"circle",size:"small"}))}}],p=[{title:"Name",dataIndex:"name",key:"name",render:function(e,t){return i.a.createElement("span",null,i.a.createElement("b",null,e))}},{title:"Cost",dataIndex:"cost",key:"cost",render:function(e,t){return i.a.createElement("span",null,t.cost)}},{title:"Total",dataIndex:"total",key:"total",render:function(t,a){return i.a.createElement("span",null,t,i.a.createElement(Vt.a,{icon:"close",onClick:function(){return e.removeLabs(a._id,a)},type:"danger",shape:"circle",size:"small"}))}}];return i.a.createElement(ia.a,{title:"Prescriptions Template"},i.a.createElement(Zt.a,null,i.a.createElement(ea.a,{span:18},i.a.createElement(fa.a,{onSubmit:this.handleSubmit},i.a.createElement(fa.a.Item,Object.assign({},n,{label:"Template Name"}),s("name",{})(i.a.createElement(ga.a,null))),i.a.createElement(fa.a.Item,Object.assign({},n,{label:"Schedule"}),s("schedule",{})(i.a.createElement(pa.a,{min:1}))),i.a.createElement(ta.a,{pagination:!1,bordered:!1,columns:m,dataSource:this.state.formDrugList}),i.a.createElement(na.a,null," Lab Test"),i.a.createElement(ta.a,{pagination:!1,bordered:!1,columns:p,dataSource:this.state.formLabList}),i.a.createElement(na.a,null),d,i.a.createElement(fa.a.Item,r,i.a.createElement(Vt.a,{type:"dashed",onClick:this.handleAddFields,style:{width:"60%"}},i.a.createElement(Bt.a,{type:"plus"})," Add advice field")),i.a.createElement(c.a,{target:function(){return e.container}},i.a.createElement(Vt.a,{type:"primary",htmlType:"submit"},"Save")))),i.a.createElement(ea.a,{span:6},i.a.createElement(oa.a,{type:"card"},i.a.createElement(ms,{tab:"Drugs",key:"1"},i.a.createElement(Rt.a,{size:"small",itemLayout:"horizontal",dataSource:this.state.drugList,renderItem:function(t){return i.a.createElement(Rt.a.Item,{onClick:function(){return e.addDrug(t)}},i.a.createElement(Rt.a.Item.Meta,{title:t.name}))}})),i.a.createElement(ms,{tab:"Labs",key:"2"},i.a.createElement(Rt.a,{size:"small",itemLayout:"horizontal",dataSource:this.state.labList,renderItem:function(t){return i.a.createElement(Rt.a.Item,{onClick:function(){return e.addLabs(t)}},i.a.createElement(Rt.a.Item.Meta,{title:t.name}))}})),i.a.createElement(ms,{tab:"Template",key:"3"},i.a.createElement(Rt.a,{size:"small",itemLayout:"horizontal",dataSource:this.state.prescriptionTemplate,renderItem:function(t){return i.a.createElement(Rt.a.Item,{onConfirm:function(){return a.deletePrescriptionTemplate(t.id)}},i.a.createElement(Rt.a.Item.Meta,{onClick:function(){return e.addTemplate(t)},title:t.name}),i.a.createElement(aa.a,{title:"Are you sure delete this item?",onConfirm:function(){return a.deletePrescriptionTemplate(t.id)},okText:"Yes",cancelText:"No"},i.a.createElement("a",null,"Delete")))}})))),i.a.createElement(b.d,null,i.a.createElement(b.b,{exact:!0,path:"/patient/:id/prescriptions/template/add",renderRoute:function(a){return i.a.createElement(t,Object.assign({},e.state,a))}}))))}}]),t}(i.a.Component),fs=fa.a.create()(hs);function gs(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function bs(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?gs(a,!0).forEach(function(t){Object(u.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):gs(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var ys=oa.a.TabPane,Es=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).selectDoctor=function(e){a.setState({selectedDoctor:e})},a.selectedDate=function(e){a.setState({selectedDate:e})},a.addInstructions=function(e,t){a.setState(function(a){return{addInstructions:bs({},a.addInstructions,Object(u.a)({},e,!!t))}})},a.changeDurationUnits=function(e,t){a.setState(function(a){return{changeDurationUnits:bs({},a.changeDurationUnits,Object(u.a)({},e,!!t))}})},a.removeDrug=function(e){a.setState(function(t){return{formDrugList:Object(wr.a)(Object(as.remove)(t.formDrugList,function(t){return t._id!=e}))}})},a.removeLabs=function(e,t){a.setState(function(a){return{addedLabs:bs({},a.addedLabs,Object(u.a)({},t.id,!1)),formLabList:Object(wr.a)(Object(as.remove)(a.formLabList,function(t){return t._id!=e}))}})},a.addLabs=function(e){a.setState(function(t){var a=Math.random().toFixed(7);return t.addedLabs[e.id]?(bt(O,"Item Already Added"),!1):{addedLabs:bs({},t.addedLabs,Object(u.a)({},e.id,!0)),formLabList:[].concat(Object(wr.a)(t.formLabList),[bs({},e,{_id:a})])}})},a.addTemplate=function(e){a.setState(function(t){if(t.addTemplate[e.id])return bt(O,"Item Already Added"),!1;var a=Object(wr.a)(t.formLabList),n=bs({},t.addedLabs);e.labs.forEach(function(e){var t=Math.random().toFixed(7);a.push(bs({},e,{_id:t})),n=bs({},n,Object(u.a)({},e.id,!0))});var i=Object(wr.a)(t.formDrugList),r=bs({},t.addedDrugs);return e.drugs.forEach(function(t){var a=Math.random().toFixed(7);i.push(bs({},t,{_id:a,advice_data:e.advice_data})),n=bs({},r,Object(u.a)({},t.id,!0))}),{addedLabs:n,formLabList:a,addedDrugs:r,formDrugList:i}})},a.removeTemplates=function(e,t){a.setState(function(a){return{addTemplate:bs({},a.addTemplate,Object(u.a)({},t.id,!1)),formTemplateList:Object(wr.a)(Object(as.remove)(a.formTemplateList,function(t){return t._id!=e}))}})},a.handleSubmit=function(e){var t=Object(f.a)(a);e.preventDefault(),a.props.form.validateFields(function(e,a){if(e)console.log(e);else{var n={drugs:[],labs:[],patient:parseInt(t.props.match.params.id),practice:t.props.active_practiceId,doctor:t.state.selectedDoctor?t.state.selectedDoctor.id:null,date:t.state.selectedDate?t.state.selectedDate.format("YYYY-MM-DD"):null,advice_data:[]};t.props.editId&&(n.id=t.props.editId),t.state.formDrugList.forEach(function(e){e.dosage=a.dosage[e._id],e.duration_type=a.duration_type[e._id],e.duration=a.duration[e._id],e.frequency=a.frequency[e._id],a.instruction&&(e.instruction=a.instruction[e._id]),a.food_time[e._id]?(e.after_food=!0,e.before_food=!1):(e.before_food=!0,e.after_food=!1);var t={inventory:e.id,name:e.name,dosage:e.dosage,frequency:e.frequency,duration_type:e.duration_type,duration:e.duration,instruction:e.instruction,before_food:e.before_food,after_food:e.after_food,is_active:!0};n.drugs.push(t),console.log("item drug",e)}),t.state.formLabList.forEach(function(e){n.labs.push(e.id)});dt(gt(pe,[t.props.match.params.id]),n,function(e){t.props.loadData&&t.props.loadData();var a="/patient/"+t.props.match.params.id+"/emr/prescriptions";t.props.history.push(a)},function(){})}})},a.onChange=function(e){a.setState({})},a.searchValues=function(e,t){var n=Object(f.a)(a);a.setState(function(a){var n=bs({},a.searchStrings);return n[e]=t,{searchStrings:n}},function(){"Drugs"==e?n.loadDrugList():n.filterValues(e)})},a.filterValues=function(e){a.setState(function(t){var a=[];return t.items[e]&&(t.searchStrings[e]?t.items[e].forEach(function(n){n.name&&n.name.toString().toLowerCase().includes(t.searchStrings[e].toLowerCase())&&a.push(n)}):a=t.items[e]),{filteredItems:bs({},t.filteredItems,Object(u.a)({},e,a))}})},a.state={items:{},filteredItems:{},formDrugList:[],formLabList:[],addInstructions:{},changeDurationUnits:{},addedDrugs:{},addedLabs:{},addTemplate:{},formTemplateList:[],practiceDoctors:[],selectedDoctor:{},selectedDate:ya()(),searchStrings:{}},a.loadPrescriptionTemplate=a.loadPrescriptionTemplate.bind(Object(f.a)(a)),a.deletePrescriptionTemplate=a.deletePrescriptionTemplate.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.loadDrugList(),this.loadLabList(),this.loadPrescriptionTemplate(),Ii(this),this.props.editId&&this.setState(function(t){var a=[],n={},i={};e.props.editPrescription.drugs.forEach(function(e){var t=Math.random();a.push(bs({},e,{_id:t,food_time:e.after_food?1:0})),n[t]=!!e.instruction});var r=[];return e.props.editPrescription.labs.forEach(function(e){r.push(bs({},e,{_id:Math.random()})),i[e.id]=!0}),bs({},e.props.editPrescription,{formDrugList:[].concat(a),formLabList:[].concat(r),addInstructions:bs({},n),addedLabs:bs({},i),selectedDoctor:e.props.editPrescription.doctor,selectedDate:ya()(e.props.editPrescription.date).isValid()?ya()(e.props.editPrescription.date):ya()()})})}},{key:"loadPrescriptionTemplate",value:function(){var e=this;ht(gt(we,[e.props.active_practiceId]),function(t){e.setState(function(e){var a=bs({},e.items);return{items:bs({},a,{Template:t}),filteredItems:bs({},e.filteredItems,{Template:t})}})},function(){})}},{key:"loadLabList",value:function(){var e=this;ht(gt(le,[e.props.active_practiceId]),function(t){e.setState(function(e){var a=bs({},e.items);return{items:bs({},a,{Labs:t}),filteredItems:bs({},e.filteredItems,{Labs:t})}})},function(){})}},{key:"loadDrugList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this,a=function(e){t.setState(function(t){var a=bs({},t.items);return{items:bs({},a,{Drugs:e.results}),filteredItems:bs({},t.filteredItems,{Drugs:e.results})}})},n=function(){},i={practice:this.props.active_practiceId,item_type:Ra,page:e};t.state.searchStrings.Drugs&&(i.item_name=t.state.searchStrings.Drugs),ht(Ge,a,n,i)}},{key:"addDrug",value:function(e){this.setState(function(t){var a=Math.random().toFixed(7);return{addedDrugs:bs({},t.addedDrugs,Object(u.a)({},e.id,!0)),formDrugList:[].concat(Object(wr.a)(t.formDrugList),[bs({},e,{_id:a})])}})}},{key:"deletePrescriptionTemplate",value:function(e){var t=this,a={id:e,is_active:!1};dt(gt(we,[t.props.active_practiceId]),a,function(e){t.loadPrescriptionTemplate()},function(){})}},{key:"render",value:function(){var e=this,t=this,a=this.props.form,n=a.getFieldDecorator,r=(a.getFieldValue,a.getFieldsValue,[{title:"Medicine Name",dataIndex:"name",key:"name",render:function(e){return i.a.createElement("h2",null,e)}},{title:"Dosage & Frequency",dataIndex:"dosage",key:"dosage",render:function(t,a){return i.a.createElement("div",null,i.a.createElement(fa.a.Item,{extra:i.a.createElement("span",null,"does(s)"),key:"dosage[".concat(a._id,"]")},n("dosage[".concat(a._id,"]"),{validateTrigger:["onChange","onBlur"],rules:[{message:"This field is required."}],initialValue:a.dosage,min:0})(i.a.createElement(pa.a,{size:"small"}))),i.a.createElement(fa.a.Item,{key:"frequency[".concat(a._id,"]")},n("frequency[".concat(a._id,"]"),{validateTrigger:["onChange","onBlur"],rules:[{message:"This field is required."}],initialValue:a.frequency||ln[0].value})(i.a.createElement(Lt.a,{size:"small",onChange:function(){return e.changeDurationUnits(a._id,!1)}},ln.map(function(e){return i.a.createElement(Lt.a.Option,{value:e.value},e.label)})))))}},{title:"Duration",dataIndex:"duration",key:"duration",render:function(t,a){return i.a.createElement("div",null,i.a.createElement(fa.a.Item,{key:"duration[".concat(a._id,"]")},n("duration[".concat(a._id,"]"),{validateTrigger:["onChange","onBlur"],rules:[{message:"This field is required."}],initialValue:a.duration,min:0})(i.a.createElement(pa.a,{size:"small"}))),i.a.createElement(fa.a.Item,{key:"duration_type[".concat(a._id,"]")},n("duration_type[".concat(a._id,"]"),{validateTrigger:["onChange","onBlur"],rules:[{message:"This field is required."}],initialValue:a.duration_type||rn[0].value})(i.a.createElement(Lt.a,{size:"small",onChange:function(){return e.changeDurationUnits(a._id,!1)}},rn.map(function(e){return i.a.createElement(Lt.a.Option,{value:e.value},e.label)})))))}},{title:"Instructions",dataIndex:"instruction",key:"instruction",render:function(t,a){return i.a.createElement("div",null,e.state.addInstructions[a._id]?i.a.createElement(fa.a.Item,{extra:i.a.createElement("a",{onClick:function(){return e.addInstructions(a._id,!1)}},"Remove Instructions"),key:"instruction[".concat(a._id,"]")},n("instruction[".concat(a._id,"]"),{validateTrigger:["onChange","onBlur"],rules:[{message:"This field is required."}],initialValue:a.instruction})(i.a.createElement(ga.a.TextArea,{placeholder:"Instructions...",size:"small"}))):i.a.createElement("a",{onClick:function(){return e.addInstructions(a._id,!0)}},"+ Add Instructions"))}},{title:"Timing",dataIndex:"food_time",key:"food_time",render:function(t,a){return i.a.createElement("div",null,i.a.createElement(fa.a.Item,{key:"food_time[".concat(a._id,"]")},n("food_time[".concat(a._id,"]"),{initialValue:a.food_time||0})(i.a.createElement(ha.a.Group,{onChange:e.onChange},i.a.createElement(ha.a,{value:1},"after"),i.a.createElement(ha.a,{value:0},"before")))))}},{title:"",dataIndex:"action",key:"action",render:function(t,a){return i.a.createElement(fa.a.Item,null,i.a.createElement(Vt.a,{icon:"close",onClick:function(){return e.removeDrug(a._id)},type:"danger",shape:"circle",size:"small"}))}}]),l=[{title:"Name",dataIndex:"name",key:"name",render:function(e,t){return i.a.createElement("span",null,i.a.createElement("b",null,e))}},{title:"Cost",dataIndex:"cost",key:"cost",render:function(e,t){return i.a.createElement("span",null,t.cost)}},{title:"Total",dataIndex:"total",key:"total",render:function(t,a){return i.a.createElement("span",null,t,i.a.createElement(Vt.a,{icon:"close",onClick:function(){return e.removeLabs(a._id,a)},type:"danger",shape:"circle",size:"small"}))}}];return i.a.createElement(ia.a,{title:"Prescriptions"},i.a.createElement(Zt.a,null,i.a.createElement(ea.a,{span:18},i.a.createElement(fa.a,{onSubmit:this.handleSubmit},i.a.createElement(ta.a,{pagination:!1,bordered:!1,columns:r,dataSource:this.state.formDrugList}),i.a.createElement(na.a,null," Lab Test"),i.a.createElement(ta.a,{pagination:!1,bordered:!1,columns:l,dataSource:this.state.formLabList}),i.a.createElement(c.a,{offsetBottom:0},i.a.createElement(ia.a,null,i.a.createElement("span",null,"by \xa0\xa0"),i.a.createElement(At.a,{placement:"topCenter",overlay:i.a.createElement(Ht.a,null,this.state.practiceDoctors.map(function(t){return i.a.createElement(Ht.a.Item,{key:"0"},i.a.createElement("a",{onClick:function(){return e.selectDoctor(t)}},t.user.first_name))})),trigger:["click"]},i.a.createElement("a",{className:"ant-dropdown-link",href:"#"},i.a.createElement("b",null,this.state.selectedDoctor.user?this.state.selectedDoctor.user.first_name:"No DOCTORS Found"))),i.a.createElement("span",null," \xa0\xa0on\xa0\xa0"),i.a.createElement(ma.a,{value:this.state.selectedDate,onChange:function(t){return e.selectedDate(t)},format:"DD-MM-YYYY"}),i.a.createElement(Vt.a,{type:"primary",htmlType:"submit",style:{margin:5,float:"right"}},"Save"),t.props.history?i.a.createElement(Vt.a,{style:{margin:5,float:"right"},onClick:function(){return t.props.history.goBack()}},"Cancel"):null)))),i.a.createElement(ea.a,{span:6},i.a.createElement(oa.a,{type:"card"},i.a.createElement(ys,{tab:"Medicine",key:"1"},i.a.createElement("div",{style:{backgroundColor:"#ddd",padding:8}},i.a.createElement(ga.a.Search,{key:"Drugs",placeholder:"Search in Medicine...",onChange:function(t){return e.searchValues("Drugs",t.target.value)}})),i.a.createElement(Rt.a,{size:"small",itemLayout:"horizontal",dataSource:this.state.filteredItems.Drugs,renderItem:function(t){return i.a.createElement(Rt.a.Item,{onClick:function(){return e.addDrug(t)},actions:t.maintain_inventory?null:[i.a.createElement(Mt.a,null,"Not Sold")]},i.a.createElement(Rt.a.Item.Meta,{title:t.name}))}})),i.a.createElement(ys,{tab:"Labs",key:"2"},i.a.createElement("div",{style:{backgroundColor:"#ddd",padding:8}},i.a.createElement(ga.a.Search,{key:"Labs",placeholder:"Search in Labs...",onChange:function(t){return e.searchValues("Labs",t.target.value)}})),i.a.createElement(Rt.a,{size:"small",itemLayout:"horizontal",dataSource:this.state.filteredItems.Labs,renderItem:function(t){return i.a.createElement(Rt.a.Item,{onClick:function(){return e.addLabs(t)}},i.a.createElement(Rt.a.Item.Meta,{title:t.name}))}})),i.a.createElement(ys,{tab:"Template",key:"3"},i.a.createElement("div",null,i.a.createElement(qt.b,{to:"/patient/"+this.props.match.params.id+"/prescriptions/template/add"},i.a.createElement(Vt.a,{type:"primary",block:!0,size:"small"},i.a.createElement(Bt.a,{type:"plus"}),"\xa0Add Template"))),i.a.createElement(na.a,{style:{margin:0}}),i.a.createElement("div",{style:{backgroundColor:"#ddd",padding:8}},i.a.createElement(ga.a.Search,{key:"Template",placeholder:"Search in Template...",onChange:function(t){return e.searchValues("Template",t.target.value)}})),i.a.createElement(Rt.a,{size:"small",itemLayout:"horizontal",dataSource:this.state.filteredItems.Template,renderItem:function(a){return i.a.createElement(Rt.a.Item,{onConfirm:function(){return t.deletePrescriptionTemplate(a.id)}},i.a.createElement(Rt.a.Item.Meta,{onClick:function(){return e.addTemplate(a)},title:a.name}),i.a.createElement(aa.a,{title:"Are you sure delete this item?",onConfirm:function(){return t.deletePrescriptionTemplate(a.id)},okText:"Yes",cancelText:"No"},i.a.createElement("a",null,"Delete")))}})))),i.a.createElement(b.d,null,i.a.createElement(b.b,{exact:!0,path:"/patient/:id/prescriptions/template/add",render:function(t){return i.a.createElement(fs,Object.assign({},e.state,t))}}))))}}]),t}(i.a.Component),vs=fa.a.create()(Es),_s=$t.a.confirm,ks=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={currentPatient:a.props.currentPatient,active_practiceId:a.props.active_practiceId,prescription:[],drug_catalog:null,editPrescription:null,loading:!0},a.loadPrescriptions=a.loadPrescriptions.bind(Object(f.a)(a)),a.loadDrugCatalog=a.loadDrugCatalog.bind(Object(f.a)(a)),a.editPrescriptionData=a.editPrescriptionData.bind(Object(f.a)(a)),a.deletePrescriptions=a.deletePrescriptions.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.loadPrescriptions(),this.loadDrugCatalog()}},{key:"loadPrescriptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this;this.setState({loading:!0});var a=function(e){t.setState({prescription:e.results,nextPrescriptionPage:e.next,loading:!1})},n=function(){t.setState({loading:!1})},i={page:e,practice:this.props.active_practiceId};this.props.match.params.id&&(i.patient=this.props.match.params.id),this.props.showAllClinic&&this.props.match.params.id&&delete i.practice,ht(pe,a,n,i)}},{key:"loadPDF",value:function(e){ht(gt("patients/prescriptions_pdf/?id=%s",[e]),function(e){e.report&&window.open(F+e.report)},function(){})}},{key:"loadDrugCatalog",value:function(){var e=this;ht(gt(re,[this.props.active_practiceId]),function(t){e.setState({drug_catalog:t})},function(){e.setState({})})}},{key:"editPrescriptionData",value:function(e){var t=this;this.setState({editPrescription:e},function(){t.props.history.push("/patient/"+e.patient+"/emr/prescriptions/edit")})}},{key:"deletePrescriptions",value:function(e){var t=this;_s({title:"Are you sure to delete this item?",okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){var a={id:e.id,patient:e.patient,is_active:!1};dt(gt(pe,[t.props.match.params.id]),a,function(e){t.loadPrescriptions()},function(){})},onCancel:function(){console.log("Cancel")}})}},{key:"render",value:function(){var e=this,t={};this.state.drug_catalog&&this.state.drug_catalog.forEach(function(e){t[e.id]=e.name+","+e.strength});var a=this,n=[{title:"Drug",key:"name",dataIndex:"name"},{title:"Frequency",dataIndex:"frequency",key:"frequency",render:function(e,t){return i.a.createElement("span",null,t.dosage,"\xa0",t.frequency)}},{title:"Duration",dataIndex:"duration",key:"duration",render:function(e,t){return i.a.createElement("span",null,e,"\xa0",t.duration_type)}},{title:"Instruction",dataIndex:"instruction",key:"instruction",render:function(e,t){return i.a.createElement("span",null,t.before_food?i.a.createElement(Mt.a,null,"before food "):null,t.after_food?i.a.createElement(Mt.a,null,"after food"):null,e)}}];return this.props.match.params.id?i.a.createElement("div",null,i.a.createElement(b.d,null,i.a.createElement(b.b,{exact:!0,path:"/patient/:id/emr/prescriptions/add",render:function(t){return i.a.createElement(vs,Object.assign({},e.state,{loadData:e.loadPrescriptions},t))}}),i.a.createElement(b.b,{exact:!0,path:"/patient/:id/emr/prescriptions/edit",render:function(t){return a.state.editPrescription?i.a.createElement(vs,Object.assign({},e.state,t,{loadData:e.loadPrescriptions,editId:a.state.editPrescription.id})):i.a.createElement(b.a,{to:"/patient/"+a.props.match.params.id+"/emr/prescriptions"})}}),i.a.createElement(b.b,null,i.a.createElement("div",null,i.a.createElement(ia.a,{bodyStyle:{padding:0},title:this.state.currentPatient?this.state.currentPatient.user.first_name+" Prescriptions":"Prescriptions",extra:i.a.createElement(Vt.a.Group,{style:{float:"right"}},i.a.createElement(qt.b,{to:"/patient/"+this.props.match.params.id+"/emr/prescriptions/add"},i.a.createElement(Vt.a,{type:"primary"},i.a.createElement(Bt.a,{type:"plus"}),"Add")))}),this.state.prescription.map(function(t){return i.a.createElement("div",null,i.a.createElement(ia.a,{style:{marginTop:10},bodyStyle:{padding:0},title:i.a.createElement("small",null,t.date?ya()(t.date).format("ll"):null),extra:i.a.createElement(At.a.Button,{size:"small",style:{float:"right"},overlay:i.a.createElement(Ht.a,null,i.a.createElement(Ht.a.Item,{key:"1",onClick:function(){return a.editPrescriptionData(t)},disabled:t.practice&&t.practice.id!=a.props.active_practiceId},i.a.createElement(Bt.a,{type:"edit"}),"Edit"),i.a.createElement(Ht.a.Item,{key:"2",onClick:function(){return a.deletePrescriptions(t)},disabled:t.practice&&t.practice.id!=a.props.active_practiceId},i.a.createElement(Bt.a,{type:"delete"}),"Delete"),i.a.createElement(Ht.a.Divider,null),i.a.createElement(Ht.a.Item,{key:"3"},i.a.createElement(qt.b,{to:"/patient/"+t.patient+"/emr/timeline"},i.a.createElement(Bt.a,{type:"clock-circle"}),"\xa0 Patient Timeline")))},i.a.createElement("a",{onClick:function(){return e.loadPDF(t.id)}},i.a.createElement(Bt.a,{type:"printer"})))},i.a.createElement(ta.a,{columns:n,dataSource:t.drugs,pagination:!1,footer:function(){return Os(t)},key:t.id})))}),i.a.createElement(Tt.a,{spinning:this.state.loading},i.a.createElement(Zt.a,null)),i.a.createElement(Ei,{loading:this.state.loading,loaderFunction:function(){return e.loadPrescriptions(e.state.nextPrescriptionPage)},hidden:!this.state.nextPrescriptionPage}))))):i.a.createElement("div",null,i.a.createElement(ia.a,{bodyStyle:{padding:0},title:this.state.currentPatient?this.state.currentPatient.user.first_name+" Prescriptions":"Prescriptions",extra:i.a.createElement(Vt.a.Group,{style:{float:"right"}},i.a.createElement(Vt.a,{type:"primary",onClick:function(){return e.props.togglePatientListModal(!0)}},i.a.createElement(Bt.a,{type:"plus"}),"Add"))}),this.state.prescription.map(function(t){return i.a.createElement("div",{key:t.id},i.a.createElement(ia.a,{style:{marginTop:10},bodyStyle:{padding:0},title:i.a.createElement("small",null,t.date?ya()(t.date).format("ll"):null,i.a.createElement(qt.b,{to:"/patient/"+t.patient.id+"/emr/prescriptions"},"\xa0\xa0 ",t.patient.user?t.patient.user.first_name:null," (ID: ",t.patient.id,")\xa0"),i.a.createElement("span",null,", ",t.patient.gender)),extra:i.a.createElement(At.a.Button,{size:"small",style:{float:"right"},overlay:i.a.createElement(Ht.a,null,i.a.createElement(Ht.a.Item,{key:"1",onClick:function(){return a.editPrescriptionData(t)},disabled:t.practice&&t.practice.id!=a.props.active_practiceId},i.a.createElement(Bt.a,{type:"edit"}),"Edit"),i.a.createElement(Ht.a.Item,{key:"2",onClick:function(){return a.deletePrescriptions(t)},disabled:t.practice&&t.practice.id!=a.props.active_practiceId},i.a.createElement(Bt.a,{type:"delete"}),"Delete"),i.a.createElement(Ht.a.Divider,null),i.a.createElement(Ht.a.Item,{key:"3"},i.a.createElement(qt.b,{to:"/patient/"+t.patient+"/emr/timeline"},i.a.createElement(Bt.a,{type:"clock-circle"}),"\xa0 Patient Timeline")))},i.a.createElement("a",{onClick:function(){return e.loadPDF(t.id)}},i.a.createElement(Bt.a,{type:"printer"})))},i.a.createElement(ta.a,{columns:n,dataSource:t.drugs,pagination:!1,footer:function(){return Os(t)},key:t.id})))}),i.a.createElement(Tt.a,{spinning:this.state.loading},i.a.createElement(Zt.a,null)),i.a.createElement(Ei,{loading:this.state.loading,loaderFunction:function(){return e.loadPrescriptions(e.state.nextPrescriptionPage)},hidden:!this.state.nextPrescriptionPage}))}}]),t}(i.a.Component);function Os(e){return e?i.a.createElement("div",null,e.doctor?i.a.createElement(kl.a,{title:"Doctor"},i.a.createElement(Mt.a,{color:e.doctor?e.doctor.calendar_colour:null},i.a.createElement("b",null,"prescribed by  "+e.doctor.user.first_name," "))):null,e.practice?i.a.createElement(Mt.a,{style:{float:"right"}},i.a.createElement(kl.a,{title:"Practice Name"},i.a.createElement("b",null,e.practice.name," "))):null,e.labs.length?i.a.createElement("div",null,"+",e.labs.length,"\xa0Lab Orders"):null):null}function Ps(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function js(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ps(a,!0).forEach(function(t){Object(u.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ps(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Ds=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).calculateItem=function(e){var t=a.props.form.getFieldsValue;console.log(t()),a.setState(function(e){Object(wr.a)(e.tableFormValues).forEach(function(e){})})},a.addNotes=function(e,t){a.setState(function(a){return{addNotes:js({},a.addNotes,Object(u.a)({},e,!!t))}})},a.removeTreatment=function(e){a.setState(function(t){return{tableFormValues:Object(wr.a)(Object(as.remove)(t.tableFormValues,function(t){return t._id!=e}))}})},a.add=function(e){var t=Object(f.a)(a);a.setState(function(t){var a=Math.random().toFixed(7);return{addNotes:js({},t.addNotes,Object(u.a)({},a,!!e.default_notes)),tableFormValues:[].concat(Object(wr.a)(t.tableFormValues),[js({},e,{_id:a})])}},function(){t.bottomPoint&&t.bottomPoint.scrollIntoView({behavior:"smooth"})})},a.selectDoctor=function(e){a.setState({selectedDoctor:e})},a.selectedDate=function(e){a.setState({selectedDate:e})},a.handleSubmit=function(e){var t=Object(f.a)(a);e.preventDefault(),a.props.form.validateFields(function(e,a){if(!e){console.log("Received values of form: ",a);var n={treatment_plans:[],patient:t.props.match.params.id,doctor:t.state.selectedDoctor.id,date:t.state.selectedDate&&ya()(t.state.selectedDate).isValid()?t.state.selectedDate.format("YYYY-MM-DD"):null,practice:t.props.active_practiceId};t.props.editId&&(n.id=t.props.editTreatmentPlan.id),t.state.tableFormValues.forEach(function(e){console.log(e),e.quantity=a.quantity[e._id],e.cost=a.cost[e._id],e.discount=a.discount[e._id],a.notes&&(e.notes=a.notes[e._id]);var t={procedure:e.id,cost:e.cost,quantity:e.quantity,margin:e.margin,default_notes:e.default_notes,is_active:!0,is_completed:e.is_completed||!1,discount:e.discount,discount_type:"%"};n.treatment_plans.push(t)});dt(gt(ke,[t.props.match.params.id]),n,function(e){bt("Inventory updated successfully"),t.props.loadData&&t.props.loadData();var a="/patient/"+t.props.match.params.id+"/emr/plans";t.props.history.push(a)},function(){})}})},a.searchValues=function(e){var t=Object(f.a)(a);return a.setState(function(t){return{searchStrings:e}},function(){t.filterValues()}),!1},a.filterValues=function(){a.setState(function(e){var t=[];return e.procedure_category&&(e.searchStrings?e.procedure_category.forEach(function(a){a.name.toString().toLowerCase().includes(e.searchStrings.toLowerCase())&&t.push(a)}):t=e.procedure_category),{filteredItems:t}})},a.state={loadingProcedures:!0,procedure_category:[],tableFormValues:[],addNotes:{},practiceDoctors:[],selectedDoctor:{},selectedDate:ya()()},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.props.editId&&this.setState(function(e){var t=[];return this.props.editTreatmentPlan.treatment_plans.forEach(function(e){var a=Math.random().toFixed(7);t.push(js({},e,{},e.procedure,{_id:a}))}),js({},this.props.editTreatmentPlan,{tableFormValues:t,selectedDate:ya()(this.props.editTreatmentPlan.date),selectedDoctor:this.props.editTreatmentPlan.doctor})}),this.loadProcedures(),Ii(this)}},{key:"loadProcedures",value:function(){var e=this;ht(gt(J,[this.props.active_practiceId]),function(t){e.setState({procedure_category:t,loadingProcedures:!1,filteredItems:t})},function(){e.setState({loadingProcedures:!1})})}},{key:"render",value:function(){var e=this,t=this,a=this.props.form,n=a.getFieldDecorator,r=(a.getFieldValue,a.getFieldsValue,{labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}}),l=[{title:"Treatments",dataIndex:"name",key:"name",render:function(t,a){return i.a.createElement("span",null,i.a.createElement("b",null,t),i.a.createElement("br",null),e.state.addNotes[a._id]?i.a.createElement(fa.a.Item,Object.assign({key:"default_notes[".concat(a._id,"]")},r),n("default_notes[".concat(a._id,"]"),{validateTrigger:["onChange","onBlur"],rules:[{message:"This field is required."}],initialValue:a.default_notes})(i.a.createElement(ga.a.TextArea,{min:0,placeholder:"Notes..."}))):i.a.createElement("a",{onClick:function(){return e.addNotes(a._id,!0)}},"+ Add Note"))}},{title:"Quantity",dataIndex:"quantity",key:"quantity",render:function(t,a){return i.a.createElement(fa.a.Item,Object.assign({key:"quantity[".concat(a._id,"]")},r),n("quantity[".concat(a._id,"]"),{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"This field is required."}],initialValue:1})(i.a.createElement(pa.a,{min:0,placeholder:"Quantity",size:"small",onChange:function(){return e.calculateItem(a._id)}})))}},{title:"Cost",dataIndex:"cost",key:"cost",render:function(t,a){return i.a.createElement(fa.a.Item,Object.assign({key:"cost[".concat(a._id,"]")},r),n("cost[".concat(a._id,"]"),{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"This field is required."}],initialValue:a.cost})(i.a.createElement(pa.a,{min:0,placeholder:"Cost",size:"small",onChange:function(){return e.calculateItem(a._id)}})))}},{title:"Discount",dataIndex:"discount",key:"discount",render:function(t,a){return i.a.createElement(fa.a.Item,Object.assign({key:"discount[".concat(a._id,"]")},r),n("discount[".concat(a._id,"]"),{validateTrigger:["onChange","onBlur"],rules:[{message:"This field is required."}]})(i.a.createElement(pa.a,{min:0,placeholder:"Discount",size:"small",onChange:function(){return e.calculateItem(a._id)}}))," %")}},{title:"Total",dataIndex:"total",key:"total",render:function(t,a){return i.a.createElement("span",null,t,i.a.createElement(Vt.a,{icon:"close",onClick:function(){return e.removeTreatment(a._id)},type:"danger",shape:"circle",size:"small"}))}}];return i.a.createElement("div",null,i.a.createElement(ia.a,{title:"Treatment Plans"},i.a.createElement(Zt.a,null,i.a.createElement(ea.a,{span:17},i.a.createElement(fa.a,{onSubmit:this.handleSubmit},i.a.createElement(ta.a,{pagination:!1,bordered:!0,dataSource:this.state.tableFormValues,columns:l}),i.a.createElement(c.a,{offsetBottom:0},i.a.createElement(ia.a,null,i.a.createElement("span",null,"by \xa0\xa0"),i.a.createElement(At.a,{placement:"topCenter",overlay:i.a.createElement(Ht.a,null,this.state.practiceDoctors.map(function(t){return i.a.createElement(Ht.a.Item,{key:"0"},i.a.createElement("a",{onClick:function(){return e.selectDoctor(t)}},t.user.first_name))})),trigger:["click"]},i.a.createElement("a",{className:"ant-dropdown-link",href:"#"},i.a.createElement("b",null,this.state.selectedDoctor.user?this.state.selectedDoctor.user.first_name:"No DOCTORS Found"))),i.a.createElement("span",null," \xa0\xa0on\xa0\xa0"),i.a.createElement(ma.a,{value:this.state.selectedDate,onChange:function(t){return e.selectedDate(t)},format:"DD-MM-YYYY",allowClear:!1}),i.a.createElement(fa.a.Item,Object.assign({},{labelCol:{xs:{span:24},sm:{span:24}},wrapperCol:{xs:{span:24},sm:{span:24}}},{style:{marginBottom:0,float:"right"}}),i.a.createElement(Vt.a,{type:"primary",htmlType:"submit",style:{margin:5}},"Save Treatment Plan"),t.props.history?i.a.createElement(Vt.a,{style:{margin:5,float:"right"},onClick:function(){return t.props.history.goBack()}},"Cancel"):null))),i.a.createElement("div",{ref:function(e){t.bottomPoint=e}}))),i.a.createElement(ea.a,{span:7},i.a.createElement(c.a,{offsetTop:0},i.a.createElement("div",{style:{backgroundColor:"#ddd",padding:8}},i.a.createElement(ga.a.Search,{placeholder:"Search in plans ...",onChange:function(t){return e.searchValues(t.target.value)}})),i.a.createElement(Rt.a,{size:"small",style:{maxHeight:"100vh",overflowX:"scroll"},itemLayout:"horizontal",dataSource:this.state.filteredItems,renderItem:function(t){return i.a.createElement(Rt.a.Item,{onClick:function(){return e.add(t)}},i.a.createElement(Rt.a.Item.Meta,{title:t.name}))}}))))))}}]),t}(i.a.Component),Ss=fa.a.create()(Ds);function xs(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Is(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?xs(a,!0).forEach(function(t){Object(u.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):xs(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Cs=$t.a.confirm,ws=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={currentPatient:a.props.currentPatient,active_practiceId:a.props.active_practiceId,treatmentPlans:[],procedure_category:null,incompletedTreatmentPlans:[],loading:!0,selectedTreatments:{}},a.loadTreatmentPlans=a.loadTreatmentPlans.bind(Object(f.a)(a)),a.loadProcedureCategory=a.loadProcedureCategory.bind(Object(f.a)(a)),a.editTreatmentPlanData=a.editTreatmentPlanData.bind(Object(f.a)(a)),a.submitCompleteTreatment=a.submitCompleteTreatment.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.loadTreatmentPlans(),this.loadProcedureCategory()}},{key:"loadTreatmentPlans",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=[],a=this;this.setState({loading:!0});var n=function(e){a.setState(function(t){return 1==e.current?{treatmentPlans:Object(wr.a)(e.results),next:e.next,loading:!1}:{treatmentPlans:[].concat(Object(wr.a)(t.treatmentPlans),Object(wr.a)(e.results)),next:e.next,loading:!1}}),e.results.forEach(function(e){e.is_completed||t.push(e)}),a.setState(function(a){return 1==e.current?{incompletedTreatmentPlans:[].concat(t),loading:!1}:{incompletedTreatmentPlans:[].concat(Object(wr.a)(a.incompletedTreatmentPlans),t),loading:!1}})},i=function(){a.setState({loading:!1})},r={page:e,practice:this.props.active_practiceId};this.props.match.params.id&&(r.patient=this.props.match.params.id),this.props.showAllClinic&&this.props.match.params.id&&delete r.practice,ht(ke,n,i,r)}},{key:"loadProcedureCategory",value:function(){var e=this;ht(gt(J,[this.props.active_practiceId]),function(t){e.setState({procedure_category:t})},function(){e.setState({})})}},{key:"editTreatmentPlanData",value:function(e){console.log("record",e.id),this.setState({editTreatmentPlan:e,loading:!1});e.patient;this.props.history.push("/patient/"+e.id+"/emr/plans/edit")}},{key:"deleteTreatmentPlans",value:function(e){var t=this;Cs({title:"Are you sure to delete this item?",okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){var a={id:e.id,patient:e.patient.id,is_active:!1};dt(gt(ke,[t.props.match.params.id],null),a,function(e){t.loadTreatmentPlans(),bt(k,"Treatment Plan Deleted Successfully!")},function(){})},onCancel:function(){console.log("Cancel")}})}},{key:"treatmentCompleteToggle",value:function(e,t){this.setState(function(a){return{selectedTreatments:Is({},a.selectedTreatments,Object(u.a)({},e,!!t))}})}},{key:"submitCompleteTreatment",value:function(){var e=this,t=this.state.selectedTreatments,a=Object.keys(t),n={treatment:[],patient:e.props.match.params.id};a.forEach(function(e){var a={id:e,is_completed:t[e]};n.treatment.push(a)});dt(gt("patients/complete_procedure/?id=%s&complete=%s",[this.props.match.params.id]),n,function(t){e.loadTreatmentPlans(),e.setState({selectedTreatments:{}})},function(){})}},{key:"loadPDF",value:function(e){ht(gt("patients/treatment_plan_pdf/?id=%s",[e]),function(e){e.report&&window.open(F+e.report)},function(){})}},{key:"render",value:function(){var e=this,t=this,a={};this.state.procedure_category&&this.state.procedure_category.forEach(function(e){a[e.id]=e.name});var n=[{title:"",key:"is_completed",render:function(t,a){return a.is_completed?i.a.createElement(Bt.a,{type:"check-circle",theme:"twoTone",style:{marginLeft:"8px",fontSize:"20px"}}):i.a.createElement(sa.a,{key:a.id,onChange:function(t){return e.treatmentCompleteToggle(a.id,t.target.checked)},value:e.state.selectedTreatments[a.id]})}},{title:"Procedure",dataIndex:"procedure",key:"procedure",render:function(e,t){return i.a.createElement("span",null," ",e.name)}},{title:"Quantity",dataIndex:"quantity",key:"quantity"},{title:"Discount",dataIndex:"discount",key:"discount"},{title:"Cost per  Unit",dataIndex:"cost",key:"cost"},{title:"Notes",dataIndex:"default_notes",key:"default_notes"}];return this.props.match.params.id?i.a.createElement("div",null,i.a.createElement(b.d,null,i.a.createElement(b.b,{exact:!0,path:"/patient/:id/emr/plans/add",render:function(t){return i.a.createElement(Ss,Object.assign({},e.state,t,{loadData:e.loadTreatmentPlans}))}}),i.a.createElement(b.b,{exact:!0,path:"/patient/:id/emr/plans/edit",render:function(t){return e.state.editTreatmentPlan?i.a.createElement(Ss,Object.assign({},e.state,t,{loadData:e.loadTreatmentPlans,editId:e.state.editTreatmentPlan.id})):i.a.createElement(b.a,{to:"/patient/"+e.props.match.params.id+"/emr/plans"})}}),i.a.createElement("div",null,i.a.createElement(ia.a,{bodyStyle:{padding:0},title:this.state.currentPatient?this.state.currentPatient.user.first_name+" TreatmentPlans":"TreatmentPlans",extra:i.a.createElement(Vt.a.Group,null,i.a.createElement(Vt.a,{onClick:this.submitCompleteTreatment},i.a.createElement(Bt.a,{type:"save"}),"Save"),i.a.createElement(qt.b,{to:"/patient/"+this.props.match.params.id+"/emr/plans/add"},i.a.createElement(Vt.a,{type:"primary"},i.a.createElement(Bt.a,{type:"plus"}),"Add")))}),i.a.createElement(Tt.a,{spinning:this.state.loading},this.state.treatmentPlans.map(function(a){return i.a.createElement(ia.a,{bodyStyle:{padding:0},style:{marginTop:15}},i.a.createElement("div",{style:{padding:16}},i.a.createElement("h4",null,a.date?ya()(a.date).format("ll"):null,i.a.createElement(At.a.Button,{size:"small",style:{float:"right"},overlay:i.a.createElement(Ht.a,null,i.a.createElement(Ht.a.Item,{key:"1",onClick:function(){return t.editTreatmentPlanData(a)},disabled:a.practice&&a.practice.id!=e.props.active_practiceId},i.a.createElement(Bt.a,{type:"edit"}),"Edit"),i.a.createElement(Ht.a.Item,{key:"2",onClick:function(){return t.deleteTreatmentPlans(a)},disabled:a.practice&&a.practice.id!=e.props.active_practiceId},i.a.createElement(Bt.a,{type:"delete"}),"Delete"),i.a.createElement(Ht.a.Divider,null),i.a.createElement(Ht.a.Item,{key:"3"},i.a.createElement(qt.b,{to:"/patient/"+a.patient+"/emr/timeline"},i.a.createElement(Bt.a,{type:"clock-circle"}),"\xa0 Patient Timeline")))},i.a.createElement("a",{onClick:function(){return e.loadPDF(a.id)}},i.a.createElement(Bt.a,{type:"printer"}))))),i.a.createElement(ta.a,{loading:e.state.loading,columns:n,dataSource:a.treatment_plans,footer:function(){return Ts(a)},pagination:!1,key:a.id}))})),i.a.createElement(Ei,{loaderFunction:function(){return e.loadTreatmentPlans(t.state.next)},loading:this.state.loading,hidden:!this.state.next})))):i.a.createElement("div",null,i.a.createElement(ia.a,{bodyStyle:{padding:0},title:this.state.currentPatient?this.state.currentPatient.user.first_name+" TreatmentPlans":"TreatmentPlans",extra:i.a.createElement(Vt.a.Group,null,i.a.createElement(Vt.a,{onClick:this.submitCompleteTreatment},i.a.createElement(Bt.a,{type:"save"}),"Save"),i.a.createElement(Vt.a,{type:"primary",onClick:function(){return e.props.togglePatientListModal(!0)}},i.a.createElement(Bt.a,{type:"plus"}),"Add"))}),i.a.createElement(Tt.a,{spinning:this.state.loading},this.state.treatmentPlans.map(function(a){return i.a.createElement(ia.a,{bodyStyle:{padding:0},key:a.id,style:{marginTop:15}},i.a.createElement("div",{style:{padding:16}},i.a.createElement("h4",null,a.date?ya()(a.date).format("ll"):null,i.a.createElement(qt.b,{to:"/patient/"+a.patient.id+"/emr/plans"},"\xa0\xa0 ",a.patient.user?a.patient.user.first_name:null," (ID: ",a.patient.id,")\xa0"),i.a.createElement("span",null,", ",a.patient.gender),i.a.createElement(At.a.Button,{size:"small",style:{float:"right"},overlay:i.a.createElement(Ht.a,null,i.a.createElement(Ht.a.Item,{key:"1",disabled:a.practice&&a.practice.id!=e.props.active_practiceId},i.a.createElement(qt.b,{to:"/patient/"+a.patient.id+"/emr/plans/edit"},i.a.createElement(Bt.a,{type:"edit"}),"\xa0 Edit")),i.a.createElement(Ht.a.Item,{key:"2",onClick:function(){return t.deleteTreatmentPlans(a)},disabled:a.practice&&a.practice.id!=e.props.active_practiceId},i.a.createElement(Bt.a,{type:"delete"}),"Delete"),i.a.createElement(Ht.a.Divider,null),i.a.createElement(Ht.a.Item,{key:"3"},i.a.createElement(qt.b,{to:"/patient/"+a.patient+"/emr/timeline"},i.a.createElement(Bt.a,{type:"clock-circle"}),"\xa0 Patient Timeline")))},i.a.createElement("a",{onClick:function(){return e.loadPDF(a.id)}},i.a.createElement(Bt.a,{type:"printer"}))))),i.a.createElement(ta.a,{loading:e.state.loading,columns:n,dataSource:a.treatment_plans,footer:function(){return Ts(a)},pagination:!1,key:a.id}))})),i.a.createElement(Ei,{loaderFunction:function(){return e.loadTreatmentPlans(t.state.next)},loading:this.state.loading,hidden:!this.state.next}))}}]),t}(i.a.Component);function Ts(e){return e?i.a.createElement("div",null,e.doctor?i.a.createElement(Mt.a,{color:e.doctor?e.doctor.calendar_colour:null},i.a.createElement("b",null,"prescribed by  "+e.doctor.user.first_name," ")):null,e.practice?i.a.createElement(Mt.a,{style:{float:"right"}},i.a.createElement(kl.a,{title:"Practice Name"},i.a.createElement("b",null,e.practice.name," "))):null):null}function As(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Ms(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?As(a,!0).forEach(function(t){Object(u.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):As(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Ls=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).calculateItem=function(e){var t=a.props.form.getFieldsValue;console.log(t()),a.setState(function(e){Object(wr.a)(e.tableFormValues).forEach(function(e){})})},a.removeTests=function(e,t){a.setState(function(a){return{addedLabs:Ms({},a.addedLabs,Object(u.a)({},t.id,!1)),tableFormValues:Object(wr.a)(Object(as.remove)(a.tableFormValues,function(t){return t._id!=e}))}})},a.add=function(e){console.log("item",e),a.setState(function(t){console.log("preview",t);var a=Math.random().toFixed(7);return t.addedLabs[e.id]?(bt(O,"Item Already Added"),!1):{addedLabs:Ms({},t.addedLabs,Object(u.a)({},e.id,!0)),tableFormValues:[].concat(Object(wr.a)(t.tableFormValues),[Ms({},e,{_id:a})])}})},a.handleSubmit=function(e){var t=Object(f.a)(a);e.preventDefault(),a.props.form.validateFields(function(e,a){if(!e){var n={treatment:[],patient:t.props.match.params.id};t.state.tableFormValues.forEach(function(e){e.cost=a.cost[e._id];var t={name:e.id,cost:e.cost,instruction:e.instruction,is_active:!0,practice:e.practice,margin:e.margin};n.treatment.push(t)});console.log("DataSet",n)}})},a.state={lab_test:[],tableFormValues:[],addedLabs:{}},console.log("urgent",a.props.active_practiceId),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.loadLabs()}},{key:"loadLabs",value:function(){var e=this;ht(gt(le,[e.props.active_practiceId]),function(t){e.setState({lab_test:t})},function(){})}},{key:"render",value:function(){var e=this,t=this.props.form,a=t.getFieldDecorator,n=(t.getFieldValue,t.getFieldsValue,{labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}}),r=[{title:"Name",dataIndex:"name",key:"name",render:function(e,t){return i.a.createElement("span",null,i.a.createElement("b",null,e))}},{title:"Cost",dataIndex:"cost",key:"cost",render:function(e,t){return i.a.createElement("span",null,i.a.createElement(fa.a.Item,Object.assign({key:"cost[".concat(t._id,"]")},n),a("cost[".concat(t._id,"]"),{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"This field is required."}],initialValue:t.cost})))}},{title:"Total",dataIndex:"total",key:"total",render:function(t,a){return i.a.createElement("span",null,t,i.a.createElement("a",{onClick:function(){return e.removeTests(a._id,a)}},i.a.createElement(Bt.a,{type:"close-circle",theme:"twoTone",twoToneColor:"#f00"})))}}];return i.a.createElement("div",null,i.a.createElement(fa.a,{onSubmit:this.handleSubmit},i.a.createElement(ia.a,{title:"Patient Lab Orders",bodyStyle:{padding:0},extra:i.a.createElement(fa.a.Item,Object.assign({},{labelCol:{xs:{span:24},sm:{span:24}},wrapperCol:{xs:{span:24},sm:{span:24}}},{style:{marginBottom:0}}),i.a.createElement(Vt.a,{type:"primary",htmlType:"submit"},"Save Lab Orders"))},i.a.createElement(Zt.a,{gutter:16},i.a.createElement(ea.a,{span:7},i.a.createElement(Rt.a,{size:"small",itemLayout:"horizontal",dataSource:this.state.lab_test,renderItem:function(t){return i.a.createElement(Rt.a.Item,null,i.a.createElement(Rt.a.Item.Meta,{title:t.name}),i.a.createElement(Vt.a,{type:"primary",size:"small",shape:"circle",onClick:function(){return e.add(t)},icon:"arrow-right"}))}})),i.a.createElement(ea.a,{span:17},i.a.createElement(ta.a,{pagination:!1,bordered:!0,dataSource:this.state.tableFormValues,columns:r}))))))}}]),t}(i.a.Component),Vs=fa.a.create()(Ls),Fs=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={currentPatient:a.props.currentPatient,active_practiceId:a.props.active_practiceId,loading:!1},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=[{title:"Time",dataIndex:"created_at",key:"name",render:function(e){return i.a.createElement("span",null,ya()(e).format("LLL"))}},{title:"Drug",key:"drug"},{title:"Quantity",dataIndex:"qunatity",key:"quantity"},{title:"Cost Per  Unit",dataIndex:"cost",key:"cost"},{title:"Completed",key:"is_completed",render:function(e,t){return i.a.createElement(sa.a,{checked:t.is_completed})}},{title:"Action",key:"action",render:function(t,a){return i.a.createElement("span",null,i.a.createElement("a",{onClick:function(){return e.editPrescriptionData(a)}},"Edit"),i.a.createElement(na.a,{type:"vertical"}),i.a.createElement("a",{href:"javascript:;"},"Delete"))}}];return i.a.createElement("div",null,i.a.createElement(b.d,null,i.a.createElement(b.b,{exact:!0,path:"/patient/:id/emr/labtrackings/add",render:function(t){return i.a.createElement(Vs,Object.assign({},e.state,t))}}),i.a.createElement(ia.a,{title:this.state.currentPatient?this.state.currentPatient.user.first_name+" Lab Order":"Patients Lab Order",extra:i.a.createElement(Vt.a.Group,null,i.a.createElement(qt.b,{to:"/patient/"+this.props.match.params.id+"/emr/labtrackings/add"},i.a.createElement(Vt.a,null,i.a.createElement(Bt.a,{type:"plus"}),"Add")))},i.a.createElement(ta.a,{loading:this.state.loading,columns:t,dataSource:this.state.payments}))))}}]),t}(i.a.Component);function Rs(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Ns(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Rs(a,!0).forEach(function(t){Object(u.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Rs(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Bs=ga.a.Search,Hs=(ma.a.MonthPicker,oa.a.TabPane),qs={_id:null,quantity:0,batch:null},Ys=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).selectedDefaultDate=function(e){a.setState({selectedDate:e})},a.loadEditInvoiceData=function(){var e=a.props.editInvoice;a.setState(function(t){var a=[];e.procedure.forEach(function(e){a.push(Ns({},e.procedure_data,{},e,{selectedDoctor:e.doctor_data,selectedDate:ya()(e.date).isValid()?ya()(e.date):null,_id:Math.random().toFixed(7),item_type:Na}))});var n=Ns({},t.stocks);return e.inventory.forEach(function(e){if(t.itemBatches[e.inventory]){if(n[e.inventory]){var i=n[e.inventory];i[e.batch_number],i[e.batch_number]+=e.unit}else{var r={};r[e.batch_number]=e.unit,n[e.inventory]=r}t.itemBatches[e.inventory].forEach(function(t){t.batch_number==e.batch_number&&(e.selectedBatch=t)})}a.push(Ns({},e.inventory_item_data,{},e,{selectedDoctor:e.doctor_data,_id:Math.random().toFixed(7),item_type:Ba}))}),{tableFormValues:a,selectedDate:ya()(e.date).isValid()?ya()(e.date):null,stocks:n}})},a.remove=function(e){a.setState(function(t){var a=[];return t.tableFormValues.forEach(function(t){t._id!=e&&a.push(t)}),{tableFormValues:a}})},a.add=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.random().toFixed(7);a.setState(function(a){return e.item_type==Na?e=Ns({},e,{id:void 0,unit_cost:e.cost,procedure:e.id,selectedDoctor:a.selectedDoctor?a.selectedDoctor:null,selectedDate:ya()(),taxes:e.taxes.map(function(e){return e.id})}):e.item_type==Ba&&(e=Ns({},e,{id:void 0,inventory:e.id,unit_cost:e.retail_without_tax,selectedDoctor:a.selectedDoctor?a.selectedDoctor:null})),{tableFormValues:[].concat(Object(wr.a)(a.tableFormValues),[Ns({},qs,{},e,{id:void 0,_id:t})])}})},a.selectDoctor=function(e,t,n){a.setState(function(a){var i=[];return a.tableFormValues.forEach(function(a){a._id==t&&a.item_type==n?i.push(Ns({},a,{selectedDoctor:e})):i.push(a)}),{tableFormValues:i}})},a.selectedDate=function(e,t,n){a.setState(function(a){var i=[];return a.tableFormValues.forEach(function(a){a._id==t&&a.item_type==n?i.push(Ns({},a,{selectedDate:e})):i.push(a)}),{tableFormValues:i}})},a.selectBatch=function(e,t,n){a.setState(function(a){var i=[];return a.tableFormValues.forEach(function(a){a._id==t&&a.item_type==n?i.push(Ns({},a,{selectedBatch:e})):i.push(a)}),{tableFormValues:i}})},a.addPrescription=function(e){var t=Object(f.a)(a);e.drugs.forEach(function(a){a.inventory.maintain_inventory&&t.add(Ns({},a.inventory,{item_type:Ba,inventory:e.inventory.id,id:void 0}))}),t.setState(function(t){return{selectedPrescriptions:[].concat(Object(wr.a)(t.selectedPrescriptions),[e.id])}})},a.handleSubmit=function(e){var t=Object(f.a)(a);e.preventDefault(),a.props.form.validateFields(function(e,a){if(!e){t.setState({saveLoading:!0});var n={practice:t.props.active_practiceId,patient:t.props.match.params.id,unit:null,cost:null,discount:null,taxes:0,total:null,procedure:[],inventory:[],prescription:t.state.selectedPrescriptions,date:t.state.selectedDate&&ya()(t.state.selectedDate).isValid()?t.state.selectedDate.format("YYYY-MM-DD"):null};t.state.tableFormValues.forEach(function(e){switch(e.unit=a.unit[e._id],e.taxes=a.taxes[e._id],e.discount=a.discount[e._id],e.discount_type="%",e.item_type){case Na:n.procedure.push({name:e.name,unit:e.unit,procedure:e.procedure,default_notes:null,is_active:!0,margin:e.margin,taxes:e.taxes,unit_cost:e.unit_cost,discount:e.discount,discount_type:"%",offers:null,doctor:e.selectedDoctor?e.selectedDoctor.id:null,id:t.props.editId?e.id:void 0});break;case Ba:n.inventory.push({inventory:e.inventory,name:e.name,unit:e.unit,taxes:e.taxes,unit_cost:e.unit_cost,discount:e.discount,discount_type:"%",offers:null,doctor:e.selectedDoctor?e.selectedDoctor.id:null,instruction:e.instruction,is_active:!0,batch_number:e.selectedBatch?e.selectedBatch.batch_number:null,id:t.props.editId?e.id:void 0});break;default:return null}});var i=function(e){t.setState({saveLoading:!1}),bt("Inventory updated successfully"),t.props.loadData();var a="/patient/"+t.props.match.params.id+"/billing/invoices";t.props.history.push(a)},r=function(){t.setState({saveLoading:!1})};t.props.editId?ut(gt(De,[t.props.editId]),n,i,r):dt(je,n,i,r)}})},a.addItemThroughQR=function(e){var t=Object(f.a)(a);t.setState({loadingQr:!0});var n=e.split("*");ht(Ke,function(e){var a=t.props.form,i=a.setFieldsValue,r=(a.getFieldsValue,a.getFieldValue),l=Math.random().toFixed(7),s=!0;if(t.state.tableFormValues.forEach(function(e){if(e.name==n[0]){var t=e._id,a=e.selectedBatch.batch_number,l=r("unit[".concat(t,"]"));a==n[1]&&(s=!1,i(Object(u.a)({},"unit[".concat(t,"]"),l+1)))}}),s){var c=null;e.item_type_stock&&e.item_type_stock.item_stock&&e.item_type_stock.item_stock.forEach(function(t){t.batch_number==n[1]&&(e.selectedBatch=t,c=t.unit_cost)}),t.add(Ns({},e,{item_type:Ba}),l),i(Object(u.a)({},"unit_cost[".concat(l,"]"),c))}t.setState(function(e){return{loadingQr:!1,qrValue:""}})},function(){},{qr:e,form:"Invoice"})},a.setQrValue=function(e){var t=e.target.value;a.setState({qrValue:t})},a.searchValues=function(e){var t=e.target.value;a.setState({searchItem:t},function(){this.loadInventoryItemList()})},a.changeNetPrice=function(e){var t=Object(f.a)(a),n=a.props.form,i=n.getFieldsValue;n.setFields;setTimeout(function(){var a=i();a.total_unit_cost[e]?t.setState(function(t){var n=[];return t.tableFormValues.forEach(function(i){if(i._id==e){var r=0;a.taxes[e].forEach(function(e){t.taxes_list.forEach(function(t){t.id==e&&(r+=t.tax_value)})});var l=a.total_unit_cost[e]/(1+.01*r);n.push(Ns({},i,{unit_cost:l}))}else n.push(i)}),{tableFormValues:n}}):t.setState({retail_price:0})},1e3)},a.state={classType:e.type,tableFormValues:[],maxQuantityforConsume:{},items:{},practiceDoctors:[],selectedPrescriptions:[],selectedDate:ya()(),stocks:{},itemBatches:{},saveLoading:!1,qrValue:"",searchItem:""},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){Ii(this),this.loadInventoryItemList(),this.loadProcedures(),this.loadPrescriptions(),this.loadTaxes(),this.props.editId&&this.loadEditInvoiceData()}},{key:"loadInventoryItemList",value:function(){var e=this,t={practice:this.props.active_practiceId,maintain_inventory:!0};this.state.searchItem&&(t.item_name=this.state.searchItem),ht(Ge,function(t){var a=t.results,n=[];e.setState(function(t){var i=Ns({},t.stocks),r={};a.forEach(function(e){if(e.item_type==Ra){if(n.push(e),i[e.id]){var t=i[e.id];e.item_type_stock&&e.item_type_stock.item_stock&&e.item_type_stock.item_stock.forEach(function(e){t[e.batch_number],t[e.batch_number]+=e.quantity})}else{var a={};e.item_type_stock&&e.item_type_stock.item_stock&&e.item_type_stock.item_stock.forEach(function(e){a[e.batch_number]=e.quantity}),i[e.id]=a}r[e.id]=e.item_type_stock.item_stock}});var l=e.state.items;return l[Ba]=n,{items:l,stocks:Ns({},t.stocks,{},i),itemBatches:Ns({},t.itemBatches,{},r)}},function(){e.props.editId&&e.loadEditInvoiceData()})},function(){},t)}},{key:"loadProcedures",value:function(){var e=this;ht(gt(J,[this.props.active_practiceId]),function(t){var a=e.state.items;a[Na]=t,e.setState({items:a})},function(){})}},{key:"loadPrescriptions",value:function(){var e=this;ht(gt("patients/unpaid_prescriptions/?id=%s",[e.props.match.params.id]),function(t){e.setState(function(e){return{items:Ns({},e.items,Object(u.a)({},"Prescriptions",t))}})},function(){})}},{key:"loadTaxes",value:function(){var e=this;ht(gt(K,[this.props.active_practiceId]),function(t){e.setState({taxes_list:t})},function(){})}},{key:"render",value:function(){var e=this,t=this,a=this.props.form,n=a.getFieldDecorator,r=(a.getFieldValue,a.getFieldsValue,{labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:24},md:{span:24},lg:{span:24},xl:{span:24}}});n("keys",{initialValue:[]});var l=[{title:"Item Name",key:"item_name",dataIndex:"name",render:function(e,a){switch(a.item_type){case Na:return i.a.createElement(fa.a.Item,Object.assign({key:"name[".concat(a._id,"]")},r),n("name[".concat(a._id,"]"),{validateTrigger:["onChange","onBlur"],initialValue:e,rules:[{required:!0,message:"This field is required."}]})(i.a.createElement(ga.a,{min:0,placeholder:"Item name",size:"small"})),i.a.createElement("span",null,"by \xa0\xa0"),i.a.createElement(At.a,{placement:"topCenter",overlay:i.a.createElement(Ht.a,null,t.state.practiceDoctors.map(function(e){return i.a.createElement(Ht.a.Item,{key:"0"},i.a.createElement("a",{onClick:function(){return t.selectDoctor(e,a._id,Na)}},e.user.first_name))})),trigger:["click"]},i.a.createElement("a",{className:"ant-dropdown-link",href:"#"},i.a.createElement("b",null,a.selectedDoctor.user?a.selectedDoctor.user.first_name:"No DOCTORS Found"))),i.a.createElement("span",null," \xa0\xa0on\xa0\xa0"),i.a.createElement(ma.a,{value:a.selectedDate,size:"small",onChange:function(e){return t.selectedDate(e,a._id,Na)},format:"DD-MM-YYYY"}));case"Prescriptions":return i.a.createElement("b",null,a.name);case Ba:return i.a.createElement("div",null,a.name,i.a.createElement("span",null,i.a.createElement("br",null),"by \xa0\xa0"),i.a.createElement(At.a,{placement:"topCenter",overlay:i.a.createElement(Ht.a,null,t.state.practiceDoctors.map(function(e){return i.a.createElement(Ht.a.Item,{key:e.id},i.a.createElement("a",{onClick:function(){return t.selectDoctor(e,a._id,Na)}},e.user.first_name))})),trigger:["click"]},i.a.createElement("a",{className:"ant-dropdown-link",href:"#"},i.a.createElement("b",null,a.selectedDoctor&&a.selectedDoctor.user?a.selectedDoctor.user.first_name:"+Add Doctor"))),i.a.createElement("span",null,i.a.createElement("br",null),"from batch \xa0\xa0"),i.a.createElement(At.a,{placement:"topCenter",overlay:i.a.createElement(Ht.a,null,t.state.itemBatches[a.inventory]&&t.state.itemBatches[a.inventory].map(function(e,n){return ya()()>=ya()(e.expiry_date)?i.a.createElement(Ht.a.Item,{key:n,disabled:!0},e.batch_number,"\xa0(",e.quantity,") \xa0\xa0",e.expiry_date):i.a.createElement(Ht.a.Item,{key:n},i.a.createElement("a",{onClick:function(){return t.selectBatch(e,a._id,Ba)}},e.batch_number,"\xa0(",e.quantity,") \xa0\xa0",e.expiry_date))})),trigger:["click"]},i.a.createElement("a",{className:"ant-dropdown-link",href:"#"},i.a.createElement("b",null,a.selectedBatch?a.selectedBatch.batch_number:"Select Batch"))));default:return null}}}];return l=(l=l.concat([{title:"Unit",key:"unit",width:100,dataIndex:"unit",render:function(e,a){return a.item_type==Ba?i.a.createElement(fa.a.Item,Object.assign({key:"unit[".concat(a._id,"]")},r),n("unit[".concat(a._id,"]"),{validateTrigger:["onChange","onBlur"],initialValue:a.unit||1,rules:[{required:!0,message:"This field is required."}]})(i.a.createElement(pa.a,{min:1,max:a.selectedBatch&&t.state.stocks[a.inventory]&&t.state.stocks[a.inventory][a.selectedBatch.batch_number]?t.state.stocks[a.inventory][a.selectedBatch.batch_number]:0,placeholder:"units",size:"small",disabled:!(a.selectedBatch&&t.state.stocks[a.inventory]&&t.state.stocks[a.inventory][a.selectedBatch.batch_number])}))):i.a.createElement(fa.a.Item,Object.assign({key:"unit[".concat(a._id,"]")},r),n("unit[".concat(a._id,"]"),{initialValue:a.unit||1,validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"This field is required."}]})(i.a.createElement(pa.a,{min:1,max:100,placeholder:"unit",size:"small"})))}},{title:"Unit Cost",key:"unit_cost",width:100,dataIndex:"unit_cost",render:function(e,t){return e?e.toFixed(2):null}},{title:"discount %",key:"discount",width:100,dataIndex:"discount",render:function(e,t){return i.a.createElement(fa.a.Item,Object.assign({key:"discount[".concat(t._id,"]")},r),n("discount[".concat(t._id,"]"),{initialValue:t.discount,validateTrigger:["onChange","onBlur"]})(i.a.createElement(pa.a,{min:0,max:100,placeholder:"discount",size:"small"})))}},{title:"Taxes",key:"taxes",dataIndex:"taxes",render:function(a,l){return i.a.createElement(fa.a.Item,Object.assign({key:"taxes[".concat(l._id,"]")},r),n("taxes[".concat(l._id,"]"),{initialValue:l.taxes||[],validateTrigger:["onChange","onBlur"]})(i.a.createElement(Lt.a,{placeholder:"Taxes",size:"small",mode:"multiple",style:{width:150},onChange:function(){return t.changeNetPrice(l._id)}},e.state.taxes_list&&e.state.taxes_list.map(function(e){return i.a.createElement(Lt.a.Option,{value:e.id},e.name,"@",e.tax_value,"%")}))))}},{title:"Total Unit Cost",key:"total_unit_cost",width:100,dataIndex:"total_unit_cost",render:function(e,a){return i.a.createElement(fa.a.Item,Object.assign({key:"total_unit_cost[".concat(a._id,"]")},r),n("total_unit_cost[".concat(a._id,"]"),{validateTrigger:["onChange","onBlur"],initialValue:a.item_type==Ba?a.retail_with_tax:a.cost_with_tax,rules:[{required:!0,message:"This field is required."}]})(i.a.createElement(pa.a,{min:0,placeholder:"Unit Cost",size:"small",onChange:function(){return t.changeNetPrice(a._id)}})))}}])).concat([{key:"_id",dataIndex:"_id",render:function(e,a){return i.a.createElement(Vt.a,{icon:"close",onClick:function(){return t.remove(a._id)},type:"danger",shape:"circle",size:"small"})}}]),i.a.createElement("div",null,i.a.createElement(Tt.a,{spinning:this.state.saveLoading,tip:"Saving Invoice..."},i.a.createElement(ia.a,{title:this.props.editId?"Edit Invoice (INV "+this.props.editId+")":"Add Invoice",extra:i.a.createElement(Bs,{loading:this.state.loadingQr,value:this.state.qrValue,onChange:this.setQrValue,placeholder:"Search QR Code",onSearch:this.addItemThroughQR,style:{width:200}}),bodyStyle:{padding:0}},i.a.createElement(Zt.a,{gutter:16},i.a.createElement(ea.a,{span:7},i.a.createElement(oa.a,{size:"small",type:"card"},i.a.createElement(Hs,{tab:Ba,key:Ba},i.a.createElement("div",{style:{backgroundColor:"#ddd",padding:8}},i.a.createElement(ga.a.Search,{placeholder:"Search in Inventory ",onChange:this.searchValues})),i.a.createElement(Rt.a,{size:"small",itemLayout:"horizontal",dataSource:this.state.items?this.state.items[Ba]:[],renderItem:function(t){return i.a.createElement(Rt.a.Item,null,i.a.createElement(Rt.a.Item.Meta,{title:t.name}),i.a.createElement(Vt.a,{type:"primary",size:"small",shape:"circle",onClick:function(){return e.add(Ns({},t,{item_type:Ba}))},icon:"arrow-right"}))}})),i.a.createElement(Hs,{tab:"Prescriptions",key:"Prescriptions"},i.a.createElement(Rt.a,{size:"small",itemLayout:"horizontal",dataSource:this.state.items?this.state.items.Prescriptions:[],renderItem:function(t){return i.a.createElement(Rt.a.Item,null,i.a.createElement(Rt.a.Item.Meta,{title:t.drugs.map(function(e){return i.a.createElement("div",null,i.a.createElement("span",null,e.name)," ",e.inventory.maintain_inventory?null:i.a.createElement(Mt.a,{color:"red",style:{float:"right",lineHeight:"18px"}},"Not Sold"),i.a.createElement("br",null))}),description:t.doctor?i.a.createElement(Mt.a,{color:t.doctor?t.doctor.calendar_colour:null},i.a.createElement("b",null,"prescribed by  "+t.doctor.user.first_name," ")):null}),i.a.createElement(Vt.a,{type:"primary",size:"small",shape:"circle",onClick:function(){return e.addPrescription(Ns({},t))},icon:"arrow-right"}))}})),i.a.createElement(Hs,{tab:Na,key:Na},i.a.createElement(Rt.a,{size:"small",itemLayout:"horizontal",dataSource:this.state.items?this.state.items[Na]:[],renderItem:function(t){return i.a.createElement(Rt.a.Item,null,i.a.createElement(Rt.a.Item.Meta,{title:t.name}),i.a.createElement(Vt.a,{type:"primary",size:"small",shape:"circle",onClick:function(){return e.add(Ns({},t,{item_type:Na}))},icon:"arrow-right"}))}})))),i.a.createElement(ea.a,{span:17},i.a.createElement(fa.a,{onSubmit:this.handleSubmit},i.a.createElement(ta.a,{pagination:!1,bordered:!0,dataSource:this.state.tableFormValues,columns:l}),i.a.createElement(c.a,{offsetBottom:0},i.a.createElement(ia.a,null,i.a.createElement("span",null," \xa0\xa0on\xa0\xa0"),i.a.createElement(ma.a,{value:this.state.selectedDate,onChange:function(t){return e.selectedDefaultDate(t)},format:"DD-MM-YYYY",allowClear:!1}),i.a.createElement(fa.a.Item,Object.assign({},{labelCol:{xs:{span:24},sm:{span:24}},wrapperCol:{xs:{span:24},sm:{span:24}}},{style:{marginBottom:0,float:"right"}}),i.a.createElement(Vt.a,{type:"primary",htmlType:"submit",style:{margin:5}},"Save Invoice"),t.props.history?i.a.createElement(Vt.a,{style:{margin:5,float:"right"},onClick:function(){return t.props.history.goBack()}},"Cancel"):null)))))))))}}]),t}(i.a.Component),zs=fa.a.create()(Ys);function Gs(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Us(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Gs(a,!0).forEach(function(t){Object(u.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Gs(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}ga.a.Search,ma.a.MonthPicker,oa.a.TabPane;var Ws={_id:null,quantity:0,batch:null},Ks=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).selectedDefaultDate=function(e){a.setState({selectedDate:e})},a.loadEditInvoiceData=function(){var e=a.props.editInvoice;a.setState(function(t){var a=[];e.procedure.forEach(function(e){a.push(Us({},e.procedure_data,{},e,{selectedDoctor:e.doctor_data,selectedDate:ya()(e.date).isValid()?ya()(e.date):null,_id:Math.random().toFixed(7),item_type:Na}))});var n=Us({},t.stocks);return e.inventory.forEach(function(e){if(t.itemBatches[e.inventory]){if(n[e.inventory]){var i=n[e.inventory];i[e.batch_number],i[e.batch_number]+=e.unit}else{var r={};r[e.batch_number]=e.unit,n[e.inventory]=r}t.itemBatches[e.inventory].forEach(function(t){t.batch_number==e.batch_number&&(e.selectedBatch=t)})}a.push(Us({},e.inventory_item_data,{},e,{selectedDoctor:e.doctor_data,_id:Math.random().toFixed(7),item_type:Ba}))}),{tableFormValues:a,selectedDate:ya()(e.date).isValid()?ya()(e.date):null,stocks:n}})},a.remove=function(e){a.setState(function(t){var a=[];return t.tableFormValues.forEach(function(t){t._id!=e&&a.push(t)}),{tableFormValues:a}})},a.add=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.random().toFixed(7);a.setState(function(a){return e.item_type==Na?e=Us({},e,{id:void 0,unit_cost:e.cost,procedure:e.id,selectedDoctor:a.selectedDoctor?a.selectedDoctor:null,selectedDate:ya()(),taxes:e.taxes.map(function(e){return e.id})}):e.item_type==Ba&&(e=Us({},e,{id:void 0,inventory:e.id,unit_cost:e.retail_without_tax,selectedDoctor:a.selectedDoctor?a.selectedDoctor:null})),{tableFormValues:[].concat(Object(wr.a)(a.tableFormValues),[Us({},Ws,{},e,{id:void 0,_id:t})])}})},a.selectDoctor=function(e,t,n){a.setState(function(a){var i=[];return a.tableFormValues.forEach(function(a){a._id==t&&a.item_type==n?i.push(Us({},a,{selectedDoctor:e})):i.push(a)}),{tableFormValues:i}})},a.selectedDate=function(e,t,n){a.setState(function(a){var i=[];return a.tableFormValues.forEach(function(a){a._id==t&&a.item_type==n?i.push(Us({},a,{selectedDate:e})):i.push(a)}),{tableFormValues:i}})},a.selectBatch=function(e,t,n){a.setState(function(a){var i=[];return a.tableFormValues.forEach(function(a){a._id==t&&a.item_type==n?i.push(Us({},a,{selectedBatch:e})):i.push(a)}),{tableFormValues:i}})},a.addPrescription=function(e){var t=Object(f.a)(a);e.drugs.forEach(function(a){a.inventory.maintain_inventory&&t.add(Us({},a.inventory,{item_type:Ba,inventory:e.inventory.id,id:void 0}))}),t.setState(function(t){return{selectedPrescriptions:[].concat(Object(wr.a)(t.selectedPrescriptions),[e.id])}})},a.handleSubmit=function(e){var t=Object(f.a)(a);e.preventDefault(),a.props.form.validateFields(function(e,n){if(!e){t.setState({saveLoading:!0});var i={bank:"",number:"",practice:t.props.active_practiceId,return_mode:null,invoice:a.props.editInvoice.id,procedure:[],inventory:[],patient:t.props.match.params.id,staff:a.props.editInvoice.staff_data?a.props.editInvoice.staff_data.id:null,prescription:t.state.selectedPrescriptions,date:t.state.selectedDate&&ya()(t.state.selectedDate).isValid()?t.state.selectedDate.format("YYYY-MM-DD"):null,return_with_tax:!!a.state.return_with_tax||""};t.state.tableFormValues.forEach(function(e){e.unit=n.unit[e._id];var t=e.id;if(delete e.id,e.unit)switch(e.item_type){case Na:i.procedure.push(Us({},e,{unit:e.unit,procedure_inv:t}));break;case Ba:i.inventory.push(Us({},e,{unit:e.unit,inventory_inv:t}));break;default:return null}});dt(Me,i,function(e){t.setState({saveLoading:!1}),bt("Inventory updated successfully"),t.props.loadData();var a="/patient/"+t.props.match.params.id+"/billing/invoices";t.props.history.push(a)},function(){t.setState({saveLoading:!1})})}})},a.addItemThroughQR=function(e){var t=Object(f.a)(a);t.setState({loadingQr:!0});var n=e.split("*");ht(Ke,function(e){var a=t.props.form,i=a.setFieldsValue,r=(a.getFieldsValue,a.getFieldValue),l=Math.random().toFixed(7),s=!0;if(t.state.tableFormValues.forEach(function(e){if(e.name==n[0]){var t=e._id,a=e.selectedBatch.batch_number,l=r("unit[".concat(t,"]"));a==n[1]&&(s=!1,i(Object(u.a)({},"unit[".concat(t,"]"),l+1)))}}),s){var c=null;e.item_type_stock&&e.item_type_stock.item_stock&&e.item_type_stock.item_stock.forEach(function(t){t.batch_number==n[1]&&(e.selectedBatch=t,c=t.unit_cost)}),t.add(Us({},e,{item_type:Ba}),l),i(Object(u.a)({},"unit_cost[".concat(l,"]"),c))}t.setState(function(e){return{loadingQr:!1,qrValue:""}})},function(){},{qr:e,form:"Invoice"})},a.setQrValue=function(e){var t=e.target.value;a.setState({qrValue:t})},a.searchValues=function(e){var t=e.target.value;a.setState({searchItem:t},function(){this.loadInventoryItemList()})},a.changeNetPrice=function(e){var t=Object(f.a)(a),n=a.props.form,i=n.getFieldsValue;n.setFields;setTimeout(function(){var a=i();a.total_unit_cost[e]?t.setState(function(t){var n=[];return t.tableFormValues.forEach(function(i){if(i._id==e){var r=0;a.taxes[e].forEach(function(e){t.taxes_list.forEach(function(t){t.id==e&&(r+=t.tax_value)})});var l=a.total_unit_cost[e]/(1+.01*r);n.push(Us({},i,{unit_cost:l}))}else n.push(i)}),{tableFormValues:n}}):t.setState({retail_price:0})},1e3)},a.onChangeHandle=function(e){Object(f.a)(a);a.setState({return_with_tax:e.target.checked})},a.state={classType:e.type,tableFormValues:[],maxQuantityforConsume:{},items:{},practiceDoctors:[],selectedPrescriptions:[],selectedDate:ya()(),stocks:{},itemBatches:{},saveLoading:!1,qrValue:"",searchItem:"",return_with_tax:!1},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){Ii(this),this.loadInventoryItemList(),this.loadProcedures(),this.loadPrescriptions(),this.loadTaxes(),this.props.editId&&this.loadEditInvoiceData()}},{key:"loadInventoryItemList",value:function(){var e=this,t={practice:this.props.active_practiceId,maintain_inventory:!0};this.state.searchItem&&(t.item_name=this.state.searchItem),ht(Ge,function(t){var a=t.results,n=[];e.setState(function(t){var i=Us({},t.stocks),r={};a.forEach(function(e){if(e.item_type==Ra){if(n.push(e),i[e.id]){var t=i[e.id];e.item_type_stock&&e.item_type_stock.item_stock&&e.item_type_stock.item_stock.forEach(function(e){t[e.batch_number],t[e.batch_number]+=e.quantity})}else{var a={};e.item_type_stock&&e.item_type_stock.item_stock&&e.item_type_stock.item_stock.forEach(function(e){a[e.batch_number]=e.quantity}),i[e.id]=a}r[e.id]=e.item_type_stock.item_stock}});var l=e.state.items;return l[Ba]=n,{items:l,stocks:Us({},t.stocks,{},i),itemBatches:Us({},t.itemBatches,{},r)}},function(){e.props.editId&&e.loadEditInvoiceData()})},function(){},t)}},{key:"loadProcedures",value:function(){var e=this;ht(gt(J,[this.props.active_practiceId]),function(t){var a=e.state.items;a[Na]=t,e.setState({items:a})},function(){})}},{key:"loadPrescriptions",value:function(){var e=this;ht(gt("patients/unpaid_prescriptions/?id=%s",[e.props.match.params.id]),function(t){e.setState(function(e){return{items:Us({},e.items,Object(u.a)({},"Prescriptions",t))}})},function(){})}},{key:"loadTaxes",value:function(){var e=this;ht(gt(K,[this.props.active_practiceId]),function(t){e.setState({taxes_list:t})},function(){})}},{key:"render",value:function(){var e=this,t=this,a=this.props.form,n=a.getFieldDecorator,r=(a.getFieldValue,a.getFieldsValue,{labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:24},md:{span:24},lg:{span:24},xl:{span:24}}});n("keys",{initialValue:[]});var l=[{title:"Item Name",key:"item_name",dataIndex:"name",render:function(e,a){switch(a.item_type){case Na:return i.a.createElement(fa.a.Item,Object.assign({key:"name[".concat(a._id,"]")},r),n("name[".concat(a._id,"]"),{validateTrigger:["onChange","onBlur"],initialValue:e,rules:[{required:!0,message:"This field is required."}]})(i.a.createElement(ga.a,{min:0,placeholder:"Item name",size:"small",disabled:!0})),i.a.createElement("span",null,"by \xa0\xa0"),i.a.createElement(At.a,{placement:"topCenter",disabled:!0,overlay:i.a.createElement(Ht.a,null,t.state.practiceDoctors.map(function(e){return i.a.createElement(Ht.a.Item,{key:"0"},i.a.createElement("a",{onClick:function(){return t.selectDoctor(e,a._id,Na)}},e.user.first_name))})),trigger:["click"]},i.a.createElement("a",{className:"ant-dropdown-link",href:"#"},i.a.createElement("b",null,a.selectedDoctor.user?a.selectedDoctor.user.first_name:"No DOCTORS Found"))),i.a.createElement("span",null," \xa0\xa0on\xa0\xa0"),i.a.createElement(ma.a,{value:a.selectedDate,disabled:!0,size:"small",onChange:function(e){return t.selectedDate(e,a._id,Na)},format:"DD-MM-YYYY"}));case"Prescriptions":return i.a.createElement("b",null,a.name);case Ba:return i.a.createElement("div",null,a.name,i.a.createElement("span",null,i.a.createElement("br",null),"by \xa0\xa0"),i.a.createElement(At.a,{placement:"topCenter",disabled:!0,overlay:i.a.createElement(Ht.a,null,t.state.practiceDoctors.map(function(e){return i.a.createElement(Ht.a.Item,{key:e.id},i.a.createElement("a",{onClick:function(){return t.selectDoctor(e,a._id,Na)}},e.user.first_name))})),trigger:["click"]},i.a.createElement("a",{className:"ant-dropdown-link",href:"#"},i.a.createElement("b",null,a.selectedDoctor&&a.selectedDoctor.user?a.selectedDoctor.user.first_name:"+Add Doctor"))),i.a.createElement("span",null,i.a.createElement("br",null),"from batch \xa0\xa0"),i.a.createElement(At.a,{placement:"topCenter",disabled:!0,overlay:i.a.createElement(Ht.a,null,t.state.itemBatches[a.inventory]&&t.state.itemBatches[a.inventory].map(function(e,n){return ya()()>=ya()(e.expiry_date)?i.a.createElement(Ht.a.Item,{key:n,disabled:!0},e.batch_number,"\xa0(",e.quantity,") \xa0\xa0",e.expiry_date):i.a.createElement(Ht.a.Item,{key:n},i.a.createElement("a",{onClick:function(){return t.selectBatch(e,a._id,Ba)}},e.batch_number,"\xa0(",e.quantity,") \xa0\xa0",e.expiry_date))})),trigger:["click"]},i.a.createElement("a",{className:"ant-dropdown-link",href:"#"},i.a.createElement("b",null,a.selectedBatch?a.selectedBatch.batch_number:"Select Batch"))));default:return null}}}];return l=l.concat([{title:"Unit",key:"unit",width:100,dataIndex:"unit",render:function(e,a){return a.item_type==Ba?i.a.createElement(fa.a.Item,Object.assign({key:"unit[".concat(a._id,"]")},r),n("unit[".concat(a._id,"]"),{validateTrigger:["onChange","onBlur"],initialValue:0,rules:[{required:!0,message:"This field is required."}]})(i.a.createElement(pa.a,{max:a.unit,min:0,placeholder:"units",size:"small",disabled:!(a.selectedBatch&&t.state.stocks[a.inventory]&&t.state.stocks[a.inventory][a.selectedBatch.batch_number])}))):i.a.createElement(fa.a.Item,Object.assign({key:"unit[".concat(a._id,"]")},r),n("unit[".concat(a._id,"]"),{initialValue:a.unit||1,validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"This field is required."}]})(i.a.createElement(pa.a,{min:0,max:a.unit,placeholder:"unit",size:"small"})))}},{title:"Unit Cost",key:"unit_cost",width:100,dataIndex:"unit_cost",render:function(e,t){return e?e.toFixed(2):null}},{title:"discount %",key:"discount",width:100,dataIndex:"discount",render:function(e,t){return i.a.createElement(fa.a.Item,Object.assign({key:"discount[".concat(t._id,"]")},r),n("discount[".concat(t._id,"]"),{initialValue:t.discount,validateTrigger:["onChange","onBlur"]})(i.a.createElement(pa.a,{min:0,max:100,placeholder:"discount",size:"small",disabled:!0})))}},{title:"Taxes",key:"taxes",dataIndex:"taxes",render:function(a,l){return i.a.createElement(fa.a.Item,Object.assign({key:"taxes[".concat(l._id,"]")},r),n("taxes[".concat(l._id,"]"),{initialValue:l.taxes||[],validateTrigger:["onChange","onBlur"]})(i.a.createElement(Lt.a,{placeholder:"Taxes",size:"small",mode:"multiple",disabled:!0,style:{width:150},onChange:function(){return t.changeNetPrice(l._id)}},e.state.taxes_list&&e.state.taxes_list.map(function(e){return i.a.createElement(Lt.a.Option,{value:e.id},e.name,"@",e.tax_value,"%")}))))}},{title:"Total Unit Cost",key:"total",width:100,dataIndex:"total",render:function(e,t){return e?e.toFixed(2):null}}]),i.a.createElement("div",null,i.a.createElement(Tt.a,{spinning:this.state.saveLoading,tip:"Saving Invoice..."},i.a.createElement(ia.a,{title:this.props.editId?"Return Invoice (INV "+this.props.editId+")":"Add Invoice",bodyStyle:{padding:0}},i.a.createElement(Zt.a,{gutter:16},i.a.createElement(ea.a,{span:24},i.a.createElement(fa.a,{onSubmit:this.handleSubmit},i.a.createElement(ta.a,{pagination:!1,bordered:!0,dataSource:this.state.tableFormValues,columns:l}),i.a.createElement(c.a,{offsetBottom:0},i.a.createElement(ia.a,null,i.a.createElement(Zt.a,{gutter:16},i.a.createElement(ea.a,{span:12},i.a.createElement("span",null," \xa0\xa0on\xa0\xa0"),i.a.createElement(ma.a,{value:this.state.selectedDate,disabled:!0,onChange:function(t){return e.selectedDefaultDate(t)},format:"DD-MM-YYYY",allowClear:!1}),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement(sa.a,{onChange:this.onChangeHandle,defaultChecked:this.state.return_with_tax},"Return With Tax")),i.a.createElement(ea.a,{span:12},i.a.createElement(fa.a.Item,Object.assign({},{labelCol:{xs:{span:24},sm:{span:24}},wrapperCol:{xs:{span:24},sm:{span:24}}},{style:{marginBottom:0,float:"right"}}),i.a.createElement(Vt.a,{type:"primary",htmlType:"submit",style:{margin:5}},"Save Invoice"),t.props.history?i.a.createElement(Vt.a,{style:{margin:5,float:"right"},onClick:function(){return t.props.history.goBack()}},"Cancel"):null)))))))))))}}]),t}(i.a.Component),Qs=fa.a.create()(Ks);function Xs(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Js(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Xs(a,!0).forEach(function(t){Object(u.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Xs(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}$t.a.confirm;var $s=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).editInvoiceData=function(e){var t=Object(f.a)(a);a.setState({editInvoice:e},function(){t.props.history.push("/patient/"+e.patient_data.id+"/billing/invoices/edit/")})},a.returnInvoiceData=function(e){var t=Object(f.a)(a);a.setState({editInvoice:e},function(){t.props.history.push("/patient/"+e.patient_data.id+"/billing/invoices/return/")})},a.returnInvoiceClose=function(){a.setState({returnIncoiceVisible:!1})},a.handleSubmitReturnInvoice=function(e){var t=Object(f.a)(a);e.preventDefault(),a.props.form.validateFields(function(e,n){if(!e){var i=Js({},n,{practice:a.props.active_practiceId});dt(Ae,i,function(e){t.setState({returnIncoiceVisible:!1}),t.returnInvoiceData(t.state.editInvoice)},function(){})}})},a.loadPDF=function(e){Object(f.a)(a);ht(gt(Pe,[e]),function(e){e.report&&window.open(F+e.report)},function(){})},a.editModelOpen=function(e){var t=Object(f.a)(a);t.setState({editIncoiceVisible:!0,editInvoice:e});var n={practice:a.props.active_practiceId,type:"Invoice:"+e.invoice_id+" Edit"};dt(Te,n,function(a){t.setState({otpSent:!0,patientId:e.patient,invoiceId:e.id})},function(){})},a.editInvoiceClose=function(){a.setState({editIncoiceVisible:!1})},a.handleSubmitEditInvoice=function(e){var t=Object(f.a)(a);e.preventDefault(),a.props.form.validateFields(function(e,n){if(!e){var i=Js({},n,{practice:a.props.active_practiceId});dt(Ae,i,function(e){t.setState({editIncoiceVisible:!1}),t.editInvoiceData(t.state.editInvoice)},function(){})}})},a.cancelModalOpen=function(e){var t=Object(f.a)(a);t.setState({cancelIncoiceVisible:!0,editInvoice:e});var n={practice:a.props.active_practiceId,type:"Invoice:"+e.invoice_id+"  Cancellation"};dt(Te,n,function(a){t.setState({otpSent:!0,patientId:e.patient,invoiceId:e.id})},function(){})},a.cancelInvoiceClose=function(){a.setState({cancelIncoiceVisible:!1})},a.handleSubmitCancelInvoice=function(e){var t=Object(f.a)(a);e.preventDefault(),a.props.form.validateFields(function(e,n){if(!e){var i=Js({},n,{practice:a.props.active_practiceId});dt(Ae,i,function(e){t.setState({cancelIncoiceVisible:!1}),t.deleteInvoice(t.state.patientId,t.state.invoiceId)},function(){})}})},a.state={currentPatient:a.props.currentPatient,active_practiceId:a.props.active_practiceId,invoices:[],drug_catalog:null,procedure_category:null,taxes_list:null,editInvoice:null,loading:!0,cancelIncoiceVisible:!1,otpSent:!1,editIncoiceVisible:!1,returnIncoiceVisible:!1},a.loadInvoices=a.loadInvoices.bind(Object(f.a)(a)),a.loadDrugCatalog=a.loadDrugCatalog.bind(Object(f.a)(a)),a.loadProcedureCategory=a.loadProcedureCategory.bind(Object(f.a)(a)),a.loadTaxes=a.loadTaxes.bind(Object(f.a)(a)),a.editInvoiceData=a.editInvoiceData.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.loadInvoices()}},{key:"loadInvoices",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this;t.setState({loading:!0});var a=function(e){1==e.current?t.setState({total:e.count,invoices:e.results,loading:!1,loadMoreInvoice:e.next}):t.setState(function(t){return{total:e.count,invoices:[].concat(Object(wr.a)(t.invoices),Object(wr.a)(e.results)),loading:!1,loadMoreInvoice:e.next}})},n=function(){t.setState({loading:!1})},i={page:e,practice:this.props.active_practiceId};this.props.match.params.id&&(i.patient=this.props.match.params.id),ht(Oe,a,n,i)}},{key:"loadDrugCatalog",value:function(){var e=this;ht(gt(re,[this.props.active_practiceId]),function(t){e.setState({drug_catalog:t})},function(){})}},{key:"loadProcedureCategory",value:function(){var e=this;ht(gt(J,[this.props.active_practiceId]),function(t){e.setState({procedure_category:t})},function(){})}},{key:"loadTaxes",value:function(){var e=this;ht(gt(K,[this.props.active_practiceId]),function(t){e.setState({taxes_list:t})},function(){})}},{key:"returnModelOpen",value:function(e){var t=this;t.setState({returnIncoiceVisible:!0,editInvoice:e});var a={practice:this.props.active_practiceId,type:"Invoice:"+e.invoice_id+" Return"};dt(Te,a,function(a){t.setState({otpSent:!0,patientId:e.patient,invoiceId:e.id})},function(){})}},{key:"sendOTP",value:function(){ht("patients/resend_otp/",function(e){},function(){})}},{key:"deleteInvoice",value:function(e,t){var a=this,n={patient:e,is_cancelled:!0};ut(gt("invoice/%s/",[t]),n,function(e){bt(k,"Invoice cancelled successfully"),a.loadInvoices()},function(){})}},{key:"render",value:function(){var e=this,t=this,a={};this.state.drug_catalog&&this.state.drug_catalog.forEach(function(e){a[e.id]=e.name+","+e.strength});var n={};this.state.procedure_category&&this.state.procedure_category.forEach(function(e){n[e.id]=e.name});var r={};return this.state.taxes_list&&this.state.taxes_list.forEach(function(e){r[e.id]=e.name}),this.props.match.params.id?i.a.createElement("div",null,i.a.createElement(b.d,null,i.a.createElement(b.b,{path:"/patient/:id/billing/invoices/add",render:function(t){return i.a.createElement(zs,Object.assign({},e.state,t,{loadData:e.loadInvoices}))}}),i.a.createElement(b.b,{path:"/patient/:id/billing/invoices/edit",render:function(t){return e.state.editInvoice?i.a.createElement(zs,Object.assign({},e.state,t,{editId:e.state.editInvoice.id,loadData:e.loadInvoices})):i.a.createElement(b.a,{to:"/patient/"+e.props.match.params.id+"/billing/invoices"})}}),i.a.createElement(b.b,{path:"/patient/:id/billing/invoices/return",render:function(t){return e.state.editInvoice?i.a.createElement(Qs,Object.assign({},e.state,t,{editId:e.state.editInvoice.id,loadData:e.loadInvoices})):i.a.createElement(b.a,{to:"/patient/"+e.props.match.params.id+"/billing/invoices"})}}),i.a.createElement(b.b,null,i.a.createElement("div",null,i.a.createElement(o.a,{banner:!0,showIcon:!0,type:"info",message:"The invoices shown are only for the current selected practice!"}),i.a.createElement(c.a,{offsetTop:0},i.a.createElement(ia.a,{bodyStyle:{padding:0},style:{boxShadow:"0 5px 8px rgba(0, 0, 0, 0.09)"},title:(this.state.currentPatient?this.state.currentPatient.user.first_name+" Invoice ":"Invoices ")+(this.state.total?"(Total:".concat(this.state.total,")"):""),extra:i.a.createElement(Vt.a.Group,null,i.a.createElement(qt.b,{to:"/patient/"+this.props.match.params.id+"/billing/invoices/add"},i.a.createElement(Vt.a,{type:"primary"},i.a.createElement(Bt.a,{type:"plus"}),"Add")))})),this.state.invoices.map(function(e){return tc(e,t)}),i.a.createElement(Tt.a,{spinning:this.state.loading},i.a.createElement(Zt.a,null)),i.a.createElement(Ei,{loaderFunction:function(){return e.loadInvoices(e.state.loadMoreInvoice)},loading:this.state.loading,hidden:!this.state.loadMoreInvoice}))))):i.a.createElement("div",null,i.a.createElement(c.a,{offsetTop:0},i.a.createElement(ia.a,{bodyStyle:{padding:0},style:{boxShadow:"0 5px 8px rgba(0, 0, 0, 0.09)"},title:(this.state.currentPatient?this.state.currentPatient.user.first_name+" Invoice ":"Invoice ")+(this.state.total?"(Total:".concat(this.state.total,")"):""),extra:i.a.createElement(Vt.a.Group,null,i.a.createElement(Vt.a,{type:"primary",onClick:function(){return e.props.togglePatientListModal(!0)}},i.a.createElement(Bt.a,{type:"plus"}),"Add"))})),this.state.invoices.map(function(e){return tc(e,t)}),i.a.createElement(Tt.a,{spinning:this.state.loading},i.a.createElement(Zt.a,null)),i.a.createElement(Ei,{loaderFunction:function(){return e.loadInvoices(e.state.loadMoreInvoice)},loading:this.state.loading,hidden:!this.state.loadMoreInvoice}))}}]),t}(i.a.Component),Zs=fa.a.create()($s);function ec(e){return e?i.a.createElement("p",null,e.doctor?i.a.createElement(kl.a,{title:"Doctor"},i.a.createElement(Mt.a,{color:e.doctor?e.doctor.calendar_colour:null},i.a.createElement("b",null,"prescribed by  "+e.doctor.user.first_name," "))):null,e.practice?i.a.createElement(Mt.a,{style:{float:"right"}},i.a.createElement(kl.a,{title:"Practice Name"},i.a.createElement("b",null,e.practice.name," "))):null):null}function tc(e,t){var a=[],n=t.props.form.getFieldDecorator;if(e.reservation){var r=e.reservation_data.medicines.map(function(e){return Object.create(Js({},e,{unit:1,total:e.final_price,unit_cost:e.price,discount:0}))}),l={NORMAL:{total:"final_normal_price",tax:"normal_tax_value",unit_cost:"normal_price"},TATKAL:{total:"final_tatkal_price",tax:"tatkal_tax_value",unit_cost:"tatkal_price"}};a=[].concat(Object(wr.a)(a),[Js({},e.reservation_data.bed_package,{unit:1,total:e.reservation_data.bed_package?e.reservation_data.bed_package[l[e.reservation_data.seat_type].total]:null,tax_value:e.reservation_data.bed_package?e.reservation_data.bed_package[l[e.reservation_data.seat_type].tax]:null,unit_cost:e.reservation_data.bed_package?e.reservation_data.bed_package[l[e.reservation_data.seat_type].unit_cost]:null})],Object(wr.a)(r))}return i.a.createElement(ia.a,{key:e.id,style:{marginTop:10},bodyStyle:{padding:0},title:i.a.createElement("small",null,e.date?ya()(e.date).format("ll"):null,t.state.currentPatient?null:i.a.createElement("span",null,i.a.createElement(qt.b,{to:"/patient/"+(e.patient_data?e.patient_data.id:null)+"/billing/invoices"},"\xa0\xa0 ",e.patient_data?e.patient_data.user.first_name:null," (ID: ",e.patient_data?e.patient_data.id:null,")\xa0"),", ",e.patient_data?e.patient_data.gender:null)),extra:i.a.createElement(At.a.Button,{size:"small",style:{float:"right"},overlay:i.a.createElement(Ht.a,null,i.a.createElement(Ht.a.Item,{key:"1"},i.a.createElement(qt.b,{to:"/patient/"+(e.patient_data?e.patient_data.id:null)+"/billing/payments/add"},i.a.createElement(Bt.a,{type:"dollar"}),"\xa0 Pay")),i.a.createElement(Ht.a.Divider,null),i.a.createElement(Ht.a.Item,{key:"2",onClick:function(){return t.editModelOpen(e)},disabled:e.practice!=t.props.active_practiceId||e.payments_data||e.is_cancelled},i.a.createElement(Bt.a,{type:"edit"}),"Edit"),i.a.createElement(Ht.a.Item,{key:"5",onClick:function(){return t.returnModelOpen(e)},disabled:e.practice!=t.props.active_practiceId||e.payments_data||e.is_cancelled},i.a.createElement(Bt.a,{type:"redo"}),"Return"),i.a.createElement(Ht.a.Item,{key:"3",onClick:function(){return t.cancelModalOpen(e)},disabled:e.practice!=t.props.active_practiceId||e.payments_data||e.is_cancelled},i.a.createElement(Bt.a,{type:"delete"}),"Cancel"),i.a.createElement(Ht.a.Divider,null),i.a.createElement(Ht.a.Item,{key:"4"},i.a.createElement(qt.b,{to:"/patient/"+e.patient+"/emr/timeline"},i.a.createElement(Bt.a,{type:"clock-circle"}),"Patient Timeline")))},i.a.createElement("a",{onClick:function(){return t.loadPDF(e.id)}},i.a.createElement(Bt.a,{type:"printer"})))},i.a.createElement(Zt.a,{gutter:8},i.a.createElement(ea.a,{xs:24,sm:24,md:6,lg:4,xl:4,xxl:4,style:{padding:10}},e.is_cancelled?i.a.createElement(o.a,{message:"Cancelled",type:"error",showIcon:!0}):null,i.a.createElement(na.a,{style:{marginBottom:0}},e.invoice_id),i.a.createElement(zl.a,{title:"Paid / Total ",value:e.payments_data?e.payments_data.toFixed(2):0,suffix:"/ "+e.total.toFixed(2)})),i.a.createElement(ea.a,{xs:24,sm:24,md:18,lg:20,xl:20,xxl:20},"Membership Amount."==e.type?i.a.createElement(ta.a,{bordered:!0,pagination:!1,columns:ac,dataSource:[{inventory:!0,name:"Membership",unit_cost:e.total,unit:1,discount_value:0,tax_value:0,total:e.total}],footer:function(){return ec({practice:e.practice_data})}}):i.a.createElement(ta.a,{bordered:!0,pagination:!1,columns:ac,dataSource:[].concat(Object(wr.a)(a),Object(wr.a)(e.inventory),Object(wr.a)(e.procedure)),footer:function(){return ec({practice:e.practice_data})}}))),i.a.createElement($t.a,{visible:t.state.cancelIncoiceVisible&&t.state.editInvoice&&t.state.editInvoice.id==e.id,title:"Cancel Invoice",footer:null,onOk:t.handleSubmitCancelInvoice,onCancel:t.cancelInvoiceClose},i.a.createElement(fa.a,null,i.a.createElement(fa.a.Item,null,n("otp",{rules:[{required:!0,message:"Please input Otp!"}]})(i.a.createElement(ga.a,{prefix:i.a.createElement(Bt.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Otp"}))),i.a.createElement(fa.a.Item,null,t.state.otpSent?i.a.createElement("a",{style:{float:"right"},type:"primary",onClick:t.sendOTP},"Resend Otp ?"):null,i.a.createElement(Vt.a,{size:"small",type:"primary",htmlType:"submit",onClick:t.handleSubmitCancelInvoice},"Submit"),"\xa0",i.a.createElement(Vt.a,{size:"small",onClick:t.cancelInvoiceClose},"Close")))),i.a.createElement($t.a,{visible:t.state.editIncoiceVisible&&t.state.editInvoice&&t.state.editInvoice.id==e.id,title:"Edit Invoice",footer:null,onOk:t.handleSubmitEditInvoice,onCancel:t.editInvoiceClose},i.a.createElement(fa.a,null,i.a.createElement(fa.a.Item,null,n("otp",{rules:[{required:!0,message:"Please input Otp!"}]})(i.a.createElement(ga.a,{prefix:i.a.createElement(Bt.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Otp"}))),i.a.createElement(fa.a.Item,null,t.state.otpSent?i.a.createElement("a",{style:{float:"right"},type:"primary",onClick:t.sendOTP},"Resend Otp ?"):null,i.a.createElement(Vt.a,{size:"small",type:"primary",htmlType:"submit",onClick:t.handleSubmitEditInvoice},"Submit"),"\xa0",i.a.createElement(Vt.a,{size:"small",onClick:t.editInvoiceClose},"Close")))),i.a.createElement($t.a,{visible:t.state.returnIncoiceVisible&&t.state.editInvoice&&t.state.editInvoice.id==e.id,title:"Return Invoice",footer:null,onOk:t.handleSubmitReturnInvoice,onCancel:t.returnInvoiceClose},i.a.createElement(fa.a,null,i.a.createElement(fa.a.Item,null,n("otp",{rules:[{required:!0,message:"Please input Otp!"}]})(i.a.createElement(ga.a,{prefix:i.a.createElement(Bt.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Otp"}))),i.a.createElement(fa.a.Item,null,t.state.otpSent?i.a.createElement("a",{style:{float:"right"},type:"primary",onClick:t.sendOTP},"Resend Otp ?"):null,i.a.createElement(Vt.a,{size:"small",type:"primary",htmlType:"submit",onClick:t.handleSubmitReturnInvoice},"Submit"),"\xa0",i.a.createElement(Vt.a,{size:"small",onClick:t.returnInvoiceClose},"Close")))))}var ac=[{title:"Treatment & Products",dataIndex:"drug",key:"drug",render:function(e,t){return i.a.createElement("span",null," ",i.a.createElement("b",null,t.name?t.name:null),i.a.createElement("br",null)," ",t.doctor_data?i.a.createElement(Mt.a,{color:t.doctor_data?t.doctor_data.calendar_colour:null},i.a.createElement("b",null,"prescribed by  "+t.doctor_data.user.first_name," ")):null)}},{title:"Cost",dataIndex:"unit_cost",key:"unit_cost",render:function(e,t){return i.a.createElement("span",null,t.unit_cost?t.unit_cost.toFixed(2):null)}},{title:"Unit",dataIndex:"unit",key:"unit"},{title:"Discount",dataIndex:"discount_value",key:"discount_value",render:function(e,t){return i.a.createElement("span",null,t.discount_value?t.discount_value.toFixed(2):null)}},{title:"Tax",dataIndex:"tax_value",key:"tax_value",render:function(e,t){return i.a.createElement("span",null,t.tax_value?t.tax_value.toFixed(2):null)}},{title:"Total",dataIndex:"total",key:"total",render:function(e){return e?e.toFixed(2):null}}];i.a.Component;function nc(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function ic(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?nc(a,!0).forEach(function(t){Object(u.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):nc(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var rc=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).loadPaymentModes=function(){var e=Object(f.a)(a);ht(gt(X,[a.props.active_practiceId]),function(t){e.setState({paymentModes:t,selectedPaymentMode:t.length?t[0].id:null})},function(){})},a.loadInvoices=function(){var e=Object(f.a)(a);e.setState({invoiceLoading:!0});ht(Oe,function(t){e.setState(function(e){return{invoicesList:[].concat(Object(wr.a)(t.results),Object(wr.a)(e.addedInvoice)),invoiceLoading:!1,loadMoreInvoice:t.next}},function(){e.calculateInvoicePayments()})},function(){e.setState({invoiceLoading:!1})},{page:e.state.loadMoreInvoice||1,is_cancelled:!1,is_pending:!0,patient:a.props.match.params.id,practice:a.props.active_practiceId})},a.addInvoiceToPayments=function(e){var t=Object(f.a)(a);a.setState(function(t){var a=null;return t.invoicesList.forEach(function(t){t.id==e&&(a=t)}),a?{addedInvoice:[].concat(Object(wr.a)(t.addedInvoice),[a]),addedInvoiceId:ic({},t.addedInvoiceId,Object(u.a)({},e,!0)),invoicePayments:ic({},t.addedInvoiceId,Object(u.a)({},e,0))}:null},function(){t.calculateInvoicePayments()})},a.removeInvoiceToPayments=function(e){var t=Object(f.a)(a);a.setState(function(t){var a=[];return t.addedInvoice.forEach(function(t){t.id!=e&&a.push(t)}),a?{addedInvoice:a,addedInvoiceId:ic({},t.addedInvoiceId,Object(u.a)({},e,!1))}:null},function(){t.calculateInvoicePayments()})},a.calculateInvoicePayments=function(){a.setState(function(e){var t=0,a=e.totalPayingAmount,n={};return e.addedInvoice.forEach(function(e){var i=e.total-e.payments_data+e.pay_amount+e.pay_amount_wallet;t+=i,a>=i?(a-=i,n[e.id]=i):(n[e.id]=a,a=0)}),{totalPayableAmount:t.toFixed(2),invoicePayments:n}})},a.setPaymentAmount=function(e){var t=Object(f.a)(a);a.setState({totalPayingAmount:e},function(){t.calculateInvoicePayments()})},a.changeSelectedPaymentMode=function(e){a.setState({selectedPaymentMode:e})},a.handleSubmit=function(e){if(!a.state.totalPayingAmount)return bt(O,"Payment Amount of O INR is not allowed."),!1;a.setState({loading:!0});var t=Object(f.a)(a),n={invoices:[],bank:"",number:0,is_advance:!1,is_active:!0,is_cancelled:!1,practice:t.props.active_practiceId,patient:t.props.match.params.id,payment_mode:t.state.selectedPaymentMode};Object.keys(t.state.invoicePayments).forEach(function(e){n.invoices.push({pay_amount:t.state.invoicePayments[e],is_active:!0,invoice:e})});a.props.editPayment&&(n.id=a.props.editPayment.id),dt(xe,n,function(e){t.setState({loading:!1}),t.props.loadData&&t.props.loadData(),t.props.history.push("/patient/"+t.props.match.params.id+"/billing/payments")},function(){t.setState({loading:!1})})},a.state={invoicesList:[],invoiceLoading:!0,addedInvoiceId:{},addedInvoice:[],paymentModes:[],totalPayableAmount:0,invoicePayments:{},totalPayingAmount:0,selectedPaymentMode:null},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentWillMount",value:function(){var e=this;if(this.props.editPayment&&this.props.editPayment.invoices){var t={},a=[],n=0;this.props.editPayment.invoices.forEach(function(e){t[e.invoice]=!0,a.push(ic({},e,{},e.invoice_data)),n+=e.pay_amount+e.pay_amount_wallet}),this.setState({addedInvoiceId:t,addedInvoice:a},function(){e.calculateInvoicePayments(),e.setPaymentAmount(n)})}this.loadInvoices(),this.loadPaymentModes()}},{key:"render",value:function(){var e=this,t=this;return i.a.createElement("div",null,i.a.createElement(Zt.a,{gutter:8},i.a.createElement(ea.a,{xs:24,sm:24,md:16,lg:16,xl:18,xxl:18},i.a.createElement(ia.a,null,i.a.createElement(Zt.a,null,i.a.createElement(ea.a,{span:24},i.a.createElement("table",{style:{width:"100%"}},i.a.createElement("tr",{style:{borderBottom:"2px solid #ccc"}},i.a.createElement("td",{style:{width:"20%"}},i.a.createElement("small",null,"INVOICE NO")),i.a.createElement("td",{style:{width:"20%"}},i.a.createElement("small",null,"PROCEDURE")),i.a.createElement("td",{style:{width:"20%",textAlign:"right"}},i.a.createElement("small",null,"DUE (INR)")),i.a.createElement("td",{style:{width:"20%",textAlign:"right"}},i.a.createElement("small",null,"PAY NOW (INR)")),i.a.createElement("td",{style:{width:"20%",textAlign:"right"}},i.a.createElement("small",null,"DUE AFTER PAYMENT (INR)"))),this.state.addedInvoice.map(function(a){return i.a.createElement("tr",{style:{borderBottom:"2px solid #ccc"}},i.a.createElement("td",null,i.a.createElement(Vt.a,{size:"small",type:"danger",shape:"circle",icon:"close",style:{position:"absolute",right:"-35px"},onClick:function(){return e.removeInvoiceToPayments(a.id)}}),i.a.createElement("h3",null,a.invoice_id),a.date),i.a.createElement("td",null,a.procedure.map(function(e){return e.procedure_data.name+", "}),a.inventory.map(function(e){return e.inventory_item_data.name+", "}),a.reservation?a.type+",":null,a.reservation_data&&a.reservation_data.medicines?a.reservation_data.medicines.map(function(e){return e.name+","}):null),i.a.createElement("td",{style:{textAlign:"right"}},i.a.createElement("b",null,(a.total-a.payments_data+a.pay_amount+a.pay_amount_wallet).toFixed(2))),i.a.createElement("td",{style:{textAlign:"right"}},i.a.createElement("b",null,t.state.invoicePayments[a.id])),i.a.createElement("td",{style:{textAlign:"right"}},i.a.createElement("b",null,(a.total-a.payments_data+a.pay_amount+a.pay_amount_wallet-t.state.invoicePayments[a.id]).toFixed(2))))})))),i.a.createElement(Zt.a,{style:{borderBottom:"2px dashed #ccc",marginTop:"20px"}},i.a.createElement(ea.a,{span:6},i.a.createElement("h3",null,"Total Payable :")),i.a.createElement(ea.a,{span:6},i.a.createElement("h2",null,this.state.totalPayableAmount))),i.a.createElement(Zt.a,{gutter:16,style:{marginTop:"20px"}},i.a.createElement(ea.a,{span:6},i.a.createElement("h3",null,"Pay Now:")),i.a.createElement(ea.a,{span:6},i.a.createElement(pa.a,{min:0,step:1,max:this.state.totalPayableAmount,value:this.state.totalPayingAmount,onChange:this.setPaymentAmount})),i.a.createElement(ea.a,{span:6},i.a.createElement(Lt.a,{style:{width:"100%"},value:this.state.selectedPaymentMode,onChange:this.changeSelectedPaymentMode},this.state.paymentModes.map(function(e){return i.a.createElement(Lt.a.Option,{value:e.id},e.mode)}))),i.a.createElement(ea.a,{span:6},i.a.createElement(aa.a,{title:"Are you sure to take payment of INR "+this.state.totalPayingAmount+"?",onConfirm:this.handleSubmit},i.a.createElement(Vt.a,{type:"primary"},"Save Payments")))))),i.a.createElement(ea.a,{xs:24,sm:24,md:6,lg:8,xl:6,xxl:6},i.a.createElement(Rt.a,{loading:this.state.invoiceLoading,dataSource:this.state.invoicesList,renderItem:function(a){return t.state.addedInvoiceId[a.id]?i.a.createElement("div",null):i.a.createElement(ia.a,{hoverable:!0,onClick:function(){return e.addInvoiceToPayments(a.id)},style:{marginBottom:"10px"}},i.a.createElement("table",{style:{width:"100%"}},i.a.createElement("tr",null,i.a.createElement("td",{style:{maxWidth:"calc(100% - 60px)"}},i.a.createElement("h4",null,a.invoice_id)),i.a.createElement("td",{style:{textAlign:"right"}},i.a.createElement("b",null,a.date)))),i.a.createElement(na.a,{style:{margin:0}}),i.a.createElement("table",{style:{width:"100%"}},a.procedure.map(function(e){return i.a.createElement("tr",null,i.a.createElement("td",{style:{maxWidth:"calc(100% - 60px)"}},e.procedure_data.name),i.a.createElement("td",{style:{textAlign:"right"}},i.a.createElement("b",null,(e.unit*e.unit_cost).toFixed(2))))}),a.inventory.map(function(e){return i.a.createElement("tr",null,i.a.createElement("td",{style:{maxWidth:"calc(100% - 60px)"}},e.inventory_item_data.name),i.a.createElement("td",{style:{textAlign:"right"}},i.a.createElement("b",null,(e.unit*e.unit_cost).toFixed(2))))}),a.reservation?i.a.createElement("tr",null,i.a.createElement("td",{style:{maxWidth:"calc(100% - 60px)"}},a.type),i.a.createElement("td",{style:{textAlign:"right"}},i.a.createElement("b",null,a.reservation_data.bed_package_price?a.reservation_data.bed_package_price.toFixed(2):null))):null,a.reservation_data&&a.reservation_data.medicines?i.a.createElement(i.a.Fragment,null,a.reservation_data.medicines.map(function(e){return i.a.createElement("tr",null,i.a.createElement("td",{style:{maxWidth:"calc(100% - 60px)"}},e.name),i.a.createElement("td",{style:{textAlign:"right"}},i.a.createElement("b",null,e.final_price.toFixed(2))))})):null),i.a.createElement(na.a,{style:{margin:0}}),i.a.createElement("table",{style:{width:"100%"}},i.a.createElement("tr",null,i.a.createElement("td",{style:{maxWidth:"calc(100% - 60px)"}},"Invoice Amount"),i.a.createElement("td",{style:{textAlign:"right"}},i.a.createElement("b",null,a.total.toFixed(2)))),i.a.createElement("tr",null,i.a.createElement("td",{style:{maxWidth:"calc(100% - 60px)"}},"Paid Amount"),i.a.createElement("td",{style:{textAlign:"right"}},i.a.createElement("b",null,a.payments_data?a.payments_data.toFixed(2):0))),i.a.createElement("tr",null,i.a.createElement("td",{style:{maxWidth:"calc(100% - 60px)"}},i.a.createElement("b",null,"Amount Due")),i.a.createElement("td",{style:{textAlign:"right"}},i.a.createElement("b",null,(a.total-a.payments_data).toFixed(2))))))}}))))}}]),t}(i.a.Component);function lc(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function sc(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?lc(a,!0).forEach(function(t){Object(u.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):lc(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}Yi.Modal.confirm;var cc=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).loadPayments=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=Object(f.a)(a);a.setState({loading:!0});var n=function(e){t.setState(function(t){return 1==e.current?{payments:Object(wr.a)(e.results),next:e.next,loading:!1}:{payments:[].concat(Object(wr.a)(t.payments),Object(wr.a)(e.results)),next:e.next,loading:!1}})},i=function(){t.setState({loading:!1})},r={page:e,practice:a.props.active_practiceId};a.props.match.params.id&&(r.patient=a.props.match.params.id),ht(xe,n,i,r)},a.loadPDF=function(e){Object(f.a)(a);ht(gt($e,[e]),function(e){e.report&&window.open(F+e.report)},function(){})},a.editModelOpen=function(e){var t=Object(f.a)(a);t.setState({editPaymentVisible:!0,editPayment:e});var n={practice:a.props.active_practiceId,type:"Payment:"+e.payment_id+" Edit"};dt(Te,n,function(a){t.setState({otpSent:!0,patientId:e.patient,paymentId:e.payment_id})},function(){})},a.editPaymentClose=function(){a.setState({editPaymentVisible:!1})},a.handleSubmitEditPayment=function(e){var t=Object(f.a)(a);e.preventDefault(),a.props.form.validateFields(function(e,n){if(!e){var i=sc({},n,{practice:a.props.active_practiceId});dt(Ae,i,function(e){t.setState({editPaymentVisible:!1}),t.editPaymentData(t.state.editPayment)},function(){})}})},a.cancelModalOpen=function(e){var t=Object(f.a)(a);t.setState({cancelPaymentVisible:!0,editPayment:e});var n={practice:a.props.active_practiceId,type:"Payment:"+e.payment_id+"  Cancellation"};dt(Te,n,function(a){t.setState({otpSent:!0,patientId:e.patient,paymentId:e.id})},function(){})},a.handleSubmitCancelPayment=function(e){var t=Object(f.a)(a);e.preventDefault(),a.props.form.validateFields(function(e,n){if(!e){var i=sc({},n,{practice:a.props.active_practiceId});dt(Ae,i,function(e){t.setState({cancelPaymentVisible:!1}),t.deletePayment(t.state.patientId,t.state.paymentId)},function(){})}})},a.cancelPaymentClose=function(){a.setState({cancelPaymentVisible:!1})},a.state={payments:[],active_practiceId:a.props.active_practiceId,loading:!0,otpSent:!1,editPaymentVisible:!1},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.loadPayments()}},{key:"editPaymentData",value:function(e){this.setState({editPayment:e}),this.props.history.push("/patient/"+e.patient+"/billing/payments/edit")}},{key:"deletePayment",value:function(e,t){console.log("Canceled",t);var a=this,n={patient:e,is_cancelled:!0};console.log("reqdata",n),ut(gt("payment/%s/",[t]),n,function(e){bt(k,"Payment cancelled successfully"),a.loadPayments()},function(){})}},{key:"sendOTP",value:function(){ht("patients/resend_otp/",function(e){},function(){})}},{key:"render",value:function(){var e=this,t=this,a={};return this.state.paymentModes&&this.state.paymentModes.forEach(function(e){a[e.id]=e.mode}),this.props.match.params.id?i.a.createElement("div",null,i.a.createElement(b.d,null,i.a.createElement(b.b,{exact:!0,path:"/patient/:id/billing/payments/add",render:function(t){return i.a.createElement(rc,Object.assign({},e.state,t,e.props,{loadData:e.loadPayments}))}}),i.a.createElement(b.b,{exact:!0,path:"/patient/:id/billing/payments/edit",render:function(a){return t.state.editPayment?i.a.createElement(rc,Object.assign({},e.state,a,{loadData:e.loadPayments})):i.a.createElement(b.a,{to:"/patient/"+a.match.params.id+"/billing/payments"})}}),i.a.createElement(b.b,null,i.a.createElement("div",null,i.a.createElement(o.a,{banner:!0,showIcon:!0,type:"info",message:"The payments shown are only for the current selected practice!"}),i.a.createElement(ia.a,{bodyStyle:{padding:0},title:this.state.currentPatient?this.state.currentPatient.name+" Payments":"Payments",extra:i.a.createElement(Vt.a.Group,null,i.a.createElement(qt.b,{to:"/patient/"+this.props.match.params.id+"/billing/payments/add"},i.a.createElement(Vt.a,null,i.a.createElement(Bt.a,{type:"plus"}),"Add")))}),this.state.payments.map(function(t){return dc(t,e)}),i.a.createElement(Tt.a,{spinning:this.state.loading},i.a.createElement(Zt.a,null)),i.a.createElement(Ei,{loaderFunction:function(){return e.loadPayments(t.state.next)},loading:this.state.loading,hidden:!this.state.next}))))):i.a.createElement("div",null,i.a.createElement(ia.a,{bodyStyle:{padding:0},title:this.state.currentPatient?this.state.currentPatient.name+" Payments":"Payments",extra:i.a.createElement(Vt.a.Group,null,i.a.createElement(Vt.a,{type:"primary",onClick:function(){return e.props.togglePatientListModal(!0)}},i.a.createElement(Bt.a,{type:"plus"}),"Add"))}),this.state.payments.map(function(t){return dc(t,e)}),i.a.createElement(Tt.a,{spinning:this.state.loading},i.a.createElement(Zt.a,null)),i.a.createElement(Ei,{loaderFunction:function(){return e.loadPayments(t.state.next)},loading:this.state.loading,hidden:!this.state.next}))}}]),t}(i.a.Component),oc=fa.a.create()(cc),uc=[{title:"INVOICE",dataIndex:"invoice_id",key:"invoice",render:function(e){return i.a.createElement("span",null,e)}},{title:"Amount Paid",key:"pay_amount",dataIndex:"pay_amount"}];function dc(e,t){var a=t.props.form.getFieldDecorator;return i.a.createElement(ia.a,{style:{marginTop:10},bodyStyle:{padding:0},title:e.patient_data&&!t.props.currentPatient?i.a.createElement("small",null,e.created_at?ya()(e.created_at).format("lll"):null,i.a.createElement(qt.b,{to:"/patient/"+e.patient_data.id+"/billing/payments"},"\xa0\xa0 ",e.patient_data.user.first_name," (ID: ",e.patient_data.id,")\xa0"),i.a.createElement("span",null,", ",e.patient_data.gender)):i.a.createElement("small",null,e.created_at?ya()(e.created_at).format("lll"):null),extra:i.a.createElement(At.a.Button,{size:"small",style:{float:"right"},overlay:i.a.createElement(Ht.a,null,i.a.createElement(Ht.a.Item,{key:"2",onClick:function(){return t.editModelOpen(e)},disabled:e.practice!=t.props.active_practiceId},i.a.createElement(Bt.a,{type:"edit"}),"Edit"),i.a.createElement(Ht.a.Item,{key:"3",onClick:function(){return t.cancelModalOpen(e)},disabled:e.practice!=t.props.active_practiceId||e.is_cancelled},i.a.createElement(Bt.a,{type:"delete"}),"Cancel"),i.a.createElement(Ht.a.Divider,null),i.a.createElement(Ht.a.Item,{key:"4"},i.a.createElement(qt.b,{to:"/patient/"+e.patient+"/emr/timeline"},i.a.createElement(Bt.a,{type:"clock-circle"}),"Patient Timeline")))},i.a.createElement("a",{onClick:function(){return t.loadPDF(e.id)}},i.a.createElement(Bt.a,{type:"printer"})))},i.a.createElement(Zt.a,{gutter:8},i.a.createElement(ea.a,{xs:24,sm:24,md:6,lg:4,xl:4,xxl:4,style:{padding:10}},e.is_cancelled?i.a.createElement(o.a,{message:"Cancelled",type:"error",showIcon:!0}):null,i.a.createElement(na.a,{style:{marginBottom:0}},e.payment_id)),i.a.createElement(ea.a,{xs:24,sm:24,md:18,lg:20,xl:20,xxl:20},i.a.createElement(ta.a,{columns:uc,pagination:!1,footer:function(){return function(e){if(e)return i.a.createElement("p",null,e.doctor?i.a.createElement(kl.a,{title:"Doctor"},i.a.createElement(Mt.a,{color:e.doctor?e.doctor.calendar_colour:null},i.a.createElement("b",null,"prescribed by  "+e.doctor.user.first_name," "))):null,e.practice?i.a.createElement(Mt.a,{style:{float:"right"}},i.a.createElement(kl.a,{title:"Practice Name"},i.a.createElement("b",null,e.practice.name," "))):null);return null}({practice:e.practice_data})},dataSource:e.invoices,rowKey:e.id}))),i.a.createElement(Yi.Modal,{visible:t.state.editPaymentVisible&&t.state.editPayment&&t.state.editPayment.id==e.id,title:"Edit Payment",footer:null,onOk:t.handleSubmitEditPayment,onCancel:t.editPaymentClose},i.a.createElement(fa.a,null,i.a.createElement(fa.a.Item,null,a("otp",{rules:[{required:!0,message:"Please input Otp!"}]})(i.a.createElement(ga.a,{prefix:i.a.createElement(Bt.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Otp"}))),i.a.createElement(fa.a.Item,null,t.state.otpSent?i.a.createElement("a",{style:{float:"right"},type:"primary",onClick:t.sendOTP},"Resend Otp ?"):null,i.a.createElement(Vt.a,{size:"small",type:"primary",htmlType:"submit",onClick:t.handleSubmitEditPayment},"Submit"),"\xa0",i.a.createElement(Vt.a,{size:"small",onClick:t.editPaymentClose},"Close")))),i.a.createElement(Yi.Modal,{visible:t.state.cancelPaymentVisible&&t.state.editPayment&&t.state.editPayment.id==e.id,title:"Cancel Payment",footer:null,onOk:t.handleSubmitCancelPayment,onCancel:t.cancelPaymentClose},i.a.createElement(fa.a,null,i.a.createElement(fa.a.Item,null,a("otp",{rules:[{required:!0,message:"Please input Otp!"}]})(i.a.createElement(ga.a,{prefix:i.a.createElement(Bt.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Otp"}))),i.a.createElement(fa.a.Item,null,t.state.otpSent?i.a.createElement("a",{style:{float:"right"},type:"primary",onClick:t.sendOTP},"Resend Otp ?"):null,i.a.createElement(Vt.a,{size:"small",type:"primary",htmlType:"submit",onClick:t.handleSubmitCancelPayment},"Submit"),"\xa0",i.a.createElement(Vt.a,{size:"small",onClick:t.cancelPaymentClose},"Close")))))}function mc(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function pc(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?mc(a,!0).forEach(function(t){Object(u.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):mc(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var hc=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).loadPDF=function(e){Object(f.a)(a);ht(gt(Le,[e]),function(e){e.report&&window.open(F+e.report)},function(){})},a.cancelModalOpen=function(e){var t=Object(f.a)(a);t.setState({cancelReturnIncoiceVisible:!0,editReturnInvoice:e});var n={practice:a.props.active_practiceId,type:"Return Invoice:"+e.return_id+"  Cancellation"};dt(Te,n,function(a){t.setState({otpSent:!0,patientId:e.patient,returnInvoiceId:e.id})},function(){})},a.cancelReturnInvoiceClose=function(){a.setState({cancelReturnIncoiceVisible:!1})},a.handleSubmitCancelReturnInvoice=function(e){var t=Object(f.a)(a);e.preventDefault(),a.props.form.validateFields(function(e,n){if(!e){var i=pc({},n,{practice:a.props.active_practiceId});dt(Ae,i,function(e){t.setState({cancelReturnIncoiceVisible:!1}),t.deleteReturnInvoice(t.state.patientId,t.state.returnInvoiceId)},function(){})}})},a.state={currentPatient:a.props.currentPatient,active_practiceId:a.props.active_practiceId,returnInvoices:[],drug_catalog:null,procedure_category:null,taxes_list:null,loading:!0,cancelReturnIncoiceVisible:!1},a.loadReturnInvoices=a.loadReturnInvoices.bind(Object(f.a)(a)),a.loadDrugCatalog=a.loadDrugCatalog.bind(Object(f.a)(a)),a.loadProcedureCategory=a.loadProcedureCategory.bind(Object(f.a)(a)),a.loadTaxes=a.loadTaxes.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.loadReturnInvoices()}},{key:"loadReturnInvoices",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this;t.setState({loading:!0});var a=function(e){1==e.current?t.setState({total:e.count,returnInvoices:e.results,loading:!1,loadMoreReturnInvoice:e.next}):t.setState(function(t){return{total:e.count,returnInvoices:[].concat(Object(wr.a)(t.returnInvoices),Object(wr.a)(e.results)),loading:!1,loadMoreReturnInvoice:e.next}})},n=function(){t.setState({loading:!1})},i={page:e,practice:this.props.active_practiceId};this.props.match.params.id&&(i.patient=this.props.match.params.id),ht(Me,a,n,i)}},{key:"loadDrugCatalog",value:function(){var e=this;ht(gt(re,[this.props.active_practiceId]),function(t){e.setState({drug_catalog:t})},function(){})}},{key:"loadProcedureCategory",value:function(){var e=this;ht(gt(J,[this.props.active_practiceId]),function(t){e.setState({procedure_category:t})},function(){})}},{key:"loadTaxes",value:function(){var e=this;ht(gt(K,[this.props.active_practiceId]),function(t){e.setState({taxes_list:t})},function(){})}},{key:"sendOTP",value:function(){ht("patients/resend_otp/",function(e){},function(){})}},{key:"deleteReturnInvoice",value:function(e,t){var a=this,n={patient:e,is_cancelled:!0};ut(gt("return/%s/",[t]),n,function(e){bt(k,"Return Invoice cancelled successfully"),a.loadReturnInvoices()},function(){})}},{key:"render",value:function(){var e=this,t=this,a={};this.state.drug_catalog&&this.state.drug_catalog.forEach(function(e){a[e.id]=e.name+","+e.strength});var n={};this.state.procedure_category&&this.state.procedure_category.forEach(function(e){n[e.id]=e.name});var r={};return this.state.taxes_list&&this.state.taxes_list.forEach(function(e){r[e.id]=e.name}),this.props.match.params.id?i.a.createElement("div",null,i.a.createElement(b.d,null,i.a.createElement(b.b,null,i.a.createElement("div",null,i.a.createElement(o.a,{banner:!0,showIcon:!0,type:"info",message:"The invoices return shown are only for the current selected practice!"}),i.a.createElement(c.a,{offsetTop:0},i.a.createElement(ia.a,{bodyStyle:{padding:0},style:{boxShadow:"0 5px 8px rgba(0, 0, 0, 0.09)"},title:(this.state.currentPatient?this.state.currentPatient.user.first_name+" Invoice Return":"Invoices Return ")+(this.state.total?"(Total:".concat(this.state.total,")"):"")})),this.state.returnInvoices.map(function(e){return gc(e,t)}),i.a.createElement(Tt.a,{spinning:this.state.loading},i.a.createElement(Zt.a,null)),i.a.createElement(Ei,{loaderFunction:function(){return e.loadInvoices(e.state.loadMoreInvoice)},loading:this.state.loading,hidden:!this.state.loadMoreInvoice}))))):i.a.createElement("div",null,i.a.createElement(c.a,{offsetTop:0},i.a.createElement(ia.a,{bodyStyle:{padding:0},style:{boxShadow:"0 5px 8px rgba(0, 0, 0, 0.09)"},title:(this.state.currentPatient?this.state.currentPatient.user.first_name+" Invoice Return":"Invoice Return ")+(this.state.total?"(Total:".concat(this.state.total,")"):"")})),this.state.returnInvoices.map(function(e){return gc(e,t)}),i.a.createElement(Tt.a,{spinning:this.state.loading},i.a.createElement(Zt.a,null)),i.a.createElement(Ei,{loaderFunction:function(){return e.loadInvoices(e.state.loadMoreInvoice)},loading:this.state.loading,hidden:!this.state.loadMoreInvoice}))}}]),t}(i.a.Component),fc=fa.a.create()(hc);function gc(e,t){var a=t.props.form.getFieldDecorator;return i.a.createElement(ia.a,{key:e.id,style:{marginTop:10},bodyStyle:{padding:0},title:i.a.createElement("small",null,e.date?ya()(e.date).format("ll"):null,t.state.currentPatient?null:i.a.createElement("span",null,i.a.createElement(qt.b,{to:"/patient/"+(e.patient_data?e.patient_data.id:null)+"/billing/return/invoices"},"\xa0\xa0 ",e.patient_data?e.patient_data.user.first_name:null," (ID: ",e.patient_data?e.patient_data.id:null,")\xa0"),", ",e.patient_data?e.patient_data.gender:null)),extra:i.a.createElement(At.a.Button,{size:"small",style:{float:"right"},overlay:i.a.createElement(Ht.a,null,i.a.createElement(Ht.a.Item,{key:"1",onClick:function(){return t.cancelModalOpen(e)},disabled:e.practice!=t.props.active_practiceId||e.payments_data||e.is_cancelled},i.a.createElement(Bt.a,{type:"delete"}),"Cancel"))},i.a.createElement("a",{onClick:function(){return t.loadPDF(e.id)}},i.a.createElement(Bt.a,{type:"printer"})))},i.a.createElement(Zt.a,{gutter:8},i.a.createElement(ea.a,{xs:24,sm:24,md:6,lg:4,xl:4,xxl:4,style:{padding:10}},e.is_cancelled?i.a.createElement(o.a,{message:"Cancelled",type:"error",showIcon:!0}):null,i.a.createElement(na.a,{style:{marginBottom:0}},e.return_id),i.a.createElement(zl.a,{style:{textAlign:"center"},title:"Return",value:e.return_value.toFixed(2)})),i.a.createElement(ea.a,{xs:24,sm:24,md:18,lg:20,xl:20,xxl:20},i.a.createElement(ta.a,{bordered:!0,pagination:!1,columns:bc,dataSource:[].concat(Object(wr.a)(e.inventory),Object(wr.a)(e.procedure)),footer:function(){return(t=pc({},e))?i.a.createElement("p",null,t.staff?i.a.createElement(kl.a,{title:"Staff"},i.a.createElement(Mt.a,{color:t.staff?t.staff_data.calendar_colour:null},i.a.createElement("b",null,"Return by  "+t.staff_data.user.first_name," "))):null,t.practice?i.a.createElement(Mt.a,{style:{float:"right"}},i.a.createElement(kl.a,{title:"Practice Name"},i.a.createElement("b",null,t.practice_data.name," "))):null):null;var t}}))),i.a.createElement($t.a,{visible:t.state.cancelReturnIncoiceVisible&&t.state.editReturnInvoice&&t.state.editReturnInvoice.id==e.id,title:"Cancel Return Invoice",footer:null,onOk:t.handleSubmitCancelReturnInvoice,onCancel:t.cancelReturnInvoiceClose},i.a.createElement(fa.a,null,i.a.createElement(fa.a.Item,null,a("otp",{rules:[{required:!0,message:"Please input Otp!"}]})(i.a.createElement(ga.a,{prefix:i.a.createElement(Bt.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Otp"}))),i.a.createElement(fa.a.Item,null,t.state.otpSent?i.a.createElement("a",{style:{float:"right"},type:"primary",onClick:t.sendOTP},"Resend Otp ?"):null,i.a.createElement(Vt.a,{size:"small",type:"primary",htmlType:"submit",onClick:t.handleSubmitCancelReturnInvoice},"Submit"),"\xa0",i.a.createElement(Vt.a,{size:"small",onClick:t.cancelReturnInvoiceClose},"Close")))))}var bc=[{title:"Treatment & Products",dataIndex:"drug",key:"drug",render:function(e,t){return i.a.createElement("span",null," ",i.a.createElement("b",null,t.name?t.name:null))}},{title:"Cost",dataIndex:"unit_cost",key:"unit_cost",render:function(e,t){return i.a.createElement("span",null,t.unit_cost?t.unit_cost.toFixed(2):null)}},{title:"Unit",dataIndex:"unit",key:"unit"},{title:"Discount",dataIndex:"discount_value",key:"discount_value",render:function(e,t){return i.a.createElement("span",null,t.discount_value?t.discount_value.toFixed(2):null)}},{title:"Tax",dataIndex:"tax_value",key:"tax_value",render:function(e,t){return i.a.createElement("span",null,t.tax_value?t.tax_value.toFixed(2):null)}},{title:"Total",dataIndex:"total",key:"total",render:function(e){return e?e.toFixed(2):null}}];function yc(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Ec(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?yc(a,!0).forEach(function(t){Object(u.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):yc(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var vc=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).loadPDF=function(e){Object(f.a)(a)},a.state={loading:!1,selectedList:{}},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"ledgerCompleteToggle",value:function(e,t){this.setState(function(a){return{selectedList:Ec({},a.selectedList,Object(u.a)({},e,!!t))}})}},{key:"render",value:function(){var e=this;console.log("props",this.props),console.log("state",this.state);var t=[{title:"",key:"is_completed",render:function(t,a){return a.is_completed?i.a.createElement(Bt.a,{type:"check-circle",theme:"twoTone",style:{marginLeft:"8px",fontSize:"20px"}}):i.a.createElement(sa.a,{key:a.id,onChange:function(t){return e.ledgerCompleteToggle(a.id,t.target.checked)},value:e.state.selectedList[a.id]})}},{title:"Name",key:"name",dataIndex:"name"}];return i.a.createElement(Zt.a,null,i.a.createElement(ia.a,{title:"Patient Ledgers",extra:i.a.createElement(Vt.a.Group,null,i.a.createElement(Vt.a,{type:"primary"},i.a.createElement(Bt.a,{type:"printer"}),"Print billing summary"),i.a.createElement(qt.b,{to:"/patient/"+this.props.match.params.id+"/billing/payments"}," ",i.a.createElement(Vt.a,{type:"primary"},i.a.createElement(Bt.a,{type:"plus"}),"\xa0Add Payment")),i.a.createElement(qt.b,{to:"/patient/"+this.props.match.params.id+"/billing/invoices"}," ",i.a.createElement(Vt.a,{type:"primary"},i.a.createElement(Bt.a,{type:"plus"}),"\xa0Add Invoice")),"\xa0",i.a.createElement(Vt.a,{type:"primary",onClick:function(){return e.loadPDF()}},i.a.createElement(Bt.a,{type:"printer"}),"\xa0Print"),"\xa0",i.a.createElement(Vt.a,{type:"primary",onClick:this.submitLedgers},i.a.createElement(Bt.a,{type:"save"}),"Send Payment Reminder"))},i.a.createElement(ta.a,{loading:this.state.loading,columns:t,dataSource:this.state.data})))}}]),t}(i.a.Component),_c=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).searchPatient=function(e){a.setState({searchPatientString:e});var t=Object(f.a)(a);ht(gt(Ve,[e]),function(e){e&&t.setState({patientListData:e})},function(){})},a.removePatient=function(e){a.setState(Object(u.a)({},e,null))},a.handlePatientSelect=function(e,t){if(console.log(e),e){var n=Object(f.a)(a);ht(gt(te,[e]),function(e){n.setState(Object(u.a)({},t,e))},function(){})}},a.mergePatient=function(){a.setState({loading:!0});var e=Object(f.a)(a),t={patient_from:a.state.patient_from.id,patient_to:a.state.patient_to.id};dt(ae,t,function(t){bt(k,"Patients Merged Successfully!!"),e.setState({loading:!1,patient_from:null,patient_to:null})},function(){bt(P,"Patients Merging Failed!!"),e.setState({loading:!1})})},a.state={patient_from:null,patient_to:null,loading:!1,patientListData:[]},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("div",null,i.a.createElement("h2",null,"Merge Patients"),i.a.createElement(ia.a,null,i.a.createElement(o.a,{message:"Profile details and records of Patient 1 will be moved to Patient 2. You cannot undo this action once done.",type:"warning"}),i.a.createElement(Tt.a,{spinning:this.state.loading},i.a.createElement(Zt.a,{gutter:16,style:{marginTop:10}},i.a.createElement(ea.a,{span:12,style:{textAlign:"center"}},i.a.createElement("h3",null,"Patient 1"),this.state.patient_from?i.a.createElement(ia.a,{bordered:!1,style:{background:"#ECECEC",textAlign:"left"}},i.a.createElement(ia.a.Meta,{avatar:i.a.createElement(Nt.a,{style:{backgroundColor:"#ffff"},src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png"}),title:this.state.patient_from.user.first_name,description:this.state.patient_from.user.mobile}),i.a.createElement(Vt.a,{type:"primary",style:{float:"right"},onClick:function(){return e.removePatient("patient_from")}},"Select Different Patient")):i.a.createElement(Ft.a,{placeholder:"Patient Name",showSearch:!0,onSearch:this.searchPatient,defaultActiveFirstOption:!1,showArrow:!1,filterOption:!1,onChange:this.handleChange,onSelect:function(t){return e.handlePatientSelect(t,"patient_from")}},this.state.patientListData.map(function(e){return i.a.createElement(Ft.a.Option,{value:e.id.toString()},i.a.createElement(Rt.a.Item,{style:{padding:0}},i.a.createElement(Rt.a.Item.Meta,{avatar:i.a.createElement(Nt.a,{src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png"}),title:e.user.first_name+" ("+e.user.id+")",description:i.a.createElement("small",null,e.user.mobile)})))}))),i.a.createElement(ea.a,{span:12,style:{textAlign:"center"}},i.a.createElement("h3",null,"Patient 2"),this.state.patient_to?i.a.createElement(ia.a,{bordered:!1,style:{background:"#ECECEC",textAlign:"left"}},i.a.createElement(ia.a.Meta,{avatar:i.a.createElement(Nt.a,{style:{backgroundColor:"#ffff"},src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png"}),title:this.state.patient_to.user.first_name,description:this.state.patient_to.user.mobile}),i.a.createElement(Vt.a,{type:"primary",style:{float:"right"},onClick:function(){return e.removePatient("patient_to")}},"Select Different Patient")):i.a.createElement(Ft.a,{placeholder:"Patient Name",showSearch:!0,onSearch:this.searchPatient,defaultActiveFirstOption:!1,showArrow:!1,filterOption:!1,onChange:this.handleChange,onSelect:function(t){return e.handlePatientSelect(t,"patient_to")}},this.state.patientListData.map(function(e){return i.a.createElement(Ft.a.Option,{value:e.id.toString()},i.a.createElement(Rt.a.Item,{style:{padding:0}},i.a.createElement(Rt.a.Item.Meta,{avatar:i.a.createElement(Nt.a,{src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png"}),title:e.user.first_name+" ("+e.user.id+")",description:i.a.createElement("small",null,e.user.mobile)})))}))),i.a.createElement(ea.a,{span:24,style:{textAlign:"center",marginTop:30}},i.a.createElement(Vt.a,{disabled:this.state.loading||!this.state.patient_from||!this.state.patient_to,type:"primary",onClick:this.mergePatient},i.a.createElement(Bt.a,{type:"plus"}),"Merge Patients"))))))}}]),t}(i.a.Component),kc=function(e){function t(e){return Object(d.a)(this,t),Object(p.a)(this,Object(h.a)(t).call(this,e))}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement(ia.a,{style:{textAlign:"center"}},i.a.createElement("h2",null," Please select patient to further continue !!"),this.props.togglePatientListModal?i.a.createElement(Vt.a,{type:"primary",onClick:function(){return e.props.togglePatientListModal(!0)}},i.a.createElement(Bt.a,{type:"user"})," Select Patient"):null)}}]),t}(i.a.Component);function Oc(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var Pc=ga.a.TextArea,jc=Lt.a.Option,Dc=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).handleCheck=function(e){a.setState({excused_duty_checked:!a.state.excused_duty_checked})},a.handleLighDutyCheck=function(e){a.setState({fit_light_duty_checked:!a.state.fit_light_duty_checked})},a.onChangeHandle=function(e){console.log("handlechanged",e),a.setState({value:e.target.value})},a.handleAttendanceCheck=function(e){a.setState({attendance_checked:!a.state.attendance_checked})},a.handleChangeStart=function(e){a.setState({startDate:e})},a.onChange=function(e){a.setState({proof_attendance_from:e})},a.selectedDate=function(e){a.setState({selectedDate:e})},a.selectDoctor=function(e){a.setState({selectedDoctor:e})},a.handleSubmit=function(e){var t=Object(f.a)(a);e.preventDefault(),a.props.form.validateFields(function(e,n){if(n.excused_duty||n.fit_light_duty||n.proof_attendance){if(!e){var i=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Oc(a,!0).forEach(function(t){Object(u.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Oc(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},n,{doctor:t.state.selectedDoctor.id,practice:t.props.active_practiceId,date:t.state.selectedDate&&ya()(t.state.selectedDate).isValid()?t.state.selectedDate.format("YYYY-MM-DD"):null,excused_duty_from:ya()(n.excused_duty_from).format("YYYY-MM-DD"),excused_duty_to:ya()(n.excused_duty_to).format("YYYY-MM-DD"),fit_light_duty_from:ya()(n.fit_light_duty_from).format("YYYY-MM-DD"),fit_light_duty_to:ya()(n.fit_light_duty_to).format("YYYY-MM-DD"),proof_attendance_date:ya()(n.proof_attendance_date).format("YYYY-MM-DD"),proof_attendance_from:ya()(n.proof_attendance_from).format("LT"),proof_attendance_to:ya()(n.proof_attendance_to).format("LT"),patient:t.props.match.params.id,is_active:!0,valid_court:!1,invalid_court:!1,no_mention:!1});n.group&&(i[n.group]=!0),delete i.group;dt(gt(ve,[a.props.currentPatient.id]),i,function(e){bt(k,"Medical Certificate Generated."),t.props.history.push("/patient/"+t.props.match.params.id+"/emr/files")},function(){t.setState({})})}}else bt(P,"Please select at least one of the above options")})},a.state={redirect:!1,excused_duty_checked:!1,fit_light_duty_checked:!1,attendance_checked:!1,startDate:a.props.value,endDate:new Date,proof_attendance_from:null,days:0,practiceDoctors:[],selectedDoctor:{},selectedDate:ya()(),value:""},a.handleChangeStart=a.handleChangeStart.bind(Object(f.a)(a)),a.handleChangeEnd=a.handleChangeEnd.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){Ii(this)}},{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"handleChangeEnd",value:function(e){this.setState({endDate:e})}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=fn.map(function(e){return i.a.createElement(ha.a,{value:e.value},e.label)});return i.a.createElement(fa.a,Object.assign({onSubmit:this.handleSubmit},{labelCol:{xs:{span:24},sm:{span:8},md:{span:8},lg:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16},md:{span:16},lg:{span:16}}}),i.a.createElement(ia.a,{title:"ADD MEDICAL LEAVE CERTIFICATE",extra:i.a.createElement(Vt.a.Group,null,i.a.createElement(Vt.a,{type:"primary",htmlType:"submit"},"Save Certificate"))},i.a.createElement(fa.a.Item,null,t("excused_duty",{})(i.a.createElement(sa.a,{onClick:this.handleCheck,defaultChecked:this.state.excused_duty_checked},"Excused from duty"))),this.state.excused_duty_checked?i.a.createElement(Zt.a,null,i.a.createElement(ea.a,{span:6,offset:6},i.a.createElement(fa.a.Item,{label:"From"},t("excused_duty_from",{})(i.a.createElement(ma.a,null))),i.a.createElement(fa.a.Item,{label:"till"},t("excused_duty_to",{})(i.a.createElement(ma.a,null)))),i.a.createElement(ea.a,{span:6},i.a.createElement(fa.a.Item,null,t("excused_duty_from_session",{initialValue:"Morning"})(i.a.createElement(Lt.a,null,i.a.createElement(jc,{value:"Morning"},"Morning Session"),i.a.createElement(jc,{value:"Morning"},"Evening Session")))),i.a.createElement(fa.a.Item,null,t("excused_duty_to_session",{initialValue:"Morning"})(i.a.createElement(Lt.a,null,i.a.createElement(jc,{value:"Morning"},"Morning Session"),i.a.createElement(jc,{value:"Morning"},"Evening Session")))))):null,i.a.createElement(fa.a.Item,null,t("fit_light_duty",{})(i.a.createElement(sa.a,{onClick:this.handleLighDutyCheck,defaultChecked:this.state.fit_light_duty_checked},"Fit for light duty"))),this.state.fit_light_duty_checked?i.a.createElement(Zt.a,null,i.a.createElement(ea.a,null,i.a.createElement(fa.a.Item,{label:"From"},t("fit_light_duty_from",{})(i.a.createElement(ma.a,null))),i.a.createElement(fa.a.Item,{label:"till"},t("fit_light_duty_to",{})(i.a.createElement(ma.a,null))))):null,i.a.createElement(fa.a.Item,null,t("proof_attendance",{})(i.a.createElement(sa.a,{onClick:this.handleAttendanceCheck,defaultChecked:this.state.attendance_checked},"Proof of attendance at practice"))),this.state.attendance_checked?i.a.createElement(Zt.a,null,i.a.createElement(fa.a.Item,{label:"on"},t("proof_attendance_date",{})(i.a.createElement(ma.a,null))),i.a.createElement(ea.a,{span:6,offset:6},i.a.createElement(fa.a.Item,{label:"From"},t("proof_attendance_from",{})(i.a.createElement(da.a,{use12Hours:!0,format:"h:mm A"}))),i.a.createElement(fa.a.Item,{label:"till"},t("proof_attendance_to",{})(i.a.createElement(da.a,{use12Hours:!0,format:"h:mm A"}))))):null,i.a.createElement(fa.a.Item,{label:"Notes"},t("notes",{})(i.a.createElement(Pc,null))),i.a.createElement(fa.a.Item,null,t("group",{initialValue:"no_mention"})(i.a.createElement(ha.a.Group,null,a))),i.a.createElement(c.a,{offsetBottom:0},i.a.createElement(ia.a,null,i.a.createElement("span",null,"Issued by \xa0\xa0"),i.a.createElement(At.a,{placement:"topCenter",overlay:i.a.createElement(Ht.a,null,this.state.practiceDoctors.map(function(t){return i.a.createElement(Ht.a.Item,{key:"0"},i.a.createElement("a",{onClick:function(){return e.selectDoctor(t)}},t.user.first_name))})),trigger:["click"]},i.a.createElement("a",{className:"ant-dropdown-link",href:"#"},i.a.createElement("b",null,this.state.selectedDoctor.user?this.state.selectedDoctor.user.first_name:"No DOCTORS Found"))),i.a.createElement("span",null," \xa0\xa0on\xa0\xa0"),i.a.createElement(ma.a,{value:this.state.selectedDate,onChange:function(t){return e.selectedDate(t)},format:"DD-MM-YYYY",allowClear:!1})))))}}]),t}(i.a.Component),Sc=fa.a.create()(Dc);function xc(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Ic(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?xc(a,!0).forEach(function(t){Object(u.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):xc(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Cc=ia.a.Meta,wc=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).loadPackages=function(){var e=Object(f.a)(a);ht(gt(et,[a.props.active_practiceId]),function(t){e.setState({packages:t})},function(){})},a.loadDiseases=function(){var e=Object(f.a)(a);ht(gt(it,[a.props.active_practiceId]),function(t){e.setState({diseases:t})},function(){})},a.searchPatient=function(e){var t=Object(f.a)(a);ht(gt(Ve,[e]),function(e){e&&t.setState({patientList:e,ptr:e})},function(){})},a.handlePatientSelect=function(e){if(e){var t=Object(f.a)(a);ht(gt(te,[e]),function(e){t.setState({patientDetails:e})},function(){})}},a.checkBedStatus=function(e,t){var n=Object(f.a)(a);n.handleRoomType(),a.setState(Object(u.a)({},e,t),function(){n.calculateTotalAmount();var e=n.state,t=e.from_date,a=e.bed_package;if(t&&a){var i=null;if(n.state.packages.forEach(function(e){a==e.id&&(i=ya()(t).add(e.no_of_days-1,"day"))}),t&&i&&a)(0,n.props.form.setFieldsValue)({to_date:i}),ht(gt(nt,[n.props.active_practiceId]),function(e){n.setState({availabilitySeatTatkal:e.TATKAL,availabilitySeatNormal:e.NORMAL}),e[n.props.form.getFieldValue("seat_type")]||(n.props.form.setFieldsValue({seat_type:null}),n.calculateTotalAmount())},function(){},{start:ya()(t).format("YYYY-MM-DD"),end:ya()(i).format("YYYY-MM-DD"),bed_package:a})}})},a.handleSubmit=function(e){a.setState({loading:!0});var t=Object(f.a)(a);e.preventDefault(),a.props.form.validateFields(function(e,n){if(!e){var i=Ic({},n,{to_date:ya()(n.to_date).format("YYYY-MM-DD"),from_date:ya()(n.from_date).format("YYYY-MM-DD"),paid:!1,total_price:a.state.totalPayableAmount,date:ya()().format("YYYY-MM-DD"),total_tax:a.state.tax,patient:a.state.patientDetails.id,rest_diseases:n.rest_diseases?n.rest_diseases.join(","):null,report_upload:n.file&&n.file.file.response?n.file.file.response.image_path:null});dt(gt(at,[a.props.active_practiceId]),i,function(e){bt(k,"Saved Successfully!!"),t.props.history.goBack(),t.props.loadData&&t.props.loadData()},function(){})}})},a.handleClick=function(e){a.setState({patientDetails:null})},a.handleRoomType=function(e,t){var n=Object(f.a)(a);a.setState(Object(u.a)({},e,t),function(){n.calculateTotalAmount()})},a.calculateTotalAmount=function(){Object(f.a)(a).setState(function(e){var t=0,a=0,n={},i=[],r=0;return e.packages.forEach(function(r){e.bed_package==r.id&&("NORMAL"==e.seat_type&&(t=r.normal_price+r.normal_tax_value,a+=r.normal_tax_value,n=Ic({},r,{type:"BED",price_with_tax:t,tax:r.normal_tax_value,price:r.normal_price}),i=[n]),"TATKAL"==e.seat_type&&(t=r.tatkal_price+r.tatkal_tax_value,a+=r.tatkal_tax_value,n=Ic({},r,{type:"BED",price_with_tax:t,tax:r.tatkal_tax_value,price:r.tatkal_price}),i=[n]))}),e.medicinePackage.forEach(function(t){e.medicineItem.forEach(function(e){t.id==e&&(r+=t.final_price,a+=t.tax_value,i=[].concat(Object(wr.a)(i),[Ic({},t,{type:"MEDICINE",price_with_tax:t.final_price,tax:t.tax_value})]))})}),{totalPayableAmount:t+r,tax:a,choosePkg:Object(wr.a)(i)}})},a.setPaymentAmount=function(e){var t=Object(f.a)(a);a.setState({totalPayingAmount:e},function(){t.calculateTotalAmount()})},a.handleMedicineSelect=function(e){var t=e;a.setState({medicineItem:t},function(){this.calculateTotalAmount()})},a.state={packages:[],totalPayableAmount:0,totalPayingAmount:0,patientList:[],paymentModes:[],medicinePackage:[],medicineItem:[],diseases:[]},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.props.currentPatient&&this.handlePatientSelect(this.props.currentPatient.id),this.loadPackages(),this.loadPaymentModes(),this.loadMedicinePackages(),this.loadDiseases()}},{key:"loadMedicinePackages",value:function(){var e=this;ht(gt(tt,[this.props.active_practiceId]),function(t){e.setState({medicinePackage:t})},function(){})}},{key:"loadPaymentModes",value:function(){var e=this;ht(gt(X,[this.props.active_practiceId]),function(t){e.setState({paymentModes:t})},function(){})}},{key:"render",value:function(){var e=this,t=[{value:"NORMAL",is_or_not:!(!this.state.availabilitySeatNormal||!this.state.availabilitySeatNormal.available)},{value:"TATKAL",is_or_not:!(!this.state.availabilitySeatTatkal||!this.state.availabilitySeatTatkal.available)}],a=this,n=this.props.form.getFieldDecorator,r={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:14}}},l=[{title:"Item",key:"name",dataIndex:"name"},{title:"Price",key:"price",dataIndex:"price",render:function(e,t){return i.a.createElement("p",null,e?e.toFixed(2):null)}},{title:"Tax",key:"tax",dataIndex:"tax",render:function(e,t){return i.a.createElement("p",null,e?e.toFixed(2):null)}},{title:"Total Amount",key:"price_with_tax",dataIndex:"price_with_tax",render:function(e,t){return i.a.createElement("p",null,e?e.toFixed(2):null)}}],s={name:"image",data:{name:"hello"},action:ct("blogImage/"),headers:{authorization:"authorization-text"},onChange:function(e){e.file.status,"done"===e.file.status?V.a.success("".concat(e.file.name," file uploaded successfully")):"error"===e.file.status&&V.a.error("".concat(e.file.name," file upload failed."))}};return i.a.createElement("div",null,i.a.createElement(ia.a,{title:"Book a Seat/Bed"},i.a.createElement(fa.a,null,i.a.createElement(Zt.a,null,i.a.createElement(ea.a,{xs:24,sm:24,md:12,lg:12,xl:12},i.a.createElement("div",null,this.state.patientDetails?i.a.createElement(fa.a.Item,Object.assign({key:"id",value:this.state.patientDetails?this.state.patientDetails.id:""},{wrapperCol:{xs:{offset:6,span:24},sm:{offset:6,span:14}}}),i.a.createElement(ia.a,{bordered:!1,style:{background:"#ECECEC"}},i.a.createElement(Cc,{avatar:this.state.patientDetails.image?i.a.createElement(Nt.a,{style:{backgroundColor:"#ffff"},src:ot(this.state.patientDetails.image)}):i.a.createElement(Bt.a,{type:"user"}),title:this.state.patientDetails.user.first_name,description:this.state.patientDetails.user.mobile}))):i.a.createElement("div",null,i.a.createElement(fa.a.Item,Object.assign({label:"Patient"},r),n("patient",{rules:[{required:!0,message:"this field required"}]})(i.a.createElement(Ft.a,{placeholder:"Patient Name",showSearch:!0,onSearch:this.searchPatient,defaultActiveFirstOption:!1,showArrow:!1,filterOption:!1,onSelect:this.handlePatientSelect},this.state.patientList.map(function(e){return i.a.createElement(Ft.a.Option,{value:e?e.id.toString():""},i.a.createElement(Rt.a.Item,{style:{padding:0}},i.a.createElement(Rt.a.Item.Meta,{avatar:e.image?i.a.createElement(Nt.a,{style:{backgroundColor:"#ffff"},src:ot(e.image)}):i.a.createElement(Bt.a,{type:"user"}),title:e.user.first_name+" ("+e.user.id+")",description:i.a.createElement("small",null,e.user.mobile)})))}))),this.state.ptr?i.a.createElement(o.a,{message:"Patient Not Found !!",description:"Please Search another patient or create new patient.",type:"error"}):null)),i.a.createElement(fa.a.Item,Object.assign({label:"Bed Package"},r),n("bed_package",{rules:[{required:!0,message:"this field required!"}]})(i.a.createElement(Lt.a,{onChange:function(e){return a.checkBedStatus("bed_package",e)}},a.state.packages.map(function(e){return i.a.createElement(Lt.a.Option,{value:e.id},e.name)})))),i.a.createElement(fa.a.Item,Object.assign({label:"Book From"},r),n("from_date",{rules:[{required:!0,message:"Input From Date!"}]})(i.a.createElement(ma.a,{onChange:function(e){return a.checkBedStatus("from_date",e)},format:"DD-MM-YYYY"}))),i.a.createElement(fa.a.Item,Object.assign({label:"Book To"},r),n("to_date",{rules:[{required:!0,message:"Input To Date!"}]})(i.a.createElement(ma.a,{disabled:!0,format:"DD-MM-YYYY"}))),i.a.createElement(fa.a.Item,Object.assign({label:"Booking Type"},r),n("seat_type",{rules:[{required:!0,message:"this field required"}]})(i.a.createElement(ha.a.Group,{onChange:function(t){return e.handleRoomType("seat_type",t.target.value)}},t.map(function(e){return i.a.createElement(ha.a,{value:e.is_or_not?e.value:"",disabled:!e.is_or_not},e.value)})))),i.a.createElement(fa.a.Item,Object.assign({label:"Medicine  Package"},r),n("medicines",{})(i.a.createElement(Lt.a,{mode:"multiple",onChange:this.handleMedicineSelect},a.state.medicinePackage.map(function(e){return i.a.createElement(Lt.a.Option,{value:e.id},e.name)})))),i.a.createElement(fa.a.Item,Object.assign({label:"Pay Now : "},r),n("pay_value",{rules:[{required:!0,message:"this field is required"}],initialValue:this.state.totalPayingAmount?this.state.totalPayingAmount:null})(i.a.createElement(pa.a,{min:0,step:1,max:this.state.totalPayableAmount,onChange:this.setPaymentAmount}))),i.a.createElement(fa.a.Item,Object.assign({label:"Payment Mode"},r),n("payment_mode",{rules:[{required:!0,message:"this field required"}]})(i.a.createElement(Lt.a,{showSearch:!0,filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},this.state.paymentModes.map(function(e){return i.a.createElement(Lt.a.Option,{value:e.id},e.mode)})))))),i.a.createElement(ea.a,{xs:24,sm:24,md:12,lg:12,xl:12},i.a.createElement(na.a,null,"Patient Details"),i.a.createElement(fa.a.Item,Object.assign({label:"Creatinine Level"},r),n("creatinine",{})(i.a.createElement(ga.a,null))),i.a.createElement(fa.a.Item,Object.assign({label:"Urea Level"},r),n("urea_level",{})(i.a.createElement(ga.a,null))),i.a.createElement(fa.a.Item,Object.assign({label:"Currently on Dialysis?"},r),n("dialysis",{})(i.a.createElement(Lt.a,{showSearch:!0,filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},i.a.createElement(Lt.a.Option,{value:!0},"YES"),i.a.createElement(Lt.a.Option,{value:!1},"NO")))),i.a.createElement(fa.a.Item,Object.assign({label:"Diseases"},r),n("other_diseases",{})(i.a.createElement(Lt.a,{showSearch:!0,mode:"multiple",filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},this.state.diseases.map(function(e){return i.a.createElement(Lt.a.Option,{value:e.id},e.name)})))),i.a.createElement(fa.a.Item,Object.assign({label:"Other Diseases"},r),n("rest_diseases",{})(i.a.createElement(Lt.a,{mode:"tags"}))),i.a.createElement(fa.a.Item,Object.assign({label:"Upload Report"},r),n("file",{})(i.a.createElement(ua.a,s,i.a.createElement(Vt.a,null,i.a.createElement(Bt.a,{type:"upload"})," Select File")))),i.a.createElement(ta.a,{pagination:!1,columns:l,size:"small",dataSource:this.state.choosePkg})),i.a.createElement(ea.a,{span:24},i.a.createElement("h3",null,"Grand Total: ",i.a.createElement("b",null,this.state.totalPayableAmount.toFixed(2))),i.a.createElement(fa.a.Item,null,i.a.createElement(aa.a,{title:"Are you sure to take payment of INR "+this.state.totalPayingAmount+"?",onConfirm:this.handleSubmit},i.a.createElement(Vt.a,{type:"primary"},"Submit")),a.props.history?i.a.createElement(Vt.a,{style:{margin:5},onClick:function(){return a.props.history.goBack()}},"Cancel"):null))))))}}]),t}(i.a.Component),Tc=fa.a.create()(wc),Ac=s.a.Content,Mc=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).loadBedBookingReport=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=Object(f.a)(a);a.setState({loading:!0});var n=function(e){console.log(e),1==e.current?t.setState({bedBookingReports:e.results,loading:!1,nextReport:e.next}):t.setState(function(t){return{bedBookingReports:[].concat(Object(wr.a)(t.bedBookingReports),Object(wr.a)(e.results)),loading:!1,nextReport:e.next}})},i=function(){t.setState({loading:!1})};ht(gt(qe,[a.props.active_practiceId]),n,i,{page:e,patients:a.state.patient.id})},a.state={loading:!0,bedBookingReports:[],patient:a.props.currentPatient||{}},a.loadBedBookingReport=a.loadBedBookingReport.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.loadBedBookingReport()}},{key:"render",value:function(){var e=this,t=this,a=[{title:"Bed Package",key:"name",dataIndex:"bed_package.name"},{title:"Medicine Package",key:"medicine",dataIndex:"medicines",render:function(e,t){return i.a.createElement("span",null,e.map(function(e){return i.a.createElement(Mt.a,null,e.name)}))}},{title:"From ",key:"from_date",render:function(e,t){return i.a.createElement("span",null,ya()(t.from_date).format("LL"))}},{title:"To ",key:"to_date",render:function(e,t){return i.a.createElement("span",null,ya()(t.to_date).format("LL"))}},{title:"Seat/Bed Type",key:"seat_type",dataIndex:"seat_type"},{title:"Seat Number",key:"seat_no",dataIndex:"seat_no"},{title:"Total price",key:"total_price",dataIndex:"total_price",render:function(e){return i.a.createElement("p",null,e.toFixed(2))}},{title:"Payment Status",key:"payment_status",dataIndex:"payment_status"}];return i.a.createElement(Ac,{className:"main-container",style:{minHeight:280}},i.a.createElement(s.a,null,i.a.createElement(b.d,null,i.a.createElement(b.b,{path:"/patient/:patient/booking/bed-booking",render:function(){return t.props.activePracticePermissions.PatientBookings||t.props.allowAllPermissions?i.a.createElement(Tc,Object.assign({},e.props,{bedBooking:!0,loadData:e.loadBedBookingReport})):i.a.createElement(qn,null)}}),i.a.createElement(b.b,null,i.a.createElement("div",null,i.a.createElement("h2",null,"Bed Booking Management",i.a.createElement(qt.b,{to:"/patient/"+this.state.patient.id+"/booking/bed-booking"},i.a.createElement(Vt.a,{type:"primary",style:{float:"right"}},i.a.createElement(Bt.a,{type:"plus"}),"\xa0Book A Seat"))),i.a.createElement(ia.a,null,i.a.createElement(Zn,{pagination:!1,hideReport:!0,loading:this.state.loading,columns:a,size:"small",dataSource:this.state.bedBookingReports}),i.a.createElement(Ei,{loaderFunction:function(){return e.loadBedBookingReport(e.state.nextReport)},loading:this.state.loading,hidden:!this.state.nextReport})))))))}}]),t}(i.a.Component),Lc=s.a.Content,Vc=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={currentPatient:null,active_practiceId:a.props.active_practiceId,medicalHistory:[],listModalVisible:!1,loading:!1,showAllClinic:_t("showAllClinic")},a.setCurrentPatient=a.setCurrentPatient.bind(Object(f.a)(a)),a.togglePatientListModal=a.togglePatientListModal.bind(Object(f.a)(a)),a.toggleShowAllClinic=a.toggleShowAllClinic.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){!this.props.match.params.id||this.state.currentPatient&&this.props.match.params.id==this.state.currentPatient.id||this.getPatientListData(this.props.match.params.id)}},{key:"getPatientListData",value:function(e){var t=this;t.setState({loading:!0});ht(gt(te,[e]),function(e){t.setCurrentPatient(e)},function(){bt(P,"Patient Loading Failed"),t.setState({loading:!1})})}},{key:"setCurrentPatient",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=this,n=this.props.location.pathname.split("/");isNaN(parseInt(n[2]))?e&&(n[1]="patient",n.splice(2,0,e.id)):e?(n[1]="patient",n[2]=e.id):(n[1]="patients",n.splice(2,1)),this.props.history.push(n.join("/")),this.setState({currentPatient:e,loading:!1,listModalVisible:!1},function(){t&&a.props.history.push(gt(t,[e.id]))})}},{key:"togglePatientListModal",value:function(e){this.setState({listModalVisible:!!e})}},{key:"toggleShowAllClinic",value:function(e){this.setState({showAllClinic:!!e},function(){var t,a;t="showAllClinic",a=!!e,y.set(t,a)})}},{key:"render",value:function(){var e=this,t=this;return i.a.createElement(Lc,null,i.a.createElement(Tt.a,{spinning:this.state.loading,size:"large"},i.a.createElement(Ul,Object.assign({},this.state,this.props,{togglePatientListModal:this.togglePatientListModal,key:this.state.currentPatient,setCurrentPatient:this.setCurrentPatient,toggleShowAllClinic:this.toggleShowAllClinic})),i.a.createElement(s.a,null,i.a.createElement(_l,Object.assign({},this.state,this.props)),i.a.createElement(s.a,null,i.a.createElement(Lc,{className:"main-container",key:this.state.showAllClinic.toString(),style:{padding:10,minHeight:280}},i.a.createElement(b.d,null,i.a.createElement(b.b,{exact:!0,path:"/patients/merge",render:function(a){return t.props.activePracticePermissions.MergePatients||t.props.allowAllPermissions?i.a.createElement(_c,e.state):i.a.createElement(qn,null)}}),t.props.activePracticePermissions.WebAdmin||t.allowAllPermissions?i.a.createElement(b.b,{exact:!0,path:"/patients/profile",render:function(t){return e.state.currentPatient?i.a.createElement(b.a,{to:"/patient/"+e.state.currentPatient.id+"/profile"}):i.a.createElement(ml,Object.assign({},e.state,{key:e.state.currentPatient,setCurrentPatient:e.setCurrentPatient},e.props))}}):null,i.a.createElement(b.b,{exact:!0,path:"/patients/profile/add",render:function(a){return t.props.activePracticePermissions.AddPatient||t.props.allowAllPermissions?i.a.createElement(yl,Object.assign({key:e.state.currentPatient},e.props,a)):i.a.createElement(qn,null)}}),i.a.createElement(b.b,{exact:!0,path:"/patient/:id/profile",render:function(a){return t.props.activePracticePermissions.ViewPatient||t.props.allowAllPermissions?i.a.createElement(ml,Object.assign({},e.state,{key:e.state.currentPatient,setCurrentPatient:e.setCurrentPatient},e.props,a)):i.a.createElement(qn,null)}}),i.a.createElement(b.b,{exact:!0,path:"/patient/:id/profile/edit",render:function(a){return t.props.activePracticePermissions.EditPatient||t.props.allowAllPermissions?i.a.createElement(yl,Object.assign({key:e.state.currentPatient},e.state,e.props,a)):i.a.createElement(qn,null)}}),t.props.activePracticePermissions.PatientAppointments||t.allowAllPermissions?i.a.createElement(b.b,{exact:!0,path:"/patients/appointments",render:function(t){return e.state.currentPatient?i.a.createElement(b.a,{to:"/patient/"+e.state.currentPatient.id+"/appointments"}):i.a.createElement(El,Object.assign({key:e.state.currentPatient},e.state,t,e.props))}}):null,t.props.activePracticePermissions.PatientAppointments||t.allowAllPermissions?i.a.createElement(b.b,{exact:!0,path:"/patient/:id/appointments",render:function(t){return i.a.createElement(El,Object.assign({key:e.state.currentPatient?e.state.currentPatient.id:null},e.state,t,e.props))}}):null,t.props.activePracticePermissions.PatientAppointments||t.allowAllPermissions?i.a.createElement(b.b,{exact:!0,path:"/patients/appointments/:appointmentid",render:function(t){return i.a.createElement(El,Object.assign({key:e.state.currentPatient},e.state,t,e.props))}}):null,t.props.activePracticePermissions.PatientCommunications||t.allowAllPermissions?i.a.createElement(b.b,{exact:!0,path:"/patients/communications",render:function(){return e.state.currentPatient?i.a.createElement(b.a,{to:"/patient/"+e.state.currentPatient.id+"/communications"}):i.a.createElement(kc,{togglePatientListModal:e.togglePatientListModal})}}):null,t.props.activePracticePermissions.PatientCommunications||t.allowAllPermissions?i.a.createElement(b.b,{exact:!0,path:"/patient/:id/communications",render:function(t){return i.a.createElement(Xl,Object.assign({key:e.state.currentPatient?e.state.currentPatient.id:null},e.state,t))}}):null,t.props.activePracticePermissions.PatientVitalSigns||t.allowAllPermissions?i.a.createElement(b.b,{exact:!0,path:"/patients/emr/vitalsigns",render:function(t){return e.state.currentPatient?i.a.createElement(b.a,{to:"/patient/"+e.state.currentPatient.id+"/emr/vitalsigns"}):i.a.createElement(ts,Object.assign({togglePatientListModal:e.togglePatientListModal,key:e.state.currentPatient?e.state.currentPatient.id:null},e.state,t))}}):null,i.a.createElement(b.b,{path:"/patient/:id/emr/vitalsigns",render:function(a){return t.props.activePracticePermissions.PatientVitalSigns||t.allowAllPermissions?i.a.createElement(ts,Object.assign({key:e.state.currentPatient?e.state.currentPatient.id:null},e.state,a)):i.a.createElement(qn,null)}}),i.a.createElement(b.b,{exact:!0,path:"/patient/:id/emr/vitalsigns/edit",render:function(a){return t.props.activePracticePermissions.PatientVitalSigns||t.allowAllPermissions?i.a.createElement(Jl,Object.assign({key:e.state.currentPatient?e.state.currentPatient.id:null},e.state,a)):i.a.createElement(qn,null)}}),i.a.createElement(b.b,{path:"/patients/emr/clinicnotes",render:function(t){return i.a.createElement(ql,Object.assign({togglePatientListModal:e.togglePatientListModal,key:e.state.currentPatient?e.state.currentPatient.id:null},e.state,t))}}),"}/>",i.a.createElement(b.b,{path:"/patient/:id/emr/clinicnotes",render:function(t){return i.a.createElement(ql,Object.assign({key:e.state.currentPatient?e.state.currentPatient.id:null},e.state,t))}}),t.props.activePracticePermissions.PatientCompletedProcedure||t.allowAllPermissions?i.a.createElement(b.b,{exact:!0,path:"/patients/emr/workdone",render:function(t){return e.state.currentPatient?i.a.createElement(b.a,{to:"/patient/"+e.state.currentPatient.id+"/emr/workdone"}):i.a.createElement(cs,Object.assign({togglePatientListModal:e.togglePatientListModal,key:e.state.currentPatient?e.state.currentPatient.id:null},e.state,t))}}):null,t.props.activePracticePermissions.PatientCompletedProcedure||t.allowAllPermissions?i.a.createElement(b.b,{path:"/patient/:id/emr/workdone",render:function(t){return i.a.createElement(cs,Object.assign({key:e.state.currentPatient?e.state.currentPatient.id:null},e.state,t))}}):null,t.props.activePracticePermissions.PatientFiles||t.allowAllPermissions?i.a.createElement(b.b,{exact:!0,path:"/patients/emr/files",render:function(t){return e.state.currentPatient?i.a.createElement(b.a,{to:"/patient/"+e.state.currentPatient.id+"/emr/files"}):i.a.createElement(Tl,Object.assign({togglePatientListModal:e.togglePatientListModal,key:e.state.currentPatient?e.state.currentPatient.id:null},t,e.state))}}):null,t.props.activePracticePermissions.PatientFiles||t.allowAllPermissions?i.a.createElement(b.b,{path:"/patient/:id/emr/files",render:function(t){return i.a.createElement(Tl,Object.assign({key:e.state.currentPatient?e.state.currentPatient.id:null},t,e.state))}}):null,t.props.activePracticePermissions.PatientFiles||t.allowAllPermissions?i.a.createElement(b.b,{path:"/patient/:id/emr/create-medicalCertificate",render:function(t){return i.a.createElement(Sc,Object.assign({key:e.state.currentPatient?e.state.currentPatient.id:null},t,e.state))}}):null,t.props.activePracticePermissions.PatientPrescriptions||t.allowAllPermissions?i.a.createElement(b.b,{exact:!0,path:"/patients/emr/prescriptions",render:function(t){return e.state.currentPatient?i.a.createElement(b.a,{to:"/patient/"+e.state.currentPatient.id+"/emr/prescriptions"}):i.a.createElement(ks,Object.assign({togglePatientListModal:e.togglePatientListModal,key:e.state.currentPatient?e.state.currentPatient.id:null},e.state,t))}}):null,t.props.activePracticePermissions.PatientPrescriptions||t.allowAllPermissions?i.a.createElement(b.b,{path:"/patient/:id/emr/prescriptions",render:function(t){return i.a.createElement(ks,Object.assign({key:e.state.currentPatient?e.state.currentPatient.id:null},e.state,t))}}):null,t.props.activePracticePermissions.PatientTreatmentPlans||t.allowAllPermissions?i.a.createElement(b.b,{exact:!0,path:"/patients/emr/plans",render:function(t){return e.state.currentPatient?i.a.createElement(b.a,{to:"/patient/"+e.state.currentPatient.id+"/emr/plans"}):i.a.createElement(ws,Object.assign({togglePatientListModal:e.togglePatientListModal,key:e.state.currentPatient?e.state.currentPatient.id:null},e.state,t))}}):null,t.props.activePracticePermissions.PatientTreatmentPlans||t.allowAllPermissions?i.a.createElement(b.b,{path:"/patient/:id/emr/plans",render:function(t){return i.a.createElement(ws,Object.assign({key:e.state.currentPatient?e.state.currentPatient.id:null},e.state,t))}}):null,i.a.createElement(b.b,{path:"/patient/:id/emr/timeline",render:function(a){return t.props.activePracticePermissions.PatientTimeline||t.allowAllPermissions?i.a.createElement(Dl,Object.assign({key:e.state.currentPatient?e.state.currentPatient.id:null},e.state,a)):i.a.createElement(qn,null)}}),t.props.activePracticePermissions.PatientLabOrders||t.allowAllPermissions?i.a.createElement(b.b,{exact:!0,path:"/patient/emr/labtrackings",render:function(t){return e.state.currentPatient?i.a.createElement(b.a,{to:"/patient/"+e.state.currentPatient.id+"/emr/labtrackings"}):i.a.createElement(Fs,Object.assign({key:e.state.currentPatient},e.state,t))}}):null,i.a.createElement(b.b,{path:"/patient/:id/emr/labtrackings",render:function(a){return t.props.activePracticePermissions.PatientLabOrders||t.allowAllPermissions?i.a.createElement(Fs,Object.assign({key:e.state.currentPatient?e.state.currentPatient.id:null},e.state,a)):i.a.createElement(qn,null)}}),t.props.activePracticePermissions.PatientInvoices||t.allowAllPermissions?i.a.createElement(b.b,{exact:!0,path:"/patients/billing/invoices",render:function(t){return e.state.currentPatient?i.a.createElement(b.a,{to:"/patient/"+e.state.currentPatient.id+"/billing/invoices"}):i.a.createElement(Zs,Object.assign({togglePatientListModal:e.togglePatientListModal,key:e.state.currentPatient?e.state.currentPatient.id:null},e.state,t))}}):null,i.a.createElement(b.b,{path:"/patient/:id/billing/invoices",render:function(a){return t.props.activePracticePermissions.PatientInvoices||t.allowAllPermissions?i.a.createElement(Zs,Object.assign({key:e.state.currentPatient?e.state.currentPatient.id:null},e.state,a)):i.a.createElement(qn,null)}}),t.props.activePracticePermissions.PatientReturns||t.allowAllPermissions?i.a.createElement(b.b,{exact:!0,path:"/patients/billing/return/invoices",render:function(t){return e.state.currentPatient?i.a.createElement(b.a,{to:"/patient/"+e.state.currentPatient.id+"/billing/return/invoices"}):i.a.createElement(fc,Object.assign({togglePatientListModal:e.togglePatientListModal,key:e.state.currentPatient?e.state.currentPatient.id:null},e.state,t))}}):null,i.a.createElement(b.b,{exact:!0,path:"/patient/:id/billing/return/invoices",render:function(a){return t.props.activePracticePermissions.PatientReturns||t.allowAllPermissions?i.a.createElement(fc,Object.assign({key:e.state.currentPatient?e.state.currentPatient.id:null},e.state,a)):i.a.createElement(qn,null)}}),t.props.activePracticePermissions.PatientPayments||t.allowAllPermissions?i.a.createElement(b.b,{path:"/patients/billing/payments",render:function(t){return e.state.currentPatient?i.a.createElement(b.a,{to:"/patient/"+e.state.currentPatient.id+"/billing/payments"}):i.a.createElement(oc,Object.assign({togglePatientListModal:e.togglePatientListModal,key:e.state.currentPatient?e.state.currentPatient.id:null},e.state,t))}}):null,i.a.createElement(b.b,{path:"/patient/:id/billing/payments",render:function(a){return t.props.activePracticePermissions.PatientPayments||t.allowAllPermissions?i.a.createElement(oc,Object.assign({key:e.state.currentPatient?e.state.currentPatient.id:null},e.state,a)):i.a.createElement(qn,null)}}),i.a.createElement(b.b,{exact:!0,path:"/patient/:id/billing/ledger",render:function(a){return t.props.activePracticePermissions.PatientLedger||t.allowAllPermissions?i.a.createElement(vc,Object.assign({key:e.state.currentPatient?e.state.currentPatient.id:null},e.state,a)):i.a.createElement(qn,null)}}),i.a.createElement(b.b,{exact:!0,path:"/patient/:id/prescriptions/template/add",render:function(a){return t.props.activePracticePermissions.PatientPrescriptions||t.allowAllPermissions?i.a.createElement(fs,Object.assign({key:e.state.currentPatient?e.state.currentPatient.id:null},e.state,a)):i.a.createElement(qn,null)}}),i.a.createElement(b.b,{path:"/patient/:id/booking",render:function(a){return t.props.activePracticePermissions.PatientBookings||t.props.allowAllPermissions?i.a.createElement(Mc,Object.assign({},e.state,e.props,a,{key:e.state.currentPatient?e.state.currentPatient.id:null})):i.a.createElement(qn,null)}}),i.a.createElement(b.b,{render:function(t){return e.state.currentPatient?i.a.createElement(b.a,{to:"/patient/"+e.state.currentPatient.id+"/profile"}):i.a.createElement(ml,Object.assign({},e.state,{key:e.state.currentPatient,setCurrentPatient:e.setCurrentPatient},e.props))}})))))))}}]),t}(i.a.Component),Fc=s.a.Header,Rc=ma.a.RangePicker,Nc=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).changeReport=a.changeReport.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"changeReport",value:function(e){this.props.history.push(e)}},{key:"render",value:function(){var e=this,t=[{name:"Daily Summary",value:"/reports/summary",active:e.props.activePracticePermissions.ReportsDailySummary||e.props.allowAllPermissions},{name:"Income",value:"/reports/income",active:e.props.activePracticePermissions.ReportsIncome||e.props.allowAllPermissions},{name:"Payments",value:"/reports/payments",active:e.props.activePracticePermissions.ReportsPayments||e.props.allowAllPermissions},{name:"Appointment",value:"/reports/appointments",active:e.props.activePracticePermissions.ReportsAppointments||e.props.allowAllPermissions},{name:"Patients",value:"/reports/patients",active:e.props.activePracticePermissions.ReportsPatients||e.props.allowAllPermissions},{name:"Amount Due",value:"/reports/amountdue",active:e.props.activePracticePermissions.ReportsAmountDue||e.props.allowAllPermissions},{name:"Expenses",value:"/reports/expenses",active:e.props.activePracticePermissions.ReportsExpenses||e.props.allowAllPermissions},{name:"Inventory",value:"/reports/inventory",active:e.props.activePracticePermissions.ReportsInventory||e.props.allowAllPermissions},{name:"EMR",value:"/reports/emr",active:e.props.activePracticePermissions.ReportsEMR||e.props.allowAllPermissions},{name:"Bed Booking",value:"/reports/bed_booking",active:e.props.activePracticePermissions.ReportsBedBooking||e.props.allowAllPermissions},{name:"Inventory Retails",value:"/reports/inventoryretails",active:e.props.activePracticePermissions.ReportsInventoryRetail||e.props.allowAllPermissions}];return i.a.createElement(Fc,{style:{background:"#fff"}},i.a.createElement("ul",{style:{listStyle:"none"}},i.a.createElement("li",{style:{display:"inline"}},"Select Report Category \xa0"),i.a.createElement("li",{style:{display:"inline"}},i.a.createElement(Lt.a,{style:{minWidth:"200px"},defaultValue:t[3].name,value:this.props.history.location.pathname,onChange:this.changeReport},t.map(function(e){return i.a.createElement(Lt.a.Option,{value:e.value,disabled:!e.active},e.name)}))),i.a.createElement("li",{style:{display:"inline",float:"right"}},i.a.createElement(Rc,{onChange:function(t,a){return e.props.reportsDateRange(a)},defaultValue:[ya()(),ya()()],format:"DD/MM/YYYY"}))))}}]),t}(i.a.Component),Bc=function(e){function t(){return Object(d.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return i.a.createElement("h2",null,"AmountDueReport")}}]),t}(i.a.Component),Hc=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).loadAppointmentReport=function(){var e=Object(f.a)(a);a.setState({loading:!0});ht(gt(Re,[a.props.active_practiceId]),function(t){console.log(t),e.setState({appointmentReports:t.data,loading:!1}),console.log(e.state.appointmentReports)},function(){e.setState({loading:!1})},{start:a.state.startDate.format("YYYY-MM-DD"),end:a.state.endDate.format("YYYY-MM-DD")})},a.state={appointmentReports:[],startDate:a.props.startDate,endDate:a.props.endDate,loading:!0},a.loadAppointmentReport=a.loadAppointmentReport.bind(Object(f.a)(a)),a.loadAppointmentReport(),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.startDate==e.startDate&&this.props.endDate==e.endDate||this.setState({startDate:e.startDate,endDate:e.endDate},function(){t.loadAppointmentReport()})}},{key:"render",value:function(){console.log("startApp",this.props.startDate);var e=[{title:"Date",key:"date",render:function(e,t){return i.a.createElement("span",null,ya()(t.schedule_at).format("LL"))}},{title:"Scheduled At\t",key:"time",render:function(e,t){return i.a.createElement("span",null,ya()(t.schedule_at).format("HH:mm"))}},{title:"Check-in At",dataIndex:"waiting",key:"waiting",render:function(e,t){return i.a.createElement("span",null,t.waiting?ya()(t.waiting).format("lll"):"")}},{title:"Waited For (hh:mm:ss)",dataIndex:"age",key:"age",render:function(e,t){return i.a.createElement("span",null,t.engaged?ya()(t.engaged).from(ya()(t.waiting)):"")}},{title:"Engaged At",dataIndex:"engaged",key:"engaged",render:function(e,t){return i.a.createElement("span",null,t.engaged?ya()(t.engaged).format("lll"):"")}},{title:"Checkout At",dataIndex:"checkout",key:"checkout",render:function(e,t){return i.a.createElement("span",null,t.checkout?ya()(t.checkout).format("lll"):"")}},{title:"Patient",dataIndex:"patient",key:"patient_name",render:function(e,t){return i.a.createElement("span",null,e.user.first_name)}},{title:"Doctor",dataIndex:"doctor",key:"address",render:function(e,t){return i.a.createElement("span",null,t.doctor_data?t.doctor_data.user.first_name:null)}},{title:"Category",dataIndex:"category",key:"address",render:function(e,t){return i.a.createElement("span",null,t.category_data?t.category_data.name:null)}}];return i.a.createElement("div",null,i.a.createElement("h2",null,"Appointments Report"),i.a.createElement(ia.a,null,i.a.createElement(Zt.a,{gutter:16},i.a.createElement(ea.a,{span:18},i.a.createElement(Zn,{loading:this.state.loading,columns:e,size:"small",dataSource:this.state.appointmentReports})),i.a.createElement(ea.a,{span:6},i.a.createElement(ha.a.Group,{buttonStyle:"solid",defaultValue:"all"},i.a.createElement("h2",null,"Appointments"),i.a.createElement(ha.a.Button,{style:{width:"100%",backgroundColor:"transparent",border:"0px"},value:"all"},"All Appointemnts"),i.a.createElement("p",null,i.a.createElement("br",null)),i.a.createElement("h2",null,"Related Reports"),[{name:"Appointments For Each Category",value:"b"},{name:"Cancellation Numbers",value:"c"},{name:"Average Waiting/engaged Time Day Wise",value:"d"},{name:"Average Waiting/engaged Time Month Wise",value:"e"},{name:"Reasons For Cancellations",value:"f"},{name:"Daily Appointment Count",value:"g"},{name:"Appointments For Each Doctor",value:"h"},{name:"Monthly Appointment Count",value:"i"},{name:"Appointment For Each Patient Group",value:"j"}].map(function(e){return i.a.createElement(ha.a.Button,{style:{width:"100%",backgroundColor:"transparent",border:"0px"},value:e.value},e.name)}))))))}}]),t}(i.a.Component),qc=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={report:[],loading:!0},a.report=a.report.bind(Object(f.a)(a)),a.report(),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"report",value:function(){var e=this;ht(gt("clinics/%s/treatment_report/",[this.props.active_practiceId,"start="+this.props.startDate+"&end="+this.props.endDate]),function(t){console.log(t),e.setState({report:t.data,loading:!1})},function(){e.setState({loading:!1})})}},{key:"render",value:function(){var e=[{title:"Date",key:"date",render:function(e,t){return i.a.createElement("span",null,ya()(t.created_at).format("LL"))}},{title:"Scheduled At\t",key:"time",render:function(e,t){return i.a.createElement("span",null,ya()(t.created_at).format("HH:mm"))}},{title:"\tPerformed on",dataIndex:"age",key:"age"},{title:"Name",dataIndex:"age",key:"age"},{title:"Performed by",dataIndex:"age",key:"age"}];return i.a.createElement("div",null,i.a.createElement("h2",null,"Expenses Report"),i.a.createElement(ia.a,null,i.a.createElement(Zt.a,{gutter:16},i.a.createElement(ea.a,{span:16},i.a.createElement(Zn,{loading:this.state.loading,columns:e,size:"small",dataSource:this.state.report})),i.a.createElement(ea.a,{span:8},i.a.createElement(ha.a.Group,{buttonStyle:"solid",defaultValue:"all"},i.a.createElement("h2",null,"Appointments"),i.a.createElement(ha.a.Button,{style:{width:"100%",backgroundColor:"transparent",border:"0px"},value:"all"},"All Treatments Performed"),i.a.createElement("p",null,i.a.createElement("br",null)),i.a.createElement("h2",null,"Related Reports"),[{name:"Daily Treatments Count",value:"b"},{name:"Treatments For Each Doctor",value:"c"},{name:"Monthly Treatments Count",value:"d"},{name:"Treatments For Each Category",value:"e"}].map(function(e){return i.a.createElement(ha.a.Button,{style:{width:"100%",backgroundColor:"transparent",border:"0px"},value:e.value},e.name)}))))))}}]),t}(i.a.Component),Yc=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={report:[],startDate:a.props.startDate,endDate:a.props.endDate,loading:!0},a.report=a.report.bind(Object(f.a)(a)),a.report(),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.startDate==e.startDate&&this.props.endDate==e.endDate||this.setState({startDate:e.startDate,endDate:e.endDate},function(){t.report()})}},{key:"report",value:function(){var e=this;this.setState({loading:!0});ht(gt("clinics/%s/expense_report/",[this.props.active_practiceId]),function(t){e.setState({report:t.data,loading:!1})},function(){e.setState({loading:!1})},{start:this.state.startDate.format("YYYY-MM-DD"),end:this.state.endDate.format("YYYY-MM-DD")})}},{key:"render",value:function(){var e=[{title:"Date",key:"date",render:function(e,t){return i.a.createElement("span",null,ya()(t.created_at).format("LL"))}},{title:"Scheduled At\t",key:"time",render:function(e,t){return i.a.createElement("span",null,ya()(t.created_at).format("HH:mm"))}},{title:"\tExpense Type",dataIndex:"age",key:"age"},{title:"Expense Amount (INR)",dataIndex:"age",key:"age"},{title:"Mode Of Payment",dataIndex:"age",key:"age"},{title:"Vendor",dataIndex:"age",key:"age"},{title:"Notes",dataIndex:"patient_name",key:"patient_name"}];return i.a.createElement("div",null,i.a.createElement("h2",null,"Expenses Report"),i.a.createElement(ia.a,null,i.a.createElement(Zt.a,{gutter:16},i.a.createElement(ea.a,{span:16},i.a.createElement(Zn,{loading:this.state.loading,columns:e,size:"small",dataSource:this.state.report})),i.a.createElement(ea.a,{span:8},i.a.createElement(ha.a.Group,{buttonStyle:"solid",defaultValue:"all"},i.a.createElement("h2",null,"Appointments"),i.a.createElement(ha.a.Button,{style:{width:"100%",backgroundColor:"transparent",border:"0px"},value:"all"},"All Expenses"),i.a.createElement("p",null,i.a.createElement("br",null)),i.a.createElement("h2",null,"Related Reports"),[{name:"Daily Expenses",value:"b"},{name:"Expenses For Each Type",value:"c"},{name:"Monthly Expenses",value:"d"}].map(function(e){return i.a.createElement(ha.a.Button,{style:{width:"100%",backgroundColor:"transparent",border:"0px"},value:e.value},e.name)}))))))}}]),t}(i.a.Component),zc=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).report=function(){var e=Object(f.a)(a);a.setState({loading:!0});ht(gt(Ne,[a.props.active_practiceId]),function(t){console.log(t),e.setState({report:t.data,loading:!1})},function(){e.setState({loading:!1})},{start:a.state.startDate.format("YYYY-MM-DD"),end:a.state.endDate.format("YYYY-MM-DD")})},a.state={report:[],startDate:a.props.startDate,endDate:a.props.endDate,loading:!0},a.report=a.report.bind(Object(f.a)(a)),a.report(),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.startDate==e.startDate&&this.props.endDate==e.endDate||this.setState({startDate:e.startDate,endDate:e.endDate},function(){t.report()})}},{key:"render",value:function(){var e=[{title:"Date",key:"date",render:function(e,t){return i.a.createElement("span",null,ya()(t.created_at).format("LL"))}},{title:"\tInvoice Number\t",dataIndex:"age",key:"age"},{title:"Patient",dataIndex:"age",key:"age"},{title:"Treatments & Products",dataIndex:"age",key:"age"}];return i.a.createElement("div",null,i.a.createElement("h2",null,"Income Report"),i.a.createElement(ia.a,null,i.a.createElement(Zt.a,{gutter:16},i.a.createElement(ea.a,{span:16},i.a.createElement(Zn,{loading:this.state.loading,columns:e,size:"small",dataSource:this.state.report})),i.a.createElement(ea.a,{span:8},i.a.createElement(ha.a.Group,{buttonStyle:"solid",defaultValue:"all"},i.a.createElement("h2",null,"Patients"),i.a.createElement(ha.a.Button,{style:{width:"100%",backgroundColor:"transparent",border:"0px"},value:"all"},"All Invoices"),i.a.createElement("p",null,i.a.createElement("br",null)),i.a.createElement("h2",null,"Related Reports"),i.a.createElement(ha.a.Button,{style:{width:"100%",backgroundColor:"transparent",border:"0px"},value:"b"},"Daily Invoiced Income"),i.a.createElement(ha.a.Button,{style:{width:"100%",backgroundColor:"transparent",border:"0px"},value:"c"},"Monthly Invoiced Income"),i.a.createElement(ha.a.Button,{style:{width:"100%",backgroundColor:"transparent",border:"0px"},value:"d"},"Taxed Invoiced Income"),i.a.createElement(ha.a.Button,{style:{width:"100%",backgroundColor:"transparent",border:"0px"},value:"e"},"Invoiced Income For Each Doctor"),i.a.createElement(ha.a.Button,{style:{width:"100%",backgroundColor:"transparent",border:"0px"},value:"f"},"Invoiced Income For Each Procedure"),i.a.createElement(ha.a.Button,{style:{width:"100%",backgroundColor:"transparent",border:"0px"},value:"g"},"Invoiced Income For Each Patient Group"),i.a.createElement(ha.a.Button,{style:{width:"100%",backgroundColor:"transparent",border:"0px"},value:"h"},"Invoiced Income For Each Product"))))))}}]),t}(i.a.Component),Gc=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={inventoryList:[],loading:!0},a.loadData=a.loadData.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){var e=this,t={bill_number:this.props.bill_number,supplier:this.props.supplier,date:this.props.date};(this.props.bill_number||this.props.supplier)&&ht("stock_entry/",function(t){e.setState({inventoryList:t.results,loading:!1})},function(){e.setState({loading:!1})},t)}},{key:"render",value:function(){var e=[{title:"name",key:"name",dataIndex:"inventory_item_data.name"},{title:"Batch",key:"batch_number",dataIndex:"batch_number"},{title:"Expiry Date",key:"expiry_date",dataIndex:"expiry_date"},{title:"Item Type",key:"item_type",dataIndex:"inventory_item_data.item_type"},{title:"ADD/CONSUME",key:"item_add_type",dataIndex:"item_add_type"},{title:"Type of Consumption",key:"type_of_consumption",dataIndex:"type_of_consumption"},{title:"Bill File",key:"bill_file",dataIndex:"bill_file",render:function(e){return e?i.a.createElement("a",{target:"_blank",href:ot(e)},"Bill"):null}},{title:"Quantity",key:"quantity",dataIndex:"quantity"},{title:"Unit Cost",key:"unit_cost",dataIndex:"unit_cost"},{title:"Total Cost",key:"total_cost",dataIndex:"total_cost"}];return i.a.createElement("div",null,i.a.createElement(ta.a,{loading:this.state.loading,bordered:!0,rowKey:function(e){return e.id},pagination:!1,columns:e,dataSource:this.state.inventoryList}))}}]),t}(i.a.Component),Uc=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).handleSubmit=function(e){var t=Object(f.a)(a);e.preventDefault(),a.props.form.validateFieldsAndScroll(function(e,a){e||t.setState({bill_number:a.bill_number,supplier:a.supplier,inventory:a.inventory,invoice:a.invoice},function(){t.loadBillSupplier()})})},a.state={loading:!1,billSuplier:[],startDate:a.props.startDate,endDate:a.props.endDate,nextItemPage:null,supplierList:[]},a.loadBillSupplier=a.loadBillSupplier.bind(Object(f.a)(a)),a.loadSupplierList=a.loadSupplierList.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.loadBillSupplier(),this.loadSupplierList()}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.startDate==e.startDate&&this.props.endDate==e.endDate||this.setState({startDate:e.startDate,endDate:e.endDate},function(){t.loadBillSupplier()})}},{key:"loadBillSupplier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this;t.setState({loading:!0});var a=function(e){t.setState(function(t){return 1==e.current?{loading:!1,billSuplier:e.results,nextItemPage:e.next}:{loading:!1,billSuplier:[].concat(Object(wr.a)(t.billSuplier),Object(wr.a)(e.results)),nextItemPage:e.next}})},n=function(){t.setState({loading:!1})},i={page:e,start:this.state.startDate.format("YYYY-MM-DD"),end:this.state.endDate.format("YYYY-MM-DD")};t.state.bill_number&&(i.bill_number=t.state.bill_number),t.state.supplier&&(i.supplier=t.state.supplier),t.state.invoice&&(i.invoice=1),t.state.inventory&&(i.inventory=1),ht("stock_entry/bills_suppliers/",a,n,i)}},{key:"expandIcon",value:function(e){return i.a.createElement(Vt.a,{onClick:function(t){return e.onExpand(e.record,t)}},"view detail")}},{key:"loadSupplierList",value:function(){var e=this,t={practice:this.props.active_practiceId};ht(gt("stock_entry/practice_supplier",[this.props.active_practiceId]),function(t){e.setState({supplierList:t})},function(){},t)}},{key:"handleChange",value:function(e,t){this.props.form.setFieldsValue(Object(u.a)({},e,t))}},{key:"render",value:function(){var e=this,t=this,a=this.props.form.getFieldDecorator,n=[{title:"Date",key:"date",dataIndex:"date",render:function(e){return i.a.createElement("span",null,e||"")}},{title:"Bill Number",key:"bill_number",dataIndex:"bill_number"},{title:"Supplier ",key:"name",dataIndex:"supplier_data.name"}];return i.a.createElement("div",null,i.a.createElement("h2",null,"Inventory Report"),i.a.createElement(ia.a,{bodyStyle:{padding:0},extra:i.a.createElement("div",null,i.a.createElement(fa.a,{layout:"inline",onSubmit:this.handleSubmit},i.a.createElement(fa.a.Item,{label:"Invoice"},a("invoice",{initialValue:!0})(i.a.createElement(sa.a,null))),i.a.createElement(fa.a.Item,{label:"Inventory"},a("inventory",{})(i.a.createElement(sa.a,null))),i.a.createElement(fa.a.Item,{label:"Bill Number"},a("bill_number",{})(i.a.createElement(ga.a,{placeholder:"Bill Numbers"}))),i.a.createElement(fa.a.Item,{key:"supplier",label:"Supplier"},a("supplier",{initialValue:this.state.supplierList?this.state.supplierList.name:null},{rules:[{required:!0,message:"This field required!"}],onChange:this.handleChange})(i.a.createElement(Lt.a,{placeholder:"Supplier",style:{minWidth:150},mode:"multiple"},this.state.supplierList.map(function(e){return i.a.createElement(Lt.a.Option,{value:e.id},e.name)})))),i.a.createElement(fa.a.Item,null,i.a.createElement(Vt.a,{type:"primary",htmlType:"submit",style:{margin:5}},"Submit"))))},i.a.createElement(ta.a,{loading:this.state.loading,bordered:!0,rowKey:function(e){return e.id},expandedRowRender:function(e){return i.a.createElement(Gc,Object.assign({},e,t.props))},columns:n,dataSource:this.state.billSuplier,pagination:!1}),i.a.createElement(Ei,{loaderFunction:function(){return e.loadBillSupplier(e.state.nextItemPage)},loading:this.state.loading,hidden:!this.state.nextItemPage})))}}]),t}(i.a.Component),Wc=fa.a.create()(Uc),Kc=function(e){function t(){return Object(d.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return i.a.createElement("h2",null,"Inventory Details Report")}}]),t}(i.a.Component),Qc=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={report:[],startDate:a.props.startDate,endDate:a.props.endDate,loading:!0},a.report=a.report.bind(Object(f.a)(a)),a.report(),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.startDate==e.startDate&&this.props.endDate==e.endDate||this.setState({startDate:e.startDate,endDate:e.endDate},function(){t.report()})}},{key:"report",value:function(){var e=this;e.setState({loading:!0});ht(gt("clinics/%s/patients_report/",[this.props.active_practiceId]),function(t){e.setState({report:t.data,loading:!1})},function(){e.setState({loading:!1})},{start:this.state.startDate.format("YYYY-MM-DD"),end:this.state.endDate.format("YYYY-MM-DD")})}},{key:"render",value:function(){var e=this,t=[{title:"Date",key:"date",render:function(e,t){return i.a.createElement("span",null,ya()(t.created_at).format("LL"))}},{title:"Scheduled At",key:"time",render:function(e,t){return i.a.createElement("span",null,ya()(t.created_at).format("HH:mm"))}},{title:"Name",dataIndex:"patient.user.first_name",key:"patient.user.first_name"},{title:"Patient Number",dataIndex:"patient.user.mobile",key:"patient.user.mobile",render:function(t){return e.props.activePracticePermissions.PatientPhoneNumber?t:Yt(t)}}];return i.a.createElement("div",null,i.a.createElement("h2",null,"Patients Report"),i.a.createElement(ia.a,null,i.a.createElement(Zt.a,{gutter:16},i.a.createElement(ea.a,{span:16},i.a.createElement(Zn,{loading:this.state.loading,columns:t,size:"small",pagination:!0,dataSource:this.state.report})),i.a.createElement(ea.a,{span:8},i.a.createElement(ha.a.Group,{buttonStyle:"solid",defaultValue:"all"},i.a.createElement("h2",null,"Patients"),i.a.createElement(ha.a.Button,{style:{width:"100%",backgroundColor:"transparent",border:"0px"},value:"all"},"New Patients"),i.a.createElement("p",null,i.a.createElement("br",null)),i.a.createElement("h2",null,"Related Reports"),[{name:"Daily New Patients",value:"b"},{name:"Expiring Membership",value:"c"},{name:"Patients First Appointment",value:"d"},{name:"Monthly New Patients",value:"e"},{name:"New Membership",value:"f"}].map(function(e){return i.a.createElement(ha.a.Button,{style:{width:"100%",backgroundColor:"transparent",border:"0px"},value:e.value},e.name)}))))))}}]),t}(i.a.Component),Xc=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={report:[],loading:!0},a.report=a.report.bind(Object(f.a)(a)),a.report(),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"report",value:function(){var e=this;ht(gt("clinics/%s/payments_report/",[this.props.active_practiceId,"start="+this.props.startDate+"&end="+this.props.endDate]),function(t){console.log(t),e.setState({report:t.data,loading:!1})},function(){e.setState({loading:!1})})}},{key:"render",value:function(){var e=[{title:"Date",key:"date",render:function(e,t){return i.a.createElement("span",null,ya()(t.shedule_at).format("LL"))}},{title:"Scheduled At\t",key:"time",render:function(e,t){return i.a.createElement("span",null,ya()(t.shedule_at).format("HH:mm"))}},{title:"Patient",dataIndex:"age",key:"age"},{title:"Receipt Number",dataIndex:"age",key:"age"},{title:"Invoice(s)",dataIndex:"age",key:"age"},{title:"Treatments & Products",dataIndex:"age",key:"age"},{title:"Amount Paid (INR)\t",dataIndex:"patient_name",key:"patient_name"},{title:"Advance Amount (INR)",dataIndex:"address",key:"address"},{title:"Payment Info\t",dataIndex:"address",key:"address"},{title:"Vendor Fees (INR)",dataIndex:"address",key:"address"}];return i.a.createElement("div",null,i.a.createElement("h2",null,"Payments Report"),i.a.createElement(ia.a,null,i.a.createElement(Zt.a,{gutter:16},i.a.createElement(ea.a,{span:16},i.a.createElement(Zn,{loading:this.state.loading,columns:e,size:"small",dataSource:this.state.report})),i.a.createElement(ea.a,{span:8},i.a.createElement(ha.a.Group,{buttonStyle:"solid",defaultValue:"all"},i.a.createElement("h2",null,"Patients"),i.a.createElement(ha.a.Button,{style:{width:"100%",backgroundColor:"transparent",border:"0px"},value:"all"},"All Payments"),i.a.createElement("p",null,i.a.createElement("br",null)),i.a.createElement("h2",null,"Related Reports"),[{name:"Refund Payments",value:"b"},{name:"Payment Received From Each Patient Group",value:"c"},{name:"Patients With Unsettled Advance, As Of Today",value:"d"},{name:"Modes Of Payment",value:"e"},{name:"Payment Received Per Day",value:"f"},{name:"Payment Received Per Doctor",value:"g"},{name:"Payment Received Per Month",value:"h"},{name:"Payment Settlement",value:"i"},{name:"Payment Settlement Per Doctor",value:"j"},{name:"Credit Notes",value:"k"},{name:"Credit Amount Per Doctor",value:"l"}].map(function(e){return i.a.createElement(ha.a.Button,{style:{width:"100%",backgroundColor:"transparent",border:"0px"},value:e.value},e.name)}))))))}}]),t}(i.a.Component),Jc=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this))).state={},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("h2",null,"Daily Summary Report"),i.a.createElement(ia.a,null,i.a.createElement(ta.a,{loading:this.state.loading,dataSource:[]})))}}]),t}(i.a.Component),$c=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).loadPackages=function(){var e=Object(f.a)(a);ht(gt(et,[a.props.active_practiceId]),function(t){e.setState({packages:t})},function(){})},a.loadBedBookingReport=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=Object(f.a)(a);a.setState({loading:!0});var n=function(e){console.log(e),1==e.current?t.setState({bedBookingReports:e.results,loading:!1,nextReport:e.next}):t.setState(function(t){return{bedBookingReports:[].concat(Object(wr.a)(t.bedBookingReports),Object(wr.a)(e.results)),loading:!1,nextReport:e.next}})},i=function(){t.setState({loading:!1})},r={start:a.state.startDate.format("YYYY-MM-DD"),end:a.state.endDate.format("YYYY-MM-DD"),page:e,practice:a.props.active_practiceId};a.state.payment_status&&(r.payment_status=a.state.payment_status),a.state.type&&(r.type=a.state.type),a.state.bed_packages&&(r.bed_packages=a.state.bed_packages.join(",")),ht(qe,n,i,r)},a.state={startDate:a.props.startDate,endDate:a.props.endDate,loading:!0,bedBookingReports:[],packages:[]},a.loadBedBookingReport=a.loadBedBookingReport.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.loadBedBookingReport(),this.loadPackages()}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.startDate==e.startDate&&this.props.endDate==e.endDate||this.setState({startDate:e.startDate,endDate:e.endDate},function(){t.loadBedBookingReport()})}},{key:"filterReport",value:function(e,t){this.setState(function(a){return Object(u.a)({},e,t)},function(){this.loadBedBookingReport()})}},{key:"filterBedPackages",value:function(e,t){this.setState(function(e){return{bed_packages:t}},function(){this.loadBedBookingReport()})}},{key:"render",value:function(){var e=this;console.log("state",this.state);this.props.form.getFieldDecorator;var t=this,a=[{title:"Package Name",key:"name",dataIndex:"bed_package.name"},{title:"Medicine Package",key:"medicine",dataIndex:"medicines",render:function(e,t){return i.a.createElement("span",null,e.map(function(e){return i.a.createElement(Mt.a,null,e.name)}))}},{title:"From ",key:"from_date",render:function(e,t){return i.a.createElement("span",null,ya()(t.from_date).format("LL"))}},{title:"To ",key:"to_date",render:function(e,t){return i.a.createElement("span",null,ya()(t.to_date).format("LL"))}},{title:"Seat/Bed Type",key:"seat_type",dataIndex:"seat_type"},{title:"Seat Number",key:"seat_no",dataIndex:"seat_no"},{title:"Total price",key:"total_price",dataIndex:"total_price",render:function(e){return i.a.createElement("p",null,e.toFixed(2))}},{title:"Payment Status",key:"payment_status",dataIndex:"payment_status"}];return i.a.createElement("div",null,i.a.createElement("h2",null,"Seat/Bed Booking Report"),i.a.createElement(ia.a,{extra:i.a.createElement("div",null,i.a.createElement(fa.a,{layout:"inline"},i.a.createElement(fa.a.Item,{label:"Payment Status"},i.a.createElement(Lt.a,{placeholder:"Payment Status",style:{minWidth:150},onChange:function(e){return t.filterReport("payment_status",e.join(","))},mode:"multiple"},vn.map(function(e){return i.a.createElement(Lt.a.Option,{value:e.value},e.label)}))),i.a.createElement(fa.a.Item,{label:"Type"},i.a.createElement(Lt.a,{style:{minWidth:150},onChange:function(t){return e.filterReport("type",t)}},_n.map(function(e){return i.a.createElement(Lt.a.Option,{value:e.value},e.label)}))),i.a.createElement(fa.a.Item,{label:"Bed Package"},i.a.createElement(Lt.a,{style:{minWidth:150},onChange:function(t){return e.filterBedPackages("bed_packages",t)},mode:"multiple"},t.state.packages.map(function(e){return i.a.createElement(Lt.a.Option,{value:e.id},e.name)})))))},i.a.createElement(Zn,{pagination:!1,loading:this.state.loading,columns:a,size:"small",dataSource:this.state.bedBookingReports}),i.a.createElement(Ei,{loaderFunction:function(){return e.loadBedBookingReport(e.state.nextReport)},loading:this.state.loading,hidden:!this.state.nextReport})))}}]),t}(i.a.Component),Zc=fa.a.create()($c),eo=s.a.Content,to=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={startDate:ya()(),endDate:ya()(),active_practiceId:a.props.active_practiceId},a.reportsDateRange=a.reportsDateRange.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"reportsDateRange",value:function(e){console.log(e),this.setState({startDate:ya()(e[0],"DD/MM/YYYY"),endDate:ya()(e[1],"DD/MM/YYYY")})}},{key:"render",value:function(){var e=this,t=this;return i.a.createElement(s.a,null,i.a.createElement(Nc,Object.assign({reportsDateRange:this.reportsDateRange},this.props)),i.a.createElement(eo,{style:{margin:"16px"}},i.a.createElement(b.d,null,i.a.createElement(b.b,{exact:!0,path:"/reports/amountdue",render:function(a){return t.props.activePracticePermissions.ReportsAmountDue||t.props.allowAllPermissions?i.a.createElement(Bc,Object.assign({},e.props,e.state,a)):i.a.createElement(qn,null)}}),i.a.createElement(b.b,{exact:!0,path:"/reports/emr",render:function(a){return t.props.activePracticePermissions.ReportsEMR||t.props.allowAllPermissions?i.a.createElement(qc,Object.assign({},e.props,e.state,a)):i.a.createElement(qn,null)}}),i.a.createElement(b.b,{exact:!0,path:"/reports/expenses",render:function(a){return t.props.activePracticePermissions.ReportsExpenses||t.props.allowAllPermissions?i.a.createElement(Yc,Object.assign({},e.props,e.state,a)):i.a.createElement(qn,null)}}),i.a.createElement(b.b,{exact:!0,path:"/reports/income",render:function(a){return t.props.activePracticePermissions.ReportsIncome||t.props.allowAllPermissions?i.a.createElement(zc,Object.assign({},e.props,e.state,a)):i.a.createElement(qn,null)}}),i.a.createElement(b.b,{exact:!0,path:"/reports/inventory",render:function(a){return t.props.activePracticePermissions.ReportsInventory||t.props.allowAllPermissions?i.a.createElement(Wc,Object.assign({},e.props,e.state,a)):i.a.createElement(qn,null)}}),i.a.createElement(b.b,{exact:!0,path:"/reports/inventoryretails",render:function(a){return t.props.activePracticePermissions.ReportsInventoryRetail||t.props.allowAllPermissions?i.a.createElement(Kc,Object.assign({},e.props,e.state,a)):i.a.createElement(qn,null)}}),i.a.createElement(b.b,{exact:!0,path:"/reports/patients",render:function(a){return t.props.activePracticePermissions.ReportsPatients||t.props.allowAllPermissions?i.a.createElement(Qc,Object.assign({},e.props,e.state,a)):i.a.createElement(qn,null)}}),i.a.createElement(b.b,{exact:!0,path:"/reports/payments",render:function(a){return t.props.activePracticePermissions.ReportsPayments||t.props.allowAllPermissions?i.a.createElement(Xc,Object.assign({},e.props,e.state,a)):i.a.createElement(qn,null)}}),i.a.createElement(b.b,{exact:!0,path:"/reports/summary",render:function(a){return t.props.activePracticePermissions.ReportsDailySummary||t.props.allowAllPermissions?i.a.createElement(Jc,Object.assign({},e.props,e.state,a)):i.a.createElement(qn,null)}}),i.a.createElement(b.b,{exact:!0,path:"/reports/bed_booking",render:function(a){return t.props.activePracticePermissions.ReportsBedBooking||t.props.allowAllPermissions?i.a.createElement(Zc,Object.assign({},e.props,e.state,a)):i.a.createElement(qn,null)}}),i.a.createElement(b.b,{render:function(a){return t.props.activePracticePermissions.ReportsAppointments||t.props.allowAllPermissions?i.a.createElement(Hc,Object.assign({},e.props,e.state,a)):i.a.createElement(qn,null)}}))))}}]),t}(i.a.Component),ao=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={editBlogData:a.props.editBlogData?a.props.editBlogData:null},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.props.match.params.id&&(this.state.editBlogData||this.loadData())}},{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"loadData",value:function(){var e=this;ht(gt("video/%s/",[this.props.match.params.id]),function(t){e.setState({editBlogData:t})},function(){})}},{key:"render",value:function(){var e,t=this,a=this,n=[{label:"Name",key:"name",initialValue:this.state.editBlogData?this.state.editBlogData.name:null,type:D},{label:"Rank ",key:"rank",initialValue:this.state.editBlogData?this.state.editBlogData.rank:1,type:I,required:!0,min:1},{label:"Video link",key:"link",initialValue:this.state.editBlogData?this.state.editBlogData.link:null,type:D,required:!0}];this.state.editBlogData&&(e={successFn:function(e){bt(k,"success"),a.setState({redirect:!0}),a.props.loadData()},errorFn:function(){},action:gt("video/%s/",[this.props.match.params.id]),method:"put"});var r=fa.a.create()(La),l={successFn:function(e){bt(k,"success"),a.setState({redirect:!0}),a.props.loadData(),console.log(e)},errorFn:function(){},action:"video/",method:"post"},s=[{key:"is_active",value:!0}];return i.a.createElement(Zt.a,null,i.a.createElement(ia.a,null,i.a.createElement(b.b,{exact:!0,path:"/web/videos/edit/:id",render:function(){return t.props.match.params.id?i.a.createElement(r,{defaultValues:s,title:"Edit Video",changeRedirect:t.changeRedirect,formProp:e,fields:n}):i.a.createElement(b.a,{to:"/web/videos"})}}),i.a.createElement(b.b,{exact:!0,path:"/web/videos/add",render:function(){return i.a.createElement(r,{title:"Add video",defaultValues:s,changeRedirect:t.changeRedirect,formProp:l,fields:n})}})),this.state.redirect&&i.a.createElement(b.a,{to:"/web/videos"}))}}]),t}(i.a.Component),no=a(475),io=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={videos:[],loading:!0},a.loadData=a.loadData.bind(Object(f.a)(a)),a.deleteObject=a.deleteObject.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){var e=this;ht("video/",function(t){e.setState({videos:t,loading:!1})},function(){e.setState({loading:!1})})}},{key:"deleteObject",value:function(e){var t=this,a={is_active:!1};pt(gt("video/%s/",[e.id]),a,function(e){t.loadData()},function(){})}},{key:"render",value:function(){var e=this,t=this,a={height:"200",width:"300",playerVars:{}},n=function(e){};return i.a.createElement("div",null,i.a.createElement(b.d,null,i.a.createElement(b.b,{exact:!0,path:"/web/videos/add",render:function(t){return i.a.createElement(ao,Object.assign({},e.state,t,{loadData:e.loadData}))}}),i.a.createElement(b.b,{exact:!0,path:"/web/videos/edit/:id",render:function(t){return i.a.createElement(ao,Object.assign({},e.state,t,{loadData:e.loadData}))}}),i.a.createElement(b.b,null,i.a.createElement(ia.a,{title:"Videos",extra:i.a.createElement(qt.b,{to:"/web/videos/add"}," ",i.a.createElement(Vt.a,{type:"primary"},i.a.createElement(Bt.a,{type:"plus"})," Add"))},i.a.createElement(Rt.a,{loading:this.state.loading,dataSource:this.state.videos,itemLayout:"vertical",renderItem:function(e){return i.a.createElement(Rt.a.Item,{key:e.id,actions:[i.a.createElement(qt.b,{to:"/web/videos/edit/"+e.id},"Edit"),i.a.createElement(aa.a,{title:"Are you sure delete this item?",onConfirm:function(){return t.deleteObject(e)},okText:"Yes",cancelText:"No"},i.a.createElement("a",null,"Delete"))],extra:i.a.createElement(no.a,{videoId:e.link,opts:a,onReady:n})},i.a.createElement(Rt.a.Item.Meta,{avatar:i.a.createElement(Nt.a,{style:{backgroundColor:"#87d068"}},e.rank),title:e.name}))}})))))}}]),t}(i.a.Component),ro=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={editBlogData:a.props.editBlogData?a.props.editBlogData:null},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"componentDidMount",value:function(){this.props.match.params.id&&(this.state.editBlogData||this.loadData())}},{key:"loadData",value:function(){var e=this;ht(gt("post/%s/",[this.props.match.params.id]),function(t){e.setState({editBlogData:t})},function(){})}},{key:"render",value:function(){var e,t=this,a=this,n=[{label:"Blog Title",key:"title",required:!0,initialValue:this.state.editBlogData?this.state.editBlogData.title:null,type:D},{label:"Blog Domain ",key:"domain",initialValue:this.state.editBlogData?this.state.editBlogData.domain:null,type:D},{label:"Blog URL ",key:"slug",required:!0,initialValue:this.state.editBlogData?this.state.editBlogData.slug:null,type:D},{label:"Blog Image",key:"featured_image",initialValue:this.state.editBlogData?this.state.editBlogData.featured_image:null,type:M},{label:"Posted On",key:"posted_on",initialValue:this.state.editBlogData?ya()(this.state.editBlogData.posted_on):null,type:C},{label:"SEO Description",key:"meta_description",initialValue:this.state.editBlogData?this.state.editBlogData.meta_description:null,type:D},{label:"SEO Keywords",key:"keywords",required:!0,initialValue:this.state.editBlogData?this.state.editBlogData.keywords:null,type:"textfield"},{label:"Content",key:"content",required:!0,initialValue:this.state.editBlogData?this.state.editBlogData.content:null,type:A,preview:!0}];this.state.editBlogData&&(e={successFn:function(e){bt(k,"success"),a.setState({redirect:!0}),a.props.loadData(),console.log(e)},errorFn:function(){},action:gt("post/%s/",[this.props.match.params.id]),method:"put"});var r=fa.a.create()(La),l={successFn:function(e){bt(k,"success"),a.setState({redirect:!0}),a.props.loadData(),console.log(e)},errorFn:function(){},action:"post/",method:"post"},s=[];return i.a.createElement(Zt.a,null,i.a.createElement(ia.a,null,i.a.createElement(b.b,{exact:!0,path:"/web/blog/edit/:id",render:function(){return t.props.match.params.id?i.a.createElement(r,{defaultValues:s,title:"Edit Post",changeRedirect:t.changeRedirect,formProp:e,fields:n}):i.a.createElement(b.a,{to:"/web/blog"})}}),i.a.createElement(b.b,{exact:!0,path:"/web/blog/add",render:function(){return i.a.createElement(r,{title:"Add Post",changeRedirect:t.changeRedirect,formProp:l,fields:n})}})),this.state.redirect&&i.a.createElement(b.a,{to:"/web/blog"}))}}]),t}(i.a.Component),lo=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={post:null,loading:!0},a.loadData=a.loadData.bind(Object(f.a)(a)),a.deleteObject=a.deleteObject.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){var e=this;ht("post/",function(t){e.setState({post:t,loading:!1})},function(){e.setState({loading:!1})})}},{key:"deleteObject",value:function(e){var t=this,a={is_active:!1};pt(gt("post/%s/",[e.id]),a,function(e){t.loadData()},function(){})}},{key:"render",value:function(){var e=this,t=this,a=[{title:"Blog Title",dataIndex:"title",key:"post_title"},{title:"Date",dataIndex:"posted_on",key:"post_date",export:function(e){return ya()(e).format("lll")},render:function(e){return ya()(e).format("lll")}},{title:"Actions",render:function(e){return i.a.createElement("div",null,i.a.createElement(qt.b,{to:"/web/blog/edit/"+e.id},"Edit"),i.a.createElement(na.a,{type:"vertical"}),i.a.createElement(aa.a,{title:"Are you sure delete this item?",onConfirm:function(){return t.deleteObject(e)},okText:"Yes",cancelText:"No"},i.a.createElement("a",null,"Delete")))}}];return i.a.createElement("div",null,i.a.createElement(b.d,null,i.a.createElement(b.b,{exact:!0,path:"/web/blog/add",render:function(t){return i.a.createElement(ro,Object.assign({},e.state,t))}}),i.a.createElement(b.b,{exact:!0,path:"/web/blog/edit/:id",render:function(t){return i.a.createElement(ro,Object.assign({},e.state,t))}}),i.a.createElement(ia.a,{title:"Blogs",extra:i.a.createElement(qt.b,{to:"/web/blog/add"}," ",i.a.createElement(Vt.a,{type:"primary"},i.a.createElement(Bt.a,{type:"plus"})," Add"))},i.a.createElement(ta.a,{loading:this.state.loading,dataSource:this.state.post,columns:a}))))}}]),t}(i.a.Component),so=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={editBlogData:a.props.editBlogData?a.props.editBlogData:null},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.props.match.params.id&&(this.state.editBlogData||this.loadData())}},{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"loadData",value:function(){var e=this;ht(gt("contactus/%s/",[this.props.match.params.id]),function(t){e.setState({editBlogData:t})},function(){})}},{key:"render",value:function(){var e,t=this,a=[{label:"Name",key:"name",required:!0,initialValue:this.state.editBlogData?this.state.editBlogData.name:null,type:D},{label:"Rank ",key:"contact_rank",initialValue:this.state.editBlogData?this.state.editBlogData.contact_rank:1,type:I,required:!0,min:1},{label:"Link",key:"link",initialValue:this.state.editBlogData?this.state.editBlogData.link:null,type:D},{label:"Phone Number ",key:"phone_no",initialValue:this.state.editBlogData?this.state.editBlogData.phone_no:null,type:D},{label:"Email",key:"email",required:!0,initialValue:this.state.editBlogData?this.state.editBlogData.email:null,type:D},{label:"Address",key:"address",required:!0,initialValue:this.state.editBlogData?this.state.editBlogData.address:null,type:"textfield",minRows:3}],n=this;this.state.editBlogData&&(e={successFn:function(e){bt(k,"success"),n.setState({redirect:!0}),n.props.loadData()},errorFn:function(){},action:gt("contactus/%s/",[this.props.match.params.id]),method:"put"});var r=fa.a.create()(La),l={successFn:function(e){bt(k,"success"),n.setState({redirect:!0}),n.props.loadData()},errorFn:function(){},action:"contactus/",method:"post"},s=[{key:"is_active",value:!0}];return i.a.createElement(Zt.a,null,i.a.createElement(ia.a,null,i.a.createElement(b.b,{exact:!0,path:"/web/contact/edit/:id",render:function(){return t.props.match.params.id?i.a.createElement(r,{defaultValues:s,title:"Edit Contact",changeRedirect:t.changeRedirect,formProp:e,fields:a}):i.a.createElement(b.a,{to:"/web/contact"})}}),i.a.createElement(b.b,{exact:!0,path:"/web/contact/add",render:function(){return i.a.createElement(r,{title:"Add Contact",defaultValues:s,changeRedirect:t.changeRedirect,formProp:l,fields:a})}})),this.state.redirect&&i.a.createElement(b.a,{to:"/web/contact"}))}}]),t}(i.a.Component),co=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={contacts:null,loading:!0},a.loadData=a.loadData.bind(Object(f.a)(a)),a.deleteObject=a.deleteObject.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){var e=this;ht("contactus/",function(t){e.setState({contacts:t,loading:!1})},function(){})}},{key:"deleteObject",value:function(e){var t=this,a={is_active:!1};pt(gt("contactus/%s/",[e.id]),a,function(e){t.loadData()},function(){})}},{key:"render",value:function(){var e=this,t=this,a=[{title:"Rank",dataIndex:"contact_rank",key:"rank"},{title:"Address",dataIndex:"address",key:"address"},{title:"Email",dataIndex:"email",key:"email"},{title:"Phone",dataIndex:"phone_no",key:"phone"},{title:"Actions",render:function(e){return i.a.createElement("div",null,i.a.createElement(qt.b,{to:"/web/contact/edit/"+e.id},"Edit"),i.a.createElement(na.a,{type:"vertical"}),i.a.createElement(aa.a,{title:"Are you sure delete this item?",onConfirm:function(){return t.deleteObject(e)},okText:"Yes",cancelText:"No"},i.a.createElement("a",null,"Delete")))}}];return i.a.createElement("div",null,i.a.createElement(b.d,null,i.a.createElement(b.b,{exact:!0,path:"/web/contact/add",render:function(t){return i.a.createElement(so,Object.assign({},e.state,t,{loadData:e.loadData}))}}),i.a.createElement(b.b,{exact:!0,path:"/web/contact/edit/:id",render:function(t){return i.a.createElement(so,Object.assign({},e.state,t,{loadData:e.loadData}))}}),i.a.createElement(ia.a,{title:"Contacts",extra:i.a.createElement(qt.b,{to:"/web/contact/add"}," ",i.a.createElement(Vt.a,{type:"primary"},i.a.createElement(Bt.a,{type:"plus"})," Add"))},i.a.createElement(ta.a,{loading:this.state.loading,dataSource:this.state.contacts,columns:a}))))}}]),t}(i.a.Component),oo=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={editBlogData:a.props.editBlogData?a.props.editBlogData:null},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.props.match.params.id&&(this.state.editBlogData||this.loadData())}},{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"loadData",value:function(){var e=this;ht(gt("disease/%s/",[this.props.match.params.id]),function(t){e.setState({editBlogData:t})},function(){})}},{key:"render",value:function(){var e,t=this,a=this,n=[{label:"Disease Type",key:"disease_type",initialValue:this.state.editBlogData?this.state.editBlogData.disease_type:null,type:S,options:Fa},{label:"Disease Name",key:"disease_name",initialValue:this.state.editBlogData?this.state.editBlogData.disease_name:null,type:D},{label:"Disease Main Image",key:"main_image",initialValue:this.state.editBlogData?this.state.editBlogData.main_image:null,type:M},{label:"Disease Side Image",key:"side_image",initialValue:this.state.editBlogData?this.state.editBlogData.side_image:[],type:L},{label:"SEO Description",key:"meta_description",initialValue:this.state.editBlogData?this.state.editBlogData.meta_description:null,type:"textfield"},{label:"SEO Keywords",key:"keywords",initialValue:this.state.editBlogData?this.state.editBlogData.keywords:null,type:"textfield"},{label:"URL",key:"domain",initialValue:this.state.editBlogData?this.state.editBlogData.domain:null,type:D,required:!0},{label:"Content",key:"content",initialValue:this.state.editBlogData?this.state.editBlogData.content:null,type:A}];this.state.editBlogData&&(e={successFn:function(e){bt(k,"success"),a.setState({redirect:!0}),a.props.loadData()},errorFn:function(){},action:gt("disease/%s/",[this.props.match.params.id]),method:"put"});var r=fa.a.create()(La),l={successFn:function(e){bt(k,"success"),a.setState({redirect:!0}),a.props.loadData()},errorFn:function(){},action:"disease/",method:"post"},s=[];return i.a.createElement(Zt.a,null,i.a.createElement(ia.a,null,i.a.createElement(b.b,{exact:!0,path:"/web/disease/edit/:id",render:function(){return t.props.match.params.id?i.a.createElement(r,{defaultValues:s,title:"Edit Disease",changeRedirect:t.changeRedirect,formProp:e,fields:n}):i.a.createElement(b.a,{to:"/web/disease"})}}),i.a.createElement(b.b,{exact:!0,path:"/web/disease/add",render:function(){return i.a.createElement(r,{title:"Add Disease",changeRedirect:t.changeRedirect,formProp:l,fields:n})}})),this.state.redirect&&i.a.createElement(b.a,{to:"/web/disease"}))}}]),t}(i.a.Component),uo=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={disease:null,loading:!0},a.loadDiseases=a.loadDiseases.bind(Object(f.a)(a)),a.deleteObject=a.deleteObject.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.loadDiseases()}},{key:"loadDiseases",value:function(){var e=this;ht("disease/",function(t){e.setState({disease:t,loading:!1})},function(){e.setState({loading:!1})})}},{key:"deleteObject",value:function(e){var t=this,a={is_active:!1};pt(gt("disease/%s/",[e.id]),a,function(e){t.loadDiseases()},function(){})}},{key:"render",value:function(){var e=this,t=this,a=[{title:"Disease Name",dataIndex:"disease_name",key:"disease_name"},{title:"Disease Type",dataIndex:"disease_type",key:"disease_type"},{title:"Actions",render:function(e){return i.a.createElement("div",null,i.a.createElement(qt.b,{to:"/web/disease/edit/"+e.id},"Edit"),i.a.createElement(na.a,{type:"vertical"}),i.a.createElement(aa.a,{title:"Are you sure delete this item?",onConfirm:function(){return t.deleteObject(e)},okText:"Yes",cancelText:"No"},i.a.createElement("a",null,"Delete")))}}];return i.a.createElement("div",null,i.a.createElement(b.d,null,i.a.createElement(b.b,{exact:!0,path:"/web/disease/add",render:function(t){return i.a.createElement(oo,Object.assign({},e.state,t,{loadData:e.loadDiseases}))}}),i.a.createElement(b.b,{exact:!0,path:"/web/disease/edit/:id",render:function(t){return i.a.createElement(oo,Object.assign({},e.state,t,{loadData:e.loadDiseases}))}}),i.a.createElement(ia.a,{title:"Disease",extra:i.a.createElement(qt.b,{to:"/web/disease/add"}," ",i.a.createElement(Vt.a,{type:"primary"},i.a.createElement(Bt.a,{type:"plus"})," Add"))},i.a.createElement(ta.a,{loading:this.state.loading,columns:a,dataSource:this.state.disease}))))}}]),t}(i.a.Component),mo=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={editBlogData:a.props.editBlogData?a.props.editBlogData:null},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"componentDidMount",value:function(){this.props.match.params.id&&(this.state.editBlogData||this.loadData())}},{key:"loadData",value:function(){var e=this;ht(gt("events/%s/",[this.props.match.params.id]),function(t){e.setState({editBlogData:t})},function(){})}},{key:"render",value:function(){var e,t=this,a=[{label:"Event Title",key:"title",initialValue:this.state.editBlogData?this.state.editBlogData.title:null,type:D},{label:"Event Date",key:"event_date",initialValue:this.state.editBlogData?this.state.editBlogData.event_date:null,type:C},{label:"Event Image",key:"event_image",initialValue:this.state.editBlogData?this.state.editBlogData.event_image:null,type:M},{label:"SEO Description",key:"meta_description",initialValue:this.state.editBlogData?this.state.editBlogData.meta_description:null,type:D},{label:"SEO Keywords",key:"keywords",required:!0,initialValue:this.state.editBlogData?this.state.editBlogData.keywords:null,type:"textfield"},{label:"URL",key:"domain",initialValue:this.state.editBlogData?this.state.editBlogData.domain:null,type:D},{label:"Content",key:"content",initialValue:this.state.editBlogData?this.state.editBlogData.content:null,type:A}],n=this;this.state.editBlogData&&(e={successFn:function(e){bt(k,"success"),console.log(e),n.props.loadData(),n.changeRedirect()},errorFn:function(){},action:gt("events/%s/",[this.props.match.params.id]),method:"put"});var r=fa.a.create()(La),l={successFn:function(e){bt(k,"success"),n.props.loadData(),n.changeRedirect(),console.log(e)},errorFn:function(){},action:"events/",method:"post"},s=[{key:"is_active",value:!0}];return i.a.createElement(Zt.a,null,i.a.createElement(ia.a,null,i.a.createElement(b.b,{exact:!0,path:"/web/event/edit/:id",render:function(){return t.props.match.params.id?i.a.createElement(r,{defaultValues:s,title:"Edit Event",changeRedirect:t.changeRedirect,formProp:e,fields:a}):i.a.createElement(b.a,{to:"/web/event"})}}),i.a.createElement(b.b,{exact:!0,path:"/web/event/add",render:function(){return i.a.createElement(r,{defaultValues:s,title:"Add Event",changeRedirect:t.changeRedirect,formProp:l,fields:a})}})),this.state.redirect&&i.a.createElement(b.a,{to:"/web/event"}))}}]),t}(i.a.Component),po=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={events:null,loading:!0},a.loadData=a.loadData.bind(Object(f.a)(a)),a.deleteObject=a.deleteObject.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){var e=this;ht("events/",function(t){e.setState({events:t,loading:!1})},function(){e.setState({loading:!1})})}},{key:"deleteObject",value:function(e){var t=this,a={is_active:!1};pt(gt("events/%s/",[e.id]),a,function(e){t.loadData()},function(){})}},{key:"render",value:function(){var e=this,t=this,a=[{title:"Event Title",dataIndex:"title",key:"event_title"},{title:"Date",dataIndex:"event_date",key:"event_date",render:function(e){return ya()(e).format("LLL")}},{title:"Actions",render:function(e){return i.a.createElement("div",null,i.a.createElement(qt.b,{to:"/web/event/edit/"+e.id},"Edit"),i.a.createElement(na.a,{type:"vertical"}),i.a.createElement(aa.a,{title:"Are you sure delete this item?",onConfirm:function(){return t.deleteObject(e)},okText:"Yes",cancelText:"No"},i.a.createElement("a",null,"Delete")))}}];return i.a.createElement("div",null,i.a.createElement(b.d,null,i.a.createElement(b.b,{exact:!0,path:"/web/event/add",render:function(t){return i.a.createElement(mo,Object.assign({},e.state,{loadData:e.loadData},t))}}),i.a.createElement(b.b,{exact:!0,path:"/web/event/edit/:id",render:function(t){return i.a.createElement(mo,Object.assign({},e.state,{loadData:e.loadData},t))}}),i.a.createElement(ia.a,{title:"Events",extra:i.a.createElement(qt.b,{to:"/web/event/add"},i.a.createElement(Vt.a,{type:"primary"},i.a.createElement(Bt.a,{type:"plus"})," Add"))},i.a.createElement(ta.a,{loading:this.state.loading,dataSource:this.state.events,columns:a}))))}}]),t}(i.a.Component),ho=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={editBlogData:a.props.editBlogData?a.props.editBlogData:null},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"componentDidMount",value:function(){this.props.match.params.id&&(this.state.editBlogData||this.loadData())}},{key:"loadData",value:function(){var e=this;console.log("i M groot");ht(gt("page_seo/%s/",[this.props.match.params.id]),function(t){e.setState({editBlogData:t})},function(){})}},{key:"render",value:function(){var e,t=this,a=[{label:"Page",key:"name",initialValue:this.state.editBlogData?this.state.editBlogData.name:null,type:D,disabled:!1},{label:"Page Title",key:"title",initialValue:this.state.editBlogData?this.state.editBlogData.title:null,type:D},{label:"SEO Description",key:"meta_description",initialValue:this.state.editBlogData?this.state.editBlogData.meta_description:null,type:"textfield"},{label:"SEO Keywords",key:"keywords",initialValue:this.state.editBlogData?this.state.editBlogData.keywords:null,type:"textfield"}],n=this;this.state.editBlogData&&(e={successFn:function(e){bt(k,"success"),n.setState({redirect:!0}),n.props.loadData(),console.log(e)},errorFn:function(){},action:gt("page_seo/%s/",[this.props.match.params.id]),method:"put"});var r=fa.a.create()(La),l={successFn:function(e){bt(k,"success"),n.setState({redirect:!0}),n.props.loadData(),console.log(e)},errorFn:function(){},action:"page_seo/",method:"post"},s=[{key:"is_active",value:!0}];return i.a.createElement(Zt.a,null,i.a.createElement(ia.a,null,i.a.createElement(b.b,{exact:!0,path:"/web/pageseo/edit/:id",render:function(){return t.props.match.params.id?i.a.createElement(r,{defaultValues:s,title:"Edit SEO",changeRedirect:t.changeRedirect,formProp:e,fields:a}):i.a.createElement(b.a,{to:"web/pageseo"})}}),i.a.createElement(b.b,{exact:!0,path:"/web/pageseo/add",render:function(){return i.a.createElement(r,{title:"Add SEO",changeRedirect:t.changeRedirect,formProp:l,fields:a})}})),this.state.redirect&&i.a.createElement(b.a,{to:"/web/pageseo"}))}}]),t}(i.a.Component),fo=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={pageSEO:null,loading:!0},a.loadData=a.loadData.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){var e=this;ht("page_seo/",function(t){e.setState({pageSEO:t,loading:!1})},function(){e.setState({loading:!1})})}},{key:"render",value:function(){var e=this,t=[{title:"Name",dataIndex:"name",key:"name"},{title:"Title",dataIndex:"title",key:"title"},{title:"SEO Descriptions",dataIndex:"meta_description",key:"meta_description"},{title:"SEO Keywords",dataIndex:"keywords",key:"keywords"},{title:"Actions",render:function(e){return i.a.createElement("div",null,i.a.createElement(qt.b,{to:"/web/pageseo/edit/"+e.id},"Edit"))}}];return i.a.createElement("div",null,i.a.createElement(b.d,null,i.a.createElement(b.b,{exact:!0,path:"/web/pageseo/edit/:id",render:function(t){return i.a.createElement(ho,Object.assign({loadData:e.loadData},e.state,t))}}),i.a.createElement(ia.a,{title:"Pages SEO"},i.a.createElement(ta.a,{loading:this.state.loading,dataSource:this.state.pageSEO,columns:t}))))}}]),t}(i.a.Component),go=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={editBlogData:a.props.editBlogData?a.props.editBlogData:null},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"componentDidMount",value:function(){this.props.match.params.id&&(this.state.editBlogData||this.loadData())}},{key:"loadData",value:function(){var e=this;console.log("i M groot");ht(gt("slider/%s/",[this.props.match.params.id]),function(t){e.setState({editBlogData:t})},function(){})}},{key:"render",value:function(){var e,t=this,a=[{label:"Name",key:"name",initialValue:this.state.editBlogData?this.state.editBlogData.name:null,type:D},{label:"Page Title ",key:"title",initialValue:this.state.editBlogData?this.state.editBlogData.title:null,type:D},{label:"Rank ",key:"rank",initialValue:this.state.editBlogData?this.state.editBlogData.rank:null,type:I},{label:"Slider Image ",key:"silder_image",initialValue:this.state.editBlogData?this.state.editBlogData.silder_image:null,type:M}],n=this;this.state.editBlogData&&(e={successFn:function(e){bt(k,"success"),console.log(e),n.props.loadData(),n.changeRedirect()},errorFn:function(){},action:gt("slider/%s/",[this.props.match.params.id]),method:"put"});var r=fa.a.create()(La),l={successFn:function(e){bt(k,"success"),n.props.loadData(),n.changeRedirect(),console.log(e)},errorFn:function(){},action:"slider/",method:"post"},s=[{key:"is_active",value:!0}];return i.a.createElement(Zt.a,null,i.a.createElement(ia.a,null,i.a.createElement(b.b,{exact:!0,path:"/web/slider-image/edit/:id",render:function(){return t.props.match.params.id?i.a.createElement(r,{defaultValues:s,title:"Edit Slider Image",changeRedirect:t.changeRedirect,formProp:e,fields:a}):i.a.createElement(b.a,{to:"web/silder-image"})}}),i.a.createElement(b.b,{exact:!0,path:"/web/slider-image/add",render:function(){return i.a.createElement(r,{title:"Add Slider Image",defaultValues:s,changeRedirect:t.changeRedirect,formProp:l,fields:a})}})),this.state.redirect&&i.a.createElement(b.a,{to:"/web/slider-image"}))}}]),t}(i.a.Component),bo=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={slider:[],loading:!0},a.loadData=a.loadData.bind(Object(f.a)(a)),a.deleteObject=a.deleteObject.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentWillMount",value:function(){this.loadData()}},{key:"loadData",value:function(){var e=this;ht("slider/",function(t){console.log(t),e.setState({slider:t,loading:!1})},function(){e.setState({loading:!1})})}},{key:"deleteObject",value:function(e){var t=this,a={is_active:!1};pt(gt("slider/%s/",[e.id]),a,function(e){t.loadData()},function(){})}},{key:"render",value:function(){var e=this,t=this;return i.a.createElement("div",null,i.a.createElement(b.d,null,i.a.createElement(b.b,{exact:!0,path:"/web/slider-image/add",render:function(t){return i.a.createElement(go,Object.assign({},e.state,t,{loadData:e.loadData}))}}),i.a.createElement(b.b,{exact:!0,path:"/web/slider-image/edit/:id",render:function(t){return i.a.createElement(go,Object.assign({},e.state,t,{loadData:e.loadData}))}}),i.a.createElement(ia.a,{title:"Slider Image",extra:i.a.createElement(qt.b,{to:"/web/slider-image/add"},i.a.createElement(Vt.a,{type:"primary"},i.a.createElement(Bt.a,{type:"plus"})," Add"))},i.a.createElement(Rt.a,{loading:this.state.loading,itemLayout:"vertical",dataSource:this.state.slider,renderItem:function(e){return i.a.createElement(Rt.a.Item,{key:e.id,extra:i.a.createElement("img",{src:ot(e.silder_image),alt:e.title,style:{maxWidth:"100%",width:"400px"}}),actions:[i.a.createElement(qt.b,{to:"/web/slider-image/edit/"+e.id},"Edit"),i.a.createElement(aa.a,{title:"Are you sure delete this item?",onConfirm:function(){return t.deleteObject(e)},okText:"Yes",cancelText:"No"},i.a.createElement("a",null,"Delete"))]},i.a.createElement(Rt.a.Item.Meta,{avatar:i.a.createElement(Nt.a,null,e.rank),title:e.title,description:e.name}))}}))))}}]),t}(i.a.Component),yo=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={editBlogData:a.props.editBlogData?a.props.editBlogData:null},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"componentDidMount",value:function(){this.props.match.params.id&&(this.state.editBlogData||this.loadData())}},{key:"loadData",value:function(){var e=this;console.log("i M groot");ht(gt("facility/%s/",[this.props.match.params.id]),function(t){e.setState({editBlogData:t})},function(){})}},{key:"render",value:function(){var e,t=this,a=[{label:"Name",key:"name",initialValue:this.state.editBlogData?this.state.editBlogData.name:null,type:D},{label:"content",key:"content",initialValue:this.state.editBlogData?this.state.editBlogData.content:null,type:A}],n=this;this.state.editBlogData&&(e={successFn:function(e){bt(k,"success"),console.log(e),n.props.loadData(),n.changeRedirect()},errorFn:function(){},action:gt("facility/%s/",[this.props.match.params.id]),method:"put"});var r=fa.a.create()(La),l={successFn:function(e){bt(k,"success"),n.props.loadData(),n.changeRedirect(),console.log(e)},errorFn:function(){},action:"facility/",method:"post"},s=[{key:"is_active",value:!0}];return i.a.createElement(Zt.a,null,i.a.createElement(ia.a,null,i.a.createElement(b.b,{exact:!0,path:"/web/facilities/edit/:id",render:function(){return t.props.match.params.id?i.a.createElement(r,{defaultValues:s,title:"Edit Facility",changeRedirect:t.changeRedirect,formProp:e,fields:a}):i.a.createElement(b.a,{to:"web/facilities"})}}),i.a.createElement(b.b,{exact:!0,path:"/web/facilities/add",render:function(){return i.a.createElement(r,{title:"Add Facility",defaultValues:s,changeRedirect:t.changeRedirect,formProp:l,fields:a})}})),this.state.redirect&&i.a.createElement(b.a,{to:"/web/facilities"}))}}]),t}(i.a.Component),Eo=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={facility:null,loading:!0},a.loadData=a.loadData.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){var e=this;ht("facility/",function(t){e.setState({facility:t,loading:!1})},function(){e.setState({loading:!1})})}},{key:"deleteObject",value:function(e){var t=this,a={is_active:!1};pt(gt("facility/%s/",[e.id]),a,function(e){t.loadData()},function(){})}},{key:"render",value:function(){var e=this,t=this,a=[{title:"Name",dataIndex:"name",key:"name"},{title:"Actions",render:function(e){return i.a.createElement("div",null,i.a.createElement(qt.b,{to:"/web/facilities/edit/"+e.id},"Edit"),i.a.createElement(na.a,{type:"vertical"}),i.a.createElement(aa.a,{title:"Are you sure delete this item?",onConfirm:function(){return t.deleteObject(e)},okText:"Yes",cancelText:"No"},i.a.createElement("a",null,"Delete")))}}];return i.a.createElement("div",null,i.a.createElement(b.d,null,i.a.createElement(b.b,{exact:!0,path:"/web/facilities/add",render:function(t){return i.a.createElement(yo,Object.assign({loadData:e.loadData},e.state,t))}}),i.a.createElement(b.b,{exact:!0,path:"/web/facilities/edit/:id",render:function(t){return i.a.createElement(yo,Object.assign({loadData:e.loadData},e.state,t))}}),i.a.createElement(ia.a,{title:"Facilities",extra:i.a.createElement(qt.b,{to:"/web/facilities/add"}," ",i.a.createElement(Vt.a,{type:"primary"},i.a.createElement(Bt.a,{type:"plus"})," Add"))},i.a.createElement(ta.a,{loading:this.state.loading,dataSource:this.state.facility,columns:a}))))}}]),t}(i.a.Component),vo=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={editBlogData:a.props.editBlogData?a.props.editBlogData:null},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.props.match.params.id&&(this.state.editBlogData||this.loadData())}},{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"loadData",value:function(){var e=this;ht(gt("landing_page_video/%s/",[this.props.match.params.id]),function(t){e.setState({editBlogData:t})},function(){})}},{key:"render",value:function(){var e,t=this,a=this,n=[{label:"Name",key:"name",initialValue:this.state.editBlogData?this.state.editBlogData.name:null,type:D},{label:"Rank ",key:"rank",initialValue:this.state.editBlogData?this.state.editBlogData.rank:null,type:I},{label:"Video link",key:"link",initialValue:this.state.editBlogData?this.state.editBlogData.link:null,type:D}];this.state.editBlogData&&(e={successFn:function(e){bt(k,"success"),console.log(e),a.props.loadData(),a.changeRedirect()},errorFn:function(){},action:gt("landing_page_video/%s/",[this.props.match.params.id]),method:"put"});var r=fa.a.create()(La),l={successFn:function(e){bt(k,"success"),a.props.loadData(),console.log(e),a.changeRedirect()},errorFn:function(){},action:"landing_page_video/",method:"post"},s=[{is_active:!0}];return i.a.createElement(Zt.a,null,i.a.createElement(ia.a,null,i.a.createElement(b.b,{exact:!0,path:"/web/landingpagevideo/edit/:id",render:function(){return t.props.match.params.id?i.a.createElement(r,{defaultValues:s,title:"Edit Video",changeRedirect:t.changeRedirect,formProp:e,fields:n}):i.a.createElement(b.a,{to:"/web/landingpagevideo"})}}),i.a.createElement(b.b,{exact:!0,path:"/web/landingpagevideo/add",render:function(){return i.a.createElement(r,{title:"Add video",defaultValues:s,changeRedirect:t.changeRedirect,formProp:l,fields:n})}})),this.state.redirect&&i.a.createElement(b.a,{to:"/web/landingpagevideo"}))}}]),t}(i.a.Component),_o=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={videos:[],loading:!0},a.loadData=a.loadData.bind(Object(f.a)(a)),a.deleteObject=a.deleteObject.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){var e=this;ht("landing_page_video/",function(t){e.setState({videos:t,loading:!1})},function(){e.setState({loading:!1})})}},{key:"deleteObject",value:function(e){var t=this,a={is_active:!1};pt(gt("landing_page_video/%s/",[e.id]),a,function(e){t.loadData()},function(){})}},{key:"render",value:function(){var e=this,t=this,a={height:"200",width:"300"};return i.a.createElement("div",null,i.a.createElement(b.d,null,i.a.createElement(b.b,{exact:!0,path:"/web/landingpagevideo/add",render:function(t){return i.a.createElement(vo,Object.assign({},e.state,{loadData:e.loadData},t))}}),i.a.createElement(b.b,{exact:!0,path:"/web/landingpagevideo/edit/:id",render:function(t){return i.a.createElement(vo,Object.assign({},e.state,{loadData:e.loadData},t))}}),i.a.createElement(ia.a,{title:"Landing Page Video",extra:i.a.createElement(qt.b,{to:"/web/landingpagevideo/add"}," ",i.a.createElement(Vt.a,{type:"primary"},i.a.createElement(Bt.a,{type:"plus"})," Add"))},i.a.createElement(Rt.a,{loading:this.state.loading,dataSource:this.state.videos,itemLayout:"vertical",renderItem:function(e){return i.a.createElement(Rt.a.Item,{key:e.id,actions:[i.a.createElement(qt.b,{to:"/web/landingpagevideo/edit/"+e.id},"Edit"),i.a.createElement(aa.a,{title:"Are you sure delete this item?",onConfirm:function(){return t.deleteObject(e)},okText:"Yes",cancelText:"No"},i.a.createElement("a",null,"Delete"))],extra:i.a.createElement(no.a,{videoId:e.link,opts:a})},i.a.createElement(Rt.a.Item.Meta,{avatar:i.a.createElement(Nt.a,{style:{backgroundColor:"#87d068"}},e.rank),title:e.name}))}}))))}}]),t}(i.a.Component),ko=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={editBlogData:a.props.editBlogData?a.props.editBlogData:null},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.props.match.params.id&&(this.state.editBlogData||this.loadData())}},{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"loadData",value:function(){var e=this;ht(gt("landing_page_content/%s/",[this.props.match.params.id]),function(t){e.setState({editBlogData:t})},function(){})}},{key:"render",value:function(){var e,t=this,a=this,n=[{label:"Title",key:"title",initialValue:this.state.editBlogData?this.state.editBlogData.title:null,type:D},{label:"Image",key:"image",initialValue:this.state.editBlogData?this.state.editBlogData.image:null,type:M},{label:"Content",key:"content",initialValue:this.state.editBlogData?this.state.editBlogData.content:null,type:A}];this.state.editBlogData&&(e={successFn:function(e){bt(k,"success"),a.setState({redirect:!0}),a.props.loadData()},errorFn:function(){},action:gt("landing_page_content/%s/",[this.props.match.params.id]),method:"put"});var r=fa.a.create()(La),l={successFn:function(e){bt(k,"success"),a.setState({redirect:!0}),a.props.loadData()},errorFn:function(){},action:"landing_page_content/",method:"post"},s=[];return i.a.createElement(Zt.a,null,i.a.createElement(ia.a,null,i.a.createElement(b.b,{exact:!0,path:"/web/landingpagecontent/edit/:id",render:function(){return t.props.match.params.id?i.a.createElement(r,{defaultValues:s,title:"Edit Content",changeRedirect:t.changeRedirect,formProp:e,fields:n}):i.a.createElement(b.a,{to:"/web/landingpagecontent"})}}),i.a.createElement(b.b,{exact:!0,path:"/web/landingpagecontent/add",render:function(){return i.a.createElement(r,{title:"Add Content",changeRedirect:t.changeRedirect,formProp:l,fields:n})}})),this.state.redirect&&i.a.createElement(b.a,{to:"/web/landingpagecontent"}))}}]),t}(i.a.Component),Oo=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={pageContent:[],loading:!0},a.loadData=a.loadData.bind(Object(f.a)(a)),a.deleteObject=a.deleteObject.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){var e=this;ht("landing_page_content/",function(t){e.setState({pageContent:t,loading:!1})},function(){e.setState({loading:!1})})}},{key:"deleteObject",value:function(e){var t=this,a={is_active:!1};pt(gt("landing_page_content/%s/",[e.id]),a,function(e){t.loadData()},function(){})}},{key:"render",value:function(){var e=this,t=this;return i.a.createElement("div",null,i.a.createElement(b.d,null,i.a.createElement(b.b,{exact:!0,path:"/web/landingpagecontent/add",render:function(t){return i.a.createElement(ko,Object.assign({},e.state,t))}}),i.a.createElement(b.b,{exact:!0,path:"/web/landingpagecontent/edit/:id",render:function(t){return i.a.createElement(ko,Object.assign({},e.state,t))}}),i.a.createElement(ia.a,{title:"Landing Page Content",extra:i.a.createElement(qt.b,{to:"/web/landingpagecontent/add"}," ",i.a.createElement(Vt.a,{type:"primary"},i.a.createElement(Bt.a,{type:"plus"})," Add"))},i.a.createElement(Rt.a,{loading:this.state.loading,dataSource:this.state.pageContent,itemLayout:"vertical",renderItem:function(e){return i.a.createElement(Rt.a.Item,{key:e.id,actions:[i.a.createElement(qt.b,{to:"/web/landingpagecontent/edit/"+e.id},"Edit"),i.a.createElement(aa.a,{title:"Are you sure delete this item?",onConfirm:function(){return t.deleteObject(e)},okText:"Yes",cancelText:"No"},i.a.createElement("a",null,"Delete"))],extra:i.a.createElement("img",{src:ot(e.image),style:{width:"300px"}})},i.a.createElement(Rt.a.Item.Meta,{avatar:i.a.createElement(Nt.a,{style:{backgroundColor:"#87d068"}},e.rank),title:e.title,description:i.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.content}})}))}}))))}}]),t}(i.a.Component),Po=s.a.Sider,jo=function(e){function t(){return Object(d.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return i.a.createElement(Po,{trigger:null,collapsible:!0,style:{overflow:"auto",minHeight:"100vh",background:"#fff"}},i.a.createElement(Ht.a,{mode:"inline",defaultSelectedKeys:["web-1"]},i.a.createElement(Ht.a.ItemGroup,{key:"g1",title:i.a.createElement(na.a,{style:{margin:"0px"}},"Web Settings")},i.a.createElement(Ht.a.Item,{key:"web-1"},i.a.createElement(qt.b,{to:"/web/videos"},i.a.createElement(Bt.a,{type:"youtube"}),i.a.createElement("span",{className:"nav-text"},"Videos"))),i.a.createElement(Ht.a.Item,{key:"web-2"},i.a.createElement(qt.b,{to:"/web/disease"},i.a.createElement(Bt.a,{type:"bell"}),i.a.createElement("span",{className:"nav-text"},"Disease"))),i.a.createElement(Ht.a.Item,{key:"web-3"},i.a.createElement(qt.b,{to:"/web/blog"},i.a.createElement(Bt.a,{type:"pic-right"}),i.a.createElement("span",{className:"nav-text"},"Blogs"))),i.a.createElement(Ht.a.Item,{key:"web-4"},i.a.createElement(qt.b,{to:"/web/event"},i.a.createElement(Bt.a,{type:"notification"}),i.a.createElement("span",{className:"nav-text"},"Events"))),i.a.createElement(Ht.a.Item,{key:"web-5"},i.a.createElement(qt.b,{to:"/web/contact"},i.a.createElement(Bt.a,{type:"phone"}),i.a.createElement("span",{className:"nav-text"},"Contacts"))),i.a.createElement(Ht.a.Item,{key:"web-6"},i.a.createElement(qt.b,{to:"/web/pageseo"},i.a.createElement(Bt.a,{type:"search"}),i.a.createElement("span",{className:"nav-text"},"Page SEO"))),i.a.createElement(Ht.a.Item,{key:"web-7"},i.a.createElement(qt.b,{to:"/web/slider-image"},i.a.createElement(Bt.a,{type:"picture"}),i.a.createElement("span",{className:"nav-text"},"Slider Image"))),i.a.createElement(Ht.a.Item,{key:"web-8"},i.a.createElement(qt.b,{to:"/web/facilities"},i.a.createElement(Bt.a,{type:"gift"}),i.a.createElement("span",{className:"nav-text"},"Facilities"))),i.a.createElement(Ht.a.Item,{key:"web-9"},i.a.createElement(qt.b,{to:"/web/landingpagevideo"},i.a.createElement(Bt.a,{type:"video-camera"}),i.a.createElement("span",{className:"nav-text"},"Landing Page Videos"))),i.a.createElement(Ht.a.Item,{key:"web-10"},i.a.createElement(qt.b,{to:"/web/landingpagecontent"},i.a.createElement(Bt.a,{type:"read"}),i.a.createElement("span",{className:"nav-text"},"Landing Page Content"))),i.a.createElement(Ht.a.Item,{key:"web-11"},i.a.createElement(qt.b,{to:"/web/manageproduct"},i.a.createElement(Bt.a,{type:"hdd"}),i.a.createElement("span",{className:"nav-text"},"Manage Product"))),i.a.createElement(Ht.a.Item,{key:"web-12"},i.a.createElement(qt.b,{to:"/web/managetherapy"},i.a.createElement(Bt.a,{type:"box-plot"}),i.a.createElement("span",{className:"nav-text"},"Manage Therapy"))))))}}]),t}(i.a.Component),Do=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={editProductData:a.props.editProductData?a.props.editProductData:null},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.props.match.params.id&&(this.state.editProductData||this.loadData())}},{key:"loadData",value:function(){var e=this;ht(gt("product_content/%s/",[this.props.match.params.id]),function(t){e.setState({editProductData:t})},function(){})}},{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"render",value:function(){var e,t=this,a=this,n=[{label:"Product Name",key:"title",required:!0,initialValue:this.state.editProductData?this.state.editProductData.title:null,type:D},{label:"Product Price",key:"price",required:!0,initialValue:this.state.editProductData?this.state.editProductData.price:null,type:I},{label:"Product Image",key:"image",type:M},{label:"Content",key:"content",required:!0,initialValue:this.state.editProductData?this.state.editProductData.content:null,type:A}];this.state.editProductData&&(e={successFn:function(e){bt(k,"success"),a.setState({redirect:!0}),a.props.loadData()},errorFn:function(){},action:gt("product_content/%s/",[this.props.match.params.id]),method:"put"});var r=fa.a.create()(La),l={successFn:function(e){console.log("formaDta",e),bt(k,"success"),a.setState({redirect:!0}),a.props.loadData()},errorFn:function(){},action:"product_content/",method:"post"},s=[];return i.a.createElement(Zt.a,null,i.a.createElement(ia.a,null,i.a.createElement(b.b,{exact:!0,path:"/web/manageproduct/edit/:id",render:function(){return t.props.match.params.id?i.a.createElement(r,{defaultValues:s,title:"Edit Product",changeRedirect:t.changeRedirect,formProp:e,fields:n}):i.a.createElement(b.a,{to:"web/manageproduct"})}}),i.a.createElement(b.b,{exact:!0,path:"/web/manageproduct/add",render:function(){return i.a.createElement(r,{title:"Add Product",defaultValues:s,changeRedirect:t.changeRedirect,formProp:l,fields:n})}})),this.state.redirect&&i.a.createElement(b.a,{to:"/web/manageproduct"}))}}]),t}(i.a.Component),So=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={productData:null,loading:!0},a.loadData=a.loadData.bind(Object(f.a)(a)),a.deleteObject=a.deleteObject.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){var e=this;console.log("product Data",e.state.product),ht("product_content/",function(t){console.log("data a",t),e.setState({productData:t,loading:!1})},function(){e.setState({loading:!1})})}},{key:"deleteObject",value:function(e){var t=this,a={is_active:!1};pt(gt("product_content/%s/",[e.id]),a,function(e){t.loadData()},function(){})}},{key:"render",value:function(){var e=this,t=this,a=[{title:"Name",dataIndex:"title",key:"title"},{title:"Description",render:function(e){return i.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.content}})}},{title:"Actions",render:function(e){return i.a.createElement("div",null,i.a.createElement(qt.b,{to:"/web/manageproduct/edit/"+e.id},"Edit"),i.a.createElement(na.a,{type:"vertical"}),i.a.createElement(aa.a,{title:"Are you sure delete this item?",onConfirm:function(){return t.deleteObject(e)},okText:"Yes",cancelText:"No"},i.a.createElement("a",null,"Delete")))}}];return i.a.createElement("div",null,i.a.createElement(b.d,null,i.a.createElement(b.b,{exact:!0,path:"/web/manageproduct/edit/:id",render:function(t){return i.a.createElement(Do,Object.assign({loadData:e.loadData},e.state,t))}}),i.a.createElement(b.b,{exact:!0,path:"/web/manageproduct/add",render:function(t){return i.a.createElement(Do,Object.assign({loadData:e.loadData},e.state,t))}}),i.a.createElement(ia.a,{title:"Products",extra:i.a.createElement(qt.b,{to:"/web/manageproduct/add"}," ",i.a.createElement(Vt.a,{type:"primary"},i.a.createElement(Bt.a,{type:"plus"})," Add"))},i.a.createElement(ta.a,{loading:this.state.loading,dataSource:this.state.productData,columns:a}))))}}]),t}(i.a.Component),xo=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={editTherapyData:a.props.editTherapyData?a.props.editTherapyData:null},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.props.match.params.id&&(this.state.editTherapyData||this.loadData())}},{key:"loadData",value:function(){var e=this;ht(gt("therapy_content/%s/",[this.props.match.params.id]),function(t){e.setState({editTherapyData:t})},function(){})}},{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"render",value:function(){var e,t=this,a=this,n=[{label:"Therapy Name",key:"title",required:!0,initialValue:this.state.editTherapyData?this.state.editTherapyData.title:null,type:D},{label:"Therapy Image",key:"image",required:!0,type:M},{label:"Content",key:"content",required:!0,initialValue:this.state.editTherapyData?this.state.editTherapyData.content:null,type:A}];this.state.editTherapyData&&(e={successFn:function(e){bt(k,"success"),a.setState({redirect:!0}),a.props.loadData()},errorFn:function(){},action:gt("therapy_content/%s/",[this.props.match.params.id]),method:"put"});var r=fa.a.create()(La),l={successFn:function(e){bt(k,"success"),a.setState({redirect:!0}),a.props.loadData()},errorFn:function(){},action:"therapy_content/",method:"post"},s=[];return i.a.createElement(Zt.a,null,i.a.createElement(ia.a,null,i.a.createElement(b.b,{exact:!0,path:"/web/managetherapy/edit/:id",render:function(){return t.props.match.params.id?i.a.createElement(r,{defaultValues:s,title:"Edit Therapy",changeRedirect:t.changeRedirect,formProp:e,fields:n}):i.a.createElement(b.a,{to:"web/managetherapy"})}}),i.a.createElement(b.b,{exact:!0,path:"/web/managetherapy/add",render:function(){return i.a.createElement(r,{title:"Add Therapy",defaultValues:s,changeRedirect:t.changeRedirect,formProp:l,fields:n})}})),this.state.redirect&&i.a.createElement(b.a,{to:"/web/managetherapy"}))}}]),t}(i.a.Component),Io=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={therapyData:null,loading:!0},a.loadData=a.loadData.bind(Object(f.a)(a)),a.deleteObject=a.deleteObject.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){var e=this;console.log("product Data",e.state.therapyData),ht("therapy_content/",function(t){console.log("data a",t),e.setState({therapyData:t,loading:!1})},function(){e.setState({loading:!1})})}},{key:"deleteObject",value:function(e){var t=this,a={is_active:!1};pt(gt("therapy_content/%s/",[e.id]),a,function(e){t.loadData()},function(){})}},{key:"render",value:function(){var e=this,t=this,a=[{title:"Name",dataIndex:"title",key:"title"},{title:"Description",render:function(e){return i.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.content}})}},{title:"Actions",render:function(e){return i.a.createElement("div",null,i.a.createElement(qt.b,{to:"/web/managetherapy/edit/"+e.id},"Edit"),i.a.createElement(na.a,{type:"vertical"}),i.a.createElement(aa.a,{title:"Are you sure delete this item?",onConfirm:function(){return t.deleteObject(e)},okText:"Yes",cancelText:"No"},i.a.createElement("a",null,"Delete")))}}];return i.a.createElement("div",null,i.a.createElement(b.d,null,i.a.createElement(b.b,{exact:!0,path:"/web/managetherapy/edit/:id",render:function(t){return i.a.createElement(xo,Object.assign({loadData:e.loadData},e.state,t))}}),i.a.createElement(b.b,{exact:!0,path:"/web/managetherapy/add",render:function(t){return i.a.createElement(xo,Object.assign({loadData:e.loadData},e.state,t))}}),i.a.createElement(ia.a,{title:"Therapy",extra:i.a.createElement(qt.b,{to:"/web/managetherapy/add"}," ",i.a.createElement(Vt.a,{type:"primary"},i.a.createElement(Bt.a,{type:"plus"})," Add"))},i.a.createElement(ta.a,{loading:this.state.loading,dataSource:this.state.therapyData,columns:a}))))}}]),t}(i.a.Component),Co=s.a.Content,wo=function(e){function t(){return Object(d.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return i.a.createElement(Co,{className:"main-container",style:{minHeight:280}},i.a.createElement(s.a,null,i.a.createElement(jo,this.props),i.a.createElement(Co,{style:{margin:"24px 16px",minHeight:280}},i.a.createElement(b.d,null,i.a.createElement(b.b,{path:"/web/videos",render:function(e){return i.a.createElement(io,null)}}),i.a.createElement(b.b,{path:"/web/blog",render:function(e){return i.a.createElement(lo,null)}}),i.a.createElement(b.b,{path:"/web/contact",render:function(e){return i.a.createElement(co,null)}}),i.a.createElement(b.b,{path:"/web/disease",render:function(e){return i.a.createElement(uo,null)}}),i.a.createElement(b.b,{path:"/web/event",render:function(e){return i.a.createElement(po,null)}}),i.a.createElement(b.b,{path:"/web/pageseo",render:function(e){return i.a.createElement(fo,null)}}),i.a.createElement(b.b,{path:"/web/slider-image",render:function(e){return i.a.createElement(bo,null)}}),i.a.createElement(b.b,{path:"/web/facilities",render:function(e){return i.a.createElement(Eo,null)}}),i.a.createElement(b.b,{path:"/web/landingpagevideo",render:function(e){return i.a.createElement(_o,null)}}),i.a.createElement(b.b,{path:"/web/landingpagecontent",render:function(e){return i.a.createElement(Oo,null)}}),i.a.createElement(b.b,{path:"/web/manageproduct",render:function(e){return i.a.createElement(So,null)}}),i.a.createElement(b.b,{path:"/web/managetherapy",render:function(e){return i.a.createElement(Io,null)}}),i.a.createElement(b.b,{component:Oi})))))}}]),t}(i.a.Component),To=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).changeRedirect=function(){var e=a.state.redirect;a.setState({redirect:!e})},a.state={editData:a.props.editData?a.props.editData:null},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.props.match.params.id&&(this.state.editData||this.loadData())}},{key:"loadData",value:function(){var e=this;ht(gt("vendor/%s/",[this.props.match.params.id]),function(t){e.setState({editData:t})},function(){})}},{key:"render",value:function(){var e,t=this,a=this,n=[{label:"Name",key:"name",initialValue:this.state.editData?this.state.editData.name:null,type:D,required:!0},{label:"Description",key:"description",initialValue:this.state.editData?this.state.editData.description:null,type:D}];this.state.editData&&(e={successFn:function(e){bt(k,"success"),a.props.loadData(),console.log(e)},errorFn:function(){},action:gt("vendor/%s/",[this.props.match.params.id]),method:"put"});var r=fa.a.create()(La),l={successFn:function(e){bt(k,"success"),a.props.loadData(),console.log(e)},errorFn:function(){},action:gt(ze,[a.props.active_practiceId]),method:"post"},s=[{key:"practice",value:this.props.active_practiceId}];return i.a.createElement(Zt.a,null,i.a.createElement(ia.a,null,i.a.createElement(b.b,{exact:!0,path:"/inventory/vendor/edit/:id",render:function(a){return t.props.match.params.id?i.a.createElement(r,Object.assign({defaultValues:s,title:"Edit Vendor",changeRedirect:t.changeRedirect,formProp:e},a,{fields:n})):i.a.createElement(b.a,{to:"/inventory/vendor"})}}),i.a.createElement(b.b,{exact:!0,path:"/inventory/vendor/add",render:function(e){return i.a.createElement(r,Object.assign({title:"Add Vendor",changeRedirect:t.changeRedirect},e,{formProp:l,fields:n}))}})),this.state.redirect&&i.a.createElement(b.a,{to:"/inventory/vendor"}))}}]),t}(i.a.Component);function Ao(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var Mo=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={active_practiceId:a.props.active_practiceId,vendors:null},a.loadData=a.loadData.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){var e=this;ht(gt(ze,[this.props.active_practiceId]),function(t){e.setState({vendors:t})},function(){})}},{key:"deleteVendor",value:function(e){var t=this,a=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ao(a,!0).forEach(function(t){Object(u.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ao(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},e,{is_active:!1});console.log("is_active",a);ut(gt("vendor/%s/",[e]),a,function(e){t.loadData(),console.log("Deleted")},function(){})}},{key:"render",value:function(){var e=this,t=this,a=[{title:"Name",key:"name",dataIndex:"name"},{title:"Details",key:"details",dataIndex:"description"},{title:"Action",render:function(e){return i.a.createElement("div",null,i.a.createElement(qt.b,{to:"/inventory/vendor/edit/"+e.id},"Edit"),i.a.createElement(na.a,{type:"vertical"}),i.a.createElement(aa.a,{title:"Are you sure delete this item?",onConfirm:function(){return t.deleteVendor(e.id)},okText:"Yes",cancelText:"No"},i.a.createElement("a",{disabled:!t.props.activePracticePermissions.DeleteVendor},"Delete")))}}];return i.a.createElement("div",null,i.a.createElement(b.d,null,i.a.createElement(b.b,{exact:!0,path:"/inventory/vendor/add",render:function(a){return t.props.activePracticePermissions.EditVendor||t.props.allowAllPermissions?i.a.createElement(To,Object.assign({},e.state,a,{loadData:t.loadData})):i.a.createElement(qn,null)}}),i.a.createElement(b.b,{exact:!0,path:"/inventory/vendor/edit/:id",render:function(a){return t.props.activePracticePermissions.EditVendor||t.props.allowAllPermissions?i.a.createElement(To,Object.assign({},e.state,a,{loadData:t.loadData})):i.a.createElement(qn,null)}}),i.a.createElement(ia.a,{title:"Vendors",extra:t.props.activePracticePermissions.EditVendor?i.a.createElement(qt.b,{to:"/inventory/vendor/add"}," ",i.a.createElement(Vt.a,{type:"primary"},i.a.createElement(Bt.a,{type:"plus"})," Add")):null},i.a.createElement(Zn,{columns:a,dataSource:this.state.vendors,hideReport:!t.props.activePracticePermissions.ExportVendor}))))}}]),t}(i.a.Component),Lo=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={editData:a.props.editData?a.props.editData:null},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"componentDidMount",value:function(){this.props.match.params.id&&(this.state.editData||this.loadData()),this.loadExpensetypes(),this.loadPaymentModes(),this.loadVendors()}},{key:"loadPaymentModes",value:function(){var e=this;ht(gt(X,[this.props.active_practiceId]),function(t){console.log("get table"),e.setState({paymentModes:t}),console.log("payment mode",e.state.paymentModes)},function(){})}},{key:"loadData",value:function(){var e=this;ht(gt("expenses/%s/",[this.props.match.params.id]),function(t){e.setState({editData:t})},function(){})}},{key:"loadExpensetypes",value:function(){var e=this;ht(gt(ie,[this.props.active_practiceId]),function(t){console.log("get table"),e.setState({expense_types:t})},function(){})}},{key:"loadVendors",value:function(){var e=this;ht(gt(ze,[this.props.active_practiceId]),function(t){console.log("get table"),e.setState({vendors:t})},function(){})}},{key:"render",value:function(){var e=this,t=[];this.state.paymentModes&&this.state.paymentModes.forEach(function(e){t.push({label:e.mode,value:e.id})});var a=[];this.state.expense_types&&this.state.expense_types.forEach(function(e){a.push({label:e.name,value:e.id})});var n=[];this.state.vendors&&this.state.vendors.forEach(function(e){n.push({label:e.name,value:e.id})});var r,l=[{label:"Expense Date",key:"expense_date",required:!0,initialValue:this.state.editData?this.state.editData.expense_date:ya()(),type:C},{label:"Amount",key:"amount",required:!0,initialValue:this.state.editData?this.state.editData.amount:null,type:D},{label:"Vendor",key:"vendor",type:S,initialValue:this.state.editData?this.state.editData.vendors:null,options:n},{label:"Expense type",key:"expense_type",type:S,initialValue:this.state.editData?this.state.editData.expense_type.id:null,options:a},{label:"Payment Mode",key:"payment_mode",type:S,required:!0,initialValue:this.state.editData?this.state.editData.payment_mode.id:null,options:t},{label:"Bank Name",key:"bank_name",type:D,initialValue:this.state.editData?this.state.editData.bank_name:null},{label:"Remark",key:"remark",type:"textfield",minRows:2,maxRows:6,initialValue:this.state.editData?this.state.editData.remark:null}],s=this;this.state.editData&&(r={successFn:function(e){bt(k,"success"),s.props.loadData(),s.changeRedirect()},errorFn:function(){},action:gt("expenses/%s/",[this.props.match.params.id]),method:"put"});var c=fa.a.create()(La),o={successFn:function(e){bt(k,"success"),s.props.loadData(),s.changeRedirect(),console.log(e)},errorFn:function(){},action:Ye,method:"post"},u=[{key:"practice",value:this.props.active_practiceId}];return i.a.createElement(Zt.a,null,i.a.createElement(ia.a,null,i.a.createElement(b.b,{exact:!0,path:"/inventory/expenses/edit/:id",render:function(){return e.props.match.params.id?i.a.createElement(c,{defaultValues:u,title:"Edit Expense",changeRedirect:e.changeRedirect,formProp:r,fields:l}):i.a.createElement(b.a,{to:"/inventory/expenses"})}}),i.a.createElement(b.b,{exact:!0,path:"/inventory/expenses/add",render:function(){return i.a.createElement(c,{title:"Add Expenses",changeRedirect:e.changeRedirect,formProp:o,fields:l})}})),this.state.redirect&&i.a.createElement(b.a,{to:"/inventory/expenses"}))}}]),t}(i.a.Component),Vo=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).changeExpenseFilters=function(e,t){var n=Object(f.a)(a);a.setState(Object(u.a)({},e,t),function(){n.loadData()})},a.loadData=function(){var e=Object(f.a)(a);e.setState({loading:!0});ht(Ye,function(t){e.setState({expenses:t,loading:!1}),console.log("log data",e.state.expenses)},function(){e.setState({loading:!1})},{payment_mode:e.state.selectedPaymentMode,expense_type:e.state.selectedExpenseType,start:e.state.selectedStartDate.format(),end:e.state.selectedEndDate.format()})},a.state={active_practiceId:a.props.active_practiceId,expenses:null,expenseTypes:[],loading:!0,paymentModes:[],selectedExpenseType:null,selectedPaymentMode:null,selectedStartDate:ya()().subtract(1,"month"),selectedEndDate:ya()()},a.loadData=a.loadData.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.loadExpenseTypes(),this.loadPaymentModes(),this.loadData()}},{key:"loadExpenseTypes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this,a=function(a){console.log("get table"),e?t.setState({deletedExpenses:a,deletedLoading:!1}):t.setState({expenseTypes:a})},n=function(){};e?ht(gt(ie,[this.props.active_practiceId]),a,n,{deleted:!0}):ht(gt(ie,[this.props.active_practiceId]),a,n)}},{key:"loadPaymentModes",value:function(){var e=this;ht(gt(X,[this.props.active_practiceId]),function(t){console.log("get table"),e.setState({paymentModes:t})},function(){})}},{key:"deleteObject",value:function(e,t){var a=this,n=e;n.is_active=t;dt(gt("expenses/%s/",[e.id]),n,function(e){a.loadData(),a.state.showDeleted&&a.loadData(!0)},function(){})}},{key:"render",value:function(){var e=this,t=this,a=[{title:"Expense Date",key:"expense_date",dataIndex:"expense_date",export:function(e){return ya()(e).format("lll")},render:function(e){return ya()(e).format("lll")}},{title:"Expense Type",key:"expense_type",dataIndex:"expense_type.name"},{title:"Vendor",key:"vendor",dataIndex:"vendor.name"},{title:"Payment Mode",key:"payment_mode",dataIndex:"payment_mode.mode"},{title:"Amount",key:"amount",dataIndex:"amount"},{title:"Bank Name",key:"bank_name",dataIndex:"bank_name"},{title:"Remark",key:"remark",dataIndex:"remark"},{title:"Action",render:function(e){return i.a.createElement("div",null,t.props.activePracticePermissions.EditExpenses||t.props.allowAllPermissions?i.a.createElement(qt.b,{to:"/inventory/expenses/edit/"+e.id},"Edit"):null,i.a.createElement(na.a,{type:"vertical"}),t.props.activePracticePermissions.DeleteExpenses||t.props.allowAllPermissions?i.a.createElement(aa.a,{title:"Are you sure to delete this?",onConfirm:function(){return t.deleteObject(e,!1)},okText:"Yes",cancelText:"No"},i.a.createElement("a",null,"Delete")):null)}}];return i.a.createElement("div",null,i.a.createElement(b.d,null,i.a.createElement(b.b,{exact:!0,path:"/inventory/expenses/add",render:function(a){return t.props.activePracticePermissions.EditExpenses||t.props.allowAllPermissions?i.a.createElement(Lo,Object.assign({},e.state,a,{loadData:e.loadData})):i.a.createElement(qn,null)}}),i.a.createElement(b.b,{exact:!0,path:"/inventory/expenses/edit/:id",render:function(a){return t.props.activePracticePermissions.EditExpenses||t.props.allowAllPermissions?i.a.createElement(Lo,Object.assign({},e.state,a,{loadData:e.loadData})):i.a.createElement(qn,null)}}),i.a.createElement(ia.a,{title:"Expenses",extra:t.props.activePracticePermissions.EditExpenses||t.props.allowAllPermissions?i.a.createElement(qt.b,{to:"/inventory/expenses/add"}," ",i.a.createElement(Vt.a,{type:"primary"},i.a.createElement(Bt.a,{type:"plus"})," Add")):i.a.createElement(qn,null)},i.a.createElement(Zt.a,{gutter:16,style:{marginBottom:10}},i.a.createElement(ea.a,{span:2,style:{textAlign:"right"}},i.a.createElement("b",null," Expense Types")),i.a.createElement(ea.a,{span:4},i.a.createElement(Lt.a,{style:{width:"100%"},value:this.state.selectedExpenseType,disabled:this.state.loading,onChange:function(t){return e.changeExpenseFilters("selectedExpenseType",t)}},i.a.createElement(Lt.a.Option,{value:null},"--ALL EXPENSES--"),this.state.expenseTypes.map(function(e){return i.a.createElement(Lt.a.Option,{value:e.id},e.name)}))),i.a.createElement(ea.a,{span:2,style:{textAlign:"right"}},i.a.createElement("b",null," Payment Modes")),i.a.createElement(ea.a,{span:4},i.a.createElement(Lt.a,{style:{width:"100%"},value:this.state.selectedPaymentMode,disabled:this.state.loading,onChange:function(t){return e.changeExpenseFilters("selectedPaymentMode",t)}},i.a.createElement(Lt.a.Option,{value:null},"--ALL PAYMENT MODE--"),this.state.paymentModes.map(function(e){return i.a.createElement(Lt.a.Option,{value:e.id},e.mode)}))),i.a.createElement(ea.a,{span:2,style:{textAlign:"right"}},i.a.createElement("b",null," From")),i.a.createElement(ea.a,{span:4},i.a.createElement(ma.a,{value:this.state.selectedStartDate,disabled:this.state.loading,onChange:function(t){return e.changeExpenseFilters("selectedStartDate",t)}})),i.a.createElement(ea.a,{span:2,style:{textAlign:"right"}},i.a.createElement("b",null," To")),i.a.createElement(ea.a,{span:4},i.a.createElement(ma.a,{value:this.state.selectedEndDate,disabled:this.state.loading,onChange:function(t){return e.changeExpenseFilters("selectedEndDate",t)}}))),i.a.createElement(Zn,{loading:this.state.loading,dataSource:this.state.expenses,columns:a,hideReport:!t.props.activePracticePermissions.ExportExpenses}))))}}]),t}(i.a.Component),Fo=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).changeRedirect=function(){var e=a.state.redirect;a.setState({redirect:!e})},a.state={editData:a.props.editData?a.props.editData:null},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.props.match.params.id&&(this.state.editData||this.loadData())}},{key:"loadData",value:function(){var e=this;ht(gt("manufacturer/%s/",[this.props.match.params.id]),function(t){e.setState({editData:t})},function(){})}},{key:"render",value:function(){var e=this;console.log("props",this.state);var t,a=this,n=[{label:"Name",key:"name",initialValue:this.state.editData?this.state.editData.name:null,type:D},{label:"Details",key:"description",initialValue:this.state.editData?this.state.editData.description:null,type:"textfield"}];this.state.editData&&(t={successFn:function(e){bt(k,"success"),a.props.loadData(),console.log(e)},errorFn:function(){},action:gt("manufacturer/%s/",[this.props.match.params.id]),method:"put"});var r=fa.a.create()(La),l={successFn:function(e){bt(k,"success"),a.props.loadData(),console.log(e)},errorFn:function(){},action:"manufacturer/",method:"post"},s=[{key:"practice",value:this.props.active_practiceId}];return i.a.createElement(Zt.a,null,i.a.createElement(ia.a,null,i.a.createElement(b.b,{path:"/inventory/manufacture/edit/:id",render:function(a){return e.props.match.params.id?i.a.createElement(r,Object.assign({defaultValues:s,title:"Edit Manufacturer",changeRedirect:e.changeRedirect,formProp:t},a,{fields:n})):i.a.createElement(b.a,{to:"/inventory/manufacture"})}}),i.a.createElement(b.b,{exact:!0,path:"/inventory/manufacture/add",render:function(t){return a.props.activePracticePermissions.EditManufacturer||a.props.allowAllPermissions?i.a.createElement(r,Object.assign({title:"Add Manufacturer",changeRedirect:e.changeRedirect},t,{formProp:l,fields:n})):i.a.createElement(qn,null)}})),this.state.redirect&&i.a.createElement(b.a,{to:"/inventory/manufacture"}))}}]),t}(i.a.Component);function Ro(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var No=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={active_practiceId:a.props.active_practiceId,manufactures:null,loading:!0},a.loadData=a.loadData.bind(Object(f.a)(a)),a.deleteManufacture=a.deleteManufacture.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){var e=this;ht("manufacturer/",function(t){e.setState({manufactures:t,loading:!1})},function(){e.setState({loading:!1})})}},{key:"deleteManufacture",value:function(e){var t=this,a=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ro(a,!0).forEach(function(t){Object(u.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ro(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},e,{is_active:!1});ut(gt("manufacturer/%s/",[e]),a,function(e){t.setState({loading:!1}),t.loadData()},function(){})}},{key:"render",value:function(){var e=this,t=this,a=[{title:"Name",key:"name",dataIndex:"name"},{title:"Details",key:"details",dataIndex:"description"},{title:"Action",render:function(e){return i.a.createElement("div",null,t.props.activePracticePermissions.EditManufacturer||t.props.allowAllPermissions?i.a.createElement(qt.b,{to:"/inventory/manufacture/edit/"+e.id},"Edit"):null,i.a.createElement(na.a,{type:"vertical"}),t.props.activePracticePermissions.DeleteManufacturer||t.props.allowAllPermissions?i.a.createElement(aa.a,{title:"Are you sure delete this item?",onConfirm:function(){return t.deleteManufacture(e.id)},okText:"Yes",cancelText:"No"},i.a.createElement("a",null,"Delete")):null)}}];return i.a.createElement("div",null,i.a.createElement(b.d,null,i.a.createElement(b.b,{exact:!0,path:"/inventory/manufacture/add",render:function(a){return t.props.activePracticePermissions.EditManufacturer||t.props.allowAllPermissions?i.a.createElement(Fo,Object.assign({},e.state,a,e.props,{loadData:t.loadData})):i.a.createElement(qn,null)}}),i.a.createElement(b.b,{path:"/inventory/manufacture/edit/:id",render:function(a){return t.props.activePracticePermissions.EditManufacturer||t.props.allowAllPermissions?i.a.createElement(Fo,Object.assign({},e.state,e.props,a,{loadData:t.loadData})):i.a.createElement(qn,null)}}),i.a.createElement(ia.a,{title:"Manufacturers",extra:i.a.createElement(qt.b,{to:"/inventory/manufacture/add"}," ",i.a.createElement(Vt.a,{type:"primary",disabled:!t.props.activePracticePermissions.EditManufacturer},i.a.createElement(Bt.a,{type:"plus"})," Add"))},i.a.createElement(Zn,{loading:this.state.loading,dataSource:this.state.manufactures,columns:a,hideReport:!t.props.activePracticePermissions.ExportManufacturer}))))}}]),t}(i.a.Component),Bo=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={editData:a.props.editData?a.props.editData:null},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"componentDidMount",value:function(){this.props.match.params.id&&(this.state.editData||this.loadData()),this.getPatientListData()}},{key:"loadData",value:function(){var e=this;ht(gt("expenses/%s/",[this.props.match.params.id]),function(t){e.setState({editData:t})},function(){})}},{key:"getPatientListData",value:function(){var e=this;ht(ee,function(t){e.setState({patientListData:t})},function(){})}},{key:"render",value:function(){var e=this,t=[];this.state.patientListData&&this.state.patientListData.length&&this.state.patientListData.forEach(function(e){t.push({label:e.name,value:e.id})});var a,n=[{label:"Job number ",key:"job_no",initialValue:this.state.editData?this.state.editData.job_no:null,type:D},{label:"Doctor Name ",key:"job_no",initialValue:this.state.editData?this.state.editData.doctor_name:null,type:D},{label:"Name ",key:"name",initialValue:this.state.editData?this.state.editData.name:null,type:D},{label:"Status ",key:"status",initialValue:this.state.editData?this.state.editData.status:null,type:D},{label:"Due Date",key:"due_date",type:C,initialValue:this.state.editData?this.state.editData.due_date:null,format:"YYYY/MM/DD HH:mm"},{label:"patient",key:"patient",type:S,initialValue:this.state.editData?this.state.editData.patient:null,options:t}];this.state.editBlogData&&(a={successFn:function(e){bt(k,"success"),console.log(e)},errorFn:function(){},action:gt("lab/%s/",[this.props.match.params.id]),method:"put"});var r=fa.a.create()(La),l={successFn:function(e){bt(k,"success"),console.log(e)},errorFn:function(){},action:"lab/",method:"post"},s=[{key:"practice",value:this.props.active_practiceId}];return i.a.createElement(Zt.a,null,i.a.createElement(ia.a,null,i.a.createElement(b.b,{exact:!0,path:"/inventory/lab/edit/:id",render:function(){return e.props.match.params.id?i.a.createElement(r,{defaultValues:s,title:"Edit Lab",changeRedirect:e.changeRedirect,formProp:a,fields:n}):i.a.createElement(b.a,{to:"/inventory/lab"})}}),i.a.createElement(b.b,{exact:!0,path:"/inventory/lab/add",render:function(){return i.a.createElement(r,{title:"Add lab",changeRedirect:e.changeRedirect,formProp:l,fields:n})}})),this.state.redirect&&i.a.createElement(b.a,{to:"/inventory/lab"}))}}]),t}(i.a.Component),Ho=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={active_practiceId:a.props.active_practiceId,lab:null,loading:!0},a.loadData=a.loadData.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){var e=this;ht("lab/",function(t){e.setState({lab:t,loading:!1})},function(){e.setState({loading:!1})})}},{key:"render",value:function(){var e=this;return i.a.createElement("div",null,i.a.createElement(b.d,null,i.a.createElement(b.b,{exact:!0,path:"/inventory/lab/add",render:function(t){return i.a.createElement(Bo,Object.assign({},e.state,t))}}),i.a.createElement(b.b,{exact:!0,path:"/inventory/expenses/lab/:id",render:function(t){return i.a.createElement(Bo,Object.assign({},e.state,t))}}),i.a.createElement(ia.a,{loading:this.state.loading,title:"Lab",extra:i.a.createElement(qt.b,{to:"/inventory/lab/add"}," ",i.a.createElement(Vt.a,{type:"primary"},i.a.createElement(Bt.a,{type:"plus"})," Add"))})))}}]),t}(i.a.Component),qo=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={activity:null,loading:!0},a.loadActivityLog=a.loadActivityLog.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentWillMount",value:function(){this.loadActivityLog()}},{key:"loadActivityLog",value:function(){var e=this;ht("activity/",function(t){e.setState({activity:t,loading:!1})},function(){e.setState({loading:!1})})}},{key:"render",value:function(){return i.a.createElement(ia.a,{title:"Activity Log"},i.a.createElement(ta.a,{loading:this.state.loading,dataSource:this.state.activity}))}}]),t}(i.a.Component),Yo=a(281),zo=a.n(Yo);function Go(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Uo(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Go(a,!0).forEach(function(t){Object(u.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Go(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Wo=sa.a.Group,Ko=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).loadDrugType=function(){var e=Object(f.a)(a);ht(gt(Be,[a.props.active_practiceId]),function(t){e.setState({drugTypeList:t})},function(){})},a.onChangeHandeler=function(e){Object(f.a)(a).setState({type:e})},a.setFormParams=function(e,t){a.setState(Object(u.a)({},e,t))},a.handleSubmit=function(e){e.preventDefault();var t=Object(f.a)(a);a.props.form.validateFields(function(e,n){if(!e){var i=Uo({},n,{retail_without_tax:t.state.retail_price,net_price:void 0,practice:a.props.active_practiceId});a.state.editInventoryItem&&(i.id=a.state.editInventoryItem.id);var r=function(e){t.setState({redirect:!0}),t.props.loadData()},l=function(){};a.state.editInventoryItem?ut(gt(Ue,[a.props.match.params.id]),i,r,l):dt(gt(Ge,[a.props.match.params.id]),i,r,l)}})},a.changeNetPrice=function(e){var t=Object(f.a)(a),n=a.props.form,i=n.getFieldsValue;n.setFields;setTimeout(function(){var e=i();if(e.retail_with_tax){var a=0;e.taxes.forEach(function(e){t.state.taxes_list.forEach(function(t){t.id==e&&(a+=t.tax_value)})});var n=e.retail_with_tax/(1+.01*a);t.setState({retail_price:n.toFixed(2)})}else t.setState({retail_price:0})},1e3)},a.state={taxes_list:a.props.taxes_list?a.props.taxes_list:null,manufacture_list:a.props.manufacture_list?a.props.manufacture_list:null,vendor_list:a.props.vendor_list?a.props.vendor_list:null,redirect:!1,type:a.props.editInventoryItem?a.props.editInventoryItem:null,drugUnitList:[],drugTypeList:[],retail_price:0,productMargin:[]},a.changeRedirect=a.changeRedirect.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"componentDidMount",value:function(){this.props.match.params.id&&(this.state.editInventoryItem||this.loadData()),null==this.props.taxes_list&&this.loadTaxes(),null==this.props.manufacture_list&&this.loadManufactureList(),null==this.props.vendor_list&&this.loadVendorList(),this.loadDrugType(),this.loadDrugUnit(),this.loadProductMargin()}},{key:"loadProductMargin",value:function(){var e=this;ht("product_margin/",function(t){e.setState({productMargin:t})},function(){})}},{key:"loadTaxes",value:function(){var e=this;ht(gt(K,[this.props.active_practiceId]),function(t){e.setState({taxes_list:t})},function(){})}},{key:"loadManufactureList",value:function(){var e=this;ht("manufacturer/",function(t){e.setState({manufacture_list:t})},function(){})}},{key:"loadVendorList",value:function(){var e=this;ht(gt(ze,[this.props.active_practiceId]),function(t){e.setState({vendor_list:t})},function(){})}},{key:"loadData",value:function(){var e=this;this.props.match.params.id&&ht(gt(Ue,[this.props.match.params.id]),function(t){e.setState(function(e){var a=0;t.taxes_data.forEach(function(e){a+=e.tax_value});var n=(t.retail_price*(1+.01*a)).toFixed(2);return{editInventoryItem:Uo({},t,{net_price:n}),type:t.item_type,retail_price:t.retail_price}})},function(){})}},{key:"loadDrugUnit",value:function(){var e=this;ht(gt("clinics/%s/drugunit/",[this.props.active_practiceId]),function(t){e.setState({drugUnitList:t})},function(){})}},{key:"render",value:function(){var e=this,t=[];this.state.taxes_list&&this.state.taxes_list.forEach(function(e){t.push({label:e.name+"("+e.tax_value+"%)",value:e.id})});var a=[];this.state.manufacture_list&&this.state.manufacture_list.forEach(function(e){a.push({label:e.name,value:e.id})});var n=[];this.state.vendor_list&&this.state.vendor_list.forEach(function(e){n.push({label:e.name,value:e.id})});var r=this.props.form.getFieldDecorator,l={labelCol:{span:10},wrapperCol:{span:14}};return i.a.createElement(ia.a,{title:this.state.editInventoryItem?"Edit Inventory Item":"Add Inventory Item"},i.a.createElement(Zt.a,null,i.a.createElement(ea.a,{span:18},i.a.createElement(fa.a,{onSubmit:this.handleSubmit},i.a.createElement(fa.a.Item,Object.assign({label:"Item Name"},l),r("name",{initialValue:this.state.editInventoryItem?this.state.editInventoryItem.name:null,rules:[{required:!0,message:rt}]})(i.a.createElement(ga.a,{placeholder:"Item Name"}))),i.a.createElement(fa.a.Item,Object.assign({label:"Item Code"},l),r("code",{initialValue:this.state.editInventoryItem?this.state.editInventoryItem.code:null})(i.a.createElement(ga.a,{placeholder:"Item Code"}))),this.state.manufacturerType&&this.state.manufacturerType==D?i.a.createElement(fa.a.Item,Object.assign({key:"manufacturer_extra",label:"Manufacturer"},l),r("manufacturer_extra",{initialValue:e.state.editPrescreption?e.state.editPrescreption.manufacturer_extra:null,rules:[{required:!0,message:rt}]})(i.a.createElement(ga.a,null)),i.a.createElement("a",{onClick:function(){return e.setFormParams("manufacturerType",S)}},"Choose Manufacturer")):i.a.createElement(fa.a.Item,Object.assign({key:"manufacturer"},l,{label:"Manufacturer"}),r("manufacturer",{initialValue:this.state.editInventoryItem?this.state.editInventoryItem.manufacturer:null})(i.a.createElement(Lt.a,null,a.map(function(e){return i.a.createElement(Lt.a.Option,{value:e.value},e.label)}))),i.a.createElement("a",{onClick:function(){return e.setFormParams("manufacturerType",D)}},"Add New Manufacturer")),i.a.createElement(fa.a.Item,Object.assign({label:"Stocking Unit"},l),r("stocking_unit",{initialValue:this.state.editInventoryItem?this.state.editInventoryItem.stocking_unit:null,rules:[{required:!0,message:rt}]})(i.a.createElement(ga.a,{placeholder:"Example: Bottles, Strips etc."})),i.a.createElement("p",null,"(Make sure this is the same as the unit in which you dispense this item.)")),i.a.createElement(fa.a.Item,Object.assign({label:"Re-Order Level"},l),r("re_order_level",{initialValue:this.state.editInventoryItem?this.state.editInventoryItem.re_order_level:null})(i.a.createElement(pa.a,{placeholder:"Re-Order Level"}))),i.a.createElement(fa.a.Item,Object.assign({label:"Net Price"},l),r("retail_with_tax",{initialValue:this.state.editInventoryItem?this.state.editInventoryItem.retail_with_tax:null,rules:[{required:!0,message:rt}]})(i.a.createElement(pa.a,{onChange:this.changeNetPrice})),i.a.createElement("span",{className:"ant-form-text"},"INR")),i.a.createElement(fa.a.Item,Object.assign({label:"Tax"},l),r("taxes",{initialValue:this.state.editInventoryItem?this.state.editInventoryItem.taxes:[]})(i.a.createElement(Wo,{onChange:this.changeNetPrice},t.map(function(e){return i.a.createElement(sa.a,{value:e.value},e.label)})))),i.a.createElement(fa.a.Item,Object.assign({label:"Retail Price"},l),i.a.createElement("span",{className:"ant-form-text"},i.a.createElement("b",null,e.state.retail_price),"\xa0INR")),i.a.createElement(fa.a.Item,Object.assign({key:"margin"},l,{label:"MLM Margin"}),r("margin",{initialValue:this.state.editingProcedureData?this.state.editingProcedureData.margin:null})(i.a.createElement(Lt.a,null,this.state.productMargin.map(function(e){return i.a.createElement(Lt.a.Option,{value:e.id},e.name)})))),i.a.createElement(fa.a.Item,Object.assign({label:"Item Type"},l),r("item_type",{initialValue:this.state.editInventoryItem?this.state.editInventoryItem.item_type:null,rules:[{required:!0,message:rt}]})(i.a.createElement(Lt.a,{placeholder:"Item Type",onChange:this.onChangeHandeler},Ha.map(function(e){return i.a.createElement(Lt.a.Option,{value:e.value},e.label)})))),this.state.type==Ra?i.a.createElement("div",null,i.a.createElement(fa.a.Item,Object.assign({label:"I prescribe this"},l),r("perscribe_this",{valuePropName:"checked",initialValue:!!this.state.editInventoryItem&&this.state.editInventoryItem.perscribe_this})(i.a.createElement(sa.a,null))),this.state.drugType&&this.state.drugType==D?i.a.createElement(fa.a.Item,Object.assign({key:"drug_type_extra",label:"Medicine Type"},l),r("drug_type_extra",{initialValue:e.state.editInventoryItem?e.state.editInventoryItem.drug_type_extra:null,rules:[{required:!0,message:rt}]})(i.a.createElement(ga.a,null)),i.a.createElement("a",{onClick:function(){return e.setFormParams("drugType",S)}},"Choose Medicine Type")):i.a.createElement(fa.a.Item,Object.assign({key:"drug_type"},l,{label:"Medicine Type"}),r("drug_type",{initialValue:this.state.editInventoryItem?this.state.editInventoryItem.drug_type:null,rules:[{required:!0,message:rt}]})(i.a.createElement(Lt.a,null,e.state.drugTypeList.map(function(e){return i.a.createElement(Lt.a.Option,{value:e.id},e.name)}))),i.a.createElement("a",{onClick:function(){return e.setFormParams("drugType",D)}},"Add New Medicine Type")),i.a.createElement(fa.a.Item,Object.assign({label:"Strength"},l),r("strength",{initialValue:this.state.editInventoryItem?this.state.editInventoryItem.strength:null})(i.a.createElement(pa.a,null))),this.state.drugUnit&&this.state.drugUnit==D?i.a.createElement(fa.a.Item,Object.assign({key:"unit_type_extra",label:"Strength Unit"},l),r("unit_type_extra",{initialValue:e.state.editInventoryItem?e.state.editInventoryItem.unit_type_extra:null,rules:[{required:!0,message:rt}]})(i.a.createElement(ga.a,null)),i.a.createElement("a",{onClick:function(){return e.setFormParams("drugUnit",S)}},"Choose Strength Unit")):i.a.createElement(fa.a.Item,Object.assign({key:"stength_unit"},l,{label:"Strength Unit"}),r("stength_unit",{initialValue:this.state.editInventoryItem?this.state.editInventoryItem.stength_unit:null,rules:[{required:!0,message:rt}]})(i.a.createElement(Lt.a,null,e.state.drugUnitList.map(function(e){return i.a.createElement(Lt.a.Option,{value:e.id},e.name)}))),i.a.createElement("a",{onClick:function(){return e.setFormParams("drugUnit",D)}},"Add New Strength Unit")),i.a.createElement(fa.a.Item,Object.assign({label:"Instructions"},l),r("instructions",{initialValue:this.state.editInventoryItem?this.state.editInventoryItem.instructions:null})(i.a.createElement(zo.a,null)))):null,"Supplies"==this.state.type?i.a.createElement("div",null,i.a.createElement(fa.a.Item,Object.assign({label:"I prescribe this"},l),r("perscribe_this",{valuePropName:"checked",initialValue:!!this.state.editInventoryItem&&this.state.editInventoryItem.perscribe_this})(i.a.createElement(sa.a,null))),i.a.createElement(fa.a.Item,Object.assign({label:"Strength Unit"},l),r("strength",{initialValue:this.state.editInventoryItem?this.state.editInventoryItem.strength:null})(i.a.createElement(ga.a,null))),this.state.drugUnit&&this.state.drugUnit==D?i.a.createElement(fa.a.Item,Object.assign({key:"unit_type_extra",label:"Strength Unit"},l),r("unit_type_extra",{initialValue:e.state.editInventoryItem?e.state.editInventoryItem.unit_type_extra:null,rules:[{required:!0,message:rt}]})(i.a.createElement(ga.a,null)),i.a.createElement("a",{onClick:function(){return e.setFormParams("drugUnit",S)}},"Choose Strength Unit")):i.a.createElement(fa.a.Item,Object.assign({key:"stength_unit"},l,{label:"Strength Unit"}),r("stength_unit",{initialValue:this.state.editInventoryItem?this.state.editInventoryItem.stength_unit:null,rules:[{required:!0,message:rt}]})(i.a.createElement(Lt.a,null,e.state.drugUnitList.map(function(e){return i.a.createElement(Lt.a.Option,{value:e.id},e.name)}))),i.a.createElement("a",{onClick:function(){return e.setFormParams("drugUnit",D)}},"Add New Strength Unit")),i.a.createElement(fa.a.Item,Object.assign({label:"Instructions"},l),r("instructions",{initialValue:this.state.editInventoryItem?this.state.editInventoryItem.instructions:null})(i.a.createElement(zo.a,null)))):null,"Equipment"==this.state.type?i.a.createElement("div",null,i.a.createElement(fa.a.Item,Object.assign({label:"I prescribe this"},l),r("perscribe_this",{valuePropName:"checked",initialValue:this.state.editInventoryItem?this.state.editInventoryItem.perscribe_this:null})(i.a.createElement(sa.a,null))),i.a.createElement(fa.a.Item,Object.assign({label:"Instructions"},l),r("instructions",{initialValue:this.state.editInventoryItem?this.state.editInventoryItem.instructions:null})(i.a.createElement(zo.a,null)))):null,i.a.createElement(fa.a.Item,null,i.a.createElement(Vt.a,{style:{margin:5},type:"primary",htmlType:"submit"},"Submit"),e.props.history?i.a.createElement(Vt.a,{style:{margin:5},onClick:function(){return e.props.history.goBack()}},"Cancel"):null)))),this.state.redirect&&i.a.createElement(b.a,{to:"/inventory"}))}}]),t}(i.a.Component),Qo=fa.a.create()(Ko);function Xo(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Jo(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Xo(a,!0).forEach(function(t){Object(u.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Xo(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var $o=ga.a.Search,Zo=ma.a.MonthPicker,eu=oa.a.TabPane,tu={_id:null,quantity:0,batch:null},au=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).changeSupplierType=function(e){a.setState({customSupplier:!!e})},a.loadItemsList=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=Object(f.a)(a),n=function(a){var n=a.results;1==a.current?t.setState(function(t){return{items:Jo({},t.items,Object(u.a)({},e,n))}}):t.setState(function(t){return{items:Jo({},t.items,Object(u.a)({},e,[].concat(Object(wr.a)(t.items[e]),Object(wr.a)(n))))}})},i=function(){},r={maintain_inventory:!0,practice:a.props.active_practiceId,item_type:e};t.state.searchStrings[e]&&(r.item_name=t.state.searchStrings[e]),ht(Ge,n,i,r)},a.remove=function(e){a.setState(function(t){var a=[];return t.tableFormValues.forEach(function(t){t._id!=e&&a.push(t)}),console.log(t.tableFormValues,e),{tableFormValues:a}})},a.add=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.random().toFixed(7);a.setState(function(a){return{tableFormValues:[].concat(Object(wr.a)(a.tableFormValues),[Jo({},tu,{},e,{_id:t})])}})},a.handleSubmit=function(e){if(13==e.keyCode)return!1;var t=Object(f.a)(a);e.preventDefault(),a.props.form.validateFields(function(e,a){if(!e){var n=[];t.state.tableFormValues.forEach(function(e){var i={item_add_type:t.state.classType,inventory_item:e.id,quantity:a.quantity[e._id],batch_number:a.batch[e._id],date:ya()(a.date).format("YYYY-MM-DD"),bill_number:a.bill_number,bill_file:a.file&&a.file.file.response?a.file.file.response.image_path:null};t.state.classType==qa&&(i=Jo({},i,{expiry_date:ya()(a.expiry_date[e._id]).format("YYYY-MM-DD"),unit_cost:a.unit_cost[e._id],total_cost:a.unit_cost[e._id]*a.quantity[e._id]}),a.supplier?i.supplier=a.supplier:a.supplier_name&&(i.supplier_name=a.supplier_name)),n.push(i)}),n.date=ya()(a.date).isValid()?ya()(a.date).format():null,t.state.customSupplier?n.supplier_name=a.supplier_name:n.supplier=a.supplier;dt(We,n,function(e){bt("Inventory updated successfully"),t.props.loadData(),t.props.history.push("/inventory")},function(){})}})},a.searchValues=function(e,t){var n=Object(f.a)(a);a.setState(function(a){var n=Jo({},a.searchStrings);return n[e]=t,{searchStrings:n}},function(){n.loadItemsList(e)})},a.filterValues=function(e){a.setState(function(t){var a=[];return t.items[e]&&(t.searchStrings[e]?t.items[e].forEach(function(n){n.name.toString().toLowerCase().includes(t.searchStrings[e].toLowerCase())&&a.push(n)}):a=t.items[e]),{filteredItems:Jo({},t.filteredItems,Object(u.a)({},e,a))}})},a.storeValue=function(e,t,n){var i=Object(f.a)(a);if("batch"==e){var r=i.props.form.setFieldsValue;i.state.tableFormValues.forEach(function(e){e._id==t&&e.item_type_stock.batch_number&&e.item_type_stock.batch_number.forEach(function(e){r(Object(u.a)({},"expiry_date[".concat(t,"]"),e.expiry_date&&ya()(e.expiry_date).isValid()?ya()(e.expiry_date):null))})})}},a.addItemThroughQR=function(e){var t=Object(f.a)(a);t.setState({loadingQr:!0});var n=e.split("*");ht(Ke,function(a){var i=t.props.form,r=i.setFieldsValue,l=i.getFieldsValue,s=(i.getFieldValue,Math.random().toFixed(7)),c=!0;if(t.state.tableFormValues.forEach(function(a){if(a.item_name==n[0]){var i=a._id;if(l("batch[".concat(i,"]"))==n[3]){var s=l("quantity[".concat(i,"]"));c=!1,r(Object(u.a)({},"quantity[".concat(i,"]"),s+1)),t.storeValue("quantity",i,e)}}}),c){var o;t.add(a,s),t.storeValue("batch",s,n[1]),t.storeValue("unit_cost",s,n[3]);var d=(o={},Object(u.a)(o,"batch[".concat(s,"]"),n[1]),Object(u.a)(o,"expiry_date[".concat(s,"]"),ya()(n[2],"MM/YY")),o);t.state.classType==Ya&&(d["unit_cost[".concat(s,"]")]=n[3]),r(d)}console.log(l(),Object(u.a)({},"batch[".concat(s,"]"),n[0])),t.setState(function(e){return{loadingQr:!1,qrValue:""}})},function(){},{qr:e,form:"Inventory"})},a.setQrValue=function(e){var t=e.target.value;a.setState({qrValue:t})},a.state={items:{},classType:e.type,tableFormValues:[],maxQuantityforConsume:{},searchStrings:{},tempValues:{},supplierList:[],customSupplier:!1,qrValue:""},a.loadSupplierList=a.loadSupplierList.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.loadInventoryItemList(),this.loadSupplierList()}},{key:"loadSupplierList",value:function(){var e=this,t={practice:this.props.active_practiceId};ht(gt("stock_entry/practice_supplier",[this.props.active_practiceId]),function(t){e.setState({supplierList:t})},function(){},t)}},{key:"loadInventoryItemList",value:function(){var e=this;Ha.forEach(function(t){e.loadItemsList(t.value)})}},{key:"changeMaxQuantityforConsume",value:function(e,t){this.setState(function(a){var n=Jo({},a.maxQuantityforConsume);return a.tableFormValues.forEach(function(a){a._id==e&&a.item_type_stock.item_stock.forEach(function(a){a.batch_number==t&&(n[e]=a.quantity||0)})}),{maxQuantityforConsume:n}})}},{key:"render",value:function(){var e=this,t=this,a=this.props.form.getFieldDecorator,n={labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}},r={name:"image",data:{name:"hello"},action:ct("blogImage/"),headers:{authorization:"authorization-text"},onChange:function(e){e.file.status,"done"===e.file.status?V.a.success("".concat(e.file.name," file uploaded successfully")):"error"===e.file.status&&V.a.error("".concat(e.file.name," file upload failed."))}};a("keys",{initialValue:[]});var l=[{title:"Item Name",key:"item_name",dataIndex:"name"}];return this.state.classType==qa?l=l.concat([{title:"Quantity",key:"quantity",dataIndex:"quantity",render:function(t,r){return i.a.createElement(fa.a.Item,Object.assign({key:"quantity[".concat(r._id,"]")},n),a("quantity[".concat(r._id,"]"),{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"This field is required."}]})(i.a.createElement(pa.a,{min:0,placeholder:"quantity",onChange:function(t){return e.storeValue("quantity",r._id,t)}})))}},{title:"Batch",key:"batch",dataIndex:"batch",render:function(t,r){return i.a.createElement(fa.a.Item,Object.assign({key:"batch[".concat(r._id,"]")},n),a("batch[".concat(r._id,"]"),{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"This field is required."}]})(i.a.createElement(Ft.a,{placeholder:"Batch Number",onChange:function(t){return e.storeValue("batch",r._id,t)},dataSource:r.item_type_stock&&r.item_type_stock.item_stock?r.item_type_stock.item_stock.map(function(e){return e.batch_number?e.batch_number:"--"}):[]})))}},{title:"Expiry Date",key:"expiry",dataIndex:"expiry",render:function(e,t){return i.a.createElement(fa.a.Item,Object.assign({key:"expiry_date[".concat(t._id,"]")},n),a("expiry_date[".concat(t._id,"]"),{rules:[{required:!0,message:"This field is required."}],initialValue:ya()(new Date)})(i.a.createElement(Zo,null)))}},{title:"Unit Cost",key:"unit_cost",dataIndex:"unit_cost",render:function(t,r){return i.a.createElement(fa.a.Item,Object.assign({key:"unit_cost[".concat(r._id,"]")},n),a("unit_cost[".concat(r._id,"]"),{rules:[{required:!0,message:"This field is required."}]})(i.a.createElement(pa.a,{placeholder:"Unit Cost",onChange:function(t){return e.storeValue("unit_cost",r._id,t)}})))}},{title:"Total Cost",key:"total_cost",dataIndex:"total_cost",render:function(t,a){return i.a.createElement("span",null,e.state.tempValues["unit_cost"+a._id]&&e.state.tempValues["quantity"+a._id]?e.state.tempValues["unit_cost"+a._id]*e.state.tempValues["quantity"+a._id]:"--")}}]):this.state.classType==Ya&&(l=l.concat([{title:"Batch",key:"batch",dataIndex:"batch",render:function(e,r){return i.a.createElement(fa.a.Item,Object.assign({key:"batch[".concat(r._id,"]")},n),a("batch[".concat(r._id,"]"),{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"This field is required."}]})(i.a.createElement(Lt.a,{placeholder:"Batch Number",onChange:function(e){return t.changeMaxQuantityforConsume(r._id,e)}},r.item_type_stock&&r.item_type_stock.item_stock&&r.item_type_stock.item_stock.map(function(e){return i.a.createElement(Lt.a.Option,{value:e.batch_number},"#",e.batch_number," (",e.quantity,")")}))))}},{title:"Quantity",key:"quantity",dataIndex:"quantity",render:function(t,r){return i.a.createElement(fa.a.Item,Object.assign({key:"quantity[".concat(r._id,"]")},n),a("quantity[".concat(r._id,"]"),{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"This field is required."}]})(i.a.createElement(pa.a,{min:0,max:e.state.maxQuantityforConsume[r._id],placeholder:"quantity"})))}}])),l=l.concat([{title:"Action",key:"_id",dataIndex:"_id",render:function(e,a){return i.a.createElement("a",{onClick:function(){return t.remove(a._id)}},"Delete")}}]),i.a.createElement("div",null,i.a.createElement(ia.a,{title:this.state.classType+" Stock",extra:i.a.createElement($o,{loading:this.state.loadingQr,value:this.state.qrValue,onChange:this.setQrValue,placeholder:"Search QR Code",onSearch:this.addItemThroughQR,style:{width:200}})},i.a.createElement(Zt.a,{gutter:16},i.a.createElement(ea.a,{span:7},i.a.createElement(oa.a,{size:"small",type:"card"},Ha.map(function(t){return i.a.createElement(eu,{tab:t.label,key:t.value},i.a.createElement("div",{style:{backgroundColor:"#ddd",padding:8}},i.a.createElement(ga.a.Search,{key:t.label,placeholder:"Search in "+t.label+"...",onSearch:function(a){return e.searchValues(t.label,a)}})),i.a.createElement(Rt.a,{size:"small",itemLayout:"horizontal",dataSource:e.state.items?e.state.items[t.value]:[],renderItem:function(t){return i.a.createElement(Rt.a.Item,null,i.a.createElement(Rt.a.Item.Meta,{title:t.name,description:t.item_type_stock.item_stock&&t.item_type_stock.item_stock.map(function(e){return i.a.createElement("span",null,"#",e.batch_number,"(",e.quantity,")",i.a.createElement("br",null))})}),i.a.createElement(Vt.a,{type:"primary",size:"small",shape:"circle",onClick:function(){return e.add(t)},icon:"arrow-right"}))}}))}))),i.a.createElement(ea.a,{span:17},i.a.createElement(fa.a,{onSubmit:this.handleSubmit},this.state.classType==Ya?i.a.createElement(Zt.a,null,i.a.createElement(ea.a,{span:16},i.a.createElement(fa.a.Item,Object.assign({key:"type_of_consumption",label:"Type of Consumption"},{labelCol:{span:6},wrapperCol:{span:14}}),a("type_of_consumption",{validateTrigger:["onChange","onBlur"],rules:[{message:"This field is required."}]})(i.a.createElement(Lt.a,null,mn.map(function(e){return i.a.createElement(Lt.a.Option,{value:e.value},e.label)})))))):null,i.a.createElement(ta.a,{pagination:!1,bordered:!0,dataSource:this.state.tableFormValues,columns:l}),i.a.createElement(c.a,{offsetBottom:0},i.a.createElement(ia.a,null,i.a.createElement(Zt.a,null,i.a.createElement(ea.a,{span:8},i.a.createElement(fa.a.Item,{labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}},i.a.createElement(Vt.a,{type:"primary",htmlType:"submit"},"Submit"),t.props.history?i.a.createElement(Vt.a,{style:{margin:5},onClick:function(){return t.props.history.goBack()}},"Cancel"):null)),i.a.createElement(ea.a,{span:8},i.a.createElement(fa.a.Item,Object.assign({key:"date",label:this.state.classType==qa?"Added On":"Consumed On"},{labelCol:{span:10},wrapperCol:{span:14}}),a("date",{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"This field is required."}],initialValue:ya()()})(i.a.createElement(ma.a,null))),i.a.createElement(fa.a.Item,Object.assign({key:"bill_number",label:"Bill Number"},{labelCol:{span:10},wrapperCol:{span:14}}),a("bill_number",{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"This field is required."}]})(i.a.createElement(ga.a,null))),this.state.classType==qa?i.a.createElement("div",null,this.state.customSupplier?i.a.createElement(fa.a.Item,Object.assign({key:"supplier_name",label:"Supplier"},{labelCol:{span:10},wrapperCol:{span:14}}),a("supplier_name",{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"This field is required."}]})(i.a.createElement(ga.a,null)),this.state.customSupplier?i.a.createElement("a",{onClick:function(){return e.changeSupplierType(!1)}},"Cancel"):null):i.a.createElement(fa.a.Item,Object.assign({key:"supplier",label:"Supplier"},{labelCol:{span:10},wrapperCol:{span:14}}),a("supplier",{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"This field is required."}]})(i.a.createElement(Lt.a,null,this.state.supplierList.map(function(e){return i.a.createElement(Lt.a.Option,{value:e.id},e.name)}))),this.state.customSupplier?null:i.a.createElement("a",{onClick:function(){return e.changeSupplierType(!0)}},"Add New"))," "):null),i.a.createElement(ea.a,{span:6,offset:2},i.a.createElement(fa.a.Item,Object.assign({key:"file"},n),a("file",{})(i.a.createElement(ua.a,r,i.a.createElement(Vt.a,null,i.a.createElement(Bt.a,{type:"upload"})," Select File"))))),this.state.classType==qa?i.a.createElement(ea.a,{style:{textAlign:"center"},span:8},i.a.createElement("h3",null,"Grand Total: ",i.a.createElement("b",null,this.state.tableFormValues.reduce(function(e,a){return t.state.tempValues["quantity"+a._id]&&t.state.tempValues["unit_cost"+a._id]?e+t.state.tempValues["quantity"+a._id]*t.state.tempValues["unit_cost"+a._id]:e},0)))):null))))))))}}]),t}(i.a.Component),nu=fa.a.create()(au),iu=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).changeFilter=function(e){var t=Object(f.a)(a);a.setState(Object(u.a)({},e.target.name,e.target.value),function(){t.loadData()})},a.changeInventoryFilters=function(e,t){Object(f.a)(a).setState(function(a){return Object(u.a)({},e,t)})},a.state={inventoryItems:[],inventoryItemList:[],stockModalVisibility:!1,itemTypeFilter:"ALL",itemStockFilter:"ALL",loading:!0,nextItemPage:null},a.loadData=a.loadData.bind(Object(f.a)(a)),a.showAddOrConsumeModal=a.showAddOrConsumeModal.bind(Object(f.a)(a)),a.setActionType=a.setActionType.bind(Object(f.a)(a)),a.changeFilter=a.changeFilter.bind(Object(f.a)(a)),a.deleteObject=a.deleteObject.bind(Object(f.a)(a)),a.excelExport=a.excelExport.bind(Object(f.a)(a)),a.pdfExport=a.pdfExport.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this;t.setState({loading:!0});var a=function(e){var a=e.results;t.setState(function(t){return 1==e.current?{inventoryItems:a,loading:!1,nextItemPage:e.next}:{inventoryItems:[].concat(Object(wr.a)(t.inventoryItems),Object(wr.a)(a)),loading:!1,nextItemPage:e.next}})},n=function(){t.setState({loading:!1})},i={maintain_inventory:!0,practice:this.props.active_practiceId,page:e};"ALL"!=t.state.itemTypeFilter&&(i.item_type=t.state.itemTypeFilter),"ALL"!=t.state.itemStockFilter&&(i.filter_type=t.state.itemStockFilter),t.state.filterItemName&&(i.item_name=t.state.filterItemName),t.state.filterItemCode&&(i.code=t.state.filterItemCode),ht(Ge,a,n,i)}},{key:"deleteObject",value:function(e){var t=this;ut(gt(Ue,[e]),{is_active:!1},function(e){t.loadData()},function(){})}},{key:"setActionType",value:function(e,t){this.setState({itemId:t,actionType:e}),this.showAddOrConsumeModal(!0)}},{key:"showAddOrConsumeModal",value:function(e){this.setState({stockModalVisibility:e})}},{key:"excelExport",value:function(){var e=yt("Generating Report..."),t={maintain_inventory:!0,practice:this.props.active_practiceId};"ALL"!=this.state.itemTypeFilter&&(t.item_type=this.state.itemTypeFilter),"ALL"!=this.state.itemStockFilter&&(t.filter_type=this.state.itemStockFilter),this.state.filterItemName&&(t.item_name=this.state.filterItemName),this.state.filterItemCode&&(t.code=this.state.filterItemCode),ht("inventory_item/export",function(t){console.log("datattype",t),Et(e,k,"Report Generated Successfully!!"),t.report_csv&&window.open(F+t.report_csv)},function(){Et(e,P,"Report Generation Failed!!")},t)}},{key:"pdfExport",value:function(){var e=yt("Generating Report..."),t={maintain_inventory:!0,practice:this.props.active_practiceId};"ALL"!=this.state.itemTypeFilter&&(t.item_type=this.state.itemTypeFilter),"ALL"!=this.state.itemStockFilter&&(t.filter_type=this.state.itemStockFilter),this.state.filterItemName&&(t.item_name=this.state.filterItemName),this.state.filterItemCode&&(t.code=this.state.filterItemCode),ht("inventory_item/export",function(t){Et(e,k,"Report Generated Successfully!!"),t.report_pdf&&window.open(F+t.report_pdf)},function(){Et(e,P,"Report Generation Failed!!")},t)}},{key:"render",value:function(){var e=this,t={};this.state.taxes_list&&this.state.taxes_list.forEach(function(e){t[e.id]=e});var a={};this.state.manufacture_list&&this.state.manufacture_list.forEach(function(e){a[e.id]=e.name});var n={};this.state.vendor_list&&this.state.vendor_list.forEach(function(e){n[e.id]=e.name});var r=this,l=[{title:"Name",dataIndex:"name",key:"name"},{title:"Item Code",dataIndex:"code",key:"code"},{title:"Inventory Stock",dataIndex:"total_quantity",key:"total_quantity",render:function(e,t){return i.a.createElement("span",null,e," ",e<=t.re_order_level?i.a.createElement(Mt.a,{color:"#f50"},"Low"):null)}},{title:"Expired Stock",dataIndex:"item_type_stock",key:"expired_stock",export:function(e,t){var a=0,n=ya()();return e.item_stock&&e.item_stock.forEach(function(e){n>=ya()(e.expiry_date,"YYYY-MM-DD")&&(a+=Number.isInteger(e.quantity)?e.quantity:0)}),a},render:function(e,t){var a=0,n=ya()();return e.item_stock&&e.item_stock.forEach(function(e){n>=ya()(e.expiry_date,"YYYY-MM-DD")&&(a+=Number.isInteger(e.quantity)?e.quantity:0)}),i.a.createElement("span",null,a)}},{title:"Retail Price (INR)",dataIndex:"retail_without_tax",key:"retail_without_tax",render:function(e,t){return i.a.createElement("span",null,t.retail_without_tax)}},{title:"Tax",dataIndex:"taxes",key:"taxes",render:function(e,t){return i.a.createElement("span",null,t.taxes_data&&t.taxes_data.map(function(e){return i.a.createElement(Mt.a,null,i.a.createElement("small",null," ",e?e.name+"@"+e.tax_value+"%":null))}))}},{title:"MLM Margin",dataIndex:"margin_data",key:"margin",render:function(e){return i.a.createElement("span",null,e?e.name:null)}},{title:"Item type",dataIndex:"item_type",key:"item_type"},{title:"Reorder Level",dataIndex:"re_order_level",key:"re_order_level"},{title:"Manufacturer",key:"manufacturer",export:function(e,t){return t.manufacturer_data?t.manufacturer_data.name:""},render:function(e,t){return i.a.createElement("span",null," ",t.manufacturer_data?t.manufacturer_data.name:"")}},{title:"Actions",render:function(e){return i.a.createElement("div",null,i.a.createElement(qt.b,{to:"/inventory/edit/"+e.id},"Edit"),i.a.createElement(na.a,{type:"vertical"}),0==e.total_quantity?i.a.createElement(aa.a,{title:"Are you sure delete this item?",onConfirm:function(){return r.deleteObject(e.id)},okText:"Yes",cancelText:"No"},i.a.createElement("a",null,"Delete")):i.a.createElement(Mt.a,{color:"red"},"Can Not Delete"))}}];return i.a.createElement("div",null,i.a.createElement(b.d,null,i.a.createElement(b.b,{path:"/inventory/add",render:function(t){return r.props.activePracticePermissions.AddInventoryItem||r.props.allowAllPermissions?i.a.createElement(Qo,Object.assign({},t,e.props,e.state,{loadData:e.loadData})):i.a.createElement(qn,null)}}),i.a.createElement(b.b,{exact:!0,path:"/inventory/edit/:id",render:function(t){return r.props.activePracticePermissions.AddInventoryItem||r.props.allowAllPermissions?i.a.createElement(Qo,Object.assign({},e.state,e.props,t,{loadData:e.loadData})):i.a.createElement(qn,null)}}),i.a.createElement(b.b,{exact:!0,path:"/inventory/consume-stock",render:function(t){return r.props.activePracticePermissions.AddInventoryStock||r.props.allowAllPermissions?i.a.createElement(nu,Object.assign({key:Ya,type:Ya,loadData:e.loadData},e.state,t,e.props)):i.a.createElement(qn,null)}}),i.a.createElement(b.b,{exact:!0,path:"/inventory/add-stock",render:function(t){return r.props.activePracticePermissions.ConsumeInventoryStock||r.props.allowAllPermissions?i.a.createElement(nu,Object.assign({key:qa,type:qa,loadData:e.loadData},e.state,t,e.props)):i.a.createElement(qn,null)}}),i.a.createElement(b.b,null,i.a.createElement(ia.a,{title:"Inventory List",extra:i.a.createElement(Vt.a.Group,null,i.a.createElement(qt.b,{to:"/inventory/add"},i.a.createElement(Vt.a,{type:"primary",disabled:!r.props.activePracticePermissions.AddInventoryItem||r.props.allowAllPermissions},i.a.createElement(Bt.a,{type:"plus"})," Add Item")),i.a.createElement(qt.b,{to:"/inventory/add-stock"}," ",i.a.createElement(Vt.a,{disabled:!r.props.activePracticePermissions.AddInventoryStock,type:"primary"},"Add Stock")),i.a.createElement(qt.b,{to:"/inventory/consume-stock"},i.a.createElement(Vt.a,{disabled:!r.props.activePracticePermissions.ConsumeInventoryStock,type:"primary"},"Consume Stock")))},i.a.createElement(Zt.a,null,i.a.createElement(ha.a.Group,{name:"itemTypeFilter",size:"small",defaultValue:"ALL",buttonStyle:"solid",onChange:this.changeFilter,style:{margin:"10px"}},i.a.createElement(ha.a.Button,{value:"ALL"},"ALL"),Ha.map(function(e){return i.a.createElement(ha.a.Button,{value:e.value},e.label)})),i.a.createElement(ha.a.Group,{name:"itemStockFilter",size:"small",defaultValue:"ALL",buttonStyle:"solid",style:{margin:"10px",float:"right"},onChange:this.changeFilter},i.a.createElement(ha.a.Button,{value:"ALL"},"ALL"),i.a.createElement(ha.a.Button,{value:"Low"},"Low"),i.a.createElement(ha.a.Button,{value:"Expired"},"Expired"))),i.a.createElement(Zt.a,{gutter:16,style:{marginBottom:10}},i.a.createElement(ea.a,{span:4,style:{textAlign:"right"}},i.a.createElement("b",null," Item Name")),i.a.createElement(ea.a,{span:4},i.a.createElement(ga.a,{style:{width:"100%"},value:this.state.filterItemName,allowClear:!0,disabled:this.state.loading,onChange:function(t){return e.changeInventoryFilters("filterItemName",t.target.value)}})),i.a.createElement(ea.a,{span:4,style:{textAlign:"right"}},i.a.createElement("b",null," Item Code")),i.a.createElement(ea.a,{span:4},i.a.createElement(ga.a,{style:{width:"100%"},value:this.state.filterItemCode,allowClear:!0,disabled:this.state.loading,onChange:function(t){return e.changeInventoryFilters("filterItemCode",t.target.value)}})),i.a.createElement(ea.a,{span:8},i.a.createElement(Vt.a,{type:"primary",onClick:this.loadData}," Filter Items")),i.a.createElement(ea.a,{span:4},i.a.createElement(Vt.a.Group,{size:"small"},i.a.createElement(Vt.a,{disabled:this.state.loading,type:"primary",onClick:this.excelExport},i.a.createElement(Bt.a,{type:"file-excel"})," Excel"),i.a.createElement(Vt.a,{disabled:this.state.loading,type:"primary",onClick:this.pdfExport},i.a.createElement(Bt.a,{type:"file-pdf"})," PDF")))),i.a.createElement(Zt.a,null,i.a.createElement(ta.a,{bordered:!0,pagination:!1,hideReport:!0,dataSource:this.state.inventoryItems,columns:l}),i.a.createElement(Tt.a,{spinning:this.state.loading},i.a.createElement(Zt.a,null)),i.a.createElement(Ei,{loaderFunction:function(){return e.loadData(e.state.nextItemPage)},loading:this.state.loading,hidden:!this.state.nextItemPage})),i.a.createElement($t.a,{visible:this.state.stockModalVisibility,title:"Stock"+this.state.actionType,onOk:function(){return e.showAddOrConsumeModal(!1)},onCancel:function(){return e.showAddOrConsumeModal(!1)},footer:null},i.a.createElement(nu,{showAddOrConsumeModal:this.showAddOrConsumeModal,itemId:this.state.itemId,actionType:this.state.actionType}))))))}}]),t}(i.a.Component),ru=s.a.Content,lu=function(e){function t(e){return Object(d.a)(this,t),Object(p.a)(this,Object(h.a)(t).call(this,e))}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this;return i.a.createElement(ru,{className:"main-container",style:{margin:"24px 16px",minHeight:280}},i.a.createElement(b.d,null,i.a.createElement(b.b,{path:"/inventory/vendor",render:function(a){return t.props.activePracticePermissions.ViewVendor||t.props.allowAllPermissions?i.a.createElement(Mo,Object.assign({},e.props,a)):i.a.createElement(qn,null)}}),i.a.createElement(b.b,{path:"/inventory/expenses",render:function(a){return t.props.activePracticePermissions.ViewExpenses||t.props.allowAllPermissions?i.a.createElement(Vo,Object.assign({},e.props,a)):i.a.createElement(qn,null)}}),i.a.createElement(b.b,{path:"/inventory/manufacture",render:function(a){return t.props.activePracticePermissions.ViewManufacturer||t.props.allowAllPermissions?i.a.createElement(No,Object.assign({},t.props,e.state,a)):i.a.createElement(qn,null)}}),i.a.createElement(b.b,{path:"/inventory/lab",render:function(a){return t.props.activePracticePermissions.Labs||t.props.allowAllPermissions?i.a.createElement(Ho,e.props):i.a.createElement(qn,null)}}),i.a.createElement(b.b,{path:"/inventory/activity",render:function(a){return t.props.activePracticePermissions.ViewActivities||t.props.allowAllPermissions?i.a.createElement(qo,Object.assign({},e.props,a)):i.a.createElement(qn,null)}}),i.a.createElement(b.b,{path:"/inventory",render:function(a){return t.props.activePracticePermissions.ViewInventory||t.props.allowAllPermissions?i.a.createElement(iu,Object.assign({},a,e.props)):i.a.createElement(qn,null)}})))}}]),t}(i.a.Component),su=fa.a.Item,cu=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault();var t=Object(f.a)(a);a.props.form.validateFieldsAndScroll(function(e,a){if(!e){var n;t.setState({changePassLoading:!0});var i=(n={},Object(u.a)(n,kt,a.oldPass),Object(u.a)(n,Ot,a.newPass),n);dt(q,i,function(e){V.a.success(e.message),t.setState({changePassLoading:!1})},function(){t.setState({changePassLoading:!1})})}})},a.handleConfirmBlur=function(e){var t=e.target.value;a.setState({confirmDirty:a.state.confirmDirty||!!t})},a.compareToFirstPassword=function(e,t,n){var i=a.props.form;t&&t!=i.getFieldValue("newPass")?n("Two passwords that you enter is inconsistent!"):n()},a.validateToNextPassword=function(e,t,a){a(vt(e,t,a))},a.state={confirmDirty:!1,changePassLoading:!1},a.handleSubmit=a.handleSubmit.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e={labelCol:{span:6},wrapperCol:{span:14}},t=this.props.form.getFieldDecorator;return i.a.createElement(fa.a,{onSubmit:this.handleSubmit},i.a.createElement(su,Object.assign({label:"Old Password"},e),t("oldPass",{rules:[{required:!0,message:"Please enter your old Password!"}]})(i.a.createElement(ga.a,{prefix:i.a.createElement(Bt.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Old Password"}))),i.a.createElement(su,Object.assign({label:"New Password"},e),t("newPass",{rules:[{required:!0,message:"Please enter your new Password!"},{validator:this.validateToNextPassword}]})(i.a.createElement(ga.a,{prefix:i.a.createElement(Bt.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"New Password"}))),i.a.createElement(su,Object.assign({label:"Confirm Password"},e),t("confirmPass",{rules:[{required:!0,message:"Please confirm your new Password!"},{validator:this.compareToFirstPassword}]})(i.a.createElement(ga.a,{prefix:i.a.createElement(Bt.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Confirm Password",onBlur:this.handleConfirmBlur}))),i.a.createElement(su,null,i.a.createElement(Vt.a,{loading:this.state.changePassLoading,type:"primary",htmlType:"submit",className:"login-form-button"},"Change Password")))}}]),t}(i.a.Component),ou=s.a.Content,uu=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={},console.log(a.state),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"loadProfile",value:function(){var e=this;ht("users/user_clone/",function(t){e.setState({userProfile:t,loading:!1})},function(){e.setState({loading:!1})})}},{key:"render",value:function(){var e=fa.a.create()(cu);return i.a.createElement(ou,{className:"main-container",style:{margin:"24px 16px",minHeight:280}},i.a.createElement(Zt.a,null,i.a.createElement(ea.a,{span:12},i.a.createElement(ia.a,{title:"Change Password"},i.a.createElement(e,null))),i.a.createElement(ea.a,{span:12},i.a.createElement(ia.a,{title:"My Permissions"},i.a.createElement(Rt.a,{size:"small",dataSource:this.props.activePracticeData?this.props.activePracticeData.permissions_data:[],renderItem:function(e){return i.a.createElement(Rt.a.Item,null,e.name)}}))),i.a.createElement(na.a,null),i.a.createElement(ea.a,{span:12},i.a.createElement(ia.a,{title:"My Profile"},i.a.createElement(Zt.a,{gutter:16},i.a.createElement(ea.a,{span:6},i.a.createElement(du,{label:"Name ",value:this.props.user.first_name}),i.a.createElement(du,{label:"Email Id ",value:this.props.user.email}),i.a.createElement(du,{label:"Contact No.",value:this.props.user.mobile})))))))}}]),t}(i.a.Component);function du(e){return i.a.createElement(Zt.a,{gutter:16,style:{marginBottom:"5px"}},i.a.createElement(ea.a,{span:12,style:{textAlign:"right"}},e.label,":"),i.a.createElement(ea.a,{span:12},i.a.createElement("strong",null,e.value)))}a(2685);var mu=function(e){function t(e){return Object(d.a)(this,t),Object(p.a)(this,Object(h.a)(t).call(this,e))}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.props.activePracticeData&&setTimeout(function(){window.print()},1e3)}},{key:"componentWillReceiveProps",value:function(e){e.activePracticeData&&setTimeout(function(){window.print()},1e3)}},{key:"render",value:function(){return this.props.activePracticeData?i.a.createElement("html",{className:"PrintPatientForm"},i.a.createElement("meta",{"http-equiv":"Content-Type",content:"text/html; charset=utf-8"}),i.a.createElement("body",{style:{margin:"0 auto",marginTop:"20px"}},i.a.createElement("div",{style:{margin:"0px 10%"}},i.a.createElement("table",{style:{borderBottom:"1px solid #000",width:"100%"}},i.a.createElement("tr",null,i.a.createElement("td",{style:{width:"150px"}},i.a.createElement("img",{style:{width:"150px"},src:ot(this.props.activePracticeData.logo)})),i.a.createElement("td",null,i.a.createElement("h2",{style:{margin:"5px"}},this.props.activePracticeData.name),i.a.createElement("p",{style:{margin:"5px",fontSize:"11px"}},this.props.activePracticeData.address,i.a.createElement("br",null),this.props.activePracticeData.locality,i.a.createElement("br",null),this.props.activePracticeData.city,", ",this.props.activePracticeData.state,"-",this.props.activePracticeData.pincode),i.a.createElement("div",{style:{margin:"5px",fontSize:"11px"}},"Email : ",i.a.createElement("strong",null,this.props.activePracticeData.email),i.a.createElement("br",null),"Phone : ",i.a.createElement("strong",null,this.props.activePracticeData.contact),i.a.createElement("br",null),"Website : ",i.a.createElement("strong",null,this.props.activePracticeData.website),i.a.createElement("br",null))))),i.a.createElement("h3",{className:"centeralign"},"Patient Information "),i.a.createElement("table",null,i.a.createElement("tr",null,i.a.createElement("td",{colSpan:"2"},i.a.createElement("h4",null,"Personal Details"))),i.a.createElement("tr",null,i.a.createElement("td",{className:"rightalign",style:{width:"30%"}},"Name"),i.a.createElement("td",null,i.a.createElement("div",{className:"textfield"}))),i.a.createElement("tr",null,i.a.createElement("td",{className:"rightalign"},"Patient ID"),i.a.createElement("td",null,i.a.createElement("div",{className:"textfield"}),i.a.createElement("span",{className:"leftrightmargin_10"},"(official use)"))),i.a.createElement("tr",{id:"nationalid",style:{display:"none"}},i.a.createElement("td",{className:"rightalign"},i.a.createElement("span",{id:"nationalidlabel"})),i.a.createElement("td",null,i.a.createElement("div",{className:"textfield"}))),i.a.createElement("tr",null,i.a.createElement("td",{className:"rightalign"},"Mobile Number"),i.a.createElement("td",null,i.a.createElement("div",{className:"textfield"}))),i.a.createElement("tr",null,i.a.createElement("td",{colSpan:"2"},i.a.createElement("h4",null,"Contact Details"))),i.a.createElement("tr",null,i.a.createElement("td",{className:"rightalign"},"Email"),i.a.createElement("td",null,i.a.createElement("div",{className:"textfield"}))),i.a.createElement("tr",null,i.a.createElement("td",{className:"rightalign"},"Land-line Number(s)"),i.a.createElement("td",null,i.a.createElement("div",{className:"textfield"}))),i.a.createElement("tr",null,i.a.createElement("td",{className:"rightalign"},"Address"),i.a.createElement("td",null,i.a.createElement("div",{className:"textarea"}))),i.a.createElement("tr",null,i.a.createElement("td",{colSpan:"2"},i.a.createElement("h4",null,"General Details"))),i.a.createElement("tr",null,i.a.createElement("td",{className:"rightalign"},"Gender"),i.a.createElement("td",null,i.a.createElement("div",{className:"radio"}),i.a.createElement("label",null,"Male "),i.a.createElement("div",{className:"radio"}),i.a.createElement("label",null,"Female "))),i.a.createElement("tr",null,i.a.createElement("td",{className:"rightalign"},"Blood Group"),i.a.createElement("td",null,i.a.createElement("div",{className:"textfield"}))),i.a.createElement("tr",null,i.a.createElement("td",{className:"rightalign"},"Date of Birth / Age"),i.a.createElement("td",null,i.a.createElement("div",{className:"textfield"})))),i.a.createElement("p",null,"I hereby declare that the information provided above is true and correct to the best of my knowledge. I give consent to the performance of medical / surgical / anesthesia / diagnostic procedure / treatment to be performed upon myself at B.K. Arogyam & Research Pvt Ltd. I will pay in full any cost of treatment or insurance co-payments according to the office's financial policy. "),i.a.createElement("div",{className:"date"},"Date"),i.a.createElement("div",{className:"signature"},"Patient's Signature")))):null}}]),t}(i.a.Component);a(2686);function pu(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function hu(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?pu(a,!0).forEach(function(t){Object(u.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):pu(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}ga.a.TextArea;var fu=fa.a.Item,gu=(Yi.Radio.Group,Yi.Checkbox.Group,ia.a.Meta),bu=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).loadPracticeTiming=function(){var e=Object(f.a)(a);ht(gt(se,[a.props.active_practiceId]),function(t){var a={};t.length&&(a=t[0]);var n={};hn.forEach(function(e){n[e]={},a.visting_hour_same_week?(n[e].startTime=ya()(a.first_start_time,"HH:mm:ss"),n[e].endTime=ya()(a.second_end_time,"HH:mm:ss"),a.is_two_sessions?(n[e].lunch=!0,n[e].lunchStartTime=ya()(a.first_end_time,"HH:mm:ss"),n[e].lunchEndTime=ya()(a.second_start_time,"HH:mm:ss")):n[e].lunch=!1):a[e]?(n[e].startTime=ya()(a["first_start_time_".concat(e)],"HH:mm:ss"),n[e].endTime=ya()(a["second_end_time_".concat(e)],"HH:mm:ss"),a["is_two_sessions_".concat(e)]?(n[e].lunch=!0,n[e].lunchStartTime=ya()(a["first_end_time_".concat(e)],"HH:mm:ss"),n[e].lunchEndTime=ya()(a["second_start_time_".concat(e)],"HH:mm:ss")):n[e].lunch=!1):n[e]=null}),e.setState({calendarTimings:hu({},n)},function(){e.findOutsidePracticeTiming()})},function(){e.setState({calendarTimings:{}})})},a.loadDoctorsTiming=function(){var e=Object(f.a)(a);e.state.timeToCheckBlock.doctor&&ht(gt(U,[a.props.active_practiceId]),function(t){var a={};t.length&&(a=t[0]);var n={};hn.forEach(function(e){n[e]={},a.visting_hour_same_week?(n[e].startTime=ya()(a.first_start_time,"HH:mm:ss"),n[e].endTime=ya()(a.second_end_time,"HH:mm:ss"),a.is_two_sessions?(n[e].lunch=!0,n[e].lunchStartTime=ya()(a.first_end_time,"HH:mm:ss"),n[e].lunchEndTime=ya()(a.second_start_time,"HH:mm:ss")):n[e].lunch=!1):a[e]?(n[e].startTime=ya()(a["first_start_time_".concat(e)],"HH:mm:ss"),n[e].endTime=ya()(a["second_end_time_".concat(e)],"HH:mm:ss"),a["is_two_sessions_".concat(e)]?(n[e].lunch=!0,n[e].lunchStartTime=ya()(a["first_end_time_".concat(e)],"HH:mm:ss"),n[e].lunchEndTime=ya()(a["second_start_time_".concat(e)],"HH:mm:ss")):n[e].lunch=!1):n[e]=null}),e.setState({doctorTimings:hu({},n)},function(){e.findOutsideDoctorTiming()})},function(){},{doctor:e.state.timeToCheckBlock.doctor})},a.setBlockedTiming=function(e,t){var n=Object(f.a)(a);e&&a.setState(function(a){return{timeToCheckBlock:hu({},a.timeToCheckBlock,Object(u.a)({},e,t))}},function(){n.loadAppointmentList(),n.findBlockedTiming(),n.findOutsidePracticeTiming(),"doctor"==e?n.loadDoctorsTiming():n.findOutsideDoctorTiming()})},a.findBlockedTiming=function(){var e=Object(f.a)(a);ht(he,function(t){t.forEach(function(t){null==t.doctor?e.setState({practiceBlock:!0}):t.doctor==e.props.timeToCheckBlock.doctor&&e.setState({doctorBlock:!0})})},function(){},{practice:a.props.active_practiceId,cal_fdate:ya()(e.state.timeToCheckBlock.schedule_at).format(),cal_tdate:ya()(e.state.timeToCheckBlock.schedule_at).add(e.state.timeToCheckBlock.slot,"minutes").format()})},a.findOutsidePracticeTiming=function(){var e=Object(f.a)(a),t=!0;if(e.state.timeToCheckBlock.schedule_at&&e.state.timeToCheckBlock.slot){var n=e.state.timeToCheckBlock.schedule_at,i=e.state.calendarTimings,r=ya()(n).isValid()?ya()(n).format("dddd").toLowerCase():null;if(i&&r&&i[r]){var l=i[r];l.lunch?(ya()(n,"HH:mm:ss").format("HH:mm:ss")<=l.startTime.format("HH:mm:ss")||ya()(n,"HH:mm:ss").format("HH:mm:ss")>l.endTime.format("HH:mm:ss")||ya()(n,"HH:mm:ss").format("HH:mm:ss")<l.lunchEndTime.format("HH:mm:ss")&&ya()(n,"HH:mm:ss").format("HH:mm:ss")>=l.lunchStartTime.format("HH:mm:ss"))&&(t=!1):(ya()(n,"HH:mm:ss").format("HH:mm:ss")<=l.startTime.format("HH:mm:ss")||ya()(n,"HH:mm:ss").format("HH:mm:ss")>l.endTime.format("HH:mm:ss"))&&(t=!1)}else r&&!i[r]&&(t=!1)}e.setState({practiceOutsideAvailableTiming:!t})},a.findOutsideDoctorTiming=function(){var e=Object(f.a)(a),t=!0;if(e.state.timeToCheckBlock.schedule_at&&e.state.timeToCheckBlock.slot){var n=e.state.timeToCheckBlock.schedule_at,i=e.state.doctorTimings,r=ya()(n).isValid()?ya()(n).format("dddd").toLowerCase():null;if(i&&r&&i[r]){var l=i[r];l.lunch?(ya()(n,"HH:mm:ss").format("HH:mm:ss")<=l.startTime.format("HH:mm:ss")||ya()(n,"HH:mm:ss").format("HH:mm:ss")>l.endTime.format("HH:mm:ss")||ya()(n,"HH:mm:ss").format("HH:mm:ss")<l.lunchEndTime.format("HH:mm:ss")&&ya()(n,"HH:mm:ss").format("HH:mm:ss")>=l.lunchStartTime.format("HH:mm:ss"))&&(t=!1):(ya()(n,"HH:mm:ss").format("HH:mm:ss")<=l.startTime.format("HH:mm:ss")||ya()(n,"HH:mm:ss").format("HH:mm:ss")>l.endTime.format("HH:mm:ss"))&&(t=!1)}else r&&i&&!i[r]&&(t=!1)}e.setState({doctorOutsideAvailableTiming:!t})},a.handleSubmit=function(e){var t=Object(f.a)(a);e.preventDefault(),a.props.form.validateFields(function(e,n){if(!e){t.setState({saving:!0});var i=hu({},n);i.patient={user:{}},a.state.patientDetails?i.patient=a.state.patientDetails:(i.patient.user.first_name=i.patient_name,i.patient.user.email=i.patient_email,i.patient.user.mobile=i.patient_mobile,i.patient_email=void 0,i.patient_name=void 0,i.patient_mobile=void 0),i.practice=t.props.active_practiceId;var r=function(e){t.setState({saving:!1}),t.props.history&&t.props.history.goBack(),t.props.loadData&&t.props.loadData(),e&&bt(k,"Appointment Created Successfully")},l=function(){t.setState({saving:!1})};a.state.appointment?ut(gt(oe,[a.state.appointment.id]),i,r,l):dt(ce,i,r,l)}})},a.handlePatientSelect=function(e){if(e){var t=Object(f.a)(a);ht(gt(te,[e]),function(e){t.setState({patientDetails:e})},function(){})}},a.handleClick=function(e){a.setState({patientDetails:null})},a.state={redirect:!1,practice_doctors:[],appointmentCategories:null,procedure_category:null,treatmentNotes:null,practice_staff:[],appointment:null,loading:!1,patientListData:[],appointmentDetail:null,saving:!1,doctorBlock:!1,doctorOutsideAvailableTiming:!1,practiceBlock:!1,practiceOutsideAvailableTiming:!1,timeToCheckBlock:{schedule_at:ya()(),slot:10},procedureObjectsById:{}},a.changeRedirect=a.changeRedirect.bind(Object(f.a)(a)),a.loadDoctors=a.loadDoctors.bind(Object(f.a)(a)),a.loadProcedureCategory=a.loadProcedureCategory.bind(Object(f.a)(a)),a.loadTreatmentNotes=a.loadTreatmentNotes.bind(Object(f.a)(a)),a.searchPatient=a.searchPatient.bind(Object(f.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(f.a)(a)),a.loadAppointment=a.loadAppointment.bind(Object(f.a)(a)),a.loadAppointmentList=a.loadAppointmentList.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;if(this.loadDoctors(),this.loadProcedureCategory(),this.loadTreatmentNotes(),this.loadAppointmentCategories(),this.loadPracticeTiming(),this.loadAppointmentList(),this.props.match.params.appointmentid)e.loadAppointment();else if(this.props.history&&this.props.history.location.search){var t=this.props.history.location.search.substr(1).split("&");t.length&&t.forEach(function(t){var a=t.split("=");a&&2==a.length&&"patient"==a[0]&&a[1]&&e.handlePatientSelect(a[1])})}}},{key:"loadAppointment",value:function(){var e=this;this.setState({loading:!0});ht(gt(oe,[this.props.match.params.appointmentid]),function(t){e.setState({appointment:t,patientDetails:t.patient,timeToCheckBlock:t,loading:!1},function(){e.findBlockedTiming(),e.findOutsideDoctorTiming(),e.loadDoctorsTiming(),e.loadAppointmentList()})},function(){e.setState({loading:!1})})}},{key:"loadDoctors",value:function(){var e=this;ht(gt(z,[this.props.active_practiceId]),function(t){var a=[];t.staff.forEach(function(e){"3"==e.role&&a.push(e)}),e.setState(function(e){var t=null;return a.length&&(t=a[0].id),{practice_doctors:a,timeToCheckBlock:hu({},e.timeToCheckBlock,{doctor:t})}},function(){e.findBlockedTiming(),e.loadDoctorsTiming()})},function(){})}},{key:"loadProcedureCategory",value:function(){var e=this;ht(gt(J,[this.props.active_practiceId]),function(t){var a={};t.forEach(function(e){a[e.id]=e}),e.setState({procedure_category:t,procedureObjectsById:hu({},a)})},function(){})}},{key:"loadTreatmentNotes",value:function(){var e=this;ht(gt($,[this.props.active_practiceId]),function(t){e.setState({treatmentNotes:t})},function(){})}},{key:"loadAppointmentCategories",value:function(){var e=this;ht(gt(Z,[this.props.active_practiceId]),function(t){e.setState({appointmentCategories:t})},function(){})}},{key:"changeRedirect",value:function(){var e=this.state.redirect;this.setState({redirect:!e})}},{key:"searchPatient",value:function(e){var t=this;ht(gt(Ve,[e]),function(e){e&&t.setState({patientListData:e})},function(){})}},{key:"loadAppointmentList",value:function(){var e=this,t={start_time:ya()(this.state.timeToCheckBlock.schedule_at).format(),end_time:ya()(this.state.timeToCheckBlock.schedule_at).add(this.state.timeToCheckBlock.slot,"minutes").format(),doctor:this.state.timeToCheckBlock.doctor};ht(gt("appointment/?practice=%s",[this.props.active_practiceId]),function(t){e.setState({appointmentList:t})},function(e){},t)}},{key:"render",value:function(){var e=this;console.log("state",this.state),console.log("props",this.props.match.params.appointmentid);var t=this,a=this.props.formLayout?this.props.formLayout:{labelCol:{span:6},wrapperCol:{span:14}},n=this.props.formLayout?this.props.formLayout:{wrapperCol:{offset:6,span:14}},r=this.props.form.getFieldDecorator,l=[];this.state.practice_doctors.length&&this.state.practice_doctors.forEach(function(e){l.push({label:e.user.first_name+"("+e.user.email+")",value:e.id})});var s=[];this.state.treatmentNotes&&this.state.treatmentNotes.forEach(function(e){s.push({label:e.name,value:e.id})});var c=[];this.state.appointmentCategories&&this.state.appointmentCategories.forEach(function(e){c.push({label:e.name,value:e.id})});var u=this.state.appointment?this.state.appointment.schedule_at:this.props.startTime;u||(u=new ya.a(new Date).format());return i.a.createElement(ia.a,null,i.a.createElement(Tt.a,{spinning:this.state.saving},i.a.createElement(fa.a,{onSubmit:this.handleSubmit},this.props.title?i.a.createElement("h2",null,this.props.title):null,i.a.createElement(fu,Object.assign({key:"schedule_at",label:"Appointment Schedule"},a),r("schedule_at",{initialValue:u?ya()(u):null,rules:[{required:!0,message:rt}]})(i.a.createElement(ma.a,{format:"YYYY/MM/DD HH:mm",showTime:!0,onChange:function(t){return e.setBlockedTiming("schedule_at",t)}})),this.state.practiceOutsideAvailableTiming?i.a.createElement(o.a,{message:"Selected time is outside available clinic time!!",type:"warning",showIcon:!0}):null,this.state.practiceBlock?i.a.createElement(o.a,{message:"Selected time is blocked in this clinic !!",type:"warning",showIcon:!0}):null),i.a.createElement(fu,Object.assign({key:"slot"},a,{label:"Time Slot"}),r("slot",{initialValue:this.state.appointment?this.state.appointment.slot:10,rules:[{required:!0,message:rt}]})(i.a.createElement(pa.a,{min:1,onChange:function(t){return e.setBlockedTiming("slot",t)}})),i.a.createElement("span",{className:"ant-form-text"},"mins",i.a.createElement(Zt.a,{style:{float:"right"}},i.a.createElement(ea.a,{span:24},this.state.appointmentList&&this.state.appointmentList.length>0?i.a.createElement("div",{span:5,style:{float:"right"}},i.a.createElement("ul",{style:{listStyle:"none",display:"inline-flex",paddingLeft:"15px",paddingRight:"10px"}},t.state.appointmentList.map(function(e){return i.a.createElement("li",{style:{border:"1px solid #bbb",marginLeft:"13px",padding:" 0.01em 14px"}},i.a.createElement("span",{style:{width:"calc(100% - 60px)"}},i.a.createElement("b",null,ya()(e.schedule_at).format("LT")),"\xa0",e.patient.user.first_name),"\xa0",i.a.createElement("b",null,"with")," \xa0",e.doctor_data.user.first_name)}))):null))),this.state.appointmentList&&this.state.appointmentList.length>0?i.a.createElement(i.a.Fragment,null,i.a.createElement(o.a,{message:"Selected time slot have assigned someone else !! please select another slot.",type:"warning",showIcon:!0})):null),t.state.patientDetails?i.a.createElement(fu,Object.assign({key:"id",value:this.state.patientDetails.id},n),i.a.createElement(ia.a,{bordered:!1,style:{background:"#ECECEC"}},i.a.createElement(gu,{avatar:i.a.createElement(Nt.a,{style:{backgroundColor:"#ffff"},size:150,src:this.state.patientDetails.image?ot(this.state.patientDetails.image):"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png"}),title:this.state.patientDetails.user.first_name,description:i.a.createElement("span",null,t.props.activePracticePermissions.PatientPhoneNumber?this.state.patientDetails.user.mobile:Yt(this.state.patientDetails.user.mobile),i.a.createElement("br",null),i.a.createElement(Vt.a,{type:"primary",style:{float:"right"},onClick:this.handleClick},"Add New Patient"))}))):i.a.createElement("div",null,i.a.createElement(fu,Object.assign({key:"patient_name",label:"Patient Name"},a),r("patient_name",{initialValue:this.state.appointment?this.state.appointment.patient.user.first_name:null,rules:[{required:!0,message:rt}]})(i.a.createElement(Ft.a,{placeholder:"Patient Name",showSearch:!0,onSearch:this.searchPatient,defaultActiveFirstOption:!1,showArrow:!1,filterOption:!1,onSelect:this.handlePatientSelect},this.state.patientListData.map(function(e){return i.a.createElement(Ft.a.Option,{value:e.id.toString()},i.a.createElement(Rt.a.Item,{style:{padding:0}},i.a.createElement(Rt.a.Item.Meta,{avatar:i.a.createElement(Nt.a,{src:e.image?ot(e.image):"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png"}),title:e.user.first_name+" (ID:"+e.user.id+")",description:t.props.activePracticePermissions.PatientPhoneNumber?e.user.mobile:Yt(e.user.mobile)})))})))),i.a.createElement(fu,Object.assign({key:"patient_mobile",label:"Mobile Number"},a),r("patient_mobile",{initialValue:this.state.appointment?this.state.appointment.patient.user.mobile:null,rules:[{required:!0,message:rt}]})(i.a.createElement(ga.a,{placeholder:"Mobile Number"}))),i.a.createElement(fu,Object.assign({key:"patient_email",label:"Email Address"},a),r("patient_email",{initialValue:this.state.appointment?this.state.appointment.patient.user.email:null,rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:rt}]})(i.a.createElement(ga.a,{placeholder:"Email Address"})))),i.a.createElement(fu,Object.assign({key:"doctor"},a,{label:"Doctor"}),r("doctor",{initialValue:this.state.appointment?this.state.appointment.doctor:null},{rules:[{required:!0,message:rt}]})(i.a.createElement(Lt.a,{placeholder:"Doctor",onChange:function(t){return e.setBlockedTiming("doctor",t)}},l.map(function(e){return i.a.createElement(Lt.a.Option,{value:e.value},e.label)}))),this.state.doctorBlock?i.a.createElement(o.a,{message:"Selected time is blocked for selected doctor in this clinic!!",type:"warning",showIcon:!0}):null,this.state.doctorOutsideAvailableTiming?i.a.createElement(o.a,{message:"Selected time is out of doctor's visit time in this clinic!!",type:"warning",showIcon:!0}):null,this.state.appointmentList&&this.state.appointmentList.length>0?i.a.createElement(i.a.Fragment,null,i.a.createElement(o.a,{message:"Selected time doctor's busy on other patients in  this clinic!!",type:"warning",showIcon:!0})):null),i.a.createElement(fu,Object.assign({key:"category"},a,{label:"Category"}),r("category",{initialValue:this.state.appointment?this.state.appointment.category:null},{rules:[{required:!0,message:rt}]})(i.a.createElement(Lt.a,{placeholder:"Category"},c.map(function(e){return i.a.createElement(Lt.a.Option,{value:e.value},e.label)})))),this.state.appointment?i.a.createElement(fu,Object.assign({key:"status"},a,{label:"Status"}),r("status",{initialValue:this.state.appointment.status})(i.a.createElement(Lt.a,{placeholder:"Status"},En.map(function(e){return i.a.createElement(Lt.a.Option,{value:e.value},e.label)})))):null,i.a.createElement(fu,Object.assign({key:"notes"},a,{label:"Notes"}),r("notes",{initialValue:this.state.appointment?this.state.appointment.notes:null},{rules:[{required:!0,message:rt}]})(i.a.createElement(ga.a,{placeholder:"Notes"}))),i.a.createElement(fu,a,i.a.createElement(Vt.a,{loading:t.state.saving,type:"primary",htmlType:"submit",style:{margin:5}},"Submit"),t.props.history?i.a.createElement(Vt.a,{style:{margin:5},onClick:function(){return t.props.history.goBack()}},"Cancel"):null))))}}]),t}(i.a.Component),yu=function(e){function t(){return Object(d.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=[{key:"practice",value:this.props.active_practiceId}],a=fa.a.create()(bu);return i.a.createElement(Zt.a,null,i.a.createElement(b.b,{exact:!0,path:"/calendar/:appointmentid/edit-appointment",render:function(n){return e.props.match.params.appointmentid?i.a.createElement(a,Object.assign({},n,e.props,{defaultValues:t,title:"Edit Appointment",changeRedirect:e.changeRedirect})):i.a.createElement(b.a,{to:"/patients/appointments/"})}}),i.a.createElement(b.b,{exact:!0,path:"/calendar/create-appointment",render:function(n){return i.a.createElement(a,Object.assign({},e.props,{defaultValues:t,changeRedirect:e.changeRedirect},n,{title:"ADD Appointment "}))}}))}}]),t}(i.a.Component);a(2688);function Eu(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function vu(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Eu(a,!0).forEach(function(t){Object(u.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Eu(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var _u=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).changeParamsForBlockedAppointments=function(e,t){var n=Object(f.a)(a);a.setState(function(a){return{blockedAppointmentParams:vu({},a.blockedAppointmentParams,Object(u.a)({},e,t))}},function(){n.retrieveBlockingAppointments()})},a.retrieveBlockingAppointments=function(){var e=Object(f.a)(a);e.setState({loading:!0});a.state.blockedAppointmentParams.block_from&&a.state.blockedAppointmentParams.block_to&&ht(gt(ue,[a.props.active_practiceId]),function(t){e.setState(function(e){return{blockingAppointments:t,loading:!1}})},function(){e.setState({loading:!1})},{start:ya()(e.state.blockedAppointmentParams.block_from).format("YYYY-MM-DD"),end:ya()(e.state.blockedAppointmentParams.block_to).format("YYYY-MM-DD"),doctor:e.state.blockedAppointmentParams.doctor})},a.handleSubmit=function(e){e.preventDefault();var t={};a.props.form.validateFields(function(e,n){console.log(n),e||(t=vu({},n,{practice:a.props.active_practiceId}))});dt(he,t,function(e){},function(){})},a.state={practiceDoctors:[],blockedAppointmentParams:{block_from:ya()(),block_to:ya()()}},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){Ii(this)}},{key:"render",value:function(){var e=this;console.log("Doctor list",this.state),console.log(this.props);var t=this,a=this.props.form.getFieldDecorator,n={labelCol:{span:6},wrapperCol:{span:4}};return i.a.createElement(ia.a,{title:"Block Calendar"},i.a.createElement(Zt.a,null,i.a.createElement(ea.a,{span:18},i.a.createElement(fa.a,{onSubmit:this.handleSubmit},i.a.createElement(fa.a.Item,Object.assign({label:"Block From"},n),a("block_from",{initialValue:ya()()})(i.a.createElement(ma.a,{showTime:!0,onChange:function(t){return e.changeParamsForBlockedAppointments("block_from",t)}}))),i.a.createElement(fa.a.Item,Object.assign({label:"Block To"},n),a("block_to",{initialValue:ya()()})(i.a.createElement(ma.a,{showTime:!0,onChange:function(t){return e.changeParamsForBlockedAppointments("block_to",t)}}))),i.a.createElement(fa.a.Item,Object.assign({label:"Event Name"},n),a("event",{})(i.a.createElement(ga.a,{placeholder:"Event Name"}))),i.a.createElement(fa.a.Item,Object.assign({label:"Doctor"},n),a("doctor",{})(i.a.createElement(Lt.a,{placeholder:"Docto List",onChange:function(t){return e.changeParamsForBlockedAppointments("doctor",t)}},this.state.practiceDoctors.map(function(e){return i.a.createElement(Lt.a.Option,{value:e.id},e.user.first_name)})))),i.a.createElement(fa.a.Item,null,i.a.createElement(Vt.a,{style:{margin:5},type:"primary",htmlType:"submit"},"Submit"),t.props.history?i.a.createElement(Vt.a,{style:{margin:5},onClick:function(){return t.props.history.goBack()}},"Cancel"):null))),i.a.createElement(ea.a,{span:6},i.a.createElement(Rt.a,{size:"small",dataSource:this.state.blockingAppointments,renderItem:function(a){return a.status==dn?i.a.createElement("div",null):i.a.createElement(Rt.a.Item,{color:"transparent",style:{padding:0}},i.a.createElement("div",{style:{border:"1px solid #ddd",borderRadius:"5px",textDecoration:a.status==dn?"line-through":"inherit",backgroundColor:a.status==dn?"#aaa":"#eee",width:"100%",marginTop:"2px",borderLeft:"5px solid"+(a.doctor&&t.state.practice_doctors&&t.state.practice_doctors[a.doctor]?t.props.doctors_object[a.doctor].calendar_colour:"transparent")}},i.a.createElement(Ou,Object.assign({},a,{changeAppointmentStatus:e.changeAppointmentStatus},e.props))))}}))))}}]),t}(i.a.Component),ku=fa.a.create()(_u);function Ou(e){return i.a.createElement("div",{style:{width:"100%"}},i.a.createElement("p",{style:{marginBottom:0}},i.a.createElement(na.a,{type:"vertical"}),i.a.createElement(Rr.a,{placement:"right",content:i.a.createElement(Nr,Object.assign({appointmentId:e.id,key:e.id},e))},i.a.createElement("span",{style:{width:"calc(100% - 60px)"}},i.a.createElement("b",null,ya()(e.schedule_at).format("LLL")),"\xa0",e.patient.user.first_name),i.a.createElement("p",{style:{color:e.doctor_data?e.doctor_data.calendar_colour:null}},i.a.createElement(na.a,{type:"vertical"}),i.a.createElement("span",null,e.doctor_data?e.doctor_data.user.first_name:null)))))}var Pu=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).toggleSider=function(e){a.setState({collapsed:!!e})},a.state={collapsed:!1,active_practiceId:St(),practiceList:Dt(),activePracticeData:null,activePracticePermissions:{},specialisations:null,allowAllPermissions:!1,loadingPermissions:!1},a.activeData=a.activeData.bind(Object(f.a)(a)),a.switchPractice=a.switchPractice.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.activeData()}},{key:"activeData",value:function(){var e=this,t=function(t){e.setState(function(e){var a={};return t.practice_permissions.forEach(function(e){a[e.codename]=e}),t.global_permissions.forEach(function(e){a[e.codename]=e}),{activePracticePermissions:a,loadingPermissions:!1,practiceList:Dt()}},function(){})},a=function(){e.setState({loadingPermissions:!1})};e.setState(function(e){var t=null;return e.practiceList.forEach(function(a){a.practice.id==e.active_practiceId&&(t=a.practice)}),t||!e.practiceList.length?{activePracticeData:t,loadingPermissions:!0}:(jt(e.practiceList[0].practice.id),{activePracticeData:e.practiceList[0].practice,active_practiceId:e.practiceList[0].practice.id,loadingPermissions:!0})},function(){var n,i,r;n=e.state.active_practiceId,i=t,r=a,ht("users/user_clone/",function(e){E.a.set(j,e.user),E.a.set("practice",e.practice_list),i(e)},function(){bt(P,"Permission Loading Failed. Kindly refresh or check your internet connection..."),r()},{practice:n})})}},{key:"switchPractice",value:function(e){var t=this;t.setState(function(t){return{active_practiceId:e}},function(){jt(e),t.activeData()})}},{key:"render",value:function(){var e=this,t=this;return this.state.loadingPermissions?i.a.createElement(Tt.a,{spinning:this.state.loadingPermissions,tip:"Loading Permissions...."},i.a.createElement("div",{style:{width:"100vw",height:"100vh"}})):i.a.createElement(s.a,{style:{minHeight:"100vh"}},i.a.createElement(b.d,null,i.a.createElement(b.b,{path:"/patients/patientprintform",render:function(a){return i.a.createElement(mu,Object.assign({},e.state,{key:t.state.active_practiceId}))}}),i.a.createElement(b.b,null,i.a.createElement(s.a,null,i.a.createElement(Jt,Object.assign({toggleSider:this.toggleSider},this.state,{key:t.state.active_practiceId})),i.a.createElement(s.a,null,i.a.createElement(Ut,Object.assign({},this.props,this.state,{switchPractice:this.switchPractice,toggleSider:this.toggleSider})),i.a.createElement(b.d,null,this.state.activePracticePermissions.WebAdmin?i.a.createElement(b.b,{path:"/web",render:function(a){return i.a.createElement(wo,Object.assign({},e.state,e.props,a,{key:t.state.active_practiceId}))}}):null,i.a.createElement(b.b,{exact:!0,path:"/calendar/create-appointment",render:function(t){return e.state.activePracticePermissions.AddAppointment||e.state.allowAllPermissions?i.a.createElement(yu,Object.assign({},e.state,e.props,t,{startTime:e.state.startTime})):i.a.createElement(qn,null)}}),i.a.createElement(b.b,{exact:!0,path:"/calendar/:appointmentid/edit-appointment",render:function(t){return e.state.activePracticePermissions.EditAppointment||e.state.allowAllPermissions?i.a.createElement(yu,Object.assign({},e.state,e.props,t,{startTime:e.state.startTime})):i.a.createElement(qn,null)}}),i.a.createElement(b.b,{exact:!0,path:"/calendar/blockcalendar",render:function(a){return t.state.activePracticePermissions.BlockCalendar||t.state.allowAllPermissions?i.a.createElement(ku,Object.assign({},e.state,e.props,a)):i.a.createElement(qn,null)}}),i.a.createElement(b.b,{path:"/calendar",render:function(e){return t.state.activePracticePermissions.ViewCalendar?i.a.createElement(tl,Object.assign({},t.state,t.props,e,{key:t.state.active_practiceId})):i.a.createElement(qn,null)}}),i.a.createElement(b.b,{path:"/patient/:id",render:function(a){return i.a.createElement(Vc,Object.assign({},e.state,e.props,a,{key:t.state.active_practiceId+"|"+a.match.params.id}))}}),i.a.createElement(b.b,{path:"/settings",render:function(a){return i.a.createElement(Cr,Object.assign({},e.state,e.props,a,{key:t.state.active_practiceId,refreshClinicData:e.activeData}))}}),i.a.createElement(b.b,{path:"/inventory",render:function(a){return i.a.createElement(lu,Object.assign({},e.state,e.props,a,{key:t.state.active_practiceId}))}}),i.a.createElement(b.b,{path:"/reports/:type",render:function(a){return i.a.createElement(to,Object.assign({},e.state,e.props,a,{key:t.state.active_practiceId}))}}),i.a.createElement(b.b,{path:"/profile",render:function(a){return i.a.createElement(uu,Object.assign({},e.state,e.props,a,{key:t.state.active_practiceId}))}}),this.state.activePracticePermissions.ViewCalendar?i.a.createElement(b.b,{exact:!0,path:"/",render:function(a){return i.a.createElement(tl,Object.assign({},e.state,e.props,a,{key:t.state.active_practiceId}))}}):null,i.a.createElement(b.b,{path:"/",render:function(a){return i.a.createElement(Vc,Object.assign({},e.state,e.props,a,{key:t.state.active_practiceId}))}}),i.a.createElement(b.b,{component:Oi})))))))}}]),t}(i.a.Component),ju=(a(2704),fa.a.Item),Du=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).handleOk=function(e){var t=Object(f.a)(a);console.log(e);mt(ct(Y),{mobile:a.state.userMail},function(e){bt("success","Link to update your password have been sent to your mail."),t.setState({resetModalVisible:!1})},function(){})},a.handleCancel=function(e){console.log(e),a.setState({resetModalVisible:!1})},a.state={isLoading:!1,username:null,userMail:"",redirect:null,resetModalVisible:!1},a.handleSubmit=a.handleSubmit.bind(Object(f.a)(a)),a.showResetModal=a.showResetModal.bind(Object(f.a)(a)),a.changeUserMail=a.changeUserMail.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"showResetModal",value:function(){this.setState({resetModalVisible:!0})}},{key:"changeUserMail",value:function(e){this.setState({userMail:e.target.value})}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this;this.props.form.validateFields(function(e,a){if(!e){var n,i=(n={},Object(u.a)(n,"email",a.email),Object(u.a)(n,"password",a.password),n);t.props.login(i)}})}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return this.state.redirect?i.a.createElement(b.a,{to:this.state.redirect}):i.a.createElement(fa.a,{onSubmit:this.handleSubmit,className:"login-form"},i.a.createElement(ju,null,e("email",{rules:[{required:!0,message:"Please input your username!"}]})(i.a.createElement(ga.a,{size:"large",prefix:i.a.createElement(Bt.a,{type:"phone",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Mobile Number"}))),i.a.createElement(ju,null,e("password",{rules:[{required:!0,message:"Please input your Password!"}]})(i.a.createElement(ga.a,{size:"large",prefix:i.a.createElement(Bt.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"}))),i.a.createElement(ju,null,i.a.createElement("a",{style:{float:"right"},type:"primary",onClick:this.showResetModal},"Forgot Password ?"),i.a.createElement(Vt.a,{size:"large",loading:this.state.changePassLoading,type:"primary",htmlType:"submit",className:"login-form-button"},"Log in")),i.a.createElement(na.a,null,"OR"),i.a.createElement("h4",null,i.a.createElement(qt.b,{to:"/loginwithphone"}," ",i.a.createElement(Vt.a,{size:"large",type:"primary",htmlType:"submit",className:"login-form-button"},"Log in with phone"))),i.a.createElement(na.a,null),i.a.createElement($t.a,{title:"Email to Reset Password",visible:this.state.resetModalVisible,onOk:this.handleOk,onCancel:this.handleCancel,okText:"Reset Password"},i.a.createElement(ga.a,{placeholder:"Enter your Mobile Number",prefix:i.a.createElement(Bt.a,{type:"mobile",style:{color:"rgba(0,0,0,.25)"}}),onChange:this.changeUserMail})),1==this.props.redirect&&i.a.createElement(b.a,{push:!0,to:"/"}))}}]),t}(i.a.Component);var Su=fa.a.Item,xu=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).handleSubmit=function(e){var t=Object(f.a)(a);e.preventDefault(),a.props.form.validateFields(function(e,a){e||e||t.props.login&&t.props.login(a,!1)})},a.setPhone=function(e,t){a.setState(Object(u.a)({},e,t))},a.sendOTP=function(){var e=Object(f.a)(a);if(a.state.phone){var t=function(t){e.setState({otpSent:!0}),bt(k,"OTP Sent successfully!")},n=function(){};a.state.otpSent?wt(ct(H),a.state.phone,t,n):wt(ct(B),a.state.phone,t,n)}else bt(O,"Phone No can not be empty!!")},a.state={},a.handleSubmit=a.handleSubmit.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator;return i.a.createElement(fa.a,{onSubmit:this.handleSubmit,className:"login-form"},i.a.createElement(ga.a.Group,{size:"large"},i.a.createElement(Zt.a,null,i.a.createElement(ea.a,{span:this.state.otpSent?24:18},i.a.createElement(Su,null,t("phone_no",{rules:[{required:!0,message:"Please input your phone!"}]})(i.a.createElement(ga.a,{prefix:i.a.createElement(Bt.a,{type:"phone",style:{color:"rgba(0,0,0,.25)"}}),type:"text",placeholder:"Phone",onChange:function(t){return e.setPhone("phone",t.target.value)}})))),i.a.createElement(ea.a,{span:this.state.otpSent?0:6},i.a.createElement(Vt.a,{type:"primary",size:"large",block:!0,onClick:this.sendOTP},"Send OTP")))),i.a.createElement(Su,null,t("otp",{rules:[{required:!0,message:"Please input otp!"}]})(i.a.createElement(ga.a,{size:"large",prefix:i.a.createElement(Bt.a,{type:"key",style:{color:"rgba(0,0,0,.25)"}}),type:"text",placeholder:"otp"}))),i.a.createElement(Su,null,this.state.otpSent?i.a.createElement("a",{style:{float:"right"},type:"primary",onClick:this.sendOTP},"Resend Otp ?"):null,i.a.createElement(Vt.a,{size:"large",type:"primary",htmlType:"submit",className:"login-form-button"},"Log in")),i.a.createElement(na.a,null,"OR"),i.a.createElement("h4",null,i.a.createElement(qt.b,{to:"/"}," ",i.a.createElement(Vt.a,{size:"large",type:"primary",htmlType:"submit",className:"login-form-button"},"Log in with username "))),i.a.createElement(na.a,null))}}]),t}(i.a.Component),Iu=(a(2705),function(e){function t(e){return Object(d.a)(this,t),Object(p.a)(this,Object(h.a)(t).call(this,e))}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=fa.a.create()(Du),t=fa.a.create()(La),a=fa.a.create()(xu),n=[{key:"code",value:this.props.match&&this.props.match.params.token?this.props.match.params.token:null}],r=[{label:"Password",key:"password",type:"password",required:!0},{label:"Retype Password",key:"re-password",type:"password",required:!0}],l={successFn:function(e){bt(k,"success")},errorFn:function(){},action:"users/reset_password/",method:"post"};return i.a.createElement(s.a,{className:"loginLayout"},i.a.createElement(b.d,null,i.a.createElement(b.b,{path:"/password-reset/"},i.a.createElement(Zt.a,null,i.a.createElement(ea.a,{xs:{span:20,offset:2},sm:{span:16,offset:4},md:{span:12,offset:6},lg:{span:8,offset:8},xl:{span:8,offset:8}},i.a.createElement("div",{className:"loginFormWrapper",style:{textAlign:"center"}},i.a.createElement("img",{src:Kt.a,alt:"",style:{maxWidth:"70%",minWidth:"50%",padding:"20px"}}),i.a.createElement(ia.a,null,i.a.createElement(t,Object.assign({},this.props,{formProp:l,fields:r,defaultValues:n}))),i.a.createElement(na.a,null),i.a.createElement("h4",null))))),i.a.createElement(b.b,null,i.a.createElement(Zt.a,null,i.a.createElement(ea.a,{xs:{span:20,offset:2},sm:{span:16,offset:4},md:{span:12,offset:6},lg:{span:8,offset:8},xl:{span:8,offset:8},style:{padding:"35px"}},i.a.createElement("div",{className:"loginFormWrapper",style:{textAlign:"center"}},i.a.createElement("img",{src:Kt.a,alt:"",style:{maxWidth:"70%",minWidth:"50%",padding:"20px"}}),i.a.createElement(b.d,null,i.a.createElement(b.b,{path:"/loginwithphone"},i.a.createElement(a,Object.assign({},this.props,{login:this.props.login}))),i.a.createElement(b.b,null,i.a.createElement(e,Object.assign({},this.props,{login:this.props.login}))),i.a.createElement(b.b,null)),i.a.createElement("h4",{style:{textAlign:"center"}},"Powered By: ",i.a.createElement("a",{href:"https://plutonic.co.in/",target:"_blank"},"Plutonic Services"))))))))}}]),t}(i.a.Component)),Cu=a(688);function wu(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Tu(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?wu(a,!0).forEach(function(t){Object(u.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):wu(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Au=function(e){function t(e){var a;return Object(d.a)(this,t),a=Object(p.a)(this,Object(h.a)(t).call(this,e)),Cu.a.initialize("UA-143616458-1"),a.state={user:Pt(),redirect:!1,production:"clinic.bkarogyam.com"==window.location.hostname},a.login=a.login.bind(Object(f.a)(a)),a.logout=a.logout.bind(Object(f.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){console.log(window.location.hostname)}},{key:"login",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=this,n=function(){var e=Pt();a.setState({user:e})},i=function(){};t?xt(e,n,i):It(Tu({},e),n,i)}},{key:"logout",value:function(){var e=this;!function(e,t){E.a.rm(j),E.a.rm("token"),E.a.rm("practice"),E.a.rm("group"),e()}(function(){e.setState({user:null})})}},{key:"render",value:function(){var e=this;return Cu.a.pageview(window.location.pathname+window.location.search),i.a.createElement(s.a,null,this.state.production?null:i.a.createElement(c.a,null,i.a.createElement(o.a,{message:"Demo Version (Only for testing purposes)",banner:!0,closable:!0})),i.a.createElement(b.d,null,i.a.createElement(b.b,{exact:!0,path:"/login",render:function(){return i.a.createElement(Iu,Object.assign({},e.state,{login:e.login}))}}),i.a.createElement(b.b,{exact:!0,path:"/password-reset/:token",render:function(t){return i.a.createElement(Iu,Object.assign({},t,e.state,{login:e.login}))}}),i.a.createElement(b.b,{render:function(t){return e.state.user?i.a.createElement(Pu,Object.assign({},e.state,t,{logout:e.logout})):i.a.createElement(Iu,Object.assign({},e.state,{login:e.login}))}})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(2706),a(2707);l.a.render(i.a.createElement(qt.a,null,i.a.createElement(Au,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},343:function(e,t,a){e.exports=a.p+"static/media/kidneycarelogo.3378a129.png"}},[[1146,1,2]]]);
//# sourceMappingURL=main.ec103fd7.chunk.js.map