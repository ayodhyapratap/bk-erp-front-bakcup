{"ast":null,"code":"import _defineProperty from \"/home/shivam/WorkSpace/bk-erp-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/home/shivam/WorkSpace/bk-erp-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/shivam/WorkSpace/bk-erp-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/shivam/WorkSpace/bk-erp-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/shivam/WorkSpace/bk-erp-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/shivam/WorkSpace/bk-erp-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/shivam/WorkSpace/bk-erp-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/shivam/WorkSpace/bk-erp-front/src/app/components/inventory/inventoryItem/InventoryItemList.js\";\nimport React from \"react\";\nimport { Button, Card, Icon, Modal, Tag, Divider, Popconfirm, Row, Radio } from \"antd\";\nimport { getAPI, interpolate, deleteAPI } from \"../../../utils/common\";\nimport { INVENTORY_ITEM_API, SINGLE_INVENTORY_ITEM_API, MANUFACTURER_API, TAXES, VENDOR_API } from \"../../../constants/api\";\nimport { Link, Route, Switch } from \"react-router-dom\";\nimport AddorEditInventoryItem from \"./AddorEditInventoryItem\";\nimport AddItemType from \"./AddItemType\";\nimport AddOrConsumeStock from \"./AddOrConsumeStock\";\nimport { ADD_STOCK, CONSUME_STOCK, INVENTORY_ITEM_TYPE } from \"../../../constants/hardData\";\nimport CustomizedTable from \"../../common/CustomizedTable\";\n\nvar InventoryItemList =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(InventoryItemList, _React$Component);\n\n  function InventoryItemList(props) {\n    var _this;\n\n    _classCallCheck(this, InventoryItemList);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(InventoryItemList).call(this, props));\n\n    _this.changeFilter = function (e) {\n      var that = _assertThisInitialized(_assertThisInitialized(_this));\n\n      _this.setState(_defineProperty({}, e.target.name, e.target.value), function () {\n        that.setState(function (prevState) {\n          var filteredList = [];\n\n          if (prevState.itemTypeFilter == \"ALL\" && prevState.itemStockFilter == \"ALL\") {\n            filteredList = prevState.invantoryItems;\n          } else {\n            prevState.invantoryItems.forEach(function (item) {\n              var approved = 0;\n\n              if (prevState.itemTypeFilter == \"ALL\" || prevState.itemTypeFilter == item.item_type) {\n                approved += 1;\n              }\n\n              if (prevState.itemStockFilter == 'All') {\n                approved += 1;\n              } else if (prevState.itemStockFilter == 'LOW' && item.item_stock_type.item_stock) {\n                var sum = item.item_stock_type.item_stock.reduce(function (a, b) {\n                  return a.quantity + b.quantity;\n                }, 0);\n\n                if (sum < item.re_order_level) {\n                  approved += 1;\n                }\n              }\n\n              if (approved >= 1) {\n                filteredList.push(item);\n              }\n            });\n          }\n\n          return {\n            inventoryItemList: filteredList\n          };\n        });\n      });\n    };\n\n    _this.state = {\n      invantoryItems: [],\n      //All List\n      inventoryItemList: [],\n      // Filtered List\n      active_practiceId: _this.props.active_practiceId,\n      stockModalVisibility: false,\n      itemTypeFilter: \"ALL\",\n      itemStockFilter: \"ALL\"\n    };\n    _this.loadData = _this.loadData.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.showAddOrConsumeModal = _this.showAddOrConsumeModal.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.setActionType = _this.setActionType.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.changeFilter = _this.changeFilter.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(InventoryItemList, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.loadData();\n      this.loadTaxes();\n      this.loadManufactureList();\n      this.loadVendorList();\n    }\n  }, {\n    key: \"loadData\",\n    value: function loadData() {\n      var that = this;\n\n      var successFn = function successFn(data) {\n        that.setState(function (prevState) {\n          var inventoryItemList = [];\n\n          if (prevState.itemTypeFilter == \"ALL\") {\n            inventoryItemList = data;\n          } else {\n            data.forEach(function (item) {\n              if (item.item_type == prevState.itemTypeFilter) inventoryItemList.push(item);\n            });\n          }\n\n          return {\n            invantoryItems: data,\n            inventoryItemList: inventoryItemList\n          };\n        });\n      };\n\n      var errorFn = function errorFn() {};\n\n      getAPI(INVENTORY_ITEM_API, successFn, errorFn);\n    }\n  }, {\n    key: \"loadManufactureList\",\n    value: function loadManufactureList() {\n      var that = this;\n\n      var successFn = function successFn(data) {\n        that.setState({\n          manufacture_list: data\n        });\n      };\n\n      var errorFn = function errorFn() {};\n\n      getAPI(MANUFACTURER_API, successFn, errorFn);\n    }\n  }, {\n    key: \"loadTaxes\",\n    value: function loadTaxes() {\n      var that = this;\n\n      var successFn = function successFn(data) {\n        console.log(\"get table\");\n        that.setState({\n          taxes_list: data\n        });\n      };\n\n      var errorFn = function errorFn() {};\n\n      getAPI(interpolate(TAXES, [this.props.active_practiceId]), successFn, errorFn);\n    }\n  }, {\n    key: \"loadVendorList\",\n    value: function loadVendorList() {\n      var that = this;\n\n      var successFn = function successFn(data) {\n        that.setState({\n          vendor_list: data\n        });\n      };\n\n      var errorFn = function errorFn() {};\n\n      getAPI(VENDOR_API, successFn, errorFn);\n    }\n  }, {\n    key: \"deleteObject\",\n    value: function deleteObject(value) {\n      var that = this;\n\n      var successFn = function successFn(data) {\n        that.loadData();\n        console.log(\"Deleted\");\n      };\n\n      var errorFn = function errorFn() {};\n\n      deleteAPI(interpolate(SINGLE_INVENTORY_ITEM_API, [value]), successFn, errorFn);\n    }\n  }, {\n    key: \"setActionType\",\n    value: function setActionType(type, item_Id) {\n      this.setState({\n        itemId: item_Id,\n        actionType: type\n      });\n      this.showAddOrConsumeModal(true);\n    }\n  }, {\n    key: \"showAddOrConsumeModal\",\n    value: function showAddOrConsumeModal(type) {\n      this.setState({\n        stockModalVisibility: type\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var taxesdata = {};\n\n      if (this.state.taxes_list) {\n        this.state.taxes_list.forEach(function (tax) {\n          taxesdata[tax.id] = tax;\n        });\n      }\n\n      var manufacturerData = {};\n\n      if (this.state.manufacture_list) {\n        this.state.manufacture_list.forEach(function (manufacturer) {\n          manufacturerData[manufacturer.id] = manufacturer.name;\n        });\n      }\n\n      var vendorData = {};\n\n      if (this.state.vendor_list) {\n        this.state.vendor_list.forEach(function (vendor) {\n          vendorData[vendor.id] = vendor.name;\n        });\n      }\n\n      var that = this;\n      var columns = [{\n        title: 'Name',\n        dataIndex: 'name',\n        key: 'name' // render: (value,record) => <span>{record.inventory_item.name}</span>\n\n      }, {\n        title: 'Item Code',\n        dataIndex: 'code',\n        key: 'code' // render: (value,record) => <span>{record.inventory_item.code}</span>\n\n      }, {\n        title: 'Inventory Stock',\n        dataIndex: 'item_type_stock',\n        key: 'item_type_stock',\n        export: function _export(item_type_stock, record) {\n          var totalStock = 0;\n          if (item_type_stock.item_stock) item_type_stock.item_stock.forEach(function (stock) {\n            totalStock += Number.isInteger(stock.quantity) ? stock.quantity : 0;\n          });\n          return totalStock;\n        },\n        render: function render(item_type_stock, record) {\n          var totalStock = 0;\n          if (item_type_stock.item_stock) item_type_stock.item_stock.forEach(function (stock) {\n            totalStock += Number.isInteger(stock.quantity) ? stock.quantity : 0;\n          });\n          return React.createElement(\"span\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 214\n            },\n            __self: this\n          }, totalStock, \" \", totalStock <= record.re_order_level ? React.createElement(Tag, {\n            color: \"#f50\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 215\n            },\n            __self: this\n          }, \"Low\") : null);\n        }\n      }, {\n        title: 'Retail Price (INR)',\n        dataIndex: 'retail_price',\n        key: 'retail_price',\n        render: function render(value, record) {\n          return React.createElement(\"span\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 221\n            },\n            __self: this\n          }, record.retail_price, record.taxes && record.taxes.map(function (tax) {\n            return React.createElement(\"small\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 223\n              },\n              __self: this\n            }, \" \", taxesdata[tax] ? taxesdata[tax].name + \"@\" + taxesdata[tax].tax_value + \"%\" : null);\n          }));\n        }\n      }, {\n        title: 'Item type',\n        dataIndex: 'item_type',\n        key: 'item_type' // render: (value,record) => <span>{record.inventory_item.item_type}</span>\n\n      }, {\n        title: 'Reorder Level',\n        dataIndex: 're_order_level',\n        key: 're_order_level' // render: (value, record) => <span>{record.inventory_item.re_order_level}</span>\n\n      }, {\n        title: 'Manufacturer',\n        key: 'manufacturer',\n        export: function _export(text, record) {\n          return manufacturerData[record.manufacturer];\n        },\n        render: function render(text, record) {\n          return React.createElement(\"span\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 243\n            },\n            __self: this\n          }, \" \", manufacturerData[record.manufacturer]);\n        }\n      }, //     {\n      //     title:'Action',\n      //     render:(item)=>{\n      //         return <div>\n      //           <a onClick={()=>this.setActionType(ADD_STOCK,item.id)}>Add </a>\n      //             <Divider type=\"vertical\"/>\n      //             <a onClick={()=>this.setActionType(CONSUME_STOCK,item.id)}>Consume</a>\n      //         </div>\n      //     }\n      // },\n      {\n        title: 'Actions',\n        render: function render(item) {\n          return React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 259\n            },\n            __self: this\n          }, React.createElement(Link, {\n            to: \"/inventory/edit/\" + item.id,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 260\n            },\n            __self: this\n          }, \"Edit Details \"), React.createElement(Divider, {\n            type: \"vertical\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 261\n            },\n            __self: this\n          }), React.createElement(Link, {\n            to: \"/inventory/edit-item-type/\" + item.id,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 262\n            },\n            __self: this\n          }, \"Edit stock type \"), React.createElement(Divider, {\n            type: \"vertical\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 263\n            },\n            __self: this\n          }), React.createElement(Popconfirm, {\n            title: \"Are you sure delete this item?\",\n            onConfirm: function onConfirm() {\n              return that.deleteObject(item.id);\n            },\n            okText: \"Yes\",\n            cancelText: \"No\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 264\n            },\n            __self: this\n          }, React.createElement(\"a\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 266\n            },\n            __self: this\n          }, \"Delete\")));\n        }\n      }];\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 271\n        },\n        __self: this\n      }, React.createElement(Switch, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 272\n        },\n        __self: this\n      }, React.createElement(Route, {\n        path: \"/inventory/add\",\n        render: function render(route) {\n          return React.createElement(AddorEditInventoryItem, Object.assign({}, route, _this2.state, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 273\n            },\n            __self: this\n          }));\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 273\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: \"/inventory/edit-item-type/:id\",\n        render: function render(route) {\n          return React.createElement(AddItemType, Object.assign({}, route, _this2.state, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 275\n            },\n            __self: this\n          }));\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 274\n        },\n        __self: this\n      }), React.createElement(Route, {\n        exact: true,\n        path: \"/inventory/edit/:id\",\n        render: function render(route) {\n          return React.createElement(AddorEditInventoryItem, Object.assign({}, _this2.state, route, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 277\n            },\n            __self: this\n          }));\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 276\n        },\n        __self: this\n      }), React.createElement(Route, {\n        exact: true,\n        path: \"/inventory/consume-stock\",\n        render: function render(route) {\n          return React.createElement(AddOrConsumeStock, Object.assign({\n            key: CONSUME_STOCK,\n            type: CONSUME_STOCK,\n            loadData: _this2.loadData\n          }, _this2.state, route, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 279\n            },\n            __self: this\n          }));\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 278\n        },\n        __self: this\n      }), React.createElement(Route, {\n        exact: true,\n        path: \"/inventory/add-stock\",\n        render: function render(route) {\n          return React.createElement(AddOrConsumeStock, Object.assign({\n            key: ADD_STOCK,\n            type: ADD_STOCK,\n            loadData: _this2.loadData\n          }, _this2.state, route, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 284\n            },\n            __self: this\n          }));\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 283\n        },\n        __self: this\n      }), React.createElement(Route, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 288\n        },\n        __self: this\n      }, React.createElement(Card, {\n        title: \"Inventory List\",\n        extra: React.createElement(Button.Group, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 290\n          },\n          __self: this\n        }, React.createElement(Link, {\n          to: \"/inventory/add\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 291\n          },\n          __self: this\n        }, React.createElement(Button, {\n          type: \"primary\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 291\n          },\n          __self: this\n        }, React.createElement(Icon, {\n          type: \"plus\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 291\n          },\n          __self: this\n        }), \" Add Item\")), React.createElement(Link, {\n          to: \"/inventory/add-stock\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 293\n          },\n          __self: this\n        }, React.createElement(Button, {\n          type: \"primary\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 293\n          },\n          __self: this\n        }, \"Add Stock\")), React.createElement(Link, {\n          to: \"/inventory/consume-stock\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 294\n          },\n          __self: this\n        }, React.createElement(Button, {\n          type: \"primary\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 294\n          },\n          __self: this\n        }, \"Consume Stock\"))),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 289\n        },\n        __self: this\n      }, React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 296\n        },\n        __self: this\n      }, React.createElement(Radio.Group, {\n        name: \"itemTypeFilter\",\n        size: \"small\",\n        defaultValue: \"ALL\",\n        buttonStyle: \"solid\",\n        onChange: this.changeFilter,\n        style: {\n          margin: '10px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 297\n        },\n        __self: this\n      }, React.createElement(Radio.Button, {\n        value: \"ALL\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 299\n        },\n        __self: this\n      }, \"ALL\"), INVENTORY_ITEM_TYPE.map(function (item) {\n        return React.createElement(Radio.Button, {\n          value: item.value,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 301\n          },\n          __self: this\n        }, item.label);\n      })), React.createElement(Radio.Group, {\n        name: \"itemStockFilter\",\n        size: \"small\",\n        defaultValue: \"ALL\",\n        buttonStyle: \"solid\",\n        style: {\n          margin: '10px',\n          float: 'right'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 305\n        },\n        __self: this\n      }, React.createElement(Radio.Button, {\n        value: \"ALL\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 307\n        },\n        __self: this\n      }, \"ALL\"), React.createElement(Radio.Button, {\n        value: \"LOW\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 308\n        },\n        __self: this\n      }, \"Low\"), React.createElement(Radio.Button, {\n        value: \"EXPIRED\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 309\n        },\n        __self: this\n      }, \"Expired\"))), React.createElement(CustomizedTable, {\n        pagination: false,\n        bordered: true,\n        dataSource: this.state.inventoryItemList,\n        columns: columns,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 312\n        },\n        __self: this\n      }), React.createElement(Modal, {\n        visible: this.state.stockModalVisibility,\n        title: \"Stock\" + this.state.actionType,\n        onOk: function onOk() {\n          return _this2.showAddOrConsumeModal(false);\n        },\n        onCancel: function onCancel() {\n          return _this2.showAddOrConsumeModal(false);\n        },\n        footer: null,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 314\n        },\n        __self: this\n      }, React.createElement(AddOrConsumeStock, {\n        showAddOrConsumeModal: this.showAddOrConsumeModal,\n        itemId: this.state.itemId,\n        actionType: this.state.actionType,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 319\n        },\n        __self: this\n      }))))));\n    }\n  }]);\n\n  return InventoryItemList;\n}(React.Component);\n\nexport { InventoryItemList as default };","map":{"version":3,"sources":["/home/shivam/WorkSpace/bk-erp-front/src/app/components/inventory/inventoryItem/InventoryItemList.js"],"names":["React","Button","Card","Icon","Modal","Tag","Divider","Popconfirm","Row","Radio","getAPI","interpolate","deleteAPI","INVENTORY_ITEM_API","SINGLE_INVENTORY_ITEM_API","MANUFACTURER_API","TAXES","VENDOR_API","Link","Route","Switch","AddorEditInventoryItem","AddItemType","AddOrConsumeStock","ADD_STOCK","CONSUME_STOCK","INVENTORY_ITEM_TYPE","CustomizedTable","InventoryItemList","props","changeFilter","e","that","setState","target","name","value","prevState","filteredList","itemTypeFilter","itemStockFilter","invantoryItems","forEach","item","approved","item_type","item_stock_type","item_stock","sum","reduce","a","b","quantity","re_order_level","push","inventoryItemList","state","active_practiceId","stockModalVisibility","loadData","bind","showAddOrConsumeModal","setActionType","loadTaxes","loadManufactureList","loadVendorList","successFn","data","errorFn","manufacture_list","console","log","taxes_list","vendor_list","type","item_Id","itemId","actionType","taxesdata","tax","id","manufacturerData","manufacturer","vendorData","vendor","columns","title","dataIndex","key","export","item_type_stock","record","totalStock","stock","Number","isInteger","render","retail_price","taxes","map","tax_value","text","deleteObject","route","margin","label","float","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport {Button, Card, Icon, Modal, Tag, Divider, Popconfirm, Row, Radio} from \"antd\";\nimport {getAPI, interpolate, deleteAPI} from \"../../../utils/common\";\nimport {\n    INVENTORY_ITEM_API,\n    SINGLE_INVENTORY_ITEM_API,\n    MANUFACTURER_API,\n    TAXES,\n    VENDOR_API\n} from \"../../../constants/api\";\nimport {Link, Route, Switch} from \"react-router-dom\";\nimport AddorEditInventoryItem from \"./AddorEditInventoryItem\";\nimport AddItemType from \"./AddItemType\";\nimport AddOrConsumeStock from \"./AddOrConsumeStock\"\nimport {ADD_STOCK, CONSUME_STOCK, INVENTORY_ITEM_TYPE} from \"../../../constants/hardData\"\nimport CustomizedTable from \"../../common/CustomizedTable\";\n\nexport default class InventoryItemList extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            invantoryItems: [], //All List\n            inventoryItemList: [], // Filtered List\n            active_practiceId: this.props.active_practiceId,\n            stockModalVisibility: false,\n            itemTypeFilter: \"ALL\",\n            itemStockFilter: \"ALL\"\n        }\n        this.loadData = this.loadData.bind(this);\n        this.showAddOrConsumeModal = this.showAddOrConsumeModal.bind(this);\n        this.setActionType = this.setActionType.bind(this);\n        this.changeFilter = this.changeFilter.bind(this);\n    }\n\n    componentDidMount() {\n        this.loadData();\n        this.loadTaxes();\n        this.loadManufactureList();\n        this.loadVendorList();\n    }\n\n    loadData() {\n        let that = this;\n        let successFn = function (data) {\n            that.setState(function (prevState) {\n                let inventoryItemList = [];\n                if (prevState.itemTypeFilter == \"ALL\") {\n                    inventoryItemList = data\n                } else {\n                    data.forEach(function (item) {\n                        if (item.item_type == prevState.itemTypeFilter)\n                            inventoryItemList.push(item);\n                    })\n                }\n                return {\n                    invantoryItems: data,\n                    inventoryItemList: inventoryItemList\n                }\n            })\n        }\n        let errorFn = function () {\n        }\n        getAPI(INVENTORY_ITEM_API, successFn, errorFn);\n    }\n\n    loadManufactureList() {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                manufacture_list: data\n            })\n        }\n        let errorFn = function () {\n        }\n        getAPI(MANUFACTURER_API, successFn, errorFn);\n    }\n\n    loadTaxes() {\n        var that = this;\n        let successFn = function (data) {\n            console.log(\"get table\");\n            that.setState({\n                taxes_list: data,\n            })\n        };\n        let errorFn = function () {\n        };\n        getAPI(interpolate(TAXES, [this.props.active_practiceId]), successFn, errorFn);\n\n    }\n\n    loadVendorList() {\n        let that = this;\n        let successFn = function (data) {\n            that.setState({\n                vendor_list: data\n            })\n        }\n        let errorFn = function () {\n\n        }\n        getAPI(VENDOR_API, successFn, errorFn);\n    }\n\n    deleteObject(value) {\n        var that = this;\n        let successFn = function (data) {\n            that.loadData();\n            console.log(\"Deleted\");\n        };\n        let errorFn = function () {\n        };\n        deleteAPI(interpolate(SINGLE_INVENTORY_ITEM_API, [value]), successFn, errorFn);\n\n    }\n\n    setActionType(type, item_Id) {\n        this.setState({\n            itemId: item_Id,\n            actionType: type,\n        })\n        this.showAddOrConsumeModal(true);\n    }\n\n    showAddOrConsumeModal(type) {\n        this.setState({\n            stockModalVisibility: type,\n        })\n    }\n\n    changeFilter = (e) => {\n        let that = this;\n        this.setState({\n            [e.target.name]: e.target.value\n        }, function () {\n            that.setState(function (prevState) {\n                let filteredList = [];\n                if (prevState.itemTypeFilter == \"ALL\" && prevState.itemStockFilter == \"ALL\") {\n                    filteredList = prevState.invantoryItems;\n                } else {\n                    prevState.invantoryItems.forEach(function (item) {\n                        let approved = 0;\n                        if (prevState.itemTypeFilter == \"ALL\" || prevState.itemTypeFilter == item.item_type) {\n                            approved += 1\n                        }\n                        if (prevState.itemStockFilter == 'All') {\n                            approved += 1\n                        } else if (prevState.itemStockFilter == 'LOW' && item.item_stock_type.item_stock) {\n                            let sum = item.item_stock_type.item_stock.reduce(function (a, b) {\n                                return a.quantity + b.quantity;\n                            }, 0);\n                            if (sum < item.re_order_level) {\n                                approved += 1\n                            }\n                        }\n                        if (approved >= 1) {\n                            filteredList.push(item)\n                        }\n                    });\n                }\n                return {inventoryItemList: filteredList}\n            })\n        })\n    }\n\n    render() {\n        const taxesdata = {};\n        if (this.state.taxes_list) {\n            this.state.taxes_list.forEach(function (tax) {\n                taxesdata[tax.id] = tax;\n            })\n        }\n        const manufacturerData = {}\n        if (this.state.manufacture_list) {\n            this.state.manufacture_list.forEach(function (manufacturer) {\n                manufacturerData[manufacturer.id] = manufacturer.name;\n            })\n        }\n        const vendorData = {}\n        if (this.state.vendor_list) {\n            this.state.vendor_list.forEach(function (vendor) {\n                vendorData[vendor.id] = vendor.name;\n            })\n        }\n        let that = this;\n        let columns = [{\n            title: 'Name',\n            dataIndex: 'name',\n            key: 'name',\n            // render: (value,record) => <span>{record.inventory_item.name}</span>\n        }, {\n            title: 'Item Code',\n            dataIndex: 'code',\n            key: 'code',\n            // render: (value,record) => <span>{record.inventory_item.code}</span>\n        }, {\n            title: 'Inventory Stock',\n            dataIndex: 'item_type_stock',\n            key: 'item_type_stock',\n            export: function (item_type_stock, record) {\n                let totalStock = 0;\n                if (item_type_stock.item_stock)\n                    item_type_stock.item_stock.forEach(function (stock) {\n                        totalStock += (Number.isInteger(stock.quantity) ? stock.quantity : 0)\n                    });\n                return totalStock;\n            },\n            render: function (item_type_stock, record) {\n                let totalStock = 0;\n                if (item_type_stock.item_stock)\n                    item_type_stock.item_stock.forEach(function (stock) {\n                        totalStock += (Number.isInteger(stock.quantity) ? stock.quantity : 0)\n                    });\n                return <span>{totalStock} {totalStock <= record.re_order_level ?\n                    <Tag color=\"#f50\">Low</Tag> : null}</span>;\n            }\n        }, {\n            title: 'Retail Price (INR)',\n            dataIndex: 'retail_price',\n            key: 'retail_price',\n            render: (value, record) => <span>{record.retail_price}\n                {record.taxes && record.taxes.map(tax =>\n                    <small> {(taxesdata[tax] ? taxesdata[tax].name + \"@\" + taxesdata[tax].tax_value + \"%\" : null)}</small>\n                )}\n                </span>\n        }, {\n            title: 'Item type',\n            dataIndex: 'item_type',\n            key: 'item_type',\n            // render: (value,record) => <span>{record.inventory_item.item_type}</span>\n        }, {\n            title: 'Reorder Level',\n            dataIndex: 're_order_level',\n            key: 're_order_level',\n            // render: (value, record) => <span>{record.inventory_item.re_order_level}</span>\n        }, {\n            title: 'Manufacturer',\n            key: 'manufacturer',\n            export: function (text, record) {\n                return manufacturerData[record.manufacturer]\n            },\n            render: (text, record) => (\n                <span> {manufacturerData[record.manufacturer]}</span>\n            )\n        },\n            //     {\n            //     title:'Action',\n            //     render:(item)=>{\n            //         return <div>\n            //           <a onClick={()=>this.setActionType(ADD_STOCK,item.id)}>Add </a>\n            //             <Divider type=\"vertical\"/>\n            //             <a onClick={()=>this.setActionType(CONSUME_STOCK,item.id)}>Consume</a>\n            //         </div>\n            //     }\n            // },\n            {\n                title: 'Actions',\n                render: (item) => {\n                    return <div>\n                        <Link to={\"/inventory/edit/\" + item.id}>Edit Details </Link>\n                        <Divider type=\"vertical\"/>\n                        <Link to={\"/inventory/edit-item-type/\" + item.id}>Edit stock type </Link>\n                        <Divider type=\"vertical\"/>\n                        <Popconfirm title=\"Are you sure delete this item?\"\n                                    onConfirm={() => that.deleteObject(item.id)} okText=\"Yes\" cancelText=\"No\">\n                            <a>Delete</a>\n                        </Popconfirm>\n                    </div>\n                }\n            }];\n        return <div>\n            <Switch>\n                <Route path=\"/inventory/add\" render={(route) => <AddorEditInventoryItem {...route} {...this.state}/>}/>\n                <Route path=\"/inventory/edit-item-type/:id\"\n                       render={(route) => <AddItemType {...route} {...this.state}/>}/>\n                <Route exact path='/inventory/edit/:id'\n                       render={(route) => <AddorEditInventoryItem {...this.state} {...route}/>}/>\n                <Route exact path='/inventory/consume-stock'\n                       render={(route) => <AddOrConsumeStock key={CONSUME_STOCK}\n                                                             type={CONSUME_STOCK}\n                                                             loadData={this.loadData}\n                                                             {...this.state} {...route}/>}/>\n                <Route exact path='/inventory/add-stock'\n                       render={(route) => <AddOrConsumeStock key={ADD_STOCK}\n                                                             type={ADD_STOCK}\n                                                             loadData={this.loadData}\n                                                             {...this.state} {...route}/>}/>\n                <Route>\n                    <Card title=\"Inventory List\"\n                          extra={<Button.Group>\n                              <Link to=\"/inventory/add\"><Button type=\"primary\"><Icon type=\"plus\"/> Add\n                                  Item</Button></Link>\n                              <Link to=\"/inventory/add-stock\"><Button type=\"primary\">Add Stock</Button></Link>\n                              <Link to=\"/inventory/consume-stock\"><Button type=\"primary\">Consume Stock</Button></Link>\n                          </Button.Group>}>\n                        <Row>\n                            <Radio.Group name=\"itemTypeFilter\" size=\"small\" defaultValue={\"ALL\"} buttonStyle=\"solid\"\n                                         onChange={this.changeFilter} style={{margin: '10px'}}>\n                                <Radio.Button value={\"ALL\"}>ALL</Radio.Button>\n                                {INVENTORY_ITEM_TYPE.map(item =>\n                                    <Radio.Button value={item.value}>\n                                        {item.label}\n                                    </Radio.Button>)}\n                            </Radio.Group>\n                            <Radio.Group name=\"itemStockFilter\" size=\"small\" defaultValue={\"ALL\"} buttonStyle=\"solid\"\n                                         style={{margin: '10px', float: 'right'}}>\n                                <Radio.Button value={\"ALL\"}>ALL</Radio.Button>\n                                <Radio.Button value={\"LOW\"}>Low</Radio.Button>\n                                <Radio.Button value={\"EXPIRED\"}>Expired</Radio.Button>\n                            </Radio.Group>\n                        </Row>\n                        <CustomizedTable pagination={false} bordered={true} dataSource={this.state.inventoryItemList}\n                                         columns={columns}/>\n                        <Modal visible={this.state.stockModalVisibility}\n                               title={\"Stock\" + this.state.actionType}\n                               onOk={() => this.showAddOrConsumeModal(false)}\n                               onCancel={() => this.showAddOrConsumeModal(false)}\n                               footer={null}>\n                            <AddOrConsumeStock showAddOrConsumeModal={this.showAddOrConsumeModal}\n                                               itemId={this.state.itemId}\n                                               actionType={this.state.actionType}/>\n                        </Modal>\n                    </Card>\n                </Route>\n            </Switch>\n\n        </div>\n    }\n\n\n}\n"]},"metadata":{},"sourceType":"module"}